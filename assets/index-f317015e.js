(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();var z$=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function m2(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var V0={},mI={get exports(){return V0},set exports(n){V0=n}},g2={},qe={},gI={get exports(){return qe},set exports(n){qe=n}},er={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dg=Symbol.for("react.element"),vI=Symbol.for("react.portal"),yI=Symbol.for("react.fragment"),xI=Symbol.for("react.strict_mode"),wI=Symbol.for("react.profiler"),SI=Symbol.for("react.provider"),_I=Symbol.for("react.context"),bI=Symbol.for("react.forward_ref"),MI=Symbol.for("react.suspense"),EI=Symbol.for("react.memo"),AI=Symbol.for("react.lazy"),eM=Symbol.iterator;function TI(n){return n===null||typeof n!="object"?null:(n=eM&&n[eM]||n["@@iterator"],typeof n=="function"?n:null)}var T4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C4=Object.assign,L4={};function cm(n,e,t){this.props=n,this.context=e,this.refs=L4,this.updater=t||T4}cm.prototype.isReactComponent={};cm.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};cm.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function P4(){}P4.prototype=cm.prototype;function N5(n,e,t){this.props=n,this.context=e,this.refs=L4,this.updater=t||T4}var I5=N5.prototype=new P4;I5.constructor=N5;C4(I5,cm.prototype);I5.isPureReactComponent=!0;var tM=Array.isArray,R4=Object.prototype.hasOwnProperty,D5={current:null},k4={key:!0,ref:!0,__self:!0,__source:!0};function N4(n,e,t){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)R4.call(e,r)&&!k4.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:Dg,type:n,key:s,ref:o,props:i,_owner:D5.current}}function CI(n,e){return{$$typeof:Dg,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function O5(n){return typeof n=="object"&&n!==null&&n.$$typeof===Dg}function LI(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var nM=/\/+/g;function Rx(n,e){return typeof n=="object"&&n!==null&&n.key!=null?LI(""+n.key):e.toString(36)}function Zv(n,e,t,r,i){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Dg:case vI:o=!0}}if(o)return o=n,i=i(o),n=r===""?"."+Rx(o,0):r,tM(i)?(t="",n!=null&&(t=n.replace(nM,"$&/")+"/"),Zv(i,e,t,"",function(u){return u})):i!=null&&(O5(i)&&(i=CI(i,t+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(nM,"$&/")+"/")+n)),e.push(i)),1;if(o=0,r=r===""?".":r+":",tM(n))for(var a=0;a<n.length;a++){s=n[a];var l=r+Rx(s,a);o+=Zv(s,e,t,l,i)}else if(l=TI(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=r+Rx(s,a++),o+=Zv(s,e,t,l,i);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function A1(n,e,t){if(n==null)return n;var r=[],i=0;return Zv(n,r,"","",function(s){return e.call(t,s,i++)}),r}function PI(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var po={current:null},Kv={transition:null},RI={ReactCurrentDispatcher:po,ReactCurrentBatchConfig:Kv,ReactCurrentOwner:D5};er.Children={map:A1,forEach:function(n,e,t){A1(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return A1(n,function(){e++}),e},toArray:function(n){return A1(n,function(e){return e})||[]},only:function(n){if(!O5(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};er.Component=cm;er.Fragment=yI;er.Profiler=wI;er.PureComponent=N5;er.StrictMode=xI;er.Suspense=MI;er.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=RI;er.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=C4({},n.props),i=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=D5.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)R4.call(e,l)&&!k4.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Dg,type:n.type,key:i,ref:s,props:r,_owner:o}};er.createContext=function(n){return n={$$typeof:_I,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:SI,_context:n},n.Consumer=n};er.createElement=N4;er.createFactory=function(n){var e=N4.bind(null,n);return e.type=n,e};er.createRef=function(){return{current:null}};er.forwardRef=function(n){return{$$typeof:bI,render:n}};er.isValidElement=O5;er.lazy=function(n){return{$$typeof:AI,_payload:{_status:-1,_result:n},_init:PI}};er.memo=function(n,e){return{$$typeof:EI,type:n,compare:e===void 0?null:e}};er.startTransition=function(n){var e=Kv.transition;Kv.transition={};try{n()}finally{Kv.transition=e}};er.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};er.useCallback=function(n,e){return po.current.useCallback(n,e)};er.useContext=function(n){return po.current.useContext(n)};er.useDebugValue=function(){};er.useDeferredValue=function(n){return po.current.useDeferredValue(n)};er.useEffect=function(n,e){return po.current.useEffect(n,e)};er.useId=function(){return po.current.useId()};er.useImperativeHandle=function(n,e,t){return po.current.useImperativeHandle(n,e,t)};er.useInsertionEffect=function(n,e){return po.current.useInsertionEffect(n,e)};er.useLayoutEffect=function(n,e){return po.current.useLayoutEffect(n,e)};er.useMemo=function(n,e){return po.current.useMemo(n,e)};er.useReducer=function(n,e,t){return po.current.useReducer(n,e,t)};er.useRef=function(n){return po.current.useRef(n)};er.useState=function(n){return po.current.useState(n)};er.useSyncExternalStore=function(n,e,t){return po.current.useSyncExternalStore(n,e,t)};er.useTransition=function(){return po.current.useTransition()};er.version="18.2.0";(function(n){n.exports=er})(gI);const I4=m2(qe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kI=qe,NI=Symbol.for("react.element"),II=Symbol.for("react.fragment"),DI=Object.prototype.hasOwnProperty,OI=kI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,FI={key:!0,ref:!0,__self:!0,__source:!0};function D4(n,e,t){var r,i={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)DI.call(e,r)&&!FI.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:NI,type:n,key:s,ref:o,props:i,_owner:OI.current}}g2.Fragment=II;g2.jsx=D4;g2.jsxs=D4;(function(n){n.exports=g2})(mI);const jp=V0.Fragment,pe=V0.jsx,gt=V0.jsxs;var ES={},UI={get exports(){return ES},set exports(n){ES=n}},ia={},AS={},BI={get exports(){return AS},set exports(n){AS=n}},O4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(W,Y){var $=W.length;W.push(Y);e:for(;0<$;){var oe=$-1>>>1,D=W[oe];if(0<i(D,Y))W[oe]=Y,W[$]=D,$=oe;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Y=W[0],$=W.pop();if($!==Y){W[0]=$;e:for(var oe=0,D=W.length,j=D>>>1;oe<j;){var K=2*(oe+1)-1,ae=W[K],fe=K+1,we=W[fe];if(0>i(ae,$))fe<D&&0>i(we,ae)?(W[oe]=we,W[fe]=$,oe=fe):(W[oe]=ae,W[K]=$,oe=K);else if(fe<D&&0>i(we,$))W[oe]=we,W[fe]=$,oe=fe;else break e}}return Y}function i(W,Y){var $=W.sortIndex-Y.sortIndex;return $!==0?$:W.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,m=!1,v=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(W){for(var Y=t(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=W)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(u)}}function T(W){if(w=!1,_(W),!v)if(t(l)!==null)v=!0,ie(L);else{var Y=t(u);Y!==null&&ce(T,Y.startTime-W)}}function L(W,Y){v=!1,w&&(w=!1,g(k),k=-1),m=!0;var $=d;try{for(_(Y),h=t(l);h!==null&&(!(h.expirationTime>Y)||W&&!F());){var oe=h.callback;if(typeof oe=="function"){h.callback=null,d=h.priorityLevel;var D=oe(h.expirationTime<=Y);Y=n.unstable_now(),typeof D=="function"?h.callback=D:h===t(l)&&r(l),_(Y)}else r(l);h=t(l)}if(h!==null)var j=!0;else{var K=t(u);K!==null&&ce(T,K.startTime-Y),j=!1}return j}finally{h=null,d=$,m=!1}}var P=!1,N=null,k=-1,R=5,U=-1;function F(){return!(n.unstable_now()-U<R)}function z(){if(N!==null){var W=n.unstable_now();U=W;var Y=!0;try{Y=N(!0,W)}finally{Y?V():(P=!1,N=null)}}else P=!1}var V;if(typeof S=="function")V=function(){S(z)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,J=G.port2;G.port1.onmessage=z,V=function(){J.postMessage(null)}}else V=function(){x(z,0)};function ie(W){N=W,P||(P=!0,V())}function ce(W,Y){k=x(function(){W(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,ie(L))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(W){switch(d){case 1:case 2:case 3:var Y=3;break;default:Y=d}var $=d;d=Y;try{return W()}finally{d=$}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,Y){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var $=d;d=W;try{return Y()}finally{d=$}},n.unstable_scheduleCallback=function(W,Y,$){var oe=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?oe+$:oe):$=oe,W){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=$+D,W={id:c++,callback:Y,priorityLevel:W,startTime:$,expirationTime:D,sortIndex:-1},$>oe?(W.sortIndex=$,e(u,W),t(l)===null&&W===t(u)&&(w?(g(k),k=-1):w=!0,ce(T,$-oe))):(W.sortIndex=D,e(l,W),v||m||(v=!0,ie(L))),W},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(W){var Y=d;return function(){var $=d;d=Y;try{return W.apply(this,arguments)}finally{d=$}}}})(O4);(function(n){n.exports=O4})(BI);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F4=qe,ra=AS;function Rt(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var U4=new Set,W0={};function Jf(n,e){qp(n,e),qp(n+"Capture",e)}function qp(n,e){for(W0[n]=e,n=0;n<e.length;n++)U4.add(e[n])}var $u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),TS=Object.prototype.hasOwnProperty,zI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rM={},iM={};function HI(n){return TS.call(iM,n)?!0:TS.call(rM,n)?!1:zI.test(n)?iM[n]=!0:(rM[n]=!0,!1)}function GI(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function VI(n,e,t,r){if(e===null||typeof e>"u"||GI(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mo(n,e,t,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var ks={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){ks[n]=new mo(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];ks[e]=new mo(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){ks[n]=new mo(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){ks[n]=new mo(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){ks[n]=new mo(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){ks[n]=new mo(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){ks[n]=new mo(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){ks[n]=new mo(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){ks[n]=new mo(n,5,!1,n.toLowerCase(),null,!1,!1)});var F5=/[\-:]([a-z])/g;function U5(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(F5,U5);ks[e]=new mo(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(F5,U5);ks[e]=new mo(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(F5,U5);ks[e]=new mo(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){ks[n]=new mo(n,1,!1,n.toLowerCase(),null,!1,!1)});ks.xlinkHref=new mo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){ks[n]=new mo(n,1,!1,n.toLowerCase(),null,!0,!0)});function B5(n,e,t,r){var i=ks.hasOwnProperty(e)?ks[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(VI(e,t,i,r)&&(t=null),r||i===null?HI(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var nc=F4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T1=Symbol.for("react.element"),pp=Symbol.for("react.portal"),mp=Symbol.for("react.fragment"),z5=Symbol.for("react.strict_mode"),CS=Symbol.for("react.profiler"),B4=Symbol.for("react.provider"),z4=Symbol.for("react.context"),H5=Symbol.for("react.forward_ref"),LS=Symbol.for("react.suspense"),PS=Symbol.for("react.suspense_list"),G5=Symbol.for("react.memo"),Xc=Symbol.for("react.lazy"),H4=Symbol.for("react.offscreen"),sM=Symbol.iterator;function Vm(n){return n===null||typeof n!="object"?null:(n=sM&&n[sM]||n["@@iterator"],typeof n=="function"?n:null)}var mi=Object.assign,kx;function p0(n){if(kx===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);kx=e&&e[1]||""}return`
`+kx+n}var Nx=!1;function Ix(n,e){if(!n||Nx)return"";Nx=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Nx=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?p0(n):""}function WI(n){switch(n.tag){case 5:return p0(n.type);case 16:return p0("Lazy");case 13:return p0("Suspense");case 19:return p0("SuspenseList");case 0:case 2:case 15:return n=Ix(n.type,!1),n;case 11:return n=Ix(n.type.render,!1),n;case 1:return n=Ix(n.type,!0),n;default:return""}}function RS(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case mp:return"Fragment";case pp:return"Portal";case CS:return"Profiler";case z5:return"StrictMode";case LS:return"Suspense";case PS:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case z4:return(n.displayName||"Context")+".Consumer";case B4:return(n._context.displayName||"Context")+".Provider";case H5:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case G5:return e=n.displayName||null,e!==null?e:RS(n.type)||"Memo";case Xc:e=n._payload,n=n._init;try{return RS(n(e))}catch{}}return null}function jI(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return RS(e);case 8:return e===z5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xh(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function G4(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function qI(n){var e=G4(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function C1(n){n._valueTracker||(n._valueTracker=qI(n))}function V4(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=G4(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Ay(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function kS(n,e){var t=e.checked;return mi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function oM(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=xh(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function W4(n,e){e=e.checked,e!=null&&B5(n,"checked",e,!1)}function NS(n,e){W4(n,e);var t=xh(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?IS(n,e.type,t):e.hasOwnProperty("defaultValue")&&IS(n,e.type,xh(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function aM(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function IS(n,e,t){(e!=="number"||Ay(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var m0=Array.isArray;function Pp(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+xh(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function DS(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Rt(91));return mi({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function lM(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Rt(92));if(m0(t)){if(1<t.length)throw Error(Rt(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:xh(t)}}function j4(n,e){var t=xh(e.value),r=xh(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function uM(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function q4(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function OS(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?q4(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var L1,X4=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(L1=L1||document.createElement("div"),L1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=L1.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function j0(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var _0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},XI=["Webkit","ms","Moz","O"];Object.keys(_0).forEach(function(n){XI.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),_0[e]=_0[n]})});function Y4(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||_0.hasOwnProperty(n)&&_0[n]?(""+e).trim():e+"px"}function $4(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=Y4(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var YI=mi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function FS(n,e){if(e){if(YI[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Rt(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Rt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Rt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Rt(62))}}function US(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var BS=null;function V5(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var zS=null,Rp=null,kp=null;function cM(n){if(n=Ug(n)){if(typeof zS!="function")throw Error(Rt(280));var e=n.stateNode;e&&(e=S2(e),zS(n.stateNode,n.type,e))}}function Z4(n){Rp?kp?kp.push(n):kp=[n]:Rp=n}function K4(){if(Rp){var n=Rp,e=kp;if(kp=Rp=null,cM(n),e)for(n=0;n<e.length;n++)cM(e[n])}}function J4(n,e){return n(e)}function Q4(){}var Dx=!1;function eC(n,e,t){if(Dx)return n(e,t);Dx=!0;try{return J4(n,e,t)}finally{Dx=!1,(Rp!==null||kp!==null)&&(Q4(),K4())}}function q0(n,e){var t=n.stateNode;if(t===null)return null;var r=S2(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Rt(231,e,typeof t));return t}var HS=!1;if($u)try{var Wm={};Object.defineProperty(Wm,"passive",{get:function(){HS=!0}}),window.addEventListener("test",Wm,Wm),window.removeEventListener("test",Wm,Wm)}catch{HS=!1}function $I(n,e,t,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var b0=!1,Ty=null,Cy=!1,GS=null,ZI={onError:function(n){b0=!0,Ty=n}};function KI(n,e,t,r,i,s,o,a,l){b0=!1,Ty=null,$I.apply(ZI,arguments)}function JI(n,e,t,r,i,s,o,a,l){if(KI.apply(this,arguments),b0){if(b0){var u=Ty;b0=!1,Ty=null}else throw Error(Rt(198));Cy||(Cy=!0,GS=u)}}function Qf(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function tC(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function hM(n){if(Qf(n)!==n)throw Error(Rt(188))}function QI(n){var e=n.alternate;if(!e){if(e=Qf(n),e===null)throw Error(Rt(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===t)return hM(i),n;if(s===r)return hM(i),e;s=s.sibling}throw Error(Rt(188))}if(t.return!==r.return)t=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===t){o=!0,t=i,r=s;break}if(a===r){o=!0,r=i,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,r=i;break}if(a===r){o=!0,r=s,t=i;break}a=a.sibling}if(!o)throw Error(Rt(189))}}if(t.alternate!==r)throw Error(Rt(190))}if(t.tag!==3)throw Error(Rt(188));return t.stateNode.current===t?n:e}function nC(n){return n=QI(n),n!==null?rC(n):null}function rC(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=rC(n);if(e!==null)return e;n=n.sibling}return null}var iC=ra.unstable_scheduleCallback,fM=ra.unstable_cancelCallback,e6=ra.unstable_shouldYield,t6=ra.unstable_requestPaint,ki=ra.unstable_now,n6=ra.unstable_getCurrentPriorityLevel,W5=ra.unstable_ImmediatePriority,sC=ra.unstable_UserBlockingPriority,Ly=ra.unstable_NormalPriority,r6=ra.unstable_LowPriority,oC=ra.unstable_IdlePriority,v2=null,Yl=null;function i6(n){if(Yl&&typeof Yl.onCommitFiberRoot=="function")try{Yl.onCommitFiberRoot(v2,n,void 0,(n.current.flags&128)===128)}catch{}}var dl=Math.clz32?Math.clz32:a6,s6=Math.log,o6=Math.LN2;function a6(n){return n>>>=0,n===0?32:31-(s6(n)/o6|0)|0}var P1=64,R1=4194304;function g0(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Py(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~i;a!==0?r=g0(a):(s&=o,s!==0&&(r=g0(s)))}else o=t&~i,o!==0?r=g0(o):s!==0&&(r=g0(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-dl(e),i=1<<t,r|=n[t],e&=~i;return r}function l6(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function u6(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-dl(s),a=1<<o,l=i[o];l===-1?(!(a&t)||a&r)&&(i[o]=l6(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function VS(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function aC(){var n=P1;return P1<<=1,!(P1&4194240)&&(P1=64),n}function Ox(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Og(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-dl(e),n[e]=t}function c6(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-dl(t),s=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~s}}function j5(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-dl(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Cr=0;function lC(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var uC,q5,cC,hC,fC,WS=!1,k1=[],oh=null,ah=null,lh=null,X0=new Map,Y0=new Map,Zc=[],h6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dM(n,e){switch(n){case"focusin":case"focusout":oh=null;break;case"dragenter":case"dragleave":ah=null;break;case"mouseover":case"mouseout":lh=null;break;case"pointerover":case"pointerout":X0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Y0.delete(e.pointerId)}}function jm(n,e,t,r,i,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ug(e),e!==null&&q5(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function f6(n,e,t,r,i){switch(e){case"focusin":return oh=jm(oh,n,e,t,r,i),!0;case"dragenter":return ah=jm(ah,n,e,t,r,i),!0;case"mouseover":return lh=jm(lh,n,e,t,r,i),!0;case"pointerover":var s=i.pointerId;return X0.set(s,jm(X0.get(s)||null,n,e,t,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Y0.set(s,jm(Y0.get(s)||null,n,e,t,r,i)),!0}return!1}function dC(n){var e=_f(n.target);if(e!==null){var t=Qf(e);if(t!==null){if(e=t.tag,e===13){if(e=tC(t),e!==null){n.blockedOn=e,fC(n.priority,function(){cC(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Jv(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=jS(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);BS=r,t.target.dispatchEvent(r),BS=null}else return e=Ug(t),e!==null&&q5(e),n.blockedOn=t,!1;e.shift()}return!0}function pM(n,e,t){Jv(n)&&t.delete(e)}function d6(){WS=!1,oh!==null&&Jv(oh)&&(oh=null),ah!==null&&Jv(ah)&&(ah=null),lh!==null&&Jv(lh)&&(lh=null),X0.forEach(pM),Y0.forEach(pM)}function qm(n,e){n.blockedOn===e&&(n.blockedOn=null,WS||(WS=!0,ra.unstable_scheduleCallback(ra.unstable_NormalPriority,d6)))}function $0(n){function e(i){return qm(i,n)}if(0<k1.length){qm(k1[0],n);for(var t=1;t<k1.length;t++){var r=k1[t];r.blockedOn===n&&(r.blockedOn=null)}}for(oh!==null&&qm(oh,n),ah!==null&&qm(ah,n),lh!==null&&qm(lh,n),X0.forEach(e),Y0.forEach(e),t=0;t<Zc.length;t++)r=Zc[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Zc.length&&(t=Zc[0],t.blockedOn===null);)dC(t),t.blockedOn===null&&Zc.shift()}var Np=nc.ReactCurrentBatchConfig,Ry=!0;function p6(n,e,t,r){var i=Cr,s=Np.transition;Np.transition=null;try{Cr=1,X5(n,e,t,r)}finally{Cr=i,Np.transition=s}}function m6(n,e,t,r){var i=Cr,s=Np.transition;Np.transition=null;try{Cr=4,X5(n,e,t,r)}finally{Cr=i,Np.transition=s}}function X5(n,e,t,r){if(Ry){var i=jS(n,e,t,r);if(i===null)qx(n,e,r,ky,t),dM(n,r);else if(f6(i,n,e,t,r))r.stopPropagation();else if(dM(n,r),e&4&&-1<h6.indexOf(n)){for(;i!==null;){var s=Ug(i);if(s!==null&&uC(s),s=jS(n,e,t,r),s===null&&qx(n,e,r,ky,t),s===i)break;i=s}i!==null&&r.stopPropagation()}else qx(n,e,r,null,t)}}var ky=null;function jS(n,e,t,r){if(ky=null,n=V5(r),n=_f(n),n!==null)if(e=Qf(n),e===null)n=null;else if(t=e.tag,t===13){if(n=tC(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return ky=n,null}function pC(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(n6()){case W5:return 1;case sC:return 4;case Ly:case r6:return 16;case oC:return 536870912;default:return 16}default:return 16}}var eh=null,Y5=null,Qv=null;function mC(){if(Qv)return Qv;var n,e=Y5,t=e.length,r,i="value"in eh?eh.value:eh.textContent,s=i.length;for(n=0;n<t&&e[n]===i[n];n++);var o=t-n;for(r=1;r<=o&&e[t-r]===i[s-r];r++);return Qv=i.slice(n,1<r?1-r:void 0)}function ey(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function N1(){return!0}function mM(){return!1}function sa(n){function e(t,r,i,s,o){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?N1:mM,this.isPropagationStopped=mM,this}return mi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=N1)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=N1)},persist:function(){},isPersistent:N1}),e}var hm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$5=sa(hm),Fg=mi({},hm,{view:0,detail:0}),g6=sa(Fg),Fx,Ux,Xm,y2=mi({},Fg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Z5,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Xm&&(Xm&&n.type==="mousemove"?(Fx=n.screenX-Xm.screenX,Ux=n.screenY-Xm.screenY):Ux=Fx=0,Xm=n),Fx)},movementY:function(n){return"movementY"in n?n.movementY:Ux}}),gM=sa(y2),v6=mi({},y2,{dataTransfer:0}),y6=sa(v6),x6=mi({},Fg,{relatedTarget:0}),Bx=sa(x6),w6=mi({},hm,{animationName:0,elapsedTime:0,pseudoElement:0}),S6=sa(w6),_6=mi({},hm,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),b6=sa(_6),M6=mi({},hm,{data:0}),vM=sa(M6),E6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},A6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},T6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function C6(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=T6[n])?!!e[n]:!1}function Z5(){return C6}var L6=mi({},Fg,{key:function(n){if(n.key){var e=E6[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=ey(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?A6[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Z5,charCode:function(n){return n.type==="keypress"?ey(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ey(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),P6=sa(L6),R6=mi({},y2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yM=sa(R6),k6=mi({},Fg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Z5}),N6=sa(k6),I6=mi({},hm,{propertyName:0,elapsedTime:0,pseudoElement:0}),D6=sa(I6),O6=mi({},y2,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),F6=sa(O6),U6=[9,13,27,32],K5=$u&&"CompositionEvent"in window,M0=null;$u&&"documentMode"in document&&(M0=document.documentMode);var B6=$u&&"TextEvent"in window&&!M0,gC=$u&&(!K5||M0&&8<M0&&11>=M0),xM=String.fromCharCode(32),wM=!1;function vC(n,e){switch(n){case"keyup":return U6.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yC(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var gp=!1;function z6(n,e){switch(n){case"compositionend":return yC(e);case"keypress":return e.which!==32?null:(wM=!0,xM);case"textInput":return n=e.data,n===xM&&wM?null:n;default:return null}}function H6(n,e){if(gp)return n==="compositionend"||!K5&&vC(n,e)?(n=mC(),Qv=Y5=eh=null,gp=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return gC&&e.locale!=="ko"?null:e.data;default:return null}}var G6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function SM(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!G6[n.type]:e==="textarea"}function xC(n,e,t,r){Z4(r),e=Ny(e,"onChange"),0<e.length&&(t=new $5("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var E0=null,Z0=null;function V6(n){PC(n,0)}function x2(n){var e=xp(n);if(V4(e))return n}function W6(n,e){if(n==="change")return e}var wC=!1;if($u){var zx;if($u){var Hx="oninput"in document;if(!Hx){var _M=document.createElement("div");_M.setAttribute("oninput","return;"),Hx=typeof _M.oninput=="function"}zx=Hx}else zx=!1;wC=zx&&(!document.documentMode||9<document.documentMode)}function bM(){E0&&(E0.detachEvent("onpropertychange",SC),Z0=E0=null)}function SC(n){if(n.propertyName==="value"&&x2(Z0)){var e=[];xC(e,Z0,n,V5(n)),eC(V6,e)}}function j6(n,e,t){n==="focusin"?(bM(),E0=e,Z0=t,E0.attachEvent("onpropertychange",SC)):n==="focusout"&&bM()}function q6(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return x2(Z0)}function X6(n,e){if(n==="click")return x2(e)}function Y6(n,e){if(n==="input"||n==="change")return x2(e)}function $6(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var ml=typeof Object.is=="function"?Object.is:$6;function K0(n,e){if(ml(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!TS.call(e,i)||!ml(n[i],e[i]))return!1}return!0}function MM(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function EM(n,e){var t=MM(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=MM(t)}}function _C(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?_C(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function bC(){for(var n=window,e=Ay();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Ay(n.document)}return e}function J5(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function Z6(n){var e=bC(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&_C(t.ownerDocument.documentElement,t)){if(r!==null&&J5(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!n.extend&&s>r&&(i=r,r=s,s=i),i=EM(t,s);var o=EM(t,r);i&&o&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),s>r?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var K6=$u&&"documentMode"in document&&11>=document.documentMode,vp=null,qS=null,A0=null,XS=!1;function AM(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;XS||vp==null||vp!==Ay(r)||(r=vp,"selectionStart"in r&&J5(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),A0&&K0(A0,r)||(A0=r,r=Ny(qS,"onSelect"),0<r.length&&(e=new $5("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=vp)))}function I1(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var yp={animationend:I1("Animation","AnimationEnd"),animationiteration:I1("Animation","AnimationIteration"),animationstart:I1("Animation","AnimationStart"),transitionend:I1("Transition","TransitionEnd")},Gx={},MC={};$u&&(MC=document.createElement("div").style,"AnimationEvent"in window||(delete yp.animationend.animation,delete yp.animationiteration.animation,delete yp.animationstart.animation),"TransitionEvent"in window||delete yp.transitionend.transition);function w2(n){if(Gx[n])return Gx[n];if(!yp[n])return n;var e=yp[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in MC)return Gx[n]=e[t];return n}var EC=w2("animationend"),AC=w2("animationiteration"),TC=w2("animationstart"),CC=w2("transitionend"),LC=new Map,TM="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ch(n,e){LC.set(n,e),Jf(e,[n])}for(var Vx=0;Vx<TM.length;Vx++){var Wx=TM[Vx],J6=Wx.toLowerCase(),Q6=Wx[0].toUpperCase()+Wx.slice(1);Ch(J6,"on"+Q6)}Ch(EC,"onAnimationEnd");Ch(AC,"onAnimationIteration");Ch(TC,"onAnimationStart");Ch("dblclick","onDoubleClick");Ch("focusin","onFocus");Ch("focusout","onBlur");Ch(CC,"onTransitionEnd");qp("onMouseEnter",["mouseout","mouseover"]);qp("onMouseLeave",["mouseout","mouseover"]);qp("onPointerEnter",["pointerout","pointerover"]);qp("onPointerLeave",["pointerout","pointerover"]);Jf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Jf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Jf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Jf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Jf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Jf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var v0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),eD=new Set("cancel close invalid load scroll toggle".split(" ").concat(v0));function CM(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,JI(r,e,void 0,n),n.currentTarget=null}function PC(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;CM(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;CM(i,a,u),s=l}}}if(Cy)throw n=GS,Cy=!1,GS=null,n}function Wr(n,e){var t=e[JS];t===void 0&&(t=e[JS]=new Set);var r=n+"__bubble";t.has(r)||(RC(e,n,2,!1),t.add(r))}function jx(n,e,t){var r=0;e&&(r|=4),RC(t,n,r,e)}var D1="_reactListening"+Math.random().toString(36).slice(2);function J0(n){if(!n[D1]){n[D1]=!0,U4.forEach(function(t){t!=="selectionchange"&&(eD.has(t)||jx(t,!1,n),jx(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[D1]||(e[D1]=!0,jx("selectionchange",!1,e))}}function RC(n,e,t,r){switch(pC(e)){case 1:var i=p6;break;case 4:i=m6;break;default:i=X5}t=i.bind(null,e,t,n),i=void 0,!HS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function qx(n,e,t,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=_f(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}eC(function(){var u=s,c=V5(t),h=[];e:{var d=LC.get(n);if(d!==void 0){var m=$5,v=n;switch(n){case"keypress":if(ey(t)===0)break e;case"keydown":case"keyup":m=P6;break;case"focusin":v="focus",m=Bx;break;case"focusout":v="blur",m=Bx;break;case"beforeblur":case"afterblur":m=Bx;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=gM;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=y6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=N6;break;case EC:case AC:case TC:m=S6;break;case CC:m=D6;break;case"scroll":m=g6;break;case"wheel":m=F6;break;case"copy":case"cut":case"paste":m=b6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=yM}var w=(e&4)!==0,x=!w&&n==="scroll",g=w?d!==null?d+"Capture":null:d;w=[];for(var S=u,_;S!==null;){_=S;var T=_.stateNode;if(_.tag===5&&T!==null&&(_=T,g!==null&&(T=q0(S,g),T!=null&&w.push(Q0(S,T,_)))),x)break;S=S.return}0<w.length&&(d=new m(d,v,null,t,c),h.push({event:d,listeners:w}))}}if(!(e&7)){e:{if(d=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",d&&t!==BS&&(v=t.relatedTarget||t.fromElement)&&(_f(v)||v[Zu]))break e;if((m||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=u,v=v?_f(v):null,v!==null&&(x=Qf(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(w=gM,T="onMouseLeave",g="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(w=yM,T="onPointerLeave",g="onPointerEnter",S="pointer"),x=m==null?d:xp(m),_=v==null?d:xp(v),d=new w(T,S+"leave",m,t,c),d.target=x,d.relatedTarget=_,T=null,_f(c)===u&&(w=new w(g,S+"enter",v,t,c),w.target=_,w.relatedTarget=x,T=w),x=T,m&&v)t:{for(w=m,g=v,S=0,_=w;_;_=Rd(_))S++;for(_=0,T=g;T;T=Rd(T))_++;for(;0<S-_;)w=Rd(w),S--;for(;0<_-S;)g=Rd(g),_--;for(;S--;){if(w===g||g!==null&&w===g.alternate)break t;w=Rd(w),g=Rd(g)}w=null}else w=null;m!==null&&LM(h,d,m,w,!1),v!==null&&x!==null&&LM(h,x,v,w,!0)}}e:{if(d=u?xp(u):window,m=d.nodeName&&d.nodeName.toLowerCase(),m==="select"||m==="input"&&d.type==="file")var L=W6;else if(SM(d))if(wC)L=Y6;else{L=q6;var P=j6}else(m=d.nodeName)&&m.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(L=X6);if(L&&(L=L(n,u))){xC(h,L,t,c);break e}P&&P(n,d,u),n==="focusout"&&(P=d._wrapperState)&&P.controlled&&d.type==="number"&&IS(d,"number",d.value)}switch(P=u?xp(u):window,n){case"focusin":(SM(P)||P.contentEditable==="true")&&(vp=P,qS=u,A0=null);break;case"focusout":A0=qS=vp=null;break;case"mousedown":XS=!0;break;case"contextmenu":case"mouseup":case"dragend":XS=!1,AM(h,t,c);break;case"selectionchange":if(K6)break;case"keydown":case"keyup":AM(h,t,c)}var N;if(K5)e:{switch(n){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else gp?vC(n,t)&&(k="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(k="onCompositionStart");k&&(gC&&t.locale!=="ko"&&(gp||k!=="onCompositionStart"?k==="onCompositionEnd"&&gp&&(N=mC()):(eh=c,Y5="value"in eh?eh.value:eh.textContent,gp=!0)),P=Ny(u,k),0<P.length&&(k=new vM(k,n,null,t,c),h.push({event:k,listeners:P}),N?k.data=N:(N=yC(t),N!==null&&(k.data=N)))),(N=B6?z6(n,t):H6(n,t))&&(u=Ny(u,"onBeforeInput"),0<u.length&&(c=new vM("onBeforeInput","beforeinput",null,t,c),h.push({event:c,listeners:u}),c.data=N))}PC(h,e)})}function Q0(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Ny(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=q0(n,t),s!=null&&r.unshift(Q0(n,s,i)),s=q0(n,e),s!=null&&r.push(Q0(n,s,i))),n=n.return}return r}function Rd(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function LM(n,e,t,r,i){for(var s=e._reactName,o=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=q0(t,s),l!=null&&o.unshift(Q0(t,l,a))):i||(l=q0(t,s),l!=null&&o.push(Q0(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var tD=/\r\n?/g,nD=/\u0000|\uFFFD/g;function PM(n){return(typeof n=="string"?n:""+n).replace(tD,`
`).replace(nD,"")}function O1(n,e,t){if(e=PM(e),PM(n)!==e&&t)throw Error(Rt(425))}function Iy(){}var YS=null,$S=null;function ZS(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var KS=typeof setTimeout=="function"?setTimeout:void 0,rD=typeof clearTimeout=="function"?clearTimeout:void 0,RM=typeof Promise=="function"?Promise:void 0,iD=typeof queueMicrotask=="function"?queueMicrotask:typeof RM<"u"?function(n){return RM.resolve(null).then(n).catch(sD)}:KS;function sD(n){setTimeout(function(){throw n})}function Xx(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),$0(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);$0(e)}function uh(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function kM(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var fm=Math.random().toString(36).slice(2),Wl="__reactFiber$"+fm,eg="__reactProps$"+fm,Zu="__reactContainer$"+fm,JS="__reactEvents$"+fm,oD="__reactListeners$"+fm,aD="__reactHandles$"+fm;function _f(n){var e=n[Wl];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Zu]||t[Wl]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=kM(n);n!==null;){if(t=n[Wl])return t;n=kM(n)}return e}n=t,t=n.parentNode}return null}function Ug(n){return n=n[Wl]||n[Zu],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function xp(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Rt(33))}function S2(n){return n[eg]||null}var QS=[],wp=-1;function Lh(n){return{current:n}}function $r(n){0>wp||(n.current=QS[wp],QS[wp]=null,wp--)}function Ur(n,e){wp++,QS[wp]=n.current,n.current=e}var wh={},eo=Lh(wh),ko=Lh(!1),Bf=wh;function Xp(n,e){var t=n.type.contextTypes;if(!t)return wh;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in t)i[s]=e[s];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function No(n){return n=n.childContextTypes,n!=null}function Dy(){$r(ko),$r(eo)}function NM(n,e,t){if(eo.current!==wh)throw Error(Rt(168));Ur(eo,e),Ur(ko,t)}function kC(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Rt(108,jI(n)||"Unknown",i));return mi({},t,r)}function Oy(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||wh,Bf=eo.current,Ur(eo,n),Ur(ko,ko.current),!0}function IM(n,e,t){var r=n.stateNode;if(!r)throw Error(Rt(169));t?(n=kC(n,e,Bf),r.__reactInternalMemoizedMergedChildContext=n,$r(ko),$r(eo),Ur(eo,n)):$r(ko),Ur(ko,t)}var Du=null,_2=!1,Yx=!1;function NC(n){Du===null?Du=[n]:Du.push(n)}function lD(n){_2=!0,NC(n)}function Ph(){if(!Yx&&Du!==null){Yx=!0;var n=0,e=Cr;try{var t=Du;for(Cr=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}Du=null,_2=!1}catch(i){throw Du!==null&&(Du=Du.slice(n+1)),iC(W5,Ph),i}finally{Cr=e,Yx=!1}}return null}var Sp=[],_p=0,Fy=null,Uy=0,Ra=[],ka=0,zf=null,Hu=1,Gu="";function df(n,e){Sp[_p++]=Uy,Sp[_p++]=Fy,Fy=n,Uy=e}function IC(n,e,t){Ra[ka++]=Hu,Ra[ka++]=Gu,Ra[ka++]=zf,zf=n;var r=Hu;n=Gu;var i=32-dl(r)-1;r&=~(1<<i),t+=1;var s=32-dl(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Hu=1<<32-dl(e)+i|t<<i|r,Gu=s+n}else Hu=1<<s|t<<i|r,Gu=n}function Q5(n){n.return!==null&&(df(n,1),IC(n,1,0))}function eb(n){for(;n===Fy;)Fy=Sp[--_p],Sp[_p]=null,Uy=Sp[--_p],Sp[_p]=null;for(;n===zf;)zf=Ra[--ka],Ra[ka]=null,Gu=Ra[--ka],Ra[ka]=null,Hu=Ra[--ka],Ra[ka]=null}var ta=null,Qo=null,ei=!1,ul=null;function DC(n,e){var t=Ia(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function DM(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ta=n,Qo=uh(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ta=n,Qo=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=zf!==null?{id:Hu,overflow:Gu}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Ia(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ta=n,Qo=null,!0):!1;default:return!1}}function e_(n){return(n.mode&1)!==0&&(n.flags&128)===0}function t_(n){if(ei){var e=Qo;if(e){var t=e;if(!DM(n,e)){if(e_(n))throw Error(Rt(418));e=uh(t.nextSibling);var r=ta;e&&DM(n,e)?DC(r,t):(n.flags=n.flags&-4097|2,ei=!1,ta=n)}}else{if(e_(n))throw Error(Rt(418));n.flags=n.flags&-4097|2,ei=!1,ta=n}}}function OM(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ta=n}function F1(n){if(n!==ta)return!1;if(!ei)return OM(n),ei=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!ZS(n.type,n.memoizedProps)),e&&(e=Qo)){if(e_(n))throw OC(),Error(Rt(418));for(;e;)DC(n,e),e=uh(e.nextSibling)}if(OM(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Rt(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Qo=uh(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Qo=null}}else Qo=ta?uh(n.stateNode.nextSibling):null;return!0}function OC(){for(var n=Qo;n;)n=uh(n.nextSibling)}function Yp(){Qo=ta=null,ei=!1}function tb(n){ul===null?ul=[n]:ul.push(n)}var uD=nc.ReactCurrentBatchConfig;function il(n,e){if(n&&n.defaultProps){e=mi({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var By=Lh(null),zy=null,bp=null,nb=null;function rb(){nb=bp=zy=null}function ib(n){var e=By.current;$r(By),n._currentValue=e}function n_(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Ip(n,e){zy=n,nb=bp=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Ro=!0),n.firstContext=null)}function Ua(n){var e=n._currentValue;if(nb!==n)if(n={context:n,memoizedValue:e,next:null},bp===null){if(zy===null)throw Error(Rt(308));bp=n,zy.dependencies={lanes:0,firstContext:n}}else bp=bp.next=n;return e}var bf=null;function sb(n){bf===null?bf=[n]:bf.push(n)}function FC(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,sb(e)):(t.next=i.next,i.next=t),e.interleaved=t,Ku(n,r)}function Ku(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Yc=!1;function ob(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function UC(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function qu(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function ch(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,hr&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ku(n,t)}return i=r.interleaved,i===null?(e.next=e,sb(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ku(n,t)}function ty(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,j5(n,t)}}function FM(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?i=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?i=s=e:s=s.next=e}else i=s=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Hy(n,e,t,r){var i=n.updateQueue;Yc=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=n.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,c=u=l=null,a=s;do{var d=a.lane,m=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,w=a;switch(d=e,m=t,w.tag){case 1:if(v=w.payload,typeof v=="function"){h=v.call(m,h,d);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=w.payload,d=typeof v=="function"?v.call(m,h,d):v,d==null)break e;h=mi({},h,d);break e;case 2:Yc=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else m={eventTime:m,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=h):c=c.next=m,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Gf|=o,n.lanes=o,n.memoizedState=h}}function UM(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Rt(191,i));i.call(r)}}}var BC=new F4.Component().refs;function r_(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:mi({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var b2={isMounted:function(n){return(n=n._reactInternals)?Qf(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=ho(),i=fh(n),s=qu(r,i);s.payload=e,t!=null&&(s.callback=t),e=ch(n,s,i),e!==null&&(pl(e,n,i,r),ty(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=ho(),i=fh(n),s=qu(r,i);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=ch(n,s,i),e!==null&&(pl(e,n,i,r),ty(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=ho(),r=fh(n),i=qu(t,r);i.tag=2,e!=null&&(i.callback=e),e=ch(n,i,r),e!==null&&(pl(e,n,r,t),ty(e,n,r))}};function BM(n,e,t,r,i,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!K0(t,r)||!K0(i,s):!0}function zC(n,e,t){var r=!1,i=wh,s=e.contextType;return typeof s=="object"&&s!==null?s=Ua(s):(i=No(e)?Bf:eo.current,r=e.contextTypes,s=(r=r!=null)?Xp(n,i):wh),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=b2,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=s),e}function zM(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&b2.enqueueReplaceState(e,e.state,null)}function i_(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=BC,ob(n);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Ua(s):(s=No(e)?Bf:eo.current,i.context=Xp(n,s)),i.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(r_(n,e,s,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&b2.enqueueReplaceState(i,i.state,null),Hy(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function Ym(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Rt(309));var r=t.stateNode}if(!r)throw Error(Rt(147,n));var i=r,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===BC&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Rt(284));if(!t._owner)throw Error(Rt(290,n))}return n}function U1(n,e){throw n=Object.prototype.toString.call(e),Error(Rt(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function HM(n){var e=n._init;return e(n._payload)}function HC(n){function e(g,S){if(n){var _=g.deletions;_===null?(g.deletions=[S],g.flags|=16):_.push(S)}}function t(g,S){if(!n)return null;for(;S!==null;)e(g,S),S=S.sibling;return null}function r(g,S){for(g=new Map;S!==null;)S.key!==null?g.set(S.key,S):g.set(S.index,S),S=S.sibling;return g}function i(g,S){return g=dh(g,S),g.index=0,g.sibling=null,g}function s(g,S,_){return g.index=_,n?(_=g.alternate,_!==null?(_=_.index,_<S?(g.flags|=2,S):_):(g.flags|=2,S)):(g.flags|=1048576,S)}function o(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,S,_,T){return S===null||S.tag!==6?(S=tw(_,g.mode,T),S.return=g,S):(S=i(S,_),S.return=g,S)}function l(g,S,_,T){var L=_.type;return L===mp?c(g,S,_.props.children,T,_.key):S!==null&&(S.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Xc&&HM(L)===S.type)?(T=i(S,_.props),T.ref=Ym(g,S,_),T.return=g,T):(T=ay(_.type,_.key,_.props,null,g.mode,T),T.ref=Ym(g,S,_),T.return=g,T)}function u(g,S,_,T){return S===null||S.tag!==4||S.stateNode.containerInfo!==_.containerInfo||S.stateNode.implementation!==_.implementation?(S=nw(_,g.mode,T),S.return=g,S):(S=i(S,_.children||[]),S.return=g,S)}function c(g,S,_,T,L){return S===null||S.tag!==7?(S=Nf(_,g.mode,T,L),S.return=g,S):(S=i(S,_),S.return=g,S)}function h(g,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return S=tw(""+S,g.mode,_),S.return=g,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case T1:return _=ay(S.type,S.key,S.props,null,g.mode,_),_.ref=Ym(g,null,S),_.return=g,_;case pp:return S=nw(S,g.mode,_),S.return=g,S;case Xc:var T=S._init;return h(g,T(S._payload),_)}if(m0(S)||Vm(S))return S=Nf(S,g.mode,_,null),S.return=g,S;U1(g,S)}return null}function d(g,S,_,T){var L=S!==null?S.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return L!==null?null:a(g,S,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case T1:return _.key===L?l(g,S,_,T):null;case pp:return _.key===L?u(g,S,_,T):null;case Xc:return L=_._init,d(g,S,L(_._payload),T)}if(m0(_)||Vm(_))return L!==null?null:c(g,S,_,T,null);U1(g,_)}return null}function m(g,S,_,T,L){if(typeof T=="string"&&T!==""||typeof T=="number")return g=g.get(_)||null,a(S,g,""+T,L);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case T1:return g=g.get(T.key===null?_:T.key)||null,l(S,g,T,L);case pp:return g=g.get(T.key===null?_:T.key)||null,u(S,g,T,L);case Xc:var P=T._init;return m(g,S,_,P(T._payload),L)}if(m0(T)||Vm(T))return g=g.get(_)||null,c(S,g,T,L,null);U1(S,T)}return null}function v(g,S,_,T){for(var L=null,P=null,N=S,k=S=0,R=null;N!==null&&k<_.length;k++){N.index>k?(R=N,N=null):R=N.sibling;var U=d(g,N,_[k],T);if(U===null){N===null&&(N=R);break}n&&N&&U.alternate===null&&e(g,N),S=s(U,S,k),P===null?L=U:P.sibling=U,P=U,N=R}if(k===_.length)return t(g,N),ei&&df(g,k),L;if(N===null){for(;k<_.length;k++)N=h(g,_[k],T),N!==null&&(S=s(N,S,k),P===null?L=N:P.sibling=N,P=N);return ei&&df(g,k),L}for(N=r(g,N);k<_.length;k++)R=m(N,g,k,_[k],T),R!==null&&(n&&R.alternate!==null&&N.delete(R.key===null?k:R.key),S=s(R,S,k),P===null?L=R:P.sibling=R,P=R);return n&&N.forEach(function(F){return e(g,F)}),ei&&df(g,k),L}function w(g,S,_,T){var L=Vm(_);if(typeof L!="function")throw Error(Rt(150));if(_=L.call(_),_==null)throw Error(Rt(151));for(var P=L=null,N=S,k=S=0,R=null,U=_.next();N!==null&&!U.done;k++,U=_.next()){N.index>k?(R=N,N=null):R=N.sibling;var F=d(g,N,U.value,T);if(F===null){N===null&&(N=R);break}n&&N&&F.alternate===null&&e(g,N),S=s(F,S,k),P===null?L=F:P.sibling=F,P=F,N=R}if(U.done)return t(g,N),ei&&df(g,k),L;if(N===null){for(;!U.done;k++,U=_.next())U=h(g,U.value,T),U!==null&&(S=s(U,S,k),P===null?L=U:P.sibling=U,P=U);return ei&&df(g,k),L}for(N=r(g,N);!U.done;k++,U=_.next())U=m(N,g,k,U.value,T),U!==null&&(n&&U.alternate!==null&&N.delete(U.key===null?k:U.key),S=s(U,S,k),P===null?L=U:P.sibling=U,P=U);return n&&N.forEach(function(z){return e(g,z)}),ei&&df(g,k),L}function x(g,S,_,T){if(typeof _=="object"&&_!==null&&_.type===mp&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case T1:e:{for(var L=_.key,P=S;P!==null;){if(P.key===L){if(L=_.type,L===mp){if(P.tag===7){t(g,P.sibling),S=i(P,_.props.children),S.return=g,g=S;break e}}else if(P.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Xc&&HM(L)===P.type){t(g,P.sibling),S=i(P,_.props),S.ref=Ym(g,P,_),S.return=g,g=S;break e}t(g,P);break}else e(g,P);P=P.sibling}_.type===mp?(S=Nf(_.props.children,g.mode,T,_.key),S.return=g,g=S):(T=ay(_.type,_.key,_.props,null,g.mode,T),T.ref=Ym(g,S,_),T.return=g,g=T)}return o(g);case pp:e:{for(P=_.key;S!==null;){if(S.key===P)if(S.tag===4&&S.stateNode.containerInfo===_.containerInfo&&S.stateNode.implementation===_.implementation){t(g,S.sibling),S=i(S,_.children||[]),S.return=g,g=S;break e}else{t(g,S);break}else e(g,S);S=S.sibling}S=nw(_,g.mode,T),S.return=g,g=S}return o(g);case Xc:return P=_._init,x(g,S,P(_._payload),T)}if(m0(_))return v(g,S,_,T);if(Vm(_))return w(g,S,_,T);U1(g,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,S!==null&&S.tag===6?(t(g,S.sibling),S=i(S,_),S.return=g,g=S):(t(g,S),S=tw(_,g.mode,T),S.return=g,g=S),o(g)):t(g,S)}return x}var $p=HC(!0),GC=HC(!1),Bg={},$l=Lh(Bg),tg=Lh(Bg),ng=Lh(Bg);function Mf(n){if(n===Bg)throw Error(Rt(174));return n}function ab(n,e){switch(Ur(ng,e),Ur(tg,n),Ur($l,Bg),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:OS(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=OS(e,n)}$r($l),Ur($l,e)}function Zp(){$r($l),$r(tg),$r(ng)}function VC(n){Mf(ng.current);var e=Mf($l.current),t=OS(e,n.type);e!==t&&(Ur(tg,n),Ur($l,t))}function lb(n){tg.current===n&&($r($l),$r(tg))}var ci=Lh(0);function Gy(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $x=[];function ub(){for(var n=0;n<$x.length;n++)$x[n]._workInProgressVersionPrimary=null;$x.length=0}var ny=nc.ReactCurrentDispatcher,Zx=nc.ReactCurrentBatchConfig,Hf=0,pi=null,Qi=null,ys=null,Vy=!1,T0=!1,rg=0,cD=0;function Bs(){throw Error(Rt(321))}function cb(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!ml(n[t],e[t]))return!1;return!0}function hb(n,e,t,r,i,s){if(Hf=s,pi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ny.current=n===null||n.memoizedState===null?pD:mD,n=t(r,i),T0){s=0;do{if(T0=!1,rg=0,25<=s)throw Error(Rt(301));s+=1,ys=Qi=null,e.updateQueue=null,ny.current=gD,n=t(r,i)}while(T0)}if(ny.current=Wy,e=Qi!==null&&Qi.next!==null,Hf=0,ys=Qi=pi=null,Vy=!1,e)throw Error(Rt(300));return n}function fb(){var n=rg!==0;return rg=0,n}function Hl(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ys===null?pi.memoizedState=ys=n:ys=ys.next=n,ys}function Ba(){if(Qi===null){var n=pi.alternate;n=n!==null?n.memoizedState:null}else n=Qi.next;var e=ys===null?pi.memoizedState:ys.next;if(e!==null)ys=e,Qi=n;else{if(n===null)throw Error(Rt(310));Qi=n,n={memoizedState:Qi.memoizedState,baseState:Qi.baseState,baseQueue:Qi.baseQueue,queue:Qi.queue,next:null},ys===null?pi.memoizedState=ys=n:ys=ys.next=n}return ys}function ig(n,e){return typeof e=="function"?e(n):e}function Kx(n){var e=Ba(),t=e.queue;if(t===null)throw Error(Rt(311));t.lastRenderedReducer=n;var r=Qi,i=r.baseQueue,s=t.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,t.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Hf&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,pi.lanes|=c,Gf|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,ml(r,e.memoizedState)||(Ro=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do s=i.lane,pi.lanes|=s,Gf|=s,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Jx(n){var e=Ba(),t=e.queue;if(t===null)throw Error(Rt(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,s=e.memoizedState;if(i!==null){t.pending=null;var o=i=i.next;do s=n(s,o.action),o=o.next;while(o!==i);ml(s,e.memoizedState)||(Ro=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,r]}function WC(){}function jC(n,e){var t=pi,r=Ba(),i=e(),s=!ml(r.memoizedState,i);if(s&&(r.memoizedState=i,Ro=!0),r=r.queue,db(YC.bind(null,t,r,n),[n]),r.getSnapshot!==e||s||ys!==null&&ys.memoizedState.tag&1){if(t.flags|=2048,sg(9,XC.bind(null,t,r,i,e),void 0,null),_s===null)throw Error(Rt(349));Hf&30||qC(t,e,i)}return i}function qC(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=pi.updateQueue,e===null?(e={lastEffect:null,stores:null},pi.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function XC(n,e,t,r){e.value=t,e.getSnapshot=r,$C(e)&&ZC(n)}function YC(n,e,t){return t(function(){$C(e)&&ZC(n)})}function $C(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!ml(n,t)}catch{return!0}}function ZC(n){var e=Ku(n,1);e!==null&&pl(e,n,1,-1)}function GM(n){var e=Hl();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ig,lastRenderedState:n},e.queue=n,n=n.dispatch=dD.bind(null,pi,n),[e.memoizedState,n]}function sg(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=pi.updateQueue,e===null?(e={lastEffect:null,stores:null},pi.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function KC(){return Ba().memoizedState}function ry(n,e,t,r){var i=Hl();pi.flags|=n,i.memoizedState=sg(1|e,t,void 0,r===void 0?null:r)}function M2(n,e,t,r){var i=Ba();r=r===void 0?null:r;var s=void 0;if(Qi!==null){var o=Qi.memoizedState;if(s=o.destroy,r!==null&&cb(r,o.deps)){i.memoizedState=sg(e,t,s,r);return}}pi.flags|=n,i.memoizedState=sg(1|e,t,s,r)}function VM(n,e){return ry(8390656,8,n,e)}function db(n,e){return M2(2048,8,n,e)}function JC(n,e){return M2(4,2,n,e)}function QC(n,e){return M2(4,4,n,e)}function eL(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function tL(n,e,t){return t=t!=null?t.concat([n]):null,M2(4,4,eL.bind(null,e,n),t)}function pb(){}function nL(n,e){var t=Ba();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&cb(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function rL(n,e){var t=Ba();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&cb(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function iL(n,e,t){return Hf&21?(ml(t,e)||(t=aC(),pi.lanes|=t,Gf|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Ro=!0),n.memoizedState=t)}function hD(n,e){var t=Cr;Cr=t!==0&&4>t?t:4,n(!0);var r=Zx.transition;Zx.transition={};try{n(!1),e()}finally{Cr=t,Zx.transition=r}}function sL(){return Ba().memoizedState}function fD(n,e,t){var r=fh(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},oL(n))aL(e,t);else if(t=FC(n,e,t,r),t!==null){var i=ho();pl(t,n,r,i),lL(t,e,r)}}function dD(n,e,t){var r=fh(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(oL(n))aL(e,i);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(i.hasEagerState=!0,i.eagerState=a,ml(a,o)){var l=e.interleaved;l===null?(i.next=i,sb(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=FC(n,e,i,r),t!==null&&(i=ho(),pl(t,n,r,i),lL(t,e,r))}}function oL(n){var e=n.alternate;return n===pi||e!==null&&e===pi}function aL(n,e){T0=Vy=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function lL(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,j5(n,t)}}var Wy={readContext:Ua,useCallback:Bs,useContext:Bs,useEffect:Bs,useImperativeHandle:Bs,useInsertionEffect:Bs,useLayoutEffect:Bs,useMemo:Bs,useReducer:Bs,useRef:Bs,useState:Bs,useDebugValue:Bs,useDeferredValue:Bs,useTransition:Bs,useMutableSource:Bs,useSyncExternalStore:Bs,useId:Bs,unstable_isNewReconciler:!1},pD={readContext:Ua,useCallback:function(n,e){return Hl().memoizedState=[n,e===void 0?null:e],n},useContext:Ua,useEffect:VM,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,ry(4194308,4,eL.bind(null,e,n),t)},useLayoutEffect:function(n,e){return ry(4194308,4,n,e)},useInsertionEffect:function(n,e){return ry(4,2,n,e)},useMemo:function(n,e){var t=Hl();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=Hl();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=fD.bind(null,pi,n),[r.memoizedState,n]},useRef:function(n){var e=Hl();return n={current:n},e.memoizedState=n},useState:GM,useDebugValue:pb,useDeferredValue:function(n){return Hl().memoizedState=n},useTransition:function(){var n=GM(!1),e=n[0];return n=hD.bind(null,n[1]),Hl().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=pi,i=Hl();if(ei){if(t===void 0)throw Error(Rt(407));t=t()}else{if(t=e(),_s===null)throw Error(Rt(349));Hf&30||qC(r,e,t)}i.memoizedState=t;var s={value:t,getSnapshot:e};return i.queue=s,VM(YC.bind(null,r,s,n),[n]),r.flags|=2048,sg(9,XC.bind(null,r,s,t,e),void 0,null),t},useId:function(){var n=Hl(),e=_s.identifierPrefix;if(ei){var t=Gu,r=Hu;t=(r&~(1<<32-dl(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=rg++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=cD++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},mD={readContext:Ua,useCallback:nL,useContext:Ua,useEffect:db,useImperativeHandle:tL,useInsertionEffect:JC,useLayoutEffect:QC,useMemo:rL,useReducer:Kx,useRef:KC,useState:function(){return Kx(ig)},useDebugValue:pb,useDeferredValue:function(n){var e=Ba();return iL(e,Qi.memoizedState,n)},useTransition:function(){var n=Kx(ig)[0],e=Ba().memoizedState;return[n,e]},useMutableSource:WC,useSyncExternalStore:jC,useId:sL,unstable_isNewReconciler:!1},gD={readContext:Ua,useCallback:nL,useContext:Ua,useEffect:db,useImperativeHandle:tL,useInsertionEffect:JC,useLayoutEffect:QC,useMemo:rL,useReducer:Jx,useRef:KC,useState:function(){return Jx(ig)},useDebugValue:pb,useDeferredValue:function(n){var e=Ba();return Qi===null?e.memoizedState=n:iL(e,Qi.memoizedState,n)},useTransition:function(){var n=Jx(ig)[0],e=Ba().memoizedState;return[n,e]},useMutableSource:WC,useSyncExternalStore:jC,useId:sL,unstable_isNewReconciler:!1};function Kp(n,e){try{var t="",r=e;do t+=WI(r),r=r.return;while(r);var i=t}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:i,digest:null}}function Qx(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function s_(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var vD=typeof WeakMap=="function"?WeakMap:Map;function uL(n,e,t){t=qu(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){qy||(qy=!0,m_=r),s_(n,e)},t}function cL(n,e,t){t=qu(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){s_(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){s_(n,e),typeof r!="function"&&(hh===null?hh=new Set([this]):hh.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function WM(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new vD;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=RD.bind(null,n,e,t),e.then(n,n))}function jM(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function qM(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=qu(-1,1),e.tag=2,ch(t,e,1))),t.lanes|=1),n)}var yD=nc.ReactCurrentOwner,Ro=!1;function lo(n,e,t,r){e.child=n===null?GC(e,null,t,r):$p(e,n.child,t,r)}function XM(n,e,t,r,i){t=t.render;var s=e.ref;return Ip(e,i),r=hb(n,e,t,r,s,i),t=fb(),n!==null&&!Ro?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ju(n,e,i)):(ei&&t&&Q5(e),e.flags|=1,lo(n,e,r,i),e.child)}function YM(n,e,t,r,i){if(n===null){var s=t.type;return typeof s=="function"&&!_b(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,hL(n,e,s,r,i)):(n=ay(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&i)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:K0,t(o,r)&&n.ref===e.ref)return Ju(n,e,i)}return e.flags|=1,n=dh(s,r),n.ref=e.ref,n.return=e,e.child=n}function hL(n,e,t,r,i){if(n!==null){var s=n.memoizedProps;if(K0(s,r)&&n.ref===e.ref)if(Ro=!1,e.pendingProps=r=s,(n.lanes&i)!==0)n.flags&131072&&(Ro=!0);else return e.lanes=n.lanes,Ju(n,e,i)}return o_(n,e,t,r,i)}function fL(n,e,t){var r=e.pendingProps,i=r.children,s=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ur(Ep,Jo),Jo|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Ur(Ep,Jo),Jo|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:t,Ur(Ep,Jo),Jo|=r}else s!==null?(r=s.baseLanes|t,e.memoizedState=null):r=t,Ur(Ep,Jo),Jo|=r;return lo(n,e,i,t),e.child}function dL(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function o_(n,e,t,r,i){var s=No(t)?Bf:eo.current;return s=Xp(e,s),Ip(e,i),t=hb(n,e,t,r,s,i),r=fb(),n!==null&&!Ro?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Ju(n,e,i)):(ei&&r&&Q5(e),e.flags|=1,lo(n,e,t,i),e.child)}function $M(n,e,t,r,i){if(No(t)){var s=!0;Oy(e)}else s=!1;if(Ip(e,i),e.stateNode===null)iy(n,e),zC(e,t,r),i_(e,t,r,i),r=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=Ua(u):(u=No(t)?Bf:eo.current,u=Xp(e,u));var c=t.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&zM(e,o,r,u),Yc=!1;var d=e.memoizedState;o.state=d,Hy(e,r,o,i),l=e.memoizedState,a!==r||d!==l||ko.current||Yc?(typeof c=="function"&&(r_(e,t,c,r),l=e.memoizedState),(a=Yc||BM(e,t,a,r,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,UC(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:il(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=Ua(l):(l=No(t)?Bf:eo.current,l=Xp(e,l));var m=t.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&zM(e,o,r,l),Yc=!1,d=e.memoizedState,o.state=d,Hy(e,r,o,i);var v=e.memoizedState;a!==h||d!==v||ko.current||Yc?(typeof m=="function"&&(r_(e,t,m,r),v=e.memoizedState),(u=Yc||BM(e,t,u,r,d,v,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&d===n.memoizedState||(e.flags|=1024),r=!1)}return a_(n,e,t,r,s,i)}function a_(n,e,t,r,i,s){dL(n,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&IM(e,t,!1),Ju(n,e,s);r=e.stateNode,yD.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&o?(e.child=$p(e,n.child,null,s),e.child=$p(e,null,a,s)):lo(n,e,a,s),e.memoizedState=r.state,i&&IM(e,t,!0),e.child}function pL(n){var e=n.stateNode;e.pendingContext?NM(n,e.pendingContext,e.pendingContext!==e.context):e.context&&NM(n,e.context,!1),ab(n,e.containerInfo)}function ZM(n,e,t,r,i){return Yp(),tb(i),e.flags|=256,lo(n,e,t,r),e.child}var l_={dehydrated:null,treeContext:null,retryLane:0};function u_(n){return{baseLanes:n,cachePool:null,transitions:null}}function mL(n,e,t){var r=e.pendingProps,i=ci.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Ur(ci,i&1),n===null)return t_(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,n=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=T2(o,r,0,null),n=Nf(n,r,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=u_(t),e.memoizedState=l_,n):mb(e,o));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return xD(n,e,o,r,a,i,t);if(s){s=r.fallback,o=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=dh(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=dh(a,s):(s=Nf(s,o,t,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=n.child.memoizedState,o=o===null?u_(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=l_,r}return s=n.child,n=s.sibling,r=dh(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function mb(n,e){return e=T2({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function B1(n,e,t,r){return r!==null&&tb(r),$p(e,n.child,null,t),n=mb(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function xD(n,e,t,r,i,s,o){if(t)return e.flags&256?(e.flags&=-257,r=Qx(Error(Rt(422))),B1(n,e,o,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=T2({mode:"visible",children:r.children},i,0,null),s=Nf(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&$p(e,n.child,null,o),e.child.memoizedState=u_(o),e.memoizedState=l_,s);if(!(e.mode&1))return B1(n,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Rt(419)),r=Qx(s,r,void 0),B1(n,e,o,r)}if(a=(o&n.childLanes)!==0,Ro||a){if(r=_s,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Ku(n,i),pl(r,n,i,-1))}return Sb(),r=Qx(Error(Rt(421))),B1(n,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=kD.bind(null,n),i._reactRetry=e,null):(n=s.treeContext,Qo=uh(i.nextSibling),ta=e,ei=!0,ul=null,n!==null&&(Ra[ka++]=Hu,Ra[ka++]=Gu,Ra[ka++]=zf,Hu=n.id,Gu=n.overflow,zf=e),e=mb(e,r.children),e.flags|=4096,e)}function KM(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),n_(n.return,e,t)}function ew(n,e,t,r,i){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=t,s.tailMode=i)}function gL(n,e,t){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(lo(n,e,r.children,t),r=ci.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&KM(n,t,e);else if(n.tag===19)KM(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Ur(ci,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Gy(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),ew(e,!1,i,t,s);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Gy(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}ew(e,!0,t,null,s);break;case"together":ew(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function iy(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ju(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Gf|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Rt(153));if(e.child!==null){for(n=e.child,t=dh(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=dh(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function wD(n,e,t){switch(e.tag){case 3:pL(e),Yp();break;case 5:VC(e);break;case 1:No(e.type)&&Oy(e);break;case 4:ab(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ur(By,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ur(ci,ci.current&1),e.flags|=128,null):t&e.child.childLanes?mL(n,e,t):(Ur(ci,ci.current&1),n=Ju(n,e,t),n!==null?n.sibling:null);Ur(ci,ci.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return gL(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ur(ci,ci.current),r)break;return null;case 22:case 23:return e.lanes=0,fL(n,e,t)}return Ju(n,e,t)}var vL,c_,yL,xL;vL=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};c_=function(){};yL=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,Mf($l.current);var s=null;switch(t){case"input":i=kS(n,i),r=kS(n,r),s=[];break;case"select":i=mi({},i,{value:void 0}),r=mi({},r,{value:void 0}),s=[];break;case"textarea":i=DS(n,i),r=DS(n,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Iy)}FS(t,r);var o;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(W0.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(W0.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Wr("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};xL=function(n,e,t,r){t!==r&&(e.flags|=4)};function $m(n,e){if(!ei)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function zs(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function SD(n,e,t){var r=e.pendingProps;switch(eb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zs(e),null;case 1:return No(e.type)&&Dy(),zs(e),null;case 3:return r=e.stateNode,Zp(),$r(ko),$r(eo),ub(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(F1(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ul!==null&&(y_(ul),ul=null))),c_(n,e),zs(e),null;case 5:lb(e);var i=Mf(ng.current);if(t=e.type,n!==null&&e.stateNode!=null)yL(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Rt(166));return zs(e),null}if(n=Mf($l.current),F1(e)){r=e.stateNode,t=e.type;var s=e.memoizedProps;switch(r[Wl]=e,r[eg]=s,n=(e.mode&1)!==0,t){case"dialog":Wr("cancel",r),Wr("close",r);break;case"iframe":case"object":case"embed":Wr("load",r);break;case"video":case"audio":for(i=0;i<v0.length;i++)Wr(v0[i],r);break;case"source":Wr("error",r);break;case"img":case"image":case"link":Wr("error",r),Wr("load",r);break;case"details":Wr("toggle",r);break;case"input":oM(r,s),Wr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Wr("invalid",r);break;case"textarea":lM(r,s),Wr("invalid",r)}FS(t,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&O1(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&O1(r.textContent,a,n),i=["children",""+a]):W0.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Wr("scroll",r)}switch(t){case"input":C1(r),aM(r,s,!0);break;case"textarea":C1(r),uM(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Iy)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=q4(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=o.createElement(t,{is:r.is}):(n=o.createElement(t),t==="select"&&(o=n,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):n=o.createElementNS(n,t),n[Wl]=e,n[eg]=r,vL(n,e,!1,!1),e.stateNode=n;e:{switch(o=US(t,r),t){case"dialog":Wr("cancel",n),Wr("close",n),i=r;break;case"iframe":case"object":case"embed":Wr("load",n),i=r;break;case"video":case"audio":for(i=0;i<v0.length;i++)Wr(v0[i],n);i=r;break;case"source":Wr("error",n),i=r;break;case"img":case"image":case"link":Wr("error",n),Wr("load",n),i=r;break;case"details":Wr("toggle",n),i=r;break;case"input":oM(n,r),i=kS(n,r),Wr("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=mi({},r,{value:void 0}),Wr("invalid",n);break;case"textarea":lM(n,r),i=DS(n,r),Wr("invalid",n);break;default:i=r}FS(t,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?$4(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&X4(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&j0(n,l):typeof l=="number"&&j0(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(W0.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Wr("scroll",n):l!=null&&B5(n,s,l,o))}switch(t){case"input":C1(n),aM(n,r,!1);break;case"textarea":C1(n),uM(n);break;case"option":r.value!=null&&n.setAttribute("value",""+xh(r.value));break;case"select":n.multiple=!!r.multiple,s=r.value,s!=null?Pp(n,!!r.multiple,s,!1):r.defaultValue!=null&&Pp(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Iy)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zs(e),null;case 6:if(n&&e.stateNode!=null)xL(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Rt(166));if(t=Mf(ng.current),Mf($l.current),F1(e)){if(r=e.stateNode,t=e.memoizedProps,r[Wl]=e,(s=r.nodeValue!==t)&&(n=ta,n!==null))switch(n.tag){case 3:O1(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&O1(r.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Wl]=e,e.stateNode=r}return zs(e),null;case 13:if($r(ci),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ei&&Qo!==null&&e.mode&1&&!(e.flags&128))OC(),Yp(),e.flags|=98560,s=!1;else if(s=F1(e),r!==null&&r.dehydrated!==null){if(n===null){if(!s)throw Error(Rt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Rt(317));s[Wl]=e}else Yp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zs(e),s=!1}else ul!==null&&(y_(ul),ul=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||ci.current&1?es===0&&(es=3):Sb())),e.updateQueue!==null&&(e.flags|=4),zs(e),null);case 4:return Zp(),c_(n,e),n===null&&J0(e.stateNode.containerInfo),zs(e),null;case 10:return ib(e.type._context),zs(e),null;case 17:return No(e.type)&&Dy(),zs(e),null;case 19:if($r(ci),s=e.memoizedState,s===null)return zs(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)$m(s,!1);else{if(es!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Gy(n),o!==null){for(e.flags|=128,$m(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)s=t,n=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Ur(ci,ci.current&1|2),e.child}n=n.sibling}s.tail!==null&&ki()>Jp&&(e.flags|=128,r=!0,$m(s,!1),e.lanes=4194304)}else{if(!r)if(n=Gy(o),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),$m(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ei)return zs(e),null}else 2*ki()-s.renderingStartTime>Jp&&t!==1073741824&&(e.flags|=128,r=!0,$m(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ki(),e.sibling=null,t=ci.current,Ur(ci,r?t&1|2:t&1),e):(zs(e),null);case 22:case 23:return wb(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Jo&1073741824&&(zs(e),e.subtreeFlags&6&&(e.flags|=8192)):zs(e),null;case 24:return null;case 25:return null}throw Error(Rt(156,e.tag))}function _D(n,e){switch(eb(e),e.tag){case 1:return No(e.type)&&Dy(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Zp(),$r(ko),$r(eo),ub(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return lb(e),null;case 13:if($r(ci),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Rt(340));Yp()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return $r(ci),null;case 4:return Zp(),null;case 10:return ib(e.type._context),null;case 22:case 23:return wb(),null;case 24:return null;default:return null}}var z1=!1,Ys=!1,bD=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function Mp(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){_i(n,e,r)}else t.current=null}function h_(n,e,t){try{t()}catch(r){_i(n,e,r)}}var JM=!1;function MD(n,e){if(YS=Ry,n=bC(),J5(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=n,d=null;t:for(;;){for(var m;h!==t||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)d=h,h=m;for(;;){if(h===n)break t;if(d===t&&++u===i&&(a=o),d===s&&++c===r&&(l=o),(m=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for($S={focusedElem:n,selectionRange:t},Ry=!1,Zt=e;Zt!==null;)if(e=Zt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Zt=n;else for(;Zt!==null;){e=Zt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var w=v.memoizedProps,x=v.memoizedState,g=e.stateNode,S=g.getSnapshotBeforeUpdate(e.elementType===e.type?w:il(e.type,w),x);g.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Rt(163))}}catch(T){_i(e,e.return,T)}if(n=e.sibling,n!==null){n.return=e.return,Zt=n;break}Zt=e.return}return v=JM,JM=!1,v}function C0(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var s=i.destroy;i.destroy=void 0,s!==void 0&&h_(e,t,s)}i=i.next}while(i!==r)}}function E2(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function f_(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function wL(n){var e=n.alternate;e!==null&&(n.alternate=null,wL(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Wl],delete e[eg],delete e[JS],delete e[oD],delete e[aD])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function SL(n){return n.tag===5||n.tag===3||n.tag===4}function QM(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||SL(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function d_(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Iy));else if(r!==4&&(n=n.child,n!==null))for(d_(n,e,t),n=n.sibling;n!==null;)d_(n,e,t),n=n.sibling}function p_(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(p_(n,e,t),n=n.sibling;n!==null;)p_(n,e,t),n=n.sibling}var Ls=null,ll=!1;function Nc(n,e,t){for(t=t.child;t!==null;)_L(n,e,t),t=t.sibling}function _L(n,e,t){if(Yl&&typeof Yl.onCommitFiberUnmount=="function")try{Yl.onCommitFiberUnmount(v2,t)}catch{}switch(t.tag){case 5:Ys||Mp(t,e);case 6:var r=Ls,i=ll;Ls=null,Nc(n,e,t),Ls=r,ll=i,Ls!==null&&(ll?(n=Ls,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Ls.removeChild(t.stateNode));break;case 18:Ls!==null&&(ll?(n=Ls,t=t.stateNode,n.nodeType===8?Xx(n.parentNode,t):n.nodeType===1&&Xx(n,t),$0(n)):Xx(Ls,t.stateNode));break;case 4:r=Ls,i=ll,Ls=t.stateNode.containerInfo,ll=!0,Nc(n,e,t),Ls=r,ll=i;break;case 0:case 11:case 14:case 15:if(!Ys&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&h_(t,e,o),i=i.next}while(i!==r)}Nc(n,e,t);break;case 1:if(!Ys&&(Mp(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){_i(t,e,a)}Nc(n,e,t);break;case 21:Nc(n,e,t);break;case 22:t.mode&1?(Ys=(r=Ys)||t.memoizedState!==null,Nc(n,e,t),Ys=r):Nc(n,e,t);break;default:Nc(n,e,t)}}function eE(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new bD),e.forEach(function(r){var i=ND.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function Ka(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Ls=a.stateNode,ll=!1;break e;case 3:Ls=a.stateNode.containerInfo,ll=!0;break e;case 4:Ls=a.stateNode.containerInfo,ll=!0;break e}a=a.return}if(Ls===null)throw Error(Rt(160));_L(s,o,i),Ls=null,ll=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){_i(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)bL(e,n),e=e.sibling}function bL(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Ka(e,n),Bl(n),r&4){try{C0(3,n,n.return),E2(3,n)}catch(w){_i(n,n.return,w)}try{C0(5,n,n.return)}catch(w){_i(n,n.return,w)}}break;case 1:Ka(e,n),Bl(n),r&512&&t!==null&&Mp(t,t.return);break;case 5:if(Ka(e,n),Bl(n),r&512&&t!==null&&Mp(t,t.return),n.flags&32){var i=n.stateNode;try{j0(i,"")}catch(w){_i(n,n.return,w)}}if(r&4&&(i=n.stateNode,i!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&W4(i,s),US(a,o);var u=US(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?$4(i,h):c==="dangerouslySetInnerHTML"?X4(i,h):c==="children"?j0(i,h):B5(i,c,h,u)}switch(a){case"input":NS(i,s);break;case"textarea":j4(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Pp(i,!!s.multiple,m,!1):d!==!!s.multiple&&(s.defaultValue!=null?Pp(i,!!s.multiple,s.defaultValue,!0):Pp(i,!!s.multiple,s.multiple?[]:"",!1))}i[eg]=s}catch(w){_i(n,n.return,w)}}break;case 6:if(Ka(e,n),Bl(n),r&4){if(n.stateNode===null)throw Error(Rt(162));i=n.stateNode,s=n.memoizedProps;try{i.nodeValue=s}catch(w){_i(n,n.return,w)}}break;case 3:if(Ka(e,n),Bl(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{$0(e.containerInfo)}catch(w){_i(n,n.return,w)}break;case 4:Ka(e,n),Bl(n);break;case 13:Ka(e,n),Bl(n),i=n.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(yb=ki())),r&4&&eE(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(Ys=(u=Ys)||c,Ka(e,n),Ys=u):Ka(e,n),Bl(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!c&&n.mode&1)for(Zt=n,c=n.child;c!==null;){for(h=Zt=c;Zt!==null;){switch(d=Zt,m=d.child,d.tag){case 0:case 11:case 14:case 15:C0(4,d,d.return);break;case 1:Mp(d,d.return);var v=d.stateNode;if(typeof v.componentWillUnmount=="function"){r=d,t=d.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(w){_i(r,t,w)}}break;case 5:Mp(d,d.return);break;case 22:if(d.memoizedState!==null){nE(h);continue}}m!==null?(m.return=d,Zt=m):nE(h)}c=c.sibling}e:for(c=null,h=n;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Y4("display",o))}catch(w){_i(n,n.return,w)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(w){_i(n,n.return,w)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Ka(e,n),Bl(n),r&4&&eE(n);break;case 21:break;default:Ka(e,n),Bl(n)}}function Bl(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(SL(t)){var r=t;break e}t=t.return}throw Error(Rt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(j0(i,""),r.flags&=-33);var s=QM(n);p_(n,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=QM(n);d_(n,a,o);break;default:throw Error(Rt(161))}}catch(l){_i(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function ED(n,e,t){Zt=n,ML(n)}function ML(n,e,t){for(var r=(n.mode&1)!==0;Zt!==null;){var i=Zt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||z1;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Ys;a=z1;var u=Ys;if(z1=o,(Ys=l)&&!u)for(Zt=i;Zt!==null;)o=Zt,l=o.child,o.tag===22&&o.memoizedState!==null?rE(i):l!==null?(l.return=o,Zt=l):rE(i);for(;s!==null;)Zt=s,ML(s),s=s.sibling;Zt=i,z1=a,Ys=u}tE(n)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Zt=s):tE(n)}}function tE(n){for(;Zt!==null;){var e=Zt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ys||E2(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ys)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:il(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&UM(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}UM(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&$0(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Rt(163))}Ys||e.flags&512&&f_(e)}catch(d){_i(e,e.return,d)}}if(e===n){Zt=null;break}if(t=e.sibling,t!==null){t.return=e.return,Zt=t;break}Zt=e.return}}function nE(n){for(;Zt!==null;){var e=Zt;if(e===n){Zt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Zt=t;break}Zt=e.return}}function rE(n){for(;Zt!==null;){var e=Zt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{E2(4,e)}catch(l){_i(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){_i(e,i,l)}}var s=e.return;try{f_(e)}catch(l){_i(e,s,l)}break;case 5:var o=e.return;try{f_(e)}catch(l){_i(e,o,l)}}}catch(l){_i(e,e.return,l)}if(e===n){Zt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Zt=a;break}Zt=e.return}}var AD=Math.ceil,jy=nc.ReactCurrentDispatcher,gb=nc.ReactCurrentOwner,Oa=nc.ReactCurrentBatchConfig,hr=0,_s=null,Vi=null,Rs=0,Jo=0,Ep=Lh(0),es=0,og=null,Gf=0,A2=0,vb=0,L0=null,Co=null,yb=0,Jp=1/0,Iu=null,qy=!1,m_=null,hh=null,H1=!1,th=null,Xy=0,P0=0,g_=null,sy=-1,oy=0;function ho(){return hr&6?ki():sy!==-1?sy:sy=ki()}function fh(n){return n.mode&1?hr&2&&Rs!==0?Rs&-Rs:uD.transition!==null?(oy===0&&(oy=aC()),oy):(n=Cr,n!==0||(n=window.event,n=n===void 0?16:pC(n.type)),n):1}function pl(n,e,t,r){if(50<P0)throw P0=0,g_=null,Error(Rt(185));Og(n,t,r),(!(hr&2)||n!==_s)&&(n===_s&&(!(hr&2)&&(A2|=t),es===4&&Kc(n,Rs)),Io(n,r),t===1&&hr===0&&!(e.mode&1)&&(Jp=ki()+500,_2&&Ph()))}function Io(n,e){var t=n.callbackNode;u6(n,e);var r=Py(n,n===_s?Rs:0);if(r===0)t!==null&&fM(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&fM(t),e===1)n.tag===0?lD(iE.bind(null,n)):NC(iE.bind(null,n)),iD(function(){!(hr&6)&&Ph()}),t=null;else{switch(lC(r)){case 1:t=W5;break;case 4:t=sC;break;case 16:t=Ly;break;case 536870912:t=oC;break;default:t=Ly}t=kL(t,EL.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function EL(n,e){if(sy=-1,oy=0,hr&6)throw Error(Rt(327));var t=n.callbackNode;if(Dp()&&n.callbackNode!==t)return null;var r=Py(n,n===_s?Rs:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Yy(n,r);else{e=r;var i=hr;hr|=2;var s=TL();(_s!==n||Rs!==e)&&(Iu=null,Jp=ki()+500,kf(n,e));do try{LD();break}catch(a){AL(n,a)}while(1);rb(),jy.current=s,hr=i,Vi!==null?e=0:(_s=null,Rs=0,e=es)}if(e!==0){if(e===2&&(i=VS(n),i!==0&&(r=i,e=v_(n,i))),e===1)throw t=og,kf(n,0),Kc(n,r),Io(n,ki()),t;if(e===6)Kc(n,r);else{if(i=n.current.alternate,!(r&30)&&!TD(i)&&(e=Yy(n,r),e===2&&(s=VS(n),s!==0&&(r=s,e=v_(n,s))),e===1))throw t=og,kf(n,0),Kc(n,r),Io(n,ki()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Rt(345));case 2:pf(n,Co,Iu);break;case 3:if(Kc(n,r),(r&130023424)===r&&(e=yb+500-ki(),10<e)){if(Py(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){ho(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=KS(pf.bind(null,n,Co,Iu),e);break}pf(n,Co,Iu);break;case 4:if(Kc(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var o=31-dl(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ki()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*AD(r/1960))-r,10<r){n.timeoutHandle=KS(pf.bind(null,n,Co,Iu),r);break}pf(n,Co,Iu);break;case 5:pf(n,Co,Iu);break;default:throw Error(Rt(329))}}}return Io(n,ki()),n.callbackNode===t?EL.bind(null,n):null}function v_(n,e){var t=L0;return n.current.memoizedState.isDehydrated&&(kf(n,e).flags|=256),n=Yy(n,e),n!==2&&(e=Co,Co=t,e!==null&&y_(e)),n}function y_(n){Co===null?Co=n:Co.push.apply(Co,n)}function TD(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],s=i.getSnapshot;i=i.value;try{if(!ml(s(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Kc(n,e){for(e&=~vb,e&=~A2,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-dl(e),r=1<<t;n[t]=-1,e&=~r}}function iE(n){if(hr&6)throw Error(Rt(327));Dp();var e=Py(n,0);if(!(e&1))return Io(n,ki()),null;var t=Yy(n,e);if(n.tag!==0&&t===2){var r=VS(n);r!==0&&(e=r,t=v_(n,r))}if(t===1)throw t=og,kf(n,0),Kc(n,e),Io(n,ki()),t;if(t===6)throw Error(Rt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,pf(n,Co,Iu),Io(n,ki()),null}function xb(n,e){var t=hr;hr|=1;try{return n(e)}finally{hr=t,hr===0&&(Jp=ki()+500,_2&&Ph())}}function Vf(n){th!==null&&th.tag===0&&!(hr&6)&&Dp();var e=hr;hr|=1;var t=Oa.transition,r=Cr;try{if(Oa.transition=null,Cr=1,n)return n()}finally{Cr=r,Oa.transition=t,hr=e,!(hr&6)&&Ph()}}function wb(){Jo=Ep.current,$r(Ep)}function kf(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,rD(t)),Vi!==null)for(t=Vi.return;t!==null;){var r=t;switch(eb(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dy();break;case 3:Zp(),$r(ko),$r(eo),ub();break;case 5:lb(r);break;case 4:Zp();break;case 13:$r(ci);break;case 19:$r(ci);break;case 10:ib(r.type._context);break;case 22:case 23:wb()}t=t.return}if(_s=n,Vi=n=dh(n.current,null),Rs=Jo=e,es=0,og=null,vb=A2=Gf=0,Co=L0=null,bf!==null){for(e=0;e<bf.length;e++)if(t=bf[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,s=t.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}t.pending=r}bf=null}return n}function AL(n,e){do{var t=Vi;try{if(rb(),ny.current=Wy,Vy){for(var r=pi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Vy=!1}if(Hf=0,ys=Qi=pi=null,T0=!1,rg=0,gb.current=null,t===null||t.return===null){es=1,og=e,Vi=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Rs,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=jM(o);if(m!==null){m.flags&=-257,qM(m,o,a,s,e),m.mode&1&&WM(s,u,e),e=m,l=u;var v=e.updateQueue;if(v===null){var w=new Set;w.add(l),e.updateQueue=w}else v.add(l);break e}else{if(!(e&1)){WM(s,u,e),Sb();break e}l=Error(Rt(426))}}else if(ei&&a.mode&1){var x=jM(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),qM(x,o,a,s,e),tb(Kp(l,a));break e}}s=l=Kp(l,a),es!==4&&(es=2),L0===null?L0=[s]:L0.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=uL(s,l,e);FM(s,g);break e;case 1:a=l;var S=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(hh===null||!hh.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=cL(s,a,e);FM(s,T);break e}}s=s.return}while(s!==null)}LL(t)}catch(L){e=L,Vi===t&&t!==null&&(Vi=t=t.return);continue}break}while(1)}function TL(){var n=jy.current;return jy.current=Wy,n===null?Wy:n}function Sb(){(es===0||es===3||es===2)&&(es=4),_s===null||!(Gf&268435455)&&!(A2&268435455)||Kc(_s,Rs)}function Yy(n,e){var t=hr;hr|=2;var r=TL();(_s!==n||Rs!==e)&&(Iu=null,kf(n,e));do try{CD();break}catch(i){AL(n,i)}while(1);if(rb(),hr=t,jy.current=r,Vi!==null)throw Error(Rt(261));return _s=null,Rs=0,es}function CD(){for(;Vi!==null;)CL(Vi)}function LD(){for(;Vi!==null&&!e6();)CL(Vi)}function CL(n){var e=RL(n.alternate,n,Jo);n.memoizedProps=n.pendingProps,e===null?LL(n):Vi=e,gb.current=null}function LL(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=_D(t,e),t!==null){t.flags&=32767,Vi=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{es=6,Vi=null;return}}else if(t=SD(t,e,Jo),t!==null){Vi=t;return}if(e=e.sibling,e!==null){Vi=e;return}Vi=e=n}while(e!==null);es===0&&(es=5)}function pf(n,e,t){var r=Cr,i=Oa.transition;try{Oa.transition=null,Cr=1,PD(n,e,t,r)}finally{Oa.transition=i,Cr=r}return null}function PD(n,e,t,r){do Dp();while(th!==null);if(hr&6)throw Error(Rt(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Rt(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(c6(n,s),n===_s&&(Vi=_s=null,Rs=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||H1||(H1=!0,kL(Ly,function(){return Dp(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Oa.transition,Oa.transition=null;var o=Cr;Cr=1;var a=hr;hr|=4,gb.current=null,MD(n,t),bL(t,n),Z6($S),Ry=!!YS,$S=YS=null,n.current=t,ED(t),t6(),hr=a,Cr=o,Oa.transition=s}else n.current=t;if(H1&&(H1=!1,th=n,Xy=i),s=n.pendingLanes,s===0&&(hh=null),i6(t.stateNode),Io(n,ki()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(qy)throw qy=!1,n=m_,m_=null,n;return Xy&1&&n.tag!==0&&Dp(),s=n.pendingLanes,s&1?n===g_?P0++:(P0=0,g_=n):P0=0,Ph(),null}function Dp(){if(th!==null){var n=lC(Xy),e=Oa.transition,t=Cr;try{if(Oa.transition=null,Cr=16>n?16:n,th===null)var r=!1;else{if(n=th,th=null,Xy=0,hr&6)throw Error(Rt(331));var i=hr;for(hr|=4,Zt=n.current;Zt!==null;){var s=Zt,o=s.child;if(Zt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Zt=u;Zt!==null;){var c=Zt;switch(c.tag){case 0:case 11:case 15:C0(8,c,s)}var h=c.child;if(h!==null)h.return=c,Zt=h;else for(;Zt!==null;){c=Zt;var d=c.sibling,m=c.return;if(wL(c),c===u){Zt=null;break}if(d!==null){d.return=m,Zt=d;break}Zt=m}}}var v=s.alternate;if(v!==null){var w=v.child;if(w!==null){v.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}Zt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Zt=o;else e:for(;Zt!==null;){if(s=Zt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:C0(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Zt=g;break e}Zt=s.return}}var S=n.current;for(Zt=S;Zt!==null;){o=Zt;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Zt=_;else e:for(o=S;Zt!==null;){if(a=Zt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:E2(9,a)}}catch(L){_i(a,a.return,L)}if(a===o){Zt=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,Zt=T;break e}Zt=a.return}}if(hr=i,Ph(),Yl&&typeof Yl.onPostCommitFiberRoot=="function")try{Yl.onPostCommitFiberRoot(v2,n)}catch{}r=!0}return r}finally{Cr=t,Oa.transition=e}}return!1}function sE(n,e,t){e=Kp(t,e),e=uL(n,e,1),n=ch(n,e,1),e=ho(),n!==null&&(Og(n,1,e),Io(n,e))}function _i(n,e,t){if(n.tag===3)sE(n,n,t);else for(;e!==null;){if(e.tag===3){sE(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(hh===null||!hh.has(r))){n=Kp(t,n),n=cL(e,n,1),e=ch(e,n,1),n=ho(),e!==null&&(Og(e,1,n),Io(e,n));break}}e=e.return}}function RD(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=ho(),n.pingedLanes|=n.suspendedLanes&t,_s===n&&(Rs&t)===t&&(es===4||es===3&&(Rs&130023424)===Rs&&500>ki()-yb?kf(n,0):vb|=t),Io(n,e)}function PL(n,e){e===0&&(n.mode&1?(e=R1,R1<<=1,!(R1&130023424)&&(R1=4194304)):e=1);var t=ho();n=Ku(n,e),n!==null&&(Og(n,e,t),Io(n,t))}function kD(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),PL(n,t)}function ND(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Rt(314))}r!==null&&r.delete(e),PL(n,t)}var RL;RL=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ko.current)Ro=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Ro=!1,wD(n,e,t);Ro=!!(n.flags&131072)}else Ro=!1,ei&&e.flags&1048576&&IC(e,Uy,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;iy(n,e),n=e.pendingProps;var i=Xp(e,eo.current);Ip(e,t),i=hb(null,e,r,n,i,t);var s=fb();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,No(r)?(s=!0,Oy(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ob(e),i.updater=b2,e.stateNode=i,i._reactInternals=e,i_(e,r,n,t),e=a_(null,e,r,!0,s,t)):(e.tag=0,ei&&s&&Q5(e),lo(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(iy(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=DD(r),n=il(r,n),i){case 0:e=o_(null,e,r,n,t);break e;case 1:e=$M(null,e,r,n,t);break e;case 11:e=XM(null,e,r,n,t);break e;case 14:e=YM(null,e,r,il(r.type,n),t);break e}throw Error(Rt(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:il(r,i),o_(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:il(r,i),$M(n,e,r,i,t);case 3:e:{if(pL(e),n===null)throw Error(Rt(387));r=e.pendingProps,s=e.memoizedState,i=s.element,UC(n,e),Hy(e,r,null,t);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Kp(Error(Rt(423)),e),e=ZM(n,e,r,t,i);break e}else if(r!==i){i=Kp(Error(Rt(424)),e),e=ZM(n,e,r,t,i);break e}else for(Qo=uh(e.stateNode.containerInfo.firstChild),ta=e,ei=!0,ul=null,t=GC(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Yp(),r===i){e=Ju(n,e,t);break e}lo(n,e,r,t)}e=e.child}return e;case 5:return VC(e),n===null&&t_(e),r=e.type,i=e.pendingProps,s=n!==null?n.memoizedProps:null,o=i.children,ZS(r,i)?o=null:s!==null&&ZS(r,s)&&(e.flags|=32),dL(n,e),lo(n,e,o,t),e.child;case 6:return n===null&&t_(e),null;case 13:return mL(n,e,t);case 4:return ab(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=$p(e,null,r,t):lo(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:il(r,i),XM(n,e,r,i,t);case 7:return lo(n,e,e.pendingProps,t),e.child;case 8:return lo(n,e,e.pendingProps.children,t),e.child;case 12:return lo(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ur(By,r._currentValue),r._currentValue=o,s!==null)if(ml(s.value,o)){if(s.children===i.children&&!ko.current){e=Ju(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=qu(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),n_(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Rt(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),n_(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}lo(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ip(e,t),i=Ua(i),r=r(i),e.flags|=1,lo(n,e,r,t),e.child;case 14:return r=e.type,i=il(r,e.pendingProps),i=il(r.type,i),YM(n,e,r,i,t);case 15:return hL(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:il(r,i),iy(n,e),e.tag=1,No(r)?(n=!0,Oy(e)):n=!1,Ip(e,t),zC(e,r,i),i_(e,r,i,t),a_(null,e,r,!0,n,t);case 19:return gL(n,e,t);case 22:return fL(n,e,t)}throw Error(Rt(156,e.tag))};function kL(n,e){return iC(n,e)}function ID(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ia(n,e,t,r){return new ID(n,e,t,r)}function _b(n){return n=n.prototype,!(!n||!n.isReactComponent)}function DD(n){if(typeof n=="function")return _b(n)?1:0;if(n!=null){if(n=n.$$typeof,n===H5)return 11;if(n===G5)return 14}return 2}function dh(n,e){var t=n.alternate;return t===null?(t=Ia(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function ay(n,e,t,r,i,s){var o=2;if(r=n,typeof n=="function")_b(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case mp:return Nf(t.children,i,s,e);case z5:o=8,i|=8;break;case CS:return n=Ia(12,t,e,i|2),n.elementType=CS,n.lanes=s,n;case LS:return n=Ia(13,t,e,i),n.elementType=LS,n.lanes=s,n;case PS:return n=Ia(19,t,e,i),n.elementType=PS,n.lanes=s,n;case H4:return T2(t,i,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case B4:o=10;break e;case z4:o=9;break e;case H5:o=11;break e;case G5:o=14;break e;case Xc:o=16,r=null;break e}throw Error(Rt(130,n==null?n:typeof n,""))}return e=Ia(o,t,e,i),e.elementType=n,e.type=r,e.lanes=s,e}function Nf(n,e,t,r){return n=Ia(7,n,r,e),n.lanes=t,n}function T2(n,e,t,r){return n=Ia(22,n,r,e),n.elementType=H4,n.lanes=t,n.stateNode={isHidden:!1},n}function tw(n,e,t){return n=Ia(6,n,null,e),n.lanes=t,n}function nw(n,e,t){return e=Ia(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function OD(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ox(0),this.expirationTimes=Ox(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ox(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bb(n,e,t,r,i,s,o,a,l){return n=new OD(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ia(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},ob(s),n}function FD(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pp,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function NL(n){if(!n)return wh;n=n._reactInternals;e:{if(Qf(n)!==n||n.tag!==1)throw Error(Rt(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(No(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Rt(171))}if(n.tag===1){var t=n.type;if(No(t))return kC(n,t,e)}return e}function IL(n,e,t,r,i,s,o,a,l){return n=bb(t,r,!0,n,i,s,o,a,l),n.context=NL(null),t=n.current,r=ho(),i=fh(t),s=qu(r,i),s.callback=e??null,ch(t,s,i),n.current.lanes=i,Og(n,i,r),Io(n,r),n}function C2(n,e,t,r){var i=e.current,s=ho(),o=fh(i);return t=NL(t),e.context===null?e.context=t:e.pendingContext=t,e=qu(s,o),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=ch(i,e,o),n!==null&&(pl(n,i,o,s),ty(n,i,o)),o}function $y(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function oE(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Mb(n,e){oE(n,e),(n=n.alternate)&&oE(n,e)}function UD(){return null}var DL=typeof reportError=="function"?reportError:function(n){console.error(n)};function Eb(n){this._internalRoot=n}L2.prototype.render=Eb.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Rt(409));C2(n,e,null,null)};L2.prototype.unmount=Eb.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Vf(function(){C2(null,n,null,null)}),e[Zu]=null}};function L2(n){this._internalRoot=n}L2.prototype.unstable_scheduleHydration=function(n){if(n){var e=hC();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Zc.length&&e!==0&&e<Zc[t].priority;t++);Zc.splice(t,0,n),t===0&&dC(n)}};function Ab(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function P2(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function aE(){}function BD(n,e,t,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=$y(o);s.call(u)}}var o=IL(e,r,n,0,null,!1,!1,"",aE);return n._reactRootContainer=o,n[Zu]=o.current,J0(n.nodeType===8?n.parentNode:n),Vf(),o}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=$y(l);a.call(u)}}var l=bb(n,0,!1,null,null,!1,!1,"",aE);return n._reactRootContainer=l,n[Zu]=l.current,J0(n.nodeType===8?n.parentNode:n),Vf(function(){C2(e,l,t,r)}),l}function R2(n,e,t,r,i){var s=t._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=$y(o);a.call(l)}}C2(e,o,n,i)}else o=BD(t,e,n,i,r);return $y(o)}uC=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=g0(e.pendingLanes);t!==0&&(j5(e,t|1),Io(e,ki()),!(hr&6)&&(Jp=ki()+500,Ph()))}break;case 13:Vf(function(){var r=Ku(n,1);if(r!==null){var i=ho();pl(r,n,1,i)}}),Mb(n,1)}};q5=function(n){if(n.tag===13){var e=Ku(n,134217728);if(e!==null){var t=ho();pl(e,n,134217728,t)}Mb(n,134217728)}};cC=function(n){if(n.tag===13){var e=fh(n),t=Ku(n,e);if(t!==null){var r=ho();pl(t,n,e,r)}Mb(n,e)}};hC=function(){return Cr};fC=function(n,e){var t=Cr;try{return Cr=n,e()}finally{Cr=t}};zS=function(n,e,t){switch(e){case"input":if(NS(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=S2(r);if(!i)throw Error(Rt(90));V4(r),NS(r,i)}}}break;case"textarea":j4(n,t);break;case"select":e=t.value,e!=null&&Pp(n,!!t.multiple,e,!1)}};J4=xb;Q4=Vf;var zD={usingClientEntryPoint:!1,Events:[Ug,xp,S2,Z4,K4,xb]},Zm={findFiberByHostInstance:_f,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},HD={bundleType:Zm.bundleType,version:Zm.version,rendererPackageName:Zm.rendererPackageName,rendererConfig:Zm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nc.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=nC(n),n===null?null:n.stateNode},findFiberByHostInstance:Zm.findFiberByHostInstance||UD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var G1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!G1.isDisabled&&G1.supportsFiber)try{v2=G1.inject(HD),Yl=G1}catch{}}ia.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zD;ia.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ab(e))throw Error(Rt(200));return FD(n,e,null,t)};ia.createRoot=function(n,e){if(!Ab(n))throw Error(Rt(299));var t=!1,r="",i=DL;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=bb(n,1,!1,null,null,t,!1,r,i),n[Zu]=e.current,J0(n.nodeType===8?n.parentNode:n),new Eb(e)};ia.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Rt(188)):(n=Object.keys(n).join(","),Error(Rt(268,n)));return n=nC(e),n=n===null?null:n.stateNode,n};ia.flushSync=function(n){return Vf(n)};ia.hydrate=function(n,e,t){if(!P2(e))throw Error(Rt(200));return R2(null,n,e,!0,t)};ia.hydrateRoot=function(n,e,t){if(!Ab(n))throw Error(Rt(405));var r=t!=null&&t.hydratedSources||null,i=!1,s="",o=DL;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=IL(e,null,n,1,t??null,i,!1,s,o),n[Zu]=e.current,J0(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new L2(e)};ia.render=function(n,e,t){if(!P2(e))throw Error(Rt(200));return R2(null,n,e,!1,t)};ia.unmountComponentAtNode=function(n){if(!P2(n))throw Error(Rt(40));return n._reactRootContainer?(Vf(function(){R2(null,null,n,!1,function(){n._reactRootContainer=null,n[Zu]=null})}),!0):!1};ia.unstable_batchedUpdates=xb;ia.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!P2(t))throw Error(Rt(200));if(n==null||n._reactInternals===void 0)throw Error(Rt(38));return R2(n,e,t,!1,r)};ia.version="18.2.0-next-9e3b772b8-20220608";(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=ia})(UI);const GD=m2(ES);function VD(){return gt("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"2rem",color:"#1E293B"},children:[gt("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"4rem",textAlign:"center"},children:[pe("h1",{style:{fontSize:"3rem",fontWeight:"800",marginBottom:"1rem",background:"linear-gradient(90deg, #2563EB, #0EA5E9)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent"},children:"Parametric CAD Services"}),pe("p",{style:{fontSize:"1.25rem",maxWidth:"800px",lineHeight:"1.7",color:"#475569"},children:"Professional 3D modeling, technical drawings, and high-quality rendering services for engineering and manufacturing needs."}),gt("div",{style:{marginTop:"2rem",display:"flex",gap:"1rem"},children:[gt("button",{onClick:()=>window.dispatchEvent(new CustomEvent("switchTab",{detail:"app"})),style:{backgroundColor:"#1E293B",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",transition:"background-color 0.2s"},children:[gt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[pe("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),pe("circle",{cx:"12",cy:"12",r:"3"})]}),"View Demo Models"]}),pe("button",{onClick:()=>{const n=document.getElementById("contact");n?n.scrollIntoView({behavior:"smooth"}):window.dispatchEvent(new CustomEvent("switchTab",{detail:"about"}))},style:{backgroundColor:"white",color:"#1E293B",border:"1px solid #CBD5E1",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",transition:"background-color 0.2s"},children:"Contact Me"})]})]}),gt("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem",marginBottom:"4rem"},children:[pe(rw,{icon:pe("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:pe("path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z"})}),title:"Parametric 3D Modeling",description:"Custom 3D models created with a parametric approach, allowing for quick adjustments based on changing requirements. Real-time updates and development monitoring available."}),pe(rw,{icon:gt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[pe("path",{d:"M3 3v18h18"}),pe("path",{d:"m3 9 4-4 5 5 4-4 5 5"})]}),title:"Technical Drawings",description:"Automated generation of manufacturing-ready technical drawings in any format you need. Includes orthographic projections, dimensions, and manufacturing specifications."}),pe(rw,{icon:gt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[pe("circle",{cx:"12",cy:"12",r:"10"}),pe("path",{d:"M12 16a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"}),pe("path",{d:"M12 2v2"}),pe("path",{d:"M12 20v2"}),pe("path",{d:"m4.93 4.93 1.41 1.41"}),pe("path",{d:"m17.66 17.66 1.41 1.41"}),pe("path",{d:"M2 12h2"}),pe("path",{d:"M20 12h2"}),pe("path",{d:"m6.34 17.66-1.41 1.41"}),pe("path",{d:"m19.07 4.93-1.41 1.41"})]}),title:"High-Quality Rendering",description:"Professional visualizations of your models through high-quality images and videos with customizable camera angles, lighting, and environments."})]}),gt("div",{style:{backgroundColor:"#F1F5F9",padding:"2rem",borderRadius:"0.5rem",marginBottom:"4rem"},children:[pe("h2",{style:{marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"700"},children:"How It Works"}),gt("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[gt("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[pe("div",{style:{backgroundColor:"#2563EB",color:"white",width:"2rem",height:"2rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"1"}),gt("div",{children:[pe("h3",{style:{marginBottom:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:"Define Requirements"}),pe("p",{style:{color:"#475569"},children:"We'll discuss your project needs, including dimensions, functionality, and aesthetic preferences to establish clear parameters for your model."})]})]}),gt("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[pe("div",{style:{backgroundColor:"#2563EB",color:"white",width:"2rem",height:"2rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"2"}),gt("div",{children:[pe("h3",{style:{marginBottom:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:"Real-Time Development"}),pe("p",{style:{color:"#475569"},children:"Access a password-protected workspace where you can monitor progress and provide feedback as your model is being developed."})]})]}),gt("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[pe("div",{style:{backgroundColor:"#2563EB",color:"white",width:"2rem",height:"2rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"3"}),gt("div",{children:[pe("h3",{style:{marginBottom:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:"Parameter Refinement"}),pe("p",{style:{color:"#475569"},children:"Request adjustments to your model parameters at any time. Thanks to the parametric approach, most changes can be implemented instantly."})]})]}),gt("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[pe("div",{style:{backgroundColor:"#2563EB",color:"white",width:"2rem",height:"2rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"4"}),gt("div",{children:[pe("h3",{style:{marginBottom:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:"Final Delivery"}),pe("p",{style:{color:"#475569"},children:"Receive your completed 3D models, technical drawings, and renderings in the formats you need for manufacturing or presentation."})]})]})]})]}),gt("div",{style:{marginBottom:"4rem"},children:[pe("h2",{style:{marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"700"},children:"Technical Capabilities"}),gt("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem"},children:[pe(kd,{title:"Assembly Constructions",description:"Automated assembly constructions with options for exploded views or step-by-step assembly instructions with labeled components."}),pe(kd,{title:"Parametric Design",description:"Dynamic models that update instantly when dimensions or parameters change, allowing for rapid iteration and refinement."}),pe(kd,{title:"Engineering Specifications",description:"Detailed technical drawings with precise measurements, tolerances, and manufacturing notes for production."}),pe(kd,{title:"Real-Time Collaboration",description:"Secure access to your model's development progress, allowing for immediate feedback and adjustments."}),pe(kd,{title:"Custom Rendering",description:"Photorealistic visualizations with adjustable lighting, materials, camera angles, and environments."}),pe(kd,{title:"Cost-Effective Solutions",description:"Built with open-source technologies to offer professional services at competitive rates."})]})]}),gt("div",{style:{textAlign:"center",marginBottom:"2rem",padding:"3rem",backgroundColor:"#1E293B",borderRadius:"0.5rem",color:"white"},children:[pe("h2",{style:{fontSize:"1.875rem",fontWeight:"700",marginBottom:"1rem"},children:"Ready to bring your design to life?"}),pe("p",{style:{color:"#CBD5E1",marginBottom:"2rem",maxWidth:"800px",margin:"0 auto 2rem"},children:"Explore the demo models to see the capabilities, then get in touch to discuss your specific project needs and requirements."}),gt("div",{style:{display:"flex",flexWrap:"wrap",gap:"1.5rem",justifyContent:"center",marginBottom:"2rem"},children:[gt("a",{href:"mailto:damjanbab@icloud.com",style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"#2563EB",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",textDecoration:"none",boxShadow:"0 4px 6px rgba(37, 99, 235, 0.25)",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:n=>{n.currentTarget.style.transform="translateY(-2px)",n.currentTarget.style.boxShadow="0 6px 8px rgba(37, 99, 235, 0.3)"},onMouseOut:n=>{n.currentTarget.style.transform="translateY(0)",n.currentTarget.style.boxShadow="0 4px 6px rgba(37, 99, 235, 0.25)"},children:[gt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[pe("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),pe("polyline",{points:"22,6 12,13 2,6"})]}),"Email Me"]}),gt("a",{href:"https://github.com/haloedDepth",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"transparent",color:"white",border:"1px solid #CBD5E1",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",textDecoration:"none",transition:"background-color 0.2s"},onMouseOver:n=>{n.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseOut:n=>{n.currentTarget.style.backgroundColor="transparent"},children:[pe("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:pe("path",{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"})}),"GitHub"]}),gt("a",{href:"https://www.linkedin.com/in/damjanbabic/",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"transparent",color:"white",border:"1px solid #CBD5E1",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",textDecoration:"none",transition:"background-color 0.2s"},onMouseOver:n=>{n.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseOut:n=>{n.currentTarget.style.backgroundColor="transparent"},children:[gt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[pe("path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"}),pe("rect",{x:"2",y:"9",width:"4",height:"12"}),pe("circle",{cx:"4",cy:"4",r:"2"})]}),"LinkedIn"]})]}),pe("button",{onClick:()=>window.dispatchEvent(new CustomEvent("switchTab",{detail:"app"})),style:{backgroundColor:"#0EA5E9",color:"white",border:"none",padding:"0.75rem 2rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 4px 6px rgba(14, 165, 233, 0.25)",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:n=>{n.currentTarget.style.transform="translateY(-2px)",n.currentTarget.style.boxShadow="0 6px 8px rgba(14, 165, 233, 0.3)"},onMouseOut:n=>{n.currentTarget.style.transform="translateY(0)",n.currentTarget.style.boxShadow="0 4px 6px rgba(14, 165, 233, 0.25)"},children:"Try Demo Models"})]})]})}function rw({icon:n,title:e,description:t}){return gt("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",border:"1px solid #E2E8F0",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:r=>{r.currentTarget.style.transform="translateY(-4px)",r.currentTarget.style.boxShadow="0 10px 15px rgba(0, 0, 0, 0.05)"},onMouseOut:r=>{r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.1)"},children:[pe("div",{style:{color:"#2563EB",marginBottom:"1rem",display:"inline-flex",padding:"0.75rem",backgroundColor:"#EFF6FF",borderRadius:"0.5rem"},children:n}),pe("h3",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.75rem"},children:e}),pe("p",{style:{color:"#475569",lineHeight:"1.5"},children:t})]})}function kd({title:n,description:e}){return gt("div",{style:{padding:"1.25rem",borderRadius:"0.5rem",backgroundColor:"#F8FAFC",border:"1px solid #E2E8F0"},children:[pe("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"0.75rem",color:"#1E293B"},children:n}),pe("p",{style:{color:"#475569",fontSize:"0.9375rem",lineHeight:"1.5"},children:e})]})}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OL=Symbol("Comlink.proxy"),WD=Symbol("Comlink.endpoint"),jD=Symbol("Comlink.releaseProxy"),iw=Symbol("Comlink.finalizer"),ly=Symbol("Comlink.thrown"),FL=n=>typeof n=="object"&&n!==null||typeof n=="function",qD={canHandle:n=>FL(n)&&n[OL],serialize(n){const{port1:e,port2:t}=new MessageChannel;return BL(n,e),[t,[t]]},deserialize(n){return n.start(),HL(n)}},XD={canHandle:n=>FL(n)&&ly in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},UL=new Map([["proxy",qD],["throw",XD]]);function YD(n,e){for(const t of n)if(e===t||t==="*"||t instanceof RegExp&&t.test(e))return!0;return!1}function BL(n,e=globalThis,t=["*"]){e.addEventListener("message",function r(i){if(!i||!i.data)return;if(!YD(t,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:s,type:o,path:a}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(vf);let u;try{const c=a.slice(0,-1).reduce((d,m)=>d[m],n),h=a.reduce((d,m)=>d[m],n);switch(o){case"GET":u=h;break;case"SET":c[a.slice(-1)[0]]=vf(i.data.value),u=!0;break;case"APPLY":u=h.apply(c,l);break;case"CONSTRUCT":{const d=new h(...l);u=eO(d)}break;case"ENDPOINT":{const{port1:d,port2:m}=new MessageChannel;BL(n,m),u=QD(d,[d])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[ly]:0}}Promise.resolve(u).catch(c=>({value:c,[ly]:0})).then(c=>{const[h,d]=Jy(c);e.postMessage(Object.assign(Object.assign({},h),{id:s}),d),o==="RELEASE"&&(e.removeEventListener("message",r),zL(e),iw in n&&typeof n[iw]=="function"&&n[iw]())}).catch(c=>{const[h,d]=Jy({value:new TypeError("Unserializable return value"),[ly]:0});e.postMessage(Object.assign(Object.assign({},h),{id:s}),d)})}),e.start&&e.start()}function $D(n){return n.constructor.name==="MessagePort"}function zL(n){$D(n)&&n.close()}function HL(n,e){const t=new Map;return n.addEventListener("message",function(i){const{data:s}=i;if(!s||!s.id)return;const o=t.get(s.id);if(o)try{o(s)}finally{t.delete(s.id)}}),x_(n,t,[],e)}function V1(n){if(n)throw new Error("Proxy has been released and is not useable")}function GL(n){return up(n,new Map,{type:"RELEASE"}).then(()=>{zL(n)})}const Zy=new WeakMap,Ky="FinalizationRegistry"in globalThis&&new FinalizationRegistry(n=>{const e=(Zy.get(n)||0)-1;Zy.set(n,e),e===0&&GL(n)});function ZD(n,e){const t=(Zy.get(e)||0)+1;Zy.set(e,t),Ky&&Ky.register(n,e,n)}function KD(n){Ky&&Ky.unregister(n)}function x_(n,e,t=[],r=function(){}){let i=!1;const s=new Proxy(r,{get(o,a){if(V1(i),a===jD)return()=>{KD(s),GL(n),e.clear(),i=!0};if(a==="then"){if(t.length===0)return{then:()=>s};const l=up(n,e,{type:"GET",path:t.map(u=>u.toString())}).then(vf);return l.then.bind(l)}return x_(n,e,[...t,a])},set(o,a,l){V1(i);const[u,c]=Jy(l);return up(n,e,{type:"SET",path:[...t,a].map(h=>h.toString()),value:u},c).then(vf)},apply(o,a,l){V1(i);const u=t[t.length-1];if(u===WD)return up(n,e,{type:"ENDPOINT"}).then(vf);if(u==="bind")return x_(n,e,t.slice(0,-1));const[c,h]=lE(l);return up(n,e,{type:"APPLY",path:t.map(d=>d.toString()),argumentList:c},h).then(vf)},construct(o,a){V1(i);const[l,u]=lE(a);return up(n,e,{type:"CONSTRUCT",path:t.map(c=>c.toString()),argumentList:l},u).then(vf)}});return ZD(s,n),s}function JD(n){return Array.prototype.concat.apply([],n)}function lE(n){const e=n.map(Jy);return[e.map(t=>t[0]),JD(e.map(t=>t[1]))]}const VL=new WeakMap;function QD(n,e){return VL.set(n,e),n}function eO(n){return Object.assign(n,{[OL]:!0})}function Jy(n){for(const[e,t]of UL)if(t.canHandle(n)){const[r,i]=t.serialize(n);return[{type:"HANDLER",name:e,value:r},i]}return[{type:"RAW",value:n},VL.get(n)||[]]}function vf(n){switch(n.type){case"HANDLER":return UL.get(n.name).deserialize(n.value);case"RAW":return n.value}}function up(n,e,t,r){return new Promise(i=>{const s=tO();e.set(s,i),n.start&&n.start(),n.postMessage(Object.assign({id:s},t),r)})}function tO(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const zg="155",Gl={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ou={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},WL=0,w_=1,jL=2,nO=3,qL=0,k2=1,R0=2,sl=3,Qu=0,fo=1,fl=2,rO=2,Xu=0,If=1,S_=2,__=3,b_=4,XL=5,yf=100,YL=101,$L=102,M_=103,E_=104,ZL=200,KL=201,JL=202,QL=203,Tb=204,Cb=205,eP=206,tP=207,nP=208,rP=209,iP=210,sP=0,oP=1,aP=2,Qy=3,lP=4,uP=5,cP=6,hP=7,Hg=0,fP=1,dP=2,Zl=0,pP=1,mP=2,gP=3,Lb=4,vP=5,N2=300,nu=301,Sh=302,Qp=303,ag=304,dm=306,lg=1e3,Zs=1001,ug=1002,Ri=1003,e2=1004,iO=1004,k0=1005,sO=1005,qr=1006,Pb=1007,oO=1007,_h=1008,aO=1008,Kl=1009,yP=1010,xP=1011,I2=1012,Rb=1013,Vu=1014,Js=1015,co=1016,kb=1017,Nb=1018,ph=1020,wP=1021,uo=1023,SP=1024,_P=1025,mh=1026,Wf=1027,Ib=1028,Db=1029,bP=1030,Ob=1031,Fb=1033,uy=33776,cy=33777,hy=33778,fy=33779,A_=35840,T_=35841,C_=35842,L_=35843,MP=36196,P_=37492,R_=37496,k_=37808,N_=37809,I_=37810,D_=37811,O_=37812,F_=37813,U_=37814,B_=37815,z_=37816,H_=37817,G_=37818,V_=37819,W_=37820,j_=37821,dy=36492,EP=36283,q_=36284,X_=36285,Y_=36286,AP=2200,TP=2201,CP=2202,cg=2300,hg=2301,py=2302,Ef=2400,Af=2401,fg=2402,D2=2500,Ub=2501,lO=0,uO=1,cO=2,Bb=3e3,gh=3001,LP=3200,PP=3201,Rh=0,RP=1,vh="",Un="srgb",gl="srgb-linear",zb="display-p3",hO=0,my=7680,fO=7681,dO=7682,pO=7683,mO=34055,gO=34056,vO=5386,yO=512,xO=513,wO=514,SO=515,_O=516,bO=517,MO=518,kP=519,NP=512,IP=513,DP=514,OP=515,FP=516,UP=517,BP=518,zP=519,dg=35044,EO=35048,AO=35040,TO=35045,CO=35049,LO=35041,PO=35046,RO=35050,kO=35042,NO="100",$_="300 es",t2=1035,jl=2e3,pg=2001;let rc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const Hs=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let uE=1234567;const Df=Math.PI/180,em=180/Math.PI;function na(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Hs[n&255]+Hs[n>>8&255]+Hs[n>>16&255]+Hs[n>>24&255]+"-"+Hs[e&255]+Hs[e>>8&255]+"-"+Hs[e>>16&15|64]+Hs[e>>24&255]+"-"+Hs[t&63|128]+Hs[t>>8&255]+"-"+Hs[t>>16&255]+Hs[t>>24&255]+Hs[r&255]+Hs[r>>8&255]+Hs[r>>16&255]+Hs[r>>24&255]).toLowerCase()}function bi(n,e,t){return Math.max(e,Math.min(t,n))}function Hb(n,e){return(n%e+e)%e}function IO(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function DO(n,e,t){return n!==e?(t-n)/(e-n):0}function N0(n,e,t){return(1-t)*n+t*e}function OO(n,e,t,r){return N0(n,e,1-Math.exp(-t*r))}function FO(n,e=1){return e-Math.abs(Hb(n,e*2)-e)}function UO(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function BO(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function zO(n,e){return n+Math.floor(Math.random()*(e-n+1))}function HO(n,e){return n+Math.random()*(e-n)}function GO(n){return n*(.5-Math.random())}function VO(n){n!==void 0&&(uE=n);let e=uE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function WO(n){return n*Df}function jO(n){return n*em}function Z_(n){return(n&n-1)===0&&n!==0}function HP(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function n2(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function qO(n,e,t,r,i){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+r)/2),c=o((e+r)/2),h=s((e-r)/2),d=o((e-r)/2),m=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":n.set(a*c,l*h,l*d,a*u);break;case"YZY":n.set(l*d,a*c,l*h,a*u);break;case"ZXZ":n.set(l*h,l*d,a*c,a*u);break;case"XZX":n.set(a*c,l*v,l*m,a*u);break;case"YXY":n.set(l*m,a*c,l*v,a*u);break;case"ZYZ":n.set(l*v,l*m,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Po(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Vn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const XO={DEG2RAD:Df,RAD2DEG:em,generateUUID:na,clamp:bi,euclideanModulo:Hb,mapLinear:IO,inverseLerp:DO,lerp:N0,damp:OO,pingpong:FO,smoothstep:UO,smootherstep:BO,randInt:zO,randFloat:HO,randFloatSpread:GO,seededRandom:VO,degToRad:WO,radToDeg:jO,isPowerOfTwo:Z_,ceilPowerOfTwo:HP,floorPowerOfTwo:n2,setQuaternionFromProperEuler:qO,normalize:Vn,denormalize:Po};class xt{constructor(e=0,t=0){xt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(bi(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class jn{constructor(e,t,r,i,s,o,a,l,u){jn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,u)}set(e,t,r,i,s,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=s,c[5]=l,c[6]=r,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],c=r[4],h=r[7],d=r[2],m=r[5],v=r[8],w=i[0],x=i[3],g=i[6],S=i[1],_=i[4],T=i[7],L=i[2],P=i[5],N=i[8];return s[0]=o*w+a*S+l*L,s[3]=o*x+a*_+l*P,s[6]=o*g+a*T+l*N,s[1]=u*w+c*S+h*L,s[4]=u*x+c*_+h*P,s[7]=u*g+c*T+h*N,s[2]=d*w+m*S+v*L,s[5]=d*x+m*_+v*P,s[8]=d*g+m*T+v*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-r*s*c+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=c*o-a*u,d=a*l-c*s,m=u*s-o*l,v=t*h+r*d+i*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const w=1/v;return e[0]=h*w,e[1]=(i*u-c*r)*w,e[2]=(a*r-i*o)*w,e[3]=d*w,e[4]=(c*t-i*l)*w,e[5]=(i*s-a*t)*w,e[6]=m*w,e[7]=(r*l-u*t)*w,e[8]=(o*t-r*s)*w,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(sw.makeScale(e,t)),this}rotate(e){return this.premultiply(sw.makeRotation(-e)),this}translate(e,t){return this.premultiply(sw.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const sw=new jn;function GP(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const YO={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Ap(n,e){return new YO[n](e)}function mg(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const cE={};function I0(n){n in cE||(cE[n]=!0,console.warn(n))}function Op(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function ow(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const $O=new jn().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),ZO=new jn().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function KO(n){return n.convertSRGBToLinear().applyMatrix3(ZO)}function JO(n){return n.applyMatrix3($O).convertLinearToSRGB()}const QO={[gl]:n=>n,[Un]:n=>n.convertSRGBToLinear(),[zb]:KO},eF={[gl]:n=>n,[Un]:n=>n.convertLinearToSRGB(),[zb]:JO},La={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return gl},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=QO[e],i=eF[t];if(r===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let Nd;class Gb{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Nd===void 0&&(Nd=mg("canvas")),Nd.width=e.width,Nd.height=e.height;const r=Nd.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Nd}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=mg("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Op(s[o]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Op(t[r]/255)*255):t[r]=Op(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let tF=0;class Tf{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:tF++}),this.uuid=na(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(aw(i[o].image)):s.push(aw(i[o]))}else s=aw(i);r.url=s}return t||(e.images[this.uuid]=r),r}}function aw(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Gb.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let nF=0;class Mi extends rc{constructor(e=Mi.DEFAULT_IMAGE,t=Mi.DEFAULT_MAPPING,r=Zs,i=Zs,s=qr,o=_h,a=uo,l=Kl,u=Mi.DEFAULT_ANISOTROPY,c=vh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:nF++}),this.uuid=na(),this.name="",this.source=new Tf(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new xt(0,0),this.repeat=new xt(1,1),this.center=new xt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new jn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof c=="string"?this.colorSpace=c:(I0("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===gh?Un:vh),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==N2)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case lg:e.x=e.x-Math.floor(e.x);break;case Zs:e.x=e.x<0?0:1;break;case ug:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case lg:e.y=e.y-Math.floor(e.y);break;case Zs:e.y=e.y<0?0:1;break;case ug:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return I0("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Un?gh:Bb}set encoding(e){I0("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===gh?Un:vh}}Mi.DEFAULT_IMAGE=null;Mi.DEFAULT_MAPPING=N2;Mi.DEFAULT_ANISOTROPY=1;class Ar{constructor(e=0,t=0,r=0,i=1){Ar.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*t+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*t+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*t+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,s;const l=e.elements,u=l[0],c=l[4],h=l[8],d=l[1],m=l[5],v=l[9],w=l[2],x=l[6],g=l[10];if(Math.abs(c-d)<.01&&Math.abs(h-w)<.01&&Math.abs(v-x)<.01){if(Math.abs(c+d)<.1&&Math.abs(h+w)<.1&&Math.abs(v+x)<.1&&Math.abs(u+m+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(u+1)/2,T=(m+1)/2,L=(g+1)/2,P=(c+d)/4,N=(h+w)/4,k=(v+x)/4;return _>T&&_>L?_<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(_),i=P/r,s=N/r):T>L?T<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(T),r=P/i,s=k/i):L<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(L),r=N/s,i=k/s),this.set(r,i,s,t),this}let S=Math.sqrt((x-v)*(x-v)+(h-w)*(h-w)+(d-c)*(d-c));return Math.abs(S)<.001&&(S=1),this.x=(x-v)/S,this.y=(h-w)/S,this.z=(d-c)/S,this.w=Math.acos((u+m+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class VP extends rc{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Ar(0,0,e,t),this.scissorTest=!1,this.viewport=new Ar(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(I0("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===gh?Un:vh),this.texture=new Mi(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:qr,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Tf(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class vl extends VP{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class O2 extends Mi{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Ri,this.minFilter=Ri,this.wrapR=Zs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class rF extends vl{constructor(e=1,t=1,r=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new O2(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class Vb extends Mi{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Ri,this.minFilter=Ri,this.wrapR=Zs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class iF extends vl{constructor(e=1,t=1,r=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new Vb(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class sF extends vl{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Qs{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,s,o,a){let l=r[i+0],u=r[i+1],c=r[i+2],h=r[i+3];const d=s[o+0],m=s[o+1],v=s[o+2],w=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h;return}if(a===1){e[t+0]=d,e[t+1]=m,e[t+2]=v,e[t+3]=w;return}if(h!==w||l!==d||u!==m||c!==v){let x=1-a;const g=l*d+u*m+c*v+h*w,S=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){const L=Math.sqrt(_),P=Math.atan2(L,g*S);x=Math.sin(x*P)/L,a=Math.sin(a*P)/L}const T=a*S;if(l=l*x+d*T,u=u*x+m*T,c=c*x+v*T,h=h*x+w*T,x===1-a){const L=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=L,u*=L,c*=L,h*=L}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],c=r[i+3],h=s[o],d=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+c*h+l*m-u*d,e[t+1]=l*v+c*d+u*h-a*m,e[t+2]=u*v+c*m+a*d-l*h,e[t+3]=c*v-a*h-l*d-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),c=a(i/2),h=a(s/2),d=l(r/2),m=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=d*c*h+u*m*v,this._y=u*m*h-d*c*v,this._z=u*c*v+d*m*h,this._w=u*c*h-d*m*v;break;case"YXZ":this._x=d*c*h+u*m*v,this._y=u*m*h-d*c*v,this._z=u*c*v-d*m*h,this._w=u*c*h+d*m*v;break;case"ZXY":this._x=d*c*h-u*m*v,this._y=u*m*h+d*c*v,this._z=u*c*v+d*m*h,this._w=u*c*h-d*m*v;break;case"ZYX":this._x=d*c*h-u*m*v,this._y=u*m*h+d*c*v,this._z=u*c*v-d*m*h,this._w=u*c*h+d*m*v;break;case"YZX":this._x=d*c*h+u*m*v,this._y=u*m*h+d*c*v,this._z=u*c*v-d*m*h,this._w=u*c*h-d*m*v;break;case"XZY":this._x=d*c*h-u*m*v,this._y=u*m*h-d*c*v,this._z=u*c*v+d*m*h,this._w=u*c*h+d*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],c=t[6],h=t[10],d=r+a+h;if(d>0){const m=.5/Math.sqrt(d+1);this._w=.25/m,this._x=(c-l)*m,this._y=(s-u)*m,this._z=(o-i)*m}else if(r>a&&r>h){const m=2*Math.sqrt(1+r-a-h);this._w=(c-l)/m,this._x=.25*m,this._y=(i+o)/m,this._z=(s+u)/m}else if(a>h){const m=2*Math.sqrt(1+a-r-h);this._w=(s-u)/m,this._x=(i+o)/m,this._y=.25*m,this._z=(l+c)/m}else{const m=2*Math.sqrt(1+h-r-a);this._w=(o-i)/m,this._x=(s+u)/m,this._y=(l+c)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(bi(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+o*a+i*u-s*l,this._y=i*c+o*l+s*a-r*u,this._z=s*c+o*u+r*l-i*a,this._w=o*c-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*r+t*this._x,this._y=m*i+t*this._y,this._z=m*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),h=Math.sin((1-t)*c)/u,d=Math.sin(t*c)/u;return this._w=o*h+this._w*d,this._x=r*h+this._x*d,this._y=i*h+this._y*d,this._z=s*h+this._z*d,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(s),r*Math.cos(s),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ve{constructor(e=0,t=0,r=0){ve.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(hE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(hE.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[3]*r+s[6]*i,this.y=s[1]*t+s[4]*r+s[7]*i,this.z=s[2]*t+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*t+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*t+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*t+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*t+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=l*t+o*i-a*r,c=l*r+a*t-s*i,h=l*i+s*r-o*t,d=-s*t-o*r-a*i;return this.x=u*l+d*-s+c*-a-h*-o,this.y=c*l+d*-o+h*-s-u*-a,this.z=h*l+d*-a+u*-o-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i,this.y=s[1]*t+s[5]*r+s[9]*i,this.z=s[2]*t+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return lw.copy(this).projectOnVector(e),this.sub(lw)}reflect(e){return this.sub(lw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(bi(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const lw=new ve,hE=new Qs;class ru{constructor(e=new ve(1/0,1/0,1/0),t=new ve(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(Tu.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(Tu.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=Tu.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Id.copy(e.boundingBox),Id.applyMatrix4(e.matrixWorld),this.union(Id);else{const i=e.geometry;if(i!==void 0)if(t&&i.attributes!==void 0&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)Tu.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Tu)}else i.boundingBox===null&&i.computeBoundingBox(),Id.copy(i.boundingBox),Id.applyMatrix4(e.matrixWorld),this.union(Id)}const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Tu),Tu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Km),W1.subVectors(this.max,Km),Dd.subVectors(e.a,Km),Od.subVectors(e.b,Km),Fd.subVectors(e.c,Km),Ic.subVectors(Od,Dd),Dc.subVectors(Fd,Od),tf.subVectors(Dd,Fd);let t=[0,-Ic.z,Ic.y,0,-Dc.z,Dc.y,0,-tf.z,tf.y,Ic.z,0,-Ic.x,Dc.z,0,-Dc.x,tf.z,0,-tf.x,-Ic.y,Ic.x,0,-Dc.y,Dc.x,0,-tf.y,tf.x,0];return!uw(t,Dd,Od,Fd,W1)||(t=[1,0,0,0,1,0,0,0,1],!uw(t,Dd,Od,Fd,W1))?!1:(j1.crossVectors(Ic,Dc),t=[j1.x,j1.y,j1.z],uw(t,Dd,Od,Fd,W1))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Tu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Tu).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Au[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Au[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Au[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Au[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Au[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Au[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Au[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Au[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Au),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Au=[new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve],Tu=new ve,Id=new ru,Dd=new ve,Od=new ve,Fd=new ve,Ic=new ve,Dc=new ve,tf=new ve,Km=new ve,W1=new ve,j1=new ve,nf=new ve;function uw(n,e,t,r,i){for(let s=0,o=n.length-3;s<=o;s+=3){nf.fromArray(n,s);const a=i.x*Math.abs(nf.x)+i.y*Math.abs(nf.y)+i.z*Math.abs(nf.z),l=e.dot(nf),u=t.dot(nf),c=r.dot(nf);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const oF=new ru,Jm=new ve,cw=new ve;class _l{constructor(e=new ve,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):oF.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Jm.subVectors(e,this.center);const t=Jm.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(Jm,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(cw.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Jm.copy(e.center).add(cw)),this.expandByPoint(Jm.copy(e.center).sub(cw))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Cu=new ve,hw=new ve,q1=new ve,Oc=new ve,fw=new ve,X1=new ve,dw=new ve;class ed{constructor(e=new ve,t=new ve(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Cu)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Cu.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Cu.copy(this.origin).addScaledVector(this.direction,t),Cu.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){hw.copy(e).add(t).multiplyScalar(.5),q1.copy(t).sub(e).normalize(),Oc.copy(this.origin).sub(hw);const s=e.distanceTo(t)*.5,o=-this.direction.dot(q1),a=Oc.dot(this.direction),l=-Oc.dot(q1),u=Oc.lengthSq(),c=Math.abs(1-o*o);let h,d,m,v;if(c>0)if(h=o*l-a,d=o*a-l,v=s*c,h>=0)if(d>=-v)if(d<=v){const w=1/c;h*=w,d*=w,m=h*(h+o*d+2*a)+d*(o*h+d+2*l)+u}else d=s,h=Math.max(0,-(o*d+a)),m=-h*h+d*(d+2*l)+u;else d=-s,h=Math.max(0,-(o*d+a)),m=-h*h+d*(d+2*l)+u;else d<=-v?(h=Math.max(0,-(-o*s+a)),d=h>0?-s:Math.min(Math.max(-s,-l),s),m=-h*h+d*(d+2*l)+u):d<=v?(h=0,d=Math.min(Math.max(-s,-l),s),m=d*(d+2*l)+u):(h=Math.max(0,-(o*s+a)),d=h>0?s:Math.min(Math.max(-s,-l),s),m=-h*h+d*(d+2*l)+u);else d=o>0?-s:s,h=Math.max(0,-(o*d+a)),m=-h*h+d*(d+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(hw).addScaledVector(q1,d),m}intersectSphere(e,t){Cu.subVectors(e.center,this.origin);const r=Cu.dot(this.direction),i=Cu.dot(Cu)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,s,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,d=this.origin;return u>=0?(r=(e.min.x-d.x)*u,i=(e.max.x-d.x)*u):(r=(e.max.x-d.x)*u,i=(e.min.x-d.x)*u),c>=0?(s=(e.min.y-d.y)*c,o=(e.max.y-d.y)*c):(s=(e.max.y-d.y)*c,o=(e.min.y-d.y)*c),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),h>=0?(a=(e.min.z-d.z)*h,l=(e.max.z-d.z)*h):(a=(e.max.z-d.z)*h,l=(e.min.z-d.z)*h),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,Cu)!==null}intersectTriangle(e,t,r,i,s){fw.subVectors(t,e),X1.subVectors(r,e),dw.crossVectors(fw,X1);let o=this.direction.dot(dw),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Oc.subVectors(this.origin,e);const l=a*this.direction.dot(X1.crossVectors(Oc,X1));if(l<0)return null;const u=a*this.direction.dot(fw.cross(Oc));if(u<0||l+u>o)return null;const c=-a*Oc.dot(dw);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Fn{constructor(e,t,r,i,s,o,a,l,u,c,h,d,m,v,w,x){Fn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,s,o,a,l,u,c,h,d,m,v,w,x)}set(e,t,r,i,s,o,a,l,u,c,h,d,m,v,w,x){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=u,g[6]=c,g[10]=h,g[14]=d,g[3]=m,g[7]=v,g[11]=w,g[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Fn().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Ud.setFromMatrixColumn(e,0).length(),s=1/Ud.setFromMatrixColumn(e,1).length(),o=1/Ud.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*s,t[5]=r[5]*s,t[6]=r[6]*s,t[7]=0,t[8]=r[8]*o,t[9]=r[9]*o,t[10]=r[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const d=o*c,m=o*h,v=a*c,w=a*h;t[0]=l*c,t[4]=-l*h,t[8]=u,t[1]=m+v*u,t[5]=d-w*u,t[9]=-a*l,t[2]=w-d*u,t[6]=v+m*u,t[10]=o*l}else if(e.order==="YXZ"){const d=l*c,m=l*h,v=u*c,w=u*h;t[0]=d+w*a,t[4]=v*a-m,t[8]=o*u,t[1]=o*h,t[5]=o*c,t[9]=-a,t[2]=m*a-v,t[6]=w+d*a,t[10]=o*l}else if(e.order==="ZXY"){const d=l*c,m=l*h,v=u*c,w=u*h;t[0]=d-w*a,t[4]=-o*h,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*c,t[9]=w-d*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const d=o*c,m=o*h,v=a*c,w=a*h;t[0]=l*c,t[4]=v*u-m,t[8]=d*u+w,t[1]=l*h,t[5]=w*u+d,t[9]=m*u-v,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const d=o*l,m=o*u,v=a*l,w=a*u;t[0]=l*c,t[4]=w-d*h,t[8]=v*h+m,t[1]=h,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=m*h+v,t[10]=d-w*h}else if(e.order==="XZY"){const d=o*l,m=o*u,v=a*l,w=a*u;t[0]=l*c,t[4]=-h,t[8]=u*c,t[1]=d*h+w,t[5]=o*c,t[9]=m*h-v,t[2]=v*h-m,t[6]=a*c,t[10]=w*h+d}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(aF,e,lF)}lookAt(e,t,r){const i=this.elements;return Zo.subVectors(e,t),Zo.lengthSq()===0&&(Zo.z=1),Zo.normalize(),Fc.crossVectors(r,Zo),Fc.lengthSq()===0&&(Math.abs(r.z)===1?Zo.x+=1e-4:Zo.z+=1e-4,Zo.normalize(),Fc.crossVectors(r,Zo)),Fc.normalize(),Y1.crossVectors(Zo,Fc),i[0]=Fc.x,i[4]=Y1.x,i[8]=Zo.x,i[1]=Fc.y,i[5]=Y1.y,i[9]=Zo.y,i[2]=Fc.z,i[6]=Y1.z,i[10]=Zo.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],c=r[1],h=r[5],d=r[9],m=r[13],v=r[2],w=r[6],x=r[10],g=r[14],S=r[3],_=r[7],T=r[11],L=r[15],P=i[0],N=i[4],k=i[8],R=i[12],U=i[1],F=i[5],z=i[9],V=i[13],G=i[2],J=i[6],ie=i[10],ce=i[14],W=i[3],Y=i[7],$=i[11],oe=i[15];return s[0]=o*P+a*U+l*G+u*W,s[4]=o*N+a*F+l*J+u*Y,s[8]=o*k+a*z+l*ie+u*$,s[12]=o*R+a*V+l*ce+u*oe,s[1]=c*P+h*U+d*G+m*W,s[5]=c*N+h*F+d*J+m*Y,s[9]=c*k+h*z+d*ie+m*$,s[13]=c*R+h*V+d*ce+m*oe,s[2]=v*P+w*U+x*G+g*W,s[6]=v*N+w*F+x*J+g*Y,s[10]=v*k+w*z+x*ie+g*$,s[14]=v*R+w*V+x*ce+g*oe,s[3]=S*P+_*U+T*G+L*W,s[7]=S*N+_*F+T*J+L*Y,s[11]=S*k+_*z+T*ie+L*$,s[15]=S*R+_*V+T*ce+L*oe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],h=e[6],d=e[10],m=e[14],v=e[3],w=e[7],x=e[11],g=e[15];return v*(+s*l*h-i*u*h-s*a*d+r*u*d+i*a*m-r*l*m)+w*(+t*l*m-t*u*d+s*o*d-i*o*m+i*u*c-s*l*c)+x*(+t*u*h-t*a*m-s*o*h+r*o*m+s*a*c-r*u*c)+g*(-i*a*c-t*l*h+t*a*d+i*o*h-r*o*d+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=e[9],d=e[10],m=e[11],v=e[12],w=e[13],x=e[14],g=e[15],S=h*x*u-w*d*u+w*l*m-a*x*m-h*l*g+a*d*g,_=v*d*u-c*x*u-v*l*m+o*x*m+c*l*g-o*d*g,T=c*w*u-v*h*u+v*a*m-o*w*m-c*a*g+o*h*g,L=v*h*l-c*w*l-v*a*d+o*w*d+c*a*x-o*h*x,P=t*S+r*_+i*T+s*L;if(P===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/P;return e[0]=S*N,e[1]=(w*d*s-h*x*s-w*i*m+r*x*m+h*i*g-r*d*g)*N,e[2]=(a*x*s-w*l*s+w*i*u-r*x*u-a*i*g+r*l*g)*N,e[3]=(h*l*s-a*d*s-h*i*u+r*d*u+a*i*m-r*l*m)*N,e[4]=_*N,e[5]=(c*x*s-v*d*s+v*i*m-t*x*m-c*i*g+t*d*g)*N,e[6]=(v*l*s-o*x*s-v*i*u+t*x*u+o*i*g-t*l*g)*N,e[7]=(o*d*s-c*l*s+c*i*u-t*d*u-o*i*m+t*l*m)*N,e[8]=T*N,e[9]=(v*h*s-c*w*s-v*r*m+t*w*m+c*r*g-t*h*g)*N,e[10]=(o*w*s-v*a*s+v*r*u-t*w*u-o*r*g+t*a*g)*N,e[11]=(c*a*s-o*h*s-c*r*u+t*h*u+o*r*m-t*a*m)*N,e[12]=L*N,e[13]=(c*w*i-v*h*i+v*r*d-t*w*d-c*r*x+t*h*x)*N,e[14]=(v*a*i-o*w*i-v*r*l+t*w*l+o*r*x-t*a*x)*N,e[15]=(o*h*i-c*a*i+c*r*l-t*h*l-o*r*d+t*a*d)*N,this}scale(e){const t=this.elements,r=e.x,i=e.y,s=e.z;return t[0]*=r,t[4]*=i,t[8]*=s,t[1]*=r,t[5]*=i,t[9]*=s,t[2]*=r,t[6]*=i,t[10]*=s,t[3]*=r,t[7]*=i,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,c=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,c*a+r,c*l-i*o,0,u*l-i*a,c*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,c=o+o,h=a+a,d=s*u,m=s*c,v=s*h,w=o*c,x=o*h,g=a*h,S=l*u,_=l*c,T=l*h,L=r.x,P=r.y,N=r.z;return i[0]=(1-(w+g))*L,i[1]=(m+T)*L,i[2]=(v-_)*L,i[3]=0,i[4]=(m-T)*P,i[5]=(1-(d+g))*P,i[6]=(x+S)*P,i[7]=0,i[8]=(v+_)*N,i[9]=(x-S)*N,i[10]=(1-(d+w))*N,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let s=Ud.set(i[0],i[1],i[2]).length();const o=Ud.set(i[4],i[5],i[6]).length(),a=Ud.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],Ja.copy(this);const u=1/s,c=1/o,h=1/a;return Ja.elements[0]*=u,Ja.elements[1]*=u,Ja.elements[2]*=u,Ja.elements[4]*=c,Ja.elements[5]*=c,Ja.elements[6]*=c,Ja.elements[8]*=h,Ja.elements[9]*=h,Ja.elements[10]*=h,t.setFromRotationMatrix(Ja),r.x=s,r.y=o,r.z=a,this}makePerspective(e,t,r,i,s,o,a=jl){const l=this.elements,u=2*s/(t-e),c=2*s/(r-i),h=(t+e)/(t-e),d=(r+i)/(r-i);let m,v;if(a===jl)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===pg)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=c,l[9]=d,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,s,o,a=jl){const l=this.elements,u=1/(t-e),c=1/(r-i),h=1/(o-s),d=(t+e)*u,m=(r+i)*c;let v,w;if(a===jl)v=(o+s)*h,w=-2*h;else if(a===pg)v=s*h,w=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-d,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=w,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Ud=new ve,Ja=new Fn,aF=new ve(0,0,0),lF=new ve(1,1,1),Fc=new ve,Y1=new ve,Zo=new ve,fE=new Fn,dE=new Qs;class Gg{constructor(e=0,t=0,r=0,i=Gg.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],c=i[9],h=i[2],d=i[6],m=i[10];switch(t){case"XYZ":this._y=Math.asin(bi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,u),this._z=0);break;case"YXZ":this._x=Math.asin(-bi(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(bi(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-bi(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(bi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-bi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return fE.makeRotationFromQuaternion(e),this.setFromRotationMatrix(fE,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return dE.setFromEuler(this),this.setFromQuaternion(dE,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Gg.DEFAULT_ORDER="XYZ";class Of{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let uF=0;const pE=new ve,Bd=new Qs,Lu=new Fn,$1=new ve,Qm=new ve,cF=new ve,hF=new Qs,mE=new ve(1,0,0),gE=new ve(0,1,0),vE=new ve(0,0,1),fF={type:"added"},yE={type:"removed"};class ur extends rc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:uF++}),this.uuid=na(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ur.DEFAULT_UP.clone();const e=new ve,t=new Gg,r=new Qs,i=new ve(1,1,1);function s(){r.setFromEuler(t,!1)}function o(){t.setFromQuaternion(r,void 0,!1)}t._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Fn},normalMatrix:{value:new jn}}),this.matrix=new Fn,this.matrixWorld=new Fn,this.matrixAutoUpdate=ur.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=ur.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Of,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Bd.setFromAxisAngle(e,t),this.quaternion.multiply(Bd),this}rotateOnWorldAxis(e,t){return Bd.setFromAxisAngle(e,t),this.quaternion.premultiply(Bd),this}rotateX(e){return this.rotateOnAxis(mE,e)}rotateY(e){return this.rotateOnAxis(gE,e)}rotateZ(e){return this.rotateOnAxis(vE,e)}translateOnAxis(e,t){return pE.copy(e).applyQuaternion(this.quaternion),this.position.add(pE.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(mE,e)}translateY(e){return this.translateOnAxis(gE,e)}translateZ(e){return this.translateOnAxis(vE,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Lu.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?$1.copy(e):$1.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),Qm.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Lu.lookAt(Qm,$1,this.up):Lu.lookAt($1,Qm,this.up),this.quaternion.setFromRotationMatrix(Lu),i&&(Lu.extractRotation(i.matrixWorld),Bd.setFromRotationMatrix(Lu),this.quaternion.premultiply(Bd.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(fF)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(yE)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(yE)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Lu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Lu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Lu),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,t);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qm,e,cF),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Qm,hF,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const s=t[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const h=l[u];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),h=o(e.shapes),d=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),h.length>0&&(r.shapes=h),d.length>0&&(r.skeletons=d),m.length>0&&(r.animations=m),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}ur.DEFAULT_UP=new ve(0,1,0);ur.DEFAULT_MATRIX_AUTO_UPDATE=!0;ur.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Qa=new ve,Pu=new ve,pw=new ve,Ru=new ve,zd=new ve,Hd=new ve,xE=new ve,mw=new ve,gw=new ve,vw=new ve;let Z1=!1;class Lo{constructor(e=new ve,t=new ve,r=new ve){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Qa.subVectors(e,t),i.cross(Qa);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,t,r,i,s){Qa.subVectors(i,t),Pu.subVectors(r,t),pw.subVectors(e,t);const o=Qa.dot(Qa),a=Qa.dot(Pu),l=Qa.dot(pw),u=Pu.dot(Pu),c=Pu.dot(pw),h=o*u-a*a;if(h===0)return s.set(-2,-1,-1);const d=1/h,m=(u*l-a*c)*d,v=(o*c-a*l)*d;return s.set(1-m-v,v,m)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,Ru),Ru.x>=0&&Ru.y>=0&&Ru.x+Ru.y<=1}static getUV(e,t,r,i,s,o,a,l){return Z1===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Z1=!0),this.getInterpolation(e,t,r,i,s,o,a,l)}static getInterpolation(e,t,r,i,s,o,a,l){return this.getBarycoord(e,t,r,i,Ru),l.setScalar(0),l.addScaledVector(s,Ru.x),l.addScaledVector(o,Ru.y),l.addScaledVector(a,Ru.z),l}static isFrontFacing(e,t,r,i){return Qa.subVectors(r,t),Pu.subVectors(e,t),Qa.cross(Pu).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Qa.subVectors(this.c,this.b),Pu.subVectors(this.a,this.b),Qa.cross(Pu).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Lo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Lo.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,s){return Z1===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Z1=!0),Lo.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}getInterpolation(e,t,r,i,s){return Lo.getInterpolation(e,this.a,this.b,this.c,t,r,i,s)}containsPoint(e){return Lo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Lo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,s=this.c;let o,a;zd.subVectors(i,r),Hd.subVectors(s,r),mw.subVectors(e,r);const l=zd.dot(mw),u=Hd.dot(mw);if(l<=0&&u<=0)return t.copy(r);gw.subVectors(e,i);const c=zd.dot(gw),h=Hd.dot(gw);if(c>=0&&h<=c)return t.copy(i);const d=l*h-c*u;if(d<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(r).addScaledVector(zd,o);vw.subVectors(e,s);const m=zd.dot(vw),v=Hd.dot(vw);if(v>=0&&m<=v)return t.copy(s);const w=m*u-l*v;if(w<=0&&u>=0&&v<=0)return a=u/(u-v),t.copy(r).addScaledVector(Hd,a);const x=c*v-m*h;if(x<=0&&h-c>=0&&m-v>=0)return xE.subVectors(s,i),a=(h-c)/(h-c+(m-v)),t.copy(i).addScaledVector(xE,a);const g=1/(x+w+d);return o=w*g,a=d*g,t.copy(r).addScaledVector(zd,o).addScaledVector(Hd,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let dF=0;class Ns extends rc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:dF++}),this.uuid=na(),this.name="",this.type="Material",this.blending=If,this.side=Qu,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Tb,this.blendDst=Cb,this.blendEquation=yf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Qy,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=kP,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=my,this.stencilZFail=my,this.stencilZPass=my,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==If&&(r.blending=this.blending),this.side!==Qu&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=t[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const WP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},el={h:0,s:0,l:0},K1={h:0,s:0,l:0};function yw(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class $t{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Un){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,La.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=La.workingColorSpace){return this.r=e,this.g=t,this.b=r,La.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=La.workingColorSpace){if(e=Hb(e,1),t=bi(t,0,1),r=bi(r,0,1),t===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+t):r+t-r*t,o=2*r-s;this.r=yw(o,s,e+1/3),this.g=yw(o,s,e),this.b=yw(o,s,e-1/3)}return La.toWorkingColorSpace(this,i),this}setStyle(e,t=Un){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Un){const r=WP[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Op(e.r),this.g=Op(e.g),this.b=Op(e.b),this}copyLinearToSRGB(e){return this.r=ow(e.r),this.g=ow(e.g),this.b=ow(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Un){return La.fromWorkingColorSpace(Gs.copy(this),e),Math.round(bi(Gs.r*255,0,255))*65536+Math.round(bi(Gs.g*255,0,255))*256+Math.round(bi(Gs.b*255,0,255))}getHexString(e=Un){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=La.workingColorSpace){La.fromWorkingColorSpace(Gs.copy(this),t);const r=Gs.r,i=Gs.g,s=Gs.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const h=o-a;switch(u=c<=.5?h/(o+a):h/(2-o-a),o){case r:l=(i-s)/h+(i<s?6:0);break;case i:l=(s-r)/h+2;break;case s:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=La.workingColorSpace){return La.fromWorkingColorSpace(Gs.copy(this),t),e.r=Gs.r,e.g=Gs.g,e.b=Gs.b,e}getStyle(e=Un){La.fromWorkingColorSpace(Gs.copy(this),e);const t=Gs.r,r=Gs.g,i=Gs.b;return e!==Un?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(el),el.h+=e,el.s+=t,el.l+=r,this.setHSL(el.h,el.s,el.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(el),e.getHSL(K1);const r=N0(el.h,K1.h,t),i=N0(el.s,K1.s,t),s=N0(el.l,K1.l,t);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*t+s[3]*r+s[6]*i,this.g=s[1]*t+s[4]*r+s[7]*i,this.b=s[2]*t+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Gs=new $t;$t.NAMES=WP;class kh extends Ns{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new $t(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Hg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const zu=pF();function pF(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function To(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=bi(n,-65504,65504),zu.floatView[0]=n;const e=zu.uint32View[0],t=e>>23&511;return zu.baseTable[t]+((e&8388607)>>zu.shiftTable[t])}function y0(n){const e=n>>10;return zu.uint32View[0]=zu.mantissaTable[zu.offsetTable[e]+(n&1023)]+zu.exponentTable[e],zu.floatView[0]}const Cf={toHalfFloat:To,fromHalfFloat:y0},Gi=new ve,J1=new xt;class Nr{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=dg,this.updateRange={offset:0,count:-1},this.gpuType=Js,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)J1.fromBufferAttribute(this,t),J1.applyMatrix3(e),this.setXY(t,J1.x,J1.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Gi.fromBufferAttribute(this,t),Gi.applyMatrix3(e),this.setXYZ(t,Gi.x,Gi.y,Gi.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Gi.fromBufferAttribute(this,t),Gi.applyMatrix4(e),this.setXYZ(t,Gi.x,Gi.y,Gi.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Gi.fromBufferAttribute(this,t),Gi.applyNormalMatrix(e),this.setXYZ(t,Gi.x,Gi.y,Gi.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Gi.fromBufferAttribute(this,t),Gi.transformDirection(e),this.setXYZ(t,Gi.x,Gi.y,Gi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Po(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=Vn(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Po(t,this.array)),t}setX(e,t){return this.normalized&&(t=Vn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Po(t,this.array)),t}setY(e,t){return this.normalized&&(t=Vn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Po(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Vn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Po(t,this.array)),t}setW(e,t){return this.normalized&&(t=Vn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Vn(t,this.array),r=Vn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Vn(t,this.array),r=Vn(r,this.array),i=Vn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Vn(t,this.array),r=Vn(r,this.array),i=Vn(i,this.array),s=Vn(s,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==dg&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class mF extends Nr{constructor(e,t,r){super(new Int8Array(e),t,r)}}class gF extends Nr{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class vF extends Nr{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class yF extends Nr{constructor(e,t,r){super(new Int16Array(e),t,r)}}class Wb extends Nr{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class xF extends Nr{constructor(e,t,r){super(new Int32Array(e),t,r)}}class jb extends Nr{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class wF extends Nr{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=y0(this.array[e*this.itemSize]);return this.normalized&&(t=Po(t,this.array)),t}setX(e,t){return this.normalized&&(t=Vn(t,this.array)),this.array[e*this.itemSize]=To(t),this}getY(e){let t=y0(this.array[e*this.itemSize+1]);return this.normalized&&(t=Po(t,this.array)),t}setY(e,t){return this.normalized&&(t=Vn(t,this.array)),this.array[e*this.itemSize+1]=To(t),this}getZ(e){let t=y0(this.array[e*this.itemSize+2]);return this.normalized&&(t=Po(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Vn(t,this.array)),this.array[e*this.itemSize+2]=To(t),this}getW(e){let t=y0(this.array[e*this.itemSize+3]);return this.normalized&&(t=Po(t,this.array)),t}setW(e,t){return this.normalized&&(t=Vn(t,this.array)),this.array[e*this.itemSize+3]=To(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=Vn(t,this.array),r=Vn(r,this.array)),this.array[e+0]=To(t),this.array[e+1]=To(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=Vn(t,this.array),r=Vn(r,this.array),i=Vn(i,this.array)),this.array[e+0]=To(t),this.array[e+1]=To(r),this.array[e+2]=To(i),this}setXYZW(e,t,r,i,s){return e*=this.itemSize,this.normalized&&(t=Vn(t,this.array),r=Vn(r,this.array),i=Vn(i,this.array),s=Vn(s,this.array)),this.array[e+0]=To(t),this.array[e+1]=To(r),this.array[e+2]=To(i),this.array[e+3]=To(s),this}}class en extends Nr{constructor(e,t,r){super(new Float32Array(e),t,r)}}class SF extends Nr{constructor(e,t,r){super(new Float64Array(e),t,r)}}let _F=0;const Ca=new Fn,xw=new ur,Gd=new ve,Ko=new ru,e0=new ru,gs=new ve;class kn extends rc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_F++}),this.uuid=na(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(GP(e)?jb:Wb)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new jn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ca.makeRotationFromQuaternion(e),this.applyMatrix4(Ca),this}rotateX(e){return Ca.makeRotationX(e),this.applyMatrix4(Ca),this}rotateY(e){return Ca.makeRotationY(e),this.applyMatrix4(Ca),this}rotateZ(e){return Ca.makeRotationZ(e),this.applyMatrix4(Ca),this}translate(e,t,r){return Ca.makeTranslation(e,t,r),this.applyMatrix4(Ca),this}scale(e,t,r){return Ca.makeScale(e,t,r),this.applyMatrix4(Ca),this}lookAt(e){return xw.lookAt(e),xw.updateMatrix(),this.applyMatrix4(xw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Gd).negate(),this.translate(Gd.x,Gd.y,Gd.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new en(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ru);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ve(-1/0,-1/0,-1/0),new ve(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const s=t[r];Ko.setFromBufferAttribute(s),this.morphTargetsRelative?(gs.addVectors(this.boundingBox.min,Ko.min),this.boundingBox.expandByPoint(gs),gs.addVectors(this.boundingBox.max,Ko.max),this.boundingBox.expandByPoint(gs)):(this.boundingBox.expandByPoint(Ko.min),this.boundingBox.expandByPoint(Ko.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new _l);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ve,1/0);return}if(e){const r=this.boundingSphere.center;if(Ko.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];e0.setFromBufferAttribute(a),this.morphTargetsRelative?(gs.addVectors(Ko.min,e0.min),Ko.expandByPoint(gs),gs.addVectors(Ko.max,e0.max),Ko.expandByPoint(gs)):(Ko.expandByPoint(e0.min),Ko.expandByPoint(e0.max))}Ko.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)gs.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(gs));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)gs.fromBufferAttribute(a,u),l&&(Gd.fromBufferAttribute(e,u),gs.add(Gd)),i=Math.max(i,r.distanceToSquared(gs))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,s=t.normal.array,o=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Nr(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let U=0;U<a;U++)u[U]=new ve,c[U]=new ve;const h=new ve,d=new ve,m=new ve,v=new xt,w=new xt,x=new xt,g=new ve,S=new ve;function _(U,F,z){h.fromArray(i,U*3),d.fromArray(i,F*3),m.fromArray(i,z*3),v.fromArray(o,U*2),w.fromArray(o,F*2),x.fromArray(o,z*2),d.sub(h),m.sub(h),w.sub(v),x.sub(v);const V=1/(w.x*x.y-x.x*w.y);isFinite(V)&&(g.copy(d).multiplyScalar(x.y).addScaledVector(m,-w.y).multiplyScalar(V),S.copy(m).multiplyScalar(w.x).addScaledVector(d,-x.x).multiplyScalar(V),u[U].add(g),u[F].add(g),u[z].add(g),c[U].add(S),c[F].add(S),c[z].add(S))}let T=this.groups;T.length===0&&(T=[{start:0,count:r.length}]);for(let U=0,F=T.length;U<F;++U){const z=T[U],V=z.start,G=z.count;for(let J=V,ie=V+G;J<ie;J+=3)_(r[J+0],r[J+1],r[J+2])}const L=new ve,P=new ve,N=new ve,k=new ve;function R(U){N.fromArray(s,U*3),k.copy(N);const F=u[U];L.copy(F),L.sub(N.multiplyScalar(N.dot(F))).normalize(),P.crossVectors(k,F);const V=P.dot(c[U])<0?-1:1;l[U*4]=L.x,l[U*4+1]=L.y,l[U*4+2]=L.z,l[U*4+3]=V}for(let U=0,F=T.length;U<F;++U){const z=T[U],V=z.start,G=z.count;for(let J=V,ie=V+G;J<ie;J+=3)R(r[J+0]),R(r[J+1]),R(r[J+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Nr(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let d=0,m=r.count;d<m;d++)r.setXYZ(d,0,0,0);const i=new ve,s=new ve,o=new ve,a=new ve,l=new ve,u=new ve,c=new ve,h=new ve;if(e)for(let d=0,m=e.count;d<m;d+=3){const v=e.getX(d+0),w=e.getX(d+1),x=e.getX(d+2);i.fromBufferAttribute(t,v),s.fromBufferAttribute(t,w),o.fromBufferAttribute(t,x),c.subVectors(o,s),h.subVectors(i,s),c.cross(h),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,w),u.fromBufferAttribute(r,x),a.add(c),l.add(c),u.add(c),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(w,l.x,l.y,l.z),r.setXYZ(x,u.x,u.y,u.z)}else for(let d=0,m=t.count;d<m;d+=3)i.fromBufferAttribute(t,d+0),s.fromBufferAttribute(t,d+1),o.fromBufferAttribute(t,d+2),c.subVectors(o,s),h.subVectors(i,s),c.cross(h),r.setXYZ(d+0,c.x,c.y,c.z),r.setXYZ(d+1,c.x,c.y,c.z),r.setXYZ(d+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)gs.fromBufferAttribute(e,t),gs.normalize(),e.setXYZ(t,gs.x,gs.y,gs.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,h=a.normalized,d=new u.constructor(l.length*c);let m=0,v=0;for(let w=0,x=l.length;w<x;w++){a.isInterleavedBufferAttribute?m=l[w]*a.data.stride+a.offset:m=l[w]*c;for(let g=0;g<c;g++)d[v++]=u[m++]}return new Nr(d,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new kn,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let c=0,h=u.length;c<h;c++){const d=u[c],m=e(d,r);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let h=0,d=u.length;h<d;h++){const m=u[h];c.push(m.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],h=s[u];for(let d=0,m=h.length;d<m;d++)c.push(h[d].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const h=o[u];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const wE=new Fn,rf=new ed,Q1=new _l,SE=new ve,Vd=new ve,Wd=new ve,jd=new ve,ww=new ve,ev=new ve,tv=new xt,nv=new xt,rv=new xt,_E=new ve,bE=new ve,ME=new ve,iv=new ve,sv=new ve;class ws extends ur{constructor(e=new kn,t=new kh){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){ev.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=a[l],h=s[l];c!==0&&(ww.fromBufferAttribute(h,e),o?ev.addScaledVector(ww,c):ev.addScaledVector(ww.sub(t),c))}t.add(ev)}return t}raycast(e,t){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Q1.copy(r.boundingSphere),Q1.applyMatrix4(s),rf.copy(e.ray).recast(e.near),!(Q1.containsPoint(rf.origin)===!1&&(rf.intersectSphere(Q1,SE)===null||rf.origin.distanceToSquared(SE)>(e.far-e.near)**2))&&(wE.copy(s).invert(),rf.copy(e.ray).applyMatrix4(wE),!(r.boundingBox!==null&&rf.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,rf)))}_computeIntersections(e,t,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,c=s.attributes.uv1,h=s.attributes.normal,d=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,w=d.length;v<w;v++){const x=d[v],g=o[x.materialIndex],S=Math.max(x.start,m.start),_=Math.min(a.count,Math.min(x.start+x.count,m.start+m.count));for(let T=S,L=_;T<L;T+=3){const P=a.getX(T),N=a.getX(T+1),k=a.getX(T+2);i=ov(this,g,e,r,u,c,h,P,N,k),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=x.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),w=Math.min(a.count,m.start+m.count);for(let x=v,g=w;x<g;x+=3){const S=a.getX(x),_=a.getX(x+1),T=a.getX(x+2);i=ov(this,o,e,r,u,c,h,S,_,T),i&&(i.faceIndex=Math.floor(x/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,w=d.length;v<w;v++){const x=d[v],g=o[x.materialIndex],S=Math.max(x.start,m.start),_=Math.min(l.count,Math.min(x.start+x.count,m.start+m.count));for(let T=S,L=_;T<L;T+=3){const P=T,N=T+1,k=T+2;i=ov(this,g,e,r,u,c,h,P,N,k),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=x.materialIndex,t.push(i))}}else{const v=Math.max(0,m.start),w=Math.min(l.count,m.start+m.count);for(let x=v,g=w;x<g;x+=3){const S=x,_=x+1,T=x+2;i=ov(this,o,e,r,u,c,h,S,_,T),i&&(i.faceIndex=Math.floor(x/3),t.push(i))}}}}function bF(n,e,t,r,i,s,o,a){let l;if(e.side===fo?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===Qu,a),l===null)return null;sv.copy(a),sv.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(sv);return u<t.near||u>t.far?null:{distance:u,point:sv.clone(),object:n}}function ov(n,e,t,r,i,s,o,a,l,u){n.getVertexPosition(a,Vd),n.getVertexPosition(l,Wd),n.getVertexPosition(u,jd);const c=bF(n,e,t,r,Vd,Wd,jd,iv);if(c){i&&(tv.fromBufferAttribute(i,a),nv.fromBufferAttribute(i,l),rv.fromBufferAttribute(i,u),c.uv=Lo.getInterpolation(iv,Vd,Wd,jd,tv,nv,rv,new xt)),s&&(tv.fromBufferAttribute(s,a),nv.fromBufferAttribute(s,l),rv.fromBufferAttribute(s,u),c.uv1=Lo.getInterpolation(iv,Vd,Wd,jd,tv,nv,rv,new xt),c.uv2=c.uv1),o&&(_E.fromBufferAttribute(o,a),bE.fromBufferAttribute(o,l),ME.fromBufferAttribute(o,u),c.normal=Lo.getInterpolation(iv,Vd,Wd,jd,_E,bE,ME,new ve),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const h={a,b:l,c:u,normal:new ve,materialIndex:0};Lo.getNormal(Vd,Wd,jd,h.normal),c.face=h}return c}class td extends kn{constructor(e=1,t=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],c=[],h=[];let d=0,m=0;v("z","y","x",-1,-1,r,t,e,o,s,0),v("z","y","x",1,-1,r,t,-e,o,s,1),v("x","z","y",1,1,e,r,t,i,o,2),v("x","z","y",1,-1,e,r,-t,i,o,3),v("x","y","z",1,-1,e,t,r,i,s,4),v("x","y","z",-1,-1,e,t,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new en(u,3)),this.setAttribute("normal",new en(c,3)),this.setAttribute("uv",new en(h,2));function v(w,x,g,S,_,T,L,P,N,k,R){const U=T/N,F=L/k,z=T/2,V=L/2,G=P/2,J=N+1,ie=k+1;let ce=0,W=0;const Y=new ve;for(let $=0;$<ie;$++){const oe=$*F-V;for(let D=0;D<J;D++){const j=D*U-z;Y[w]=j*S,Y[x]=oe*_,Y[g]=G,u.push(Y.x,Y.y,Y.z),Y[w]=0,Y[x]=0,Y[g]=P>0?1:-1,c.push(Y.x,Y.y,Y.z),h.push(D/N),h.push(1-$/k),ce+=1}}for(let $=0;$<k;$++)for(let oe=0;oe<N;oe++){const D=d+oe+J*$,j=d+oe+J*($+1),K=d+(oe+1)+J*($+1),ae=d+(oe+1)+J*$;l.push(D,j,ae),l.push(j,K,ae),W+=6}a.addGroup(m,W,R),m+=W,d+=ce}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new td(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function tm(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function ao(n){const e={};for(let t=0;t<n.length;t++){const r=tm(n[t]);for(const i in r)e[i]=r[i]}return e}function MF(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function jP(n){return n.getRenderTarget()===null?n.outputColorSpace:gl}const qP={clone:tm,merge:ao};var EF=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,AF=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class yl extends Ns{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=EF,this.fragmentShader=AF,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=tm(e.uniforms),this.uniformsGroups=MF(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?t.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[i]={type:"m4",value:o.toArray()}:t.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class Vg extends ur{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Fn,this.projectionMatrix=new Fn,this.projectionMatrixInverse=new Fn,this.coordinateSystem=jl}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Ni extends Vg{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=em*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Df*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return em*2*Math.atan(Math.tan(Df*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Df*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,t-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const qd=-90,Xd=1;class XP extends ur{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null;const i=new Ni(qd,Xd,e,t);i.layers=this.layers,this.add(i);const s=new Ni(qd,Xd,e,t);s.layers=this.layers,this.add(s);const o=new Ni(qd,Xd,e,t);o.layers=this.layers,this.add(o);const a=new Ni(qd,Xd,e,t);a.layers=this.layers,this.add(a);const l=new Ni(qd,Xd,e,t);l.layers=this.layers,this.add(l);const u=new Ni(qd,Xd,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===jl)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===pg)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,s,o,a,l,u]=this.children,c=e.getRenderTarget(),h=e.xr.enabled;e.xr.enabled=!1;const d=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,s),e.setRenderTarget(r,2),e.render(t,o),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=d,e.setRenderTarget(r,5),e.render(t,u),e.setRenderTarget(c),e.xr.enabled=h,r.texture.needsPMREMUpdate=!0}}class Wg extends Mi{constructor(e,t,r,i,s,o,a,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:nu,super(e,t,r,i,s,o,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class qb extends vl{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(I0("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===gh?Un:vh),this.texture=new Wg(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:qr}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new td(5,5,5),s=new yl({name:"CubemapFromEquirect",uniforms:tm(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:fo,blending:Xu});s.uniforms.tEquirect.value=t;const o=new ws(i,s),a=t.minFilter;return t.minFilter===_h&&(t.minFilter=qr),new XP(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,r,i);e.setRenderTarget(s)}}const Sw=new ve,TF=new ve,CF=new jn;let Fu=class{constructor(e=new ve(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=Sw.subVectors(r,t).cross(TF.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(Sw),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:t.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||CF.getNormalMatrix(e),i=this.coplanarPoint(Sw).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const sf=new _l,av=new ve;class F2{constructor(e=new Fu,t=new Fu,r=new Fu,i=new Fu,s=new Fu,o=new Fu){this.planes=[e,t,r,i,s,o]}set(e,t,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=jl){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],u=i[4],c=i[5],h=i[6],d=i[7],m=i[8],v=i[9],w=i[10],x=i[11],g=i[12],S=i[13],_=i[14],T=i[15];if(r[0].setComponents(l-s,d-u,x-m,T-g).normalize(),r[1].setComponents(l+s,d+u,x+m,T+g).normalize(),r[2].setComponents(l+o,d+c,x+v,T+S).normalize(),r[3].setComponents(l-o,d-c,x-v,T-S).normalize(),r[4].setComponents(l-a,d-h,x-w,T-_).normalize(),t===jl)r[5].setComponents(l+a,d+h,x+w,T+_).normalize();else if(t===pg)r[5].setComponents(a,h,w,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),sf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),sf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(sf)}intersectsSprite(e){return sf.center.set(0,0,0),sf.radius=.7071067811865476,sf.applyMatrix4(e.matrixWorld),this.intersectsSphere(sf)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(av.x=i.normal.x>0?e.max.x:e.min.x,av.y=i.normal.y>0?e.max.y:e.min.y,av.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(av)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function YP(){let n=null,e=!1,t=null,r=null;function i(s,o){t(s,o),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function LF(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,c){const h=u.array,d=u.usage,m=n.createBuffer();n.bindBuffer(c,m),n.bufferData(c,h,d),u.onUploadCallback();let v;if(h instanceof Float32Array)v=n.FLOAT;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)v=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)v=n.SHORT;else if(h instanceof Uint32Array)v=n.UNSIGNED_INT;else if(h instanceof Int32Array)v=n.INT;else if(h instanceof Int8Array)v=n.BYTE;else if(h instanceof Uint8Array)v=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)v=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:m,type:v,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version}}function s(u,c,h){const d=c.array,m=c.updateRange;n.bindBuffer(h,u),m.count===-1?n.bufferSubData(h,0,d):(t?n.bufferSubData(h,m.offset*d.BYTES_PER_ELEMENT,d,m.offset,m.count):n.bufferSubData(h,m.offset*d.BYTES_PER_ELEMENT,d.subarray(m.offset,m.offset+m.count)),m.count=-1),c.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=r.get(u);c&&(n.deleteBuffer(c.buffer),r.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const d=r.get(u);(!d||d.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=r.get(u);h===void 0?r.set(u,i(u,c)):h.version<u.version&&(s(h.buffer,u,c),h.version=u.version)}return{get:o,remove:a,update:l}}class jg extends kn{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const s=e/2,o=t/2,a=Math.floor(r),l=Math.floor(i),u=a+1,c=l+1,h=e/a,d=t/l,m=[],v=[],w=[],x=[];for(let g=0;g<c;g++){const S=g*d-o;for(let _=0;_<u;_++){const T=_*h-s;v.push(T,-S,0),w.push(0,0,1),x.push(_/a),x.push(1-g/l)}}for(let g=0;g<l;g++)for(let S=0;S<a;S++){const _=S+u*g,T=S+u*(g+1),L=S+1+u*(g+1),P=S+1+u*g;m.push(_,T,P),m.push(T,L,P)}this.setIndex(m),this.setAttribute("position",new en(v,3)),this.setAttribute("normal",new en(w,3)),this.setAttribute("uv",new en(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jg(e.width,e.height,e.widthSegments,e.heightSegments)}}var PF=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,RF=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,kF=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,NF=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,IF=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,DF=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,OF=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,FF=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,UF=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,BF=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,zF=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,HF=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,GF=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,VF=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,WF=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,jF=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,qF=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,XF=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,YF=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,$F=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,ZF=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,KF=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,JF=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,QF=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,e8=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,t8=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,n8=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,r8=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,i8="gl_FragColor = linearToOutputTexel( gl_FragColor );",s8=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,o8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,a8=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,l8=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,u8=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,c8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,h8=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,f8=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,d8=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,p8=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,m8=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,g8=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,v8=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,y8=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,x8=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,w8=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,S8=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,_8=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,b8=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,M8=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,E8=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,A8=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,T8=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,C8=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,L8=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,P8=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,R8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,k8=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,N8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,I8=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,D8=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,O8=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,F8=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,U8=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,B8=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,z8=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,H8=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,G8=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,V8=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,W8=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,j8=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,q8=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,X8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Y8=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$8=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Z8=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,K8=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,J8=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Q8=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,eU=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,tU=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,nU=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,rU=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,iU=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,sU=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,oU=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,aU=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,lU=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,uU=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,cU=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,hU=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,fU=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,dU=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,pU=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,mU=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,gU=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,vU=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,yU=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,xU=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,wU=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,SU=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,_U=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,bU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,MU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,EU=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,AU=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const TU=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,CU=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,LU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,PU=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,RU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,kU=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,NU=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,IU=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,DU=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,OU=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,FU=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,UU=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,BU=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,zU=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,HU=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,GU=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,VU=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,WU=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jU=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,qU=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XU=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,YU=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,$U=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ZU=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,KU=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,JU=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QU=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eB=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tB=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,nB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,rB=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,iB=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sB=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,oB=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Gn={alphahash_fragment:PF,alphahash_pars_fragment:RF,alphamap_fragment:kF,alphamap_pars_fragment:NF,alphatest_fragment:IF,alphatest_pars_fragment:DF,aomap_fragment:OF,aomap_pars_fragment:FF,begin_vertex:UF,beginnormal_vertex:BF,bsdfs:zF,iridescence_fragment:HF,bumpmap_pars_fragment:GF,clipping_planes_fragment:VF,clipping_planes_pars_fragment:WF,clipping_planes_pars_vertex:jF,clipping_planes_vertex:qF,color_fragment:XF,color_pars_fragment:YF,color_pars_vertex:$F,color_vertex:ZF,common:KF,cube_uv_reflection_fragment:JF,defaultnormal_vertex:QF,displacementmap_pars_vertex:e8,displacementmap_vertex:t8,emissivemap_fragment:n8,emissivemap_pars_fragment:r8,colorspace_fragment:i8,colorspace_pars_fragment:s8,envmap_fragment:o8,envmap_common_pars_fragment:a8,envmap_pars_fragment:l8,envmap_pars_vertex:u8,envmap_physical_pars_fragment:S8,envmap_vertex:c8,fog_vertex:h8,fog_pars_vertex:f8,fog_fragment:d8,fog_pars_fragment:p8,gradientmap_pars_fragment:m8,lightmap_fragment:g8,lightmap_pars_fragment:v8,lights_lambert_fragment:y8,lights_lambert_pars_fragment:x8,lights_pars_begin:w8,lights_toon_fragment:_8,lights_toon_pars_fragment:b8,lights_phong_fragment:M8,lights_phong_pars_fragment:E8,lights_physical_fragment:A8,lights_physical_pars_fragment:T8,lights_fragment_begin:C8,lights_fragment_maps:L8,lights_fragment_end:P8,logdepthbuf_fragment:R8,logdepthbuf_pars_fragment:k8,logdepthbuf_pars_vertex:N8,logdepthbuf_vertex:I8,map_fragment:D8,map_pars_fragment:O8,map_particle_fragment:F8,map_particle_pars_fragment:U8,metalnessmap_fragment:B8,metalnessmap_pars_fragment:z8,morphcolor_vertex:H8,morphnormal_vertex:G8,morphtarget_pars_vertex:V8,morphtarget_vertex:W8,normal_fragment_begin:j8,normal_fragment_maps:q8,normal_pars_fragment:X8,normal_pars_vertex:Y8,normal_vertex:$8,normalmap_pars_fragment:Z8,clearcoat_normal_fragment_begin:K8,clearcoat_normal_fragment_maps:J8,clearcoat_pars_fragment:Q8,iridescence_pars_fragment:eU,opaque_fragment:tU,packing:nU,premultiplied_alpha_fragment:rU,project_vertex:iU,dithering_fragment:sU,dithering_pars_fragment:oU,roughnessmap_fragment:aU,roughnessmap_pars_fragment:lU,shadowmap_pars_fragment:uU,shadowmap_pars_vertex:cU,shadowmap_vertex:hU,shadowmask_pars_fragment:fU,skinbase_vertex:dU,skinning_pars_vertex:pU,skinning_vertex:mU,skinnormal_vertex:gU,specularmap_fragment:vU,specularmap_pars_fragment:yU,tonemapping_fragment:xU,tonemapping_pars_fragment:wU,transmission_fragment:SU,transmission_pars_fragment:_U,uv_pars_fragment:bU,uv_pars_vertex:MU,uv_vertex:EU,worldpos_vertex:AU,background_vert:TU,background_frag:CU,backgroundCube_vert:LU,backgroundCube_frag:PU,cube_vert:RU,cube_frag:kU,depth_vert:NU,depth_frag:IU,distanceRGBA_vert:DU,distanceRGBA_frag:OU,equirect_vert:FU,equirect_frag:UU,linedashed_vert:BU,linedashed_frag:zU,meshbasic_vert:HU,meshbasic_frag:GU,meshlambert_vert:VU,meshlambert_frag:WU,meshmatcap_vert:jU,meshmatcap_frag:qU,meshnormal_vert:XU,meshnormal_frag:YU,meshphong_vert:$U,meshphong_frag:ZU,meshphysical_vert:KU,meshphysical_frag:JU,meshtoon_vert:QU,meshtoon_frag:eB,points_vert:tB,points_frag:nB,shadow_vert:rB,shadow_frag:iB,sprite_vert:sB,sprite_frag:oB},Gt={common:{diffuse:{value:new $t(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new jn},alphaMap:{value:null},alphaMapTransform:{value:new jn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new jn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new jn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new jn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new jn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new jn},normalScale:{value:new xt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new jn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new jn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new jn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new jn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new $t(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new $t(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new jn},alphaTest:{value:0},uvTransform:{value:new jn}},sprite:{diffuse:{value:new $t(16777215)},opacity:{value:1},center:{value:new xt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new jn},alphaMap:{value:null},alphaMapTransform:{value:new jn},alphaTest:{value:0}}},cl={basic:{uniforms:ao([Gt.common,Gt.specularmap,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.fog]),vertexShader:Gn.meshbasic_vert,fragmentShader:Gn.meshbasic_frag},lambert:{uniforms:ao([Gt.common,Gt.specularmap,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.fog,Gt.lights,{emissive:{value:new $t(0)}}]),vertexShader:Gn.meshlambert_vert,fragmentShader:Gn.meshlambert_frag},phong:{uniforms:ao([Gt.common,Gt.specularmap,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.fog,Gt.lights,{emissive:{value:new $t(0)},specular:{value:new $t(1118481)},shininess:{value:30}}]),vertexShader:Gn.meshphong_vert,fragmentShader:Gn.meshphong_frag},standard:{uniforms:ao([Gt.common,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.roughnessmap,Gt.metalnessmap,Gt.fog,Gt.lights,{emissive:{value:new $t(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Gn.meshphysical_vert,fragmentShader:Gn.meshphysical_frag},toon:{uniforms:ao([Gt.common,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.gradientmap,Gt.fog,Gt.lights,{emissive:{value:new $t(0)}}]),vertexShader:Gn.meshtoon_vert,fragmentShader:Gn.meshtoon_frag},matcap:{uniforms:ao([Gt.common,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.fog,{matcap:{value:null}}]),vertexShader:Gn.meshmatcap_vert,fragmentShader:Gn.meshmatcap_frag},points:{uniforms:ao([Gt.points,Gt.fog]),vertexShader:Gn.points_vert,fragmentShader:Gn.points_frag},dashed:{uniforms:ao([Gt.common,Gt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Gn.linedashed_vert,fragmentShader:Gn.linedashed_frag},depth:{uniforms:ao([Gt.common,Gt.displacementmap]),vertexShader:Gn.depth_vert,fragmentShader:Gn.depth_frag},normal:{uniforms:ao([Gt.common,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,{opacity:{value:1}}]),vertexShader:Gn.meshnormal_vert,fragmentShader:Gn.meshnormal_frag},sprite:{uniforms:ao([Gt.sprite,Gt.fog]),vertexShader:Gn.sprite_vert,fragmentShader:Gn.sprite_frag},background:{uniforms:{uvTransform:{value:new jn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Gn.background_vert,fragmentShader:Gn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Gn.backgroundCube_vert,fragmentShader:Gn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Gn.cube_vert,fragmentShader:Gn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Gn.equirect_vert,fragmentShader:Gn.equirect_frag},distanceRGBA:{uniforms:ao([Gt.common,Gt.displacementmap,{referencePosition:{value:new ve},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Gn.distanceRGBA_vert,fragmentShader:Gn.distanceRGBA_frag},shadow:{uniforms:ao([Gt.lights,Gt.fog,{color:{value:new $t(0)},opacity:{value:1}}]),vertexShader:Gn.shadow_vert,fragmentShader:Gn.shadow_frag}};cl.physical={uniforms:ao([cl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new jn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new jn},clearcoatNormalScale:{value:new xt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new jn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new jn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new jn},sheen:{value:0},sheenColor:{value:new $t(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new jn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new jn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new jn},transmissionSamplerSize:{value:new xt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new jn},attenuationDistance:{value:0},attenuationColor:{value:new $t(0)},specularColor:{value:new $t(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new jn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new jn},anisotropyVector:{value:new xt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new jn}}]),vertexShader:Gn.meshphysical_vert,fragmentShader:Gn.meshphysical_frag};const lv={r:0,b:0,g:0};function aB(n,e,t,r,i,s,o){const a=new $t(0);let l=s===!0?0:1,u,c,h=null,d=0,m=null;function v(x,g){let S=!1,_=g.isScene===!0?g.background:null;switch(_&&_.isTexture&&(_=(g.backgroundBlurriness>0?t:e).get(_)),_===null?w(a,l):_&&_.isColor&&(w(_,1),S=!0),n.xr.getEnvironmentBlendMode()){case"opaque":S=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,o),S=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,o),S=!0;break}(n.autoClear||S)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),_&&(_.isCubeTexture||_.mapping===dm)?(c===void 0&&(c=new ws(new td(1,1,1),new yl({name:"BackgroundCubeMaterial",uniforms:tm(cl.backgroundCube.uniforms),vertexShader:cl.backgroundCube.vertexShader,fragmentShader:cl.backgroundCube.fragmentShader,side:fo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(P,N,k){this.matrixWorld.copyPosition(k.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=_,c.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=_.colorSpace!==Un,(h!==_||d!==_.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,h=_,d=_.version,m=n.toneMapping),c.layers.enableAll(),x.unshift(c,c.geometry,c.material,0,0,null)):_&&_.isTexture&&(u===void 0&&(u=new ws(new jg(2,2),new yl({name:"BackgroundMaterial",uniforms:tm(cl.background.uniforms),vertexShader:cl.background.vertexShader,fragmentShader:cl.background.fragmentShader,side:Qu,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=_,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=_.colorSpace!==Un,_.matrixAutoUpdate===!0&&_.updateMatrix(),u.material.uniforms.uvTransform.value.copy(_.matrix),(h!==_||d!==_.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,h=_,d=_.version,m=n.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null))}function w(x,g){x.getRGB(lv,jP(n)),r.buffers.color.setClear(lv.r,lv.g,lv.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(x,g=1){a.set(x),l=g,w(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,w(a,l)},render:v}}function lB(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=x(null);let u=l,c=!1;function h(G,J,ie,ce,W){let Y=!1;if(o){const $=w(ce,ie,J);u!==$&&(u=$,m(u.object)),Y=g(G,ce,ie,W),Y&&S(G,ce,ie,W)}else{const $=J.wireframe===!0;(u.geometry!==ce.id||u.program!==ie.id||u.wireframe!==$)&&(u.geometry=ce.id,u.program=ie.id,u.wireframe=$,Y=!0)}W!==null&&t.update(W,n.ELEMENT_ARRAY_BUFFER),(Y||c)&&(c=!1,k(G,J,ie,ce),W!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(W).buffer))}function d(){return r.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function m(G){return r.isWebGL2?n.bindVertexArray(G):s.bindVertexArrayOES(G)}function v(G){return r.isWebGL2?n.deleteVertexArray(G):s.deleteVertexArrayOES(G)}function w(G,J,ie){const ce=ie.wireframe===!0;let W=a[G.id];W===void 0&&(W={},a[G.id]=W);let Y=W[J.id];Y===void 0&&(Y={},W[J.id]=Y);let $=Y[ce];return $===void 0&&($=x(d()),Y[ce]=$),$}function x(G){const J=[],ie=[],ce=[];for(let W=0;W<i;W++)J[W]=0,ie[W]=0,ce[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:J,enabledAttributes:ie,attributeDivisors:ce,object:G,attributes:{},index:null}}function g(G,J,ie,ce){const W=u.attributes,Y=J.attributes;let $=0;const oe=ie.getAttributes();for(const D in oe)if(oe[D].location>=0){const K=W[D];let ae=Y[D];if(ae===void 0&&(D==="instanceMatrix"&&G.instanceMatrix&&(ae=G.instanceMatrix),D==="instanceColor"&&G.instanceColor&&(ae=G.instanceColor)),K===void 0||K.attribute!==ae||ae&&K.data!==ae.data)return!0;$++}return u.attributesNum!==$||u.index!==ce}function S(G,J,ie,ce){const W={},Y=J.attributes;let $=0;const oe=ie.getAttributes();for(const D in oe)if(oe[D].location>=0){let K=Y[D];K===void 0&&(D==="instanceMatrix"&&G.instanceMatrix&&(K=G.instanceMatrix),D==="instanceColor"&&G.instanceColor&&(K=G.instanceColor));const ae={};ae.attribute=K,K&&K.data&&(ae.data=K.data),W[D]=ae,$++}u.attributes=W,u.attributesNum=$,u.index=ce}function _(){const G=u.newAttributes;for(let J=0,ie=G.length;J<ie;J++)G[J]=0}function T(G){L(G,0)}function L(G,J){const ie=u.newAttributes,ce=u.enabledAttributes,W=u.attributeDivisors;ie[G]=1,ce[G]===0&&(n.enableVertexAttribArray(G),ce[G]=1),W[G]!==J&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](G,J),W[G]=J)}function P(){const G=u.newAttributes,J=u.enabledAttributes;for(let ie=0,ce=J.length;ie<ce;ie++)J[ie]!==G[ie]&&(n.disableVertexAttribArray(ie),J[ie]=0)}function N(G,J,ie,ce,W,Y,$){$===!0?n.vertexAttribIPointer(G,J,ie,W,Y):n.vertexAttribPointer(G,J,ie,ce,W,Y)}function k(G,J,ie,ce){if(r.isWebGL2===!1&&(G.isInstancedMesh||ce.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const W=ce.attributes,Y=ie.getAttributes(),$=J.defaultAttributeValues;for(const oe in Y){const D=Y[oe];if(D.location>=0){let j=W[oe];if(j===void 0&&(oe==="instanceMatrix"&&G.instanceMatrix&&(j=G.instanceMatrix),oe==="instanceColor"&&G.instanceColor&&(j=G.instanceColor)),j!==void 0){const K=j.normalized,ae=j.itemSize,fe=t.get(j);if(fe===void 0)continue;const we=fe.buffer,Ee=fe.type,Ce=fe.bytesPerElement,Ye=r.isWebGL2===!0&&(Ee===n.INT||Ee===n.UNSIGNED_INT||j.gpuType===Rb);if(j.isInterleavedBufferAttribute){const Ne=j.data,he=Ne.stride,Oe=j.offset;if(Ne.isInstancedInterleavedBuffer){for(let Ae=0;Ae<D.locationSize;Ae++)L(D.location+Ae,Ne.meshPerAttribute);G.isInstancedMesh!==!0&&ce._maxInstanceCount===void 0&&(ce._maxInstanceCount=Ne.meshPerAttribute*Ne.count)}else for(let Ae=0;Ae<D.locationSize;Ae++)T(D.location+Ae);n.bindBuffer(n.ARRAY_BUFFER,we);for(let Ae=0;Ae<D.locationSize;Ae++)N(D.location+Ae,ae/D.locationSize,Ee,K,he*Ce,(Oe+ae/D.locationSize*Ae)*Ce,Ye)}else{if(j.isInstancedBufferAttribute){for(let Ne=0;Ne<D.locationSize;Ne++)L(D.location+Ne,j.meshPerAttribute);G.isInstancedMesh!==!0&&ce._maxInstanceCount===void 0&&(ce._maxInstanceCount=j.meshPerAttribute*j.count)}else for(let Ne=0;Ne<D.locationSize;Ne++)T(D.location+Ne);n.bindBuffer(n.ARRAY_BUFFER,we);for(let Ne=0;Ne<D.locationSize;Ne++)N(D.location+Ne,ae/D.locationSize,Ee,K,ae*Ce,ae/D.locationSize*Ne*Ce,Ye)}}else if($!==void 0){const K=$[oe];if(K!==void 0)switch(K.length){case 2:n.vertexAttrib2fv(D.location,K);break;case 3:n.vertexAttrib3fv(D.location,K);break;case 4:n.vertexAttrib4fv(D.location,K);break;default:n.vertexAttrib1fv(D.location,K)}}}}P()}function R(){z();for(const G in a){const J=a[G];for(const ie in J){const ce=J[ie];for(const W in ce)v(ce[W].object),delete ce[W];delete J[ie]}delete a[G]}}function U(G){if(a[G.id]===void 0)return;const J=a[G.id];for(const ie in J){const ce=J[ie];for(const W in ce)v(ce[W].object),delete ce[W];delete J[ie]}delete a[G.id]}function F(G){for(const J in a){const ie=a[J];if(ie[G.id]===void 0)continue;const ce=ie[G.id];for(const W in ce)v(ce[W].object),delete ce[W];delete ie[G.id]}}function z(){V(),c=!0,u!==l&&(u=l,m(u.object))}function V(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:z,resetDefaultState:V,dispose:R,releaseStatesOfGeometry:U,releaseStatesOfProgram:F,initAttributes:_,enableAttribute:T,disableUnusedAttributes:P}}function uB(n,e,t,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,c){n.drawArrays(s,u,c),t.update(c,s,1)}function l(u,c,h){if(h===0)return;let d,m;if(i)d=n,m="drawArraysInstanced";else if(d=e.get("ANGLE_instanced_arrays"),m="drawArraysInstancedANGLE",d===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}d[m](s,u,c,h),t.update(c,s,h)}this.setMode=o,this.render=a,this.renderInstances=l}function cB(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const N=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(N){if(N==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";N="mediump"}return N==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),d=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),w=n.getParameter(n.MAX_VERTEX_ATTRIBS),x=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),_=d>0,T=o||e.has("OES_texture_float"),L=_&&T,P=o?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:d,maxTextureSize:m,maxCubemapSize:v,maxAttributes:w,maxVertexUniforms:x,maxVaryings:g,maxFragmentUniforms:S,vertexTextures:_,floatFragmentTextures:T,floatVertexTextures:L,maxSamples:P}}function hB(n){const e=this;let t=null,r=0,i=!1,s=!1;const o=new Fu,a=new jn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,d){const m=h.length!==0||d||r!==0||i;return i=d,r=h.length,m},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,d){t=c(h,d,0)},this.setState=function(h,d,m){const v=h.clippingPlanes,w=h.clipIntersection,x=h.clipShadows,g=n.get(h);if(!i||v===null||v.length===0||s&&!x)s?c(null):u();else{const S=s?0:r,_=S*4;let T=g.clippingState||null;l.value=T,T=c(v,d,_,m);for(let L=0;L!==_;++L)T[L]=t[L];g.clippingState=T,this.numIntersection=w?this.numPlanes:0,this.numPlanes+=S}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(h,d,m,v){const w=h!==null?h.length:0;let x=null;if(w!==0){if(x=l.value,v!==!0||x===null){const g=m+w*4,S=d.matrixWorldInverse;a.getNormalMatrix(S),(x===null||x.length<g)&&(x=new Float32Array(g));for(let _=0,T=m;_!==w;++_,T+=4)o.copy(h[_]).applyMatrix4(S,a),o.normal.toArray(x,T),x[T+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=w,e.numIntersection=0,x}}function fB(n){let e=new WeakMap;function t(o,a){return a===Qp?o.mapping=nu:a===ag&&(o.mapping=Sh),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===Qp||a===ag)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new qb(l.height/2);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",i),t(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class Jl extends Vg{constructor(e=-1,t=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Tp=4,EE=[.125,.215,.35,.446,.526,.582],xf=20,_w=new Jl,AE=new $t;let bw=null;const mf=(1+Math.sqrt(5))/2,Yd=1/mf,TE=[new ve(1,1,1),new ve(-1,1,1),new ve(1,1,-1),new ve(-1,1,-1),new ve(0,mf,Yd),new ve(0,mf,-Yd),new ve(Yd,0,mf),new ve(-Yd,0,mf),new ve(mf,Yd,0),new ve(-mf,Yd,0)];class K_{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){bw=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=PE(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=LE(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(bw),e.scissorTest=!1,uv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===nu||e.mapping===Sh?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),bw=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:qr,minFilter:qr,generateMipmaps:!1,type:co,format:uo,colorSpace:gl,depthBuffer:!1},i=CE(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=CE(e,t,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=dB(s)),this._blurMaterial=pB(s,e,t)}return i}_compileMaterial(e){const t=new ws(this._lodPlanes[0],e);this._renderer.compile(t,_w)}_sceneToCubeUV(e,t,r,i){const a=new Ni(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,h=c.autoClear,d=c.toneMapping;c.getClearColor(AE),c.toneMapping=Zl,c.autoClear=!1;const m=new kh({name:"PMREM.Background",side:fo,depthWrite:!1,depthTest:!1}),v=new ws(new td,m);let w=!1;const x=e.background;x?x.isColor&&(m.color.copy(x),e.background=null,w=!0):(m.color.copy(AE),w=!0);for(let g=0;g<6;g++){const S=g%3;S===0?(a.up.set(0,l[g],0),a.lookAt(u[g],0,0)):S===1?(a.up.set(0,0,l[g]),a.lookAt(0,u[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,u[g]));const _=this._cubeSize;uv(i,S*_,g>2?_:0,_,_),c.setRenderTarget(i),w&&c.render(v,a),c.render(e,a)}v.geometry.dispose(),v.material.dispose(),c.toneMapping=d,c.autoClear=h,e.background=x}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===nu||e.mapping===Sh;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=PE()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=LE());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new ws(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;uv(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(o,_w)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=TE[(i-1)%TE.length];this._blur(e,i-1,i,s,o)}t.autoClear=r}_blur(e,t,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,t,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,h=new ws(this._lodPlanes[i],u),d=u.uniforms,m=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*xf-1),w=s/v,x=isFinite(s)?1+Math.floor(c*w):xf;x>xf&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${xf}`);const g=[];let S=0;for(let N=0;N<xf;++N){const k=N/w,R=Math.exp(-k*k/2);g.push(R),N===0?S+=R:N<x&&(S+=2*R)}for(let N=0;N<g.length;N++)g[N]=g[N]/S;d.envMap.value=e.texture,d.samples.value=x,d.weights.value=g,d.latitudinal.value=o==="latitudinal",a&&(d.poleAxis.value=a);const{_lodMax:_}=this;d.dTheta.value=v,d.mipInt.value=_-r;const T=this._sizeLods[i],L=3*T*(i>_-Tp?i-_+Tp:0),P=4*(this._cubeSize-T);uv(t,L,P,3*T,2*T),l.setRenderTarget(t),l.render(h,_w)}}function dB(n){const e=[],t=[],r=[];let i=n;const s=n-Tp+1+EE.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);t.push(a);let l=1/a;o>n-Tp?l=EE[o-n+Tp-1]:o===0&&(l=0),r.push(l);const u=1/(a-2),c=-u,h=1+u,d=[c,c,h,c,h,h,c,c,h,h,c,h],m=6,v=6,w=3,x=2,g=1,S=new Float32Array(w*v*m),_=new Float32Array(x*v*m),T=new Float32Array(g*v*m);for(let P=0;P<m;P++){const N=P%3*2/3-1,k=P>2?0:-1,R=[N,k,0,N+2/3,k,0,N+2/3,k+1,0,N,k,0,N+2/3,k+1,0,N,k+1,0];S.set(R,w*v*P),_.set(d,x*v*P);const U=[P,P,P,P,P,P];T.set(U,g*v*P)}const L=new kn;L.setAttribute("position",new Nr(S,w)),L.setAttribute("uv",new Nr(_,x)),L.setAttribute("faceIndex",new Nr(T,g)),e.push(L),i>Tp&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function CE(n,e,t){const r=new vl(n,e,t);return r.texture.mapping=dm,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function uv(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function pB(n,e,t){const r=new Float32Array(xf),i=new ve(0,1,0);return new yl({name:"SphericalGaussianBlur",defines:{n:xf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Xb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Xu,depthTest:!1,depthWrite:!1})}function LE(){return new yl({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Xb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Xu,depthTest:!1,depthWrite:!1})}function PE(){return new yl({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Xb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Xu,depthTest:!1,depthWrite:!1})}function Xb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function mB(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===Qp||l===ag,c=l===nu||l===Sh;if(u||c)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return t===null&&(t=new K_(n)),h=u?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(u&&h&&h.height>0||c&&h&&i(h)){t===null&&(t=new K_(n));const d=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,d),a.addEventListener("dispose",s),d.texture}else return null}}}return a}function i(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:o}}function gB(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function vB(n,e,t,r){const i={},s=new WeakMap;function o(h){const d=h.target;d.index!==null&&e.remove(d.index);for(const v in d.attributes)e.remove(d.attributes[v]);for(const v in d.morphAttributes){const w=d.morphAttributes[v];for(let x=0,g=w.length;x<g;x++)e.remove(w[x])}d.removeEventListener("dispose",o),delete i[d.id];const m=s.get(d);m&&(e.remove(m),s.delete(d)),r.releaseStatesOfGeometry(d),d.isInstancedBufferGeometry===!0&&delete d._maxInstanceCount,t.memory.geometries--}function a(h,d){return i[d.id]===!0||(d.addEventListener("dispose",o),i[d.id]=!0,t.memory.geometries++),d}function l(h){const d=h.attributes;for(const v in d)e.update(d[v],n.ARRAY_BUFFER);const m=h.morphAttributes;for(const v in m){const w=m[v];for(let x=0,g=w.length;x<g;x++)e.update(w[x],n.ARRAY_BUFFER)}}function u(h){const d=[],m=h.index,v=h.attributes.position;let w=0;if(m!==null){const S=m.array;w=m.version;for(let _=0,T=S.length;_<T;_+=3){const L=S[_+0],P=S[_+1],N=S[_+2];d.push(L,P,P,N,N,L)}}else if(v!==void 0){const S=v.array;w=v.version;for(let _=0,T=S.length/3-1;_<T;_+=3){const L=_+0,P=_+1,N=_+2;d.push(L,P,P,N,N,L)}}else return;const x=new(GP(d)?jb:Wb)(d,1);x.version=w;const g=s.get(h);g&&e.remove(g),s.set(h,x)}function c(h){const d=s.get(h);if(d){const m=h.index;m!==null&&d.version<m.version&&u(h)}else u(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:c}}function yB(n,e,t,r){const i=r.isWebGL2;let s;function o(d){s=d}let a,l;function u(d){a=d.type,l=d.bytesPerElement}function c(d,m){n.drawElements(s,m,a,d*l),t.update(m,s,1)}function h(d,m,v){if(v===0)return;let w,x;if(i)w=n,x="drawElementsInstanced";else if(w=e.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",w===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}w[x](s,m,a,d*l,v),t.update(m,s,v)}this.setMode=o,this.setIndex=u,this.render=c,this.renderInstances=h}function xB(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function wB(n,e){return n[0]-e[0]}function SB(n,e){return Math.abs(e[1])-Math.abs(n[1])}function _B(n,e,t){const r={},i=new Float32Array(8),s=new WeakMap,o=new Ar,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,c,h){const d=u.morphTargetInfluences;if(e.isWebGL2===!0){const m=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,v=m!==void 0?m.length:0;let w=s.get(c);if(w===void 0||w.count!==v){let G=function(){z.dispose(),s.delete(c),c.removeEventListener("dispose",G)};w!==void 0&&w.texture.dispose();const S=c.morphAttributes.position!==void 0,_=c.morphAttributes.normal!==void 0,T=c.morphAttributes.color!==void 0,L=c.morphAttributes.position||[],P=c.morphAttributes.normal||[],N=c.morphAttributes.color||[];let k=0;S===!0&&(k=1),_===!0&&(k=2),T===!0&&(k=3);let R=c.attributes.position.count*k,U=1;R>e.maxTextureSize&&(U=Math.ceil(R/e.maxTextureSize),R=e.maxTextureSize);const F=new Float32Array(R*U*4*v),z=new O2(F,R,U,v);z.type=Js,z.needsUpdate=!0;const V=k*4;for(let J=0;J<v;J++){const ie=L[J],ce=P[J],W=N[J],Y=R*U*4*J;for(let $=0;$<ie.count;$++){const oe=$*V;S===!0&&(o.fromBufferAttribute(ie,$),F[Y+oe+0]=o.x,F[Y+oe+1]=o.y,F[Y+oe+2]=o.z,F[Y+oe+3]=0),_===!0&&(o.fromBufferAttribute(ce,$),F[Y+oe+4]=o.x,F[Y+oe+5]=o.y,F[Y+oe+6]=o.z,F[Y+oe+7]=0),T===!0&&(o.fromBufferAttribute(W,$),F[Y+oe+8]=o.x,F[Y+oe+9]=o.y,F[Y+oe+10]=o.z,F[Y+oe+11]=W.itemSize===4?o.w:1)}}w={count:v,texture:z,size:new xt(R,U)},s.set(c,w),c.addEventListener("dispose",G)}let x=0;for(let S=0;S<d.length;S++)x+=d[S];const g=c.morphTargetsRelative?1:1-x;h.getUniforms().setValue(n,"morphTargetBaseInfluence",g),h.getUniforms().setValue(n,"morphTargetInfluences",d),h.getUniforms().setValue(n,"morphTargetsTexture",w.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",w.size)}else{const m=d===void 0?0:d.length;let v=r[c.id];if(v===void 0||v.length!==m){v=[];for(let _=0;_<m;_++)v[_]=[_,0];r[c.id]=v}for(let _=0;_<m;_++){const T=v[_];T[0]=_,T[1]=d[_]}v.sort(SB);for(let _=0;_<8;_++)_<m&&v[_][1]?(a[_][0]=v[_][0],a[_][1]=v[_][1]):(a[_][0]=Number.MAX_SAFE_INTEGER,a[_][1]=0);a.sort(wB);const w=c.morphAttributes.position,x=c.morphAttributes.normal;let g=0;for(let _=0;_<8;_++){const T=a[_],L=T[0],P=T[1];L!==Number.MAX_SAFE_INTEGER&&P?(w&&c.getAttribute("morphTarget"+_)!==w[L]&&c.setAttribute("morphTarget"+_,w[L]),x&&c.getAttribute("morphNormal"+_)!==x[L]&&c.setAttribute("morphNormal"+_,x[L]),i[_]=P,g+=P):(w&&c.hasAttribute("morphTarget"+_)===!0&&c.deleteAttribute("morphTarget"+_),x&&c.hasAttribute("morphNormal"+_)===!0&&c.deleteAttribute("morphNormal"+_),i[_]=0)}const S=c.morphTargetsRelative?1:1-g;h.getUniforms().setValue(n,"morphTargetBaseInfluence",S),h.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function bB(n,e,t,r){let i=new WeakMap;function s(l){const u=r.render.frame,c=l.geometry,h=e.get(l,c);if(i.get(h)!==u&&(e.update(h),i.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const d=l.skeleton;i.get(d)!==u&&(d.update(),i.set(d,u))}return h}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const $P=new Mi,ZP=new O2,KP=new Vb,JP=new Wg,RE=[],kE=[],NE=new Float32Array(16),IE=new Float32Array(9),DE=new Float32Array(4);function pm(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let s=RE[i];if(s===void 0&&(s=new Float32Array(i),RE[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function ts(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function ns(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function U2(n,e){let t=kE[e];t===void 0&&(t=new Int32Array(e),kE[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function MB(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function EB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ts(t,e))return;n.uniform2fv(this.addr,e),ns(t,e)}}function AB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(ts(t,e))return;n.uniform3fv(this.addr,e),ns(t,e)}}function TB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ts(t,e))return;n.uniform4fv(this.addr,e),ns(t,e)}}function CB(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ts(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),ns(t,e)}else{if(ts(t,r))return;DE.set(r),n.uniformMatrix2fv(this.addr,!1,DE),ns(t,r)}}function LB(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ts(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),ns(t,e)}else{if(ts(t,r))return;IE.set(r),n.uniformMatrix3fv(this.addr,!1,IE),ns(t,r)}}function PB(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(ts(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),ns(t,e)}else{if(ts(t,r))return;NE.set(r),n.uniformMatrix4fv(this.addr,!1,NE),ns(t,r)}}function RB(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function kB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ts(t,e))return;n.uniform2iv(this.addr,e),ns(t,e)}}function NB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ts(t,e))return;n.uniform3iv(this.addr,e),ns(t,e)}}function IB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ts(t,e))return;n.uniform4iv(this.addr,e),ns(t,e)}}function DB(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function OB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(ts(t,e))return;n.uniform2uiv(this.addr,e),ns(t,e)}}function FB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(ts(t,e))return;n.uniform3uiv(this.addr,e),ns(t,e)}}function UB(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(ts(t,e))return;n.uniform4uiv(this.addr,e),ns(t,e)}}function BB(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||$P,i)}function zB(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||KP,i)}function HB(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||JP,i)}function GB(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||ZP,i)}function VB(n){switch(n){case 5126:return MB;case 35664:return EB;case 35665:return AB;case 35666:return TB;case 35674:return CB;case 35675:return LB;case 35676:return PB;case 5124:case 35670:return RB;case 35667:case 35671:return kB;case 35668:case 35672:return NB;case 35669:case 35673:return IB;case 5125:return DB;case 36294:return OB;case 36295:return FB;case 36296:return UB;case 35678:case 36198:case 36298:case 36306:case 35682:return BB;case 35679:case 36299:case 36307:return zB;case 35680:case 36300:case 36308:case 36293:return HB;case 36289:case 36303:case 36311:case 36292:return GB}}function WB(n,e){n.uniform1fv(this.addr,e)}function jB(n,e){const t=pm(e,this.size,2);n.uniform2fv(this.addr,t)}function qB(n,e){const t=pm(e,this.size,3);n.uniform3fv(this.addr,t)}function XB(n,e){const t=pm(e,this.size,4);n.uniform4fv(this.addr,t)}function YB(n,e){const t=pm(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function $B(n,e){const t=pm(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function ZB(n,e){const t=pm(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function KB(n,e){n.uniform1iv(this.addr,e)}function JB(n,e){n.uniform2iv(this.addr,e)}function QB(n,e){n.uniform3iv(this.addr,e)}function e7(n,e){n.uniform4iv(this.addr,e)}function t7(n,e){n.uniform1uiv(this.addr,e)}function n7(n,e){n.uniform2uiv(this.addr,e)}function r7(n,e){n.uniform3uiv(this.addr,e)}function i7(n,e){n.uniform4uiv(this.addr,e)}function s7(n,e,t){const r=this.cache,i=e.length,s=U2(t,i);ts(r,s)||(n.uniform1iv(this.addr,s),ns(r,s));for(let o=0;o!==i;++o)t.setTexture2D(e[o]||$P,s[o])}function o7(n,e,t){const r=this.cache,i=e.length,s=U2(t,i);ts(r,s)||(n.uniform1iv(this.addr,s),ns(r,s));for(let o=0;o!==i;++o)t.setTexture3D(e[o]||KP,s[o])}function a7(n,e,t){const r=this.cache,i=e.length,s=U2(t,i);ts(r,s)||(n.uniform1iv(this.addr,s),ns(r,s));for(let o=0;o!==i;++o)t.setTextureCube(e[o]||JP,s[o])}function l7(n,e,t){const r=this.cache,i=e.length,s=U2(t,i);ts(r,s)||(n.uniform1iv(this.addr,s),ns(r,s));for(let o=0;o!==i;++o)t.setTexture2DArray(e[o]||ZP,s[o])}function u7(n){switch(n){case 5126:return WB;case 35664:return jB;case 35665:return qB;case 35666:return XB;case 35674:return YB;case 35675:return $B;case 35676:return ZB;case 5124:case 35670:return KB;case 35667:case 35671:return JB;case 35668:case 35672:return QB;case 35669:case 35673:return e7;case 5125:return t7;case 36294:return n7;case 36295:return r7;case 36296:return i7;case 35678:case 36198:case 36298:case 36306:case 35682:return s7;case 35679:case 36299:case 36307:return o7;case 35680:case 36300:case 36308:case 36293:return a7;case 36289:case 36303:case 36311:case 36292:return l7}}class c7{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=VB(t.type)}}class h7{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=u7(t.type)}}class f7{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,t[a.id],r)}}}const Mw=/(\w+)(\])?(\[|\.)?/g;function OE(n,e){n.seq.push(e),n.map[e.id]=e}function d7(n,e,t){const r=n.name,i=r.length;for(Mw.lastIndex=0;;){const s=Mw.exec(r),o=Mw.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){OE(t,u===void 0?new c7(a,n,e):new h7(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new f7(a),OE(t,h)),t=h}}}class gy{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(t,i),o=e.getUniformLocation(t,s.name);d7(s,o,this)}}setValue(e,t,r,i){const s=this.map[t];s!==void 0&&s.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in t&&r.push(o)}return r}}function FE(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let p7=0;function m7(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return r.join(`
`)}function g7(n){switch(n){case gl:return["Linear","( value )"];case Un:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function UE(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+i+`

`+m7(n.getShaderSource(e),o)}else return i}function v7(n,e){const t=g7(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function y7(n,e){let t;switch(e){case pP:t="Linear";break;case mP:t="Reinhard";break;case gP:t="OptimizedCineon";break;case Lb:t="ACESFilmic";break;case vP:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function x7(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(x0).join(`
`)}function w7(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function S7(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=n.getActiveAttrib(e,i),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function x0(n){return n!==""}function BE(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function zE(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const _7=/^[ \t]*#include +<([\w\d./]+)>/gm;function J_(n){return n.replace(_7,M7)}const b7=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function M7(n,e){let t=Gn[e];if(t===void 0){const r=b7.get(e);if(r!==void 0)t=Gn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return J_(t)}const E7=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function HE(n){return n.replace(E7,A7)}function A7(n,e,t,r){let i="";for(let s=parseInt(e);s<parseInt(t);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function GE(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function T7(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===k2?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===R0?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===sl&&(e="SHADOWMAP_TYPE_VSM"),e}function C7(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case nu:case Sh:e="ENVMAP_TYPE_CUBE";break;case dm:e="ENVMAP_TYPE_CUBE_UV";break}return e}function L7(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Sh:e="ENVMAP_MODE_REFRACTION";break}return e}function P7(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Hg:e="ENVMAP_BLENDING_MULTIPLY";break;case fP:e="ENVMAP_BLENDING_MIX";break;case dP:e="ENVMAP_BLENDING_ADD";break}return e}function R7(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function k7(n,e,t,r){const i=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=T7(t),u=C7(t),c=L7(t),h=P7(t),d=R7(t),m=t.isWebGL2?"":x7(t),v=w7(s),w=i.createProgram();let x,g,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(x0).join(`
`),x.length>0&&(x+=`
`),g=[m,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(x0).join(`
`),g.length>0&&(g+=`
`)):(x=[GE(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(x0).join(`
`),g=[m,GE(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Zl?"#define TONE_MAPPING":"",t.toneMapping!==Zl?Gn.tonemapping_pars_fragment:"",t.toneMapping!==Zl?y7("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Gn.colorspace_pars_fragment,v7("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(x0).join(`
`)),o=J_(o),o=BE(o,t),o=zE(o,t),a=J_(a),a=BE(a,t),a=zE(a,t),o=HE(o),a=HE(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,x=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,g=["#define varying in",t.glslVersion===$_?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===$_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const _=S+x+o,T=S+g+a,L=FE(i,i.VERTEX_SHADER,_),P=FE(i,i.FRAGMENT_SHADER,T);if(i.attachShader(w,L),i.attachShader(w,P),t.index0AttributeName!==void 0?i.bindAttribLocation(w,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(w,0,"position"),i.linkProgram(w),n.debug.checkShaderErrors){const R=i.getProgramInfoLog(w).trim(),U=i.getShaderInfoLog(L).trim(),F=i.getShaderInfoLog(P).trim();let z=!0,V=!0;if(i.getProgramParameter(w,i.LINK_STATUS)===!1)if(z=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,w,L,P);else{const G=UE(i,L,"vertex"),J=UE(i,P,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(w,i.VALIDATE_STATUS)+`

Program Info Log: `+R+`
`+G+`
`+J)}else R!==""?console.warn("THREE.WebGLProgram: Program Info Log:",R):(U===""||F==="")&&(V=!1);V&&(this.diagnostics={runnable:z,programLog:R,vertexShader:{log:U,prefix:x},fragmentShader:{log:F,prefix:g}})}i.deleteShader(L),i.deleteShader(P);let N;this.getUniforms=function(){return N===void 0&&(N=new gy(i,w)),N};let k;return this.getAttributes=function(){return k===void 0&&(k=S7(i,w)),k},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(w),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=p7++,this.cacheKey=e,this.usedTimes=1,this.program=w,this.vertexShader=L,this.fragmentShader=P,this}let N7=0;class I7{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new D7(e),t.set(e,r)),r}}class D7{constructor(e){this.id=N7++,this.code=e,this.usedTimes=0}}function O7(n,e,t,r,i,s,o){const a=new Of,l=new I7,u=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,d=i.vertexTextures;let m=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function w(R){return R===0?"uv":`uv${R}`}function x(R,U,F,z,V){const G=z.fog,J=V.geometry,ie=R.isMeshStandardMaterial?z.environment:null,ce=(R.isMeshStandardMaterial?t:e).get(R.envMap||ie),W=ce&&ce.mapping===dm?ce.image.height:null,Y=v[R.type];R.precision!==null&&(m=i.getMaxPrecision(R.precision),m!==R.precision&&console.warn("THREE.WebGLProgram.getParameters:",R.precision,"not supported, using",m,"instead."));const $=J.morphAttributes.position||J.morphAttributes.normal||J.morphAttributes.color,oe=$!==void 0?$.length:0;let D=0;J.morphAttributes.position!==void 0&&(D=1),J.morphAttributes.normal!==void 0&&(D=2),J.morphAttributes.color!==void 0&&(D=3);let j,K,ae,fe;if(Y){const fn=cl[Y];j=fn.vertexShader,K=fn.fragmentShader}else j=R.vertexShader,K=R.fragmentShader,l.update(R),ae=l.getVertexShaderID(R),fe=l.getFragmentShaderID(R);const we=n.getRenderTarget(),Ee=V.isInstancedMesh===!0,Ce=!!R.map,Ye=!!R.matcap,Ne=!!ce,he=!!R.aoMap,Oe=!!R.lightMap,Ae=!!R.bumpMap,_e=!!R.normalMap,ne=!!R.displacementMap,ut=!!R.emissiveMap,$e=!!R.metalnessMap,Be=!!R.roughnessMap,Qe=R.anisotropy>0,dt=R.clearcoat>0,mt=R.iridescence>0,ue=R.sheen>0,Q=R.transmission>0,Re=Qe&&!!R.anisotropyMap,Je=dt&&!!R.clearcoatMap,Ze=dt&&!!R.clearcoatNormalMap,ct=dt&&!!R.clearcoatRoughnessMap,vt=mt&&!!R.iridescenceMap,ot=mt&&!!R.iridescenceThicknessMap,Le=ue&&!!R.sheenColorMap,Ut=ue&&!!R.sheenRoughnessMap,Tt=!!R.specularMap,Nt=!!R.specularColorMap,Ct=!!R.specularIntensityMap,Se=Q&&!!R.transmissionMap,et=Q&&!!R.thicknessMap,pt=!!R.gradientMap,Te=!!R.alphaMap,De=R.alphaTest>0,Ge=!!R.alphaHash,bt=!!R.extensions,Et=!!J.attributes.uv1,At=!!J.attributes.uv2,zt=!!J.attributes.uv3;let _n=Zl;return R.toneMapped&&(we===null||we.isXRRenderTarget===!0)&&(_n=n.toneMapping),{isWebGL2:c,shaderID:Y,shaderType:R.type,shaderName:R.name,vertexShader:j,fragmentShader:K,defines:R.defines,customVertexShaderID:ae,customFragmentShaderID:fe,isRawShaderMaterial:R.isRawShaderMaterial===!0,glslVersion:R.glslVersion,precision:m,instancing:Ee,instancingColor:Ee&&V.instanceColor!==null,supportsVertexTextures:d,outputColorSpace:we===null?n.outputColorSpace:we.isXRRenderTarget===!0?we.texture.colorSpace:gl,map:Ce,matcap:Ye,envMap:Ne,envMapMode:Ne&&ce.mapping,envMapCubeUVHeight:W,aoMap:he,lightMap:Oe,bumpMap:Ae,normalMap:_e,displacementMap:d&&ne,emissiveMap:ut,normalMapObjectSpace:_e&&R.normalMapType===RP,normalMapTangentSpace:_e&&R.normalMapType===Rh,metalnessMap:$e,roughnessMap:Be,anisotropy:Qe,anisotropyMap:Re,clearcoat:dt,clearcoatMap:Je,clearcoatNormalMap:Ze,clearcoatRoughnessMap:ct,iridescence:mt,iridescenceMap:vt,iridescenceThicknessMap:ot,sheen:ue,sheenColorMap:Le,sheenRoughnessMap:Ut,specularMap:Tt,specularColorMap:Nt,specularIntensityMap:Ct,transmission:Q,transmissionMap:Se,thicknessMap:et,gradientMap:pt,opaque:R.transparent===!1&&R.blending===If,alphaMap:Te,alphaTest:De,alphaHash:Ge,combine:R.combine,mapUv:Ce&&w(R.map.channel),aoMapUv:he&&w(R.aoMap.channel),lightMapUv:Oe&&w(R.lightMap.channel),bumpMapUv:Ae&&w(R.bumpMap.channel),normalMapUv:_e&&w(R.normalMap.channel),displacementMapUv:ne&&w(R.displacementMap.channel),emissiveMapUv:ut&&w(R.emissiveMap.channel),metalnessMapUv:$e&&w(R.metalnessMap.channel),roughnessMapUv:Be&&w(R.roughnessMap.channel),anisotropyMapUv:Re&&w(R.anisotropyMap.channel),clearcoatMapUv:Je&&w(R.clearcoatMap.channel),clearcoatNormalMapUv:Ze&&w(R.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ct&&w(R.clearcoatRoughnessMap.channel),iridescenceMapUv:vt&&w(R.iridescenceMap.channel),iridescenceThicknessMapUv:ot&&w(R.iridescenceThicknessMap.channel),sheenColorMapUv:Le&&w(R.sheenColorMap.channel),sheenRoughnessMapUv:Ut&&w(R.sheenRoughnessMap.channel),specularMapUv:Tt&&w(R.specularMap.channel),specularColorMapUv:Nt&&w(R.specularColorMap.channel),specularIntensityMapUv:Ct&&w(R.specularIntensityMap.channel),transmissionMapUv:Se&&w(R.transmissionMap.channel),thicknessMapUv:et&&w(R.thicknessMap.channel),alphaMapUv:Te&&w(R.alphaMap.channel),vertexTangents:!!J.attributes.tangent&&(_e||Qe),vertexColors:R.vertexColors,vertexAlphas:R.vertexColors===!0&&!!J.attributes.color&&J.attributes.color.itemSize===4,vertexUv1s:Et,vertexUv2s:At,vertexUv3s:zt,pointsUvs:V.isPoints===!0&&!!J.attributes.uv&&(Ce||Te),fog:!!G,useFog:R.fog===!0,fogExp2:G&&G.isFogExp2,flatShading:R.flatShading===!0,sizeAttenuation:R.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:V.isSkinnedMesh===!0,morphTargets:J.morphAttributes.position!==void 0,morphNormals:J.morphAttributes.normal!==void 0,morphColors:J.morphAttributes.color!==void 0,morphTargetsCount:oe,morphTextureStride:D,numDirLights:U.directional.length,numPointLights:U.point.length,numSpotLights:U.spot.length,numSpotLightMaps:U.spotLightMap.length,numRectAreaLights:U.rectArea.length,numHemiLights:U.hemi.length,numDirLightShadows:U.directionalShadowMap.length,numPointLightShadows:U.pointShadowMap.length,numSpotLightShadows:U.spotShadowMap.length,numSpotLightShadowsWithMaps:U.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:R.dithering,shadowMapEnabled:n.shadowMap.enabled&&F.length>0,shadowMapType:n.shadowMap.type,toneMapping:_n,useLegacyLights:n._useLegacyLights,premultipliedAlpha:R.premultipliedAlpha,doubleSided:R.side===fl,flipSided:R.side===fo,useDepthPacking:R.depthPacking>=0,depthPacking:R.depthPacking||0,index0AttributeName:R.index0AttributeName,extensionDerivatives:bt&&R.extensions.derivatives===!0,extensionFragDepth:bt&&R.extensions.fragDepth===!0,extensionDrawBuffers:bt&&R.extensions.drawBuffers===!0,extensionShaderTextureLOD:bt&&R.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:R.customProgramCacheKey()}}function g(R){const U=[];if(R.shaderID?U.push(R.shaderID):(U.push(R.customVertexShaderID),U.push(R.customFragmentShaderID)),R.defines!==void 0)for(const F in R.defines)U.push(F),U.push(R.defines[F]);return R.isRawShaderMaterial===!1&&(S(U,R),_(U,R),U.push(n.outputColorSpace)),U.push(R.customProgramCacheKey),U.join()}function S(R,U){R.push(U.precision),R.push(U.outputColorSpace),R.push(U.envMapMode),R.push(U.envMapCubeUVHeight),R.push(U.mapUv),R.push(U.alphaMapUv),R.push(U.lightMapUv),R.push(U.aoMapUv),R.push(U.bumpMapUv),R.push(U.normalMapUv),R.push(U.displacementMapUv),R.push(U.emissiveMapUv),R.push(U.metalnessMapUv),R.push(U.roughnessMapUv),R.push(U.anisotropyMapUv),R.push(U.clearcoatMapUv),R.push(U.clearcoatNormalMapUv),R.push(U.clearcoatRoughnessMapUv),R.push(U.iridescenceMapUv),R.push(U.iridescenceThicknessMapUv),R.push(U.sheenColorMapUv),R.push(U.sheenRoughnessMapUv),R.push(U.specularMapUv),R.push(U.specularColorMapUv),R.push(U.specularIntensityMapUv),R.push(U.transmissionMapUv),R.push(U.thicknessMapUv),R.push(U.combine),R.push(U.fogExp2),R.push(U.sizeAttenuation),R.push(U.morphTargetsCount),R.push(U.morphAttributeCount),R.push(U.numDirLights),R.push(U.numPointLights),R.push(U.numSpotLights),R.push(U.numSpotLightMaps),R.push(U.numHemiLights),R.push(U.numRectAreaLights),R.push(U.numDirLightShadows),R.push(U.numPointLightShadows),R.push(U.numSpotLightShadows),R.push(U.numSpotLightShadowsWithMaps),R.push(U.shadowMapType),R.push(U.toneMapping),R.push(U.numClippingPlanes),R.push(U.numClipIntersection),R.push(U.depthPacking)}function _(R,U){a.disableAll(),U.isWebGL2&&a.enable(0),U.supportsVertexTextures&&a.enable(1),U.instancing&&a.enable(2),U.instancingColor&&a.enable(3),U.matcap&&a.enable(4),U.envMap&&a.enable(5),U.normalMapObjectSpace&&a.enable(6),U.normalMapTangentSpace&&a.enable(7),U.clearcoat&&a.enable(8),U.iridescence&&a.enable(9),U.alphaTest&&a.enable(10),U.vertexColors&&a.enable(11),U.vertexAlphas&&a.enable(12),U.vertexUv1s&&a.enable(13),U.vertexUv2s&&a.enable(14),U.vertexUv3s&&a.enable(15),U.vertexTangents&&a.enable(16),U.anisotropy&&a.enable(17),R.push(a.mask),a.disableAll(),U.fog&&a.enable(0),U.useFog&&a.enable(1),U.flatShading&&a.enable(2),U.logarithmicDepthBuffer&&a.enable(3),U.skinning&&a.enable(4),U.morphTargets&&a.enable(5),U.morphNormals&&a.enable(6),U.morphColors&&a.enable(7),U.premultipliedAlpha&&a.enable(8),U.shadowMapEnabled&&a.enable(9),U.useLegacyLights&&a.enable(10),U.doubleSided&&a.enable(11),U.flipSided&&a.enable(12),U.useDepthPacking&&a.enable(13),U.dithering&&a.enable(14),U.transmission&&a.enable(15),U.sheen&&a.enable(16),U.opaque&&a.enable(17),U.pointsUvs&&a.enable(18),R.push(a.mask)}function T(R){const U=v[R.type];let F;if(U){const z=cl[U];F=qP.clone(z.uniforms)}else F=R.uniforms;return F}function L(R,U){let F;for(let z=0,V=u.length;z<V;z++){const G=u[z];if(G.cacheKey===U){F=G,++F.usedTimes;break}}return F===void 0&&(F=new k7(n,U,R,s),u.push(F)),F}function P(R){if(--R.usedTimes===0){const U=u.indexOf(R);u[U]=u[u.length-1],u.pop(),R.destroy()}}function N(R){l.remove(R)}function k(){l.dispose()}return{getParameters:x,getProgramCacheKey:g,getUniforms:T,acquireProgram:L,releaseProgram:P,releaseShaderCache:N,programs:u,dispose:k}}function F7(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function r(s,o,a){n.get(s)[o]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function U7(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function VE(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function WE(){const n=[];let e=0;const t=[],r=[],i=[];function s(){e=0,t.length=0,r.length=0,i.length=0}function o(h,d,m,v,w,x){let g=n[e];return g===void 0?(g={id:h.id,object:h,geometry:d,material:m,groupOrder:v,renderOrder:h.renderOrder,z:w,group:x},n[e]=g):(g.id=h.id,g.object=h,g.geometry=d,g.material=m,g.groupOrder=v,g.renderOrder=h.renderOrder,g.z=w,g.group=x),e++,g}function a(h,d,m,v,w,x){const g=o(h,d,m,v,w,x);m.transmission>0?r.push(g):m.transparent===!0?i.push(g):t.push(g)}function l(h,d,m,v,w,x){const g=o(h,d,m,v,w,x);m.transmission>0?r.unshift(g):m.transparent===!0?i.unshift(g):t.unshift(g)}function u(h,d){t.length>1&&t.sort(h||U7),r.length>1&&r.sort(d||VE),i.length>1&&i.sort(d||VE)}function c(){for(let h=e,d=n.length;h<d;h++){const m=n[h];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:c,sort:u}}function B7(){let n=new WeakMap;function e(r,i){const s=n.get(r);let o;return s===void 0?(o=new WE,n.set(r,[o])):i>=s.length?(o=new WE,s.push(o)):o=s[i],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function z7(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ve,color:new $t};break;case"SpotLight":t={position:new ve,direction:new ve,color:new $t,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ve,color:new $t,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ve,skyColor:new $t,groundColor:new $t};break;case"RectAreaLight":t={color:new $t,position:new ve,halfWidth:new ve,halfHeight:new ve};break}return n[e.id]=t,t}}}function H7(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let G7=0;function V7(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function W7(n,e){const t=new z7,r=H7(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)i.probe.push(new ve);const s=new ve,o=new Fn,a=new Fn;function l(c,h){let d=0,m=0,v=0;for(let F=0;F<9;F++)i.probe[F].set(0,0,0);let w=0,x=0,g=0,S=0,_=0,T=0,L=0,P=0,N=0,k=0;c.sort(V7);const R=h===!0?Math.PI:1;for(let F=0,z=c.length;F<z;F++){const V=c[F],G=V.color,J=V.intensity,ie=V.distance,ce=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)d+=G.r*J*R,m+=G.g*J*R,v+=G.b*J*R;else if(V.isLightProbe)for(let W=0;W<9;W++)i.probe[W].addScaledVector(V.sh.coefficients[W],J);else if(V.isDirectionalLight){const W=t.get(V);if(W.color.copy(V.color).multiplyScalar(V.intensity*R),V.castShadow){const Y=V.shadow,$=r.get(V);$.shadowBias=Y.bias,$.shadowNormalBias=Y.normalBias,$.shadowRadius=Y.radius,$.shadowMapSize=Y.mapSize,i.directionalShadow[w]=$,i.directionalShadowMap[w]=ce,i.directionalShadowMatrix[w]=V.shadow.matrix,T++}i.directional[w]=W,w++}else if(V.isSpotLight){const W=t.get(V);W.position.setFromMatrixPosition(V.matrixWorld),W.color.copy(G).multiplyScalar(J*R),W.distance=ie,W.coneCos=Math.cos(V.angle),W.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),W.decay=V.decay,i.spot[g]=W;const Y=V.shadow;if(V.map&&(i.spotLightMap[N]=V.map,N++,Y.updateMatrices(V),V.castShadow&&k++),i.spotLightMatrix[g]=Y.matrix,V.castShadow){const $=r.get(V);$.shadowBias=Y.bias,$.shadowNormalBias=Y.normalBias,$.shadowRadius=Y.radius,$.shadowMapSize=Y.mapSize,i.spotShadow[g]=$,i.spotShadowMap[g]=ce,P++}g++}else if(V.isRectAreaLight){const W=t.get(V);W.color.copy(G).multiplyScalar(J),W.halfWidth.set(V.width*.5,0,0),W.halfHeight.set(0,V.height*.5,0),i.rectArea[S]=W,S++}else if(V.isPointLight){const W=t.get(V);if(W.color.copy(V.color).multiplyScalar(V.intensity*R),W.distance=V.distance,W.decay=V.decay,V.castShadow){const Y=V.shadow,$=r.get(V);$.shadowBias=Y.bias,$.shadowNormalBias=Y.normalBias,$.shadowRadius=Y.radius,$.shadowMapSize=Y.mapSize,$.shadowCameraNear=Y.camera.near,$.shadowCameraFar=Y.camera.far,i.pointShadow[x]=$,i.pointShadowMap[x]=ce,i.pointShadowMatrix[x]=V.shadow.matrix,L++}i.point[x]=W,x++}else if(V.isHemisphereLight){const W=t.get(V);W.skyColor.copy(V.color).multiplyScalar(J*R),W.groundColor.copy(V.groundColor).multiplyScalar(J*R),i.hemi[_]=W,_++}}S>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Gt.LTC_FLOAT_1,i.rectAreaLTC2=Gt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Gt.LTC_HALF_1,i.rectAreaLTC2=Gt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=d,i.ambient[1]=m,i.ambient[2]=v;const U=i.hash;(U.directionalLength!==w||U.pointLength!==x||U.spotLength!==g||U.rectAreaLength!==S||U.hemiLength!==_||U.numDirectionalShadows!==T||U.numPointShadows!==L||U.numSpotShadows!==P||U.numSpotMaps!==N)&&(i.directional.length=w,i.spot.length=g,i.rectArea.length=S,i.point.length=x,i.hemi.length=_,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=L,i.pointShadowMap.length=L,i.spotShadow.length=P,i.spotShadowMap.length=P,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=L,i.spotLightMatrix.length=P+N-k,i.spotLightMap.length=N,i.numSpotLightShadowsWithMaps=k,U.directionalLength=w,U.pointLength=x,U.spotLength=g,U.rectAreaLength=S,U.hemiLength=_,U.numDirectionalShadows=T,U.numPointShadows=L,U.numSpotShadows=P,U.numSpotMaps=N,i.version=G7++)}function u(c,h){let d=0,m=0,v=0,w=0,x=0;const g=h.matrixWorldInverse;for(let S=0,_=c.length;S<_;S++){const T=c[S];if(T.isDirectionalLight){const L=i.directional[d];L.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),L.direction.sub(s),L.direction.transformDirection(g),d++}else if(T.isSpotLight){const L=i.spot[v];L.position.setFromMatrixPosition(T.matrixWorld),L.position.applyMatrix4(g),L.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),L.direction.sub(s),L.direction.transformDirection(g),v++}else if(T.isRectAreaLight){const L=i.rectArea[w];L.position.setFromMatrixPosition(T.matrixWorld),L.position.applyMatrix4(g),a.identity(),o.copy(T.matrixWorld),o.premultiply(g),a.extractRotation(o),L.halfWidth.set(T.width*.5,0,0),L.halfHeight.set(0,T.height*.5,0),L.halfWidth.applyMatrix4(a),L.halfHeight.applyMatrix4(a),w++}else if(T.isPointLight){const L=i.point[m];L.position.setFromMatrixPosition(T.matrixWorld),L.position.applyMatrix4(g),m++}else if(T.isHemisphereLight){const L=i.hemi[x];L.direction.setFromMatrixPosition(T.matrixWorld),L.direction.transformDirection(g),x++}}}return{setup:l,setupView:u,state:i}}function jE(n,e){const t=new W7(n,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(h){r.push(h)}function a(h){i.push(h)}function l(h){t.setup(r,h)}function u(h){t.setupView(r,h)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function j7(n,e){let t=new WeakMap;function r(s,o=0){const a=t.get(s);let l;return a===void 0?(l=new jE(n,e),t.set(s,[l])):o>=a.length?(l=new jE(n,e),a.push(l)):l=a[o],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class Yb extends Ns{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=LP,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class $b extends Ns{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const q7=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,X7=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Y7(n,e,t){let r=new F2;const i=new xt,s=new xt,o=new Ar,a=new Yb({depthPacking:PP}),l=new $b,u={},c=t.maxTextureSize,h={[Qu]:fo,[fo]:Qu,[fl]:fl},d=new yl({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new xt},radius:{value:4}},vertexShader:q7,fragmentShader:X7}),m=d.clone();m.defines.HORIZONTAL_PASS=1;const v=new kn;v.setAttribute("position",new Nr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const w=new ws(v,d),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=k2;let g=this.type;this.render=function(L,P,N){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||L.length===0)return;const k=n.getRenderTarget(),R=n.getActiveCubeFace(),U=n.getActiveMipmapLevel(),F=n.state;F.setBlending(Xu),F.buffers.color.setClear(1,1,1,1),F.buffers.depth.setTest(!0),F.setScissorTest(!1);const z=g!==sl&&this.type===sl,V=g===sl&&this.type!==sl;for(let G=0,J=L.length;G<J;G++){const ie=L[G],ce=ie.shadow;if(ce===void 0){console.warn("THREE.WebGLShadowMap:",ie,"has no shadow.");continue}if(ce.autoUpdate===!1&&ce.needsUpdate===!1)continue;i.copy(ce.mapSize);const W=ce.getFrameExtents();if(i.multiply(W),s.copy(ce.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/W.x),i.x=s.x*W.x,ce.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/W.y),i.y=s.y*W.y,ce.mapSize.y=s.y)),ce.map===null||z===!0||V===!0){const $=this.type!==sl?{minFilter:Ri,magFilter:Ri}:{};ce.map!==null&&ce.map.dispose(),ce.map=new vl(i.x,i.y,$),ce.map.texture.name=ie.name+".shadowMap",ce.camera.updateProjectionMatrix()}n.setRenderTarget(ce.map),n.clear();const Y=ce.getViewportCount();for(let $=0;$<Y;$++){const oe=ce.getViewport($);o.set(s.x*oe.x,s.y*oe.y,s.x*oe.z,s.y*oe.w),F.viewport(o),ce.updateMatrices(ie,$),r=ce.getFrustum(),T(P,N,ce.camera,ie,this.type)}ce.isPointLightShadow!==!0&&this.type===sl&&S(ce,N),ce.needsUpdate=!1}g=this.type,x.needsUpdate=!1,n.setRenderTarget(k,R,U)};function S(L,P){const N=e.update(w);d.defines.VSM_SAMPLES!==L.blurSamples&&(d.defines.VSM_SAMPLES=L.blurSamples,m.defines.VSM_SAMPLES=L.blurSamples,d.needsUpdate=!0,m.needsUpdate=!0),L.mapPass===null&&(L.mapPass=new vl(i.x,i.y)),d.uniforms.shadow_pass.value=L.map.texture,d.uniforms.resolution.value=L.mapSize,d.uniforms.radius.value=L.radius,n.setRenderTarget(L.mapPass),n.clear(),n.renderBufferDirect(P,null,N,d,w,null),m.uniforms.shadow_pass.value=L.mapPass.texture,m.uniforms.resolution.value=L.mapSize,m.uniforms.radius.value=L.radius,n.setRenderTarget(L.map),n.clear(),n.renderBufferDirect(P,null,N,m,w,null)}function _(L,P,N,k){let R=null;const U=N.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(U!==void 0)R=U;else if(R=N.isPointLight===!0?l:a,n.localClippingEnabled&&P.clipShadows===!0&&Array.isArray(P.clippingPlanes)&&P.clippingPlanes.length!==0||P.displacementMap&&P.displacementScale!==0||P.alphaMap&&P.alphaTest>0||P.map&&P.alphaTest>0){const F=R.uuid,z=P.uuid;let V=u[F];V===void 0&&(V={},u[F]=V);let G=V[z];G===void 0&&(G=R.clone(),V[z]=G),R=G}if(R.visible=P.visible,R.wireframe=P.wireframe,k===sl?R.side=P.shadowSide!==null?P.shadowSide:P.side:R.side=P.shadowSide!==null?P.shadowSide:h[P.side],R.alphaMap=P.alphaMap,R.alphaTest=P.alphaTest,R.map=P.map,R.clipShadows=P.clipShadows,R.clippingPlanes=P.clippingPlanes,R.clipIntersection=P.clipIntersection,R.displacementMap=P.displacementMap,R.displacementScale=P.displacementScale,R.displacementBias=P.displacementBias,R.wireframeLinewidth=P.wireframeLinewidth,R.linewidth=P.linewidth,N.isPointLight===!0&&R.isMeshDistanceMaterial===!0){const F=n.properties.get(R);F.light=N}return R}function T(L,P,N,k,R){if(L.visible===!1)return;if(L.layers.test(P.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&R===sl)&&(!L.frustumCulled||r.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,L.matrixWorld);const z=e.update(L),V=L.material;if(Array.isArray(V)){const G=z.groups;for(let J=0,ie=G.length;J<ie;J++){const ce=G[J],W=V[ce.materialIndex];if(W&&W.visible){const Y=_(L,W,k,R);n.renderBufferDirect(N,null,z,Y,L,ce)}}}else if(V.visible){const G=_(L,V,k,R);n.renderBufferDirect(N,null,z,G,L,null)}}const F=L.children;for(let z=0,V=F.length;z<V;z++)T(F[z],P,N,k,R)}}function $7(n,e,t){const r=t.isWebGL2;function i(){let Te=!1;const De=new Ar;let Ge=null;const bt=new Ar(0,0,0,0);return{setMask:function(Et){Ge!==Et&&!Te&&(n.colorMask(Et,Et,Et,Et),Ge=Et)},setLocked:function(Et){Te=Et},setClear:function(Et,At,zt,_n,Mn){Mn===!0&&(Et*=_n,At*=_n,zt*=_n),De.set(Et,At,zt,_n),bt.equals(De)===!1&&(n.clearColor(Et,At,zt,_n),bt.copy(De))},reset:function(){Te=!1,Ge=null,bt.set(-1,0,0,0)}}}function s(){let Te=!1,De=null,Ge=null,bt=null;return{setTest:function(Et){Et?we(n.DEPTH_TEST):Ee(n.DEPTH_TEST)},setMask:function(Et){De!==Et&&!Te&&(n.depthMask(Et),De=Et)},setFunc:function(Et){if(Ge!==Et){switch(Et){case sP:n.depthFunc(n.NEVER);break;case oP:n.depthFunc(n.ALWAYS);break;case aP:n.depthFunc(n.LESS);break;case Qy:n.depthFunc(n.LEQUAL);break;case lP:n.depthFunc(n.EQUAL);break;case uP:n.depthFunc(n.GEQUAL);break;case cP:n.depthFunc(n.GREATER);break;case hP:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ge=Et}},setLocked:function(Et){Te=Et},setClear:function(Et){bt!==Et&&(n.clearDepth(Et),bt=Et)},reset:function(){Te=!1,De=null,Ge=null,bt=null}}}function o(){let Te=!1,De=null,Ge=null,bt=null,Et=null,At=null,zt=null,_n=null,Mn=null;return{setTest:function(fn){Te||(fn?we(n.STENCIL_TEST):Ee(n.STENCIL_TEST))},setMask:function(fn){De!==fn&&!Te&&(n.stencilMask(fn),De=fn)},setFunc:function(fn,Xn,Ft){(Ge!==fn||bt!==Xn||Et!==Ft)&&(n.stencilFunc(fn,Xn,Ft),Ge=fn,bt=Xn,Et=Ft)},setOp:function(fn,Xn,Ft){(At!==fn||zt!==Xn||_n!==Ft)&&(n.stencilOp(fn,Xn,Ft),At=fn,zt=Xn,_n=Ft)},setLocked:function(fn){Te=fn},setClear:function(fn){Mn!==fn&&(n.clearStencil(fn),Mn=fn)},reset:function(){Te=!1,De=null,Ge=null,bt=null,Et=null,At=null,zt=null,_n=null,Mn=null}}}const a=new i,l=new s,u=new o,c=new WeakMap,h=new WeakMap;let d={},m={},v=new WeakMap,w=[],x=null,g=!1,S=null,_=null,T=null,L=null,P=null,N=null,k=null,R=!1,U=null,F=null,z=null,V=null,G=null;const J=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ie=!1,ce=0;const W=n.getParameter(n.VERSION);W.indexOf("WebGL")!==-1?(ce=parseFloat(/^WebGL (\d)/.exec(W)[1]),ie=ce>=1):W.indexOf("OpenGL ES")!==-1&&(ce=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),ie=ce>=2);let Y=null,$={};const oe=n.getParameter(n.SCISSOR_BOX),D=n.getParameter(n.VIEWPORT),j=new Ar().fromArray(oe),K=new Ar().fromArray(D);function ae(Te,De,Ge,bt){const Et=new Uint8Array(4),At=n.createTexture();n.bindTexture(Te,At),n.texParameteri(Te,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Te,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let zt=0;zt<Ge;zt++)r&&(Te===n.TEXTURE_3D||Te===n.TEXTURE_2D_ARRAY)?n.texImage3D(De,0,n.RGBA,1,1,bt,0,n.RGBA,n.UNSIGNED_BYTE,Et):n.texImage2D(De+zt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Et);return At}const fe={};fe[n.TEXTURE_2D]=ae(n.TEXTURE_2D,n.TEXTURE_2D,1),fe[n.TEXTURE_CUBE_MAP]=ae(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(fe[n.TEXTURE_2D_ARRAY]=ae(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),fe[n.TEXTURE_3D]=ae(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),we(n.DEPTH_TEST),l.setFunc(Qy),ne(!1),ut(w_),we(n.CULL_FACE),Ae(Xu);function we(Te){d[Te]!==!0&&(n.enable(Te),d[Te]=!0)}function Ee(Te){d[Te]!==!1&&(n.disable(Te),d[Te]=!1)}function Ce(Te,De){return m[Te]!==De?(n.bindFramebuffer(Te,De),m[Te]=De,r&&(Te===n.DRAW_FRAMEBUFFER&&(m[n.FRAMEBUFFER]=De),Te===n.FRAMEBUFFER&&(m[n.DRAW_FRAMEBUFFER]=De)),!0):!1}function Ye(Te,De){let Ge=w,bt=!1;if(Te)if(Ge=v.get(De),Ge===void 0&&(Ge=[],v.set(De,Ge)),Te.isWebGLMultipleRenderTargets){const Et=Te.texture;if(Ge.length!==Et.length||Ge[0]!==n.COLOR_ATTACHMENT0){for(let At=0,zt=Et.length;At<zt;At++)Ge[At]=n.COLOR_ATTACHMENT0+At;Ge.length=Et.length,bt=!0}}else Ge[0]!==n.COLOR_ATTACHMENT0&&(Ge[0]=n.COLOR_ATTACHMENT0,bt=!0);else Ge[0]!==n.BACK&&(Ge[0]=n.BACK,bt=!0);bt&&(t.isWebGL2?n.drawBuffers(Ge):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ge))}function Ne(Te){return x!==Te?(n.useProgram(Te),x=Te,!0):!1}const he={[yf]:n.FUNC_ADD,[YL]:n.FUNC_SUBTRACT,[$L]:n.FUNC_REVERSE_SUBTRACT};if(r)he[M_]=n.MIN,he[E_]=n.MAX;else{const Te=e.get("EXT_blend_minmax");Te!==null&&(he[M_]=Te.MIN_EXT,he[E_]=Te.MAX_EXT)}const Oe={[ZL]:n.ZERO,[KL]:n.ONE,[JL]:n.SRC_COLOR,[Tb]:n.SRC_ALPHA,[iP]:n.SRC_ALPHA_SATURATE,[nP]:n.DST_COLOR,[eP]:n.DST_ALPHA,[QL]:n.ONE_MINUS_SRC_COLOR,[Cb]:n.ONE_MINUS_SRC_ALPHA,[rP]:n.ONE_MINUS_DST_COLOR,[tP]:n.ONE_MINUS_DST_ALPHA};function Ae(Te,De,Ge,bt,Et,At,zt,_n){if(Te===Xu){g===!0&&(Ee(n.BLEND),g=!1);return}if(g===!1&&(we(n.BLEND),g=!0),Te!==XL){if(Te!==S||_n!==R){if((_!==yf||P!==yf)&&(n.blendEquation(n.FUNC_ADD),_=yf,P=yf),_n)switch(Te){case If:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case S_:n.blendFunc(n.ONE,n.ONE);break;case __:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case b_:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}else switch(Te){case If:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case S_:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case __:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case b_:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}T=null,L=null,N=null,k=null,S=Te,R=_n}return}Et=Et||De,At=At||Ge,zt=zt||bt,(De!==_||Et!==P)&&(n.blendEquationSeparate(he[De],he[Et]),_=De,P=Et),(Ge!==T||bt!==L||At!==N||zt!==k)&&(n.blendFuncSeparate(Oe[Ge],Oe[bt],Oe[At],Oe[zt]),T=Ge,L=bt,N=At,k=zt),S=Te,R=!1}function _e(Te,De){Te.side===fl?Ee(n.CULL_FACE):we(n.CULL_FACE);let Ge=Te.side===fo;De&&(Ge=!Ge),ne(Ge),Te.blending===If&&Te.transparent===!1?Ae(Xu):Ae(Te.blending,Te.blendEquation,Te.blendSrc,Te.blendDst,Te.blendEquationAlpha,Te.blendSrcAlpha,Te.blendDstAlpha,Te.premultipliedAlpha),l.setFunc(Te.depthFunc),l.setTest(Te.depthTest),l.setMask(Te.depthWrite),a.setMask(Te.colorWrite);const bt=Te.stencilWrite;u.setTest(bt),bt&&(u.setMask(Te.stencilWriteMask),u.setFunc(Te.stencilFunc,Te.stencilRef,Te.stencilFuncMask),u.setOp(Te.stencilFail,Te.stencilZFail,Te.stencilZPass)),Be(Te.polygonOffset,Te.polygonOffsetFactor,Te.polygonOffsetUnits),Te.alphaToCoverage===!0?we(n.SAMPLE_ALPHA_TO_COVERAGE):Ee(n.SAMPLE_ALPHA_TO_COVERAGE)}function ne(Te){U!==Te&&(Te?n.frontFace(n.CW):n.frontFace(n.CCW),U=Te)}function ut(Te){Te!==WL?(we(n.CULL_FACE),Te!==F&&(Te===w_?n.cullFace(n.BACK):Te===jL?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ee(n.CULL_FACE),F=Te}function $e(Te){Te!==z&&(ie&&n.lineWidth(Te),z=Te)}function Be(Te,De,Ge){Te?(we(n.POLYGON_OFFSET_FILL),(V!==De||G!==Ge)&&(n.polygonOffset(De,Ge),V=De,G=Ge)):Ee(n.POLYGON_OFFSET_FILL)}function Qe(Te){Te?we(n.SCISSOR_TEST):Ee(n.SCISSOR_TEST)}function dt(Te){Te===void 0&&(Te=n.TEXTURE0+J-1),Y!==Te&&(n.activeTexture(Te),Y=Te)}function mt(Te,De,Ge){Ge===void 0&&(Y===null?Ge=n.TEXTURE0+J-1:Ge=Y);let bt=$[Ge];bt===void 0&&(bt={type:void 0,texture:void 0},$[Ge]=bt),(bt.type!==Te||bt.texture!==De)&&(Y!==Ge&&(n.activeTexture(Ge),Y=Ge),n.bindTexture(Te,De||fe[Te]),bt.type=Te,bt.texture=De)}function ue(){const Te=$[Y];Te!==void 0&&Te.type!==void 0&&(n.bindTexture(Te.type,null),Te.type=void 0,Te.texture=void 0)}function Q(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Re(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Je(){try{n.texSubImage2D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Ze(){try{n.texSubImage3D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function ct(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function vt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function ot(){try{n.texStorage2D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Le(){try{n.texStorage3D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Ut(){try{n.texImage2D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Tt(){try{n.texImage3D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Nt(Te){j.equals(Te)===!1&&(n.scissor(Te.x,Te.y,Te.z,Te.w),j.copy(Te))}function Ct(Te){K.equals(Te)===!1&&(n.viewport(Te.x,Te.y,Te.z,Te.w),K.copy(Te))}function Se(Te,De){let Ge=h.get(De);Ge===void 0&&(Ge=new WeakMap,h.set(De,Ge));let bt=Ge.get(Te);bt===void 0&&(bt=n.getUniformBlockIndex(De,Te.name),Ge.set(Te,bt))}function et(Te,De){const bt=h.get(De).get(Te);c.get(De)!==bt&&(n.uniformBlockBinding(De,bt,Te.__bindingPointIndex),c.set(De,bt))}function pt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),d={},Y=null,$={},m={},v=new WeakMap,w=[],x=null,g=!1,S=null,_=null,T=null,L=null,P=null,N=null,k=null,R=!1,U=null,F=null,z=null,V=null,G=null,j.set(0,0,n.canvas.width,n.canvas.height),K.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:we,disable:Ee,bindFramebuffer:Ce,drawBuffers:Ye,useProgram:Ne,setBlending:Ae,setMaterial:_e,setFlipSided:ne,setCullFace:ut,setLineWidth:$e,setPolygonOffset:Be,setScissorTest:Qe,activeTexture:dt,bindTexture:mt,unbindTexture:ue,compressedTexImage2D:Q,compressedTexImage3D:Re,texImage2D:Ut,texImage3D:Tt,updateUBOMapping:Se,uniformBlockBinding:et,texStorage2D:ot,texStorage3D:Le,texSubImage2D:Je,texSubImage3D:Ze,compressedTexSubImage2D:ct,compressedTexSubImage3D:vt,scissor:Nt,viewport:Ct,reset:pt}}function Z7(n,e,t,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,h=i.maxSamples,d=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,m=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let w;const x=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(ue,Q){return g?new OffscreenCanvas(ue,Q):mg("canvas")}function _(ue,Q,Re,Je){let Ze=1;if((ue.width>Je||ue.height>Je)&&(Ze=Je/Math.max(ue.width,ue.height)),Ze<1||Q===!0)if(typeof HTMLImageElement<"u"&&ue instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ue instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ue instanceof ImageBitmap){const ct=Q?n2:Math.floor,vt=ct(Ze*ue.width),ot=ct(Ze*ue.height);w===void 0&&(w=S(vt,ot));const Le=Re?S(vt,ot):w;return Le.width=vt,Le.height=ot,Le.getContext("2d").drawImage(ue,0,0,vt,ot),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ue.width+"x"+ue.height+") to ("+vt+"x"+ot+")."),Le}else return"data"in ue&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ue.width+"x"+ue.height+")."),ue;return ue}function T(ue){return Z_(ue.width)&&Z_(ue.height)}function L(ue){return a?!1:ue.wrapS!==Zs||ue.wrapT!==Zs||ue.minFilter!==Ri&&ue.minFilter!==qr}function P(ue,Q){return ue.generateMipmaps&&Q&&ue.minFilter!==Ri&&ue.minFilter!==qr}function N(ue){n.generateMipmap(ue)}function k(ue,Q,Re,Je,Ze=!1){if(a===!1)return Q;if(ue!==null){if(n[ue]!==void 0)return n[ue];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ue+"'")}let ct=Q;return Q===n.RED&&(Re===n.FLOAT&&(ct=n.R32F),Re===n.HALF_FLOAT&&(ct=n.R16F),Re===n.UNSIGNED_BYTE&&(ct=n.R8)),Q===n.RED_INTEGER&&(Re===n.UNSIGNED_BYTE&&(ct=n.R8UI),Re===n.UNSIGNED_SHORT&&(ct=n.R16UI),Re===n.UNSIGNED_INT&&(ct=n.R32UI),Re===n.BYTE&&(ct=n.R8I),Re===n.SHORT&&(ct=n.R16I),Re===n.INT&&(ct=n.R32I)),Q===n.RG&&(Re===n.FLOAT&&(ct=n.RG32F),Re===n.HALF_FLOAT&&(ct=n.RG16F),Re===n.UNSIGNED_BYTE&&(ct=n.RG8)),Q===n.RGBA&&(Re===n.FLOAT&&(ct=n.RGBA32F),Re===n.HALF_FLOAT&&(ct=n.RGBA16F),Re===n.UNSIGNED_BYTE&&(ct=Je===Un&&Ze===!1?n.SRGB8_ALPHA8:n.RGBA8),Re===n.UNSIGNED_SHORT_4_4_4_4&&(ct=n.RGBA4),Re===n.UNSIGNED_SHORT_5_5_5_1&&(ct=n.RGB5_A1)),(ct===n.R16F||ct===n.R32F||ct===n.RG16F||ct===n.RG32F||ct===n.RGBA16F||ct===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ct}function R(ue,Q,Re){return P(ue,Re)===!0||ue.isFramebufferTexture&&ue.minFilter!==Ri&&ue.minFilter!==qr?Math.log2(Math.max(Q.width,Q.height))+1:ue.mipmaps!==void 0&&ue.mipmaps.length>0?ue.mipmaps.length:ue.isCompressedTexture&&Array.isArray(ue.image)?Q.mipmaps.length:1}function U(ue){return ue===Ri||ue===e2||ue===k0?n.NEAREST:n.LINEAR}function F(ue){const Q=ue.target;Q.removeEventListener("dispose",F),V(Q),Q.isVideoTexture&&v.delete(Q)}function z(ue){const Q=ue.target;Q.removeEventListener("dispose",z),J(Q)}function V(ue){const Q=r.get(ue);if(Q.__webglInit===void 0)return;const Re=ue.source,Je=x.get(Re);if(Je){const Ze=Je[Q.__cacheKey];Ze.usedTimes--,Ze.usedTimes===0&&G(ue),Object.keys(Je).length===0&&x.delete(Re)}r.remove(ue)}function G(ue){const Q=r.get(ue);n.deleteTexture(Q.__webglTexture);const Re=ue.source,Je=x.get(Re);delete Je[Q.__cacheKey],o.memory.textures--}function J(ue){const Q=ue.texture,Re=r.get(ue),Je=r.get(Q);if(Je.__webglTexture!==void 0&&(n.deleteTexture(Je.__webglTexture),o.memory.textures--),ue.depthTexture&&ue.depthTexture.dispose(),ue.isWebGLCubeRenderTarget)for(let Ze=0;Ze<6;Ze++){if(Array.isArray(Re.__webglFramebuffer[Ze]))for(let ct=0;ct<Re.__webglFramebuffer[Ze].length;ct++)n.deleteFramebuffer(Re.__webglFramebuffer[Ze][ct]);else n.deleteFramebuffer(Re.__webglFramebuffer[Ze]);Re.__webglDepthbuffer&&n.deleteRenderbuffer(Re.__webglDepthbuffer[Ze])}else{if(Array.isArray(Re.__webglFramebuffer))for(let Ze=0;Ze<Re.__webglFramebuffer.length;Ze++)n.deleteFramebuffer(Re.__webglFramebuffer[Ze]);else n.deleteFramebuffer(Re.__webglFramebuffer);if(Re.__webglDepthbuffer&&n.deleteRenderbuffer(Re.__webglDepthbuffer),Re.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Re.__webglMultisampledFramebuffer),Re.__webglColorRenderbuffer)for(let Ze=0;Ze<Re.__webglColorRenderbuffer.length;Ze++)Re.__webglColorRenderbuffer[Ze]&&n.deleteRenderbuffer(Re.__webglColorRenderbuffer[Ze]);Re.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Re.__webglDepthRenderbuffer)}if(ue.isWebGLMultipleRenderTargets)for(let Ze=0,ct=Q.length;Ze<ct;Ze++){const vt=r.get(Q[Ze]);vt.__webglTexture&&(n.deleteTexture(vt.__webglTexture),o.memory.textures--),r.remove(Q[Ze])}r.remove(Q),r.remove(ue)}let ie=0;function ce(){ie=0}function W(){const ue=ie;return ue>=l&&console.warn("THREE.WebGLTextures: Trying to use "+ue+" texture units while this GPU supports only "+l),ie+=1,ue}function Y(ue){const Q=[];return Q.push(ue.wrapS),Q.push(ue.wrapT),Q.push(ue.wrapR||0),Q.push(ue.magFilter),Q.push(ue.minFilter),Q.push(ue.anisotropy),Q.push(ue.internalFormat),Q.push(ue.format),Q.push(ue.type),Q.push(ue.generateMipmaps),Q.push(ue.premultiplyAlpha),Q.push(ue.flipY),Q.push(ue.unpackAlignment),Q.push(ue.colorSpace),Q.join()}function $(ue,Q){const Re=r.get(ue);if(ue.isVideoTexture&&dt(ue),ue.isRenderTargetTexture===!1&&ue.version>0&&Re.__version!==ue.version){const Je=ue.image;if(Je===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Je.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ce(Re,ue,Q);return}}t.bindTexture(n.TEXTURE_2D,Re.__webglTexture,n.TEXTURE0+Q)}function oe(ue,Q){const Re=r.get(ue);if(ue.version>0&&Re.__version!==ue.version){Ce(Re,ue,Q);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Re.__webglTexture,n.TEXTURE0+Q)}function D(ue,Q){const Re=r.get(ue);if(ue.version>0&&Re.__version!==ue.version){Ce(Re,ue,Q);return}t.bindTexture(n.TEXTURE_3D,Re.__webglTexture,n.TEXTURE0+Q)}function j(ue,Q){const Re=r.get(ue);if(ue.version>0&&Re.__version!==ue.version){Ye(Re,ue,Q);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Re.__webglTexture,n.TEXTURE0+Q)}const K={[lg]:n.REPEAT,[Zs]:n.CLAMP_TO_EDGE,[ug]:n.MIRRORED_REPEAT},ae={[Ri]:n.NEAREST,[e2]:n.NEAREST_MIPMAP_NEAREST,[k0]:n.NEAREST_MIPMAP_LINEAR,[qr]:n.LINEAR,[Pb]:n.LINEAR_MIPMAP_NEAREST,[_h]:n.LINEAR_MIPMAP_LINEAR},fe={[NP]:n.NEVER,[zP]:n.ALWAYS,[IP]:n.LESS,[OP]:n.LEQUAL,[DP]:n.EQUAL,[BP]:n.GEQUAL,[FP]:n.GREATER,[UP]:n.NOTEQUAL};function we(ue,Q,Re){if(Re?(n.texParameteri(ue,n.TEXTURE_WRAP_S,K[Q.wrapS]),n.texParameteri(ue,n.TEXTURE_WRAP_T,K[Q.wrapT]),(ue===n.TEXTURE_3D||ue===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ue,n.TEXTURE_WRAP_R,K[Q.wrapR]),n.texParameteri(ue,n.TEXTURE_MAG_FILTER,ae[Q.magFilter]),n.texParameteri(ue,n.TEXTURE_MIN_FILTER,ae[Q.minFilter])):(n.texParameteri(ue,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(ue,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(ue===n.TEXTURE_3D||ue===n.TEXTURE_2D_ARRAY)&&n.texParameteri(ue,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(Q.wrapS!==Zs||Q.wrapT!==Zs)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(ue,n.TEXTURE_MAG_FILTER,U(Q.magFilter)),n.texParameteri(ue,n.TEXTURE_MIN_FILTER,U(Q.minFilter)),Q.minFilter!==Ri&&Q.minFilter!==qr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Q.compareFunction&&(n.texParameteri(ue,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(ue,n.TEXTURE_COMPARE_FUNC,fe[Q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Je=e.get("EXT_texture_filter_anisotropic");if(Q.magFilter===Ri||Q.minFilter!==k0&&Q.minFilter!==_h||Q.type===Js&&e.has("OES_texture_float_linear")===!1||a===!1&&Q.type===co&&e.has("OES_texture_half_float_linear")===!1)return;(Q.anisotropy>1||r.get(Q).__currentAnisotropy)&&(n.texParameterf(ue,Je.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Q.anisotropy,i.getMaxAnisotropy())),r.get(Q).__currentAnisotropy=Q.anisotropy)}}function Ee(ue,Q){let Re=!1;ue.__webglInit===void 0&&(ue.__webglInit=!0,Q.addEventListener("dispose",F));const Je=Q.source;let Ze=x.get(Je);Ze===void 0&&(Ze={},x.set(Je,Ze));const ct=Y(Q);if(ct!==ue.__cacheKey){Ze[ct]===void 0&&(Ze[ct]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,Re=!0),Ze[ct].usedTimes++;const vt=Ze[ue.__cacheKey];vt!==void 0&&(Ze[ue.__cacheKey].usedTimes--,vt.usedTimes===0&&G(Q)),ue.__cacheKey=ct,ue.__webglTexture=Ze[ct].texture}return Re}function Ce(ue,Q,Re){let Je=n.TEXTURE_2D;(Q.isDataArrayTexture||Q.isCompressedArrayTexture)&&(Je=n.TEXTURE_2D_ARRAY),Q.isData3DTexture&&(Je=n.TEXTURE_3D);const Ze=Ee(ue,Q),ct=Q.source;t.bindTexture(Je,ue.__webglTexture,n.TEXTURE0+Re);const vt=r.get(ct);if(ct.version!==vt.__version||Ze===!0){t.activeTexture(n.TEXTURE0+Re),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const ot=L(Q)&&T(Q.image)===!1;let Le=_(Q.image,ot,!1,c);Le=mt(Q,Le);const Ut=T(Le)||a,Tt=s.convert(Q.format,Q.colorSpace);let Nt=s.convert(Q.type),Ct=k(Q.internalFormat,Tt,Nt,Q.colorSpace);we(Je,Q,Ut);let Se;const et=Q.mipmaps,pt=a&&Q.isVideoTexture!==!0,Te=vt.__version===void 0||Ze===!0,De=R(Q,Le,Ut);if(Q.isDepthTexture)Ct=n.DEPTH_COMPONENT,a?Q.type===Js?Ct=n.DEPTH_COMPONENT32F:Q.type===Vu?Ct=n.DEPTH_COMPONENT24:Q.type===ph?Ct=n.DEPTH24_STENCIL8:Ct=n.DEPTH_COMPONENT16:Q.type===Js&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Q.format===mh&&Ct===n.DEPTH_COMPONENT&&Q.type!==I2&&Q.type!==Vu&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Q.type=Vu,Nt=s.convert(Q.type)),Q.format===Wf&&Ct===n.DEPTH_COMPONENT&&(Ct=n.DEPTH_STENCIL,Q.type!==ph&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Q.type=ph,Nt=s.convert(Q.type))),Te&&(pt?t.texStorage2D(n.TEXTURE_2D,1,Ct,Le.width,Le.height):t.texImage2D(n.TEXTURE_2D,0,Ct,Le.width,Le.height,0,Tt,Nt,null));else if(Q.isDataTexture)if(et.length>0&&Ut){pt&&Te&&t.texStorage2D(n.TEXTURE_2D,De,Ct,et[0].width,et[0].height);for(let Ge=0,bt=et.length;Ge<bt;Ge++)Se=et[Ge],pt?t.texSubImage2D(n.TEXTURE_2D,Ge,0,0,Se.width,Se.height,Tt,Nt,Se.data):t.texImage2D(n.TEXTURE_2D,Ge,Ct,Se.width,Se.height,0,Tt,Nt,Se.data);Q.generateMipmaps=!1}else pt?(Te&&t.texStorage2D(n.TEXTURE_2D,De,Ct,Le.width,Le.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Le.width,Le.height,Tt,Nt,Le.data)):t.texImage2D(n.TEXTURE_2D,0,Ct,Le.width,Le.height,0,Tt,Nt,Le.data);else if(Q.isCompressedTexture)if(Q.isCompressedArrayTexture){pt&&Te&&t.texStorage3D(n.TEXTURE_2D_ARRAY,De,Ct,et[0].width,et[0].height,Le.depth);for(let Ge=0,bt=et.length;Ge<bt;Ge++)Se=et[Ge],Q.format!==uo?Tt!==null?pt?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ge,0,0,0,Se.width,Se.height,Le.depth,Tt,Se.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ge,Ct,Se.width,Se.height,Le.depth,0,Se.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pt?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ge,0,0,0,Se.width,Se.height,Le.depth,Tt,Nt,Se.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ge,Ct,Se.width,Se.height,Le.depth,0,Tt,Nt,Se.data)}else{pt&&Te&&t.texStorage2D(n.TEXTURE_2D,De,Ct,et[0].width,et[0].height);for(let Ge=0,bt=et.length;Ge<bt;Ge++)Se=et[Ge],Q.format!==uo?Tt!==null?pt?t.compressedTexSubImage2D(n.TEXTURE_2D,Ge,0,0,Se.width,Se.height,Tt,Se.data):t.compressedTexImage2D(n.TEXTURE_2D,Ge,Ct,Se.width,Se.height,0,Se.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pt?t.texSubImage2D(n.TEXTURE_2D,Ge,0,0,Se.width,Se.height,Tt,Nt,Se.data):t.texImage2D(n.TEXTURE_2D,Ge,Ct,Se.width,Se.height,0,Tt,Nt,Se.data)}else if(Q.isDataArrayTexture)pt?(Te&&t.texStorage3D(n.TEXTURE_2D_ARRAY,De,Ct,Le.width,Le.height,Le.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Le.width,Le.height,Le.depth,Tt,Nt,Le.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ct,Le.width,Le.height,Le.depth,0,Tt,Nt,Le.data);else if(Q.isData3DTexture)pt?(Te&&t.texStorage3D(n.TEXTURE_3D,De,Ct,Le.width,Le.height,Le.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Le.width,Le.height,Le.depth,Tt,Nt,Le.data)):t.texImage3D(n.TEXTURE_3D,0,Ct,Le.width,Le.height,Le.depth,0,Tt,Nt,Le.data);else if(Q.isFramebufferTexture){if(Te)if(pt)t.texStorage2D(n.TEXTURE_2D,De,Ct,Le.width,Le.height);else{let Ge=Le.width,bt=Le.height;for(let Et=0;Et<De;Et++)t.texImage2D(n.TEXTURE_2D,Et,Ct,Ge,bt,0,Tt,Nt,null),Ge>>=1,bt>>=1}}else if(et.length>0&&Ut){pt&&Te&&t.texStorage2D(n.TEXTURE_2D,De,Ct,et[0].width,et[0].height);for(let Ge=0,bt=et.length;Ge<bt;Ge++)Se=et[Ge],pt?t.texSubImage2D(n.TEXTURE_2D,Ge,0,0,Tt,Nt,Se):t.texImage2D(n.TEXTURE_2D,Ge,Ct,Tt,Nt,Se);Q.generateMipmaps=!1}else pt?(Te&&t.texStorage2D(n.TEXTURE_2D,De,Ct,Le.width,Le.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Tt,Nt,Le)):t.texImage2D(n.TEXTURE_2D,0,Ct,Tt,Nt,Le);P(Q,Ut)&&N(Je),vt.__version=ct.version,Q.onUpdate&&Q.onUpdate(Q)}ue.__version=Q.version}function Ye(ue,Q,Re){if(Q.image.length!==6)return;const Je=Ee(ue,Q),Ze=Q.source;t.bindTexture(n.TEXTURE_CUBE_MAP,ue.__webglTexture,n.TEXTURE0+Re);const ct=r.get(Ze);if(Ze.version!==ct.__version||Je===!0){t.activeTexture(n.TEXTURE0+Re),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,Q.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,Q.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const vt=Q.isCompressedTexture||Q.image[0].isCompressedTexture,ot=Q.image[0]&&Q.image[0].isDataTexture,Le=[];for(let Ge=0;Ge<6;Ge++)!vt&&!ot?Le[Ge]=_(Q.image[Ge],!1,!0,u):Le[Ge]=ot?Q.image[Ge].image:Q.image[Ge],Le[Ge]=mt(Q,Le[Ge]);const Ut=Le[0],Tt=T(Ut)||a,Nt=s.convert(Q.format,Q.colorSpace),Ct=s.convert(Q.type),Se=k(Q.internalFormat,Nt,Ct,Q.colorSpace),et=a&&Q.isVideoTexture!==!0,pt=ct.__version===void 0||Je===!0;let Te=R(Q,Ut,Tt);we(n.TEXTURE_CUBE_MAP,Q,Tt);let De;if(vt){et&&pt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Te,Se,Ut.width,Ut.height);for(let Ge=0;Ge<6;Ge++){De=Le[Ge].mipmaps;for(let bt=0;bt<De.length;bt++){const Et=De[bt];Q.format!==uo?Nt!==null?et?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,bt,0,0,Et.width,Et.height,Nt,Et.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,bt,Se,Et.width,Et.height,0,Et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):et?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,bt,0,0,Et.width,Et.height,Nt,Ct,Et.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,bt,Se,Et.width,Et.height,0,Nt,Ct,Et.data)}}}else{De=Q.mipmaps,et&&pt&&(De.length>0&&Te++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Te,Se,Le[0].width,Le[0].height));for(let Ge=0;Ge<6;Ge++)if(ot){et?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,0,0,Le[Ge].width,Le[Ge].height,Nt,Ct,Le[Ge].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,Se,Le[Ge].width,Le[Ge].height,0,Nt,Ct,Le[Ge].data);for(let bt=0;bt<De.length;bt++){const At=De[bt].image[Ge].image;et?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,bt+1,0,0,At.width,At.height,Nt,Ct,At.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,bt+1,Se,At.width,At.height,0,Nt,Ct,At.data)}}else{et?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,0,0,Nt,Ct,Le[Ge]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,Se,Nt,Ct,Le[Ge]);for(let bt=0;bt<De.length;bt++){const Et=De[bt];et?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,bt+1,0,0,Nt,Ct,Et.image[Ge]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,bt+1,Se,Nt,Ct,Et.image[Ge])}}}P(Q,Tt)&&N(n.TEXTURE_CUBE_MAP),ct.__version=Ze.version,Q.onUpdate&&Q.onUpdate(Q)}ue.__version=Q.version}function Ne(ue,Q,Re,Je,Ze,ct){const vt=s.convert(Re.format,Re.colorSpace),ot=s.convert(Re.type),Le=k(Re.internalFormat,vt,ot,Re.colorSpace);if(!r.get(Q).__hasExternalTextures){const Tt=Math.max(1,Q.width>>ct),Nt=Math.max(1,Q.height>>ct);Ze===n.TEXTURE_3D||Ze===n.TEXTURE_2D_ARRAY?t.texImage3D(Ze,ct,Le,Tt,Nt,Q.depth,0,vt,ot,null):t.texImage2D(Ze,ct,Le,Tt,Nt,0,vt,ot,null)}t.bindFramebuffer(n.FRAMEBUFFER,ue),Qe(Q)?d.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Je,Ze,r.get(Re).__webglTexture,0,Be(Q)):(Ze===n.TEXTURE_2D||Ze>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Ze<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Je,Ze,r.get(Re).__webglTexture,ct),t.bindFramebuffer(n.FRAMEBUFFER,null)}function he(ue,Q,Re){if(n.bindRenderbuffer(n.RENDERBUFFER,ue),Q.depthBuffer&&!Q.stencilBuffer){let Je=n.DEPTH_COMPONENT16;if(Re||Qe(Q)){const Ze=Q.depthTexture;Ze&&Ze.isDepthTexture&&(Ze.type===Js?Je=n.DEPTH_COMPONENT32F:Ze.type===Vu&&(Je=n.DEPTH_COMPONENT24));const ct=Be(Q);Qe(Q)?d.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ct,Je,Q.width,Q.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,ct,Je,Q.width,Q.height)}else n.renderbufferStorage(n.RENDERBUFFER,Je,Q.width,Q.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,ue)}else if(Q.depthBuffer&&Q.stencilBuffer){const Je=Be(Q);Re&&Qe(Q)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Je,n.DEPTH24_STENCIL8,Q.width,Q.height):Qe(Q)?d.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Je,n.DEPTH24_STENCIL8,Q.width,Q.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,Q.width,Q.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,ue)}else{const Je=Q.isWebGLMultipleRenderTargets===!0?Q.texture:[Q.texture];for(let Ze=0;Ze<Je.length;Ze++){const ct=Je[Ze],vt=s.convert(ct.format,ct.colorSpace),ot=s.convert(ct.type),Le=k(ct.internalFormat,vt,ot,ct.colorSpace),Ut=Be(Q);Re&&Qe(Q)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ut,Le,Q.width,Q.height):Qe(Q)?d.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ut,Le,Q.width,Q.height):n.renderbufferStorage(n.RENDERBUFFER,Le,Q.width,Q.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Oe(ue,Q){if(Q&&Q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,ue),!(Q.depthTexture&&Q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(Q.depthTexture).__webglTexture||Q.depthTexture.image.width!==Q.width||Q.depthTexture.image.height!==Q.height)&&(Q.depthTexture.image.width=Q.width,Q.depthTexture.image.height=Q.height,Q.depthTexture.needsUpdate=!0),$(Q.depthTexture,0);const Je=r.get(Q.depthTexture).__webglTexture,Ze=Be(Q);if(Q.depthTexture.format===mh)Qe(Q)?d.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Je,0,Ze):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Je,0);else if(Q.depthTexture.format===Wf)Qe(Q)?d.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Je,0,Ze):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Je,0);else throw new Error("Unknown depthTexture format")}function Ae(ue){const Q=r.get(ue),Re=ue.isWebGLCubeRenderTarget===!0;if(ue.depthTexture&&!Q.__autoAllocateDepthBuffer){if(Re)throw new Error("target.depthTexture not supported in Cube render targets");Oe(Q.__webglFramebuffer,ue)}else if(Re){Q.__webglDepthbuffer=[];for(let Je=0;Je<6;Je++)t.bindFramebuffer(n.FRAMEBUFFER,Q.__webglFramebuffer[Je]),Q.__webglDepthbuffer[Je]=n.createRenderbuffer(),he(Q.__webglDepthbuffer[Je],ue,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,Q.__webglFramebuffer),Q.__webglDepthbuffer=n.createRenderbuffer(),he(Q.__webglDepthbuffer,ue,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function _e(ue,Q,Re){const Je=r.get(ue);Q!==void 0&&Ne(Je.__webglFramebuffer,ue,ue.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Re!==void 0&&Ae(ue)}function ne(ue){const Q=ue.texture,Re=r.get(ue),Je=r.get(Q);ue.addEventListener("dispose",z),ue.isWebGLMultipleRenderTargets!==!0&&(Je.__webglTexture===void 0&&(Je.__webglTexture=n.createTexture()),Je.__version=Q.version,o.memory.textures++);const Ze=ue.isWebGLCubeRenderTarget===!0,ct=ue.isWebGLMultipleRenderTargets===!0,vt=T(ue)||a;if(Ze){Re.__webglFramebuffer=[];for(let ot=0;ot<6;ot++)if(a&&Q.mipmaps&&Q.mipmaps.length>0){Re.__webglFramebuffer[ot]=[];for(let Le=0;Le<Q.mipmaps.length;Le++)Re.__webglFramebuffer[ot][Le]=n.createFramebuffer()}else Re.__webglFramebuffer[ot]=n.createFramebuffer()}else{if(a&&Q.mipmaps&&Q.mipmaps.length>0){Re.__webglFramebuffer=[];for(let ot=0;ot<Q.mipmaps.length;ot++)Re.__webglFramebuffer[ot]=n.createFramebuffer()}else Re.__webglFramebuffer=n.createFramebuffer();if(ct)if(i.drawBuffers){const ot=ue.texture;for(let Le=0,Ut=ot.length;Le<Ut;Le++){const Tt=r.get(ot[Le]);Tt.__webglTexture===void 0&&(Tt.__webglTexture=n.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&ue.samples>0&&Qe(ue)===!1){const ot=ct?Q:[Q];Re.__webglMultisampledFramebuffer=n.createFramebuffer(),Re.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Re.__webglMultisampledFramebuffer);for(let Le=0;Le<ot.length;Le++){const Ut=ot[Le];Re.__webglColorRenderbuffer[Le]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Re.__webglColorRenderbuffer[Le]);const Tt=s.convert(Ut.format,Ut.colorSpace),Nt=s.convert(Ut.type),Ct=k(Ut.internalFormat,Tt,Nt,Ut.colorSpace,ue.isXRRenderTarget===!0),Se=Be(ue);n.renderbufferStorageMultisample(n.RENDERBUFFER,Se,Ct,ue.width,ue.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Le,n.RENDERBUFFER,Re.__webglColorRenderbuffer[Le])}n.bindRenderbuffer(n.RENDERBUFFER,null),ue.depthBuffer&&(Re.__webglDepthRenderbuffer=n.createRenderbuffer(),he(Re.__webglDepthRenderbuffer,ue,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Ze){t.bindTexture(n.TEXTURE_CUBE_MAP,Je.__webglTexture),we(n.TEXTURE_CUBE_MAP,Q,vt);for(let ot=0;ot<6;ot++)if(a&&Q.mipmaps&&Q.mipmaps.length>0)for(let Le=0;Le<Q.mipmaps.length;Le++)Ne(Re.__webglFramebuffer[ot][Le],ue,Q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ot,Le);else Ne(Re.__webglFramebuffer[ot],ue,Q,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ot,0);P(Q,vt)&&N(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ct){const ot=ue.texture;for(let Le=0,Ut=ot.length;Le<Ut;Le++){const Tt=ot[Le],Nt=r.get(Tt);t.bindTexture(n.TEXTURE_2D,Nt.__webglTexture),we(n.TEXTURE_2D,Tt,vt),Ne(Re.__webglFramebuffer,ue,Tt,n.COLOR_ATTACHMENT0+Le,n.TEXTURE_2D,0),P(Tt,vt)&&N(n.TEXTURE_2D)}t.unbindTexture()}else{let ot=n.TEXTURE_2D;if((ue.isWebGL3DRenderTarget||ue.isWebGLArrayRenderTarget)&&(a?ot=ue.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ot,Je.__webglTexture),we(ot,Q,vt),a&&Q.mipmaps&&Q.mipmaps.length>0)for(let Le=0;Le<Q.mipmaps.length;Le++)Ne(Re.__webglFramebuffer[Le],ue,Q,n.COLOR_ATTACHMENT0,ot,Le);else Ne(Re.__webglFramebuffer,ue,Q,n.COLOR_ATTACHMENT0,ot,0);P(Q,vt)&&N(ot),t.unbindTexture()}ue.depthBuffer&&Ae(ue)}function ut(ue){const Q=T(ue)||a,Re=ue.isWebGLMultipleRenderTargets===!0?ue.texture:[ue.texture];for(let Je=0,Ze=Re.length;Je<Ze;Je++){const ct=Re[Je];if(P(ct,Q)){const vt=ue.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,ot=r.get(ct).__webglTexture;t.bindTexture(vt,ot),N(vt),t.unbindTexture()}}}function $e(ue){if(a&&ue.samples>0&&Qe(ue)===!1){const Q=ue.isWebGLMultipleRenderTargets?ue.texture:[ue.texture],Re=ue.width,Je=ue.height;let Ze=n.COLOR_BUFFER_BIT;const ct=[],vt=ue.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ot=r.get(ue),Le=ue.isWebGLMultipleRenderTargets===!0;if(Le)for(let Ut=0;Ut<Q.length;Ut++)t.bindFramebuffer(n.FRAMEBUFFER,ot.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ut,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,ot.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ut,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,ot.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ot.__webglFramebuffer);for(let Ut=0;Ut<Q.length;Ut++){ct.push(n.COLOR_ATTACHMENT0+Ut),ue.depthBuffer&&ct.push(vt);const Tt=ot.__ignoreDepthValues!==void 0?ot.__ignoreDepthValues:!1;if(Tt===!1&&(ue.depthBuffer&&(Ze|=n.DEPTH_BUFFER_BIT),ue.stencilBuffer&&(Ze|=n.STENCIL_BUFFER_BIT)),Le&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ot.__webglColorRenderbuffer[Ut]),Tt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[vt]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[vt])),Le){const Nt=r.get(Q[Ut]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Nt,0)}n.blitFramebuffer(0,0,Re,Je,0,0,Re,Je,Ze,n.NEAREST),m&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ct)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Le)for(let Ut=0;Ut<Q.length;Ut++){t.bindFramebuffer(n.FRAMEBUFFER,ot.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ut,n.RENDERBUFFER,ot.__webglColorRenderbuffer[Ut]);const Tt=r.get(Q[Ut]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,ot.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ut,n.TEXTURE_2D,Tt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ot.__webglMultisampledFramebuffer)}}function Be(ue){return Math.min(h,ue.samples)}function Qe(ue){const Q=r.get(ue);return a&&ue.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Q.__useRenderToTexture!==!1}function dt(ue){const Q=o.render.frame;v.get(ue)!==Q&&(v.set(ue,Q),ue.update())}function mt(ue,Q){const Re=ue.colorSpace,Je=ue.format,Ze=ue.type;return ue.isCompressedTexture===!0||ue.format===t2||Re!==gl&&Re!==vh&&(Re===Un?a===!1?e.has("EXT_sRGB")===!0&&Je===uo?(ue.format=t2,ue.minFilter=qr,ue.generateMipmaps=!1):Q=Gb.sRGBToLinear(Q):(Je!==uo||Ze!==Kl)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Re)),Q}this.allocateTextureUnit=W,this.resetTextureUnits=ce,this.setTexture2D=$,this.setTexture2DArray=oe,this.setTexture3D=D,this.setTextureCube=j,this.rebindTextures=_e,this.setupRenderTarget=ne,this.updateRenderTargetMipmap=ut,this.updateMultisampleRenderTarget=$e,this.setupDepthRenderbuffer=Ae,this.setupFrameBufferTexture=Ne,this.useMultisampledRTT=Qe}function QP(n,e,t){const r=t.isWebGL2;function i(s,o=vh){let a;if(s===Kl)return n.UNSIGNED_BYTE;if(s===kb)return n.UNSIGNED_SHORT_4_4_4_4;if(s===Nb)return n.UNSIGNED_SHORT_5_5_5_1;if(s===yP)return n.BYTE;if(s===xP)return n.SHORT;if(s===I2)return n.UNSIGNED_SHORT;if(s===Rb)return n.INT;if(s===Vu)return n.UNSIGNED_INT;if(s===Js)return n.FLOAT;if(s===co)return r?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===wP)return n.ALPHA;if(s===uo)return n.RGBA;if(s===SP)return n.LUMINANCE;if(s===_P)return n.LUMINANCE_ALPHA;if(s===mh)return n.DEPTH_COMPONENT;if(s===Wf)return n.DEPTH_STENCIL;if(s===t2)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===Ib)return n.RED;if(s===Db)return n.RED_INTEGER;if(s===bP)return n.RG;if(s===Ob)return n.RG_INTEGER;if(s===Fb)return n.RGBA_INTEGER;if(s===uy||s===cy||s===hy||s===fy)if(o===Un)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===uy)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===cy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===hy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===fy)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===uy)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===cy)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===hy)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===fy)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===A_||s===T_||s===C_||s===L_)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===A_)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===T_)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===C_)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===L_)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===MP)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===P_||s===R_)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===P_)return o===Un?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===R_)return o===Un?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===k_||s===N_||s===I_||s===D_||s===O_||s===F_||s===U_||s===B_||s===z_||s===H_||s===G_||s===V_||s===W_||s===j_)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===k_)return o===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===N_)return o===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===I_)return o===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===D_)return o===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===O_)return o===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===F_)return o===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===U_)return o===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===B_)return o===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===z_)return o===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===H_)return o===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===G_)return o===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===V_)return o===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===W_)return o===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===j_)return o===Un?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===dy)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===dy)return o===Un?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===EP||s===q_||s===X_||s===Y_)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===dy)return a.COMPRESSED_RED_RGTC1_EXT;if(s===q_)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===X_)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===Y_)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===ph?r?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:i}}class eR extends Ni{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Cp extends ur{constructor(){super(),this.isGroup=!0,this.type="Group"}}const K7={type:"move"};class Ew{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Cp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Cp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ve,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ve),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Cp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ve,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ve),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const w of e.hand.values()){const x=t.getJointPose(w,r),g=this._getHandJoint(u,w);x!==null&&(g.matrix.fromArray(x.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=x.radius),g.visible=x!==null}const c=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],d=c.position.distanceTo(h.position),m=.02,v=.005;u.inputState.pinching&&d>m+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&d<=m-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(K7)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Cp;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class tR extends Mi{constructor(e,t,r,i,s,o,a,l,u,c){if(c=c!==void 0?c:mh,c!==mh&&c!==Wf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===mh&&(r=Vu),r===void 0&&c===Wf&&(r=ph),super(null,i,s,o,a,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Ri,this.minFilter=l!==void 0?l:Ri,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class J7 extends rc{constructor(e,t){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,u=null,c=null,h=null,d=null,m=null,v=null;const w=t.getContextAttributes();let x=null,g=null;const S=[],_=[],T=new Ni;T.layers.enable(1),T.viewport=new Ar;const L=new Ni;L.layers.enable(2),L.viewport=new Ar;const P=[T,L],N=new eR;N.layers.enable(1),N.layers.enable(2);let k=null,R=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(oe){let D=S[oe];return D===void 0&&(D=new Ew,S[oe]=D),D.getTargetRaySpace()},this.getControllerGrip=function(oe){let D=S[oe];return D===void 0&&(D=new Ew,S[oe]=D),D.getGripSpace()},this.getHand=function(oe){let D=S[oe];return D===void 0&&(D=new Ew,S[oe]=D),D.getHandSpace()};function U(oe){const D=_.indexOf(oe.inputSource);if(D===-1)return;const j=S[D];j!==void 0&&(j.update(oe.inputSource,oe.frame,u||o),j.dispatchEvent({type:oe.type,data:oe.inputSource}))}function F(){i.removeEventListener("select",U),i.removeEventListener("selectstart",U),i.removeEventListener("selectend",U),i.removeEventListener("squeeze",U),i.removeEventListener("squeezestart",U),i.removeEventListener("squeezeend",U),i.removeEventListener("end",F),i.removeEventListener("inputsourceschange",z);for(let oe=0;oe<S.length;oe++){const D=_[oe];D!==null&&(_[oe]=null,S[oe].disconnect(D))}k=null,R=null,e.setRenderTarget(x),m=null,d=null,h=null,i=null,g=null,$.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(oe){s=oe,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(oe){a=oe,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(oe){u=oe},this.getBaseLayer=function(){return d!==null?d:m},this.getBinding=function(){return h},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(oe){if(i=oe,i!==null){if(x=e.getRenderTarget(),i.addEventListener("select",U),i.addEventListener("selectstart",U),i.addEventListener("selectend",U),i.addEventListener("squeeze",U),i.addEventListener("squeezestart",U),i.addEventListener("squeezeend",U),i.addEventListener("end",F),i.addEventListener("inputsourceschange",z),w.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const D={antialias:i.renderState.layers===void 0?w.antialias:!0,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(i,t,D),i.updateRenderState({baseLayer:m}),g=new vl(m.framebufferWidth,m.framebufferHeight,{format:uo,type:Kl,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil})}else{let D=null,j=null,K=null;w.depth&&(K=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,D=w.stencil?Wf:mh,j=w.stencil?ph:Vu);const ae={colorFormat:t.RGBA8,depthFormat:K,scaleFactor:s};h=new XRWebGLBinding(i,t),d=h.createProjectionLayer(ae),i.updateRenderState({layers:[d]}),g=new vl(d.textureWidth,d.textureHeight,{format:uo,type:Kl,depthTexture:new tR(d.textureWidth,d.textureHeight,j,void 0,void 0,void 0,void 0,void 0,void 0,D),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0});const fe=e.properties.get(g);fe.__ignoreDepthValues=d.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(a),$.setContext(i),$.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function z(oe){for(let D=0;D<oe.removed.length;D++){const j=oe.removed[D],K=_.indexOf(j);K>=0&&(_[K]=null,S[K].disconnect(j))}for(let D=0;D<oe.added.length;D++){const j=oe.added[D];let K=_.indexOf(j);if(K===-1){for(let fe=0;fe<S.length;fe++)if(fe>=_.length){_.push(j),K=fe;break}else if(_[fe]===null){_[fe]=j,K=fe;break}if(K===-1)break}const ae=S[K];ae&&ae.connect(j)}}const V=new ve,G=new ve;function J(oe,D,j){V.setFromMatrixPosition(D.matrixWorld),G.setFromMatrixPosition(j.matrixWorld);const K=V.distanceTo(G),ae=D.projectionMatrix.elements,fe=j.projectionMatrix.elements,we=ae[14]/(ae[10]-1),Ee=ae[14]/(ae[10]+1),Ce=(ae[9]+1)/ae[5],Ye=(ae[9]-1)/ae[5],Ne=(ae[8]-1)/ae[0],he=(fe[8]+1)/fe[0],Oe=we*Ne,Ae=we*he,_e=K/(-Ne+he),ne=_e*-Ne;D.matrixWorld.decompose(oe.position,oe.quaternion,oe.scale),oe.translateX(ne),oe.translateZ(_e),oe.matrixWorld.compose(oe.position,oe.quaternion,oe.scale),oe.matrixWorldInverse.copy(oe.matrixWorld).invert();const ut=we+_e,$e=Ee+_e,Be=Oe-ne,Qe=Ae+(K-ne),dt=Ce*Ee/$e*ut,mt=Ye*Ee/$e*ut;oe.projectionMatrix.makePerspective(Be,Qe,dt,mt,ut,$e),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert()}function ie(oe,D){D===null?oe.matrixWorld.copy(oe.matrix):oe.matrixWorld.multiplyMatrices(D.matrixWorld,oe.matrix),oe.matrixWorldInverse.copy(oe.matrixWorld).invert()}this.updateCamera=function(oe){if(i===null)return;N.near=L.near=T.near=oe.near,N.far=L.far=T.far=oe.far,(k!==N.near||R!==N.far)&&(i.updateRenderState({depthNear:N.near,depthFar:N.far}),k=N.near,R=N.far);const D=oe.parent,j=N.cameras;ie(N,D);for(let K=0;K<j.length;K++)ie(j[K],D);j.length===2?J(N,T,L):N.projectionMatrix.copy(T.projectionMatrix),ce(oe,N,D)};function ce(oe,D,j){j===null?oe.matrix.copy(D.matrixWorld):(oe.matrix.copy(j.matrixWorld),oe.matrix.invert(),oe.matrix.multiply(D.matrixWorld)),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale),oe.updateMatrixWorld(!0);const K=oe.children;for(let ae=0,fe=K.length;ae<fe;ae++)K[ae].updateMatrixWorld(!0);oe.projectionMatrix.copy(D.projectionMatrix),oe.projectionMatrixInverse.copy(D.projectionMatrixInverse),oe.isPerspectiveCamera&&(oe.fov=em*2*Math.atan(1/oe.projectionMatrix.elements[5]),oe.zoom=1)}this.getCamera=function(){return N},this.getFoveation=function(){if(!(d===null&&m===null))return l},this.setFoveation=function(oe){l=oe,d!==null&&(d.fixedFoveation=oe),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=oe)};let W=null;function Y(oe,D){if(c=D.getViewerPose(u||o),v=D,c!==null){const j=c.views;m!==null&&(e.setRenderTargetFramebuffer(g,m.framebuffer),e.setRenderTarget(g));let K=!1;j.length!==N.cameras.length&&(N.cameras.length=0,K=!0);for(let ae=0;ae<j.length;ae++){const fe=j[ae];let we=null;if(m!==null)we=m.getViewport(fe);else{const Ce=h.getViewSubImage(d,fe);we=Ce.viewport,ae===0&&(e.setRenderTargetTextures(g,Ce.colorTexture,d.ignoreDepthValues?void 0:Ce.depthStencilTexture),e.setRenderTarget(g))}let Ee=P[ae];Ee===void 0&&(Ee=new Ni,Ee.layers.enable(ae),Ee.viewport=new Ar,P[ae]=Ee),Ee.matrix.fromArray(fe.transform.matrix),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.projectionMatrix.fromArray(fe.projectionMatrix),Ee.projectionMatrixInverse.copy(Ee.projectionMatrix).invert(),Ee.viewport.set(we.x,we.y,we.width,we.height),ae===0&&(N.matrix.copy(Ee.matrix),N.matrix.decompose(N.position,N.quaternion,N.scale)),K===!0&&N.cameras.push(Ee)}}for(let j=0;j<S.length;j++){const K=_[j],ae=S[j];K!==null&&ae!==void 0&&ae.update(K,D,u||o)}W&&W(oe,D),D.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:D}),v=null}const $=new YP;$.setAnimationLoop(Y),this.setAnimationLoop=function(oe){W=oe},this.dispose=function(){}}}function Q7(n,e){function t(x,g){x.matrixAutoUpdate===!0&&x.updateMatrix(),g.value.copy(x.matrix)}function r(x,g){g.color.getRGB(x.fogColor.value,jP(n)),g.isFog?(x.fogNear.value=g.near,x.fogFar.value=g.far):g.isFogExp2&&(x.fogDensity.value=g.density)}function i(x,g,S,_,T){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(x,g):g.isMeshToonMaterial?(s(x,g),h(x,g)):g.isMeshPhongMaterial?(s(x,g),c(x,g)):g.isMeshStandardMaterial?(s(x,g),d(x,g),g.isMeshPhysicalMaterial&&m(x,g,T)):g.isMeshMatcapMaterial?(s(x,g),v(x,g)):g.isMeshDepthMaterial?s(x,g):g.isMeshDistanceMaterial?(s(x,g),w(x,g)):g.isMeshNormalMaterial?s(x,g):g.isLineBasicMaterial?(o(x,g),g.isLineDashedMaterial&&a(x,g)):g.isPointsMaterial?l(x,g,S,_):g.isSpriteMaterial?u(x,g):g.isShadowMaterial?(x.color.value.copy(g.color),x.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(x,g){x.opacity.value=g.opacity,g.color&&x.diffuse.value.copy(g.color),g.emissive&&x.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.bumpMap&&(x.bumpMap.value=g.bumpMap,t(g.bumpMap,x.bumpMapTransform),x.bumpScale.value=g.bumpScale,g.side===fo&&(x.bumpScale.value*=-1)),g.normalMap&&(x.normalMap.value=g.normalMap,t(g.normalMap,x.normalMapTransform),x.normalScale.value.copy(g.normalScale),g.side===fo&&x.normalScale.value.negate()),g.displacementMap&&(x.displacementMap.value=g.displacementMap,t(g.displacementMap,x.displacementMapTransform),x.displacementScale.value=g.displacementScale,x.displacementBias.value=g.displacementBias),g.emissiveMap&&(x.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,x.emissiveMapTransform)),g.specularMap&&(x.specularMap.value=g.specularMap,t(g.specularMap,x.specularMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest);const S=e.get(g).envMap;if(S&&(x.envMap.value=S,x.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=g.reflectivity,x.ior.value=g.ior,x.refractionRatio.value=g.refractionRatio),g.lightMap){x.lightMap.value=g.lightMap;const _=n._useLegacyLights===!0?Math.PI:1;x.lightMapIntensity.value=g.lightMapIntensity*_,t(g.lightMap,x.lightMapTransform)}g.aoMap&&(x.aoMap.value=g.aoMap,x.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,x.aoMapTransform))}function o(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform))}function a(x,g){x.dashSize.value=g.dashSize,x.totalSize.value=g.dashSize+g.gapSize,x.scale.value=g.scale}function l(x,g,S,_){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.size.value=g.size*S,x.scale.value=_*.5,g.map&&(x.map.value=g.map,t(g.map,x.uvTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function u(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.rotation.value=g.rotation,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function c(x,g){x.specular.value.copy(g.specular),x.shininess.value=Math.max(g.shininess,1e-4)}function h(x,g){g.gradientMap&&(x.gradientMap.value=g.gradientMap)}function d(x,g){x.metalness.value=g.metalness,g.metalnessMap&&(x.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,x.metalnessMapTransform)),x.roughness.value=g.roughness,g.roughnessMap&&(x.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,x.roughnessMapTransform)),e.get(g).envMap&&(x.envMapIntensity.value=g.envMapIntensity)}function m(x,g,S){x.ior.value=g.ior,g.sheen>0&&(x.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),x.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(x.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,x.sheenColorMapTransform)),g.sheenRoughnessMap&&(x.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,x.sheenRoughnessMapTransform))),g.clearcoat>0&&(x.clearcoat.value=g.clearcoat,x.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(x.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,x.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(x.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===fo&&x.clearcoatNormalScale.value.negate())),g.iridescence>0&&(x.iridescence.value=g.iridescence,x.iridescenceIOR.value=g.iridescenceIOR,x.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(x.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,x.iridescenceMapTransform)),g.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),g.transmission>0&&(x.transmission.value=g.transmission,x.transmissionSamplerMap.value=S.texture,x.transmissionSamplerSize.value.set(S.width,S.height),g.transmissionMap&&(x.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,x.transmissionMapTransform)),x.thickness.value=g.thickness,g.thicknessMap&&(x.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=g.attenuationDistance,x.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(x.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(x.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=g.specularIntensity,x.specularColor.value.copy(g.specularColor),g.specularColorMap&&(x.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,x.specularColorMapTransform)),g.specularIntensityMap&&(x.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,x.specularIntensityMapTransform))}function v(x,g){g.matcap&&(x.matcap.value=g.matcap)}function w(x,g){const S=e.get(g).light;x.referencePosition.value.setFromMatrixPosition(S.matrixWorld),x.nearDistance.value=S.shadow.camera.near,x.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function ez(n,e,t,r){let i={},s={},o=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(S,_){const T=_.program;r.uniformBlockBinding(S,T)}function u(S,_){let T=i[S.id];T===void 0&&(v(S),T=c(S),i[S.id]=T,S.addEventListener("dispose",x));const L=_.program;r.updateUBOMapping(S,L);const P=e.render.frame;s[S.id]!==P&&(d(S),s[S.id]=P)}function c(S){const _=h();S.__bindingPointIndex=_;const T=n.createBuffer(),L=S.__size,P=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,T),n.bufferData(n.UNIFORM_BUFFER,L,P),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,_,T),T}function h(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function d(S){const _=i[S.id],T=S.uniforms,L=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,_);for(let P=0,N=T.length;P<N;P++){const k=T[P];if(m(k,P,L)===!0){const R=k.__offset,U=Array.isArray(k.value)?k.value:[k.value];let F=0;for(let z=0;z<U.length;z++){const V=U[z],G=w(V);typeof V=="number"?(k.__data[0]=V,n.bufferSubData(n.UNIFORM_BUFFER,R+F,k.__data)):V.isMatrix3?(k.__data[0]=V.elements[0],k.__data[1]=V.elements[1],k.__data[2]=V.elements[2],k.__data[3]=V.elements[0],k.__data[4]=V.elements[3],k.__data[5]=V.elements[4],k.__data[6]=V.elements[5],k.__data[7]=V.elements[0],k.__data[8]=V.elements[6],k.__data[9]=V.elements[7],k.__data[10]=V.elements[8],k.__data[11]=V.elements[0]):(V.toArray(k.__data,F),F+=G.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,R,k.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(S,_,T){const L=S.value;if(T[_]===void 0){if(typeof L=="number")T[_]=L;else{const P=Array.isArray(L)?L:[L],N=[];for(let k=0;k<P.length;k++)N.push(P[k].clone());T[_]=N}return!0}else if(typeof L=="number"){if(T[_]!==L)return T[_]=L,!0}else{const P=Array.isArray(T[_])?T[_]:[T[_]],N=Array.isArray(L)?L:[L];for(let k=0;k<P.length;k++){const R=P[k];if(R.equals(N[k])===!1)return R.copy(N[k]),!0}}return!1}function v(S){const _=S.uniforms;let T=0;const L=16;let P=0;for(let N=0,k=_.length;N<k;N++){const R=_[N],U={boundary:0,storage:0},F=Array.isArray(R.value)?R.value:[R.value];for(let z=0,V=F.length;z<V;z++){const G=F[z],J=w(G);U.boundary+=J.boundary,U.storage+=J.storage}if(R.__data=new Float32Array(U.storage/Float32Array.BYTES_PER_ELEMENT),R.__offset=T,N>0){P=T%L;const z=L-P;P!==0&&z-U.boundary<0&&(T+=L-P,R.__offset=T)}T+=U.storage}return P=T%L,P>0&&(T+=L-P),S.__size=T,S.__cache={},this}function w(S){const _={boundary:0,storage:0};return typeof S=="number"?(_.boundary=4,_.storage=4):S.isVector2?(_.boundary=8,_.storage=8):S.isVector3||S.isColor?(_.boundary=16,_.storage=12):S.isVector4?(_.boundary=16,_.storage=16):S.isMatrix3?(_.boundary=48,_.storage=48):S.isMatrix4?(_.boundary=64,_.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),_}function x(S){const _=S.target;_.removeEventListener("dispose",x);const T=o.indexOf(_.__bindingPointIndex);o.splice(T,1),n.deleteBuffer(i[_.id]),delete i[_.id],delete s[_.id]}function g(){for(const S in i)n.deleteBuffer(i[S]);o=[],i={},s={}}return{bind:l,update:u,dispose:g}}function tz(){const n=mg("canvas");return n.style.display="block",n}class Zb{constructor(e={}){const{canvas:t=tz(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let d;r!==null?d=r.getContextAttributes().alpha:d=o;const m=new Uint32Array(4),v=new Int32Array(4);let w=null,x=null;const g=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Un,this._useLegacyLights=!1,this.toneMapping=Zl,this.toneMappingExposure=1;const _=this;let T=!1,L=0,P=0,N=null,k=-1,R=null;const U=new Ar,F=new Ar;let z=null;const V=new $t(0);let G=0,J=t.width,ie=t.height,ce=1,W=null,Y=null;const $=new Ar(0,0,J,ie),oe=new Ar(0,0,J,ie);let D=!1;const j=new F2;let K=!1,ae=!1,fe=null;const we=new Fn,Ee=new xt,Ce=new ve,Ye={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ne(){return N===null?ce:1}let he=r;function Oe(O,ee){for(let me=0;me<O.length;me++){const de=O[me],xe=t.getContext(de,ee);if(xe!==null)return xe}return null}try{const O={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${zg}`),t.addEventListener("webglcontextlost",De,!1),t.addEventListener("webglcontextrestored",Ge,!1),t.addEventListener("webglcontextcreationerror",bt,!1),he===null){const ee=["webgl2","webgl","experimental-webgl"];if(_.isWebGL1Renderer===!0&&ee.shift(),he=Oe(ee,O),he===null)throw Oe(ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&he instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),he.getShaderPrecisionFormat===void 0&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(O){throw console.error("THREE.WebGLRenderer: "+O.message),O}let Ae,_e,ne,ut,$e,Be,Qe,dt,mt,ue,Q,Re,Je,Ze,ct,vt,ot,Le,Ut,Tt,Nt,Ct,Se,et;function pt(){Ae=new gB(he),_e=new cB(he,Ae,e),Ae.init(_e),Ct=new QP(he,Ae,_e),ne=new $7(he,Ae,_e),ut=new xB(he),$e=new F7,Be=new Z7(he,Ae,ne,$e,_e,Ct,ut),Qe=new fB(_),dt=new mB(_),mt=new LF(he,_e),Se=new lB(he,Ae,mt,_e),ue=new vB(he,mt,ut,Se),Q=new bB(he,ue,mt,ut),Ut=new _B(he,_e,Be),vt=new hB($e),Re=new O7(_,Qe,dt,Ae,_e,Se,vt),Je=new Q7(_,$e),Ze=new B7,ct=new j7(Ae,_e),Le=new aB(_,Qe,dt,ne,Q,d,l),ot=new Y7(_,Q,_e),et=new ez(he,ut,_e,ne),Tt=new uB(he,Ae,ut,_e),Nt=new yB(he,Ae,ut,_e),ut.programs=Re.programs,_.capabilities=_e,_.extensions=Ae,_.properties=$e,_.renderLists=Ze,_.shadowMap=ot,_.state=ne,_.info=ut}pt();const Te=new J7(_,he);this.xr=Te,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){const O=Ae.get("WEBGL_lose_context");O&&O.loseContext()},this.forceContextRestore=function(){const O=Ae.get("WEBGL_lose_context");O&&O.restoreContext()},this.getPixelRatio=function(){return ce},this.setPixelRatio=function(O){O!==void 0&&(ce=O,this.setSize(J,ie,!1))},this.getSize=function(O){return O.set(J,ie)},this.setSize=function(O,ee,me=!0){if(Te.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}J=O,ie=ee,t.width=Math.floor(O*ce),t.height=Math.floor(ee*ce),me===!0&&(t.style.width=O+"px",t.style.height=ee+"px"),this.setViewport(0,0,O,ee)},this.getDrawingBufferSize=function(O){return O.set(J*ce,ie*ce).floor()},this.setDrawingBufferSize=function(O,ee,me){J=O,ie=ee,ce=me,t.width=Math.floor(O*me),t.height=Math.floor(ee*me),this.setViewport(0,0,O,ee)},this.getCurrentViewport=function(O){return O.copy(U)},this.getViewport=function(O){return O.copy($)},this.setViewport=function(O,ee,me,de){O.isVector4?$.set(O.x,O.y,O.z,O.w):$.set(O,ee,me,de),ne.viewport(U.copy($).multiplyScalar(ce).floor())},this.getScissor=function(O){return O.copy(oe)},this.setScissor=function(O,ee,me,de){O.isVector4?oe.set(O.x,O.y,O.z,O.w):oe.set(O,ee,me,de),ne.scissor(F.copy(oe).multiplyScalar(ce).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(O){ne.setScissorTest(D=O)},this.setOpaqueSort=function(O){W=O},this.setTransparentSort=function(O){Y=O},this.getClearColor=function(O){return O.copy(Le.getClearColor())},this.setClearColor=function(){Le.setClearColor.apply(Le,arguments)},this.getClearAlpha=function(){return Le.getClearAlpha()},this.setClearAlpha=function(){Le.setClearAlpha.apply(Le,arguments)},this.clear=function(O=!0,ee=!0,me=!0){let de=0;if(O){let xe=!1;if(N!==null){const Ve=N.texture.format;xe=Ve===Fb||Ve===Ob||Ve===Db}if(xe){const Ve=N.texture.type,Xe=Ve===Kl||Ve===Vu||Ve===I2||Ve===ph||Ve===kb||Ve===Nb,it=Le.getClearColor(),rt=Le.getClearAlpha(),ht=it.r,nt=it.g,jt=it.b;Xe?(m[0]=ht,m[1]=nt,m[2]=jt,m[3]=rt,he.clearBufferuiv(he.COLOR,0,m)):(v[0]=ht,v[1]=nt,v[2]=jt,v[3]=rt,he.clearBufferiv(he.COLOR,0,v))}else de|=he.COLOR_BUFFER_BIT}ee&&(de|=he.DEPTH_BUFFER_BIT),me&&(de|=he.STENCIL_BUFFER_BIT),he.clear(de)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",De,!1),t.removeEventListener("webglcontextrestored",Ge,!1),t.removeEventListener("webglcontextcreationerror",bt,!1),Ze.dispose(),ct.dispose(),$e.dispose(),Qe.dispose(),dt.dispose(),Q.dispose(),Se.dispose(),et.dispose(),Re.dispose(),Te.dispose(),Te.removeEventListener("sessionstart",fn),Te.removeEventListener("sessionend",Xn),fe&&(fe.dispose(),fe=null),Ft.stop()};function De(O){O.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function Ge(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;const O=ut.autoReset,ee=ot.enabled,me=ot.autoUpdate,de=ot.needsUpdate,xe=ot.type;pt(),ut.autoReset=O,ot.enabled=ee,ot.autoUpdate=me,ot.needsUpdate=de,ot.type=xe}function bt(O){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",O.statusMessage)}function Et(O){const ee=O.target;ee.removeEventListener("dispose",Et),At(ee)}function At(O){zt(O),$e.remove(O)}function zt(O){const ee=$e.get(O).programs;ee!==void 0&&(ee.forEach(function(me){Re.releaseProgram(me)}),O.isShaderMaterial&&Re.releaseShaderCache(O))}this.renderBufferDirect=function(O,ee,me,de,xe,Ve){ee===null&&(ee=Ye);const Xe=xe.isMesh&&xe.matrixWorld.determinant()<0,it=is(O,ee,me,de,xe);ne.setMaterial(de,Xe);let rt=me.index,ht=1;if(de.wireframe===!0){if(rt=ue.getWireframeAttribute(me),rt===void 0)return;ht=2}const nt=me.drawRange,jt=me.attributes.position;let kt=nt.start*ht,Dt=(nt.start+nt.count)*ht;Ve!==null&&(kt=Math.max(kt,Ve.start*ht),Dt=Math.min(Dt,(Ve.start+Ve.count)*ht)),rt!==null?(kt=Math.max(kt,0),Dt=Math.min(Dt,rt.count)):jt!=null&&(kt=Math.max(kt,0),Dt=Math.min(Dt,jt.count));const nn=Dt-kt;if(nn<0||nn===1/0)return;Se.setup(xe,de,it,me,rt);let on,sn=Tt;if(rt!==null&&(on=mt.get(rt),sn=Nt,sn.setIndex(on)),xe.isMesh)de.wireframe===!0?(ne.setLineWidth(de.wireframeLinewidth*Ne()),sn.setMode(he.LINES)):sn.setMode(he.TRIANGLES);else if(xe.isLine){let Vt=de.linewidth;Vt===void 0&&(Vt=1),ne.setLineWidth(Vt*Ne()),xe.isLineSegments?sn.setMode(he.LINES):xe.isLineLoop?sn.setMode(he.LINE_LOOP):sn.setMode(he.LINE_STRIP)}else xe.isPoints?sn.setMode(he.POINTS):xe.isSprite&&sn.setMode(he.TRIANGLES);if(xe.isInstancedMesh)sn.renderInstances(kt,nn,xe.count);else if(me.isInstancedBufferGeometry){const Vt=me._maxInstanceCount!==void 0?me._maxInstanceCount:1/0,dn=Math.min(me.instanceCount,Vt);sn.renderInstances(kt,nn,dn)}else sn.render(kt,nn)},this.compile=function(O,ee){function me(de,xe,Ve){de.transparent===!0&&de.side===fl&&de.forceSinglePass===!1?(de.side=fo,de.needsUpdate=!0,nr(de,xe,Ve),de.side=Qu,de.needsUpdate=!0,nr(de,xe,Ve),de.side=fl):nr(de,xe,Ve)}x=ct.get(O),x.init(),S.push(x),O.traverseVisible(function(de){de.isLight&&de.layers.test(ee.layers)&&(x.pushLight(de),de.castShadow&&x.pushShadow(de))}),x.setupLights(_._useLegacyLights),O.traverse(function(de){const xe=de.material;if(xe)if(Array.isArray(xe))for(let Ve=0;Ve<xe.length;Ve++){const Xe=xe[Ve];me(Xe,O,de)}else me(xe,O,de)}),S.pop(),x=null};let _n=null;function Mn(O){_n&&_n(O)}function fn(){Ft.stop()}function Xn(){Ft.start()}const Ft=new YP;Ft.setAnimationLoop(Mn),typeof self<"u"&&Ft.setContext(self),this.setAnimationLoop=function(O){_n=O,Te.setAnimationLoop(O),O===null?Ft.stop():Ft.start()},Te.addEventListener("sessionstart",fn),Te.addEventListener("sessionend",Xn),this.render=function(O,ee){if(ee!==void 0&&ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(T===!0)return;O.matrixWorldAutoUpdate===!0&&O.updateMatrixWorld(),ee.parent===null&&ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),Te.enabled===!0&&Te.isPresenting===!0&&(Te.cameraAutoUpdate===!0&&Te.updateCamera(ee),ee=Te.getCamera()),O.isScene===!0&&O.onBeforeRender(_,O,ee,N),x=ct.get(O,S.length),x.init(),S.push(x),we.multiplyMatrices(ee.projectionMatrix,ee.matrixWorldInverse),j.setFromProjectionMatrix(we),ae=this.localClippingEnabled,K=vt.init(this.clippingPlanes,ae),w=Ze.get(O,g.length),w.init(),g.push(w),ti(O,ee,0,_.sortObjects),w.finish(),_.sortObjects===!0&&w.sort(W,Y),this.info.render.frame++,K===!0&&vt.beginShadows();const me=x.state.shadowsArray;if(ot.render(me,O,ee),K===!0&&vt.endShadows(),this.info.autoReset===!0&&this.info.reset(),Le.render(w,O),x.setupLights(_._useLegacyLights),ee.isArrayCamera){const de=ee.cameras;for(let xe=0,Ve=de.length;xe<Ve;xe++){const Xe=de[xe];ni(w,O,Xe,Xe.viewport)}}else ni(w,O,ee);N!==null&&(Be.updateMultisampleRenderTarget(N),Be.updateRenderTargetMipmap(N)),O.isScene===!0&&O.onAfterRender(_,O,ee),Se.resetDefaultState(),k=-1,R=null,S.pop(),S.length>0?x=S[S.length-1]:x=null,g.pop(),g.length>0?w=g[g.length-1]:w=null};function ti(O,ee,me,de){if(O.visible===!1)return;if(O.layers.test(ee.layers)){if(O.isGroup)me=O.renderOrder;else if(O.isLOD)O.autoUpdate===!0&&O.update(ee);else if(O.isLight)x.pushLight(O),O.castShadow&&x.pushShadow(O);else if(O.isSprite){if(!O.frustumCulled||j.intersectsSprite(O)){de&&Ce.setFromMatrixPosition(O.matrixWorld).applyMatrix4(we);const Xe=Q.update(O),it=O.material;it.visible&&w.push(O,Xe,it,me,Ce.z,null)}}else if((O.isMesh||O.isLine||O.isPoints)&&(!O.frustumCulled||j.intersectsObject(O))){const Xe=Q.update(O),it=O.material;if(de&&(O.boundingSphere!==void 0?(O.boundingSphere===null&&O.computeBoundingSphere(),Ce.copy(O.boundingSphere.center)):(Xe.boundingSphere===null&&Xe.computeBoundingSphere(),Ce.copy(Xe.boundingSphere.center)),Ce.applyMatrix4(O.matrixWorld).applyMatrix4(we)),Array.isArray(it)){const rt=Xe.groups;for(let ht=0,nt=rt.length;ht<nt;ht++){const jt=rt[ht],kt=it[jt.materialIndex];kt&&kt.visible&&w.push(O,Xe,kt,me,Ce.z,jt)}}else it.visible&&w.push(O,Xe,it,me,Ce.z,null)}}const Ve=O.children;for(let Xe=0,it=Ve.length;Xe<it;Xe++)ti(Ve[Xe],ee,me,de)}function ni(O,ee,me,de){const xe=O.opaque,Ve=O.transmissive,Xe=O.transparent;x.setupLightsView(me),K===!0&&vt.setGlobalState(_.clippingPlanes,me),Ve.length>0&&yr(xe,Ve,ee,me),de&&ne.viewport(U.copy(de)),xe.length>0&&tr(xe,ee,me),Ve.length>0&&tr(Ve,ee,me),Xe.length>0&&tr(Xe,ee,me),ne.buffers.depth.setTest(!0),ne.buffers.depth.setMask(!0),ne.buffers.color.setMask(!0),ne.setPolygonOffset(!1)}function yr(O,ee,me,de){const xe=_e.isWebGL2;fe===null&&(fe=new vl(1,1,{generateMipmaps:!0,type:Ae.has("EXT_color_buffer_half_float")?co:Kl,minFilter:_h,samples:xe?4:0})),_.getDrawingBufferSize(Ee),xe?fe.setSize(Ee.x,Ee.y):fe.setSize(n2(Ee.x),n2(Ee.y));const Ve=_.getRenderTarget();_.setRenderTarget(fe),_.getClearColor(V),G=_.getClearAlpha(),G<1&&_.setClearColor(16777215,.5),_.clear();const Xe=_.toneMapping;_.toneMapping=Zl,tr(O,me,de),Be.updateMultisampleRenderTarget(fe),Be.updateRenderTargetMipmap(fe);let it=!1;for(let rt=0,ht=ee.length;rt<ht;rt++){const nt=ee[rt],jt=nt.object,kt=nt.geometry,Dt=nt.material,nn=nt.group;if(Dt.side===fl&&jt.layers.test(de.layers)){const on=Dt.side;Dt.side=fo,Dt.needsUpdate=!0,sr(jt,me,de,kt,Dt,nn),Dt.side=on,Dt.needsUpdate=!0,it=!0}}it===!0&&(Be.updateMultisampleRenderTarget(fe),Be.updateRenderTargetMipmap(fe)),_.setRenderTarget(Ve),_.setClearColor(V,G),_.toneMapping=Xe}function tr(O,ee,me){const de=ee.isScene===!0?ee.overrideMaterial:null;for(let xe=0,Ve=O.length;xe<Ve;xe++){const Xe=O[xe],it=Xe.object,rt=Xe.geometry,ht=de===null?Xe.material:de,nt=Xe.group;it.layers.test(me.layers)&&sr(it,ee,me,rt,ht,nt)}}function sr(O,ee,me,de,xe,Ve){O.onBeforeRender(_,ee,me,de,xe,Ve),O.modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,O.matrixWorld),O.normalMatrix.getNormalMatrix(O.modelViewMatrix),xe.onBeforeRender(_,ee,me,de,O,Ve),xe.transparent===!0&&xe.side===fl&&xe.forceSinglePass===!1?(xe.side=fo,xe.needsUpdate=!0,_.renderBufferDirect(me,ee,de,xe,O,Ve),xe.side=Qu,xe.needsUpdate=!0,_.renderBufferDirect(me,ee,de,xe,O,Ve),xe.side=fl):_.renderBufferDirect(me,ee,de,xe,O,Ve),O.onAfterRender(_,ee,me,de,xe,Ve)}function nr(O,ee,me){ee.isScene!==!0&&(ee=Ye);const de=$e.get(O),xe=x.state.lights,Ve=x.state.shadowsArray,Xe=xe.state.version,it=Re.getParameters(O,xe.state,Ve,ee,me),rt=Re.getProgramCacheKey(it);let ht=de.programs;de.environment=O.isMeshStandardMaterial?ee.environment:null,de.fog=ee.fog,de.envMap=(O.isMeshStandardMaterial?dt:Qe).get(O.envMap||de.environment),ht===void 0&&(O.addEventListener("dispose",Et),ht=new Map,de.programs=ht);let nt=ht.get(rt);if(nt!==void 0){if(de.currentProgram===nt&&de.lightsStateVersion===Xe)return xn(O,it),nt}else it.uniforms=Re.getUniforms(O),O.onBuild(me,it,_),O.onBeforeCompile(it,_),nt=Re.acquireProgram(it,rt),ht.set(rt,nt),de.uniforms=it.uniforms;const jt=de.uniforms;(!O.isShaderMaterial&&!O.isRawShaderMaterial||O.clipping===!0)&&(jt.clippingPlanes=vt.uniform),xn(O,it),de.needsLights=q(O),de.lightsStateVersion=Xe,de.needsLights&&(jt.ambientLightColor.value=xe.state.ambient,jt.lightProbe.value=xe.state.probe,jt.directionalLights.value=xe.state.directional,jt.directionalLightShadows.value=xe.state.directionalShadow,jt.spotLights.value=xe.state.spot,jt.spotLightShadows.value=xe.state.spotShadow,jt.rectAreaLights.value=xe.state.rectArea,jt.ltc_1.value=xe.state.rectAreaLTC1,jt.ltc_2.value=xe.state.rectAreaLTC2,jt.pointLights.value=xe.state.point,jt.pointLightShadows.value=xe.state.pointShadow,jt.hemisphereLights.value=xe.state.hemi,jt.directionalShadowMap.value=xe.state.directionalShadowMap,jt.directionalShadowMatrix.value=xe.state.directionalShadowMatrix,jt.spotShadowMap.value=xe.state.spotShadowMap,jt.spotLightMatrix.value=xe.state.spotLightMatrix,jt.spotLightMap.value=xe.state.spotLightMap,jt.pointShadowMap.value=xe.state.pointShadowMap,jt.pointShadowMatrix.value=xe.state.pointShadowMatrix);const kt=nt.getUniforms(),Dt=gy.seqWithValue(kt.seq,jt);return de.currentProgram=nt,de.uniformsList=Dt,nt}function xn(O,ee){const me=$e.get(O);me.outputColorSpace=ee.outputColorSpace,me.instancing=ee.instancing,me.instancingColor=ee.instancingColor,me.skinning=ee.skinning,me.morphTargets=ee.morphTargets,me.morphNormals=ee.morphNormals,me.morphColors=ee.morphColors,me.morphTargetsCount=ee.morphTargetsCount,me.numClippingPlanes=ee.numClippingPlanes,me.numIntersection=ee.numClipIntersection,me.vertexAlphas=ee.vertexAlphas,me.vertexTangents=ee.vertexTangents,me.toneMapping=ee.toneMapping}function is(O,ee,me,de,xe){ee.isScene!==!0&&(ee=Ye),Be.resetTextureUnits();const Ve=ee.fog,Xe=de.isMeshStandardMaterial?ee.environment:null,it=N===null?_.outputColorSpace:N.isXRRenderTarget===!0?N.texture.colorSpace:gl,rt=(de.isMeshStandardMaterial?dt:Qe).get(de.envMap||Xe),ht=de.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,nt=!!me.attributes.tangent&&(!!de.normalMap||de.anisotropy>0),jt=!!me.morphAttributes.position,kt=!!me.morphAttributes.normal,Dt=!!me.morphAttributes.color;let nn=Zl;de.toneMapped&&(N===null||N.isXRRenderTarget===!0)&&(nn=_.toneMapping);const on=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,sn=on!==void 0?on.length:0,Vt=$e.get(de),dn=x.state.lights;if(K===!0&&(ae===!0||O!==R)){const cn=O===R&&de.id===k;vt.setState(de,O,cn)}let Yt=!1;de.version===Vt.__version?(Vt.needsLights&&Vt.lightsStateVersion!==dn.state.version||Vt.outputColorSpace!==it||xe.isInstancedMesh&&Vt.instancing===!1||!xe.isInstancedMesh&&Vt.instancing===!0||xe.isSkinnedMesh&&Vt.skinning===!1||!xe.isSkinnedMesh&&Vt.skinning===!0||xe.isInstancedMesh&&Vt.instancingColor===!0&&xe.instanceColor===null||xe.isInstancedMesh&&Vt.instancingColor===!1&&xe.instanceColor!==null||Vt.envMap!==rt||de.fog===!0&&Vt.fog!==Ve||Vt.numClippingPlanes!==void 0&&(Vt.numClippingPlanes!==vt.numPlanes||Vt.numIntersection!==vt.numIntersection)||Vt.vertexAlphas!==ht||Vt.vertexTangents!==nt||Vt.morphTargets!==jt||Vt.morphNormals!==kt||Vt.morphColors!==Dt||Vt.toneMapping!==nn||_e.isWebGL2===!0&&Vt.morphTargetsCount!==sn)&&(Yt=!0):(Yt=!0,Vt.__version=de.version);let En=Vt.currentProgram;Yt===!0&&(En=nr(de,ee,xe));let pn=!1,vn=!1,rr=!1;const Yn=En.getUniforms(),or=Vt.uniforms;if(ne.useProgram(En.program)&&(pn=!0,vn=!0,rr=!0),de.id!==k&&(k=de.id,vn=!0),pn||R!==O){if(Yn.setValue(he,"projectionMatrix",O.projectionMatrix),_e.logarithmicDepthBuffer&&Yn.setValue(he,"logDepthBufFC",2/(Math.log(O.far+1)/Math.LN2)),R!==O&&(R=O,vn=!0,rr=!0),de.isShaderMaterial||de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshStandardMaterial||de.envMap){const cn=Yn.map.cameraPosition;cn!==void 0&&cn.setValue(he,Ce.setFromMatrixPosition(O.matrixWorld))}(de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshLambertMaterial||de.isMeshBasicMaterial||de.isMeshStandardMaterial||de.isShaderMaterial)&&Yn.setValue(he,"isOrthographic",O.isOrthographicCamera===!0),(de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshLambertMaterial||de.isMeshBasicMaterial||de.isMeshStandardMaterial||de.isShaderMaterial||de.isShadowMaterial||xe.isSkinnedMesh)&&Yn.setValue(he,"viewMatrix",O.matrixWorldInverse)}if(xe.isSkinnedMesh){Yn.setOptional(he,xe,"bindMatrix"),Yn.setOptional(he,xe,"bindMatrixInverse");const cn=xe.skeleton;cn&&(_e.floatVertexTextures?(cn.boneTexture===null&&cn.computeBoneTexture(),Yn.setValue(he,"boneTexture",cn.boneTexture,Be),Yn.setValue(he,"boneTextureSize",cn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const zr=me.morphAttributes;if((zr.position!==void 0||zr.normal!==void 0||zr.color!==void 0&&_e.isWebGL2===!0)&&Ut.update(xe,me,En),(vn||Vt.receiveShadow!==xe.receiveShadow)&&(Vt.receiveShadow=xe.receiveShadow,Yn.setValue(he,"receiveShadow",xe.receiveShadow)),de.isMeshGouraudMaterial&&de.envMap!==null&&(or.envMap.value=rt,or.flipEnvMap.value=rt.isCubeTexture&&rt.isRenderTargetTexture===!1?-1:1),vn&&(Yn.setValue(he,"toneMappingExposure",_.toneMappingExposure),Vt.needsLights&&gi(or,rr),Ve&&de.fog===!0&&Je.refreshFogUniforms(or,Ve),Je.refreshMaterialUniforms(or,de,ce,ie,fe),gy.upload(he,Vt.uniformsList,or,Be)),de.isShaderMaterial&&de.uniformsNeedUpdate===!0&&(gy.upload(he,Vt.uniformsList,or,Be),de.uniformsNeedUpdate=!1),de.isSpriteMaterial&&Yn.setValue(he,"center",xe.center),Yn.setValue(he,"modelViewMatrix",xe.modelViewMatrix),Yn.setValue(he,"normalMatrix",xe.normalMatrix),Yn.setValue(he,"modelMatrix",xe.matrixWorld),de.isShaderMaterial||de.isRawShaderMaterial){const cn=de.uniformsGroups;for(let xr=0,Cn=cn.length;xr<Cn;xr++)if(_e.isWebGL2){const zn=cn[xr];et.update(zn,En),et.bind(zn,En)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return En}function gi(O,ee){O.ambientLightColor.needsUpdate=ee,O.lightProbe.needsUpdate=ee,O.directionalLights.needsUpdate=ee,O.directionalLightShadows.needsUpdate=ee,O.pointLights.needsUpdate=ee,O.pointLightShadows.needsUpdate=ee,O.spotLights.needsUpdate=ee,O.spotLightShadows.needsUpdate=ee,O.rectAreaLights.needsUpdate=ee,O.hemisphereLights.needsUpdate=ee}function q(O){return O.isMeshLambertMaterial||O.isMeshToonMaterial||O.isMeshPhongMaterial||O.isMeshStandardMaterial||O.isShadowMaterial||O.isShaderMaterial&&O.lights===!0}this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return P},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(O,ee,me){$e.get(O.texture).__webglTexture=ee,$e.get(O.depthTexture).__webglTexture=me;const de=$e.get(O);de.__hasExternalTextures=!0,de.__hasExternalTextures&&(de.__autoAllocateDepthBuffer=me===void 0,de.__autoAllocateDepthBuffer||Ae.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),de.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(O,ee){const me=$e.get(O);me.__webglFramebuffer=ee,me.__useDefaultFramebuffer=ee===void 0},this.setRenderTarget=function(O,ee=0,me=0){N=O,L=ee,P=me;let de=!0,xe=null,Ve=!1,Xe=!1;if(O){const rt=$e.get(O);rt.__useDefaultFramebuffer!==void 0?(ne.bindFramebuffer(he.FRAMEBUFFER,null),de=!1):rt.__webglFramebuffer===void 0?Be.setupRenderTarget(O):rt.__hasExternalTextures&&Be.rebindTextures(O,$e.get(O.texture).__webglTexture,$e.get(O.depthTexture).__webglTexture);const ht=O.texture;(ht.isData3DTexture||ht.isDataArrayTexture||ht.isCompressedArrayTexture)&&(Xe=!0);const nt=$e.get(O).__webglFramebuffer;O.isWebGLCubeRenderTarget?(Array.isArray(nt[ee])?xe=nt[ee][me]:xe=nt[ee],Ve=!0):_e.isWebGL2&&O.samples>0&&Be.useMultisampledRTT(O)===!1?xe=$e.get(O).__webglMultisampledFramebuffer:Array.isArray(nt)?xe=nt[me]:xe=nt,U.copy(O.viewport),F.copy(O.scissor),z=O.scissorTest}else U.copy($).multiplyScalar(ce).floor(),F.copy(oe).multiplyScalar(ce).floor(),z=D;if(ne.bindFramebuffer(he.FRAMEBUFFER,xe)&&_e.drawBuffers&&de&&ne.drawBuffers(O,xe),ne.viewport(U),ne.scissor(F),ne.setScissorTest(z),Ve){const rt=$e.get(O.texture);he.framebufferTexture2D(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,he.TEXTURE_CUBE_MAP_POSITIVE_X+ee,rt.__webglTexture,me)}else if(Xe){const rt=$e.get(O.texture),ht=ee||0;he.framebufferTextureLayer(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,rt.__webglTexture,me||0,ht)}k=-1},this.readRenderTargetPixels=function(O,ee,me,de,xe,Ve,Xe){if(!(O&&O.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let it=$e.get(O).__webglFramebuffer;if(O.isWebGLCubeRenderTarget&&Xe!==void 0&&(it=it[Xe]),it){ne.bindFramebuffer(he.FRAMEBUFFER,it);try{const rt=O.texture,ht=rt.format,nt=rt.type;if(ht!==uo&&Ct.convert(ht)!==he.getParameter(he.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const jt=nt===co&&(Ae.has("EXT_color_buffer_half_float")||_e.isWebGL2&&Ae.has("EXT_color_buffer_float"));if(nt!==Kl&&Ct.convert(nt)!==he.getParameter(he.IMPLEMENTATION_COLOR_READ_TYPE)&&!(nt===Js&&(_e.isWebGL2||Ae.has("OES_texture_float")||Ae.has("WEBGL_color_buffer_float")))&&!jt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ee>=0&&ee<=O.width-de&&me>=0&&me<=O.height-xe&&he.readPixels(ee,me,de,xe,Ct.convert(ht),Ct.convert(nt),Ve)}finally{const rt=N!==null?$e.get(N).__webglFramebuffer:null;ne.bindFramebuffer(he.FRAMEBUFFER,rt)}}},this.copyFramebufferToTexture=function(O,ee,me=0){const de=Math.pow(2,-me),xe=Math.floor(ee.image.width*de),Ve=Math.floor(ee.image.height*de);Be.setTexture2D(ee,0),he.copyTexSubImage2D(he.TEXTURE_2D,me,0,0,O.x,O.y,xe,Ve),ne.unbindTexture()},this.copyTextureToTexture=function(O,ee,me,de=0){const xe=ee.image.width,Ve=ee.image.height,Xe=Ct.convert(me.format),it=Ct.convert(me.type);Be.setTexture2D(me,0),he.pixelStorei(he.UNPACK_FLIP_Y_WEBGL,me.flipY),he.pixelStorei(he.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),he.pixelStorei(he.UNPACK_ALIGNMENT,me.unpackAlignment),ee.isDataTexture?he.texSubImage2D(he.TEXTURE_2D,de,O.x,O.y,xe,Ve,Xe,it,ee.image.data):ee.isCompressedTexture?he.compressedTexSubImage2D(he.TEXTURE_2D,de,O.x,O.y,ee.mipmaps[0].width,ee.mipmaps[0].height,Xe,ee.mipmaps[0].data):he.texSubImage2D(he.TEXTURE_2D,de,O.x,O.y,Xe,it,ee.image),de===0&&me.generateMipmaps&&he.generateMipmap(he.TEXTURE_2D),ne.unbindTexture()},this.copyTextureToTexture3D=function(O,ee,me,de,xe=0){if(_.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Ve=O.max.x-O.min.x+1,Xe=O.max.y-O.min.y+1,it=O.max.z-O.min.z+1,rt=Ct.convert(de.format),ht=Ct.convert(de.type);let nt;if(de.isData3DTexture)Be.setTexture3D(de,0),nt=he.TEXTURE_3D;else if(de.isDataArrayTexture)Be.setTexture2DArray(de,0),nt=he.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}he.pixelStorei(he.UNPACK_FLIP_Y_WEBGL,de.flipY),he.pixelStorei(he.UNPACK_PREMULTIPLY_ALPHA_WEBGL,de.premultiplyAlpha),he.pixelStorei(he.UNPACK_ALIGNMENT,de.unpackAlignment);const jt=he.getParameter(he.UNPACK_ROW_LENGTH),kt=he.getParameter(he.UNPACK_IMAGE_HEIGHT),Dt=he.getParameter(he.UNPACK_SKIP_PIXELS),nn=he.getParameter(he.UNPACK_SKIP_ROWS),on=he.getParameter(he.UNPACK_SKIP_IMAGES),sn=me.isCompressedTexture?me.mipmaps[0]:me.image;he.pixelStorei(he.UNPACK_ROW_LENGTH,sn.width),he.pixelStorei(he.UNPACK_IMAGE_HEIGHT,sn.height),he.pixelStorei(he.UNPACK_SKIP_PIXELS,O.min.x),he.pixelStorei(he.UNPACK_SKIP_ROWS,O.min.y),he.pixelStorei(he.UNPACK_SKIP_IMAGES,O.min.z),me.isDataTexture||me.isData3DTexture?he.texSubImage3D(nt,xe,ee.x,ee.y,ee.z,Ve,Xe,it,rt,ht,sn.data):me.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(nt,xe,ee.x,ee.y,ee.z,Ve,Xe,it,rt,sn.data)):he.texSubImage3D(nt,xe,ee.x,ee.y,ee.z,Ve,Xe,it,rt,ht,sn),he.pixelStorei(he.UNPACK_ROW_LENGTH,jt),he.pixelStorei(he.UNPACK_IMAGE_HEIGHT,kt),he.pixelStorei(he.UNPACK_SKIP_PIXELS,Dt),he.pixelStorei(he.UNPACK_SKIP_ROWS,nn),he.pixelStorei(he.UNPACK_SKIP_IMAGES,on),xe===0&&de.generateMipmaps&&he.generateMipmap(nt),ne.unbindTexture()},this.initTexture=function(O){O.isCubeTexture?Be.setTextureCube(O,0):O.isData3DTexture?Be.setTexture3D(O,0):O.isDataArrayTexture||O.isCompressedArrayTexture?Be.setTexture2DArray(O,0):Be.setTexture2D(O,0),ne.unbindTexture()},this.resetState=function(){L=0,P=0,N=null,ne.reset(),Se.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return jl}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Un?gh:Bb}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===gh?Un:gl}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class nR extends Zb{}nR.prototype.isWebGL1Renderer=!0;class B2{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new $t(e),this.density=t}clone(){return new B2(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class z2{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new $t(e),this.near=t,this.far=r}clone(){return new z2(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}let gg=class extends ur{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}};class H2{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=dg,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=na()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=na()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=na()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const oo=new ve;class jf{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)oo.fromBufferAttribute(this,t),oo.applyMatrix4(e),this.setXYZ(t,oo.x,oo.y,oo.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)oo.fromBufferAttribute(this,t),oo.applyNormalMatrix(e),this.setXYZ(t,oo.x,oo.y,oo.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)oo.fromBufferAttribute(this,t),oo.transformDirection(e),this.setXYZ(t,oo.x,oo.y,oo.z);return this}setX(e,t){return this.normalized&&(t=Vn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Vn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Vn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Vn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Po(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Po(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Po(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Po(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vn(t,this.array),r=Vn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vn(t,this.array),r=Vn(r,this.array),i=Vn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Vn(t,this.array),r=Vn(r,this.array),i=Vn(i,this.array),s=Vn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return new Nr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new jf(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Kb extends Ns{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new $t(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let $d;const t0=new ve,Zd=new ve,Kd=new ve,Jd=new xt,n0=new xt,rR=new Fn,cv=new ve,r0=new ve,hv=new ve,qE=new xt,Aw=new xt,XE=new xt;class iR extends ur{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",$d===void 0){$d=new kn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new H2(t,5);$d.setIndex([0,1,2,0,2,3]),$d.setAttribute("position",new jf(r,3,0,!1)),$d.setAttribute("uv",new jf(r,2,3,!1))}this.geometry=$d,this.material=e!==void 0?e:new Kb,this.center=new xt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Zd.setFromMatrixScale(this.matrixWorld),rR.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Kd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Zd.multiplyScalar(-Kd.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;fv(cv.set(-.5,-.5,0),Kd,o,Zd,i,s),fv(r0.set(.5,-.5,0),Kd,o,Zd,i,s),fv(hv.set(.5,.5,0),Kd,o,Zd,i,s),qE.set(0,0),Aw.set(1,0),XE.set(1,1);let a=e.ray.intersectTriangle(cv,r0,hv,!1,t0);if(a===null&&(fv(r0.set(-.5,.5,0),Kd,o,Zd,i,s),Aw.set(0,1),a=e.ray.intersectTriangle(cv,hv,r0,!1,t0),a===null))return;const l=e.ray.origin.distanceTo(t0);l<e.near||l>e.far||t.push({distance:l,point:t0.clone(),uv:Lo.getInterpolation(t0,cv,r0,hv,qE,Aw,XE,new xt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function fv(n,e,t,r,i,s){Jd.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(n0.x=s*Jd.x-i*Jd.y,n0.y=i*Jd.x+s*Jd.y):n0.copy(Jd),n.copy(e),n.x+=n0.x,n.y+=n0.y,n.applyMatrix4(rR)}const dv=new ve,YE=new ve;class sR extends ur{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const s=t[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let s;for(s=0;s<i.length&&!(t<i[s].distance);s++);return i.splice(s,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let s=t[r].distance;if(t[r].object.visible&&(s-=s*t[r].hysteresis),e<s)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){dv.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(dv);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){dv.setFromMatrixPosition(e.matrixWorld),YE.setFromMatrixPosition(this.matrixWorld);const r=dv.distanceTo(YE)/e.zoom;t[0].object.visible=!0;let i,s;for(i=1,s=t.length;i<s;i++){let o=t[i].distance;if(t[i].object.visible&&(o-=o*t[i].hysteresis),r>=o)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const $E=new ve,ZE=new Ar,KE=new Ar,nz=new ve,JE=new Fn,Qd=new ve,Tw=new _l,QE=new Fn,Cw=new ed;class oR extends ws{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Fn,this.bindMatrixInverse=new Fn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ru),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)Qd.fromBufferAttribute(t,r),this.applyBoneTransform(r,Qd),this.boundingBox.expandByPoint(Qd)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new _l),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)Qd.fromBufferAttribute(t,r),this.applyBoneTransform(r,Qd),this.boundingSphere.expandByPoint(Qd)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Tw.copy(this.boundingSphere),Tw.applyMatrix4(i),e.ray.intersectsSphere(Tw)!==!1&&(QE.copy(i).invert(),Cw.copy(e.ray).applyMatrix4(QE),!(this.boundingBox!==null&&Cw.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Cw)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Ar,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;ZE.fromBufferAttribute(i.attributes.skinIndex,e),KE.fromBufferAttribute(i.attributes.skinWeight,e),$E.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=KE.getComponent(s);if(o!==0){const a=ZE.getComponent(s);JE.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(nz.copy($E).applyMatrix4(JE),o)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Jb extends ur{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Fp extends Mi{constructor(e=null,t=1,r=1,i,s,o,a,l,u=Ri,c=Ri,h,d){super(null,o,a,l,u,c,i,s,h,d),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const eA=new Fn,rz=new Fn;class G2{constructor(e=[],t=[]){this.uuid=na(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Fn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new Fn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:rz;eA.multiplyMatrices(a,t[s]),eA.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new G2(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=HP(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Fp(t,e,e,uo,Js);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new Jb),this.bones.push(o),this.boneInverses.push(new Fn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,s=t.length;i<s;i++){const o=t[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class nm extends Nr{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const ep=new Fn,tA=new Fn,pv=[],nA=new ru,iz=new Fn,i0=new ws,s0=new _l;class aR extends ws{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new nm(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,iz)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ru),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,ep),nA.copy(e.boundingBox).applyMatrix4(ep),this.boundingBox.union(nA)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new _l),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,ep),s0.copy(e.boundingSphere).applyMatrix4(ep),this.boundingSphere.union(s0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(i0.geometry=this.geometry,i0.material=this.material,i0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),s0.copy(this.boundingSphere),s0.applyMatrix4(r),e.ray.intersectsSphere(s0)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,ep),tA.multiplyMatrices(r,ep),i0.matrixWorld=tA,i0.raycast(e,pv);for(let o=0,a=pv.length;o<a;o++){const l=pv[o];l.instanceId=s,l.object=this,t.push(l)}pv.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new nm(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class go extends Ns{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new $t(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const rA=new ve,iA=new ve,sA=new Fn,Lw=new ed,mv=new _l;class bh extends ur{constructor(e=new kn,t=new go){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,s=t.count;i<s;i++)rA.fromBufferAttribute(t,i-1),iA.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=rA.distanceTo(iA);e.setAttribute("lineDistance",new en(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),mv.copy(r.boundingSphere),mv.applyMatrix4(i),mv.radius+=s,e.ray.intersectsSphere(mv)===!1)return;sA.copy(i).invert(),Lw.copy(e.ray).applyMatrix4(sA);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new ve,c=new ve,h=new ve,d=new ve,m=this.isLineSegments?2:1,v=r.index,x=r.attributes.position;if(v!==null){const g=Math.max(0,o.start),S=Math.min(v.count,o.start+o.count);for(let _=g,T=S-1;_<T;_+=m){const L=v.getX(_),P=v.getX(_+1);if(u.fromBufferAttribute(x,L),c.fromBufferAttribute(x,P),Lw.distanceSqToSegment(u,c,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const k=e.ray.origin.distanceTo(d);k<e.near||k>e.far||t.push({distance:k,point:h.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),S=Math.min(x.count,o.start+o.count);for(let _=g,T=S-1;_<T;_+=m){if(u.fromBufferAttribute(x,_),c.fromBufferAttribute(x,_+1),Lw.distanceSqToSegment(u,c,d,h)>l)continue;d.applyMatrix4(this.matrixWorld);const P=e.ray.origin.distanceTo(d);P<e.near||P>e.far||t.push({distance:P,point:h.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const oA=new ve,aA=new ve;class iu extends bh{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,s=t.count;i<s;i+=2)oA.fromBufferAttribute(t,i),aA.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+oA.distanceTo(aA);e.setAttribute("lineDistance",new en(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class lR extends bh{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Qb extends Ns{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new $t(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const lA=new Fn,Q_=new ed,gv=new _l,vv=new ve;class uR extends ur{constructor(e=new kn,t=new Qb){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),gv.copy(r.boundingSphere),gv.applyMatrix4(i),gv.radius+=s,e.ray.intersectsSphere(gv)===!1)return;lA.copy(i).invert(),Q_.copy(e.ray).applyMatrix4(lA);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,h=r.attributes.position;if(u!==null){const d=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let v=d,w=m;v<w;v++){const x=u.getX(v);vv.fromBufferAttribute(h,x),uA(vv,x,l,i,e,t,this)}}else{const d=Math.max(0,o.start),m=Math.min(h.count,o.start+o.count);for(let v=d,w=m;v<w;v++)vv.fromBufferAttribute(h,v),uA(vv,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function uA(n,e,t,r,i,s,o){const a=Q_.distanceSqToPoint(n);if(a<t){const l=new ve;Q_.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class sz extends Mi{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:qr,this.magFilter=s!==void 0?s:qr,this.generateMipmaps=!1;const c=this;function h(){c.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class oz extends Mi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Ri,this.minFilter=Ri,this.generateMipmaps=!1,this.needsUpdate=!0}}class V2 extends Mi{constructor(e,t,r,i,s,o,a,l,u,c,h,d){super(null,o,a,l,u,c,i,s,h,d),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class az extends V2{constructor(e,t,r,i,s,o){super(e,t,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=Zs}}class lz extends V2{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,nu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class uz extends Mi{constructor(e,t,r,i,s,o,a,l,u){super(e,t,r,i,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}let bl=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),t.push(s),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const s=r.length;let o;t?o=t:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const c=r[i],d=r[i+1]-c,m=(o-c)/d;return(i+m)/(s-1)}getTangent(e,t){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=t||(o.isVector2?new xt:new ve);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new ve,i=[],s=[],o=[],a=new ve,l=new Fn;for(let m=0;m<=e;m++){const v=m/e;i[m]=this.getTangentAt(v,new ve)}s[0]=new ve,o[0]=new ve;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),h=Math.abs(i[0].y),d=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),h<=u&&(u=h,r.set(0,1,0)),d<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(i[m-1],i[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(bi(i[m-1].dot(i[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(i[m],s[m])}if(t===!0){let m=Math.acos(bi(s[0].dot(s[e]),-1,1));m/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],m*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};class W2 extends bl{constructor(e=0,t=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new xt,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=l-this.aX,m=u-this.aY;l=d*c-m*h+this.aX,u=d*h+m*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class cR extends W2{constructor(e,t,r,i,s,o){super(e,t,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function e3(){let n=0,e=0,t=0,r=0;function i(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,c,h){let d=(o-s)/u-(a-s)/(u+c)+(a-o)/c,m=(a-o)/c-(l-o)/(c+h)+(l-a)/h;d*=c,m*=c,i(o,a,d,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+r*a}}}const yv=new ve,Pw=new e3,Rw=new e3,kw=new e3;class hR extends bl{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new ve){const r=t,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,c;this.closed||a>0?u=i[(a-1)%s]:(yv.subVectors(i[0],i[1]).add(i[0]),u=yv);const h=i[a%s],d=i[(a+1)%s];if(this.closed||a+2<s?c=i[(a+2)%s]:(yv.subVectors(i[s-1],i[s-2]).add(i[s-1]),c=yv),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(h),m),w=Math.pow(h.distanceToSquared(d),m),x=Math.pow(d.distanceToSquared(c),m);w<1e-4&&(w=1),v<1e-4&&(v=w),x<1e-4&&(x=w),Pw.initNonuniformCatmullRom(u.x,h.x,d.x,c.x,v,w,x),Rw.initNonuniformCatmullRom(u.y,h.y,d.y,c.y,v,w,x),kw.initNonuniformCatmullRom(u.z,h.z,d.z,c.z,v,w,x)}else this.curveType==="catmullrom"&&(Pw.initCatmullRom(u.x,h.x,d.x,c.x,this.tension),Rw.initCatmullRom(u.y,h.y,d.y,c.y,this.tension),kw.initCatmullRom(u.z,h.z,d.z,c.z,this.tension));return r.set(Pw.calc(l),Rw.calc(l),kw.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new ve().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function cA(n,e,t,r,i){const s=(r-e)*.5,o=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+s+o)*l+(-3*t+3*r-2*s-o)*a+s*n+t}function cz(n,e){const t=1-n;return t*t*e}function hz(n,e){return 2*(1-n)*n*e}function fz(n,e){return n*n*e}function D0(n,e,t,r){return cz(n,e)+hz(n,t)+fz(n,r)}function dz(n,e){const t=1-n;return t*t*t*e}function pz(n,e){const t=1-n;return 3*t*t*n*e}function mz(n,e){return 3*(1-n)*n*n*e}function gz(n,e){return n*n*n*e}function O0(n,e,t,r,i){return dz(n,e)+pz(n,t)+mz(n,r)+gz(n,i)}class t3 extends bl{constructor(e=new xt,t=new xt,r=new xt,i=new xt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new xt){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(O0(e,i.x,s.x,o.x,a.x),O0(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class fR extends bl{constructor(e=new ve,t=new ve,r=new ve,i=new ve){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new ve){const r=t,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set(O0(e,i.x,s.x,o.x,a.x),O0(e,i.y,s.y,o.y,a.y),O0(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class j2 extends bl{constructor(e=new xt,t=new xt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new xt){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new xt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class dR extends bl{constructor(e=new ve,t=new ve){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ve){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ve){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class n3 extends bl{constructor(e=new xt,t=new xt,r=new xt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new xt){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(D0(e,i.x,s.x,o.x),D0(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class r3 extends bl{constructor(e=new ve,t=new ve,r=new ve){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ve){const r=t,i=this.v0,s=this.v1,o=this.v2;return r.set(D0(e,i.x,s.x,o.x),D0(e,i.y,s.y,o.y),D0(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class i3 extends bl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new xt){const r=t,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],c=i[o>i.length-2?i.length-1:o+1],h=i[o>i.length-3?i.length-1:o+2];return r.set(cA(a,l.x,u.x,c.x,h.x),cA(a,l.y,u.y,c.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new xt().fromArray(i))}return this}}var s3=Object.freeze({__proto__:null,ArcCurve:cR,CatmullRomCurve3:hR,CubicBezierCurve:t3,CubicBezierCurve3:fR,EllipseCurve:W2,LineCurve:j2,LineCurve3:dR,QuadraticBezierCurve:n3,QuadraticBezierCurve3:r3,SplineCurve:i3});class pR extends bl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new j2(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new s3[i.type]().fromJSON(i))}return this}}let vg=class extends pR{constructor(e){super(),this.type="Path",this.currentPoint=new xt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new j2(this.currentPoint.clone(),new xt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const s=new n3(this.currentPoint.clone(),new xt(e,t),new xt(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,s,o){const a=new t3(this.currentPoint.clone(),new xt(e,t),new xt(r,i),new xt(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new i3(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,s,o),this}absarc(e,t,r,i,s,o){return this.absellipse(e,t,r,r,i,s,o),this}ellipse(e,t,r,i,s,o,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,r,i,s,o,a,l),this}absellipse(e,t,r,i,s,o,a,l){const u=new W2(e,t,r,i,s,o,a,l);if(this.curves.length>0){const h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class qg extends kn{constructor(e=[new xt(0,-.5),new xt(.5,0),new xt(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=bi(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],c=1/t,h=new ve,d=new xt,m=new ve,v=new ve,w=new ve;let x=0,g=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:x=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,m.x=g*1,m.y=-x,m.z=g*0,w.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(w.x,w.y,w.z);break;default:x=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,m.x=g*1,m.y=-x,m.z=g*0,v.copy(m),m.x+=w.x,m.y+=w.y,m.z+=w.z,m.normalize(),l.push(m.x,m.y,m.z),w.copy(v)}for(let S=0;S<=t;S++){const _=r+S*c*i,T=Math.sin(_),L=Math.cos(_);for(let P=0;P<=e.length-1;P++){h.x=e[P].x*T,h.y=e[P].y,h.z=e[P].x*L,o.push(h.x,h.y,h.z),d.x=S/t,d.y=P/(e.length-1),a.push(d.x,d.y);const N=l[3*P+0]*T,k=l[3*P+1],R=l[3*P+0]*L;u.push(N,k,R)}}for(let S=0;S<t;S++)for(let _=0;_<e.length-1;_++){const T=_+S*e.length,L=T,P=T+e.length,N=T+e.length+1,k=T+1;s.push(L,P,k),s.push(N,k,P)}this.setIndex(s),this.setAttribute("position",new en(o,3)),this.setAttribute("uv",new en(a,2)),this.setAttribute("normal",new en(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qg(e.points,e.segments,e.phiStart,e.phiLength)}}class q2 extends qg{constructor(e=1,t=1,r=4,i=8){const s=new vg;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new q2(e.radius,e.length,e.capSegments,e.radialSegments)}}class X2 extends kn{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new ve,c=new xt;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,d=3;h<=t;h++,d+=3){const m=r+h/t*i;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[d]/e+1)/2,c.y=(o[d+1]/e+1)/2,l.push(c.x,c.y)}for(let h=1;h<=t;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new en(o,3)),this.setAttribute("normal",new en(a,3)),this.setAttribute("uv",new en(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new X2(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class mm extends kn{constructor(e=1,t=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const c=[],h=[],d=[],m=[];let v=0;const w=[],x=r/2;let g=0;S(),o===!1&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(c),this.setAttribute("position",new en(h,3)),this.setAttribute("normal",new en(d,3)),this.setAttribute("uv",new en(m,2));function S(){const T=new ve,L=new ve;let P=0;const N=(t-e)/r;for(let k=0;k<=s;k++){const R=[],U=k/s,F=U*(t-e)+e;for(let z=0;z<=i;z++){const V=z/i,G=V*l+a,J=Math.sin(G),ie=Math.cos(G);L.x=F*J,L.y=-U*r+x,L.z=F*ie,h.push(L.x,L.y,L.z),T.set(J,N,ie).normalize(),d.push(T.x,T.y,T.z),m.push(V,1-U),R.push(v++)}w.push(R)}for(let k=0;k<i;k++)for(let R=0;R<s;R++){const U=w[R][k],F=w[R+1][k],z=w[R+1][k+1],V=w[R][k+1];c.push(U,F,V),c.push(F,z,V),P+=6}u.addGroup(g,P,0),g+=P}function _(T){const L=v,P=new xt,N=new ve;let k=0;const R=T===!0?e:t,U=T===!0?1:-1;for(let z=1;z<=i;z++)h.push(0,x*U,0),d.push(0,U,0),m.push(.5,.5),v++;const F=v;for(let z=0;z<=i;z++){const G=z/i*l+a,J=Math.cos(G),ie=Math.sin(G);N.x=R*ie,N.y=x*U,N.z=R*J,h.push(N.x,N.y,N.z),d.push(0,U,0),P.x=J*.5+.5,P.y=ie*.5*U+.5,m.push(P.x,P.y),v++}for(let z=0;z<i;z++){const V=L+z,G=F+z;T===!0?c.push(G,G+1,V):c.push(G+1,G,V),k+=3}u.addGroup(g,k,T===!0?1:2),g+=k}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Y2 extends mm{constructor(e=1,t=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Y2(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Nh extends kn{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const s=[],o=[];a(i),u(r),c(),this.setAttribute("position",new en(s,3)),this.setAttribute("normal",new en(s.slice(),3)),this.setAttribute("uv",new en(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const _=new ve,T=new ve,L=new ve;for(let P=0;P<t.length;P+=3)m(t[P+0],_),m(t[P+1],T),m(t[P+2],L),l(_,T,L,S)}function l(S,_,T,L){const P=L+1,N=[];for(let k=0;k<=P;k++){N[k]=[];const R=S.clone().lerp(T,k/P),U=_.clone().lerp(T,k/P),F=P-k;for(let z=0;z<=F;z++)z===0&&k===P?N[k][z]=R:N[k][z]=R.clone().lerp(U,z/F)}for(let k=0;k<P;k++)for(let R=0;R<2*(P-k)-1;R++){const U=Math.floor(R/2);R%2===0?(d(N[k][U+1]),d(N[k+1][U]),d(N[k][U])):(d(N[k][U+1]),d(N[k+1][U+1]),d(N[k+1][U]))}}function u(S){const _=new ve;for(let T=0;T<s.length;T+=3)_.x=s[T+0],_.y=s[T+1],_.z=s[T+2],_.normalize().multiplyScalar(S),s[T+0]=_.x,s[T+1]=_.y,s[T+2]=_.z}function c(){const S=new ve;for(let _=0;_<s.length;_+=3){S.x=s[_+0],S.y=s[_+1],S.z=s[_+2];const T=x(S)/2/Math.PI+.5,L=g(S)/Math.PI+.5;o.push(T,1-L)}v(),h()}function h(){for(let S=0;S<o.length;S+=6){const _=o[S+0],T=o[S+2],L=o[S+4],P=Math.max(_,T,L),N=Math.min(_,T,L);P>.9&&N<.1&&(_<.2&&(o[S+0]+=1),T<.2&&(o[S+2]+=1),L<.2&&(o[S+4]+=1))}}function d(S){s.push(S.x,S.y,S.z)}function m(S,_){const T=S*3;_.x=e[T+0],_.y=e[T+1],_.z=e[T+2]}function v(){const S=new ve,_=new ve,T=new ve,L=new ve,P=new xt,N=new xt,k=new xt;for(let R=0,U=0;R<s.length;R+=9,U+=6){S.set(s[R+0],s[R+1],s[R+2]),_.set(s[R+3],s[R+4],s[R+5]),T.set(s[R+6],s[R+7],s[R+8]),P.set(o[U+0],o[U+1]),N.set(o[U+2],o[U+3]),k.set(o[U+4],o[U+5]),L.copy(S).add(_).add(T).divideScalar(3);const F=x(L);w(P,U+0,S,F),w(N,U+2,_,F),w(k,U+4,T,F)}}function w(S,_,T,L){L<0&&S.x===1&&(o[_]=S.x-1),T.x===0&&T.z===0&&(o[_]=L/2/Math.PI+.5)}function x(S){return Math.atan2(S.z,-S.x)}function g(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nh(e.vertices,e.indices,e.radius,e.details)}}class $2 extends Nh{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new $2(e.radius,e.detail)}}const xv=new ve,wv=new ve,Nw=new ve,Sv=new Lo;class o3 extends kn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),s=Math.cos(Df*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],c=["a","b","c"],h=new Array(3),d={},m=[];for(let v=0;v<l;v+=3){o?(u[0]=o.getX(v),u[1]=o.getX(v+1),u[2]=o.getX(v+2)):(u[0]=v,u[1]=v+1,u[2]=v+2);const{a:w,b:x,c:g}=Sv;if(w.fromBufferAttribute(a,u[0]),x.fromBufferAttribute(a,u[1]),g.fromBufferAttribute(a,u[2]),Sv.getNormal(Nw),h[0]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,h[1]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,h[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let S=0;S<3;S++){const _=(S+1)%3,T=h[S],L=h[_],P=Sv[c[S]],N=Sv[c[_]],k=`${T}_${L}`,R=`${L}_${T}`;R in d&&d[R]?(Nw.dot(d[R].normal)<=s&&(m.push(P.x,P.y,P.z),m.push(N.x,N.y,N.z)),d[R]=null):k in d||(d[k]={index0:u[S],index1:u[_],normal:Nw.clone()})}}for(const v in d)if(d[v]){const{index0:w,index1:x}=d[v];xv.fromBufferAttribute(a,w),wv.fromBufferAttribute(a,x),m.push(xv.x,xv.y,xv.z),m.push(wv.x,wv.y,wv.z)}this.setAttribute("position",new en(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let Ff=class extends vg{constructor(e){super(e),this.uuid=na(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new vg().fromJSON(i))}return this}};const vz={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let s=mR(n,0,i,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,c,h,d,m;if(r&&(s=_z(n,e,s,t)),n.length>80*t){a=u=n[0],l=c=n[1];for(let v=t;v<i;v+=t)h=n[v],d=n[v+1],h<a&&(a=h),d<l&&(l=d),h>u&&(u=h),d>c&&(c=d);m=Math.max(u-a,c-l),m=m!==0?32767/m:0}return yg(s,o,t,a,l,m,0),o}};function mR(n,e,t,r,i){let s,o;if(i===Nz(n,e,t,r)>0)for(s=e;s<t;s+=r)o=hA(s,n[s],n[s+1],o);else for(s=t-r;s>=e;s-=r)o=hA(s,n[s],n[s+1],o);return o&&Z2(o,o.next)&&(wg(o),o=o.next),o}function qf(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(Z2(t,t.next)||fi(t.prev,t,t.next)===0)){if(wg(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function yg(n,e,t,r,i,s,o){if(!n)return;!o&&s&&Tz(n,r,i,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?xz(n,r,i,s):yz(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),wg(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=wz(qf(n),e,t),yg(n,e,t,r,i,s,2)):o===2&&Sz(n,e,t,r,i,s):yg(qf(n),e,t,r,i,s,1);break}}}function yz(n){const e=n.prev,t=n,r=n.next;if(fi(e,t,r)>=0)return!1;const i=e.x,s=t.x,o=r.x,a=e.y,l=t.y,u=r.y,c=i<s?i<o?i:o:s<o?s:o,h=a<l?a<u?a:u:l<u?l:u,d=i>s?i>o?i:o:s>o?s:o,m=a>l?a>u?a:u:l>u?l:u;let v=r.next;for(;v!==e;){if(v.x>=c&&v.x<=d&&v.y>=h&&v.y<=m&&Lp(i,a,s,l,o,u,v.x,v.y)&&fi(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function xz(n,e,t,r){const i=n.prev,s=n,o=n.next;if(fi(i,s,o)>=0)return!1;const a=i.x,l=s.x,u=o.x,c=i.y,h=s.y,d=o.y,m=a<l?a<u?a:u:l<u?l:u,v=c<h?c<d?c:d:h<d?h:d,w=a>l?a>u?a:u:l>u?l:u,x=c>h?c>d?c:d:h>d?h:d,g=e5(m,v,e,t,r),S=e5(w,x,e,t,r);let _=n.prevZ,T=n.nextZ;for(;_&&_.z>=g&&T&&T.z<=S;){if(_.x>=m&&_.x<=w&&_.y>=v&&_.y<=x&&_!==i&&_!==o&&Lp(a,c,l,h,u,d,_.x,_.y)&&fi(_.prev,_,_.next)>=0||(_=_.prevZ,T.x>=m&&T.x<=w&&T.y>=v&&T.y<=x&&T!==i&&T!==o&&Lp(a,c,l,h,u,d,T.x,T.y)&&fi(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;_&&_.z>=g;){if(_.x>=m&&_.x<=w&&_.y>=v&&_.y<=x&&_!==i&&_!==o&&Lp(a,c,l,h,u,d,_.x,_.y)&&fi(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;T&&T.z<=S;){if(T.x>=m&&T.x<=w&&T.y>=v&&T.y<=x&&T!==i&&T!==o&&Lp(a,c,l,h,u,d,T.x,T.y)&&fi(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function wz(n,e,t){let r=n;do{const i=r.prev,s=r.next.next;!Z2(i,s)&&gR(i,r,r.next,s)&&xg(i,s)&&xg(s,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(s.i/t|0),wg(r),wg(r.next),r=n=s),r=r.next}while(r!==n);return qf(r)}function Sz(n,e,t,r,i,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Pz(o,a)){let l=vR(o,a);o=qf(o,o.next),l=qf(l,l.next),yg(o,e,t,r,i,s,0),yg(l,e,t,r,i,s,0);return}a=a.next}o=o.next}while(o!==n)}function _z(n,e,t,r){const i=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:n.length,u=mR(n,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(Lz(u));for(i.sort(bz),s=0;s<i.length;s++)t=Mz(i[s],t);return t}function bz(n,e){return n.x-e.x}function Mz(n,e){const t=Ez(n,e);if(!t)return e;const r=vR(t,n);return qf(r,r.next),qf(t,t.next)}function Ez(n,e){let t=e,r=-1/0,i;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const d=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(d<=s&&d>r&&(r=d,i=t.x<t.next.x?t:t.next,d===s))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,u=i.y;let c=1/0,h;t=i;do s>=t.x&&t.x>=l&&s!==t.x&&Lp(o<u?s:r,o,l,u,o<u?r:s,o,t.x,t.y)&&(h=Math.abs(o-t.y)/(s-t.x),xg(t,n)&&(h<c||h===c&&(t.x>i.x||t.x===i.x&&Az(i,t)))&&(i=t,c=h)),t=t.next;while(t!==a);return i}function Az(n,e){return fi(n.prev,n,e.prev)<0&&fi(e.next,n,n.next)<0}function Tz(n,e,t,r){let i=n;do i.z===0&&(i.z=e5(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,Cz(i)}function Cz(n){let e,t,r,i,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:n=i,i.prevZ=s,s=i;t=r}s.nextZ=null,u*=2}while(o>1);return n}function e5(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function Lz(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Lp(n,e,t,r,i,s,o,a){return(i-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(r-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(i-o)*(r-a)}function Pz(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Rz(n,e)&&(xg(n,e)&&xg(e,n)&&kz(n,e)&&(fi(n.prev,n,e.prev)||fi(n,e.prev,e))||Z2(n,e)&&fi(n.prev,n,n.next)>0&&fi(e.prev,e,e.next)>0)}function fi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Z2(n,e){return n.x===e.x&&n.y===e.y}function gR(n,e,t,r){const i=bv(fi(n,e,t)),s=bv(fi(n,e,r)),o=bv(fi(t,r,n)),a=bv(fi(t,r,e));return!!(i!==s&&o!==a||i===0&&_v(n,t,e)||s===0&&_v(n,r,e)||o===0&&_v(t,n,r)||a===0&&_v(t,e,r))}function _v(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function bv(n){return n>0?1:n<0?-1:0}function Rz(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&gR(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function xg(n,e){return fi(n.prev,n,n.next)<0?fi(n,e,n.next)>=0&&fi(n,n.prev,e)>=0:fi(n,e,n.prev)<0||fi(n,n.next,e)<0}function kz(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&i<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function vR(n,e){const t=new t5(n.i,n.x,n.y),r=new t5(e.i,e.x,e.y),i=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,s.next=r,r.prev=s,r}function hA(n,e,t,r){const i=new t5(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function wg(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function t5(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Nz(n,e,t,r){let i=0;for(let s=e,o=t-r;s<t;s+=r)i+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return i}class Ql{static area(e){const t=e.length;let r=0;for(let i=t-1,s=0;s<t;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return Ql.area(e)<0}static triangulateShape(e,t){const r=[],i=[],s=[];fA(e),dA(r,e);let o=e.length;t.forEach(fA);for(let l=0;l<t.length;l++)i.push(o),o+=t[l].length,dA(r,t[l]);const a=vz.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function fA(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function dA(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class K2 extends kn{constructor(e=new Ff([new xt(.5,.5),new xt(-.5,.5),new xt(-.5,-.5),new xt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new en(i,3)),this.setAttribute("uv",new en(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let d=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,w=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:Iz;let _,T=!1,L,P,N,k;g&&(_=g.getSpacedPoints(c),T=!0,d=!1,L=g.computeFrenetFrames(c,!1),P=new ve,N=new ve,k=new ve),d||(x=0,m=0,v=0,w=0);const R=a.extractPoints(u);let U=R.shape;const F=R.holes;if(!Ql.isClockWise(U)){U=U.reverse();for(let he=0,Oe=F.length;he<Oe;he++){const Ae=F[he];Ql.isClockWise(Ae)&&(F[he]=Ae.reverse())}}const V=Ql.triangulateShape(U,F),G=U;for(let he=0,Oe=F.length;he<Oe;he++){const Ae=F[he];U=U.concat(Ae)}function J(he,Oe,Ae){return Oe||console.error("THREE.ExtrudeGeometry: vec does not exist"),he.clone().addScaledVector(Oe,Ae)}const ie=U.length,ce=V.length;function W(he,Oe,Ae){let _e,ne,ut;const $e=he.x-Oe.x,Be=he.y-Oe.y,Qe=Ae.x-he.x,dt=Ae.y-he.y,mt=$e*$e+Be*Be,ue=$e*dt-Be*Qe;if(Math.abs(ue)>Number.EPSILON){const Q=Math.sqrt(mt),Re=Math.sqrt(Qe*Qe+dt*dt),Je=Oe.x-Be/Q,Ze=Oe.y+$e/Q,ct=Ae.x-dt/Re,vt=Ae.y+Qe/Re,ot=((ct-Je)*dt-(vt-Ze)*Qe)/($e*dt-Be*Qe);_e=Je+$e*ot-he.x,ne=Ze+Be*ot-he.y;const Le=_e*_e+ne*ne;if(Le<=2)return new xt(_e,ne);ut=Math.sqrt(Le/2)}else{let Q=!1;$e>Number.EPSILON?Qe>Number.EPSILON&&(Q=!0):$e<-Number.EPSILON?Qe<-Number.EPSILON&&(Q=!0):Math.sign(Be)===Math.sign(dt)&&(Q=!0),Q?(_e=-Be,ne=$e,ut=Math.sqrt(mt)):(_e=$e,ne=Be,ut=Math.sqrt(mt/2))}return new xt(_e/ut,ne/ut)}const Y=[];for(let he=0,Oe=G.length,Ae=Oe-1,_e=he+1;he<Oe;he++,Ae++,_e++)Ae===Oe&&(Ae=0),_e===Oe&&(_e=0),Y[he]=W(G[he],G[Ae],G[_e]);const $=[];let oe,D=Y.concat();for(let he=0,Oe=F.length;he<Oe;he++){const Ae=F[he];oe=[];for(let _e=0,ne=Ae.length,ut=ne-1,$e=_e+1;_e<ne;_e++,ut++,$e++)ut===ne&&(ut=0),$e===ne&&($e=0),oe[_e]=W(Ae[_e],Ae[ut],Ae[$e]);$.push(oe),D=D.concat(oe)}for(let he=0;he<x;he++){const Oe=he/x,Ae=m*Math.cos(Oe*Math.PI/2),_e=v*Math.sin(Oe*Math.PI/2)+w;for(let ne=0,ut=G.length;ne<ut;ne++){const $e=J(G[ne],Y[ne],_e);we($e.x,$e.y,-Ae)}for(let ne=0,ut=F.length;ne<ut;ne++){const $e=F[ne];oe=$[ne];for(let Be=0,Qe=$e.length;Be<Qe;Be++){const dt=J($e[Be],oe[Be],_e);we(dt.x,dt.y,-Ae)}}}const j=v+w;for(let he=0;he<ie;he++){const Oe=d?J(U[he],D[he],j):U[he];T?(N.copy(L.normals[0]).multiplyScalar(Oe.x),P.copy(L.binormals[0]).multiplyScalar(Oe.y),k.copy(_[0]).add(N).add(P),we(k.x,k.y,k.z)):we(Oe.x,Oe.y,0)}for(let he=1;he<=c;he++)for(let Oe=0;Oe<ie;Oe++){const Ae=d?J(U[Oe],D[Oe],j):U[Oe];T?(N.copy(L.normals[he]).multiplyScalar(Ae.x),P.copy(L.binormals[he]).multiplyScalar(Ae.y),k.copy(_[he]).add(N).add(P),we(k.x,k.y,k.z)):we(Ae.x,Ae.y,h/c*he)}for(let he=x-1;he>=0;he--){const Oe=he/x,Ae=m*Math.cos(Oe*Math.PI/2),_e=v*Math.sin(Oe*Math.PI/2)+w;for(let ne=0,ut=G.length;ne<ut;ne++){const $e=J(G[ne],Y[ne],_e);we($e.x,$e.y,h+Ae)}for(let ne=0,ut=F.length;ne<ut;ne++){const $e=F[ne];oe=$[ne];for(let Be=0,Qe=$e.length;Be<Qe;Be++){const dt=J($e[Be],oe[Be],_e);T?we(dt.x,dt.y+_[c-1].y,_[c-1].x+Ae):we(dt.x,dt.y,h+Ae)}}}K(),ae();function K(){const he=i.length/3;if(d){let Oe=0,Ae=ie*Oe;for(let _e=0;_e<ce;_e++){const ne=V[_e];Ee(ne[2]+Ae,ne[1]+Ae,ne[0]+Ae)}Oe=c+x*2,Ae=ie*Oe;for(let _e=0;_e<ce;_e++){const ne=V[_e];Ee(ne[0]+Ae,ne[1]+Ae,ne[2]+Ae)}}else{for(let Oe=0;Oe<ce;Oe++){const Ae=V[Oe];Ee(Ae[2],Ae[1],Ae[0])}for(let Oe=0;Oe<ce;Oe++){const Ae=V[Oe];Ee(Ae[0]+ie*c,Ae[1]+ie*c,Ae[2]+ie*c)}}r.addGroup(he,i.length/3-he,0)}function ae(){const he=i.length/3;let Oe=0;fe(G,Oe),Oe+=G.length;for(let Ae=0,_e=F.length;Ae<_e;Ae++){const ne=F[Ae];fe(ne,Oe),Oe+=ne.length}r.addGroup(he,i.length/3-he,1)}function fe(he,Oe){let Ae=he.length;for(;--Ae>=0;){const _e=Ae;let ne=Ae-1;ne<0&&(ne=he.length-1);for(let ut=0,$e=c+x*2;ut<$e;ut++){const Be=ie*ut,Qe=ie*(ut+1),dt=Oe+_e+Be,mt=Oe+ne+Be,ue=Oe+ne+Qe,Q=Oe+_e+Qe;Ce(dt,mt,ue,Q)}}}function we(he,Oe,Ae){l.push(he),l.push(Oe),l.push(Ae)}function Ee(he,Oe,Ae){Ye(he),Ye(Oe),Ye(Ae);const _e=i.length/3,ne=S.generateTopUV(r,i,_e-3,_e-2,_e-1);Ne(ne[0]),Ne(ne[1]),Ne(ne[2])}function Ce(he,Oe,Ae,_e){Ye(he),Ye(Oe),Ye(_e),Ye(Oe),Ye(Ae),Ye(_e);const ne=i.length/3,ut=S.generateSideWallUV(r,i,ne-6,ne-3,ne-2,ne-1);Ne(ut[0]),Ne(ut[1]),Ne(ut[3]),Ne(ut[1]),Ne(ut[2]),Ne(ut[3])}function Ye(he){i.push(l[he*3+0]),i.push(l[he*3+1]),i.push(l[he*3+2])}function Ne(he){s.push(he.x),s.push(he.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return Dz(t,r,e)}static fromJSON(e,t){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new s3[i.type]().fromJSON(i)),new K2(r,e.options)}}const Iz={generateTopUV:function(n,e,t,r,i){const s=e[t*3],o=e[t*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new xt(s,o),new xt(a,l),new xt(u,c)]},generateSideWallUV:function(n,e,t,r,i,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[r*3],c=e[r*3+1],h=e[r*3+2],d=e[i*3],m=e[i*3+1],v=e[i*3+2],w=e[s*3],x=e[s*3+1],g=e[s*3+2];return Math.abs(a-c)<Math.abs(o-u)?[new xt(o,1-l),new xt(u,1-h),new xt(d,1-v),new xt(w,1-g)]:[new xt(a,1-l),new xt(c,1-h),new xt(m,1-v),new xt(x,1-g)]}};function Dz(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const s=n[r];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Xg extends Nh{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Xg(e.radius,e.detail)}}class Yg extends Nh{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Yg(e.radius,e.detail)}}class J2 extends kn{constructor(e=.5,t=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],c=[];let h=e;const d=(t-e)/i,m=new ve,v=new xt;for(let w=0;w<=i;w++){for(let x=0;x<=r;x++){const g=s+x/r*o;m.x=h*Math.cos(g),m.y=h*Math.sin(g),l.push(m.x,m.y,m.z),u.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,c.push(v.x,v.y)}h+=d}for(let w=0;w<i;w++){const x=w*(r+1);for(let g=0;g<r;g++){const S=g+x,_=S,T=S+r+1,L=S+r+2,P=S+1;a.push(_,T,P),a.push(T,L,P)}}this.setIndex(a),this.setAttribute("position",new en(l,3)),this.setAttribute("normal",new en(u,3)),this.setAttribute("uv",new en(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new J2(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Q2 extends kn{constructor(e=new Ff([new xt(0,.5),new xt(-.5,-.5),new xt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new en(i,3)),this.setAttribute("normal",new en(s,3)),this.setAttribute("uv",new en(o,2));function u(c){const h=i.length/3,d=c.extractPoints(t);let m=d.shape;const v=d.holes;Ql.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,g=v.length;x<g;x++){const S=v[x];Ql.isClockWise(S)===!0&&(v[x]=S.reverse())}const w=Ql.triangulateShape(m,v);for(let x=0,g=v.length;x<g;x++){const S=v[x];m=m.concat(S)}for(let x=0,g=m.length;x<g;x++){const S=m[x];i.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let x=0,g=w.length;x<g;x++){const S=w[x],_=S[0]+h,T=S[1]+h,L=S[2]+h;r.push(_,T,L),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Oz(t,e)}static fromJSON(e,t){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=t[e.shapes[i]];r.push(o)}return new Q2(r,e.curveSegments)}}function Oz(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class $g extends kn{constructor(e=1,t=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const c=[],h=new ve,d=new ve,m=[],v=[],w=[],x=[];for(let g=0;g<=r;g++){const S=[],_=g/r;let T=0;g===0&&o===0?T=.5/t:g===r&&l===Math.PI&&(T=-.5/t);for(let L=0;L<=t;L++){const P=L/t;h.x=-e*Math.cos(i+P*s)*Math.sin(o+_*a),h.y=e*Math.cos(o+_*a),h.z=e*Math.sin(i+P*s)*Math.sin(o+_*a),v.push(h.x,h.y,h.z),d.copy(h).normalize(),w.push(d.x,d.y,d.z),x.push(P+T,1-_),S.push(u++)}c.push(S)}for(let g=0;g<r;g++)for(let S=0;S<t;S++){const _=c[g][S+1],T=c[g][S],L=c[g+1][S],P=c[g+1][S+1];(g!==0||o>0)&&m.push(_,T,P),(g!==r-1||l<Math.PI)&&m.push(T,L,P)}this.setIndex(m),this.setAttribute("position",new en(v,3)),this.setAttribute("normal",new en(w,3)),this.setAttribute("uv",new en(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new $g(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class ex extends Nh{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new ex(e.radius,e.detail)}}class tx extends kn{constructor(e=1,t=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],c=new ve,h=new ve,d=new ve;for(let m=0;m<=r;m++)for(let v=0;v<=i;v++){const w=v/i*s,x=m/r*Math.PI*2;h.x=(e+t*Math.cos(x))*Math.cos(w),h.y=(e+t*Math.cos(x))*Math.sin(w),h.z=t*Math.sin(x),a.push(h.x,h.y,h.z),c.x=e*Math.cos(w),c.y=e*Math.sin(w),d.subVectors(h,c).normalize(),l.push(d.x,d.y,d.z),u.push(v/i),u.push(m/r)}for(let m=1;m<=r;m++)for(let v=1;v<=i;v++){const w=(i+1)*m+v-1,x=(i+1)*(m-1)+v-1,g=(i+1)*(m-1)+v,S=(i+1)*m+v;o.push(w,x,S),o.push(x,g,S)}this.setIndex(o),this.setAttribute("position",new en(a,3)),this.setAttribute("normal",new en(l,3)),this.setAttribute("uv",new en(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tx(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class nx extends kn{constructor(e=1,t=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],c=[],h=new ve,d=new ve,m=new ve,v=new ve,w=new ve,x=new ve,g=new ve;for(let _=0;_<=r;++_){const T=_/r*s*Math.PI*2;S(T,s,o,e,m),S(T+.01,s,o,e,v),x.subVectors(v,m),g.addVectors(v,m),w.crossVectors(x,g),g.crossVectors(w,x),w.normalize(),g.normalize();for(let L=0;L<=i;++L){const P=L/i*Math.PI*2,N=-t*Math.cos(P),k=t*Math.sin(P);h.x=m.x+(N*g.x+k*w.x),h.y=m.y+(N*g.y+k*w.y),h.z=m.z+(N*g.z+k*w.z),l.push(h.x,h.y,h.z),d.subVectors(h,m).normalize(),u.push(d.x,d.y,d.z),c.push(_/r),c.push(L/i)}}for(let _=1;_<=r;_++)for(let T=1;T<=i;T++){const L=(i+1)*(_-1)+(T-1),P=(i+1)*_+(T-1),N=(i+1)*_+T,k=(i+1)*(_-1)+T;a.push(L,P,k),a.push(P,N,k)}this.setIndex(a),this.setAttribute("position",new en(l,3)),this.setAttribute("normal",new en(u,3)),this.setAttribute("uv",new en(c,2));function S(_,T,L,P,N){const k=Math.cos(_),R=Math.sin(_),U=L/T*_,F=Math.cos(U);N.x=P*(2+F)*.5*k,N.y=P*(2+F)*R*.5,N.z=P*Math.sin(U)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nx(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class rx extends kn{constructor(e=new r3(new ve(-1,-1,0),new ve(-1,1,0),new ve(1,1,0)),t=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new ve,l=new ve,u=new xt;let c=new ve;const h=[],d=[],m=[],v=[];w(),this.setIndex(v),this.setAttribute("position",new en(h,3)),this.setAttribute("normal",new en(d,3)),this.setAttribute("uv",new en(m,2));function w(){for(let _=0;_<t;_++)x(_);x(s===!1?t:0),S(),g()}function x(_){c=e.getPointAt(_/t,c);const T=o.normals[_],L=o.binormals[_];for(let P=0;P<=i;P++){const N=P/i*Math.PI*2,k=Math.sin(N),R=-Math.cos(N);l.x=R*T.x+k*L.x,l.y=R*T.y+k*L.y,l.z=R*T.z+k*L.z,l.normalize(),d.push(l.x,l.y,l.z),a.x=c.x+r*l.x,a.y=c.y+r*l.y,a.z=c.z+r*l.z,h.push(a.x,a.y,a.z)}}function g(){for(let _=1;_<=t;_++)for(let T=1;T<=i;T++){const L=(i+1)*(_-1)+(T-1),P=(i+1)*_+(T-1),N=(i+1)*_+T,k=(i+1)*(_-1)+T;v.push(L,P,k),v.push(P,N,k)}}function S(){for(let _=0;_<=t;_++)for(let T=0;T<=i;T++)u.x=_/t,u.y=T/i,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new rx(new s3[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class yR extends kn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new ve,s=new ve;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const h=l[u],d=h.start,m=h.count;for(let v=d,w=d+m;v<w;v+=3)for(let x=0;x<3;x++){const g=a.getX(v+x),S=a.getX(v+(x+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,S),pA(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,h=3*a+(u+1)%3;i.fromBufferAttribute(o,c),s.fromBufferAttribute(o,h),pA(i,s,r)===!0&&(t.push(i.x,i.y,i.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new en(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function pA(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var mA=Object.freeze({__proto__:null,BoxGeometry:td,CapsuleGeometry:q2,CircleGeometry:X2,ConeGeometry:Y2,CylinderGeometry:mm,DodecahedronGeometry:$2,EdgesGeometry:o3,ExtrudeGeometry:K2,IcosahedronGeometry:Xg,LatheGeometry:qg,OctahedronGeometry:Yg,PlaneGeometry:jg,PolyhedronGeometry:Nh,RingGeometry:J2,ShapeGeometry:Q2,SphereGeometry:$g,TetrahedronGeometry:ex,TorusGeometry:tx,TorusKnotGeometry:nx,TubeGeometry:rx,WireframeGeometry:yR});class xR extends Ns{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new $t(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class wR extends yl{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class a3 extends Ns{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new $t(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rh,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class SR extends a3{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new xt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return bi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new $t(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new $t(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new $t(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class _R extends Ns{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new $t(16777215),this.specular=new $t(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rh,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Hg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bR extends Ns{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new $t(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rh,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class MR extends Ns{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rh,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class ER extends Ns{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new $t(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new $t(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rh,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Hg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class AR extends Ns{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new $t(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rh,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class TR extends go{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Pa(n,e,t){return l3(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Lf(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function l3(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function CR(n){function e(i,s){return n[i]-n[s]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function n5(n,e,t){const r=n.length,i=new n.constructor(r);for(let s=0,o=0;o!==r;++s){const a=t[s]*e;for(let l=0;l!==e;++l)i[o++]=n[a+l]}return i}function u3(n,e,t,r){let i=1,s=n[0];for(;s!==void 0&&s[r]===void 0;)s=n[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),t.push(o)),s=n[i++];while(s!==void 0)}function Fz(n,e,t,r,i=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),h=[],d=[];for(let m=0;m<u.times.length;++m){const v=u.times[m]*i;if(!(v<t||v>=r)){h.push(u.times[m]);for(let w=0;w<c;++w)d.push(u.values[m*c+w])}}h.length!==0&&(u.times=Lf(h,u.times.constructor),u.values=Lf(d,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function Uz(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(u===void 0)continue;let c=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);let d=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(d=m/3);const v=a.times.length-1;let w;if(s<=a.times[0]){const g=c,S=h-c;w=Pa(a.values,g,S)}else if(s>=a.times[v]){const g=v*h+c,S=g+h-c;w=Pa(a.values,g,S)}else{const g=a.createInterpolant(),S=c,_=h-c;g.evaluate(s),w=Pa(g.resultBuffer,S,_)}l==="quaternion"&&new Qs().fromArray(w).normalize().conjugate().toArray(w);const x=u.times.length;for(let g=0;g<x;++g){const S=g*m+d;if(l==="quaternion")Qs.multiplyQuaternionsFlat(u.values,S,w,0,u.values,S);else{const _=m-d*2;for(let T=0;T<_;++T)u.values[S+T]-=w[T]}}}return n.blendMode=Ub,n}const Bz={arraySlice:Pa,convertArray:Lf,isTypedArray:l3,getKeyframeOrder:CR,sortedArray:n5,flattenJSON:u3,subclip:Fz,makeClipAdditive:Uz};class Zg{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],s=t[r-1];e:{t:{let o;n:{i:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break i;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=t[++r],e<i)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=t[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<t[a]?o=a:r=a+1}if(i=t[r],s=t[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)t[o]=r[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class LR extends Zg{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ef,endingEnd:Ef}}intervalChanged_(e,t,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Af:s=e,a=2*t-r;break;case fg:s=i.length-2,a=t+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Af:o=e,l=2*r-t;break;case fg:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=t}const u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-r),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,h=this._offsetNext,d=this._weightPrev,m=this._weightNext,v=(r-t)/(i-t),w=v*v,x=w*v,g=-d*x+2*d*w-d*v,S=(1+d)*x+(-1.5-2*d)*w+(-.5+d)*v+1,_=(-1-m)*x+(1.5+m)*w+.5*v,T=m*x-m*w;for(let L=0;L!==a;++L)s[L]=g*o[c+L]+S*o[u+L]+_*o[l+L]+T*o[h+L];return s}}class c3 extends Zg{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(r-t)/(i-t),h=1-c;for(let d=0;d!==a;++d)s[d]=o[u+d]*h+o[l+d]*c;return s}}class PR extends Zg{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ml{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Lf(t,this.TimeBufferType),this.values=Lf(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Lf(e.times,Array),values:Lf(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new PR(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new c3(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new LR(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case cg:t=this.InterpolantFactoryMethodDiscrete;break;case hg:t=this.InterpolantFactoryMethodLinear;break;case py:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return cg;case this.InterpolantFactoryMethodLinear:return hg;case this.InterpolantFactoryMethodSmooth:return py}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>t;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Pa(r,s,o),this.values=Pa(this.values,s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&l3(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=Pa(this.times),t=Pa(this.values),r=this.getValueSize(),i=this.getInterpolation()===py,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(i)l=!0;else{const h=a*r,d=h-r,m=h+r;for(let v=0;v!==r;++v){const w=t[h+v];if(w!==t[d+v]||w!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*r,d=o*r;for(let m=0;m!==r;++m)t[d+m]=t[h+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=Pa(e,0,o),this.values=Pa(t,0,o*r)):(this.times=e,this.values=t),this}clone(){const e=Pa(this.times,0),t=Pa(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Ml.prototype.TimeBufferType=Float32Array;Ml.prototype.ValueBufferType=Float32Array;Ml.prototype.DefaultInterpolation=hg;class nd extends Ml{}nd.prototype.ValueTypeName="bool";nd.prototype.ValueBufferType=Array;nd.prototype.DefaultInterpolation=cg;nd.prototype.InterpolantFactoryMethodLinear=void 0;nd.prototype.InterpolantFactoryMethodSmooth=void 0;class h3 extends Ml{}h3.prototype.ValueTypeName="color";class Sg extends Ml{}Sg.prototype.ValueTypeName="number";class RR extends Zg{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let u=e*a;for(let c=u+a;u!==c;u+=4)Qs.slerpFlat(s,0,o,u-a,o,u,l);return s}}class gm extends Ml{InterpolantFactoryMethodLinear(e){return new RR(this.times,this.values,this.getValueSize(),e)}}gm.prototype.ValueTypeName="quaternion";gm.prototype.DefaultInterpolation=hg;gm.prototype.InterpolantFactoryMethodSmooth=void 0;class rd extends Ml{}rd.prototype.ValueTypeName="string";rd.prototype.ValueBufferType=Array;rd.prototype.DefaultInterpolation=cg;rd.prototype.InterpolantFactoryMethodLinear=void 0;rd.prototype.InterpolantFactoryMethodSmooth=void 0;class _g extends Ml{}_g.prototype.ValueTypeName="vector";class bg{constructor(e,t=-1,r,i=D2){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=na(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)t.push(Hz(r[o]).scale(i));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)t.push(Ml.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const c=CR(l);l=n5(l,1,c),u=n5(u,1,c),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new Sg(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(s);if(c&&c.length>1){const h=c[1];let d=i[h];d||(i[h]=d=[]),d.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,d,m,v,w){if(m.length!==0){const x=[],g=[];u3(m,x,g,v),x.length!==0&&w.push(new h(d,x,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const d=u[h].keys;if(!(!d||d.length===0))if(d[0].morphTargets){const m={};let v;for(v=0;v<d.length;v++)if(d[v].morphTargets)for(let w=0;w<d[v].morphTargets.length;w++)m[d[v].morphTargets[w]]=-1;for(const w in m){const x=[],g=[];for(let S=0;S!==d[v].morphTargets.length;++S){const _=d[v];x.push(_.time),g.push(_.morphTarget===w?1:0)}i.push(new Sg(".morphTargetInfluence["+w+"]",x,g))}l=m.length*o}else{const m=".bones["+t[h].name+"]";r(_g,m+".position",d,"pos",i),r(gm,m+".quaternion",d,"rot",i),r(_g,m+".scale",d,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function zz(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Sg;case"vector":case"vector2":case"vector3":case"vector4":return _g;case"color":return h3;case"quaternion":return gm;case"bool":case"boolean":return nd;case"string":return rd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Hz(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=zz(n.type);if(n.times===void 0){const t=[],r=[];u3(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Xf={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class f3{constructor(e,t,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){a++,s===!1&&i.onStart!==void 0&&i.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,h){return u.push(c,h),this},this.removeHandler=function(c){const h=u.indexOf(c);return h!==-1&&u.splice(h,2),this},this.getHandler=function(c){for(let h=0,d=u.length;h<d;h+=2){const m=u[h],v=u[h+1];if(m.global&&(m.lastIndex=0),m.test(c))return v}return null}}}const kR=new f3;class Oo{constructor(e){this.manager=e!==void 0?e:kR,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,s){r.load(e,i,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Oo.DEFAULT_MATERIAL_NAME="__DEFAULT";const ku={};class Gz extends Error{constructor(e,t){super(e),this.response=t}}class ec extends Oo{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Xf.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(ku[e]!==void 0){ku[e].push({onLoad:t,onProgress:r,onError:i});return}ku[e]=[],ku[e].push({onLoad:t,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=ku[e],h=u.body.getReader(),d=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),m=d?parseInt(d):0,v=m!==0;let w=0;const x=new ReadableStream({start(g){S();function S(){h.read().then(({done:_,value:T})=>{if(_)g.close();else{w+=T.byteLength;const L=new ProgressEvent("progress",{lengthComputable:v,loaded:w,total:m});for(let P=0,N=c.length;P<N;P++){const k=c[P];k.onProgress&&k.onProgress(L)}g.enqueue(T),S()}})}}});return new Response(x)}else throw new Gz(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a===void 0)return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),d=h&&h[1]?h[1].toLowerCase():void 0,m=new TextDecoder(d);return u.arrayBuffer().then(v=>m.decode(v))}}}).then(u=>{Xf.add(e,u);const c=ku[e];delete ku[e];for(let h=0,d=c.length;h<d;h++){const m=c[h];m.onLoad&&m.onLoad(u)}}).catch(u=>{const c=ku[e];if(c===void 0)throw this.manager.itemError(e),u;delete ku[e];for(let h=0,d=c.length;h<d;h++){const m=c[h];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Vz extends Oo{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ec(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=bg.parse(e[r]);t.push(i)}return t}}class Wz extends Oo{constructor(e){super(e)}load(e,t,r,i){const s=this,o=[],a=new V2,l=new ec(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(h){l.load(e[h],function(d){const m=s.parse(d,!0);o[h]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=qr),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let h=0,d=e.length;h<d;++h)c(h);else l.load(e,function(h){const d=s.parse(h,!0);if(d.isCubemap){const m=d.mipmaps.length/d.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let w=0;w<d.mipmapCount;w++)o[v].mipmaps.push(d.mipmaps[v*d.mipmapCount+w]),o[v].format=d.format,o[v].width=d.width,o[v].height=d.height}a.image=o}else a.image.width=d.width,a.image.height=d.height,a.mipmaps=d.mipmaps;d.mipmapCount===1&&(a.minFilter=qr),a.format=d.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class Mg extends Oo{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Xf.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=mg("img");function l(){c(),Xf.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(h){c(),i&&i(h),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class NR extends Oo{constructor(e){super(e)}load(e,t,r,i){const s=new Wg;s.colorSpace=Un;const o=new Mg(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(c){s.images[u]=c,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class d3 extends Oo{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new Fp,a=new ec(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(c){if(i!==void 0)i(c);else{console.error(c);return}}if(!u)return i();u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:Zs,o.wrapT=u.wrapT!==void 0?u.wrapT:Zs,o.magFilter=u.magFilter!==void 0?u.magFilter:qr,o.minFilter=u.minFilter!==void 0?u.minFilter:qr,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?o.colorSpace=u.colorSpace:u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=_h),u.mipmapCount===1&&(o.minFilter=qr),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},r,i),o}}class jz extends Oo{constructor(e){super(e)}load(e,t,r,i){const s=new Mi,o=new Mg(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},r,i),s}}class Ih extends ur{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new $t(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class IR extends Ih{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(ur.DEFAULT_UP),this.updateMatrix(),this.groundColor=new $t(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Iw=new Fn,gA=new ve,vA=new ve;class p3{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new xt(512,512),this.map=null,this.mapPass=null,this.matrix=new Fn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new F2,this._frameExtents=new xt(1,1),this._viewportCount=1,this._viewports=[new Ar(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;gA.setFromMatrixPosition(e.matrixWorld),t.position.copy(gA),vA.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(vA),t.updateMatrixWorld(),Iw.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Iw),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Iw)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class qz extends p3{constructor(){super(new Ni(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=em*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(r!==t.fov||i!==t.aspect||s!==t.far)&&(t.fov=r,t.aspect=i,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class DR extends Ih{constructor(e,t,r=0,i=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(ur.DEFAULT_UP),this.updateMatrix(),this.target=new ur,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new qz}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const yA=new Fn,o0=new ve,Dw=new ve;class Xz extends p3{constructor(){super(new Ni(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new xt(4,2),this._viewportCount=6,this._viewports=[new Ar(2,1,1,1),new Ar(0,1,1,1),new Ar(3,1,1,1),new Ar(1,1,1,1),new Ar(3,0,1,1),new Ar(1,0,1,1)],this._cubeDirections=[new ve(1,0,0),new ve(-1,0,0),new ve(0,0,1),new ve(0,0,-1),new ve(0,1,0),new ve(0,-1,0)],this._cubeUps=[new ve(0,1,0),new ve(0,1,0),new ve(0,1,0),new ve(0,1,0),new ve(0,0,1),new ve(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),o0.setFromMatrixPosition(e.matrixWorld),r.position.copy(o0),Dw.copy(r.position),Dw.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(Dw),r.updateMatrixWorld(),i.makeTranslation(-o0.x,-o0.y,-o0.z),yA.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(yA)}}class OR extends Ih{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new Xz}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Yz extends p3{constructor(){super(new Jl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class FR extends Ih{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(ur.DEFAULT_UP),this.updateMatrix(),this.target=new ur,this.shadow=new Yz}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class UR extends Ih{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class BR extends Ih{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class zR{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ve)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*i),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*r),t.addScaledVector(o[4],1.092548*(r*i)),t.addScaledVector(o[5],1.092548*(i*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(r*s)),t.addScaledVector(o[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*i),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*r),t.addScaledVector(o[4],2*.429043*r*i),t.addScaledVector(o[5],2*.429043*i*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*r*s),t.addScaledVector(o[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,s=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*s,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*r*s,t[8]=.546274*(r*r-i*i)}}class ix extends Ih{constructor(e=new zR,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class sx extends Oo{constructor(e){super(e),this.textures={}}load(e,t,r,i){const s=this,o=new ec(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const i=sx.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new $t().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new $t().setHex(o.value);break;case"v2":i.uniforms[s].value=new xt().fromArray(o.value);break;case"v3":i.uniforms[s].value=new ve().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Ar().fromArray(o.value);break;case"m3":i.uniforms[s].value=new jn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Fn().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new xt().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new xt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:xR,SpriteMaterial:Kb,RawShaderMaterial:wR,ShaderMaterial:yl,PointsMaterial:Qb,MeshPhysicalMaterial:SR,MeshStandardMaterial:a3,MeshPhongMaterial:_R,MeshToonMaterial:bR,MeshNormalMaterial:MR,MeshLambertMaterial:ER,MeshDepthMaterial:Yb,MeshDistanceMaterial:$b,MeshBasicMaterial:kh,MeshMatcapMaterial:AR,LineDashedMaterial:TR,LineBasicMaterial:go,Material:Ns};return new t[e]}}class r5{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class HR extends kn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class GR extends Oo{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ec(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(m,v){if(t[v]!==void 0)return t[v];const x=m.interleavedBuffers[v],g=s(m,x.buffer),S=Ap(x.type,g),_=new H2(S,x.stride);return _.uuid=x.uuid,t[v]=_,_}function s(m,v){if(r[v]!==void 0)return r[v];const x=m.arrayBuffers[v],g=new Uint32Array(x).buffer;return r[v]=g,g}const o=e.isInstancedBufferGeometry?new HR:new kn,a=e.data.index;if(a!==void 0){const m=Ap(a.type,a.array);o.setIndex(new Nr(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let w;if(v.isInterleavedBufferAttribute){const x=i(e.data,v.data);w=new jf(x,v.itemSize,v.offset,v.normalized)}else{const x=Ap(v.type,v.array),g=v.isInstancedBufferAttribute?nm:Nr;w=new g(x,v.itemSize,v.normalized)}v.name!==void 0&&(w.name=v.name),v.usage!==void 0&&w.setUsage(v.usage),v.updateRange!==void 0&&(w.updateRange.offset=v.updateRange.offset,w.updateRange.count=v.updateRange.count),o.setAttribute(m,w)}const u=e.data.morphAttributes;if(u)for(const m in u){const v=u[m],w=[];for(let x=0,g=v.length;x<g;x++){const S=v[x];let _;if(S.isInterleavedBufferAttribute){const T=i(e.data,S.data);_=new jf(T,S.itemSize,S.offset,S.normalized)}else{const T=Ap(S.type,S.array);_=new Nr(T,S.itemSize,S.normalized)}S.name!==void 0&&(_.name=S.name),w.push(_)}o.morphAttributes[m]=w}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let m=0,v=h.length;m!==v;++m){const w=h[m];o.addGroup(w.start,w.count,w.materialIndex)}const d=e.data.boundingSphere;if(d!==void 0){const m=new ve;d.center!==void 0&&m.fromArray(d.center),o.boundingSphere=new _l(m,d.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class $z extends Oo{constructor(e){super(e)}load(e,t,r,i){const s=this,o=this.path===""?r5.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new ec(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(h){i!==void 0&&i(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?r5.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new ec(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),t!==void 0){let h=!1;for(const d in o)if(o[d].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new Ff().fromJSON(e[r]);t[s.uuid]=s}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new G2().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new GR;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in mA?a=mA[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const s=new sx;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=bg.parse(i);t[s.uuid]=s}return t}parseImages(e,t){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(c)}else return l.data?{data:Ap(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new f3(t);s=new Mg(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const h=e[u],d=h.url;if(Array.isArray(d)){const m=[];for(let v=0,w=d.length;v<w;v++){const x=d[v],g=a(x);g!==null&&(g instanceof HTMLImageElement?m.push(g):m.push(new Fp(g.data,g.width,g.height)))}i[h.uuid]=new Tf(m)}else{const m=a(h.url);i[h.uuid]=new Tf(m)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Ap(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new Mg(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const c=[];for(let h=0,d=u.length;h<d;h++){const m=u[h],v=await s(m);v!==null&&(v instanceof HTMLImageElement?c.push(v):c.push(new Fp(v.data,v.width,v.height)))}r[l.uuid]=new Tf(c)}else{const c=await s(l.url);r[l.uuid]=new Tf(c)}}}return r}parseTextures(e,t){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let c;Array.isArray(u)?(c=new Wg,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new Fp:c=new Mi,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=r(a.mapping,Zz)),a.channel!==void 0&&(c.channel=a.channel),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=r(a.wrap[0],xA),c.wrapT=r(a.wrap[1],xA)),a.format!==void 0&&(c.format=a.format),a.internalFormat!==void 0&&(c.internalFormat=a.internalFormat),a.type!==void 0&&(c.type=a.type),a.colorSpace!==void 0&&(c.colorSpace=a.colorSpace),a.encoding!==void 0&&(c.encoding=a.encoding),a.minFilter!==void 0&&(c.minFilter=r(a.minFilter,wA)),a.magFilter!==void 0&&(c.magFilter=r(a.magFilter,wA)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.generateMipmaps!==void 0&&(c.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(c.compareFunction=a.compareFunction),a.userData!==void 0&&(c.userData=a.userData),i[a.uuid]=c}return i}parseObject(e,t,r,i,s){let o;function a(d){return t[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",d),t[d]}function l(d){if(d!==void 0){if(Array.isArray(d)){const m=[];for(let v=0,w=d.length;v<w;v++){const x=d[v];r[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(r[x])}return m}return r[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",d),r[d]}}function u(d){return i[d]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",d),i[d]}let c,h;switch(e.type){case"Scene":o=new gg,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new $t(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new z2(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new B2(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new Ni(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Jl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new UR(e.color,e.intensity);break;case"DirectionalLight":o=new FR(e.color,e.intensity);break;case"PointLight":o=new OR(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new BR(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new DR(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new IR(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new ix().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),h=l(e.material),o=new oR(c,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),h=l(e.material),o=new ws(c,h);break;case"InstancedMesh":c=a(e.geometry),h=l(e.material);const d=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new aR(c,h,d),o.instanceMatrix=new nm(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new nm(new Float32Array(v.array),v.itemSize));break;case"LOD":o=new sR;break;case"Line":o=new bh(a(e.geometry),l(e.material));break;case"LineLoop":o=new lR(a(e.geometry),l(e.material));break;case"LineSegments":o=new iu(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new uR(a(e.geometry),l(e.material));break;case"Sprite":o=new iR(l(e.material));break;case"Group":o=new Cp;break;case"Bone":o=new Jb;break;default:o=new ur}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const d=e.children;for(let m=0;m<d.length;m++)o.add(this.parseObject(d[m],t,r,i,s))}if(e.animations!==void 0){const d=e.animations;for(let m=0;m<d.length;m++){const v=d[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const d=e.levels;for(let m=0;m<d.length;m++){const v=d[m],w=o.getObjectByProperty("uuid",v.object);w!==void 0&&o.addLevel(w,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const Zz={UVMapping:N2,CubeReflectionMapping:nu,CubeRefractionMapping:Sh,EquirectangularReflectionMapping:Qp,EquirectangularRefractionMapping:ag,CubeUVReflectionMapping:dm},xA={RepeatWrapping:lg,ClampToEdgeWrapping:Zs,MirroredRepeatWrapping:ug},wA={NearestFilter:Ri,NearestMipmapNearestFilter:e2,NearestMipmapLinearFilter:k0,LinearFilter:qr,LinearMipmapNearestFilter:Pb,LinearMipmapLinearFilter:_h};class Kz extends Oo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Xf.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){Xf.add(e,l),t&&t(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let Mv;class m3{static getContext(){return Mv===void 0&&(Mv=new(window.AudioContext||window.webkitAudioContext)),Mv}static setContext(e){Mv=e}}class Jz extends Oo{constructor(e){super(e)}load(e,t,r,i){const s=this,o=new ec(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);m3.getContext().decodeAudioData(u,function(h){t(h)},a)}catch(u){a(u)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}class Qz extends ix{constructor(e,t,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new $t().set(e),s=new $t().set(t),o=new ve(i.r,i.g,i.b),a=new ve(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}class e9 extends ix{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const r=new $t().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const SA=new Fn,_A=new Fn,of=new Fn;class t9{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ni,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ni,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,of.copy(e.projectionMatrix);const i=t.eyeSep/2,s=i*t.near/t.focus,o=t.near*Math.tan(Df*t.fov*.5)/t.zoom;let a,l;_A.elements[12]=-i,SA.elements[12]=i,a=-o*t.aspect+s,l=o*t.aspect+s,of.elements[0]=2*t.near/(l-a),of.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(of),a=-o*t.aspect-s,l=o*t.aspect-s,of.elements[0]=2*t.near/(l-a),of.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(of)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(_A),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(SA)}}class g3{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=bA(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=bA();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function bA(){return(typeof performance>"u"?Date:performance).now()}const af=new ve,MA=new Qs,n9=new ve,lf=new ve;class r9 extends ur{constructor(){super(),this.type="AudioListener",this.context=m3.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new g3}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(af,MA,n9),lf.set(0,0,-1).applyQuaternion(MA),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(af.x,i),t.positionY.linearRampToValueAtTime(af.y,i),t.positionZ.linearRampToValueAtTime(af.z,i),t.forwardX.linearRampToValueAtTime(lf.x,i),t.forwardY.linearRampToValueAtTime(lf.y,i),t.forwardZ.linearRampToValueAtTime(lf.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(af.x,af.y,af.z),t.setOrientation(lf.x,lf.y,lf.z,r.x,r.y,r.z)}}class VR extends ur{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const uf=new ve,EA=new Qs,i9=new ve,cf=new ve;class s9 extends VR{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(uf,EA,i9),cf.set(0,0,1).applyQuaternion(EA);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(uf.x,r),t.positionY.linearRampToValueAtTime(uf.y,r),t.positionZ.linearRampToValueAtTime(uf.z,r),t.orientationX.linearRampToValueAtTime(cf.x,r),t.orientationY.linearRampToValueAtTime(cf.y,r),t.orientationZ.linearRampToValueAtTime(cf.z,r)}else t.setPosition(uf.x,uf.y,uf.z),t.setOrientation(cf.x,cf.y,cf.z)}}class o9{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class WR{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,s,o;switch(t){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let s=r,o=i;s!==o;++s)t[s]=t[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[t+o]=e[r+o]}_slerp(e,t,r,i){Qs.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,s){const o=this._workIndex*s;Qs.multiplyQuaternionsFlat(e,o,e,t,e,r),Qs.slerpFlat(e,t,e,t,e,o,i)}_lerp(e,t,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,t,r,i,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[r+o]*i}}}const v3="\\[\\]\\.:\\/",a9=new RegExp("["+v3+"]","g"),y3="[^"+v3+"]",l9="[^"+v3.replace("\\.","")+"]",u9=/((?:WC+[\/:])*)/.source.replace("WC",y3),c9=/(WCOD+)?/.source.replace("WCOD",l9),h9=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",y3),f9=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",y3),d9=new RegExp("^"+u9+c9+h9+f9+"$"),p9=["material","materials","bones","map"];class m9{constructor(e,t,r){const i=r||cr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class cr{constructor(e,t,r){this.path=t,this.parsedPath=r||cr.parseTrackName(t),this.node=cr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new cr.Composite(e,t,r):new cr(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(a9,"")}static parseTrackName(e){const t=d9.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);p9.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let s=t.propertyIndex;if(e||(e=cr.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}cr.Composite=m9;cr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};cr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};cr.prototype.GetterByBindingType=[cr.prototype._getValue_direct,cr.prototype._getValue_array,cr.prototype._getValue_arrayElement,cr.prototype._getValue_toArray];cr.prototype.SetterByBindingTypeAndVersioning=[[cr.prototype._setValue_direct,cr.prototype._setValue_direct_setNeedsUpdate,cr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[cr.prototype._setValue_array,cr.prototype._setValue_array_setNeedsUpdate,cr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[cr.prototype._setValue_arrayElement,cr.prototype._setValue_arrayElement_setNeedsUpdate,cr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[cr.prototype._setValue_fromArray,cr.prototype._setValue_fromArray_setNeedsUpdate,cr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class g9{constructor(){this.isAnimationObjectGroup=!0,this.uuid=na(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const d=arguments[c],m=d.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(d);for(let w=0,x=o;w!==x;++w)s[w].push(new cr(d,r[w],i[w]))}else if(v<u){a=e[v];const w=--u,x=e[w];t[x.uuid]=v,e[v]=x,t[m]=w,e[w]=d;for(let g=0,S=o;g!==S;++g){const _=s[g],T=_[w];let L=_[v];_[v]=T,L===void 0&&(L=new cr(d,r[g],i[g])),_[w]=L}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,c=t[u];if(c!==void 0&&c>=s){const h=s++,d=e[h];t[d.uuid]=c,e[c]=d,t[u]=h,e[h]=l;for(let m=0,v=i;m!==v;++m){const w=r[m],x=w[h],g=w[c];w[c]=x,w[h]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,h=t[c];if(h!==void 0)if(delete t[c],h<s){const d=--s,m=e[d],v=--o,w=e[v];t[m.uuid]=h,e[h]=m,t[w.uuid]=d,e[d]=w,e.pop();for(let x=0,g=i;x!==g;++x){const S=r[x],_=S[d],T=S[v];S[h]=_,S[d]=T,S.pop()}}else{const d=--o,m=e[d];d>0&&(t[m.uuid]=h),e[h]=m,e.pop();for(let v=0,w=i;v!==w;++v){const x=r[v];x[h]=x[d],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,h=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(t),s.push(h);for(let d=c,m=l.length;d!==m;++d){const v=l[d];h[d]=new cr(v,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class jR{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Ef,endingEnd:Ef};for(let u=0;u!==o;++u){const c=s[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=TP,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case Ub:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulateAdditive(a);break;case D2:default:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===CP;if(e===0)return s===-1?i:o&&(s&1)===1?t-i:i;if(r===AP){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Af,i.endingEnd=Af):(e?i.endingStart=this.zeroSlopeAtStart?Af:Ef:i.endingStart=fg,t?i.endingEnd=this.zeroSlopeAtEnd?Af:Ef:i.endingEnd=fg)}_scheduleFading(e,t,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=r,this}}const v9=new Float32Array(1);class y9 extends rc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let h=0;h!==s;++h){const d=i[h],m=d.name;let v=c[m];if(v!==void 0)++v.referenceCount,o[h]=v;else{if(v=o[h],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const w=t&&t._propertyBindings[h].binding.parsedPath;v=new WR(cr.create(r,m,w),d.ValueTypeName,d.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[h]=v}a[h].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,d=(e._localRoot||this._root).uuid;delete h[d],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const s=t[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[t];o===void 0&&(o={},i[t]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=t[i];e._cacheIndex=i,t[i]=e,s._cacheIndex=r,t[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new c3(new Float32Array(2),new Float32Array(2),1,v9),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=t[i];e.__cacheIndex=i,t[i]=e,s.__cacheIndex=r,t[r]=s}clipAction(e,t,r){const i=t||this._root,s=i.uuid;let o=typeof e=="string"?bg.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=D2),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===r)return h;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new jR(this,o,t,r);return this._bindAction(c,u),this._addInactiveAction(c,a,s),c}existingAction(e,t){const r=t||this._root,i=r.uuid,s=typeof e=="string"?bg.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const c=u._cacheIndex,h=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=c,t[c]=h,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class x3{constructor(e){this.value=e}clone(){return new x3(this.value.clone===void 0?this.value:this.value.clone())}}let x9=0;class w9 extends rc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:x9++}),this.name="",this.usage=dg,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class S9 extends H2{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class _9{constructor(e,t,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class w3{constructor(e,t,r=0,i=1/0){this.ray=new ed(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Of,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return i5(e,this,r,t),r.sort(AA),r}intersectObjects(e,t=!0,r=[]){for(let i=0,s=e.length;i<s;i++)i5(e[i],this,r,t);return r.sort(AA),r}}function AA(n,e){return n.distance-e.distance}function i5(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let s=0,o=i.length;s<o;s++)i5(i[s],e,t,!0)}}class s5{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(bi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class b9{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const TA=new xt;class M9{constructor(e=new xt(1/0,1/0),t=new xt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=TA.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,TA).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const CA=new ve,Ev=new ve;class E9{constructor(e=new ve,t=new ve){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){CA.subVectors(e,this.start),Ev.subVectors(this.end,this.start);const r=Ev.dot(Ev);let s=Ev.dot(CA)/r;return t&&(s=bi(s,0,1)),s}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const LA=new ve;class A9 extends ur{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new kn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,c=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new en(i,3));const s=new go({fog:!1,toneMapped:!1});this.cone=new iu(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),LA.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(LA),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Uc=new ve,Av=new Fn,Ow=new Fn;class T9 extends iu{constructor(e){const t=qR(e),r=new kn,i=[],s=[],o=new $t(0,0,1),a=new $t(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new en(i,3)),r.setAttribute("color",new en(s,3));const l=new go({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");Ow.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Av.multiplyMatrices(Ow,a.matrixWorld),Uc.setFromMatrixPosition(Av),i.setXYZ(o,Uc.x,Uc.y,Uc.z),Av.multiplyMatrices(Ow,a.parent.matrixWorld),Uc.setFromMatrixPosition(Av),i.setXYZ(o+1,Uc.x,Uc.y,Uc.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function qR(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,qR(n.children[t]));return e}class C9 extends ws{constructor(e,t,r){const i=new $g(t,4,2),s=new kh({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const L9=new ve,PA=new $t,RA=new $t;class P9 extends ur{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new Yg(t);i.rotateY(Math.PI*.5),this.material=new kh({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new Nr(o,3)),this.add(new ws(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");PA.copy(this.light.color),RA.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const s=r<i/2?PA:RA;t.setXYZ(r,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(L9.setFromMatrixPosition(this.light.matrixWorld).negate())}}class R9 extends iu{constructor(e=10,t=10,r=4473924,i=8947848){r=new $t(r),i=new $t(i);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let d=0,m=0,v=-a;d<=t;d++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const w=d===s?r:i;w.toArray(u,m),m+=3,w.toArray(u,m),m+=3,w.toArray(u,m),m+=3,w.toArray(u,m),m+=3}const c=new kn;c.setAttribute("position",new en(l,3)),c.setAttribute("color",new en(u,3));const h=new go({vertexColors:!0,toneMapped:!1});super(c,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class k9 extends iu{constructor(e=10,t=16,r=8,i=64,s=4473924,o=8947848){s=new $t(s),o=new $t(o);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const d=h/t*(Math.PI*2),m=Math.sin(d)*e,v=Math.cos(d)*e;a.push(0,0,0),a.push(m,0,v);const w=h&1?s:o;l.push(w.r,w.g,w.b),l.push(w.r,w.g,w.b)}for(let h=0;h<r;h++){const d=h&1?s:o,m=e-e/r*h;for(let v=0;v<i;v++){let w=v/i*(Math.PI*2),x=Math.sin(w)*m,g=Math.cos(w)*m;a.push(x,0,g),l.push(d.r,d.g,d.b),w=(v+1)/i*(Math.PI*2),x=Math.sin(w)*m,g=Math.cos(w)*m,a.push(x,0,g),l.push(d.r,d.g,d.b)}}const u=new kn;u.setAttribute("position",new en(a,3)),u.setAttribute("color",new en(l,3));const c=new go({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const kA=new ve,Tv=new ve,NA=new ve;class N9 extends ur{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new kn;i.setAttribute("position",new en([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new go({fog:!1,toneMapped:!1});this.lightPlane=new bh(i,s),this.add(this.lightPlane),i=new kn,i.setAttribute("position",new en([0,0,0,0,0,1],3)),this.targetLine=new bh(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),kA.setFromMatrixPosition(this.light.matrixWorld),Tv.setFromMatrixPosition(this.light.target.matrixWorld),NA.subVectors(Tv,kA),this.lightPlane.lookAt(Tv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Tv),this.targetLine.scale.z=NA.length()}}const Cv=new ve,wi=new Vg;class I9 extends iu{constructor(e){const t=new kn,r=new go({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,w){l(v),l(w)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}t.setAttribute("position",new en(i,3)),t.setAttribute("color",new en(s,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new $t(16755200),c=new $t(16711680),h=new $t(43775),d=new $t(16777215),m=new $t(3355443);this.setColors(u,c,h,d,m)}setColors(e,t,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;wi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Pi("c",t,e,wi,0,0,-1),Pi("t",t,e,wi,0,0,1),Pi("n1",t,e,wi,-r,-i,-1),Pi("n2",t,e,wi,r,-i,-1),Pi("n3",t,e,wi,-r,i,-1),Pi("n4",t,e,wi,r,i,-1),Pi("f1",t,e,wi,-r,-i,1),Pi("f2",t,e,wi,r,-i,1),Pi("f3",t,e,wi,-r,i,1),Pi("f4",t,e,wi,r,i,1),Pi("u1",t,e,wi,r*.7,i*1.1,-1),Pi("u2",t,e,wi,-r*.7,i*1.1,-1),Pi("u3",t,e,wi,0,i*2,-1),Pi("cf1",t,e,wi,-r,0,1),Pi("cf2",t,e,wi,r,0,1),Pi("cf3",t,e,wi,0,-i,1),Pi("cf4",t,e,wi,0,i,1),Pi("cn1",t,e,wi,-r,0,-1),Pi("cn2",t,e,wi,r,0,-1),Pi("cn3",t,e,wi,0,-i,-1),Pi("cn4",t,e,wi,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Pi(n,e,t,r,i,s,o){Cv.set(i,s,o).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],Cv.x,Cv.y,Cv.z)}}const Lv=new ru;class D9 extends iu{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new kn;s.setIndex(new Nr(r,1)),s.setAttribute("position",new Nr(i,3)),super(s,new go({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Lv.setFromObject(this.object),Lv.isEmpty())return;const t=Lv.min,r=Lv.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=t.x,s[4]=r.y,s[5]=r.z,s[6]=t.x,s[7]=t.y,s[8]=r.z,s[9]=r.x,s[10]=t.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=t.z,s[15]=t.x,s[16]=r.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=r.x,s[22]=t.y,s[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class O9 extends iu{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new kn;s.setIndex(new Nr(r,1)),s.setAttribute("position",new en(i,3)),super(s,new go({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class F9 extends bh{constructor(e,t=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new kn;o.setAttribute("position",new en(s,3)),o.computeBoundingSphere(),super(o,new go({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new kn;l.setAttribute("position",new en(a,3)),l.computeBoundingSphere(),this.add(new ws(l,new kh({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const IA=new ve;let Pv,Fw;class U9 extends ur{constructor(e=new ve(0,0,1),t=new ve(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",Pv===void 0&&(Pv=new kn,Pv.setAttribute("position",new en([0,0,0,0,1,0],3)),Fw=new mm(0,.5,1,5,1),Fw.translate(0,-.5,0)),this.position.copy(t),this.line=new bh(Pv,new go({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ws(Fw,new kh({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{IA.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(IA,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class B9 extends iu{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new kn;i.setAttribute("position",new en(t,3)),i.setAttribute("color",new en(r,3));const s=new go({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,t,r){const i=new $t,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(t),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class z9{constructor(){this.type="ShapePath",this.color=new $t,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new vg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,s,o){return this.currentPath.bezierCurveTo(e,t,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const S=[];for(let _=0,T=g.length;_<T;_++){const L=g[_],P=new Ff;P.curves=L.curves,S.push(P)}return S}function r(g,S){const _=S.length;let T=!1;for(let L=_-1,P=0;P<_;L=P++){let N=S[L],k=S[P],R=k.x-N.x,U=k.y-N.y;if(Math.abs(U)>Number.EPSILON){if(U<0&&(N=S[P],R=-R,k=S[L],U=-U),g.y<N.y||g.y>k.y)continue;if(g.y===N.y){if(g.x===N.x)return!0}else{const F=U*(g.x-N.x)-R*(g.y-N.y);if(F===0)return!0;if(F<0)continue;T=!T}}else{if(g.y!==N.y)continue;if(k.x<=g.x&&g.x<=N.x||N.x<=g.x&&g.x<=k.x)return!0}}return T}const i=Ql.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new Ff,l.curves=a.curves,u.push(l),u;let c=!i(s[0].getPoints());c=e?!c:c;const h=[],d=[];let m=[],v=0,w;d[v]=void 0,m[v]=[];for(let g=0,S=s.length;g<S;g++)a=s[g],w=a.getPoints(),o=i(w),o=e?!o:o,o?(!c&&d[v]&&v++,d[v]={s:new Ff,p:w},d[v].s.curves=a.curves,c&&v++,m[v]=[]):m[v].push({h:a,p:w[0]});if(!d[0])return t(s);if(d.length>1){let g=!1,S=0;for(let _=0,T=d.length;_<T;_++)h[_]=[];for(let _=0,T=d.length;_<T;_++){const L=m[_];for(let P=0;P<L.length;P++){const N=L[P];let k=!0;for(let R=0;R<d.length;R++)r(N.p,d[R].p)&&(_!==R&&S++,k?(k=!1,h[R].push(N)):g=!0);k&&h[_].push(N)}}S>0&&g===!1&&(m=h)}let x;for(let g=0,S=d.length;g<S;g++){l=d[g].s,u.push(l),x=m[g];for(let _=0,T=x.length;_<T;_++)l.holes.push(x[_].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:zg}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=zg);const H9=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Lb,AddEquation:yf,AddOperation:dP,AdditiveAnimationBlendMode:Ub,AdditiveBlending:S_,AlphaFormat:wP,AlwaysCompare:zP,AlwaysDepth:oP,AlwaysStencilFunc:kP,AmbientLight:UR,AmbientLightProbe:e9,AnimationAction:jR,AnimationClip:bg,AnimationLoader:Vz,AnimationMixer:y9,AnimationObjectGroup:g9,AnimationUtils:Bz,ArcCurve:cR,ArrayCamera:eR,ArrowHelper:U9,Audio:VR,AudioAnalyser:o9,AudioContext:m3,AudioListener:r9,AudioLoader:Jz,AxesHelper:B9,BackSide:fo,BasicDepthPacking:LP,BasicShadowMap:qL,Bone:Jb,BooleanKeyframeTrack:nd,Box2:M9,Box3:ru,Box3Helper:O9,BoxGeometry:td,BoxHelper:D9,BufferAttribute:Nr,BufferGeometry:kn,BufferGeometryLoader:GR,ByteType:yP,Cache:Xf,Camera:Vg,CameraHelper:I9,CanvasTexture:uz,CapsuleGeometry:q2,CatmullRomCurve3:hR,CineonToneMapping:gP,CircleGeometry:X2,ClampToEdgeWrapping:Zs,Clock:g3,Color:$t,ColorKeyframeTrack:h3,ColorManagement:La,CompressedArrayTexture:az,CompressedCubeTexture:lz,CompressedTexture:V2,CompressedTextureLoader:Wz,ConeGeometry:Y2,CubeCamera:XP,CubeReflectionMapping:nu,CubeRefractionMapping:Sh,CubeTexture:Wg,CubeTextureLoader:NR,CubeUVReflectionMapping:dm,CubicBezierCurve:t3,CubicBezierCurve3:fR,CubicInterpolant:LR,CullFaceBack:w_,CullFaceFront:jL,CullFaceFrontBack:nO,CullFaceNone:WL,Curve:bl,CurvePath:pR,CustomBlending:XL,CustomToneMapping:vP,CylinderGeometry:mm,Cylindrical:b9,Data3DTexture:Vb,DataArrayTexture:O2,DataTexture:Fp,DataTextureLoader:d3,DataUtils:Cf,DecrementStencilOp:pO,DecrementWrapStencilOp:gO,DefaultLoadingManager:kR,DepthFormat:mh,DepthStencilFormat:Wf,DepthTexture:tR,DirectionalLight:FR,DirectionalLightHelper:N9,DiscreteInterpolant:PR,DisplayP3ColorSpace:zb,DodecahedronGeometry:$2,DoubleSide:fl,DstAlphaFactor:eP,DstColorFactor:nP,DynamicCopyUsage:RO,DynamicDrawUsage:EO,DynamicReadUsage:CO,EdgesGeometry:o3,EllipseCurve:W2,EqualCompare:DP,EqualDepth:lP,EqualStencilFunc:wO,EquirectangularReflectionMapping:Qp,EquirectangularRefractionMapping:ag,Euler:Gg,EventDispatcher:rc,ExtrudeGeometry:K2,FileLoader:ec,Float16BufferAttribute:wF,Float32BufferAttribute:en,Float64BufferAttribute:SF,FloatType:Js,Fog:z2,FogExp2:B2,FramebufferTexture:oz,FrontSide:Qu,Frustum:F2,GLBufferAttribute:_9,GLSL1:NO,GLSL3:$_,GreaterCompare:FP,GreaterDepth:cP,GreaterEqualCompare:BP,GreaterEqualDepth:uP,GreaterEqualStencilFunc:MO,GreaterStencilFunc:_O,GridHelper:R9,Group:Cp,HalfFloatType:co,HemisphereLight:IR,HemisphereLightHelper:P9,HemisphereLightProbe:Qz,IcosahedronGeometry:Xg,ImageBitmapLoader:Kz,ImageLoader:Mg,ImageUtils:Gb,IncrementStencilOp:dO,IncrementWrapStencilOp:mO,InstancedBufferAttribute:nm,InstancedBufferGeometry:HR,InstancedInterleavedBuffer:S9,InstancedMesh:aR,Int16BufferAttribute:yF,Int32BufferAttribute:xF,Int8BufferAttribute:mF,IntType:Rb,InterleavedBuffer:H2,InterleavedBufferAttribute:jf,Interpolant:Zg,InterpolateDiscrete:cg,InterpolateLinear:hg,InterpolateSmooth:py,InvertStencilOp:vO,KeepStencilOp:my,KeyframeTrack:Ml,LOD:sR,LatheGeometry:qg,Layers:Of,LessCompare:IP,LessDepth:aP,LessEqualCompare:OP,LessEqualDepth:Qy,LessEqualStencilFunc:SO,LessStencilFunc:xO,Light:Ih,LightProbe:ix,Line:bh,Line3:E9,LineBasicMaterial:go,LineCurve:j2,LineCurve3:dR,LineDashedMaterial:TR,LineLoop:lR,LineSegments:iu,LinearEncoding:Bb,LinearFilter:qr,LinearInterpolant:c3,LinearMipMapLinearFilter:aO,LinearMipMapNearestFilter:oO,LinearMipmapLinearFilter:_h,LinearMipmapNearestFilter:Pb,LinearSRGBColorSpace:gl,LinearToneMapping:pP,Loader:Oo,LoaderUtils:r5,LoadingManager:f3,LoopOnce:AP,LoopPingPong:CP,LoopRepeat:TP,LuminanceAlphaFormat:_P,LuminanceFormat:SP,MOUSE:Gl,Material:Ns,MaterialLoader:sx,MathUtils:XO,Matrix3:jn,Matrix4:Fn,MaxEquation:E_,Mesh:ws,MeshBasicMaterial:kh,MeshDepthMaterial:Yb,MeshDistanceMaterial:$b,MeshLambertMaterial:ER,MeshMatcapMaterial:AR,MeshNormalMaterial:MR,MeshPhongMaterial:_R,MeshPhysicalMaterial:SR,MeshStandardMaterial:a3,MeshToonMaterial:bR,MinEquation:M_,MirroredRepeatWrapping:ug,MixOperation:fP,MultiplyBlending:b_,MultiplyOperation:Hg,NearestFilter:Ri,NearestMipMapLinearFilter:sO,NearestMipMapNearestFilter:iO,NearestMipmapLinearFilter:k0,NearestMipmapNearestFilter:e2,NeverCompare:NP,NeverDepth:sP,NeverStencilFunc:yO,NoBlending:Xu,NoColorSpace:vh,NoToneMapping:Zl,NormalAnimationBlendMode:D2,NormalBlending:If,NotEqualCompare:UP,NotEqualDepth:hP,NotEqualStencilFunc:bO,NumberKeyframeTrack:Sg,Object3D:ur,ObjectLoader:$z,ObjectSpaceNormalMap:RP,OctahedronGeometry:Yg,OneFactor:KL,OneMinusDstAlphaFactor:tP,OneMinusDstColorFactor:rP,OneMinusSrcAlphaFactor:Cb,OneMinusSrcColorFactor:QL,OrthographicCamera:Jl,PCFShadowMap:k2,PCFSoftShadowMap:R0,PMREMGenerator:K_,Path:vg,PerspectiveCamera:Ni,Plane:Fu,PlaneGeometry:jg,PlaneHelper:F9,PointLight:OR,PointLightHelper:C9,Points:uR,PointsMaterial:Qb,PolarGridHelper:k9,PolyhedronGeometry:Nh,PositionalAudio:s9,PropertyBinding:cr,PropertyMixer:WR,QuadraticBezierCurve:n3,QuadraticBezierCurve3:r3,Quaternion:Qs,QuaternionKeyframeTrack:gm,QuaternionLinearInterpolant:RR,RED_GREEN_RGTC2_Format:X_,RED_RGTC1_Format:EP,REVISION:zg,RGBADepthPacking:PP,RGBAFormat:uo,RGBAIntegerFormat:Fb,RGBA_ASTC_10x10_Format:V_,RGBA_ASTC_10x5_Format:z_,RGBA_ASTC_10x6_Format:H_,RGBA_ASTC_10x8_Format:G_,RGBA_ASTC_12x10_Format:W_,RGBA_ASTC_12x12_Format:j_,RGBA_ASTC_4x4_Format:k_,RGBA_ASTC_5x4_Format:N_,RGBA_ASTC_5x5_Format:I_,RGBA_ASTC_6x5_Format:D_,RGBA_ASTC_6x6_Format:O_,RGBA_ASTC_8x5_Format:F_,RGBA_ASTC_8x6_Format:U_,RGBA_ASTC_8x8_Format:B_,RGBA_BPTC_Format:dy,RGBA_ETC2_EAC_Format:R_,RGBA_PVRTC_2BPPV1_Format:L_,RGBA_PVRTC_4BPPV1_Format:C_,RGBA_S3TC_DXT1_Format:cy,RGBA_S3TC_DXT3_Format:hy,RGBA_S3TC_DXT5_Format:fy,RGB_ETC1_Format:MP,RGB_ETC2_Format:P_,RGB_PVRTC_2BPPV1_Format:T_,RGB_PVRTC_4BPPV1_Format:A_,RGB_S3TC_DXT1_Format:uy,RGFormat:bP,RGIntegerFormat:Ob,RawShaderMaterial:wR,Ray:ed,Raycaster:w3,RectAreaLight:BR,RedFormat:Ib,RedIntegerFormat:Db,ReinhardToneMapping:mP,RenderTarget:VP,RepeatWrapping:lg,ReplaceStencilOp:fO,ReverseSubtractEquation:$L,RingGeometry:J2,SIGNED_RED_GREEN_RGTC2_Format:Y_,SIGNED_RED_RGTC1_Format:q_,SRGBColorSpace:Un,Scene:gg,ShaderChunk:Gn,ShaderLib:cl,ShaderMaterial:yl,ShadowMaterial:xR,Shape:Ff,ShapeGeometry:Q2,ShapePath:z9,ShapeUtils:Ql,ShortType:xP,Skeleton:G2,SkeletonHelper:T9,SkinnedMesh:oR,Source:Tf,Sphere:_l,SphereGeometry:$g,Spherical:s5,SphericalHarmonics3:zR,SplineCurve:i3,SpotLight:DR,SpotLightHelper:A9,Sprite:iR,SpriteMaterial:Kb,SrcAlphaFactor:Tb,SrcAlphaSaturateFactor:iP,SrcColorFactor:JL,StaticCopyUsage:PO,StaticDrawUsage:dg,StaticReadUsage:TO,StereoCamera:t9,StreamCopyUsage:kO,StreamDrawUsage:AO,StreamReadUsage:LO,StringKeyframeTrack:rd,SubtractEquation:YL,SubtractiveBlending:__,TOUCH:Ou,TangentSpaceNormalMap:Rh,TetrahedronGeometry:ex,Texture:Mi,TextureLoader:jz,TorusGeometry:tx,TorusKnotGeometry:nx,Triangle:Lo,TriangleFanDrawMode:cO,TriangleStripDrawMode:uO,TrianglesDrawMode:lO,TubeGeometry:rx,TwoPassDoubleSide:rO,UVMapping:N2,Uint16BufferAttribute:Wb,Uint32BufferAttribute:jb,Uint8BufferAttribute:gF,Uint8ClampedBufferAttribute:vF,Uniform:x3,UniformsGroup:w9,UniformsLib:Gt,UniformsUtils:qP,UnsignedByteType:Kl,UnsignedInt248Type:ph,UnsignedIntType:Vu,UnsignedShort4444Type:kb,UnsignedShort5551Type:Nb,UnsignedShortType:I2,VSMShadowMap:sl,Vector2:xt,Vector3:ve,Vector4:Ar,VectorKeyframeTrack:_g,VideoTexture:sz,WebGL1Renderer:nR,WebGL3DRenderTarget:iF,WebGLArrayRenderTarget:rF,WebGLCoordinateSystem:jl,WebGLCubeRenderTarget:qb,WebGLMultipleRenderTargets:sF,WebGLRenderTarget:vl,WebGLRenderer:Zb,WebGLUtils:QP,WebGPUCoordinateSystem:pg,WireframeGeometry:yR,WrapAroundEnding:fg,ZeroCurvatureEnding:Ef,ZeroFactor:ZL,ZeroSlopeEnding:Af,ZeroStencilOp:hO,_SRGBAFormat:t2,sRGBEncoding:gh},Symbol.toStringTag,{value:"Module"}));var nh={},G9={get exports(){return nh},set exports(n){nh=n}},id={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */id.ConcurrentRoot=1;id.ContinuousEventPriority=4;id.DefaultEventPriority=16;id.DiscreteEventPriority=1;id.IdleEventPriority=536870912;id.LegacyRoot=0;(function(n){n.exports=id})(G9);function V9(n){let e;const t=new Set,r=(u,c)=>{const h=typeof u=="function"?u(e):u;if(h!==e){const d=e;e=c?h:Object.assign({},e,h),t.forEach(m=>m(e,d))}},i=()=>e,s=(u,c=i,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let d=c(e);function m(){const v=c(e);if(!h(d,v)){const w=d;u(d=v,w)}}return t.add(m),()=>t.delete(m)},l={setState:r,getState:i,subscribe:(u,c,h)=>c||h?s(u,c,h):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const W9=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),DA=W9?qe.useEffect:qe.useLayoutEffect;function XR(n){const e=typeof n=="function"?V9(n):n,t=(r=e.getState,i=Object.is)=>{const[,s]=qe.useReducer(x=>x+1,0),o=e.getState(),a=qe.useRef(o),l=qe.useRef(r),u=qe.useRef(i),c=qe.useRef(!1),h=qe.useRef();h.current===void 0&&(h.current=r(o));let d,m=!1;(a.current!==o||l.current!==r||u.current!==i||c.current)&&(d=r(o),m=!i(h.current,d)),DA(()=>{m&&(h.current=d),a.current=o,l.current=r,u.current=i,c.current=!1});const v=qe.useRef(o);DA(()=>{const x=()=>{try{const S=e.getState(),_=l.current(S);u.current(h.current,_)||(a.current=S,h.current=_,s())}catch{c.current=!0,s()}},g=e.subscribe(x);return e.getState()!==v.current&&x(),g},[]);const w=m?d:h.current;return qe.useDebugValue(w),w};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var o5={},j9={get exports(){return o5},set exports(n){o5=n}},Eg={},q9={get exports(){return Eg},set exports(n){Eg=n}},YR={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(W,Y){var $=W.length;W.push(Y);e:for(;0<$;){var oe=$-1>>>1,D=W[oe];if(0<i(D,Y))W[oe]=Y,W[$]=D,$=oe;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Y=W[0],$=W.pop();if($!==Y){W[0]=$;e:for(var oe=0,D=W.length,j=D>>>1;oe<j;){var K=2*(oe+1)-1,ae=W[K],fe=K+1,we=W[fe];if(0>i(ae,$))fe<D&&0>i(we,ae)?(W[oe]=we,W[fe]=$,oe=fe):(W[oe]=ae,W[K]=$,oe=K);else if(fe<D&&0>i(we,$))W[oe]=we,W[fe]=$,oe=fe;else break e}}return Y}function i(W,Y){var $=W.sortIndex-Y.sortIndex;return $!==0?$:W.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,m=!1,v=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(W){for(var Y=t(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=W)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=t(u)}}function T(W){if(w=!1,_(W),!v)if(t(l)!==null)v=!0,ie(L);else{var Y=t(u);Y!==null&&ce(T,Y.startTime-W)}}function L(W,Y){v=!1,w&&(w=!1,g(k),k=-1),m=!0;var $=d;try{for(_(Y),h=t(l);h!==null&&(!(h.expirationTime>Y)||W&&!F());){var oe=h.callback;if(typeof oe=="function"){h.callback=null,d=h.priorityLevel;var D=oe(h.expirationTime<=Y);Y=n.unstable_now(),typeof D=="function"?h.callback=D:h===t(l)&&r(l),_(Y)}else r(l);h=t(l)}if(h!==null)var j=!0;else{var K=t(u);K!==null&&ce(T,K.startTime-Y),j=!1}return j}finally{h=null,d=$,m=!1}}var P=!1,N=null,k=-1,R=5,U=-1;function F(){return!(n.unstable_now()-U<R)}function z(){if(N!==null){var W=n.unstable_now();U=W;var Y=!0;try{Y=N(!0,W)}finally{Y?V():(P=!1,N=null)}}else P=!1}var V;if(typeof S=="function")V=function(){S(z)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,J=G.port2;G.port1.onmessage=z,V=function(){J.postMessage(null)}}else V=function(){x(z,0)};function ie(W){N=W,P||(P=!0,V())}function ce(W,Y){k=x(function(){W(n.unstable_now())},Y)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,ie(L))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return d},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(W){switch(d){case 1:case 2:case 3:var Y=3;break;default:Y=d}var $=d;d=Y;try{return W()}finally{d=$}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,Y){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var $=d;d=W;try{return Y()}finally{d=$}},n.unstable_scheduleCallback=function(W,Y,$){var oe=n.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?oe+$:oe):$=oe,W){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=$+D,W={id:c++,callback:Y,priorityLevel:W,startTime:$,expirationTime:D,sortIndex:-1},$>oe?(W.sortIndex=$,e(u,W),t(l)===null&&W===t(u)&&(w?(g(k),k=-1):w=!0,ce(T,$-oe))):(W.sortIndex=D,e(l,W),v||m||(v=!0,ie(L))),W},n.unstable_shouldYield=F,n.unstable_wrapCallback=function(W){var Y=d;return function(){var $=d;d=Y;try{return W.apply(this,arguments)}finally{d=$}}}})(YR);(function(n){n.exports=YR})(q9);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X9=function(e){var t={},r=qe,i=Eg,s=Object.assign;function o(f){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+f,b=1;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+f+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),L=Symbol.iterator;function P(f){return f===null||typeof f!="object"?null:(f=L&&f[L]||f["@@iterator"],typeof f=="function"?f:null)}function N(f){if(f==null)return null;if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case c:return"Fragment";case u:return"Portal";case d:return"Profiler";case h:return"StrictMode";case x:return"Suspense";case g:return"SuspenseList"}if(typeof f=="object")switch(f.$$typeof){case v:return(f.displayName||"Context")+".Consumer";case m:return(f._context.displayName||"Context")+".Provider";case w:var p=f.render;return f=f.displayName,f||(f=p.displayName||p.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case S:return p=f.displayName||null,p!==null?p:N(f.type)||"Memo";case _:p=f._payload,f=f._init;try{return N(f(p))}catch{}}return null}function k(f){var p=f.type;switch(f.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return f=p.render,f=f.displayName||f.name||"",p.displayName||(f!==""?"ForwardRef("+f+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N(p);case 8:return p===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function R(f){var p=f,b=f;if(f.alternate)for(;p.return;)p=p.return;else{f=p;do p=f,p.flags&4098&&(b=p.return),f=p.return;while(f)}return p.tag===3?b:null}function U(f){if(R(f)!==f)throw Error(o(188))}function F(f){var p=f.alternate;if(!p){if(p=R(f),p===null)throw Error(o(188));return p!==f?null:f}for(var b=f,E=p;;){var I=b.return;if(I===null)break;var H=I.alternate;if(H===null){if(E=I.return,E!==null){b=E;continue}break}if(I.child===H.child){for(H=I.child;H;){if(H===b)return U(I),f;if(H===E)return U(I),p;H=H.sibling}throw Error(o(188))}if(b.return!==E.return)b=I,E=H;else{for(var Me=!1,Fe=I.child;Fe;){if(Fe===b){Me=!0,b=I,E=H;break}if(Fe===E){Me=!0,E=I,b=H;break}Fe=Fe.sibling}if(!Me){for(Fe=H.child;Fe;){if(Fe===b){Me=!0,b=H,E=I;break}if(Fe===E){Me=!0,E=H,b=I;break}Fe=Fe.sibling}if(!Me)throw Error(o(189))}}if(b.alternate!==E)throw Error(o(190))}if(b.tag!==3)throw Error(o(188));return b.stateNode.current===b?f:p}function z(f){return f=F(f),f!==null?V(f):null}function V(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){var p=V(f);if(p!==null)return p;f=f.sibling}return null}function G(f){if(f.tag===5||f.tag===6)return f;for(f=f.child;f!==null;){if(f.tag!==4){var p=G(f);if(p!==null)return p}f=f.sibling}return null}var J=Array.isArray,ie=e.getPublicInstance,ce=e.getRootHostContext,W=e.getChildHostContext,Y=e.prepareForCommit,$=e.resetAfterCommit,oe=e.createInstance,D=e.appendInitialChild,j=e.finalizeInitialChildren,K=e.prepareUpdate,ae=e.shouldSetTextContent,fe=e.createTextInstance,we=e.scheduleTimeout,Ee=e.cancelTimeout,Ce=e.noTimeout,Ye=e.isPrimaryRenderer,Ne=e.supportsMutation,he=e.supportsPersistence,Oe=e.supportsHydration,Ae=e.getInstanceFromNode,_e=e.preparePortalMount,ne=e.getCurrentEventPriority,ut=e.detachDeletedInstance,$e=e.supportsMicrotasks,Be=e.scheduleMicrotask,Qe=e.supportsTestSelectors,dt=e.findFiberRoot,mt=e.getBoundingRect,ue=e.getTextContent,Q=e.isHiddenSubtree,Re=e.matchAccessibilityRole,Je=e.setFocusIfFocusable,Ze=e.setupIntersectionObserver,ct=e.appendChild,vt=e.appendChildToContainer,ot=e.commitTextUpdate,Le=e.commitMount,Ut=e.commitUpdate,Tt=e.insertBefore,Nt=e.insertInContainerBefore,Ct=e.removeChild,Se=e.removeChildFromContainer,et=e.resetTextContent,pt=e.hideInstance,Te=e.hideTextInstance,De=e.unhideInstance,Ge=e.unhideTextInstance,bt=e.clearContainer,Et=e.cloneInstance,At=e.createContainerChildSet,zt=e.appendChildToContainerChildSet,_n=e.finalizeContainerChildren,Mn=e.replaceContainerChildren,fn=e.cloneHiddenInstance,Xn=e.cloneHiddenTextInstance,Ft=e.canHydrateInstance,ti=e.canHydrateTextInstance,ni=e.canHydrateSuspenseInstance,yr=e.isSuspenseInstancePending,tr=e.isSuspenseInstanceFallback,sr=e.registerSuspenseInstanceRetry,nr=e.getNextHydratableSibling,xn=e.getFirstHydratableChild,is=e.getFirstHydratableChildWithinContainer,gi=e.getFirstHydratableChildWithinSuspenseInstance,q=e.hydrateInstance,O=e.hydrateTextInstance,ee=e.hydrateSuspenseInstance,me=e.getNextHydratableInstanceAfterSuspenseInstance,de=e.commitHydratedContainer,xe=e.commitHydratedSuspenseInstance,Ve=e.clearSuspenseBoundary,Xe=e.clearSuspenseBoundaryFromContainer,it=e.shouldDeleteUnhydratedTailInstances,rt=e.didNotMatchHydratedContainerTextInstance,ht=e.didNotMatchHydratedTextInstance,nt;function jt(f){if(nt===void 0)try{throw Error()}catch(b){var p=b.stack.trim().match(/\n( *(at )?)/);nt=p&&p[1]||""}return`
`+nt+f}var kt=!1;function Dt(f,p){if(!f||kt)return"";kt=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(It){var E=It}Reflect.construct(f,[],p)}else{try{p.call()}catch(It){E=It}f.call(p.prototype)}else{try{throw Error()}catch(It){E=It}f()}}catch(It){if(It&&E&&typeof It.stack=="string"){for(var I=It.stack.split(`
`),H=E.stack.split(`
`),Me=I.length-1,Fe=H.length-1;1<=Me&&0<=Fe&&I[Me]!==H[Fe];)Fe--;for(;1<=Me&&0<=Fe;Me--,Fe--)if(I[Me]!==H[Fe]){if(Me!==1||Fe!==1)do if(Me--,Fe--,0>Fe||I[Me]!==H[Fe]){var ft=`
`+I[Me].replace(" at new "," at ");return f.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",f.displayName)),ft}while(1<=Me&&0<=Fe);break}}}finally{kt=!1,Error.prepareStackTrace=b}return(f=f?f.displayName||f.name:"")?jt(f):""}var nn=Object.prototype.hasOwnProperty,on=[],sn=-1;function Vt(f){return{current:f}}function dn(f){0>sn||(f.current=on[sn],on[sn]=null,sn--)}function Yt(f,p){sn++,on[sn]=f.current,f.current=p}var En={},pn=Vt(En),vn=Vt(!1),rr=En;function Yn(f,p){var b=f.type.contextTypes;if(!b)return En;var E=f.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===p)return E.__reactInternalMemoizedMaskedChildContext;var I={},H;for(H in b)I[H]=p[H];return E&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=p,f.__reactInternalMemoizedMaskedChildContext=I),I}function or(f){return f=f.childContextTypes,f!=null}function zr(){dn(vn),dn(pn)}function cn(f,p,b){if(pn.current!==En)throw Error(o(168));Yt(pn,p),Yt(vn,b)}function xr(f,p,b){var E=f.stateNode;if(p=p.childContextTypes,typeof E.getChildContext!="function")return b;E=E.getChildContext();for(var I in E)if(!(I in p))throw Error(o(108,k(f)||"Unknown",I));return s({},b,E)}function Cn(f){return f=(f=f.stateNode)&&f.__reactInternalMemoizedMergedChildContext||En,rr=pn.current,Yt(pn,f),Yt(vn,vn.current),!0}function zn(f,p,b){var E=f.stateNode;if(!E)throw Error(o(169));b?(f=xr(f,p,rr),E.__reactInternalMemoizedMergedChildContext=f,dn(vn),dn(pn),Yt(pn,f)):dn(vn),Yt(vn,b)}var Mr=Math.clz32?Math.clz32:vo,Uo=Math.log,Fi=Math.LN2;function vo(f){return f>>>=0,f===0?32:31-(Uo(f)/Fi|0)|0}var lu=64,ac=4194304;function Ha(f){switch(f&-f){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return f&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return f}}function lc(f,p){var b=f.pendingLanes;if(b===0)return 0;var E=0,I=f.suspendedLanes,H=f.pingedLanes,Me=b&268435455;if(Me!==0){var Fe=Me&~I;Fe!==0?E=Ha(Fe):(H&=Me,H!==0&&(E=Ha(H)))}else Me=b&~I,Me!==0?E=Ha(Me):H!==0&&(E=Ha(H));if(E===0)return 0;if(p!==0&&p!==E&&!(p&I)&&(I=E&-E,H=p&-p,I>=H||I===16&&(H&4194240)!==0))return p;if(E&4&&(E|=b&16),p=f.entangledLanes,p!==0)for(f=f.entanglements,p&=E;0<p;)b=31-Mr(p),I=1<<b,E|=f[b],p&=~I;return E}function wm(f,p){switch(f){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sm(f,p){for(var b=f.suspendedLanes,E=f.pingedLanes,I=f.expirationTimes,H=f.pendingLanes;0<H;){var Me=31-Mr(H),Fe=1<<Me,ft=I[Me];ft===-1?(!(Fe&b)||Fe&E)&&(I[Me]=wm(Fe,p)):ft<=p&&(f.expiredLanes|=Fe),H&=~Fe}}function Bo(f){return f=f.pendingLanes&-1073741825,f!==0?f:f&1073741824?1073741824:0}function Ll(f){for(var p=[],b=0;31>b;b++)p.push(f);return p}function la(f,p,b){f.pendingLanes|=p,p!==536870912&&(f.suspendedLanes=0,f.pingedLanes=0),f=f.eventTimes,p=31-Mr(p),f[p]=b}function ad(f,p){var b=f.pendingLanes&~p;f.pendingLanes=p,f.suspendedLanes=0,f.pingedLanes=0,f.expiredLanes&=p,f.mutableReadLanes&=p,f.entangledLanes&=p,p=f.entanglements;var E=f.eventTimes;for(f=f.expirationTimes;0<b;){var I=31-Mr(b),H=1<<I;p[I]=0,E[I]=-1,f[I]=-1,b&=~H}}function Ui(f,p){var b=f.entangledLanes|=p;for(f=f.entanglements;b;){var E=31-Mr(b),I=1<<E;I&p|f[E]&p&&(f[E]|=p),b&=~I}}var Qn=0;function Bh(f){return f&=-f,1<f?4<f?f&268435455?16:536870912:4:1}var wn=i.unstable_scheduleCallback,ld=i.unstable_cancelCallback,_m=i.unstable_shouldYield,ua=i.unstable_requestPaint,ri=i.unstable_now,uc=i.unstable_ImmediatePriority,cc=i.unstable_UserBlockingPriority,uu=i.unstable_NormalPriority,bm=i.unstable_IdlePriority,hc=null,yo=null;function zh(f){if(yo&&typeof yo.onCommitFiberRoot=="function")try{yo.onCommitFiberRoot(hc,f,void 0,(f.current.flags&128)===128)}catch{}}function cu(f,p){return f===p&&(f!==0||1/f===1/p)||f!==f&&p!==p}var Wi=typeof Object.is=="function"?Object.is:cu,zo=null,ca=!1,hu=!1;function fu(f){zo===null?zo=[f]:zo.push(f)}function ud(f){ca=!0,fu(f)}function to(){if(!hu&&zo!==null){hu=!0;var f=0,p=Qn;try{var b=zo;for(Qn=1;f<b.length;f++){var E=b[f];do E=E(!0);while(E!==null)}zo=null,ca=!1}catch(I){throw zo!==null&&(zo=zo.slice(f+1)),wn(uc,to),I}finally{Qn=p,hu=!1}}return null}var cd=a.ReactCurrentBatchConfig;function du(f,p){if(Wi(f,p))return!0;if(typeof f!="object"||f===null||typeof p!="object"||p===null)return!1;var b=Object.keys(f),E=Object.keys(p);if(b.length!==E.length)return!1;for(E=0;E<b.length;E++){var I=b[E];if(!nn.call(p,I)||!Wi(f[I],p[I]))return!1}return!0}function ha(f){switch(f.tag){case 5:return jt(f.type);case 16:return jt("Lazy");case 13:return jt("Suspense");case 19:return jt("SuspenseList");case 0:case 2:case 15:return f=Dt(f.type,!1),f;case 11:return f=Dt(f.type.render,!1),f;case 1:return f=Dt(f.type,!0),f;default:return""}}function Ai(f,p){if(f&&f.defaultProps){p=s({},p),f=f.defaultProps;for(var b in f)p[b]===void 0&&(p[b]=f[b]);return p}return p}var fc=Vt(null),Ho=null,ss=null,pu=null;function Ga(){pu=ss=Ho=null}function hd(f,p,b){Ye?(Yt(fc,p._currentValue),p._currentValue=b):(Yt(fc,p._currentValue2),p._currentValue2=b)}function Pl(f){var p=fc.current;dn(fc),Ye?f._currentValue=p:f._currentValue2=p}function Hh(f,p,b){for(;f!==null;){var E=f.alternate;if((f.childLanes&p)!==p?(f.childLanes|=p,E!==null&&(E.childLanes|=p)):E!==null&&(E.childLanes&p)!==p&&(E.childLanes|=p),f===b)break;f=f.return}}function fa(f,p){Ho=f,pu=ss=null,f=f.dependencies,f!==null&&f.firstContext!==null&&(f.lanes&p&&(hs=!0),f.firstContext=null)}function os(f){var p=Ye?f._currentValue:f._currentValue2;if(pu!==f)if(f={context:f,memoizedValue:p,next:null},ss===null){if(Ho===null)throw Error(o(308));ss=f,Ho.dependencies={lanes:0,firstContext:f}}else ss=ss.next=f;return p}var no=null,ro=!1;function mu(f){f.updateQueue={baseState:f.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dc(f,p){f=f.updateQueue,p.updateQueue===f&&(p.updateQueue={baseState:f.baseState,firstBaseUpdate:f.firstBaseUpdate,lastBaseUpdate:f.lastBaseUpdate,shared:f.shared,effects:f.effects})}function xo(f,p){return{eventTime:f,lane:p,tag:0,payload:null,callback:null,next:null}}function da(f,p){var b=f.updateQueue;b!==null&&(b=b.shared,li!==null&&f.mode&1&&!(In&2)?(f=b.interleaved,f===null?(p.next=p,no===null?no=[b]:no.push(b)):(p.next=f.next,f.next=p),b.interleaved=p):(f=b.pending,f===null?p.next=p:(p.next=f.next,f.next=p),b.pending=p))}function Va(f,p,b){if(p=p.updateQueue,p!==null&&(p=p.shared,(b&4194240)!==0)){var E=p.lanes;E&=f.pendingLanes,b|=E,p.lanes=b,Ui(f,b)}}function Rl(f,p){var b=f.updateQueue,E=f.alternate;if(E!==null&&(E=E.updateQueue,b===E)){var I=null,H=null;if(b=b.firstBaseUpdate,b!==null){do{var Me={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};H===null?I=H=Me:H=H.next=Me,b=b.next}while(b!==null);H===null?I=H=p:H=H.next=p}else I=H=p;b={baseState:E.baseState,firstBaseUpdate:I,lastBaseUpdate:H,shared:E.shared,effects:E.effects},f.updateQueue=b;return}f=b.lastBaseUpdate,f===null?b.firstBaseUpdate=p:f.next=p,b.lastBaseUpdate=p}function kl(f,p,b,E){var I=f.updateQueue;ro=!1;var H=I.firstBaseUpdate,Me=I.lastBaseUpdate,Fe=I.shared.pending;if(Fe!==null){I.shared.pending=null;var ft=Fe,It=ft.next;ft.next=null,Me===null?H=It:Me.next=It,Me=ft;var Kt=f.alternate;Kt!==null&&(Kt=Kt.updateQueue,Fe=Kt.lastBaseUpdate,Fe!==Me&&(Fe===null?Kt.firstBaseUpdate=It:Fe.next=It,Kt.lastBaseUpdate=ft))}if(H!==null){var Dn=I.baseState;Me=0,Kt=It=ft=null,Fe=H;do{var mn=Fe.lane,Rr=Fe.eventTime;if((E&mn)===mn){Kt!==null&&(Kt=Kt.next={eventTime:Rr,lane:0,tag:Fe.tag,payload:Fe.payload,callback:Fe.callback,next:null});e:{var un=f,Us=Fe;switch(mn=p,Rr=b,Us.tag){case 1:if(un=Us.payload,typeof un=="function"){Dn=un.call(Rr,Dn,mn);break e}Dn=un;break e;case 3:un.flags=un.flags&-65537|128;case 0:if(un=Us.payload,mn=typeof un=="function"?un.call(Rr,Dn,mn):un,mn==null)break e;Dn=s({},Dn,mn);break e;case 2:ro=!0}}Fe.callback!==null&&Fe.lane!==0&&(f.flags|=64,mn=I.effects,mn===null?I.effects=[Fe]:mn.push(Fe))}else Rr={eventTime:Rr,lane:mn,tag:Fe.tag,payload:Fe.payload,callback:Fe.callback,next:null},Kt===null?(It=Kt=Rr,ft=Dn):Kt=Kt.next=Rr,Me|=mn;if(Fe=Fe.next,Fe===null){if(Fe=I.shared.pending,Fe===null)break;mn=Fe,Fe=mn.next,mn.next=null,I.lastBaseUpdate=mn,I.shared.pending=null}}while(1);if(Kt===null&&(ft=Dn),I.baseState=ft,I.firstBaseUpdate=It,I.lastBaseUpdate=Kt,p=I.shared.interleaved,p!==null){I=p;do Me|=I.lane,I=I.next;while(I!==p)}else H===null&&(I.shared.lanes=0);Xo|=Me,f.lanes=Me,f.memoizedState=Dn}}function Wa(f,p,b){if(f=p.effects,p.effects=null,f!==null)for(p=0;p<f.length;p++){var E=f[p],I=E.callback;if(I!==null){if(E.callback=null,E=b,typeof I!="function")throw Error(o(191,I));I.call(E)}}}var pc=new r.Component().refs;function A(f,p,b,E){p=f.memoizedState,b=b(E,p),b=b==null?p:s({},p,b),f.memoizedState=b,f.lanes===0&&(f.updateQueue.baseState=b)}var Z={isMounted:function(f){return(f=f._reactInternals)?R(f)===f:!1},enqueueSetState:function(f,p,b){f=f._reactInternals;var E=ps(),I=$o(f),H=xo(E,I);H.payload=p,b!=null&&(H.callback=b),da(f,H),p=Os(f,I,E),p!==null&&Va(p,f,I)},enqueueReplaceState:function(f,p,b){f=f._reactInternals;var E=ps(),I=$o(f),H=xo(E,I);H.tag=1,H.payload=p,b!=null&&(H.callback=b),da(f,H),p=Os(f,I,E),p!==null&&Va(p,f,I)},enqueueForceUpdate:function(f,p){f=f._reactInternals;var b=ps(),E=$o(f),I=xo(b,E);I.tag=2,p!=null&&(I.callback=p),da(f,I),p=Os(f,E,b),p!==null&&Va(p,f,E)}};function be(f,p,b,E,I,H,Me){return f=f.stateNode,typeof f.shouldComponentUpdate=="function"?f.shouldComponentUpdate(E,H,Me):p.prototype&&p.prototype.isPureReactComponent?!du(b,E)||!du(I,H):!0}function Pe(f,p,b){var E=!1,I=En,H=p.contextType;return typeof H=="object"&&H!==null?H=os(H):(I=or(p)?rr:pn.current,E=p.contextTypes,H=(E=E!=null)?Yn(f,I):En),p=new p(b,H),f.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Z,f.stateNode=p,p._reactInternals=f,E&&(f=f.stateNode,f.__reactInternalMemoizedUnmaskedChildContext=I,f.__reactInternalMemoizedMaskedChildContext=H),p}function He(f,p,b,E){f=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(b,E),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(b,E),p.state!==f&&Z.enqueueReplaceState(p,p.state,null)}function at(f,p,b,E){var I=f.stateNode;I.props=b,I.state=f.memoizedState,I.refs=pc,mu(f);var H=p.contextType;typeof H=="object"&&H!==null?I.context=os(H):(H=or(p)?rr:pn.current,I.context=Yn(f,H)),I.state=f.memoizedState,H=p.getDerivedStateFromProps,typeof H=="function"&&(A(f,p,H,b),I.state=f.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(p=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),p!==I.state&&Z.enqueueReplaceState(I,I.state,null),kl(f,b,I,E),I.state=f.memoizedState),typeof I.componentDidMount=="function"&&(f.flags|=4194308)}var Mt=[],Ht=0,rn=null,bn=0,ln=[],An=0,gr=null,fr=1,wr="";function Zr(f,p){Mt[Ht++]=bn,Mt[Ht++]=rn,rn=f,bn=p}function Ti(f,p,b){ln[An++]=fr,ln[An++]=wr,ln[An++]=gr,gr=f;var E=fr;f=wr;var I=32-Mr(E)-1;E&=~(1<<I),b+=1;var H=32-Mr(p)+I;if(30<H){var Me=I-I%5;H=(E&(1<<Me)-1).toString(32),E>>=Me,I-=Me,fr=1<<32-Mr(p)+I|b<<I|E,wr=H+f}else fr=1<<H|b<<I|E,wr=f}function io(f){f.return!==null&&(Zr(f,1),Ti(f,1,0))}function bs(f){for(;f===rn;)rn=Mt[--Ht],Mt[Ht]=null,bn=Mt[--Ht],Mt[Ht]=null;for(;f===gr;)gr=ln[--An],ln[An]=null,wr=ln[--An],ln[An]=null,fr=ln[--An],ln[An]=null}var Kr=null,as=null,Sr=!1,ja=!1,ls=null;function mc(f,p){var b=Aa(5,null,null,0);b.elementType="DELETED",b.stateNode=p,b.return=f,p=f.deletions,p===null?(f.deletions=[b],f.flags|=16):p.push(b)}function gc(f,p){switch(f.tag){case 5:return p=Ft(p,f.type,f.pendingProps),p!==null?(f.stateNode=p,Kr=f,as=xn(p),!0):!1;case 6:return p=ti(p,f.pendingProps),p!==null?(f.stateNode=p,Kr=f,as=null,!0):!1;case 13:if(p=ni(p),p!==null){var b=gr!==null?{id:fr,overflow:wr}:null;return f.memoizedState={dehydrated:p,treeContext:b,retryLane:1073741824},b=Aa(18,null,null,0),b.stateNode=p,b.return=f,f.child=b,Kr=f,as=null,!0}return!1;default:return!1}}function Nl(f){return(f.mode&1)!==0&&(f.flags&128)===0}function Ci(f){if(Sr){var p=as;if(p){var b=p;if(!gc(f,p)){if(Nl(f))throw Error(o(418));p=nr(b);var E=Kr;p&&gc(f,p)?mc(E,b):(f.flags=f.flags&-4097|2,Sr=!1,Kr=f)}}else{if(Nl(f))throw Error(o(418));f.flags=f.flags&-4097|2,Sr=!1,Kr=f}}}function gu(f){for(f=f.return;f!==null&&f.tag!==5&&f.tag!==3&&f.tag!==13;)f=f.return;Kr=f}function pa(f){if(!Oe||f!==Kr)return!1;if(!Sr)return gu(f),Sr=!0,!1;if(f.tag!==3&&(f.tag!==5||it(f.type)&&!ae(f.type,f.memoizedProps))){var p=as;if(p){if(Nl(f)){for(f=as;f;)f=nr(f);throw Error(o(418))}for(;p;)mc(f,p),p=nr(p)}}if(gu(f),f.tag===13){if(!Oe)throw Error(o(316));if(f=f.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));as=me(f)}else as=Kr?nr(f.stateNode):null;return!0}function Go(){Oe&&(as=Kr=null,ja=Sr=!1)}function vu(f){ls===null?ls=[f]:ls.push(f)}function Bi(f,p,b){if(f=b.ref,f!==null&&typeof f!="function"&&typeof f!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(o(309));var E=b.stateNode}if(!E)throw Error(o(147,f));var I=E,H=""+f;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===H?p.ref:(p=function(Me){var Fe=I.refs;Fe===pc&&(Fe=I.refs={}),Me===null?delete Fe[H]:Fe[H]=Me},p._stringRef=H,p)}if(typeof f!="string")throw Error(o(284));if(!b._owner)throw Error(o(290,f))}return f}function vc(f,p){throw f=Object.prototype.toString.call(p),Error(o(31,f==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":f))}function yc(f){var p=f._init;return p(f._payload)}function Gh(f){function p(Ke,ze){if(f){var st=Ke.deletions;st===null?(Ke.deletions=[ze],Ke.flags|=16):st.push(ze)}}function b(Ke,ze){if(!f)return null;for(;ze!==null;)p(Ke,ze),ze=ze.sibling;return null}function E(Ke,ze){for(Ke=new Map;ze!==null;)ze.key!==null?Ke.set(ze.key,ze):Ke.set(ze.index,ze),ze=ze.sibling;return Ke}function I(Ke,ze){return Ke=Rc(Ke,ze),Ke.index=0,Ke.sibling=null,Ke}function H(Ke,ze,st){return Ke.index=st,f?(st=Ke.alternate,st!==null?(st=st.index,st<ze?(Ke.flags|=2,ze):st):(Ke.flags|=2,ze)):(Ke.flags|=1048576,ze)}function Me(Ke){return f&&Ke.alternate===null&&(Ke.flags|=2),Ke}function Fe(Ke,ze,st,Xt){return ze===null||ze.tag!==6?(ze=Cx(st,Ke.mode,Xt),ze.return=Ke,ze):(ze=I(ze,st),ze.return=Ke,ze)}function ft(Ke,ze,st,Xt){var an=st.type;return an===c?Kt(Ke,ze,st.props.children,Xt,st.key):ze!==null&&(ze.elementType===an||typeof an=="object"&&an!==null&&an.$$typeof===_&&yc(an)===ze.type)?(Xt=I(ze,st.props),Xt.ref=Bi(Ke,ze,st),Xt.return=Ke,Xt):(Xt=M1(st.type,st.key,st.props,null,Ke.mode,Xt),Xt.ref=Bi(Ke,ze,st),Xt.return=Ke,Xt)}function It(Ke,ze,st,Xt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==st.containerInfo||ze.stateNode.implementation!==st.implementation?(ze=Lx(st,Ke.mode,Xt),ze.return=Ke,ze):(ze=I(ze,st.children||[]),ze.return=Ke,ze)}function Kt(Ke,ze,st,Xt,an){return ze===null||ze.tag!==7?(ze=ef(st,Ke.mode,Xt,an),ze.return=Ke,ze):(ze=I(ze,st),ze.return=Ke,ze)}function Dn(Ke,ze,st){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ze=Cx(""+ze,Ke.mode,st),ze.return=Ke,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case l:return st=M1(ze.type,ze.key,ze.props,null,Ke.mode,st),st.ref=Bi(Ke,null,ze),st.return=Ke,st;case u:return ze=Lx(ze,Ke.mode,st),ze.return=Ke,ze;case _:var Xt=ze._init;return Dn(Ke,Xt(ze._payload),st)}if(J(ze)||P(ze))return ze=ef(ze,Ke.mode,st,null),ze.return=Ke,ze;vc(Ke,ze)}return null}function mn(Ke,ze,st,Xt){var an=ze!==null?ze.key:null;if(typeof st=="string"&&st!==""||typeof st=="number")return an!==null?null:Fe(Ke,ze,""+st,Xt);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case l:return st.key===an?ft(Ke,ze,st,Xt):null;case u:return st.key===an?It(Ke,ze,st,Xt):null;case _:return an=st._init,mn(Ke,ze,an(st._payload),Xt)}if(J(st)||P(st))return an!==null?null:Kt(Ke,ze,st,Xt,null);vc(Ke,st)}return null}function Rr(Ke,ze,st,Xt,an){if(typeof Xt=="string"&&Xt!==""||typeof Xt=="number")return Ke=Ke.get(st)||null,Fe(ze,Ke,""+Xt,an);if(typeof Xt=="object"&&Xt!==null){switch(Xt.$$typeof){case l:return Ke=Ke.get(Xt.key===null?st:Xt.key)||null,ft(ze,Ke,Xt,an);case u:return Ke=Ke.get(Xt.key===null?st:Xt.key)||null,It(ze,Ke,Xt,an);case _:var Wn=Xt._init;return Rr(Ke,ze,st,Wn(Xt._payload),an)}if(J(Xt)||P(Xt))return Ke=Ke.get(st)||null,Kt(ze,Ke,Xt,an,null);vc(ze,Xt)}return null}function un(Ke,ze,st,Xt){for(var an=null,Wn=null,On=ze,pr=ze=0,ms=null;On!==null&&pr<st.length;pr++){On.index>pr?(ms=On,On=null):ms=On.sibling;var mr=mn(Ke,On,st[pr],Xt);if(mr===null){On===null&&(On=ms);break}f&&On&&mr.alternate===null&&p(Ke,On),ze=H(mr,ze,pr),Wn===null?an=mr:Wn.sibling=mr,Wn=mr,On=ms}if(pr===st.length)return b(Ke,On),Sr&&Zr(Ke,pr),an;if(On===null){for(;pr<st.length;pr++)On=Dn(Ke,st[pr],Xt),On!==null&&(ze=H(On,ze,pr),Wn===null?an=On:Wn.sibling=On,Wn=On);return Sr&&Zr(Ke,pr),an}for(On=E(Ke,On);pr<st.length;pr++)ms=Rr(On,Ke,pr,st[pr],Xt),ms!==null&&(f&&ms.alternate!==null&&On.delete(ms.key===null?pr:ms.key),ze=H(ms,ze,pr),Wn===null?an=ms:Wn.sibling=ms,Wn=ms);return f&&On.forEach(function(kc){return p(Ke,kc)}),Sr&&Zr(Ke,pr),an}function Us(Ke,ze,st,Xt){var an=P(st);if(typeof an!="function")throw Error(o(150));if(st=an.call(st),st==null)throw Error(o(151));for(var Wn=an=null,On=ze,pr=ze=0,ms=null,mr=st.next();On!==null&&!mr.done;pr++,mr=st.next()){On.index>pr?(ms=On,On=null):ms=On.sibling;var kc=mn(Ke,On,mr.value,Xt);if(kc===null){On===null&&(On=ms);break}f&&On&&kc.alternate===null&&p(Ke,On),ze=H(kc,ze,pr),Wn===null?an=kc:Wn.sibling=kc,Wn=kc,On=ms}if(mr.done)return b(Ke,On),Sr&&Zr(Ke,pr),an;if(On===null){for(;!mr.done;pr++,mr=st.next())mr=Dn(Ke,mr.value,Xt),mr!==null&&(ze=H(mr,ze,pr),Wn===null?an=mr:Wn.sibling=mr,Wn=mr);return Sr&&Zr(Ke,pr),an}for(On=E(Ke,On);!mr.done;pr++,mr=st.next())mr=Rr(On,Ke,pr,mr.value,Xt),mr!==null&&(f&&mr.alternate!==null&&On.delete(mr.key===null?pr:mr.key),ze=H(mr,ze,pr),Wn===null?an=mr:Wn.sibling=mr,Wn=mr);return f&&On.forEach(function(pI){return p(Ke,pI)}),Sr&&Zr(Ke,pr),an}function Ta(Ke,ze,st,Xt){if(typeof st=="object"&&st!==null&&st.type===c&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case l:e:{for(var an=st.key,Wn=ze;Wn!==null;){if(Wn.key===an){if(an=st.type,an===c){if(Wn.tag===7){b(Ke,Wn.sibling),ze=I(Wn,st.props.children),ze.return=Ke,Ke=ze;break e}}else if(Wn.elementType===an||typeof an=="object"&&an!==null&&an.$$typeof===_&&yc(an)===Wn.type){b(Ke,Wn.sibling),ze=I(Wn,st.props),ze.ref=Bi(Ke,Wn,st),ze.return=Ke,Ke=ze;break e}b(Ke,Wn);break}else p(Ke,Wn);Wn=Wn.sibling}st.type===c?(ze=ef(st.props.children,Ke.mode,Xt,st.key),ze.return=Ke,Ke=ze):(Xt=M1(st.type,st.key,st.props,null,Ke.mode,Xt),Xt.ref=Bi(Ke,ze,st),Xt.return=Ke,Ke=Xt)}return Me(Ke);case u:e:{for(Wn=st.key;ze!==null;){if(ze.key===Wn)if(ze.tag===4&&ze.stateNode.containerInfo===st.containerInfo&&ze.stateNode.implementation===st.implementation){b(Ke,ze.sibling),ze=I(ze,st.children||[]),ze.return=Ke,Ke=ze;break e}else{b(Ke,ze);break}else p(Ke,ze);ze=ze.sibling}ze=Lx(st,Ke.mode,Xt),ze.return=Ke,Ke=ze}return Me(Ke);case _:return Wn=st._init,Ta(Ke,ze,Wn(st._payload),Xt)}if(J(st))return un(Ke,ze,st,Xt);if(P(st))return Us(Ke,ze,st,Xt);vc(Ke,st)}return typeof st=="string"&&st!==""||typeof st=="number"?(st=""+st,ze!==null&&ze.tag===6?(b(Ke,ze.sibling),ze=I(ze,st),ze.return=Ke,Ke=ze):(b(Ke,ze),ze=Cx(st,Ke.mode,Xt),ze.return=Ke,Ke=ze),Me(Ke)):b(Ke,ze)}return Ta}var ji=Gh(!0),yu=Gh(!1),Il={},Ms=Vt(Il),wo=Vt(Il),So=Vt(Il);function Hr(f){if(f===Il)throw Error(o(174));return f}function qi(f,p){Yt(So,p),Yt(wo,f),Yt(Ms,Il),f=ce(p),dn(Ms),Yt(Ms,f)}function so(){dn(Ms),dn(wo),dn(So)}function ma(f){var p=Hr(So.current),b=Hr(Ms.current);p=W(b,f.type,p),b!==p&&(Yt(wo,f),Yt(Ms,p))}function Vo(f){wo.current===f&&(dn(Ms),dn(wo))}var _r=Vt(0);function _o(f){for(var p=f;p!==null;){if(p.tag===13){var b=p.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||yr(b)||tr(b)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Gr=[];function xu(){for(var f=0;f<Gr.length;f++){var p=Gr[f];Ye?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}Gr.length=0}var zi=a.ReactCurrentDispatcher,Vr=a.ReactCurrentBatchConfig,Wo=0,Pr=null,vi=null,Or=null,ga=!1,bo=!1,jo=0,xc=0;function Jr(){throw Error(o(321))}function va(f,p){if(p===null)return!1;for(var b=0;b<p.length&&b<f.length;b++)if(!Wi(f[b],p[b]))return!1;return!0}function wu(f,p,b,E,I,H){if(Wo=H,Pr=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,zi.current=f===null||f.memoizedState===null?Xh:Sx,f=b(E,I),bo){H=0;do{if(bo=!1,jo=0,25<=H)throw Error(o(301));H+=1,Or=vi=null,p.updateQueue=null,zi.current=_x,f=b(E,I)}while(bo)}if(zi.current=bc,p=vi!==null&&vi.next!==null,Wo=0,Or=vi=Pr=null,ga=!1,p)throw Error(o(300));return f}function Is(){var f=jo!==0;return jo=0,f}function yi(){var f={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Or===null?Pr.memoizedState=Or=f:Or=Or.next=f,Or}function $n(){if(vi===null){var f=Pr.alternate;f=f!==null?f.memoizedState:null}else f=vi.next;var p=Or===null?Pr.memoizedState:Or.next;if(p!==null)Or=p,vi=f;else{if(f===null)throw Error(o(310));vi=f,f={memoizedState:vi.memoizedState,baseState:vi.baseState,baseQueue:vi.baseQueue,queue:vi.queue,next:null},Or===null?Pr.memoizedState=Or=f:Or=Or.next=f}return Or}function ar(f,p){return typeof p=="function"?p(f):p}function Fr(f){var p=$n(),b=p.queue;if(b===null)throw Error(o(311));b.lastRenderedReducer=f;var E=vi,I=E.baseQueue,H=b.pending;if(H!==null){if(I!==null){var Me=I.next;I.next=H.next,H.next=Me}E.baseQueue=I=H,b.pending=null}if(I!==null){H=I.next,E=E.baseState;var Fe=Me=null,ft=null,It=H;do{var Kt=It.lane;if((Wo&Kt)===Kt)ft!==null&&(ft=ft.next={lane:0,action:It.action,hasEagerState:It.hasEagerState,eagerState:It.eagerState,next:null}),E=It.hasEagerState?It.eagerState:f(E,It.action);else{var Dn={lane:Kt,action:It.action,hasEagerState:It.hasEagerState,eagerState:It.eagerState,next:null};ft===null?(Fe=ft=Dn,Me=E):ft=ft.next=Dn,Pr.lanes|=Kt,Xo|=Kt}It=It.next}while(It!==null&&It!==H);ft===null?Me=E:ft.next=Fe,Wi(E,p.memoizedState)||(hs=!0),p.memoizedState=E,p.baseState=Me,p.baseQueue=ft,b.lastRenderedState=E}if(f=b.interleaved,f!==null){I=f;do H=I.lane,Pr.lanes|=H,Xo|=H,I=I.next;while(I!==f)}else I===null&&(b.lanes=0);return[p.memoizedState,b.dispatch]}function Qr(f){var p=$n(),b=p.queue;if(b===null)throw Error(o(311));b.lastRenderedReducer=f;var E=b.dispatch,I=b.pending,H=p.memoizedState;if(I!==null){b.pending=null;var Me=I=I.next;do H=f(H,Me.action),Me=Me.next;while(Me!==I);Wi(H,p.memoizedState)||(hs=!0),p.memoizedState=H,p.baseQueue===null&&(p.baseState=H),b.lastRenderedState=H}return[H,E]}function ya(){}function wc(f,p){var b=Pr,E=$n(),I=p(),H=!Wi(E.memoizedState,I);if(H&&(E.memoizedState=I,hs=!0),E=E.queue,Dl(fd.bind(null,b,E,f),[f]),E.getSnapshot!==p||H||Or!==null&&Or.memoizedState.tag&1){if(b.flags|=2048,us(9,Vh.bind(null,b,E,I,p),void 0,null),li===null)throw Error(o(349));Wo&30||Su(b,p,I)}return I}function Su(f,p,b){f.flags|=16384,f={getSnapshot:p,value:b},p=Pr.updateQueue,p===null?(p={lastEffect:null,stores:null},Pr.updateQueue=p,p.stores=[f]):(b=p.stores,b===null?p.stores=[f]:b.push(f))}function Vh(f,p,b,E){p.value=b,p.getSnapshot=E,Wh(p)&&Os(f,1,-1)}function fd(f,p,b){return b(function(){Wh(p)&&Os(f,1,-1)})}function Wh(f){var p=f.getSnapshot;f=f.value;try{var b=p();return!Wi(f,b)}catch{return!0}}function Es(f){var p=yi();return typeof f=="function"&&(f=f()),p.memoizedState=p.baseState=f,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ar,lastRenderedState:f},p.queue=f,f=f.dispatch=wx.bind(null,Pr,f),[p.memoizedState,f]}function us(f,p,b,E){return f={tag:f,create:p,destroy:b,deps:E,next:null},p=Pr.updateQueue,p===null?(p={lastEffect:null,stores:null},Pr.updateQueue=p,p.lastEffect=f.next=f):(b=p.lastEffect,b===null?p.lastEffect=f.next=f:(E=b.next,b.next=f,f.next=E,p.lastEffect=f)),f}function jh(){return $n().memoizedState}function _u(f,p,b,E){var I=yi();Pr.flags|=f,I.memoizedState=us(1|p,b,void 0,E===void 0?null:E)}function qh(f,p,b,E){var I=$n();E=E===void 0?null:E;var H=void 0;if(vi!==null){var Me=vi.memoizedState;if(H=Me.destroy,E!==null&&va(E,Me.deps)){I.memoizedState=us(p,b,H,E);return}}Pr.flags|=f,I.memoizedState=us(1|p,b,H,E)}function Sc(f,p){return _u(8390656,8,f,p)}function Dl(f,p){return qh(2048,8,f,p)}function dd(f,p){return qh(4,2,f,p)}function Mm(f,p){return qh(4,4,f,p)}function pd(f,p){if(typeof p=="function")return f=f(),p(f),function(){p(null)};if(p!=null)return f=f(),p.current=f,function(){p.current=null}}function md(f,p,b){return b=b!=null?b.concat([f]):null,qh(4,4,pd.bind(null,p,f),b)}function _c(){}function gd(f,p){var b=$n();p=p===void 0?null:p;var E=b.memoizedState;return E!==null&&p!==null&&va(p,E[1])?E[0]:(b.memoizedState=[f,p],f)}function u1(f,p){var b=$n();p=p===void 0?null:p;var E=b.memoizedState;return E!==null&&p!==null&&va(p,E[1])?E[0]:(f=f(),b.memoizedState=[f,p],f)}function yx(f,p){var b=Qn;Qn=b!==0&&4>b?b:4,f(!0);var E=Vr.transition;Vr.transition={};try{f(!1),p()}finally{Qn=b,Vr.transition=E}}function Em(){return $n().memoizedState}function xx(f,p,b){var E=$o(f);b={lane:E,action:b,hasEagerState:!1,eagerState:null,next:null},c1(f)?h1(p,b):(f1(f,p,b),b=ps(),f=Os(f,E,b),f!==null&&vd(f,p,E))}function wx(f,p,b){var E=$o(f),I={lane:E,action:b,hasEagerState:!1,eagerState:null,next:null};if(c1(f))h1(p,I);else{f1(f,p,I);var H=f.alternate;if(f.lanes===0&&(H===null||H.lanes===0)&&(H=p.lastRenderedReducer,H!==null))try{var Me=p.lastRenderedState,Fe=H(Me,b);if(I.hasEagerState=!0,I.eagerState=Fe,Wi(Fe,Me))return}catch{}finally{}b=ps(),f=Os(f,E,b),f!==null&&vd(f,p,E)}}function c1(f){var p=f.alternate;return f===Pr||p!==null&&p===Pr}function h1(f,p){bo=ga=!0;var b=f.pending;b===null?p.next=p:(p.next=b.next,b.next=p),f.pending=p}function f1(f,p,b){li!==null&&f.mode&1&&!(In&2)?(f=p.interleaved,f===null?(b.next=b,no===null?no=[p]:no.push(p)):(b.next=f.next,f.next=b),p.interleaved=b):(f=p.pending,f===null?b.next=b:(b.next=f.next,f.next=b),p.pending=b)}function vd(f,p,b){if(b&4194240){var E=p.lanes;E&=f.pendingLanes,b|=E,p.lanes=b,Ui(f,b)}}var bc={readContext:os,useCallback:Jr,useContext:Jr,useEffect:Jr,useImperativeHandle:Jr,useInsertionEffect:Jr,useLayoutEffect:Jr,useMemo:Jr,useReducer:Jr,useRef:Jr,useState:Jr,useDebugValue:Jr,useDeferredValue:Jr,useTransition:Jr,useMutableSource:Jr,useSyncExternalStore:Jr,useId:Jr,unstable_isNewReconciler:!1},Xh={readContext:os,useCallback:function(f,p){return yi().memoizedState=[f,p===void 0?null:p],f},useContext:os,useEffect:Sc,useImperativeHandle:function(f,p,b){return b=b!=null?b.concat([f]):null,_u(4194308,4,pd.bind(null,p,f),b)},useLayoutEffect:function(f,p){return _u(4194308,4,f,p)},useInsertionEffect:function(f,p){return _u(4,2,f,p)},useMemo:function(f,p){var b=yi();return p=p===void 0?null:p,f=f(),b.memoizedState=[f,p],f},useReducer:function(f,p,b){var E=yi();return p=b!==void 0?b(p):p,E.memoizedState=E.baseState=p,f={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:f,lastRenderedState:p},E.queue=f,f=f.dispatch=xx.bind(null,Pr,f),[E.memoizedState,f]},useRef:function(f){var p=yi();return f={current:f},p.memoizedState=f},useState:Es,useDebugValue:_c,useDeferredValue:function(f){var p=Es(f),b=p[0],E=p[1];return Sc(function(){var I=Vr.transition;Vr.transition={};try{E(f)}finally{Vr.transition=I}},[f]),b},useTransition:function(){var f=Es(!1),p=f[0];return f=yx.bind(null,f[1]),yi().memoizedState=f,[p,f]},useMutableSource:function(){},useSyncExternalStore:function(f,p,b){var E=Pr,I=yi();if(Sr){if(b===void 0)throw Error(o(407));b=b()}else{if(b=p(),li===null)throw Error(o(349));Wo&30||Su(E,p,b)}I.memoizedState=b;var H={value:b,getSnapshot:p};return I.queue=H,Sc(fd.bind(null,E,H,f),[f]),E.flags|=2048,us(9,Vh.bind(null,E,H,b,p),void 0,null),b},useId:function(){var f=yi(),p=li.identifierPrefix;if(Sr){var b=wr,E=fr;b=(E&~(1<<32-Mr(E)-1)).toString(32)+b,p=":"+p+"R"+b,b=jo++,0<b&&(p+="H"+b.toString(32)),p+=":"}else b=xc++,p=":"+p+"r"+b.toString(32)+":";return f.memoizedState=p},unstable_isNewReconciler:!1},Sx={readContext:os,useCallback:gd,useContext:os,useEffect:Dl,useImperativeHandle:md,useInsertionEffect:dd,useLayoutEffect:Mm,useMemo:u1,useReducer:Fr,useRef:jh,useState:function(){return Fr(ar)},useDebugValue:_c,useDeferredValue:function(f){var p=Fr(ar),b=p[0],E=p[1];return Dl(function(){var I=Vr.transition;Vr.transition={};try{E(f)}finally{Vr.transition=I}},[f]),b},useTransition:function(){var f=Fr(ar)[0],p=$n().memoizedState;return[f,p]},useMutableSource:ya,useSyncExternalStore:wc,useId:Em,unstable_isNewReconciler:!1},_x={readContext:os,useCallback:gd,useContext:os,useEffect:Dl,useImperativeHandle:md,useInsertionEffect:dd,useLayoutEffect:Mm,useMemo:u1,useReducer:Qr,useRef:jh,useState:function(){return Qr(ar)},useDebugValue:_c,useDeferredValue:function(f){var p=Qr(ar),b=p[0],E=p[1];return Dl(function(){var I=Vr.transition;Vr.transition={};try{E(f)}finally{Vr.transition=I}},[f]),b},useTransition:function(){var f=Qr(ar)[0],p=$n().memoizedState;return[f,p]},useMutableSource:ya,useSyncExternalStore:wc,useId:Em,unstable_isNewReconciler:!1};function yd(f,p){try{var b="",E=p;do b+=ha(E),E=E.return;while(E);var I=b}catch(H){I=`
Error generating stack: `+H.message+`
`+H.stack}return{value:f,source:p,stack:I}}function Am(f,p){try{console.error(p.value)}catch(b){setTimeout(function(){throw b})}}var bx=typeof WeakMap=="function"?WeakMap:Map;function d1(f,p,b){b=xo(-1,b),b.tag=3,b.payload={element:null};var E=p.value;return b.callback=function(){bd||(bd=!0,Dm=E),Am(f,p)},b}function p1(f,p,b){b=xo(-1,b),b.tag=3;var E=f.type.getDerivedStateFromError;if(typeof E=="function"){var I=p.value;b.payload=function(){return E(I)},b.callback=function(){Am(f,p)}}var H=f.stateNode;return H!==null&&typeof H.componentDidCatch=="function"&&(b.callback=function(){Am(f,p),typeof E!="function"&&(Ma===null?Ma=new Set([this]):Ma.add(this));var Me=p.stack;this.componentDidCatch(p.value,{componentStack:Me!==null?Me:""})}),b}function qa(f,p,b){var E=f.pingCache;if(E===null){E=f.pingCache=new bx;var I=new Set;E.set(p,I)}else I=E.get(p),I===void 0&&(I=new Set,E.set(p,I));I.has(b)||(I.add(b),f=zm.bind(null,f,p,b),p.then(f,f))}function Mo(f){do{var p;if((p=f.tag===13)&&(p=f.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return f;f=f.return}while(f!==null);return null}function xa(f,p,b,E,I){return f.mode&1?(f.flags|=65536,f.lanes=I,f):(f===p?f.flags|=65536:(f.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(p=xo(-1,1),p.tag=2,da(b,p))),b.lanes|=1),f)}function wa(f){f.flags|=4}function Tm(f,p){if(f!==null&&f.child===p.child)return!0;if(p.flags&16)return!1;for(f=p.child;f!==null;){if(f.flags&12854||f.subtreeFlags&12854)return!1;f=f.sibling}return!0}var Eo,cs,xd,wd;if(Ne)Eo=function(f,p){for(var b=p.child;b!==null;){if(b.tag===5||b.tag===6)D(f,b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},cs=function(){},xd=function(f,p,b,E,I){if(f=f.memoizedProps,f!==E){var H=p.stateNode,Me=Hr(Ms.current);b=K(H,b,f,E,I,Me),(p.updateQueue=b)&&wa(p)}},wd=function(f,p,b,E){b!==E&&wa(p)};else if(he){Eo=function(f,p,b,E){for(var I=p.child;I!==null;){if(I.tag===5){var H=I.stateNode;b&&E&&(H=fn(H,I.type,I.memoizedProps,I)),D(f,H)}else if(I.tag===6)H=I.stateNode,b&&E&&(H=Xn(H,I.memoizedProps,I)),D(f,H);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)H=I.child,H!==null&&(H.return=I),Eo(f,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===p)break;for(;I.sibling===null;){if(I.return===null||I.return===p)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};var Cm=function(f,p,b,E){for(var I=p.child;I!==null;){if(I.tag===5){var H=I.stateNode;b&&E&&(H=fn(H,I.type,I.memoizedProps,I)),zt(f,H)}else if(I.tag===6)H=I.stateNode,b&&E&&(H=Xn(H,I.memoizedProps,I)),zt(f,H);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)H=I.child,H!==null&&(H.return=I),Cm(f,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===p)break;for(;I.sibling===null;){if(I.return===null||I.return===p)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};cs=function(f,p){var b=p.stateNode;if(!Tm(f,p)){f=b.containerInfo;var E=At(f);Cm(E,p,!1,!1),b.pendingChildren=E,wa(p),_n(f,E)}},xd=function(f,p,b,E,I){var H=f.stateNode,Me=f.memoizedProps;if((f=Tm(f,p))&&Me===E)p.stateNode=H;else{var Fe=p.stateNode,ft=Hr(Ms.current),It=null;Me!==E&&(It=K(Fe,b,Me,E,I,ft)),f&&It===null?p.stateNode=H:(H=Et(H,It,b,Me,E,p,f,Fe),j(H,b,E,I,ft)&&wa(p),p.stateNode=H,f?wa(p):Eo(H,p,!1,!1))}},wd=function(f,p,b,E){b!==E?(f=Hr(So.current),b=Hr(Ms.current),p.stateNode=fe(E,f,b,p),wa(p)):p.stateNode=f.stateNode}}else cs=function(){},xd=function(){},wd=function(){};function Mc(f,p){if(!Sr)switch(f.tailMode){case"hidden":p=f.tail;for(var b=null;p!==null;)p.alternate!==null&&(b=p),p=p.sibling;b===null?f.tail=null:b.sibling=null;break;case"collapsed":b=f.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?p||f.tail===null?f.tail=null:f.tail.sibling=null:E.sibling=null}}function Xi(f){var p=f.alternate!==null&&f.alternate.child===f.child,b=0,E=0;if(p)for(var I=f.child;I!==null;)b|=I.lanes|I.childLanes,E|=I.subtreeFlags&14680064,E|=I.flags&14680064,I.return=f,I=I.sibling;else for(I=f.child;I!==null;)b|=I.lanes|I.childLanes,E|=I.subtreeFlags,E|=I.flags,I.return=f,I=I.sibling;return f.subtreeFlags|=E,f.childLanes=b,p}function m1(f,p,b){var E=p.pendingProps;switch(bs(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xi(p),null;case 1:return or(p.type)&&zr(),Xi(p),null;case 3:return E=p.stateNode,so(),dn(vn),dn(pn),xu(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(f===null||f.child===null)&&(pa(p)?wa(p):f===null||f.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,ls!==null&&(Ad(ls),ls=null))),cs(f,p),Xi(p),null;case 5:Vo(p),b=Hr(So.current);var I=p.type;if(f!==null&&p.stateNode!=null)xd(f,p,I,E,b),f.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!E){if(p.stateNode===null)throw Error(o(166));return Xi(p),null}if(f=Hr(Ms.current),pa(p)){if(!Oe)throw Error(o(175));f=q(p.stateNode,p.type,p.memoizedProps,b,f,p,!ja),p.updateQueue=f,f!==null&&wa(p)}else{var H=oe(I,E,b,f,p);Eo(H,p,!1,!1),p.stateNode=H,j(H,I,E,b,f)&&wa(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return Xi(p),null;case 6:if(f&&p.stateNode!=null)wd(f,p,f.memoizedProps,E);else{if(typeof E!="string"&&p.stateNode===null)throw Error(o(166));if(f=Hr(So.current),b=Hr(Ms.current),pa(p)){if(!Oe)throw Error(o(176));if(f=p.stateNode,E=p.memoizedProps,(b=O(f,E,p,!ja))&&(I=Kr,I!==null))switch(H=(I.mode&1)!==0,I.tag){case 3:rt(I.stateNode.containerInfo,f,E,H);break;case 5:ht(I.type,I.memoizedProps,I.stateNode,f,E,H)}b&&wa(p)}else p.stateNode=fe(E,f,b,p)}return Xi(p),null;case 13:if(dn(_r),E=p.memoizedState,Sr&&as!==null&&p.mode&1&&!(p.flags&128)){for(f=as;f;)f=nr(f);return Go(),p.flags|=98560,p}if(E!==null&&E.dehydrated!==null){if(E=pa(p),f===null){if(!E)throw Error(o(318));if(!Oe)throw Error(o(344));if(f=p.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(o(317));ee(f,p)}else Go(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;return Xi(p),null}return ls!==null&&(Ad(ls),ls=null),p.flags&128?(p.lanes=b,p):(E=E!==null,b=!1,f===null?pa(p):b=f.memoizedState!==null,E&&!b&&(p.child.flags|=8192,p.mode&1&&(f===null||_r.current&1?vr===0&&(vr=3):Td())),p.updateQueue!==null&&(p.flags|=4),Xi(p),null);case 4:return so(),cs(f,p),f===null&&_e(p.stateNode.containerInfo),Xi(p),null;case 10:return Pl(p.type._context),Xi(p),null;case 17:return or(p.type)&&zr(),Xi(p),null;case 19:if(dn(_r),I=p.memoizedState,I===null)return Xi(p),null;if(E=(p.flags&128)!==0,H=I.rendering,H===null)if(E)Mc(I,!1);else{if(vr!==0||f!==null&&f.flags&128)for(f=p.child;f!==null;){if(H=_o(f),H!==null){for(p.flags|=128,Mc(I,!1),f=H.updateQueue,f!==null&&(p.updateQueue=f,p.flags|=4),p.subtreeFlags=0,f=b,E=p.child;E!==null;)b=E,I=f,b.flags&=14680066,H=b.alternate,H===null?(b.childLanes=0,b.lanes=I,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=H.childLanes,b.lanes=H.lanes,b.child=H.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=H.memoizedProps,b.memoizedState=H.memoizedState,b.updateQueue=H.updateQueue,b.type=H.type,I=H.dependencies,b.dependencies=I===null?null:{lanes:I.lanes,firstContext:I.firstContext}),E=E.sibling;return Yt(_r,_r.current&1|2),p.child}f=f.sibling}I.tail!==null&&ri()>Cc&&(p.flags|=128,E=!0,Mc(I,!1),p.lanes=4194304)}else{if(!E)if(f=_o(H),f!==null){if(p.flags|=128,E=!0,f=f.updateQueue,f!==null&&(p.updateQueue=f,p.flags|=4),Mc(I,!0),I.tail===null&&I.tailMode==="hidden"&&!H.alternate&&!Sr)return Xi(p),null}else 2*ri()-I.renderingStartTime>Cc&&b!==1073741824&&(p.flags|=128,E=!0,Mc(I,!1),p.lanes=4194304);I.isBackwards?(H.sibling=p.child,p.child=H):(f=I.last,f!==null?f.sibling=H:p.child=H,I.last=H)}return I.tail!==null?(p=I.tail,I.rendering=p,I.tail=p.sibling,I.renderingStartTime=ri(),p.sibling=null,f=_r.current,Yt(_r,E?f&1|2:f&1),p):(Xi(p),null);case 22:case 23:return Bm(),E=p.memoizedState!==null,f!==null&&f.memoizedState!==null!==E&&(p.flags|=8192),E&&p.mode&1?Zi&1073741824&&(Xi(p),Ne&&p.subtreeFlags&6&&(p.flags|=8192)):Xi(p),null;case 24:return null;case 25:return null}throw Error(o(156,p.tag))}var Mx=a.ReactCurrentOwner,hs=!1;function Hi(f,p,b,E){p.child=f===null?yu(p,null,b,E):ji(p,f.child,b,E)}function Ec(f,p,b,E,I){b=b.render;var H=p.ref;return fa(p,I),E=wu(f,p,b,E,H,I),b=Is(),f!==null&&!hs?(p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~I,X(f,p,I)):(Sr&&b&&io(p),p.flags|=1,Hi(f,p,E,I),p.child)}function Sd(f,p,b,E,I){if(f===null){var H=b.type;return typeof H=="function"&&!Tx(H)&&H.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(p.tag=15,p.type=H,Lm(f,p,H,E,I)):(f=M1(b.type,null,E,p,p.mode,I),f.ref=p.ref,f.return=p,p.child=f)}if(H=f.child,!(f.lanes&I)){var Me=H.memoizedProps;if(b=b.compare,b=b!==null?b:du,b(Me,E)&&f.ref===p.ref)return X(f,p,I)}return p.flags|=1,f=Rc(H,E),f.ref=p.ref,f.return=p,p.child=f}function Lm(f,p,b,E,I){if(f!==null&&du(f.memoizedProps,E)&&f.ref===p.ref)if(hs=!1,(f.lanes&I)!==0)f.flags&131072&&(hs=!0);else return p.lanes=f.lanes,X(f,p,I);return Rm(f,p,b,E,I)}function g1(f,p,b){var E=p.pendingProps,I=E.children,H=f!==null?f.memoizedState:null;if(E.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null},Yt(Ya,Zi),Zi|=b;else if(b&1073741824)p.memoizedState={baseLanes:0,cachePool:null},E=H!==null?H.baseLanes:b,Yt(Ya,Zi),Zi|=E;else return f=H!==null?H.baseLanes|b:b,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:f,cachePool:null},p.updateQueue=null,Yt(Ya,Zi),Zi|=f,null;else H!==null?(E=H.baseLanes|b,p.memoizedState=null):E=b,Yt(Ya,Zi),Zi|=E;return Hi(f,p,I,b),p.child}function Pm(f,p){var b=p.ref;(f===null&&b!==null||f!==null&&f.ref!==b)&&(p.flags|=512,p.flags|=2097152)}function Rm(f,p,b,E,I){var H=or(b)?rr:pn.current;return H=Yn(p,H),fa(p,I),b=wu(f,p,b,E,H,I),E=Is(),f!==null&&!hs?(p.updateQueue=f.updateQueue,p.flags&=-2053,f.lanes&=~I,X(f,p,I)):(Sr&&E&&io(p),p.flags|=1,Hi(f,p,b,I),p.child)}function v1(f,p,b,E,I){if(or(b)){var H=!0;Cn(p)}else H=!1;if(fa(p,I),p.stateNode===null)f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2),Pe(p,b,E),at(p,b,E,I),E=!0;else if(f===null){var Me=p.stateNode,Fe=p.memoizedProps;Me.props=Fe;var ft=Me.context,It=b.contextType;typeof It=="object"&&It!==null?It=os(It):(It=or(b)?rr:pn.current,It=Yn(p,It));var Kt=b.getDerivedStateFromProps,Dn=typeof Kt=="function"||typeof Me.getSnapshotBeforeUpdate=="function";Dn||typeof Me.UNSAFE_componentWillReceiveProps!="function"&&typeof Me.componentWillReceiveProps!="function"||(Fe!==E||ft!==It)&&He(p,Me,E,It),ro=!1;var mn=p.memoizedState;Me.state=mn,kl(p,E,Me,I),ft=p.memoizedState,Fe!==E||mn!==ft||vn.current||ro?(typeof Kt=="function"&&(A(p,b,Kt,E),ft=p.memoizedState),(Fe=ro||be(p,b,Fe,E,mn,ft,It))?(Dn||typeof Me.UNSAFE_componentWillMount!="function"&&typeof Me.componentWillMount!="function"||(typeof Me.componentWillMount=="function"&&Me.componentWillMount(),typeof Me.UNSAFE_componentWillMount=="function"&&Me.UNSAFE_componentWillMount()),typeof Me.componentDidMount=="function"&&(p.flags|=4194308)):(typeof Me.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=E,p.memoizedState=ft),Me.props=E,Me.state=ft,Me.context=It,E=Fe):(typeof Me.componentDidMount=="function"&&(p.flags|=4194308),E=!1)}else{Me=p.stateNode,dc(f,p),Fe=p.memoizedProps,It=p.type===p.elementType?Fe:Ai(p.type,Fe),Me.props=It,Dn=p.pendingProps,mn=Me.context,ft=b.contextType,typeof ft=="object"&&ft!==null?ft=os(ft):(ft=or(b)?rr:pn.current,ft=Yn(p,ft));var Rr=b.getDerivedStateFromProps;(Kt=typeof Rr=="function"||typeof Me.getSnapshotBeforeUpdate=="function")||typeof Me.UNSAFE_componentWillReceiveProps!="function"&&typeof Me.componentWillReceiveProps!="function"||(Fe!==Dn||mn!==ft)&&He(p,Me,E,ft),ro=!1,mn=p.memoizedState,Me.state=mn,kl(p,E,Me,I);var un=p.memoizedState;Fe!==Dn||mn!==un||vn.current||ro?(typeof Rr=="function"&&(A(p,b,Rr,E),un=p.memoizedState),(It=ro||be(p,b,It,E,mn,un,ft)||!1)?(Kt||typeof Me.UNSAFE_componentWillUpdate!="function"&&typeof Me.componentWillUpdate!="function"||(typeof Me.componentWillUpdate=="function"&&Me.componentWillUpdate(E,un,ft),typeof Me.UNSAFE_componentWillUpdate=="function"&&Me.UNSAFE_componentWillUpdate(E,un,ft)),typeof Me.componentDidUpdate=="function"&&(p.flags|=4),typeof Me.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof Me.componentDidUpdate!="function"||Fe===f.memoizedProps&&mn===f.memoizedState||(p.flags|=4),typeof Me.getSnapshotBeforeUpdate!="function"||Fe===f.memoizedProps&&mn===f.memoizedState||(p.flags|=1024),p.memoizedProps=E,p.memoizedState=un),Me.props=E,Me.state=un,Me.context=ft,E=It):(typeof Me.componentDidUpdate!="function"||Fe===f.memoizedProps&&mn===f.memoizedState||(p.flags|=4),typeof Me.getSnapshotBeforeUpdate!="function"||Fe===f.memoizedProps&&mn===f.memoizedState||(p.flags|=1024),E=!1)}return km(f,p,b,E,H,I)}function km(f,p,b,E,I,H){Pm(f,p);var Me=(p.flags&128)!==0;if(!E&&!Me)return I&&zn(p,b,!1),X(f,p,H);E=p.stateNode,Mx.current=p;var Fe=Me&&typeof b.getDerivedStateFromError!="function"?null:E.render();return p.flags|=1,f!==null&&Me?(p.child=ji(p,f.child,null,H),p.child=ji(p,null,Fe,H)):Hi(f,p,Fe,H),p.memoizedState=E.state,I&&zn(p,b,!0),p.child}function y1(f){var p=f.stateNode;p.pendingContext?cn(f,p.pendingContext,p.pendingContext!==p.context):p.context&&cn(f,p.context,!1),qi(f,p.containerInfo)}function x1(f,p,b,E,I){return Go(),vu(I),p.flags|=256,Hi(f,p,b,E),p.child}var _d={dehydrated:null,treeContext:null,retryLane:0};function Yh(f){return{baseLanes:f,cachePool:null}}function $h(f,p,b){var E=p.pendingProps,I=_r.current,H=!1,Me=(p.flags&128)!==0,Fe;if((Fe=Me)||(Fe=f!==null&&f.memoizedState===null?!1:(I&2)!==0),Fe?(H=!0,p.flags&=-129):(f===null||f.memoizedState!==null)&&(I|=1),Yt(_r,I&1),f===null)return Ci(p),f=p.memoizedState,f!==null&&(f=f.dehydrated,f!==null)?(p.mode&1?tr(f)?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(I=E.children,f=E.fallback,H?(E=p.mode,H=p.child,I={mode:"hidden",children:I},!(E&1)&&H!==null?(H.childLanes=0,H.pendingProps=I):H=E1(I,E,0,null),f=ef(f,E,b,null),H.return=p,f.return=p,H.sibling=f,p.child=H,p.child.memoizedState=Yh(b),p.memoizedState=_d,f):Nm(p,I));if(I=f.memoizedState,I!==null){if(Fe=I.dehydrated,Fe!==null){if(Me)return p.flags&256?(p.flags&=-257,y(f,p,b,Error(o(422)))):p.memoizedState!==null?(p.child=f.child,p.flags|=128,null):(H=E.fallback,I=p.mode,E=E1({mode:"visible",children:E.children},I,0,null),H=ef(H,I,b,null),H.flags|=2,E.return=p,H.return=p,E.sibling=H,p.child=E,p.mode&1&&ji(p,f.child,null,b),p.child.memoizedState=Yh(b),p.memoizedState=_d,H);if(!(p.mode&1))p=y(f,p,b,null);else if(tr(Fe))p=y(f,p,b,Error(o(419)));else if(E=(b&f.childLanes)!==0,hs||E){if(E=li,E!==null){switch(b&-b){case 4:H=2;break;case 16:H=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:H=32;break;case 536870912:H=268435456;break;default:H=0}E=H&(E.suspendedLanes|b)?0:H,E!==0&&E!==I.retryLane&&(I.retryLane=E,Os(f,E,-1))}Td(),p=y(f,p,b,Error(o(421)))}else yr(Fe)?(p.flags|=128,p.child=f.child,p=Ax.bind(null,f),sr(Fe,p),p=null):(b=I.treeContext,Oe&&(as=gi(Fe),Kr=p,Sr=!0,ls=null,ja=!1,b!==null&&(ln[An++]=fr,ln[An++]=wr,ln[An++]=gr,fr=b.id,wr=b.overflow,gr=p)),p=Nm(p,p.pendingProps.children),p.flags|=4096);return p}return H?(E=Im(f,p,E.children,E.fallback,b),H=p.child,I=f.child.memoizedState,H.memoizedState=I===null?Yh(b):{baseLanes:I.baseLanes|b,cachePool:null},H.childLanes=f.childLanes&~b,p.memoizedState=_d,E):(b=w1(f,p,E.children,b),p.memoizedState=null,b)}return H?(E=Im(f,p,E.children,E.fallback,b),H=p.child,I=f.child.memoizedState,H.memoizedState=I===null?Yh(b):{baseLanes:I.baseLanes|b,cachePool:null},H.childLanes=f.childLanes&~b,p.memoizedState=_d,E):(b=w1(f,p,E.children,b),p.memoizedState=null,b)}function Nm(f,p){return p=E1({mode:"visible",children:p},f.mode,0,null),p.return=f,f.child=p}function w1(f,p,b,E){var I=f.child;return f=I.sibling,b=Rc(I,{mode:"visible",children:b}),!(p.mode&1)&&(b.lanes=E),b.return=p,b.sibling=null,f!==null&&(E=p.deletions,E===null?(p.deletions=[f],p.flags|=16):E.push(f)),p.child=b}function Im(f,p,b,E,I){var H=p.mode;f=f.child;var Me=f.sibling,Fe={mode:"hidden",children:b};return!(H&1)&&p.child!==f?(b=p.child,b.childLanes=0,b.pendingProps=Fe,p.deletions=null):(b=Rc(f,Fe),b.subtreeFlags=f.subtreeFlags&14680064),Me!==null?E=Rc(Me,E):(E=ef(E,H,I,null),E.flags|=2),E.return=p,b.return=p,b.sibling=E,p.child=b,E}function y(f,p,b,E){return E!==null&&vu(E),ji(p,f.child,null,b),f=Nm(p,p.pendingProps.children),f.flags|=2,p.memoizedState=null,f}function M(f,p,b){f.lanes|=p;var E=f.alternate;E!==null&&(E.lanes|=p),Hh(f.return,p,b)}function C(f,p,b,E,I){var H=f.memoizedState;H===null?f.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:E,tail:b,tailMode:I}:(H.isBackwards=p,H.rendering=null,H.renderingStartTime=0,H.last=E,H.tail=b,H.tailMode=I)}function B(f,p,b){var E=p.pendingProps,I=E.revealOrder,H=E.tail;if(Hi(f,p,E.children,b),E=_r.current,E&2)E=E&1|2,p.flags|=128;else{if(f!==null&&f.flags&128)e:for(f=p.child;f!==null;){if(f.tag===13)f.memoizedState!==null&&M(f,b,p);else if(f.tag===19)M(f,b,p);else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===p)break e;for(;f.sibling===null;){if(f.return===null||f.return===p)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}E&=1}if(Yt(_r,E),!(p.mode&1))p.memoizedState=null;else switch(I){case"forwards":for(b=p.child,I=null;b!==null;)f=b.alternate,f!==null&&_o(f)===null&&(I=b),b=b.sibling;b=I,b===null?(I=p.child,p.child=null):(I=b.sibling,b.sibling=null),C(p,!1,I,b,H);break;case"backwards":for(b=null,I=p.child,p.child=null;I!==null;){if(f=I.alternate,f!==null&&_o(f)===null){p.child=I;break}f=I.sibling,I.sibling=b,b=I,I=f}C(p,!0,b,null,H);break;case"together":C(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function X(f,p,b){if(f!==null&&(p.dependencies=f.dependencies),Xo|=p.lanes,!(b&p.childLanes))return null;if(f!==null&&p.child!==f.child)throw Error(o(153));if(p.child!==null){for(f=p.child,b=Rc(f,f.pendingProps),p.child=b,b.return=p;f.sibling!==null;)f=f.sibling,b=b.sibling=Rc(f,f.pendingProps),b.return=p;b.sibling=null}return p.child}function te(f,p,b){switch(p.tag){case 3:y1(p),Go();break;case 5:ma(p);break;case 1:or(p.type)&&Cn(p);break;case 4:qi(p,p.stateNode.containerInfo);break;case 10:hd(p,p.type._context,p.memoizedProps.value);break;case 13:var E=p.memoizedState;if(E!==null)return E.dehydrated!==null?(Yt(_r,_r.current&1),p.flags|=128,null):b&p.child.childLanes?$h(f,p,b):(Yt(_r,_r.current&1),f=X(f,p,b),f!==null?f.sibling:null);Yt(_r,_r.current&1);break;case 19:if(E=(b&p.childLanes)!==0,f.flags&128){if(E)return B(f,p,b);p.flags|=128}var I=p.memoizedState;if(I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),Yt(_r,_r.current),E)break;return null;case 22:case 23:return p.lanes=0,g1(f,p,b)}return X(f,p,b)}function re(f,p){switch(bs(p),p.tag){case 1:return or(p.type)&&zr(),f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 3:return so(),dn(vn),dn(pn),xu(),f=p.flags,f&65536&&!(f&128)?(p.flags=f&-65537|128,p):null;case 5:return Vo(p),null;case 13:if(dn(_r),f=p.memoizedState,f!==null&&f.dehydrated!==null){if(p.alternate===null)throw Error(o(340));Go()}return f=p.flags,f&65536?(p.flags=f&-65537|128,p):null;case 19:return dn(_r),null;case 4:return so(),null;case 10:return Pl(p.type._context),null;case 22:case 23:return Bm(),null;case 24:return null;default:return null}}var se=!1,le=!1,ge=typeof WeakSet=="function"?WeakSet:Set,ye=null;function We(f,p){var b=f.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(E){Ji(f,p,E)}else b.current=null}function je(f,p,b){try{b()}catch(E){Ji(f,p,E)}}var Ue=!1;function St(f,p){for(Y(f.containerInfo),ye=p;ye!==null;)if(f=ye,p=f.child,(f.subtreeFlags&1028)!==0&&p!==null)p.return=f,ye=p;else for(;ye!==null;){f=ye;try{var b=f.alternate;if(f.flags&1024)switch(f.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var E=b.memoizedProps,I=b.memoizedState,H=f.stateNode,Me=H.getSnapshotBeforeUpdate(f.elementType===f.type?E:Ai(f.type,E),I);H.__reactInternalSnapshotBeforeUpdate=Me}break;case 3:Ne&&bt(f.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Fe){Ji(f,f.return,Fe)}if(p=f.sibling,p!==null){p.return=f.return,ye=p;break}ye=f.return}return b=Ue,Ue=!1,b}function tt(f,p,b){var E=p.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var I=E=E.next;do{if((I.tag&f)===f){var H=I.destroy;I.destroy=void 0,H!==void 0&&je(p,b,H)}I=I.next}while(I!==E)}}function ke(f,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var b=p=p.next;do{if((b.tag&f)===f){var E=b.create;b.destroy=E()}b=b.next}while(b!==p)}}function Ie(f){var p=f.ref;if(p!==null){var b=f.stateNode;switch(f.tag){case 5:f=ie(b);break;default:f=b}typeof p=="function"?p(f):p.current=f}}function yt(f,p,b){if(yo&&typeof yo.onCommitFiberUnmount=="function")try{yo.onCommitFiberUnmount(hc,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(f=p.updateQueue,f!==null&&(f=f.lastEffect,f!==null)){var E=f=f.next;do{var I=E,H=I.destroy;I=I.tag,H!==void 0&&(I&2||I&4)&&je(p,b,H),E=E.next}while(E!==f)}break;case 1:if(We(p,b),f=p.stateNode,typeof f.componentWillUnmount=="function")try{f.props=p.memoizedProps,f.state=p.memoizedState,f.componentWillUnmount()}catch(Me){Ji(p,b,Me)}break;case 5:We(p,b);break;case 4:Ne?dr(f,p,b):he&&he&&(p=p.stateNode.containerInfo,b=At(p),Mn(p,b))}}function _t(f,p,b){for(var E=p;;)if(yt(f,E,b),E.child===null||Ne&&E.tag===4){if(E===p)break;for(;E.sibling===null;){if(E.return===null||E.return===p)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function wt(f){var p=f.alternate;p!==null&&(f.alternate=null,wt(p)),f.child=null,f.deletions=null,f.sibling=null,f.tag===5&&(p=f.stateNode,p!==null&&ut(p)),f.stateNode=null,f.return=null,f.dependencies=null,f.memoizedProps=null,f.memoizedState=null,f.pendingProps=null,f.stateNode=null,f.updateQueue=null}function qt(f){return f.tag===5||f.tag===3||f.tag===4}function Ot(f){e:for(;;){for(;f.sibling===null;){if(f.return===null||qt(f.return))return null;f=f.return}for(f.sibling.return=f.return,f=f.sibling;f.tag!==5&&f.tag!==6&&f.tag!==18;){if(f.flags&2||f.child===null||f.tag===4)continue e;f.child.return=f,f=f.child}if(!(f.flags&2))return f.stateNode}}function hn(f){if(Ne){e:{for(var p=f.return;p!==null;){if(qt(p))break e;p=p.return}throw Error(o(160))}var b=p;switch(b.tag){case 5:p=b.stateNode,b.flags&32&&(et(p),b.flags&=-33),b=Ot(f),ir(f,b,p);break;case 3:case 4:p=b.stateNode.containerInfo,b=Ot(f),Bt(f,b,p);break;default:throw Error(o(161))}}}function Bt(f,p,b){var E=f.tag;if(E===5||E===6)f=f.stateNode,p?Nt(b,f,p):vt(b,f);else if(E!==4&&(f=f.child,f!==null))for(Bt(f,p,b),f=f.sibling;f!==null;)Bt(f,p,b),f=f.sibling}function ir(f,p,b){var E=f.tag;if(E===5||E===6)f=f.stateNode,p?Tt(b,f,p):ct(b,f);else if(E!==4&&(f=f.child,f!==null))for(ir(f,p,b),f=f.sibling;f!==null;)ir(f,p,b),f=f.sibling}function dr(f,p,b){for(var E=p,I=!1,H,Me;;){if(!I){I=E.return;e:for(;;){if(I===null)throw Error(o(160));switch(H=I.stateNode,I.tag){case 5:Me=!1;break e;case 3:H=H.containerInfo,Me=!0;break e;case 4:H=H.containerInfo,Me=!0;break e}I=I.return}I=!0}if(E.tag===5||E.tag===6)_t(f,E,b),Me?Se(H,E.stateNode):Ct(H,E.stateNode);else if(E.tag===18)Me?Xe(H,E.stateNode):Ve(H,E.stateNode);else if(E.tag===4){if(E.child!==null){H=E.stateNode.containerInfo,Me=!0,E.child.return=E,E=E.child;continue}}else if(yt(f,E,b),E.child!==null){E.child.return=E,E=E.child;continue}if(E===p)break;for(;E.sibling===null;){if(E.return===null||E.return===p)return;E=E.return,E.tag===4&&(I=!1)}E.sibling.return=E.return,E=E.sibling}}function Zn(f,p){if(Ne){switch(p.tag){case 0:case 11:case 14:case 15:tt(3,p,p.return),ke(3,p),tt(5,p,p.return);return;case 1:return;case 5:var b=p.stateNode;if(b!=null){var E=p.memoizedProps;f=f!==null?f.memoizedProps:E;var I=p.type,H=p.updateQueue;p.updateQueue=null,H!==null&&Ut(b,H,I,f,E,p)}return;case 6:if(p.stateNode===null)throw Error(o(162));b=p.memoizedProps,ot(p.stateNode,f!==null?f.memoizedProps:b,b);return;case 3:Oe&&f!==null&&f.memoizedState.isDehydrated&&de(p.stateNode.containerInfo);return;case 12:return;case 13:Hn(p);return;case 19:Hn(p);return;case 17:return}throw Error(o(163))}switch(p.tag){case 0:case 11:case 14:case 15:tt(3,p,p.return),ke(3,p),tt(5,p,p.return);return;case 12:return;case 13:Hn(p);return;case 19:Hn(p);return;case 3:Oe&&f!==null&&f.memoizedState.isDehydrated&&de(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(he){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,Mn(p.containerInfo,p.pendingChildren);break e}throw Error(o(163))}}function Hn(f){var p=f.updateQueue;if(p!==null){f.updateQueue=null;var b=f.stateNode;b===null&&(b=f.stateNode=new ge),p.forEach(function(E){var I=Gm.bind(null,f,E);b.has(E)||(b.add(E),E.then(I,I))})}}function Er(f,p){for(ye=p;ye!==null;){p=ye;var b=p.deletions;if(b!==null)for(var E=0;E<b.length;E++){var I=b[E];try{var H=f;Ne?dr(H,I,p):_t(H,I,p);var Me=I.alternate;Me!==null&&(Me.return=null),I.return=null}catch(an){Ji(I,p,an)}}if(b=p.child,p.subtreeFlags&12854&&b!==null)b.return=p,ye=b;else for(;ye!==null;){p=ye;try{var Fe=p.flags;if(Fe&32&&Ne&&et(p.stateNode),Fe&512){var ft=p.alternate;if(ft!==null){var It=ft.ref;It!==null&&(typeof It=="function"?It(null):It.current=null)}}if(Fe&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var Kt=p.alternate;(Kt===null||Kt.memoizedState===null)&&(Kh=ri())}break;case 22:var Dn=p.memoizedState!==null,mn=p.alternate,Rr=mn!==null&&mn.memoizedState!==null;if(b=p,Ne){e:if(E=b,I=Dn,H=null,Ne)for(var un=E;;){if(un.tag===5){if(H===null){H=un;var Us=un.stateNode;I?pt(Us):De(un.stateNode,un.memoizedProps)}}else if(un.tag===6){if(H===null){var Ta=un.stateNode;I?Te(Ta):Ge(Ta,un.memoizedProps)}}else if((un.tag!==22&&un.tag!==23||un.memoizedState===null||un===E)&&un.child!==null){un.child.return=un,un=un.child;continue}if(un===E)break;for(;un.sibling===null;){if(un.return===null||un.return===E)break e;H===un&&(H=null),un=un.return}H===un&&(H=null),un.sibling.return=un.return,un=un.sibling}}if(Dn&&!Rr&&b.mode&1){ye=b;for(var Ke=b.child;Ke!==null;){for(b=ye=Ke;ye!==null;){E=ye;var ze=E.child;switch(E.tag){case 0:case 11:case 14:case 15:tt(4,E,E.return);break;case 1:We(E,E.return);var st=E.stateNode;if(typeof st.componentWillUnmount=="function"){var Xt=E.return;try{st.props=E.memoizedProps,st.state=E.memoizedState,st.componentWillUnmount()}catch(an){Ji(E,Xt,an)}}break;case 5:We(E,E.return);break;case 22:if(E.memoizedState!==null){As(b);continue}}ze!==null?(ze.return=E,ye=ze):As(b)}Ke=Ke.sibling}}}switch(Fe&4102){case 2:hn(p),p.flags&=-3;break;case 6:hn(p),p.flags&=-3,Zn(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,Zn(p.alternate,p);break;case 4:Zn(p.alternate,p)}}catch(an){Ji(p,p.return,an)}if(b=p.sibling,b!==null){b.return=p.return,ye=b;break}ye=p.return}}}function br(f,p,b){ye=f,Ln(f)}function Ln(f,p,b){for(var E=(f.mode&1)!==0;ye!==null;){var I=ye,H=I.child;if(I.tag===22&&E){var Me=I.memoizedState!==null||se;if(!Me){var Fe=I.alternate,ft=Fe!==null&&Fe.memoizedState!==null||le;Fe=se;var It=le;if(se=Me,(le=ft)&&!It)for(ye=I;ye!==null;)Me=ye,ft=Me.child,Me.tag===22&&Me.memoizedState!==null?si(I):ft!==null?(ft.return=Me,ye=ft):si(I);for(;H!==null;)ye=H,Ln(H),H=H.sibling;ye=I,se=Fe,le=It}ii(f)}else I.subtreeFlags&8772&&H!==null?(H.return=I,ye=H):ii(f)}}function ii(f){for(;ye!==null;){var p=ye;if(p.flags&8772){var b=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:le||ke(5,p);break;case 1:var E=p.stateNode;if(p.flags&4&&!le)if(b===null)E.componentDidMount();else{var I=p.elementType===p.type?b.memoizedProps:Ai(p.type,b.memoizedProps);E.componentDidUpdate(I,b.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var H=p.updateQueue;H!==null&&Wa(p,H,E);break;case 3:var Me=p.updateQueue;if(Me!==null){if(b=null,p.child!==null)switch(p.child.tag){case 5:b=ie(p.child.stateNode);break;case 1:b=p.child.stateNode}Wa(p,Me,b)}break;case 5:var Fe=p.stateNode;b===null&&p.flags&4&&Le(Fe,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if(Oe&&p.memoizedState===null){var ft=p.alternate;if(ft!==null){var It=ft.memoizedState;if(It!==null){var Kt=It.dehydrated;Kt!==null&&xe(Kt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}le||p.flags&512&&Ie(p)}catch(Dn){Ji(p,p.return,Dn)}}if(p===f){ye=null;break}if(b=p.sibling,b!==null){b.return=p.return,ye=b;break}ye=p.return}}function As(f){for(;ye!==null;){var p=ye;if(p===f){ye=null;break}var b=p.sibling;if(b!==null){b.return=p.return,ye=b;break}ye=p.return}}function si(f){for(;ye!==null;){var p=ye;try{switch(p.tag){case 0:case 11:case 15:var b=p.return;try{ke(4,p)}catch(ft){Ji(p,b,ft)}break;case 1:var E=p.stateNode;if(typeof E.componentDidMount=="function"){var I=p.return;try{E.componentDidMount()}catch(ft){Ji(p,I,ft)}}var H=p.return;try{Ie(p)}catch(ft){Ji(p,H,ft)}break;case 5:var Me=p.return;try{Ie(p)}catch(ft){Ji(p,Me,ft)}}}catch(ft){Ji(p,p.return,ft)}if(p===f){ye=null;break}var Fe=p.sibling;if(Fe!==null){Fe.return=p.return,ye=Fe;break}ye=p.return}}var Yi=0,lr=1,fs=2,ds=3,oi=4;if(typeof Symbol=="function"&&Symbol.for){var ai=Symbol.for;Yi=ai("selector.component"),lr=ai("selector.has_pseudo_class"),fs=ai("selector.role"),ds=ai("selector.test_id"),oi=ai("selector.text")}function $i(f){var p=Ae(f);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(o(364));return p}if(f=dt(f),f===null)throw Error(o(362));return f.stateNode.current}function Ds(f,p){switch(p.$$typeof){case Yi:if(f.type===p.value)return!0;break;case lr:e:{p=p.value,f=[f,0];for(var b=0;b<f.length;){var E=f[b++],I=f[b++],H=p[I];if(E.tag!==5||!Q(E)){for(;H!=null&&Ds(E,H);)I++,H=p[I];if(I===p.length){p=!0;break e}else for(E=E.child;E!==null;)f.push(E,I),E=E.sibling}}p=!1}return p;case fs:if(f.tag===5&&Re(f.stateNode,p.value))return!0;break;case oi:if((f.tag===5||f.tag===6)&&(f=ue(f),f!==null&&0<=f.indexOf(p.value)))return!0;break;case ds:if(f.tag===5&&(f=f.memoizedProps["data-testname"],typeof f=="string"&&f.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Ao(f){switch(f.$$typeof){case Yi:return"<"+(N(f.value)||"Unknown")+">";case lr:return":has("+(Ao(f)||"")+")";case fs:return'[role="'+f.value+'"]';case oi:return'"'+f.value+'"';case ds:return'[data-testname="'+f.value+'"]';default:throw Error(o(365))}}function Li(f,p){var b=[];f=[f,0];for(var E=0;E<f.length;){var I=f[E++],H=f[E++],Me=p[H];if(I.tag!==5||!Q(I)){for(;Me!=null&&Ds(I,Me);)H++,Me=p[H];if(H===p.length)b.push(I);else for(I=I.child;I!==null;)f.push(I,H),I=I.sibling}}return b}function qo(f,p){if(!Qe)throw Error(o(363));f=$i(f),f=Li(f,p),p=[],f=Array.from(f);for(var b=0;b<f.length;){var E=f[b++];if(E.tag===5)Q(E)||p.push(E.stateNode);else for(E=E.child;E!==null;)f.push(E),E=E.sibling}return p}var bu=Math.ceil,Xa=a.ReactCurrentDispatcher,Sa=a.ReactCurrentOwner,Pn=a.ReactCurrentBatchConfig,In=0,li=null,ui=null,xi=0,Zi=0,Ya=Vt(0),vr=0,_a=null,Xo=0,Zh=0,Ac=0,Tc=null,Ki=null,Kh=0,Cc=1/0;function ba(){Cc=ri()+500}var bd=!1,Dm=null,Ma=null,Yo=!1,Ol=null,Md=0,Jh=0,Ed=null,Mu=-1,Qh=0;function ps(){return In&6?ri():Mu!==-1?Mu:Mu=ri()}function $o(f){return f.mode&1?In&2&&xi!==0?xi&-xi:cd.transition!==null?(Qh===0&&(f=lu,lu<<=1,!(lu&4194240)&&(lu=64),Qh=f),Qh):(f=Qn,f!==0?f:ne()):1}function Os(f,p,b){if(50<Jh)throw Jh=0,Ed=null,Error(o(185));var E=Fl(f,p);return E===null?null:(la(E,p,b),(!(In&2)||E!==li)&&(E===li&&(!(In&2)&&(Zh|=p),vr===4&&Cs(E,xi)),Ts(E,b),p===1&&In===0&&!(f.mode&1)&&(ba(),ca&&to())),E)}function Fl(f,p){f.lanes|=p;var b=f.alternate;for(b!==null&&(b.lanes|=p),b=f,f=f.return;f!==null;)f.childLanes|=p,b=f.alternate,b!==null&&(b.childLanes|=p),b=f,f=f.return;return b.tag===3?b.stateNode:null}function Ts(f,p){var b=f.callbackNode;Sm(f,p);var E=lc(f,f===li?xi:0);if(E===0)b!==null&&ld(b),f.callbackNode=null,f.callbackPriority=0;else if(p=E&-E,f.callbackPriority!==p){if(b!=null&&ld(b),p===1)f.tag===0?ud(Fm.bind(null,f)):fu(Fm.bind(null,f)),$e?Be(function(){In===0&&to()}):wn(uc,to),b=null;else{switch(Bh(E)){case 1:b=uc;break;case 4:b=cc;break;case 16:b=uu;break;case 536870912:b=bm;break;default:b=uu}b=$3(b,S1.bind(null,f))}f.callbackPriority=p,f.callbackNode=b}}function S1(f,p){if(Mu=-1,Qh=0,In&6)throw Error(o(327));var b=f.callbackNode;if(Fs()&&f.callbackNode!==b)return null;var E=lc(f,f===li?xi:0);if(E===0)return null;if(E&30||E&f.expiredLanes||p)p=Cd(f,E);else{p=E;var I=In;In|=2;var H=_1();(li!==f||xi!==p)&&(ba(),Ul(f,p));do try{Ex();break}catch(Fe){Eu(f,Fe)}while(1);Ga(),Xa.current=H,In=I,ui!==null?p=0:(li=null,xi=0,p=vr)}if(p!==0){if(p===2&&(I=Bo(f),I!==0&&(E=I,p=Lc(f,I))),p===1)throw b=_a,Ul(f,0),Cs(f,E),Ts(f,ri()),b;if(p===6)Cs(f,E);else{if(I=f.current.alternate,!(E&30)&&!Om(I)&&(p=Cd(f,E),p===2&&(H=Bo(f),H!==0&&(E=H,p=Lc(f,H))),p===1))throw b=_a,Ul(f,0),Cs(f,E),Ts(f,ri()),b;switch(f.finishedWork=I,f.finishedLanes=E,p){case 0:case 1:throw Error(o(345));case 2:Ea(f,Ki);break;case 3:if(Cs(f,E),(E&130023424)===E&&(p=Kh+500-ri(),10<p)){if(lc(f,0)!==0)break;if(I=f.suspendedLanes,(I&E)!==E){ps(),f.pingedLanes|=f.suspendedLanes&I;break}f.timeoutHandle=we(Ea.bind(null,f,Ki),p);break}Ea(f,Ki);break;case 4:if(Cs(f,E),(E&4194240)===E)break;for(p=f.eventTimes,I=-1;0<E;){var Me=31-Mr(E);H=1<<Me,Me=p[Me],Me>I&&(I=Me),E&=~H}if(E=I,E=ri()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*bu(E/1960))-E,10<E){f.timeoutHandle=we(Ea.bind(null,f,Ki),E);break}Ea(f,Ki);break;case 5:Ea(f,Ki);break;default:throw Error(o(329))}}}return Ts(f,ri()),f.callbackNode===b?S1.bind(null,f):null}function Lc(f,p){var b=Tc;return f.current.memoizedState.isDehydrated&&(Ul(f,p).flags|=256),f=Cd(f,p),f!==2&&(p=Ki,Ki=b,p!==null&&Ad(p)),f}function Ad(f){Ki===null?Ki=f:Ki.push.apply(Ki,f)}function Om(f){for(var p=f;;){if(p.flags&16384){var b=p.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var E=0;E<b.length;E++){var I=b[E],H=I.getSnapshot;I=I.value;try{if(!Wi(H(),I))return!1}catch{return!1}}}if(b=p.child,p.subtreeFlags&16384&&b!==null)b.return=p,p=b;else{if(p===f)break;for(;p.sibling===null;){if(p.return===null||p.return===f)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Cs(f,p){for(p&=~Ac,p&=~Zh,f.suspendedLanes|=p,f.pingedLanes&=~p,f=f.expirationTimes;0<p;){var b=31-Mr(p),E=1<<b;f[b]=-1,p&=~E}}function Fm(f){if(In&6)throw Error(o(327));Fs();var p=lc(f,0);if(!(p&1))return Ts(f,ri()),null;var b=Cd(f,p);if(f.tag!==0&&b===2){var E=Bo(f);E!==0&&(p=E,b=Lc(f,E))}if(b===1)throw b=_a,Ul(f,0),Cs(f,p),Ts(f,ri()),b;if(b===6)throw Error(o(345));return f.finishedWork=f.current.alternate,f.finishedLanes=p,Ea(f,Ki),Ts(f,ri()),null}function Um(f){Ol!==null&&Ol.tag===0&&!(In&6)&&Fs();var p=In;In|=1;var b=Pn.transition,E=Qn;try{if(Pn.transition=null,Qn=1,f)return f()}finally{Qn=E,Pn.transition=b,In=p,!(In&6)&&to()}}function Bm(){Zi=Ya.current,dn(Ya)}function Ul(f,p){f.finishedWork=null,f.finishedLanes=0;var b=f.timeoutHandle;if(b!==Ce&&(f.timeoutHandle=Ce,Ee(b)),ui!==null)for(b=ui.return;b!==null;){var E=b;switch(bs(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&zr();break;case 3:so(),dn(vn),dn(pn),xu();break;case 5:Vo(E);break;case 4:so();break;case 13:dn(_r);break;case 19:dn(_r);break;case 10:Pl(E.type._context);break;case 22:case 23:Bm()}b=b.return}if(li=f,ui=f=Rc(f.current,null),xi=Zi=p,vr=0,_a=null,Ac=Zh=Xo=0,Ki=Tc=null,no!==null){for(p=0;p<no.length;p++)if(b=no[p],E=b.interleaved,E!==null){b.interleaved=null;var I=E.next,H=b.pending;if(H!==null){var Me=H.next;H.next=I,E.next=Me}b.pending=E}no=null}return f}function Eu(f,p){do{var b=ui;try{if(Ga(),zi.current=bc,ga){for(var E=Pr.memoizedState;E!==null;){var I=E.queue;I!==null&&(I.pending=null),E=E.next}ga=!1}if(Wo=0,Or=vi=Pr=null,bo=!1,jo=0,Sa.current=null,b===null||b.return===null){vr=1,_a=p,ui=null;break}e:{var H=f,Me=b.return,Fe=b,ft=p;if(p=xi,Fe.flags|=32768,ft!==null&&typeof ft=="object"&&typeof ft.then=="function"){var It=ft,Kt=Fe,Dn=Kt.tag;if(!(Kt.mode&1)&&(Dn===0||Dn===11||Dn===15)){var mn=Kt.alternate;mn?(Kt.updateQueue=mn.updateQueue,Kt.memoizedState=mn.memoizedState,Kt.lanes=mn.lanes):(Kt.updateQueue=null,Kt.memoizedState=null)}var Rr=Mo(Me);if(Rr!==null){Rr.flags&=-257,xa(Rr,Me,Fe,H,p),Rr.mode&1&&qa(H,It,p),p=Rr,ft=It;var un=p.updateQueue;if(un===null){var Us=new Set;Us.add(ft),p.updateQueue=Us}else un.add(ft);break e}else{if(!(p&1)){qa(H,It,p),Td();break e}ft=Error(o(426))}}else if(Sr&&Fe.mode&1){var Ta=Mo(Me);if(Ta!==null){!(Ta.flags&65536)&&(Ta.flags|=256),xa(Ta,Me,Fe,H,p),vu(ft);break e}}H=ft,vr!==4&&(vr=2),Tc===null?Tc=[H]:Tc.push(H),ft=yd(ft,Fe),Fe=Me;do{switch(Fe.tag){case 3:Fe.flags|=65536,p&=-p,Fe.lanes|=p;var Ke=d1(Fe,ft,p);Rl(Fe,Ke);break e;case 1:H=ft;var ze=Fe.type,st=Fe.stateNode;if(!(Fe.flags&128)&&(typeof ze.getDerivedStateFromError=="function"||st!==null&&typeof st.componentDidCatch=="function"&&(Ma===null||!Ma.has(st)))){Fe.flags|=65536,p&=-p,Fe.lanes|=p;var Xt=p1(Fe,H,p);Rl(Fe,Xt);break e}}Fe=Fe.return}while(Fe!==null)}Ld(b)}catch(an){p=an,ui===b&&b!==null&&(ui=b=b.return);continue}break}while(1)}function _1(){var f=Xa.current;return Xa.current=bc,f===null?bc:f}function Td(){(vr===0||vr===3||vr===2)&&(vr=4),li===null||!(Xo&268435455)&&!(Zh&268435455)||Cs(li,xi)}function Cd(f,p){var b=In;In|=2;var E=_1();li===f&&xi===p||Ul(f,p);do try{b1();break}catch(I){Eu(f,I)}while(1);if(Ga(),In=b,Xa.current=E,ui!==null)throw Error(o(261));return li=null,xi=0,vr}function b1(){for(;ui!==null;)Pc(ui)}function Ex(){for(;ui!==null&&!_m();)Pc(ui)}function Pc(f){var p=Pd(f.alternate,f,Zi);f.memoizedProps=f.pendingProps,p===null?Ld(f):ui=p,Sa.current=null}function Ld(f){var p=f;do{var b=p.alternate;if(f=p.return,p.flags&32768){if(b=re(b,p),b!==null){b.flags&=32767,ui=b;return}if(f!==null)f.flags|=32768,f.subtreeFlags=0,f.deletions=null;else{vr=6,ui=null;return}}else if(b=m1(b,p,Zi),b!==null){ui=b;return}if(p=p.sibling,p!==null){ui=p;return}ui=p=f}while(p!==null);vr===0&&(vr=5)}function Ea(f,p){var b=Qn,E=Pn.transition;try{Pn.transition=null,Qn=1,$a(f,p,b)}finally{Pn.transition=E,Qn=b}return null}function $a(f,p,b){do Fs();while(Ol!==null);if(In&6)throw Error(o(327));var E=f.finishedWork,I=f.finishedLanes;if(E===null)return null;if(f.finishedWork=null,f.finishedLanes=0,E===f.current)throw Error(o(177));f.callbackNode=null,f.callbackPriority=0;var H=E.lanes|E.childLanes;if(ad(f,H),f===li&&(ui=li=null,xi=0),!(E.subtreeFlags&2064)&&!(E.flags&2064)||Yo||(Yo=!0,$3(uu,function(){return Fs(),null})),H=(E.flags&15990)!==0,E.subtreeFlags&15990||H){H=Pn.transition,Pn.transition=null;var Me=Qn;Qn=1;var Fe=In;In|=4,Sa.current=null,St(f,E),Er(f,E),$(f.containerInfo),f.current=E,br(E),ua(),In=Fe,Qn=Me,Pn.transition=H}else f.current=E;if(Yo&&(Yo=!1,Ol=f,Md=I),H=f.pendingLanes,H===0&&(Ma=null),zh(E.stateNode),Ts(f,ri()),p!==null)for(b=f.onRecoverableError,E=0;E<p.length;E++)b(p[E]);if(bd)throw bd=!1,f=Dm,Dm=null,f;return Md&1&&f.tag!==0&&Fs(),H=f.pendingLanes,H&1?f===Ed?Jh++:(Jh=0,Ed=f):Jh=0,to(),null}function Fs(){if(Ol!==null){var f=Bh(Md),p=Pn.transition,b=Qn;try{if(Pn.transition=null,Qn=16>f?16:f,Ol===null)var E=!1;else{if(f=Ol,Ol=null,Md=0,In&6)throw Error(o(331));var I=In;for(In|=4,ye=f.current;ye!==null;){var H=ye,Me=H.child;if(ye.flags&16){var Fe=H.deletions;if(Fe!==null){for(var ft=0;ft<Fe.length;ft++){var It=Fe[ft];for(ye=It;ye!==null;){var Kt=ye;switch(Kt.tag){case 0:case 11:case 15:tt(8,Kt,H)}var Dn=Kt.child;if(Dn!==null)Dn.return=Kt,ye=Dn;else for(;ye!==null;){Kt=ye;var mn=Kt.sibling,Rr=Kt.return;if(wt(Kt),Kt===It){ye=null;break}if(mn!==null){mn.return=Rr,ye=mn;break}ye=Rr}}}var un=H.alternate;if(un!==null){var Us=un.child;if(Us!==null){un.child=null;do{var Ta=Us.sibling;Us.sibling=null,Us=Ta}while(Us!==null)}}ye=H}}if(H.subtreeFlags&2064&&Me!==null)Me.return=H,ye=Me;else e:for(;ye!==null;){if(H=ye,H.flags&2048)switch(H.tag){case 0:case 11:case 15:tt(9,H,H.return)}var Ke=H.sibling;if(Ke!==null){Ke.return=H.return,ye=Ke;break e}ye=H.return}}var ze=f.current;for(ye=ze;ye!==null;){Me=ye;var st=Me.child;if(Me.subtreeFlags&2064&&st!==null)st.return=Me,ye=st;else e:for(Me=ze;ye!==null;){if(Fe=ye,Fe.flags&2048)try{switch(Fe.tag){case 0:case 11:case 15:ke(9,Fe)}}catch(an){Ji(Fe,Fe.return,an)}if(Fe===Me){ye=null;break e}var Xt=Fe.sibling;if(Xt!==null){Xt.return=Fe.return,ye=Xt;break e}ye=Fe.return}}if(In=I,to(),yo&&typeof yo.onPostCommitFiberRoot=="function")try{yo.onPostCommitFiberRoot(hc,f)}catch{}E=!0}return E}finally{Qn=b,Pn.transition=p}}return!1}function Za(f,p,b){p=yd(b,p),p=d1(f,p,1),da(f,p),p=ps(),f=Fl(f,1),f!==null&&(la(f,1,p),Ts(f,p))}function Ji(f,p,b){if(f.tag===3)Za(f,f,b);else for(;p!==null;){if(p.tag===3){Za(p,f,b);break}else if(p.tag===1){var E=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Ma===null||!Ma.has(E))){f=yd(b,f),f=p1(p,f,1),da(p,f),f=ps(),p=Fl(p,1),p!==null&&(la(p,1,f),Ts(p,f));break}}p=p.return}}function zm(f,p,b){var E=f.pingCache;E!==null&&E.delete(p),p=ps(),f.pingedLanes|=f.suspendedLanes&b,li===f&&(xi&b)===b&&(vr===4||vr===3&&(xi&130023424)===xi&&500>ri()-Kh?Ul(f,0):Ac|=b),Ts(f,p)}function Hm(f,p){p===0&&(f.mode&1?(p=ac,ac<<=1,!(ac&130023424)&&(ac=4194304)):p=1);var b=ps();f=Fl(f,p),f!==null&&(la(f,p,b),Ts(f,b))}function Ax(f){var p=f.memoizedState,b=0;p!==null&&(b=p.retryLane),Hm(f,b)}function Gm(f,p){var b=0;switch(f.tag){case 13:var E=f.stateNode,I=f.memoizedState;I!==null&&(b=I.retryLane);break;case 19:E=f.stateNode;break;default:throw Error(o(314))}E!==null&&E.delete(p),Hm(f,b)}var Pd;Pd=function(f,p,b){if(f!==null)if(f.memoizedProps!==p.pendingProps||vn.current)hs=!0;else{if(!(f.lanes&b)&&!(p.flags&128))return hs=!1,te(f,p,b);hs=!!(f.flags&131072)}else hs=!1,Sr&&p.flags&1048576&&Ti(p,bn,p.index);switch(p.lanes=0,p.tag){case 2:var E=p.type;f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2),f=p.pendingProps;var I=Yn(p,pn.current);fa(p,b),I=wu(null,p,E,f,I,b);var H=Is();return p.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,or(E)?(H=!0,Cn(p)):H=!1,p.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,mu(p),I.updater=Z,p.stateNode=I,I._reactInternals=p,at(p,E,f,b),p=km(null,p,E,!0,H,b)):(p.tag=0,Sr&&H&&io(p),Hi(null,p,I,b),p=p.child),p;case 16:E=p.elementType;e:{switch(f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2),f=p.pendingProps,I=E._init,E=I(E._payload),p.type=E,I=p.tag=cI(E),f=Ai(E,f),I){case 0:p=Rm(null,p,E,f,b);break e;case 1:p=v1(null,p,E,f,b);break e;case 11:p=Ec(null,p,E,f,b);break e;case 14:p=Sd(null,p,E,Ai(E.type,f),b);break e}throw Error(o(306,E,""))}return p;case 0:return E=p.type,I=p.pendingProps,I=p.elementType===E?I:Ai(E,I),Rm(f,p,E,I,b);case 1:return E=p.type,I=p.pendingProps,I=p.elementType===E?I:Ai(E,I),v1(f,p,E,I,b);case 3:e:{if(y1(p),f===null)throw Error(o(387));E=p.pendingProps,H=p.memoizedState,I=H.element,dc(f,p),kl(p,E,null,b);var Me=p.memoizedState;if(E=Me.element,Oe&&H.isDehydrated)if(H={element:E,isDehydrated:!1,cache:Me.cache,transitions:Me.transitions},p.updateQueue.baseState=H,p.memoizedState=H,p.flags&256){I=Error(o(423)),p=x1(f,p,E,b,I);break e}else if(E!==I){I=Error(o(424)),p=x1(f,p,E,b,I);break e}else for(Oe&&(as=is(p.stateNode.containerInfo),Kr=p,Sr=!0,ls=null,ja=!1),b=yu(p,null,E,b),p.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Go(),E===I){p=X(f,p,b);break e}Hi(f,p,E,b)}p=p.child}return p;case 5:return ma(p),f===null&&Ci(p),E=p.type,I=p.pendingProps,H=f!==null?f.memoizedProps:null,Me=I.children,ae(E,I)?Me=null:H!==null&&ae(E,H)&&(p.flags|=32),Pm(f,p),Hi(f,p,Me,b),p.child;case 6:return f===null&&Ci(p),null;case 13:return $h(f,p,b);case 4:return qi(p,p.stateNode.containerInfo),E=p.pendingProps,f===null?p.child=ji(p,null,E,b):Hi(f,p,E,b),p.child;case 11:return E=p.type,I=p.pendingProps,I=p.elementType===E?I:Ai(E,I),Ec(f,p,E,I,b);case 7:return Hi(f,p,p.pendingProps,b),p.child;case 8:return Hi(f,p,p.pendingProps.children,b),p.child;case 12:return Hi(f,p,p.pendingProps.children,b),p.child;case 10:e:{if(E=p.type._context,I=p.pendingProps,H=p.memoizedProps,Me=I.value,hd(p,E,Me),H!==null)if(Wi(H.value,Me)){if(H.children===I.children&&!vn.current){p=X(f,p,b);break e}}else for(H=p.child,H!==null&&(H.return=p);H!==null;){var Fe=H.dependencies;if(Fe!==null){Me=H.child;for(var ft=Fe.firstContext;ft!==null;){if(ft.context===E){if(H.tag===1){ft=xo(-1,b&-b),ft.tag=2;var It=H.updateQueue;if(It!==null){It=It.shared;var Kt=It.pending;Kt===null?ft.next=ft:(ft.next=Kt.next,Kt.next=ft),It.pending=ft}}H.lanes|=b,ft=H.alternate,ft!==null&&(ft.lanes|=b),Hh(H.return,b,p),Fe.lanes|=b;break}ft=ft.next}}else if(H.tag===10)Me=H.type===p.type?null:H.child;else if(H.tag===18){if(Me=H.return,Me===null)throw Error(o(341));Me.lanes|=b,Fe=Me.alternate,Fe!==null&&(Fe.lanes|=b),Hh(Me,b,p),Me=H.sibling}else Me=H.child;if(Me!==null)Me.return=H;else for(Me=H;Me!==null;){if(Me===p){Me=null;break}if(H=Me.sibling,H!==null){H.return=Me.return,Me=H;break}Me=Me.return}H=Me}Hi(f,p,I.children,b),p=p.child}return p;case 9:return I=p.type,E=p.pendingProps.children,fa(p,b),I=os(I),E=E(I),p.flags|=1,Hi(f,p,E,b),p.child;case 14:return E=p.type,I=Ai(E,p.pendingProps),I=Ai(E.type,I),Sd(f,p,E,I,b);case 15:return Lm(f,p,p.type,p.pendingProps,b);case 17:return E=p.type,I=p.pendingProps,I=p.elementType===E?I:Ai(E,I),f!==null&&(f.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,or(E)?(f=!0,Cn(p)):f=!1,fa(p,b),Pe(p,E,I),at(p,E,I,b),km(null,p,E,!0,f,b);case 19:return B(f,p,b);case 22:return g1(f,p,b)}throw Error(o(156,p.tag))};function $3(f,p){return wn(f,p)}function uI(f,p,b,E){this.tag=f,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Aa(f,p,b,E){return new uI(f,p,b,E)}function Tx(f){return f=f.prototype,!(!f||!f.isReactComponent)}function cI(f){if(typeof f=="function")return Tx(f)?1:0;if(f!=null){if(f=f.$$typeof,f===w)return 11;if(f===S)return 14}return 2}function Rc(f,p){var b=f.alternate;return b===null?(b=Aa(f.tag,p,f.key,f.mode),b.elementType=f.elementType,b.type=f.type,b.stateNode=f.stateNode,b.alternate=f,f.alternate=b):(b.pendingProps=p,b.type=f.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=f.flags&14680064,b.childLanes=f.childLanes,b.lanes=f.lanes,b.child=f.child,b.memoizedProps=f.memoizedProps,b.memoizedState=f.memoizedState,b.updateQueue=f.updateQueue,p=f.dependencies,b.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},b.sibling=f.sibling,b.index=f.index,b.ref=f.ref,b}function M1(f,p,b,E,I,H){var Me=2;if(E=f,typeof f=="function")Tx(f)&&(Me=1);else if(typeof f=="string")Me=5;else e:switch(f){case c:return ef(b.children,I,H,p);case h:Me=8,I|=8;break;case d:return f=Aa(12,b,p,I|2),f.elementType=d,f.lanes=H,f;case x:return f=Aa(13,b,p,I),f.elementType=x,f.lanes=H,f;case g:return f=Aa(19,b,p,I),f.elementType=g,f.lanes=H,f;case T:return E1(b,I,H,p);default:if(typeof f=="object"&&f!==null)switch(f.$$typeof){case m:Me=10;break e;case v:Me=9;break e;case w:Me=11;break e;case S:Me=14;break e;case _:Me=16,E=null;break e}throw Error(o(130,f==null?f:typeof f,""))}return p=Aa(Me,b,p,I),p.elementType=f,p.type=E,p.lanes=H,p}function ef(f,p,b,E){return f=Aa(7,f,E,p),f.lanes=b,f}function E1(f,p,b,E){return f=Aa(22,f,E,p),f.elementType=T,f.lanes=b,f.stateNode={},f}function Cx(f,p,b){return f=Aa(6,f,null,p),f.lanes=b,f}function Lx(f,p,b){return p=Aa(4,f.children!==null?f.children:[],f.key,p),p.lanes=b,p.stateNode={containerInfo:f.containerInfo,pendingChildren:null,implementation:f.implementation},p}function hI(f,p,b,E,I){this.tag=p,this.containerInfo=f,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ce,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ll(0),this.expirationTimes=Ll(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ll(0),this.identifierPrefix=E,this.onRecoverableError=I,Oe&&(this.mutableSourceEagerHydrationData=null)}function Z3(f,p,b,E,I,H,Me,Fe,ft){return f=new hI(f,p,b,Fe,ft),p===1?(p=1,H===!0&&(p|=8)):p=0,H=Aa(3,null,null,p),f.current=H,H.stateNode=f,H.memoizedState={element:E,isDehydrated:b,cache:null,transitions:null},mu(H),f}function K3(f){if(!f)return En;f=f._reactInternals;e:{if(R(f)!==f||f.tag!==1)throw Error(o(170));var p=f;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(or(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(o(171))}if(f.tag===1){var b=f.type;if(or(b))return xr(f,b,p)}return p}function J3(f){var p=f._reactInternals;if(p===void 0)throw typeof f.render=="function"?Error(o(188)):(f=Object.keys(f).join(","),Error(o(268,f)));return f=z(p),f===null?null:f.stateNode}function Q3(f,p){if(f=f.memoizedState,f!==null&&f.dehydrated!==null){var b=f.retryLane;f.retryLane=b!==0&&b<p?b:p}}function Px(f,p){Q3(f,p),(f=f.alternate)&&Q3(f,p)}function fI(f){return f=z(f),f===null?null:f.stateNode}function dI(){return null}return t.attemptContinuousHydration=function(f){if(f.tag===13){var p=ps();Os(f,134217728,p),Px(f,134217728)}},t.attemptHydrationAtCurrentPriority=function(f){if(f.tag===13){var p=ps(),b=$o(f);Os(f,b,p),Px(f,b)}},t.attemptSynchronousHydration=function(f){switch(f.tag){case 3:var p=f.stateNode;if(p.current.memoizedState.isDehydrated){var b=Ha(p.pendingLanes);b!==0&&(Ui(p,b|1),Ts(p,ri()),!(In&6)&&(ba(),to()))}break;case 13:var E=ps();Um(function(){return Os(f,1,E)}),Px(f,1)}},t.batchedUpdates=function(f,p){var b=In;In|=1;try{return f(p)}finally{In=b,In===0&&(ba(),ca&&to())}},t.createComponentSelector=function(f){return{$$typeof:Yi,value:f}},t.createContainer=function(f,p,b,E,I,H,Me){return Z3(f,p,!1,null,b,E,I,H,Me)},t.createHasPseudoClassSelector=function(f){return{$$typeof:lr,value:f}},t.createHydrationContainer=function(f,p,b,E,I,H,Me,Fe,ft){return f=Z3(b,E,!0,f,I,H,Me,Fe,ft),f.context=K3(null),b=f.current,E=ps(),I=$o(b),H=xo(E,I),H.callback=p??null,da(b,H),f.current.lanes=I,la(f,I,E),Ts(f,E),f},t.createPortal=function(f,p,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:E==null?null:""+E,children:f,containerInfo:p,implementation:b}},t.createRoleSelector=function(f){return{$$typeof:fs,value:f}},t.createTestNameSelector=function(f){return{$$typeof:ds,value:f}},t.createTextSelector=function(f){return{$$typeof:oi,value:f}},t.deferredUpdates=function(f){var p=Qn,b=Pn.transition;try{return Pn.transition=null,Qn=16,f()}finally{Qn=p,Pn.transition=b}},t.discreteUpdates=function(f,p,b,E,I){var H=Qn,Me=Pn.transition;try{return Pn.transition=null,Qn=1,f(p,b,E,I)}finally{Qn=H,Pn.transition=Me,In===0&&ba()}},t.findAllNodes=qo,t.findBoundingRects=function(f,p){if(!Qe)throw Error(o(363));p=qo(f,p),f=[];for(var b=0;b<p.length;b++)f.push(mt(p[b]));for(p=f.length-1;0<p;p--){b=f[p];for(var E=b.x,I=E+b.width,H=b.y,Me=H+b.height,Fe=p-1;0<=Fe;Fe--)if(p!==Fe){var ft=f[Fe],It=ft.x,Kt=It+ft.width,Dn=ft.y,mn=Dn+ft.height;if(E>=It&&H>=Dn&&I<=Kt&&Me<=mn){f.splice(p,1);break}else if(E!==It||b.width!==ft.width||mn<H||Dn>Me){if(!(H!==Dn||b.height!==ft.height||Kt<E||It>I)){It>E&&(ft.width+=It-E,ft.x=E),Kt<I&&(ft.width=I-It),f.splice(p,1);break}}else{Dn>H&&(ft.height+=Dn-H,ft.y=H),mn<Me&&(ft.height=Me-Dn),f.splice(p,1);break}}}return f},t.findHostInstance=J3,t.findHostInstanceWithNoPortals=function(f){return f=F(f),f=f!==null?G(f):null,f===null?null:f.stateNode},t.findHostInstanceWithWarning=function(f){return J3(f)},t.flushControlled=function(f){var p=In;In|=1;var b=Pn.transition,E=Qn;try{Pn.transition=null,Qn=1,f()}finally{Qn=E,Pn.transition=b,In=p,In===0&&(ba(),to())}},t.flushPassiveEffects=Fs,t.flushSync=Um,t.focusWithin=function(f,p){if(!Qe)throw Error(o(363));for(f=$i(f),p=Li(f,p),p=Array.from(p),f=0;f<p.length;){var b=p[f++];if(!Q(b)){if(b.tag===5&&Je(b.stateNode))return!0;for(b=b.child;b!==null;)p.push(b),b=b.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Qn},t.getFindAllNodesFailureDescription=function(f,p){if(!Qe)throw Error(o(363));var b=0,E=[];f=[$i(f),0];for(var I=0;I<f.length;){var H=f[I++],Me=f[I++],Fe=p[Me];if((H.tag!==5||!Q(H))&&(Ds(H,Fe)&&(E.push(Ao(Fe)),Me++,Me>b&&(b=Me)),Me<p.length))for(H=H.child;H!==null;)f.push(H,Me),H=H.sibling}if(b<p.length){for(f=[];b<p.length;b++)f.push(Ao(p[b]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+f.join(" > ")}return null},t.getPublicRootInstance=function(f){if(f=f.current,!f.child)return null;switch(f.child.tag){case 5:return ie(f.child.stateNode);default:return f.child.stateNode}},t.injectIntoDevTools=function(f){if(f={bundleType:f.bundleType,version:f.version,rendererPackageName:f.rendererPackageName,rendererConfig:f.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:fI,findFiberByHostInstance:f.findFiberByHostInstance||dI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")f=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)f=!0;else{try{hc=p.inject(f),yo=p}catch{}f=!!p.checkDCE}}return f},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(f,p,b,E){if(!Qe)throw Error(o(363));f=qo(f,p);var I=Ze(f,b,E).disconnect;return{disconnect:function(){I()}}},t.registerMutableSourceForHydration=function(f,p){var b=p._getVersion;b=b(p._source),f.mutableSourceEagerHydrationData==null?f.mutableSourceEagerHydrationData=[p,b]:f.mutableSourceEagerHydrationData.push(p,b)},t.runWithPriority=function(f,p){var b=Qn;try{return Qn=f,p()}finally{Qn=b}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(f,p,b,E){var I=p.current,H=ps(),Me=$o(I);return b=K3(b),p.context===null?p.context=b:p.pendingContext=b,p=xo(H,Me),p.payload={element:f},E=E===void 0?null:E,E!==null&&(p.callback=E),da(I,p),f=Os(I,Me,H),f!==null&&Va(f,I,Me),Me},t};(function(n){n.exports=X9})(j9);const Y9=m2(o5),$9=n=>typeof n=="object"&&typeof n.then=="function",Pf=[];function $R(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function ZR(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const s of Pf)if($R(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!t)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=Pf.indexOf(i);s!==-1&&Pf.splice(s,1)},promise:($9(n)?n:n(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(Pf.push(i),!t)throw i.promise}const Z9=(n,e,t)=>ZR(n,e,!1,t),K9=(n,e,t)=>void ZR(n,e,!0,t),J9=n=>{if(n===void 0||n.length===0)Pf.splice(0,Pf.length);else{const e=Pf.find(t=>$R(n,t.keys,t.equal));e&&e.remove()}},S3={},KR=n=>void Object.assign(S3,n);function Q9(n,e){function t(c,{args:h=[],attach:d,...m},v){let w=`${c[0].toUpperCase()}${c.slice(1)}`,x;if(c==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=m.object;x=cp(g,{type:c,root:v,attach:d,primitive:!0})}else{const g=S3[w];if(!g)throw new Error(`R3F: ${w} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");x=cp(new g(...h),{type:c,root:v,attach:d,memoizedProps:{args:h}})}return x.__r3f.attach===void 0&&(x instanceof kn?x.__r3f.attach="geometry":x instanceof Ns&&(x.__r3f.attach="material")),w!=="inject"&&zw(x,m),x}function r(c,h){let d=!1;if(h){var m,v;(m=h.__r3f)!=null&&m.attach?Bw(c,h,h.__r3f.attach):h.isObject3D&&c.isObject3D&&(c.add(h),d=!0),d||(v=c.__r3f)==null||v.objects.push(h),h.__r3f||cp(h,{}),h.__r3f.parent=c,l5(h),hp(h)}}function i(c,h,d){let m=!1;if(h){var v,w;if((v=h.__r3f)!=null&&v.attach)Bw(c,h,h.__r3f.attach);else if(h.isObject3D&&c.isObject3D){h.parent=c,h.dispatchEvent({type:"added"});const x=c.children.filter(S=>S!==h),g=x.indexOf(d);c.children=[...x.slice(0,g),h,...x.slice(g)],m=!0}m||(w=c.__r3f)==null||w.objects.push(h),h.__r3f||cp(h,{}),h.__r3f.parent=c,l5(h),hp(h)}}function s(c,h,d=!1){c&&[...c].forEach(m=>o(h,m,d))}function o(c,h,d){if(h){var m,v,w;if(h.__r3f&&(h.__r3f.parent=null),(m=c.__r3f)!=null&&m.objects&&(c.__r3f.objects=c.__r3f.objects.filter(T=>T!==h)),(v=h.__r3f)!=null&&v.attach)zA(c,h,h.__r3f.attach);else if(h.isObject3D&&c.isObject3D){var x;c.remove(h),(x=h.__r3f)!=null&&x.root&&oH(h.__r3f.root,h)}const S=(w=h.__r3f)==null?void 0:w.primitive,_=d===void 0?h.dispose!==null&&!S:d;if(!S){var g;s((g=h.__r3f)==null?void 0:g.objects,h,_),s(h.children,h,_)}delete h.__r3f,_&&h.dispose&&h.type!=="Scene"&&Eg.unstable_scheduleCallback(Eg.unstable_IdlePriority,()=>{try{h.dispose()}catch{}}),hp(c)}}function a(c,h,d,m){var v;const w=(v=c.__r3f)==null?void 0:v.parent;if(!w)return;const x=t(h,d,c.__r3f.root);if(c.children){for(const g of c.children)g.__r3f&&r(x,g);c.children=c.children.filter(g=>!g.__r3f)}c.__r3f.objects.forEach(g=>r(x,g)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||o(w,c),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),r(w,x),x.raycast&&x.__r3f.eventCount&&x.__r3f.root.getState().internal.interaction.push(x),[m,m.alternate].forEach(g=>{g!==null&&(g.stateNode=x,g.ref&&(typeof g.ref=="function"?g.ref(x):g.ref.current=x))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Y9({createInstance:t,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,h)=>{if(!h)return;const d=c.getState().scene;d.__r3f&&(d.__r3f.root=c,r(d,h))},removeChildFromContainer:(c,h)=>{h&&o(c.getState().scene,h)},insertInContainerBefore:(c,h,d)=>{if(!h||!d)return;const m=c.getState().scene;m.__r3f&&i(m,h,d)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var h;const d=(h=c==null?void 0:c.__r3f)!=null?h:{};return Boolean(d.handlers)},prepareUpdate(c,h,d,m){var v;if(((v=c==null?void 0:c.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==c)return[!0];{const{args:x=[],children:g,...S}=m,{args:_=[],children:T,...L}=d;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((N,k)=>N!==_[k]))return[!0];const P=ik(c,S,L,!0);return P.changes.length?[!1,P]:null}},commitUpdate(c,[h,d],m,v,w,x){h?a(c,m,w,x):zw(c,d)},commitMount(c,h,d,m){var v;const w=(v=c.__r3f)!=null?v:{};c.raycast&&w.handlers&&w.eventCount&&c.__r3f.root.getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>cp(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var h;const{attach:d,parent:m}=(h=c.__r3f)!=null?h:{};d&&m&&zA(m,c,d),c.isObject3D&&(c.visible=!1),hp(c)},unhideInstance(c,h){var d;const{attach:m,parent:v}=(d=c.__r3f)!=null?d:{};m&&v&&Bw(v,c,m),(c.isObject3D&&h.visible==null||h.visible)&&(c.visible=!0),hp(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():nh.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&jr.fun(performance.now)?performance.now:jr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:jr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:jr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:zw}}var OA,FA;const Uw=n=>"colorSpace"in n||"outputColorSpace"in n,JR=()=>{var n;return(n=S3.ColorManagement)!=null?n:null},QR=n=>n&&n.isOrthographicCamera,eH=n=>n&&n.hasOwnProperty("current"),Kg=typeof window<"u"&&((OA=window.document)!=null&&OA.createElement||((FA=window.navigator)==null?void 0:FA.product)==="ReactNative")?qe.useLayoutEffect:qe.useEffect;function ek(n){const e=qe.useRef(n);return Kg(()=>void(e.current=n),[n]),e}function tH({set:n}){return Kg(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class tk extends qe.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}tk.getDerivedStateFromError=()=>({error:!0});const nk="__default",UA=new Map,nH=n=>n&&!!n.memoized&&!!n.changes;function rk(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const a0=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},jr={obj:n=>n===Object(n)&&!jr.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(jr.str(n)||jr.num(n))return n===e;const s=jr.obj(n);if(s&&r==="reference")return n===e;const o=jr.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!jr.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(jr.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function rH(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function iH(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function cp(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function a5(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((s,o)=>s[o],n),{target:t,key:i}}else return{target:t,key:e}}const BA=/-\d+$/;function Bw(n,e,t){if(jr.str(t)){if(BA.test(t)){const s=t.replace(BA,""),{target:o,key:a}=a5(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=a5(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function zA(n,e,t){var r,i;if(jr.str(t)){const{target:s,key:o}=a5(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function ik(n,{children:e,key:t,ref:r,...i},{children:s,key:o,ref:a,...l}={},u=!1){var c;const h=(c=n==null?void 0:n.__r3f)!=null?c:{},d=Object.entries(i),m=[];if(u){const w=Object.keys(l);for(let x=0;x<w.length;x++)i.hasOwnProperty(w[x])||d.unshift([w[x],nk+"remove"])}d.forEach(([w,x])=>{var g;if((g=n.__r3f)!=null&&g.primitive&&w==="object"||jr.equ(x,l[w]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(w))return m.push([w,x,!0,[]]);let S=[];w.includes("-")&&(S=w.split("-")),m.push([w,x,!1,S]);for(const _ in i){const T=i[_];_.startsWith(`${w}-`)&&m.push([_,T,!1,_.split("-")])}});const v={...i};return h.memoizedProps&&h.memoizedProps.args&&(v.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(v.attach=h.memoizedProps.attach),{memoized:v,changes:m}}function zw(n,e){var t,r,i;const s=(t=n.__r3f)!=null?t:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:u}=nH(e)?e:ik(n,e),c=s.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let d=0;d<u.length;d++){let[m,v,w,x]=u[d];if(Uw(n)){const T="srgb",L="srgb-linear";m==="encoding"?(m="colorSpace",v=v===3001?T:L):m==="outputEncoding"&&(m="outputColorSpace",v=v===3001?T:L)}let g=n,S=g[m];if(x.length&&(S=x.reduce((_,T)=>_[T],n),!(S&&S.set))){const[_,...T]=x.reverse();g=T.reverse().reduce((L,P)=>L[P],n),m=_}if(v===nk+"remove")if(g.constructor){let _=UA.get(g.constructor);_||(_=new g.constructor,UA.set(g.constructor,_)),v=_[m]}else v=0;if(w)v?s.handlers[m]=v:delete s.handlers[m],s.eventCount=Object.keys(s.handlers).length;else if(S&&S.set&&(S.copy||S instanceof Of)){if(Array.isArray(v))S.fromArray?S.fromArray(v):S.set(...v);else if(S.copy&&v&&v.constructor&&S.constructor===v.constructor)S.copy(v);else if(v!==void 0){const _=S instanceof $t;!_&&S.setScalar?S.setScalar(v):S instanceof Of&&v instanceof Of?S.mask=v.mask:S.set(v),!JR()&&!a.linear&&_&&S.convertSRGBToLinear()}}else if(g[m]=v,g[m]instanceof Mi&&g[m].format===uo&&g[m].type===Kl){const _=g[m];Uw(_)&&Uw(a.gl)?_.colorSpace=a.gl.outputColorSpace:_.encoding=a.gl.outputEncoding}hp(n)}if(s.parent&&a.internal&&n.raycast&&c!==s.eventCount){const d=a.internal.interaction.indexOf(n);d>-1&&a.internal.interaction.splice(d,1),s.eventCount&&a.internal.interaction.push(n)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(i=n.__r3f)!=null&&i.parent&&l5(n),n}function hp(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function l5(n){n.onUpdate==null||n.onUpdate(n)}function sk(n,e){n.manual||(QR(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Rv(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function sH(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return nh.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return nh.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return nh.ContinuousEventPriority;default:return nh.DefaultEventPriority}}function ok(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function oH(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{ok(t.capturedMap,e,r,i)})}function aH(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],h=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+h*h))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var h;return(h=u.__r3f)==null?void 0:h.handlers["onPointer"+c]}))}function r(l,u){const c=n.getState(),h=new Set,d=[],m=u?u(c.internal.interaction):c.internal.interaction;for(let g=0;g<m.length;g++){const S=a0(m[g]);S&&(S.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function v(g){const S=a0(g);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var _;S.events.compute==null||S.events.compute(l,S,(_=S.previousRoot)==null?void 0:_.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(g,!0):[]}let w=m.flatMap(v).sort((g,S)=>{const _=a0(g.object),T=a0(S.object);return!_||!T?g.distance-S.distance:T.events.priority-_.events.priority||g.distance-S.distance}).filter(g=>{const S=Rv(g);return h.has(S)?!1:(h.add(S),!0)});c.events.filter&&(w=c.events.filter(w,c));for(const g of w){let S=g.object;for(;S;){var x;(x=S.__r3f)!=null&&x.eventCount&&d.push({...g,eventObject:S}),S=S.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let g of c.internal.capturedMap.get(l.pointerId).values())h.has(Rv(g.intersection))||d.push(g.intersection);return d}function i(l,u,c,h){const d=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const w=a0(v.object)||d,{raycaster:x,pointer:g,camera:S,internal:_}=w,T=new ve(g.x,g.y,0).unproject(S),L=U=>{var F,z;return(F=(z=_.capturedMap.get(U))==null?void 0:z.has(v.eventObject))!=null?F:!1},P=U=>{const F={intersection:v,target:u.target};_.capturedMap.has(U)?_.capturedMap.get(U).set(v.eventObject,F):_.capturedMap.set(U,new Map([[v.eventObject,F]])),u.target.setPointerCapture(U)},N=U=>{const F=_.capturedMap.get(U);F&&ok(_.capturedMap,v.eventObject,F,U)};let k={};for(let U in u){let F=u[U];typeof F!="function"&&(k[U]=F)}let R={...v,...k,pointer:g,intersections:l,stopped:m.stopped,delta:c,unprojectedPoint:T,ray:x.ray,camera:S,stopPropagation(){const U="pointerId"in u&&_.capturedMap.get(u.pointerId);if((!U||U.has(v.eventObject))&&(R.stopped=m.stopped=!0,_.hovered.size&&Array.from(_.hovered.values()).find(F=>F.eventObject===v.eventObject))){const F=l.slice(0,l.indexOf(v));s([...F,v])}},target:{hasPointerCapture:L,setPointerCapture:P,releasePointerCapture:N},currentTarget:{hasPointerCapture:L,setPointerCapture:P,releasePointerCapture:N},nativeEvent:u};if(h(R),m.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const c of u.hovered.values())if(!l.length||!l.find(h=>h.object===c.object&&h.index===c.index&&h.instanceId===c.instanceId)){const d=c.eventObject.__r3f,m=d==null?void 0:d.handlers;if(u.hovered.delete(Rv(c)),d!=null&&d.eventCount){const v={...c,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,u){for(let c=0;c<u.length;c++){const h=u[c].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))})}}return function(c){const{onPointerMissed:h,internal:d}=n.getState();d.lastEvent.current=c;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=r(c,m?t:void 0),g=v?e(c):0;l==="onPointerDown"&&(d.initialClick=[c.offsetX,c.offsetY],d.initialHits=x.map(_=>_.eventObject)),v&&!x.length&&g<=2&&(o(c,d.interaction),h&&h(c)),m&&s(x);function S(_){const T=_.eventObject,L=T.__r3f,P=L==null?void 0:L.handlers;if(L!=null&&L.eventCount)if(m){if(P.onPointerOver||P.onPointerEnter||P.onPointerOut||P.onPointerLeave){const N=Rv(_),k=d.hovered.get(N);k?k.stopped&&_.stopPropagation():(d.hovered.set(N,_),P.onPointerOver==null||P.onPointerOver(_),P.onPointerEnter==null||P.onPointerEnter(_))}P.onPointerMove==null||P.onPointerMove(_)}else{const N=P[l];N?(!v||d.initialHits.includes(T))&&(o(c,d.interaction.filter(k=>!d.initialHits.includes(k))),N(_)):v&&d.initialHits.includes(T)&&o(c,d.interaction.filter(k=>!d.initialHits.includes(k)))}}i(x,c,g,S)}}return{handlePointer:a}}const lH=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],ak=n=>!!(n!=null&&n.render),_3=qe.createContext(null),uH=(n,e)=>{const t=XR((a,l)=>{const u=new ve,c=new ve,h=new ve;function d(g=l().camera,S=c,_=l().size){const{width:T,height:L,top:P,left:N}=_,k=T/L;S instanceof ve?h.copy(S):h.set(...S);const R=g.getWorldPosition(u).distanceTo(h);if(QR(g))return{width:T/g.zoom,height:L/g.zoom,top:P,left:N,factor:1,distance:R,aspect:k};{const U=g.fov*Math.PI/180,F=2*Math.tan(U/2)*R,z=F*(T/L);return{width:z,height:F,top:P,left:N,factor:T/z,distance:R,aspect:k}}}let m;const v=g=>a(S=>({performance:{...S.performance,current:g}})),w=new xt;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,S)=>e(g,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new g3,pointer:w,mouse:w,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();m&&clearTimeout(m),g.performance.current!==g.performance.min&&v(g.performance.min),m=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:d},setEvents:g=>a(S=>({...S,events:{...S.events,...g}})),setSize:(g,S,_,T,L)=>{const P=l().camera,N={width:g,height:S,top:T||0,left:L||0,updateStyle:_};a(k=>({size:N,viewport:{...k.viewport,...d(P,c,N)}}))},setDpr:g=>a(S=>{const _=rk(g);return{viewport:{...S.viewport,dpr:_,initialDpr:S.viewport.initialDpr||_}}}),setFrameloop:(g="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,g!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:qe.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,S,_)=>{const T=l().internal;return T.priority=T.priority+(S>0?1:0),T.subscribers.push({ref:g,priority:S,store:_}),T.subscribers=T.subscribers.sort((L,P)=>L.priority-P.priority),()=>{const L=l().internal;L!=null&&L.subscribers&&(L.priority=L.priority-(S>0?1:0),L.subscribers=L.subscribers.filter(P=>P.ref!==g))}}}}}),r=t.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:h}=t.getState();if(l!==i||u.dpr!==s){var d;i=l,s=u.dpr,sk(a,l),c.setPixelRatio(u.dpr);const m=(d=l.updateStyle)!=null?d:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,m)}a!==o&&(o=a,h(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let kv,cH=new Set,hH=new Set,fH=new Set;function Hw(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function l0(n,e){switch(n){case"before":return Hw(cH,e);case"after":return Hw(hH,e);case"tail":return Hw(fH,e)}}let Gw,Vw;function Ww(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Gw=e.internal.subscribers,kv=0;kv<Gw.length;kv++)Vw=Gw[kv],Vw.ref.current(Vw.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function dH(n){let e=!1,t,r,i;function s(l){r=requestAnimationFrame(s),e=!0,t=0,l0("before",l);for(const c of n.values()){var u;i=c.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((u=i.gl.xr)!=null&&u.isPresenting)&&(t+=Ww(l,i))}if(l0("after",l),t===0)return l0("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,u=1){var c;if(!l)return n.forEach(h=>o(h.store.getState()),u);(c=l.gl.xr)!=null&&c.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function a(l,u=!0,c,h){if(u&&l0("before",l),c)Ww(l,c,h);else for(const d of n.values())Ww(l,d.store.getState());u&&l0("after",l)}return{loop:s,invalidate:o,advance:a}}function b3(){const n=qe.useContext(_3);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Xs(n=t=>t,e){return b3()(n,e)}function lk(n,e=0){const t=b3(),r=t.getState().internal.subscribe,i=ek(n);return Kg(()=>r(i,e,t),[e,r,t]),null}function uk(n,e){return function(t,...r){const i=new t;return n&&n(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,rH(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message}`))))))}}function M3(n,e,t,r){const i=Array.isArray(e)?e:[e],s=Z9(uk(t,r),[n,...i],{equal:jr.equ});return Array.isArray(e)?s:s[0]}M3.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return K9(uk(t),[n,...r])};M3.clear=function(n,e){const t=Array.isArray(e)?e:[e];return J9([n,...t])};const rm=new Map,{invalidate:HA,advance:GA}=dH(rm),{reconciler:Ag,applyProps:tp}=Q9(rm,sH),np={objects:"shallow",strict:!1},pH=(n,e)=>{const t=typeof n=="function"?n(e):n;return ak(t)?t:new Zb({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function mH(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:r,top:i,left:s}=n.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:s}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function gH(n){const e=rm.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||uH(HA,GA),o=t||Ag.createContainer(s,nh.ConcurrentRoot,null,!1,null,"",i,null);e||rm.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(c={}){let{gl:h,size:d,scene:m,events:v,onCreated:w,shadows:x=!1,linear:g=!1,flat:S=!1,legacy:_=!1,orthographic:T=!1,frameloop:L="always",dpr:P=[1,2],performance:N,raycaster:k,camera:R,onPointerMissed:U}=c,F=s.getState(),z=F.gl;F.gl||F.set({gl:z=pH(h,n)});let V=F.raycaster;V||F.set({raycaster:V=new w3});const{params:G,...J}=k||{};if(jr.equ(J,V,np)||tp(V,{...J}),jr.equ(G,V.params,np)||tp(V,{params:{...V.params,...G}}),!F.camera||F.camera===u&&!jr.equ(u,R,np)){u=R;const D=R instanceof Vg,j=D?R:T?new Jl(0,0,0,0,.1,1e3):new Ni(75,0,.1,1e3);D||(j.position.z=5,R&&tp(j,R),!F.camera&&!(R!=null&&R.rotation)&&j.lookAt(0,0,0)),F.set({camera:j})}if(!F.scene){let D;m instanceof gg?D=m:(D=new gg,m&&tp(D,m)),F.set({scene:cp(D)})}if(!F.xr){var ie;const D=(ae,fe)=>{const we=s.getState();we.frameloop!=="never"&&GA(ae,!0,we,fe)},j=()=>{const ae=s.getState();ae.gl.xr.enabled=ae.gl.xr.isPresenting,ae.gl.xr.setAnimationLoop(ae.gl.xr.isPresenting?D:null),ae.gl.xr.isPresenting||HA(ae)},K={connect(){const ae=s.getState().gl;ae.xr.addEventListener("sessionstart",j),ae.xr.addEventListener("sessionend",j)},disconnect(){const ae=s.getState().gl;ae.xr.removeEventListener("sessionstart",j),ae.xr.removeEventListener("sessionend",j)}};typeof((ie=z.xr)==null?void 0:ie.addEventListener)=="function"&&K.connect(),F.set({xr:K})}if(z.shadowMap){const D=z.shadowMap.enabled,j=z.shadowMap.type;if(z.shadowMap.enabled=!!x,jr.boo(x))z.shadowMap.type=R0;else if(jr.str(x)){var ce;const K={basic:qL,percentage:k2,soft:R0,variance:sl};z.shadowMap.type=(ce=K[x])!=null?ce:R0}else jr.obj(x)&&Object.assign(z.shadowMap,x);(D!==z.shadowMap.enabled||j!==z.shadowMap.type)&&(z.shadowMap.needsUpdate=!0)}const W=JR();W&&("enabled"in W?W.enabled=!_:"legacyMode"in W&&(W.legacyMode=_)),tp(z,{outputEncoding:g?3e3:3001,toneMapping:S?Zl:Lb}),F.legacy!==_&&F.set(()=>({legacy:_})),F.linear!==g&&F.set(()=>({linear:g})),F.flat!==S&&F.set(()=>({flat:S})),h&&!jr.fun(h)&&!ak(h)&&!jr.equ(h,z,np)&&tp(z,h),v&&!F.events.handlers&&F.set({events:v(s)});const oe=mH(n,d);return jr.equ(oe,F.size,np)||F.setSize(oe.width,oe.height,oe.updateStyle,oe.top,oe.left),P&&F.viewport.dpr!==rk(P)&&F.setDpr(P),F.frameloop!==L&&F.setFrameloop(L),F.onPointerMissed||F.set({onPointerMissed:U}),N&&!jr.equ(N,F.performance,np)&&F.set(D=>({performance:{...D.performance,...N}})),a=w,l=!0,this},render(c){return l||this.configure(),Ag.updateContainer(qe.createElement(vH,{store:s,children:c,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){ck(n)}}}function vH({store:n,children:e,onCreated:t,rootElement:r}){return Kg(()=>{const i=n.getState();i.set(s=>({internal:{...s.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),qe.createElement(_3.Provider,{value:n},e)}function ck(n,e){const t=rm.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Ag.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),iH(i),rm.delete(n),e&&e(n)}catch{}},500)})}}function yH(n,e,t){return qe.createElement(xH,{key:e.uuid,children:n,container:e,state:t})}function xH({state:n={},children:e,container:t}){const{events:r,size:i,...s}=n,o=b3(),[a]=qe.useState(()=>new w3),[l]=qe.useState(()=>new xt),u=qe.useCallback((h,d)=>{const m={...h};Object.keys(h).forEach(w=>{(lH.includes(w)||h[w]!==d[w]&&d[w])&&delete m[w]});let v;if(d&&i){const w=d.camera;v=h.viewport.getCurrentViewport(w,new ve,i),w!==h.camera&&sk(w,i)}return{...m,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...d==null?void 0:d.events,...r},size:{...h.size,...i},viewport:{...h.viewport,...v},...s}},[n]),[c]=qe.useState(()=>{const h=o.getState();return XR((m,v)=>({...h,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...r},size:{...h.size,...i},...s,set:m,get:v,setEvents:w=>m(x=>({...x,events:{...x.events,...w}}))}))});return qe.useEffect(()=>{const h=o.subscribe(d=>c.setState(m=>u(d,m)));return()=>{h(),c.destroy()}},[]),qe.useEffect(()=>{c.setState(h=>u(o.getState(),h))},[u]),qe.createElement(qe.Fragment,null,Ag.createPortal(qe.createElement(_3.Provider,{value:c},e),c,null))}Ag.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:qe.version});function im(){return im=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},im.apply(null,arguments)}function VA(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function wH({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=qe.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=qe.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,c=qe.useRef(!1);qe.useEffect(()=>(c.current=!0,()=>void(c.current=!1)));const[h,d,m]=qe.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:S,top:_,width:T,height:L,bottom:P,right:N,x:k,y:R}=a.current.element.getBoundingClientRect(),U={left:S,top:_,width:T,height:L,bottom:P,right:N,x:k,y:R};a.current.element instanceof HTMLElement&&r&&(U.height=a.current.element.offsetHeight,U.width=a.current.element.offsetWidth),Object.freeze(U),c.current&&!MH(a.current.lastBounds,U)&&o(a.current.lastBounds=U)};return[g,u?VA(g,u):g,l?VA(g,l):g]},[o,r,l,u]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",m,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function w(){a.current.element&&(a.current.resizeObserver=new i(m),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",m,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{m()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const x=g=>{!g||g===a.current.element||(v(),a.current.element=g,a.current.scrollContainers=hk(g),w())};return _H(m,!!e),SH(d),qe.useEffect(()=>{v(),w()},[e,m,d]),qe.useEffect(()=>v,[]),[x,s,h]}function SH(n){qe.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function _H(n,e){qe.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function hk(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...hk(n.parentElement)]}const bH=["x","y","top","bottom","left","right","width","height"],MH=(n,e)=>bH.every(t=>n[t]===e[t]);var EH=Object.defineProperty,AH=Object.defineProperties,TH=Object.getOwnPropertyDescriptors,WA=Object.getOwnPropertySymbols,CH=Object.prototype.hasOwnProperty,LH=Object.prototype.propertyIsEnumerable,jA=(n,e,t)=>e in n?EH(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,qA=(n,e)=>{for(var t in e||(e={}))CH.call(e,t)&&jA(n,t,e[t]);if(WA)for(var t of WA(e))LH.call(e,t)&&jA(n,t,e[t]);return n},PH=(n,e)=>AH(n,TH(e)),XA,YA;typeof window<"u"&&((XA=window.document)!=null&&XA.createElement||((YA=window.navigator)==null?void 0:YA.product)==="ReactNative")?qe.useLayoutEffect:qe.useEffect;function fk(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=fk(r,e,t);if(i)return i;r=e?null:r.sibling}}function dk(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const $A=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=$A;return}return $A.apply(this,arguments)};const E3=dk(qe.createContext(null));class pk extends qe.Component{render(){return qe.createElement(E3.Provider,{value:this._reactInternals},this.props.children)}}function RH(){const n=qe.useContext(E3);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=qe.useId();return qe.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=fk(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[n,e])}function kH(){const n=RH(),[e]=qe.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==E3&&!e.has(i)&&e.set(i,qe.useContext(dk(i)))}t=t.return}return e}function NH(){const n=kH();return qe.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>qe.createElement(e,null,qe.createElement(t.Provider,PH(qA({},r),{value:n.get(t)}))),e=>qe.createElement(pk,qA({},e))),[n])}const jw={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function IH(n){const{handlePointer:e}=aH(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(jw).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:s}=n.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:t}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,u]=jw[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=jw[s];r.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const DH=qe.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:s,events:o=IH,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:h,legacy:d,orthographic:m,frameloop:v,dpr:w,performance:x,raycaster:g,camera:S,onPointerMissed:_,onCreated:T,...L},P){qe.useMemo(()=>KR(H9),[]);const N=NH(),[k,R]=wH({scroll:!0,debounce:{scroll:50,resize:0},...r}),U=qe.useRef(null),F=qe.useRef(null);qe.useImperativeHandle(P,()=>U.current);const z=ek(_),[V,G]=qe.useState(!1),[J,ie]=qe.useState(!1);if(V)throw V;if(J)throw J;const ce=qe.useRef(null);Kg(()=>{const Y=U.current;R.width>0&&R.height>0&&Y&&(ce.current||(ce.current=gH(Y)),ce.current.configure({gl:s,events:o,shadows:u,linear:c,flat:h,legacy:d,orthographic:m,frameloop:v,dpr:w,performance:x,raycaster:g,camera:S,size:R,onPointerMissed:(...$)=>z.current==null?void 0:z.current(...$),onCreated:$=>{$.events.connect==null||$.events.connect(a?eH(a)?a.current:a:F.current),l&&$.setEvents({compute:(oe,D)=>{const j=oe[l+"X"],K=oe[l+"Y"];D.pointer.set(j/D.size.width*2-1,-(K/D.size.height)*2+1),D.raycaster.setFromCamera(D.pointer,D.camera)}}),T==null||T($)}}),ce.current.render(qe.createElement(N,null,qe.createElement(tk,{set:ie},qe.createElement(qe.Suspense,{fallback:qe.createElement(tH,{set:G})},e)))))}),qe.useEffect(()=>{const Y=U.current;if(Y)return()=>ck(Y)},[]);const W=a?"none":"auto";return qe.createElement("div",im({ref:F,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:W,...i}},L),qe.createElement("div",{ref:k,style:{width:"100%",height:"100%"}},qe.createElement("canvas",{ref:U,style:{display:"block"}},t)))}),mk=qe.forwardRef(function(e,t){return qe.createElement(pk,null,qe.createElement(DH,im({},e,{ref:t})))}),gk=(()=>parseInt(zg.replace(/\D+/g,"")))();var Na=Uint8Array,rh=Uint16Array,u5=Uint32Array,vk=new Na([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),yk=new Na([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),OH=new Na([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xk=function(n,e){for(var t=new rh(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new u5(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return[t,i]},wk=xk(vk,2),Sk=wk[0],FH=wk[1];Sk[28]=258,FH[258]=28;var UH=xk(yk,0),BH=UH[0],c5=new rh(32768);for(var Xr=0;Xr<32768;++Xr){var Bc=(Xr&43690)>>>1|(Xr&21845)<<1;Bc=(Bc&52428)>>>2|(Bc&13107)<<2,Bc=(Bc&61680)>>>4|(Bc&3855)<<4,c5[Xr]=((Bc&65280)>>>8|(Bc&255)<<8)>>>1}var F0=function(n,e,t){for(var r=n.length,i=0,s=new rh(e);i<r;++i)++s[n[i]-1];var o=new rh(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new rh(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],c=e-n[i],h=o[n[i]-1]++<<c,d=h|(1<<c)-1;h<=d;++h)a[c5[h]>>>l]=u}else for(a=new rh(r),i=0;i<r;++i)n[i]&&(a[i]=c5[o[n[i]-1]++]>>>15-n[i]);return a},Jg=new Na(288);for(var Xr=0;Xr<144;++Xr)Jg[Xr]=8;for(var Xr=144;Xr<256;++Xr)Jg[Xr]=9;for(var Xr=256;Xr<280;++Xr)Jg[Xr]=7;for(var Xr=280;Xr<288;++Xr)Jg[Xr]=8;var _k=new Na(32);for(var Xr=0;Xr<32;++Xr)_k[Xr]=5;var zH=F0(Jg,9,1),HH=F0(_k,5,1),qw=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},tl=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Xw=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},GH=function(n){return(n/8|0)+(n&7&&1)},VH=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof rh?rh:n instanceof u5?u5:Na)(t-e);return r.set(n.subarray(e,t)),r},WH=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new Na(0);var i=!e||t,s=!t||t.i;t||(t={}),e||(e=new Na(r*3));var o=function(fe){var we=e.length;if(fe>we){var Ee=new Na(Math.max(we*2,fe));Ee.set(e),e=Ee}},a=t.f||0,l=t.p||0,u=t.b||0,c=t.l,h=t.d,d=t.m,m=t.n,v=r*8;do{if(!c){t.f=a=tl(n,l,1);var w=tl(n,l+1,3);if(l+=3,w)if(w==1)c=zH,h=HH,d=9,m=5;else if(w==2){var _=tl(n,l,31)+257,T=tl(n,l+10,15)+4,L=_+tl(n,l+5,31)+1;l+=14;for(var P=new Na(L),N=new Na(19),k=0;k<T;++k)N[OH[k]]=tl(n,l+k*3,7);l+=T*3;for(var R=qw(N),U=(1<<R)-1,F=F0(N,R,1),k=0;k<L;){var z=F[tl(n,l,U)];l+=z&15;var x=z>>>4;if(x<16)P[k++]=x;else{var V=0,G=0;for(x==16?(G=3+tl(n,l,3),l+=2,V=P[k-1]):x==17?(G=3+tl(n,l,7),l+=3):x==18&&(G=11+tl(n,l,127),l+=7);G--;)P[k++]=V}}var J=P.subarray(0,_),ie=P.subarray(_);d=qw(J),m=qw(ie),c=F0(J,d,1),h=F0(ie,m,1)}else throw"invalid block type";else{var x=GH(l)+4,g=n[x-4]|n[x-3]<<8,S=x+g;if(S>r){if(s)throw"unexpected EOF";break}i&&o(u+g),e.set(n.subarray(x,S),u),t.b=u+=g,t.p=l=S*8;continue}if(l>v){if(s)throw"unexpected EOF";break}}i&&o(u+131072);for(var ce=(1<<d)-1,W=(1<<m)-1,Y=l;;Y=l){var V=c[Xw(n,l)&ce],$=V>>>4;if(l+=V&15,l>v){if(s)throw"unexpected EOF";break}if(!V)throw"invalid length/literal";if($<256)e[u++]=$;else if($==256){Y=l,c=null;break}else{var oe=$-254;if($>264){var k=$-257,D=vk[k];oe=tl(n,l,(1<<D)-1)+Sk[k],l+=D}var j=h[Xw(n,l)&W],K=j>>>4;if(!j)throw"invalid distance";l+=j&15;var ie=BH[K];if(K>3){var D=yk[K];ie+=Xw(n,l)&(1<<D)-1,l+=D}if(l>v){if(s)throw"unexpected EOF";break}i&&o(u+131072);for(var ae=u+oe;u<ae;u+=4)e[u]=e[u-ie],e[u+1]=e[u+1-ie],e[u+2]=e[u+2-ie],e[u+3]=e[u+3-ie];u=ae}}t.l=c,t.p=Y,t.b=u,c&&(a=1,t.m=d,t.d=h,t.n=m)}while(!a);return u==e.length?e:VH(e,0,u)},jH=new Na(0),qH=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Nv(n,e){return WH((qH(n),n.subarray(2,-4)),e)}var XH=typeof TextDecoder<"u"&&new TextDecoder,YH=0;try{XH.decode(jH,{stream:!0}),YH=1}catch{}const $H=n=>n&&n.isCubeTexture;class ZH extends ws{constructor(e,t){var r,i;const s=$H(e),a=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),u=Math.pow(2,l),c=3*Math.max(u,16*7),h=4*u,d=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/c}`,`#define CUBEUV_TEXEL_HEIGHT ${1/h}`,`#define CUBEUV_MAX_MIP ${l}.0`],m=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=d.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${gk>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,w={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},x=new Xg(1,16),g=new yl({uniforms:w,fragmentShader:v,vertexShader:m,side:fl});super(x,g)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var KH=Object.defineProperty,JH=(n,e,t)=>e in n?KH(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,QH=(n,e,t)=>(JH(n,typeof e!="symbol"?e+"":e,t),t);class eG{constructor(){QH(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(t);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var tG=Object.defineProperty,nG=(n,e,t)=>e in n?tG(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gn=(n,e,t)=>(nG(n,typeof e!="symbol"?e+"":e,t),t);const Iv=new ed,ZA=new Fu,rG=Math.cos(70*(Math.PI/180)),KA=(n,e)=>(n%e+e)%e;let iG=class extends eG{constructor(e,t){super(),gn(this,"object"),gn(this,"domElement"),gn(this,"enabled",!0),gn(this,"target",new ve),gn(this,"minDistance",0),gn(this,"maxDistance",1/0),gn(this,"minZoom",0),gn(this,"maxZoom",1/0),gn(this,"minPolarAngle",0),gn(this,"maxPolarAngle",Math.PI),gn(this,"minAzimuthAngle",-1/0),gn(this,"maxAzimuthAngle",1/0),gn(this,"enableDamping",!1),gn(this,"dampingFactor",.05),gn(this,"enableZoom",!0),gn(this,"zoomSpeed",1),gn(this,"enableRotate",!0),gn(this,"rotateSpeed",1),gn(this,"enablePan",!0),gn(this,"panSpeed",1),gn(this,"screenSpacePanning",!0),gn(this,"keyPanSpeed",7),gn(this,"zoomToCursor",!1),gn(this,"autoRotate",!1),gn(this,"autoRotateSpeed",2),gn(this,"reverseOrbit",!1),gn(this,"reverseHorizontalOrbit",!1),gn(this,"reverseVerticalOrbit",!1),gn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),gn(this,"mouseButtons",{LEFT:Gl.ROTATE,MIDDLE:Gl.DOLLY,RIGHT:Gl.PAN}),gn(this,"touches",{ONE:Ou.ROTATE,TWO:Ou.DOLLY_PAN}),gn(this,"target0"),gn(this,"position0"),gn(this,"zoom0"),gn(this,"_domElementKeyEvents",null),gn(this,"getPolarAngle"),gn(this,"getAzimuthalAngle"),gn(this,"setPolarAngle"),gn(this,"setAzimuthalAngle"),gn(this,"getDistance"),gn(this,"getZoomScale"),gn(this,"listenToKeyEvents"),gn(this,"stopListenToKeyEvents"),gn(this,"saveState"),gn(this,"reset"),gn(this,"update"),gn(this,"connect"),gn(this,"dispose"),gn(this,"dollyIn"),gn(this,"dollyOut"),gn(this,"getScale"),gn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=Se=>{let et=KA(Se,2*Math.PI),pt=c.phi;pt<0&&(pt+=2*Math.PI),et<0&&(et+=2*Math.PI);let Te=Math.abs(et-pt);2*Math.PI-Te<Te&&(et<pt?et+=2*Math.PI:pt+=2*Math.PI),h.phi=et-pt,r.update()},this.setAzimuthalAngle=Se=>{let et=KA(Se,2*Math.PI),pt=c.theta;pt<0&&(pt+=2*Math.PI),et<0&&(et+=2*Math.PI);let Te=Math.abs(et-pt);2*Math.PI-Te<Te&&(et<pt?et+=2*Math.PI:pt+=2*Math.PI),h.theta=et-pt,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=Se=>{Se.addEventListener("keydown",ct),this._domElementKeyEvents=Se},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ct),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const Se=new ve,et=new ve(0,1,0),pt=new Qs().setFromUnitVectors(e.up,et),Te=pt.clone().invert(),De=new ve,Ge=new Qs,bt=2*Math.PI;return function(){const At=r.object.position;pt.setFromUnitVectors(e.up,et),Te.copy(pt).invert(),Se.copy(At).sub(r.target),Se.applyQuaternion(pt),c.setFromVector3(Se),r.autoRotate&&l===a.NONE&&G(z()),r.enableDamping?(c.theta+=h.theta*r.dampingFactor,c.phi+=h.phi*r.dampingFactor):(c.theta+=h.theta,c.phi+=h.phi);let zt=r.minAzimuthAngle,_n=r.maxAzimuthAngle;isFinite(zt)&&isFinite(_n)&&(zt<-Math.PI?zt+=bt:zt>Math.PI&&(zt-=bt),_n<-Math.PI?_n+=bt:_n>Math.PI&&(_n-=bt),zt<=_n?c.theta=Math.max(zt,Math.min(_n,c.theta)):c.theta=c.theta>(zt+_n)/2?Math.max(zt,c.theta):Math.min(_n,c.theta)),c.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,c.phi)),c.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(m,r.dampingFactor):r.target.add(m),r.zoomToCursor&&R||r.object.isOrthographicCamera?c.radius=j(c.radius):c.radius=j(c.radius*d),Se.setFromSpherical(c),Se.applyQuaternion(Te),At.copy(r.target).add(Se),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(h.theta*=1-r.dampingFactor,h.phi*=1-r.dampingFactor,m.multiplyScalar(1-r.dampingFactor)):(h.set(0,0,0),m.set(0,0,0));let Mn=!1;if(r.zoomToCursor&&R){let fn=null;if(r.object instanceof Ni&&r.object.isPerspectiveCamera){const Xn=Se.length();fn=j(Xn*d);const Ft=Xn-fn;r.object.position.addScaledVector(N,Ft),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const Xn=new ve(k.x,k.y,0);Xn.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix(),Mn=!0;const Ft=new ve(k.x,k.y,0);Ft.unproject(r.object),r.object.position.sub(Ft).add(Xn),r.object.updateMatrixWorld(),fn=Se.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;fn!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(fn).add(r.object.position):(Iv.origin.copy(r.object.position),Iv.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(Iv.direction))<rG?e.lookAt(r.target):(ZA.setFromNormalAndCoplanarPoint(r.object.up,r.target),Iv.intersectPlane(ZA,r.target))))}else r.object instanceof Jl&&r.object.isOrthographicCamera&&(Mn=d!==1,Mn&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/d)),r.object.updateProjectionMatrix()));return d=1,R=!1,Mn||De.distanceToSquared(r.object.position)>u||8*(1-Ge.dot(r.object.quaternion))>u?(r.dispatchEvent(i),De.copy(r.object.position),Ge.copy(r.object.quaternion),Mn=!1,!0):!1}})(),this.connect=Se=>{r.domElement=Se,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Le),r.domElement.addEventListener("pointerdown",mt),r.domElement.addEventListener("pointercancel",Q),r.domElement.addEventListener("wheel",Ze)},this.dispose=()=>{var Se,et,pt,Te,De,Ge;r.domElement&&(r.domElement.style.touchAction="auto"),(Se=r.domElement)==null||Se.removeEventListener("contextmenu",Le),(et=r.domElement)==null||et.removeEventListener("pointerdown",mt),(pt=r.domElement)==null||pt.removeEventListener("pointercancel",Q),(Te=r.domElement)==null||Te.removeEventListener("wheel",Ze),(De=r.domElement)==null||De.ownerDocument.removeEventListener("pointermove",ue),(Ge=r.domElement)==null||Ge.ownerDocument.removeEventListener("pointerup",Q),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",ct)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,c=new s5,h=new s5;let d=1;const m=new ve,v=new xt,w=new xt,x=new xt,g=new xt,S=new xt,_=new xt,T=new xt,L=new xt,P=new xt,N=new ve,k=new xt;let R=!1;const U=[],F={};function z(){return 2*Math.PI/60/60*r.autoRotateSpeed}function V(){return Math.pow(.95,r.zoomSpeed)}function G(Se){r.reverseOrbit||r.reverseHorizontalOrbit?h.theta+=Se:h.theta-=Se}function J(Se){r.reverseOrbit||r.reverseVerticalOrbit?h.phi+=Se:h.phi-=Se}const ie=(()=>{const Se=new ve;return function(pt,Te){Se.setFromMatrixColumn(Te,0),Se.multiplyScalar(-pt),m.add(Se)}})(),ce=(()=>{const Se=new ve;return function(pt,Te){r.screenSpacePanning===!0?Se.setFromMatrixColumn(Te,1):(Se.setFromMatrixColumn(Te,0),Se.crossVectors(r.object.up,Se)),Se.multiplyScalar(pt),m.add(Se)}})(),W=(()=>{const Se=new ve;return function(pt,Te){const De=r.domElement;if(De&&r.object instanceof Ni&&r.object.isPerspectiveCamera){const Ge=r.object.position;Se.copy(Ge).sub(r.target);let bt=Se.length();bt*=Math.tan(r.object.fov/2*Math.PI/180),ie(2*pt*bt/De.clientHeight,r.object.matrix),ce(2*Te*bt/De.clientHeight,r.object.matrix)}else De&&r.object instanceof Jl&&r.object.isOrthographicCamera?(ie(pt*(r.object.right-r.object.left)/r.object.zoom/De.clientWidth,r.object.matrix),ce(Te*(r.object.top-r.object.bottom)/r.object.zoom/De.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function Y(Se){r.object instanceof Ni&&r.object.isPerspectiveCamera||r.object instanceof Jl&&r.object.isOrthographicCamera?d=Se:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function $(Se){Y(d/Se)}function oe(Se){Y(d*Se)}function D(Se){if(!r.zoomToCursor||!r.domElement)return;R=!0;const et=r.domElement.getBoundingClientRect(),pt=Se.clientX-et.left,Te=Se.clientY-et.top,De=et.width,Ge=et.height;k.x=pt/De*2-1,k.y=-(Te/Ge)*2+1,N.set(k.x,k.y,1).unproject(r.object).sub(r.object.position).normalize()}function j(Se){return Math.max(r.minDistance,Math.min(r.maxDistance,Se))}function K(Se){v.set(Se.clientX,Se.clientY)}function ae(Se){D(Se),T.set(Se.clientX,Se.clientY)}function fe(Se){g.set(Se.clientX,Se.clientY)}function we(Se){w.set(Se.clientX,Se.clientY),x.subVectors(w,v).multiplyScalar(r.rotateSpeed);const et=r.domElement;et&&(G(2*Math.PI*x.x/et.clientHeight),J(2*Math.PI*x.y/et.clientHeight)),v.copy(w),r.update()}function Ee(Se){L.set(Se.clientX,Se.clientY),P.subVectors(L,T),P.y>0?$(V()):P.y<0&&oe(V()),T.copy(L),r.update()}function Ce(Se){S.set(Se.clientX,Se.clientY),_.subVectors(S,g).multiplyScalar(r.panSpeed),W(_.x,_.y),g.copy(S),r.update()}function Ye(Se){D(Se),Se.deltaY<0?oe(V()):Se.deltaY>0&&$(V()),r.update()}function Ne(Se){let et=!1;switch(Se.code){case r.keys.UP:W(0,r.keyPanSpeed),et=!0;break;case r.keys.BOTTOM:W(0,-r.keyPanSpeed),et=!0;break;case r.keys.LEFT:W(r.keyPanSpeed,0),et=!0;break;case r.keys.RIGHT:W(-r.keyPanSpeed,0),et=!0;break}et&&(Se.preventDefault(),r.update())}function he(){if(U.length==1)v.set(U[0].pageX,U[0].pageY);else{const Se=.5*(U[0].pageX+U[1].pageX),et=.5*(U[0].pageY+U[1].pageY);v.set(Se,et)}}function Oe(){if(U.length==1)g.set(U[0].pageX,U[0].pageY);else{const Se=.5*(U[0].pageX+U[1].pageX),et=.5*(U[0].pageY+U[1].pageY);g.set(Se,et)}}function Ae(){const Se=U[0].pageX-U[1].pageX,et=U[0].pageY-U[1].pageY,pt=Math.sqrt(Se*Se+et*et);T.set(0,pt)}function _e(){r.enableZoom&&Ae(),r.enablePan&&Oe()}function ne(){r.enableZoom&&Ae(),r.enableRotate&&he()}function ut(Se){if(U.length==1)w.set(Se.pageX,Se.pageY);else{const pt=Ct(Se),Te=.5*(Se.pageX+pt.x),De=.5*(Se.pageY+pt.y);w.set(Te,De)}x.subVectors(w,v).multiplyScalar(r.rotateSpeed);const et=r.domElement;et&&(G(2*Math.PI*x.x/et.clientHeight),J(2*Math.PI*x.y/et.clientHeight)),v.copy(w)}function $e(Se){if(U.length==1)S.set(Se.pageX,Se.pageY);else{const et=Ct(Se),pt=.5*(Se.pageX+et.x),Te=.5*(Se.pageY+et.y);S.set(pt,Te)}_.subVectors(S,g).multiplyScalar(r.panSpeed),W(_.x,_.y),g.copy(S)}function Be(Se){const et=Ct(Se),pt=Se.pageX-et.x,Te=Se.pageY-et.y,De=Math.sqrt(pt*pt+Te*Te);L.set(0,De),P.set(0,Math.pow(L.y/T.y,r.zoomSpeed)),$(P.y),T.copy(L)}function Qe(Se){r.enableZoom&&Be(Se),r.enablePan&&$e(Se)}function dt(Se){r.enableZoom&&Be(Se),r.enableRotate&&ut(Se)}function mt(Se){var et,pt;r.enabled!==!1&&(U.length===0&&((et=r.domElement)==null||et.ownerDocument.addEventListener("pointermove",ue),(pt=r.domElement)==null||pt.ownerDocument.addEventListener("pointerup",Q)),Ut(Se),Se.pointerType==="touch"?vt(Se):Re(Se))}function ue(Se){r.enabled!==!1&&(Se.pointerType==="touch"?ot(Se):Je(Se))}function Q(Se){var et,pt,Te;Tt(Se),U.length===0&&((et=r.domElement)==null||et.releasePointerCapture(Se.pointerId),(pt=r.domElement)==null||pt.ownerDocument.removeEventListener("pointermove",ue),(Te=r.domElement)==null||Te.ownerDocument.removeEventListener("pointerup",Q)),r.dispatchEvent(o),l=a.NONE}function Re(Se){let et;switch(Se.button){case 0:et=r.mouseButtons.LEFT;break;case 1:et=r.mouseButtons.MIDDLE;break;case 2:et=r.mouseButtons.RIGHT;break;default:et=-1}switch(et){case Gl.DOLLY:if(r.enableZoom===!1)return;ae(Se),l=a.DOLLY;break;case Gl.ROTATE:if(Se.ctrlKey||Se.metaKey||Se.shiftKey){if(r.enablePan===!1)return;fe(Se),l=a.PAN}else{if(r.enableRotate===!1)return;K(Se),l=a.ROTATE}break;case Gl.PAN:if(Se.ctrlKey||Se.metaKey||Se.shiftKey){if(r.enableRotate===!1)return;K(Se),l=a.ROTATE}else{if(r.enablePan===!1)return;fe(Se),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function Je(Se){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;we(Se);break;case a.DOLLY:if(r.enableZoom===!1)return;Ee(Se);break;case a.PAN:if(r.enablePan===!1)return;Ce(Se);break}}function Ze(Se){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(Se.preventDefault(),r.dispatchEvent(s),Ye(Se),r.dispatchEvent(o))}function ct(Se){r.enabled===!1||r.enablePan===!1||Ne(Se)}function vt(Se){switch(Nt(Se),U.length){case 1:switch(r.touches.ONE){case Ou.ROTATE:if(r.enableRotate===!1)return;he(),l=a.TOUCH_ROTATE;break;case Ou.PAN:if(r.enablePan===!1)return;Oe(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Ou.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;_e(),l=a.TOUCH_DOLLY_PAN;break;case Ou.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ne(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function ot(Se){switch(Nt(Se),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;ut(Se),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;$e(Se),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Qe(Se),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;dt(Se),r.update();break;default:l=a.NONE}}function Le(Se){r.enabled!==!1&&Se.preventDefault()}function Ut(Se){U.push(Se)}function Tt(Se){delete F[Se.pointerId];for(let et=0;et<U.length;et++)if(U[et].pointerId==Se.pointerId){U.splice(et,1);return}}function Nt(Se){let et=F[Se.pointerId];et===void 0&&(et=new xt,F[Se.pointerId]=et),et.set(Se.pageX,Se.pageY)}function Ct(Se){const et=Se.pointerId===U[0].pointerId?U[1]:U[0];return F[et.pointerId]}this.dollyIn=(Se=V())=>{oe(Se),r.update()},this.dollyOut=(Se=V())=>{$(Se),r.update()},this.getScale=()=>d,this.setScale=Se=>{Y(Se),r.update()},this.getZoomScale=()=>V(),t!==void 0&&this.connect(t),this.update()}};class sG extends d3{constructor(e){super(e),this.type=co}parse(e){const o=function(k,R){switch(k){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(R||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(R||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(R||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(R||""))}},c=`
`,h=function(k,R,U){R=R||1024;let z=k.pos,V=-1,G=0,J="",ie=String.fromCharCode.apply(null,new Uint16Array(k.subarray(z,z+128)));for(;0>(V=ie.indexOf(c))&&G<R&&z<k.byteLength;)J+=ie,G+=ie.length,z+=128,ie+=String.fromCharCode.apply(null,new Uint16Array(k.subarray(z,z+128)));return-1<V?(U!==!1&&(k.pos+=G+V+1),J+ie.slice(0,V)):!1},d=function(k){const R=/^#\?(\S+)/,U=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,F=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,z=/^\s*FORMAT=(\S+)\s*$/,V=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,G={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let J,ie;for((k.pos>=k.byteLength||!(J=h(k)))&&o(1,"no header found"),(ie=J.match(R))||o(3,"bad initial token"),G.valid|=1,G.programtype=ie[1],G.string+=J+`
`;J=h(k),J!==!1;){if(G.string+=J+`
`,J.charAt(0)==="#"){G.comments+=J+`
`;continue}if((ie=J.match(U))&&(G.gamma=parseFloat(ie[1])),(ie=J.match(F))&&(G.exposure=parseFloat(ie[1])),(ie=J.match(z))&&(G.valid|=2,G.format=ie[1]),(ie=J.match(V))&&(G.valid|=4,G.height=parseInt(ie[1],10),G.width=parseInt(ie[2],10)),G.valid&2&&G.valid&4)break}return G.valid&2||o(3,"missing format specifier"),G.valid&4||o(3,"missing image size specifier"),G},m=function(k,R,U){const F=R;if(F<8||F>32767||k[0]!==2||k[1]!==2||k[2]&128)return new Uint8Array(k);F!==(k[2]<<8|k[3])&&o(3,"wrong scanline width");const z=new Uint8Array(4*R*U);z.length||o(4,"unable to allocate buffer space");let V=0,G=0;const J=4*F,ie=new Uint8Array(4),ce=new Uint8Array(J);let W=U;for(;W>0&&G<k.byteLength;){G+4>k.byteLength&&o(1),ie[0]=k[G++],ie[1]=k[G++],ie[2]=k[G++],ie[3]=k[G++],(ie[0]!=2||ie[1]!=2||(ie[2]<<8|ie[3])!=F)&&o(3,"bad rgbe scanline format");let Y=0,$;for(;Y<J&&G<k.byteLength;){$=k[G++];const D=$>128;if(D&&($-=128),($===0||Y+$>J)&&o(3,"bad scanline data"),D){const j=k[G++];for(let K=0;K<$;K++)ce[Y++]=j}else ce.set(k.subarray(G,G+$),Y),Y+=$,G+=$}const oe=F;for(let D=0;D<oe;D++){let j=0;z[V]=ce[D+j],j+=F,z[V+1]=ce[D+j],j+=F,z[V+2]=ce[D+j],j+=F,z[V+3]=ce[D+j],V+=4}W--}return z},v=function(k,R,U,F){const z=k[R+3],V=Math.pow(2,z-128)/255;U[F+0]=k[R+0]*V,U[F+1]=k[R+1]*V,U[F+2]=k[R+2]*V,U[F+3]=1},w=function(k,R,U,F){const z=k[R+3],V=Math.pow(2,z-128)/255;U[F+0]=Cf.toHalfFloat(Math.min(k[R+0]*V,65504)),U[F+1]=Cf.toHalfFloat(Math.min(k[R+1]*V,65504)),U[F+2]=Cf.toHalfFloat(Math.min(k[R+2]*V,65504)),U[F+3]=Cf.toHalfFloat(1)},x=new Uint8Array(e);x.pos=0;const g=d(x),S=g.width,_=g.height,T=m(x.subarray(x.pos),S,_);let L,P,N;switch(this.type){case Js:N=T.length/4;const k=new Float32Array(N*4);for(let U=0;U<N;U++)v(T,U*4,k,U*4);L=k,P=Js;break;case co:N=T.length/4;const R=new Uint16Array(N*4);for(let U=0;U<N;U++)w(T,U*4,R,U*4);L=R,P=co;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:S,height:_,data:L,header:g.string,gamma:g.gamma,exposure:g.exposure,type:P}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){switch(o.type){case Js:case co:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=qr,o.magFilter=qr,o.generateMipmaps=!1,o.flipY=!0;break}t&&t(o,a)}return super.load(e,s,r,i)}}const u0=gk>=152;class oG extends d3{constructor(e){super(e),this.type=co}parse(e){const R=Math.pow(2.7182818,2.2);function U(q,O){for(var ee=0,me=0;me<65536;++me)(me==0||q[me>>3]&1<<(me&7))&&(O[ee++]=me);for(var de=ee-1;ee<65536;)O[ee++]=0;return de}function F(q){for(var O=0;O<16384;O++)q[O]={},q[O].len=0,q[O].lit=0,q[O].p=null}const z={l:0,c:0,lc:0};function V(q,O,ee,me,de){for(;ee<q;)O=O<<8|Ct(me,de),ee+=8;ee-=q,z.l=O>>ee&(1<<q)-1,z.c=O,z.lc=ee}const G=new Array(59);function J(q){for(var O=0;O<=58;++O)G[O]=0;for(var O=0;O<65537;++O)G[q[O]]+=1;for(var ee=0,O=58;O>0;--O){var me=ee+G[O]>>1;G[O]=ee,ee=me}for(var O=0;O<65537;++O){var de=q[O];de>0&&(q[O]=de|G[de]++<<6)}}function ie(q,O,ee,me,de,xe,Ve){for(var Xe=ee,it=0,rt=0;de<=xe;de++){if(Xe.value-ee.value>me)return!1;V(6,it,rt,q,Xe);var ht=z.l;if(it=z.c,rt=z.lc,Ve[de]=ht,ht==63){if(Xe.value-ee.value>me)throw"Something wrong with hufUnpackEncTable";V(8,it,rt,q,Xe);var nt=z.l+6;if(it=z.c,rt=z.lc,de+nt>xe+1)throw"Something wrong with hufUnpackEncTable";for(;nt--;)Ve[de++]=0;de--}else if(ht>=59){var nt=ht-59+2;if(de+nt>xe+1)throw"Something wrong with hufUnpackEncTable";for(;nt--;)Ve[de++]=0;de--}}J(Ve)}function ce(q){return q&63}function W(q){return q>>6}function Y(q,O,ee,me){for(;O<=ee;O++){var de=W(q[O]),xe=ce(q[O]);if(de>>xe)throw"Invalid table entry";if(xe>14){var Ve=me[de>>xe-14];if(Ve.len)throw"Invalid table entry";if(Ve.lit++,Ve.p){var Xe=Ve.p;Ve.p=new Array(Ve.lit);for(var it=0;it<Ve.lit-1;++it)Ve.p[it]=Xe[it]}else Ve.p=new Array(1);Ve.p[Ve.lit-1]=O}else if(xe)for(var rt=0,it=1<<14-xe;it>0;it--){var Ve=me[(de<<14-xe)+rt];if(Ve.len||Ve.p)throw"Invalid table entry";Ve.len=xe,Ve.lit=O,rt++}}return!0}const $={c:0,lc:0};function oe(q,O,ee,me){q=q<<8|Ct(ee,me),O+=8,$.c=q,$.lc=O}const D={c:0,lc:0};function j(q,O,ee,me,de,xe,Ve,Xe,it,rt){if(q==O){me<8&&(oe(ee,me,de,Ve),ee=$.c,me=$.lc),me-=8;var ht=ee>>me,ht=new Uint8Array([ht])[0];if(it.value+ht>rt)return!1;for(var nt=Xe[it.value-1];ht-- >0;)Xe[it.value++]=nt}else if(it.value<rt)Xe[it.value++]=q;else return!1;D.c=ee,D.lc=me}function K(q){return q&65535}function ae(q){var O=K(q);return O>32767?O-65536:O}const fe={a:0,b:0};function we(q,O){var ee=ae(q),me=ae(O),de=me,xe=ee+(de&1)+(de>>1),Ve=xe,Xe=xe-de;fe.a=Ve,fe.b=Xe}function Ee(q,O){var ee=K(q),me=K(O),de=ee-(me>>1)&65535,xe=me+de-32768&65535;fe.a=xe,fe.b=de}function Ce(q,O,ee,me,de,xe,Ve){for(var Xe=Ve<16384,it=ee>de?de:ee,rt=1,ht;rt<=it;)rt<<=1;for(rt>>=1,ht=rt,rt>>=1;rt>=1;){for(var nt=0,jt=nt+xe*(de-ht),kt=xe*rt,Dt=xe*ht,nn=me*rt,on=me*ht,sn,Vt,dn,Yt;nt<=jt;nt+=Dt){for(var En=nt,pn=nt+me*(ee-ht);En<=pn;En+=on){var vn=En+nn,rr=En+kt,Yn=rr+nn;Xe?(we(q[En+O],q[rr+O]),sn=fe.a,dn=fe.b,we(q[vn+O],q[Yn+O]),Vt=fe.a,Yt=fe.b,we(sn,Vt),q[En+O]=fe.a,q[vn+O]=fe.b,we(dn,Yt),q[rr+O]=fe.a,q[Yn+O]=fe.b):(Ee(q[En+O],q[rr+O]),sn=fe.a,dn=fe.b,Ee(q[vn+O],q[Yn+O]),Vt=fe.a,Yt=fe.b,Ee(sn,Vt),q[En+O]=fe.a,q[vn+O]=fe.b,Ee(dn,Yt),q[rr+O]=fe.a,q[Yn+O]=fe.b)}if(ee&rt){var rr=En+kt;Xe?we(q[En+O],q[rr+O]):Ee(q[En+O],q[rr+O]),sn=fe.a,q[rr+O]=fe.b,q[En+O]=sn}}if(de&rt)for(var En=nt,pn=nt+me*(ee-ht);En<=pn;En+=on){var vn=En+nn;Xe?we(q[En+O],q[vn+O]):Ee(q[En+O],q[vn+O]),sn=fe.a,q[vn+O]=fe.b,q[En+O]=sn}ht=rt,rt>>=1}return nt}function Ye(q,O,ee,me,de,xe,Ve,Xe,it,rt){for(var ht=0,nt=0,jt=Xe,kt=Math.trunc(de.value+(xe+7)/8);de.value<kt;)for(oe(ht,nt,ee,de),ht=$.c,nt=$.lc;nt>=14;){var Dt=ht>>nt-14&16383,nn=O[Dt];if(nn.len)nt-=nn.len,j(nn.lit,Ve,ht,nt,ee,me,de,it,rt,jt),ht=D.c,nt=D.lc;else{if(!nn.p)throw"hufDecode issues";var on;for(on=0;on<nn.lit;on++){for(var sn=ce(q[nn.p[on]]);nt<sn&&de.value<kt;)oe(ht,nt,ee,de),ht=$.c,nt=$.lc;if(nt>=sn&&W(q[nn.p[on]])==(ht>>nt-sn&(1<<sn)-1)){nt-=sn,j(nn.p[on],Ve,ht,nt,ee,me,de,it,rt,jt),ht=D.c,nt=D.lc;break}}if(on==nn.lit)throw"hufDecode issues"}}var Vt=8-xe&7;for(ht>>=Vt,nt-=Vt;nt>0;){var nn=O[ht<<14-nt&16383];if(nn.len)nt-=nn.len,j(nn.lit,Ve,ht,nt,ee,me,de,it,rt,jt),ht=D.c,nt=D.lc;else throw"hufDecode issues"}return!0}function Ne(q,O,ee,me,de,xe){var Ve={value:0},Xe=ee.value,it=Nt(O,ee),rt=Nt(O,ee);ee.value+=4;var ht=Nt(O,ee);if(ee.value+=4,it<0||it>=65537||rt<0||rt>=65537)throw"Something wrong with HUF_ENCSIZE";var nt=new Array(65537),jt=new Array(16384);F(jt);var kt=me-(ee.value-Xe);if(ie(q,O,ee,kt,it,rt,nt),ht>8*(me-(ee.value-Xe)))throw"Something wrong with hufUncompress";Y(nt,it,rt,jt),Ye(nt,jt,q,O,ee,ht,rt,xe,de,Ve)}function he(q,O,ee){for(var me=0;me<ee;++me)O[me]=q[O[me]]}function Oe(q){for(var O=1;O<q.length;O++){var ee=q[O-1]+q[O]-128;q[O]=ee}}function Ae(q,O){for(var ee=0,me=Math.floor((q.length+1)/2),de=0,xe=q.length-1;!(de>xe||(O[de++]=q[ee++],de>xe));)O[de++]=q[me++]}function _e(q){for(var O=q.byteLength,ee=new Array,me=0,de=new DataView(q);O>0;){var xe=de.getInt8(me++);if(xe<0){var Ve=-xe;O-=Ve+1;for(var Xe=0;Xe<Ve;Xe++)ee.push(de.getUint8(me++))}else{var Ve=xe;O-=2;for(var it=de.getUint8(me++),Xe=0;Xe<Ve+1;Xe++)ee.push(it)}}return ee}function ne(q,O,ee,me,de,xe){var vn=new DataView(xe.buffer),Ve=ee[q.idx[0]].width,Xe=ee[q.idx[0]].height,it=3,rt=Math.floor(Ve/8),ht=Math.ceil(Ve/8),nt=Math.ceil(Xe/8),jt=Ve-(ht-1)*8,kt=Xe-(nt-1)*8,Dt={value:0},nn=new Array(it),on=new Array(it),sn=new Array(it),Vt=new Array(it),dn=new Array(it);for(let cn=0;cn<it;++cn)dn[cn]=O[q.idx[cn]],nn[cn]=cn<1?0:nn[cn-1]+ht*nt,on[cn]=new Float32Array(64),sn[cn]=new Uint16Array(64),Vt[cn]=new Uint16Array(ht*64);for(let cn=0;cn<nt;++cn){var Yt=8;cn==nt-1&&(Yt=kt);var En=8;for(let Cn=0;Cn<ht;++Cn){Cn==ht-1&&(En=jt);for(let zn=0;zn<it;++zn)sn[zn].fill(0),sn[zn][0]=de[nn[zn]++],ut(Dt,me,sn[zn]),$e(sn[zn],on[zn]),Be(on[zn]);Qe(on);for(let zn=0;zn<it;++zn)dt(on[zn],Vt[zn],Cn*64)}let xr=0;for(let Cn=0;Cn<it;++Cn){const zn=ee[q.idx[Cn]].type;for(let Mr=8*cn;Mr<8*cn+Yt;++Mr){xr=dn[Cn][Mr];for(let Uo=0;Uo<rt;++Uo){const Fi=Uo*64+(Mr&7)*8;vn.setUint16(xr+0*2*zn,Vt[Cn][Fi+0],!0),vn.setUint16(xr+1*2*zn,Vt[Cn][Fi+1],!0),vn.setUint16(xr+2*2*zn,Vt[Cn][Fi+2],!0),vn.setUint16(xr+3*2*zn,Vt[Cn][Fi+3],!0),vn.setUint16(xr+4*2*zn,Vt[Cn][Fi+4],!0),vn.setUint16(xr+5*2*zn,Vt[Cn][Fi+5],!0),vn.setUint16(xr+6*2*zn,Vt[Cn][Fi+6],!0),vn.setUint16(xr+7*2*zn,Vt[Cn][Fi+7],!0),xr+=8*2*zn}}if(rt!=ht)for(let Mr=8*cn;Mr<8*cn+Yt;++Mr){const Uo=dn[Cn][Mr]+8*rt*2*zn,Fi=rt*64+(Mr&7)*8;for(let vo=0;vo<En;++vo)vn.setUint16(Uo+vo*2*zn,Vt[Cn][Fi+vo],!0)}}}for(var pn=new Uint16Array(Ve),vn=new DataView(xe.buffer),rr=0;rr<it;++rr){ee[q.idx[rr]].decoded=!0;var Yn=ee[q.idx[rr]].type;if(ee[rr].type==2)for(var or=0;or<Xe;++or){const cn=dn[rr][or];for(var zr=0;zr<Ve;++zr)pn[zr]=vn.getUint16(cn+zr*2*Yn,!0);for(var zr=0;zr<Ve;++zr)vn.setFloat32(cn+zr*2*Yn,De(pn[zr]),!0)}}}function ut(q,O,ee){for(var me,de=1;de<64;)me=O[q.value],me==65280?de=64:me>>8==255?de+=me&255:(ee[de]=me,de++),q.value++}function $e(q,O){O[0]=De(q[0]),O[1]=De(q[1]),O[2]=De(q[5]),O[3]=De(q[6]),O[4]=De(q[14]),O[5]=De(q[15]),O[6]=De(q[27]),O[7]=De(q[28]),O[8]=De(q[2]),O[9]=De(q[4]),O[10]=De(q[7]),O[11]=De(q[13]),O[12]=De(q[16]),O[13]=De(q[26]),O[14]=De(q[29]),O[15]=De(q[42]),O[16]=De(q[3]),O[17]=De(q[8]),O[18]=De(q[12]),O[19]=De(q[17]),O[20]=De(q[25]),O[21]=De(q[30]),O[22]=De(q[41]),O[23]=De(q[43]),O[24]=De(q[9]),O[25]=De(q[11]),O[26]=De(q[18]),O[27]=De(q[24]),O[28]=De(q[31]),O[29]=De(q[40]),O[30]=De(q[44]),O[31]=De(q[53]),O[32]=De(q[10]),O[33]=De(q[19]),O[34]=De(q[23]),O[35]=De(q[32]),O[36]=De(q[39]),O[37]=De(q[45]),O[38]=De(q[52]),O[39]=De(q[54]),O[40]=De(q[20]),O[41]=De(q[22]),O[42]=De(q[33]),O[43]=De(q[38]),O[44]=De(q[46]),O[45]=De(q[51]),O[46]=De(q[55]),O[47]=De(q[60]),O[48]=De(q[21]),O[49]=De(q[34]),O[50]=De(q[37]),O[51]=De(q[47]),O[52]=De(q[50]),O[53]=De(q[56]),O[54]=De(q[59]),O[55]=De(q[61]),O[56]=De(q[35]),O[57]=De(q[36]),O[58]=De(q[48]),O[59]=De(q[49]),O[60]=De(q[57]),O[61]=De(q[58]),O[62]=De(q[62]),O[63]=De(q[63])}function Be(q){const O=.5*Math.cos(.7853975),ee=.5*Math.cos(3.14159/16),me=.5*Math.cos(3.14159/8),de=.5*Math.cos(3*3.14159/16),xe=.5*Math.cos(5*3.14159/16),Ve=.5*Math.cos(3*3.14159/8),Xe=.5*Math.cos(7*3.14159/16);for(var it=new Array(4),rt=new Array(4),ht=new Array(4),nt=new Array(4),jt=0;jt<8;++jt){var kt=jt*8;it[0]=me*q[kt+2],it[1]=Ve*q[kt+2],it[2]=me*q[kt+6],it[3]=Ve*q[kt+6],rt[0]=ee*q[kt+1]+de*q[kt+3]+xe*q[kt+5]+Xe*q[kt+7],rt[1]=de*q[kt+1]-Xe*q[kt+3]-ee*q[kt+5]-xe*q[kt+7],rt[2]=xe*q[kt+1]-ee*q[kt+3]+Xe*q[kt+5]+de*q[kt+7],rt[3]=Xe*q[kt+1]-xe*q[kt+3]+de*q[kt+5]-ee*q[kt+7],ht[0]=O*(q[kt+0]+q[kt+4]),ht[3]=O*(q[kt+0]-q[kt+4]),ht[1]=it[0]+it[3],ht[2]=it[1]-it[2],nt[0]=ht[0]+ht[1],nt[1]=ht[3]+ht[2],nt[2]=ht[3]-ht[2],nt[3]=ht[0]-ht[1],q[kt+0]=nt[0]+rt[0],q[kt+1]=nt[1]+rt[1],q[kt+2]=nt[2]+rt[2],q[kt+3]=nt[3]+rt[3],q[kt+4]=nt[3]-rt[3],q[kt+5]=nt[2]-rt[2],q[kt+6]=nt[1]-rt[1],q[kt+7]=nt[0]-rt[0]}for(var Dt=0;Dt<8;++Dt)it[0]=me*q[16+Dt],it[1]=Ve*q[16+Dt],it[2]=me*q[48+Dt],it[3]=Ve*q[48+Dt],rt[0]=ee*q[8+Dt]+de*q[24+Dt]+xe*q[40+Dt]+Xe*q[56+Dt],rt[1]=de*q[8+Dt]-Xe*q[24+Dt]-ee*q[40+Dt]-xe*q[56+Dt],rt[2]=xe*q[8+Dt]-ee*q[24+Dt]+Xe*q[40+Dt]+de*q[56+Dt],rt[3]=Xe*q[8+Dt]-xe*q[24+Dt]+de*q[40+Dt]-ee*q[56+Dt],ht[0]=O*(q[Dt]+q[32+Dt]),ht[3]=O*(q[Dt]-q[32+Dt]),ht[1]=it[0]+it[3],ht[2]=it[1]-it[2],nt[0]=ht[0]+ht[1],nt[1]=ht[3]+ht[2],nt[2]=ht[3]-ht[2],nt[3]=ht[0]-ht[1],q[0+Dt]=nt[0]+rt[0],q[8+Dt]=nt[1]+rt[1],q[16+Dt]=nt[2]+rt[2],q[24+Dt]=nt[3]+rt[3],q[32+Dt]=nt[3]-rt[3],q[40+Dt]=nt[2]-rt[2],q[48+Dt]=nt[1]-rt[1],q[56+Dt]=nt[0]-rt[0]}function Qe(q){for(var O=0;O<64;++O){var ee=q[0][O],me=q[1][O],de=q[2][O];q[0][O]=ee+1.5747*de,q[1][O]=ee-.1873*me-.4682*de,q[2][O]=ee+1.8556*me}}function dt(q,O,ee){for(var me=0;me<64;++me)O[ee+me]=Cf.toHalfFloat(mt(q[me]))}function mt(q){return q<=1?Math.sign(q)*Math.pow(Math.abs(q),2.2):Math.sign(q)*Math.pow(R,Math.abs(q)-1)}function ue(q){return new DataView(q.array.buffer,q.offset.value,q.size)}function Q(q){var O=q.viewer.buffer.slice(q.offset.value,q.offset.value+q.size),ee=new Uint8Array(_e(O)),me=new Uint8Array(ee.length);return Oe(ee),Ae(ee,me),new DataView(me.buffer)}function Re(q){var O=q.array.slice(q.offset.value,q.offset.value+q.size),ee=Nv(O),me=new Uint8Array(ee.length);return Oe(ee),Ae(ee,me),new DataView(me.buffer)}function Je(q){for(var O=q.viewer,ee={value:q.offset.value},me=new Uint16Array(q.width*q.scanlineBlockSize*(q.channels*q.type)),de=new Uint8Array(8192),xe=0,Ve=new Array(q.channels),Xe=0;Xe<q.channels;Xe++)Ve[Xe]={},Ve[Xe].start=xe,Ve[Xe].end=Ve[Xe].start,Ve[Xe].nx=q.width,Ve[Xe].ny=q.lines,Ve[Xe].size=q.type,xe+=Ve[Xe].nx*Ve[Xe].ny*Ve[Xe].size;var it=Ge(O,ee),rt=Ge(O,ee);if(rt>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(it<=rt)for(var Xe=0;Xe<rt-it+1;Xe++)de[Xe+it]=Se(O,ee);var ht=new Uint16Array(65536),nt=U(de,ht),jt=Nt(O,ee);Ne(q.array,O,ee,jt,me,xe);for(var Xe=0;Xe<q.channels;++Xe)for(var kt=Ve[Xe],Dt=0;Dt<Ve[Xe].size;++Dt)Ce(me,kt.start+Dt,kt.nx,kt.size,kt.ny,kt.nx*kt.size,nt);he(ht,me,xe);for(var nn=0,on=new Uint8Array(me.buffer.byteLength),sn=0;sn<q.lines;sn++)for(var Vt=0;Vt<q.channels;Vt++){var kt=Ve[Vt],dn=kt.nx*kt.size,Yt=new Uint8Array(me.buffer,kt.end*2,dn*2);on.set(Yt,nn),nn+=dn*2,kt.end+=dn}return new DataView(on.buffer)}function Ze(q){var O=q.array.slice(q.offset.value,q.offset.value+q.size),ee=Nv(O);const me=q.lines*q.channels*q.width,de=q.type==1?new Uint16Array(me):new Uint32Array(me);let xe=0,Ve=0;const Xe=new Array(4);for(let it=0;it<q.lines;it++)for(let rt=0;rt<q.channels;rt++){let ht=0;switch(q.type){case 1:Xe[0]=xe,Xe[1]=Xe[0]+q.width,xe=Xe[1]+q.width;for(let nt=0;nt<q.width;++nt){const jt=ee[Xe[0]++]<<8|ee[Xe[1]++];ht+=jt,de[Ve]=ht,Ve++}break;case 2:Xe[0]=xe,Xe[1]=Xe[0]+q.width,Xe[2]=Xe[1]+q.width,xe=Xe[2]+q.width;for(let nt=0;nt<q.width;++nt){const jt=ee[Xe[0]++]<<24|ee[Xe[1]++]<<16|ee[Xe[2]++]<<8;ht+=jt,de[Ve]=ht,Ve++}break}}return new DataView(de.buffer)}function ct(q){var O=q.viewer,ee={value:q.offset.value},me=new Uint8Array(q.width*q.lines*(q.channels*q.type*2)),de={version:et(O,ee),unknownUncompressedSize:et(O,ee),unknownCompressedSize:et(O,ee),acCompressedSize:et(O,ee),dcCompressedSize:et(O,ee),rleCompressedSize:et(O,ee),rleUncompressedSize:et(O,ee),rleRawSize:et(O,ee),totalAcUncompressedCount:et(O,ee),totalDcUncompressedCount:et(O,ee),acCompression:et(O,ee)};if(de.version<2)throw"EXRLoader.parse: "+nr.compression+" version "+de.version+" is unsupported";for(var xe=new Array,Ve=Ge(O,ee)-2;Ve>0;){var Xe=vt(O.buffer,ee),it=Se(O,ee),rt=it>>2&3,ht=(it>>4)-1,nt=new Int8Array([ht])[0],jt=Se(O,ee);xe.push({name:Xe,index:nt,type:jt,compression:rt}),Ve-=Xe.length+3}for(var kt=nr.channels,Dt=new Array(q.channels),nn=0;nn<q.channels;++nn){var on=Dt[nn]={},sn=kt[nn];on.name=sn.name,on.compression=0,on.decoded=!1,on.type=sn.pixelType,on.pLinear=sn.pLinear,on.width=q.width,on.height=q.lines}for(var Vt={idx:new Array(3)},dn=0;dn<q.channels;++dn)for(var on=Dt[dn],nn=0;nn<xe.length;++nn){var Yt=xe[nn];on.name==Yt.name&&(on.compression=Yt.compression,Yt.index>=0&&(Vt.idx[Yt.index]=dn),on.offset=dn)}if(de.acCompressedSize>0)switch(de.acCompression){case 0:var vn=new Uint16Array(de.totalAcUncompressedCount);Ne(q.array,O,ee,de.acCompressedSize,vn,de.totalAcUncompressedCount);break;case 1:var En=q.array.slice(ee.value,ee.value+de.totalAcUncompressedCount),pn=Nv(En),vn=new Uint16Array(pn.buffer);ee.value+=de.totalAcUncompressedCount;break}if(de.dcCompressedSize>0){var rr={array:q.array,offset:ee,size:de.dcCompressedSize},Yn=new Uint16Array(Re(rr).buffer);ee.value+=de.dcCompressedSize}if(de.rleRawSize>0){var En=q.array.slice(ee.value,ee.value+de.rleCompressedSize),pn=Nv(En),or=_e(pn.buffer);ee.value+=de.rleCompressedSize}for(var zr=0,cn=new Array(Dt.length),nn=0;nn<cn.length;++nn)cn[nn]=new Array;for(var xr=0;xr<q.lines;++xr)for(var Cn=0;Cn<Dt.length;++Cn)cn[Cn].push(zr),zr+=Dt[Cn].width*q.type*2;ne(Vt,cn,Dt,vn,Yn,me);for(var nn=0;nn<Dt.length;++nn){var on=Dt[nn];if(!on.decoded)switch(on.compression){case 2:for(var zn=0,Mr=0,xr=0;xr<q.lines;++xr){for(var Uo=cn[nn][zn],Fi=0;Fi<on.width;++Fi){for(var vo=0;vo<2*on.type;++vo)me[Uo++]=or[Mr+vo*on.width*on.height];Mr++}zn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(me.buffer)}function vt(q,O){for(var ee=new Uint8Array(q),me=0;ee[O.value+me]!=0;)me+=1;var de=new TextDecoder().decode(ee.slice(O.value,O.value+me));return O.value=O.value+me+1,de}function ot(q,O,ee){var me=new TextDecoder().decode(new Uint8Array(q).slice(O.value,O.value+ee));return O.value=O.value+ee,me}function Le(q,O){var ee=Tt(q,O),me=Nt(q,O);return[ee,me]}function Ut(q,O){var ee=Nt(q,O),me=Nt(q,O);return[ee,me]}function Tt(q,O){var ee=q.getInt32(O.value,!0);return O.value=O.value+4,ee}function Nt(q,O){var ee=q.getUint32(O.value,!0);return O.value=O.value+4,ee}function Ct(q,O){var ee=q[O.value];return O.value=O.value+1,ee}function Se(q,O){var ee=q.getUint8(O.value);return O.value=O.value+1,ee}const et=function(q,O){let ee;return"getBigInt64"in DataView.prototype?ee=Number(q.getBigInt64(O.value,!0)):ee=q.getUint32(O.value+4,!0)+Number(q.getUint32(O.value,!0)<<32),O.value+=8,ee};function pt(q,O){var ee=q.getFloat32(O.value,!0);return O.value+=4,ee}function Te(q,O){return Cf.toHalfFloat(pt(q,O))}function De(q){var O=(q&31744)>>10,ee=q&1023;return(q>>15?-1:1)*(O?O===31?ee?NaN:1/0:Math.pow(2,O-15)*(1+ee/1024):6103515625e-14*(ee/1024))}function Ge(q,O){var ee=q.getUint16(O.value,!0);return O.value+=2,ee}function bt(q,O){return De(Ge(q,O))}function Et(q,O,ee,me){for(var de=ee.value,xe=[];ee.value<de+me-1;){var Ve=vt(O,ee),Xe=Tt(q,ee),it=Se(q,ee);ee.value+=3;var rt=Tt(q,ee),ht=Tt(q,ee);xe.push({name:Ve,pixelType:Xe,pLinear:it,xSampling:rt,ySampling:ht})}return ee.value+=1,xe}function At(q,O){var ee=pt(q,O),me=pt(q,O),de=pt(q,O),xe=pt(q,O),Ve=pt(q,O),Xe=pt(q,O),it=pt(q,O),rt=pt(q,O);return{redX:ee,redY:me,greenX:de,greenY:xe,blueX:Ve,blueY:Xe,whiteX:it,whiteY:rt}}function zt(q,O){var ee=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],me=Se(q,O);return ee[me]}function _n(q,O){var ee=Nt(q,O),me=Nt(q,O),de=Nt(q,O),xe=Nt(q,O);return{xMin:ee,yMin:me,xMax:de,yMax:xe}}function Mn(q,O){var ee=["INCREASING_Y"],me=Se(q,O);return ee[me]}function fn(q,O){var ee=pt(q,O),me=pt(q,O);return[ee,me]}function Xn(q,O){var ee=pt(q,O),me=pt(q,O),de=pt(q,O);return[ee,me,de]}function Ft(q,O,ee,me,de){if(me==="string"||me==="stringvector"||me==="iccProfile")return ot(O,ee,de);if(me==="chlist")return Et(q,O,ee,de);if(me==="chromaticities")return At(q,ee);if(me==="compression")return zt(q,ee);if(me==="box2i")return _n(q,ee);if(me==="lineOrder")return Mn(q,ee);if(me==="float")return pt(q,ee);if(me==="v2f")return fn(q,ee);if(me==="v3f")return Xn(q,ee);if(me==="int")return Tt(q,ee);if(me==="rational")return Le(q,ee);if(me==="timecode")return Ut(q,ee);if(me==="preview")return ee.value+=de,"skipped";ee.value+=de}function ti(q,O,ee){const me={};if(q.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";me.version=q.getUint8(4);const de=q.getUint8(5);me.spec={singleTile:!!(de&2),longName:!!(de&4),deepFormat:!!(de&8),multiPart:!!(de&16)},ee.value=8;for(var xe=!0;xe;){var Ve=vt(O,ee);if(Ve==0)xe=!1;else{var Xe=vt(O,ee),it=Nt(q,ee),rt=Ft(q,O,ee,Xe,it);rt===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Xe}'.`):me[Ve]=rt}}if(de&-5)throw console.error("EXRHeader:",me),"THREE.EXRLoader: provided file is currently unsupported.";return me}function ni(q,O,ee,me,de){const xe={size:0,viewer:O,array:ee,offset:me,width:q.dataWindow.xMax-q.dataWindow.xMin+1,height:q.dataWindow.yMax-q.dataWindow.yMin+1,channels:q.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:q.channels[0].pixelType,uncompress:null,getter:null,format:null,[u0?"colorSpace":"encoding"]:null};switch(q.compression){case"NO_COMPRESSION":xe.lines=1,xe.uncompress=ue;break;case"RLE_COMPRESSION":xe.lines=1,xe.uncompress=Q;break;case"ZIPS_COMPRESSION":xe.lines=1,xe.uncompress=Re;break;case"ZIP_COMPRESSION":xe.lines=16,xe.uncompress=Re;break;case"PIZ_COMPRESSION":xe.lines=32,xe.uncompress=Je;break;case"PXR24_COMPRESSION":xe.lines=16,xe.uncompress=Ze;break;case"DWAA_COMPRESSION":xe.lines=32,xe.uncompress=ct;break;case"DWAB_COMPRESSION":xe.lines=256,xe.uncompress=ct;break;default:throw"EXRLoader.parse: "+q.compression+" is unsupported"}if(xe.scanlineBlockSize=xe.lines,xe.type==1)switch(de){case Js:xe.getter=bt,xe.inputSize=2;break;case co:xe.getter=Ge,xe.inputSize=2;break}else if(xe.type==2)switch(de){case Js:xe.getter=pt,xe.inputSize=4;break;case co:xe.getter=Te,xe.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+xe.type+" for "+q.compression+".";xe.blockCount=(q.dataWindow.yMax+1)/xe.scanlineBlockSize;for(var Ve=0;Ve<xe.blockCount;Ve++)et(O,me);xe.outputChannels=xe.channels==3?4:xe.channels;const Xe=xe.width*xe.height*xe.outputChannels;switch(de){case Js:xe.byteArray=new Float32Array(Xe),xe.channels<xe.outputChannels&&xe.byteArray.fill(1,0,Xe);break;case co:xe.byteArray=new Uint16Array(Xe),xe.channels<xe.outputChannels&&xe.byteArray.fill(15360,0,Xe);break;default:console.error("THREE.EXRLoader: unsupported type: ",de);break}return xe.bytesPerLine=xe.width*xe.inputSize*xe.channels,xe.outputChannels==4?xe.format=uo:xe.format=Ib,u0?xe.colorSpace="srgb-linear":xe.encoding=3e3,xe}const yr=new DataView(e),tr=new Uint8Array(e),sr={value:0},nr=ti(yr,e,sr),xn=ni(nr,yr,tr,sr,this.type),is={value:0},gi={R:0,G:1,B:2,A:3,Y:0};for(let q=0;q<xn.height/xn.scanlineBlockSize;q++){const O=Nt(yr,sr);xn.size=Nt(yr,sr),xn.lines=O+xn.scanlineBlockSize>xn.height?xn.height-O:xn.scanlineBlockSize;const me=xn.size<xn.lines*xn.bytesPerLine?xn.uncompress(xn):ue(xn);sr.value+=xn.size;for(let de=0;de<xn.scanlineBlockSize;de++){const xe=de+q*xn.scanlineBlockSize;if(xe>=xn.height)break;for(let Ve=0;Ve<xn.channels;Ve++){const Xe=gi[nr.channels[Ve].name];for(let it=0;it<xn.width;it++){is.value=(de*(xn.channels*xn.width)+Ve*xn.width+it)*xn.inputSize;const rt=(xn.height-1-xe)*(xn.width*xn.outputChannels)+it*xn.outputChannels+Xe;xn.byteArray[rt]=xn.getter(me,is)}}}}return{header:nr,width:xn.width,height:xn.height,data:xn.byteArray,format:xn.format,[u0?"colorSpace":"encoding"]:xn[u0?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function s(o,a){u0?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=qr,o.magFilter=qr,o.generateMipmaps=!1,o.flipY=!1,t&&t(o,a)}return super.load(e,s,r,i)}}const bk=qe.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...u},c)=>{const h=Xs(P=>P.invalidate),d=Xs(P=>P.camera),m=Xs(P=>P.gl),v=Xs(P=>P.events),w=Xs(P=>P.setEvents),x=Xs(P=>P.set),g=Xs(P=>P.get),S=Xs(P=>P.performance),_=e||d,T=r||v.connected||m.domElement,L=qe.useMemo(()=>new iG(_),[_]);return lk(()=>{L.enabled&&L.update()},-1),qe.useEffect(()=>(s&&L.connect(s===!0?T:s),L.connect(T),()=>void L.dispose()),[s,T,t,L,h]),qe.useEffect(()=>{const P=R=>{h(),t&&S.regress(),o&&o(R)},N=R=>{a&&a(R)},k=R=>{l&&l(R)};return L.addEventListener("change",P),L.addEventListener("start",N),L.addEventListener("end",k),()=>{L.removeEventListener("start",N),L.removeEventListener("end",k),L.removeEventListener("change",P)}},[o,a,l,L,h,w]),qe.useEffect(()=>{if(n){const P=g().controls;return x({controls:L}),()=>x({controls:P})}},[n,L]),qe.createElement("primitive",im({ref:c,object:L,enableDamping:i},u))}),aG="modulepreload",lG=function(n){return"/cad-os/"+n},JA={},h5=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=lG(s),s in JA)return;JA[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const h=i[c];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":aG,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((c,h)=>{u.addEventListener("load",c),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())},Yw={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},uG="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",QA=n=>Array.isArray(n);function Mk({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:r=void 0,extensions:i}={}){var s;let o=null,a=!1,l;if(t){if(!(t in Yw))throw new Error("Preset must be one of: "+Object.keys(Yw).join(", "));n=Yw[t],e=uG}if(a=QA(n),l=QA(n)?"cube":n.startsWith("data:application/exr")?"exr":n.startsWith("data:application/hdr")?"hdr":(s=n.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase(),o=a?NR:l==="hdr"?sG:l==="exr"?oG:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);const u=M3(o,a?[n]:n,m=>{m.setPath==null||m.setPath(e),i&&i(m)}),c=a?u[0]:u;c.mapping=a?nu:Qp;const h=3001,d=3e3;return"colorSpace"in c?c.colorSpace=r??a?"srgb":"srgb-linear":c.encoding=r??a?h:d,c}const cG=n=>n.current&&n.current.isScene,hG=n=>cG(n)?n.current:n;function A3(n,e,t,r,i=0){const s=hG(e||t),o=s.background,a=s.environment,l=s.backgroundBlurriness||0;return n!=="only"&&(s.environment=r),n&&(s.background=r),n&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=i),()=>{n!=="only"&&(s.environment=a),n&&(s.background=o),n&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=l)}}function T3({scene:n,background:e=!1,blur:t,map:r}){const i=Xs(s=>s.scene);return qe.useLayoutEffect(()=>{if(r)return A3(e,n,i,r,t)},[i,n,r,e,t]),null}function Ek({background:n=!1,scene:e,blur:t,...r}){const i=Mk(r),s=Xs(o=>o.scene);return qe.useLayoutEffect(()=>A3(n,e,s,i,t),[i,n,e,s,t]),null}function fG({children:n,near:e=1,far:t=1e3,resolution:r=256,frames:i=1,map:s,background:o=!1,blur:a,scene:l,files:u,path:c,preset:h=void 0,extensions:d}){const m=Xs(_=>_.gl),v=Xs(_=>_.scene),w=qe.useRef(null),[x]=qe.useState(()=>new gg),g=qe.useMemo(()=>{const _=new qb(r);return _.texture.type=co,_},[r]);qe.useLayoutEffect(()=>(i===1&&w.current.update(m,x),A3(o,l,v,g.texture,a)),[n,x,g.texture,l,v,o,i,m]);let S=1;return lk(()=>{(i===1/0||S<i)&&(w.current.update(m,x),S++)}),qe.createElement(qe.Fragment,null,yH(qe.createElement(qe.Fragment,null,n,qe.createElement("cubeCamera",{ref:w,args:[e,t,g]}),u||h?qe.createElement(Ek,{background:!0,files:u,preset:h,path:c,extensions:d}):s?qe.createElement(T3,{background:!0,map:s,extensions:d}):null),x))}function dG(n){var e,t,r,i;const s=Mk(n),o=n.map||s;qe.useMemo(()=>KR({GroundProjectedEnvImpl:ZH}),[]);const a=qe.useMemo(()=>[o],[o]),l=(e=n.ground)==null?void 0:e.height,u=(t=n.ground)==null?void 0:t.radius,c=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return qe.createElement(qe.Fragment,null,qe.createElement(T3,im({},n,{map:o})),qe.createElement("groundProjectedEnvImpl",{args:a,scale:c,height:l,radius:u}))}function pG(n){return n.ground?qe.createElement(dG,n):n.map?qe.createElement(T3,n):n.children?qe.createElement(fG,n):qe.createElement(Ek,n)}ur.DEFAULT_UP.set(0,0,1);function mG(){const{camera:n,set:e}=Xs();return qe.useEffect(()=>{if(n instanceof Jl)console.log("Camera is already orthographic"),n.position.set(0,-400,200),n.lookAt(0,0,0),n.updateProjectionMatrix();else{console.log("Converting to orthographic camera");const t=window.innerWidth/window.innerHeight,r=1e3,i=new Jl(r*t/-2,r*t/2,r/2,r/-2,.01,1e4);i.position.set(0,-400,200),i.lookAt(0,0,0),i.updateProjectionMatrix(),e({camera:i})}},[n,e]),null}function gG(){return gt(jp,{children:[pe("axesHelper",{args:[200]}),pe("gridHelper",{args:[400,40,8947848,4473924],rotation:[Math.PI/2,0,0]})]})}function vG({children:n}){const e=Math.min(window.devicePixelRatio,2);return pe(qe.Suspense,{fallback:null,children:gt(mk,{style:{width:"100%",height:"100%",backgroundColor:"#f5f5f5",touchAction:"none"},dpr:e,frameloop:"demand",orthographic:!0,camera:{position:[0,-400,200],zoom:1,far:1e4,near:.01},children:[pe(mG,{}),pe(bk,{enableRotate:!0,enablePan:!0,enableZoom:!0,mouseButtons:{LEFT:Gl.ROTATE,MIDDLE:Gl.DOLLY,RIGHT:Gl.PAN},touches:{ONE:Ou.ROTATE,TWO:Ou.DOLLY_PAN},zoomToCursor:!0,rotateSpeed:.7,panSpeed:.5,zoomSpeed:1.2}),pe("ambientLight",{intensity:4}),pe("pointLight",{position:[100,100,100]}),pe(gG,{}),n]})})}function eT(n,e,t){if(n.clearGroups(),delete n.userData.faceGroups,n.setIndex(e.triangles),n.setAttribute("position",new en(e.vertices,3)),e.faceGroups){let r=new Set;t&&(r=new Set(t)),n.userData.faceGroups=e.faceGroups,e.faceGroups.forEach(({start:i,count:s,faceId:o})=>{n.addGroup(i,s,r.has(o)?1:0)})}else n.addGroup(0,e.triangles.length,0);e.normals&&e.normals.length?n.setAttribute("normal",new en(e.normals,3)):n.computeVertexNormals(),n.computeBoundingBox()}function tT(n,e,t){if(n.clearGroups(),delete n.userData.edgeGroups,n.setAttribute("position",new en(e.lines,3)),!!e)if(e.edgeGroups){let r=new Set;t&&(r=new Set(t)),n.userData.edgeGroups=e.edgeGroups,e.edgeGroups.forEach(({start:i,count:s,edgeId:o})=>{n.addGroup(i,s,r.has(o)?1:0)})}else n.addGroup(0,e.lines.length/3,0)}function nT(n,e){n.clearGroups(),delete n.userData.edgeGroups,n.copy(new o3(e,2))}const yG=I4.memo(function({faces:e,edges:t,helperSpaces:r=[],highQuality:i=!1}){const{invalidate:s}=Xs(),[o,a]=qe.useState([]),l=qe.useRef(new kn),u=qe.useRef(new kn);qe.useEffect(()=>{o.forEach(m=>{m.body.dispose(),m.lines.dispose()});const d=r.map(()=>({body:new kn,lines:new kn}));a(d)},[r.length]),qe.useLayoutEffect(()=>{if(e)try{console.time("[PERF] syncFaces"),eT(l.current,e),console.timeEnd("[PERF] syncFaces")}catch(d){console.error("[ERROR] Error in syncFaces:",d)}if(t)try{console.time("[PERF] syncLines"),tT(u.current,t),console.timeEnd("[PERF] syncLines")}catch(d){console.error("[ERROR] Error in syncLines:",d)}else if(e)try{console.time("[PERF] syncLinesFromFaces"),nT(u.current,l.current),console.timeEnd("[PERF] syncLinesFromFaces")}catch(d){console.error("[ERROR] Error in syncLinesFromFaces:",d)}o.length===r.length&&r.forEach((d,m)=>{d.faces&&eT(o[m].body,d.faces),d.edges?tT(o[m].lines,d.edges):d.faces&&nT(o[m].lines,o[m].body)}),s()},[e,t,r,o,s]),qe.useEffect(()=>()=>{l.current.dispose(),u.current.dispose(),o.forEach(d=>{d.body.dispose(),d.lines.dispose()})},[o]);const c=i?{color:"#6a92a6",metalness:.4,roughness:.3,envMapIntensity:.8,flatShading:!1,polygonOffset:!0,polygonOffsetFactor:2,polygonOffsetUnits:1,castShadow:!0,receiveShadow:!0}:{color:"#5a8296",polygonOffset:!0,polygonOffsetFactor:2,polygonOffsetUnits:1},h=i?{color:"#304352",linewidth:1.5}:{color:"#3c5a6e"};return gt("group",{children:[pe("mesh",{geometry:l.current,castShadow:!0,receiveShadow:!0,children:i?pe("meshStandardMaterial",{...c}):pe("meshStandardMaterial",{...c})}),pe("lineSegments",{geometry:u.current,children:pe("lineBasicMaterial",{...h})}),o.length===r.length&&o.map((d,m)=>gt("group",{children:[pe("mesh",{geometry:d.body,castShadow:!0,children:pe("meshStandardMaterial",{color:"#ff0000",transparent:!0,opacity:.3,depthWrite:!1,polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:1,roughness:.7,metalness:0})}),pe("lineSegments",{geometry:d.lines,children:pe("lineBasicMaterial",{color:"#ff3333"})})]},`helper-${m}`))]})});function Tr(n){return Tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tr(n)}var Ks=Uint8Array,ea=Uint16Array,C3=Int32Array,ox=new Ks([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ax=new Ks([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),f5=new Ks([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ak=function(n,e){for(var t=new ea(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new C3(t[30]),r=1;r<30;++r)for(var s=t[r];s<t[r+1];++s)i[s]=s-t[r]<<5|r;return{b:t,r:i}},Tk=Ak(ox,2),Ck=Tk.b,d5=Tk.r;Ck[28]=258,d5[258]=28;var Lk=Ak(ax,0),xG=Lk.b,rT=Lk.r,p5=new ea(32768);for(var Yr=0;Yr<32768;++Yr){var zc=(Yr&43690)>>1|(Yr&21845)<<1;zc=(zc&52428)>>2|(zc&13107)<<2,zc=(zc&61680)>>4|(zc&3855)<<4,p5[Yr]=((zc&65280)>>8|(zc&255)<<8)>>1}var eu=function(n,e,t){for(var r=n.length,i=0,s=new ea(e);i<r;++i)n[i]&&++s[n[i]-1];var o=new ea(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(t){a=new ea(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],c=e-n[i],h=o[n[i]-1]++<<c,d=h|(1<<c)-1;h<=d;++h)a[p5[h]>>l]=u}else for(a=new ea(r),i=0;i<r;++i)n[i]&&(a[i]=p5[o[n[i]-1]++]>>15-n[i]);return a},Mh=new Ks(288);for(var Yr=0;Yr<144;++Yr)Mh[Yr]=8;for(var Yr=144;Yr<256;++Yr)Mh[Yr]=9;for(var Yr=256;Yr<280;++Yr)Mh[Yr]=7;for(var Yr=280;Yr<288;++Yr)Mh[Yr]=8;var Tg=new Ks(32);for(var Yr=0;Yr<32;++Yr)Tg[Yr]=5;var wG=eu(Mh,9,0),SG=eu(Mh,9,1),_G=eu(Tg,5,0),bG=eu(Tg,5,1),$w=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},nl=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Zw=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},L3=function(n){return(n+7)/8|0},Pk=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new Ks(n.subarray(e,t))},MG=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ol=function(n,e,t){var r=new Error(e||MG[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,ol),!t)throw r;return r},EG=function(n,e,t,r){var i=n.length,s=r?r.length:0;if(!i||e.f&&!e.l)return t||new Ks(0);var o=!t,a=o||e.i!=2,l=e.i;o&&(t=new Ks(i*3));var u=function(Ne){var he=t.length;if(Ne>he){var Oe=new Ks(Math.max(he*2,Ne));Oe.set(t),t=Oe}},c=e.f||0,h=e.p||0,d=e.b||0,m=e.l,v=e.d,w=e.m,x=e.n,g=i*8;do{if(!m){c=nl(n,h,1);var S=nl(n,h+1,3);if(h+=3,S)if(S==1)m=SG,v=bG,w=9,x=5;else if(S==2){var P=nl(n,h,31)+257,N=nl(n,h+10,15)+4,k=P+nl(n,h+5,31)+1;h+=14;for(var R=new Ks(k),U=new Ks(19),F=0;F<N;++F)U[f5[F]]=nl(n,h+F*3,7);h+=N*3;for(var z=$w(U),V=(1<<z)-1,G=eu(U,z,1),F=0;F<k;){var J=G[nl(n,h,V)];h+=J&15;var _=J>>4;if(_<16)R[F++]=_;else{var ie=0,ce=0;for(_==16?(ce=3+nl(n,h,3),h+=2,ie=R[F-1]):_==17?(ce=3+nl(n,h,7),h+=3):_==18&&(ce=11+nl(n,h,127),h+=7);ce--;)R[F++]=ie}}var W=R.subarray(0,P),Y=R.subarray(P);w=$w(W),x=$w(Y),m=eu(W,w,1),v=eu(Y,x,1)}else ol(1);else{var _=L3(h)+4,T=n[_-4]|n[_-3]<<8,L=_+T;if(L>i){l&&ol(0);break}a&&u(d+T),t.set(n.subarray(_,L),d),e.b=d+=T,e.p=h=L*8,e.f=c;continue}if(h>g){l&&ol(0);break}}a&&u(d+131072);for(var $=(1<<w)-1,oe=(1<<x)-1,D=h;;D=h){var ie=m[Zw(n,h)&$],j=ie>>4;if(h+=ie&15,h>g){l&&ol(0);break}if(ie||ol(2),j<256)t[d++]=j;else if(j==256){D=h,m=null;break}else{var K=j-254;if(j>264){var F=j-257,ae=ox[F];K=nl(n,h,(1<<ae)-1)+Ck[F],h+=ae}var fe=v[Zw(n,h)&oe],we=fe>>4;fe||ol(3),h+=fe&15;var Y=xG[we];if(we>3){var ae=ax[we];Y+=Zw(n,h)&(1<<ae)-1,h+=ae}if(h>g){l&&ol(0);break}a&&u(d+131072);var Ee=d+K;if(d<Y){var Ce=s-Y,Ye=Math.min(Y,Ee);for(Ce+d<0&&ol(3);d<Ye;++d)t[d]=r[Ce+d]}for(;d<Ee;++d)t[d]=t[d-Y]}}e.l=m,e.p=D,e.b=d,e.f=c,m&&(c=1,e.m=w,e.d=v,e.n=x)}while(!c);return d!=t.length&&o?Pk(t,0,d):t.subarray(0,d)},Nu=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},c0=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Kw=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,s=t.slice();if(!i)return{t:kk,l:0};if(i==1){var o=new Ks(t[0].s+1);return o[t[0].s]=1,{t:o,l:1}}t.sort(function(L,P){return L.f-P.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],u=0,c=1,h=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=i-1;)a=t[t[u].f<t[h].f?u++:h++],l=t[u!=c&&t[u].f<t[h].f?u++:h++],t[c++]={s:-1,f:a.f+l.f,l:a,r:l};for(var d=s[0].s,r=1;r<i;++r)s[r].s>d&&(d=s[r].s);var m=new ea(d+1),v=m5(t[c-1],m,0);if(v>e){var r=0,w=0,x=v-e,g=1<<x;for(s.sort(function(P,N){return m[N.s]-m[P.s]||P.f-N.f});r<i;++r){var S=s[r].s;if(m[S]>e)w+=g-(1<<v-m[S]),m[S]=e;else break}for(w>>=x;w>0;){var _=s[r].s;m[_]<e?w-=1<<e-m[_]++-1:++r}for(;r>=0&&w;--r){var T=s[r].s;m[T]==e&&(--m[T],++w)}v=e}return{t:new Ks(m),l:v}},m5=function(n,e,t){return n.s==-1?Math.max(m5(n.l,e,t+1),m5(n.r,e,t+1)):e[n.s]=t},iT=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new ea(++e),r=0,i=n[0],s=1,o=function(l){t[r++]=l},a=1;a<=e;++a)if(n[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=n[a]}return{c:t.subarray(0,r),n:e}},h0=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Rk=function(n,e,t){var r=t.length,i=L3(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var s=0;s<r;++s)n[i+s+4]=t[s];return(i+4+r)*8},sT=function(n,e,t,r,i,s,o,a,l,u,c){Nu(e,c++,t),++i[256];for(var h=Kw(i,15),d=h.t,m=h.l,v=Kw(s,15),w=v.t,x=v.l,g=iT(d),S=g.c,_=g.n,T=iT(w),L=T.c,P=T.n,N=new ea(19),k=0;k<S.length;++k)++N[S[k]&31];for(var k=0;k<L.length;++k)++N[L[k]&31];for(var R=Kw(N,7),U=R.t,F=R.l,z=19;z>4&&!U[f5[z-1]];--z);var V=u+5<<3,G=h0(i,Mh)+h0(s,Tg)+o,J=h0(i,d)+h0(s,w)+o+14+3*z+h0(N,U)+2*N[16]+3*N[17]+7*N[18];if(l>=0&&V<=G&&V<=J)return Rk(e,c,n.subarray(l,l+u));var ie,ce,W,Y;if(Nu(e,c,1+(J<G)),c+=2,J<G){ie=eu(d,m,0),ce=d,W=eu(w,x,0),Y=w;var $=eu(U,F,0);Nu(e,c,_-257),Nu(e,c+5,P-1),Nu(e,c+10,z-4),c+=14;for(var k=0;k<z;++k)Nu(e,c+3*k,U[f5[k]]);c+=3*z;for(var oe=[S,L],D=0;D<2;++D)for(var j=oe[D],k=0;k<j.length;++k){var K=j[k]&31;Nu(e,c,$[K]),c+=U[K],K>15&&(Nu(e,c,j[k]>>5&127),c+=j[k]>>12)}}else ie=wG,ce=Mh,W=_G,Y=Tg;for(var k=0;k<a;++k){var ae=r[k];if(ae>255){var K=ae>>18&31;c0(e,c,ie[K+257]),c+=ce[K+257],K>7&&(Nu(e,c,ae>>23&31),c+=ox[K]);var fe=ae&31;c0(e,c,W[fe]),c+=Y[fe],fe>3&&(c0(e,c,ae>>5&8191),c+=ax[fe])}else c0(e,c,ie[ae]),c+=ce[ae]}return c0(e,c,ie[256]),c+ce[256]},AG=new C3([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),kk=new Ks(0),TG=function(n,e,t,r,i,s){var o=s.z||n.length,a=new Ks(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),u=s.l,c=(s.r||0)&7;if(e){c&&(l[0]=s.r>>3);for(var h=AG[e-1],d=h>>13,m=h&8191,v=(1<<t)-1,w=s.p||new ea(32768),x=s.h||new ea(v+1),g=Math.ceil(t/3),S=2*g,_=function(Ae){return(n[Ae]^n[Ae+1]<<g^n[Ae+2]<<S)&v},T=new C3(25e3),L=new ea(288),P=new ea(32),N=0,k=0,R=s.i||0,U=0,F=s.w||0,z=0;R+2<o;++R){var V=_(R),G=R&32767,J=x[V];if(w[G]=J,x[V]=G,F<=R){var ie=o-R;if((N>7e3||U>24576)&&(ie>423||!u)){c=sT(n,l,0,T,L,P,k,U,z,R-z,c),U=N=k=0,z=R;for(var ce=0;ce<286;++ce)L[ce]=0;for(var ce=0;ce<30;++ce)P[ce]=0}var W=2,Y=0,$=m,oe=G-J&32767;if(ie>2&&V==_(R-oe))for(var D=Math.min(d,ie)-1,j=Math.min(32767,R),K=Math.min(258,ie);oe<=j&&--$&&G!=J;){if(n[R+W]==n[R+W-oe]){for(var ae=0;ae<K&&n[R+ae]==n[R+ae-oe];++ae);if(ae>W){if(W=ae,Y=oe,ae>D)break;for(var fe=Math.min(oe,ae-2),we=0,ce=0;ce<fe;++ce){var Ee=R-oe+ce&32767,Ce=w[Ee],Ye=Ee-Ce&32767;Ye>we&&(we=Ye,J=Ee)}}}G=J,J=w[G],oe+=G-J&32767}if(Y){T[U++]=268435456|d5[W]<<18|rT[Y];var Ne=d5[W]&31,he=rT[Y]&31;k+=ox[Ne]+ax[he],++L[257+Ne],++P[he],F=R+W,++N}else T[U++]=n[R],++L[n[R]]}}for(R=Math.max(R,F);R<o;++R)T[U++]=n[R],++L[n[R]];c=sT(n,l,u,T,L,P,k,U,z,R-z,c),u||(s.r=c&7|l[c/8|0]<<3,c-=7,s.h=x,s.p=w,s.i=R,s.w=F)}else{for(var R=s.w||0;R<o+u;R+=65535){var Oe=R+65535;Oe>=o&&(l[c/8|0]=u,Oe=o),c=Rk(l,c+1,n.subarray(R,Oe))}s.i=o}return Pk(a,0,r+L3(c)+i)},Nk=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,s=t.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=t[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},CG=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new Ks(s.length+n.length);o.set(s),o.set(n,s.length),n=o,i.w=s.length}return TG(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},Ik=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},LG=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=Nk();i.p(e.dictionary),Ik(n,2,i.d())}},PG=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&ol(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&ol(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function g5(n,e){e||(e={});var t=Nk();t.p(n);var r=CG(n,e,e.dictionary?6:2,4);return LG(r,e),Ik(r,r.length-4,t.d()),r}function RG(n,e){return EG(n.subarray(PG(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var kG=typeof TextDecoder<"u"&&new TextDecoder,NG=0;try{kG.decode(kk,{stream:!0}),NG=1}catch{}var Sn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Jw(){Sn.console&&typeof Sn.console.log=="function"&&Sn.console.log.apply(Sn.console,arguments)}var kr={log:Jw,warn:function(n){Sn.console&&(typeof Sn.console.warn=="function"?Sn.console.warn.apply(Sn.console,arguments):Jw.call(null,arguments))},error:function(n){Sn.console&&(typeof Sn.console.error=="function"?Sn.console.error.apply(Sn.console,arguments):Jw(n))}};function Qw(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){gf(r.response,e,t)},r.onerror=function(){kr.error("could not download file")},r.send()}function oT(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function Dv(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var U0,v5,gf=Sn.saveAs||((typeof window>"u"?"undefined":Tr(window))!=="object"||window!==Sn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Sn.URL||Sn.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?oT(i.href)?Qw(n,e,t):Dv(i,i.target="_blank"):Dv(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){Dv(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(oT(n))Qw(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){Dv(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Tr(s)!=="object"&&(kr.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Qw(n,e,t);var i=n.type==="application/octet-stream",s=/constructor/i.test(Sn.HTMLElement)||Sn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Tr(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var c=a.result;c=o?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},a.readAsDataURL(n)}else{var l=Sn.URL||Sn.webkitURL,u=l.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Dk(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,s=t[r].process,o=i.exec(n);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function eS(n,e){var t=n[0],r=n[1],i=n[2],s=n[3];t=Vs(t,r,i,s,e[0],7,-680876936),s=Vs(s,t,r,i,e[1],12,-389564586),i=Vs(i,s,t,r,e[2],17,606105819),r=Vs(r,i,s,t,e[3],22,-1044525330),t=Vs(t,r,i,s,e[4],7,-176418897),s=Vs(s,t,r,i,e[5],12,1200080426),i=Vs(i,s,t,r,e[6],17,-1473231341),r=Vs(r,i,s,t,e[7],22,-45705983),t=Vs(t,r,i,s,e[8],7,1770035416),s=Vs(s,t,r,i,e[9],12,-1958414417),i=Vs(i,s,t,r,e[10],17,-42063),r=Vs(r,i,s,t,e[11],22,-1990404162),t=Vs(t,r,i,s,e[12],7,1804603682),s=Vs(s,t,r,i,e[13],12,-40341101),i=Vs(i,s,t,r,e[14],17,-1502002290),t=Ws(t,r=Vs(r,i,s,t,e[15],22,1236535329),i,s,e[1],5,-165796510),s=Ws(s,t,r,i,e[6],9,-1069501632),i=Ws(i,s,t,r,e[11],14,643717713),r=Ws(r,i,s,t,e[0],20,-373897302),t=Ws(t,r,i,s,e[5],5,-701558691),s=Ws(s,t,r,i,e[10],9,38016083),i=Ws(i,s,t,r,e[15],14,-660478335),r=Ws(r,i,s,t,e[4],20,-405537848),t=Ws(t,r,i,s,e[9],5,568446438),s=Ws(s,t,r,i,e[14],9,-1019803690),i=Ws(i,s,t,r,e[3],14,-187363961),r=Ws(r,i,s,t,e[8],20,1163531501),t=Ws(t,r,i,s,e[13],5,-1444681467),s=Ws(s,t,r,i,e[2],9,-51403784),i=Ws(i,s,t,r,e[7],14,1735328473),t=js(t,r=Ws(r,i,s,t,e[12],20,-1926607734),i,s,e[5],4,-378558),s=js(s,t,r,i,e[8],11,-2022574463),i=js(i,s,t,r,e[11],16,1839030562),r=js(r,i,s,t,e[14],23,-35309556),t=js(t,r,i,s,e[1],4,-1530992060),s=js(s,t,r,i,e[4],11,1272893353),i=js(i,s,t,r,e[7],16,-155497632),r=js(r,i,s,t,e[10],23,-1094730640),t=js(t,r,i,s,e[13],4,681279174),s=js(s,t,r,i,e[0],11,-358537222),i=js(i,s,t,r,e[3],16,-722521979),r=js(r,i,s,t,e[6],23,76029189),t=js(t,r,i,s,e[9],4,-640364487),s=js(s,t,r,i,e[12],11,-421815835),i=js(i,s,t,r,e[15],16,530742520),t=qs(t,r=js(r,i,s,t,e[2],23,-995338651),i,s,e[0],6,-198630844),s=qs(s,t,r,i,e[7],10,1126891415),i=qs(i,s,t,r,e[14],15,-1416354905),r=qs(r,i,s,t,e[5],21,-57434055),t=qs(t,r,i,s,e[12],6,1700485571),s=qs(s,t,r,i,e[3],10,-1894986606),i=qs(i,s,t,r,e[10],15,-1051523),r=qs(r,i,s,t,e[1],21,-2054922799),t=qs(t,r,i,s,e[8],6,1873313359),s=qs(s,t,r,i,e[15],10,-30611744),i=qs(i,s,t,r,e[6],15,-1560198380),r=qs(r,i,s,t,e[13],21,1309151649),t=qs(t,r,i,s,e[4],6,-145523070),s=qs(s,t,r,i,e[11],10,-1120210379),i=qs(i,s,t,r,e[2],15,718787259),r=qs(r,i,s,t,e[9],21,-343485551),n[0]=ih(t,n[0]),n[1]=ih(r,n[1]),n[2]=ih(i,n[2]),n[3]=ih(s,n[3])}function lx(n,e,t,r,i,s){return e=ih(ih(e,n),ih(r,s)),ih(e<<i|e>>>32-i,t)}function Vs(n,e,t,r,i,s,o){return lx(e&t|~e&r,n,e,i,s,o)}function Ws(n,e,t,r,i,s,o){return lx(e&r|t&~r,n,e,i,s,o)}function js(n,e,t,r,i,s,o){return lx(e^t^r,n,e,i,s,o)}function qs(n,e,t,r,i,s,o){return lx(t^(e|~r),n,e,i,s,o)}function Ok(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)eS(r,IG(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(eS(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,eS(r,i),r}function IG(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}U0=Sn.atob.bind(Sn),v5=Sn.btoa.bind(Sn);var aT="0123456789abcdef".split("");function DG(n){for(var e="",t=0;t<4;t++)e+=aT[n>>8*t+4&15]+aT[n>>8*t&15];return e}function OG(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function y5(n){return Ok(n).map(OG).join("")}var FG=function(n){for(var e=0;e<n.length;e++)n[e]=DG(n[e]);return n.join("")}(Ok("hello"))!="5d41402abc4b2a76b9719d911017c592";function ih(n,e){if(FG){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function x5(n,e){var t,r,i,s;if(n!==t){for(var o=(i=n,s=1+(256/n.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var c=a[l];u=(u+c+o.charCodeAt(l))%256,a[l]=a[u],a[u]=c}t=n,r=a}else a=r;var h=e.length,d=0,m=0,v="";for(l=0;l<h;l++)m=(m+(c=a[d=(d+1)%256]))%256,a[d]=a[m],a[m]=c,o=a[(a[d]+a[m])%256],v+=String.fromCharCode(e.charCodeAt(l)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var lT={print:4,modify:8,copy:16,"annot-forms":32};function fp(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(lT.perm!==void 0)throw new Error("Invalid permission: "+a);i+=lT[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=y5(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=x5(this.encryptionKey,this.padding)}function dp(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function uT(n){if(Tr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var s=Math.random().toString(35);return e[t][s]=[r,!!i],s},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[t]){var o=e[t][s];try{o[0].apply(n,r)}catch(a){Sn.console&&kr.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Yf(n){if(!(this instanceof Yf))return new Yf(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function Fk(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Jc(n,e,t,r,i){if(!(this instanceof Jc))return new Jc(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,Fk.call(this,r,i)}function Rf(n,e,t,r,i){if(!(this instanceof Rf))return new Rf(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Fk.call(this,r,i)}function yn(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,u="S",c=null;Tr(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,s=n.compress||n.compressPdf||s,(c=n.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),u=n.defaultPathOperation||"S"),o=n.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",t=(""+(t||"P")).toLowerCase();var h=n.putOnlyUsedFonts||!1,d={},m={internal:{},__private__:{}};m.__private__.PubSub=uT;var v="1.3",w=m.__private__.getPdfVersion=function(){return v};m.__private__.setPdfVersion=function(A){v=A};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return x};var g=m.__private__.getPageFormat=function(A){return x[A]};i=i||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},_=S.COMPAT;function T(){this.saveGraphicsState(),ne(new Ft(Le,0,0,-Le,0,Wa()*Le).toString()+" cm"),this.setFontSize(this.getFontSize()/Le),u="n",_=S.ADVANCED}function L(){this.restoreGraphicsState(),u="S",_=S.COMPAT}var P=m.__private__.combineFontStyleAndFontWeight=function(A,Z){if(A=="bold"&&Z=="normal"||A=="bold"&&Z==400||A=="normal"&&Z=="italic"||A=="bold"&&Z=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Z&&(A=Z==400||Z==="normal"?A==="italic"?"italic":"normal":Z!=700&&Z!=="bold"||A!=="normal"?(Z==700?"bold":Z)+""+A:"bold"),A};m.advancedAPI=function(A){var Z=_===S.COMPAT;return Z&&T.call(this),typeof A!="function"||(A(this),Z&&L.call(this)),this},m.compatAPI=function(A){var Z=_===S.ADVANCED;return Z&&L.call(this),typeof A!="function"||(A(this),Z&&T.call(this)),this},m.isAdvancedAPI=function(){return _===S.ADVANCED};var N,k=function(A){if(_!==S.ADVANCED)throw new Error(A+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},R=m.roundToPrecision=m.__private__.roundToPrecision=function(A,Z){var be=e||Z;if(isNaN(A)||isNaN(be))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return A.toFixed(be).replace(/0+$/,"")};N=m.hpf=m.__private__.hpf=typeof l=="number"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return R(A,l)}:l==="smart"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return R(A,A>-1&&A<1?16:5)}:function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return R(A,16)};var U=m.f2=m.__private__.f2=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f2");return R(A,2)},F=m.__private__.f3=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f3");return R(A,3)},z=m.scale=m.__private__.scale=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.scale");return _===S.COMPAT?A*Le:_===S.ADVANCED?A:void 0},V=function(A){return _===S.COMPAT?Wa()-A:_===S.ADVANCED?A:void 0},G=function(A){return z(V(A))};m.__private__.setPrecision=m.setPrecision=function(A){typeof parseInt(A,10)=="number"&&(e=parseInt(A,10))};var J,ie="00000000000000000000000000000000",ce=m.__private__.getFileId=function(){return ie},W=m.__private__.setFileId=function(A){return ie=A!==void 0&&/^[a-fA-F0-9]{32}$/.test(A)?A.toUpperCase():ie.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(Ui=new fp(c.userPermissions,c.userPassword,c.ownerPassword,ie)),ie};m.setFileId=function(A){return W(A),this},m.getFileId=function(){return ce()};var Y=m.__private__.convertDateToPDFDate=function(A){var Z=A.getTimezoneOffset(),be=Z<0?"+":"-",Pe=Math.floor(Math.abs(Z/60)),He=Math.abs(Z%60),at=[be,K(Pe),"'",K(He),"'"].join("");return["D:",A.getFullYear(),K(A.getMonth()+1),K(A.getDate()),K(A.getHours()),K(A.getMinutes()),K(A.getSeconds()),at].join("")},$=m.__private__.convertPDFDateToDate=function(A){var Z=parseInt(A.substr(2,4),10),be=parseInt(A.substr(6,2),10)-1,Pe=parseInt(A.substr(8,2),10),He=parseInt(A.substr(10,2),10),at=parseInt(A.substr(12,2),10),Mt=parseInt(A.substr(14,2),10);return new Date(Z,be,Pe,He,at,Mt,0)},oe=m.__private__.setCreationDate=function(A){var Z;if(A===void 0&&(A=new Date),A instanceof Date)Z=Y(A);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(A))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Z=A}return J=Z},D=m.__private__.getCreationDate=function(A){var Z=J;return A==="jsDate"&&(Z=$(J)),Z};m.setCreationDate=function(A){return oe(A),this},m.getCreationDate=function(A){return D(A)};var j,K=m.__private__.padd2=function(A){return("0"+parseInt(A)).slice(-2)},ae=m.__private__.padd2Hex=function(A){return("00"+(A=A.toString())).substr(A.length)},fe=0,we=[],Ee=[],Ce=0,Ye=[],Ne=[],he=!1,Oe=Ee,Ae=function(){fe=0,Ce=0,Ee=[],we=[],Ye=[],is=sr(),gi=sr()};m.__private__.setCustomOutputDestination=function(A){he=!0,Oe=A};var _e=function(A){he||(Oe=A)};m.__private__.resetCustomOutputDestination=function(){he=!1,Oe=Ee};var ne=m.__private__.out=function(A){return A=A.toString(),Ce+=A.length+1,Oe.push(A),Oe},ut=m.__private__.write=function(A){return ne(arguments.length===1?A.toString():Array.prototype.join.call(arguments," "))},$e=m.__private__.getArrayBuffer=function(A){for(var Z=A.length,be=new ArrayBuffer(Z),Pe=new Uint8Array(be);Z--;)Pe[Z]=A.charCodeAt(Z);return be},Be=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Be};var Qe=n.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(A){return Qe=_===S.ADVANCED?A/Le:A,this};var dt,mt=m.__private__.getFontSize=m.getFontSize=function(){return _===S.COMPAT?Qe:Qe*Le},ue=n.R2L||!1;m.__private__.setR2L=m.setR2L=function(A){return ue=A,this},m.__private__.getR2L=m.getR2L=function(){return ue};var Q,Re=m.__private__.setZoomMode=function(A){var Z=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(A))dt=A;else if(isNaN(A)){if(Z.indexOf(A)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+A+'" is not recognized.');dt=A}else dt=parseInt(A,10)};m.__private__.getZoomMode=function(){return dt};var Je,Ze=m.__private__.setPageMode=function(A){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(A)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+A+'" is not recognized.');Q=A};m.__private__.getPageMode=function(){return Q};var ct=m.__private__.setLayoutMode=function(A){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(A)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+A+'" is not recognized.');Je=A};m.__private__.getLayoutMode=function(){return Je},m.__private__.setDisplayMode=m.setDisplayMode=function(A,Z,be){return Re(A),ct(Z),Ze(be),this};var vt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(A){if(Object.keys(vt).indexOf(A)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return vt[A]},m.__private__.getDocumentProperties=function(){return vt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(A){for(var Z in vt)vt.hasOwnProperty(Z)&&A[Z]&&(vt[Z]=A[Z]);return this},m.__private__.setDocumentProperty=function(A,Z){if(Object.keys(vt).indexOf(A)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return vt[A]=Z};var ot,Le,Ut,Tt,Nt,Ct={},Se={},et=[],pt={},Te={},De={},Ge={},bt=null,Et=0,At=[],zt=new uT(m),_n=n.hotfixes||[],Mn={},fn={},Xn=[],Ft=function A(Z,be,Pe,He,at,Mt){if(!(this instanceof A))return new A(Z,be,Pe,He,at,Mt);isNaN(Z)&&(Z=1),isNaN(be)&&(be=0),isNaN(Pe)&&(Pe=0),isNaN(He)&&(He=1),isNaN(at)&&(at=0),isNaN(Mt)&&(Mt=0),this._matrix=[Z,be,Pe,He,at,Mt]};Object.defineProperty(Ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(Ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(Ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(Ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(Ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(Ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(Ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(Ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(Ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(Ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(Ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(Ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(Ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ft.prototype.join=function(A){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(A)},Ft.prototype.multiply=function(A){var Z=A.sx*this.sx+A.shy*this.shx,be=A.sx*this.shy+A.shy*this.sy,Pe=A.shx*this.sx+A.sy*this.shx,He=A.shx*this.shy+A.sy*this.sy,at=A.tx*this.sx+A.ty*this.shx+this.tx,Mt=A.tx*this.shy+A.ty*this.sy+this.ty;return new Ft(Z,be,Pe,He,at,Mt)},Ft.prototype.decompose=function(){var A=this.sx,Z=this.shy,be=this.shx,Pe=this.sy,He=this.tx,at=this.ty,Mt=Math.sqrt(A*A+Z*Z),Ht=(A/=Mt)*be+(Z/=Mt)*Pe;be-=A*Ht,Pe-=Z*Ht;var rn=Math.sqrt(be*be+Pe*Pe);return Ht/=rn,A*(Pe/=rn)<Z*(be/=rn)&&(A=-A,Z=-Z,Ht=-Ht,Mt=-Mt),{scale:new Ft(Mt,0,0,rn,0,0),translate:new Ft(1,0,0,1,He,at),rotate:new Ft(A,Z,-Z,A,0,0),skew:new Ft(1,0,Ht,1,0,0)}},Ft.prototype.toString=function(A){return this.join(" ")},Ft.prototype.inversed=function(){var A=this.sx,Z=this.shy,be=this.shx,Pe=this.sy,He=this.tx,at=this.ty,Mt=1/(A*Pe-Z*be),Ht=Pe*Mt,rn=-Z*Mt,bn=-be*Mt,ln=A*Mt;return new Ft(Ht,rn,bn,ln,-Ht*He-bn*at,-rn*He-ln*at)},Ft.prototype.applyToPoint=function(A){var Z=A.x*this.sx+A.y*this.shx+this.tx,be=A.x*this.shy+A.y*this.sy+this.ty;return new ro(Z,be)},Ft.prototype.applyToRectangle=function(A){var Z=this.applyToPoint(A),be=this.applyToPoint(new ro(A.x+A.w,A.y+A.h));return new mu(Z.x,Z.y,be.x-Z.x,be.y-Z.y)},Ft.prototype.clone=function(){var A=this.sx,Z=this.shy,be=this.shx,Pe=this.sy,He=this.tx,at=this.ty;return new Ft(A,Z,be,Pe,He,at)},m.Matrix=Ft;var ti=m.matrixMult=function(A,Z){return Z.multiply(A)},ni=new Ft(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=ni;var yr=function(A,Z){if(!Te[A]){var be=(Z instanceof Jc?"Sh":"P")+(Object.keys(pt).length+1).toString(10);Z.id=be,Te[A]=be,pt[be]=Z,zt.publish("addPattern",Z)}};m.ShadingPattern=Jc,m.TilingPattern=Rf,m.addShadingPattern=function(A,Z){return k("addShadingPattern()"),yr(A,Z),this},m.beginTilingPattern=function(A){k("beginTilingPattern()"),xo(A.boundingBox[0],A.boundingBox[1],A.boundingBox[2]-A.boundingBox[0],A.boundingBox[3]-A.boundingBox[1],A.matrix)},m.endTilingPattern=function(A,Z){k("endTilingPattern()"),Z.stream=Ne[j].join(`
`),yr(A,Z),zt.publish("endTilingPattern",Z),Xn.pop().restore()};var tr=m.__private__.newObject=function(){var A=sr();return nr(A,!0),A},sr=m.__private__.newObjectDeferred=function(){return fe++,we[fe]=function(){return Ce},fe},nr=function(A,Z){return Z=typeof Z=="boolean"&&Z,we[A]=Ce,Z&&ne(A+" 0 obj"),A},xn=m.__private__.newAdditionalObject=function(){var A={objId:sr(),content:""};return Ye.push(A),A},is=sr(),gi=sr(),q=m.__private__.decodeColorString=function(A){var Z=A.split(" ");if(Z.length!==2||Z[1]!=="g"&&Z[1]!=="G")Z.length===5&&(Z[4]==="k"||Z[4]==="K")&&(Z=[(1-Z[0])*(1-Z[3]),(1-Z[1])*(1-Z[3]),(1-Z[2])*(1-Z[3]),"r"]);else{var be=parseFloat(Z[0]);Z=[be,be,be,"r"]}for(var Pe="#",He=0;He<3;He++)Pe+=("0"+Math.floor(255*parseFloat(Z[He])).toString(16)).slice(-2);return Pe},O=m.__private__.encodeColorString=function(A){var Z;typeof A=="string"&&(A={ch1:A});var be=A.ch1,Pe=A.ch2,He=A.ch3,at=A.ch4,Mt=A.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof be=="string"&&be.charAt(0)!=="#"){var Ht=new Dk(be);if(Ht.ok)be=Ht.toHex();else if(!/^\d*\.?\d*$/.test(be))throw new Error('Invalid color "'+be+'" passed to jsPDF.encodeColorString.')}if(typeof be=="string"&&/^#[0-9A-Fa-f]{3}$/.test(be)&&(be="#"+be[1]+be[1]+be[2]+be[2]+be[3]+be[3]),typeof be=="string"&&/^#[0-9A-Fa-f]{6}$/.test(be)){var rn=parseInt(be.substr(1),16);be=rn>>16&255,Pe=rn>>8&255,He=255&rn}if(Pe===void 0||at===void 0&&be===Pe&&Pe===He)if(typeof be=="string")Z=be+" "+Mt[0];else switch(A.precision){case 2:Z=U(be/255)+" "+Mt[0];break;case 3:default:Z=F(be/255)+" "+Mt[0]}else if(at===void 0||Tr(at)==="object"){if(at&&!isNaN(at.a)&&at.a===0)return Z=["1.","1.","1.",Mt[1]].join(" ");if(typeof be=="string")Z=[be,Pe,He,Mt[1]].join(" ");else switch(A.precision){case 2:Z=[U(be/255),U(Pe/255),U(He/255),Mt[1]].join(" ");break;default:case 3:Z=[F(be/255),F(Pe/255),F(He/255),Mt[1]].join(" ")}}else if(typeof be=="string")Z=[be,Pe,He,at,Mt[2]].join(" ");else switch(A.precision){case 2:Z=[U(be),U(Pe),U(He),U(at),Mt[2]].join(" ");break;case 3:default:Z=[F(be),F(Pe),F(He),F(at),Mt[2]].join(" ")}return Z},ee=m.__private__.getFilters=function(){return o},me=m.__private__.putStream=function(A){var Z=(A=A||{}).data||"",be=A.filters||ee(),Pe=A.alreadyAppliedFilters||[],He=A.addLength1||!1,at=Z.length,Mt=A.objectId,Ht=function(Zr){return Zr};if(c!==null&&Mt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(Ht=Ui.encryptor(Mt,0));var rn={};be===!0&&(be=["FlateEncode"]);var bn=A.additionalKeyValues||[],ln=(rn=yn.API.processDataByFilters!==void 0?yn.API.processDataByFilters(Z,be):{data:Z,reverseChain:[]}).reverseChain+(Array.isArray(Pe)?Pe.join(" "):Pe.toString());if(rn.data.length!==0&&(bn.push({key:"Length",value:rn.data.length}),He===!0&&bn.push({key:"Length1",value:at})),ln.length!=0)if(ln.split("/").length-1==1)bn.push({key:"Filter",value:ln});else{bn.push({key:"Filter",value:"["+ln+"]"});for(var An=0;An<bn.length;An+=1)if(bn[An].key==="DecodeParms"){for(var gr=[],fr=0;fr<rn.reverseChain.split("/").length-1;fr+=1)gr.push("null");gr.push(bn[An].value),bn[An].value="["+gr.join(" ")+"]"}}ne("<<");for(var wr=0;wr<bn.length;wr++)ne("/"+bn[wr].key+" "+bn[wr].value);ne(">>"),rn.data.length!==0&&(ne("stream"),ne(Ht(rn.data)),ne("endstream"))},de=m.__private__.putPage=function(A){var Z=A.number,be=A.data,Pe=A.objId,He=A.contentsObjId;nr(Pe,!0),ne("<</Type /Page"),ne("/Parent "+A.rootDictionaryObjId+" 0 R"),ne("/Resources "+A.resourceDictionaryObjId+" 0 R"),ne("/MediaBox ["+parseFloat(N(A.mediaBox.bottomLeftX))+" "+parseFloat(N(A.mediaBox.bottomLeftY))+" "+N(A.mediaBox.topRightX)+" "+N(A.mediaBox.topRightY)+"]"),A.cropBox!==null&&ne("/CropBox ["+N(A.cropBox.bottomLeftX)+" "+N(A.cropBox.bottomLeftY)+" "+N(A.cropBox.topRightX)+" "+N(A.cropBox.topRightY)+"]"),A.bleedBox!==null&&ne("/BleedBox ["+N(A.bleedBox.bottomLeftX)+" "+N(A.bleedBox.bottomLeftY)+" "+N(A.bleedBox.topRightX)+" "+N(A.bleedBox.topRightY)+"]"),A.trimBox!==null&&ne("/TrimBox ["+N(A.trimBox.bottomLeftX)+" "+N(A.trimBox.bottomLeftY)+" "+N(A.trimBox.topRightX)+" "+N(A.trimBox.topRightY)+"]"),A.artBox!==null&&ne("/ArtBox ["+N(A.artBox.bottomLeftX)+" "+N(A.artBox.bottomLeftY)+" "+N(A.artBox.topRightX)+" "+N(A.artBox.topRightY)+"]"),typeof A.userUnit=="number"&&A.userUnit!==1&&ne("/UserUnit "+A.userUnit),zt.publish("putPage",{objId:Pe,pageContext:At[Z],pageNumber:Z,page:be}),ne("/Contents "+He+" 0 R"),ne(">>"),ne("endobj");var at=be.join(`
`);return _===S.ADVANCED&&(at+=`
Q`),nr(He,!0),me({data:at,filters:ee(),objectId:He}),ne("endobj"),Pe},xe=m.__private__.putPages=function(){var A,Z,be=[];for(A=1;A<=Et;A++)At[A].objId=sr(),At[A].contentsObjId=sr();for(A=1;A<=Et;A++)be.push(de({number:A,data:Ne[A],objId:At[A].objId,contentsObjId:At[A].contentsObjId,mediaBox:At[A].mediaBox,cropBox:At[A].cropBox,bleedBox:At[A].bleedBox,trimBox:At[A].trimBox,artBox:At[A].artBox,userUnit:At[A].userUnit,rootDictionaryObjId:is,resourceDictionaryObjId:gi}));nr(is,!0),ne("<</Type /Pages");var Pe="/Kids [";for(Z=0;Z<Et;Z++)Pe+=be[Z]+" 0 R ";ne(Pe+"]"),ne("/Count "+Et),ne(">>"),ne("endobj"),zt.publish("postPutPages")},Ve=function(A){zt.publish("putFont",{font:A,out:ne,newObject:tr,putStream:me}),A.isAlreadyPutted!==!0&&(A.objectNumber=tr(),ne("<<"),ne("/Type /Font"),ne("/BaseFont /"+dp(A.postScriptName)),ne("/Subtype /Type1"),typeof A.encoding=="string"&&ne("/Encoding /"+A.encoding),ne("/FirstChar 32"),ne("/LastChar 255"),ne(">>"),ne("endobj"))},Xe=function(){for(var A in Ct)Ct.hasOwnProperty(A)&&(h===!1||h===!0&&d.hasOwnProperty(A))&&Ve(Ct[A])},it=function(A){A.objectNumber=tr();var Z=[];Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Form"}),Z.push({key:"BBox",value:"["+[N(A.x),N(A.y),N(A.x+A.width),N(A.y+A.height)].join(" ")+"]"}),Z.push({key:"Matrix",value:"["+A.matrix.toString()+"]"});var be=A.pages[1].join(`
`);me({data:be,additionalKeyValues:Z,objectId:A.objectNumber}),ne("endobj")},rt=function(){for(var A in Mn)Mn.hasOwnProperty(A)&&it(Mn[A])},ht=function(A,Z){var be,Pe=[],He=1/(Z-1);for(be=0;be<1;be+=He)Pe.push(be);if(Pe.push(1),A[0].offset!=0){var at={offset:0,color:A[0].color};A.unshift(at)}if(A[A.length-1].offset!=1){var Mt={offset:1,color:A[A.length-1].color};A.push(Mt)}for(var Ht="",rn=0,bn=0;bn<Pe.length;bn++){for(be=Pe[bn];be>A[rn+1].offset;)rn++;var ln=A[rn].offset,An=(be-ln)/(A[rn+1].offset-ln),gr=A[rn].color,fr=A[rn+1].color;Ht+=ae(Math.round((1-An)*gr[0]+An*fr[0]).toString(16))+ae(Math.round((1-An)*gr[1]+An*fr[1]).toString(16))+ae(Math.round((1-An)*gr[2]+An*fr[2]).toString(16))}return Ht.trim()},nt=function(A,Z){Z||(Z=21);var be=tr(),Pe=ht(A.colors,Z),He=[];He.push({key:"FunctionType",value:"0"}),He.push({key:"Domain",value:"[0.0 1.0]"}),He.push({key:"Size",value:"["+Z+"]"}),He.push({key:"BitsPerSample",value:"8"}),He.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),He.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),me({data:Pe,additionalKeyValues:He,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:be}),ne("endobj"),A.objectNumber=tr(),ne("<< /ShadingType "+A.type),ne("/ColorSpace /DeviceRGB");var at="/Coords ["+N(parseFloat(A.coords[0]))+" "+N(parseFloat(A.coords[1]))+" ";A.type===2?at+=N(parseFloat(A.coords[2]))+" "+N(parseFloat(A.coords[3])):at+=N(parseFloat(A.coords[2]))+" "+N(parseFloat(A.coords[3]))+" "+N(parseFloat(A.coords[4]))+" "+N(parseFloat(A.coords[5])),ne(at+="]"),A.matrix&&ne("/Matrix ["+A.matrix.toString()+"]"),ne("/Function "+be+" 0 R"),ne("/Extend [true true]"),ne(">>"),ne("endobj")},jt=function(A,Z){var be=sr(),Pe=tr();Z.push({resourcesOid:be,objectOid:Pe}),A.objectNumber=Pe;var He=[];He.push({key:"Type",value:"/Pattern"}),He.push({key:"PatternType",value:"1"}),He.push({key:"PaintType",value:"1"}),He.push({key:"TilingType",value:"1"}),He.push({key:"BBox",value:"["+A.boundingBox.map(N).join(" ")+"]"}),He.push({key:"XStep",value:N(A.xStep)}),He.push({key:"YStep",value:N(A.yStep)}),He.push({key:"Resources",value:be+" 0 R"}),A.matrix&&He.push({key:"Matrix",value:"["+A.matrix.toString()+"]"}),me({data:A.stream,additionalKeyValues:He,objectId:A.objectNumber}),ne("endobj")},kt=function(A){var Z;for(Z in pt)pt.hasOwnProperty(Z)&&(pt[Z]instanceof Jc?nt(pt[Z]):pt[Z]instanceof Rf&&jt(pt[Z],A))},Dt=function(A){for(var Z in A.objectNumber=tr(),ne("<<"),A)switch(Z){case"opacity":ne("/ca "+U(A[Z]));break;case"stroke-opacity":ne("/CA "+U(A[Z]))}ne(">>"),ne("endobj")},nn=function(){var A;for(A in De)De.hasOwnProperty(A)&&Dt(De[A])},on=function(){for(var A in ne("/XObject <<"),Mn)Mn.hasOwnProperty(A)&&Mn[A].objectNumber>=0&&ne("/"+A+" "+Mn[A].objectNumber+" 0 R");zt.publish("putXobjectDict"),ne(">>")},sn=function(){Ui.oid=tr(),ne("<<"),ne("/Filter /Standard"),ne("/V "+Ui.v),ne("/R "+Ui.r),ne("/U <"+Ui.toHexString(Ui.U)+">"),ne("/O <"+Ui.toHexString(Ui.O)+">"),ne("/P "+Ui.P),ne(">>"),ne("endobj")},Vt=function(){for(var A in ne("/Font <<"),Ct)Ct.hasOwnProperty(A)&&(h===!1||h===!0&&d.hasOwnProperty(A))&&ne("/"+A+" "+Ct[A].objectNumber+" 0 R");ne(">>")},dn=function(){if(Object.keys(pt).length>0){for(var A in ne("/Shading <<"),pt)pt.hasOwnProperty(A)&&pt[A]instanceof Jc&&pt[A].objectNumber>=0&&ne("/"+A+" "+pt[A].objectNumber+" 0 R");zt.publish("putShadingPatternDict"),ne(">>")}},Yt=function(A){if(Object.keys(pt).length>0){for(var Z in ne("/Pattern <<"),pt)pt.hasOwnProperty(Z)&&pt[Z]instanceof m.TilingPattern&&pt[Z].objectNumber>=0&&pt[Z].objectNumber<A&&ne("/"+Z+" "+pt[Z].objectNumber+" 0 R");zt.publish("putTilingPatternDict"),ne(">>")}},En=function(){if(Object.keys(De).length>0){var A;for(A in ne("/ExtGState <<"),De)De.hasOwnProperty(A)&&De[A].objectNumber>=0&&ne("/"+A+" "+De[A].objectNumber+" 0 R");zt.publish("putGStateDict"),ne(">>")}},pn=function(A){nr(A.resourcesOid,!0),ne("<<"),ne("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Vt(),dn(),Yt(A.objectOid),En(),on(),ne(">>"),ne("endobj")},vn=function(){var A=[];Xe(),nn(),rt(),kt(A),zt.publish("putResources"),A.forEach(pn),pn({resourcesOid:gi,objectOid:Number.MAX_SAFE_INTEGER}),zt.publish("postPutResources")},rr=function(){zt.publish("putAdditionalObjects");for(var A=0;A<Ye.length;A++){var Z=Ye[A];nr(Z.objId,!0),ne(Z.content),ne("endobj")}zt.publish("postPutAdditionalObjects")},Yn=function(A){Se[A.fontName]=Se[A.fontName]||{},Se[A.fontName][A.fontStyle]=A.id},or=function(A,Z,be,Pe,He){var at={id:"F"+(Object.keys(Ct).length+1).toString(10),postScriptName:A,fontName:Z,fontStyle:be,encoding:Pe,isStandardFont:He||!1,metadata:{}};return zt.publish("addFont",{font:at,instance:this}),Ct[at.id]=at,Yn(at),at.id},zr=function(A){for(var Z=0,be=Be.length;Z<be;Z++){var Pe=or.call(this,A[Z][0],A[Z][1],A[Z][2],Be[Z][3],!0);h===!1&&(d[Pe]=!0);var He=A[Z][0].split("-");Yn({id:Pe,fontName:He[0],fontStyle:He[1]||""})}zt.publish("addFonts",{fonts:Ct,dictionary:Se})},cn=function(A){return A.foo=function(){try{return A.apply(this,arguments)}catch(Pe){var Z=Pe.stack||"";~Z.indexOf(" at ")&&(Z=Z.split(" at ")[1]);var be="Error in function "+Z.split(`
`)[0].split("<")[0]+": "+Pe.message;if(!Sn.console)throw new Error(be);Sn.console.error(be,Pe),Sn.alert&&alert(be)}},A.foo.bar=A,A.foo},xr=function(A,Z){var be,Pe,He,at,Mt,Ht,rn,bn,ln;if(He=(Z=Z||{}).sourceEncoding||"Unicode",Mt=Z.outputEncoding,(Z.autoencode||Mt)&&Ct[ot].metadata&&Ct[ot].metadata[He]&&Ct[ot].metadata[He].encoding&&(at=Ct[ot].metadata[He].encoding,!Mt&&Ct[ot].encoding&&(Mt=Ct[ot].encoding),!Mt&&at.codePages&&(Mt=at.codePages[0]),typeof Mt=="string"&&(Mt=at[Mt]),Mt)){for(rn=!1,Ht=[],be=0,Pe=A.length;be<Pe;be++)(bn=Mt[A.charCodeAt(be)])?Ht.push(String.fromCharCode(bn)):Ht.push(A[be]),Ht[be].charCodeAt(0)>>8&&(rn=!0);A=Ht.join("")}for(be=A.length;rn===void 0&&be!==0;)A.charCodeAt(be-1)>>8&&(rn=!0),be--;if(!rn)return A;for(Ht=Z.noBOM?[]:[254,255],be=0,Pe=A.length;be<Pe;be++){if((ln=(bn=A.charCodeAt(be))>>8)>>8)throw new Error("Character at position "+be+" of string '"+A+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ht.push(ln),Ht.push(bn-(ln<<8))}return String.fromCharCode.apply(void 0,Ht)},Cn=m.__private__.pdfEscape=m.pdfEscape=function(A,Z){return xr(A,Z).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},zn=m.__private__.beginPage=function(A){Ne[++Et]=[],At[Et]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(A[0]),topRightY:Number(A[1])}},Fi(Et),_e(Ne[j])},Mr=function(A,Z){var be,Pe,He;switch(t=Z||t,typeof A=="string"&&(be=g(A.toLowerCase()),Array.isArray(be)&&(Pe=be[0],He=be[1])),Array.isArray(A)&&(Pe=A[0]*Le,He=A[1]*Le),isNaN(Pe)&&(Pe=i[0],He=i[1]),(Pe>14400||He>14400)&&(kr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Pe=Math.min(14400,Pe),He=Math.min(14400,He)),i=[Pe,He],t.substr(0,1)){case"l":He>Pe&&(i=[He,Pe]);break;case"p":Pe>He&&(i=[He,Pe])}zn(i),ud(hu),ne(ss),fa!==0&&ne(fa+" J"),os!==0&&ne(os+" j"),zt.publish("addPage",{pageNumber:Et})},Uo=function(A){A>0&&A<=Et&&(Ne.splice(A,1),At.splice(A,1),Et--,j>Et&&(j=Et),this.setPage(j))},Fi=function(A){A>0&&A<=Et&&(j=A)},vo=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Ne.length-1},lu=function(A,Z,be){var Pe,He=void 0;return be=be||{},A=A!==void 0?A:Ct[ot].fontName,Z=Z!==void 0?Z:Ct[ot].fontStyle,Pe=A.toLowerCase(),Se[Pe]!==void 0&&Se[Pe][Z]!==void 0?He=Se[Pe][Z]:Se[A]!==void 0&&Se[A][Z]!==void 0?He=Se[A][Z]:be.disableWarning===!1&&kr.warn("Unable to look up font label for font '"+A+"', '"+Z+"'. Refer to getFontList() for available fonts."),He||be.noFallback||(He=Se.times[Z])==null&&(He=Se.times.normal),He},ac=m.__private__.putInfo=function(){var A=tr(),Z=function(Pe){return Pe};for(var be in c!==null&&(Z=Ui.encryptor(A,0)),ne("<<"),ne("/Producer ("+Cn(Z("jsPDF "+yn.version))+")"),vt)vt.hasOwnProperty(be)&&vt[be]&&ne("/"+be.substr(0,1).toUpperCase()+be.substr(1)+" ("+Cn(Z(vt[be]))+")");ne("/CreationDate ("+Cn(Z(J))+")"),ne(">>"),ne("endobj")},Ha=m.__private__.putCatalog=function(A){var Z=(A=A||{}).rootDictionaryObjId||is;switch(tr(),ne("<<"),ne("/Type /Catalog"),ne("/Pages "+Z+" 0 R"),dt||(dt="fullwidth"),dt){case"fullwidth":ne("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ne("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ne("/OpenAction [3 0 R /Fit]");break;case"original":ne("/OpenAction [3 0 R /XYZ null null 1]");break;default:var be=""+dt;be.substr(be.length-1)==="%"&&(dt=parseInt(dt)/100),typeof dt=="number"&&ne("/OpenAction [3 0 R /XYZ null null "+U(dt)+"]")}switch(Je||(Je="continuous"),Je){case"continuous":ne("/PageLayout /OneColumn");break;case"single":ne("/PageLayout /SinglePage");break;case"two":case"twoleft":ne("/PageLayout /TwoColumnLeft");break;case"tworight":ne("/PageLayout /TwoColumnRight")}Q&&ne("/PageMode /"+Q),zt.publish("putCatalog"),ne(">>"),ne("endobj")},lc=m.__private__.putTrailer=function(){ne("trailer"),ne("<<"),ne("/Size "+(fe+1)),ne("/Root "+fe+" 0 R"),ne("/Info "+(fe-1)+" 0 R"),c!==null&&ne("/Encrypt "+Ui.oid+" 0 R"),ne("/ID [ <"+ie+"> <"+ie+"> ]"),ne(">>")},wm=m.__private__.putHeader=function(){ne("%PDF-"+v),ne("%")},Sm=m.__private__.putXRef=function(){var A="0000000000";ne("xref"),ne("0 "+(fe+1)),ne("0000000000 65535 f ");for(var Z=1;Z<=fe;Z++)typeof we[Z]=="function"?ne((A+we[Z]()).slice(-10)+" 00000 n "):we[Z]!==void 0?ne((A+we[Z]).slice(-10)+" 00000 n "):ne("0000000000 00000 n ")},Bo=m.__private__.buildDocument=function(){Ae(),_e(Ee),zt.publish("buildDocument"),wm(),xe(),rr(),vn(),c!==null&&sn(),ac(),Ha();var A=Ce;return Sm(),lc(),ne("startxref"),ne(""+A),ne("%%EOF"),_e(Ne[j]),Ee.join(`
`)},Ll=m.__private__.getBlob=function(A){return new Blob([$e(A)],{type:"application/pdf"})},la=m.output=m.__private__.output=cn(function(A,Z){switch(typeof(Z=Z||{})=="string"?Z={filename:Z}:Z.filename=Z.filename||"generated.pdf",A){case void 0:return Bo();case"save":m.save(Z.filename);break;case"arraybuffer":return $e(Bo());case"blob":return Ll(Bo());case"bloburi":case"bloburl":if(Sn.URL!==void 0&&typeof Sn.URL.createObjectURL=="function")return Sn.URL&&Sn.URL.createObjectURL(Ll(Bo()))||void 0;kr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var be="",Pe=Bo();try{be=v5(Pe)}catch{be=v5(unescape(encodeURIComponent(Pe)))}return"data:application/pdf;filename="+Z.filename+";base64,"+be;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Sn)==="[object Window]"){var He="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",at=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Z.pdfObjectUrl&&(He=Z.pdfObjectUrl,at="");var Mt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+He+'"'+at+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Z)+");<\/script></body></html>",Ht=Sn.open();return Ht!==null&&Ht.document.write(Mt),Ht}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Sn)==="[object Window]"){var rn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Z.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Z.filename+'" width="500px" height="400px" /></body></html>',bn=Sn.open();if(bn!==null){bn.document.write(rn);var ln=this;bn.document.documentElement.querySelector("#pdfViewer").onload=function(){bn.document.title=Z.filename,bn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(ln.output("bloburl"))}}return bn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Sn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var An='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Z)+'"></iframe></body></html>',gr=Sn.open();if(gr!==null&&(gr.document.write(An),gr.document.title=Z.filename),gr||typeof safari>"u")return gr;break;case"datauri":case"dataurl":return Sn.document.location.href=this.output("datauristring",Z);default:return null}}),ad=function(A){return Array.isArray(_n)===!0&&_n.indexOf(A)>-1};switch(r){case"pt":Le=1;break;case"mm":Le=72/25.4;break;case"cm":Le=72/2.54;break;case"in":Le=72;break;case"px":Le=ad("px_scaling")==1?.75:96/72;break;case"pc":case"em":Le=12;break;case"ex":Le=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Le=r}var Ui=null;oe(),W();var Qn=function(A){return c!==null?Ui.encryptor(A,0):function(Z){return Z}},Bh=m.__private__.getPageInfo=m.getPageInfo=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:At[A].objId,pageNumber:A,pageContext:At[A]}},wn=m.__private__.getPageInfoByObjId=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Z in At)if(At[Z].objId===A)break;return Bh(Z)},ld=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:At[j].objId,pageNumber:j,pageContext:At[j]}};m.addPage=function(){return Mr.apply(this,arguments),this},m.setPage=function(){return Fi.apply(this,arguments),_e.call(this,Ne[j]),this},m.insertPage=function(A){return this.addPage(),this.movePage(j,A),this},m.movePage=function(A,Z){var be,Pe;if(A>Z){be=Ne[A],Pe=At[A];for(var He=A;He>Z;He--)Ne[He]=Ne[He-1],At[He]=At[He-1];Ne[Z]=be,At[Z]=Pe,this.setPage(Z)}else if(A<Z){be=Ne[A],Pe=At[A];for(var at=A;at<Z;at++)Ne[at]=Ne[at+1],At[at]=At[at+1];Ne[Z]=be,At[Z]=Pe,this.setPage(Z)}return this},m.deletePage=function(){return Uo.apply(this,arguments),this},m.__private__.text=m.text=function(A,Z,be,Pe,He){var at,Mt,Ht,rn,bn,ln,An,gr,fr,wr=(Pe=Pe||{}).scope||this;if(typeof A=="number"&&typeof Z=="number"&&(typeof be=="string"||Array.isArray(be))){var Zr=be;be=Z,Z=A,A=Zr}if(arguments[3]instanceof Ft?(k("The transform parameter of text() with a Matrix value"),fr=He):(Ht=arguments[4],rn=arguments[5],Tr(An=arguments[3])==="object"&&An!==null||(typeof Ht=="string"&&(rn=Ht,Ht=null),typeof An=="string"&&(rn=An,An=null),typeof An=="number"&&(Ht=An,An=null),Pe={flags:An,angle:Ht,align:rn})),isNaN(Z)||isNaN(be)||A==null)throw new Error("Invalid arguments passed to jsPDF.text");if(A.length===0)return wr;var Ti="",io=!1,bs=typeof Pe.lineHeightFactor=="number"?Pe.lineHeightFactor:ca,Kr=wr.internal.scaleFactor;function as($n){return $n=$n.split("	").join(Array(Pe.TabLen||9).join(" ")),Cn($n,An)}function Sr($n){for(var ar,Fr=$n.concat(),Qr=[],ya=Fr.length;ya--;)typeof(ar=Fr.shift())=="string"?Qr.push(ar):Array.isArray($n)&&(ar.length===1||ar[1]===void 0&&ar[2]===void 0)?Qr.push(ar[0]):Qr.push([ar[0],ar[1],ar[2]]);return Qr}function ja($n,ar){var Fr;if(typeof $n=="string")Fr=ar($n)[0];else if(Array.isArray($n)){for(var Qr,ya,wc=$n.concat(),Su=[],Vh=wc.length;Vh--;)typeof(Qr=wc.shift())=="string"?Su.push(ar(Qr)[0]):Array.isArray(Qr)&&typeof Qr[0]=="string"&&(ya=ar(Qr[0],Qr[1],Qr[2]),Su.push([ya[0],ya[1],ya[2]]));Fr=Su}return Fr}var ls=!1,mc=!0;if(typeof A=="string")ls=!0;else if(Array.isArray(A)){var gc=A.concat();Mt=[];for(var Nl,Ci=gc.length;Ci--;)(typeof(Nl=gc.shift())!="string"||Array.isArray(Nl)&&typeof Nl[0]!="string")&&(mc=!1);ls=mc}if(ls===!1)throw new Error('Type of text must be string or Array. "'+A+'" is not recognized.');typeof A=="string"&&(A=A.match(/[\r?\n]/)?A.split(/\r\n|\r|\n/g):[A]);var gu=Qe/wr.internal.scaleFactor,pa=gu*(bs-1);switch(Pe.baseline){case"bottom":be-=pa;break;case"top":be+=gu-pa;break;case"hanging":be+=gu-2*pa;break;case"middle":be+=gu/2-pa}if((ln=Pe.maxWidth||0)>0&&(typeof A=="string"?A=wr.splitTextToSize(A,ln):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function($n,ar){return $n.concat(wr.splitTextToSize(ar,ln))},[]))),at={text:A,x:Z,y:be,options:Pe,mutex:{pdfEscape:Cn,activeFontKey:ot,fonts:Ct,activeFontSize:Qe}},zt.publish("preProcessText",at),A=at.text,Ht=(Pe=at.options).angle,!(fr instanceof Ft)&&Ht&&typeof Ht=="number"){Ht*=Math.PI/180,Pe.rotationDirection===0&&(Ht=-Ht),_===S.ADVANCED&&(Ht=-Ht);var Go=Math.cos(Ht),vu=Math.sin(Ht);fr=new Ft(Go,vu,-vu,Go,0,0)}else Ht&&Ht instanceof Ft&&(fr=Ht);_!==S.ADVANCED||fr||(fr=ni),(bn=Pe.charSpace||Pl)!==void 0&&(Ti+=N(z(bn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(gr=Pe.horizontalScale)!==void 0&&(Ti+=N(100*gr)+` Tz
`),Pe.lang;var Bi=-1,vc=Pe.renderingMode!==void 0?Pe.renderingMode:Pe.stroke,yc=wr.internal.getCurrentPageInfo().pageContext;switch(vc){case 0:case!1:case"fill":Bi=0;break;case 1:case!0:case"stroke":Bi=1;break;case 2:case"fillThenStroke":Bi=2;break;case 3:case"invisible":Bi=3;break;case 4:case"fillAndAddForClipping":Bi=4;break;case 5:case"strokeAndAddPathForClipping":Bi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Bi=6;break;case 7:case"addToPathForClipping":Bi=7}var Gh=yc.usedRenderingMode!==void 0?yc.usedRenderingMode:-1;Bi!==-1?Ti+=Bi+` Tr
`:Gh!==-1&&(Ti+=`0 Tr
`),Bi!==-1&&(yc.usedRenderingMode=Bi),rn=Pe.align||"left";var ji,yu=Qe*bs,Il=wr.internal.pageSize.getWidth(),Ms=Ct[ot];bn=Pe.charSpace||Pl,ln=Pe.maxWidth||0,An=Object.assign({autoencode:!0,noBOM:!0},Pe.flags);var wo=[],So=function($n){return wr.getStringUnitWidth($n,{font:Ms,charSpace:bn,fontSize:Qe,doKerning:!1})*Qe/Kr};if(Object.prototype.toString.call(A)==="[object Array]"){var Hr;Mt=Sr(A),rn!=="left"&&(ji=Mt.map(So));var qi,so=0;if(rn==="right"){Z-=ji[0],A=[],Ci=Mt.length;for(var ma=0;ma<Ci;ma++)ma===0?(qi=ha(Z),Hr=Ai(be)):(qi=z(so-ji[ma]),Hr=-yu),A.push([Mt[ma],qi,Hr]),so=ji[ma]}else if(rn==="center"){Z-=ji[0]/2,A=[],Ci=Mt.length;for(var Vo=0;Vo<Ci;Vo++)Vo===0?(qi=ha(Z),Hr=Ai(be)):(qi=z((so-ji[Vo])/2),Hr=-yu),A.push([Mt[Vo],qi,Hr]),so=ji[Vo]}else if(rn==="left"){A=[],Ci=Mt.length;for(var _r=0;_r<Ci;_r++)A.push(Mt[_r])}else if(rn==="justify"&&Ms.encoding==="Identity-H"){A=[],Ci=Mt.length,ln=ln!==0?ln:Il;for(var _o=0,Gr=0;Gr<Ci;Gr++)if(Hr=Gr===0?Ai(be):-yu,qi=Gr===0?ha(Z):_o,Gr<Ci-1){var xu=z((ln-ji[Gr])/(Mt[Gr].split(" ").length-1)),zi=Mt[Gr].split(" ");A.push([zi[0]+" ",qi,Hr]),_o=0;for(var Vr=1;Vr<zi.length;Vr++){var Wo=(So(zi[Vr-1]+" "+zi[Vr])-So(zi[Vr]))*Kr+xu;Vr==zi.length-1?A.push([zi[Vr],Wo,0]):A.push([zi[Vr]+" ",Wo,0]),_o-=Wo}}else A.push([Mt[Gr],qi,Hr]);A.push(["",_o,0])}else{if(rn!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(A=[],Ci=Mt.length,ln=ln!==0?ln:Il,Gr=0;Gr<Ci;Gr++)Hr=Gr===0?Ai(be):-yu,qi=Gr===0?ha(Z):0,Gr<Ci-1?wo.push(N(z((ln-ji[Gr])/(Mt[Gr].split(" ").length-1)))):wo.push(0),A.push([Mt[Gr],qi,Hr])}}var Pr=typeof Pe.R2L=="boolean"?Pe.R2L:ue;Pr===!0&&(A=ja(A,function($n,ar,Fr){return[$n.split("").reverse().join(""),ar,Fr]})),at={text:A,x:Z,y:be,options:Pe,mutex:{pdfEscape:Cn,activeFontKey:ot,fonts:Ct,activeFontSize:Qe}},zt.publish("postProcessText",at),A=at.text,io=at.mutex.isHex||!1;var vi=Ct[ot].encoding;vi!=="WinAnsiEncoding"&&vi!=="StandardEncoding"||(A=ja(A,function($n,ar,Fr){return[as($n),ar,Fr]})),Mt=Sr(A),A=[];for(var Or,ga,bo,jo=0,xc=1,Jr=Array.isArray(Mt[0])?xc:jo,va="",wu=function($n,ar,Fr){var Qr="";return Fr instanceof Ft?(Fr=typeof Pe.angle=="number"?ti(Fr,new Ft(1,0,0,1,$n,ar)):ti(new Ft(1,0,0,1,$n,ar),Fr),_===S.ADVANCED&&(Fr=ti(new Ft(1,0,0,-1,0,0),Fr)),Qr=Fr.join(" ")+` Tm
`):Qr=N($n)+" "+N(ar)+` Td
`,Qr},Is=0;Is<Mt.length;Is++){switch(va="",Jr){case xc:bo=(io?"<":"(")+Mt[Is][0]+(io?">":")"),Or=parseFloat(Mt[Is][1]),ga=parseFloat(Mt[Is][2]);break;case jo:bo=(io?"<":"(")+Mt[Is]+(io?">":")"),Or=ha(Z),ga=Ai(be)}wo!==void 0&&wo[Is]!==void 0&&(va=wo[Is]+` Tw
`),Is===0?A.push(va+wu(Or,ga,fr)+bo):Jr===jo?A.push(va+bo):Jr===xc&&A.push(va+wu(Or,ga,fr)+bo)}A=Jr===jo?A.join(` Tj
T* `):A.join(` Tj
`),A+=` Tj
`;var yi=`BT
/`;return yi+=ot+" "+Qe+` Tf
`,yi+=N(Qe*bs)+` TL
`,yi+=Ga+`
`,yi+=Ti,yi+=A,ne(yi+="ET"),d[ot]=!0,wr};var _m=m.__private__.clip=m.clip=function(A){return ne(A==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return _m("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ne("n"),this};var ua=m.__private__.isValidStyle=function(A){var Z=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(A)!==-1&&(Z=!0),Z};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(A){return ua(A)&&(u=A),this};var ri=m.__private__.getStyle=m.getStyle=function(A){var Z=u;switch(A){case"D":case"S":Z="S";break;case"F":Z="f";break;case"FD":case"DF":Z="B";break;case"f":case"f*":case"B":case"B*":Z=A}return Z},uc=m.close=function(){return ne("h"),this};m.stroke=function(){return ne("S"),this},m.fill=function(A){return cc("f",A),this},m.fillEvenOdd=function(A){return cc("f*",A),this},m.fillStroke=function(A){return cc("B",A),this},m.fillStrokeEvenOdd=function(A){return cc("B*",A),this};var cc=function(A,Z){Tr(Z)==="object"?hc(Z,A):ne(A)},uu=function(A){A===null||_===S.ADVANCED&&A===void 0||(A=ri(A),ne(A))};function bm(A,Z,be,Pe,He){var at=new Rf(Z||this.boundingBox,be||this.xStep,Pe||this.yStep,this.gState,He||this.matrix);at.stream=this.stream;var Mt=A+"$$"+this.cloneIndex+++"$$";return yr(Mt,at),at}var hc=function(A,Z){var be=Te[A.key],Pe=pt[be];if(Pe instanceof Jc)ne("q"),ne(yo(Z)),Pe.gState&&m.setGState(Pe.gState),ne(A.matrix.toString()+" cm"),ne("/"+be+" sh"),ne("Q");else if(Pe instanceof Rf){var He=new Ft(1,0,0,-1,0,Wa());A.matrix&&(He=He.multiply(A.matrix||ni),be=bm.call(Pe,A.key,A.boundingBox,A.xStep,A.yStep,He).id),ne("q"),ne("/Pattern cs"),ne("/"+be+" scn"),Pe.gState&&m.setGState(Pe.gState),ne(Z),ne("Q")}},yo=function(A){switch(A){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},zh=m.moveTo=function(A,Z){return ne(N(z(A))+" "+N(G(Z))+" m"),this},cu=m.lineTo=function(A,Z){return ne(N(z(A))+" "+N(G(Z))+" l"),this},Wi=m.curveTo=function(A,Z,be,Pe,He,at){return ne([N(z(A)),N(G(Z)),N(z(be)),N(G(Pe)),N(z(He)),N(G(at)),"c"].join(" ")),this};m.__private__.line=m.line=function(A,Z,be,Pe,He){if(isNaN(A)||isNaN(Z)||isNaN(be)||isNaN(Pe)||!ua(He))throw new Error("Invalid arguments passed to jsPDF.line");return _===S.COMPAT?this.lines([[be-A,Pe-Z]],A,Z,[1,1],He||"S"):this.lines([[be-A,Pe-Z]],A,Z,[1,1]).stroke()},m.__private__.lines=m.lines=function(A,Z,be,Pe,He,at){var Mt,Ht,rn,bn,ln,An,gr,fr,wr,Zr,Ti,io;if(typeof A=="number"&&(io=be,be=Z,Z=A,A=io),Pe=Pe||[1,1],at=at||!1,isNaN(Z)||isNaN(be)||!Array.isArray(A)||!Array.isArray(Pe)||!ua(He)||typeof at!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(zh(Z,be),Mt=Pe[0],Ht=Pe[1],bn=A.length,Zr=Z,Ti=be,rn=0;rn<bn;rn++)(ln=A[rn]).length===2?(Zr=ln[0]*Mt+Zr,Ti=ln[1]*Ht+Ti,cu(Zr,Ti)):(An=ln[0]*Mt+Zr,gr=ln[1]*Ht+Ti,fr=ln[2]*Mt+Zr,wr=ln[3]*Ht+Ti,Zr=ln[4]*Mt+Zr,Ti=ln[5]*Ht+Ti,Wi(An,gr,fr,wr,Zr,Ti));return at&&uc(),uu(He),this},m.path=function(A){for(var Z=0;Z<A.length;Z++){var be=A[Z],Pe=be.c;switch(be.op){case"m":zh(Pe[0],Pe[1]);break;case"l":cu(Pe[0],Pe[1]);break;case"c":Wi.apply(this,Pe);break;case"h":uc()}}return this},m.__private__.rect=m.rect=function(A,Z,be,Pe,He){if(isNaN(A)||isNaN(Z)||isNaN(be)||isNaN(Pe)||!ua(He))throw new Error("Invalid arguments passed to jsPDF.rect");return _===S.COMPAT&&(Pe=-Pe),ne([N(z(A)),N(G(Z)),N(z(be)),N(z(Pe)),"re"].join(" ")),uu(He),this},m.__private__.triangle=m.triangle=function(A,Z,be,Pe,He,at,Mt){if(isNaN(A)||isNaN(Z)||isNaN(be)||isNaN(Pe)||isNaN(He)||isNaN(at)||!ua(Mt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[be-A,Pe-Z],[He-be,at-Pe],[A-He,Z-at]],A,Z,[1,1],Mt,!0),this},m.__private__.roundedRect=m.roundedRect=function(A,Z,be,Pe,He,at,Mt){if(isNaN(A)||isNaN(Z)||isNaN(be)||isNaN(Pe)||isNaN(He)||isNaN(at)||!ua(Mt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ht=4/3*(Math.SQRT2-1);return He=Math.min(He,.5*be),at=Math.min(at,.5*Pe),this.lines([[be-2*He,0],[He*Ht,0,He,at-at*Ht,He,at],[0,Pe-2*at],[0,at*Ht,-He*Ht,at,-He,at],[2*He-be,0],[-He*Ht,0,-He,-at*Ht,-He,-at],[0,2*at-Pe],[0,-at*Ht,He*Ht,-at,He,-at]],A+He,Z,[1,1],Mt,!0),this},m.__private__.ellipse=m.ellipse=function(A,Z,be,Pe,He){if(isNaN(A)||isNaN(Z)||isNaN(be)||isNaN(Pe)||!ua(He))throw new Error("Invalid arguments passed to jsPDF.ellipse");var at=4/3*(Math.SQRT2-1)*be,Mt=4/3*(Math.SQRT2-1)*Pe;return zh(A+be,Z),Wi(A+be,Z-Mt,A+at,Z-Pe,A,Z-Pe),Wi(A-at,Z-Pe,A-be,Z-Mt,A-be,Z),Wi(A-be,Z+Mt,A-at,Z+Pe,A,Z+Pe),Wi(A+at,Z+Pe,A+be,Z+Mt,A+be,Z),uu(He),this},m.__private__.circle=m.circle=function(A,Z,be,Pe){if(isNaN(A)||isNaN(Z)||isNaN(be)||!ua(Pe))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(A,Z,be,be,Pe)},m.setFont=function(A,Z,be){return be&&(Z=P(Z,be)),ot=lu(A,Z,{disableWarning:!1}),this};var zo=m.__private__.getFont=m.getFont=function(){return Ct[lu.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var A,Z,be={};for(A in Se)if(Se.hasOwnProperty(A))for(Z in be[A]=[],Se[A])Se[A].hasOwnProperty(Z)&&be[A].push(Z);return be},m.addFont=function(A,Z,be,Pe,He){var at=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&at.indexOf(arguments[3])!==-1?He=arguments[3]:arguments[3]&&at.indexOf(arguments[3])==-1&&(be=P(be,Pe)),He=He||"Identity-H",or.call(this,A,Z,be,He)};var ca,hu=n.lineWidth||.200025,fu=m.__private__.getLineWidth=m.getLineWidth=function(){return hu},ud=m.__private__.setLineWidth=m.setLineWidth=function(A){return hu=A,ne(N(z(A))+" w"),this};m.__private__.setLineDash=yn.API.setLineDash=yn.API.setLineDashPattern=function(A,Z){if(A=A||[],Z=Z||0,isNaN(Z)||!Array.isArray(A))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return A=A.map(function(be){return N(z(be))}).join(" "),Z=N(z(Z)),ne("["+A+"] "+Z+" d"),this};var to=m.__private__.getLineHeight=m.getLineHeight=function(){return Qe*ca};m.__private__.getLineHeight=m.getLineHeight=function(){return Qe*ca};var cd=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(A){return typeof(A=A||1.15)=="number"&&(ca=A),this},du=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return ca};cd(n.lineHeight);var ha=m.__private__.getHorizontalCoordinate=function(A){return z(A)},Ai=m.__private__.getVerticalCoordinate=function(A){return _===S.ADVANCED?A:At[j].mediaBox.topRightY-At[j].mediaBox.bottomLeftY-z(A)},fc=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(A){return N(ha(A))},Ho=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(A){return N(Ai(A))},ss=n.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return q(ss)},m.__private__.setStrokeColor=m.setDrawColor=function(A,Z,be,Pe){return ss=O({ch1:A,ch2:Z,ch3:be,ch4:Pe,pdfColorType:"draw",precision:2}),ne(ss),this};var pu=n.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return q(pu)},m.__private__.setFillColor=m.setFillColor=function(A,Z,be,Pe){return pu=O({ch1:A,ch2:Z,ch3:be,ch4:Pe,pdfColorType:"fill",precision:2}),ne(pu),this};var Ga=n.textColor||"0 g",hd=m.__private__.getTextColor=m.getTextColor=function(){return q(Ga)};m.__private__.setTextColor=m.setTextColor=function(A,Z,be,Pe){return Ga=O({ch1:A,ch2:Z,ch3:be,ch4:Pe,pdfColorType:"text",precision:3}),this};var Pl=n.charSpace,Hh=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Pl||0)};m.__private__.setCharSpace=m.setCharSpace=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Pl=A,this};var fa=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(A){var Z=m.CapJoinStyles[A];if(Z===void 0)throw new Error("Line cap style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fa=Z,ne(Z+" J"),this};var os=0;m.__private__.setLineJoin=m.setLineJoin=function(A){var Z=m.CapJoinStyles[A];if(Z===void 0)throw new Error("Line join style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return os=Z,ne(Z+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(A){if(A=A||0,isNaN(A))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ne(N(z(A))+" M"),this},m.GState=Yf,m.setGState=function(A){(A=typeof A=="string"?De[Ge[A]]:no(null,A)).equals(bt)||(ne("/"+A.id+" gs"),bt=A)};var no=function(A,Z){if(!A||!Ge[A]){var be=!1;for(var Pe in De)if(De.hasOwnProperty(Pe)&&De[Pe].equals(Z)){be=!0;break}if(be)Z=De[Pe];else{var He="GS"+(Object.keys(De).length+1).toString(10);De[He]=Z,Z.id=He}return A&&(Ge[A]=Z.id),zt.publish("addGState",Z),Z}};m.addGState=function(A,Z){return no(A,Z),this},m.saveGraphicsState=function(){return ne("q"),et.push({key:ot,size:Qe,color:Ga}),this},m.restoreGraphicsState=function(){ne("Q");var A=et.pop();return ot=A.key,Qe=A.size,Ga=A.color,bt=null,this},m.setCurrentTransformationMatrix=function(A){return ne(A.toString()+" cm"),this},m.comment=function(A){return ne("#"+A),this};var ro=function(A,Z){var be=A||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return be},set:function(at){isNaN(at)||(be=parseFloat(at))}});var Pe=Z||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Pe},set:function(at){isNaN(at)||(Pe=parseFloat(at))}});var He="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return He},set:function(at){He=at.toString()}}),this},mu=function(A,Z,be,Pe){ro.call(this,A,Z),this.type="rect";var He=be||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return He},set:function(Mt){isNaN(Mt)||(He=parseFloat(Mt))}});var at=Pe||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return at},set:function(Mt){isNaN(Mt)||(at=parseFloat(Mt))}}),this},dc=function(){this.page=Et,this.currentPage=j,this.pages=Ne.slice(0),this.pagesContext=At.slice(0),this.x=Ut,this.y=Tt,this.matrix=Nt,this.width=Rl(j),this.height=Wa(j),this.outputDestination=Oe,this.id="",this.objectNumber=-1};dc.prototype.restore=function(){Et=this.page,j=this.currentPage,At=this.pagesContext,Ne=this.pages,Ut=this.x,Tt=this.y,Nt=this.matrix,kl(j,this.width),pc(j,this.height),Oe=this.outputDestination};var xo=function(A,Z,be,Pe,He){Xn.push(new dc),Et=j=0,Ne=[],Ut=A,Tt=Z,Nt=He,zn([be,Pe])},da=function(A){if(fn[A])Xn.pop().restore();else{var Z=new dc,be="Xo"+(Object.keys(Mn).length+1).toString(10);Z.id=be,fn[A]=be,Mn[be]=Z,zt.publish("addFormObject",Z),Xn.pop().restore()}};for(var Va in m.beginFormObject=function(A,Z,be,Pe,He){return xo(A,Z,be,Pe,He),this},m.endFormObject=function(A){return da(A),this},m.doFormObject=function(A,Z){var be=Mn[fn[A]];return ne("q"),ne(Z.toString()+" cm"),ne("/"+be.id+" Do"),ne("Q"),this},m.getFormObject=function(A){var Z=Mn[fn[A]];return{x:Z.x,y:Z.y,width:Z.width,height:Z.height,matrix:Z.matrix}},m.save=function(A,Z){return A=A||"generated.pdf",(Z=Z||{}).returnPromise=Z.returnPromise||!1,Z.returnPromise===!1?(gf(Ll(Bo()),A),typeof gf.unload=="function"&&Sn.setTimeout&&setTimeout(gf.unload,911),this):new Promise(function(be,Pe){try{var He=gf(Ll(Bo()),A);typeof gf.unload=="function"&&Sn.setTimeout&&setTimeout(gf.unload,911),be(He)}catch(at){Pe(at.message)}})},yn.API)yn.API.hasOwnProperty(Va)&&(Va==="events"&&yn.API.events.length?function(A,Z){var be,Pe,He;for(He=Z.length-1;He!==-1;He--)be=Z[He][0],Pe=Z[He][1],A.subscribe.apply(A,[be].concat(typeof Pe=="function"?[Pe]:Pe))}(zt,yn.API.events):m[Va]=yn.API[Va]);var Rl=m.getPageWidth=function(A){return(At[A=A||j].mediaBox.topRightX-At[A].mediaBox.bottomLeftX)/Le},kl=m.setPageWidth=function(A,Z){At[A].mediaBox.topRightX=Z*Le+At[A].mediaBox.bottomLeftX},Wa=m.getPageHeight=function(A){return(At[A=A||j].mediaBox.topRightY-At[A].mediaBox.bottomLeftY)/Le},pc=m.setPageHeight=function(A,Z){At[A].mediaBox.topRightY=Z*Le+At[A].mediaBox.bottomLeftY};return m.internal={pdfEscape:Cn,getStyle:ri,getFont:zo,getFontSize:mt,getCharSpace:Hh,getTextColor:hd,getLineHeight:to,getLineHeightFactor:du,getLineWidth:fu,write:ut,getHorizontalCoordinate:ha,getVerticalCoordinate:Ai,getCoordinateString:fc,getVerticalCoordinateString:Ho,collections:{},newObject:tr,newAdditionalObject:xn,newObjectDeferred:sr,newObjectDeferredBegin:nr,getFilters:ee,putStream:me,events:zt,scaleFactor:Le,pageSize:{getWidth:function(){return Rl(j)},setWidth:function(A){kl(j,A)},getHeight:function(){return Wa(j)},setHeight:function(A){pc(j,A)}},encryptionOptions:c,encryption:Ui,getEncryptor:Qn,output:la,getNumberOfPages:vo,pages:Ne,out:ne,f2:U,f3:F,getPageInfo:Bh,getPageInfoByObjId:wn,getCurrentPageInfo:ld,getPDFVersion:w,Point:ro,Rectangle:mu,Matrix:Ft,hasHotfix:ad},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Rl(j)},set:function(A){kl(j,A)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Wa(j)},set:function(A){pc(j,A)},enumerable:!0,configurable:!0}),zr.call(m,Be),ot="F1",Mr(i,t),zt.publish("initialized"),m}fp.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},fp.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},fp.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},fp.prototype.processOwnerPassword=function(n,e){return x5(y5(e).substr(0,5),n)},fp.prototype.encryptor=function(n,e){var t=y5(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return x5(t,r)}},Yf.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Tr(n)!==Tr(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},yn.API={events:[]},yn.version="3.0.1";var Si=yn.API,P3=1,sd=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rp=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Rn=function(n){return n.toFixed(2)},Hc=function(n){return n.toFixed(5)};Si.__acroform__={};var Fo=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},cT=function(n){return n*P3},zl=function(n){var e=new Bk,t=Qt.internal.getHeight(n)||0,r=Qt.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Rn(r)),Number(Rn(t))],e},UG=Si.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},BG=Si.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},zG=Si.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Ii=Si.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return zG(n,e-1)},Di=Si.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return UG(n,e-1)},Oi=Si.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return BG(n,e-1)},HG=Si.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],s=n[1],o=n[2],a=n[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=t(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Rn(l.lowerLeft_X)),Number(Rn(l.lowerLeft_Y)),Number(Rn(l.upperRight_X)),Number(Rn(l.upperRight_Y))]},GG=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=w5(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+Rn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=zl(n);return s.scope=n.scope,s.stream=e.join(`
`),s}},w5=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(F){return F.split(`
`)}):i.map(function(F){return[F]});var s=t,o=Qt.internal.getHeight(n)||0;o=o<0?-o:o;var a=Qt.internal.getWidth(n)||0;a=a<0?-a:a;var l=function(F,z,V){if(F+1<i.length){var G=z+" "+i[F+1][0];return Ov(G,n,V).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var u,c,h=Ov("3",n,s).height,d=n.multiline?o-s:(o-h)/2,m=d+=2,v=0,w=0,x=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Ov(e,n,s=12).width+", FieldWidth:"+a+`
`;break}for(var g="",S=0,_=0;_<i.length;_++)if(i.hasOwnProperty(_)){var T=!1;if(i[_].length!==1&&x!==i[_].length-1){if((h+2)*(S+2)+2>o)continue e;g+=i[_][x],T=!0,w=_,_--}else{g=(g+=i[_][x]+" ").substr(g.length-1)==" "?g.substr(0,g.length-1):g;var L=parseInt(_),P=l(L,g,s),N=_>=i.length-1;if(P&&!N){g+=" ",x=0;continue}if(P||N){if(N)w=L;else if(n.multiline&&(h+2)*(S+2)+2>o)continue e}else{if(!n.multiline||(h+2)*(S+2)+2>o)continue e;w=L}}for(var k="",R=v;R<=w;R++){var U=i[R];if(n.multiline){if(R===w){k+=U[x]+" ",x=(x+1)%U.length;continue}if(R===v){k+=U[U.length-1]+" ";continue}}k+=U[0]+" "}switch(k=k.substr(k.length-1)==" "?k.substr(0,k.length-1):k,c=Ov(k,n,s).width,n.textAlign){case"right":u=a-c-2;break;case"center":u=(a-c)/2;break;case"left":default:u=2}e+=Rn(u)+" "+Rn(m)+` Td
`,e+="("+sd(k)+`) Tj
`,e+=-Rn(u)+` 0 Td
`,m=-(s+2),c=0,v=T?w:w+1,S++,g=""}break}return r.text=e,r.fontSize=s,r},Ov=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},VG={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},WG=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},jG=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),Tr(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},qG=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(El.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(VG)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");P3=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new zk,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&WG(s,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],u=a.Rect;if(a.Rect&&(a.Rect=HG(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=Qt.createDefaultAppearanceStream(a),Tr(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var c=GG(a);l.push({key:"AP",value:"<</N "+c+">>"}),i.internal.acroformPlugin.xForms.push(c)}if(a.appearanceStreamContent){var h="";for(var d in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(d)){var m=a.appearanceStreamContent[d];if(h+="/"+d+" ",h+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var v=m[o];typeof v=="function"&&(v=v.call(i,a)),h+="/"+o+" "+v+" ",i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v)}}else typeof(v=m)=="function"&&(v=v.call(i,a)),h+="/"+o+" "+v,i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&jG(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},Uk=Si.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(o){return o};if(Array.isArray(n)){for(var i="[",s=0;s<n.length;s++)switch(s!==0&&(i+=" "),Tr(n[s])){case"boolean":case"number":case"object":i+=n[s].toString();break;case"string":n[s].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+sd(r(n[s].toString()))+")"):i+=n[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},tS=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+sd(r(n))+")"},ql=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ql.prototype.toString=function(){return this.objId+" 0 R"},ql.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},ql.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:Uk(i,this.objId,this.scope)}):i instanceof ql?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var Bk=function(){ql.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};Fo(Bk,ql);var zk=function(){ql.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+sd(t(n))+")"}},set:function(t){n=t}})};Fo(zk,ql);var El=function n(){ql.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute F supplied.');e=g}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(e,3))},set:function(g){Boolean(g)===!0?this.F=Di(e,3):this.F=Oi(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute Ff supplied.');t=g}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(g){r=g!==void 0?g:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(g){r[0]=g}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(g){r[1]=g}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(g){r[2]=g}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(g){r[3]=g}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(g){switch(g){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=g;break;default:throw new Error('Invalid value "'+g+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof r2)return;s="FieldObject"+n.FieldNum++}var g=function(S){return S};return this.scope&&(g=this.scope.internal.getEncryptor(this.objId)),"("+sd(g(s))+")"},set:function(g){s=g.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(g){s=g}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(g){o=g}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(g){a=g}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(g){l=g}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/P3:u},set:function(g){u=g}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(g){c=g}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof r2||this instanceof Uf))return tS(h,this.objId,this.scope)},set:function(g){g=g.toString(),h=g}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof xs?d:tS(d,this.objId,this.scope)},set:function(g){g=g.toString(),d=this instanceof xs?g:g.substr(0,1)==="("?rp(g.substr(1,g.length-2)):rp(g)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof xs?rp(d.substr(1,d.length-1)):d},set:function(g){g=g.toString(),d=this instanceof xs?"/"+g:g}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(g){this.V=g}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof xs?m:tS(m,this.objId,this.scope)},set:function(g){g=g.toString(),m=this instanceof xs?g:g.substr(0,1)==="("?rp(g.substr(1,g.length-2)):rp(g)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof xs?rp(m.substr(1,m.length-1)):m},set:function(g){g=g.toString(),m=this instanceof xs?"/"+g:g}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(g){g=Boolean(g),w=g}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(g){v=g}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,1))},set:function(g){Boolean(g)===!0?this.Ff=Di(this.Ff,1):this.Ff=Oi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,2))},set:function(g){Boolean(g)===!0?this.Ff=Di(this.Ff,2):this.Ff=Oi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,3))},set:function(g){Boolean(g)===!0?this.Ff=Di(this.Ff,3):this.Ff=Oi(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(g){if([0,1,2].indexOf(g)===-1)throw new Error('Invalid value "'+g+'" for attribute Q supplied.');x=g}}),Object.defineProperty(this,"textAlign",{get:function(){var g;switch(x){case 0:default:g="left";break;case 1:g="center";break;case 2:g="right"}return g},configurable:!0,enumerable:!0,set:function(g){switch(g){case"right":case 2:x=2;break;case"center":case 1:x=1;break;case"left":case 0:default:x=0}}})};Fo(El,ql);var Up=function(){El.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Uk(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,u=[];l=o.exec(s);)u.push(l[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,18))},set:function(t){Boolean(t)===!0?this.Ff=Di(this.Ff,18):this.Ff=Oi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,19))},set:function(t){this.combo===!0&&(Boolean(t)===!0?this.Ff=Di(this.Ff,19):this.Ff=Oi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,20))},set:function(t){Boolean(t)===!0?(this.Ff=Di(this.Ff,20),e.sort()):this.Ff=Oi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,22))},set:function(t){Boolean(t)===!0?this.Ff=Di(this.Ff,22):this.Ff=Oi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,23))},set:function(t){Boolean(t)===!0?this.Ff=Di(this.Ff,23):this.Ff=Oi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,27))},set:function(t){Boolean(t)===!0?this.Ff=Di(this.Ff,27):this.Ff=Oi(this.Ff,27)}}),this.hasAppearanceStream=!1};Fo(Up,El);var Bp=function(){Up.call(this),this.fontName="helvetica",this.combo=!1};Fo(Bp,Up);var zp=function(){Bp.call(this),this.combo=!0};Fo(zp,Bp);var vy=function(){zp.call(this),this.edit=!0};Fo(vy,zp);var xs=function(){El.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,15))},set:function(t){Boolean(t)===!0?this.Ff=Di(this.Ff,15):this.Ff=Oi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,16))},set:function(t){Boolean(t)===!0?this.Ff=Di(this.Ff,16):this.Ff=Oi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,17))},set:function(t){Boolean(t)===!0?this.Ff=Di(this.Ff,17):this.Ff=Oi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,26))},set:function(t){Boolean(t)===!0?this.Ff=Di(this.Ff,26):this.Ff=Oi(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(s){return s};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+sd(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Tr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};Fo(xs,El);var yy=function(){xs.call(this),this.pushButton=!0};Fo(yy,xs);var Hp=function(){xs.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};Fo(Hp,xs);var r2=function(){var n,e;El.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+sd(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Tr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Qt.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Fo(r2,El),Hp.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Hp.prototype.createOption=function(n){var e=new r2;return e.Parent=this,e.optionName=n,this.Kids.push(e),XG.call(this.scope,e),e};var xy=function(){xs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Qt.CheckBox.createAppearanceStream()};Fo(xy,xs);var Uf=function(){El.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,13))},set:function(e){Boolean(e)===!0?this.Ff=Di(this.Ff,13):this.Ff=Oi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,21))},set:function(e){Boolean(e)===!0?this.Ff=Di(this.Ff,21):this.Ff=Oi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,23))},set:function(e){Boolean(e)===!0?this.Ff=Di(this.Ff,23):this.Ff=Oi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,24))},set:function(e){Boolean(e)===!0?this.Ff=Di(this.Ff,24):this.Ff=Oi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,25))},set:function(e){Boolean(e)===!0?this.Ff=Di(this.Ff,25):this.Ff=Oi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,26))},set:function(e){Boolean(e)===!0?this.Ff=Di(this.Ff,26):this.Ff=Oi(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Fo(Uf,El);var wy=function(){Uf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Ii(this.Ff,14))},set:function(n){Boolean(n)===!0?this.Ff=Di(this.Ff,14):this.Ff=Oi(this.Ff,14)}}),this.password=!0};Fo(wy,Uf);var Qt={CheckBox:{createAppearanceStream:function(){return{N:{On:Qt.CheckBox.YesNormal},D:{On:Qt.CheckBox.YesPushDown,Off:Qt.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=zl(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),s=w5(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Rn(Qt.internal.getWidth(n))+" "+Rn(Qt.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Rn(s.fontSize)+" Tf "+i),t.push("BT"),t.push(s.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=zl(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],s=Qt.internal.getHeight(n),o=Qt.internal.getWidth(n),a=w5(n,n.caption);return i.push("1 g"),i.push("0 0 "+Rn(o)+" "+Rn(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Rn(o-1)+" "+Rn(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Rn(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=zl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Rn(Qt.internal.getWidth(n))+" "+Rn(Qt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Qt.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Qt.RadioButton.Circle.YesNormal,e.D[n]=Qt.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=zl(n);e.scope=n.scope;var t=[],r=Qt.internal.getWidth(n)<=Qt.internal.getHeight(n)?Qt.internal.getWidth(n)/4:Qt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Qt.internal.Bezier_C,s=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Hc(Qt.internal.getWidth(n)/2)+" "+Hc(Qt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=zl(n);e.scope=n.scope;var t=[],r=Qt.internal.getWidth(n)<=Qt.internal.getHeight(n)?Qt.internal.getWidth(n)/4:Qt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Qt.internal.Bezier_C).toFixed(5)),o=Number((r*Qt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Hc(Qt.internal.getWidth(n)/2)+" "+Hc(Qt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Hc(Qt.internal.getWidth(n)/2)+" "+Hc(Qt.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=zl(n);e.scope=n.scope;var t=[],r=Qt.internal.getWidth(n)<=Qt.internal.getHeight(n)?Qt.internal.getWidth(n)/4:Qt.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*Qt.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Hc(Qt.internal.getWidth(n)/2)+" "+Hc(Qt.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),t.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),t.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),t.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Qt.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Qt.RadioButton.Cross.YesNormal,e.D[n]=Qt.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=zl(n);e.scope=n.scope;var t=[],r=Qt.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Rn(Qt.internal.getWidth(n)-2)+" "+Rn(Qt.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Rn(r.x1.x)+" "+Rn(r.x1.y)+" m"),t.push(Rn(r.x2.x)+" "+Rn(r.x2.y)+" l"),t.push(Rn(r.x4.x)+" "+Rn(r.x4.y)+" m"),t.push(Rn(r.x3.x)+" "+Rn(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=zl(n);e.scope=n.scope;var t=Qt.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Rn(Qt.internal.getWidth(n))+" "+Rn(Qt.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Rn(Qt.internal.getWidth(n)-2)+" "+Rn(Qt.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Rn(t.x1.x)+" "+Rn(t.x1.y)+" m"),r.push(Rn(t.x2.x)+" "+Rn(t.x2.y)+" l"),r.push(Rn(t.x4.x)+" "+Rn(t.x4.y)+" m"),r.push(Rn(t.x3.x)+" "+Rn(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=zl(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Rn(Qt.internal.getWidth(n))+" "+Rn(Qt.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Qt.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Qt.internal.getWidth(n),t=Qt.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Qt.internal.getWidth=function(n){var e=0;return Tr(n)==="object"&&(e=cT(n.Rect[2])),e},Qt.internal.getHeight=function(n){var e=0;return Tr(n)==="object"&&(e=cT(n.Rect[3])),e};var XG=Si.addField=function(n){if(qG(this,n),!(n instanceof El))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Si.AcroFormChoiceField=Up,Si.AcroFormListBox=Bp,Si.AcroFormComboBox=zp,Si.AcroFormEditBox=vy,Si.AcroFormButton=xs,Si.AcroFormPushButton=yy,Si.AcroFormRadioButton=Hp,Si.AcroFormCheckBox=xy,Si.AcroFormTextField=Uf,Si.AcroFormPasswordField=wy,Si.AcroFormAppearance=Qt,Si.AcroForm={ChoiceField:Up,ListBox:Bp,ComboBox:zp,EditBox:vy,Button:xs,PushButton:yy,RadioButton:Hp,CheckBox:xy,TextField:Uf,PasswordField:wy,Appearance:Qt},yn.AcroForm={ChoiceField:Up,ListBox:Bp,ComboBox:zp,EditBox:vy,Button:xs,PushButton:yy,RadioButton:Hp,CheckBox:xy,TextField:Uf,PasswordField:wy,Appearance:Qt};function Hk(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(F,z){var V,G,J,ie,ce,W=e;if((z=z||e)==="RGBA"||F.data!==void 0&&F.data instanceof Uint8ClampedArray&&"height"in F&&"width"in F)return"RGBA";if(P(F))for(ce in t)for(J=t[ce],V=0;V<J.length;V+=1){for(ie=!0,G=0;G<J[V].length;G+=1)if(J[V][G]!==void 0&&J[V][G]!==F[G]){ie=!1;break}if(ie===!0){W=ce;break}}else for(ce in t)for(J=t[ce],V=0;V<J.length;V+=1){for(ie=!0,G=0;G<J[V].length;G+=1)if(J[V][G]!==void 0&&J[V][G]!==F.charCodeAt(G)){ie=!1;break}if(ie===!0){W=ce;break}}return W===e&&z!==e&&(W=z),W},i=function F(z){for(var V=this.internal.write,G=this.internal.putStream,J=(0,this.internal.getFilters)();J.indexOf("FlateEncode")!==-1;)J.splice(J.indexOf("FlateEncode"),1);z.objectId=this.internal.newObject();var ie=[];if(ie.push({key:"Type",value:"/XObject"}),ie.push({key:"Subtype",value:"/Image"}),ie.push({key:"Width",value:z.width}),ie.push({key:"Height",value:z.height}),z.colorSpace===x.INDEXED?ie.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(z.palette.length/3-1)+" "+("sMask"in z&&z.sMask!==void 0?z.objectId+2:z.objectId+1)+" 0 R]"}):(ie.push({key:"ColorSpace",value:"/"+z.colorSpace}),z.colorSpace===x.DEVICE_CMYK&&ie.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ie.push({key:"BitsPerComponent",value:z.bitsPerComponent}),"decodeParameters"in z&&z.decodeParameters!==void 0&&ie.push({key:"DecodeParms",value:"<<"+z.decodeParameters+">>"}),"transparency"in z&&Array.isArray(z.transparency)){for(var ce="",W=0,Y=z.transparency.length;W<Y;W++)ce+=z.transparency[W]+" "+z.transparency[W]+" ";ie.push({key:"Mask",value:"["+ce+"]"})}z.sMask!==void 0&&ie.push({key:"SMask",value:z.objectId+1+" 0 R"});var $=z.filter!==void 0?["/"+z.filter]:void 0;if(G({data:z.data,additionalKeyValues:ie,alreadyAppliedFilters:$,objectId:z.objectId}),V("endobj"),"sMask"in z&&z.sMask!==void 0){var oe="/Predictor "+z.predictor+" /Colors 1 /BitsPerComponent "+z.bitsPerComponent+" /Columns "+z.width,D={width:z.width,height:z.height,colorSpace:"DeviceGray",bitsPerComponent:z.bitsPerComponent,decodeParameters:oe,data:z.sMask};"filter"in z&&(D.filter=z.filter),F.call(this,D)}if(z.colorSpace===x.INDEXED){var j=this.internal.newObject();G({data:k(new Uint8Array(z.palette)),objectId:j}),V("endobj")}},s=function(){var F=this.internal.collections.addImage_images;for(var z in F)i.call(this,F[z])},o=function(){var F,z=this.internal.collections.addImage_images,V=this.internal.write;for(var G in z)V("/I"+(F=z[G]).index,F.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var F=this.internal.collections.addImage_images;return a.call(this),F},u=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(F){return typeof n["process"+F.toUpperCase()]=="function"},h=function(F){return Tr(F)==="object"&&F.nodeType===1},d=function(F,z){if(F.nodeName==="IMG"&&F.hasAttribute("src")){var V=""+F.getAttribute("src");if(V.indexOf("data:image/")===0)return U0(unescape(V).split("base64,").pop());var G=n.loadFile(V,!0);if(G!==void 0)return G}if(F.nodeName==="CANVAS"){if(F.width===0||F.height===0)throw new Error("Given canvas must have data. Canvas width: "+F.width+", height: "+F.height);var J;switch(z){case"PNG":J="image/png";break;case"WEBP":J="image/webp";break;case"JPEG":case"JPG":default:J="image/jpeg"}return U0(F.toDataURL(J,1).split("base64,").pop())}},m=function(F){var z=this.internal.collections.addImage_images;if(z){for(var V in z)if(F===z[V].alias)return z[V]}},v=function(F,z,V){return F||z||(F=-96,z=-96),F<0&&(F=-1*V.width*72/F/this.internal.scaleFactor),z<0&&(z=-1*V.height*72/z/this.internal.scaleFactor),F===0&&(F=z*V.width/V.height),z===0&&(z=F*V.height/V.width),[F,z]},w=function(F,z,V,G,J,ie){var ce=v.call(this,V,G,J),W=this.internal.getCoordinateString,Y=this.internal.getVerticalCoordinateString,$=l.call(this);if(V=ce[0],G=ce[1],$[J.index]=J,ie){ie*=Math.PI/180;var oe=Math.cos(ie),D=Math.sin(ie),j=function(ae){return ae.toFixed(4)},K=[j(oe),j(D),j(-1*D),j(oe),0,0,"cm"]}this.internal.write("q"),ie?(this.internal.write([1,"0","0",1,W(F),Y(z+G),"cm"].join(" ")),this.internal.write(K.join(" ")),this.internal.write([W(V),"0","0",W(G),"0","0","cm"].join(" "))):this.internal.write([W(V),"0","0",W(G),W(F),Y(z+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+J.index+" Do"),this.internal.write("Q")},x=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var g=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=n.__addimage__.sHashCode=function(F){var z,V,G=0;if(typeof F=="string")for(V=F.length,z=0;z<V;z++)G=(G<<5)-G+F.charCodeAt(z),G|=0;else if(P(F))for(V=F.byteLength/2,z=0;z<V;z++)G=(G<<5)-G+F[z],G|=0;return G},_=n.__addimage__.validateStringAsBase64=function(F){(F=F||"").toString().trim();var z=!0;return F.length===0&&(z=!1),F.length%4!=0&&(z=!1),/^[A-Za-z0-9+/]+$/.test(F.substr(0,F.length-2))===!1&&(z=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(F.substr(-2))===!1&&(z=!1),z},T=n.__addimage__.extractImageFromDataUrl=function(F){if(F==null||!(F=F.trim()).startsWith("data:"))return null;var z=F.indexOf(",");return z<0?null:F.substring(0,z).trim().endsWith("base64")?F.substring(z+1):null},L=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(F){return L()&&F instanceof ArrayBuffer};var P=n.__addimage__.isArrayBufferView=function(F){return L()&&typeof Uint32Array<"u"&&(F instanceof Int8Array||F instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&F instanceof Uint8ClampedArray||F instanceof Int16Array||F instanceof Uint16Array||F instanceof Int32Array||F instanceof Uint32Array||F instanceof Float32Array||F instanceof Float64Array)},N=n.__addimage__.binaryStringToUint8Array=function(F){for(var z=F.length,V=new Uint8Array(z),G=0;G<z;G++)V[G]=F.charCodeAt(G);return V},k=n.__addimage__.arrayBufferToBinaryString=function(F){for(var z="",V=P(F)?F:new Uint8Array(F),G=0;G<V.length;G+=8192)z+=String.fromCharCode.apply(null,V.subarray(G,G+8192));return z};n.addImage=function(){var F,z,V,G,J,ie,ce,W,Y;if(typeof arguments[1]=="number"?(z=e,V=arguments[1],G=arguments[2],J=arguments[3],ie=arguments[4],ce=arguments[5],W=arguments[6],Y=arguments[7]):(z=arguments[1],V=arguments[2],G=arguments[3],J=arguments[4],ie=arguments[5],ce=arguments[6],W=arguments[7],Y=arguments[8]),Tr(F=arguments[0])==="object"&&!h(F)&&"imageData"in F){var $=F;F=$.imageData,z=$.format||z||e,V=$.x||V||0,G=$.y||G||0,J=$.w||$.width||J,ie=$.h||$.height||ie,ce=$.alias||ce,W=$.compression||W,Y=$.rotation||$.angle||Y}var oe=this.internal.getFilters();if(W===void 0&&oe.indexOf("FlateEncode")!==-1&&(W="SLOW"),isNaN(V)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var D=R.call(this,F,z,ce,W);return w.call(this,V,G,J,ie,D,Y),this};var R=function(F,z,V,G){var J,ie,ce;if(typeof F=="string"&&r(F)===e){F=unescape(F);var W=U(F,!1);(W!==""||(W=n.loadFile(F,!0))!==void 0)&&(F=W)}if(h(F)&&(F=d(F,z)),z=r(F,z),!c(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(((ce=V)==null||ce.length===0)&&(V=function(Y){return typeof Y=="string"||P(Y)?S(Y):P(Y.data)?S(Y.data):null}(F)),(J=m.call(this,V))||(L()&&(F instanceof Uint8Array||z==="RGBA"||(ie=F,F=N(F))),J=this["process"+z.toUpperCase()](F,u.call(this),V,function(Y){return Y&&typeof Y=="string"&&(Y=Y.toUpperCase()),Y in n.image_compression?Y:g.NONE}(G),ie)),!J)throw new Error("An unknown error occurred whilst processing the image.");return J},U=n.__addimage__.convertBase64ToBinaryString=function(F,z){z=typeof z!="boolean"||z;var V,G="";if(typeof F=="string"){var J;V=(J=T(F))!==null&&J!==void 0?J:F;try{G=U0(V)}catch(ie){if(z)throw _(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ie.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return G};n.getImageProperties=function(F){var z,V,G="";if(h(F)&&(F=d(F)),typeof F=="string"&&r(F)===e&&((G=U(F,!1))===""&&(G=n.loadFile(F)||""),F=G),V=r(F),!c(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(!L()||F instanceof Uint8Array||(F=N(F)),!(z=this["process"+V.toUpperCase()](F)))throw new Error("An unknown error occurred whilst processing the image");return z.fileType=V,z}})(yn.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};yn.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,c=!1,h=0;h<u.length&&!c;h++)switch((r=u[h]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var d=0;d<u.length;d++){r=u[d];var m=this.internal.pdfEscape,v=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(w.objId),S=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+m(g(r.contents))+")",s+=" /Popup "+x.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+m(g(S))+") >>",w.content=s;var _=w.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+_,r.open&&(s+=" /Open true"),s+=" >>",x.content=s,this.internal.write(w.objId,"0 R",x.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var T=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(v(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+T+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var L=this.annotations._nameMap[r.options.name];r.options.pageNumber=L.page,r.options.top=L.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(v(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var P=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+P+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(t),y:u(r),w:l(t+i),h:u(r+s)},options:o,type:"link"})},n.textWithLink=function(t,r,i,s){var o,a,l=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var c=this.splitTextToSize(t,a).length;o=Math.ceil(u*c)}else a=l,o=u;return this.text(t,r,i,s),i+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-u,a,o,s),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(yn.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var s=n.__arabicParser__.isInArabicSubstitutionA=function(w){return e[w.charCodeAt(0)]!==void 0},o=n.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},a=n.__arabicParser__.isArabicEndLetter=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(w){return o(w)&&i.indexOf(w.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length>=3};var c=n.__arabicParser__.arabicLetterHasMedialForm=function(w){return o(w)&&s(w)&&e[w.charCodeAt(0)].length==4},h=n.__arabicParser__.resolveLigatures=function(w){var x=0,g=t,S="",_=0;for(x=0;x<w.length;x+=1)g[w.charCodeAt(x)]!==void 0?(_++,typeof(g=g[w.charCodeAt(x)])=="number"&&(S+=String.fromCharCode(g),g=t,_=0),x===w.length-1&&(g=t,S+=w.charAt(x-(_-1)),x-=_-1,_=0)):(g=t,S+=w.charAt(x-_),x-=_,_=0);return S};n.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&r[w.charCodeAt(0)]!==void 0};var d=n.__arabicParser__.getCorrectForm=function(w,x,g){return o(w)?s(w)===!1?-1:!u(w)||!o(x)&&!o(g)||!o(g)&&a(x)||a(w)&&!o(x)||a(w)&&l(x)||a(w)&&a(x)?0:c(w)&&o(x)&&!a(x)&&o(g)&&u(g)?3:a(w)||!o(g)?1:2:-1},m=function(w){var x=0,g=0,S=0,_="",T="",L="",P=(w=w||"").split("\\s+"),N=[];for(x=0;x<P.length;x+=1){for(N.push(""),g=0;g<P[x].length;g+=1)_=P[x][g],T=P[x][g-1],L=P[x][g+1],o(_)?(S=d(_,T,L),N[x]+=S!==-1?String.fromCharCode(e[_.charCodeAt(0)][S]):_):N[x]+=_;N[x]=h(N[x])}return N.join(" ")},v=n.__arabicParser__.processArabic=n.processArabic=function(){var w,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,g=[];if(Array.isArray(x)){var S=0;for(g=[],S=0;S<x.length;S+=1)Array.isArray(x[S])?g.push([m(x[S][0]),x[S][1],x[S][2]]):g.push([m(x[S])]);w=g}else w=m(x);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};n.events.push(["preProcessText",v])}(yn.API),yn.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(yn.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(w){l=w}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(w){c=w}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var d=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(w){v=w}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,u){r.call(this);var c=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),d=u.scaleFactor||this.internal.scaleFactor,m=0,v=0,w=0,x=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var g=u.maxWidth;g>0?typeof l=="string"?l=this.splitTextToSize(l,g):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(_,T){return _.concat(x.splitTextToSize(T,g))},[])):l=Array.isArray(l)?l:[l];for(var S=0;S<l.length;S++)m<(w=this.getStringUnitWidth(l[S],{font:h})*c)&&(m=w);return m!==0&&(v=l.length),{w:m/=d,h:Math.max((v*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/d,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=n.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,d=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,m&&d&&(this.printHeaderRow(l.lineNumber,!0),l.y+=d[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-c,l.y+c,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+c,{align:"center",baseline:"top",maxWidth:l.width-c-c}):this.text(l.text,l.x+c,l.y+c,{align:"left",baseline:"top",maxWidth:l.width-c-c})),this.internal.__cell__.lastCell=l,this};n.table=function(l,u,c,h,d){if(r.call(this),!c)throw new Error("No data for PDF table.");var m,v,w,x,g=[],S=[],_=[],T={},L={},P=[],N=[],k=(d=d||{}).autoSize||!1,R=d.printHeaders!==!1,U=d.css&&d.css["font-size"]!==void 0?16*d.css["font-size"]:d.fontSize||12,F=d.margins||Object.assign({width:this.getPageWidth()},e),z=typeof d.padding=="number"?d.padding:3,V=d.headerBackgroundColor||"#c8c8c8",G=d.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=R,this.internal.__cell__.margins=F,this.internal.__cell__.table_font_size=U,this.internal.__cell__.padding=z,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=G,this.setFontSize(U),h==null)S=g=Object.keys(c[0]),_=g.map(function(){return"left"});else if(Array.isArray(h)&&Tr(h[0])==="object")for(g=h.map(function($){return $.name}),S=h.map(function($){return $.prompt||$.name||""}),_=h.map(function($){return $.align||"left"}),m=0;m<h.length;m+=1)L[h[m].name]=h[m].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(S=g=h,_=g.map(function(){return"left"}));if(k||Array.isArray(h)&&typeof h[0]=="string")for(m=0;m<g.length;m+=1){for(T[x=g[m]]=c.map(function($){return $[x]}),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(S[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=T[x],this.setFont(void 0,"normal"),w=0;w<v.length;w+=1)P.push(this.getTextDimensions(v[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);L[x]=Math.max.apply(null,P)+z+z,P=[]}if(R){var J={};for(m=0;m<g.length;m+=1)J[g[m]]={},J[g[m]].text=S[m],J[g[m]].align=_[m];var ie=a.call(this,J,L);N=g.map(function($){return new s(l,u,L[$],ie,J[$].text,void 0,J[$].align)}),this.setTableHeaderRow(N),this.printHeaderRow(1,!1)}var ce=h.reduce(function($,oe){return $[oe.name]=oe.align,$},{});for(m=0;m<c.length;m+=1){"rowStart"in d&&d.rowStart instanceof Function&&d.rowStart({row:m,data:c[m]},this);var W=a.call(this,c[m],L);for(w=0;w<g.length;w+=1){var Y=c[m][g[w]];"cellStart"in d&&d.cellStart instanceof Function&&d.cellStart({row:m,col:w,data:Y},this),o.call(this,new s(l,u,L[g[w]],W,Y,m+2,ce[g[w]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var c=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,d=this.internal.scaleFactor;return Object.keys(l).map(function(m){var v=l[m];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,u[m]-c-c)},this).map(function(m){return this.getLineHeightFactor()*m.length*h/d+c+c},this).reduce(function(m,v){return Math.max(m,v)},0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var d=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){c=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(c.y=this.internal.__cell__.margins.top||0,d.push(c)),c.lineNumber=l;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,c),this.setTextColor(v)}d.length>0&&this.setTableHeaderRow(d),this.setFont(void 0,"normal"),t=!1}}(yn.API);var Gk={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Vk=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],S5=Hk(Vk),Wk=[100,200,300,400,500,600,700,800,900],YG=Hk(Wk);function _5(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(s){return Gk[s=s||"normal"]?s:"normal"}(n.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(s){return typeof S5[s=s||"normal"]=="number"?s:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function hT(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var $G={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},fT={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function dT(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function ZG(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},$G,t.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=_5(e[a])).family]&&(s.family=i[s.family]),n.hasOwnProperty(s.family)){o=n[s.family];break}if(!(o=o||n[r]))throw new Error("Could not find a font-family for the rule '"+dT(s)+"' and default family '"+r+"'.");if(o=function(l,u){if(u[l])return u[l];var c=S5[l],h=c<=S5.normal?-1:1,d=hT(u,Vk,c,h);if(!d)throw new Error("Could not find a matching font-stretch value for "+l);return d}(s.stretch,o),o=function(l,u){if(u[l])return u[l];for(var c=Gk[l],h=0;h<c.length;++h)if(u[c[h]])return u[c[h]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var c=YG[l],h=hT(u,Wk,c,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+dT(s)+"'.");return o}function pT(n){return n.trimLeft()}function KG(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function JG(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var Fv,mT,gT,nS=["times"];(function(n){var e,t,r,i,s,o,a,l,u,c=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new l,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new o,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new o,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new c}]);var h=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var j=D;Object.defineProperty(this,"pdf",{get:function(){return j}});var K=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return K},set:function(_e){K=Boolean(_e)}});var ae=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ae},set:function(_e){ae=Boolean(_e)}});var fe=0;Object.defineProperty(this,"posX",{get:function(){return fe},set:function(_e){isNaN(_e)||(fe=_e)}});var we=0;Object.defineProperty(this,"posY",{get:function(){return we},set:function(_e){isNaN(_e)||(we=_e)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(_e){var ne;typeof _e=="number"?ne=[_e,_e,_e,_e]:((ne=new Array(4))[0]=_e[0],ne[1]=_e.length>=2?_e[1]:ne[0],ne[2]=_e.length>=3?_e[2]:ne[0],ne[3]=_e.length>=4?_e[3]:ne[1]),u.margin=ne}});var Ee=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ee},set:function(_e){Ee=_e}});var Ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ce},set:function(_e){Ce=_e}});var Ye=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ye},set:function(_e){Ye=_e}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(_e){_e instanceof c&&(u=_e)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(_e){u.path=_e}});var Ne=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ne},set:function(_e){Ne=_e}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(_e){var ne;ne=d(_e),this.ctx.fillStyle=ne.style,this.ctx.isFillTransparent=ne.a===0,this.ctx.fillOpacity=ne.a,this.pdf.setFillColor(ne.r,ne.g,ne.b,{a:ne.a}),this.pdf.setTextColor(ne.r,ne.g,ne.b,{a:ne.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(_e){var ne=d(_e);this.ctx.strokeStyle=ne.style,this.ctx.isStrokeTransparent=ne.a===0,this.ctx.strokeOpacity=ne.a,ne.a===0?this.pdf.setDrawColor(255,255,255):(ne.a,this.pdf.setDrawColor(ne.r,ne.g,ne.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(_e){["butt","round","square"].indexOf(_e)!==-1&&(this.ctx.lineCap=_e,this.pdf.setLineCap(_e))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(_e){isNaN(_e)||(this.ctx.lineWidth=_e,this.pdf.setLineWidth(_e))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(_e){["bevel","round","miter"].indexOf(_e)!==-1&&(this.ctx.lineJoin=_e,this.pdf.setLineJoin(_e))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(_e){isNaN(_e)||(this.ctx.miterLimit=_e,this.pdf.setMiterLimit(_e))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(_e){this.ctx.textBaseline=_e}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(_e){["right","end","center","left","start"].indexOf(_e)!==-1&&(this.ctx.textAlign=_e)}});var he=null;function Oe(_e,ne){if(he===null){var ut=function($e){var Be=[];return Object.keys($e).forEach(function(Qe){$e[Qe].forEach(function(dt){var mt=null;switch(dt){case"bold":mt={family:Qe,weight:"bold"};break;case"italic":mt={family:Qe,style:"italic"};break;case"bolditalic":mt={family:Qe,weight:"bold",style:"italic"};break;case"":case"normal":mt={family:Qe}}mt!==null&&(mt.ref={name:Qe,style:dt},Be.push(mt))})}),Be}(_e.getFontList());he=function($e){for(var Be={},Qe=0;Qe<$e.length;++Qe){var dt=_5($e[Qe]),mt=dt.family,ue=dt.stretch,Q=dt.style,Re=dt.weight;Be[mt]=Be[mt]||{},Be[mt][ue]=Be[mt][ue]||{},Be[mt][ue][Q]=Be[mt][ue][Q]||{},Be[mt][ue][Q][Re]=dt}return Be}(ut.concat(ne))}return he}var Ae=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ae},set:function(_e){he=null,Ae=_e}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(_e){var ne;if(this.ctx.font=_e,(ne=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(_e))!==null){var ut=ne[1];ne[2];var $e=ne[3],Be=ne[4];ne[5];var Qe=ne[6],dt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Be)[2];Be=Math.floor(dt==="px"?parseFloat(Be)*this.pdf.internal.scaleFactor:dt==="em"?parseFloat(Be)*this.pdf.getFontSize():parseFloat(Be)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Be);var mt=function(vt){var ot,Le,Ut=[],Tt=vt.trim();if(Tt==="")return nS;if(Tt in fT)return[fT[Tt]];for(;Tt!=="";){switch(Le=null,ot=(Tt=pT(Tt)).charAt(0)){case'"':case"'":Le=KG(Tt.substring(1),ot);break;default:Le=JG(Tt)}if(Le===null||(Ut.push(Le[0]),(Tt=pT(Le[1]))!==""&&Tt.charAt(0)!==","))return nS;Tt=Tt.replace(/^,/,"")}return Ut}(Qe);if(this.fontFaces){var ue=ZG(Oe(this.pdf,this.fontFaces),mt.map(function(vt){return{family:vt,stretch:"normal",weight:$e,style:ut}}));this.pdf.setFont(ue.ref.name,ue.ref.style)}else{var Q="";($e==="bold"||parseInt($e,10)>=700||ut==="bold")&&(Q="bold"),ut==="italic"&&(Q+="italic"),Q.length===0&&(Q="normal");for(var Re="",Je={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Ze=0;Ze<mt.length;Ze++){if(this.pdf.internal.getFont(mt[Ze],Q,{noFallback:!0,disableWarning:!0})!==void 0){Re=mt[Ze];break}if(Q==="bolditalic"&&this.pdf.internal.getFont(mt[Ze],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Re=mt[Ze],Q="bold";else if(this.pdf.internal.getFont(mt[Ze],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Re=mt[Ze],Q="normal";break}}if(Re===""){for(var ct=0;ct<mt.length;ct++)if(Je[mt[ct]]){Re=Je[mt[ct]];break}}Re=Re===""?"Times":Re,this.pdf.setFont(Re,Q)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(_e){this.ctx.globalCompositeOperation=_e}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(_e){this.ctx.globalAlpha=_e}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(_e){this.ctx.lineDashOffset=_e,oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(_e){this.ctx.lineDash=_e,oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(_e){this.ctx.ignoreClearRect=Boolean(_e)}})};h.prototype.setLineDash=function(D){this.lineDash=D},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){T.call(this,"fill",!1)},h.prototype.stroke=function(){T.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(D,j){if(isNaN(D)||isNaN(j))throw kr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var K=this.ctx.transform.applyToPoint(new o(D,j));this.path.push({type:"mt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(D,j)},h.prototype.closePath=function(){var D=new o(0,0),j=0;for(j=this.path.length-1;j!==-1;j--)if(this.path[j].type==="begin"&&Tr(this.path[j+1])==="object"&&typeof this.path[j+1].x=="number"){D=new o(this.path[j+1].x,this.path[j+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(D.x,D.y)},h.prototype.lineTo=function(D,j){if(isNaN(D)||isNaN(j))throw kr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var K=this.ctx.transform.applyToPoint(new o(D,j));this.path.push({type:"lt",x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),T.call(this,null,!0)},h.prototype.quadraticCurveTo=function(D,j,K,ae){if(isNaN(K)||isNaN(ae)||isNaN(D)||isNaN(j))throw kr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var fe=this.ctx.transform.applyToPoint(new o(K,ae)),we=this.ctx.transform.applyToPoint(new o(D,j));this.path.push({type:"qct",x1:we.x,y1:we.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new o(fe.x,fe.y)},h.prototype.bezierCurveTo=function(D,j,K,ae,fe,we){if(isNaN(fe)||isNaN(we)||isNaN(D)||isNaN(j)||isNaN(K)||isNaN(ae))throw kr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ee=this.ctx.transform.applyToPoint(new o(fe,we)),Ce=this.ctx.transform.applyToPoint(new o(D,j)),Ye=this.ctx.transform.applyToPoint(new o(K,ae));this.path.push({type:"bct",x1:Ce.x,y1:Ce.y,x2:Ye.x,y2:Ye.y,x:Ee.x,y:Ee.y}),this.ctx.lastPoint=new o(Ee.x,Ee.y)},h.prototype.arc=function(D,j,K,ae,fe,we){if(isNaN(D)||isNaN(j)||isNaN(K)||isNaN(ae)||isNaN(fe))throw kr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(we=Boolean(we),!this.ctx.transform.isIdentity){var Ee=this.ctx.transform.applyToPoint(new o(D,j));D=Ee.x,j=Ee.y;var Ce=this.ctx.transform.applyToPoint(new o(0,K)),Ye=this.ctx.transform.applyToPoint(new o(0,0));K=Math.sqrt(Math.pow(Ce.x-Ye.x,2)+Math.pow(Ce.y-Ye.y,2))}Math.abs(fe-ae)>=2*Math.PI&&(ae=0,fe=2*Math.PI),this.path.push({type:"arc",x:D,y:j,radius:K,startAngle:ae,endAngle:fe,counterclockwise:we})},h.prototype.arcTo=function(D,j,K,ae,fe){throw new Error("arcTo not implemented.")},h.prototype.rect=function(D,j,K,ae){if(isNaN(D)||isNaN(j)||isNaN(K)||isNaN(ae))throw kr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,j),this.lineTo(D+K,j),this.lineTo(D+K,j+ae),this.lineTo(D,j+ae),this.lineTo(D,j),this.lineTo(D+K,j),this.lineTo(D,j)},h.prototype.fillRect=function(D,j,K,ae){if(isNaN(D)||isNaN(j)||isNaN(K)||isNaN(ae))throw kr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var fe={};this.lineCap!=="butt"&&(fe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(fe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,j,K,ae),this.fill(),fe.hasOwnProperty("lineCap")&&(this.lineCap=fe.lineCap),fe.hasOwnProperty("lineJoin")&&(this.lineJoin=fe.lineJoin)}},h.prototype.strokeRect=function(D,j,K,ae){if(isNaN(D)||isNaN(j)||isNaN(K)||isNaN(ae))throw kr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(D,j,K,ae),this.stroke())},h.prototype.clearRect=function(D,j,K,ae){if(isNaN(D)||isNaN(j)||isNaN(K)||isNaN(ae))throw kr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,j,K,ae))},h.prototype.save=function(D){D=typeof D!="boolean"||D;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("q");if(this.pdf.setPage(j),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var ae=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ae}},h.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,K=0;K<this.pdf.internal.getNumberOfPages();K++)this.pdf.setPage(K+1),this.pdf.internal.out("Q");this.pdf.setPage(j),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var d=function(D){var j,K,ae,fe;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))j=0,K=0,ae=0,fe=0;else{var we=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(we!==null)j=parseInt(we[1]),K=parseInt(we[2]),ae=parseInt(we[3]),fe=1;else if((we=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)j=parseInt(we[1]),K=parseInt(we[2]),ae=parseInt(we[3]),fe=parseFloat(we[4]);else{if(fe=1,typeof D=="string"&&D.charAt(0)!=="#"){var Ee=new Dk(D);D=Ee.ok?Ee.toHex():"#000000"}D.length===4?(j=D.substring(1,2),j+=j,K=D.substring(2,3),K+=K,ae=D.substring(3,4),ae+=ae):(j=D.substring(1,3),K=D.substring(3,5),ae=D.substring(5,7)),j=parseInt(j,16),K=parseInt(K,16),ae=parseInt(ae,16)}}return{r:j,g:K,b:ae,a:fe,style:D}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(D,j,K,ae){if(isNaN(j)||isNaN(K)||typeof D!="string")throw kr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ae=isNaN(ae)?void 0:ae,!m.call(this)){var fe=W(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;z.call(this,{text:D,x:j,y:K,scale:we,angle:fe,align:this.textAlign,maxWidth:ae})}},h.prototype.strokeText=function(D,j,K,ae){if(isNaN(j)||isNaN(K)||typeof D!="string")throw kr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){ae=isNaN(ae)?void 0:ae;var fe=W(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;z.call(this,{text:D,x:j,y:K,scale:we,renderingMode:"stroke",angle:fe,align:this.textAlign,maxWidth:ae})}},h.prototype.measureText=function(D){if(typeof D!="string")throw kr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var j=this.pdf,K=this.pdf.internal.scaleFactor,ae=j.internal.getFontSize(),fe=j.getStringUnitWidth(D)*ae/j.internal.scaleFactor,we=function(Ee){var Ce=(Ee=Ee||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ce}}),this};return new we({width:fe*=Math.round(96*K/72*1e4)/1e4})},h.prototype.scale=function(D,j){if(isNaN(D)||isNaN(j))throw kr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var K=new l(D,0,0,j,0,0);this.ctx.transform=this.ctx.transform.multiply(K)},h.prototype.rotate=function(D){if(isNaN(D))throw kr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var j=new l(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(j)},h.prototype.translate=function(D,j){if(isNaN(D)||isNaN(j))throw kr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var K=new l(1,0,0,1,D,j);this.ctx.transform=this.ctx.transform.multiply(K)},h.prototype.transform=function(D,j,K,ae,fe,we){if(isNaN(D)||isNaN(j)||isNaN(K)||isNaN(ae)||isNaN(fe)||isNaN(we))throw kr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ee=new l(D,j,K,ae,fe,we);this.ctx.transform=this.ctx.transform.multiply(Ee)},h.prototype.setTransform=function(D,j,K,ae,fe,we){D=isNaN(D)?1:D,j=isNaN(j)?0:j,K=isNaN(K)?0:K,ae=isNaN(ae)?1:ae,fe=isNaN(fe)?0:fe,we=isNaN(we)?0:we,this.ctx.transform=new l(D,j,K,ae,fe,we)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(D,j,K,ae,fe,we,Ee,Ce,Ye){var Ne=this.pdf.getImageProperties(D),he=1,Oe=1,Ae=1,_e=1;ae!==void 0&&Ce!==void 0&&(Ae=Ce/ae,_e=Ye/fe,he=Ne.width/ae*Ce/ae,Oe=Ne.height/fe*Ye/fe),we===void 0&&(we=j,Ee=K,j=0,K=0),ae!==void 0&&Ce===void 0&&(Ce=ae,Ye=fe),ae===void 0&&Ce===void 0&&(Ce=Ne.width,Ye=Ne.height);for(var ne,ut=this.ctx.transform.decompose(),$e=W(ut.rotate.shx),Be=new l,Qe=(Be=(Be=(Be=Be.multiply(ut.translate)).multiply(ut.skew)).multiply(ut.scale)).applyToRectangle(new a(we-j*Ae,Ee-K*_e,ae*he,fe*Oe)),dt=x.call(this,Qe),mt=[],ue=0;ue<dt.length;ue+=1)mt.indexOf(dt[ue])===-1&&mt.push(dt[ue]);if(_(mt),this.autoPaging)for(var Q=mt[0],Re=mt[mt.length-1],Je=Q;Je<Re+1;Je++){this.pdf.setPage(Je);var Ze=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ct=Je===1?this.posY+this.margin[0]:this.margin[0],vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Le=Je===1?0:vt+(Je-2)*ot;if(this.ctx.clip_path.length!==0){var Ut=this.path;ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(ne,this.posX+this.margin[3],-Le+ct+this.ctx.prevPageLastElemOffset),L.call(this,"fill",!0),this.path=Ut}var Tt=JSON.parse(JSON.stringify(Qe));Tt=S([Tt],this.posX+this.margin[3],-Le+ct+this.ctx.prevPageLastElemOffset)[0];var Nt=(Je>Q||Je<Re)&&w.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,ot,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",Tt.x,Tt.y,Tt.w,Tt.h,null,null,$e),Nt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",Qe.x,Qe.y,Qe.w,Qe.h,null,null,$e)};var x=function(D,j,K){var ae=[];j=j||this.pdf.internal.pageSize.width,K=K||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var fe=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":ae.push(Math.floor((D.y+fe)/K)+1);break;case"arc":ae.push(Math.floor((D.y+fe-D.radius)/K)+1),ae.push(Math.floor((D.y+fe+D.radius)/K)+1);break;case"qct":var we=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);ae.push(Math.floor((we.y+fe)/K)+1),ae.push(Math.floor((we.y+we.h+fe)/K)+1);break;case"bct":var Ee=$(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);ae.push(Math.floor((Ee.y+fe)/K)+1),ae.push(Math.floor((Ee.y+Ee.h+fe)/K)+1);break;case"rect":ae.push(Math.floor((D.y+fe)/K)+1),ae.push(Math.floor((D.y+D.h+fe)/K)+1)}for(var Ce=0;Ce<ae.length;Ce+=1)for(;this.pdf.internal.getNumberOfPages()<ae[Ce];)g.call(this);return ae},g=function(){var D=this.fillStyle,j=this.strokeStyle,K=this.font,ae=this.lineCap,fe=this.lineWidth,we=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=j,this.font=K,this.lineCap=ae,this.lineWidth=fe,this.lineJoin=we},S=function(D,j,K){for(var ae=0;ae<D.length;ae++)switch(D[ae].type){case"bct":D[ae].x2+=j,D[ae].y2+=K;case"qct":D[ae].x1+=j,D[ae].y1+=K;case"mt":case"lt":case"arc":default:D[ae].x+=j,D[ae].y+=K}return D},_=function(D){return D.sort(function(j,K){return j-K})},T=function(D,j){for(var K,ae,fe=this.fillStyle,we=this.strokeStyle,Ee=this.lineCap,Ce=this.lineWidth,Ye=Math.abs(Ce*this.ctx.transform.scaleX),Ne=this.lineJoin,he=JSON.parse(JSON.stringify(this.path)),Oe=JSON.parse(JSON.stringify(this.path)),Ae=[],_e=0;_e<Oe.length;_e++)if(Oe[_e].x!==void 0)for(var ne=x.call(this,Oe[_e]),ut=0;ut<ne.length;ut+=1)Ae.indexOf(ne[ut])===-1&&Ae.push(ne[ut]);for(var $e=0;$e<Ae.length;$e++)for(;this.pdf.internal.getNumberOfPages()<Ae[$e];)g.call(this);if(_(Ae),this.autoPaging)for(var Be=Ae[0],Qe=Ae[Ae.length-1],dt=Be;dt<Qe+1;dt++){this.pdf.setPage(dt),this.fillStyle=fe,this.strokeStyle=we,this.lineCap=Ee,this.lineWidth=Ye,this.lineJoin=Ne;var mt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ue=dt===1?this.posY+this.margin[0]:this.margin[0],Q=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Re=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Je=dt===1?0:Q+(dt-2)*Re;if(this.ctx.clip_path.length!==0){var Ze=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(K,this.posX+this.margin[3],-Je+ue+this.ctx.prevPageLastElemOffset),L.call(this,D,!0),this.path=Ze}if(ae=JSON.parse(JSON.stringify(he)),this.path=S(ae,this.posX+this.margin[3],-Je+ue+this.ctx.prevPageLastElemOffset),j===!1||dt===0){var ct=(dt>Be||dt<Qe)&&w.call(this);ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,Re,null).clip().discardPath()),L.call(this,D,j),ct&&this.pdf.restoreGraphicsState()}this.lineWidth=Ce}else this.lineWidth=Ye,L.call(this,D,j),this.lineWidth=Ce;this.path=he},L=function(D,j){if((D!=="stroke"||j||!v.call(this))&&(D==="stroke"||j||!m.call(this))){for(var K,ae,fe=[],we=this.path,Ee=0;Ee<we.length;Ee++){var Ce=we[Ee];switch(Ce.type){case"begin":fe.push({begin:!0});break;case"close":fe.push({close:!0});break;case"mt":fe.push({start:Ce,deltas:[],abs:[]});break;case"lt":var Ye=fe.length;if(we[Ee-1]&&!isNaN(we[Ee-1].x)&&(K=[Ce.x-we[Ee-1].x,Ce.y-we[Ee-1].y],Ye>0)){for(;Ye>=0;Ye--)if(fe[Ye-1].close!==!0&&fe[Ye-1].begin!==!0){fe[Ye-1].deltas.push(K),fe[Ye-1].abs.push(Ce);break}}break;case"bct":K=[Ce.x1-we[Ee-1].x,Ce.y1-we[Ee-1].y,Ce.x2-we[Ee-1].x,Ce.y2-we[Ee-1].y,Ce.x-we[Ee-1].x,Ce.y-we[Ee-1].y],fe[fe.length-1].deltas.push(K);break;case"qct":var Ne=we[Ee-1].x+2/3*(Ce.x1-we[Ee-1].x),he=we[Ee-1].y+2/3*(Ce.y1-we[Ee-1].y),Oe=Ce.x+2/3*(Ce.x1-Ce.x),Ae=Ce.y+2/3*(Ce.y1-Ce.y),_e=Ce.x,ne=Ce.y;K=[Ne-we[Ee-1].x,he-we[Ee-1].y,Oe-we[Ee-1].x,Ae-we[Ee-1].y,_e-we[Ee-1].x,ne-we[Ee-1].y],fe[fe.length-1].deltas.push(K);break;case"arc":fe.push({deltas:[],abs:[],arc:!0}),Array.isArray(fe[fe.length-1].abs)&&fe[fe.length-1].abs.push(Ce)}}ae=j?null:D==="stroke"?"stroke":"fill";for(var ut=!1,$e=0;$e<fe.length;$e++)if(fe[$e].arc)for(var Be=fe[$e].abs,Qe=0;Qe<Be.length;Qe++){var dt=Be[Qe];dt.type==="arc"?k.call(this,dt.x,dt.y,dt.radius,dt.startAngle,dt.endAngle,dt.counterclockwise,void 0,j,!ut):V.call(this,dt.x,dt.y),ut=!0}else if(fe[$e].close===!0)this.pdf.internal.out("h"),ut=!1;else if(fe[$e].begin!==!0){var mt=fe[$e].start.x,ue=fe[$e].start.y;G.call(this,fe[$e].deltas,mt,ue),ut=!0}ae&&R.call(this,ae),j&&U.call(this)}},P=function(D){var j=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,K=j*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-K;case"top":return D+j-K;case"hanging":return D+j-2*K;case"middle":return D+j/2-K;case"ideographic":return D;case"alphabetic":default:return D}},N=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(j,K){this.colorStops.push([j,K])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var k=function(D,j,K,ae,fe,we,Ee,Ce,Ye){for(var Ne=ie.call(this,K,ae,fe,we),he=0;he<Ne.length;he++){var Oe=Ne[he];he===0&&(Ye?F.call(this,Oe.x1+D,Oe.y1+j):V.call(this,Oe.x1+D,Oe.y1+j)),J.call(this,D,j,Oe.x2,Oe.y2,Oe.x3,Oe.y3,Oe.x4,Oe.y4)}Ce?U.call(this):R.call(this,Ee)},R=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},U=function(){this.pdf.clip(),this.pdf.discardPath()},F=function(D,j){this.pdf.internal.out(t(D)+" "+r(j)+" m")},z=function(D){var j;switch(D.align){case"right":case"end":j="right";break;case"center":j="center";break;case"left":case"start":default:j="left"}var K=this.pdf.getTextDimensions(D.text),ae=P.call(this,D.y),fe=N.call(this,ae)-K.h,we=this.ctx.transform.applyToPoint(new o(D.x,ae)),Ee=this.ctx.transform.decompose(),Ce=new l;Ce=(Ce=(Ce=Ce.multiply(Ee.translate)).multiply(Ee.skew)).multiply(Ee.scale);for(var Ye,Ne,he,Oe=this.ctx.transform.applyToRectangle(new a(D.x,ae,K.w,K.h)),Ae=Ce.applyToRectangle(new a(D.x,fe,K.w,K.h)),_e=x.call(this,Ae),ne=[],ut=0;ut<_e.length;ut+=1)ne.indexOf(_e[ut])===-1&&ne.push(_e[ut]);if(_(ne),this.autoPaging)for(var $e=ne[0],Be=ne[ne.length-1],Qe=$e;Qe<Be+1;Qe++){this.pdf.setPage(Qe);var dt=Qe===1?this.posY+this.margin[0]:this.margin[0],mt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ue=this.pdf.internal.pageSize.height-this.margin[2],Q=ue-this.margin[0],Re=this.pdf.internal.pageSize.width-this.margin[1],Je=Re-this.margin[3],Ze=Qe===1?0:mt+(Qe-2)*Q;if(this.ctx.clip_path.length!==0){var ct=this.path;Ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Ye,this.posX+this.margin[3],-1*Ze+dt),L.call(this,"fill",!0),this.path=ct}var vt=S([JSON.parse(JSON.stringify(Ae))],this.posX+this.margin[3],-Ze+dt+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(Ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ne*D.scale),he=this.lineWidth,this.lineWidth=he*D.scale);var ot=this.autoPaging!=="text";if(ot||vt.y+vt.h<=ue){if(ot||vt.y>=dt&&vt.x<=Re){var Le=ot?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||Re-vt.x)[0],Ut=S([JSON.parse(JSON.stringify(Oe))],this.posX+this.margin[3],-Ze+dt+this.ctx.prevPageLastElemOffset)[0],Tt=ot&&(Qe>$e||Qe<Be)&&w.call(this);Tt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Je,Q,null).clip().discardPath()),this.pdf.text(Le,Ut.x,Ut.y,{angle:D.angle,align:j,renderingMode:D.renderingMode}),Tt&&this.pdf.restoreGraphicsState()}}else vt.y<ue&&(this.ctx.prevPageLastElemOffset+=ue-vt.y);D.scale>=.01&&(this.pdf.setFontSize(Ne),this.lineWidth=he)}else D.scale>=.01&&(Ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ne*D.scale),he=this.lineWidth,this.lineWidth=he*D.scale),this.pdf.text(D.text,we.x+this.posX,we.y+this.posY,{angle:D.angle,align:j,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(Ne),this.lineWidth=he)},V=function(D,j,K,ae){K=K||0,ae=ae||0,this.pdf.internal.out(t(D+K)+" "+r(j+ae)+" l")},G=function(D,j,K){return this.pdf.lines(D,j,K,null,null)},J=function(D,j,K,ae,fe,we,Ee,Ce){this.pdf.internal.out([e(i(K+D)),e(s(ae+j)),e(i(fe+D)),e(s(we+j)),e(i(Ee+D)),e(s(Ce+j)),"c"].join(" "))},ie=function(D,j,K,ae){for(var fe=2*Math.PI,we=Math.PI/2;j>K;)j-=fe;var Ee=Math.abs(K-j);Ee<fe&&ae&&(Ee=fe-Ee);for(var Ce=[],Ye=ae?-1:1,Ne=j;Ee>1e-5;){var he=Ne+Ye*Math.min(Ee,we);Ce.push(ce.call(this,D,Ne,he)),Ee-=Math.abs(he-Ne),Ne=he}return Ce},ce=function(D,j,K){var ae=(K-j)/2,fe=D*Math.cos(ae),we=D*Math.sin(ae),Ee=fe,Ce=-we,Ye=Ee*Ee+Ce*Ce,Ne=Ye+Ee*fe+Ce*we,he=4/3*(Math.sqrt(2*Ye*Ne)-Ne)/(Ee*we-Ce*fe),Oe=Ee-he*Ce,Ae=Ce+he*Ee,_e=Oe,ne=-Ae,ut=ae+j,$e=Math.cos(ut),Be=Math.sin(ut);return{x1:D*Math.cos(j),y1:D*Math.sin(j),x2:Oe*$e-Ae*Be,y2:Oe*Be+Ae*$e,x3:_e*$e-ne*Be,y3:_e*Be+ne*$e,x4:D*Math.cos(K),y4:D*Math.sin(K)}},W=function(D){return 180*D/Math.PI},Y=function(D,j,K,ae,fe,we){var Ee=D+.5*(K-D),Ce=j+.5*(ae-j),Ye=fe+.5*(K-fe),Ne=we+.5*(ae-we),he=Math.min(D,fe,Ee,Ye),Oe=Math.max(D,fe,Ee,Ye),Ae=Math.min(j,we,Ce,Ne),_e=Math.max(j,we,Ce,Ne);return new a(he,Ae,Oe-he,_e-Ae)},$=function(D,j,K,ae,fe,we,Ee,Ce){var Ye,Ne,he,Oe,Ae,_e,ne,ut,$e,Be,Qe,dt,mt,ue,Q=K-D,Re=ae-j,Je=fe-K,Ze=we-ae,ct=Ee-fe,vt=Ce-we;for(Ne=0;Ne<41;Ne++)$e=(ne=(he=D+(Ye=Ne/40)*Q)+Ye*((Ae=K+Ye*Je)-he))+Ye*(Ae+Ye*(fe+Ye*ct-Ae)-ne),Be=(ut=(Oe=j+Ye*Re)+Ye*((_e=ae+Ye*Ze)-Oe))+Ye*(_e+Ye*(we+Ye*vt-_e)-ut),Ne==0?(Qe=$e,dt=Be,mt=$e,ue=Be):(Qe=Math.min(Qe,$e),dt=Math.min(dt,Be),mt=Math.max(mt,$e),ue=Math.max(ue,Be));return new a(Math.round(Qe),Math.round(dt),Math.round(mt-Qe),Math.round(ue-dt))},oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,j,K=(D=this.ctx.lineDash,j=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:j}));this.prevLineDash!==K&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=K)}}})(yn.API),function(n){var e=function(s){var o,a,l,u,c,h,d,m,v,w;for(a=[],l=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(c=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(h=(c=((c=((c=((c=(c-(w=c%85))/85)-(v=c%85))/85)-(m=c%85))/85)-(d=c%85))/85)%85,a.push(h+33,d+33,m+33,v+33,w+33)):a.push(122);return function(x,g){for(var S=g;S>0;S--)x.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},t=function(s){var o,a,l,u,c,h=String,d="length",m=255,v="charCodeAt",w="slice",x="replace";for(s[w](-2),s=s[w](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),l=[],u=0,c=(s+=o="uuuuu"[w](s[d]%5||5))[d];c>u;u+=5)a=52200625*(s[v](u)-33)+614125*(s[v](u+1)-33)+7225*(s[v](u+2)-33)+85*(s[v](u+3)-33)+(s[v](u+4)-33),l.push(m&a>>24,m&a>>16,m&a>>8,m&a);return function(g,S){for(var _=S;_>0;_--)g.pop()}(l,o[d]),h.fromCharCode.apply(h,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=g5(o)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(s,o){var a=0,l=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(yn.API),function(n){n.loadFile=function(e,t,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,u,c){var h=new XMLHttpRequest,d=0,m=function(v){var w=v.length,x=[],g=String.fromCharCode;for(d=0;d<w;d+=1)x.push(g(255&v.charCodeAt(d)));return x.join("")};if(h.open("GET",l,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?c(m(this.responseText)):c(void 0)}),h.send(null),u&&h.status===200)return m(h.responseText)}(i,s,o)}catch{}return a}(e,t,r)},n.loadImageFile=n.loadFile}(yn.API),function(n){function e(){return(Sn.html2canvas?Promise.resolve(Sn.html2canvas):h5(()=>import("./html2canvas.esm-0a33ed42.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function t(){return(Sn.DOMPurify?Promise.resolve(Sn.DOMPurify):h5(()=>import("./purify.es-7857af48.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Tr(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var u in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[u]=a.style[u];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(u,c){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),d=u.firstChild;d;d=d.nextSibling)c!==!0&&d.nodeType===1&&d.nodeName==="SCRIPT"||h.appendChild(l(d,c));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,u=this.opt.fontFaces,c=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:c,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var d=0;d<u.length;++d){var m=u[d],v=m.src.find(function(w){return w.format==="truetype"});v&&l.addFont(v.url,m.ref.name,m.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),a(this.prop.container,h)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(o=o||yn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,u){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,u){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(u,c){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,u),h}).then(u,c).then(function(h){return l.updateProgress(1),h})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),c=l.call(u,o,a);return s.convert(c,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,yn.getPageSize=function(o,a,l){if(Tr(o)==="object"){var u=o;o=u.orientation,a=u.unit||a,l=u.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var c,h=(""+l).toLowerCase(),d={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":c=1;break;case"mm":c=72/25.4;break;case"cm":c=72/2.54;break;case"in":c=72;break;case"px":c=.75;break;case"pc":case"em":c=12;break;case"ex":c=6;break;default:throw"Invalid unit: "+a}var m,v=0,w=0;if(d.hasOwnProperty(h))v=d[h][1]/c,w=d[h][0]/c;else try{v=l[1],w=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",w>v&&(m=w,w=v,v=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>w&&(m=w,w=v,v=m)}return{width:w,height:v,unit:a,k:c,orientation:o}},n.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(_5):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(yn.API),yn.API.addJS=function(n){return gT=n,this.internal.events.subscribe("postPutResources",function(){Fv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Fv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),mT=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+gT+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Fv!==void 0&&mT!==void 0&&this.internal.out("/Names <</JavaScript "+Fv+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,c=[];for(s=0;s<u;s++){var h=t.internal.newObject();c.push(h);var d=t.internal.getPageInfo(s+1);t.internal.write("<< /D["+d.objId+" 0 R /XYZ null null null]>> endobj")}var m=t.internal.newObject();for(t.internal.write("<< /Names [ "),s=0;s<c.length;s++)t.internal.write("(page_"+(s+1)+")"+c[s]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+m+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(yn.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,s,o,a){var l,u=this.decode.DCT_DECODE,c=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(h){for(var d,m=256*h.charCodeAt(4)+h.charCodeAt(5),v=h.length,w={width:0,height:0,numcomponents:1},x=4;x<v;x+=2){if(x+=m,e.indexOf(h.charCodeAt(x+1))!==-1){d=256*h.charCodeAt(x+5)+h.charCodeAt(x+6),w={width:256*h.charCodeAt(x+7)+h.charCodeAt(x+8),height:d,numcomponents:h.charCodeAt(x+9)};break}m=256*h.charCodeAt(x+2)+h.charCodeAt(x+3)}return w}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:t,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return c}}(yn.API);var ip,Uv,vT,yT,xT,QG=function(){var n,e,t;function r(s){var o,a,l,u,c,h,d,m,v,w,x,g,S,_;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),v=function(){var T,L;for(L=[],T=0;T<4;++T)L.push(String.fromCharCode(this.data[this.pos++]));return L}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},c=this.readUInt16(),u=this.readUInt16()||100,h.delay=1e3*c/u,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,o-=4),s=(h!=null?h.data:void 0)||this.imgData,g=0;0<=o?g<o:g>o;0<=o?++g:--g)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((w=l-this.transparency.indexed.length)>0)for(S=0;0<=w?S<w:S>w;0<=w?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":d=(x=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,x.slice(0,d)),this.text[m]=String.fromCharCode.apply(String,x.slice(d+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function c(h,d,m,v){var w,x,g,S,_,T,L,P,N,k,R,U,F,z,V,G,J,ie,ce,W,Y,$=Math.ceil((u.width-h)/m),oe=Math.ceil((u.height-d)/v),D=u.width==$&&u.height==oe;for(z=o*$,U=D?a:new Uint8Array(z*oe),T=s.length,F=0,x=0;F<oe&&l<T;){switch(s[l++]){case 0:for(S=J=0;J<z;S=J+=1)U[x++]=s[l++];break;case 1:for(S=ie=0;ie<z;S=ie+=1)w=s[l++],_=S<o?0:U[x-o],U[x++]=(w+_)%256;break;case 2:for(S=ce=0;ce<z;S=ce+=1)w=s[l++],g=(S-S%o)/o,V=F&&U[(F-1)*z+g*o+S%o],U[x++]=(V+w)%256;break;case 3:for(S=W=0;W<z;S=W+=1)w=s[l++],g=(S-S%o)/o,_=S<o?0:U[x-o],V=F&&U[(F-1)*z+g*o+S%o],U[x++]=(w+Math.floor((_+V)/2))%256;break;case 4:for(S=Y=0;Y<z;S=Y+=1)w=s[l++],g=(S-S%o)/o,_=S<o?0:U[x-o],F===0?V=G=0:(V=U[(F-1)*z+g*o+S%o],G=g&&U[(F-1)*z+(g-1)*o+S%o]),L=_+V-G,P=Math.abs(L-_),k=Math.abs(L-V),R=Math.abs(L-G),N=P<=k&&P<=R?_:k<=R?V:G,U[x++]=(w+N)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!D){var j=((d+F*v)*u.width+h)*o,K=F*z;for(S=0;S<$;S+=1){for(var ae=0;ae<o;ae+=1)a[j++]=U[K++];j+=(m-1)*o}}F++}}return s=RG(s),u.interlaceMethod==1?(c(0,0,8,8),c(4,0,8,8),c(0,4,4,8),c(2,0,4,4),c(0,2,2,4),c(1,0,2,2),c(0,1,1,2)):c(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,u,c,h,d,m;for(a=this.palette,c=this.transparency.indexed||[],u=new Uint8Array((c.length||0)+a.length),l=0,s=0,o=h=0,d=a.length;h<d;o=h+=3)u[l++]=a[o],u[l++]=a[o+1],u[l++]=a[o+2],u[l++]=(m=c[s++])!=null?m:255;return u},r.prototype.copyToImageData=function(s,o){var a,l,u,c,h,d,m,v,w,x,g;if(l=this.colors,w=null,a=this.hasAlphaChannel,this.palette.length&&(w=(g=this._decodedPalette)!=null?g:this._decodedPalette=this.decodePalette(),l=4,a=!0),v=(u=s.data||s).length,h=w||o,c=d=0,l===1)for(;c<v;)m=w?4*o[c/4]:d,x=h[m++],u[c++]=x,u[c++]=x,u[c++]=x,u[c++]=a?h[m++]:255,d=m;else for(;c<v;)m=w?4*o[c/4]:d,u[c++]=h[m++],u[c++]=h[m++],u[c++]=h[m++],u[c++]=a?h[m++]:255,d=m},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Sn)==="[object Window]"){try{e=Sn.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(s){var o;if(i()===!0)return t.width=s.width,t.height=s.height,t.clearRect(0,0,s.width,s.height),t.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,u,c,h,d,m;if(this.animation){for(m=[],a=c=0,h=(d=this.animation.frames).length;c<h;a=++c)o=d[a],l=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,u),o.imageData=l,m.push(o.image=n(l));return m}},r.prototype.renderFrame=function(s,o){var a,l,u;return a=(l=this.animation.frames)[o],u=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,u,c,h,d=this;return a=0,h=this.animation,u=h.numFrames,l=h.frames,c=h.numPlays,(o=function(){var m,v;if(m=a++%u,v=l[m],d.renderFrame(s,m),u>1&&a/u<c)return d.animation._timeout=setTimeout(o,v.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function eV(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],s=i>>7,o=1<<(7&i)+1;n[e++],n[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var u=!0,c=[],h=0,d=null,m=0,v=null;for(this.width=t,this.height=r;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,v=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((F=n[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var w=n[e++];h=n[e++]|n[e++]<<8,d=n[e++],!(1&w)&&(d=null),m=w>>2&7,e++;break;case 254:for(;;){if(!((F=n[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var x=n[e++]|n[e++]<<8,g=n[e++]|n[e++]<<8,S=n[e++]|n[e++]<<8,_=n[e++]|n[e++]<<8,T=n[e++],L=T>>6&1,P=1<<(7&T)+1,N=a,k=l,R=!1;T>>7&&(R=!0,N=e,k=P,e+=3*P);var U=e;for(e++;;){var F;if(!((F=n[e++])>=0))throw Error("Invalid block size");if(F===0)break;e+=F}c.push({x,y:g,width:S,height:_,has_local_palette:R,palette_offset:N,palette_size:k,data_offset:U,data_length:e-U,transparent_index:d,interlaced:!!L,delay:h,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return v},this.frameInfo=function(z){if(z<0||z>=c.length)throw new Error("Frame index out of range.");return c[z]},this.decodeAndBlitFrameBGRA=function(z,V){var G=this.frameInfo(z),J=G.width*G.height,ie=new Uint8Array(J);wT(n,G.data_offset,ie,J);var ce=G.palette_offset,W=G.transparent_index;W===null&&(W=256);var Y=G.width,$=t-Y,oe=Y,D=4*(G.y*t+G.x),j=4*((G.y+G.height)*t+G.x),K=D,ae=4*$;G.interlaced===!0&&(ae+=4*t*7);for(var fe=8,we=0,Ee=ie.length;we<Ee;++we){var Ce=ie[we];if(oe===0&&(oe=Y,(K+=ae)>=j&&(ae=4*$+4*t*(fe-1),K=D+(Y+$)*(fe<<1),fe>>=1)),Ce===W)K+=4;else{var Ye=n[ce+3*Ce],Ne=n[ce+3*Ce+1],he=n[ce+3*Ce+2];V[K++]=he,V[K++]=Ne,V[K++]=Ye,V[K++]=255}--oe}},this.decodeAndBlitFrameRGBA=function(z,V){var G=this.frameInfo(z),J=G.width*G.height,ie=new Uint8Array(J);wT(n,G.data_offset,ie,J);var ce=G.palette_offset,W=G.transparent_index;W===null&&(W=256);var Y=G.width,$=t-Y,oe=Y,D=4*(G.y*t+G.x),j=4*((G.y+G.height)*t+G.x),K=D,ae=4*$;G.interlaced===!0&&(ae+=4*t*7);for(var fe=8,we=0,Ee=ie.length;we<Ee;++we){var Ce=ie[we];if(oe===0&&(oe=Y,(K+=ae)>=j&&(ae=4*$+4*t*(fe-1),K=D+(Y+$)*(fe<<1),fe>>=1)),Ce===W)K+=4;else{var Ye=n[ce+3*Ce],Ne=n[ce+3*Ce+1],he=n[ce+3*Ce+2];V[K++]=Ye,V[K++]=Ne,V[K++]=he,V[K++]=255}--oe}}}function wT(n,e,t,r){for(var i=n[e++],s=1<<i,o=s+1,a=o+1,l=i+1,u=(1<<l)-1,c=0,h=0,d=0,m=n[e++],v=new Int32Array(4096),w=null;;){for(;c<16&&m!==0;)h|=n[e++]<<c,c+=8,m===1?m=n[e++]:--m;if(c<l)break;var x=h&u;if(h>>=l,c-=l,x!==s){if(x===o)break;for(var g=x<a?x:w,S=0,_=g;_>s;)_=v[_]>>8,++S;var T=_;if(d+S+(g!==x?1:0)>r)return void kr.log("Warning, gif stream longer than expected.");t[d++]=T;var L=d+=S;for(g!==x&&(t[d++]=T),_=g;S--;)_=v[_],t[--L]=255&_,_>>=8;w!==null&&a<4096&&(v[a++]=w<<8|T,a>=u+1&&l<12&&(++l,u=u<<1|1)),w=x}else a=o+1,u=(1<<(l=i+1))-1,w=null}return d!==r&&kr.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function rS(n){var e,t,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),h=new Array(65535),d=new Array(65535),m=new Array(64),v=new Array(64),w=[],x=0,g=7,S=new Array(64),_=new Array(64),T=new Array(64),L=new Array(256),P=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],k=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],U=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],F=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],z=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],J=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ie(D,j){for(var K=0,ae=0,fe=new Array,we=1;we<=16;we++){for(var Ee=1;Ee<=D[we];Ee++)fe[j[ae]]=[],fe[j[ae]][0]=K,fe[j[ae]][1]=we,ae++,K++;K*=2}return fe}function ce(D){for(var j=D[0],K=D[1]-1;K>=0;)j&1<<K&&(x|=1<<g),K--,--g<0&&(x==255?(W(255),W(0)):W(x),g=7,x=0)}function W(D){w.push(D)}function Y(D){W(D>>8&255),W(255&D)}function $(D,j,K,ae,fe){for(var we,Ee=fe[0],Ce=fe[240],Ye=function(Be,Qe){var dt,mt,ue,Q,Re,Je,Ze,ct,vt,ot,Le=0;for(vt=0;vt<8;++vt){dt=Be[Le],mt=Be[Le+1],ue=Be[Le+2],Q=Be[Le+3],Re=Be[Le+4],Je=Be[Le+5],Ze=Be[Le+6];var Ut=dt+(ct=Be[Le+7]),Tt=dt-ct,Nt=mt+Ze,Ct=mt-Ze,Se=ue+Je,et=ue-Je,pt=Q+Re,Te=Q-Re,De=Ut+pt,Ge=Ut-pt,bt=Nt+Se,Et=Nt-Se;Be[Le]=De+bt,Be[Le+4]=De-bt;var At=.707106781*(Et+Ge);Be[Le+2]=Ge+At,Be[Le+6]=Ge-At;var zt=.382683433*((De=Te+et)-(Et=Ct+Tt)),_n=.5411961*De+zt,Mn=1.306562965*Et+zt,fn=.707106781*(bt=et+Ct),Xn=Tt+fn,Ft=Tt-fn;Be[Le+5]=Ft+_n,Be[Le+3]=Ft-_n,Be[Le+1]=Xn+Mn,Be[Le+7]=Xn-Mn,Le+=8}for(Le=0,vt=0;vt<8;++vt){dt=Be[Le],mt=Be[Le+8],ue=Be[Le+16],Q=Be[Le+24],Re=Be[Le+32],Je=Be[Le+40],Ze=Be[Le+48];var ti=dt+(ct=Be[Le+56]),ni=dt-ct,yr=mt+Ze,tr=mt-Ze,sr=ue+Je,nr=ue-Je,xn=Q+Re,is=Q-Re,gi=ti+xn,q=ti-xn,O=yr+sr,ee=yr-sr;Be[Le]=gi+O,Be[Le+32]=gi-O;var me=.707106781*(ee+q);Be[Le+16]=q+me,Be[Le+48]=q-me;var de=.382683433*((gi=is+nr)-(ee=tr+ni)),xe=.5411961*gi+de,Ve=1.306562965*ee+de,Xe=.707106781*(O=nr+tr),it=ni+Xe,rt=ni-Xe;Be[Le+40]=rt+xe,Be[Le+24]=rt-xe,Be[Le+8]=it+Ve,Be[Le+56]=it-Ve,Le++}for(vt=0;vt<64;++vt)ot=Be[vt]*Qe[vt],m[vt]=ot>0?ot+.5|0:ot-.5|0;return m}(D,j),Ne=0;Ne<64;++Ne)v[N[Ne]]=Ye[Ne];var he=v[0]-K;K=v[0],he==0?ce(ae[0]):(ce(ae[d[we=32767+he]]),ce(h[we]));for(var Oe=63;Oe>0&&v[Oe]==0;)Oe--;if(Oe==0)return ce(Ee),K;for(var Ae,_e=1;_e<=Oe;){for(var ne=_e;v[_e]==0&&_e<=Oe;)++_e;var ut=_e-ne;if(ut>=16){Ae=ut>>4;for(var $e=1;$e<=Ae;++$e)ce(Ce);ut&=15}we=32767+v[_e],ce(fe[(ut<<4)+d[we]]),ce(h[we]),_e++}return Oe!=63&&ce(Ee),K}function oe(D){D=Math.min(Math.max(D,1),100),s!=D&&(function(j){for(var K=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ae=0;ae<64;ae++){var fe=o((K[ae]*j+50)/100);fe=Math.min(Math.max(fe,1),255),a[N[ae]]=fe}for(var we=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ee=0;Ee<64;Ee++){var Ce=o((we[Ee]*j+50)/100);Ce=Math.min(Math.max(Ce,1),255),l[N[Ee]]=Ce}for(var Ye=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ne=0,he=0;he<8;he++)for(var Oe=0;Oe<8;Oe++)u[Ne]=1/(a[N[Ne]]*Ye[he]*Ye[Oe]*8),c[Ne]=1/(l[N[Ne]]*Ye[he]*Ye[Oe]*8),Ne++}(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),s=D)}this.encode=function(D,j){j&&oe(j),w=new Array,x=0,g=7,Y(65496),Y(65504),Y(16),W(74),W(70),W(73),W(70),W(0),W(1),W(1),W(0),Y(1),Y(1),W(0),W(0),function(){Y(65499),Y(132),W(0);for(var mt=0;mt<64;mt++)W(a[mt]);W(1);for(var ue=0;ue<64;ue++)W(l[ue])}(),function(mt,ue){Y(65472),Y(17),W(8),Y(ue),Y(mt),W(3),W(1),W(17),W(0),W(2),W(17),W(1),W(3),W(17),W(1)}(D.width,D.height),function(){Y(65476),Y(418),W(0);for(var mt=0;mt<16;mt++)W(k[mt+1]);for(var ue=0;ue<=11;ue++)W(R[ue]);W(16);for(var Q=0;Q<16;Q++)W(U[Q+1]);for(var Re=0;Re<=161;Re++)W(F[Re]);W(1);for(var Je=0;Je<16;Je++)W(z[Je+1]);for(var Ze=0;Ze<=11;Ze++)W(V[Ze]);W(17);for(var ct=0;ct<16;ct++)W(G[ct+1]);for(var vt=0;vt<=161;vt++)W(J[vt])}(),Y(65498),Y(12),W(3),W(1),W(0),W(2),W(17),W(3),W(17),W(0),W(63),W(0);var K=0,ae=0,fe=0;x=0,g=7,this.encode.displayName="_encode_";for(var we,Ee,Ce,Ye,Ne,he,Oe,Ae,_e,ne=D.data,ut=D.width,$e=D.height,Be=4*ut,Qe=0;Qe<$e;){for(we=0;we<Be;){for(Ne=Be*Qe+we,Oe=-1,Ae=0,_e=0;_e<64;_e++)he=Ne+(Ae=_e>>3)*Be+(Oe=4*(7&_e)),Qe+Ae>=$e&&(he-=Be*(Qe+1+Ae-$e)),we+Oe>=Be&&(he-=we+Oe-Be+4),Ee=ne[he++],Ce=ne[he++],Ye=ne[he++],S[_e]=(P[Ee]+P[Ce+256>>0]+P[Ye+512>>0]>>16)-128,_[_e]=(P[Ee+768>>0]+P[Ce+1024>>0]+P[Ye+1280>>0]>>16)-128,T[_e]=(P[Ee+1280>>0]+P[Ce+1536>>0]+P[Ye+1792>>0]>>16)-128;K=$(S,u,K,e,r),ae=$(_,c,ae,t,i),fe=$(T,c,fe,t,i),we+=32}Qe+=8}if(g>=0){var dt=[];dt[1]=g+1,dt[0]=(1<<g+1)-1,ce(dt)}return Y(65497),new Uint8Array(w)},n=n||50,function(){for(var D=String.fromCharCode,j=0;j<256;j++)L[j]=D(j)}(),e=ie(k,R),t=ie(z,V),r=ie(U,F),i=ie(G,J),function(){for(var D=1,j=2,K=1;K<=15;K++){for(var ae=D;ae<j;ae++)d[32767+ae]=K,h[32767+ae]=[],h[32767+ae][1]=K,h[32767+ae][0]=ae;for(var fe=-(j-1);fe<=-D;fe++)d[32767+fe]=K,h[32767+fe]=[],h[32767+fe][1]=K,h[32767+fe][0]=j-1+fe;D<<=1,j<<=1}}(),function(){for(var D=0;D<256;D++)P[D]=19595*D,P[D+256>>0]=38470*D,P[D+512>>0]=7471*D+32768,P[D+768>>0]=-11059*D,P[D+1024>>0]=-21709*D,P[D+1280>>0]=32768*D+8421375,P[D+1536>>0]=-27439*D,P[D+1792>>0]=-5329*D}(),oe(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function rl(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ST(n){function e(k){if(!k)throw Error("assert :P")}function t(k,R,U){for(var F=0;4>F;F++)if(k[R+F]!=U.charCodeAt(F))return!0;return!1}function r(k,R,U,F,z){for(var V=0;V<z;V++)k[R+V]=U[F+V]}function i(k,R,U,F){for(var z=0;z<F;z++)k[R+z]=U}function s(k){return new Int32Array(k)}function o(k,R){for(var U=[],F=0;F<k;F++)U.push(new R);return U}function a(k,R){var U=[];return function F(z,V,G){for(var J=G[V],ie=0;ie<J&&(z.push(G.length>V+1?[]:new R),!(G.length<V+1));ie++)F(z[ie],V+1,G)}(U,0,k),U}var l=function(){var k=this;function R(y,M){for(var C=1<<M-1>>>0;y&C;)C>>>=1;return C?(y&C-1)+C:y}function U(y,M,C,B,X){e(!(B%C));do y[M+(B-=C)]=X;while(0<B)}function F(y,M,C,B,X){if(e(2328>=X),512>=X)var te=s(512);else if((te=s(X))==null)return 0;return function(re,se,le,ge,ye,We){var je,Ue,St=se,tt=1<<le,ke=s(16),Ie=s(16);for(e(ye!=0),e(ge!=null),e(re!=null),e(0<le),Ue=0;Ue<ye;++Ue){if(15<ge[Ue])return 0;++ke[ge[Ue]]}if(ke[0]==ye)return 0;for(Ie[1]=0,je=1;15>je;++je){if(ke[je]>1<<je)return 0;Ie[je+1]=Ie[je]+ke[je]}for(Ue=0;Ue<ye;++Ue)je=ge[Ue],0<ge[Ue]&&(We[Ie[je]++]=Ue);if(Ie[15]==1)return(ge=new z).g=0,ge.value=We[0],U(re,St,1,tt,ge),tt;var yt,_t=-1,wt=tt-1,qt=0,Ot=1,hn=1,Bt=1<<le;for(Ue=0,je=1,ye=2;je<=le;++je,ye<<=1){if(Ot+=hn<<=1,0>(hn-=ke[je]))return 0;for(;0<ke[je];--ke[je])(ge=new z).g=je,ge.value=We[Ue++],U(re,St+qt,ye,Bt,ge),qt=R(qt,je)}for(je=le+1,ye=2;15>=je;++je,ye<<=1){if(Ot+=hn<<=1,0>(hn-=ke[je]))return 0;for(;0<ke[je];--ke[je]){if(ge=new z,(qt&wt)!=_t){for(St+=Bt,yt=1<<(_t=je)-le;15>_t&&!(0>=(yt-=ke[_t]));)++_t,yt<<=1;tt+=Bt=1<<(yt=_t-le),re[se+(_t=qt&wt)].g=yt+le,re[se+_t].value=St-se-_t}ge.g=je-le,ge.value=We[Ue++],U(re,St+(qt>>le),ye,Bt,ge),qt=R(qt,je)}}return Ot!=2*Ie[15]-1?0:tt}(y,M,C,B,X,te)}function z(){this.value=this.g=0}function V(){this.value=this.g=0}function G(){this.G=o(5,z),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ci,V)}function J(y,M,C,B){e(y!=null),e(M!=null),e(2147483648>B),y.Ca=254,y.I=0,y.b=-8,y.Ka=0,y.oa=M,y.pa=C,y.Jd=M,y.Yc=C+B,y.Zc=4<=B?C+B-4+1:C,we(y)}function ie(y,M){for(var C=0;0<M--;)C|=Ce(y,128)<<M;return C}function ce(y,M){var C=ie(y,M);return Ee(y)?-C:C}function W(y,M,C,B){var X,te=0;for(e(y!=null),e(M!=null),e(4294967288>B),y.Sb=B,y.Ra=0,y.u=0,y.h=0,4<B&&(B=4),X=0;X<B;++X)te+=M[C+X]<<8*X;y.Ra=te,y.bb=B,y.oa=M,y.pa=C}function Y(y){for(;8<=y.u&&y.bb<y.Sb;)y.Ra>>>=8,y.Ra+=y.oa[y.pa+y.bb]<<Go-8>>>0,++y.bb,y.u-=8;K(y)&&(y.h=1,y.u=0)}function $(y,M){if(e(0<=M),!y.h&&M<=pa){var C=j(y)&gu[M];return y.u+=M,Y(y),C}return y.h=1,y.u=0}function oe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function D(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function j(y){return y.Ra>>>(y.u&Go-1)>>>0}function K(y){return e(y.bb<=y.Sb),y.h||y.bb==y.Sb&&y.u>Go}function ae(y,M){y.u=M,y.h=K(y)}function fe(y){y.u>=vu&&(e(y.u>=vu),Y(y))}function we(y){e(y!=null&&y.oa!=null),y.pa<y.Zc?(y.I=(y.oa[y.pa++]|y.I<<8)>>>0,y.b+=8):(e(y!=null&&y.oa!=null),y.pa<y.Yc?(y.b+=8,y.I=y.oa[y.pa++]|y.I<<8):y.Ka?y.b=0:(y.I<<=8,y.b+=8,y.Ka=1))}function Ee(y){return ie(y,1)}function Ce(y,M){var C=y.Ca;0>y.b&&we(y);var B=y.b,X=C*M>>>8,te=(y.I>>>B>X)+0;for(te?(C-=X,y.I-=X+1<<B>>>0):C=X+1,B=C,X=0;256<=B;)X+=8,B>>=8;return B=7^X+Bi[B],y.b-=B,y.Ca=(C<<B)-1,te}function Ye(y,M,C){y[M+0]=C>>24&255,y[M+1]=C>>16&255,y[M+2]=C>>8&255,y[M+3]=C>>0&255}function Ne(y,M){return y[M+0]<<0|y[M+1]<<8}function he(y,M){return Ne(y,M)|y[M+2]<<16}function Oe(y,M){return Ne(y,M)|Ne(y,M+2)<<16}function Ae(y,M){var C=1<<M;return e(y!=null),e(0<M),y.X=s(C),y.X==null?0:(y.Mb=32-M,y.Xa=M,1)}function _e(y,M){e(y!=null),e(M!=null),e(y.Xa==M.Xa),r(M.X,0,y.X,0,1<<M.Xa)}function ne(){this.X=[],this.Xa=this.Mb=0}function ut(y,M,C,B){e(C!=null),e(B!=null);var X=C[0],te=B[0];return X==0&&(X=(y*te+M/2)/M),te==0&&(te=(M*X+y/2)/y),0>=X||0>=te?0:(C[0]=X,B[0]=te,1)}function $e(y,M){return y+(1<<M)-1>>>M}function Be(y,M){return((4278255360&y)+(4278255360&M)>>>0&4278255360)+((16711935&y)+(16711935&M)>>>0&16711935)>>>0}function Qe(y,M){k[M]=function(C,B,X,te,re,se,le){var ge;for(ge=0;ge<re;++ge){var ye=k[y](se[le+ge-1],X,te+ge);se[le+ge]=Be(C[B+ge],ye)}}}function dt(){this.ud=this.hd=this.jd=0}function mt(y,M){return((4278124286&(y^M))>>>1)+(y&M)>>>0}function ue(y){return 0<=y&&256>y?y:0>y?0:255<y?255:void 0}function Q(y,M){return ue(y+(y-M+.5>>1))}function Re(y,M,C){return Math.abs(M-C)-Math.abs(y-C)}function Je(y,M,C,B,X,te,re){for(B=te[re-1],C=0;C<X;++C)te[re+C]=B=Be(y[M+C],B)}function Ze(y,M,C,B,X){var te;for(te=0;te<C;++te){var re=y[M+te],se=re>>8&255,le=16711935&(le=(le=16711935&re)+((se<<16)+se));B[X+te]=(4278255360&re)+le>>>0}}function ct(y,M){M.jd=y>>0&255,M.hd=y>>8&255,M.ud=y>>16&255}function vt(y,M,C,B,X,te){var re;for(re=0;re<B;++re){var se=M[C+re],le=se>>>8,ge=se,ye=255&(ye=(ye=se>>>16)+((y.jd<<24>>24)*(le<<24>>24)>>>5));ge=255&(ge=(ge=ge+((y.hd<<24>>24)*(le<<24>>24)>>>5))+((y.ud<<24>>24)*(ye<<24>>24)>>>5)),X[te+re]=(4278255360&se)+(ye<<16)+ge}}function ot(y,M,C,B,X){k[M]=function(te,re,se,le,ge,ye,We,je,Ue){for(le=We;le<je;++le)for(We=0;We<Ue;++We)ge[ye++]=X(se[B(te[re++])])},k[y]=function(te,re,se,le,ge,ye,We){var je=8>>te.b,Ue=te.Ea,St=te.K[0],tt=te.w;if(8>je)for(te=(1<<te.b)-1,tt=(1<<je)-1;re<se;++re){var ke,Ie=0;for(ke=0;ke<Ue;++ke)ke&te||(Ie=B(le[ge++])),ye[We++]=X(St[Ie&tt]),Ie>>=je}else k["VP8LMapColor"+C](le,ge,St,tt,ye,We,re,se,Ue)}}function Le(y,M,C,B,X){for(C=M+C;M<C;){var te=y[M++];B[X++]=te>>16&255,B[X++]=te>>8&255,B[X++]=te>>0&255}}function Ut(y,M,C,B,X){for(C=M+C;M<C;){var te=y[M++];B[X++]=te>>16&255,B[X++]=te>>8&255,B[X++]=te>>0&255,B[X++]=te>>24&255}}function Tt(y,M,C,B,X){for(C=M+C;M<C;){var te=(re=y[M++])>>16&240|re>>12&15,re=re>>0&240|re>>28&15;B[X++]=te,B[X++]=re}}function Nt(y,M,C,B,X){for(C=M+C;M<C;){var te=(re=y[M++])>>16&248|re>>13&7,re=re>>5&224|re>>3&31;B[X++]=te,B[X++]=re}}function Ct(y,M,C,B,X){for(C=M+C;M<C;){var te=y[M++];B[X++]=te>>0&255,B[X++]=te>>8&255,B[X++]=te>>16&255}}function Se(y,M,C,B,X,te){if(te==0)for(C=M+C;M<C;)Ye(B,((te=y[M++])[0]>>24|te[1]>>8&65280|te[2]<<8&16711680|te[3]<<24)>>>0),X+=32;else r(B,X,y,M,C)}function et(y,M){k[M][0]=k[y+"0"],k[M][1]=k[y+"1"],k[M][2]=k[y+"2"],k[M][3]=k[y+"3"],k[M][4]=k[y+"4"],k[M][5]=k[y+"5"],k[M][6]=k[y+"6"],k[M][7]=k[y+"7"],k[M][8]=k[y+"8"],k[M][9]=k[y+"9"],k[M][10]=k[y+"10"],k[M][11]=k[y+"11"],k[M][12]=k[y+"12"],k[M][13]=k[y+"13"],k[M][14]=k[y+"0"],k[M][15]=k[y+"0"]}function pt(y){return y==pd||y==md||y==_c||y==gd}function Te(){this.eb=[],this.size=this.A=this.fb=0}function De(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ge(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Te,this.f.kb=new De,this.sd=null}function bt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Et(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function At(y){return alert("todo:WebPSamplerProcessPlane"),y.T}function zt(y,M){var C=y.T,B=M.ba.f.RGBA,X=B.eb,te=B.fb+y.ka*B.A,re=cs[M.ba.S],se=y.y,le=y.O,ge=y.f,ye=y.N,We=y.ea,je=y.W,Ue=M.cc,St=M.dc,tt=M.Mc,ke=M.Nc,Ie=y.ka,yt=y.ka+y.T,_t=y.U,wt=_t+1>>1;for(Ie==0?re(se,le,null,null,ge,ye,We,je,ge,ye,We,je,X,te,null,null,_t):(re(M.ec,M.fc,se,le,Ue,St,tt,ke,ge,ye,We,je,X,te-B.A,X,te,_t),++C);Ie+2<yt;Ie+=2)Ue=ge,St=ye,tt=We,ke=je,ye+=y.Rc,je+=y.Rc,te+=2*B.A,re(se,(le+=2*y.fa)-y.fa,se,le,Ue,St,tt,ke,ge,ye,We,je,X,te-B.A,X,te,_t);return le+=y.fa,y.j+yt<y.o?(r(M.ec,M.fc,se,le,_t),r(M.cc,M.dc,ge,ye,wt),r(M.Mc,M.Nc,We,je,wt),C--):1&yt||re(se,le,null,null,ge,ye,We,je,ge,ye,We,je,X,te+B.A,null,null,_t),C}function _n(y,M,C){var B=y.F,X=[y.J];if(B!=null){var te=y.U,re=M.ba.S,se=re==Dl||re==_c;M=M.ba.f.RGBA;var le=[0],ge=y.ka;le[0]=y.T,y.Kb&&(ge==0?--le[0]:(--ge,X[0]-=y.width),y.j+y.ka+y.T==y.o&&(le[0]=y.o-y.j-ge));var ye=M.eb;ge=M.fb+ge*M.A,y=ar(B,X[0],y.width,te,le,ye,ge+(se?0:3),M.A),e(C==le),y&&pt(re)&&yi(ye,ge,se,te,le,M.A)}return 0}function Mn(y){var M=y.ma,C=M.ba.S,B=11>C,X=C==_u||C==Sc||C==Dl||C==dd||C==12||pt(C);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!mc(M.Oa,y,X?11:12))return 0;if(X&&pt(C)&&Mt(),y.da)alert("todo:use_scaling");else{if(B){if(M.Ib=At,y.Kb){if(C=y.U+1>>1,M.memory=s(y.U+2*C),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+y.U,M.Mc=M.cc,M.Nc=M.dc+C,M.Ib=zt,Mt()}}else alert("todo:EmitYUV");X&&(M.Jb=_n,B&&He())}if(B&&!Pm){for(y=0;256>y;++y)Rm[y]=89858*(y-128)+Hi>>hs,y1[y]=-22014*(y-128)+Hi,km[y]=-45773*(y-128),v1[y]=113618*(y-128)+Hi>>hs;for(y=Ec;y<Sd;++y)M=76283*(y-16)+Hi>>hs,x1[y-Ec]=bs(M,255),_d[y-Ec]=bs(M+8>>4,15);Pm=1}return 1}function fn(y){var M=y.ma,C=y.U,B=y.T;return e(!(1&y.ka)),0>=C||0>=B?0:(C=M.Ib(y,M),M.Jb!=null&&M.Jb(y,M,C),M.Dc+=C,1)}function Xn(y){y.ma.memory=null}function Ft(y,M,C,B){return $(y,8)!=47?0:(M[0]=$(y,14)+1,C[0]=$(y,14)+1,B[0]=$(y,1),$(y,3)!=0?0:!y.h)}function ti(y,M){if(4>y)return y+1;var C=y-2>>1;return(2+(1&y)<<C)+$(M,C)+1}function ni(y,M){return 120<M?M-120:1<=(C=((C=c1[M-1])>>4)*y+(8-(15&C)))?C:1;var C}function yr(y,M,C){var B=j(C),X=y[M+=255&B].g-8;return 0<X&&(ae(C,C.u+8),B=j(C),M+=y[M].value,M+=B&(1<<X)-1),ae(C,C.u+y[M].g),y[M].value}function tr(y,M,C){return C.g+=y.g,C.value+=y.value<<M>>>0,e(8>=C.g),y.g}function sr(y,M,C){var B=y.xc;return e((M=B==0?0:y.vc[y.md*(C>>B)+(M>>B)])<y.Wb),y.Ya[M]}function nr(y,M,C,B){var X=y.ab,te=y.c*M,re=y.C;M=re+M;var se=C,le=B;for(B=y.Ta,C=y.Ua;0<X--;){var ge=y.gc[X],ye=re,We=M,je=se,Ue=le,St=(le=B,se=C,ge.Ea);switch(e(ye<We),e(We<=ge.nc),ge.hc){case 2:Gh(je,Ue,(We-ye)*St,le,se);break;case 0:var tt=ye,ke=We,Ie=le,yt=se,_t=(Bt=ge).Ea;tt==0&&(vc(je,Ue,null,null,1,Ie,yt),Je(je,Ue+1,0,0,_t-1,Ie,yt+1),Ue+=_t,yt+=_t,++tt);for(var wt=1<<Bt.b,qt=wt-1,Ot=$e(_t,Bt.b),hn=Bt.K,Bt=Bt.w+(tt>>Bt.b)*Ot;tt<ke;){var ir=hn,dr=Bt,Zn=1;for(yc(je,Ue,Ie,yt-_t,1,Ie,yt);Zn<_t;){var Hn=(Zn&~qt)+wt;Hn>_t&&(Hn=_t),(0,wo[ir[dr++]>>8&15])(je,Ue+ +Zn,Ie,yt+Zn-_t,Hn-Zn,Ie,yt+Zn),Zn=Hn}Ue+=_t,yt+=_t,++tt&qt||(Bt+=Ot)}We!=ge.nc&&r(le,se-St,le,se+(We-ye-1)*St,St);break;case 1:for(St=je,ke=Ue,_t=(je=ge.Ea)-(yt=je&~(Ie=(Ue=1<<ge.b)-1)),tt=$e(je,ge.b),wt=ge.K,ge=ge.w+(ye>>ge.b)*tt;ye<We;){for(qt=wt,Ot=ge,hn=new dt,Bt=ke+yt,ir=ke+je;ke<Bt;)ct(qt[Ot++],hn),So(hn,St,ke,Ue,le,se),ke+=Ue,se+=Ue;ke<ir&&(ct(qt[Ot++],hn),So(hn,St,ke,_t,le,se),ke+=_t,se+=_t),++ye&Ie||(ge+=tt)}break;case 3:if(je==le&&Ue==se&&0<ge.b){for(ke=le,je=St=se+(We-ye)*St-(yt=(We-ye)*$e(ge.Ea,ge.b)),Ue=le,Ie=se,tt=[],yt=(_t=yt)-1;0<=yt;--yt)tt[yt]=Ue[Ie+yt];for(yt=_t-1;0<=yt;--yt)ke[je+yt]=tt[yt];ji(ge,ye,We,le,St,le,se)}else ji(ge,ye,We,je,Ue,le,se)}se=B,le=C}le!=C&&r(B,C,se,le,te)}function xn(y,M){var C=y.V,B=y.Ba+y.c*y.C,X=M-y.C;if(e(M<=y.l.o),e(16>=X),0<X){var te=y.l,re=y.Ta,se=y.Ua,le=te.width;if(nr(y,X,C,B),X=se=[se],e((C=y.C)<(B=M)),e(te.v<te.va),B>te.o&&(B=te.o),C<te.j){var ge=te.j-C;C=te.j,X[0]+=ge*le}if(C>=B?C=0:(X[0]+=4*te.v,te.ka=C-te.j,te.U=te.va-te.v,te.T=B-C,C=1),C){if(se=se[0],11>(C=y.ca).S){var ye=C.f.RGBA,We=(B=C.S,X=te.U,te=te.T,ge=ye.eb,ye.A),je=te;for(ye=ye.fb+y.Ma*ye.A;0<je--;){var Ue=re,St=se,tt=X,ke=ge,Ie=ye;switch(B){case jh:Hr(Ue,St,tt,ke,Ie);break;case _u:qi(Ue,St,tt,ke,Ie);break;case pd:qi(Ue,St,tt,ke,Ie),yi(ke,Ie,0,tt,1,0);break;case qh:Vo(Ue,St,tt,ke,Ie);break;case Sc:Se(Ue,St,tt,ke,Ie,1);break;case md:Se(Ue,St,tt,ke,Ie,1),yi(ke,Ie,0,tt,1,0);break;case Dl:Se(Ue,St,tt,ke,Ie,0);break;case _c:Se(Ue,St,tt,ke,Ie,0),yi(ke,Ie,1,tt,1,0);break;case dd:so(Ue,St,tt,ke,Ie);break;case gd:so(Ue,St,tt,ke,Ie),$n(ke,Ie,tt,1,0);break;case Mm:ma(Ue,St,tt,ke,Ie);break;default:e(0)}se+=le,ye+=We}y.Ma+=te}else alert("todo:EmitRescaledRowsYUVA");e(y.Ma<=C.height)}}y.C=M,e(y.C<=y.i)}function is(y){var M;if(0<y.ua)return 0;for(M=0;M<y.Wb;++M){var C=y.Ya[M].G,B=y.Ya[M].H;if(0<C[1][B[1]+0].g||0<C[2][B[2]+0].g||0<C[3][B[3]+0].g)return 0}return 1}function gi(y,M,C,B,X,te){if(y.Z!=0){var re=y.qd,se=y.rd;for(e(Eo[y.Z]!=null);M<C;++M)Eo[y.Z](re,se,B,X,B,X,te),re=B,se=X,X+=te;y.qd=re,y.rd=se}}function q(y,M){var C=y.l.ma,B=C.Z==0||C.Z==1?y.l.j:y.C;if(B=y.C<B?B:y.C,e(M<=y.l.o),M>B){var X=y.l.width,te=C.ca,re=C.tb+X*B,se=y.V,le=y.Ba+y.c*B,ge=y.gc;e(y.ab==1),e(ge[0].hc==3),Il(ge[0],B,M,se,le,te,re),gi(C,B,M,te,re,X)}y.C=y.Ma=M}function O(y,M,C,B,X,te,re){var se=y.$/B,le=y.$%B,ge=y.m,ye=y.s,We=C+y.$,je=We;X=C+B*X;var Ue=C+B*te,St=280+ye.ua,tt=y.Pb?se:16777216,ke=0<ye.ua?ye.Wa:null,Ie=ye.wc,yt=We<Ue?sr(ye,le,se):null;e(y.C<te),e(Ue<=X);var _t=!1;e:for(;;){for(;_t||We<Ue;){var wt=0;if(se>=tt){var qt=We-C;e((tt=y).Pb),tt.wd=tt.m,tt.xd=qt,0<tt.s.ua&&_e(tt.s.Wa,tt.s.vb),tt=se+f1}if(le&Ie||(yt=sr(ye,le,se)),e(yt!=null),yt.Qb&&(M[We]=yt.qb,_t=!0),!_t)if(fe(ge),yt.jc){wt=ge,qt=M;var Ot=We,hn=yt.pd[j(wt)&Ci-1];e(yt.jc),256>hn.g?(ae(wt,wt.u+hn.g),qt[Ot]=hn.value,wt=0):(ae(wt,wt.u+hn.g-256),e(256<=hn.value),wt=hn.value),wt==0&&(_t=!0)}else wt=yr(yt.G[0],yt.H[0],ge);if(ge.h)break;if(_t||256>wt){if(!_t)if(yt.nd)M[We]=(yt.qb|wt<<8)>>>0;else{if(fe(ge),_t=yr(yt.G[1],yt.H[1],ge),fe(ge),qt=yr(yt.G[2],yt.H[2],ge),Ot=yr(yt.G[3],yt.H[3],ge),ge.h)break;M[We]=(Ot<<24|_t<<16|wt<<8|qt)>>>0}if(_t=!1,++We,++le>=B&&(le=0,++se,re!=null&&se<=te&&!(se%16)&&re(y,se),ke!=null))for(;je<We;)wt=M[je++],ke.X[(506832829*wt&4294967295)>>>ke.Mb]=wt}else if(280>wt){if(wt=ti(wt-256,ge),qt=yr(yt.G[4],yt.H[4],ge),fe(ge),qt=ni(B,qt=ti(qt,ge)),ge.h)break;if(We-C<qt||X-We<wt)break e;for(Ot=0;Ot<wt;++Ot)M[We+Ot]=M[We+Ot-qt];for(We+=wt,le+=wt;le>=B;)le-=B,++se,re!=null&&se<=te&&!(se%16)&&re(y,se);if(e(We<=X),le&Ie&&(yt=sr(ye,le,se)),ke!=null)for(;je<We;)wt=M[je++],ke.X[(506832829*wt&4294967295)>>>ke.Mb]=wt}else{if(!(wt<St))break e;for(_t=wt-280,e(ke!=null);je<We;)wt=M[je++],ke.X[(506832829*wt&4294967295)>>>ke.Mb]=wt;wt=We,e(!(_t>>>(qt=ke).Xa)),M[wt]=qt.X[_t],_t=!0}_t||e(ge.h==K(ge))}if(y.Pb&&ge.h&&We<X)e(y.m.h),y.a=5,y.m=y.wd,y.$=y.xd,0<y.s.ua&&_e(y.s.vb,y.s.Wa);else{if(ge.h)break e;re!=null&&re(y,se>te?te:se),y.a=0,y.$=We-C}return 1}return y.a=3,0}function ee(y){e(y!=null),y.vc=null,y.yc=null,y.Ya=null;var M=y.Wa;M!=null&&(M.X=null),y.vb=null,e(y!=null)}function me(){var y=new da;return y==null?null:(y.a=0,y.xb=Tm,et("Predictor","VP8LPredictors"),et("Predictor","VP8LPredictors_C"),et("PredictorAdd","VP8LPredictorsAdd"),et("PredictorAdd","VP8LPredictorsAdd_C"),Gh=Ze,So=vt,Hr=Le,qi=Ut,so=Tt,ma=Nt,Vo=Ct,k.VP8LMapColor32b=yu,k.VP8LMapColor8b=Ms,y)}function de(y,M,C,B,X){var te=1,re=[y],se=[M],le=B.m,ge=B.s,ye=null,We=0;e:for(;;){if(C)for(;te&&$(le,1);){var je=re,Ue=se,St=B,tt=1,ke=St.m,Ie=St.gc[St.ab],yt=$(ke,2);if(St.Oc&1<<yt)te=0;else{switch(St.Oc|=1<<yt,Ie.hc=yt,Ie.Ea=je[0],Ie.nc=Ue[0],Ie.K=[null],++St.ab,e(4>=St.ab),yt){case 0:case 1:Ie.b=$(ke,3)+2,tt=de($e(Ie.Ea,Ie.b),$e(Ie.nc,Ie.b),0,St,Ie.K),Ie.K=Ie.K[0];break;case 3:var _t,wt=$(ke,8)+1,qt=16<wt?0:4<wt?1:2<wt?2:3;if(je[0]=$e(Ie.Ea,qt),Ie.b=qt,_t=tt=de(wt,1,0,St,Ie.K)){var Ot,hn=wt,Bt=Ie,ir=1<<(8>>Bt.b),dr=s(ir);if(dr==null)_t=0;else{var Zn=Bt.K[0],Hn=Bt.w;for(dr[0]=Bt.K[0][0],Ot=1;Ot<1*hn;++Ot)dr[Ot]=Be(Zn[Hn+Ot],dr[Ot-1]);for(;Ot<4*ir;++Ot)dr[Ot]=0;Bt.K[0]=null,Bt.K[0]=dr,_t=1}}tt=_t;break;case 2:break;default:e(0)}te=tt}}if(re=re[0],se=se[0],te&&$(le,1)&&!(te=1<=(We=$(le,4))&&11>=We)){B.a=3;break e}var Er;if(Er=te)t:{var br,Ln,ii,As=B,si=re,Yi=se,lr=We,fs=C,ds=As.m,oi=As.s,ai=[null],$i=1,Ds=0,Ao=h1[lr];n:for(;;){if(fs&&$(ds,1)){var Li=$(ds,3)+2,qo=$e(si,Li),bu=$e(Yi,Li),Xa=qo*bu;if(!de(qo,bu,0,As,ai))break n;for(ai=ai[0],oi.xc=Li,br=0;br<Xa;++br){var Sa=ai[br]>>8&65535;ai[br]=Sa,Sa>=$i&&($i=Sa+1)}}if(ds.h)break n;for(Ln=0;5>Ln;++Ln){var Pn=Em[Ln];!Ln&&0<lr&&(Pn+=1<<lr),Ds<Pn&&(Ds=Pn)}var In=o($i*Ao,z),li=$i,ui=o(li,G);if(ui==null)var xi=null;else e(65536>=li),xi=ui;var Zi=s(Ds);if(xi==null||Zi==null||In==null){As.a=1;break n}var Ya=In;for(br=ii=0;br<$i;++br){var vr=xi[br],_a=vr.G,Xo=vr.H,Zh=0,Ac=1,Tc=0;for(Ln=0;5>Ln;++Ln){Pn=Em[Ln],_a[Ln]=Ya,Xo[Ln]=ii,!Ln&&0<lr&&(Pn+=1<<lr);i:{var Ki,Kh=Pn,Cc=As,ba=Zi,bd=Ya,Dm=ii,Ma=0,Yo=Cc.m,Ol=$(Yo,1);if(i(ba,0,0,Kh),Ol){var Md=$(Yo,1)+1,Jh=$(Yo,1),Ed=$(Yo,Jh==0?1:8);ba[Ed]=1,Md==2&&(ba[Ed=$(Yo,8)]=1);var Mu=1}else{var Qh=s(19),ps=$(Yo,4)+4;if(19<ps){Cc.a=3;var $o=0;break i}for(Ki=0;Ki<ps;++Ki)Qh[wx[Ki]]=$(Yo,3);var Os=void 0,Fl=void 0,Ts=Cc,S1=Qh,Lc=Kh,Ad=ba,Om=0,Cs=Ts.m,Fm=8,Um=o(128,z);r:for(;F(Um,0,7,S1,19);){if($(Cs,1)){var Bm=2+2*$(Cs,3);if((Os=2+$(Cs,Bm))>Lc)break r}else Os=Lc;for(Fl=0;Fl<Lc&&Os--;){fe(Cs);var Ul=Um[0+(127&j(Cs))];ae(Cs,Cs.u+Ul.g);var Eu=Ul.value;if(16>Eu)Ad[Fl++]=Eu,Eu!=0&&(Fm=Eu);else{var _1=Eu==16,Td=Eu-16,Cd=yx[Td],b1=$(Cs,u1[Td])+Cd;if(Fl+b1>Lc)break r;for(var Ex=_1?Fm:0;0<b1--;)Ad[Fl++]=Ex}}Om=1;break r}Om||(Ts.a=3),Mu=Om}(Mu=Mu&&!Yo.h)&&(Ma=F(bd,Dm,8,ba,Kh)),Mu&&Ma!=0?$o=Ma:(Cc.a=3,$o=0)}if($o==0)break n;if(Ac&&xx[Ln]==1&&(Ac=Ya[ii].g==0),Zh+=Ya[ii].g,ii+=$o,3>=Ln){var Pc,Ld=Zi[0];for(Pc=1;Pc<Pn;++Pc)Zi[Pc]>Ld&&(Ld=Zi[Pc]);Tc+=Ld}}if(vr.nd=Ac,vr.Qb=0,Ac&&(vr.qb=(_a[3][Xo[3]+0].value<<24|_a[1][Xo[1]+0].value<<16|_a[2][Xo[2]+0].value)>>>0,Zh==0&&256>_a[0][Xo[0]+0].value&&(vr.Qb=1,vr.qb+=_a[0][Xo[0]+0].value<<8)),vr.jc=!vr.Qb&&6>Tc,vr.jc){var Ea,$a=vr;for(Ea=0;Ea<Ci;++Ea){var Fs=Ea,Za=$a.pd[Fs],Ji=$a.G[0][$a.H[0]+Fs];256<=Ji.value?(Za.g=Ji.g+256,Za.value=Ji.value):(Za.g=0,Za.value=0,Fs>>=tr(Ji,8,Za),Fs>>=tr($a.G[1][$a.H[1]+Fs],16,Za),Fs>>=tr($a.G[2][$a.H[2]+Fs],0,Za),tr($a.G[3][$a.H[3]+Fs],24,Za))}}}oi.vc=ai,oi.Wb=$i,oi.Ya=xi,oi.yc=In,Er=1;break t}Er=0}if(!(te=Er)){B.a=3;break e}if(0<We){if(ge.ua=1<<We,!Ae(ge.Wa,We)){B.a=1,te=0;break e}}else ge.ua=0;var zm=B,Hm=re,Ax=se,Gm=zm.s,Pd=Gm.xc;if(zm.c=Hm,zm.i=Ax,Gm.md=$e(Hm,Pd),Gm.wc=Pd==0?-1:(1<<Pd)-1,C){B.xb=wa;break e}if((ye=s(re*se))==null){B.a=1,te=0;break e}te=(te=O(B,ye,0,re,se,se,null))&&!le.h;break e}return te?(X!=null?X[0]=ye:(e(ye==null),e(C)),B.$=0,C||ee(ge)):ee(ge),te}function xe(y,M){var C=y.c*y.i,B=C+M+16*M;return e(y.c<=M),y.V=s(B),y.V==null?(y.Ta=null,y.Ua=0,y.a=1,0):(y.Ta=y.V,y.Ua=y.Ba+C+M,1)}function Ve(y,M){var C=y.C,B=M-C,X=y.V,te=y.Ba+y.c*C;for(e(M<=y.l.o);0<B;){var re=16<B?16:B,se=y.l.ma,le=y.l.width,ge=le*re,ye=se.ca,We=se.tb+le*C,je=y.Ta,Ue=y.Ua;nr(y,re,X,te),Fr(je,Ue,ye,We,ge),gi(se,C,C+re,ye,We,le),B-=re,X+=re*y.c,C+=re}e(C==M),y.C=y.Ma=M}function Xe(){this.ub=this.yd=this.td=this.Rb=0}function it(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function rt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function ht(){this.Yb=function(){var y=[];return function M(C,B,X){for(var te=X[B],re=0;re<te&&(C.push(X.length>B+1?[]:0),!(X.length<B+1));re++)M(C[re],B+1,X)}(y,0,[3,11]),y}()}function nt(){this.jb=s(3),this.Wc=a([4,8],ht),this.Xc=a([4,17],ht)}function jt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function kt(){this.ld=this.La=this.dd=this.tc=0}function Dt(){this.Na=this.la=0}function nn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function on(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function sn(){this.uc=this.M=this.Nb=0,this.wa=Array(new kt),this.Y=0,this.ya=Array(new on),this.aa=0,this.l=new Yt}function Vt(){this.y=s(16),this.f=s(8),this.ea=s(8)}function dn(){this.cb=this.a=0,this.sc="",this.m=new oe,this.Od=new Xe,this.Kc=new it,this.ed=new jt,this.Qa=new rt,this.Ic=this.$c=this.Aa=0,this.D=new sn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,oe),this.ia=0,this.pb=o(4,nn),this.Pa=new nt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Vt),this.Hd=0,this.rb=Array(new Dt),this.sb=0,this.wa=Array(new kt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new on),this.L=this.aa=0,this.gd=a([4,2],kt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Yt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function En(){var y=new dn;return y!=null&&(y.a=0,y.sc="OK",y.cb=0,y.Xb=0,Xh||(Xh=Yn)),y}function pn(y,M,C){return y.a==0&&(y.a=M,y.sc=C,y.cb=0),0}function vn(y,M,C){return 3<=C&&y[M+0]==157&&y[M+1]==1&&y[M+2]==42}function rr(y,M){if(y==null)return 0;if(y.a=0,y.sc="OK",M==null)return pn(y,2,"null VP8Io passed to VP8GetHeaders()");var C=M.data,B=M.w,X=M.ha;if(4>X)return pn(y,7,"Truncated header.");var te=C[B+0]|C[B+1]<<8|C[B+2]<<16,re=y.Od;if(re.Rb=!(1&te),re.td=te>>1&7,re.yd=te>>4&1,re.ub=te>>5,3<re.td)return pn(y,3,"Incorrect keyframe parameters.");if(!re.yd)return pn(y,4,"Frame not displayable.");B+=3,X-=3;var se=y.Kc;if(re.Rb){if(7>X)return pn(y,7,"cannot parse picture header");if(!vn(C,B,X))return pn(y,3,"Bad code word");se.c=16383&(C[B+4]<<8|C[B+3]),se.Td=C[B+4]>>6,se.i=16383&(C[B+6]<<8|C[B+5]),se.Ud=C[B+6]>>6,B+=7,X-=7,y.za=se.c+15>>4,y.Ub=se.i+15>>4,M.width=se.c,M.height=se.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,i((te=y.Pa).jb,0,255,te.jb.length),e((te=y.Qa)!=null),te.Cb=0,te.Bb=0,te.Fb=1,i(te.Zb,0,0,te.Zb.length),i(te.Lb,0,0,te.Lb)}if(re.ub>X)return pn(y,7,"bad partition length");J(te=y.m,C,B,re.ub),B+=re.ub,X-=re.ub,re.Rb&&(se.Ld=Ee(te),se.Kd=Ee(te)),se=y.Qa;var le,ge=y.Pa;if(e(te!=null),e(se!=null),se.Cb=Ee(te),se.Cb){if(se.Bb=Ee(te),Ee(te)){for(se.Fb=Ee(te),le=0;4>le;++le)se.Zb[le]=Ee(te)?ce(te,7):0;for(le=0;4>le;++le)se.Lb[le]=Ee(te)?ce(te,6):0}if(se.Bb)for(le=0;3>le;++le)ge.jb[le]=Ee(te)?ie(te,8):255}else se.Bb=0;if(te.Ka)return pn(y,3,"cannot parse segment header");if((se=y.ed).zd=Ee(te),se.Tb=ie(te,6),se.wb=ie(te,3),se.Pc=Ee(te),se.Pc&&Ee(te)){for(ge=0;4>ge;++ge)Ee(te)&&(se.vd[ge]=ce(te,6));for(ge=0;4>ge;++ge)Ee(te)&&(se.od[ge]=ce(te,6))}if(y.L=se.Tb==0?0:se.zd?1:2,te.Ka)return pn(y,3,"cannot parse filter header");var ye=X;if(X=le=B,B=le+ye,se=ye,y.Xb=(1<<ie(y.m,2))-1,ye<3*(ge=y.Xb))C=7;else{for(le+=3*ge,se-=3*ge,ye=0;ye<ge;++ye){var We=C[X+0]|C[X+1]<<8|C[X+2]<<16;We>se&&(We=se),J(y.Jc[+ye],C,le,We),le+=We,se-=We,X+=3}J(y.Jc[+ge],C,le,se),C=le<B?0:5}if(C!=0)return pn(y,C,"cannot parse partitions");for(C=ie(le=y.m,7),X=Ee(le)?ce(le,4):0,B=Ee(le)?ce(le,4):0,se=Ee(le)?ce(le,4):0,ge=Ee(le)?ce(le,4):0,le=Ee(le)?ce(le,4):0,ye=y.Qa,We=0;4>We;++We){if(ye.Cb){var je=ye.Zb[We];ye.Fb||(je+=C)}else{if(0<We){y.pb[We]=y.pb[0];continue}je=C}var Ue=y.pb[We];Ue.Sc[0]=vd[bs(je+X,127)],Ue.Sc[1]=bc[bs(je+0,127)],Ue.Eb[0]=2*vd[bs(je+B,127)],Ue.Eb[1]=101581*bc[bs(je+se,127)]>>16,8>Ue.Eb[1]&&(Ue.Eb[1]=8),Ue.Qc[0]=vd[bs(je+ge,117)],Ue.Qc[1]=bc[bs(je+le,127)],Ue.lc=je+le}if(!re.Rb)return pn(y,4,"Not a key frame.");for(Ee(te),re=y.Pa,C=0;4>C;++C){for(X=0;8>X;++X)for(B=0;3>B;++B)for(se=0;11>se;++se)ge=Ce(te,d1[C][X][B][se])?ie(te,8):Am[C][X][B][se],re.Wc[C][X].Yb[B][se]=ge;for(X=0;17>X;++X)re.Xc[C][X]=re.Wc[C][p1[X]]}return y.kc=Ee(te),y.kc&&(y.Bd=ie(te,8)),y.cb=1}function Yn(y,M,C,B,X,te,re){var se=M[X].Yb[C];for(C=0;16>X;++X){if(!Ce(y,se[C+0]))return X;for(;!Ce(y,se[C+1]);)if(se=M[++X].Yb[0],C=0,X==16)return 16;var le=M[X+1].Yb;if(Ce(y,se[C+2])){var ge=y,ye=0;if(Ce(ge,(je=se)[(We=C)+3]))if(Ce(ge,je[We+6])){for(se=0,We=2*(ye=Ce(ge,je[We+8]))+(je=Ce(ge,je[We+9+ye])),ye=0,je=Sx[We];je[se];++se)ye+=ye+Ce(ge,je[se]);ye+=3+(8<<We)}else Ce(ge,je[We+7])?(ye=7+2*Ce(ge,165),ye+=Ce(ge,145)):ye=5+Ce(ge,159);else ye=Ce(ge,je[We+4])?3+Ce(ge,je[We+5]):2;se=le[2]}else ye=1,se=le[1];le=re+_x[X],0>(ge=y).b&&we(ge);var We,je=ge.b,Ue=(We=ge.Ca>>1)-(ge.I>>je)>>31;--ge.b,ge.Ca+=Ue,ge.Ca|=1,ge.I-=(We+1&Ue)<<je,te[le]=((ye^Ue)-Ue)*B[(0<X)+0]}return 16}function or(y){var M=y.rb[y.sb-1];M.la=0,M.Na=0,i(y.zc,0,0,y.zc.length),y.ja=0}function zr(y,M){if(y==null)return 0;if(M==null)return pn(y,2,"NULL VP8Io parameter in VP8Decode().");if(!y.cb&&!rr(y,M))return 0;if(e(y.cb),M.ac==null||M.ac(M)){M.ob&&(y.L=0);var C=$h[y.L];if(y.L==2?(y.yb=0,y.zb=0):(y.yb=M.v-C>>4,y.zb=M.j-C>>4,0>y.yb&&(y.yb=0),0>y.zb&&(y.zb=0)),y.Va=M.o+15+C>>4,y.Hb=M.va+15+C>>4,y.Hb>y.za&&(y.Hb=y.za),y.Va>y.Ub&&(y.Va=y.Ub),0<y.L){var B=y.ed;for(C=0;4>C;++C){var X;if(y.Qa.Cb){var te=y.Qa.Lb[C];y.Qa.Fb||(te+=B.Tb)}else te=B.Tb;for(X=0;1>=X;++X){var re=y.gd[C][X],se=te;if(B.Pc&&(se+=B.vd[0],X&&(se+=B.od[0])),0<(se=0>se?0:63<se?63:se)){var le=se;0<B.wb&&(le=4<B.wb?le>>2:le>>1)>9-B.wb&&(le=9-B.wb),1>le&&(le=1),re.dd=le,re.tc=2*se+le,re.ld=40<=se?2:15<=se?1:0}else re.tc=0;re.La=X}}}C=0}else pn(y,6,"Frame setup failed"),C=y.a;if(C=C==0){if(C){y.$c=0,0<y.Aa||(y.Ic=w1);e:{C=y.Ic,B=4*(le=y.za);var ge=32*le,ye=le+1,We=0<y.L?le*(0<y.Aa?2:1):0,je=(y.Aa==2?2:1)*le;if((re=B+832+(X=3*(16*C+$h[y.L])/2*ge)+(te=y.Fa!=null&&0<y.Fa.length?y.Kc.c*y.Kc.i:0))!=re)C=0;else{if(re>y.Vb){if(y.Vb=0,y.Ec=s(re),y.Fc=0,y.Ec==null){C=pn(y,1,"no memory during frame initialization.");break e}y.Vb=re}re=y.Ec,se=y.Fc,y.Ac=re,y.Bc=se,se+=B,y.Gd=o(ge,Vt),y.Hd=0,y.rb=o(ye+1,Dt),y.sb=1,y.wa=We?o(We,kt):null,y.Y=0,y.D.Nb=0,y.D.wa=y.wa,y.D.Y=y.Y,0<y.Aa&&(y.D.Y+=le),e(!0),y.oc=re,y.pc=se,se+=832,y.ya=o(je,on),y.aa=0,y.D.ya=y.ya,y.D.aa=y.aa,y.Aa==2&&(y.D.aa+=le),y.R=16*le,y.B=8*le,le=(ge=$h[y.L])*y.R,ge=ge/2*y.B,y.sa=re,y.ta=se+le,y.qa=y.sa,y.ra=y.ta+16*C*y.R+ge,y.Ha=y.qa,y.Ia=y.ra+8*C*y.B+ge,y.$c=0,se+=X,y.mb=te?re:null,y.nb=te?se:null,e(se+te<=y.Fc+y.Vb),or(y),i(y.Ac,y.Bc,0,B),C=1}}if(C){if(M.ka=0,M.y=y.sa,M.O=y.ta,M.f=y.qa,M.N=y.ra,M.ea=y.Ha,M.Vd=y.Ia,M.fa=y.R,M.Rc=y.B,M.F=null,M.J=0,!Vh){for(C=-255;255>=C;++C)Qr[255+C]=0>C?-C:C;for(C=-1020;1020>=C;++C)ya[1020+C]=-128>C?-128:127<C?127:C;for(C=-112;112>=C;++C)wc[112+C]=-16>C?-16:15<C?15:C;for(C=-255;510>=C;++C)Su[255+C]=0>C?0:255<C?255:C;Vh=1}_r=ac,_o=Uo,xu=Fi,zi=vo,Vr=lu,Gr=Mr,Wo=pu,Pr=Ga,vi=Hh,Or=fa,ga=hd,bo=Pl,jo=os,xc=no,Jr=du,va=ha,wu=Ai,Is=fc,Mo[0]=ua,Mo[1]=lc,Mo[2]=ld,Mo[3]=_m,Mo[4]=ri,Mo[5]=cc,Mo[6]=uc,Mo[7]=uu,Mo[8]=hc,Mo[9]=bm,qa[0]=ad,qa[1]=Sm,qa[2]=Bo,qa[3]=Ll,qa[4]=Ui,qa[5]=Qn,qa[6]=Bh,xa[0]=Wi,xa[1]=wm,xa[2]=yo,xa[3]=zh,xa[4]=ca,xa[5]=zo,xa[6]=hu,C=1}else C=0}C&&(C=function(Ue,St){for(Ue.M=0;Ue.M<Ue.Va;++Ue.M){var tt,ke=Ue.Jc[Ue.M&Ue.Xb],Ie=Ue.m,yt=Ue;for(tt=0;tt<yt.za;++tt){var _t=Ie,wt=yt,qt=wt.Ac,Ot=wt.Bc+4*tt,hn=wt.zc,Bt=wt.ya[wt.aa+tt];if(wt.Qa.Bb?Bt.$b=Ce(_t,wt.Pa.jb[0])?2+Ce(_t,wt.Pa.jb[2]):Ce(_t,wt.Pa.jb[1]):Bt.$b=0,wt.kc&&(Bt.Ad=Ce(_t,wt.Bd)),Bt.Za=!Ce(_t,145)+0,Bt.Za){var ir=Bt.Ob,dr=0;for(wt=0;4>wt;++wt){var Zn,Hn=hn[0+wt];for(Zn=0;4>Zn;++Zn){Hn=bx[qt[Ot+Zn]][Hn];for(var Er=yd[Ce(_t,Hn[0])];0<Er;)Er=yd[2*Er+Ce(_t,Hn[Er])];Hn=-Er,qt[Ot+Zn]=Hn}r(ir,dr,qt,Ot,4),dr+=4,hn[0+wt]=Hn}}else Hn=Ce(_t,156)?Ce(_t,128)?1:3:Ce(_t,163)?2:0,Bt.Ob[0]=Hn,i(qt,Ot,Hn,4),i(hn,0,Hn,4);Bt.Dd=Ce(_t,142)?Ce(_t,114)?Ce(_t,183)?1:3:2:0}if(yt.m.Ka)return pn(Ue,7,"Premature end-of-partition0 encountered.");for(;Ue.ja<Ue.za;++Ue.ja){if(yt=ke,_t=(Ie=Ue).rb[Ie.sb-1],qt=Ie.rb[Ie.sb+Ie.ja],tt=Ie.ya[Ie.aa+Ie.ja],Ot=Ie.kc?tt.Ad:0)_t.la=qt.la=0,tt.Za||(_t.Na=qt.Na=0),tt.Hc=0,tt.Gc=0,tt.ia=0;else{var br,Ln;if(_t=qt,qt=yt,Ot=Ie.Pa.Xc,hn=Ie.ya[Ie.aa+Ie.ja],Bt=Ie.pb[hn.$b],wt=hn.ad,ir=0,dr=Ie.rb[Ie.sb-1],Hn=Zn=0,i(wt,ir,0,384),hn.Za)var ii=0,As=Ot[3];else{Er=s(16);var si=_t.Na+dr.Na;if(si=Xh(qt,Ot[1],si,Bt.Eb,0,Er,0),_t.Na=dr.Na=(0<si)+0,1<si)_r(Er,0,wt,ir);else{var Yi=Er[0]+3>>3;for(Er=0;256>Er;Er+=16)wt[ir+Er]=Yi}ii=1,As=Ot[0]}var lr=15&_t.la,fs=15&dr.la;for(Er=0;4>Er;++Er){var ds=1&fs;for(Yi=Ln=0;4>Yi;++Yi)lr=lr>>1|(ds=(si=Xh(qt,As,si=ds+(1&lr),Bt.Sc,ii,wt,ir))>ii)<<7,Ln=Ln<<2|(3<si?3:1<si?2:wt[ir+0]!=0),ir+=16;lr>>=4,fs=fs>>1|ds<<7,Zn=(Zn<<8|Ln)>>>0}for(As=lr,ii=fs>>4,br=0;4>br;br+=2){for(Ln=0,lr=_t.la>>4+br,fs=dr.la>>4+br,Er=0;2>Er;++Er){for(ds=1&fs,Yi=0;2>Yi;++Yi)si=ds+(1&lr),lr=lr>>1|(ds=0<(si=Xh(qt,Ot[2],si,Bt.Qc,0,wt,ir)))<<3,Ln=Ln<<2|(3<si?3:1<si?2:wt[ir+0]!=0),ir+=16;lr>>=2,fs=fs>>1|ds<<5}Hn|=Ln<<4*br,As|=lr<<4<<br,ii|=(240&fs)<<br}_t.la=As,dr.la=ii,hn.Hc=Zn,hn.Gc=Hn,hn.ia=43690&Hn?0:Bt.ia,Ot=!(Zn|Hn)}if(0<Ie.L&&(Ie.wa[Ie.Y+Ie.ja]=Ie.gd[tt.$b][tt.Za],Ie.wa[Ie.Y+Ie.ja].La|=!Ot),yt.Ka)return pn(Ue,7,"Premature end-of-file encountered.")}if(or(Ue),Ie=St,yt=1,tt=(ke=Ue).D,_t=0<ke.L&&ke.M>=ke.zb&&ke.M<=ke.Va,ke.Aa==0)e:{if(tt.M=ke.M,tt.uc=_t,ja(ke,tt),yt=1,tt=(Ln=ke.D).Nb,_t=(Hn=$h[ke.L])*ke.R,qt=Hn/2*ke.B,Er=16*tt*ke.R,Yi=8*tt*ke.B,Ot=ke.sa,hn=ke.ta-_t+Er,Bt=ke.qa,wt=ke.ra-qt+Yi,ir=ke.Ha,dr=ke.Ia-qt+Yi,fs=(lr=Ln.M)==0,Zn=lr>=ke.Va-1,ke.Aa==2&&ja(ke,Ln),Ln.uc)for(ds=(si=ke).D.M,e(si.D.uc),Ln=si.yb;Ln<si.Hb;++Ln){ii=Ln,As=ds;var oi=(ai=(Pn=si).D).Nb;br=Pn.R;var ai=ai.wa[ai.Y+ii],$i=Pn.sa,Ds=Pn.ta+16*oi*br+16*ii,Ao=ai.dd,Li=ai.tc;if(Li!=0)if(e(3<=Li),Pn.L==1)0<ii&&va($i,Ds,br,Li+4),ai.La&&Is($i,Ds,br,Li),0<As&&Jr($i,Ds,br,Li+4),ai.La&&wu($i,Ds,br,Li);else{var qo=Pn.B,bu=Pn.qa,Xa=Pn.ra+8*oi*qo+8*ii,Sa=Pn.Ha,Pn=Pn.Ia+8*oi*qo+8*ii;oi=ai.ld,0<ii&&(Pr($i,Ds,br,Li+4,Ao,oi),Or(bu,Xa,Sa,Pn,qo,Li+4,Ao,oi)),ai.La&&(bo($i,Ds,br,Li,Ao,oi),xc(bu,Xa,Sa,Pn,qo,Li,Ao,oi)),0<As&&(Wo($i,Ds,br,Li+4,Ao,oi),vi(bu,Xa,Sa,Pn,qo,Li+4,Ao,oi)),ai.La&&(ga($i,Ds,br,Li,Ao,oi),jo(bu,Xa,Sa,Pn,qo,Li,Ao,oi))}}if(ke.ia&&alert("todo:DitherRow"),Ie.put!=null){if(Ln=16*lr,lr=16*(lr+1),fs?(Ie.y=ke.sa,Ie.O=ke.ta+Er,Ie.f=ke.qa,Ie.N=ke.ra+Yi,Ie.ea=ke.Ha,Ie.W=ke.Ia+Yi):(Ln-=Hn,Ie.y=Ot,Ie.O=hn,Ie.f=Bt,Ie.N=wt,Ie.ea=ir,Ie.W=dr),Zn||(lr-=Hn),lr>Ie.o&&(lr=Ie.o),Ie.F=null,Ie.J=null,ke.Fa!=null&&0<ke.Fa.length&&Ln<lr&&(Ie.J=pc(ke,Ie,Ln,lr-Ln),Ie.F=ke.mb,Ie.F==null&&Ie.F.length==0)){yt=pn(ke,3,"Could not decode alpha data.");break e}Ln<Ie.j&&(Hn=Ie.j-Ln,Ln=Ie.j,e(!(1&Hn)),Ie.O+=ke.R*Hn,Ie.N+=ke.B*(Hn>>1),Ie.W+=ke.B*(Hn>>1),Ie.F!=null&&(Ie.J+=Ie.width*Hn)),Ln<lr&&(Ie.O+=Ie.v,Ie.N+=Ie.v>>1,Ie.W+=Ie.v>>1,Ie.F!=null&&(Ie.J+=Ie.v),Ie.ka=Ln-Ie.j,Ie.U=Ie.va-Ie.v,Ie.T=lr-Ln,yt=Ie.put(Ie))}tt+1!=ke.Ic||Zn||(r(ke.sa,ke.ta-_t,Ot,hn+16*ke.R,_t),r(ke.qa,ke.ra-qt,Bt,wt+8*ke.B,qt),r(ke.Ha,ke.Ia-qt,ir,dr+8*ke.B,qt))}if(!yt)return pn(Ue,6,"Output aborted.")}return 1}(y,M)),M.bc!=null&&M.bc(M),C&=1}return C?(y.cb=0,C):0}function cn(y,M,C,B,X){X=y[M+C+32*B]+(X>>3),y[M+C+32*B]=-256&X?0>X?0:255:X}function xr(y,M,C,B,X,te){cn(y,M,0,C,B+X),cn(y,M,1,C,B+te),cn(y,M,2,C,B-te),cn(y,M,3,C,B-X)}function Cn(y){return(20091*y>>16)+y}function zn(y,M,C,B){var X,te=0,re=s(16);for(X=0;4>X;++X){var se=y[M+0]+y[M+8],le=y[M+0]-y[M+8],ge=(35468*y[M+4]>>16)-Cn(y[M+12]),ye=Cn(y[M+4])+(35468*y[M+12]>>16);re[te+0]=se+ye,re[te+1]=le+ge,re[te+2]=le-ge,re[te+3]=se-ye,te+=4,M++}for(X=te=0;4>X;++X)se=(y=re[te+0]+4)+re[te+8],le=y-re[te+8],ge=(35468*re[te+4]>>16)-Cn(re[te+12]),cn(C,B,0,0,se+(ye=Cn(re[te+4])+(35468*re[te+12]>>16))),cn(C,B,1,0,le+ge),cn(C,B,2,0,le-ge),cn(C,B,3,0,se-ye),te++,B+=32}function Mr(y,M,C,B){var X=y[M+0]+4,te=35468*y[M+4]>>16,re=Cn(y[M+4]),se=35468*y[M+1]>>16;xr(C,B,0,X+re,y=Cn(y[M+1]),se),xr(C,B,1,X+te,y,se),xr(C,B,2,X-te,y,se),xr(C,B,3,X-re,y,se)}function Uo(y,M,C,B,X){zn(y,M,C,B),X&&zn(y,M+16,C,B+4)}function Fi(y,M,C,B){_o(y,M+0,C,B,1),_o(y,M+32,C,B+128,1)}function vo(y,M,C,B){var X;for(y=y[M+0]+4,X=0;4>X;++X)for(M=0;4>M;++M)cn(C,B,M,X,y)}function lu(y,M,C,B){y[M+0]&&zi(y,M+0,C,B),y[M+16]&&zi(y,M+16,C,B+4),y[M+32]&&zi(y,M+32,C,B+128),y[M+48]&&zi(y,M+48,C,B+128+4)}function ac(y,M,C,B){var X,te=s(16);for(X=0;4>X;++X){var re=y[M+0+X]+y[M+12+X],se=y[M+4+X]+y[M+8+X],le=y[M+4+X]-y[M+8+X],ge=y[M+0+X]-y[M+12+X];te[0+X]=re+se,te[8+X]=re-se,te[4+X]=ge+le,te[12+X]=ge-le}for(X=0;4>X;++X)re=(y=te[0+4*X]+3)+te[3+4*X],se=te[1+4*X]+te[2+4*X],le=te[1+4*X]-te[2+4*X],ge=y-te[3+4*X],C[B+0]=re+se>>3,C[B+16]=ge+le>>3,C[B+32]=re-se>>3,C[B+48]=ge-le>>3,B+=64}function Ha(y,M,C){var B,X=M-32,te=Es,re=255-y[X-1];for(B=0;B<C;++B){var se,le=te,ge=re+y[M-1];for(se=0;se<C;++se)y[M+se]=le[ge+y[X+se]];M+=32}}function lc(y,M){Ha(y,M,4)}function wm(y,M){Ha(y,M,8)}function Sm(y,M){Ha(y,M,16)}function Bo(y,M){var C;for(C=0;16>C;++C)r(y,M+32*C,y,M-32,16)}function Ll(y,M){var C;for(C=16;0<C;--C)i(y,M,y[M-1],16),M+=32}function la(y,M,C){var B;for(B=0;16>B;++B)i(M,C+32*B,y,16)}function ad(y,M){var C,B=16;for(C=0;16>C;++C)B+=y[M-1+32*C]+y[M+C-32];la(B>>5,y,M)}function Ui(y,M){var C,B=8;for(C=0;16>C;++C)B+=y[M-1+32*C];la(B>>4,y,M)}function Qn(y,M){var C,B=8;for(C=0;16>C;++C)B+=y[M+C-32];la(B>>4,y,M)}function Bh(y,M){la(128,y,M)}function wn(y,M,C){return y+2*M+C+2>>2}function ld(y,M){var C,B=M-32;for(B=new Uint8Array([wn(y[B-1],y[B+0],y[B+1]),wn(y[B+0],y[B+1],y[B+2]),wn(y[B+1],y[B+2],y[B+3]),wn(y[B+2],y[B+3],y[B+4])]),C=0;4>C;++C)r(y,M+32*C,B,0,B.length)}function _m(y,M){var C=y[M-1],B=y[M-1+32],X=y[M-1+64],te=y[M-1+96];Ye(y,M+0,16843009*wn(y[M-1-32],C,B)),Ye(y,M+32,16843009*wn(C,B,X)),Ye(y,M+64,16843009*wn(B,X,te)),Ye(y,M+96,16843009*wn(X,te,te))}function ua(y,M){var C,B=4;for(C=0;4>C;++C)B+=y[M+C-32]+y[M-1+32*C];for(B>>=3,C=0;4>C;++C)i(y,M+32*C,B,4)}function ri(y,M){var C=y[M-1+0],B=y[M-1+32],X=y[M-1+64],te=y[M-1-32],re=y[M+0-32],se=y[M+1-32],le=y[M+2-32],ge=y[M+3-32];y[M+0+96]=wn(B,X,y[M-1+96]),y[M+1+96]=y[M+0+64]=wn(C,B,X),y[M+2+96]=y[M+1+64]=y[M+0+32]=wn(te,C,B),y[M+3+96]=y[M+2+64]=y[M+1+32]=y[M+0+0]=wn(re,te,C),y[M+3+64]=y[M+2+32]=y[M+1+0]=wn(se,re,te),y[M+3+32]=y[M+2+0]=wn(le,se,re),y[M+3+0]=wn(ge,le,se)}function uc(y,M){var C=y[M+1-32],B=y[M+2-32],X=y[M+3-32],te=y[M+4-32],re=y[M+5-32],se=y[M+6-32],le=y[M+7-32];y[M+0+0]=wn(y[M+0-32],C,B),y[M+1+0]=y[M+0+32]=wn(C,B,X),y[M+2+0]=y[M+1+32]=y[M+0+64]=wn(B,X,te),y[M+3+0]=y[M+2+32]=y[M+1+64]=y[M+0+96]=wn(X,te,re),y[M+3+32]=y[M+2+64]=y[M+1+96]=wn(te,re,se),y[M+3+64]=y[M+2+96]=wn(re,se,le),y[M+3+96]=wn(se,le,le)}function cc(y,M){var C=y[M-1+0],B=y[M-1+32],X=y[M-1+64],te=y[M-1-32],re=y[M+0-32],se=y[M+1-32],le=y[M+2-32],ge=y[M+3-32];y[M+0+0]=y[M+1+64]=te+re+1>>1,y[M+1+0]=y[M+2+64]=re+se+1>>1,y[M+2+0]=y[M+3+64]=se+le+1>>1,y[M+3+0]=le+ge+1>>1,y[M+0+96]=wn(X,B,C),y[M+0+64]=wn(B,C,te),y[M+0+32]=y[M+1+96]=wn(C,te,re),y[M+1+32]=y[M+2+96]=wn(te,re,se),y[M+2+32]=y[M+3+96]=wn(re,se,le),y[M+3+32]=wn(se,le,ge)}function uu(y,M){var C=y[M+0-32],B=y[M+1-32],X=y[M+2-32],te=y[M+3-32],re=y[M+4-32],se=y[M+5-32],le=y[M+6-32],ge=y[M+7-32];y[M+0+0]=C+B+1>>1,y[M+1+0]=y[M+0+64]=B+X+1>>1,y[M+2+0]=y[M+1+64]=X+te+1>>1,y[M+3+0]=y[M+2+64]=te+re+1>>1,y[M+0+32]=wn(C,B,X),y[M+1+32]=y[M+0+96]=wn(B,X,te),y[M+2+32]=y[M+1+96]=wn(X,te,re),y[M+3+32]=y[M+2+96]=wn(te,re,se),y[M+3+64]=wn(re,se,le),y[M+3+96]=wn(se,le,ge)}function bm(y,M){var C=y[M-1+0],B=y[M-1+32],X=y[M-1+64],te=y[M-1+96];y[M+0+0]=C+B+1>>1,y[M+2+0]=y[M+0+32]=B+X+1>>1,y[M+2+32]=y[M+0+64]=X+te+1>>1,y[M+1+0]=wn(C,B,X),y[M+3+0]=y[M+1+32]=wn(B,X,te),y[M+3+32]=y[M+1+64]=wn(X,te,te),y[M+3+64]=y[M+2+64]=y[M+0+96]=y[M+1+96]=y[M+2+96]=y[M+3+96]=te}function hc(y,M){var C=y[M-1+0],B=y[M-1+32],X=y[M-1+64],te=y[M-1+96],re=y[M-1-32],se=y[M+0-32],le=y[M+1-32],ge=y[M+2-32];y[M+0+0]=y[M+2+32]=C+re+1>>1,y[M+0+32]=y[M+2+64]=B+C+1>>1,y[M+0+64]=y[M+2+96]=X+B+1>>1,y[M+0+96]=te+X+1>>1,y[M+3+0]=wn(se,le,ge),y[M+2+0]=wn(re,se,le),y[M+1+0]=y[M+3+32]=wn(C,re,se),y[M+1+32]=y[M+3+64]=wn(B,C,re),y[M+1+64]=y[M+3+96]=wn(X,B,C),y[M+1+96]=wn(te,X,B)}function yo(y,M){var C;for(C=0;8>C;++C)r(y,M+32*C,y,M-32,8)}function zh(y,M){var C;for(C=0;8>C;++C)i(y,M,y[M-1],8),M+=32}function cu(y,M,C){var B;for(B=0;8>B;++B)i(M,C+32*B,y,8)}function Wi(y,M){var C,B=8;for(C=0;8>C;++C)B+=y[M+C-32]+y[M-1+32*C];cu(B>>4,y,M)}function zo(y,M){var C,B=4;for(C=0;8>C;++C)B+=y[M+C-32];cu(B>>3,y,M)}function ca(y,M){var C,B=4;for(C=0;8>C;++C)B+=y[M-1+32*C];cu(B>>3,y,M)}function hu(y,M){cu(128,y,M)}function fu(y,M,C){var B=y[M-C],X=y[M+0],te=3*(X-B)+fd[1020+y[M-2*C]-y[M+C]],re=Wh[112+(te+4>>3)];y[M-C]=Es[255+B+Wh[112+(te+3>>3)]],y[M+0]=Es[255+X-re]}function ud(y,M,C,B){var X=y[M+0],te=y[M+C];return us[255+y[M-2*C]-y[M-C]]>B||us[255+te-X]>B}function to(y,M,C,B){return 4*us[255+y[M-C]-y[M+0]]+us[255+y[M-2*C]-y[M+C]]<=B}function cd(y,M,C,B,X){var te=y[M-3*C],re=y[M-2*C],se=y[M-C],le=y[M+0],ge=y[M+C],ye=y[M+2*C],We=y[M+3*C];return 4*us[255+se-le]+us[255+re-ge]>B?0:us[255+y[M-4*C]-te]<=X&&us[255+te-re]<=X&&us[255+re-se]<=X&&us[255+We-ye]<=X&&us[255+ye-ge]<=X&&us[255+ge-le]<=X}function du(y,M,C,B){var X=2*B+1;for(B=0;16>B;++B)to(y,M+B,C,X)&&fu(y,M+B,C)}function ha(y,M,C,B){var X=2*B+1;for(B=0;16>B;++B)to(y,M+B*C,1,X)&&fu(y,M+B*C,1)}function Ai(y,M,C,B){var X;for(X=3;0<X;--X)du(y,M+=4*C,C,B)}function fc(y,M,C,B){var X;for(X=3;0<X;--X)ha(y,M+=4,C,B)}function Ho(y,M,C,B,X,te,re,se){for(te=2*te+1;0<X--;){if(cd(y,M,C,te,re))if(ud(y,M,C,se))fu(y,M,C);else{var le=y,ge=M,ye=C,We=le[ge-2*ye],je=le[ge-ye],Ue=le[ge+0],St=le[ge+ye],tt=le[ge+2*ye],ke=27*(yt=fd[1020+3*(Ue-je)+fd[1020+We-St]])+63>>7,Ie=18*yt+63>>7,yt=9*yt+63>>7;le[ge-3*ye]=Es[255+le[ge-3*ye]+yt],le[ge-2*ye]=Es[255+We+Ie],le[ge-ye]=Es[255+je+ke],le[ge+0]=Es[255+Ue-ke],le[ge+ye]=Es[255+St-Ie],le[ge+2*ye]=Es[255+tt-yt]}M+=B}}function ss(y,M,C,B,X,te,re,se){for(te=2*te+1;0<X--;){if(cd(y,M,C,te,re))if(ud(y,M,C,se))fu(y,M,C);else{var le=y,ge=M,ye=C,We=le[ge-ye],je=le[ge+0],Ue=le[ge+ye],St=Wh[112+((tt=3*(je-We))+4>>3)],tt=Wh[112+(tt+3>>3)],ke=St+1>>1;le[ge-2*ye]=Es[255+le[ge-2*ye]+ke],le[ge-ye]=Es[255+We+tt],le[ge+0]=Es[255+je-St],le[ge+ye]=Es[255+Ue-ke]}M+=B}}function pu(y,M,C,B,X,te){Ho(y,M,C,1,16,B,X,te)}function Ga(y,M,C,B,X,te){Ho(y,M,1,C,16,B,X,te)}function hd(y,M,C,B,X,te){var re;for(re=3;0<re;--re)ss(y,M+=4*C,C,1,16,B,X,te)}function Pl(y,M,C,B,X,te){var re;for(re=3;0<re;--re)ss(y,M+=4,1,C,16,B,X,te)}function Hh(y,M,C,B,X,te,re,se){Ho(y,M,X,1,8,te,re,se),Ho(C,B,X,1,8,te,re,se)}function fa(y,M,C,B,X,te,re,se){Ho(y,M,1,X,8,te,re,se),Ho(C,B,1,X,8,te,re,se)}function os(y,M,C,B,X,te,re,se){ss(y,M+4*X,X,1,8,te,re,se),ss(C,B+4*X,X,1,8,te,re,se)}function no(y,M,C,B,X,te,re,se){ss(y,M+4,1,X,8,te,re,se),ss(C,B+4,1,X,8,te,re,se)}function ro(){this.ba=new Ge,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Et,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function mu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function dc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function xo(){this.ua=0,this.Wa=new ne,this.vb=new ne,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new G,this.yc=new z}function da(){this.xb=this.a=0,this.l=new Yt,this.ca=new Ge,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new D,this.Pb=0,this.wd=new D,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new xo,this.ab=0,this.gc=o(4,dc),this.Oc=0}function Va(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Yt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Rl(y,M,C,B,X,te,re){for(y=y==null?0:y[M+0],M=0;M<re;++M)X[te+M]=y+C[B+M]&255,y=X[te+M]}function kl(y,M,C,B,X,te,re){var se;if(y==null)Rl(null,null,C,B,X,te,re);else for(se=0;se<re;++se)X[te+se]=y[M+se]+C[B+se]&255}function Wa(y,M,C,B,X,te,re){if(y==null)Rl(null,null,C,B,X,te,re);else{var se,le=y[M+0],ge=le,ye=le;for(se=0;se<re;++se)ge=ye+(le=y[M+se])-ge,ye=C[B+se]+(-256&ge?0>ge?0:255:ge)&255,ge=le,X[te+se]=ye}}function pc(y,M,C,B){var X=M.width,te=M.o;if(e(y!=null&&M!=null),0>C||0>=B||C+B>te)return null;if(!y.Cc){if(y.ga==null){var re;if(y.ga=new Va,(re=y.ga==null)||(re=M.width*M.o,e(y.Gb.length==0),y.Gb=s(re),y.Uc=0,y.Gb==null?re=0:(y.mb=y.Gb,y.nb=y.Uc,y.rc=null,re=1),re=!re),!re){re=y.ga;var se=y.Fa,le=y.P,ge=y.qc,ye=y.mb,We=y.nb,je=le+1,Ue=ge-1,St=re.l;if(e(se!=null&&ye!=null&&M!=null),Eo[0]=null,Eo[1]=Rl,Eo[2]=kl,Eo[3]=Wa,re.ca=ye,re.tb=We,re.c=M.width,re.i=M.height,e(0<re.c&&0<re.i),1>=ge)M=0;else if(re.$a=se[le+0]>>0&3,re.Z=se[le+0]>>2&3,re.Lc=se[le+0]>>4&3,le=se[le+0]>>6&3,0>re.$a||1<re.$a||4<=re.Z||1<re.Lc||le)M=0;else if(St.put=fn,St.ac=Mn,St.bc=Xn,St.ma=re,St.width=M.width,St.height=M.height,St.Da=M.Da,St.v=M.v,St.va=M.va,St.j=M.j,St.o=M.o,re.$a)e:{e(re.$a==1),M=me();t:for(;;){if(M==null){M=0;break e}if(e(re!=null),re.mc=M,M.c=re.c,M.i=re.i,M.l=re.l,M.l.ma=re,M.l.width=re.c,M.l.height=re.i,M.a=0,W(M.m,se,je,Ue),!de(re.c,re.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&is(M.s)?(re.ic=1,se=M.c*M.i,M.Ta=null,M.Ua=0,M.V=s(se),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(re.ic=0,M=xe(M,re.c)),!M))break t;M=1;break e}re.mc=null,M=0}else M=Ue>=re.c*re.i;re=!M}if(re)return null;y.ga.Lc!=1?y.Ga=0:B=te-C}e(y.ga!=null),e(C+B<=te);e:{if(M=(se=y.ga).c,te=se.l.o,se.$a==0){if(je=y.rc,Ue=y.Vc,St=y.Fa,le=y.P+1+C*M,ge=y.mb,ye=y.nb+C*M,e(le<=y.P+y.qc),se.Z!=0)for(e(Eo[se.Z]!=null),re=0;re<B;++re)Eo[se.Z](je,Ue,St,le,ge,ye,M),je=ge,Ue=ye,ye+=M,le+=M;else for(re=0;re<B;++re)r(ge,ye,St,le,M),je=ge,Ue=ye,ye+=M,le+=M;y.rc=je,y.Vc=Ue}else{if(e(se.mc!=null),M=C+B,e((re=se.mc)!=null),e(M<=re.i),re.C>=M)M=1;else if(se.ic||He(),se.ic){se=re.V,je=re.Ba,Ue=re.c;var tt=re.i,ke=(St=1,le=re.$/Ue,ge=re.$%Ue,ye=re.m,We=re.s,re.$),Ie=Ue*tt,yt=Ue*M,_t=We.wc,wt=ke<yt?sr(We,ge,le):null;e(ke<=Ie),e(M<=tt),e(is(We));t:for(;;){for(;!ye.h&&ke<yt;){if(ge&_t||(wt=sr(We,ge,le)),e(wt!=null),fe(ye),256>(tt=yr(wt.G[0],wt.H[0],ye)))se[je+ke]=tt,++ke,++ge>=Ue&&(ge=0,++le<=M&&!(le%16)&&q(re,le));else{if(!(280>tt)){St=0;break t}tt=ti(tt-256,ye);var qt,Ot=yr(wt.G[4],wt.H[4],ye);if(fe(ye),!(ke>=(Ot=ni(Ue,Ot=ti(Ot,ye)))&&Ie-ke>=tt)){St=0;break t}for(qt=0;qt<tt;++qt)se[je+ke+qt]=se[je+ke+qt-Ot];for(ke+=tt,ge+=tt;ge>=Ue;)ge-=Ue,++le<=M&&!(le%16)&&q(re,le);ke<yt&&ge&_t&&(wt=sr(We,ge,le))}e(ye.h==K(ye))}q(re,le>M?M:le);break t}!St||ye.h&&ke<Ie?(St=0,re.a=ye.h?5:3):re.$=ke,M=St}else M=O(re,re.V,re.Ba,re.c,re.i,M,Ve);if(!M){B=0;break e}}C+B>=te&&(y.Cc=1),B=1}if(!B)return null;if(y.Cc&&((B=y.ga)!=null&&(B.mc=null),y.ga=null,0<y.Ga))return alert("todo:WebPDequantizeLevels"),null}return y.nb+C*X}function A(y,M,C,B,X,te){for(;0<X--;){var re,se=y,le=M+(C?1:0),ge=y,ye=M+(C?0:3);for(re=0;re<B;++re){var We=ge[ye+4*re];We!=255&&(We*=32897,se[le+4*re+0]=se[le+4*re+0]*We>>23,se[le+4*re+1]=se[le+4*re+1]*We>>23,se[le+4*re+2]=se[le+4*re+2]*We>>23)}M+=te}}function Z(y,M,C,B,X){for(;0<B--;){var te;for(te=0;te<C;++te){var re=y[M+2*te+0],se=15&(ge=y[M+2*te+1]),le=4369*se,ge=(240&ge|ge>>4)*le>>16;y[M+2*te+0]=(240&re|re>>4)*le>>16&240|(15&re|re<<4)*le>>16>>4&15,y[M+2*te+1]=240&ge|se}M+=X}}function be(y,M,C,B,X,te,re,se){var le,ge,ye=255;for(ge=0;ge<X;++ge){for(le=0;le<B;++le){var We=y[M+le];te[re+4*le]=We,ye&=We}M+=C,re+=se}return ye!=255}function Pe(y,M,C,B,X){var te;for(te=0;te<X;++te)C[B+te]=y[M+te]>>8}function He(){yi=A,$n=Z,ar=be,Fr=Pe}function at(y,M,C){k[y]=function(B,X,te,re,se,le,ge,ye,We,je,Ue,St,tt,ke,Ie,yt,_t){var wt,qt=_t-1>>1,Ot=se[le+0]|ge[ye+0]<<16,hn=We[je+0]|Ue[St+0]<<16;e(B!=null);var Bt=3*Ot+hn+131074>>2;for(M(B[X+0],255&Bt,Bt>>16,tt,ke),te!=null&&(Bt=3*hn+Ot+131074>>2,M(te[re+0],255&Bt,Bt>>16,Ie,yt)),wt=1;wt<=qt;++wt){var ir=se[le+wt]|ge[ye+wt]<<16,dr=We[je+wt]|Ue[St+wt]<<16,Zn=Ot+ir+hn+dr+524296,Hn=Zn+2*(ir+hn)>>3;Bt=Hn+Ot>>1,Ot=(Zn=Zn+2*(Ot+dr)>>3)+ir>>1,M(B[X+2*wt-1],255&Bt,Bt>>16,tt,ke+(2*wt-1)*C),M(B[X+2*wt-0],255&Ot,Ot>>16,tt,ke+(2*wt-0)*C),te!=null&&(Bt=Zn+hn>>1,Ot=Hn+dr>>1,M(te[re+2*wt-1],255&Bt,Bt>>16,Ie,yt+(2*wt-1)*C),M(te[re+2*wt+0],255&Ot,Ot>>16,Ie,yt+(2*wt+0)*C)),Ot=ir,hn=dr}1&_t||(Bt=3*Ot+hn+131074>>2,M(B[X+_t-1],255&Bt,Bt>>16,tt,ke+(_t-1)*C),te!=null&&(Bt=3*hn+Ot+131074>>2,M(te[re+_t-1],255&Bt,Bt>>16,Ie,yt+(_t-1)*C)))}}function Mt(){cs[jh]=xd,cs[_u]=Cm,cs[qh]=wd,cs[Sc]=Mc,cs[Dl]=Xi,cs[dd]=m1,cs[Mm]=Mx,cs[pd]=Cm,cs[md]=Mc,cs[_c]=Xi,cs[gd]=m1}function Ht(y){return y&~g1?0>y?0:255:y>>Lm}function rn(y,M){return Ht((19077*y>>8)+(26149*M>>8)-14234)}function bn(y,M,C){return Ht((19077*y>>8)-(6419*M>>8)-(13320*C>>8)+8708)}function ln(y,M){return Ht((19077*y>>8)+(33050*M>>8)-17685)}function An(y,M,C,B,X){B[X+0]=rn(y,C),B[X+1]=bn(y,M,C),B[X+2]=ln(y,M)}function gr(y,M,C,B,X){B[X+0]=ln(y,M),B[X+1]=bn(y,M,C),B[X+2]=rn(y,C)}function fr(y,M,C,B,X){var te=bn(y,M,C);M=te<<3&224|ln(y,M)>>3,B[X+0]=248&rn(y,C)|te>>5,B[X+1]=M}function wr(y,M,C,B,X){var te=240&ln(y,M)|15;B[X+0]=240&rn(y,C)|bn(y,M,C)>>4,B[X+1]=te}function Zr(y,M,C,B,X){B[X+0]=255,An(y,M,C,B,X+1)}function Ti(y,M,C,B,X){gr(y,M,C,B,X),B[X+3]=255}function io(y,M,C,B,X){An(y,M,C,B,X),B[X+3]=255}function bs(y,M){return 0>y?0:y>M?M:y}function Kr(y,M,C){k[y]=function(B,X,te,re,se,le,ge,ye,We){for(var je=ye+(-2&We)*C;ye!=je;)M(B[X+0],te[re+0],se[le+0],ge,ye),M(B[X+1],te[re+0],se[le+0],ge,ye+C),X+=2,++re,++le,ye+=2*C;1&We&&M(B[X+0],te[re+0],se[le+0],ge,ye)}}function as(y,M,C){return C==0?y==0?M==0?6:5:M==0?4:0:C}function Sr(y,M,C,B,X){switch(y>>>30){case 3:_o(M,C,B,X,0);break;case 2:Gr(M,C,B,X);break;case 1:zi(M,C,B,X)}}function ja(y,M){var C,B,X=M.M,te=M.Nb,re=y.oc,se=y.pc+40,le=y.oc,ge=y.pc+584,ye=y.oc,We=y.pc+600;for(C=0;16>C;++C)re[se+32*C-1]=129;for(C=0;8>C;++C)le[ge+32*C-1]=129,ye[We+32*C-1]=129;for(0<X?re[se-1-32]=le[ge-1-32]=ye[We-1-32]=129:(i(re,se-32-1,127,21),i(le,ge-32-1,127,9),i(ye,We-32-1,127,9)),B=0;B<y.za;++B){var je=M.ya[M.aa+B];if(0<B){for(C=-1;16>C;++C)r(re,se+32*C-4,re,se+32*C+12,4);for(C=-1;8>C;++C)r(le,ge+32*C-4,le,ge+32*C+4,4),r(ye,We+32*C-4,ye,We+32*C+4,4)}var Ue=y.Gd,St=y.Hd+B,tt=je.ad,ke=je.Hc;if(0<X&&(r(re,se-32,Ue[St].y,0,16),r(le,ge-32,Ue[St].f,0,8),r(ye,We-32,Ue[St].ea,0,8)),je.Za){var Ie=re,yt=se-32+16;for(0<X&&(B>=y.za-1?i(Ie,yt,Ue[St].y[15],4):r(Ie,yt,Ue[St+1].y,0,4)),C=0;4>C;C++)Ie[yt+128+C]=Ie[yt+256+C]=Ie[yt+384+C]=Ie[yt+0+C];for(C=0;16>C;++C,ke<<=2)Ie=re,yt=se+Yh[C],Mo[je.Ob[C]](Ie,yt),Sr(ke,tt,16*+C,Ie,yt)}else if(Ie=as(B,X,je.Ob[0]),qa[Ie](re,se),ke!=0)for(C=0;16>C;++C,ke<<=2)Sr(ke,tt,16*+C,re,se+Yh[C]);for(C=je.Gc,Ie=as(B,X,je.Dd),xa[Ie](le,ge),xa[Ie](ye,We),ke=tt,Ie=le,yt=ge,255&(je=C>>0)&&(170&je?xu(ke,256,Ie,yt):Vr(ke,256,Ie,yt)),je=ye,ke=We,255&(C>>=8)&&(170&C?xu(tt,320,je,ke):Vr(tt,320,je,ke)),X<y.Ub-1&&(r(Ue[St].y,0,re,se+480,16),r(Ue[St].f,0,le,ge+224,8),r(Ue[St].ea,0,ye,We+224,8)),C=8*te*y.B,Ue=y.sa,St=y.ta+16*B+16*te*y.R,tt=y.qa,je=y.ra+8*B+C,ke=y.Ha,Ie=y.Ia+8*B+C,C=0;16>C;++C)r(Ue,St+C*y.R,re,se+32*C,16);for(C=0;8>C;++C)r(tt,je+C*y.B,le,ge+32*C,8),r(ke,Ie+C*y.B,ye,We+32*C,8)}}function ls(y,M,C,B,X,te,re,se,le){var ge=[0],ye=[0],We=0,je=le!=null?le.kd:0,Ue=le??new mu;if(y==null||12>C)return 7;Ue.data=y,Ue.w=M,Ue.ha=C,M=[M],C=[C],Ue.gb=[Ue.gb];e:{var St=M,tt=C,ke=Ue.gb;if(e(y!=null),e(tt!=null),e(ke!=null),ke[0]=0,12<=tt[0]&&!t(y,St[0],"RIFF")){if(t(y,St[0]+8,"WEBP")){ke=3;break e}var Ie=Oe(y,St[0]+4);if(12>Ie||4294967286<Ie){ke=3;break e}if(je&&Ie>tt[0]-8){ke=7;break e}ke[0]=Ie,St[0]+=12,tt[0]-=12}ke=0}if(ke!=0)return ke;for(Ie=0<Ue.gb[0],C=C[0];;){e:{var yt=y;tt=M,ke=C;var _t=ge,wt=ye,qt=St=[0];if((Bt=We=[We])[0]=0,8>ke[0])ke=7;else{if(!t(yt,tt[0],"VP8X")){if(Oe(yt,tt[0]+4)!=10){ke=3;break e}if(18>ke[0]){ke=7;break e}var Ot=Oe(yt,tt[0]+8),hn=1+he(yt,tt[0]+12);if(2147483648<=hn*(yt=1+he(yt,tt[0]+15))){ke=3;break e}qt!=null&&(qt[0]=Ot),_t!=null&&(_t[0]=hn),wt!=null&&(wt[0]=yt),tt[0]+=18,ke[0]-=18,Bt[0]=1}ke=0}}if(We=We[0],St=St[0],ke!=0)return ke;if(tt=!!(2&St),!Ie&&We)return 3;if(te!=null&&(te[0]=!!(16&St)),re!=null&&(re[0]=tt),se!=null&&(se[0]=0),re=ge[0],St=ye[0],We&&tt&&le==null){ke=0;break}if(4>C){ke=7;break}if(Ie&&We||!Ie&&!We&&!t(y,M[0],"ALPH")){C=[C],Ue.na=[Ue.na],Ue.P=[Ue.P],Ue.Sa=[Ue.Sa];e:{Ot=y,ke=M,Ie=C;var Bt=Ue.gb;_t=Ue.na,wt=Ue.P,qt=Ue.Sa,hn=22,e(Ot!=null),e(Ie!=null),yt=ke[0];var ir=Ie[0];for(e(_t!=null),e(qt!=null),_t[0]=null,wt[0]=null,qt[0]=0;;){if(ke[0]=yt,Ie[0]=ir,8>ir){ke=7;break e}var dr=Oe(Ot,yt+4);if(4294967286<dr){ke=3;break e}var Zn=8+dr+1&-2;if(hn+=Zn,0<Bt&&hn>Bt){ke=3;break e}if(!t(Ot,yt,"VP8 ")||!t(Ot,yt,"VP8L")){ke=0;break e}if(ir[0]<Zn){ke=7;break e}t(Ot,yt,"ALPH")||(_t[0]=Ot,wt[0]=yt+8,qt[0]=dr),yt+=Zn,ir-=Zn}}if(C=C[0],Ue.na=Ue.na[0],Ue.P=Ue.P[0],Ue.Sa=Ue.Sa[0],ke!=0)break}C=[C],Ue.Ja=[Ue.Ja],Ue.xa=[Ue.xa];e:if(Bt=y,ke=M,Ie=C,_t=Ue.gb[0],wt=Ue.Ja,qt=Ue.xa,Ot=ke[0],yt=!t(Bt,Ot,"VP8 "),hn=!t(Bt,Ot,"VP8L"),e(Bt!=null),e(Ie!=null),e(wt!=null),e(qt!=null),8>Ie[0])ke=7;else{if(yt||hn){if(Bt=Oe(Bt,Ot+4),12<=_t&&Bt>_t-12){ke=3;break e}if(je&&Bt>Ie[0]-8){ke=7;break e}wt[0]=Bt,ke[0]+=8,Ie[0]-=8,qt[0]=hn}else qt[0]=5<=Ie[0]&&Bt[Ot+0]==47&&!(Bt[Ot+4]>>5),wt[0]=Ie[0];ke=0}if(C=C[0],Ue.Ja=Ue.Ja[0],Ue.xa=Ue.xa[0],M=M[0],ke!=0)break;if(4294967286<Ue.Ja)return 3;if(se==null||tt||(se[0]=Ue.xa?2:1),re=[re],St=[St],Ue.xa){if(5>C){ke=7;break}se=re,je=St,tt=te,y==null||5>C?y=0:5<=C&&y[M+0]==47&&!(y[M+4]>>5)?(Ie=[0],Bt=[0],_t=[0],W(wt=new D,y,M,C),Ft(wt,Ie,Bt,_t)?(se!=null&&(se[0]=Ie[0]),je!=null&&(je[0]=Bt[0]),tt!=null&&(tt[0]=_t[0]),y=1):y=0):y=0}else{if(10>C){ke=7;break}se=St,y==null||10>C||!vn(y,M+3,C-3)?y=0:(je=y[M+0]|y[M+1]<<8|y[M+2]<<16,tt=16383&(y[M+7]<<8|y[M+6]),y=16383&(y[M+9]<<8|y[M+8]),1&je||3<(je>>1&7)||!(je>>4&1)||je>>5>=Ue.Ja||!tt||!y?y=0:(re&&(re[0]=tt),se&&(se[0]=y),y=1))}if(!y||(re=re[0],St=St[0],We&&(ge[0]!=re||ye[0]!=St)))return 3;le!=null&&(le[0]=Ue,le.offset=M-le.w,e(4294967286>M-le.w),e(le.offset==le.ha-C));break}return ke==0||ke==7&&We&&le==null?(te!=null&&(te[0]|=Ue.na!=null&&0<Ue.na.length),B!=null&&(B[0]=re),X!=null&&(X[0]=St),0):ke}function mc(y,M,C){var B=M.width,X=M.height,te=0,re=0,se=B,le=X;if(M.Da=y!=null&&0<y.Da,M.Da&&(se=y.cd,le=y.bd,te=y.v,re=y.j,11>C||(te&=-2,re&=-2),0>te||0>re||0>=se||0>=le||te+se>B||re+le>X))return 0;if(M.v=te,M.j=re,M.va=te+se,M.o=re+le,M.U=se,M.T=le,M.da=y!=null&&0<y.da,M.da){if(!ut(se,le,C=[y.ib],te=[y.hb]))return 0;M.ib=C[0],M.hb=te[0]}return M.ob=y!=null&&y.ob,M.Kb=y==null||!y.Sd,M.da&&(M.ob=M.ib<3*B/4&&M.hb<3*X/4,M.Kb=0),1}function gc(y){if(y==null)return 2;if(11>y.S){var M=y.f.RGBA;M.fb+=(y.height-1)*M.A,M.A=-M.A}else M=y.f.kb,y=y.height,M.O+=(y-1)*M.fa,M.fa=-M.fa,M.N+=(y-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(y-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(y-1)*M.lb,M.lb=-M.lb);return 0}function Nl(y,M,C,B){if(B==null||0>=y||0>=M)return 2;if(C!=null){if(C.Da){var X=C.cd,te=C.bd,re=-2&C.v,se=-2&C.j;if(0>re||0>se||0>=X||0>=te||re+X>y||se+te>M)return 2;y=X,M=te}if(C.da){if(!ut(y,M,X=[C.ib],te=[C.hb]))return 2;y=X[0],M=te[0]}}B.width=y,B.height=M;e:{var le=B.width,ge=B.height;if(y=B.S,0>=le||0>=ge||!(y>=jh&&13>y))y=2;else{if(0>=B.Rd&&B.sd==null){re=te=X=M=0;var ye=(se=le*Im[y])*ge;if(11>y||(te=(ge+1)/2*(M=(le+1)/2),y==12&&(re=(X=le)*ge)),(ge=s(ye+2*te+re))==null){y=1;break e}B.sd=ge,11>y?((le=B.f.RGBA).eb=ge,le.fb=0,le.A=se,le.size=ye):((le=B.f.kb).y=ge,le.O=0,le.fa=se,le.Fd=ye,le.f=ge,le.N=0+ye,le.Ab=M,le.Cd=te,le.ea=ge,le.W=0+ye+te,le.Db=M,le.Ed=te,y==12&&(le.F=ge,le.J=0+ye+2*te),le.Tc=re,le.lb=X)}if(M=1,X=B.S,te=B.width,re=B.height,X>=jh&&13>X)if(11>X)y=B.f.RGBA,M&=(se=Math.abs(y.A))*(re-1)+te<=y.size,M&=se>=te*Im[X],M&=y.eb!=null;else{y=B.f.kb,se=(te+1)/2,ye=(re+1)/2,le=Math.abs(y.fa),ge=Math.abs(y.Ab);var We=Math.abs(y.Db),je=Math.abs(y.lb),Ue=je*(re-1)+te;M&=le*(re-1)+te<=y.Fd,M&=ge*(ye-1)+se<=y.Cd,M=(M&=We*(ye-1)+se<=y.Ed)&le>=te&ge>=se&We>=se,M&=y.y!=null,M&=y.f!=null,M&=y.ea!=null,X==12&&(M&=je>=te,M&=Ue<=y.Tc,M&=y.F!=null)}else M=0;y=M?0:2}}return y!=0||C!=null&&C.fd&&(y=gc(B)),y}var Ci=64,gu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],pa=24,Go=32,vu=8,Bi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Qe("Predictor0","PredictorAdd0"),k.Predictor0=function(){return 4278190080},k.Predictor1=function(y){return y},k.Predictor2=function(y,M,C){return M[C+0]},k.Predictor3=function(y,M,C){return M[C+1]},k.Predictor4=function(y,M,C){return M[C-1]},k.Predictor5=function(y,M,C){return mt(mt(y,M[C+1]),M[C+0])},k.Predictor6=function(y,M,C){return mt(y,M[C-1])},k.Predictor7=function(y,M,C){return mt(y,M[C+0])},k.Predictor8=function(y,M,C){return mt(M[C-1],M[C+0])},k.Predictor9=function(y,M,C){return mt(M[C+0],M[C+1])},k.Predictor10=function(y,M,C){return mt(mt(y,M[C-1]),mt(M[C+0],M[C+1]))},k.Predictor11=function(y,M,C){var B=M[C+0];return 0>=Re(B>>24&255,y>>24&255,(M=M[C-1])>>24&255)+Re(B>>16&255,y>>16&255,M>>16&255)+Re(B>>8&255,y>>8&255,M>>8&255)+Re(255&B,255&y,255&M)?B:y},k.Predictor12=function(y,M,C){var B=M[C+0];return(ue((y>>24&255)+(B>>24&255)-((M=M[C-1])>>24&255))<<24|ue((y>>16&255)+(B>>16&255)-(M>>16&255))<<16|ue((y>>8&255)+(B>>8&255)-(M>>8&255))<<8|ue((255&y)+(255&B)-(255&M)))>>>0},k.Predictor13=function(y,M,C){var B=M[C-1];return(Q((y=mt(y,M[C+0]))>>24&255,B>>24&255)<<24|Q(y>>16&255,B>>16&255)<<16|Q(y>>8&255,B>>8&255)<<8|Q(y>>0&255,B>>0&255))>>>0};var vc=k.PredictorAdd0;k.PredictorAdd1=Je,Qe("Predictor2","PredictorAdd2"),Qe("Predictor3","PredictorAdd3"),Qe("Predictor4","PredictorAdd4"),Qe("Predictor5","PredictorAdd5"),Qe("Predictor6","PredictorAdd6"),Qe("Predictor7","PredictorAdd7"),Qe("Predictor8","PredictorAdd8"),Qe("Predictor9","PredictorAdd9"),Qe("Predictor10","PredictorAdd10"),Qe("Predictor11","PredictorAdd11"),Qe("Predictor12","PredictorAdd12"),Qe("Predictor13","PredictorAdd13");var yc=k.PredictorAdd2;ot("ColorIndexInverseTransform","MapARGB","32b",function(y){return y>>8&255},function(y){return y}),ot("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(y){return y},function(y){return y>>8&255});var Gh,ji=k.ColorIndexInverseTransform,yu=k.MapARGB,Il=k.VP8LColorIndexInverseTransformAlpha,Ms=k.MapAlpha,wo=k.VP8LPredictorsAdd=[];wo.length=16,(k.VP8LPredictors=[]).length=16,(k.VP8LPredictorsAdd_C=[]).length=16,(k.VP8LPredictors_C=[]).length=16;var So,Hr,qi,so,ma,Vo,_r,_o,Gr,xu,zi,Vr,Wo,Pr,vi,Or,ga,bo,jo,xc,Jr,va,wu,Is,yi,$n,ar,Fr,Qr=s(511),ya=s(2041),wc=s(225),Su=s(767),Vh=0,fd=ya,Wh=wc,Es=Su,us=Qr,jh=0,_u=1,qh=2,Sc=3,Dl=4,dd=5,Mm=6,pd=7,md=8,_c=9,gd=10,u1=[2,3,7],yx=[3,3,11],Em=[280,256,256,256,40],xx=[0,1,1,1,0],wx=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],c1=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],h1=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],f1=8,vd=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],bc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Xh=null,Sx=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],_x=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],yd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Am=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],bx=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],d1=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],p1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],qa=[],Mo=[],xa=[],wa=1,Tm=2,Eo=[],cs=[];at("UpsampleRgbLinePair",An,3),at("UpsampleBgrLinePair",gr,3),at("UpsampleRgbaLinePair",io,4),at("UpsampleBgraLinePair",Ti,4),at("UpsampleArgbLinePair",Zr,4),at("UpsampleRgba4444LinePair",wr,2),at("UpsampleRgb565LinePair",fr,2);var xd=k.UpsampleRgbLinePair,wd=k.UpsampleBgrLinePair,Cm=k.UpsampleRgbaLinePair,Mc=k.UpsampleBgraLinePair,Xi=k.UpsampleArgbLinePair,m1=k.UpsampleRgba4444LinePair,Mx=k.UpsampleRgb565LinePair,hs=16,Hi=1<<hs-1,Ec=-227,Sd=482,Lm=6,g1=(256<<Lm)-1,Pm=0,Rm=s(256),v1=s(256),km=s(256),y1=s(256),x1=s(Sd-Ec),_d=s(Sd-Ec);Kr("YuvToRgbRow",An,3),Kr("YuvToBgrRow",gr,3),Kr("YuvToRgbaRow",io,4),Kr("YuvToBgraRow",Ti,4),Kr("YuvToArgbRow",Zr,4),Kr("YuvToRgba4444Row",wr,2),Kr("YuvToRgb565Row",fr,2);var Yh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],$h=[0,2,8],Nm=[8,7,6,4,4,2,2,2,1,1,1,1],w1=1;this.WebPDecodeRGBA=function(y,M,C,B,X){var te=_u,re=new ro,se=new Ge;re.ba=se,se.S=te,se.width=[se.width],se.height=[se.height];var le=se.width,ge=se.height,ye=new bt;if(ye==null||y==null)var We=2;else e(ye!=null),We=ls(y,M,C,ye.width,ye.height,ye.Pd,ye.Qd,ye.format,null);if(We!=0?le=0:(le!=null&&(le[0]=ye.width[0]),ge!=null&&(ge[0]=ye.height[0]),le=1),le){se.width=se.width[0],se.height=se.height[0],B!=null&&(B[0]=se.width),X!=null&&(X[0]=se.height);e:{if(B=new Yt,(X=new mu).data=y,X.w=M,X.ha=C,X.kd=1,M=[0],e(X!=null),((y=ls(X.data,X.w,X.ha,null,null,null,M,null,X))==0||y==7)&&M[0]&&(y=4),(M=y)==0){if(e(re!=null),B.data=X.data,B.w=X.w+X.offset,B.ha=X.ha-X.offset,B.put=fn,B.ac=Mn,B.bc=Xn,B.ma=re,X.xa){if((y=me())==null){re=1;break e}if(function(je,Ue){var St=[0],tt=[0],ke=[0];t:for(;;){if(je==null)return 0;if(Ue==null)return je.a=2,0;if(je.l=Ue,je.a=0,W(je.m,Ue.data,Ue.w,Ue.ha),!Ft(je.m,St,tt,ke)){je.a=3;break t}if(je.xb=Tm,Ue.width=St[0],Ue.height=tt[0],!de(St[0],tt[0],1,je,null))break t;return 1}return e(je.a!=0),0}(y,B)){if(B=(M=Nl(B.width,B.height,re.Oa,re.ba))==0){t:{B=y;n:for(;;){if(B==null){B=0;break t}if(e(B.s.yc!=null),e(B.s.Ya!=null),e(0<B.s.Wb),e((C=B.l)!=null),e((X=C.ma)!=null),B.xb!=0){if(B.ca=X.ba,B.tb=X.tb,e(B.ca!=null),!mc(X.Oa,C,Sc)){B.a=2;break n}if(!xe(B,C.width)||C.da)break n;if((C.da||pt(B.ca.S))&&He(),11>B.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),B.ca.f.kb.F!=null&&He()),B.Pb&&0<B.s.ua&&B.s.vb.X==null&&!Ae(B.s.vb,B.s.Wa.Xa)){B.a=1;break n}B.xb=0}if(!O(B,B.V,B.Ba,B.c,B.i,C.o,xn))break n;X.Dc=B.Ma,B=1;break t}e(B.a!=0),B=0}B=!B}B&&(M=y.a)}else M=y.a}else{if((y=new En)==null){re=1;break e}if(y.Fa=X.na,y.P=X.P,y.qc=X.Sa,rr(y,B)){if((M=Nl(B.width,B.height,re.Oa,re.ba))==0){if(y.Aa=0,C=re.Oa,e((X=y)!=null),C!=null){if(0<(le=0>(le=C.Md)?0:100<le?255:255*le/100)){for(ge=ye=0;4>ge;++ge)12>(We=X.pb[ge]).lc&&(We.ia=le*Nm[0>We.lc?0:We.lc]>>3),ye|=We.ia;ye&&(alert("todo:VP8InitRandom"),X.ia=1)}X.Ga=C.Id,100<X.Ga?X.Ga=100:0>X.Ga&&(X.Ga=0)}zr(y,B)||(M=y.a)}}else M=y.a}M==0&&re.Oa!=null&&re.Oa.fd&&(M=gc(re.ba))}re=M}te=re!=0?null:11>te?se.f.RGBA.eb:se.f.kb.y}else te=null;return te};var Im=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(k,R){for(var U="",F=0;F<4;F++)U+=String.fromCharCode(k[R++]);return U}function c(k,R){return(k[R+0]<<0|k[R+1]<<8|k[R+2]<<16)>>>0}function h(k,R){return(k[R+0]<<0|k[R+1]<<8|k[R+2]<<16|k[R+3]<<24)>>>0}new l;var d=[0],m=[0],v=[],w=new l,x=n,g=function(k,R){var U={},F=0,z=!1,V=0,G=0;if(U.frames=[],!function(j,K,ae,fe){for(var we=0;we<fe;we++)if(j[K+we]!=ae.charCodeAt(we))return!0;return!1}(k,R,"RIFF",4)){for(h(k,R+=4),R+=8;R<k.length;){var J=u(k,R),ie=h(k,R+=4);R+=4;var ce=ie+(1&ie);switch(J){case"VP8 ":case"VP8L":U.frames[F]===void 0&&(U.frames[F]={}),($=U.frames[F]).src_off=z?G:R-8,$.src_size=V+ie+8,F++,z&&(z=!1,V=0,G=0);break;case"VP8X":($=U.header={}).feature_flags=k[R];var W=R+4;$.canvas_width=1+c(k,W),W+=3,$.canvas_height=1+c(k,W),W+=3;break;case"ALPH":z=!0,V=ce+8,G=R-8;break;case"ANIM":($=U.header).bgcolor=h(k,R),W=R+4,$.loop_count=(oe=k)[(D=W)+0]<<0|oe[D+1]<<8,W+=2;break;case"ANMF":var Y,$;($=U.frames[F]={}).offset_x=2*c(k,R),R+=3,$.offset_y=2*c(k,R),R+=3,$.width=1+c(k,R),R+=3,$.height=1+c(k,R),R+=3,$.duration=c(k,R),R+=3,Y=k[R++],$.dispose=1&Y,$.blend=Y>>1&1}J!="ANMF"&&(R+=ce)}var oe,D;return U}}(x,0);g.response=x,g.rgbaoutput=!0,g.dataurl=!1;var S=g.header?g.header:null,_=g.frames?g.frames:null;if(S){S.loop_counter=S.loop_count,d=[S.canvas_height],m=[S.canvas_width];for(var T=0;T<_.length&&_[T].blend!=0;T++);}var L=_[0],P=w.WebPDecodeRGBA(x,L.src_off,L.src_size,m,d);L.rgba=P,L.imgwidth=m[0],L.imgheight=d[0];for(var N=0;N<m[0]*d[0]*4;N++)v[N]=P[N];return this.width=m,this.height=d,this.data=v,this}(function(n){var e=function(){return typeof g5=="function"},t=function(d,m,v,w){var x=4,g=o;switch(w){case n.image_compression.FAST:x=1,g=s;break;case n.image_compression.MEDIUM:x=6,g=a;break;case n.image_compression.SLOW:x=9,g=l}d=r(d,m,v,g);var S=g5(d,{level:x});return n.__addimage__.arrayBufferToBinaryString(S)},r=function(d,m,v,w){for(var x,g,S,_=d.length/m,T=new Uint8Array(d.length+_),L=c(),P=0;P<_;P+=1){if(S=P*m,x=d.subarray(S,S+m),w)T.set(w(x,v,g),S+P);else{for(var N,k=L.length,R=[];N<k;N+=1)R[N]=L[N](x,v,g);var U=h(R.concat());T.set(R[U],S+P)}g=x}return T},i=function(d){var m=Array.apply([],d);return m.unshift(0),m},s=function(d,m){var v,w=[],x=d.length;w[0]=1;for(var g=0;g<x;g+=1)v=d[g-m]||0,w[g+1]=d[g]-v+256&255;return w},o=function(d,m,v){var w,x=[],g=d.length;x[0]=2;for(var S=0;S<g;S+=1)w=v&&v[S]||0,x[S+1]=d[S]-w+256&255;return x},a=function(d,m,v){var w,x,g=[],S=d.length;g[0]=3;for(var _=0;_<S;_+=1)w=d[_-m]||0,x=v&&v[_]||0,g[_+1]=d[_]+256-(w+x>>>1)&255;return g},l=function(d,m,v){var w,x,g,S,_=[],T=d.length;_[0]=4;for(var L=0;L<T;L+=1)w=d[L-m]||0,x=v&&v[L]||0,g=v&&v[L-m]||0,S=u(w,x,g),_[L+1]=d[L]-S+256&255;return _},u=function(d,m,v){if(d===m&&m===v)return d;var w=Math.abs(m-v),x=Math.abs(d-v),g=Math.abs(d+m-v-v);return w<=x&&w<=g?d:x<=g?m:v},c=function(){return[i,s,o,a,l]},h=function(d){var m=d.map(function(v){return v.reduce(function(w,x){return w+Math.abs(x)},0)});return m.indexOf(Math.min.apply(null,m))};n.processPNG=function(d,m,v,w){var x,g,S,_,T,L,P,N,k,R,U,F,z,V,G,J=this.decode.FLATE_DECODE,ie="";if(this.__addimage__.isArrayBuffer(d)&&(d=new Uint8Array(d)),this.__addimage__.isArrayBufferView(d)){if(d=(S=new QG(d)).imgData,g=S.bits,x=S.colorSpace,T=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){k=(N=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,U=new Uint8Array(k*S.colors),R=new Uint8Array(k);var ce,W=S.pixelBitlength-S.bits;for(V=0,G=0;V<k;V++){for(z=N[V],ce=0;ce<W;)U[G++]=z>>>ce&255,ce+=S.bits;R[V]=z>>>ce&255}}if(S.bits===16){k=(N=new Uint32Array(S.decodePixels().buffer)).length,U=new Uint8Array(k*(32/S.pixelBitlength)*S.colors),R=new Uint8Array(k*(32/S.pixelBitlength)),F=S.colors>1,V=0,G=0;for(var Y=0;V<k;)z=N[V++],U[G++]=z>>>0&255,F&&(U[G++]=z>>>16&255,z=N[V++],U[G++]=z>>>0&255),R[Y++]=z>>>16&255;g=8}w!==n.image_compression.NONE&&e()?(d=t(U,S.width*S.colors,S.colors,w),P=t(R,S.width,1,w)):(d=U,P=R,J=void 0)}if(S.colorType===3&&(x=this.color_spaces.INDEXED,L=S.palette,S.transparency.indexed)){var $=S.transparency.indexed,oe=0;for(V=0,k=$.length;V<k;++V)oe+=$[V];if((oe/=255)===k-1&&$.indexOf(0)!==-1)_=[$.indexOf(0)];else if(oe!==k){for(N=S.decodePixels(),R=new Uint8Array(N.length),V=0,k=N.length;V<k;V++)R[V]=$[N[V]];P=t(R,S.width,1)}}var D=function(j){var K;switch(j){case n.image_compression.FAST:K=11;break;case n.image_compression.MEDIUM:K=13;break;case n.image_compression.SLOW:K=14;break;default:K=12}return K}(w);return J===this.decode.FLATE_DECODE&&(ie="/Predictor "+D+" "),ie+="/Colors "+T+" /BitsPerComponent "+g+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),(P&&this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),{alias:v,data:d,index:m,filter:J,decodeParameters:ie,transparency:_,palette:L,sMask:P,predictor:D,width:S.width,height:S.height,bitsPerComponent:g,colorSpace:x}}}})(yn.API),function(n){n.processGIF89A=function(e,t,r,i){var s=new eV(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:a},c=new rS(100).encode(u,100);return n.processJPEG.call(this,c,t,r,i)},n.processGIF87A=n.processGIF89A}(yn.API),rl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},rl.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){kr.log("bit decode error:"+t)}},rl.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}t!==0&&(this.pos+=4-t)}},rl.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},rl.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=t*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}n!==0&&(this.pos+=4-n)}},rl.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,c=r*this.width*4+4*i;this.data[c]=l,this.data[c+1]=a,this.data[c+2]=o,this.data[c+3]=u}this.pos+=n}},rl.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&t)/t*255|0,u=(o>>11)/e*255|0,c=i*this.width*4+4*s;this.data[c]=u,this.data[c+1]=l,this.data[c+2]=a,this.data[c+3]=255}this.pos+=n}},rl.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*t;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},rl.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},rl.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var s=new rl(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new rS(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}}(yn.API),ST.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var s=new ST(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new rS(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}}(yn.API),yn.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,u=0;u<i;u+=4){var c=r[u],h=r[u+1],d=r[u+2],m=r[u+3];s[a++]=c,s[a++]=h,s[a++]=d,o[l++]=m}var v=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},yn.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},ip=yn.API,Uv=ip.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,c=u.fof?u.fof:1,h=e.doKerning!==!1,d=0,m=n.length,v=0,w=a[0]||l,x=[];for(t=0;t<m;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?x.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(d=h&&Tr(u[r])==="object"&&!isNaN(parseInt(u[r][v],10))?u[r][v]/c:0,x.push((a[r]||w)/l+d)),v=r;return x},vT=ip.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return ip.processArabic&&(n=ip.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:Uv.apply(this,arguments).reduce(function(s,o){return s+o},0)},yT=function(n,e,t,r){for(var i=[],s=0,o=n.length,a=0;s!==o&&a+e[s]<t;)a+=e[s],s++;i.push(n.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(n.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(n.slice(l,s)),i},xT=function(n,e,t){t||(t={});var r,i,s,o,a,l,u,c=[],h=[c],d=t.textIndent||0,m=0,v=0,w=n.split(" "),x=Uv.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?w[0].length+2:t.lineIndent||0){var g=Array(l).join(" "),S=[];w.map(function(T){(T=T.split(/\s*\n/)).length>1?S=S.concat(T.map(function(L,P){return(P&&L.length?`
`:"")+L})):S.push(T[0])}),w=S,l=vT.apply(this,[g,t])}for(s=0,o=w.length;s<o;s++){var _=0;if(r=w[s],l&&r[0]==`
`&&(r=r.substr(1),_=1),d+m+(v=(i=Uv.apply(this,[r,t])).reduce(function(T,L){return T+L},0))>e||_){if(v>e){for(a=yT.apply(this,[r,i,e-(d+m),e]),c.push(a.shift()),c=[a.pop()];a.length;)h.push([a.shift()]);v=i.slice(r.length-(c[0]?c[0].length:0)).reduce(function(T,L){return T+L},0)}else c=[r];h.push(c),d=v+l,m=x}else c.push(r),d+=m+v,m=x}return u=l?function(T,L){return(L?g:"")+T.join(" ")}:function(T){return T.join(" ")},h.map(u)},ip.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),s=function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var h=this.internal.getFont(c.fontName,c.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=t.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat(xT.apply(this,[r[a],o,s]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(h){return"0x"+parseInt(h,10).toString(16)},o=n.__fontmetrics__.compress=function(h){var d,m,v,w,x=["{"];for(var g in h){if(d=h[g],isNaN(parseInt(g,10))?m="'"+g+"'":(g=parseInt(g,10),m=(m=s(g).slice(2)).slice(0,-1)+r[m.slice(-1)]),typeof d=="number")d<0?(v=s(d).slice(3),w="-"):(v=s(d).slice(2),w=""),v=w+v.slice(0,-1)+r[v.slice(-1)];else{if(Tr(d)!=="object")throw new Error("Don't know what to do with value type "+Tr(d)+".");v=o(d)}x.push(m+v)}return x.push("}"),x.join("")},a=n.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var d,m,v,w,x={},g=1,S=x,_=[],T="",L="",P=h.length-1,N=1;N<P;N+=1)(w=h[N])=="'"?d?(v=d.join(""),d=void 0):d=[]:d?d.push(w):w=="{"?(_.push([S,v]),S={},v=void 0):w=="}"?((m=_.pop())[0][m[1]]=S,v=void 0,S=m[0]):w=="-"?g=-1:v===void 0?t.hasOwnProperty(w)?(T+=t[w],v=parseInt(T,16)*g,g=1,T=""):T+=w:t.hasOwnProperty(w)?(L+=t[w],S[v]=parseInt(L,16)*g,g=1,v=void 0,L=""):L+=w;return x},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},c={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(h){var d=h.font,m=c.Unicode[d.postScriptName];m&&(d.metadata.Unicode={},d.metadata.Unicode.widths=m.widths,d.metadata.Unicode.kerning=m.kerning);var v=u.Unicode[d.postScriptName];v&&(d.metadata.Unicode.encoding=v,d.encoding=v.codePages[0])}])}(yn.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=t.charCodeAt(s);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,s=t.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(U0(a)),o.metadata=n.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(yn),function(n){function e(){return(Sn.canvg?Promise.resolve(Sn.canvg):h5(()=>import("./index.es-21bf378d.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}yn.API.addSvgAsImage=function(t,r,i,s,o,a,l,u){if(isNaN(r)||isNaN(i))throw kr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw kr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=s,c.height=o;var h=c.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return e().then(function(v){return v.fromString(h,t,d)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(d)}).then(function(){m.addImage(c.toDataURL("image/jpeg",1),r,i,s,o,l,u)})}}(),yn.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},yn.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],u=0,c=0,h=0;function d(v,w){var x,g=!1;for(x=0;x<v.length;x+=1)v[x]===w&&(g=!0);return g}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var m=a.length;for(h=0;h<m;h+=1)t[a[h]].value=t[a[h]].defaultValue,t[a[h]].explicitSet=!1}if(Tr(n)==="object"){for(i in n)if(s=n[i],d(a,i)&&s!==void 0){if(t[i].type==="boolean"&&typeof s=="boolean")t[i].value=s;else if(t[i].type==="name"&&d(t[i].valueSet,s))t[i].value=s;else if(t[i].type==="integer"&&Number.isInteger(s))t[i].value=s;else if(t[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(c=0;c<s[u].length;c+=1)typeof s[u][c]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,w=[];for(v in t)t[v].explicitSet===!0&&(t[v].type==="name"?w.push("/"+v+" /"+t[v].value):w.push("/"+v+" "+t[v].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(yn.API),function(n){var e=n.API,t=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],c=[""],h=0,d=s.length;h<d;++h){if(a=o.metadata.characterToGlyph(s.charCodeAt(h)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(h),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return c.join("");a=a.toString(16),c.push(u[4-a.length],a)}return c.join("")},r=function(s){var o,a,l,u,c,h,d;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,d=(a=Object.keys(s).sort(function(m,v){return m-v})).length;h<d;h++)o=a[h],l.length>=100&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),c+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,c=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var h=a.metadata.Unicode.widths,d=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),m="",v=0;v<d.length;v++)m+=String.fromCharCode(d[v]);var w=u();c({data:m,addLength1:!0,objectId:w}),l("endobj");var x=u();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var g=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+dp(a.fontName)),l("/FontFile2 "+w+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var S=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+dp(a.fontName)),l("/FontDescriptor "+g+" 0 R"),l("/W "+n.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+x+" 0 R"),l("/BaseFont /"+dp(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+S+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,c=o.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var h=a.metadata.rawData,d="",m=0;m<h.length;m++)d+=String.fromCharCode(h[m]);var v=u();c({data:d,addLength1:!0,objectId:v}),l("endobj");var w=u();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var x=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+v+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+dp(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var g=0;g<a.metadata.hmtx.widths.length;g++)a.metadata.hmtx.widths[g]=parseInt(a.metadata.hmtx.widths[g]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+dp(a.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,u=s.y,c=s.options||{},h=s.mutex||{},d=h.pdfEscape,m=h.activeFontKey,v=h.fonts,w=m,x="",g=0,S="",_=v[w].encoding;if(v[w].encoding!=="Identity-H")return{text:a,x:l,y:u,options:c,mutex:h};for(S=a,w=m,Array.isArray(a)&&(S=a[0]),g=0;g<S.length;g+=1)v[w].metadata.hasOwnProperty("cmap")&&(o=v[w].metadata.cmap.unicode.codeMap[S[g].charCodeAt(0)]),o||S[g].charCodeAt(0)<256&&v[w].metadata.hasOwnProperty("Unicode")?x+=S[g]:x+="";var T="";return parseInt(w.slice(1))<14||_==="WinAnsiEncoding"?T=d(x,w).split("").map(function(L){return L.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(T=t(x,v[w])),h.isHex=!0,{text:T,x:l,y:u,options:c,mutex:h}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},l,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(yn),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(yn.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,s,o,a,l,u,c,h=e,d=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,_=0;this.__bidiEngine__={};var T=function(F){var z=F.charCodeAt(),V=z>>8,G=w[V];return G!==void 0?h[256*G+(255&z)]:V===252||V===253?"AL":g.test(V)?"L":V===8?"R":"N"},L=function(F){for(var z,V=0;V<F.length;V++){if((z=T(F.charAt(V)))==="L")return!1;if(z==="R")return!0}return!1},P=function(F,z,V,G){var J,ie,ce,W,Y=z[G];switch(Y){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(Y="AN");break;case"AL":S=!0,Y="R";break;case"WS":Y="N";break;case"CS":G<1||G+1>=z.length||(J=V[G-1])!=="EN"&&J!=="AN"||(ie=z[G+1])!=="EN"&&ie!=="AN"?Y="N":S&&(ie="AN"),Y=ie===J?ie:"N";break;case"ES":Y=(J=G>0?V[G-1]:"B")==="EN"&&G+1<z.length&&z[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&V[G-1]==="EN"){Y="EN";break}if(S){Y="N";break}for(ce=G+1,W=z.length;ce<W&&z[ce]==="ET";)ce++;Y=ce<W&&z[ce]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(W=z.length,ce=G+1;ce<W&&z[ce]==="NSM";)ce++;if(ce<W){var $=F[G],oe=$>=1425&&$<=2303||$===64286;if(J=z[ce],oe&&(J==="R"||J==="AL")){Y="R";break}}}Y=G<1||(J=z[G-1])==="B"?"N":V[G-1];break;case"B":S=!1,i=!0,Y=_;break;case"S":s=!0,Y="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":Y="N"}return Y},N=function(F,z,V){var G=F.split("");return V&&k(G,V,{hiLevel:_}),G.reverse(),z&&z.reverse(),G.join("")},k=function(F,z,V){var G,J,ie,ce,W,Y=-1,$=F.length,oe=0,D=[],j=_?m:d,K=[];for(S=!1,i=!1,s=!1,J=0;J<$;J++)K[J]=T(F[J]);for(ie=0;ie<$;ie++){if(W=oe,D[ie]=P(F,K,D,ie),G=240&(oe=j[W][v[D[ie]]]),oe&=15,z[ie]=ce=j[oe][5],G>0)if(G===16){for(J=Y;J<ie;J++)z[J]=1;Y=-1}else Y=-1;if(j[oe][6])Y===-1&&(Y=ie);else if(Y>-1){for(J=Y;J<ie;J++)z[J]=ce;Y=-1}K[ie]==="B"&&(z[ie]=0),V.hiLevel|=ce}s&&function(ae,fe,we){for(var Ee=0;Ee<we;Ee++)if(ae[Ee]==="S"){fe[Ee]=_;for(var Ce=Ee-1;Ce>=0&&ae[Ce]==="WS";Ce--)fe[Ce]=_}}(K,z,$)},R=function(F,z,V,G,J){if(!(J.hiLevel<F)){if(F===1&&_===1&&!i)return z.reverse(),void(V&&V.reverse());for(var ie,ce,W,Y,$=z.length,oe=0;oe<$;){if(G[oe]>=F){for(W=oe+1;W<$&&G[W]>=F;)W++;for(Y=oe,ce=W-1;Y<ce;Y++,ce--)ie=z[Y],z[Y]=z[ce],z[ce]=ie,V&&(ie=V[Y],V[Y]=V[ce],V[ce]=ie);oe=W}oe++}}},U=function(F,z,V){var G=F.split(""),J={hiLevel:_};return V||(V=[]),k(G,V,J),function(ie,ce,W){if(W.hiLevel!==0&&c)for(var Y,$=0;$<ie.length;$++)ce[$]===1&&(Y=x.indexOf(ie[$]))>=0&&(ie[$]=x[Y+1])}(G,V,J),R(2,G,z,V,J),R(1,G,z,V,J),G.join("")};return this.__bidiEngine__.doBidiReorder=function(F,z,V){if(function(J,ie){if(ie)for(var ce=0;ce<J.length;ce++)ie[ce]=ce;a===void 0&&(a=L(J)),u===void 0&&(u=L(J))}(F,z),o||!l||u)if(o&&l&&a^u)_=a?1:0,F=N(F,z,V);else if(!o&&l&&u)_=a?1:0,F=U(F,z,V),F=N(F,z);else if(!o||a||l||u){if(o&&!l&&a^u)F=N(F,z),a?(_=0,F=U(F,z,V)):(_=1,F=U(F,z,V),F=N(F,z));else if(o&&a&&!l&&u)_=1,F=U(F,z,V),F=N(F,z);else if(!o&&!l&&a^u){var G=c;a?(_=1,F=U(F,z,V),_=0,c=!1,F=U(F,z,V),c=G):(_=0,F=U(F,z,V),F=N(F,z),_=1,c=!1,F=U(F,z,V),c=G,F=N(F,z))}}else _=0,F=U(F,z,V);else _=a?1:0,F=U(F,z,V);return F},this.__bidiEngine__.setOptions=function(F){F&&(o=F.isInputVisual,l=F.isOutputVisual,a=F.isInputRtl,u=F.isOutputRtl,c=F.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,t.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([t.doBidiReorder(i[a])]);r.text=o}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(yn),yn.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new Eh(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new mV(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new tV(this.contents),this.head=new rV(this),this.name=new lV(this),this.cmap=new jk(this),this.toUnicode={},this.hhea=new iV(this),this.maxp=new uV(this),this.hmtx=new cV(this),this.post=new oV(this),this.os2=new sV(this),this.loca=new pV(this),this.glyf=new hV(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,a,l,u;for(u=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}.call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return o*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var Al,Eh=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,s,o,a,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)t=e[r],s.push(this.writeByte(t));return s},n}(),tV=function(){var n;function e(t){var r,i,s;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,s,o,a,l,u,c,h,d,m,v,w;for(w in m=Object.keys(t).length,l=Math.log(2),h=16*Math.floor(Math.log(m)/l),o=Math.floor(h/l),c=16*m-h,(i=new Eh).writeInt(this.scalarType),i.writeShort(m),i.writeShort(h),i.writeShort(o),i.writeShort(c),s=16*m,u=i.pos+s,a=null,v=[],t)for(d=t[w],i.writeString(w),i.writeInt(n(d)),i.writeInt(u),i.writeInt(d.length),v=v.concat(d),w==="head"&&(a=u),u+=d.length;u%4;)v.push(0),u++;return i.write(v),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,s,o;for(t=qk.call(t);t.length%4;)t.push(0);for(s=new Eh(t),i=0,r=0,o=t.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),nV={}.hasOwnProperty,su=function(n,e){for(var t in e)nV.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};Al=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var rV=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,Al),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Eh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),_T=function(){function n(e,t){var r,i,s,o,a,l,u,c,h,d,m,v,w,x,g,S,_;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),d=m/2,e.pos+=6,s=function(){var T,L;for(L=[],l=T=0;0<=d?T<d:T>d;l=0<=d?++T:--T)L.push(e.readUInt16());return L}(),e.pos+=2,w=function(){var T,L;for(L=[],l=T=0;0<=d?T<d:T>d;l=0<=d?++T:--T)L.push(e.readUInt16());return L}(),u=function(){var T,L;for(L=[],l=T=0;0<=d?T<d:T>d;l=0<=d?++T:--T)L.push(e.readUInt16());return L}(),c=function(){var T,L;for(L=[],l=T=0;0<=d?T<d:T>d;l=0<=d?++T:--T)L.push(e.readUInt16());return L}(),i=(this.length-e.pos+this.offset)/2,a=function(){var T,L;for(L=[],l=T=0;0<=i?T<i:T>i;l=0<=i?++T:--T)L.push(e.readUInt16());return L}(),l=g=0,_=s.length;g<_;l=++g)for(x=s[l],r=S=v=w[l];v<=x?S<=x:S>=x;r=v<=x?++S:--S)c[l]===0?o=r+u[l]:(o=a[c[l]/2+(r-v)-(d-l)]||0)!==0&&(o+=u[l]),this.codeMap[r]=65535&o}e.pos=h}return n.encode=function(e,t){var r,i,s,o,a,l,u,c,h,d,m,v,w,x,g,S,_,T,L,P,N,k,R,U,F,z,V,G,J,ie,ce,W,Y,$,oe,D,j,K,ae,fe,we,Ee,Ce,Ye,Ne,he;switch(G=new Eh,o=Object.keys(e).sort(function(Oe,Ae){return Oe-Ae}),t){case"macroman":for(w=0,x=function(){var Oe=[];for(v=0;v<256;++v)Oe.push(0);return Oe}(),S={0:0},s={},J=0,Y=o.length;J<Y;J++)S[Ce=e[i=o[J]]]==null&&(S[Ce]=++w),s[i]={old:e[i],new:S[e[i]]},x[i]=S[e[i]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(x),{charMap:s,subtable:G.data,maxGlyphID:w+1};case"unicode":for(z=[],h=[],_=0,S={},r={},g=u=null,ie=0,$=o.length;ie<$;ie++)S[L=e[i=o[ie]]]==null&&(S[L]=++_),r[i]={old:L,new:S[L]},a=S[L]-i,g!=null&&a===u||(g&&h.push(g),z.push(i),u=a),g=i;for(g&&h.push(g),h.push(65535),z.push(65535),U=2*(R=z.length),k=2*Math.pow(Math.log(R)/Math.LN2,2),d=Math.log(k/2)/Math.LN2,N=2*R-k,l=[],P=[],m=[],v=ce=0,oe=z.length;ce<oe;v=++ce){if(F=z[v],c=h[v],F===65535){l.push(0),P.push(0);break}if(F-(V=r[F].new)>=32768)for(l.push(0),P.push(2*(m.length+R-v)),i=W=F;F<=c?W<=c:W>=c;i=F<=c?++W:--W)m.push(r[i].new);else l.push(V-F),P.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*R+2*m.length),G.writeUInt16(0),G.writeUInt16(U),G.writeUInt16(k),G.writeUInt16(d),G.writeUInt16(N),we=0,D=h.length;we<D;we++)i=h[we],G.writeUInt16(i);for(G.writeUInt16(0),Ee=0,j=z.length;Ee<j;Ee++)i=z[Ee],G.writeUInt16(i);for(Ye=0,K=l.length;Ye<K;Ye++)a=l[Ye],G.writeUInt16(a);for(Ne=0,ae=P.length;Ne<ae;Ne++)T=P[Ne],G.writeUInt16(T);for(he=0,fe=m.length;he<fe;he++)w=m[he],G.writeUInt16(w);return{charMap:r,subtable:G.data,maxGlyphID:_+1}}},n}(),jk=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,Al),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,s;for(t.pos=this.offset,this.version=t.readUInt16(),s=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new _T(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,s;return r==null&&(r="macroman"),i=_T.encode(t,r),(s=new Eh).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),iV=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,Al),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),sV=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,Al),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),oV=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,Al),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,s;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var o;for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],s=[];t.pos<this.offset+this.length;)r=t.readByte(),s.push(this.names.push(t.readString(r)));return s;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=function(){var a,l,u;for(u=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)u.push(t.readUInt32());return u}.call(this)}},e}(),aV=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},lV=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,Al),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,s,o,a,l,u,c,h,d,m;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(u={},o=h=0,d=i.length;h<d;o=++h)s=i[o],t.pos=s.offset,c=t.readString(s.length),a=new aV(c,s),u[m=s.nameID]==null&&(u[m]=[]),u[s.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),uV=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,Al),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),cV=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,Al),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,s,o,a,l,u;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,h;for(h=[],r=c=0;0<=s?c<s:c>s;r=0<=s?++c:--c)h.push(t.readInt16());return h}(),this.widths=function(){var c,h,d,m;for(m=[],c=0,h=(d=this.metrics).length;c<h;c++)o=d[c],m.push(o.advance);return m}.call(this),i=this.widths[this.widths.length-1],u=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),qk=[].slice,hV=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,Al),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,s,o,a,l,u,c,h,d;return t in this.cache?this.cache[t]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(t),(s=o.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,a=(l=new Eh(r.read(s))).readShort(),c=l.readShort(),d=l.readShort(),u=l.readShort(),h=l.readShort(),this.cache[t]=a===-1?new dV(l,c,d,u,h):new fV(l,a,c,d,u,h),this.cache[t]))},e.prototype.encode=function(t,r,i){var s,o,a,l,u;for(a=[],o=[],l=0,u=r.length;l<u;l++)s=t[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),fV=function(){function n(e,t,r,i,s,o){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),dV=function(){function n(e,t,r,i,s){var o,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new Eh(qk.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),pV=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return su(e,Al),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*t.readUInt16());return o}.call(this):function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(t.readUInt32());return o}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],u=this.offsets[a+1]-l;u>0&&(s+=u)}for(var c=new Array(4*i.length),h=0;h<i.length;++h)c[4*h+3]=255&i[h],c[4*h+2]=(65280&i[h])>>8,c[4*h+1]=(16711680&i[h])>>16,c[4*h]=(4278190080&i[h])>>24;return c},e}(),mV=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,s;for(t in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in t=[],i)(r=i[s])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(s in l=this.glyphsFor(t))r=l[s],i[s]=r;return i},n.prototype.encode=function(e,t){var r,i,s,o,a,l,u,c,h,d,m,v,w,x,g;for(i in r=jk.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},g=r.charMap)m[(l=g[i]).old]=l.new;for(v in d=r.maxGlyphID,o)v in m||(m[v]=d++);return c=function(S){var _,T;for(_ in T={},S)T[S[_]]=_;return T}(m),h=Object.keys(c).sort(function(S,_){return S-_}),w=function(){var S,_,T;for(T=[],S=0,_=h.length;S<_;S++)a=h[S],T.push(c[a]);return T}(),s=this.font.glyf.encode(o,w,m),u=this.font.loca.encode(s.offsets,w),x={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},n}();yn.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,s,o;if(Array.isArray(t))return"["+function(){var a,l,u;for(u=[],a=0,l=t.length;a<l;a++)r=t[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in s=["<<"],t)o=t[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+t},e}();/*! https://mths.be/cssesc v3.0.0 by @mathias */var gV={},vV=gV.hasOwnProperty,yV=function(e,t){if(!e)return t;var r={};for(var i in t)r[i]=vV.call(e,i)?e[i]:t[i];return r},xV=/[ -,\.\/:-@\[-\^`\{-~]/,wV=/[ -,\.\/:-@\[\]\^`\{-~]/,SV=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,R3=function n(e,t){t=yV(t,n.options),t.quotes!="single"&&t.quotes!="double"&&(t.quotes="single");for(var r=t.quotes=="double"?'"':"'",i=t.isIdentifier,s=e.charAt(0),o="",a=0,l=e.length;a<l;){var u=e.charAt(a++),c=u.charCodeAt(),h=void 0;if(c<32||c>126){if(c>=55296&&c<=56319&&a<l){var d=e.charCodeAt(a++);(d&64512)==56320?c=((c&1023)<<10)+(d&1023)+65536:a--}h="\\"+c.toString(16).toUpperCase()+" "}else t.escapeEverything?xV.test(u)?h="\\"+u:h="\\"+c.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(u)?h="\\"+c.toString(16).toUpperCase()+" ":u=="\\"||!i&&(u=='"'&&r==u||u=="'"&&r==u)||i&&wV.test(u)?h="\\"+u:h=u;o+=h}return i&&(/^-[-\d]/.test(o)?o="\\-"+o.slice(1):/\d/.test(s)&&(o="\\3"+s+" "+o.slice(1))),o=o.replace(SV,function(m,v,w){return v&&v.length%2?m:(v||"")+w}),!i&&t.wrap?r+o+r:o};R3.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1};R3.version="3.0.0";var Xk=R3,f0=0,iS=1,bT=2,Bv=3,MT=4,ET=5,AT=6,sS=/[a-z0-9_-]/i,zv=/[\s\t]/,_V=function(n){for(var e=!0,t=f0,r="",i=0,s,o,a=[];;){if(o=n[i],t===f0){if(!o&&e)break;if(!o&&!e)throw new Error("Parse error");if(o==='"'||o==="'")s=o,t=iS,e=!1;else if(!zv.test(o))if(sS.test(o))t=Bv,e=!1,i--;else throw new Error("Parse error")}else if(t===iS)if(o)o==="\\"?t=bT:o===s?(a.push(r),r="",t=MT):r+=o;else throw new Error("Parse Error");else if(t===bT)if(o===s||o==="\\")r+=o,t=iS;else throw new Error("Parse error");else if(t===Bv)if(o)sS.test(o)?r+=o:o===","?(a.push(r),r="",t=f0):zv.test(o)?t=ET:o==="\\"&&(t=AT);else{a.push(r);break}else if(t===AT){if(/[0-9a-f]/i.test(o))throw new Error("Parse error");r+=o,t=Bv}else if(t===ET)if(o){if(sS.test(o))r+=" "+o,t=Bv;else if(o===",")a.push(r),r="",t=f0;else if(!zv.test(o))throw new Error("Parse error")}else{a.push(r);break}else if(t===MT)if(o){if(o===",")t=f0;else if(!zv.test(o))throw new Error("Parse error")}else break;i++}return a},bV=/[^a-z0-9_-]/i,MV=function(n,e){var t=e&&e.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Quote must be `'` or `\"`");for(var r=new RegExp(t,"g"),i=[],s=0;s<n.length;++s){var o=n[s];bV.test(o)&&(o=o.replace(/\\/g,"\\\\").replace(r,"\\"+t),o=t+o+t),i.push(o)}return i.join(", ")},EV={parse:_V,stringify:MV},b5={},AV={get exports(){return b5},set exports(n){b5=n}},Sy={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},TV=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function CV(n){return n===10||n===13||n===8232||n===8233||n===32||n===9||n===11||n===12||n===160||n>=5760&&TV.indexOf(n)>=0}function LV(n){switch(n|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function PV(n){return(n|32)===97}function sp(n){return n>=48&&n<=57}function RV(n){return n>=48&&n<=57||n===43||n===45||n===46}function kV(n){this.index=0,this.path=n,this.max=n.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function _y(n){for(;n.index<n.max&&CV(n.path.charCodeAt(n.index));)n.index++}function NV(n){var e=n.path.charCodeAt(n.index);if(e===48){n.param=0,n.index++;return}if(e===49){n.param=1,n.index++;return}n.err="SvgPath: arc flag can be 0 or 1 only (at pos "+n.index+")"}function IV(n){var e=n.index,t=e,r=n.max,i=!1,s=!1,o=!1,a=!1,l;if(t>=r){n.err="SvgPath: missed param (at pos "+t+")";return}if(l=n.path.charCodeAt(t),(l===43||l===45)&&(t++,l=t<r?n.path.charCodeAt(t):0),!sp(l)&&l!==46){n.err="SvgPath: param should start with 0..9 or `.` (at pos "+t+")";return}if(l!==46){if(i=l===48,t++,l=t<r?n.path.charCodeAt(t):0,i&&t<r&&l&&sp(l)){n.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+e+")";return}for(;t<r&&sp(n.path.charCodeAt(t));)t++,s=!0;l=t<r?n.path.charCodeAt(t):0}if(l===46){for(a=!0,t++;sp(n.path.charCodeAt(t));)t++,o=!0;l=t<r?n.path.charCodeAt(t):0}if(l===101||l===69){if(a&&!s&&!o){n.err="SvgPath: invalid float exponent (at pos "+t+")";return}if(t++,l=t<r?n.path.charCodeAt(t):0,(l===43||l===45)&&t++,t<r&&sp(n.path.charCodeAt(t)))for(;t<r&&sp(n.path.charCodeAt(t));)t++;else{n.err="SvgPath: invalid float exponent (at pos "+t+")";return}}n.index=t,n.param=parseFloat(n.path.slice(e,t))+0}function oS(n){var e,t;e=n.path[n.segmentStart],t=e.toLowerCase();var r=n.data;if(t==="m"&&r.length>2&&(n.result.push([e,r[0],r[1]]),r=r.slice(2),t="l",e=e==="m"?"l":"L"),t==="r")n.result.push([e].concat(r));else for(;r.length>=Sy[t]&&(n.result.push([e].concat(r.splice(0,Sy[t]))),!!Sy[t]););}function DV(n){var e=n.max,t,r,i,s,o;if(n.segmentStart=n.index,t=n.path.charCodeAt(n.index),r=PV(t),!LV(t)){n.err="SvgPath: bad command "+n.path[n.index]+" (at pos "+n.index+")";return}if(s=Sy[n.path[n.index].toLowerCase()],n.index++,_y(n),n.data=[],!s){oS(n);return}for(i=!1;;){for(o=s;o>0;o--){if(r&&(o===3||o===4)?NV(n):IV(n),n.err.length){oS(n);return}n.data.push(n.param),_y(n),i=!1,n.index<e&&n.path.charCodeAt(n.index)===44&&(n.index++,_y(n),i=!0)}if(!i&&(n.index>=n.max||!RV(n.path.charCodeAt(n.index))))break}oS(n)}var OV=function(e){var t=new kV(e),r=t.max;for(_y(t);t.index<r&&!t.err.length;)DV(t);return t.result.length&&("mM".indexOf(t.result[0][0])<0?(t.err="SvgPath: string should start with `M` or `m`",t.result=[]):t.result[0][0]="M"),{err:t.err,segments:t.result}};function FV(n,e){return[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],n[0]*e[4]+n[2]*e[5]+n[4],n[1]*e[4]+n[3]*e[5]+n[5]]}function xl(){if(!(this instanceof xl))return new xl;this.queue=[],this.cache=null}xl.prototype.matrix=function(n){return n[0]===1&&n[1]===0&&n[2]===0&&n[3]===1&&n[4]===0&&n[5]===0?this:(this.cache=null,this.queue.push(n),this)};xl.prototype.translate=function(n,e){return(n!==0||e!==0)&&(this.cache=null,this.queue.push([1,0,0,1,n,e])),this};xl.prototype.scale=function(n,e){return(n!==1||e!==1)&&(this.cache=null,this.queue.push([n,0,0,e,0,0])),this};xl.prototype.rotate=function(n,e,t){var r,i,s;return n!==0&&(this.translate(e,t),r=n*Math.PI/180,i=Math.cos(r),s=Math.sin(r),this.queue.push([i,s,-s,i,0,0]),this.cache=null,this.translate(-e,-t)),this};xl.prototype.skewX=function(n){return n!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(n*Math.PI/180),1,0,0])),this};xl.prototype.skewY=function(n){return n!==0&&(this.cache=null,this.queue.push([1,Math.tan(n*Math.PI/180),0,1,0,0])),this};xl.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var n=1;n<this.queue.length;n++)this.cache=FV(this.cache,this.queue[n]);return this.cache};xl.prototype.calc=function(n,e,t){var r;return this.queue.length?(this.cache||(this.cache=this.toArray()),r=this.cache,[n*r[0]+e*r[2]+(t?0:r[4]),n*r[1]+e*r[3]+(t?0:r[5])]):[n,e]};var Yk=xl,UV=Yk,BV={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},zV=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,HV=/[\s,]+/,GV=function(e){var t=new UV,r,i;return e.split(zV).forEach(function(s){if(s.length){if(typeof BV[s]<"u"){r=s;return}switch(i=s.split(HV).map(function(o){return+o||0}),r){case"matrix":i.length===6&&t.matrix(i);return;case"scale":i.length===1?t.scale(i[0],i[0]):i.length===2&&t.scale(i[0],i[1]);return;case"rotate":i.length===1?t.rotate(i[0],0,0):i.length===3&&t.rotate(i[0],i[1],i[2]);return;case"translate":i.length===1?t.translate(i[0],0):i.length===2&&t.translate(i[0],i[1]);return;case"skewX":i.length===1&&t.skewX(i[0]);return;case"skewY":i.length===1&&t.skewY(i[0]);return}}}),t},B0=Math.PI*2;function TT(n,e,t,r){var i=n*r-e*t<0?-1:1,s=n*t+e*r;return s>1&&(s=1),s<-1&&(s=-1),i*Math.acos(s)}function VV(n,e,t,r,i,s,o,a,l,u){var c=u*(n-t)/2+l*(e-r)/2,h=-l*(n-t)/2+u*(e-r)/2,d=o*o,m=a*a,v=c*c,w=h*h,x=d*m-d*w-m*v;x<0&&(x=0),x/=d*w+m*v,x=Math.sqrt(x)*(i===s?-1:1);var g=x*o/a*h,S=x*-a/o*c,_=u*g-l*S+(n+t)/2,T=l*g+u*S+(e+r)/2,L=(c-g)/o,P=(h-S)/a,N=(-c-g)/o,k=(-h-S)/a,R=TT(1,0,L,P),U=TT(L,P,N,k);return s===0&&U>0&&(U-=B0),s===1&&U<0&&(U+=B0),[_,T,R,U]}function WV(n,e){var t=1.3333333333333333*Math.tan(e/4),r=Math.cos(n),i=Math.sin(n),s=Math.cos(n+e),o=Math.sin(n+e);return[r,i,r-i*t,i+r*t,s+o*t,o-s*t,s,o]}var jV=function(e,t,r,i,s,o,a,l,u){var c=Math.sin(u*B0/360),h=Math.cos(u*B0/360),d=h*(e-r)/2+c*(t-i)/2,m=-c*(e-r)/2+h*(t-i)/2;if(d===0&&m===0)return[];if(a===0||l===0)return[];a=Math.abs(a),l=Math.abs(l);var v=d*d/(a*a)+m*m/(l*l);v>1&&(a*=Math.sqrt(v),l*=Math.sqrt(v));var w=VV(e,t,r,i,s,o,a,l,c,h),x=[],g=w[2],S=w[3],_=Math.max(Math.ceil(Math.abs(S)/(B0/4)),1);S/=_;for(var T=0;T<_;T++)x.push(WV(g,S)),g+=S;return x.map(function(L){for(var P=0;P<L.length;P+=2){var N=L[P+0],k=L[P+1];N*=a,k*=l;var R=h*N-c*k,U=c*N+h*k;L[P+0]=R+w[0],L[P+1]=U+w[1]}return L})},z0=1e-10,CT=Math.PI/180;function Cg(n,e,t){if(!(this instanceof Cg))return new Cg(n,e,t);this.rx=n,this.ry=e,this.ax=t}Cg.prototype.transform=function(n){var e=Math.cos(this.ax*CT),t=Math.sin(this.ax*CT),r=[this.rx*(n[0]*e+n[2]*t),this.rx*(n[1]*e+n[3]*t),this.ry*(-n[0]*t+n[2]*e),this.ry*(-n[1]*t+n[3]*e)],i=r[0]*r[0]+r[2]*r[2],s=r[1]*r[1]+r[3]*r[3],o=((r[0]-r[3])*(r[0]-r[3])+(r[2]+r[1])*(r[2]+r[1]))*((r[0]+r[3])*(r[0]+r[3])+(r[2]-r[1])*(r[2]-r[1])),a=(i+s)/2;if(o<z0*a)return this.rx=this.ry=Math.sqrt(a),this.ax=0,this;var l=r[0]*r[1]+r[2]*r[3];o=Math.sqrt(o);var u=a+o/2,c=a-o/2;return this.ax=Math.abs(l)<z0&&Math.abs(u-s)<z0?90:Math.atan(Math.abs(l)>Math.abs(u-s)?(u-i)/l:l/(u-s))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(u),this.ry=Math.sqrt(c)):(this.ax+=90,this.rx=Math.sqrt(c),this.ry=Math.sqrt(u)),this};Cg.prototype.isDegenerate=function(){return this.rx<z0*this.ry||this.ry<z0*this.rx};var qV=Cg,XV=OV,YV=GV,Dh=Yk,$V=jV,ZV=qV;function di(n){if(!(this instanceof di))return new di(n);var e=XV(n);this.segments=e.segments,this.err=e.err,this.__stack=[]}di.from=function(n){if(typeof n=="string")return new di(n);if(n instanceof di){var e=new di("");return e.err=n.err,e.segments=n.segments.map(function(t){return t.slice()}),e.__stack=n.__stack.map(function(t){return Dh().matrix(t.toArray())}),e}throw new Error("SvgPath.from: invalid param type "+n)};di.prototype.__matrix=function(n){var e=this,t;n.queue.length&&this.iterate(function(r,i,s,o){var a,l,u,c;switch(r[0]){case"v":a=n.calc(0,r[1],!0),l=a[0]===0?["v",a[1]]:["l",a[0],a[1]];break;case"V":a=n.calc(s,r[1],!1),l=a[0]===n.calc(s,o,!1)[0]?["V",a[1]]:["L",a[0],a[1]];break;case"h":a=n.calc(r[1],0,!0),l=a[1]===0?["h",a[0]]:["l",a[0],a[1]];break;case"H":a=n.calc(r[1],o,!1),l=a[1]===n.calc(s,o,!1)[1]?["H",a[0]]:["L",a[0],a[1]];break;case"a":case"A":var h=n.toArray(),d=ZV(r[1],r[2],r[3]).transform(h);if(h[0]*h[3]-h[1]*h[2]<0&&(r[5]=r[5]?"0":"1"),a=n.calc(r[6],r[7],r[0]==="a"),r[0]==="A"&&r[6]===s&&r[7]===o||r[0]==="a"&&r[6]===0&&r[7]===0){l=[r[0]==="a"?"l":"L",a[0],a[1]];break}d.isDegenerate()?l=[r[0]==="a"?"l":"L",a[0],a[1]]:l=[r[0],d.rx,d.ry,d.ax,r[4],r[5],a[0],a[1]];break;case"m":c=i>0,a=n.calc(r[1],r[2],c),l=["m",a[0],a[1]];break;default:for(u=r[0],l=[u],c=u.toLowerCase()===u,t=1;t<r.length;t+=2)a=n.calc(r[t],r[t+1],c),l.push(a[0],a[1])}e.segments[i]=l},!0)};di.prototype.__evaluateStack=function(){var n,e;if(this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(n=Dh(),e=this.__stack.length;--e>=0;)n.matrix(this.__stack[e].toArray());this.__matrix(n),this.__stack=[]}};di.prototype.toString=function(){var n="",e="",t=!1;this.__evaluateStack();for(var r=0,i=this.segments.length;r<i;r++){var s=this.segments[r],o=s[0];o!==e||o==="m"||o==="M"?(o==="m"&&e==="z"&&(n+=" "),n+=o,t=!1):t=!0;for(var a=1;a<s.length;a++){var l=s[a];a===1?t&&l>=0&&(n+=" "):l>=0&&(n+=" "),n+=l}e=o}return n};di.prototype.translate=function(n,e){return this.__stack.push(Dh().translate(n,e||0)),this};di.prototype.scale=function(n,e){return this.__stack.push(Dh().scale(n,!e&&e!==0?n:e)),this};di.prototype.rotate=function(n,e,t){return this.__stack.push(Dh().rotate(n,e||0,t||0)),this};di.prototype.skewX=function(n){return this.__stack.push(Dh().skewX(n)),this};di.prototype.skewY=function(n){return this.__stack.push(Dh().skewY(n)),this};di.prototype.matrix=function(n){return this.__stack.push(Dh().matrix(n)),this};di.prototype.transform=function(n){return n.trim()?(this.__stack.push(YV(n)),this):this};di.prototype.round=function(n){var e=0,t=0,r=0,i=0,s;return n=n||0,this.__evaluateStack(),this.segments.forEach(function(o){var a=o[0].toLowerCase()===o[0];switch(o[0]){case"H":case"h":a&&(o[1]+=r),r=o[1]-o[1].toFixed(n),o[1]=+o[1].toFixed(n);return;case"V":case"v":a&&(o[1]+=i),i=o[1]-o[1].toFixed(n),o[1]=+o[1].toFixed(n);return;case"Z":case"z":r=e,i=t;return;case"M":case"m":a&&(o[1]+=r,o[2]+=i),r=o[1]-o[1].toFixed(n),i=o[2]-o[2].toFixed(n),e=r,t=i,o[1]=+o[1].toFixed(n),o[2]=+o[2].toFixed(n);return;case"A":case"a":a&&(o[6]+=r,o[7]+=i),r=o[6]-o[6].toFixed(n),i=o[7]-o[7].toFixed(n),o[1]=+o[1].toFixed(n),o[2]=+o[2].toFixed(n),o[3]=+o[3].toFixed(n+2),o[6]=+o[6].toFixed(n),o[7]=+o[7].toFixed(n);return;default:s=o.length,a&&(o[s-2]+=r,o[s-1]+=i),r=o[s-2]-o[s-2].toFixed(n),i=o[s-1]-o[s-1].toFixed(n),o.forEach(function(l,u){u&&(o[u]=+o[u].toFixed(n))});return}}),this};di.prototype.iterate=function(n,e){var t=this.segments,r={},i=!1,s=0,o=0,a=0,l=0,u,c,h;if(e||this.__evaluateStack(),t.forEach(function(d,m){var v=n(d,m,s,o);Array.isArray(v)&&(r[m]=v,i=!0);var w=d[0]===d[0].toLowerCase();switch(d[0]){case"m":case"M":s=d[1]+(w?s:0),o=d[2]+(w?o:0),a=s,l=o;return;case"h":case"H":s=d[1]+(w?s:0);return;case"v":case"V":o=d[1]+(w?o:0);return;case"z":case"Z":s=a,o=l;return;default:s=d[d.length-2]+(w?s:0),o=d[d.length-1]+(w?o:0)}}),!i)return this;for(h=[],u=0;u<t.length;u++)if(typeof r[u]<"u")for(c=0;c<r[u].length;c++)h.push(r[u][c]);else h.push(t[u]);return this.segments=h,this};di.prototype.abs=function(){return this.iterate(function(n,e,t,r){var i=n[0],s=i.toUpperCase(),o;if(i!==s)switch(n[0]=s,i){case"v":n[1]+=r;return;case"a":n[6]+=t,n[7]+=r;return;default:for(o=1;o<n.length;o++)n[o]+=o%2?t:r}},!0),this};di.prototype.rel=function(){return this.iterate(function(n,e,t,r){var i=n[0],s=i.toLowerCase(),o;if(i!==s&&!(e===0&&i==="M"))switch(n[0]=s,i){case"V":n[1]-=r;return;case"A":n[6]-=t,n[7]-=r;return;default:for(o=1;o<n.length;o++)n[o]-=o%2?t:r}},!0),this};di.prototype.unarc=function(){return this.iterate(function(n,e,t,r){var i,s,o,a=[],l=n[0];return l!=="A"&&l!=="a"?null:(l==="a"?(s=t+n[6],o=r+n[7]):(s=n[6],o=n[7]),i=$V(t,r,s,o,n[4],n[5],n[1],n[2],n[3]),i.length===0?[[n[0]==="a"?"l":"L",n[6],n[7]]]:(i.forEach(function(u){a.push(["C",u[2],u[3],u[4],u[5],u[6],u[7]])}),a))}),this};di.prototype.unshort=function(){var n=this.segments,e,t,r,i,s;return this.iterate(function(o,a,l,u){var c=o[0],h=c.toUpperCase(),d;a&&(h==="T"?(d=c==="t",r=n[a-1],r[0]==="Q"?(e=r[1]-l,t=r[2]-u):r[0]==="q"?(e=r[1]-r[3],t=r[2]-r[4]):(e=0,t=0),i=-e,s=-t,d||(i+=l,s+=u),n[a]=[d?"q":"Q",i,s,o[1],o[2]]):h==="S"&&(d=c==="s",r=n[a-1],r[0]==="C"?(e=r[3]-l,t=r[4]-u):r[0]==="c"?(e=r[3]-r[5],t=r[4]-r[6]):(e=0,t=0),i=-e,s=-t,d||(i+=l,s+=u),n[a]=[d?"c":"C",i,s,o[1],o[2],o[3],o[4]]))}),this};var KV=di;(function(n){n.exports=KV})(AV);const JV=m2(b5);var LT=function(n){var e=n,t,r={a:0,b:0,c:0},i=[],s=/(\[[^\]]+\])/g,o=/(#[^\#\s\+>~\.\[:\)]+)/g,a=/(\.[^\s\+>~\.\[:\)]+)/g,l=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,u=/(:(?!not|global|local)[\w-]+\([^\)]*\))/gi,c=/(:(?!not|global|local)[^\s\+>~\.\[:]+)/g,h=/([^\s\+>~\.\[:]+)/g;return t=function(d,m){var v,w,x,g,S,_;if(d.test(e))for(v=e.match(d),w=0,x=v.length;w<x;w+=1)r[m]+=1,g=v[w],S=e.indexOf(g),_=g.length,i.push({selector:n.substr(S,_),type:m,index:S,length:_}),e=e.replace(g,Array(_+1).join(" "))},function(){var d=function(x){var g,S,_,T;if(x.test(e))for(g=e.match(x),S=0,_=g.length;S<_;S+=1)T=g[S],e=e.replace(T,Array(T.length+1).join("A"))},m=/\\[0-9A-Fa-f]{6}\s?/g,v=/\\[0-9A-Fa-f]{1,5}\s/g,w=/\\./g;d(m),d(v),d(w)}(),function(){var d=/{[^]*/gm,m,v,w,x;if(d.test(e))for(m=e.match(d),v=0,w=m.length;v<w;v+=1)x=m[v],e=e.replace(x,Array(x.length+1).join(" "))}(),t(s,"b"),t(o,"a"),t(a,"b"),t(l,"c"),t(u,"b"),t(c,"b"),e=e.replace(/[\*\s\+>~]/g," "),e=e.replace(/[#\.]/g," "),e=e.replace(/:not/g,"    "),e=e.replace(/:local/g,"      "),e=e.replace(/:global/g,"       "),e=e.replace(/[\(\)]/g," "),t(h,"c"),i.sort(function(d,m){return d.index-m.index}),{selector:n,specificity:"0,"+r.a.toString()+","+r.b.toString()+","+r.c.toString(),specificityArray:[0,r.a,r.b,r.c],parts:i}},QV=function(n,e){var t,r,i;if(typeof n=="string"){if(n.indexOf(",")!==-1)throw"Invalid CSS selector";t=LT(n).specificityArray}else if(Array.isArray(n)){if(n.filter(function(s){return typeof s=="number"}).length!==4)throw"Invalid specificity array";t=n}else throw"Invalid CSS selector or specificity array";if(typeof e=="string"){if(e.indexOf(",")!==-1)throw"Invalid CSS selector";r=LT(e).specificityArray}else if(Array.isArray(e)){if(e.filter(function(s){return typeof s=="number"}).length!==4)throw"Invalid specificity array";r=e}else throw"Invalid CSS selector or specificity array";for(i=0;i<4;i+=1){if(t[i]<r[i])return-1;if(t[i]>r[i])return 1}return 0},M5=function(n,e){return M5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},M5(n,e)};function Lr(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=n}M5(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var i2=function(){return i2=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},i2.apply(this,arguments)};function Ir(n,e,t,r){return new(t||(t=Promise))(function(i,s){function o(u){try{l(r.next(u))}catch(c){s(c)}}function a(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof t?c:new t(function(h){h(c)})).then(o,a)}l((r=r.apply(n,e||[])).next())})}function Dr(n,e){var t,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;o;)try{if(t=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||c[0]!==6&&c[0]!==2)){o=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(c[0]===6&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(n,o)}catch(h){c=[6,h],r=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}var hl=function(){function n(e){if(this.a=void 0,this.r=0,this.g=0,this.b=0,this.simpleColors={},this.colorDefs=[],this.ok=!1,e){for(var t in e.charAt(0)=="#"&&(e=e.substr(1,6)),e=(e=e.replace(/ /g,"")).toLowerCase(),this.simpleColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},this.simpleColors)e==t&&(e=this.simpleColors[t]);this.colorDefs=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^rgb\(([0-9.]+)%,\s*([0-9.]+)%,\s*([0-9.]+)%\)$/,example:["rgb(50.5%, 25.75%, 75.5%)","rgb(100%,0%,0%)"],process:function(l){return[Math.round(2.55*parseFloat(l[1])),Math.round(2.55*parseFloat(l[2])),Math.round(2.55*parseFloat(l[3]))]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}];for(var r=0;r<this.colorDefs.length;r++){var i=this.colorDefs[r].re,s=this.colorDefs[r].process,o=i.exec(e);if(o){var a=s(o);this.r=a[0],this.g=a[1],this.b=a[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b}}return n.prototype.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},n.prototype.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+(this.a||"1")+")"},n.prototype.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return e.length==1&&(e="0"+e),t.length==1&&(t="0"+t),r.length==1&&(r="0"+r),"#"+e+t+r},n.prototype.getHelpXML=function(){for(var e=[],t=0;t<this.colorDefs.length;t++)for(var r=this.colorDefs[t].example,i=0;i<r.length;i++)e[e.length]=r[i];for(var s in this.simpleColors)e[e.length]=s;var o=document.createElement("ul");for(o.setAttribute("id","rgbcolor-examples"),t=0;t<e.length;t++)try{var a=document.createElement("li"),l=new n(e[t]),u=document.createElement("div");u.style.cssText="margin: 3px; border: 1px solid black; background:"+l.toHex()+"; color:"+l.toHex(),u.appendChild(document.createTextNode("test"));var c=document.createTextNode(" "+e[t]+" -> "+l.toRGB()+" -> "+l.toHex());a.appendChild(u),a.appendChild(c),o.appendChild(a)}catch{}return o},n}(),Ps=function(){function n(e){this.color=e}return n.prototype.getFillData=function(e,t){return Ir(this,void 0,void 0,function(){return Dr(this,function(r){return[2,void 0]})})},n}(),sm=function(){function n(){this.xmlSpace="",this.fill=null,this.fillOpacity=1,this.fontFamily="",this.fontSize=16,this.fontStyle="",this.fontWeight="",this.opacity=1,this.stroke=null,this.strokeDasharray=null,this.strokeDashoffset=0,this.strokeLinecap="",this.strokeLinejoin="",this.strokeMiterlimit=4,this.strokeOpacity=1,this.strokeWidth=1,this.alignmentBaseline="",this.textAnchor="",this.visibility="",this.color=null,this.contextFill=null,this.contextStroke=null,this.fillRule=null}return n.prototype.clone=function(){var e=new n;return e.xmlSpace=this.xmlSpace,e.fill=this.fill,e.fillOpacity=this.fillOpacity,e.fontFamily=this.fontFamily,e.fontSize=this.fontSize,e.fontStyle=this.fontStyle,e.fontWeight=this.fontWeight,e.opacity=this.opacity,e.stroke=this.stroke,e.strokeDasharray=this.strokeDasharray,e.strokeDashoffset=this.strokeDashoffset,e.strokeLinecap=this.strokeLinecap,e.strokeLinejoin=this.strokeLinejoin,e.strokeMiterlimit=this.strokeMiterlimit,e.strokeOpacity=this.strokeOpacity,e.strokeWidth=this.strokeWidth,e.textAnchor=this.textAnchor,e.alignmentBaseline=this.alignmentBaseline,e.visibility=this.visibility,e.color=this.color,e.fillRule=this.fillRule,e.contextFill=this.contextFill,e.contextStroke=this.contextStroke,e},n.default=function(){var e=new n;return e.xmlSpace="default",e.fill=new Ps(new hl("rgb(0, 0, 0)")),e.fillOpacity=1,e.fontFamily="times",e.fontSize=16,e.fontStyle="normal",e.fontWeight="normal",e.opacity=1,e.stroke=null,e.strokeDasharray=null,e.strokeDashoffset=0,e.strokeLinecap="butt",e.strokeLinejoin="miter",e.strokeMiterlimit=4,e.strokeOpacity=1,e.strokeWidth=1,e.alignmentBaseline="baseline",e.textAnchor="start",e.visibility="visible",e.color=new hl("rgb(0, 0, 0)"),e.fillRule="nonzero",e.contextFill=null,e.contextStroke=null,e},n.getContextColors=function(e,t){t===void 0&&(t=!1);var r={};return e.attributeState.contextFill&&(r.contextFill=e.attributeState.contextFill),e.attributeState.contextStroke&&(r.contextStroke=e.attributeState.contextStroke),t&&e.attributeState.color&&(r.color=e.attributeState.color),r},n}(),Oh=function(){function n(e,t){var r,i,s;this.pdf=e,this.svg2pdfParameters=t.svg2pdfParameters,this.attributeState=t.attributeState?t.attributeState.clone():sm.default(),this.viewport=t.viewport,this.refsHandler=t.refsHandler,this.styleSheets=t.styleSheets,this.textMeasure=t.textMeasure,this.transform=(r=t.transform)!==null&&r!==void 0?r:this.pdf.unitMatrix,this.withinClipPath=(i=t.withinClipPath)!==null&&i!==void 0&&i,this.withinUse=(s=t.withinUse)!==null&&s!==void 0&&s}return n.prototype.clone=function(e){var t,r,i,s;return e===void 0&&(e={}),new n(this.pdf,{svg2pdfParameters:this.svg2pdfParameters,attributeState:e.attributeState?e.attributeState.clone():this.attributeState.clone(),viewport:(t=e.viewport)!==null&&t!==void 0?t:this.viewport,refsHandler:this.refsHandler,styleSheets:this.styleSheets,textMeasure:this.textMeasure,transform:(r=e.transform)!==null&&r!==void 0?r:this.transform,withinClipPath:(i=e.withinClipPath)!==null&&i!==void 0?i:this.withinClipPath,withinUse:(s=e.withinUse)!==null&&s!==void 0?s:this.withinUse})},n}(),$k=function(){function n(e){this.renderedElements={},this.idMap=e,this.idPrefix=String(n.instanceCounter++)}return n.prototype.getRendered=function(e,t,r){return Ir(this,void 0,void 0,function(){var i,s;return Dr(this,function(o){switch(o.label){case 0:return i=this.generateKey(e,t),this.renderedElements.hasOwnProperty(i)?[2,this.renderedElements[e]]:(s=this.get(e),this.renderedElements[i]=s,[4,r(s)]);case 1:return o.sent(),[2,s]}})})},n.prototype.get=function(e){return this.idMap[Xk(e,{isIdentifier:!0})]},n.prototype.generateKey=function(e,t){var r="";return t&&(r=["color","contextFill","contextStroke"].map(function(i){var s,o;return(o=(s=t[i])===null||s===void 0?void 0:s.toRGBA())!==null&&o!==void 0?o:""}).join("|")),this.idPrefix+"|"+e+"|"+r},n.instanceCounter=0,n}();function PT(n,e){return Math.atan2(e[1]-n[1],e[0]-n[0])}var RT=2/3;function kT(n,e){return[RT*(e[0]-n[0])+n[0],RT*(e[1]-n[1])+n[1]]}function w0(n){var e=Math.sqrt(n[0]*n[0]+n[1]*n[1]);return[n[0]/e,n[1]/e]}function op(n,e){return w0([e[0]-n[0],e[1]-n[1]])}function Hv(n,e){return[n[0]+e[0],n[1]+e[1]]}function aS(n,e){var t=n[0],r=n[1];return[e.a*t+e.c*r+e.e,e.b*t+e.d*r+e.f]}var om=function(){function n(){this.segments=[]}return n.prototype.moveTo=function(e,t){return this.segments.push(new vs(e,t)),this},n.prototype.lineTo=function(e,t){return this.segments.push(new Qc(e,t)),this},n.prototype.curveTo=function(e,t,r,i,s,o){return this.segments.push(new Vl(e,t,r,i,s,o)),this},n.prototype.close=function(){return this.segments.push(new E5),this},n.prototype.transform=function(e){this.segments.forEach(function(t){if(t instanceof vs||t instanceof Qc||t instanceof Vl){var r=aS([t.x,t.y],e);t.x=r[0],t.y=r[1]}if(t instanceof Vl){var i=aS([t.x1,t.y1],e),s=aS([t.x2,t.y2],e);t.x1=i[0],t.y1=i[1],t.x2=s[0],t.y2=s[1]}})},n.prototype.draw=function(e){var t=e.pdf;this.segments.forEach(function(r){r instanceof vs?t.moveTo(r.x,r.y):r instanceof Qc?t.lineTo(r.x,r.y):r instanceof Vl?t.curveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):t.close()})},n}(),vs=function(n,e){this.x=n,this.y=e},Qc=function(n,e){this.x=n,this.y=e},Vl=function(n,e,t,r,i,s){this.x1=n,this.y1=e,this.x2=t,this.y2=r,this.x=i,this.y=s},E5=function(){};function Ah(n,e){return e.split(",").indexOf((n.nodeName||n.tagName).toLowerCase())>=0}function Pt(n,e,t,r){var i;r===void 0&&(r=t);var s=(i=n.style)===null||i===void 0?void 0:i.getPropertyValue(r);if(s)return s;var o=e.getPropertyValue(n,r);return o||n.hasAttribute(t)&&n.getAttribute(t)||void 0}function ic(n,e,t){if(Pt(n.element,t.styleSheets,"display")==="none")return!1;var r=e,i=Pt(n.element,t.styleSheets,"visibility");return i&&(r=i!=="hidden"),r}function Fh(n,e,t){var r=ic(n,e,t);return n.element.childNodes.length!==0&&(n.children.forEach(function(i){i.isVisible(r,t)&&(r=!0)}),r)}var eW=function(){function n(){this.markers=[]}return n.prototype.addMarker=function(e){this.markers.push(e)},n.prototype.draw=function(e){return Ir(this,void 0,void 0,function(){var t,r,i,s,o,a,l,u;return Dr(this,function(c){switch(c.label){case 0:t=0,c.label=1;case 1:return t<this.markers.length?(r=this.markers[t],i=void 0,s=r.angle,o=r.anchor,a=Math.cos(s),l=Math.sin(s),i=e.pdf.Matrix(a,l,-l,a,o[0],o[1]),i=e.pdf.matrixMult(e.pdf.Matrix(e.attributeState.strokeWidth,0,0,e.attributeState.strokeWidth,0,0),i),i=e.pdf.matrixMult(i,e.transform),e.pdf.saveGraphicsState(),u=sm.getContextColors(e),[4,e.refsHandler.getRendered(r.id,u,function(h){return h.apply(e)})]):[3,4];case 2:c.sent(),e.pdf.doFormObject(e.refsHandler.generateKey(r.id,u),i),e.pdf.restoreGraphicsState(),c.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},n}(),Gc=function(n,e,t,r){r===void 0&&(r=!1),this.id=n,this.anchor=e,this.angle=t,this.isStartMarker=r},k3=/url\(["']?#([^"']+)["']?\)/,tW={bottom:"bottom","text-bottom":"bottom",top:"top","text-top":"top",hanging:"hanging",middle:"middle",central:"middle",center:"middle",mathematical:"middle",ideographic:"ideographic",alphabetic:"alphabetic",baseline:"alphabetic"},NT="http://www.w3.org/2000/svg";function Uu(n,e){var t;return(t=n&&n.toString().match(/^([\-0-9.]+)em$/))?parseFloat(t[1])*e:(t=n&&n.toString().match(/^([\-0-9.]+)(px|)$/))?parseFloat(t[1]):0}function Zk(n){return tW[n]||"alphabetic"}function Da(n){for(var e,t=[],r=/[+-]?(?:(?:\d+\.?\d*)|(?:\d*\.?\d+))(?:[eE][+-]?\d+)?/g;e=r.exec(n);)t.push(parseFloat(e[0]));return t}function Gp(n,e){if(n==="transparent"){var t=new hl("rgb(0,0,0)");return t.a=0,t}if(e&&n.toLowerCase()==="currentcolor")return e.color||new hl("rgb(0,0,0)");if(e&&n.toLowerCase()==="context-stroke")return e.contextStroke||new hl("rgb(0,0,0)");if(e&&n.toLowerCase()==="context-fill")return e.contextFill||new hl("rgb(0,0,0)");var r=/\s*rgba\(((?:[^,\)]*,){3}[^,\)]*)\)\s*/.exec(n);if(r){var i=Da(r[1]),s=new hl("rgb("+i.slice(0,3).join(",")+")");return s.a=i[3],s}return new hl(n)}var Wu={"sans-serif":"helvetica",verdana:"helvetica",arial:"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",serif:"times",cursive:"times",fantasy:"times"},lS,nW=(lS=yn.version.split("."),parseFloat(lS[0])===2&&parseFloat(lS[1])===3);function Kk(n,e){return nW?e==400?n=="italic"?"italic":"normal":e==700&&n!=="italic"?"bold":n+""+e:e==400||e==="normal"?n==="italic"?"italic":"normal":e!=700&&e!=="bold"||n!=="normal"?(e==700?"bold":e)+""+n:"bold"}function N3(n,e){if(Pt(e.element,n.styleSheets,"display")==="none")return[0,0,0,0];var t=[];return e.children.forEach(function(r){var i=r.getBoundingBox(n);if(i[0]!==0||i[1]!==0||i[2]!==0||i[3]!==0){var s=r.computeNodeTransform(n);i[0]=i[0]*s.sx+s.tx,i[1]=i[1]*s.sy+s.ty,i[2]=i[2]*s.sx,i[3]=i[3]*s.sy,t=t.length===0?i:[Math.min(t[0],i[0]),Math.min(t[1],i[1]),Math.max(t[0]+t[2],i[0]+i[2])-Math.min(t[0],i[0]),Math.max(t[1]+t[3],i[1]+i[3])-Math.min(t[1],i[1])]}}),t.length===0?[0,0,0,0]:t}function Qg(n,e){var t=parseFloat,r=t(n.getAttribute("x1"))||t(Pt(n,e.styleSheets,"x"))||t(Pt(n,e.styleSheets,"cx"))-t(Pt(n,e.styleSheets,"r"))||0,i=t(n.getAttribute("x2"))||r+t(Pt(n,e.styleSheets,"width"))||t(Pt(n,e.styleSheets,"cx"))+t(Pt(n,e.styleSheets,"r"))||0,s=t(n.getAttribute("y1"))||t(Pt(n,e.styleSheets,"y"))||t(Pt(n,e.styleSheets,"cy"))-t(Pt(n,e.styleSheets,"r"))||0,o=t(n.getAttribute("y2"))||s+t(Pt(n,e.styleSheets,"height"))||t(Pt(n,e.styleSheets,"cy"))+t(Pt(n,e.styleSheets,"r"))||0;return[Math.min(r,i),Math.min(s,o),Math.max(r,i)-Math.min(r,i),Math.max(s,o)-Math.min(s,o)]}function e1(n,e,t,r,i,s,o,a){a===void 0&&(a=!1);var l,u,c=e[0],h=e[1],d=e[2],m=e[3],v=i/d,w=s/m,x=n.getAttribute("preserveAspectRatio");if(x){var g=x.split(" ");g[0]==="defer"&&(g=g.slice(1)),l=g[0],u=g[1]||"meet"}else l="xMidYMid",u="meet";if(l!=="none"&&(u==="meet"?v=w=Math.min(v,w):u==="slice"&&(v=w=Math.max(v,w))),a)return o.pdf.Matrix(v,0,0,w,0,0);var S=t-c*v,_=r-h*w;l.indexOf("xMid")>=0?S+=(i-d*v)/2:l.indexOf("xMax")>=0&&(S+=i-d*v),l.indexOf("YMid")>=0?_+=(s-m*w)/2:l.indexOf("YMax")>=0&&(_+=s-m*w);var T=o.pdf.Matrix(1,0,0,1,S,_),L=o.pdf.Matrix(v,0,0,w,0,0);return o.pdf.matrixMult(L,T)}function ux(n,e){if(!n||n==="none")return e.pdf.unitMatrix;for(var t,r,i=/^[\s,]*matrix\(([^)]+)\)\s*/,s=/^[\s,]*translate\(([^)]+)\)\s*/,o=/^[\s,]*rotate\(([^)]+)\)\s*/,a=/^[\s,]*scale\(([^)]+)\)\s*/,l=/^[\s,]*skewX\(([^)]+)\)\s*/,u=/^[\s,]*skewY\(([^)]+)\)\s*/,c=e.pdf.unitMatrix;n.length>0&&n.length!==r;){r=n.length;var h=i.exec(n);if(h&&(t=Da(h[1]),c=e.pdf.matrixMult(e.pdf.Matrix(t[0],t[1],t[2],t[3],t[4],t[5]),c),n=n.substr(h[0].length)),h=o.exec(n)){t=Da(h[1]);var d=Math.PI*t[0]/180;if(c=e.pdf.matrixMult(e.pdf.Matrix(Math.cos(d),Math.sin(d),-Math.sin(d),Math.cos(d),0,0),c),t[1]||t[2]){var m=e.pdf.Matrix(1,0,0,1,t[1],t[2]),v=e.pdf.Matrix(1,0,0,1,-t[1],-t[2]);c=e.pdf.matrixMult(v,e.pdf.matrixMult(c,m))}n=n.substr(h[0].length)}(h=s.exec(n))&&(t=Da(h[1]),c=e.pdf.matrixMult(e.pdf.Matrix(1,0,0,1,t[0],t[1]||0),c),n=n.substr(h[0].length)),(h=a.exec(n))&&((t=Da(h[1]))[1]||(t[1]=t[0]),c=e.pdf.matrixMult(e.pdf.Matrix(t[0],0,0,t[1],0,0),c),n=n.substr(h[0].length)),(h=l.exec(n))&&(t=parseFloat(h[1]),t*=Math.PI/180,c=e.pdf.matrixMult(e.pdf.Matrix(1,0,Math.tan(t),1,0,0),c),n=n.substr(h[0].length)),(h=u.exec(n))&&(t=parseFloat(h[1]),t*=Math.PI/180,c=e.pdf.matrixMult(e.pdf.Matrix(1,Math.tan(t),0,1,0,0),c),n=n.substr(h[0].length))}return c}var I3=function(){function n(e,t){this.element=e,this.children=t,this.parent=null}return n.prototype.setParent=function(e){this.parent=e},n.prototype.getParent=function(){return this.parent},n.prototype.getBoundingBox=function(e){return Pt(this.element,e.styleSheets,"display")==="none"?[0,0,0,0]:this.getBoundingBoxCore(e)},n.prototype.computeNodeTransform=function(e){var t=this.computeNodeTransformCore(e),r=Pt(this.element,e.styleSheets,"transform");return r?e.pdf.matrixMult(t,ux(r,e)):t},n}(),t1=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Lr(e,n),e.prototype.render=function(t){return Promise.resolve()},e.prototype.getBoundingBoxCore=function(t){return[]},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(I3),Jk=function(n){function e(t,r,i){var s=n.call(this,r,i)||this;return s.pdfGradientType=t,s.contextColor=void 0,s}return Lr(e,n),e.prototype.apply=function(t){return Ir(this,void 0,void 0,function(){var r,i,s,o,a,l;return Dr(this,function(u){return(r=this.element.getAttribute("id"))?(i=this.getStops(t.styleSheets),s=0,o=!1,i.forEach(function(c){var h=c.opacity;h&&h!==1&&(s+=h,o=!0)}),o&&(a=new Yf({opacity:s/i.length})),l=new Jc(this.pdfGradientType,this.getCoordinates(),i,a),t.pdf.addShadingPattern(r,l),[2]):[2]})})},e.prototype.getStops=function(t){var r=this;if(this.stops)return this.stops;if(this.contextColor===void 0){this.contextColor=null;for(var i=this;i;){var s=Pt(i.element,t,"color");if(s){this.contextColor=Gp(s,null);break}i=i.getParent()}}var o=[];return this.children.forEach(function(a){if(a.element.tagName.toLowerCase()==="stop"){var l=Pt(a.element,t,"color"),u=Gp(Pt(a.element,t,"stop-color")||"",l?{color:Gp(l,null)}:{color:r.contextColor}),c=parseFloat(Pt(a.element,t,"stop-opacity")||"1");o.push({offset:e.parseGradientOffset(a.element.getAttribute("offset")||"0"),color:[u.r,u.g,u.b],opacity:c})}}),this.stops=o},e.prototype.getBoundingBoxCore=function(t){return Qg(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return Fh(this,t,r)},e.parseGradientOffset=function(t){var r=parseFloat(t);return!isNaN(r)&&t.indexOf("%")>=0?r/100:r},e}(t1),Qk=function(n){function e(t,r){return n.call(this,"axial",t,r)||this}return Lr(e,n),e.prototype.getCoordinates=function(){return[parseFloat(this.element.getAttribute("x1")||"0"),parseFloat(this.element.getAttribute("y1")||"0"),parseFloat(this.element.getAttribute("x2")||"1"),parseFloat(this.element.getAttribute("y2")||"0")]},e}(Jk),eN=function(n){function e(t,r){return n.call(this,"radial",t,r)||this}return Lr(e,n),e.prototype.getCoordinates=function(){var t=this.element.getAttribute("cx"),r=this.element.getAttribute("cy"),i=this.element.getAttribute("fx"),s=this.element.getAttribute("fy");return[parseFloat(i||t||"0.5"),parseFloat(s||r||"0.5"),0,parseFloat(t||"0.5"),parseFloat(r||"0.5"),parseFloat(this.element.getAttribute("r")||"0.5")]},e}(Jk),rW=function(){function n(e,t){this.key=e,this.gradient=t}return n.prototype.getFillData=function(e,t){return Ir(this,void 0,void 0,function(){var r,i,s;return Dr(this,function(o){switch(o.label){case 0:return[4,t.refsHandler.getRendered(this.key,null,function(a){return a.apply(new Oh(t.pdf,{refsHandler:t.refsHandler,textMeasure:t.textMeasure,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters}))})];case 1:return o.sent(),this.gradient.element.hasAttribute("gradientUnits")&&this.gradient.element.getAttribute("gradientUnits").toLowerCase()!=="objectboundingbox"?r=t.pdf.unitMatrix:(i=e.getBoundingBox(t),r=t.pdf.Matrix(i[2],0,0,i[3],i[0],i[1])),s=ux(Pt(this.gradient.element,t.styleSheets,"gradientTransform","transform"),t),[2,{key:this.key,matrix:t.pdf.matrixMult(s,r)}]}})})},n}(),tN=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Lr(e,n),e.prototype.apply=function(t){return Ir(this,void 0,void 0,function(){var r,i,s,o,a;return Dr(this,function(l){switch(l.label){case 0:if(!(r=this.element.getAttribute("id")))return[2];i=this.getBoundingBox(t),s=new Rf([i[0],i[1],i[0]+i[2],i[1]+i[3]],i[2],i[3]),t.pdf.beginTilingPattern(s),o=0,a=this.children,l.label=1;case 1:return o<a.length?[4,a[o].render(new Oh(t.pdf,{attributeState:t.attributeState,refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]:[3,4];case 2:l.sent(),l.label=3;case 3:return o++,[3,1];case 4:return t.pdf.endTilingPattern(r,s),[2]}})})},e.prototype.getBoundingBoxCore=function(t){return Qg(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return Fh(this,t,r)},e}(t1),iW=function(){function n(e,t){this.key=e,this.pattern=t}return n.prototype.getFillData=function(e,t){return Ir(this,void 0,void 0,function(){var r,i,s,o,a,l,u,c,h,d,m,v;return Dr(this,function(w){switch(w.label){case 0:return[4,t.refsHandler.getRendered(this.key,null,function(x){return x.apply(new Oh(t.pdf,{refsHandler:t.refsHandler,textMeasure:t.textMeasure,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters}))})];case 1:return w.sent(),r={key:this.key,boundingBox:void 0,xStep:0,yStep:0,matrix:void 0},s=t.pdf.unitMatrix,this.pattern.element.hasAttribute("patternUnits")&&this.pattern.element.getAttribute("patternUnits").toLowerCase()!=="objectboundingbox"||(i=e.getBoundingBox(t),s=t.pdf.Matrix(1,0,0,1,i[0],i[1]),a=this.pattern.getBoundingBox(t),l=a[0]*i[0]||0,u=a[1]*i[1]||0,c=a[2]*i[2]||0,h=a[3]*i[3]||0,r.boundingBox=[l,u,l+c,u+h],r.xStep=c,r.yStep=h),o=t.pdf.unitMatrix,this.pattern.element.hasAttribute("patternContentUnits")&&this.pattern.element.getAttribute("patternContentUnits").toLowerCase()==="objectboundingbox"&&(i||(i=e.getBoundingBox(t)),o=t.pdf.Matrix(i[2],0,0,i[3],0,0),a=r.boundingBox||this.pattern.getBoundingBox(t),l=a[0]/i[0]||0,u=a[1]/i[1]||0,c=a[2]/i[2]||0,h=a[3]/i[3]||0,r.boundingBox=[l,u,l+c,u+h],r.xStep=c,r.yStep=h),d=t.pdf.unitMatrix,(m=Pt(this.pattern.element,t.styleSheets,"patternTransform","transform"))&&(d=ux(m,t)),v=o,v=t.pdf.matrixMult(v,s),v=t.pdf.matrixMult(v,d),v=t.pdf.matrixMult(v,t.transform),r.matrix=v,[2,r]}})})},n}();function sW(n,e){var t=k3.exec(n);if(t){var r=t[1],i=e.refsHandler.get(r);return i&&(i instanceof Qk||i instanceof eN)?function(o,a,l){var u=a.getStops(l.styleSheets);if(u.length===0)return null;if(u.length===1){var c=u[0].color,h=new hl;return h.ok=!0,h.r=c[0],h.g=c[1],h.b=c[2],h.a=u[0].opacity,new Ps(h)}return new rW(o,a)}(r,i,e):i&&i instanceof tN?new iW(r,i):new Ps(new hl("rgb(0, 0, 0)"))}var s=Gp(n,e.attributeState);return s.ok?new Ps(s):null}function D3(n,e,t){var r=t||e.element,i=Pt(r,n.styleSheets,"color");if(i){var s=Gp(i,n.attributeState);s.ok?n.attributeState.color=s:n.attributeState.color=new hl("rgb(0,0,0)")}var o=Pt(r,n.styleSheets,"visibility");o&&(n.attributeState.visibility=o);var a=Pt(r,n.styleSheets,"fill");a&&(n.attributeState.fill=sW(a,n));var l=Pt(r,n.styleSheets,"fill-opacity");l&&(n.attributeState.fillOpacity=parseFloat(l));var u=Pt(r,n.styleSheets,"stroke-opacity");u&&(n.attributeState.strokeOpacity=parseFloat(u));var c=Pt(r,n.styleSheets,"opacity");c&&(n.attributeState.opacity=parseFloat(c));var h=Pt(r,n.styleSheets,"stroke-width");h!==void 0&&h!==""&&(n.attributeState.strokeWidth=Math.abs(parseFloat(h)));var d=Pt(r,n.styleSheets,"stroke");if(d)if(d==="none")n.attributeState.stroke=null;else{var m=Gp(d,n.attributeState);m.ok&&(n.attributeState.stroke=new Ps(m))}d&&n.attributeState.stroke instanceof Ps&&(n.attributeState.contextStroke=n.attributeState.stroke.color),a&&n.attributeState.fill instanceof Ps&&(n.attributeState.contextFill=n.attributeState.fill.color);var v=Pt(r,n.styleSheets,"stroke-linecap");v&&(n.attributeState.strokeLinecap=v);var w=Pt(r,n.styleSheets,"stroke-linejoin");w&&(n.attributeState.strokeLinejoin=w);var x=Pt(r,n.styleSheets,"stroke-dasharray");if(x){var g=parseInt(Pt(r,n.styleSheets,"stroke-dashoffset")||"0");n.attributeState.strokeDasharray=Da(x),n.attributeState.strokeDashoffset=g}var S=Pt(r,n.styleSheets,"stroke-miterlimit");S!==void 0&&S!==""&&(n.attributeState.strokeMiterlimit=parseFloat(S));var _=r.getAttribute("xml:space");_&&(n.attributeState.xmlSpace=_);var T=Pt(r,n.styleSheets,"font-weight");T&&(n.attributeState.fontWeight=T);var L=Pt(r,n.styleSheets,"font-style");L&&(n.attributeState.fontStyle=L);var P=Pt(r,n.styleSheets,"font-family");if(P){var N=EV.parse(P);n.attributeState.fontFamily=function(G,J,ie){var ce=Kk(G.fontStyle,G.fontWeight),W=ie.pdf.getFontList(),Y="";return J.some(function($){var oe=W[$];return oe&&oe.indexOf(ce)>=0?(Y=$,!0):($=$.toLowerCase(),!!Wu.hasOwnProperty($)&&(Y=$,!0))})||(Y="times"),Y}(n.attributeState,N,n)}var k=Pt(r,n.styleSheets,"font-size");if(k){var R=n.pdf.getFontSize();n.attributeState.fontSize=Uu(k,R)}var U=Pt(r,n.styleSheets,"vertical-align")||Pt(r,n.styleSheets,"alignment-baseline");if(U){var F=U.match(/(baseline|text-bottom|alphabetic|ideographic|middle|central|mathematical|text-top|bottom|center|top|hanging)/);F&&(n.attributeState.alignmentBaseline=F[0])}var z=Pt(r,n.styleSheets,"text-anchor");z&&(n.attributeState.textAnchor=z);var V=Pt(r,n.styleSheets,"fill-rule");V&&(n.attributeState.fillRule=V)}function O3(n,e,t){var r=1,i=1;r*=n.attributeState.fillOpacity,r*=n.attributeState.opacity,n.attributeState.fill instanceof Ps&&n.attributeState.fill.color.a!==void 0&&(r*=n.attributeState.fill.color.a),i*=n.attributeState.strokeOpacity,i*=n.attributeState.opacity,n.attributeState.stroke instanceof Ps&&n.attributeState.stroke.color.a!==void 0&&(i*=n.attributeState.stroke.color.a);var s,o,a=r<1,l=i<1;if(Ah(t,"use")?(a=!0,l=!0,r*=n.attributeState.fill?1:0,i*=n.attributeState.stroke?1:0):n.withinUse&&(n.attributeState.fill!==e.attributeState.fill?(a=!0,r*=n.attributeState.fill?1:0):a&&!n.attributeState.fill&&(r=0),n.attributeState.stroke!==e.attributeState.stroke?(l=!0,i*=n.attributeState.stroke?1:0):l&&!n.attributeState.stroke&&(i=0)),a||l){var u={};a&&(u.opacity=r),l&&(u["stroke-opacity"]=i),n.pdf.setGState(new Yf(u))}if(n.attributeState.fill&&n.attributeState.fill!==e.attributeState.fill&&n.attributeState.fill instanceof Ps&&n.attributeState.fill.color.ok&&!Ah(t,"text")&&n.pdf.setFillColor(n.attributeState.fill.color.r,n.attributeState.fill.color.g,n.attributeState.fill.color.b),n.attributeState.strokeWidth!==e.attributeState.strokeWidth&&n.pdf.setLineWidth(n.attributeState.strokeWidth),n.attributeState.stroke!==e.attributeState.stroke&&n.attributeState.stroke instanceof Ps&&n.pdf.setDrawColor(n.attributeState.stroke.color.r,n.attributeState.stroke.color.g,n.attributeState.stroke.color.b),n.attributeState.strokeLinecap!==e.attributeState.strokeLinecap&&n.pdf.setLineCap(n.attributeState.strokeLinecap),n.attributeState.strokeLinejoin!==e.attributeState.strokeLinejoin&&n.pdf.setLineJoin(n.attributeState.strokeLinejoin),n.attributeState.strokeDasharray===e.attributeState.strokeDasharray&&n.attributeState.strokeDashoffset===e.attributeState.strokeDashoffset||!n.attributeState.strokeDasharray||n.pdf.setLineDashPattern(n.attributeState.strokeDasharray,n.attributeState.strokeDashoffset),n.attributeState.strokeMiterlimit!==e.attributeState.strokeMiterlimit&&n.pdf.setLineMiterLimit(n.attributeState.strokeMiterlimit),n.attributeState.fontFamily!==e.attributeState.fontFamily&&(s=Wu.hasOwnProperty(n.attributeState.fontFamily)?Wu[n.attributeState.fontFamily]:n.attributeState.fontFamily),n.attributeState.fill&&n.attributeState.fill!==e.attributeState.fill&&n.attributeState.fill instanceof Ps&&n.attributeState.fill.color.ok){var c=n.attributeState.fill.color;n.pdf.setTextColor(c.r,c.g,c.b)}n.attributeState.fontWeight===e.attributeState.fontWeight&&n.attributeState.fontStyle===e.attributeState.fontStyle||(o=Kk(n.attributeState.fontStyle,n.attributeState.fontWeight)),s===void 0&&o===void 0||(s===void 0&&(s=Wu.hasOwnProperty(n.attributeState.fontFamily)?Wu[n.attributeState.fontFamily]:n.attributeState.fontFamily),n.pdf.setFont(s,o)),n.attributeState.fontSize!==e.attributeState.fontSize&&n.pdf.setFontSize(n.attributeState.fontSize*n.pdf.internal.scaleFactor)}function nN(n,e,t){var r=k3.exec(n);if(r){var i=r[1];return t.refsHandler.get(i)||void 0}}function rN(n,e,t){return Ir(this,void 0,void 0,function(){var r,i;return Dr(this,function(s){switch(s.label){case 0:return r=t.clone(),e.element.hasAttribute("clipPathUnits")&&e.element.getAttribute("clipPathUnits").toLowerCase()==="objectboundingbox"&&(i=n.getBoundingBox(t),r.transform=t.pdf.matrixMult(t.pdf.Matrix(i[2],0,0,i[3],i[0],i[1]),t.transform)),[4,e.apply(r)];case 1:return s.sent(),[2]}})})}var iN=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Lr(e,n),e.prototype.render=function(t){return Ir(this,void 0,void 0,function(){var r,i,s,o;return Dr(this,function(a){switch(a.label){case 0:return this.isVisible(t.attributeState.visibility!=="hidden",t)?((r=t.clone()).transform=r.pdf.matrixMult(this.computeNodeTransform(r),t.transform),D3(r,this),i=Pt(this.element,r.styleSheets,"clip-path"),(s=i&&i!=="none")?(o=nN(i,0,r))?o.isVisible(!0,r)?(r.pdf.saveGraphicsState(),[4,rN(this,o,r)]):[3,2]:[3,4]:[3,5]):[2];case 1:return a.sent(),[3,3];case 2:return[2];case 3:return[3,5];case 4:s=!1,a.label=5;case 5:return r.withinClipPath||r.pdf.saveGraphicsState(),O3(r,t,this.element),[4,this.renderCore(r)];case 6:return a.sent(),r.withinClipPath||r.pdf.restoreGraphicsState(),s&&r.pdf.restoreGraphicsState(),[2]}})})},e}(I3),cx=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Lr(e,n),e}(iN),n1=function(n){function e(t,r,i){var s=n.call(this,r,i)||this;return s.cachedPath=null,s.hasMarkers=t,s}return Lr(e,n),e.prototype.renderCore=function(t){return Ir(this,void 0,void 0,function(){var r;return Dr(this,function(i){switch(i.label){case 0:return(r=this.getCachedPath(t))===null||r.segments.length===0?[2]:(t.withinClipPath?r.transform(t.transform):t.pdf.setCurrentTransformationMatrix(t.transform),r.draw(t),[4,this.fillOrStroke(t)]);case 1:return i.sent(),this.hasMarkers?[4,this.drawMarkers(t,r)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},e.prototype.getCachedPath=function(t){return this.cachedPath||(this.cachedPath=this.getPath(t))},e.prototype.drawMarkers=function(t,r){return Ir(this,void 0,void 0,function(){return Dr(this,function(i){switch(i.label){case 0:return[4,this.getMarkers(r,t).draw(t.clone({transform:t.pdf.unitMatrix}))];case 1:return i.sent(),[2]}})})},e.prototype.fillOrStroke=function(t){return Ir(this,void 0,void 0,function(){var r,i,s,o,a;return Dr(this,function(l){switch(l.label){case 0:return t.withinClipPath?[2]:(r=t.attributeState.fill,i=t.attributeState.stroke&&t.attributeState.strokeWidth!==0,r?[4,r.getFillData(this,t)]:[3,2]);case 1:return o=l.sent(),[3,3];case 2:o=void 0,l.label=3;case 3:return s=o,a=t.attributeState.fillRule==="evenodd",r&&i||t.withinUse?a?t.pdf.fillStrokeEvenOdd(s):t.pdf.fillStroke(s):r?a?t.pdf.fillEvenOdd(s):t.pdf.fill(s):i?t.pdf.stroke():t.pdf.discardPath(),[2]}})})},e.prototype.getBoundingBoxCore=function(t){var r=this.getCachedPath(t);if(!r||!r.segments.length)return[0,0,0,0];for(var i=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=0,u=0,c=0;c<r.segments.length;c++){var h=r.segments[c];(h instanceof vs||h instanceof Qc||h instanceof Vl)&&(l=h.x,u=h.y),h instanceof Vl?(i=Math.min(i,l,h.x1,h.x2,h.x),o=Math.max(o,l,h.x1,h.x2,h.x),s=Math.min(s,u,h.y1,h.y2,h.y),a=Math.max(a,u,h.y1,h.y2,h.y)):(i=Math.min(i,l),o=Math.max(o,l),s=Math.min(s,u),a=Math.max(a,u))}return[i,s,o-i,a-s]},e.prototype.getMarkers=function(t,r){var i=Pt(this.element,r.styleSheets,"marker-start"),s=Pt(this.element,r.styleSheets,"marker-mid"),o=Pt(this.element,r.styleSheets,"marker-end"),a=new eW;if(i||s||o){o&&(o=uS(o)),i&&(i=uS(i)),s&&(s=uS(s));for(var l=t.segments,u=[1,0],c=void 0,h=!1,d=[1,0],m=!1,v=function(x){var g=l[x],S=i&&(x===1||!(l[x]instanceof vs)&&l[x-1]instanceof vs);S&&l.forEach(function(k,R){if(!m&&k instanceof E5&&R>x){var U=l[R-1];m=(U instanceof vs||U instanceof Qc||U instanceof Vl)&&U}});var _=o&&(x===l.length-1||!(l[x]instanceof vs)&&l[x+1]instanceof vs),T=s&&x>0&&!(x===1&&l[x-1]instanceof vs),L=l[x-1]||null;if(L instanceof vs||L instanceof Qc||L instanceof Vl)if(g instanceof Vl)S&&a.addMarker(new Gc(i,[L.x,L.y],PT(m?[m.x,m.y]:[L.x,L.y],[g.x1,g.y1]),!0)),_&&a.addMarker(new Gc(o,[g.x,g.y],PT([g.x2,g.y2],[g.x,g.y]))),T&&(c=op([L.x,L.y],[g.x1,g.y1]),c=L instanceof vs?c:w0(Hv(u,c)),a.addMarker(new Gc(s,[L.x,L.y],Math.atan2(c[1],c[0])))),u=op([g.x2,g.y2],[g.x,g.y]);else if(g instanceof vs||g instanceof Qc){if(c=op([L.x,L.y],[g.x,g.y]),S){var P=m?op([m.x,m.y],[g.x,g.y]):c;a.addMarker(new Gc(i,[L.x,L.y],Math.atan2(P[1],P[0]),!0))}_&&a.addMarker(new Gc(o,[g.x,g.y],Math.atan2(c[1],c[0]))),T&&(P=g instanceof vs?u:L instanceof vs?c:w0(Hv(u,c)),a.addMarker(new Gc(s,[L.x,L.y],Math.atan2(P[1],P[0])))),u=c}else g instanceof E5&&(c=op([L.x,L.y],[h.x,h.y]),T&&(P=L instanceof vs?c:w0(Hv(u,c)),a.addMarker(new Gc(s,[L.x,L.y],Math.atan2(P[1],P[0])))),_&&(P=w0(Hv(c,d)),a.addMarker(new Gc(o,[h.x,h.y],Math.atan2(P[1],P[0])))),u=c);else{h=g instanceof vs&&g;var N=l[x+1];(N instanceof vs||N instanceof Qc||N instanceof Vl)&&(d=op([h.x,h.y],[N.x,N.y]))}},w=0;w<l.length;w++)v(w)}return a.markers.forEach(function(x){var g=r.refsHandler.get(x.id);if(g){var S=Pt(g.element,r.styleSheets,"orient");S!=null&&(x.isStartMarker&&S==="auto-start-reverse"&&(x.angle+=Math.PI),isNaN(Number(S))||(x.angle=parseFloat(S)/180*Math.PI))}}),a},e}(cx);function uS(n){var e=k3.exec(n);return e&&e[1]||void 0}var oW=function(n){function e(t,r){return n.call(this,!0,t,r)||this}return Lr(e,n),e.prototype.getPath=function(t){if(t.withinClipPath||t.attributeState.stroke===null)return null;var r=parseFloat(this.element.getAttribute("x1")||"0"),i=parseFloat(this.element.getAttribute("y1")||"0"),s=parseFloat(this.element.getAttribute("x2")||"0"),o=parseFloat(this.element.getAttribute("y2")||"0");return r||s||i||o?new om().moveTo(r,i).lineTo(s,o):null},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return ic(this,t,r)},e.prototype.fillOrStroke=function(t){return Ir(this,void 0,void 0,function(){return Dr(this,function(r){switch(r.label){case 0:return t.attributeState.fill=null,[4,n.prototype.fillOrStroke.call(this,t)];case 1:return r.sent(),[2]}})})},e}(n1),sN=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Lr(e,n),e.prototype.apply=function(t){return Ir(this,void 0,void 0,function(){var r,i,s,o,a;return Dr(this,function(l){switch(l.label){case 0:return this.isVisible(t.attributeState.visibility!=="hidden",t)?((r=t.clone()).transform=r.pdf.unitMatrix,D3(r,this),i=Pt(this.element,r.styleSheets,"clip-path"),i&&i!=="none"&&(s=nN(i,0,r))?s.isVisible(!0,r)?[4,rN(this,s,r)]:[3,2]:[3,3]):[2];case 1:return l.sent(),[3,3];case 2:return[2];case 3:O3(r,t,this.element),o=0,a=this.children,l.label=4;case 4:return o<a.length?[4,a[o].render(r)]:[3,7];case 5:l.sent(),l.label=6;case 6:return o++,[3,4];case 7:return[2]}})})},e.prototype.getBoundingBoxCore=function(t){return N3(t,this)},e.prototype.isVisible=function(t,r){return Fh(this,t,r)},e.prototype.computeNodeTransformCore=function(t){var r=parseFloat(Pt(this.element,t.styleSheets,"x")||"0"),i=parseFloat(Pt(this.element,t.styleSheets,"y")||"0"),s=this.element.getAttribute("viewBox");if(s){var o=Da(s),a=parseFloat(Pt(this.element,t.styleSheets,"width")||Pt(this.element.ownerSVGElement,t.styleSheets,"width")||s[2]),l=parseFloat(Pt(this.element,t.styleSheets,"height")||Pt(this.element.ownerSVGElement,t.styleSheets,"height")||s[3]);return e1(this.element,o,r,i,a,l,t)}return t.pdf.Matrix(1,0,0,1,r,i)},e}(t1),hx=function(n,e){this.width=n,this.height=e},aW=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Lr(e,n),e.prototype.renderCore=function(t){return Ir(this,void 0,void 0,function(){var r,i,s,o,a,l,u,c,h,d,m,v,w;return Dr(this,function(x){switch(x.label){case 0:return r=parseFloat,(i=this.element.getAttribute("href")||this.element.getAttribute("xlink:href"))?(s=i.substring(1),o=t.refsHandler.get(s),a=Ah(o.element,"symbol,svg")&&o.element.hasAttribute("viewBox"),l=r(Pt(this.element,t.styleSheets,"x")||"0"),u=r(Pt(this.element,t.styleSheets,"y")||"0"),c=void 0,h=void 0,a?(c=r(Pt(this.element,t.styleSheets,"width")||Pt(o.element,t.styleSheets,"width")||"0"),h=r(Pt(this.element,t.styleSheets,"height")||Pt(o.element,t.styleSheets,"height")||"0"),l+=r(Pt(o.element,t.styleSheets,"x")||"0"),u+=r(Pt(o.element,t.styleSheets,"y")||"0"),m=Da(o.element.getAttribute("viewBox")),d=e1(o.element,m,l,u,c,h,t)):d=t.pdf.Matrix(1,0,0,1,l,u),v=sm.getContextColors(t,!0),w=new Oh(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,withinUse:!0,viewport:a?new hx(c,h):t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure,attributeState:Object.assign(sm.default(),v)}),[4,t.refsHandler.getRendered(s,v,function(g){return e.renderReferencedNode(g,s,w)})]):[2];case 1:return x.sent(),t.pdf.saveGraphicsState(),t.pdf.setCurrentTransformationMatrix(t.transform),a&&Pt(o.element,t.styleSheets,"overflow")!=="visible"&&(t.pdf.rect(l,u,c,h),t.pdf.clip().discardPath()),t.pdf.doFormObject(t.refsHandler.generateKey(s,v),d),t.pdf.restoreGraphicsState(),[2]}})})},e.renderReferencedNode=function(t,r,i){return Ir(this,void 0,void 0,function(){var s;return Dr(this,function(o){switch(o.label){case 0:return s=[(s=t.getBoundingBox(i))[0]-.5*s[2],s[1]-.5*s[3],2*s[2],2*s[3]],i.pdf.beginFormObject(s[0],s[1],s[2],s[3],i.pdf.unitMatrix),t instanceof sN?[4,t.apply(i)]:[3,2];case 1:return o.sent(),[3,4];case 2:return[4,t.render(i)];case 3:o.sent(),o.label=4;case 4:return i.pdf.endFormObject(i.refsHandler.generateKey(r,i.attributeState)),[2]}})})},e.prototype.getBoundingBoxCore=function(t){return Qg(this.element,t)},e.prototype.isVisible=function(t,r){return ic(this,t,r)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(cx),lW=function(n){function e(t,r){return n.call(this,!1,t,r)||this}return Lr(e,n),e.prototype.getPath=function(t){var r=parseFloat(Pt(this.element,t.styleSheets,"width")||"0"),i=parseFloat(Pt(this.element,t.styleSheets,"height")||"0");if(!isFinite(r)||r<=0||!isFinite(i)||i<=0)return null;var s=Pt(this.element,t.styleSheets,"rx"),o=Pt(this.element,t.styleSheets,"ry"),a=Math.min(parseFloat(s||o||"0"),.5*r),l=Math.min(parseFloat(o||s||"0"),.5*i),u=parseFloat(Pt(this.element,t.styleSheets,"x")||"0"),c=parseFloat(Pt(this.element,t.styleSheets,"y")||"0"),h=4/3*(Math.SQRT2-1);return a===0&&l===0?new om().moveTo(u,c).lineTo(u+r,c).lineTo(u+r,c+i).lineTo(u,c+i).close():new om().moveTo(u+=a,c).lineTo(u+=r-2*a,c).curveTo(u+a*h,c,u+a,c+(l-l*h),u+=a,c+=l).lineTo(u,c+=i-2*l).curveTo(u,c+l*h,u-a*h,c+l,u-=a,c+=l).lineTo(u+=2*a-r,c).curveTo(u-a*h,c,u-a,c-l*h,u-=a,c-=l).lineTo(u,c+=2*l-i).curveTo(u,c-l*h,u+a*h,c-l,u+=a,c-=l).close()},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return ic(this,t,r)},e}(n1),oN=function(n){function e(t,r){return n.call(this,!1,t,r)||this}return Lr(e,n),e.prototype.getPath=function(t){var r=this.getRx(t),i=this.getRy(t);if(!isFinite(r)||i<=0||!isFinite(i)||i<=0)return null;var s=parseFloat(Pt(this.element,t.styleSheets,"cx")||"0"),o=parseFloat(Pt(this.element,t.styleSheets,"cy")||"0"),a=4/3*(Math.SQRT2-1)*r,l=4/3*(Math.SQRT2-1)*i;return new om().moveTo(s+r,o).curveTo(s+r,o-l,s+a,o-i,s,o-i).curveTo(s-a,o-i,s-r,o-l,s-r,o).curveTo(s-r,o+l,s-a,o+i,s,o+i).curveTo(s+a,o+i,s+r,o+l,s+r,o)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return ic(this,t,r)},e}(n1),uW=function(n){function e(t,r){return n.call(this,t,r)||this}return Lr(e,n),e.prototype.getRx=function(t){return parseFloat(Pt(this.element,t.styleSheets,"rx")||"0")},e.prototype.getRy=function(t){return parseFloat(Pt(this.element,t.styleSheets,"ry")||"0")},e}(oN);function aN(n){var e="invisible",t=n.stroke&&n.strokeWidth!==0,r=n.fill;return r&&t?e="fillThenStroke":r?e="fill":t&&(e="stroke"),e}function IT(n){return n.replace(/[\n\r]/g,"")}function DT(n){return n.replace(/[\t]/g," ")}function OT(n){return n.replace(/ +/g," ")}function FT(n,e,t){switch(Pt(n,t.styleSheets,"text-transform")){case"uppercase":return e.toUpperCase();case"lowercase":return e.toLowerCase();default:return e}}var cS=function(){function n(e,t,r,i){this.textNode=e,this.texts=[],this.textNodes=[],this.contexts=[],this.textAnchor=t,this.originX=r,this.originY=i,this.textMeasures=[]}return n.prototype.setX=function(e){this.originX=e},n.prototype.setY=function(e){this.originY=e},n.prototype.add=function(e,t,r){this.texts.push(t),this.textNodes.push(e),this.contexts.push(r)},n.prototype.rightTrimText=function(){for(var e=this.texts.length-1;e>=0;e--)if(this.contexts[e].attributeState.xmlSpace==="default"&&(this.texts[e]=this.texts[e].replace(/\s+$/,"")),this.texts[e].match(/[^\s]/))return!1;return!0},n.prototype.measureText=function(e){for(var t=0;t<this.texts.length;t++)this.textMeasures.push({width:e.textMeasure.measureTextWidth(this.texts[t],this.contexts[t].attributeState),length:this.texts[t].length})},n.prototype.put=function(e,t){var r,i,s,o,a=[],l=[],u=[],c=this.originX,h=this.originY,d=c,m=c;for(r=0;r<this.textNodes.length;r++){i=this.textNodes[r],s=this.contexts[r],o=this.textMeasures[r]||{width:e.textMeasure.measureTextWidth(this.texts[r],this.contexts[r].attributeState),length:this.texts[r].length};var v=c,w=h;if(i.nodeName!=="#text"&&!a.includes(i)){a.push(i);var x=n.resolveRelativePositionAttribute(i,"dx");x!==null&&(v+=Uu(x,s.attributeState.fontSize));var g=n.resolveRelativePositionAttribute(i,"dy");g!==null&&(w+=Uu(g,s.attributeState.fontSize))}l[r]=v,u[r]=w,c=v+o.width+o.length*t,h=w,d=Math.min(d,v),m=Math.max(m,c)}var S=0;switch(this.textAnchor){case"start":S=0;break;case"middle":S=(m-d)/2;break;case"end":S=m-d}for(r=0;r<this.textNodes.length;r++)if(i=this.textNodes[r],s=this.contexts[r],i.nodeName==="#text"||s.attributeState.visibility!=="hidden"){e.pdf.saveGraphicsState(),O3(s,e,i);var _=s.attributeState.alignmentBaseline,T=aN(s.attributeState);e.pdf.text(this.texts[r],l[r]-S,u[r],{baseline:Zk(_),angle:e.transform,renderingMode:T==="fill"?void 0:T,charSpace:t===0?void 0:t}),e.pdf.restoreGraphicsState()}return[c,h]},n.resolveRelativePositionAttribute=function(e,t){for(var r,i=e;i&&Ah(i,"tspan");){if(i.hasAttribute(t))return i.getAttribute(t);if(((r=e.parentElement)===null||r===void 0?void 0:r.firstChild)!==e)break;i=i.parentElement}return null},n}(),cW=function(n){function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.boundingBox=[],t}return Lr(e,n),e.prototype.processTSpans=function(t,r,i,s,o,a){for(var l=i.pdf.getFontSize(),u=i.attributeState.xmlSpace,c=!0,h=!1,d=0;d<r.childNodes.length;d++){var m=r.childNodes[d];if(m.textContent){var v=m.textContent;if(m.nodeName==="#text"){var w=IT(v);w=DT(w),u==="default"&&(w=OT(w),c&&w.match(/^\s/)&&(h=!0),w.match(/[^\s]/)&&(c=!1),a.prevText.match(/\s$/)&&(w=w.replace(/^\s+/,"")));var x=FT(r,w,i);o.add(r,x,i),a.prevText=v,a.prevContext=i}else if(!Ah(m,"title")){if(Ah(m,"tspan")){var g=m,S=g.getAttribute("x");if(S!==null){var _=Uu(S,l);o=new cS(this,Pt(g,i.styleSheets,"text-anchor")||i.attributeState.textAnchor,_,0),s.push({type:"y",chunk:o})}var T=g.getAttribute("y");if(T!==null){var L=Uu(T,l);o=new cS(this,Pt(g,i.styleSheets,"text-anchor")||i.attributeState.textAnchor,0,L),s.push({type:"x",chunk:o})}var P=i.clone();D3(P,t,g),this.processTSpans(t,g,P,s,o,a)}}}}return h},e.prototype.renderCore=function(t){return Ir(this,void 0,void 0,function(){var r,i,s,o,a,l,u,c,h,d,m,v,w,x,g,S,_,T,L,P,N,k,R;return Dr(this,function(U){if(t.pdf.saveGraphicsState(),r=0,i=0,s=1,o=t.pdf.getFontSize(),a=Uu(this.element.getAttribute("x"),o),l=Uu(this.element.getAttribute("y"),o),u=Uu(this.element.getAttribute("dx"),o),c=Uu(this.element.getAttribute("dy"),o),h=parseFloat(this.element.getAttribute("textLength")||"0"),d=t.attributeState.visibility,this.element.childElementCount===0)m=this.element.textContent||"",v=function(F,z){return F=DT(F=IT(F)),z.xmlSpace==="default"&&(F=OT(F=F.trim())),F}(m,t.attributeState),w=FT(this.element,v,t),r=t.textMeasure.getTextOffset(w,t.attributeState),h>0&&(x=t.textMeasure.measureTextWidth(w,t.attributeState),t.attributeState.xmlSpace==="default"&&m.match(/^\s/)&&(s=0),i=(h-x)/(w.length-s)||0),d==="visible"&&(g=t.attributeState.alignmentBaseline,S=aN(t.attributeState),t.pdf.text(w,a+u-r,l+c,{baseline:Zk(g),angle:t.transform,renderingMode:S==="fill"?void 0:S,charSpace:i===0?void 0:i}),this.boundingBox=[a+u-r,l+c+.1*o,t.textMeasure.measureTextWidth(w,t.attributeState),o]);else{for(_=[],T=new cS(this,t.attributeState.textAnchor,a+u,l+c),_.push({type:"",chunk:T}),L=this.processTSpans(this,this.element,t,_,T,{prevText:" ",prevContext:t}),s=L?0:1,P=!0,N=_.length-1;N>=0;N--)P&&(P=_[N].chunk.rightTrimText());h>0&&(k=0,R=0,_.forEach(function(F){var z=F.chunk;z.measureText(t),z.textMeasures.forEach(function(V){var G=V.width,J=V.length;k+=G,R+=J})}),i=(h-k)/(R-s)),_.reduce(function(F,z){var V=z.type,G=z.chunk;return V==="x"?G.setX(F[0]):V==="y"&&G.setY(F[1]),G.put(t,i)},[0,0])}return t.pdf.restoreGraphicsState(),[2]})})},e.prototype.isVisible=function(t,r){return Fh(this,t,r)},e.prototype.getBoundingBoxCore=function(t){return this.boundingBox.length>0?this.boundingBox:Qg(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(cx),hW=function(n){function e(t,r){return n.call(this,!0,t,r)||this}return Lr(e,n),e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return ic(this,t,r)},e.prototype.getPath=function(t){var r,i,s=new JV(Pt(this.element,t.styleSheets,"d")||"").unshort().unarc().abs(),o=new om;return s.iterate(function(a){switch(a[0]){case"M":o.moveTo(a[1],a[2]);break;case"L":o.lineTo(a[1],a[2]);break;case"H":o.lineTo(a[1],i);break;case"V":o.lineTo(r,a[1]);break;case"C":o.curveTo(a[1],a[2],a[3],a[4],a[5],a[6]);break;case"Q":var l=kT([r,i],[a[1],a[2]]),u=kT([a[3],a[4]],[a[1],a[2]]);o.curveTo(l[0],l[1],u[0],u[1],a[3],a[4]);break;case"Z":o.close()}switch(a[0]){case"M":case"L":r=a[1],i=a[2];break;case"H":r=a[1];break;case"V":i=a[1];break;case"C":r=a[5],i=a[6];break;case"Q":r=a[3],i=a[4]}}),o},e}(n1),fW=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,((?:.|\s)*)$/i,dW=function(n){function e(t,r){var i=n.call(this,t,r)||this;return i.imageLoadingPromise=null,i.imageUrl=i.element.getAttribute("xlink:href")||i.element.getAttribute("href"),i.imageUrl&&(i.imageLoadingPromise=e.fetchImageData(i.imageUrl)),i}return Lr(e,n),e.prototype.renderCore=function(t){return Ir(this,void 0,void 0,function(){var r,i,s,o,a,l,u,c,h,d,m,v,w,x,g,S,_,T;return Dr(this,function(L){switch(L.label){case 0:return this.imageLoadingPromise?(t.pdf.setCurrentTransformationMatrix(t.transform),r=parseFloat(Pt(this.element,t.styleSheets,"width")||"0"),i=parseFloat(Pt(this.element,t.styleSheets,"height")||"0"),s=parseFloat(Pt(this.element,t.styleSheets,"x")||"0"),o=parseFloat(Pt(this.element,t.styleSheets,"y")||"0"),!isFinite(r)||r<=0||!isFinite(i)||i<=0?[2]:[4,this.imageLoadingPromise]):[2];case 1:return a=L.sent(),l=a.data,(u=a.format).indexOf("svg")!==0?[3,3]:(c=new DOMParser,h=c.parseFromString(l,"image/svg+xml").firstElementChild,(!(d=this.element.getAttribute("preserveAspectRatio"))||d.indexOf("defer")<0||!h.getAttribute("preserveAspectRatio"))&&h.setAttribute("preserveAspectRatio",d||""),h.setAttribute("x",String(s)),h.setAttribute("y",String(o)),h.setAttribute("width",String(r)),h.setAttribute("height",String(i)),[4,F3(h,m={}).render(new Oh(t.pdf,{refsHandler:new $k(m),styleSheets:t.styleSheets,viewport:new hx(r,i),svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]);case 2:return L.sent(),[2];case 3:v="data:image/".concat(u,";base64,").concat(btoa(l)),L.label=4;case 4:return L.trys.push([4,6,,7]),[4,e.getImageDimensions(v)];case 5:return w=L.sent(),x=w[0],g=w[1],S=[0,0,x,g],_=e1(this.element,S,s,o,r,i,t),t.pdf.setCurrentTransformationMatrix(_),t.pdf.addImage(v,"",0,0,x,g),[3,7];case 6:return T=L.sent(),typeof console=="object"&&console.warn&&console.warn("Could not load image ".concat(this.imageUrl,`. 
`).concat(T)),[3,7];case 7:return[2]}})})},e.prototype.getBoundingBoxCore=function(t){return Qg(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return ic(this,t,r)},e.fetchImageData=function(t){return Ir(this,void 0,void 0,function(){var r,i,s,o,a;return Dr(this,function(l){switch(l.label){case 0:if(!(s=t.match(fW)))return[3,1];if(o=s[2],(a=o.split("/"))[0]!=="image")throw new Error("Unsupported image URL: ".concat(t));return i=a[1],r=s[5],s[4]==="base64"?(r=r.replace(/\s/g,""),r=atob(r)):r=decodeURIComponent(r),[3,3];case 1:return[4,e.fetchImage(t)];case 2:r=l.sent(),i=t.substring(t.lastIndexOf(".")+1),l.label=3;case 3:return[2,{data:r,format:i}]}})})},e.fetchImage=function(t){return new Promise(function(r,i){var s=new XMLHttpRequest;s.open("GET",t,!0),s.responseType="arraybuffer",s.onload=function(){if(s.status!==200)throw new Error("Error ".concat(s.status,": Failed to load image '").concat(t,"'"));for(var o=new Uint8Array(s.response),a="",l=0;l<o.length;l++)a+=String.fromCharCode(o[l]);r(a)},s.onerror=i,s.onabort=i,s.send(null)})},e.getMimeType=function(t){switch(t=t.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";default:return"image/".concat(t)}},e.getImageDimensions=function(t){return new Promise(function(r,i){var s=new Image;s.onload=function(){r([s.width,s.height])},s.onerror=i,s.src=t})},e}(cx),lN=function(n){function e(t,r,i){var s=n.call(this,!0,r,i)||this;return s.closed=t,s}return Lr(e,n),e.prototype.getPath=function(t){if(!this.element.hasAttribute("points")||this.element.getAttribute("points")==="")return null;var r=e.parsePointsString(this.element.getAttribute("points")),i=new om;if(r.length<1)return i;i.moveTo(r[0][0],r[0][1]);for(var s=1;s<r.length;s++)i.lineTo(r[s][0],r[s][1]);return this.closed&&i.close(),i},e.prototype.isVisible=function(t,r){return ic(this,t,r)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.parsePointsString=function(t){for(var r=Da(t),i=[],s=0;s<r.length-1;s+=2){var o=r[s],a=r[s+1];i.push([o,a])}return i},e}(n1),pW=function(n){function e(t,r){return n.call(this,!0,t,r)||this}return Lr(e,n),e}(lN),mW=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Lr(e,n),e.prototype.render=function(t){return Promise.resolve()},e.prototype.getBoundingBoxCore=function(t){return[0,0,0,0]},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return ic(this,t,r)},e}(I3),gW=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Lr(e,n),e.prototype.apply=function(t){return Ir(this,void 0,void 0,function(){var r,i,s,o,a,l;return Dr(this,function(u){switch(u.label){case 0:r=this.computeNodeTransform(t),i=this.getBoundingBox(t),t.pdf.beginFormObject(i[0],i[1],i[2],i[3],r),s=sm.getContextColors(t),function(c){var h=c.attributeState,d=c.pdf,m=1,v=1;m*=h.fillOpacity,m*=h.opacity,h.fill instanceof Ps&&h.fill.color.a!==void 0&&(m*=h.fill.color.a),v*=h.strokeOpacity,v*=h.opacity,h.stroke instanceof Ps&&h.stroke.color.a!==void 0&&(v*=h.stroke.color.a);var w,x={};if(x.opacity=m,x["stroke-opacity"]=v,d.setGState(new Yf(x)),h.fill&&h.fill instanceof Ps&&h.fill.color.ok?d.setFillColor(h.fill.color.r,h.fill.color.g,h.fill.color.b):d.setFillColor(0,0,0),d.setLineWidth(h.strokeWidth),h.stroke instanceof Ps?d.setDrawColor(h.stroke.color.r,h.stroke.color.g,h.stroke.color.b):d.setDrawColor(0,0,0),d.setLineCap(h.strokeLinecap),d.setLineJoin(h.strokeLinejoin),h.strokeDasharray?d.setLineDashPattern(h.strokeDasharray,h.strokeDashoffset):d.setLineDashPattern([],0),d.setLineMiterLimit(h.strokeMiterlimit),w=Wu.hasOwnProperty(h.fontFamily)?Wu[h.fontFamily]:h.fontFamily,h.fill&&h.fill instanceof Ps&&h.fill.color.ok){var g=h.fill.color;d.setTextColor(g.r,g.g,g.b)}else d.setTextColor(0,0,0);var S="";h.fontWeight==="bold"&&(S="bold"),h.fontStyle==="italic"&&(S+="italic"),S===""&&(S="normal"),w!==void 0||S!==void 0?(w===void 0&&(w=Wu.hasOwnProperty(h.fontFamily)?Wu[h.fontFamily]:h.fontFamily),d.setFont(w,S)):d.setFont("helvetica",S),d.setFontSize(h.fontSize*d.internal.scaleFactor)}(o=new Oh(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure,attributeState:Object.assign(sm.default(),s)})),a=0,l=this.children,u.label=1;case 1:return a<l.length?[4,l[a].render(o)]:[3,4];case 2:u.sent(),u.label=3;case 3:return a++,[3,1];case 4:return t.pdf.endFormObject(o.refsHandler.generateKey(this.element.getAttribute("id"),s)),[2]}})})},e.prototype.getBoundingBoxCore=function(t){var r,i=this.element.getAttribute("viewBox");return i&&(r=Da(i)),[r&&r[0]||0,r&&r[1]||0,r&&r[2]||parseFloat(this.element.getAttribute("markerWidth")||"3"),r&&r[3]||parseFloat(this.element.getAttribute("markerHeight")||"3")]},e.prototype.computeNodeTransformCore=function(t){var r,i=parseFloat(this.element.getAttribute("refX")||"0"),s=parseFloat(this.element.getAttribute("refY")||"0"),o=this.element.getAttribute("viewBox");if(o){var a=Da(o);r=e1(this.element,a,0,0,parseFloat(this.element.getAttribute("markerWidth")||"3"),parseFloat(this.element.getAttribute("markerHeight")||"3"),t,!0),r=t.pdf.matrixMult(t.pdf.Matrix(1,0,0,1,-i,-s),r)}else r=t.pdf.Matrix(1,0,0,1,-i,-s);return r},e.prototype.isVisible=function(t,r){return Fh(this,t,r)},e}(t1),vW=function(n){function e(t,r){return n.call(this,t,r)||this}return Lr(e,n),e.prototype.getR=function(t){var r;return(r=this.r)!==null&&r!==void 0?r:this.r=parseFloat(Pt(this.element,t.styleSheets,"r")||"0")},e.prototype.getRx=function(t){return this.getR(t)},e.prototype.getRy=function(t){return this.getR(t)},e}(oN),yW=function(n){function e(t,r){return n.call(this,!1,t,r)||this}return Lr(e,n),e}(lN),uN=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Lr(e,n),e.prototype.renderCore=function(t){return Ir(this,void 0,void 0,function(){var r,i;return Dr(this,function(s){switch(s.label){case 0:r=0,i=this.children,s.label=1;case 1:return r<i.length?[4,i[r].render(t)]:[3,4];case 2:s.sent(),s.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.getBoundingBoxCore=function(t){return N3(t,this)},e}(iN),xW=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Lr(e,n),e.prototype.isVisible=function(t,r){return Fh(this,t,r)},e.prototype.render=function(t){return Ir(this,void 0,void 0,function(){var r,i,s,o,a;return Dr(this,function(l){switch(l.label){case 0:return this.isVisible(t.attributeState.visibility!=="hidden",t)?(r=this.getX(t),i=this.getY(t),s=this.getWidth(t),o=this.getHeight(t),t.pdf.saveGraphicsState(),a=t.transform,this.element.hasAttribute("transform")&&(a=t.pdf.matrixMult(ux(this.element.getAttribute("transform"),t),a)),t.pdf.setCurrentTransformationMatrix(a),t.withinUse||Pt(this.element,t.styleSheets,"overflow")==="visible"||t.pdf.rect(r,i,s,o).clip().discardPath(),[4,n.prototype.render.call(this,t.clone({transform:t.pdf.unitMatrix,viewport:t.withinUse?t.viewport:new hx(s,o)}))]):[2];case 1:return l.sent(),t.pdf.restoreGraphicsState(),[2]}})})},e.prototype.computeNodeTransform=function(t){return this.computeNodeTransformCore(t)},e.prototype.computeNodeTransformCore=function(t){if(t.withinUse)return t.pdf.unitMatrix;var r,i=this.getX(t),s=this.getY(t),o=this.getViewBox();if(o){var a=this.getWidth(t),l=this.getHeight(t);r=e1(this.element,o,i,s,a,l,t)}else r=t.pdf.Matrix(1,0,0,1,i,s);return r},e.prototype.getWidth=function(t){if(this.width!==void 0)return this.width;var r,i,s=t.svg2pdfParameters;if(this.isOutermostSvg(t))if(s.width!=null)r=s.width;else if(i=Pt(this.element,t.styleSheets,"width"))r=parseFloat(i);else{var o=this.getViewBox();if(o&&(s.height!=null||Pt(this.element,t.styleSheets,"height"))){var a=o[2]/o[3];r=this.getHeight(t)*a}else r=Math.min(300,t.viewport.width,2*t.viewport.height)}else r=(i=Pt(this.element,t.styleSheets,"width"))?parseFloat(i):t.viewport.width;return this.width=r},e.prototype.getHeight=function(t){if(this.height!==void 0)return this.height;var r,i,s=t.svg2pdfParameters;if(this.isOutermostSvg(t))if(s.height!=null)r=s.height;else if(i=Pt(this.element,t.styleSheets,"height"))r=parseFloat(i);else{var o=this.getViewBox();if(o){var a=o[2]/o[3];r=this.getWidth(t)/a}else r=Math.min(150,t.viewport.width/2,t.viewport.height)}else r=(i=Pt(this.element,t.styleSheets,"height"))?parseFloat(i):t.viewport.height;return this.height=r},e.prototype.getX=function(t){if(this.x!==void 0)return this.x;if(this.isOutermostSvg(t))return this.x=0;var r=Pt(this.element,t.styleSheets,"x");return this.x=r?parseFloat(r):0},e.prototype.getY=function(t){if(this.y!==void 0)return this.y;if(this.isOutermostSvg(t))return this.y=0;var r=Pt(this.element,t.styleSheets,"y");return this.y=r?parseFloat(r):0},e.prototype.getViewBox=function(){if(this.viewBox!==void 0)return this.viewBox;var t=this.element.getAttribute("viewBox");return this.viewBox=t?Da(t):void 0},e.prototype.isOutermostSvg=function(t){return t.svg2pdfParameters.element===this.element},e}(uN),cN=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Lr(e,n),e.prototype.isVisible=function(t,r){return Fh(this,t,r)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(uN),wW=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Lr(e,n),e.prototype.renderCore=function(t){return Ir(this,void 0,void 0,function(){var r,i,s,o;return Dr(this,function(a){switch(a.label){case 0:return[4,n.prototype.renderCore.call(this,t)];case 1:return a.sent(),(r=Pt(this.element,t.styleSheets,"href"))&&(i=this.getBoundingBox(t),s=t.pdf.internal.scaleFactor,o=t.pdf.internal.pageSize.getHeight(),t.pdf.link(s*(i[0]*t.transform.sx+t.transform.tx),o-s*(i[1]*t.transform.sy+t.transform.ty),s*i[2],s*i[3],{url:r})),[2]}})})},e}(cN),SW=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Lr(e,n),e.prototype.apply=function(t){return Ir(this,void 0,void 0,function(){var r,i,s,o,a;return Dr(this,function(l){switch(l.label){case 0:if(!this.isVisible(!0,t))return[2];r=t.pdf.matrixMult(this.computeNodeTransform(t),t.transform),t.pdf.setCurrentTransformationMatrix(r),i=0,s=this.children,l.label=1;case 1:return i<s.length?[4,s[i].render(new Oh(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,withinClipPath:!0,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]:[3,4];case 2:l.sent(),l.label=3;case 3:return i++,[3,1];case 4:return o=this.children.length>0&&!!Pt(this.children[0].element,t.styleSheets,"clip-rule"),a=o?this.getClipRuleAttr(this.children[0].element,t.styleSheets):this.getClipRuleAttr(this.element,t.styleSheets),t.pdf.clip(a).discardPath(),t.pdf.setCurrentTransformationMatrix(r.inversed()),[2]}})})},e.prototype.getBoundingBoxCore=function(t){return N3(t,this)},e.prototype.isVisible=function(t,r){return Fh(this,t,r)},e.prototype.getClipRuleAttr=function(t,r){return Pt(t,r,"clip-rule")==="evenodd"?"evenodd":void 0},e}(t1);function F3(n,e){var t,r=[];switch(function(s,o){for(var a=[],l=0;l<s.childNodes.length;l++){var u=s.childNodes[l];u.nodeName.charAt(0)!=="#"&&a.push(u)}for(l=0;l<a.length;l++)o(l,a[l])}(n,function(s,o){return r.push(F3(o,e))}),n.tagName.toLowerCase()){case"a":t=new wW(n,r);break;case"g":t=new cN(n,r);break;case"circle":t=new vW(n,r);break;case"clippath":t=new SW(n,r);break;case"ellipse":t=new uW(n,r);break;case"lineargradient":t=new Qk(n,r);break;case"image":t=new dW(n,r);break;case"line":t=new oW(n,r);break;case"marker":t=new gW(n,r);break;case"path":t=new hW(n,r);break;case"pattern":t=new tN(n,r);break;case"polygon":t=new pW(n,r);break;case"polyline":t=new yW(n,r);break;case"radialgradient":t=new eN(n,r);break;case"rect":t=new lW(n,r);break;case"svg":t=new xW(n,r);break;case"symbol":t=new sN(n,r);break;case"text":t=new cW(n,r);break;case"use":t=new aW(n,r);break;default:t=new mW(n,r)}if(e!=null&&t.element.hasAttribute("id")){var i=Xk(t.element.id,{isIdentifier:!0});e[i]=e[i]||t}return t.children.forEach(function(s){return s.setParent(t)}),t}var _W=function(){function n(e,t){this.rootSvg=e,this.loadExternalSheets=t,this.styleSheets=[]}return n.prototype.load=function(){return Ir(this,void 0,void 0,function(){var e;return Dr(this,function(t){switch(t.label){case 0:return[4,this.collectStyleSheetTexts()];case 1:return e=t.sent(),this.parseCssSheets(e),[2]}})})},n.prototype.collectStyleSheetTexts=function(){return Ir(this,void 0,void 0,function(){var e,t,r,i,s;return Dr(this,function(o){switch(o.label){case 0:if(e=[],this.loadExternalSheets&&this.rootSvg.ownerDocument)for(i=0;i<this.rootSvg.ownerDocument.childNodes.length;i++)(t=this.rootSvg.ownerDocument.childNodes[i]).nodeName==="xml-stylesheet"&&typeof t.data=="string"&&e.push(n.loadSheet(t.data.match(/href=["'].*?["']/)[0].split("=")[1].slice(1,-1)));for(r=this.rootSvg.querySelectorAll("style,link"),i=0;i<r.length;i++)Ah(s=r[i],"style")?e.push(s.textContent):this.loadExternalSheets&&Ah(s,"link")&&s.getAttribute("rel")==="stylesheet"&&s.hasAttribute("href")&&e.push(n.loadSheet(s.getAttribute("href")));return[4,Promise.all(e)];case 1:return[2,o.sent().filter(function(a){return a!==null})]}})})},n.prototype.parseCssSheets=function(e){for(var t=document.implementation.createHTMLDocument(""),r=0,i=e;r<i.length;r++){var s=i[r],o=t.createElement("style");o.textContent=s,t.body.appendChild(o);var a=o.sheet;if(a instanceof CSSStyleSheet){for(var l=a.cssRules.length-1;l>=0;l--){var u=a.cssRules[l];if(u instanceof CSSStyleRule){var c=u;if(c.selectorText.indexOf(",")>=0){a.deleteRule(l);for(var h=c.cssText.substring(c.selectorText.length),d=n.splitSelectorAtCommas(c.selectorText),m=0;m<d.length;m++)a.insertRule(d[m]+h,l+m)}}else a.deleteRule(l)}this.styleSheets.push(a)}}},n.splitSelectorAtCommas=function(e){for(var t,r=/,|["']/g,i=/[^\\]["]/g,s=/[^\\][']/g,o=[],a="initial",l=-1,u=i,c=0;c<e.length;)switch(a){case"initial":r.lastIndex=c,(t=r.exec(e))?(t[0]===","?(o.push(e.substring(l+1,r.lastIndex-1).trim()),l=r.lastIndex-1):(a="withinQuotes",u=t[0]==='"'?i:s),c=r.lastIndex):(o.push(e.substring(l+1).trim()),c=e.length);break;case"withinQuotes":u.lastIndex=c,(t=u.exec(e))&&(c=u.lastIndex,a="initial")}return o},n.loadSheet=function(e){return new Promise(function(t,r){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="text",i.onload=function(){i.status!==200&&r(new Error("Error ".concat(i.status,": Failed to load '").concat(e,"'"))),t(i.responseText)},i.onerror=r,i.onabort=r,i.send(null)}).catch(function(){return null})},n.prototype.getPropertyValue=function(e,t){for(var r=[],i=0,s=this.styleSheets;i<s.length;i++)for(var o=s[i],a=0;a<o.cssRules.length;a++){var l=o.cssRules[a];l.style.getPropertyValue(t)&&e.matches(l.selectorText)&&r.push(l)}if(r.length!==0)return r.reduce(function(u,c){return d=c,((m=(h=u).style.getPropertyPriority(t))!==d.style.getPropertyPriority(t)?m==="important"?1:-1:QV(h.selectorText,d.selectorText))===1?u:c;var h,d,m}).style.getPropertyValue(t)||void 0},n}(),bW=function(){function n(){this.measureMethods={}}return n.prototype.getTextOffset=function(e,t){var r=t.textAnchor;if(r==="start")return 0;var i=this.measureTextWidth(e,t),s=0;switch(r){case"end":s=i;break;case"middle":s=i/2}return s},n.prototype.measureTextWidth=function(e,t){if(e.length===0)return 0;var r=t.fontFamily;return this.getMeasureFunction(r).call(this,e,t.fontFamily,t.fontSize+"px",t.fontStyle,t.fontWeight)},n.prototype.getMeasurementTextNode=function(){if(!this.textMeasuringTextElement){this.textMeasuringTextElement=document.createElementNS(NT,"text");var e=document.createElementNS(NT,"svg");e.appendChild(this.textMeasuringTextElement),e.style.setProperty("position","absolute"),e.style.setProperty("visibility","hidden"),document.body.appendChild(e)}return this.textMeasuringTextElement},n.prototype.canvasTextMeasure=function(e,t,r,i,s){var o=document.createElement("canvas").getContext("2d");return o!=null?(o.font=[i,s,r,t].join(" "),o.measureText(e).width):0},n.prototype.svgTextMeasure=function(e,t,r,i,s,o){o===void 0&&(o=this.getMeasurementTextNode());var a=o;return a.setAttribute("font-family",t),a.setAttribute("font-size",r),a.setAttribute("font-style",i),a.setAttribute("font-weight",s),a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),a.textContent=e,a.getBBox().width},n.prototype.getMeasureFunction=function(e){var t=this.measureMethods[e];if(!t){var r="16px",i="normal",s="normal",o=this.canvasTextMeasure(n.testString,e,r,i,s),a=this.svgTextMeasure(n.testString,e,r,i,s);t=Math.abs(o-a)<n.epsilon?this.canvasTextMeasure:this.svgTextMeasure,this.measureMethods[e]=t}return t},n.prototype.cleanupTextMeasuring=function(){if(this.textMeasuringTextElement){var e=this.textMeasuringTextElement.parentNode;e&&document.body.removeChild(e),this.textMeasuringTextElement=void 0}},n.testString=`abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789!"$%&/()=?'\\+*-_.:,;^}][{#~|<>`,n.epsilon=.1,n}();function MW(n,e){return Ir(this,arguments,void 0,function(t,r,i){var s,o,a,l,u,c,h,d,m,v,w,x,g,S;return i===void 0&&(i={}),Dr(this,function(_){switch(_.label){case 0:return s=(x=i.x)!==null&&x!==void 0?x:0,o=(g=i.y)!==null&&g!==void 0?g:0,a=(S=i.loadExternalStyleSheets)!==null&&S!==void 0&&S,u=new $k(l={}),[4,(c=new _W(t,a)).load()];case 1:return _.sent(),h=new hx(r.internal.pageSize.getWidth(),r.internal.pageSize.getHeight()),d=i2(i2({},i),{element:t}),m=new bW,v=new Oh(r,{refsHandler:u,styleSheets:c,viewport:h,svg2pdfParameters:d,textMeasure:m}),r.advancedAPI(),r.saveGraphicsState(),r.setCurrentTransformationMatrix(r.Matrix(1,0,0,1,s,o)),r.setLineWidth(v.attributeState.strokeWidth),w=v.attributeState.fill.color,r.setFillColor(w.r,w.g,w.b),r.setFont(v.attributeState.fontFamily),r.setFontSize(v.attributeState.fontSize*r.internal.scaleFactor),[4,F3(t,l).render(v)];case 2:return _.sent(),r.restoreGraphicsState(),r.compatAPI(),v.textMeasure.cleanupTextMeasuring(),[2,r]}})})}yn.API.svg=function(n,e){return e===void 0&&(e={}),MW(n,this,e)};function $c({path:n,stroke:e,strokeWidth:t,strokeDasharray:r,onClick:i,viewId:s}){if(!n)return null;const o=n.data||(typeof n=="string"?n:String(n)),a=n.id;return pe("path",{id:a,d:o,stroke:e,strokeWidth:t,fill:"none",strokeDasharray:r,style:{vectorEffect:"non-scaling-stroke",cursor:"pointer"},onClick:()=>i&&i(a,n)})}const wf={sub:(n,e)=>[n[0]-e[0],n[1]-e[1]],add:(n,e)=>[n[0]+e[0],n[1]+e[1]],scale:(n,e)=>[n[0]*e,n[1]*e],len:n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),normalize:n=>{const e=wf.len(n);return e>1e-9?wf.scale(n,1/e):[0,0]},perp:n=>[-n[1],n[0]],dot:(n,e)=>n[0]*e[0]+n[1]*e[1]};function by({measurementData:n,svgRef:e,onUpdatePosition:t}){const{pathId:r,type:i,geometry:s,textPosition:o,viewId:a}=n,[l,u]=qe.useState(!1),[c,h]=qe.useState({x:0,y:0}),[d,m]=qe.useState({x:0,y:0}),v=z=>{e!=null&&e.current&&(z.stopPropagation(),u(!0),h({x:z.clientX,y:z.clientY}),m(o),window.addEventListener("mousemove",w),window.addEventListener("mouseup",x))},w=z=>{if(!l||!(e!=null&&e.current))return;const V=z.clientX-c.x,G=z.clientY-c.y,J=e.current.getScreenCTM();if(!J)return;const ie=V/J.a,ce=G/J.d,W={x:d.x+ie,y:d.y+ce};t(r,W)},x=()=>{l&&(u(!1),window.removeEventListener("mousemove",w),window.removeEventListener("mouseup",x))},g=z=>{if(!(e!=null&&e.current)||z.touches.length!==1)return;z.stopPropagation();const V=z.touches[0];u(!0),h({x:V.clientX,y:V.clientY}),m(o),window.addEventListener("touchmove",S,{passive:!1}),window.addEventListener("touchend",_),window.addEventListener("touchcancel",_)},S=z=>{if(!l||!(e!=null&&e.current)||z.touches.length!==1)return;z.preventDefault();const V=z.touches[0],G=V.clientX-c.x,J=V.clientY-c.y,ie=e.current.getScreenCTM();if(!ie)return;const ce=G/ie.a,W=J/ie.d,Y={x:d.x+ce,y:d.y+W};t(r,Y)},_=()=>{l&&(u(!1),window.removeEventListener("touchmove",S),window.removeEventListener("touchend",_),window.removeEventListener("touchcancel",_))},T="#222222",L=.15,P=2.2,N=1.2,k=1.2,R=.8,U=1.2;let F=null;if(i==="line"&&s.endpoints){const[z,V]=s.endpoints,J=(s.length||0).toFixed(2),ie=V[0]-z[0],ce=V[1]-z[1],W=(z[0]+V[0])/2,Y=(z[1]+V[1])/2,$=Math.sqrt(ie*ie+ce*ce),oe=$>1e-6?ie/$:1,D=$>1e-6?ce/$:0,j=-D,K=oe,ae=o.x-W,fe=o.y-Y,we=ae*j+fe*K,Ee=Math.abs(we)<k?Math.sign(we||1)*k:we,Ce=[z[0]+j*Ee,z[1]+K*Ee],Ye=[V[0]+j*Ee,V[1]+K*Ee],Ne=[z[0]+j*Math.sign(Ee)*R,z[1]+K*Math.sign(Ee)*R],he=[V[0]+j*Math.sign(Ee)*R,V[1]+K*Math.sign(Ee)*R],Oe=[Ce[0]+j*Math.sign(Ee)*U,Ce[1]+K*Math.sign(Ee)*U],Ae=[Ye[0]+j*Math.sign(Ee)*U,Ye[1]+K*Math.sign(Ee)*U],_e=$,ne=oe,ut=D,$e=`M ${Ce[0]} ${Ce[1]} 
                    l ${ne*N} ${ut*N} 
                    l ${-ut*N*.35} ${ne*N*.35} 
                    l ${-ne*N*.65} ${-ut*N*.65} 
                    z`,Be=`M ${Ye[0]} ${Ye[1]} 
                    l ${-ne*N} ${-ut*N} 
                    l ${ut*N*.35} ${-ne*N*.35} 
                    l ${ne*N*.65} ${ut*N*.65} 
                    z`,mt=(J.length*P*.65+k*2)/2,ue=(o.x-Ce[0])*ne+(o.y-Ce[1])*ut,Q=Math.max(N,ue-mt),Re=Math.min(_e-N,ue+mt),Je=[Ce[0]+ne*Q,Ce[1]+ut*Q],Ze=[Ce[0]+ne*Re,Ce[1]+ut*Re],ct=Q>N+1e-6,vt=Re<_e-N-1e-6;F=gt("g",{children:[pe("line",{x1:Ne[0],y1:Ne[1],x2:Oe[0],y2:Oe[1],stroke:T,strokeWidth:L,style:{vectorEffect:"non-scaling-stroke"}}),pe("line",{x1:he[0],y1:he[1],x2:Ae[0],y2:Ae[1],stroke:T,strokeWidth:L,style:{vectorEffect:"non-scaling-stroke"}}),ct&&pe("line",{x1:Ce[0],y1:Ce[1],x2:Je[0],y2:Je[1],stroke:T,strokeWidth:L,style:{vectorEffect:"non-scaling-stroke"}}),vt&&pe("line",{x1:Ze[0],y1:Ze[1],x2:Ye[0],y2:Ye[1],stroke:T,strokeWidth:L,style:{vectorEffect:"non-scaling-stroke"}}),pe("path",{d:$e,fill:T,stroke:"none",style:{vectorEffect:"non-scaling-stroke"}}),pe("path",{d:Be,fill:T,stroke:"none",style:{vectorEffect:"non-scaling-stroke"}}),gt("g",{children:[pe("rect",{x:o.x-J.length*P*.3,y:o.y-P*.7,width:J.length*P*.6,height:P*1.4,fill:"white",fillOpacity:"0.8",rx:P*.2,ry:P*.2,style:{vectorEffect:"non-scaling-stroke"}}),pe("text",{x:o.x,y:o.y,fontSize:P,fill:T,stroke:"none",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"Arial, sans-serif",style:{cursor:"move",userSelect:"none",vectorEffect:"non-scaling-stroke"},onMouseDown:v,onTouchStart:g,children:J})]})]})}else if(i==="circle"&&s.center&&s.diameter!=null){const[z,V]=s.center,G=s.diameter,J=s.radius||G/2,ie=`${G.toFixed(2)}`,ce=ie.length*P*.65,W=J*2<ce*1.5,Y=o.x-z,$=o.y-V,oe=Y*Y+$*$,D=Math.sqrt(oe);let j;oe<1e-9?j=0:j=Math.atan2($,Y);const K=Math.cos(j),ae=Math.sin(j);if(W){const fe=J+k*3;let we=Math.max(D,fe);D<fe&&(we=fe);const Ee=[z,V],Ce=[z+K*we*.9,V+ae*we*.9],Ye={x:z+K*we,y:V+ae*we},Ne=Math.min(J*.5,1);F=gt("g",{children:[pe("line",{x1:z-Ne,y1:V,x2:z+Ne,y2:V,stroke:T,strokeWidth:L,style:{vectorEffect:"non-scaling-stroke"}}),pe("line",{x1:z,y1:V-Ne,x2:z,y2:V+Ne,stroke:T,strokeWidth:L,style:{vectorEffect:"non-scaling-stroke"}}),pe("line",{x1:Ee[0],y1:Ee[1],x2:Ce[0],y2:Ce[1],stroke:T,strokeWidth:L,style:{vectorEffect:"non-scaling-stroke"}}),gt("g",{transform:`translate(${Ye.x-o.x}, ${Ye.y-o.y})`,children:[pe("rect",{x:o.x-ie.length*P*.3,y:o.y-P*.7,width:ie.length*P*.6,height:P*1.4,fill:"white",fillOpacity:"0.9",rx:P*.2,ry:P*.2,style:{vectorEffect:"non-scaling-stroke"}}),pe("text",{x:o.x,y:o.y,fontSize:P,fill:T,stroke:"none",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"Arial, sans-serif",style:{cursor:"move",userSelect:"none",vectorEffect:"non-scaling-stroke"},onMouseDown:v,onTouchStart:g,children:ie})]})]})}else{const fe=[z-K*J,V-ae*J],we=[z+K*J,V+ae*J],Ee=`M ${fe[0]} ${fe[1]} 
                      l ${K*N} ${ae*N} 
                      l ${-ae*N*.35} ${K*N*.35} 
                      l ${-K*N*.65} ${-ae*N*.65} 
                      z`,Ce=`M ${we[0]} ${we[1]} 
                      l ${-K*N} ${-ae*N} 
                      l ${ae*N*.35} ${-K*N*.35} 
                      l ${K*N*.65} ${ae*N*.65} 
                      z`,Ne=(ce+k*2)/2,he=wf.dot([Y,$],[K,ae]),Oe=-J+N,Ae=J-N,_e=Math.max(Oe,Math.min(Ae,he-Ne)),ne=Math.max(Oe,Math.min(Ae,he+Ne)),ut=[z+K*_e,V+ae*_e],$e=[z+K*ne,V+ae*ne],Be=wf.len(wf.sub(ut,fe))>1e-6,Qe=wf.len(wf.sub(we,$e))>1e-6;F=gt("g",{children:[Be&&pe("line",{x1:fe[0],y1:fe[1],x2:ut[0],y2:ut[1],stroke:T,strokeWidth:L,style:{vectorEffect:"non-scaling-stroke"}}),Qe&&pe("line",{x1:$e[0],y1:$e[1],x2:we[0],y2:we[1],stroke:T,strokeWidth:L,style:{vectorEffect:"non-scaling-stroke"}}),pe("path",{d:Ee,fill:T,stroke:"none",style:{vectorEffect:"non-scaling-stroke"}}),pe("path",{d:Ce,fill:T,stroke:"none",style:{vectorEffect:"non-scaling-stroke"}}),gt("g",{children:[pe("rect",{x:o.x-ie.length*P*.3,y:o.y-P*.7,width:ie.length*P*.6,height:P*1.4,fill:"white",fillOpacity:"0.9",rx:P*.2,ry:P*.2,style:{vectorEffect:"non-scaling-stroke"}}),pe("text",{x:o.x,y:o.y,fontSize:P,fill:T,stroke:"none",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"Arial, sans-serif",style:{cursor:"move",userSelect:"none",vectorEffect:"non-scaling-stroke"},onMouseDown:v,onTouchStart:g,children:ie})]})]})}}return F}function hS({projection:n,title:e,position:t,dimensions:r,onPathClick:i,viewId:s,activeMeasurements:o,onMeasurementUpdate:a}){var v,w;if(!n)return null;const l=qe.useRef(null),{width:u,height:c}=r,[h,d]=t,m=25;return gt("div",{style:{position:"absolute",left:`${h}px`,top:`${d}px`,width:`${u}px`,height:`${c}px`,border:"1px solid #aaa",backgroundColor:"#f8f8f8",overflow:"hidden"},children:[pe("div",{style:{padding:"5px",height:`${m}px`,borderBottom:"1px solid #ddd",backgroundColor:"#eee",fontSize:"12px",fontWeight:"bold",boxSizing:"border-box"},children:e}),pe("div",{style:{width:"100%",height:`calc(100% - ${m}px)`,position:"relative"},children:gt("svg",{ref:l,viewBox:n.combinedViewBox,style:{width:"100%",height:"100%"},preserveAspectRatio:"xMidYMid meet",children:[pe("g",{children:(((v=n.hidden)==null?void 0:v.paths)||[]).map((x,g)=>pe($c,{path:x,stroke:"#777777",strokeWidth:"0.3",strokeDasharray:"2,1",onClick:i,viewId:s},`${s}_hidden_${x.id||g}`))}),pe("g",{children:(((w=n.visible)==null?void 0:w.paths)||[]).map((x,g)=>pe($c,{path:x,stroke:"#000000",strokeWidth:"0.5",strokeDasharray:null,onClick:i,viewId:s},`${s}_visible_${x.id||g}`))}),pe("g",{children:Object.values(o).filter(x=>x.viewId===s).map(x=>{var N,k,R,U;const g=x.pathId.split("_"),S=g[g.length-3],_=g.slice(g.length-2).join("_");let T=null;const L=S==="visible"?(N=n.visible)==null?void 0:N.paths:(k=n.hidden)==null?void 0:k.paths;if(L&&(T=L.find(F=>{const z=`${F.id||""}`.split("_");return z.slice(z.length-2).join("_")===_||`${F.id}`===_}),!T)){const F=g[g.length-1],z=parseInt(F,10);!isNaN(z)&&z>=0&&z<L.length&&((U=(R=L[z])==null?void 0:R.geometry)==null?void 0:U.type)===x.type&&(T=L[z])}if(!T||!T.geometry)return console.warn(`Could not find current geometry for measurement: ${x.pathId}`),null;const P={...x,geometry:T.geometry};return pe(by,{measurementData:P,svgRef:l,onUpdatePosition:a},x.pathId)})})]})})]})}function al(n){if(!n||typeof n!="string")return null;const e=n.split(/[\s,]+/).map(parseFloat);if(e.length!==4||e.some(isNaN))return console.warn("Could not parse viewBox string:",n),null;const t=Math.max(0,e[2]),r=Math.max(0,e[3]);return{x:e[0],y:e[1],width:t,height:r}}function EW({part:n,index:e,scale:t,onPathClick:r,activeMeasurements:i,onMeasurementUpdate:s}){var V,G,J,ie,ce,W;if(!n||!n.views)return null;const o=qe.useRef(null),a=qe.useRef(null),l=qe.useRef(null),u=20,c=20,h=n.views.front,d=n.views.top,m=n.views.right,v=n.name.replace(/\s+/g,"_"),w=`${v}_front`,x=`${v}_top`,g=`${v}_right`;let S,_,T,L=0,P=0,N=0,k=0,R=0,U=0;h&&(S=al(h.combinedViewBox),L=S?S.width*t:0,P=S?S.height*t:0),d&&(_=al(d.combinedViewBox),N=_?_.width*t:0,k=_?_.height*t:0),m&&(T=al(m.combinedViewBox),R=T?T.width*t:0,U=T?T.height*t:0);const F=Math.max(L+R+c,N),z=P+k+c;return gt("div",{style:{margin:"10px",border:"1px solid #ccc",backgroundColor:"white",display:"inline-block",width:`${F+20}px`},children:[pe("h4",{style:{padding:"5px",margin:0,backgroundColor:"#eee"},children:n.name}),gt("div",{style:{padding:"10px",position:"relative",height:`${z+20}px`},children:[h&&S&&gt("div",{style:{position:"absolute",top:"0",left:"0",width:`${L}px`,height:`${P+u}px`,border:"1px solid #ddd",display:"flex",flexDirection:"column"},children:[pe("div",{style:{padding:"3px",height:`${u}px`,borderBottom:"1px solid #ddd",fontSize:"10px",boxSizing:"border-box",flexShrink:0},children:"Front"}),pe("div",{style:{width:"100%",flexGrow:1,position:"relative"},children:gt("svg",{ref:o,viewBox:h.combinedViewBox,style:{width:"100%",height:"100%"},preserveAspectRatio:"xMidYMid meet",children:[pe("g",{children:(((V=h.hidden)==null?void 0:V.paths)||[]).map((Y,$)=>pe($c,{path:Y,stroke:"#777777",strokeWidth:"0.3",strokeDasharray:"2,1",onClick:r,viewId:w},`${w}_hidden_${Y.id||$}`))}),pe("g",{children:(((G=h.visible)==null?void 0:G.paths)||[]).map((Y,$)=>pe($c,{path:Y,stroke:"#000000",strokeWidth:"0.5",strokeDasharray:null,onClick:r,viewId:w},`${w}_visible_${Y.id||$}`))}),pe("g",{children:Object.values(i).filter(Y=>Y.viewId===w).map(Y=>{var fe,we,Ee,Ce;const $=Y.pathId.split("_"),oe=$[$.length-3],D=$.slice($.length-2).join("_");let j=null;const K=oe==="visible"?(fe=h==null?void 0:h.visible)==null?void 0:fe.paths:(we=h==null?void 0:h.hidden)==null?void 0:we.paths;if(K&&(j=K.find(Ye=>{const Ne=`${Ye.id||""}`.split("_");return Ne.slice(Ne.length-2).join("_")===D||`${Ye.id}`===D}),!j)){const Ye=$[$.length-1],Ne=parseInt(Ye,10);!isNaN(Ne)&&Ne>=0&&Ne<K.length&&((Ce=(Ee=K[Ne])==null?void 0:Ee.geometry)==null?void 0:Ce.type)===Y.type&&(j=K[Ne])}if(!j||!j.geometry)return console.warn(`PartView(Front): Could not find current geometry for measurement: ${Y.pathId}`),null;const ae={...Y,geometry:j.geometry};return pe(by,{measurementData:ae,svgRef:o,onUpdatePosition:s},Y.pathId)})})]})})]}),d&&_&&gt("div",{style:{position:"absolute",top:`${P+u+c}px`,left:`${(L-N)/2}px`,width:`${N}px`,height:`${k+u}px`,border:"1px solid #ddd",display:"flex",flexDirection:"column"},children:[pe("div",{style:{padding:"3px",height:`${u}px`,borderBottom:"1px solid #ddd",fontSize:"10px",boxSizing:"border-box",flexShrink:0},children:"Top"}),pe("div",{style:{width:"100%",flexGrow:1,position:"relative"},children:gt("svg",{ref:a,viewBox:d.combinedViewBox,style:{width:"100%",height:"100%"},preserveAspectRatio:"xMidYMid meet",children:[pe("g",{children:(((J=d.hidden)==null?void 0:J.paths)||[]).map((Y,$)=>pe($c,{path:Y,stroke:"#777777",strokeWidth:"0.3",strokeDasharray:"2,1",onClick:r,viewId:x},`${x}_hidden_${Y.id||$}`))}),pe("g",{children:(((ie=d.visible)==null?void 0:ie.paths)||[]).map((Y,$)=>pe($c,{path:Y,stroke:"#000000",strokeWidth:"0.5",strokeDasharray:null,onClick:r,viewId:x},`${x}_visible_${Y.id||$}`))}),pe("g",{children:Object.values(i).filter(Y=>Y.viewId===x).map(Y=>{var fe,we,Ee,Ce;const $=Y.pathId.split("_"),oe=$[$.length-3],D=$.slice($.length-2).join("_");let j=null;const K=oe==="visible"?(fe=d==null?void 0:d.visible)==null?void 0:fe.paths:(we=d==null?void 0:d.hidden)==null?void 0:we.paths;if(K&&(j=K.find(Ye=>{const Ne=`${Ye.id||""}`.split("_");return Ne.slice(Ne.length-2).join("_")===D||`${Ye.id}`===D}),!j)){const Ye=$[$.length-1],Ne=parseInt(Ye,10);!isNaN(Ne)&&Ne>=0&&Ne<K.length&&((Ce=(Ee=K[Ne])==null?void 0:Ee.geometry)==null?void 0:Ce.type)===Y.type&&(j=K[Ne])}if(!j||!j.geometry)return console.warn(`PartView(Top): Could not find current geometry for measurement: ${Y.pathId}`),null;const ae={...Y,geometry:j.geometry};return pe(by,{measurementData:ae,svgRef:a,onUpdatePosition:s},Y.pathId)})})]})})]}),m&&T&&gt("div",{style:{position:"absolute",top:`${(P-U)/2}px`,left:`${L+c}px`,width:`${R}px`,height:`${U+u}px`,border:"1px solid #ddd",display:"flex",flexDirection:"column"},children:[pe("div",{style:{padding:"3px",height:`${u}px`,borderBottom:"1px solid #ddd",fontSize:"10px",boxSizing:"border-box",flexShrink:0},children:"Right"}),pe("div",{style:{width:"100%",flexGrow:1,position:"relative"},children:gt("svg",{ref:l,viewBox:m.combinedViewBox,style:{width:"100%",height:"100%"},preserveAspectRatio:"xMidYMid meet",children:[pe("g",{children:(((ce=m.hidden)==null?void 0:ce.paths)||[]).map((Y,$)=>pe($c,{path:Y,stroke:"#777777",strokeWidth:"0.3",strokeDasharray:"2,1",onClick:r,viewId:g},`${g}_hidden_${Y.id||$}`))}),pe("g",{children:(((W=m.visible)==null?void 0:W.paths)||[]).map((Y,$)=>pe($c,{path:Y,stroke:"#000000",strokeWidth:"0.5",strokeDasharray:null,onClick:r,viewId:g},`${g}_visible_${Y.id||$}`))}),pe("g",{children:Object.values(i).filter(Y=>Y.viewId===g).map(Y=>{var fe,we,Ee,Ce;const $=Y.pathId.split("_"),oe=$[$.length-3],D=$.slice($.length-2).join("_");let j=null;const K=oe==="visible"?(fe=m==null?void 0:m.visible)==null?void 0:fe.paths:(we=m==null?void 0:m.hidden)==null?void 0:we.paths;if(K&&(j=K.find(Ye=>{const Ne=`${Ye.id||""}`.split("_");return Ne.slice(Ne.length-2).join("_")===D||`${Ye.id}`===D}),!j)){const Ye=$[$.length-1],Ne=parseInt(Ye,10);!isNaN(Ne)&&Ne>=0&&Ne<K.length&&((Ce=(Ee=K[Ne])==null?void 0:Ee.geometry)==null?void 0:Ce.type)===Y.type&&(j=K[Ne])}if(!j||!j.geometry)return console.warn(`PartView(Right): Could not find current geometry for measurement: ${Y.pathId}`),null;const ae={...Y,geometry:j.geometry};return pe(by,{measurementData:ae,svgRef:l,onUpdatePosition:s},Y.pathId)})})]})})]})]})]},e)}function AW({isMobile:n,zoomLevel:e,scale:t,containerSize:r,panOffset:i,onZoomChange:s,onPanChange:o,onScaleChange:a,onResetView:l,onExportPDF:u}){const c=h=>{const d=Math.max(.1,Math.min(10,e+h*e)),m=r.width/2,v=r.height/2,w=(m-i.x)/e,x=(v-i.y)/e,g=m-w*d,S=v-x*d;s(d),o({x:g,y:S})};return gt("div",{style:{position:"absolute",top:n?"8px":"10px",right:n?"8px":"10px",zIndex:100,backgroundColor:"rgba(255,255,255,0.8)",padding:n?"8px":"5px 10px",borderRadius:"4px",display:"flex",flexDirection:"column",gap:n?"8px":"5px"},children:[gt("div",{style:{display:"flex",alignItems:"center"},children:[pe("button",{title:"Zoom Out",style:{margin:"0 2px",padding:n?"5px 10px":"2px 6px",cursor:"pointer",fontSize:n?"16px":"inherit"},onClick:()=>c(-.1),children:""}),gt("span",{style:{margin:"0 5px",fontSize:n?"14px":"12px",minWidth:"35px",textAlign:"center"},children:[Math.round(e*100),"%"]}),pe("button",{title:"Zoom In",style:{margin:"0 2px",padding:n?"5px 10px":"2px 6px",cursor:"pointer",fontSize:n?"16px":"inherit"},onClick:()=>c(.1),children:"+"}),pe("button",{title:"Reset View",style:{margin:"0 0 0 10px",padding:n?"5px 10px":"2px 8px",cursor:"pointer",fontSize:n?"14px":"inherit"},onClick:l,children:"Reset"})]}),gt("div",{style:{display:"flex",alignItems:"center"},children:[pe("label",{htmlFor:"scaleSlider",style:{fontSize:n?"12px":"10px",marginRight:"5px"},children:"Scale:"}),pe("input",{type:"range",id:"scaleSlider",min:"1",max:"100",step:"1",value:t,onChange:h=>a(Number(h.target.value)),style:{cursor:"pointer",width:"80px"},title:`Scale: ${t} px/cm`}),gt("span",{style:{margin:"0 5px",fontSize:n?"12px":"10px",minWidth:"45px",textAlign:"right"},children:[t," px/cm"]})]}),pe("button",{title:"Export as PDF",style:{marginTop:"5px",padding:n?"5px 10px":"2px 8px",cursor:"pointer",fontSize:n?"14px":"inherit"},onClick:u,children:"Export PDF"})]})}const TW=(n,e)=>{const{pathId:t,type:r,textPosition:i}=n,s=document.createElementNS("http://www.w3.org/2000/svg","g"),o="#222222",a=.15,l=2.2,u=1.2,c=1.2,h=.8,d=1.2,m=(v,w)=>{const x=document.createElementNS("http://www.w3.org/2000/svg",v);for(const g in w)x.setAttribute(g,w[g]);return x};if(r==="line"&&(e!=null&&e.endpoints)){const[v,w]=e.endpoints,g=(e.length||0).toFixed(2),S=w[0]-v[0],_=w[1]-v[1],T=(v[0]+w[0])/2,L=(v[1]+w[1])/2,P=Math.sqrt(S*S+_*_),N=P>1e-6?S/P:1,k=P>1e-6?_/P:0,R=-k,U=N,F=i.x-T,z=i.y-L,V=F*R+z*U,G=Math.abs(V)<c?Math.sign(V||1)*c:V,J=[v[0]+R*G,v[1]+U*G],ie=[w[0]+R*G,w[1]+U*G],ce=[v[0]+R*Math.sign(G)*h,v[1]+U*Math.sign(G)*h],W=[w[0]+R*Math.sign(G)*h,w[1]+U*Math.sign(G)*h],Y=[J[0]+R*Math.sign(G)*d,J[1]+U*Math.sign(G)*d],$=[ie[0]+R*Math.sign(G)*d,ie[1]+U*Math.sign(G)*d],oe=N,D=k,j=`M ${J[0]} ${J[1]} l ${oe*u} ${D*u} l ${-D*u*.35} ${oe*u*.35} l ${-oe*u*.65} ${-D*u*.65} z`,K=`M ${ie[0]} ${ie[1]} l ${-oe*u} ${-D*u} l ${D*u*.35} ${-oe*u*.35} l ${oe*u*.65} ${D*u*.65} z`,we=(g.length*l*.65+c*2)/2,Ee=(i.x-J[0])*oe+(i.y-J[1])*D,Ce=Math.max(u,Ee-we),Ye=Math.min(P-u,Ee+we),Ne=[J[0]+oe*Ce,J[1]+D*Ce],he=[J[0]+oe*Ye,J[1]+D*Ye],Oe=Ce>u+1e-6,Ae=Ye<P-u-1e-6;s.appendChild(m("line",{x1:ce[0],y1:ce[1],x2:Y[0],y2:Y[1],stroke:o,"stroke-width":a})),s.appendChild(m("line",{x1:W[0],y1:W[1],x2:$[0],y2:$[1],stroke:o,"stroke-width":a})),Oe&&s.appendChild(m("line",{x1:J[0],y1:J[1],x2:Ne[0],y2:Ne[1],stroke:o,"stroke-width":a})),Ae&&s.appendChild(m("line",{x1:he[0],y1:he[1],x2:ie[0],y2:ie[1],stroke:o,"stroke-width":a})),s.appendChild(m("path",{d:j,fill:o,stroke:"none"})),s.appendChild(m("path",{d:K,fill:o,stroke:"none"}));const _e=m("text",{x:i.x,y:i.y,"font-size":l,fill:o,stroke:"none","text-anchor":"middle","dominant-baseline":"middle","font-family":"Arial, sans-serif"});_e.textContent=g,s.appendChild(_e)}else if(r==="circle"&&(e!=null&&e.center)&&e.diameter!=null){const[v,w]=e.center,x=e.diameter,g=e.radius||x/2,S=`${x.toFixed(2)}`,_=i.x-v,T=i.y-w;let P=_*_+T*T<1e-9?0:Math.atan2(T,_);const N=Math.cos(P),k=Math.sin(P),R=[v+N*g,w+k*g],U=[i.x-N*c,i.y-k*c];s.appendChild(m("line",{x1:R[0],y1:R[1],x2:U[0],y2:U[1],stroke:o,"stroke-width":a}));const F=m("text",{x:i.x,y:i.y,"font-size":l,fill:o,stroke:"none","text-anchor":"middle","dominant-baseline":"middle","font-family":"Arial, sans-serif"});F.textContent=S,s.appendChild(F)}return s};function CW({projections:n,isMobile:e}){if(!n)return pe("div",{children:"Loading projections..."});const t=qe.useRef(null),r=qe.useRef(null),[i,s]=qe.useState({width:800,height:600}),[o,a]=qe.useState(1),[l,u]=qe.useState({x:0,y:0}),[c,h]=qe.useState(10),[d,m]=qe.useState({}),[v,w]=qe.useState(!1),[x,g]=qe.useState({x:0,y:0}),[S,_]=qe.useState({x:0,y:0}),T=qe.useCallback(async()=>{if(console.log("Starting PDF Export..."),!n){console.error("Projections data not available for PDF export.");return}const Ae=1,_e=5,ne=10,ut=10,$e=5,Be=3,Qe=2.5,dt=5,mt=(At,zt)=>{const _n=document.createElementNS("http://www.w3.org/2000/svg",At);for(const Mn in zt)_n.setAttribute(Mn,zt[Mn]);return _n},ue=document.createElementNS("http://www.w3.org/2000/svg","svg"),Q=mt("g");ue.appendChild(Q);let Re=0,Je=0;const Ze=n.standard;let ct,vt,ot,Le=0,Ut=0,Tt=0,Nt=0,Ct=0,Se=0;Ze&&(ct=Ze.frontView?al(Ze.frontView.combinedViewBox):null,vt=Ze.topView?al(Ze.topView.combinedViewBox):null,ot=Ze.rightView?al(Ze.rightView.combinedViewBox):null,ct&&(Le=ct.width*Ae,Ut=ct.height*Ae),vt&&(Tt=vt.width*Ae,Nt=vt.height*Ae),ot&&(Ct=ot.width*Ae,Se=ot.height*Ae));const et=[ne,ut],pt=[ne+(Le-Tt)/2,ut+Ut+_e],Te=[ne+Le+_e,ut+(Ut-Se)/2],De=(At,zt,_n,Mn,fn,Xn=!1)=>{var q,O;if(!At||!Mn)return;const[Ft,ti]=_n,{width:ni,height:yr}=Mn,tr=mt("g",{transform:`translate(${Ft}, ${ti})`});Q.appendChild(tr);const sr=mt("text",{x:ni/2,y:$e/2,"font-size":Xn?Qe:Be,"font-family":"Arial, sans-serif","text-anchor":"middle","dominant-baseline":"middle",fill:"#000000"});sr.textContent=zt,tr.appendChild(sr),tr.appendChild(mt("rect",{x:0,y:$e,width:ni,height:yr,fill:"none",stroke:"#aaaaaa","stroke-width":.2}));const nr=al(At.combinedViewBox),xn=nr?-nr.x*Ae:0,is=nr?-nr.y*Ae:0,gi=mt("g",{transform:`translate(0, ${$e}) translate(${xn}, ${is})`});tr.appendChild(gi),(((q=At.hidden)==null?void 0:q.paths)||[]).forEach(ee=>{gi.appendChild(mt("path",{d:ee.data,stroke:"#777777","stroke-width":.3/Ae,"stroke-dasharray":`${2/Ae},${1/Ae}`,fill:"none","vector-effect":"non-scaling-stroke"}))}),(((O=At.visible)==null?void 0:O.paths)||[]).forEach(ee=>{gi.appendChild(mt("path",{d:ee.data,stroke:"#000000","stroke-width":.5/Ae,fill:"none","vector-effect":"non-scaling-stroke"}))}),Object.values(d).filter(ee=>ee.viewId===fn).forEach(ee=>{var it,rt;const me=ee.pathId.split("_"),de=me[me.length-3],xe=me.slice(me.length-2).join("_");let Ve=null;const Xe=de==="visible"?(it=At.visible)==null?void 0:it.paths:(rt=At.hidden)==null?void 0:rt.paths;if(Xe&&(Ve=Xe.find(ht=>{const nt=`${ht.id||""}`.split("_");return nt.slice(nt.length-2).join("_")===xe||`${ht.id}`===xe})),Ve!=null&&Ve.geometry){const ht=TW(ee,Ve.geometry);gi.appendChild(ht)}else console.warn(`PDF Export: Could not find geometry for measurement ${ee.pathId}`)}),Re=Math.max(Re,Ft+ni),Je=Math.max(Je,ti+yr+$e)};Ze&&(Ze.frontView&&ct&&De(Ze.frontView,"Front View",et,{width:Le,height:Ut},fe),Ze.topView&&vt&&De(Ze.topView,"Top View",pt,{width:Tt,height:Nt},we),Ze.rightView&&ot&&De(Ze.rightView,"Right View",Te,{width:Ct,height:Se},Ee));let Ge=ne,bt=ut+(Ut||0)+(Nt?Nt+_e:0)+_e*2,Et=0;if(n.parts&&n.parts.length>0){const At=mt("text",{x:ne,y:bt-_e/2,"font-size":Be,"font-family":"Arial, sans-serif","text-anchor":"start","dominant-baseline":"middle",fill:"#000000","font-weight":"bold"});At.textContent="Component Views",Q.appendChild(At),n.parts.forEach((zt,_n)=>{var yr;const Mn=(yr=zt.views)==null?void 0:yr.front;if(!Mn)return;const fn=al(Mn.combinedViewBox);if(!fn)return;const Xn=fn.width*Ae,Ft=fn.height*Ae,ti=`${zt.name.replace(/\s+/g,"_")}_front`,ni=[Ge,bt];De(Mn,zt.name,ni,{width:Xn,height:Ft},ti,!0),Ge+=Xn+dt,Et=Math.max(Et,Ft+$e)}),Je=Math.max(Je,bt+Et),Re=Math.max(Re,Ge-dt)}Re+=ne,Je+=ut,ue.setAttribute("width",Re),ue.setAttribute("height",Je),ue.setAttribute("viewBox",`0 0 ${Re} ${Je}`);try{const At=new yn({orientation:Re>Je?"landscape":"portrait",unit:"mm",format:[Re,Je]});await At.svg(ue,{x:0,y:0,width:Re,height:Je}),At.save("technical-drawing.pdf"),console.log("PDF Export Successful.")}catch(At){console.error("Error during PDF generation:",At),alert("Failed to export PDF. See console for details.")}},[n,c,d]),L=(Ae,_e)=>{m(ne=>({...ne,[Ae]:{...ne[Ae],textPosition:_e}}))},P=(Ae,_e)=>{var ne;if(!_e.geometry||_e.geometry.type!=="line"&&_e.geometry.type!=="circle"){console.log(`Clicked non-measurable path: ${Ae}, Type: ${(ne=_e.geometry)==null?void 0:ne.type}`);return}m(ut=>{const $e={...ut};if($e[Ae])delete $e[Ae],console.log(`Removed Measurement: ${Ae}`);else{const Be={x:0,y:0};if(_e.geometry.type==="line"&&_e.geometry.endpoints){const[ue,Q]=_e.geometry.endpoints[0],[Re,Je]=_e.geometry.endpoints[1];Be.x=(ue+Re)/2,Be.y=(Q+Je)/2-5}else _e.geometry.type==="circle"&&_e.geometry.center&&(Be.x=_e.geometry.center[0],Be.y=_e.geometry.center[1]);let Qe=Ae;const dt=Ae.lastIndexOf("_visible_"),mt=Ae.lastIndexOf("_hidden_");dt!==-1?Qe=Ae.substring(0,dt):mt!==-1?Qe=Ae.substring(0,mt):Ae.endsWith("_circle")?Qe=Ae.split("_").slice(0,-2).join("_"):console.warn(`Could not reliably extract viewId from pathId: ${Ae}`),$e[Ae]={pathId:Ae,type:_e.geometry.type,textPosition:Be,viewId:Qe},console.log("--- Added Measurement ---"),console.log(`  ID: ${Ae}`),console.log(`  Type: ${_e.geometry.type}`),console.log("  Initial Text Pos:",Be),console.log(`  View ID: ${$e[Ae].viewId}`),console.log("------------------------")}return $e})};qe.useEffect(()=>{const Ae=()=>{t.current&&s({width:t.current.clientWidth,height:t.current.clientHeight})};return Ae(),window.addEventListener("resize",Ae),()=>window.removeEventListener("resize",Ae)},[]);const N=Ae=>{if(Ae.preventDefault(),!t.current)return;const _e=t.current.getBoundingClientRect(),ne=Ae.clientX-_e.left,ut=Ae.clientY-_e.top,$e=(ne-l.x)/o,Be=(ut-l.y)/o,Qe=-Math.sign(Ae.deltaY)*.1,dt=Math.max(.1,Math.min(10,o+Qe*o)),mt=ne-$e*dt,ue=ut-Be*dt;a(dt),u({x:mt,y:ue})},k=Ae=>{Ae.target.closest('text[style*="cursor: move"]')||Ae.button===0&&(w(!0),g({x:Ae.clientX,y:Ae.clientY}),_({...l}))},R=Ae=>{if(!v)return;const _e=Ae.clientX-x.x,ne=Ae.clientY-x.y;u({x:S.x+_e,y:S.y+ne})},U=()=>{w(!1)},F=Ae=>{if(!Ae.target.closest('text[style*="cursor: move"]')&&Ae.touches.length===1){const _e=Ae.touches[0];w(!0),g({x:_e.clientX,y:_e.clientY}),_({...l})}},z=Ae=>{if(!v||Ae.touches.length!==1)return;const _e=Ae.touches[0],ne=_e.clientX-x.x,ut=_e.clientY-x.y;u({x:S.x+ne,y:S.y+ut})},V=()=>{w(!1)},G=()=>{a(1),u({x:0,y:0}),m({})},J=n.standard;let ie,ce,W,Y=0,$=0,oe=0,D=0,j=0,K=0;const ae=20,fe="standard_front",we="standard_top",Ee="standard_right";J&&(ie=J.frontView?al(J.frontView.combinedViewBox):null,ce=J.topView?al(J.topView.combinedViewBox):null,W=J.rightView?al(J.rightView.combinedViewBox):null,ie&&(Y=ie.width*c,$=ie.height*c),ce&&(oe=ce.width*c,D=ce.height*c),W&&(j=W.width*c,K=W.height*c));const Ce=50,Ye=50,Ne=[Ce,Ye],he=[Ce+(Y-oe)/2,Ye+$+ae],Oe=[Ce+Y+ae,Ye+($-K)/2];return gt("div",{ref:t,style:{width:"100%",height:"100%",position:"relative",backgroundColor:"#e0e0e0",overflow:"hidden",cursor:v?"grabbing":"grab",touchAction:"none"},onWheel:N,onMouseDown:k,onMouseMove:R,onMouseUp:U,onMouseLeave:U,onTouchStart:F,onTouchMove:z,onTouchEnd:V,onTouchCancel:V,children:[pe(AW,{isMobile:e,zoomLevel:o,scale:c,containerSize:i,panOffset:l,onZoomChange:a,onPanChange:u,onScaleChange:h,onResetView:G,onExportPDF:T}),gt("div",{ref:r,style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",transform:`translate(${l.x}px, ${l.y}px) scale(${o})`,transformOrigin:"0 0"},children:[J&&gt(jp,{children:[J.frontView&&ie&&pe(hS,{projection:J.frontView,title:"Front View",position:Ne,dimensions:{width:Y,height:$},onPathClick:P,viewId:fe,activeMeasurements:d,onMeasurementUpdate:L}),J.topView&&ce&&pe(hS,{projection:J.topView,title:"Top View",position:he,dimensions:{width:oe,height:D},onPathClick:P,viewId:we,activeMeasurements:d,onMeasurementUpdate:L}),J.rightView&&W&&pe(hS,{projection:J.rightView,title:"Right View",position:Oe,dimensions:{width:j,height:K},onPathClick:P,viewId:Ee,activeMeasurements:d,onMeasurementUpdate:L})]}),n.parts&&n.parts.length>0&&gt("div",{style:{position:"absolute",top:`${Ye+$+(ce?D+ae:0)+ae*2}px`,left:`${Ce}px`,width:"max-content"},children:[pe("h3",{style:{padding:"0 0 5px 0",margin:0,fontSize:"14px",fontWeight:"bold"},children:"Component Views"}),pe("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:n.parts.map((Ae,_e)=>pe(EW,{part:Ae,index:_e,scale:c,onPathClick:P,activeMeasurements:d,onMeasurementUpdate:L},_e))})]})]})]})}ur.DEFAULT_UP.set(0,0,1);function LW({target:n=[0,0,0],modelSize:e=100,controlsRef:t}){const{camera:r}=Xs();return qe.useEffect(()=>{const i=e*2.5;r.position.set(i*Math.sin(Math.PI/4),-i*Math.cos(Math.PI/4),i*.7),r.lookAt(n[0],n[1],n[2]),r.updateProjectionMatrix()},[r,e,n]),qe.useEffect(()=>{t.current&&(t.current.target.set(n[0],n[1],n[2]),t.current.update())},[t,n]),pe(bk,{ref:t,enableRotate:!0,enablePan:!1,enableZoom:!0,autoRotate:!1,maxPolarAngle:Math.PI*.75,minPolarAngle:Math.PI*.25,makeDefault:!0})}function PW(){return gt(jp,{children:[pe("ambientLight",{intensity:1.5}),pe("directionalLight",{position:[10,10,10],intensity:3,castShadow:!0}),pe("directionalLight",{position:[-10,-10,5],intensity:1}),pe("hemisphereLight",{groundColor:"#555",intensity:1})]})}function RW({modelSize:n=100}){const e=Math.max(n*5,500),t=Math.floor(e/20);return pe("group",{position:[0,0,-.01],children:pe("gridHelper",{args:[e,t,8947848,4473924],rotation:[Math.PI/2,0,0]})})}function kW({mesh:n,highQuality:e,modelId:t}){return!n||!n.faces?null:gt("group",{children:[n.faces&&n.faces.vertices&&n.faces.normals&&n.faces.triangles&&gt("mesh",{children:[gt("bufferGeometry",{children:[pe("bufferAttribute",{attach:"attributes-position",count:n.faces.vertices.length/3,array:new Float32Array(n.faces.vertices),itemSize:3}),pe("bufferAttribute",{attach:"attributes-normal",count:n.faces.normals.length/3,array:new Float32Array(n.faces.normals),itemSize:3}),pe("bufferAttribute",{attach:"index",count:n.faces.triangles.length,array:new Uint32Array(n.faces.triangles),itemSize:1})]}),pe("meshStandardMaterial",{color:e?"#6a92a6":"#5a8296",metalness:e?.4:0,roughness:e?.3:.5,envMapIntensity:e?.8:.2,flatShading:!1})]}),n.edges&&n.edges.vertices&&gt("lineSegments",{children:[pe("bufferGeometry",{children:pe("bufferAttribute",{attach:"attributes-position",count:n.edges.vertices.length/3,array:new Float32Array(n.edges.vertices),itemSize:3})}),pe("lineBasicMaterial",{color:e?"#304352":"#3c5a6e",linewidth:1})]})]},`model-${t}`)}function NW({mesh:n,modelSize:e,showFloor:t,highQuality:r,modelId:i,controlsRef:s}){return gt(jp,{children:[pe(LW,{modelSize:e,controlsRef:s}),pe(PW,{}),t&&pe(RW,{modelSize:e}),pe(kW,{mesh:n,highQuality:r,modelId:i}),r&&pe(pG,{preset:"studio"})]})}const IW=qe.forwardRef(({getControls:n},e)=>{const{gl:t,scene:r,camera:i}=Xs();return qe.useImperativeHandle(e,()=>({handleExportImage:(s="png")=>{if(!t||!r||!i){console.error("Renderer, scene, or camera not available for export.");return}const o=n();o&&o.update(),i.updateProjectionMatrix(),t.render(r,i);try{const a=`image/${s}`,l=s==="jpeg"?.95:void 0,u=t.domElement.toDataURL(a,l),c=document.createElement("a");c.download=`cad-render.${s}`,c.href=u,document.body.appendChild(c),c.click(),document.body.removeChild(c),console.log(`Image exported as ${s}`)}catch(a){console.error(`Error exporting image as ${s}:`,a),alert(`Failed to export image as ${s}. See console for details.`)}}})),null});function DW({mesh:n,isMobile:e}){const[t,r]=qe.useState(100),[i,s]=qe.useState(!0),[o,a]=qe.useState(!e),[l,u]=qe.useState(Date.now()),c=qe.useRef(),h=qe.useRef(),d=v=>{var w;(w=h.current)==null||w.handleExportImage(v)};qe.useEffect(()=>{u(Date.now())},[n]),qe.useEffect(()=>{if(n&&n.faces&&n.faces.vertices)try{const v=n.faces.vertices;if(v&&v.length>0){const w=[],x=[],g=[];for(let S=0;S<v.length;S+=3)w.push(v[S]),x.push(v[S+1]),g.push(v[S+2]);if(w.length>0&&x.length>0&&g.length>0){const S=Math.max(...w)-Math.min(...w),_=Math.max(...x)-Math.min(...x),T=Math.max(...g)-Math.min(...g),L=Math.max(S,_,T);r(L>0?L:100)}}}catch(v){console.error("Error calculating model size:",v),r(100)}},[n]);const m=o?Math.min(window.devicePixelRatio,2):1;return gt("div",{style:{width:"100%",height:"100%",position:"relative"},children:[pe(mk,{style:{width:"100%",height:"100%",backgroundColor:"#121212",touchAction:"none"},dpr:m,gl:{preserveDrawingBuffer:!0,antialias:o,logarithmicDepthBuffer:!0,alpha:!1,precision:o?"highp":"mediump"},shadows:o,camera:{fov:45,near:.1,far:2e3,position:[0,-300,200]},children:gt(qe.Suspense,{fallback:null,children:[pe(NW,{mesh:n,modelSize:t,showFloor:i,highQuality:o,modelId:l,controlsRef:c}),pe(IW,{ref:h,getControls:()=>c.current})]})},`canvas-${l}`),gt("div",{style:{position:"absolute",bottom:e?"10px":"20px",left:"0",right:"0",display:"flex",justifyContent:"center",gap:e?"8px":"15px",background:"rgba(0,0,0,0.5)",padding:e?"8px":"10px",borderRadius:"8px",margin:"0 auto",width:e?"95%":"auto",maxWidth:"500px"},children:[pe("button",{onClick:()=>s(!i),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:e?"8px 12px":"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:e?"14px":"12px"},children:i?"Hide Grid":"Show Grid"}),!e&&pe("button",{onClick:()=>a(!o),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:o?"Standard Quality":"High Quality"}),pe("button",{onClick:()=>d("jpeg"),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:e?"8px 12px":"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:e?"14px":"12px"},children:"Export JPG"}),pe("button",{onClick:()=>d("png"),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:e?"8px 12px":"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:e?"14px":"12px"},children:"Export PNG"})]})]})}function OW(){return new Worker("/cad-os/assets/worker-02161e3e.js")}const Jn=()=>{throw new Error("oppencascade has not been loaded")};globalThis.FinalizationRegistry||(console.log("Garbage collection will not work"),globalThis.FinalizationRegistry=()=>({register:()=>null,unregister:()=>null}));const S0=new globalThis.FinalizationRegistry(n=>{try{n.delete()}catch(e){console.error(e)}});class sc{constructor(e){this.oc=Jn(),e&&S0.register(this,e,e),this._wrapped=e}get wrapped(){if(this._wrapped===null)throw new Error("This object has been deleted");return this._wrapped}set wrapped(e){this._wrapped&&(S0.unregister(this._wrapped),this._wrapped.delete()),S0.register(this,e,e),this._wrapped=e}delete(){var e;S0.unregister(this.wrapped),(e=this.wrapped)==null||e.delete(),this._wrapped=null}}const $s=()=>{function n(e){return S0.register(n,e),e}return n},r1=n=>{const e=new Set;return[t=>(e.add(t),t),()=>{[...e.values()].forEach(t=>t.delete()),e.clear()},n?e:void 0]},hN=2147483647,fx=Math.PI/180,FW=180/Math.PI,fS=n=>Math.round(n*1e3)/1e3,Lg=(n,e,t)=>{const r=Jn(),i=Fa(n),s=am(e);let o;if(t){const a=am(t);o=new r.gp_Ax3_3(i,s,a),a.delete()}else o=new r.gp_Ax3_4(i,s);return i.delete(),s.delete(),o},U3=(n,e,t)=>{const r=Jn(),i=Fa(n),s=am(e);let o;if(t){const a=am(t);o=new r.gp_Ax2_2(i,s,a),a.delete()}else o=new r.gp_Ax2_3(i,s);return i.delete(),s.delete(),o},H0=(n,e)=>{const t=Jn(),r=Fa(n),i=am(e),s=new t.gp_Ax1_2(r,i);return r.delete(),i.delete(),s},UW=(n=[0,0,0])=>{const e=Jn();if(Array.isArray(n)){if(n.length===3)return new e.gp_Vec_4(...n);if(n.length===2)return new e.gp_Vec_4(...n,0)}else{if(n instanceof Lt)return new e.gp_Vec_3(n.wrapped.XYZ());if(n.XYZ)return new e.gp_Vec_3(n.XYZ())}return new e.gp_Vec_4(0,0,0)};class Lt extends sc{constructor(e=[0,0,0]){super(UW(e))}get repr(){return`x: ${fS(this.x)}, y: ${fS(this.y)}, z: ${fS(this.z)}`}get x(){return this.wrapped.X()}get y(){return this.wrapped.Y()}get z(){return this.wrapped.Z()}get Length(){return this.wrapped.Magnitude()}toTuple(){return[this.x,this.y,this.z]}cross(e){return new Lt(this.wrapped.Crossed(e.wrapped))}dot(e){return this.wrapped.Dot(e.wrapped)}sub(e){return new Lt(this.wrapped.Subtracted(e.wrapped))}add(e){return new Lt(this.wrapped.Added(e.wrapped))}multiply(e){return new Lt(this.wrapped.Multiplied(e))}normalized(){return new Lt(this.wrapped.Normalized())}normalize(){return this.wrapped.Normalize(),this}getCenter(){return this}getAngle(e){return this.wrapped.Angle(e.wrapped)*FW}projectToPlane(e){const t=e.origin,r=e.zDir,i=this.sub(t),s=r.multiply(i.dot(r)/r.Length**2),o=this.sub(s);return i.delete(),s.delete(),o}equals(e){return this.wrapped.IsEqual(e.wrapped,1e-5,1e-5)}toPnt(){return new this.oc.gp_Pnt_2(this.wrapped.XYZ())}toDir(){return new this.oc.gp_Dir_3(this.wrapped.XYZ())}rotate(e,t=[0,0,0],r=[0,0,1]){const i=H0(t,r);return this.wrapped.Rotate(i,e*fx),i.delete(),this}}const BW={X:[1,0,0],Y:[0,1,0],Z:[0,0,1]};function zW(n){return n==="X"||n==="Y"||n==="Z"?BW[n]:n}function Fa(n){const e=new Lt(n),t=e.toPnt();return e.delete(),t}function am(n){const e=new Lt(n),t=e.toDir();return e.delete(),t}class $f extends sc{constructor(e){const t=Jn();super(e||new t.gp_Trsf_1)}translate(e,t=0,r=0){const i=new Lt(typeof e=="number"?[e,t,r]:e);return this.wrapped.SetTranslation_1(i.wrapped),this}rotate(e,t=[0,0,0],r=[0,0,1]){const i=am(r),s=Fa(t),o=new this.oc.gp_Ax1_2(s,i);return this.wrapped.SetRotation_1(o,e*fx),o.delete(),i.delete(),s.delete(),this}mirror(e="YZ",t){const r=$s();let i,s;if(typeof e=="string"){const a=r(fN(e,t));i=a.origin,s=a.zDir}else e instanceof Do?(i=t||e.origin,s=e.zDir):(i=t||[0,0,0],s=e);const o=r(U3(i,s));return this.wrapped.SetMirror_3(o),this}scale(e,t){const r=Fa(e);return this.wrapped.SetScale(r,t),r.delete(),this}coordSystemChange(e,t){const r=$s(),i=r(e==="reference"?new this.oc.gp_Ax3_1:Lg(e.origin,e.zDir,e.xDir)),s=r(t==="reference"?new this.oc.gp_Ax3_1:Lg(t.origin,t.zDir,t.xDir));return this.wrapped.SetTransformation_1(i,s),this}transformPoint(e){const t=Fa(e),r=t.Transformed(this.wrapped);return t.delete(),r}transform(e){return new this.oc.BRepBuilderAPI_Transform_2(e,this.wrapped,!0).ModifiedShape(e)}}class Do{constructor(e,t=null,r=[0,0,1]){this.oc=Jn();const i=new Lt(r);if(i.Length===0)throw new Error("normal should be non null");this.zDir=i.normalize();let s;if(t)s=new Lt(t);else{const o=Lg(e,i);s=new Lt(o.XDirection()),o.delete()}if(s.Length===0)throw new Error("xDir should be non null");this.xDir=s.normalize(),this.yDir=this.zDir.cross(this.xDir).normalize(),this.origin=new Lt(e)}delete(){this.localToGlobal.delete(),this.xDir.delete(),this.yDir.delete(),this.zDir.delete(),this._origin.delete()}clone(){return new Do(this.origin,this.xDir,this.zDir)}get origin(){return this._origin}set origin(e){this._origin=e,this._calcTransforms()}translateTo(e){const t=this.clone();return t.origin=new Lt(e),t}translate(e,t=0,r=0){const i=new Lt(typeof e=="number"?[e,t,r]:e);return this.translateTo(this.origin.add(i))}translateX(e){return this.translate(e,0,0)}translateY(e){return this.translate(0,e,0)}translateZ(e){return this.translate(0,0,e)}pivot(e,t=[1,0,0]){const r=zW(t),i=new Lt(this.zDir).rotate(e,[0,0,0],r),s=new Lt(this.xDir).rotate(e,[0,0,0],r);return new Do(this.origin,s,i)}rotate2DAxes(e){const t=new Lt(this.xDir).rotate(e,[0,0,0],this.zDir);return new Do(this.origin,t,this.zDir)}_calcTransforms(){const e=new this.oc.gp_Ax3_1,t=Lg(this.origin,this.zDir,this.xDir);new this.oc.gp_Trsf_1().SetTransformation_1(e,t),this.globalToLocal=new $f,this.globalToLocal.coordSystemChange("reference",{origin:this.origin,zDir:this.zDir,xDir:this.xDir}),this.localToGlobal=new $f,this.localToGlobal.coordSystemChange({origin:this.origin,zDir:this.zDir,xDir:this.xDir},"reference")}setOrigin2d(e,t){this.origin=this.toWorldCoords([e,t])}toLocalCoords(e){const t=this.globalToLocal.transformPoint(e),r=new Lt(t);return t.delete(),r}toWorldCoords(e){const t=this.localToGlobal.transformPoint(e),r=new Lt(t);return t.delete(),r}}const HW={XY:{xDir:[1,0,0],normal:[0,0,1]},YZ:{xDir:[0,1,0],normal:[1,0,0]},ZX:{xDir:[0,0,1],normal:[0,1,0]},XZ:{xDir:[1,0,0],normal:[0,-1,0]},YX:{xDir:[0,1,0],normal:[0,0,-1]},ZY:{xDir:[0,0,1],normal:[-1,0,0]},front:{xDir:[1,0,0],normal:[0,0,1]},back:{xDir:[-1,0,0],normal:[0,0,-1]},left:{xDir:[0,0,1],normal:[-1,0,0]},right:{xDir:[0,0,-1],normal:[1,0,0]},top:{xDir:[1,0,0],normal:[0,1,0]},bottom:{xDir:[1,0,0],normal:[0,-1,0]}},fN=(n,e=[0,0,0])=>{const t=HW[n];if(!t)throw new Error(`Could not find plane ${n}`);let r;return typeof e=="number"?r=t.normal.map(i=>i*e):r=e,new Do(r,t.xDir,t.normal)};let GW=class extends sc{constructor(e){const t=Jn();let r=e;r||(r=new t.Bnd_Box_1),super(r)}get repr(){const[e,t]=this.bounds;return`${new Lt(e).repr} - ${new Lt(t).repr}`}get bounds(){const e={current:0},t={current:0},r={current:0},i={current:0},s={current:0},o={current:0};return this.wrapped.Get(e,t,r,i,s,o),[[e.current,t.current,r.current],[i.current,s.current,o.current]]}get center(){const[[e,t,r],[i,s,o]]=this.bounds;return[e+(i-e)/2,t+(s-t)/2,r+(o-r)/2]}get width(){const[[e],[t]]=this.bounds;return Math.abs(t-e)}get height(){const[[,e],[,t]]=this.bounds;return Math.abs(t-e)}get depth(){const[[,,e],[,,t]]=this.bounds;return Math.abs(t-e)}add(e){this.wrapped.Add_1(e.wrapped)}isOut(e){return this.wrapped.IsOut_4(e.wrapped)}};function lm(n="XY",e=[0,0,0]){return n instanceof Do?n.clone():fN(n,e)}function VW(n,e,t=[0,0,0],r=[0,0,1]){const i=new $f;i.rotate(e,t,r);const s=i.transform(n);return i.delete(),s}function WW(n,e){const t=new $f;t.translate(e);const r=t.transform(n);return t.delete(),r}function jW(n,e,t){const r=new $f;r.mirror(e,t);const i=r.transform(n);return r.delete(),i}function qW(n,e,t){const r=new $f;r.scale(e,t);const i=r.transform(n);return r.delete(),i}let Gv=null;const UT=n=>{if(Gv&&!n)return Gv;const t=Jn().GeomAbs_CurveType;return Gv=new Map([[t.GeomAbs_Line,"LINE"],[t.GeomAbs_Circle,"CIRCLE"],[t.GeomAbs_Ellipse,"ELLIPSE"],[t.GeomAbs_Hyperbola,"HYPERBOLA"],[t.GeomAbs_Parabola,"PARABOLA"],[t.GeomAbs_BezierCurve,"BEZIER_CURVE"],[t.GeomAbs_BSplineCurve,"BSPLINE_CURVE"],[t.GeomAbs_OffsetCurve,"OFFSET_CURVE"],[t.GeomAbs_OtherCurve,"OTHER_CURVE"]]),Gv},XW=n=>{let e=UT().get(n);if(e||(e=UT(!0).get(n)),!e)throw new Error("unknown type");return e},YW={X:[1,0,0],Y:[0,1,0],Z:[0,0,1]},s2={YZ:[1,0,0],XZ:[0,1,0],XY:[0,0,1]};class $W{constructor(){this.filters=[]}delete(){this.filters=[]}and(e){return e.forEach(t=>t(this)),this}not(e){const t=new this.constructor;e(t);const r=({element:i})=>!t.shouldKeep(i);return this.filters.push(r),this}either(e){const t=e.map(i=>{const s=new this.constructor;return i(s),s}),r=({element:i})=>t.some(s=>s.shouldKeep(i));return this.filters.push(r),this}find(e,{unique:t=!1}={}){const r=this.applyFilter(e);if(t){if(r.length!==1)throw console.error(r),new Error("Finder has not found a unique solution");return r[0]}return r}}class ZW extends sc{constructor(){const e=Jn();super(new e.Message_ProgressRange_1)}}class dS extends sc{constructor(e){const t=Jn();super(new t.BRepExtrema_DistShapeShape_1),this.wrapped.LoadS1(e.wrapped)}distanceTo(e){this.wrapped.LoadS2(e.wrapped);const t=new ZW;return this.wrapped.Perform(t.wrapped),this.wrapped.Value()}}class dN extends $W{when(e){return this.filters.push(e),this}inList(e){const t=({element:r})=>!!e.find(i=>i.isSame(r));return this.filters.push(t),this}atAngleWith(e="Z",t=0){let r;typeof e=="string"?r=new Lt(YW[e]):r=new Lt(e);const i=({normal:s})=>{if(!s)return!1;const o=Math.acos(Math.abs(s.dot(r)));return Math.abs(o-fx*t)<1e-6};return this.filters.push(i),this}atDistance(e,t=[0,0,0]){const r=a2(t),i=new dS(r),s=({element:o})=>Math.abs(i.distanceTo(o)-e)<1e-6;return this.filters.push(s),this}containsPoint(e){return this.atDistance(0,e)}withinDistance(e,t=[0,0,0]){const r=a2(t),i=new dS(r),s=({element:o})=>i.distanceTo(o)-e<1e-6;return this.filters.push(s),this}inBox(e,t){const r=Pg(e,t);return this.inShape(r)}inShape(e){const t=new dS(e),r=({element:i})=>t.distanceTo(i)<1e-6;return this.filters.push(r),this}}class o2 extends dN{clone(){const e=new o2;return e.filters=[...this.filters],e}inDirection(e){return this.atAngleWith(e,0)}ofLength(e){const t=({element:r})=>typeof e=="number"?Math.abs(r.length-e)<1e-9:e(r.length);return this.filters.push(t),this}ofCurveType(e){const t=({element:r})=>r.geomType===e;return this.filters.push(t),this}parallelTo(e){if(typeof e=="string"&&s2[e])return this.atAngleWith(s2[e],90);if(typeof e!="string"&&e instanceof Do)return this.atAngleWith(e.zDir,90);if(typeof e!="string"&&e.normalAt){const t=e.normalAt();return this.atAngleWith(t,90),this}return this}inPlane(e,t){const r=e instanceof Do?lm(e):lm(e,t);this.parallelTo(r);const i=({element:s})=>{const o=s.startPoint,a=o.projectToPlane(r);return o.equals(a)};return this.filters.push(i),this}shouldKeep(e){let t=null;try{t=e.tangentAt().normalized()}catch(r){console.error("failed to compute a normal",r)}return this.filters.every(r=>r({normal:t,element:e}))}applyFilter(e){return e.edges.filter(t=>this.shouldKeep(t))}}class B3 extends dN{clone(){const e=new B3;return e.filters=[...this.filters],e}parallelTo(e){if(typeof e=="string"&&s2[e])return this.atAngleWith(s2[e]);if(typeof e!="string"&&e instanceof Do)return this.atAngleWith(e.zDir);if(typeof e!="string"&&e.normalAt){const t=e.normalAt();return this.atAngleWith(t),this}return this}ofSurfaceType(e){const t=({element:r})=>r.geomType===e;return this.filters.push(t),this}inPlane(e,t){const r=e instanceof Do?lm(e):lm(e,t);this.parallelTo(r);const i=({element:s})=>{const o=s.center,a=o.projectToPlane(r);return o.equals(a)};return this.filters.push(i),this}shouldKeep(e){const t=e.normalAt();return this.filters.every(i=>i({normal:t,element:e}))}applyFilter(e){return e.faces.filter(t=>this.shouldKeep(t))}}const BT=n=>{const e=Jn();return{vertex:e.TopAbs_ShapeEnum.TopAbs_VERTEX,wire:e.TopAbs_ShapeEnum.TopAbs_WIRE,face:e.TopAbs_ShapeEnum.TopAbs_FACE,shell:e.TopAbs_ShapeEnum.TopAbs_SHELL,solid:e.TopAbs_ShapeEnum.TopAbs_SOLID,solidCompound:e.TopAbs_ShapeEnum.TopAbs_COMPSOLID,compound:e.TopAbs_ShapeEnum.TopAbs_COMPOUND,edge:e.TopAbs_ShapeEnum.TopAbs_EDGE,shape:e.TopAbs_ShapeEnum.TopAbs_SHAPE}[n]},KW=function*(e,t){const r=Jn(),i=new r.TopExp_Explorer_2(e,BT(t),BT("shape")),s=new Map;for(;i.More();){const o=i.Current(),a=o.HashCode(hN);s.get(a)||(s.set(a,!0),yield o),i.Next()}i.delete()},pN=n=>{if(n.IsNull())throw new Error("This shape has not type, it is null");return n.ShapeType()};class dx extends sc{constructor(e){super(e)}clone(){return new this.constructor(Zf(this.wrapped))}get hashCode(){return this.wrapped.HashCode(hN)}get isNull(){return this.wrapped.IsNull()}isSame(e){return this.wrapped.IsSame(e.wrapped)}isEqual(e){return this.wrapped.IsEqual(e.wrapped)}simplify(){const e=Jn(),t=new e.ShapeUpgrade_UnifySameDomain_2(this.wrapped,!0,!0,!1);t.Build();const r=hi(t.Shape());if(t.delete(),this.constructor!==r.constructor)throw new Error("unexpected types mismatch");return r}translate(e,t=0,r=0){const i=typeof e=="number"?[e,t,r]:e,s=hi(WW(this.wrapped,i));if(this.delete(),this.constructor!==s.constructor)throw new Error("unexpected types mismatch");return s}translateX(e){return this.translate([e,0,0])}translateY(e){return this.translate([0,e,0])}translateZ(e){return this.translate([0,0,e])}rotate(e,t=[0,0,0],r=[0,0,1]){const i=hi(VW(this.wrapped,e,t,r));if(this.delete(),this.constructor!==i.constructor)throw new Error("unexpected types mismatch");return i}mirror(e,t){const r=hi(jW(this.wrapped,e,t));if(this.delete(),this.constructor!==r.constructor)throw new Error("unexpected types mismatch");return r}scale(e,t=[0,0,0]){const r=hi(qW(this.wrapped,t,e));if(this.delete(),this.constructor!==r.constructor)throw new Error("unexpected types mismatch");return r}_iterTopo(e){return KW(this.wrapped,e)}_listTopo(e){return Array.from(this._iterTopo(e)).map(t=>Zf(t))}get edges(){return this._listTopo("edge").map(e=>new vm(e))}get faces(){return this._listTopo("face").map(e=>new px(e))}get wires(){return this._listTopo("wire").map(e=>new tc(e))}get boundingBox(){const e=new GW;return this.oc.BRepBndLib.Add(this.wrapped,e.wrapped,!0),e}_mesh({tolerance:e=.001,angularTolerance:t=.1}={}){new this.oc.BRepMesh_IncrementalMesh_2(this.wrapped,e,!1,t,!1)}mesh({tolerance:e=.001,angularTolerance:t=.1}={}){this._mesh({tolerance:e,angularTolerance:t});let r=[],i=[],s=[];const o=[];for(const a of this.faces){const l=a.triangulation(i.length/3);if(!l)continue;const{trianglesIndexes:u,vertices:c,verticesNormals:h}=l;o.push({start:r.length,count:u.length,faceId:a.hashCode}),r=r.concat(u),i=i.concat(c),s=s.concat(h)}return{triangles:r,vertices:i,normals:s,faceGroups:o}}meshEdges({tolerance:e=.001,angularTolerance:t=.1}={}){var r;const i=$s(),s=new Set,o=[],a=[],l=()=>{const c=o.length;let h=null;return[d=>{h?(o.push(...h),h=[d.X(),d.Y(),d.Z()],o.push(...h)):h=[d.X(),d.Y(),d.Z()]},d=>{a.push({start:c/3,count:(o.length-c)/3,edgeId:d}),s.add(d)}]},u=i(new this.oc.TopLoc_Location_1);for(const c of this.faces){const h=i(this.oc.BRep_Tool.Triangulation(c.wrapped,u,0));if(h.IsNull())continue;const d=h.get();for(const m of c.edges){if(i(m),s.has(m.hashCode))continue;const v=i(new this.oc.TopLoc_Location_1),w=i(this.oc.BRep_Tool.PolygonOnTriangulation_1(m.wrapped,h,v)),x=(r=w==null?void 0:w.get())==null?void 0:r.Nodes();if(!x)continue;i(x);const[g,S]=l();for(let _=x.Lower();_<=x.Upper();_++){const T=i(i(d.Node(x.Value(_))).Transformed(v.Transformation()));g(T)}S(m.hashCode)}}for(const c of this.edges){i(c);const h=c.hashCode;if(s.has(h))continue;const d=i(new this.oc.BRepAdaptor_Curve_2(c.wrapped)),m=i(new this.oc.GCPnts_TangentialDeflection_2(d,e,t,2,1e-9,1e-7)),[v,w]=l();for(let x=0;x<m.NbPoints();x++){const g=i(m.Value(x+1).Transformed(u.Transformation()));v(g)}w(h)}return{lines:o,edgeGroups:a}}blobSTEP(){const e="blob.step",t=new this.oc.STEPControl_Writer_1;this.oc.Interface_Static.SetIVal("write.step.schema",5),t.Model(!0).delete();const r=new this.oc.Message_ProgressRange_1;t.Transfer(this.wrapped,this.oc.STEPControl_StepModelType.STEPControl_AsIs,!0,r);const i=t.Write(e);if(t.delete(),r.delete(),i===this.oc.IFSelect_ReturnStatus.IFSelect_RetDone){const s=this.oc.FS.readFile("/"+e);return this.oc.FS.unlink("/"+e),new Blob([s],{type:"application/STEP"})}else throw new Error("WRITE STEP FILE FAILED.")}blobSTL({tolerance:e=.001,angularTolerance:t=.1,binary:r=!1}={}){this._mesh({tolerance:e,angularTolerance:t});const i="blob.stl";if(this.oc.StlAPI.Write(this.wrapped,i,!r)){const o=this.oc.FS.readFile("/"+i);return this.oc.FS.unlink("/"+i),new Blob([o],{type:"application/sla"})}else throw new Error("WRITE STL FILE FAILED.")}}class mN extends dx{}class gN extends dx{get repr(){const{startPoint:e,endPoint:t}=this,r=`start: (${this.startPoint.repr}) end:(${this.endPoint.repr})`;return e.delete(),t.delete(),r}get curve(){return new JW(this._geomAdaptor())}get startPoint(){return this.curve.startPoint}get endPoint(){return this.curve.endPoint}tangentAt(e=0){return this.curve.tangentAt(e)}pointAt(e=0){return this.curve.pointAt(e)}get isClosed(){return this.curve.isClosed}get isPeriodic(){return this.curve.isPeriodic}get period(){return this.curve.period}get geomType(){return this.curve.curveType}get length(){const e=new this.oc.GProp_GProps_1;this.oc.BRepGProp.LinearProperties(this.wrapped,e,!0,!1);const t=e.Mass();return e.delete(),t}get orientation(){return this.wrapped.Orientation_1()===this.oc.TopAbs_Orientation.TopAbs_FORWARD?"forward":"backward"}}class JW extends sc{get repr(){const{startPoint:e,endPoint:t}=this,r=`start: (${this.startPoint.repr}) end:(${this.endPoint.repr}}`;return e.delete(),t.delete(),r}get curveType(){const e=this.wrapped.GetType&&this.wrapped.GetType();return XW(e)}get startPoint(){const e=this.wrapped.Value(this.wrapped.FirstParameter());return new Lt(e)}get endPoint(){const e=this.wrapped.Value(this.wrapped.LastParameter());return new Lt(e)}_mapParameter(e){const t=this.wrapped.FirstParameter(),r=this.wrapped.LastParameter();return t+(r-t)*e}pointAt(e=.5){return new Lt(this.wrapped.Value(this._mapParameter(e)))}tangentAt(e=.5){const t=this._mapParameter(e),r=new this.oc.gp_Pnt_1,i=new this.oc.gp_Vec_1;this.wrapped.D1(t,r,i);const s=new Lt(i);return r.delete(),i.delete(),s}get isClosed(){return this.wrapped.IsClosed()}get isPeriodic(){return this.wrapped.IsPeriodic()}get period(){return this.wrapped.Period()}}class vm extends gN{_geomAdaptor(){return new this.oc.BRepAdaptor_Curve_2(this.wrapped)}}class tc extends gN{_geomAdaptor(){return new this.oc.BRepAdaptor_CompCurve_2(this.wrapped,!1)}offset2D(e,t="arc"){const r={arc:this.oc.GeomAbs_JoinType.GeomAbs_Arc,intersection:this.oc.GeomAbs_JoinType.GeomAbs_Intersection,tangent:this.oc.GeomAbs_JoinType.GeomAbs_Tangent},i=new this.oc.BRepOffsetAPI_MakeOffset_3(this.wrapped,r[t],!1);i.Perform(e,0);const s=hi(i.Shape());if(i.delete(),this.delete(),!(s instanceof tc))throw new Error("Could not offset with a wire");return s}}class QW extends sc{get surfaceType(){const e=this.oc.GeomAbs_SurfaceType,r=new Map([[e.GeomAbs_Plane,"PLANE"],[e.GeomAbs_Cylinder,"CYLINDRE"],[e.GeomAbs_Cone,"CONE"],[e.GeomAbs_Sphere,"SPHERE"],[e.GeomAbs_Torus,"TORUS"],[e.GeomAbs_BezierSurface,"BEZIER_SURFACE"],[e.GeomAbs_BSplineSurface,"BSPLINE_SURFACE"],[e.GeomAbs_SurfaceOfRevolution,"REVOLUTION_SURFACE"],[e.GeomAbs_SurfaceOfExtrusion,"EXTRUSION_SURFACE"],[e.GeomAbs_OffsetSurface,"OFFSET_SURFACE"],[e.GeomAbs_OtherSurface,"OTHER_SURFACE"]]).get(this.wrapped.GetType());if(!r)throw new Error("surface type not found");return r}}class px extends dx{_geomAdaptor(){return new this.oc.BRepAdaptor_Surface_2(this.wrapped,!1)}get surface(){return new QW(this._geomAdaptor())}get orientation(){return this.wrapped.Orientation_1()===this.oc.TopAbs_Orientation.TopAbs_FORWARD?"forward":"backward"}get geomType(){const e=this.surface,t=e.surfaceType;return e.delete(),t}get UVBounds(){const e={current:0},t={current:0},r={current:0},i={current:0};return this.oc.BRepTools.UVBounds_1(this.wrapped,e,t,r,i),{uMin:e.current,uMax:t.current,vMin:r.current,vMax:i.current}}pointOnSurface(e,t){const{uMin:r,uMax:i,vMin:s,vMax:o}=this.UVBounds,a=this._geomAdaptor(),l=new this.oc.gp_Pnt_1,u=e*(i-r)+r,c=t*(o-s)+s;a.D0(u,c,l);const h=new Lt(l);return a.delete(),l.delete(),h}normalAt(e){let t=0,r=0;const i=$s();if(e){const u=i(this.oc.BRep_Tool.Surface_2(this.wrapped)),c=i(new this.oc.GeomAPI_ProjectPointOnSurf_2(i(Fa(e)),u,this.oc.Extrema_ExtAlgo.Extrema_ExtAlgo_Grad)),h={current:0},d={current:0};c.LowerDistanceParameters(h,d),t=h.current,r=d.current}else{const{uMin:u,uMax:c,vMin:h,vMax:d}=this.UVBounds;t=.5*(u+c),r=.5*(h+d)}const s=i(new this.oc.gp_Pnt_1),o=i(new this.oc.gp_Vec_1);return i(new this.oc.BRepGProp_Face_2(this.wrapped,!1)).Normal(t,r,s,o),new Lt(o)}get center(){const e=new this.oc.GProp_GProps_1;this.oc.BRepGProp.SurfaceProperties_2(this.wrapped,e,1e-7,!0);const t=new Lt(e.CentreOfMass());return e.delete(),t}outerWire(){const e=new tc(this.oc.BRepTools.OuterWire(this.wrapped));return this.delete(),e}innerWires(){const e=this.clone().outerWire(),t=this.wires.filter(r=>!e.isSame(r));return e.delete(),this.delete(),t}triangulation(e=0){const t=$s(),r=t(new this.oc.TopLoc_Location_1),i=t(this.oc.BRep_Tool.Triangulation(this.wrapped,r,0));if(i.IsNull())return null;const s=t(r.Transformation()),o={vertices:[],trianglesIndexes:[],verticesNormals:[]},a=i.get(),l=a.NbNodes();o.vertices=new Array(l*3);for(let v=1;v<=l;v++){const w=t(t(a.Node(v)).Transformed(s));o.vertices[(v-1)*3+0]=w.X(),o.vertices[(v-1)*3+1]=w.Y(),o.vertices[(v-1)*3+2]=w.Z()}const u=t(new this.oc.TColgp_Array1OfDir_2(1,l)),c=t(new this.oc.Poly_Connect_2(i));this.oc.StdPrs_ToolTriangulatedShape.Normal(this.wrapped,c,u),o.verticesNormals=new Array(u.Length()*3);for(let v=u.Lower();v<=u.Upper();v++){const w=t(t(u.Value(v)).Transformed(s));o.verticesNormals[(v-1)*3+0]=w.X(),o.verticesNormals[(v-1)*3+1]=w.Y(),o.verticesNormals[(v-1)*3+2]=w.Z()}const h=this.orientation,d=a.NbTriangles();o.trianglesIndexes=new Array(d*3);let m=0;for(let v=1;v<=d;v++){const w=t(a.Triangle(v));let x=w.Value(1),g=w.Value(2);const S=w.Value(3);if(h==="backward"){const _=x;x=g,g=_}o.trianglesIndexes[m*3+0]=x-1+e,o.trianglesIndexes[m*3+1]=g-1+e,o.trianglesIndexes[m*3+2]=S-1+e,m++}return o}}class mx extends dx{fuse(e,{optimisation:t="none"}={}){const r=$s(),i=r(new this.oc.Message_ProgressRange_1),s=r(new this.oc.BRepAlgoAPI_Fuse_3(this.wrapped,e.wrapped,i));t==="commonFace"&&s.SetGlue(this.oc.BOPAlgo_GlueEnum.BOPAlgo_GlueShift),t==="sameFace"&&s.SetGlue(this.oc.BOPAlgo_GlueEnum.BOPAlgo_GlueFull),s.Build(i),s.SimplifyResult(!0,!0,.001);const o=hi(s.Shape());if(!Bu(o))throw new Error("Could not fuse as a 3d shape");return o}cut(e,{optimisation:t="none"}={}){const r=$s(),i=r(new this.oc.Message_ProgressRange_1),s=r(new this.oc.BRepAlgoAPI_Cut_3(this.wrapped,e.wrapped,i));t==="commonFace"&&s.SetGlue(this.oc.BOPAlgo_GlueEnum.BOPAlgo_GlueShift),t==="sameFace"&&s.SetGlue(this.oc.BOPAlgo_GlueEnum.BOPAlgo_GlueFull),s.Build(i),s.SimplifyResult(!0,!0,.001);const o=hi(s.Shape());if(!Bu(o))throw new Error("Could not cut as a 3d shape");return o}intersect(e){const t=$s(),r=t(new this.oc.Message_ProgressRange_1),i=t(new this.oc.BRepAlgoAPI_Common_3(this.wrapped,e.wrapped,r));i.Build(r),i.SimplifyResult(!0,!0,.001);const s=hi(i.Shape());if(!Bu(s))throw new Error("Could not intersect as a 3d shape");return s}shell(e,t=null,r=.001){const i=typeof t=="number"?t:r;let s,o;if(typeof e=="number"){o=e;const m=new B3;s=typeof t=="function"?t(m):m}else o=e.thickness,s=e.filter;const a=$s(),l=s.find(this),u=a(new this.oc.TopTools_ListOfShape_1);l.forEach(m=>{u.Append_1(m.wrapped)});const c=a(new this.oc.Message_ProgressRange_1),h=a(new this.oc.BRepOffsetAPI_MakeThickSolid);h.MakeThickSolidByJoin(this.wrapped,u,-o,i,this.oc.BRepOffset_Mode.BRepOffset_Skin,!1,!1,this.oc.GeomAbs_JoinType.GeomAbs_Arc,!1,c);const d=hi(h.Shape());if(!Bu(d))throw new Error("Could not shell as a 3d shape");return d}_builderIter(e,t){if(typeof e=="number"){let o=0;for(const a of this._iterTopo("edge"))t(e,Zf(a)),o+=1;return o}let r,i=null;typeof e=="function"?r=e:(r=o=>e.filter.shouldKeep(o)?e.radius||1:0,e.filter&&!e.keep&&(i=()=>e.filter.delete()));let s=0;for(const o of this._iterTopo("edge")){const a=Zf(o),l=new vm(a),u=r(l);u&&(t(u,a),s+=1),l.delete()}return i&&i(),s}fillet(e,t){const i=$s()(new this.oc.BRepFilletAPI_MakeFillet(this.wrapped,this.oc.ChFi3d_FilletShape.ChFi3d_Rational));let s=e;if(typeof e=="number"&&t&&(s={radius:e,filter:t(new o2)}),!this._builderIter(s,(l,u)=>i.Add_2(l,u)))throw new Error("Could not fillet, no edge was selected");const a=hi(i.Shape());if(!Bu(a))throw new Error("Could not fillet as a 3d shape");return a}chamfer(e,t){const i=$s()(new this.oc.BRepFilletAPI_MakeChamfer(this.wrapped));let s=e;if(typeof e=="number"&&t&&(s={radius:e,filter:t(new o2)}),!this._builderIter(s,(l,u)=>i.Add_2(l,u)))throw new Error("Could not chamfer, no edge was selected");const a=hi(i.Shape());if(!Bu(a))throw new Error("Could not chamfer as a 3d shape");return a}}class vN extends mx{}class od extends mx{}class yN extends mx{}class xN extends mx{}function Bu(n){return n instanceof vN||n instanceof od||n instanceof yN||n instanceof xN}function zT(n){return n instanceof tc}function Zf(n){const e=Jn(),t=e.TopAbs_ShapeEnum,r=new Map([[t.TopAbs_EDGE,e.TopoDS.Edge_1],[t.TopAbs_WIRE,e.TopoDS.Wire_1],[t.TopAbs_FACE,e.TopoDS.Face_1],[t.TopAbs_SHELL,e.TopoDS.Shell_1],[t.TopAbs_SOLID,e.TopoDS.Solid_1],[t.TopAbs_COMPSOLID,e.TopoDS.CompSolid_1],[t.TopAbs_COMPOUND,e.TopoDS.Compound_1]]),i=pN(n),s=r.get(i);if(!s)throw new Error("Could not find a wrapper for this shape type");return s(n)}function hi(n){const t=Jn().TopAbs_ShapeEnum,i=new Map([[t.TopAbs_VERTEX,mN],[t.TopAbs_EDGE,vm],[t.TopAbs_WIRE,tc],[t.TopAbs_FACE,px],[t.TopAbs_SHELL,vN],[t.TopAbs_SOLID,od],[t.TopAbs_COMPSOLID,yN],[t.TopAbs_COMPOUND,xN]]).get(pN(n));if(!i)throw new Error("Could not find a wrapper for this shape type");return new i(Zf(n))}const wN=(n,e)=>{const t=Jn();return new vm(new t.BRepBuilderAPI_MakeEdge_3(Fa(n),Fa(e)).Edge())},ej=(n,e=[0,0,0],t=[0,0,1])=>{const r=Jn(),[i,s]=r1(),o=i(U3(e,t)),a=i(new r.gp_Circ_2(o,n)),l=i(new r.BRepBuilderAPI_MakeEdge_8(a)),u=new vm(l.Edge());return s(),u},tj=(n,e,t,r=[0,0,0],i=[0,0,1],s=!1)=>{const o=Jn(),[a,l]=r1();let u=2*Math.PI;s&&(u=-2*Math.PI);const c=a(new o.Geom2d_Line_3(a(new o.gp_Pnt2d_3(0,0)),a(new o.gp_Dir2d_4(u,n)))),h=e/n,d=c.Value(0),m=c.Value(h*Math.sqrt((2*Math.PI)**2+n**2)),v=a(new o.GCE2d_MakeSegment_1(d,m)),w=new o.Geom_CylindricalSurface_1(a(Lg(r,i)),t),x=a(new o.BRepBuilderAPI_MakeEdge_30(a(new o.Handle_Geom2d_Curve_2(v.Value().get())),a(new o.Handle_Geom_Surface_2(w)))).Edge(),g=a(new o.BRepBuilderAPI_MakeWire_2(x)).Wire();return o.BRepLib.BuildCurves3d_2(g),l(),new tc(g)},z3=n=>{const e=Jn(),t=new e.BRepBuilderAPI_MakeWire_1;n.forEach(o=>{o instanceof vm&&t.Add_1(o.wrapped),o instanceof tc&&t.Add_2(o.wrapped)});const r=new e.Message_ProgressRange_1;t.Build(r);const i=t.Error();if(i!==e.BRepBuilderAPI_WireError.BRepBuilderAPI_WireDone){const o=new Map([[e.BRepBuilderAPI_WireError.BRepBuilderAPI_EmptyWire,"empty wire"],[e.BRepBuilderAPI_WireError.BRepBuilderAPI_NonManifoldWire,"non manifold wire"],[e.BRepBuilderAPI_WireError.BRepBuilderAPI_DisconnectedWire,"disconnected wire"]]);throw new Error(`Failed to build the wire, ${o.get(i)||"unknown error"}`)}const s=new tc(t.Wire());return t.delete(),r.delete(),s},pS=(n,e)=>{const t=Jn(),r=new t.BRepBuilderAPI_MakeFace_15(n.wrapped,!1);if(e==null||e.forEach(s=>{r.Add(s.wrapped)}),!r.IsDone())throw r.delete(),new Error("Failed to build the face. Your wire might be non planar.");const i=r.Face();return r.delete(),new px(i)},nj=(n,e)=>{const t=Jn(),[r,i]=r1(),s=r(t.BRep_Tool.Surface_2(n.wrapped)),a=r(new t.BRepBuilderAPI_MakeFace_21(s,e.wrapped,!0)).Face();return i(),new px(a)},SN=(n,e,t=[0,0,0],r=[0,0,1])=>{const i=Jn(),s=U3(t,r),o=new i.BRepPrimAPI_MakeCylinder_3(s,n,e),a=new od(o.Shape());return s.delete(),o.delete(),a},rj=n=>{const e=Jn(),t=new e.BRepPrimAPI_MakeSphere_1(n),r=new od(t.Shape());return t.delete(),r};class ij extends sc{constructor(e,t,r){const i=Jn(),s=$s(),o=Math.sqrt(e*t/r),a=e/o,l=t/o,u=new i.gp_GTrsf_1;u.SetAffinity_1(H0([0,0,0],[0,1,0]),a);const c=s(new i.gp_GTrsf_1);c.SetAffinity_1(H0([0,0,0],[0,0,1]),o);const h=s(new i.gp_GTrsf_1);h.SetAffinity_1(H0([0,0,0],[1,0,0]),l),u.Multiply(c),u.Multiply(h),super(u)}applyToPoint(e){const t=Jn(),i=$s()(e.XYZ());return this.wrapped.Transforms_1(i),new t.gp_Pnt_2(i)}}function sj(n){const e=[];for(let t=n.LowerRow();t<=n.UpperRow();t++){const r=[];e.push(r);for(let i=n.LowerCol();i<=n.UpperCol();i++){const s=n.Value(t,i);r.push(s)}}return e}const oj=(n,e,t)=>{const r=Jn(),i=$s(),s=i(new r.gp_Sphere_1);s.SetRadius(1);const o=i(new r.Geom_SphericalSurface_2(s)),a=r.GeomConvert.SurfaceToBSplineSurface(o.UReversed()).get(),l=sj(a.Poles_2()),u=new ij(n,e,t);l.forEach((h,d)=>{h.forEach((m,v)=>{const w=u.applyToPoint(m);a.SetPole_1(d+1,v+1,w)})});const c=hi(i(new r.BRepBuilderAPI_MakeShell_2(a.UReversed(),!1)).Shell());return lj([c])},Pg=(n,e)=>{const t=Jn(),r=new t.BRepPrimAPI_MakeBox_4(Fa(n),Fa(e)),i=new od(r.Solid());return r.delete(),i},a2=n=>{const e=Jn(),t=Fa(n),r=new e.BRepBuilderAPI_MakeVertex(t),i=r.Vertex();return r.delete(),new mN(i)},l2=n=>{const e=Jn(),t=new e.TopoDS_Builder,r=new e.TopoDS_Compound;return t.MakeCompound(r),n.forEach(s=>{t.Add(r,s.wrapped),s.delete()}),hi(r)};function aj(n){const e=Jn(),t=$s(),r=t(new e.BRepBuilderAPI_Sewing(1e-6,!0,!0,!0,!1));return n.forEach(({wrapped:i})=>{r.Add(i)}),r.Perform(t(new e.Message_ProgressRange_1)),hi(Zf(r.SewedShape()))}function lj(n){const e=$s(),t=Jn(),r=aj(n),i=hi(e(new t.ShapeFix_Solid_1).SolidFromShell(r.wrapped));if(!(i instanceof od))throw new Error("Could not make a solid of faces and shells");return i}const uj=(n,e)=>{const t=Jn(),r=new t.BRepPrimAPI_MakePrism_1(n.wrapped,e.wrapped,!1,!0),i=new od(Zf(r.Shape()));return r.delete(),i},cj=(n,e=[0,0,0],t=[0,0,1],r=360)=>{const i=Jn(),s=H0(e,t),o=new i.BRepPrimAPI_MakeRevol_1(n.wrapped,s,r*fx,!1),a=hi(o.Shape());if(s.delete(),o.delete(),!Bu(a))throw new Error("Could not revolve to a 3d shape");return a};function Rg(n,e,{frenet:t=!1,auxiliarySpine:r,law:i=null,transitionMode:s="right",withContact:o,support:a,forceProfileSpineOthogonality:l}={},u=!1){const c=Jn(),h=s==="round"?!0:!!l,d=new c.BRepOffsetAPI_MakePipeShell(e.wrapped);if(s){const w={transformed:c.BRepBuilderAPI_TransitionMode.BRepBuilderAPI_Transformed,round:c.BRepBuilderAPI_TransitionMode.BRepBuilderAPI_RoundCorner,right:c.BRepBuilderAPI_TransitionMode.BRepBuilderAPI_RightCorner}[s];w&&d.SetTransitionMode(w)}a?d.SetMode_4(a):t&&d.SetMode_1(t),r&&d.SetMode_5(r.wrapped,!1,c.BRepFill_TypeOfContact.BRepFill_NoContact),i?d.SetLaw_1(n.wrapped,i,!!o,h):d.Add_1(n.wrapped,!!o,h);const m=new c.Message_ProgressRange_1;d.Build(m),u||d.MakeSolid();const v=hi(d.Shape());if(!Bu(v))throw new Error("Could not sweep to a 3d shape");if(u){const w=hi(d.FirstShape()),x=hi(d.LastShape());if(!zT(w))throw new Error("Could not sweep with one start wire");if(!zT(x))throw new Error("Could not sweep with one end wire");return d.delete(),[v,w,x]}return d.delete(),m.delete(),v}const _N=(n,{profile:e,endFactor:t=1})=>{let r;const i=Jn();if(e==="s-curve")r=new i.Law_S,r.Set_1(0,1,n,t);else if(e==="linear")r=new i.Law_Linear,r.Set(0,1,n,t);else throw new Error("Could not generate a law function");return r.Trim(0,n,1e-6)};function hj(n,e,t,r,i=!1){const s=new Lt(e),o=new Lt(t),a=wN(s,s.add(o)),l=z3([a]),u=r?_N(o.Length,r):null;return i?Rg(n,l,{law:u},i):Rg(n,l,{law:u},i)}function fj(n,e,t,r,i,s=!1){const o=new Lt(t),a=new Lt(r),l=wN(o,o.add(a)),u=z3([l]),c=360/e*a.Length,h=1,d=tj(c,a.Length,h,t,r),m=i?_N(a.Length,i):null;return s?Rg(n,u,{auxiliarySpine:d,law:m},s):Rg(n,u,{auxiliarySpine:d,law:m},s)}const dj=(n,{ruled:e=!0,startPoint:t,endPoint:r}={},i=!1)=>{const s=Jn(),[o,a]=r1(),l=o(new s.BRepOffsetAPI_ThruSections(!i,e,1e-6));t&&l.AddVertex(o(a2(t)).wrapped),n.forEach(h=>l.AddWire(h.wrapped)),r&&l.AddVertex(o(a2(r)).wrapped);const u=o(new s.Message_ProgressRange_1);l.Build(u);const c=hi(l.Shape());if(a(),!Bu(c))throw new Error("Could not loft to a 3d shape");return c};class H3{constructor(e,{defaultOrigin:t=[0,0,0],defaultDirection:r=[0,0,1]}={}){this.wire=e,this.defaultOrigin=t,this.defaultDirection=r,this.baseFace=null}get baseFace(){return this._baseFace}set baseFace(e){e?this._baseFace=e.clone():this._baseFace=e}delete(){this.wire.delete(),this._defaultOrigin.delete(),this._defaultDirection.delete(),this.baseFace&&this.baseFace.delete()}clone(){const e=new H3(this.wire.clone(),{defaultOrigin:this.defaultOrigin,defaultDirection:this.defaultDirection});return this.baseFace&&(e.baseFace=this.baseFace.clone()),e}get defaultOrigin(){return this._defaultOrigin}set defaultOrigin(e){this._defaultOrigin=new Lt(e)}get defaultDirection(){return this._defaultDirection}set defaultDirection(e){this._defaultDirection=new Lt(e)}face(){let e;return this.baseFace?e=nj(this.baseFace,this.wire):e=pS(this.wire),e}wires(){return this.wire.clone()}faces(){return this.face()}revolve(e,{origin:t}={}){const r=pS(this.wire),i=cj(r,t||this.defaultOrigin,e);return r.delete(),this.delete(),i}extrude(e,{extrusionDirection:t,extrusionProfile:r,twistAngle:i,origin:s}={}){const[o,a]=r1(),l=o(new Lt(t||this.defaultDirection).normalized().multiply(e));if(r&&!i){const h=hj(this.wire,s||this.defaultOrigin,l,r);return a(),this.delete(),h}if(i){const h=fj(this.wire,i,s||this.defaultOrigin,l,r);return a(),this.delete(),h}const u=pS(this.wire),c=uj(u,l);return a(),this.delete(),c}sweepSketch(e,t={}){const r=this.wire.startPoint,i=this.wire.tangentAt(1e-9).multiply(-1).normalize(),s=i.cross(this.defaultDirection).multiply(-1),o=e(new Do(r,s,i),r),a={forceProfileSpineOthogonality:!0,...t};this.baseFace&&(a.support=this.baseFace.wrapped);const l=Rg(o.wire,this.wire,a);return this.delete(),l}loftWith(e,t={},r=!1){const i=Array.isArray(e)?[this,...e]:[this,e],s=dj(i.map(o=>o.wire),t,r);return i.forEach(o=>o.delete()),s}}const HT=(n,e={})=>{const t=e.plane instanceof Do?lm(e.plane):lm(e.plane,e.origin),r=z3([ej(n,t.origin,t.zDir)]),i=new H3(r,{defaultOrigin:t.origin,defaultDirection:t.zDir});return t.delete(),i};/*! https://mths.be/codepointat v0.2.0 by @mathias */String.prototype.codePointAt||function(){var n=function(){try{var t={},r=Object.defineProperty,i=r(t,t,t)&&r}catch{}return i}(),e=function(t){if(this==null)throw TypeError();var r=String(this),i=r.length,s=t?Number(t):0;if(s!=s&&(s=0),!(s<0||s>=i)){var o=r.charCodeAt(s),a;return o>=55296&&o<=56319&&i>s+1&&(a=r.charCodeAt(s+1),a>=56320&&a<=57343)?(o-55296)*1024+a-56320+65536:o}};n?n(String.prototype,"codePointAt",{value:e,configurable:!0,writable:!0}):String.prototype.codePointAt=e}();function bN(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}var pj=new bN,mj=new bN,MN=new Uint8Array(30),EN=new Uint16Array(30),gj=new Uint8Array(30),vj=new Uint16Array(30);function AN(n,e,t,r){var i,s;for(i=0;i<t;++i)n[i]=0;for(i=0;i<30-t;++i)n[i+t]=i/t|0;for(s=r,i=0;i<30;++i)e[i]=s,s+=1<<n[i]}function yj(n,e){var t;for(t=0;t<7;++t)n.table[t]=0;for(n.table[7]=24,n.table[8]=152,n.table[9]=112,t=0;t<24;++t)n.trans[t]=256+t;for(t=0;t<144;++t)n.trans[24+t]=t;for(t=0;t<8;++t)n.trans[24+144+t]=280+t;for(t=0;t<112;++t)n.trans[24+144+8+t]=144+t;for(t=0;t<5;++t)e.table[t]=0;for(e.table[5]=32,t=0;t<32;++t)e.trans[t]=t}yj(pj,mj);AN(MN,EN,4,3);AN(gj,vj,2,1);MN[28]=0;EN[28]=258;function ap(n,e,t,r,i){return Math.pow(1-i,3)*n+3*Math.pow(1-i,2)*i*e+3*(1-i)*Math.pow(i,2)*t+Math.pow(i,3)*r}function Uh(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}Uh.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};Uh.prototype.addPoint=function(n,e){typeof n=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=n,this.x2=n),n<this.x1&&(this.x1=n),n>this.x2&&(this.x2=n)),typeof e=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))};Uh.prototype.addX=function(n){this.addPoint(n,null)};Uh.prototype.addY=function(n){this.addPoint(null,n)};Uh.prototype.addBezier=function(n,e,t,r,i,s,o,a){var l=[n,e],u=[t,r],c=[i,s],h=[o,a];this.addPoint(n,e),this.addPoint(o,a);for(var d=0;d<=1;d++){var m=6*l[d]-12*u[d]+6*c[d],v=-3*l[d]+9*u[d]-9*c[d]+3*h[d],w=3*u[d]-3*l[d];if(v===0){if(m===0)continue;var x=-w/m;0<x&&x<1&&(d===0&&this.addX(ap(l[d],u[d],c[d],h[d],x)),d===1&&this.addY(ap(l[d],u[d],c[d],h[d],x)));continue}var g=Math.pow(m,2)-4*w*v;if(!(g<0)){var S=(-m+Math.sqrt(g))/(2*v);0<S&&S<1&&(d===0&&this.addX(ap(l[d],u[d],c[d],h[d],S)),d===1&&this.addY(ap(l[d],u[d],c[d],h[d],S)));var _=(-m-Math.sqrt(g))/(2*v);0<_&&_<1&&(d===0&&this.addX(ap(l[d],u[d],c[d],h[d],_)),d===1&&this.addY(ap(l[d],u[d],c[d],h[d],_)))}}};Uh.prototype.addQuad=function(n,e,t,r,i,s){var o=n+.6666666666666666*(t-n),a=e+2/3*(r-e),l=o+1/3*(i-n),u=a+1/3*(s-e);this.addBezier(n,e,o,a,l,u,i,s)};function rs(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}rs.prototype.moveTo=function(n,e){this.commands.push({type:"M",x:n,y:e})};rs.prototype.lineTo=function(n,e){this.commands.push({type:"L",x:n,y:e})};rs.prototype.curveTo=rs.prototype.bezierCurveTo=function(n,e,t,r,i,s){this.commands.push({type:"C",x1:n,y1:e,x2:t,y2:r,x:i,y:s})};rs.prototype.quadTo=rs.prototype.quadraticCurveTo=function(n,e,t,r){this.commands.push({type:"Q",x1:n,y1:e,x:t,y:r})};rs.prototype.close=rs.prototype.closePath=function(){this.commands.push({type:"Z"})};rs.prototype.extend=function(n){if(n.commands)n=n.commands;else if(n instanceof Uh){var e=n;this.moveTo(e.x1,e.y1),this.lineTo(e.x2,e.y1),this.lineTo(e.x2,e.y2),this.lineTo(e.x1,e.y2),this.close();return}Array.prototype.push.apply(this.commands,n)};rs.prototype.getBoundingBox=function(){for(var n=new Uh,e=0,t=0,r=0,i=0,s=0;s<this.commands.length;s++){var o=this.commands[s];switch(o.type){case"M":n.addPoint(o.x,o.y),e=r=o.x,t=i=o.y;break;case"L":n.addPoint(o.x,o.y),r=o.x,i=o.y;break;case"Q":n.addQuad(r,i,o.x1,o.y1,o.x,o.y),r=o.x,i=o.y;break;case"C":n.addBezier(r,i,o.x1,o.y1,o.x2,o.y2,o.x,o.y),r=o.x,i=o.y;break;case"Z":r=e,i=t;break;default:throw new Error("Unexpected path command "+o.type)}}return n.isEmpty()&&n.addPoint(0,0),n};rs.prototype.draw=function(n){n.beginPath();for(var e=0;e<this.commands.length;e+=1){var t=this.commands[e];t.type==="M"?n.moveTo(t.x,t.y):t.type==="L"?n.lineTo(t.x,t.y):t.type==="C"?n.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y):t.type==="Q"?n.quadraticCurveTo(t.x1,t.y1,t.x,t.y):t.type==="Z"&&n.closePath()}this.fill&&(n.fillStyle=this.fill,n.fill()),this.stroke&&(n.strokeStyle=this.stroke,n.lineWidth=this.strokeWidth,n.stroke())};rs.prototype.toPathData=function(n){n=n!==void 0?n:2;function e(o){return Math.round(o)===o?""+Math.round(o):o.toFixed(n)}function t(){for(var o=arguments,a="",l=0;l<arguments.length;l+=1){var u=o[l];u>=0&&l>0&&(a+=" "),a+=e(u)}return a}for(var r="",i=0;i<this.commands.length;i+=1){var s=this.commands[i];s.type==="M"?r+="M"+t(s.x,s.y):s.type==="L"?r+="L"+t(s.x,s.y):s.type==="C"?r+="C"+t(s.x1,s.y1,s.x2,s.y2,s.x,s.y):s.type==="Q"?r+="Q"+t(s.x1,s.y1,s.x,s.y):s.type==="Z"&&(r+="Z")}return r};rs.prototype.toSVG=function(n){var e='<path d="';return e+=this.toPathData(n),e+='"',this.fill&&this.fill!=="black"&&(this.fill===null?e+=' fill="none"':e+=' fill="'+this.fill+'"'),this.stroke&&(e+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),e+="/>",e};rs.prototype.toDOMElement=function(n){var e=this.toPathData(n),t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",e),t};function TN(n){throw new Error(n)}function GT(n,e){n||TN(e)}var Nn={fail:TN,argument:GT,assert:GT},VT=32768,WT=2147483648,um={},Wt={},Tn={};function Tl(n){return function(){return n}}Wt.BYTE=function(n){return Nn.argument(n>=0&&n<=255,"Byte value should be between 0 and 255."),[n]};Tn.BYTE=Tl(1);Wt.CHAR=function(n){return[n.charCodeAt(0)]};Tn.CHAR=Tl(1);Wt.CHARARRAY=function(n){typeof n>"u"&&(n="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var e=[],t=0;t<n.length;t+=1)e[t]=n.charCodeAt(t);return e};Tn.CHARARRAY=function(n){return typeof n>"u"?0:n.length};Wt.USHORT=function(n){return[n>>8&255,n&255]};Tn.USHORT=Tl(2);Wt.SHORT=function(n){return n>=VT&&(n=-(2*VT-n)),[n>>8&255,n&255]};Tn.SHORT=Tl(2);Wt.UINT24=function(n){return[n>>16&255,n>>8&255,n&255]};Tn.UINT24=Tl(3);Wt.ULONG=function(n){return[n>>24&255,n>>16&255,n>>8&255,n&255]};Tn.ULONG=Tl(4);Wt.LONG=function(n){return n>=WT&&(n=-(2*WT-n)),[n>>24&255,n>>16&255,n>>8&255,n&255]};Tn.LONG=Tl(4);Wt.FIXED=Wt.ULONG;Tn.FIXED=Tn.ULONG;Wt.FWORD=Wt.SHORT;Tn.FWORD=Tn.SHORT;Wt.UFWORD=Wt.USHORT;Tn.UFWORD=Tn.USHORT;Wt.LONGDATETIME=function(n){return[0,0,0,0,n>>24&255,n>>16&255,n>>8&255,n&255]};Tn.LONGDATETIME=Tl(8);Wt.TAG=function(n){return Nn.argument(n.length===4,"Tag should be exactly 4 ASCII characters."),[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3)]};Tn.TAG=Tl(4);Wt.Card8=Wt.BYTE;Tn.Card8=Tn.BYTE;Wt.Card16=Wt.USHORT;Tn.Card16=Tn.USHORT;Wt.OffSize=Wt.BYTE;Tn.OffSize=Tn.BYTE;Wt.SID=Wt.USHORT;Tn.SID=Tn.USHORT;Wt.NUMBER=function(n){return n>=-107&&n<=107?[n+139]:n>=108&&n<=1131?(n=n-108,[(n>>8)+247,n&255]):n>=-1131&&n<=-108?(n=-n-108,[(n>>8)+251,n&255]):n>=-32768&&n<=32767?Wt.NUMBER16(n):Wt.NUMBER32(n)};Tn.NUMBER=function(n){return Wt.NUMBER(n).length};Wt.NUMBER16=function(n){return[28,n>>8&255,n&255]};Tn.NUMBER16=Tl(3);Wt.NUMBER32=function(n){return[29,n>>24&255,n>>16&255,n>>8&255,n&255]};Tn.NUMBER32=Tl(5);Wt.REAL=function(n){var e=n.toString(),t=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(e);if(t){var r=parseFloat("1e"+((t[2]?+t[2]:0)+t[1].length));e=(Math.round(n*r)/r).toString()}for(var i="",s=0,o=e.length;s<o;s+=1){var a=e[s];a==="e"?i+=e[++s]==="-"?"c":"b":a==="."?i+="a":a==="-"?i+="e":i+=a}i+=i.length&1?"f":"ff";for(var l=[30],u=0,c=i.length;u<c;u+=2)l.push(parseInt(i.substr(u,2),16));return l};Tn.REAL=function(n){return Wt.REAL(n).length};Wt.NAME=Wt.CHARARRAY;Tn.NAME=Tn.CHARARRAY;Wt.STRING=Wt.CHARARRAY;Tn.STRING=Tn.CHARARRAY;um.UTF8=function(n,e,t){for(var r=[],i=t,s=0;s<i;s++,e+=1)r[s]=n.getUint8(e);return String.fromCharCode.apply(null,r)};um.UTF16=function(n,e,t){for(var r=[],i=t/2,s=0;s<i;s++,e+=2)r[s]=n.getUint16(e);return String.fromCharCode.apply(null,r)};Wt.UTF16=function(n){for(var e=[],t=0;t<n.length;t+=1){var r=n.charCodeAt(t);e[e.length]=r>>8&255,e[e.length]=r&255}return e};Tn.UTF16=function(n){return n.length*2};var A5={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};um.MACSTRING=function(n,e,t,r){var i=A5[r];if(i!==void 0){for(var s="",o=0;o<t;o++){var a=n.getUint8(e+o);a<=127?s+=String.fromCharCode(a):s+=i[a&127]}return s}};var Vv=typeof WeakMap=="function"&&new WeakMap,Wv,xj=function(n){if(!Wv){Wv={};for(var e in A5)Wv[e]=new String(e)}var t=Wv[n];if(t!==void 0){if(Vv){var r=Vv.get(t);if(r!==void 0)return r}var i=A5[n];if(i!==void 0){for(var s={},o=0;o<i.length;o++)s[i.charCodeAt(o)]=o+128;return Vv&&Vv.set(t,s),s}}};Wt.MACSTRING=function(n,e){var t=xj(e);if(t!==void 0){for(var r=[],i=0;i<n.length;i++){var s=n.charCodeAt(i);if(s>=128&&(s=t[s],s===void 0))return;r[i]=s}return r}};Tn.MACSTRING=function(n,e){var t=Wt.MACSTRING(n,e);return t!==void 0?t.length:0};function T5(n){return n>=-128&&n<=127}function wj(n,e,t){for(var r=0,i=n.length;e<i&&r<64&&n[e]===0;)++e,++r;return t.push(128|r-1),e}function Sj(n,e,t){for(var r=0,i=n.length,s=e;s<i&&r<64;){var o=n[s];if(!T5(o)||o===0&&s+1<i&&n[s+1]===0)break;++s,++r}t.push(r-1);for(var a=e;a<s;++a)t.push(n[a]+256&255);return s}function _j(n,e,t){for(var r=0,i=n.length,s=e;s<i&&r<64;){var o=n[s];if(o===0||T5(o)&&s+1<i&&T5(n[s+1]))break;++s,++r}t.push(64|r-1);for(var a=e;a<s;++a){var l=n[a];t.push(l+65536>>8&255,l+256&255)}return s}Wt.VARDELTAS=function(n){for(var e=0,t=[];e<n.length;){var r=n[e];r===0?e=wj(n,e,t):r>=-128&&r<=127?e=Sj(n,e,t):e=_j(n,e,t)}return t};Wt.INDEX=function(n){for(var e=1,t=[e],r=[],i=0;i<n.length;i+=1){var s=Wt.OBJECT(n[i]);Array.prototype.push.apply(r,s),e+=s.length,t.push(e)}if(r.length===0)return[0,0];for(var o=[],a=1+Math.floor(Math.log(e)/Math.log(2))/8|0,l=[void 0,Wt.BYTE,Wt.USHORT,Wt.UINT24,Wt.ULONG][a],u=0;u<t.length;u+=1){var c=l(t[u]);Array.prototype.push.apply(o,c)}return Array.prototype.concat(Wt.Card16(n.length),Wt.OffSize(a),o,r)};Tn.INDEX=function(n){return Wt.INDEX(n).length};Wt.DICT=function(n){for(var e=[],t=Object.keys(n),r=t.length,i=0;i<r;i+=1){var s=parseInt(t[i],0),o=n[s];e=e.concat(Wt.OPERAND(o.value,o.type)),e=e.concat(Wt.OPERATOR(s))}return e};Tn.DICT=function(n){return Wt.DICT(n).length};Wt.OPERATOR=function(n){return n<1200?[n]:[12,n-1200]};Wt.OPERAND=function(n,e){var t=[];if(Array.isArray(e))for(var r=0;r<e.length;r+=1)Nn.argument(n.length===e.length,"Not enough arguments given for type"+e),t=t.concat(Wt.OPERAND(n[r],e[r]));else if(e==="SID")t=t.concat(Wt.NUMBER(n));else if(e==="offset")t=t.concat(Wt.NUMBER32(n));else if(e==="number")t=t.concat(Wt.NUMBER(n));else if(e==="real")t=t.concat(Wt.REAL(n));else throw new Error("Unknown operand type "+e);return t};Wt.OP=Wt.BYTE;Tn.OP=Tn.BYTE;var jv=typeof WeakMap=="function"&&new WeakMap;Wt.CHARSTRING=function(n){if(jv){var e=jv.get(n);if(e!==void 0)return e}for(var t=[],r=n.length,i=0;i<r;i+=1){var s=n[i];t=t.concat(Wt[s.type](s.value))}return jv&&jv.set(n,t),t};Tn.CHARSTRING=function(n){return Wt.CHARSTRING(n).length};Wt.OBJECT=function(n){var e=Wt[n.type];return Nn.argument(e!==void 0,"No encoding function for type "+n.type),e(n.value)};Tn.OBJECT=function(n){var e=Tn[n.type];return Nn.argument(e!==void 0,"No sizeOf function for type "+n.type),e(n.value)};Wt.TABLE=function(n){for(var e=[],t=n.fields.length,r=[],i=[],s=0;s<t;s+=1){var o=n.fields[s],a=Wt[o.type];Nn.argument(a!==void 0,"No encoding function for field type "+o.type+" ("+o.name+")");var l=n[o.name];l===void 0&&(l=o.value);var u=a(l);o.type==="TABLE"?(i.push(e.length),e=e.concat([0,0]),r.push(u)):e=e.concat(u)}for(var c=0;c<r.length;c+=1){var h=i[c],d=e.length;Nn.argument(d<65536,"Table "+n.tableName+" too big."),e[h]=d>>8,e[h+1]=d&255,e=e.concat(r[c])}return e};Tn.TABLE=function(n){for(var e=0,t=n.fields.length,r=0;r<t;r+=1){var i=n.fields[r],s=Tn[i.type];Nn.argument(s!==void 0,"No sizeOf function for field type "+i.type+" ("+i.name+")");var o=n[i.name];o===void 0&&(o=i.value),e+=s(o),i.type==="TABLE"&&(e+=2)}return e};Wt.RECORD=Wt.TABLE;Tn.RECORD=Tn.TABLE;Wt.LITERAL=function(n){return n};Tn.LITERAL=function(n){return n.length};function Ss(n,e,t){if(e.length&&(e[0].name!=="coverageFormat"||e[0].value===1))for(var r=0;r<e.length;r+=1){var i=e[r];this[i.name]=i.value}if(this.tableName=n,this.fields=e,t)for(var s=Object.keys(t),o=0;o<s.length;o+=1){var a=s[o],l=t[a];this[a]!==void 0&&(this[a]=l)}}Ss.prototype.encode=function(){return Wt.TABLE(this)};Ss.prototype.sizeOf=function(){return Tn.TABLE(this)};function kg(n,e,t){t===void 0&&(t=e.length);var r=new Array(e.length+1);r[0]={name:n+"Count",type:"USHORT",value:t};for(var i=0;i<e.length;i++)r[i+1]={name:n+i,type:"USHORT",value:e[i]};return r}function C5(n,e,t){var r=e.length,i=new Array(r+1);i[0]={name:n+"Count",type:"USHORT",value:r};for(var s=0;s<r;s++)i[s+1]={name:n+s,type:"TABLE",value:t(e[s],s)};return i}function Ng(n,e,t){var r=e.length,i=[];i[0]={name:n+"Count",type:"USHORT",value:r};for(var s=0;s<r;s++)i=i.concat(t(e[s],s));return i}function u2(n){n.format===1?Ss.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(kg("glyph",n.glyphs))):n.format===2?Ss.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(Ng("rangeRecord",n.ranges,function(e){return[{name:"startGlyphID",type:"USHORT",value:e.start},{name:"endGlyphID",type:"USHORT",value:e.end},{name:"startCoverageIndex",type:"USHORT",value:e.index}]}))):Nn.assert(!1,"Coverage format must be 1 or 2.")}u2.prototype=Object.create(Ss.prototype);u2.prototype.constructor=u2;function c2(n){Ss.call(this,"scriptListTable",Ng("scriptRecord",n,function(e,t){var r=e.script,i=r.defaultLangSys;return Nn.assert(!!i,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new Ss("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Ss("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:i.reqFeatureIndex}].concat(kg("featureIndex",i.featureIndexes)))}].concat(Ng("langSys",r.langSysRecords,function(s,o){var a=s.langSys;return[{name:"langSysTag"+o,type:"TAG",value:s.tag},{name:"langSys"+o,type:"TABLE",value:new Ss("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:a.reqFeatureIndex}].concat(kg("featureIndex",a.featureIndexes)))}]})))}]}))}c2.prototype=Object.create(Ss.prototype);c2.prototype.constructor=c2;function h2(n){Ss.call(this,"featureListTable",Ng("featureRecord",n,function(e,t){var r=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new Ss("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(kg("lookupListIndex",r.lookupListIndexes)))}]}))}h2.prototype=Object.create(Ss.prototype);h2.prototype.constructor=h2;function f2(n,e){Ss.call(this,"lookupListTable",C5("lookup",n,function(t){var r=e[t.lookupType];return Nn.assert(!!r,"Unable to write GSUB lookup type "+t.lookupType+" tables."),new Ss("lookupTable",[{name:"lookupType",type:"USHORT",value:t.lookupType},{name:"lookupFlag",type:"USHORT",value:t.lookupFlag}].concat(C5("subtable",t.subtables,r)))}))}f2.prototype=Object.create(Ss.prototype);f2.prototype.constructor=f2;var tn={Table:Ss,Record:Ss,Coverage:u2,ScriptList:c2,FeatureList:h2,LookupList:f2,ushortList:kg,tableList:C5,recordList:Ng};function jT(n,e){return n.getUint8(e)}function d2(n,e){return n.getUint16(e,!1)}function bj(n,e){return n.getInt16(e,!1)}function G3(n,e){return n.getUint32(e,!1)}function CN(n,e){var t=n.getInt16(e,!1),r=n.getUint16(e+2,!1);return t+r/65535}function Mj(n,e){for(var t="",r=e;r<e+4;r+=1)t+=String.fromCharCode(n.getInt8(r));return t}function Ej(n,e,t){for(var r=0,i=0;i<t;i+=1)r<<=8,r+=n.getUint8(e+i);return r}function Aj(n,e,t){for(var r=[],i=e;i<t;i+=1)r.push(n.getUint8(i));return r}function Tj(n){for(var e="",t=0;t<n.length;t+=1)e+=String.fromCharCode(n[t]);return e}var Cj={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function lt(n,e){this.data=n,this.offset=e,this.relativeOffset=0}lt.prototype.parseByte=function(){var n=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,n};lt.prototype.parseChar=function(){var n=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,n};lt.prototype.parseCard8=lt.prototype.parseByte;lt.prototype.parseUShort=function(){var n=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,n};lt.prototype.parseCard16=lt.prototype.parseUShort;lt.prototype.parseSID=lt.prototype.parseUShort;lt.prototype.parseOffset16=lt.prototype.parseUShort;lt.prototype.parseShort=function(){var n=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,n};lt.prototype.parseF2Dot14=function(){var n=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,n};lt.prototype.parseULong=function(){var n=G3(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,n};lt.prototype.parseOffset32=lt.prototype.parseULong;lt.prototype.parseFixed=function(){var n=CN(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,n};lt.prototype.parseString=function(n){var e=this.data,t=this.offset+this.relativeOffset,r="";this.relativeOffset+=n;for(var i=0;i<n;i++)r+=String.fromCharCode(e.getUint8(t+i));return r};lt.prototype.parseTag=function(){return this.parseString(4)};lt.prototype.parseLongDateTime=function(){var n=G3(this.data,this.offset+this.relativeOffset+4);return n-=2082844800,this.relativeOffset+=8,n};lt.prototype.parseVersion=function(n){var e=d2(this.data,this.offset+this.relativeOffset),t=d2(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,n===void 0&&(n=4096),e+t/n/10};lt.prototype.skip=function(n,e){e===void 0&&(e=1),this.relativeOffset+=Cj[n]*e};lt.prototype.parseULongList=function(n){n===void 0&&(n=this.parseULong());for(var e=new Array(n),t=this.data,r=this.offset+this.relativeOffset,i=0;i<n;i++)e[i]=t.getUint32(r),r+=4;return this.relativeOffset+=n*4,e};lt.prototype.parseOffset16List=lt.prototype.parseUShortList=function(n){n===void 0&&(n=this.parseUShort());for(var e=new Array(n),t=this.data,r=this.offset+this.relativeOffset,i=0;i<n;i++)e[i]=t.getUint16(r),r+=2;return this.relativeOffset+=n*2,e};lt.prototype.parseShortList=function(n){for(var e=new Array(n),t=this.data,r=this.offset+this.relativeOffset,i=0;i<n;i++)e[i]=t.getInt16(r),r+=2;return this.relativeOffset+=n*2,e};lt.prototype.parseByteList=function(n){for(var e=new Array(n),t=this.data,r=this.offset+this.relativeOffset,i=0;i<n;i++)e[i]=t.getUint8(r++);return this.relativeOffset+=n,e};lt.prototype.parseList=function(n,e){e||(e=n,n=this.parseUShort());for(var t=new Array(n),r=0;r<n;r++)t[r]=e.call(this);return t};lt.prototype.parseList32=function(n,e){e||(e=n,n=this.parseULong());for(var t=new Array(n),r=0;r<n;r++)t[r]=e.call(this);return t};lt.prototype.parseRecordList=function(n,e){e||(e=n,n=this.parseUShort());for(var t=new Array(n),r=Object.keys(e),i=0;i<n;i++){for(var s={},o=0;o<r.length;o++){var a=r[o],l=e[a];s[a]=l.call(this)}t[i]=s}return t};lt.prototype.parseRecordList32=function(n,e){e||(e=n,n=this.parseULong());for(var t=new Array(n),r=Object.keys(e),i=0;i<n;i++){for(var s={},o=0;o<r.length;o++){var a=r[o],l=e[a];s[a]=l.call(this)}t[i]=s}return t};lt.prototype.parseStruct=function(n){if(typeof n=="function")return n.call(this);for(var e=Object.keys(n),t={},r=0;r<e.length;r++){var i=e[r],s=n[i];t[i]=s.call(this)}return t};lt.prototype.parseValueRecord=function(n){if(n===void 0&&(n=this.parseUShort()),n!==0){var e={};return n&1&&(e.xPlacement=this.parseShort()),n&2&&(e.yPlacement=this.parseShort()),n&4&&(e.xAdvance=this.parseShort()),n&8&&(e.yAdvance=this.parseShort()),n&16&&(e.xPlaDevice=void 0,this.parseShort()),n&32&&(e.yPlaDevice=void 0,this.parseShort()),n&64&&(e.xAdvDevice=void 0,this.parseShort()),n&128&&(e.yAdvDevice=void 0,this.parseShort()),e}};lt.prototype.parseValueRecordList=function(){for(var n=this.parseUShort(),e=this.parseUShort(),t=new Array(e),r=0;r<e;r++)t[r]=this.parseValueRecord(n);return t};lt.prototype.parsePointer=function(n){var e=this.parseOffset16();if(e>0)return new lt(this.data,this.offset+e).parseStruct(n)};lt.prototype.parsePointer32=function(n){var e=this.parseOffset32();if(e>0)return new lt(this.data,this.offset+e).parseStruct(n)};lt.prototype.parseListOfLists=function(n){for(var e=this.parseOffset16List(),t=e.length,r=this.relativeOffset,i=new Array(t),s=0;s<t;s++){var o=e[s];if(o===0){i[s]=void 0;continue}if(this.relativeOffset=o,n){for(var a=this.parseOffset16List(),l=new Array(a.length),u=0;u<a.length;u++)this.relativeOffset=o+a[u],l[u]=n.call(this);i[s]=l}else i[s]=this.parseUShortList()}return this.relativeOffset=r,i};lt.prototype.parseCoverage=function(){var n=this.offset+this.relativeOffset,e=this.parseUShort(),t=this.parseUShort();if(e===1)return{format:1,glyphs:this.parseUShortList(t)};if(e===2){for(var r=new Array(t),i=0;i<t;i++)r[i]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}}throw new Error("0x"+n.toString(16)+": Coverage format must be 1 or 2.")};lt.prototype.parseClassDef=function(){var n=this.offset+this.relativeOffset,e=this.parseUShort();if(e===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(e===2)return{format:2,ranges:this.parseRecordList({start:lt.uShort,end:lt.uShort,classId:lt.uShort})};throw new Error("0x"+n.toString(16)+": ClassDef format must be 1 or 2.")};lt.list=function(n,e){return function(){return this.parseList(n,e)}};lt.list32=function(n,e){return function(){return this.parseList32(n,e)}};lt.recordList=function(n,e){return function(){return this.parseRecordList(n,e)}};lt.recordList32=function(n,e){return function(){return this.parseRecordList32(n,e)}};lt.pointer=function(n){return function(){return this.parsePointer(n)}};lt.pointer32=function(n){return function(){return this.parsePointer32(n)}};lt.tag=lt.prototype.parseTag;lt.byte=lt.prototype.parseByte;lt.uShort=lt.offset16=lt.prototype.parseUShort;lt.uShortList=lt.prototype.parseUShortList;lt.uLong=lt.offset32=lt.prototype.parseULong;lt.uLongList=lt.prototype.parseULongList;lt.struct=lt.prototype.parseStruct;lt.coverage=lt.prototype.parseCoverage;lt.classDef=lt.prototype.parseClassDef;var qT={reserved:lt.uShort,reqFeatureIndex:lt.uShort,featureIndexes:lt.uShortList};lt.prototype.parseScriptList=function(){return this.parsePointer(lt.recordList({tag:lt.tag,script:lt.pointer({defaultLangSys:lt.pointer(qT),langSysRecords:lt.recordList({tag:lt.tag,langSys:lt.pointer(qT)})})}))||[]};lt.prototype.parseFeatureList=function(){return this.parsePointer(lt.recordList({tag:lt.tag,feature:lt.pointer({featureParams:lt.offset16,lookupListIndexes:lt.uShortList})}))||[]};lt.prototype.parseLookupList=function(n){return this.parsePointer(lt.list(lt.pointer(function(){var e=this.parseUShort();Nn.argument(1<=e&&e<=9,"GPOS/GSUB lookup type "+e+" unknown.");var t=this.parseUShort(),r=t&16;return{lookupType:e,lookupFlag:t,subtables:this.parseList(lt.pointer(n[e])),markFilteringSet:r?this.parseUShort():void 0}})))||[]};lt.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var n=this.parseUShort(),e=this.parseUShort();Nn.argument(n===1&&e<1,"GPOS/GSUB feature variations table unknown.");var t=this.parseRecordList32({conditionSetOffset:lt.offset32,featureTableSubstitutionOffset:lt.offset32});return t})||[]};var Bn={getByte:jT,getCard8:jT,getUShort:d2,getCard16:d2,getShort:bj,getULong:G3,getFixed:CN,getTag:Mj,getOffset:Ej,getBytes:Aj,bytesToString:Tj,Parser:lt};function Lj(n,e){e.parseUShort(),n.length=e.parseULong(),n.language=e.parseULong();var t;n.groupCount=t=e.parseULong(),n.glyphIndexMap={};for(var r=0;r<t;r+=1)for(var i=e.parseULong(),s=e.parseULong(),o=e.parseULong(),a=i;a<=s;a+=1)n.glyphIndexMap[a]=o,o++}function Pj(n,e,t,r,i){n.length=e.parseUShort(),n.language=e.parseUShort();var s;n.segCount=s=e.parseUShort()>>1,e.skip("uShort",3),n.glyphIndexMap={};for(var o=new Bn.Parser(t,r+i+14),a=new Bn.Parser(t,r+i+16+s*2),l=new Bn.Parser(t,r+i+16+s*4),u=new Bn.Parser(t,r+i+16+s*6),c=r+i+16+s*8,h=0;h<s-1;h+=1)for(var d=void 0,m=o.parseUShort(),v=a.parseUShort(),w=l.parseShort(),x=u.parseUShort(),g=v;g<=m;g+=1)x!==0?(c=u.offset+u.relativeOffset-2,c+=x,c+=(g-v)*2,d=Bn.getUShort(t,c),d!==0&&(d=d+w&65535)):d=g+w&65535,n.glyphIndexMap[g]=d}function Rj(n,e){var t={};t.version=Bn.getUShort(n,e),Nn.argument(t.version===0,"cmap table version should be 0."),t.numTables=Bn.getUShort(n,e+2);for(var r=-1,i=t.numTables-1;i>=0;i-=1){var s=Bn.getUShort(n,e+4+i*8),o=Bn.getUShort(n,e+4+i*8+2);if(s===3&&(o===0||o===1||o===10)||s===0&&(o===0||o===1||o===2||o===3||o===4)){r=Bn.getULong(n,e+4+i*8+4);break}}if(r===-1)throw new Error("No valid cmap sub-tables found.");var a=new Bn.Parser(n,e+r);if(t.format=a.parseUShort(),t.format===12)Lj(t,a);else if(t.format===4)Pj(t,a,n,e,r);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+t.format+").");return t}function kj(n,e,t){n.segments.push({end:e,start:e,delta:-(e-t),offset:0,glyphIndex:t})}function Nj(n){n.segments.push({end:65535,start:65535,delta:1,offset:0})}function Ij(n){var e=!0,t;for(t=n.length-1;t>0;t-=1){var r=n.get(t);if(r.unicode>65535){console.log("Adding CMAP format 12 (needed!)"),e=!1;break}}var i=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:e?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:e?12:12+8}];e||(i=i.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),i=i.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var s=new tn.Table("cmap",i);for(s.segments=[],t=0;t<n.length;t+=1){for(var o=n.get(t),a=0;a<o.unicodes.length;a+=1)kj(s,o.unicodes[a],t);s.segments=s.segments.sort(function(S,_){return S.start-_.start})}Nj(s);var l=s.segments.length,u=0,c=[],h=[],d=[],m=[],v=[],w=[];for(t=0;t<l;t+=1){var x=s.segments[t];x.end<=65535&&x.start<=65535?(c=c.concat({name:"end_"+t,type:"USHORT",value:x.end}),h=h.concat({name:"start_"+t,type:"USHORT",value:x.start}),d=d.concat({name:"idDelta_"+t,type:"SHORT",value:x.delta}),m=m.concat({name:"idRangeOffset_"+t,type:"USHORT",value:x.offset}),x.glyphId!==void 0&&(v=v.concat({name:"glyph_"+t,type:"USHORT",value:x.glyphId}))):u+=1,!e&&x.glyphIndex!==void 0&&(w=w.concat({name:"cmap12Start_"+t,type:"ULONG",value:x.start}),w=w.concat({name:"cmap12End_"+t,type:"ULONG",value:x.end}),w=w.concat({name:"cmap12Glyph_"+t,type:"ULONG",value:x.glyphIndex}))}if(s.segCountX2=(l-u)*2,s.searchRange=Math.pow(2,Math.floor(Math.log(l-u)/Math.log(2)))*2,s.entrySelector=Math.log(s.searchRange/2)/Math.log(2),s.rangeShift=s.segCountX2-s.searchRange,s.fields=s.fields.concat(c),s.fields.push({name:"reservedPad",type:"USHORT",value:0}),s.fields=s.fields.concat(h),s.fields=s.fields.concat(d),s.fields=s.fields.concat(m),s.fields=s.fields.concat(v),s.cmap4Length=14+c.length*2+2+h.length*2+d.length*2+m.length*2+v.length*2,!e){var g=16+w.length*4;s.cmap12Offset=12+2*2+4+s.cmap4Length,s.fields=s.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:g},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:w.length/3}]),s.fields=s.fields.concat(w)}return s}var Dj={parse:Rj,make:Ij},My=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],Oj=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],Fj=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],XT=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function LN(n){this.font=n}LN.prototype.charToGlyphIndex=function(n){var e=n.codePointAt(0),t=this.font.glyphs;if(t){for(var r=0;r<t.length;r+=1)for(var i=t.get(r),s=0;s<i.unicodes.length;s+=1)if(i.unicodes[s]===e)return r}return null};function p2(n,e){this.encoding=n,this.charset=e}p2.prototype.charToGlyphIndex=function(n){var e=n.codePointAt(0),t=this.encoding[e];return this.charset.indexOf(t)};function Uj(n,e,t,r,i){n.beginPath(),n.moveTo(e,t),n.lineTo(r,i),n.stroke()}var hf={line:Uj};function Bj(n,e){var t=e||new rs;return{configurable:!0,get:function(){return typeof t=="function"&&(t=t()),t},set:function(r){t=r}}}function za(n){this.bindConstructorValues(n)}za.prototype.bindConstructorValues=function(n){this.index=n.index||0,this.name=n.name||null,this.unicode=n.unicode||void 0,this.unicodes=n.unicodes||n.unicode!==void 0?[n.unicode]:[],"xMin"in n&&(this.xMin=n.xMin),"yMin"in n&&(this.yMin=n.yMin),"xMax"in n&&(this.xMax=n.xMax),"yMax"in n&&(this.yMax=n.yMax),"advanceWidth"in n&&(this.advanceWidth=n.advanceWidth),Object.defineProperty(this,"path",Bj(this,n.path))};za.prototype.addUnicode=function(n){this.unicodes.length===0&&(this.unicode=n),this.unicodes.push(n)};za.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};za.prototype.getPath=function(n,e,t,r,i){n=n!==void 0?n:0,e=e!==void 0?e:0,t=t!==void 0?t:72;var s,o;r||(r={});var a=r.xScale,l=r.yScale;if(r.hinting&&i&&i.hinting&&(o=this.path&&i.hinting.exec(this,t)),o)s=i.hinting.getCommands(o),n=Math.round(n),e=Math.round(e),a=l=1;else{s=this.path.commands;var u=1/(this.path.unitsPerEm||1e3)*t;a===void 0&&(a=u),l===void 0&&(l=u)}for(var c=new rs,h=0;h<s.length;h+=1){var d=s[h];d.type==="M"?c.moveTo(n+d.x*a,e+-d.y*l):d.type==="L"?c.lineTo(n+d.x*a,e+-d.y*l):d.type==="Q"?c.quadraticCurveTo(n+d.x1*a,e+-d.y1*l,n+d.x*a,e+-d.y*l):d.type==="C"?c.curveTo(n+d.x1*a,e+-d.y1*l,n+d.x2*a,e+-d.y2*l,n+d.x*a,e+-d.y*l):d.type==="Z"&&c.closePath()}return c};za.prototype.getContours=function(){if(this.points===void 0)return[];for(var n=[],e=[],t=0;t<this.points.length;t+=1){var r=this.points[t];e.push(r),r.lastPointOfContour&&(n.push(e),e=[])}return Nn.argument(e.length===0,"There are still points left in the current contour."),n};za.prototype.getMetrics=function(){for(var n=this.path.commands,e=[],t=[],r=0;r<n.length;r+=1){var i=n[r];i.type!=="Z"&&(e.push(i.x),t.push(i.y)),(i.type==="Q"||i.type==="C")&&(e.push(i.x1),t.push(i.y1)),i.type==="C"&&(e.push(i.x2),t.push(i.y2))}var s={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,t),xMax:Math.max.apply(null,e),yMax:Math.max.apply(null,t),leftSideBearing:this.leftSideBearing};return isFinite(s.xMin)||(s.xMin=0),isFinite(s.xMax)||(s.xMax=this.advanceWidth),isFinite(s.yMin)||(s.yMin=0),isFinite(s.yMax)||(s.yMax=0),s.rightSideBearing=this.advanceWidth-s.leftSideBearing-(s.xMax-s.xMin),s};za.prototype.draw=function(n,e,t,r,i){this.getPath(e,t,r,i).draw(n)};za.prototype.drawPoints=function(n,e,t,r){function i(h,d,m,v){n.beginPath();for(var w=0;w<h.length;w+=1)n.moveTo(d+h[w].x*v,m+h[w].y*v),n.arc(d+h[w].x*v,m+h[w].y*v,2,0,Math.PI*2,!1);n.closePath(),n.fill()}e=e!==void 0?e:0,t=t!==void 0?t:0,r=r!==void 0?r:24;for(var s=1/this.path.unitsPerEm*r,o=[],a=[],l=this.path,u=0;u<l.commands.length;u+=1){var c=l.commands[u];c.x!==void 0&&o.push({x:c.x,y:-c.y}),c.x1!==void 0&&a.push({x:c.x1,y:-c.y1}),c.x2!==void 0&&a.push({x:c.x2,y:-c.y2})}n.fillStyle="blue",i(o,e,t,s),n.fillStyle="red",i(a,e,t,s)};za.prototype.drawMetrics=function(n,e,t,r){var i;e=e!==void 0?e:0,t=t!==void 0?t:0,r=r!==void 0?r:24,i=1/this.path.unitsPerEm*r,n.lineWidth=1,n.strokeStyle="black",hf.line(n,e,-1e4,e,1e4),hf.line(n,-1e4,t,1e4,t);var s=this.xMin||0,o=this.yMin||0,a=this.xMax||0,l=this.yMax||0,u=this.advanceWidth||0;n.strokeStyle="blue",hf.line(n,e+s*i,-1e4,e+s*i,1e4),hf.line(n,e+a*i,-1e4,e+a*i,1e4),hf.line(n,-1e4,t+-o*i,1e4,t+-o*i),hf.line(n,-1e4,t+-l*i,1e4,t+-l*i),n.strokeStyle="green",hf.line(n,e+u*i,-1e4,e+u*i,1e4)};function qv(n,e,t){Object.defineProperty(n,e,{get:function(){return n.path,n[t]},set:function(r){n[t]=r},enumerable:!0,configurable:!0})}function V3(n,e){if(this.font=n,this.glyphs={},Array.isArray(e))for(var t=0;t<e.length;t++){var r=e[t];r.path.unitsPerEm=n.unitsPerEm,this.glyphs[t]=r}this.length=e&&e.length||0}V3.prototype.get=function(n){if(this.glyphs[n]===void 0){this.font._push(n),typeof this.glyphs[n]=="function"&&(this.glyphs[n]=this.glyphs[n]());var e=this.glyphs[n],t=this.font._IndexToUnicodeMap[n];if(t)for(var r=0;r<t.unicodes.length;r++)e.addUnicode(t.unicodes[r]);this.font.cffEncoding?this.font.isCIDFont?e.name="gid"+n:e.name=this.font.cffEncoding.charset[n]:this.font.glyphNames.names&&(e.name=this.font.glyphNames.glyphIndexToName(n)),this.glyphs[n].advanceWidth=this.font._hmtxTableData[n].advanceWidth,this.glyphs[n].leftSideBearing=this.font._hmtxTableData[n].leftSideBearing}else typeof this.glyphs[n]=="function"&&(this.glyphs[n]=this.glyphs[n]());return this.glyphs[n]};V3.prototype.push=function(n,e){this.glyphs[n]=e,this.length++};function zj(n,e){return new za({index:e,font:n})}function Hj(n,e,t,r,i,s){return function(){var o=new za({index:e,font:n});return o.path=function(){t(o,r,i);var a=s(n.glyphs,o);return a.unitsPerEm=n.unitsPerEm,a},qv(o,"xMin","_xMin"),qv(o,"xMax","_xMax"),qv(o,"yMin","_yMin"),qv(o,"yMax","_yMax"),o}}function Gj(n,e,t,r){return function(){var i=new za({index:e,font:n});return i.path=function(){var s=t(n,i,r);return s.unitsPerEm=n.unitsPerEm,s},i}}var tu={GlyphSet:V3,glyphLoader:zj,ttfGlyphLoader:Hj,cffGlyphLoader:Gj};function PN(n,e){if(n===e)return!0;if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t+=1)if(!PN(n[t],e[t]))return!1;return!0}else return!1}function L5(n){var e;return n.length<1240?e=107:n.length<33900?e=1131:e=32768,e}function qc(n,e,t){var r=[],i=[],s=Bn.getCard16(n,e),o,a;if(s!==0){var l=Bn.getByte(n,e+2);o=e+(s+1)*l+2;for(var u=e+3,c=0;c<s+1;c+=1)r.push(Bn.getOffset(n,u,l)),u+=l;a=o+r[s]}else a=e+2;for(var h=0;h<r.length-1;h+=1){var d=Bn.getBytes(n,o+r[h],o+r[h+1]);t&&(d=t(d)),i.push(d)}return{objects:i,startOffset:e,endOffset:a}}function Vj(n,e){var t=[],r=Bn.getCard16(n,e),i,s;if(r!==0){var o=Bn.getByte(n,e+2);i=e+(r+1)*o+2;for(var a=e+3,l=0;l<r+1;l+=1)t.push(Bn.getOffset(n,a,o)),a+=o;s=i+t[r]}else s=e+2;return{offsets:t,startOffset:e,endOffset:s}}function Wj(n,e,t,r,i){var s=Bn.getCard16(t,r),o=0;if(s!==0){var a=Bn.getByte(t,r+2);o=r+(s+1)*a+2}var l=Bn.getBytes(t,o+e[n],o+e[n+1]);return i&&(l=i(l)),l}function jj(n){for(var e="",t=15,r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var i=n.parseByte(),s=i>>4,o=i&15;if(s===t||(e+=r[s],o===t))break;e+=r[o]}return parseFloat(e)}function qj(n,e){var t,r,i,s;if(e===28)return t=n.parseByte(),r=n.parseByte(),t<<8|r;if(e===29)return t=n.parseByte(),r=n.parseByte(),i=n.parseByte(),s=n.parseByte(),t<<24|r<<16|i<<8|s;if(e===30)return jj(n);if(e>=32&&e<=246)return e-139;if(e>=247&&e<=250)return t=n.parseByte(),(e-247)*256+t+108;if(e>=251&&e<=254)return t=n.parseByte(),-(e-251)*256-t-108;throw new Error("Invalid b0 "+e)}function Xj(n){for(var e={},t=0;t<n.length;t+=1){var r=n[t][0],i=n[t][1],s=void 0;if(i.length===1?s=i[0]:s=i,e.hasOwnProperty(r)&&!isNaN(e[r]))throw new Error("Object "+e+" already has key "+r);e[r]=s}return e}function RN(n,e,t){e=e!==void 0?e:0;var r=new Bn.Parser(n,e),i=[],s=[];for(t=t!==void 0?t:n.length;r.relativeOffset<t;){var o=r.parseByte();o<=21?(o===12&&(o=1200+r.parseByte()),i.push([o,s]),s=[]):s.push(qj(r,o))}return Xj(i)}function G0(n,e){return e<=390?e=My[e]:e=n[e-391],e}function kN(n,e,t){for(var r={},i,s=0;s<e.length;s+=1){var o=e[s];if(Array.isArray(o.type)){var a=[];a.length=o.type.length;for(var l=0;l<o.type.length;l++)i=n[o.op]!==void 0?n[o.op][l]:void 0,i===void 0&&(i=o.value!==void 0&&o.value[l]!==void 0?o.value[l]:null),o.type[l]==="SID"&&(i=G0(t,i)),a[l]=i;r[o.name]=a}else i=n[o.op],i===void 0&&(i=o.value!==void 0?o.value:null),o.type==="SID"&&(i=G0(t,i)),r[o.name]=i}return r}function Yj(n,e){var t={};return t.formatMajor=Bn.getCard8(n,e),t.formatMinor=Bn.getCard8(n,e+1),t.size=Bn.getCard8(n,e+2),t.offsetSize=Bn.getCard8(n,e+3),t.startOffset=e,t.endOffset=e+4,t}var NN=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],IN=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function $j(n,e){var t=RN(n,0,n.byteLength);return kN(t,NN,e)}function DN(n,e,t,r){var i=RN(n,e,t);return kN(i,IN,r)}function YT(n,e,t,r){for(var i=[],s=0;s<t.length;s+=1){var o=new DataView(new Uint8Array(t[s]).buffer),a=$j(o,r);a._subrs=[],a._subrsBias=0,a._defaultWidthX=0,a._nominalWidthX=0;var l=a.private[0],u=a.private[1];if(l!==0&&u!==0){var c=DN(n,u+e,l,r);if(a._defaultWidthX=c.defaultWidthX,a._nominalWidthX=c.nominalWidthX,c.subrs!==0){var h=u+c.subrs,d=qc(n,h+e);a._subrs=d.objects,a._subrsBias=L5(a._subrs)}a._privateDict=c}i.push(a)}return i}function Zj(n,e,t,r){var i,s,o=new Bn.Parser(n,e);t-=1;var a=[".notdef"],l=o.parseCard8();if(l===0)for(var u=0;u<t;u+=1)i=o.parseSID(),a.push(G0(r,i));else if(l===1)for(;a.length<=t;){i=o.parseSID(),s=o.parseCard8();for(var c=0;c<=s;c+=1)a.push(G0(r,i)),i+=1}else if(l===2)for(;a.length<=t;){i=o.parseSID(),s=o.parseCard16();for(var h=0;h<=s;h+=1)a.push(G0(r,i)),i+=1}else throw new Error("Unknown charset format "+l);return a}function Kj(n,e,t){var r,i={},s=new Bn.Parser(n,e),o=s.parseCard8();if(o===0)for(var a=s.parseCard8(),l=0;l<a;l+=1)r=s.parseCard8(),i[r]=l;else if(o===1){var u=s.parseCard8();r=1;for(var c=0;c<u;c+=1)for(var h=s.parseCard8(),d=s.parseCard8(),m=h;m<=h+d;m+=1)i[m]=r,r+=1}else throw new Error("Unknown encoding format "+o);return new p2(i,t)}function $T(n,e,t){var r,i,s,o,a=new rs,l=[],u=0,c=!1,h=!1,d=0,m=0,v,w,x,g;if(n.isCIDFont){var S=n.tables.cff.topDict._fdSelect[e.index],_=n.tables.cff.topDict._fdArray[S];v=_._subrs,w=_._subrsBias,x=_._defaultWidthX,g=_._nominalWidthX}else v=n.tables.cff.topDict._subrs,w=n.tables.cff.topDict._subrsBias,x=n.tables.cff.topDict._defaultWidthX,g=n.tables.cff.topDict._nominalWidthX;var T=x;function L(k,R){h&&a.closePath(),a.moveTo(k,R),h=!0}function P(){var k;k=l.length%2!==0,k&&!c&&(T=l.shift()+g),u+=l.length>>1,l.length=0,c=!0}function N(k){for(var R,U,F,z,V,G,J,ie,ce,W,Y,$,oe=0;oe<k.length;){var D=k[oe];switch(oe+=1,D){case 1:P();break;case 3:P();break;case 4:l.length>1&&!c&&(T=l.shift()+g,c=!0),m+=l.pop(),L(d,m);break;case 5:for(;l.length>0;)d+=l.shift(),m+=l.shift(),a.lineTo(d,m);break;case 6:for(;l.length>0&&(d+=l.shift(),a.lineTo(d,m),l.length!==0);)m+=l.shift(),a.lineTo(d,m);break;case 7:for(;l.length>0&&(m+=l.shift(),a.lineTo(d,m),l.length!==0);)d+=l.shift(),a.lineTo(d,m);break;case 8:for(;l.length>0;)r=d+l.shift(),i=m+l.shift(),s=r+l.shift(),o=i+l.shift(),d=s+l.shift(),m=o+l.shift(),a.curveTo(r,i,s,o,d,m);break;case 10:V=l.pop()+w,G=v[V],G&&N(G);break;case 11:return;case 12:switch(D=k[oe],oe+=1,D){case 35:r=d+l.shift(),i=m+l.shift(),s=r+l.shift(),o=i+l.shift(),J=s+l.shift(),ie=o+l.shift(),ce=J+l.shift(),W=ie+l.shift(),Y=ce+l.shift(),$=W+l.shift(),d=Y+l.shift(),m=$+l.shift(),l.shift(),a.curveTo(r,i,s,o,J,ie),a.curveTo(ce,W,Y,$,d,m);break;case 34:r=d+l.shift(),i=m,s=r+l.shift(),o=i+l.shift(),J=s+l.shift(),ie=o,ce=J+l.shift(),W=o,Y=ce+l.shift(),$=m,d=Y+l.shift(),a.curveTo(r,i,s,o,J,ie),a.curveTo(ce,W,Y,$,d,m);break;case 36:r=d+l.shift(),i=m+l.shift(),s=r+l.shift(),o=i+l.shift(),J=s+l.shift(),ie=o,ce=J+l.shift(),W=o,Y=ce+l.shift(),$=W+l.shift(),d=Y+l.shift(),a.curveTo(r,i,s,o,J,ie),a.curveTo(ce,W,Y,$,d,m);break;case 37:r=d+l.shift(),i=m+l.shift(),s=r+l.shift(),o=i+l.shift(),J=s+l.shift(),ie=o+l.shift(),ce=J+l.shift(),W=ie+l.shift(),Y=ce+l.shift(),$=W+l.shift(),Math.abs(Y-d)>Math.abs($-m)?d=Y+l.shift():m=$+l.shift(),a.curveTo(r,i,s,o,J,ie),a.curveTo(ce,W,Y,$,d,m);break;default:console.log("Glyph "+e.index+": unknown operator "+1200+D),l.length=0}break;case 14:l.length>0&&!c&&(T=l.shift()+g,c=!0),h&&(a.closePath(),h=!1);break;case 18:P();break;case 19:case 20:P(),oe+=u+7>>3;break;case 21:l.length>2&&!c&&(T=l.shift()+g,c=!0),m+=l.pop(),d+=l.pop(),L(d,m);break;case 22:l.length>1&&!c&&(T=l.shift()+g,c=!0),d+=l.pop(),L(d,m);break;case 23:P();break;case 24:for(;l.length>2;)r=d+l.shift(),i=m+l.shift(),s=r+l.shift(),o=i+l.shift(),d=s+l.shift(),m=o+l.shift(),a.curveTo(r,i,s,o,d,m);d+=l.shift(),m+=l.shift(),a.lineTo(d,m);break;case 25:for(;l.length>6;)d+=l.shift(),m+=l.shift(),a.lineTo(d,m);r=d+l.shift(),i=m+l.shift(),s=r+l.shift(),o=i+l.shift(),d=s+l.shift(),m=o+l.shift(),a.curveTo(r,i,s,o,d,m);break;case 26:for(l.length%2&&(d+=l.shift());l.length>0;)r=d,i=m+l.shift(),s=r+l.shift(),o=i+l.shift(),d=s,m=o+l.shift(),a.curveTo(r,i,s,o,d,m);break;case 27:for(l.length%2&&(m+=l.shift());l.length>0;)r=d+l.shift(),i=m,s=r+l.shift(),o=i+l.shift(),d=s+l.shift(),m=o,a.curveTo(r,i,s,o,d,m);break;case 28:R=k[oe],U=k[oe+1],l.push((R<<24|U<<16)>>16),oe+=2;break;case 29:V=l.pop()+n.gsubrsBias,G=n.gsubrs[V],G&&N(G);break;case 30:for(;l.length>0&&(r=d,i=m+l.shift(),s=r+l.shift(),o=i+l.shift(),d=s+l.shift(),m=o+(l.length===1?l.shift():0),a.curveTo(r,i,s,o,d,m),l.length!==0);)r=d+l.shift(),i=m,s=r+l.shift(),o=i+l.shift(),m=o+l.shift(),d=s+(l.length===1?l.shift():0),a.curveTo(r,i,s,o,d,m);break;case 31:for(;l.length>0&&(r=d+l.shift(),i=m,s=r+l.shift(),o=i+l.shift(),m=o+l.shift(),d=s+(l.length===1?l.shift():0),a.curveTo(r,i,s,o,d,m),l.length!==0);)r=d,i=m+l.shift(),s=r+l.shift(),o=i+l.shift(),d=s+l.shift(),m=o+(l.length===1?l.shift():0),a.curveTo(r,i,s,o,d,m);break;default:D<32?console.log("Glyph "+e.index+": unknown operator "+D):D<247?l.push(D-139):D<251?(R=k[oe],oe+=1,l.push((D-247)*256+R+108)):D<255?(R=k[oe],oe+=1,l.push(-(D-251)*256-R-108)):(R=k[oe],U=k[oe+1],F=k[oe+2],z=k[oe+3],oe+=4,l.push((R<<24|U<<16|F<<8|z)/65536))}}}return N(t),e.advanceWidth=T,a}function Jj(n,e,t,r){var i=[],s,o=new Bn.Parser(n,e),a=o.parseCard8();if(a===0)for(var l=0;l<t;l++){if(s=o.parseCard8(),s>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+r+")");i.push(s)}else if(a===3){var u=o.parseCard16(),c=o.parseCard16();if(c!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+c);for(var h,d=0;d<u;d++){if(s=o.parseCard8(),h=o.parseCard16(),s>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+r+")");if(h>t)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+h);for(;c<h;c++)i.push(s);c=h}if(h!==t)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+h)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+a);return i}function Qj(n,e,t,r){t.tables.cff={};var i=Yj(n,e),s=qc(n,i.endOffset,Bn.bytesToString),o=qc(n,s.endOffset),a=qc(n,o.endOffset,Bn.bytesToString),l=qc(n,a.endOffset);t.gsubrs=l.objects,t.gsubrsBias=L5(t.gsubrs);var u=YT(n,e,o.objects,a.objects);if(u.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+u.length);var c=u[0];if(t.tables.cff.topDict=c,c._privateDict&&(t.defaultWidthX=c._privateDict.defaultWidthX,t.nominalWidthX=c._privateDict.nominalWidthX),c.ros[0]!==void 0&&c.ros[1]!==void 0&&(t.isCIDFont=!0),t.isCIDFont){var h=c.fdArray,d=c.fdSelect;if(h===0||d===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");h+=e;var m=qc(n,h),v=YT(n,e,m.objects,a.objects);c._fdArray=v,d+=e,c._fdSelect=Jj(n,d,t.numGlyphs,v.length)}var w=e+c.private[1],x=DN(n,w,c.private[0],a.objects);if(t.defaultWidthX=x.defaultWidthX,t.nominalWidthX=x.nominalWidthX,x.subrs!==0){var g=w+x.subrs,S=qc(n,g);t.subrs=S.objects,t.subrsBias=L5(t.subrs)}else t.subrs=[],t.subrsBias=0;var _;r.lowMemory?(_=Vj(n,e+c.charStrings),t.nGlyphs=_.offsets.length):(_=qc(n,e+c.charStrings),t.nGlyphs=_.objects.length);var T=Zj(n,e+c.charset,t.nGlyphs,a.objects);if(c.encoding===0?t.cffEncoding=new p2(Oj,T):c.encoding===1?t.cffEncoding=new p2(Fj,T):t.cffEncoding=Kj(n,e+c.encoding,T),t.encoding=t.encoding||t.cffEncoding,t.glyphs=new tu.GlyphSet(t),r.lowMemory)t._push=function(N){var k=Wj(N,_.offsets,n,e+c.charStrings);t.glyphs.push(N,tu.cffGlyphLoader(t,N,$T,k))};else for(var L=0;L<t.nGlyphs;L+=1){var P=_.objects[L];t.glyphs.push(L,tu.cffGlyphLoader(t,L,$T,P))}}function ON(n,e){var t,r=My.indexOf(n);return r>=0&&(t=r),r=e.indexOf(n),r>=0?t=r+My.length:(t=My.length+e.length,e.push(n)),t}function eq(){return new tn.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function tq(n){var e=new tn.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);e.names=[];for(var t=0;t<n.length;t+=1)e.names.push({name:"name_"+t,type:"NAME",value:n[t]});return e}function FN(n,e,t){for(var r={},i=0;i<n.length;i+=1){var s=n[i],o=e[s.name];o!==void 0&&!PN(o,s.value)&&(s.type==="SID"&&(o=ON(o,t)),r[s.op]={name:s.name,type:s.type,value:o})}return r}function ZT(n,e){var t=new tn.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return t.dict=FN(NN,n,e),t}function KT(n){var e=new tn.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return e.topDicts=[{name:"topDict_0",type:"TABLE",value:n}],e}function nq(n){var e=new tn.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);e.strings=[];for(var t=0;t<n.length;t+=1)e.strings.push({name:"string_"+t,type:"STRING",value:n[t]});return e}function rq(){return new tn.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function iq(n,e){for(var t=new tn.Record("Charsets",[{name:"format",type:"Card8",value:0}]),r=0;r<n.length;r+=1){var i=n[r],s=ON(i,e);t.fields.push({name:"glyph_"+r,type:"SID",value:s})}return t}function sq(n){var e=[],t=n.path;e.push({name:"width",type:"NUMBER",value:n.advanceWidth});for(var r=0,i=0,s=0;s<t.commands.length;s+=1){var o=void 0,a=void 0,l=t.commands[s];if(l.type==="Q"){var u=.3333333333333333,c=2/3;l={type:"C",x:l.x,y:l.y,x1:Math.round(u*r+c*l.x1),y1:Math.round(u*i+c*l.y1),x2:Math.round(u*l.x+c*l.x1),y2:Math.round(u*l.y+c*l.y1)}}if(l.type==="M")o=Math.round(l.x-r),a=Math.round(l.y-i),e.push({name:"dx",type:"NUMBER",value:o}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(l.x),i=Math.round(l.y);else if(l.type==="L")o=Math.round(l.x-r),a=Math.round(l.y-i),e.push({name:"dx",type:"NUMBER",value:o}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rlineto",type:"OP",value:5}),r=Math.round(l.x),i=Math.round(l.y);else if(l.type==="C"){var h=Math.round(l.x1-r),d=Math.round(l.y1-i),m=Math.round(l.x2-l.x1),v=Math.round(l.y2-l.y1);o=Math.round(l.x-l.x2),a=Math.round(l.y-l.y2),e.push({name:"dx1",type:"NUMBER",value:h}),e.push({name:"dy1",type:"NUMBER",value:d}),e.push({name:"dx2",type:"NUMBER",value:m}),e.push({name:"dy2",type:"NUMBER",value:v}),e.push({name:"dx",type:"NUMBER",value:o}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(l.x),i=Math.round(l.y)}}return e.push({name:"endchar",type:"OP",value:14}),e}function oq(n){for(var e=new tn.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),t=0;t<n.length;t+=1){var r=n.get(t),i=sq(r);e.charStrings.push({name:r.name,type:"CHARSTRING",value:i})}return e}function aq(n,e){var t=new tn.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return t.dict=FN(IN,n,e),t}function lq(n,e){for(var t=new tn.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),r=1/e.unitsPerEm,i={version:e.version,fullName:e.fullName,familyName:e.familyName,weight:e.weightName,fontBBox:e.fontBBox||[0,0,0,0],fontMatrix:[r,0,0,r,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},s={},o=[],a,l=1;l<n.length;l+=1)a=n.get(l),o.push(a.name);var u=[];t.header=eq(),t.nameIndex=tq([e.postScriptName]);var c=ZT(i,u);t.topDictIndex=KT(c),t.globalSubrIndex=rq(),t.charsets=iq(o,u),t.charStringsIndex=oq(n),t.privateDict=aq(s,u),t.stringIndex=nq(u);var h=t.header.sizeOf()+t.nameIndex.sizeOf()+t.topDictIndex.sizeOf()+t.stringIndex.sizeOf()+t.globalSubrIndex.sizeOf();return i.charset=h,i.encoding=0,i.charStrings=i.charset+t.charsets.sizeOf(),i.private[1]=i.charStrings+t.charStringsIndex.sizeOf(),c=ZT(i,u),t.topDictIndex=KT(c),t}var uq={parse:Qj,make:lq};function cq(n,e){var t={},r=new Bn.Parser(n,e);return t.version=r.parseVersion(),t.fontRevision=Math.round(r.parseFixed()*1e3)/1e3,t.checkSumAdjustment=r.parseULong(),t.magicNumber=r.parseULong(),Nn.argument(t.magicNumber===1594834165,"Font header has wrong magic number."),t.flags=r.parseUShort(),t.unitsPerEm=r.parseUShort(),t.created=r.parseLongDateTime(),t.modified=r.parseLongDateTime(),t.xMin=r.parseShort(),t.yMin=r.parseShort(),t.xMax=r.parseShort(),t.yMax=r.parseShort(),t.macStyle=r.parseUShort(),t.lowestRecPPEM=r.parseUShort(),t.fontDirectionHint=r.parseShort(),t.indexToLocFormat=r.parseShort(),t.glyphDataFormat=r.parseShort(),t}function hq(n){var e=Math.round(new Date().getTime()/1e3)+2082844800,t=e;return n.createdTimestamp&&(t=n.createdTimestamp+2082844800),new tn.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:t},{name:"modified",type:"LONGDATETIME",value:e},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],n)}var fq={parse:cq,make:hq};function dq(n,e){var t={},r=new Bn.Parser(n,e);return t.version=r.parseVersion(),t.ascender=r.parseShort(),t.descender=r.parseShort(),t.lineGap=r.parseShort(),t.advanceWidthMax=r.parseUShort(),t.minLeftSideBearing=r.parseShort(),t.minRightSideBearing=r.parseShort(),t.xMaxExtent=r.parseShort(),t.caretSlopeRise=r.parseShort(),t.caretSlopeRun=r.parseShort(),t.caretOffset=r.parseShort(),r.relativeOffset+=8,t.metricDataFormat=r.parseShort(),t.numberOfHMetrics=r.parseUShort(),t}function pq(n){return new tn.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],n)}var mq={parse:dq,make:pq};function gq(n,e,t,r,i){for(var s,o,a=new Bn.Parser(n,e),l=0;l<r;l+=1){l<t&&(s=a.parseUShort(),o=a.parseShort());var u=i.get(l);u.advanceWidth=s,u.leftSideBearing=o}}function vq(n,e,t,r,i){n._hmtxTableData={};for(var s,o,a=new Bn.Parser(e,t),l=0;l<i;l+=1)l<r&&(s=a.parseUShort(),o=a.parseShort()),n._hmtxTableData[l]={advanceWidth:s,leftSideBearing:o}}function yq(n,e,t,r,i,s,o){o.lowMemory?vq(n,e,t,r,i):gq(e,t,r,i,s)}function xq(n){for(var e=new tn.Table("hmtx",[]),t=0;t<n.length;t+=1){var r=n.get(t),i=r.advanceWidth||0,s=r.leftSideBearing||0;e.fields.push({name:"advanceWidth_"+t,type:"USHORT",value:i}),e.fields.push({name:"leftSideBearing_"+t,type:"SHORT",value:s})}return e}var wq={parse:yq,make:xq};function Sq(n){for(var e=new tn.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:n.length}]),t="",r=12+n.length*4,i=0;i<n.length;++i){var s=t.indexOf(n[i]);s<0&&(s=t.length,t+=n[i]),e.fields.push({name:"offset "+i,type:"USHORT",value:r+s}),e.fields.push({name:"length "+i,type:"USHORT",value:n[i].length})}return e.fields.push({name:"stringPool",type:"CHARARRAY",value:t}),e}function _q(n,e){var t=new Bn.Parser(n,e),r=t.parseULong();Nn.argument(r===1,"Unsupported ltag table version."),t.skip("uLong",1);for(var i=t.parseULong(),s=[],o=0;o<i;o++){for(var a="",l=e+t.parseUShort(),u=t.parseUShort(),c=l;c<l+u;++c)a+=String.fromCharCode(n.getInt8(c));s.push(a)}return s}var bq={make:Sq,parse:_q};function Mq(n,e){var t={},r=new Bn.Parser(n,e);return t.version=r.parseVersion(),t.numGlyphs=r.parseUShort(),t.version===1&&(t.maxPoints=r.parseUShort(),t.maxContours=r.parseUShort(),t.maxCompositePoints=r.parseUShort(),t.maxCompositeContours=r.parseUShort(),t.maxZones=r.parseUShort(),t.maxTwilightPoints=r.parseUShort(),t.maxStorage=r.parseUShort(),t.maxFunctionDefs=r.parseUShort(),t.maxInstructionDefs=r.parseUShort(),t.maxStackElements=r.parseUShort(),t.maxSizeOfInstructions=r.parseUShort(),t.maxComponentElements=r.parseUShort(),t.maxComponentDepth=r.parseUShort()),t}function Eq(n){return new tn.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:n}])}var Aq={parse:Mq,make:Eq},UN=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],BN={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},Tq={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},zN={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function Cq(n,e,t){switch(n){case 0:if(e===65535)return"und";if(t)return t[e];break;case 1:return BN[e];case 3:return zN[e]}}var P5="utf-16",Lq={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Pq={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function HN(n,e,t){switch(n){case 0:return P5;case 1:return Pq[t]||Lq[e];case 3:if(e===1||e===10)return P5;break}}function Rq(n,e,t){for(var r={},i=new Bn.Parser(n,e),s=i.parseUShort(),o=i.parseUShort(),a=i.offset+i.parseUShort(),l=0;l<o;l++){var u=i.parseUShort(),c=i.parseUShort(),h=i.parseUShort(),d=i.parseUShort(),m=UN[d]||d,v=i.parseUShort(),w=i.parseUShort(),x=Cq(u,h,t),g=HN(u,c,h);if(g!==void 0&&x!==void 0){var S=void 0;if(g===P5?S=um.UTF16(n,a+w,v):S=um.MACSTRING(n,a+w,v,g),S){var _=r[m];_===void 0&&(_=r[m]={}),_[x]=S}}}return s===1&&i.parseUShort(),r}function mS(n){var e={};for(var t in n)e[n[t]]=parseInt(t);return e}function JT(n,e,t,r,i,s){return new tn.Record("NameRecord",[{name:"platformID",type:"USHORT",value:n},{name:"encodingID",type:"USHORT",value:e},{name:"languageID",type:"USHORT",value:t},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:s}])}function kq(n,e){var t=n.length,r=e.length-t+1;e:for(var i=0;i<r;i++)for(;i<r;i++){for(var s=0;s<t;s++)if(e[i+s]!==n[s])continue e;return i}return-1}function QT(n,e){var t=kq(n,e);if(t<0){t=e.length;for(var r=0,i=n.length;r<i;++r)e.push(n[r])}return t}function Nq(n,e){var t,r=[],i={},s=mS(UN);for(var o in n){var a=s[o];if(a===void 0&&(a=o),t=parseInt(a),isNaN(t))throw new Error('Name table entry "'+o+'" does not exist, see nameTableNames for complete list.');i[t]=n[o],r.push(t)}for(var l=mS(BN),u=mS(zN),c=[],h=[],d=0;d<r.length;d++){t=r[d];var m=i[t];for(var v in m){var w=m[v],x=1,g=l[v],S=Tq[g],_=HN(x,S,g),T=Wt.MACSTRING(w,_);T===void 0&&(x=0,g=e.indexOf(v),g<0&&(g=e.length,e.push(v)),S=4,T=Wt.UTF16(w));var L=QT(T,h);c.push(JT(x,S,g,t,T.length,L));var P=u[v];if(P!==void 0){var N=Wt.UTF16(w),k=QT(N,h);c.push(JT(3,1,P,t,N.length,k))}}}c.sort(function(F,z){return F.platformID-z.platformID||F.encodingID-z.encodingID||F.languageID-z.languageID||F.nameID-z.nameID});for(var R=new tn.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:c.length},{name:"stringOffset",type:"USHORT",value:6+c.length*12}]),U=0;U<c.length;U++)R.fields.push({name:"record_"+U,type:"RECORD",value:c[U]});return R.fields.push({name:"strings",type:"LITERAL",value:h}),R}var Iq={parse:Rq,make:Nq},R5=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function Dq(n){for(var e=0;e<R5.length;e+=1){var t=R5[e];if(n>=t.begin&&n<t.end)return e}return-1}function Oq(n,e){var t={},r=new Bn.Parser(n,e);t.version=r.parseUShort(),t.xAvgCharWidth=r.parseShort(),t.usWeightClass=r.parseUShort(),t.usWidthClass=r.parseUShort(),t.fsType=r.parseUShort(),t.ySubscriptXSize=r.parseShort(),t.ySubscriptYSize=r.parseShort(),t.ySubscriptXOffset=r.parseShort(),t.ySubscriptYOffset=r.parseShort(),t.ySuperscriptXSize=r.parseShort(),t.ySuperscriptYSize=r.parseShort(),t.ySuperscriptXOffset=r.parseShort(),t.ySuperscriptYOffset=r.parseShort(),t.yStrikeoutSize=r.parseShort(),t.yStrikeoutPosition=r.parseShort(),t.sFamilyClass=r.parseShort(),t.panose=[];for(var i=0;i<10;i++)t.panose[i]=r.parseByte();return t.ulUnicodeRange1=r.parseULong(),t.ulUnicodeRange2=r.parseULong(),t.ulUnicodeRange3=r.parseULong(),t.ulUnicodeRange4=r.parseULong(),t.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),t.fsSelection=r.parseUShort(),t.usFirstCharIndex=r.parseUShort(),t.usLastCharIndex=r.parseUShort(),t.sTypoAscender=r.parseShort(),t.sTypoDescender=r.parseShort(),t.sTypoLineGap=r.parseShort(),t.usWinAscent=r.parseUShort(),t.usWinDescent=r.parseUShort(),t.version>=1&&(t.ulCodePageRange1=r.parseULong(),t.ulCodePageRange2=r.parseULong()),t.version>=2&&(t.sxHeight=r.parseShort(),t.sCapHeight=r.parseShort(),t.usDefaultChar=r.parseUShort(),t.usBreakChar=r.parseUShort(),t.usMaxContent=r.parseUShort()),t}function Fq(n){return new tn.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],n)}var e4={parse:Oq,make:Fq,unicodeRanges:R5,getUnicodeRange:Dq};function Uq(n,e){var t={},r=new Bn.Parser(n,e);switch(t.version=r.parseVersion(),t.italicAngle=r.parseFixed(),t.underlinePosition=r.parseShort(),t.underlineThickness=r.parseShort(),t.isFixedPitch=r.parseULong(),t.minMemType42=r.parseULong(),t.maxMemType42=r.parseULong(),t.minMemType1=r.parseULong(),t.maxMemType1=r.parseULong(),t.version){case 1:t.names=XT.slice();break;case 2:t.numberOfGlyphs=r.parseUShort(),t.glyphNameIndex=new Array(t.numberOfGlyphs);for(var i=0;i<t.numberOfGlyphs;i++)t.glyphNameIndex[i]=r.parseUShort();t.names=[];for(var s=0;s<t.numberOfGlyphs;s++)if(t.glyphNameIndex[s]>=XT.length){var o=r.parseChar();t.names.push(r.parseString(o))}break;case 2.5:t.numberOfGlyphs=r.parseUShort(),t.offset=new Array(t.numberOfGlyphs);for(var a=0;a<t.numberOfGlyphs;a++)t.offset[a]=r.parseChar();break}return t}function Bq(){return new tn.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var zq={parse:Uq,make:Bq},wl=new Array(9);wl[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{substFormat:1,coverage:this.parsePointer(lt.coverage),deltaGlyphId:this.parseUShort()};if(t===2)return{substFormat:2,coverage:this.parsePointer(lt.coverage),substitute:this.parseOffset16List()};Nn.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")};wl[2]=function(){var e=this.parseUShort();return Nn.argument(e===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(lt.coverage),sequences:this.parseListOfLists()}};wl[3]=function(){var e=this.parseUShort();return Nn.argument(e===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(lt.coverage),alternateSets:this.parseListOfLists()}};wl[4]=function(){var e=this.parseUShort();return Nn.argument(e===1,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(lt.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var Vp={sequenceIndex:lt.uShort,lookupListIndex:lt.uShort};wl[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{substFormat:t,coverage:this.parsePointer(lt.coverage),ruleSets:this.parseListOfLists(function(){var s=this.parseUShort(),o=this.parseUShort();return{input:this.parseUShortList(s-1),lookupRecords:this.parseRecordList(o,Vp)}})};if(t===2)return{substFormat:t,coverage:this.parsePointer(lt.coverage),classDef:this.parsePointer(lt.classDef),classSets:this.parseListOfLists(function(){var s=this.parseUShort(),o=this.parseUShort();return{classes:this.parseUShortList(s-1),lookupRecords:this.parseRecordList(o,Vp)}})};if(t===3){var r=this.parseUShort(),i=this.parseUShort();return{substFormat:t,coverages:this.parseList(r,lt.pointer(lt.coverage)),lookupRecords:this.parseRecordList(i,Vp)}}Nn.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};wl[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{substFormat:1,coverage:this.parsePointer(lt.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Vp)}})};if(t===2)return{substFormat:2,coverage:this.parsePointer(lt.coverage),backtrackClassDef:this.parsePointer(lt.classDef),inputClassDef:this.parsePointer(lt.classDef),lookaheadClassDef:this.parsePointer(lt.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Vp)}})};if(t===3)return{substFormat:3,backtrackCoverage:this.parseList(lt.pointer(lt.coverage)),inputCoverage:this.parseList(lt.pointer(lt.coverage)),lookaheadCoverage:this.parseList(lt.pointer(lt.coverage)),lookupRecords:this.parseRecordList(Vp)};Nn.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};wl[7]=function(){var e=this.parseUShort();Nn.argument(e===1,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),r=new lt(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:wl[t].call(r)}};wl[8]=function(){var e=this.parseUShort();return Nn.argument(e===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(lt.coverage),backtrackCoverage:this.parseList(lt.pointer(lt.coverage)),lookaheadCoverage:this.parseList(lt.pointer(lt.coverage)),substitutes:this.parseUShortList()}};function Hq(n,e){e=e||0;var t=new lt(n,e),r=t.parseVersion(1);return Nn.argument(r===1||r===1.1,"Unsupported GSUB table version."),r===1?{version:r,scripts:t.parseScriptList(),features:t.parseFeatureList(),lookups:t.parseLookupList(wl)}:{version:r,scripts:t.parseScriptList(),features:t.parseFeatureList(),lookups:t.parseLookupList(wl),variations:t.parseFeatureVariationsList()}}var ym=new Array(9);ym[1]=function(e){return e.substFormat===1?new tn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new tn.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new tn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new tn.Coverage(e.coverage)}].concat(tn.ushortList("substitute",e.substitute)))};ym[2]=function(e){return Nn.assert(e.substFormat===1,"Lookup type 2 substFormat must be 1."),new tn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new tn.Coverage(e.coverage)}].concat(tn.tableList("seqSet",e.sequences,function(t){return new tn.Table("sequenceSetTable",tn.ushortList("sequence",t))})))};ym[3]=function(e){return Nn.assert(e.substFormat===1,"Lookup type 3 substFormat must be 1."),new tn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new tn.Coverage(e.coverage)}].concat(tn.tableList("altSet",e.alternateSets,function(t){return new tn.Table("alternateSetTable",tn.ushortList("alternate",t))})))};ym[4]=function(e){return Nn.assert(e.substFormat===1,"Lookup type 4 substFormat must be 1."),new tn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new tn.Coverage(e.coverage)}].concat(tn.tableList("ligSet",e.ligatureSets,function(t){return new tn.Table("ligatureSetTable",tn.tableList("ligature",t,function(r){return new tn.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:r.ligGlyph}].concat(tn.ushortList("component",r.components,r.components.length+1)))}))})))};ym[6]=function(e){if(e.substFormat===1){var t=new tn.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:e.substFormat},{name:"coverage",type:"TABLE",value:new tn.Coverage(e.coverage)}].concat(tn.tableList("chainRuleSet",e.chainRuleSets,function(s){return new tn.Table("chainRuleSetTable",tn.tableList("chainRule",s,function(o){var a=tn.ushortList("backtrackGlyph",o.backtrack,o.backtrack.length).concat(tn.ushortList("inputGlyph",o.input,o.input.length+1)).concat(tn.ushortList("lookaheadGlyph",o.lookahead,o.lookahead.length)).concat(tn.ushortList("substitution",[],o.lookupRecords.length));return o.lookupRecords.forEach(function(l,u){a=a.concat({name:"sequenceIndex"+u,type:"USHORT",value:l.sequenceIndex}).concat({name:"lookupListIndex"+u,type:"USHORT",value:l.lookupListIndex})}),new tn.Table("chainRuleTable",a)}))})));return t}else if(e.substFormat===2)Nn.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(e.substFormat===3){var r=[{name:"substFormat",type:"USHORT",value:e.substFormat}];r.push({name:"backtrackGlyphCount",type:"USHORT",value:e.backtrackCoverage.length}),e.backtrackCoverage.forEach(function(s,o){r.push({name:"backtrackCoverage"+o,type:"TABLE",value:new tn.Coverage(s)})}),r.push({name:"inputGlyphCount",type:"USHORT",value:e.inputCoverage.length}),e.inputCoverage.forEach(function(s,o){r.push({name:"inputCoverage"+o,type:"TABLE",value:new tn.Coverage(s)})}),r.push({name:"lookaheadGlyphCount",type:"USHORT",value:e.lookaheadCoverage.length}),e.lookaheadCoverage.forEach(function(s,o){r.push({name:"lookaheadCoverage"+o,type:"TABLE",value:new tn.Coverage(s)})}),r.push({name:"substitutionCount",type:"USHORT",value:e.lookupRecords.length}),e.lookupRecords.forEach(function(s,o){r=r.concat({name:"sequenceIndex"+o,type:"USHORT",value:s.sequenceIndex}).concat({name:"lookupListIndex"+o,type:"USHORT",value:s.lookupListIndex})});var i=new tn.Table("chainContextTable",r);return i}Nn.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};function Gq(n){return new tn.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new tn.ScriptList(n.scripts)},{name:"features",type:"TABLE",value:new tn.FeatureList(n.features)},{name:"lookups",type:"TABLE",value:new tn.LookupList(n.lookups,ym)}])}var Vq={parse:Hq,make:Gq};function Wq(n,e){var t=new Bn.Parser(n,e),r=t.parseULong();Nn.argument(r===1,"Unsupported META table version."),t.parseULong(),t.parseULong();for(var i=t.parseULong(),s={},o=0;o<i;o++){var a=t.parseTag(),l=t.parseULong(),u=t.parseULong(),c=um.UTF8(n,e+l,u);s[a]=c}return s}function jq(n){var e=Object.keys(n).length,t="",r=16+e*12,i=new tn.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:r},{name:"numTags",type:"ULONG",value:e}]);for(var s in n){var o=t.length;t+=n[s],i.fields.push({name:"tag "+s,type:"TAG",value:s}),i.fields.push({name:"offset "+s,type:"ULONG",value:r+o}),i.fields.push({name:"length "+s,type:"ULONG",value:n[s].length})}return i.fields.push({name:"stringPool",type:"CHARARRAY",value:t}),i}var qq={parse:Wq,make:jq};function t4(n){return Math.log(n)/Math.log(2)|0}function W3(n){for(;n.length%4!==0;)n.push(0);for(var e=0,t=0;t<n.length;t+=4)e+=(n[t]<<24)+(n[t+1]<<16)+(n[t+2]<<8)+n[t+3];return e%=Math.pow(2,32),e}function n4(n,e,t,r){return new tn.Record("Table Record",[{name:"tag",type:"TAG",value:n!==void 0?n:""},{name:"checkSum",type:"ULONG",value:e!==void 0?e:0},{name:"offset",type:"ULONG",value:t!==void 0?t:0},{name:"length",type:"ULONG",value:r!==void 0?r:0}])}function GN(n){var e=new tn.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);e.tables=n,e.numTables=n.length;var t=Math.pow(2,t4(e.numTables));e.searchRange=16*t,e.entrySelector=t4(t),e.rangeShift=e.numTables*16-e.searchRange;for(var r=[],i=[],s=e.sizeOf()+n4().sizeOf()*e.numTables;s%4!==0;)s+=1,i.push({name:"padding",type:"BYTE",value:0});for(var o=0;o<n.length;o+=1){var a=n[o];Nn.argument(a.tableName.length===4,"Table name"+a.tableName+" is invalid.");var l=a.sizeOf(),u=n4(a.tableName,W3(a.encode()),s,l);for(r.push({name:u.tag+" Table Record",type:"RECORD",value:u}),i.push({name:a.tableName+" table",type:"RECORD",value:a}),s+=l,Nn.argument(!isNaN(s),"Something went wrong calculating the offset.");s%4!==0;)s+=1,i.push({name:"padding",type:"BYTE",value:0})}return r.sort(function(c,h){return c.value.tag>h.value.tag?1:-1}),e.fields=e.fields.concat(r),e.fields=e.fields.concat(i),e}function r4(n,e,t){for(var r=0;r<e.length;r+=1){var i=n.charToGlyphIndex(e[r]);if(i>0){var s=n.glyphs.get(i);return s.getMetrics()}}return t}function Xq(n){for(var e=0,t=0;t<n.length;t+=1)e+=n[t];return e/n.length}function Yq(n){for(var e=[],t=[],r=[],i=[],s=[],o=[],a=[],l,u=0,c=0,h=0,d=0,m=0,v=0;v<n.glyphs.length;v+=1){var w=n.glyphs.get(v),x=w.unicode|0;if(isNaN(w.advanceWidth))throw new Error("Glyph "+w.name+" ("+v+"): advanceWidth is not a number.");(l>x||l===void 0)&&x>0&&(l=x),u<x&&(u=x);var g=e4.getUnicodeRange(x);if(g<32)c|=1<<g;else if(g<64)h|=1<<g-32;else if(g<96)d|=1<<g-64;else if(g<123)m|=1<<g-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if(w.name!==".notdef"){var S=w.getMetrics();e.push(S.xMin),t.push(S.yMin),r.push(S.xMax),i.push(S.yMax),o.push(S.leftSideBearing),a.push(S.rightSideBearing),s.push(w.advanceWidth)}}var _={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,t),xMax:Math.max.apply(null,r),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,s),advanceWidthAvg:Xq(s),minLeftSideBearing:Math.min.apply(null,o),maxLeftSideBearing:Math.max.apply(null,o),minRightSideBearing:Math.min.apply(null,a)};_.ascender=n.ascender,_.descender=n.descender;var T=fq.make({flags:3,unitsPerEm:n.unitsPerEm,xMin:_.xMin,yMin:_.yMin,xMax:_.xMax,yMax:_.yMax,lowestRecPPEM:3,createdTimestamp:n.createdTimestamp}),L=mq.make({ascender:_.ascender,descender:_.descender,advanceWidthMax:_.advanceWidthMax,minLeftSideBearing:_.minLeftSideBearing,minRightSideBearing:_.minRightSideBearing,xMaxExtent:_.maxLeftSideBearing+(_.xMax-_.xMin),numberOfHMetrics:n.glyphs.length}),P=Aq.make(n.glyphs.length),N=e4.make(Object.assign({xAvgCharWidth:Math.round(_.advanceWidthAvg),usFirstCharIndex:l,usLastCharIndex:u,ulUnicodeRange1:c,ulUnicodeRange2:h,ulUnicodeRange3:d,ulUnicodeRange4:m,sTypoAscender:_.ascender,sTypoDescender:_.descender,sTypoLineGap:0,usWinAscent:_.yMax,usWinDescent:Math.abs(_.yMin),ulCodePageRange1:1,sxHeight:r4(n,"xyvw",{yMax:Math.round(_.ascender/2)}).yMax,sCapHeight:r4(n,"HIKLEFJMNTZBDPRAGOQSUVWXY",_).yMax,usDefaultChar:n.hasChar(" ")?32:0,usBreakChar:n.hasChar(" ")?32:0},n.tables.os2)),k=wq.make(n.glyphs),R=Dj.make(n.glyphs),U=n.getEnglishName("fontFamily"),F=n.getEnglishName("fontSubfamily"),z=U+" "+F,V=n.getEnglishName("postScriptName");V||(V=U.replace(/\s/g,"")+"-"+F);var G={};for(var J in n.names)G[J]=n.names[J];G.uniqueID||(G.uniqueID={en:n.getEnglishName("manufacturer")+":"+z}),G.postScriptName||(G.postScriptName={en:V}),G.preferredFamily||(G.preferredFamily=n.names.fontFamily),G.preferredSubfamily||(G.preferredSubfamily=n.names.fontSubfamily);var ie=[],ce=Iq.make(G,ie),W=ie.length>0?bq.make(ie):void 0,Y=zq.make(),$=uq.make(n.glyphs,{version:n.getEnglishName("version"),fullName:z,familyName:U,weightName:F,postScriptName:V,unitsPerEm:n.unitsPerEm,fontBBox:[0,_.yMin,_.ascender,_.advanceWidthMax]}),oe=n.metas&&Object.keys(n.metas).length>0?qq.make(n.metas):void 0,D=[T,L,P,N,ce,R,Y,$,k];W&&D.push(W),n.tables.gsub&&D.push(Vq.make(n.tables.gsub)),oe&&D.push(oe);for(var j=GN(D),K=j.encode(),ae=W3(K),fe=j.fields,we=!1,Ee=0;Ee<fe.length;Ee+=1)if(fe[Ee].name==="head table"){fe[Ee].value.checkSumAdjustment=2981146554-ae,we=!0;break}if(!we)throw new Error("Could not find head table with checkSum to adjust.");return j}var $q={make:GN,fontToTable:Yq,computeCheckSum:W3};function gS(n,e){for(var t=0,r=n.length-1;t<=r;){var i=t+r>>>1,s=n[i].tag;if(s===e)return i;s<e?t=i+1:r=i-1}return-t-1}function i4(n,e){for(var t=0,r=n.length-1;t<=r;){var i=t+r>>>1,s=n[i];if(s===e)return i;s<e?t=i+1:r=i-1}return-t-1}function s4(n,e){for(var t,r=0,i=n.length-1;r<=i;){var s=r+i>>>1;t=n[s];var o=t.start;if(o===e)return t;o<e?r=s+1:i=s-1}if(r>0)return t=n[r-1],e>t.end?0:t}function i1(n,e){this.font=n,this.tableName=e}i1.prototype={searchTag:gS,binSearch:i4,getTable:function(n){var e=this.font.tables[this.tableName];return!e&&n&&(e=this.font.tables[this.tableName]=this.createDefaultTable()),e},getScriptNames:function(){var n=this.getTable();return n?n.scripts.map(function(e){return e.tag}):[]},getDefaultScriptName:function(){var n=this.getTable();if(n){for(var e=!1,t=0;t<n.scripts.length;t++){var r=n.scripts[t].tag;if(r==="DFLT")return r;r==="latn"&&(e=!0)}if(e)return"latn"}},getScriptTable:function(n,e){var t=this.getTable(e);if(t){n=n||"DFLT";var r=t.scripts,i=gS(t.scripts,n);if(i>=0)return r[i].script;if(e){var s={tag:n,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return r.splice(-1-i,0,s),s.script}}},getLangSysTable:function(n,e,t){var r=this.getScriptTable(n,t);if(r){if(!e||e==="dflt"||e==="DFLT")return r.defaultLangSys;var i=gS(r.langSysRecords,e);if(i>=0)return r.langSysRecords[i].langSys;if(t){var s={tag:e,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return r.langSysRecords.splice(-1-i,0,s),s.langSys}}},getFeatureTable:function(n,e,t,r){var i=this.getLangSysTable(n,e,r);if(i){for(var s,o=i.featureIndexes,a=this.font.tables[this.tableName].features,l=0;l<o.length;l++)if(s=a[o[l]],s.tag===t)return s.feature;if(r){var u=a.length;return Nn.assert(u===0||t>=a[u-1].tag,"Features must be added in alphabetical order."),s={tag:t,feature:{params:0,lookupListIndexes:[]}},a.push(s),o.push(u),s.feature}}},getLookupTables:function(n,e,t,r,i){var s=this.getFeatureTable(n,e,t,i),o=[];if(s){for(var a,l=s.lookupListIndexes,u=this.font.tables[this.tableName].lookups,c=0;c<l.length;c++)a=u[l[c]],a.lookupType===r&&o.push(a);if(o.length===0&&i){a={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0};var h=u.length;return u.push(a),l.push(h),[a]}}return o},getGlyphClass:function(n,e){switch(n.format){case 1:return n.startGlyph<=e&&e<n.startGlyph+n.classes.length?n.classes[e-n.startGlyph]:0;case 2:var t=s4(n.ranges,e);return t?t.classId:0}},getCoverageIndex:function(n,e){switch(n.format){case 1:var t=i4(n.glyphs,e);return t>=0?t:-1;case 2:var r=s4(n.ranges,e);return r?r.index+e-r.start:-1}},expandCoverage:function(n){if(n.format===1)return n.glyphs;for(var e=[],t=n.ranges,r=0;r<t.length;r++)for(var i=t[r],s=i.start,o=i.end,a=s;a<=o;a++)e.push(a);return e}};function s1(n){i1.call(this,n,"gpos")}s1.prototype=i1.prototype;s1.prototype.init=function(){var n=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(n)};s1.prototype.getKerningValue=function(n,e,t){for(var r=0;r<n.length;r++)for(var i=n[r].subtables,s=0;s<i.length;s++){var o=i[s],a=this.getCoverageIndex(o.coverage,e);if(!(a<0))switch(o.posFormat){case 1:for(var l=o.pairSets[a],u=0;u<l.length;u++){var c=l[u];if(c.secondGlyph===t)return c.value1&&c.value1.xAdvance||0}break;case 2:var h=this.getGlyphClass(o.classDef1,e),d=this.getGlyphClass(o.classDef2,t),m=o.classRecords[h][d];return m.value1&&m.value1.xAdvance||0}}return 0};s1.prototype.getKerningTables=function(n,e){if(this.font.tables.gpos)return this.getLookupTables(n,e,"kern",2)};function oa(n){i1.call(this,n,"gsub")}function Zq(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function j3(n,e,t){for(var r=n.subtables,i=0;i<r.length;i++){var s=r[i];if(s.substFormat===e)return s}if(t)return r.push(t),t}oa.prototype=i1.prototype;oa.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};oa.prototype.getSingle=function(n,e,t){for(var r=[],i=this.getLookupTables(e,t,n,1),s=0;s<i.length;s++)for(var o=i[s].subtables,a=0;a<o.length;a++){var l=o[a],u=this.expandCoverage(l.coverage),c=void 0;if(l.substFormat===1){var h=l.deltaGlyphId;for(c=0;c<u.length;c++){var d=u[c];r.push({sub:d,by:d+h})}}else{var m=l.substitute;for(c=0;c<u.length;c++)r.push({sub:u[c],by:m[c]})}}return r};oa.prototype.getMultiple=function(n,e,t){for(var r=[],i=this.getLookupTables(e,t,n,2),s=0;s<i.length;s++)for(var o=i[s].subtables,a=0;a<o.length;a++){var l=o[a],u=this.expandCoverage(l.coverage),c=void 0;for(c=0;c<u.length;c++){var h=u[c],d=l.sequences[c];r.push({sub:h,by:d})}}return r};oa.prototype.getAlternates=function(n,e,t){for(var r=[],i=this.getLookupTables(e,t,n,3),s=0;s<i.length;s++)for(var o=i[s].subtables,a=0;a<o.length;a++)for(var l=o[a],u=this.expandCoverage(l.coverage),c=l.alternateSets,h=0;h<u.length;h++)r.push({sub:u[h],by:c[h]});return r};oa.prototype.getLigatures=function(n,e,t){for(var r=[],i=this.getLookupTables(e,t,n,4),s=0;s<i.length;s++)for(var o=i[s].subtables,a=0;a<o.length;a++)for(var l=o[a],u=this.expandCoverage(l.coverage),c=l.ligatureSets,h=0;h<u.length;h++)for(var d=u[h],m=c[h],v=0;v<m.length;v++){var w=m[v];r.push({sub:[d].concat(w.components),by:w.ligGlyph})}return r};oa.prototype.addSingle=function(n,e,t,r){var i=this.getLookupTables(t,r,n,1,!0)[0],s=j3(i,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});Nn.assert(s.coverage.format===1,"Single: unable to modify coverage table format "+s.coverage.format);var o=e.sub,a=this.binSearch(s.coverage.glyphs,o);a<0&&(a=-1-a,s.coverage.glyphs.splice(a,0,o),s.substitute.splice(a,0,0)),s.substitute[a]=e.by};oa.prototype.addMultiple=function(n,e,t,r){Nn.assert(e.by instanceof Array&&e.by.length>1,'Multiple: "by" must be an array of two or more ids');var i=this.getLookupTables(t,r,n,2,!0)[0],s=j3(i,1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});Nn.assert(s.coverage.format===1,"Multiple: unable to modify coverage table format "+s.coverage.format);var o=e.sub,a=this.binSearch(s.coverage.glyphs,o);a<0&&(a=-1-a,s.coverage.glyphs.splice(a,0,o),s.sequences.splice(a,0,0)),s.sequences[a]=e.by};oa.prototype.addAlternate=function(n,e,t,r){var i=this.getLookupTables(t,r,n,3,!0)[0],s=j3(i,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});Nn.assert(s.coverage.format===1,"Alternate: unable to modify coverage table format "+s.coverage.format);var o=e.sub,a=this.binSearch(s.coverage.glyphs,o);a<0&&(a=-1-a,s.coverage.glyphs.splice(a,0,o),s.alternateSets.splice(a,0,0)),s.alternateSets[a]=e.by};oa.prototype.addLigature=function(n,e,t,r){var i=this.getLookupTables(t,r,n,4,!0)[0],s=i.subtables[0];s||(s={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},i.subtables[0]=s),Nn.assert(s.coverage.format===1,"Ligature: unable to modify coverage table format "+s.coverage.format);var o=e.sub[0],a=e.sub.slice(1),l={ligGlyph:e.by,components:a},u=this.binSearch(s.coverage.glyphs,o);if(u>=0){for(var c=s.ligatureSets[u],h=0;h<c.length;h++)if(Zq(c[h].components,a))return;c.push(l)}else u=-1-u,s.coverage.glyphs.splice(u,0,o),s.ligatureSets.splice(u,0,[l])};oa.prototype.getFeature=function(n,e,t){if(/ss\d\d/.test(n))return this.getSingle(n,e,t);switch(n){case"aalt":case"salt":return this.getSingle(n,e,t).concat(this.getAlternates(n,e,t));case"dlig":case"liga":case"rlig":return this.getLigatures(n,e,t);case"ccmp":return this.getMultiple(n,e,t).concat(this.getLigatures(n,e,t));case"stch":return this.getMultiple(n,e,t)}};oa.prototype.add=function(n,e,t,r){if(/ss\d\d/.test(n))return this.addSingle(n,e,t,r);switch(n){case"aalt":case"salt":return typeof e.by=="number"?this.addSingle(n,e,t,r):this.addAlternate(n,e,t,r);case"dlig":case"liga":case"rlig":return this.addLigature(n,e,t,r);case"ccmp":return e.by instanceof Array?this.addMultiple(n,e,t,r):this.addLigature(n,e,t,r)}};function Kq(){return typeof window<"u"}function Jq(n){for(var e=new Buffer(n.byteLength),t=new Uint8Array(n),r=0;r<e.length;++r)e[r]=t[r];return e}function d0(n,e){if(!n)throw e}function o4(n,e,t,r,i){var s;return(e&r)>0?(s=n.parseByte(),e&i||(s=-s),s=t+s):(e&i)>0?s=t:s=t+n.parseShort(),s}function VN(n,e,t){var r=new Bn.Parser(e,t);n.numberOfContours=r.parseShort(),n._xMin=r.parseShort(),n._yMin=r.parseShort(),n._xMax=r.parseShort(),n._yMax=r.parseShort();var i,s;if(n.numberOfContours>0){for(var o=n.endPointIndices=[],a=0;a<n.numberOfContours;a+=1)o.push(r.parseUShort());n.instructionLength=r.parseUShort(),n.instructions=[];for(var l=0;l<n.instructionLength;l+=1)n.instructions.push(r.parseByte());var u=o[o.length-1]+1;i=[];for(var c=0;c<u;c+=1)if(s=r.parseByte(),i.push(s),(s&8)>0)for(var h=r.parseByte(),d=0;d<h;d+=1)i.push(s),c+=1;if(Nn.argument(i.length===u,"Bad flags."),o.length>0){var m=[],v;if(u>0){for(var w=0;w<u;w+=1)s=i[w],v={},v.onCurve=!!(s&1),v.lastPointOfContour=o.indexOf(w)>=0,m.push(v);for(var x=0,g=0;g<u;g+=1)s=i[g],v=m[g],v.x=o4(r,s,x,2,16),x=v.x;for(var S=0,_=0;_<u;_+=1)s=i[_],v=m[_],v.y=o4(r,s,S,4,32),S=v.y}n.points=m}else n.points=[]}else if(n.numberOfContours===0)n.points=[];else{n.isComposite=!0,n.points=[],n.components=[];for(var T=!0;T;){i=r.parseUShort();var L={glyphIndex:r.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(i&1)>0?(i&2)>0?(L.dx=r.parseShort(),L.dy=r.parseShort()):L.matchedPoints=[r.parseUShort(),r.parseUShort()]:(i&2)>0?(L.dx=r.parseChar(),L.dy=r.parseChar()):L.matchedPoints=[r.parseByte(),r.parseByte()],(i&8)>0?L.xScale=L.yScale=r.parseF2Dot14():(i&64)>0?(L.xScale=r.parseF2Dot14(),L.yScale=r.parseF2Dot14()):(i&128)>0&&(L.xScale=r.parseF2Dot14(),L.scale01=r.parseF2Dot14(),L.scale10=r.parseF2Dot14(),L.yScale=r.parseF2Dot14()),n.components.push(L),T=!!(i&32)}if(i&256){n.instructionLength=r.parseUShort(),n.instructions=[];for(var P=0;P<n.instructionLength;P+=1)n.instructions.push(r.parseByte())}}}function vS(n,e){for(var t=[],r=0;r<n.length;r+=1){var i=n[r],s={x:e.xScale*i.x+e.scale01*i.y+e.dx,y:e.scale10*i.x+e.yScale*i.y+e.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};t.push(s)}return t}function Qq(n){for(var e=[],t=[],r=0;r<n.length;r+=1){var i=n[r];t.push(i),i.lastPointOfContour&&(e.push(t),t=[])}return Nn.argument(t.length===0,"There are still points left in the current contour."),e}function WN(n){var e=new rs;if(!n)return e;for(var t=Qq(n),r=0;r<t.length;++r){var i=t[r],s=null,o=i[i.length-1],a=i[0];if(o.onCurve)e.moveTo(o.x,o.y);else if(a.onCurve)e.moveTo(a.x,a.y);else{var l={x:(o.x+a.x)*.5,y:(o.y+a.y)*.5};e.moveTo(l.x,l.y)}for(var u=0;u<i.length;++u)if(s=o,o=a,a=i[(u+1)%i.length],o.onCurve)e.lineTo(o.x,o.y);else{var c=a;s.onCurve||((o.x+s.x)*.5,(o.y+s.y)*.5),a.onCurve||(c={x:(o.x+a.x)*.5,y:(o.y+a.y)*.5}),e.quadraticCurveTo(o.x,o.y,c.x,c.y)}e.closePath()}return e}function jN(n,e){if(e.isComposite)for(var t=0;t<e.components.length;t+=1){var r=e.components[t],i=n.get(r.glyphIndex);if(i.getPath(),i.points){var s=void 0;if(r.matchedPoints===void 0)s=vS(i.points,r);else{if(r.matchedPoints[0]>e.points.length-1||r.matchedPoints[1]>i.points.length-1)throw Error("Matched points out of range in "+e.name);var o=e.points[r.matchedPoints[0]],a=i.points[r.matchedPoints[1]],l={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0};a=vS([a],l)[0],l.dx=o.x-a.x,l.dy=o.y-a.y,s=vS(i.points,l)}e.points=e.points.concat(s)}}return WN(e.points)}function eX(n,e,t,r){for(var i=new tu.GlyphSet(r),s=0;s<t.length-1;s+=1){var o=t[s],a=t[s+1];o!==a?i.push(s,tu.ttfGlyphLoader(r,s,VN,n,e+o,jN)):i.push(s,tu.glyphLoader(r,s))}return i}function tX(n,e,t,r){var i=new tu.GlyphSet(r);return r._push=function(s){var o=t[s],a=t[s+1];o!==a?i.push(s,tu.ttfGlyphLoader(r,s,VN,n,e+o,jN)):i.push(s,tu.glyphLoader(r,s))},i}function nX(n,e,t,r,i){return i.lowMemory?tX(n,e,t,r):eX(n,e,t,r)}var rX={getPath:WN,parse:nX},qN,Kf,XN,k5;function YN(n){this.font=n,this.getCommands=function(e){return rX.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function iX(n){return n}function $N(n){return Math.sign(n)*Math.round(Math.abs(n))}function sX(n){return Math.sign(n)*Math.round(Math.abs(n*2))/2}function oX(n){return Math.sign(n)*(Math.round(Math.abs(n)+.5)-.5)}function aX(n){return Math.sign(n)*Math.ceil(Math.abs(n))}function lX(n){return Math.sign(n)*Math.floor(Math.abs(n))}var ZN=function(n){var e=this.srPeriod,t=this.srPhase,r=this.srThreshold,i=1;return n<0&&(n=-n,i=-1),n+=r-t,n=Math.trunc(n/e)*e,n+=t,n<0?t*i:n*i},Xl={x:1,y:0,axis:"x",distance:function(n,e,t,r){return(t?n.xo:n.x)-(r?e.xo:e.x)},interpolate:function(n,e,t,r){var i,s,o,a,l,u,c;if(!r||r===this){if(i=n.xo-e.xo,s=n.xo-t.xo,l=e.x-e.xo,u=t.x-t.xo,o=Math.abs(i),a=Math.abs(s),c=o+a,c===0){n.x=n.xo+(l+u)/2;return}n.x=n.xo+(l*a+u*o)/c;return}if(i=r.distance(n,e,!0,!0),s=r.distance(n,t,!0,!0),l=r.distance(e,e,!1,!0),u=r.distance(t,t,!1,!0),o=Math.abs(i),a=Math.abs(s),c=o+a,c===0){Xl.setRelative(n,n,(l+u)/2,r,!0);return}Xl.setRelative(n,n,(l*a+u*o)/c,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(n,e,t,r,i){if(!r||r===this){n.x=(i?e.xo:e.x)+t;return}var s=i?e.xo:e.x,o=i?e.yo:e.y,a=s+t*r.x,l=o+t*r.y;n.x=a+(n.y-l)/r.normalSlope},slope:0,touch:function(n){n.xTouched=!0},touched:function(n){return n.xTouched},untouch:function(n){n.xTouched=!1}},ju={x:0,y:1,axis:"y",distance:function(n,e,t,r){return(t?n.yo:n.y)-(r?e.yo:e.y)},interpolate:function(n,e,t,r){var i,s,o,a,l,u,c;if(!r||r===this){if(i=n.yo-e.yo,s=n.yo-t.yo,l=e.y-e.yo,u=t.y-t.yo,o=Math.abs(i),a=Math.abs(s),c=o+a,c===0){n.y=n.yo+(l+u)/2;return}n.y=n.yo+(l*a+u*o)/c;return}if(i=r.distance(n,e,!0,!0),s=r.distance(n,t,!0,!0),l=r.distance(e,e,!1,!0),u=r.distance(t,t,!1,!0),o=Math.abs(i),a=Math.abs(s),c=o+a,c===0){ju.setRelative(n,n,(l+u)/2,r,!0);return}ju.setRelative(n,n,(l*a+u*o)/c,r,!0)},normalSlope:0,setRelative:function(n,e,t,r,i){if(!r||r===this){n.y=(i?e.yo:e.y)+t;return}var s=i?e.xo:e.x,o=i?e.yo:e.y,a=s+t*r.x,l=o+t*r.y;n.y=l+r.normalSlope*(n.x-a)},slope:Number.POSITIVE_INFINITY,touch:function(n){n.yTouched=!0},touched:function(n){return n.yTouched},untouch:function(n){n.yTouched=!1}};Object.freeze(Xl);Object.freeze(ju);function o1(n,e){this.x=n,this.y=e,this.axis=void 0,this.slope=e/n,this.normalSlope=-n/e,Object.freeze(this)}o1.prototype.distance=function(n,e,t,r){return this.x*Xl.distance(n,e,t,r)+this.y*ju.distance(n,e,t,r)};o1.prototype.interpolate=function(n,e,t,r){var i,s,o,a,l,u,c;if(o=r.distance(n,e,!0,!0),a=r.distance(n,t,!0,!0),i=r.distance(e,e,!1,!0),s=r.distance(t,t,!1,!0),l=Math.abs(o),u=Math.abs(a),c=l+u,c===0){this.setRelative(n,n,(i+s)/2,r,!0);return}this.setRelative(n,n,(i*u+s*l)/c,r,!0)};o1.prototype.setRelative=function(n,e,t,r,i){r=r||this;var s=i?e.xo:e.x,o=i?e.yo:e.y,a=s+t*r.x,l=o+t*r.y,u=r.normalSlope,c=this.slope,h=n.x,d=n.y;n.x=(c*h-u*a+l-d)/(c-u),n.y=c*(n.x-h)+d};o1.prototype.touch=function(n){n.xTouched=!0,n.yTouched=!0};function a1(n,e){var t=Math.sqrt(n*n+e*e);return n/=t,e/=t,n===1&&e===0?Xl:n===0&&e===1?ju:new o1(n,e)}function Yu(n,e,t,r){this.x=this.xo=Math.round(n*64)/64,this.y=this.yo=Math.round(e*64)/64,this.lastPointOfContour=t,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Yu.prototype.nextTouched=function(n){for(var e=this.nextPointOnContour;!n.touched(e)&&e!==this;)e=e.nextPointOnContour;return e};Yu.prototype.prevTouched=function(n){for(var e=this.prevPointOnContour;!n.touched(e)&&e!==this;)e=e.prevPointOnContour;return e};var Ig=Object.freeze(new Yu(0,0)),uX={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function sh(n,e){switch(this.env=n,this.stack=[],this.prog=e,n){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Xl,this.round=$N}}YN.prototype.exec=function(n,e){if(typeof e!="number")throw new Error("Point size is not a number!");if(!(this._errorState>2)){var t=this.font,r=this._prepState;if(!r||r.ppem!==e){var i=this._fpgmState;if(!i){sh.prototype=uX,i=this._fpgmState=new sh("fpgm",t.tables.fpgm),i.funcs=[],i.font=t,exports.DEBUG&&(console.log("---EXEC FPGM---"),i.step=-1);try{Kf(i)}catch(u){console.log("Hinting error in FPGM:"+u),this._errorState=3;return}}sh.prototype=i,r=this._prepState=new sh("prep",t.tables.prep),r.ppem=e;var s=t.tables.cvt;if(s)for(var o=r.cvt=new Array(s.length),a=e/t.unitsPerEm,l=0;l<s.length;l++)o[l]=s[l]*a;else r.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),r.step=-1);try{Kf(r)}catch(u){this._errorState<2&&console.log("Hinting error in PREP:"+u),this._errorState=2}}if(!(this._errorState>1))try{return XN(n,r)}catch(u){this._errorState<1&&(console.log("Hinting error:"+u),console.log("Note: further hinting errors are silenced")),this._errorState=1;return}}};XN=function(n,e){var t=e.ppem/e.font.unitsPerEm,r=t,i=n.components,s,o,a;if(sh.prototype=e,!i)a=new sh("glyf",n.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),a.step=-1),k5(n,a,t,r),o=a.gZone;else{var l=e.font;o=[],s=[];for(var u=0;u<i.length;u++){var c=i[u],h=l.glyphs.get(c.glyphIndex);a=new sh("glyf",h.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+u+"---"),a.step=-1),k5(h,a,t,r);for(var d=Math.round(c.dx*t),m=Math.round(c.dy*r),v=a.gZone,w=a.contours,x=0;x<v.length;x++){var g=v[x];g.xTouched=g.yTouched=!1,g.xo=g.x=g.x+d,g.yo=g.y=g.y+m}var S=o.length;o.push.apply(o,v);for(var _=0;_<w.length;_++)s.push(w[_]+S)}n.instructions&&!a.inhibitGridFit&&(a=new sh("glyf",n.instructions),a.gZone=a.z0=a.z1=a.z2=o,a.contours=s,o.push(new Yu(0,0),new Yu(Math.round(n.advanceWidth*t),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),a.step=-1),Kf(a),o.length-=2)}return o};k5=function(n,e,t,r){for(var i=n.points||[],s=i.length,o=e.gZone=e.z0=e.z1=e.z2=[],a=e.contours=[],l,u=0;u<s;u++)l=i[u],o[u]=new Yu(l.x*t,l.y*r,l.lastPointOfContour,l.onCurve);for(var c,h,d=0;d<s;d++)l=o[d],c||(c=l,a.push(d)),l.lastPointOfContour?(l.nextPointOnContour=c,c.prevPointOnContour=l,c=void 0):(h=o[d+1],l.nextPointOnContour=h,h.prevPointOnContour=l);if(!e.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",e.stack);for(var m=0;m<s;m++)console.log(m,o[m].x,o[m].y)}if(o.push(new Yu(0,0),new Yu(Math.round(n.advanceWidth*t),0)),Kf(e),o.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",e.stack);for(var v=0;v<s;v++)console.log(v,o[v].x,o[v].y)}}};Kf=function(n){var e=n.prog;if(e){var t=e.length,r;for(n.ip=0;n.ip<t;n.ip++){if(exports.DEBUG&&n.step++,r=qN[e[n.ip]],!r)throw new Error("unknown instruction: 0x"+Number(e[n.ip]).toString(16));r(n)}}};function gx(n){for(var e=n.tZone=new Array(n.gZone.length),t=0;t<e.length;t++)e[t]=new Yu(0,0)}function KN(n,e){var t=n.prog,r=n.ip,i=1,s;do if(s=t[++r],s===88)i++;else if(s===89)i--;else if(s===64)r+=t[r+1]+1;else if(s===65)r+=2*t[r+1]+1;else if(s>=176&&s<=183)r+=s-176+1;else if(s>=184&&s<=191)r+=(s-184+1)*2;else if(e&&i===1&&s===27)break;while(i>0);n.ip=r}function a4(n,e){exports.DEBUG&&console.log(e.step,"SVTCA["+n.axis+"]"),e.fv=e.pv=e.dpv=n}function l4(n,e){exports.DEBUG&&console.log(e.step,"SPVTCA["+n.axis+"]"),e.pv=e.dpv=n}function u4(n,e){exports.DEBUG&&console.log(e.step,"SFVTCA["+n.axis+"]"),e.fv=n}function c4(n,e){var t=e.stack,r=t.pop(),i=t.pop(),s=e.z2[r],o=e.z1[i];exports.DEBUG&&console.log("SPVTL["+n+"]",r,i);var a,l;n?(a=s.y-o.y,l=o.x-s.x):(a=o.x-s.x,l=o.y-s.y),e.pv=e.dpv=a1(a,l)}function h4(n,e){var t=e.stack,r=t.pop(),i=t.pop(),s=e.z2[r],o=e.z1[i];exports.DEBUG&&console.log("SFVTL["+n+"]",r,i);var a,l;n?(a=s.y-o.y,l=o.x-s.x):(a=o.x-s.x,l=o.y-s.y),e.fv=a1(a,l)}function cX(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"SPVFS[]",t,r),n.pv=n.dpv=a1(r,t)}function hX(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"SPVFS[]",t,r),n.fv=a1(r,t)}function fX(n){var e=n.stack,t=n.pv;exports.DEBUG&&console.log(n.step,"GPV[]"),e.push(t.x*16384),e.push(t.y*16384)}function dX(n){var e=n.stack,t=n.fv;exports.DEBUG&&console.log(n.step,"GFV[]"),e.push(t.x*16384),e.push(t.y*16384)}function pX(n){n.fv=n.pv,exports.DEBUG&&console.log(n.step,"SFVTPV[]")}function mX(n){var e=n.stack,t=e.pop(),r=e.pop(),i=e.pop(),s=e.pop(),o=e.pop(),a=n.z0,l=n.z1,u=a[t],c=a[r],h=l[i],d=l[s],m=n.z2[o];exports.DEBUG&&console.log("ISECT[], ",t,r,i,s,o);var v=u.x,w=u.y,x=c.x,g=c.y,S=h.x,_=h.y,T=d.x,L=d.y,P=(v-x)*(_-L)-(w-g)*(S-T),N=v*g-w*x,k=S*L-_*T;m.x=(N*(S-T)-k*(v-x))/P,m.y=(N*(_-L)-k*(w-g))/P}function gX(n){n.rp0=n.stack.pop(),exports.DEBUG&&console.log(n.step,"SRP0[]",n.rp0)}function vX(n){n.rp1=n.stack.pop(),exports.DEBUG&&console.log(n.step,"SRP1[]",n.rp1)}function yX(n){n.rp2=n.stack.pop(),exports.DEBUG&&console.log(n.step,"SRP2[]",n.rp2)}function xX(n){var e=n.stack.pop();switch(exports.DEBUG&&console.log(n.step,"SZP0[]",e),n.zp0=e,e){case 0:n.tZone||gx(n),n.z0=n.tZone;break;case 1:n.z0=n.gZone;break;default:throw new Error("Invalid zone pointer")}}function wX(n){var e=n.stack.pop();switch(exports.DEBUG&&console.log(n.step,"SZP1[]",e),n.zp1=e,e){case 0:n.tZone||gx(n),n.z1=n.tZone;break;case 1:n.z1=n.gZone;break;default:throw new Error("Invalid zone pointer")}}function SX(n){var e=n.stack.pop();switch(exports.DEBUG&&console.log(n.step,"SZP2[]",e),n.zp2=e,e){case 0:n.tZone||gx(n),n.z2=n.tZone;break;case 1:n.z2=n.gZone;break;default:throw new Error("Invalid zone pointer")}}function _X(n){var e=n.stack.pop();switch(exports.DEBUG&&console.log(n.step,"SZPS[]",e),n.zp0=n.zp1=n.zp2=e,e){case 0:n.tZone||gx(n),n.z0=n.z1=n.z2=n.tZone;break;case 1:n.z0=n.z1=n.z2=n.gZone;break;default:throw new Error("Invalid zone pointer")}}function bX(n){n.loop=n.stack.pop(),exports.DEBUG&&console.log(n.step,"SLOOP[]",n.loop)}function MX(n){exports.DEBUG&&console.log(n.step,"RTG[]"),n.round=$N}function EX(n){exports.DEBUG&&console.log(n.step,"RTHG[]"),n.round=oX}function AX(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"SMD[]",e),n.minDis=e/64}function TX(n){exports.DEBUG&&console.log(n.step,"ELSE[]"),KN(n,!1)}function CX(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"JMPR[]",e),n.ip+=e-1}function LX(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"SCVTCI[]",e),n.cvCutIn=e/64}function PX(n){var e=n.stack;exports.DEBUG&&console.log(n.step,"DUP[]"),e.push(e[e.length-1])}function yS(n){exports.DEBUG&&console.log(n.step,"POP[]"),n.stack.pop()}function RX(n){exports.DEBUG&&console.log(n.step,"CLEAR[]"),n.stack.length=0}function kX(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"SWAP[]"),e.push(t),e.push(r)}function NX(n){var e=n.stack;exports.DEBUG&&console.log(n.step,"DEPTH[]"),e.push(e.length)}function IX(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"LOOPCALL[]",t,r);var i=n.ip,s=n.prog;n.prog=n.funcs[t];for(var o=0;o<r;o++)Kf(n),exports.DEBUG&&console.log(++n.step,o+1<r?"next loopcall":"done loopcall",o);n.ip=i,n.prog=s}function DX(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"CALL[]",e);var t=n.ip,r=n.prog;n.prog=n.funcs[e],Kf(n),n.ip=t,n.prog=r,exports.DEBUG&&console.log(++n.step,"returning from",e)}function OX(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"CINDEX[]",t),e.push(e[e.length-t])}function FX(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"MINDEX[]",t),e.push(e.splice(e.length-t,1)[0])}function UX(n){if(n.env!=="fpgm")throw new Error("FDEF not allowed here");var e=n.stack,t=n.prog,r=n.ip,i=e.pop(),s=r;for(exports.DEBUG&&console.log(n.step,"FDEF[]",i);t[++r]!==45;);n.ip=r,n.funcs[i]=t.slice(s+1,r)}function f4(n,e){var t=e.stack.pop(),r=e.z0[t],i=e.fv,s=e.pv;exports.DEBUG&&console.log(e.step,"MDAP["+n+"]",t);var o=s.distance(r,Ig);n&&(o=e.round(o)),i.setRelative(r,Ig,o,s),i.touch(r),e.rp0=e.rp1=t}function d4(n,e){var t=e.z2,r=t.length-2,i,s,o;exports.DEBUG&&console.log(e.step,"IUP["+n.axis+"]");for(var a=0;a<r;a++)i=t[a],!n.touched(i)&&(s=i.prevTouched(n),s!==i&&(o=i.nextTouched(n),s===o&&n.setRelative(i,i,n.distance(s,s,!1,!0),n,!0),n.interpolate(i,s,o,n)))}function p4(n,e){for(var t=e.stack,r=n?e.rp1:e.rp2,i=(n?e.z0:e.z1)[r],s=e.fv,o=e.pv,a=e.loop,l=e.z2;a--;){var u=t.pop(),c=l[u],h=o.distance(i,i,!1,!0);s.setRelative(c,c,h,o),s.touch(c),exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-a)+": ":"")+"SHP["+(n?"rp1":"rp2")+"]",u)}e.loop=1}function m4(n,e){var t=e.stack,r=n?e.rp1:e.rp2,i=(n?e.z0:e.z1)[r],s=e.fv,o=e.pv,a=t.pop(),l=e.z2[e.contours[a]],u=l;exports.DEBUG&&console.log(e.step,"SHC["+n+"]",a);var c=o.distance(i,i,!1,!0);do u!==i&&s.setRelative(u,u,c,o),u=u.nextPointOnContour;while(u!==l)}function g4(n,e){var t=e.stack,r=n?e.rp1:e.rp2,i=(n?e.z0:e.z1)[r],s=e.fv,o=e.pv,a=t.pop();exports.DEBUG&&console.log(e.step,"SHZ["+n+"]",a);var l;switch(a){case 0:l=e.tZone;break;case 1:l=e.gZone;break;default:throw new Error("Invalid zone")}for(var u,c=o.distance(i,i,!1,!0),h=l.length-2,d=0;d<h;d++)u=l[d],s.setRelative(u,u,c,o)}function BX(n){for(var e=n.stack,t=n.loop,r=n.fv,i=e.pop()/64,s=n.z2;t--;){var o=e.pop(),a=s[o];exports.DEBUG&&console.log(n.step,(n.loop>1?"loop "+(n.loop-t)+": ":"")+"SHPIX[]",o,i),r.setRelative(a,a,i),r.touch(a)}n.loop=1}function zX(n){for(var e=n.stack,t=n.rp1,r=n.rp2,i=n.loop,s=n.z0[t],o=n.z1[r],a=n.fv,l=n.dpv,u=n.z2;i--;){var c=e.pop(),h=u[c];exports.DEBUG&&console.log(n.step,(n.loop>1?"loop "+(n.loop-i)+": ":"")+"IP[]",c,t,"<->",r),a.interpolate(h,s,o,l),a.touch(h)}n.loop=1}function v4(n,e){var t=e.stack,r=t.pop()/64,i=t.pop(),s=e.z1[i],o=e.z0[e.rp0],a=e.fv,l=e.pv;a.setRelative(s,o,r,l),a.touch(s),exports.DEBUG&&console.log(e.step,"MSIRP["+n+"]",r,i),e.rp1=e.rp0,e.rp2=i,n&&(e.rp0=i)}function HX(n){for(var e=n.stack,t=n.rp0,r=n.z0[t],i=n.loop,s=n.fv,o=n.pv,a=n.z1;i--;){var l=e.pop(),u=a[l];exports.DEBUG&&console.log(n.step,(n.loop>1?"loop "+(n.loop-i)+": ":"")+"ALIGNRP[]",l),s.setRelative(u,r,0,o),s.touch(u)}n.loop=1}function GX(n){exports.DEBUG&&console.log(n.step,"RTDG[]"),n.round=sX}function y4(n,e){var t=e.stack,r=t.pop(),i=t.pop(),s=e.z0[i],o=e.fv,a=e.pv,l=e.cvt[r];exports.DEBUG&&console.log(e.step,"MIAP["+n+"]",r,"(",l,")",i);var u=a.distance(s,Ig);n&&(Math.abs(u-l)<e.cvCutIn&&(u=l),u=e.round(u)),o.setRelative(s,Ig,u,a),e.zp0===0&&(s.xo=s.x,s.yo=s.y),o.touch(s),e.rp0=e.rp1=i}function VX(n){var e=n.prog,t=n.ip,r=n.stack,i=e[++t];exports.DEBUG&&console.log(n.step,"NPUSHB[]",i);for(var s=0;s<i;s++)r.push(e[++t]);n.ip=t}function WX(n){var e=n.ip,t=n.prog,r=n.stack,i=t[++e];exports.DEBUG&&console.log(n.step,"NPUSHW[]",i);for(var s=0;s<i;s++){var o=t[++e]<<8|t[++e];o&32768&&(o=-((o^65535)+1)),r.push(o)}n.ip=e}function jX(n){var e=n.stack,t=n.store;t||(t=n.store=[]);var r=e.pop(),i=e.pop();exports.DEBUG&&console.log(n.step,"WS",r,i),t[i]=r}function qX(n){var e=n.stack,t=n.store,r=e.pop();exports.DEBUG&&console.log(n.step,"RS",r);var i=t&&t[r]||0;e.push(i)}function XX(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"WCVTP",t,r),n.cvt[r]=t/64}function YX(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"RCVT",t),e.push(n.cvt[t]*64)}function x4(n,e){var t=e.stack,r=t.pop(),i=e.z2[r];exports.DEBUG&&console.log(e.step,"GC["+n+"]",r),t.push(e.dpv.distance(i,Ig,n,!1)*64)}function w4(n,e){var t=e.stack,r=t.pop(),i=t.pop(),s=e.z1[r],o=e.z0[i],a=e.dpv.distance(o,s,n,n);exports.DEBUG&&console.log(e.step,"MD["+n+"]",r,i,"->",a),e.stack.push(Math.round(a*64))}function $X(n){exports.DEBUG&&console.log(n.step,"MPPEM[]"),n.stack.push(n.ppem)}function ZX(n){exports.DEBUG&&console.log(n.step,"FLIPON[]"),n.autoFlip=!0}function KX(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"LT[]",t,r),e.push(r<t?1:0)}function JX(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"LTEQ[]",t,r),e.push(r<=t?1:0)}function QX(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"GT[]",t,r),e.push(r>t?1:0)}function eY(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"GTEQ[]",t,r),e.push(r>=t?1:0)}function tY(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"EQ[]",t,r),e.push(t===r?1:0)}function nY(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"NEQ[]",t,r),e.push(t!==r?1:0)}function rY(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"ODD[]",t),e.push(Math.trunc(t)%2?1:0)}function iY(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"EVEN[]",t),e.push(Math.trunc(t)%2?0:1)}function sY(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"IF[]",e),e||(KN(n,!0),exports.DEBUG&&console.log(n.step,"EIF[]"))}function oY(n){exports.DEBUG&&console.log(n.step,"EIF[]")}function aY(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"AND[]",t,r),e.push(t&&r?1:0)}function lY(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"OR[]",t,r),e.push(t||r?1:0)}function uY(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"NOT[]",t),e.push(t?0:1)}function xS(n,e){var t=e.stack,r=t.pop(),i=e.fv,s=e.pv,o=e.ppem,a=e.deltaBase+(n-1)*16,l=e.deltaShift,u=e.z0;exports.DEBUG&&console.log(e.step,"DELTAP["+n+"]",r,t);for(var c=0;c<r;c++){var h=t.pop(),d=t.pop(),m=a+((d&240)>>4);if(m===o){var v=(d&15)-8;v>=0&&v++,exports.DEBUG&&console.log(e.step,"DELTAPFIX",h,"by",v*l);var w=u[h];i.setRelative(w,w,v*l,s)}}}function cY(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"SDB[]",t),n.deltaBase=t}function hY(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"SDS[]",t),n.deltaShift=Math.pow(.5,t)}function fY(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"ADD[]",t,r),e.push(r+t)}function dY(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"SUB[]",t,r),e.push(r-t)}function pY(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"DIV[]",t,r),e.push(r*64/t)}function mY(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"MUL[]",t,r),e.push(r*t/64)}function gY(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"ABS[]",t),e.push(Math.abs(t))}function vY(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"NEG[]",t),e.push(-t)}function yY(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"FLOOR[]",t),e.push(Math.floor(t/64)*64)}function xY(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"CEILING[]",t),e.push(Math.ceil(t/64)*64)}function Xv(n,e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"ROUND[]"),t.push(e.round(r/64)*64)}function wY(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"WCVTF[]",t,r),n.cvt[r]=t*n.ppem/n.font.unitsPerEm}function wS(n,e){var t=e.stack,r=t.pop(),i=e.ppem,s=e.deltaBase+(n-1)*16,o=e.deltaShift;exports.DEBUG&&console.log(e.step,"DELTAC["+n+"]",r,t);for(var a=0;a<r;a++){var l=t.pop(),u=t.pop(),c=s+((u&240)>>4);if(c===i){var h=(u&15)-8;h>=0&&h++;var d=h*o;exports.DEBUG&&console.log(e.step,"DELTACFIX",l,"by",d),e.cvt[l]+=d}}}function SY(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"SROUND[]",e),n.round=ZN;var t;switch(e&192){case 0:t=.5;break;case 64:t=1;break;case 128:t=2;break;default:throw new Error("invalid SROUND value")}switch(n.srPeriod=t,e&48){case 0:n.srPhase=0;break;case 16:n.srPhase=.25*t;break;case 32:n.srPhase=.5*t;break;case 48:n.srPhase=.75*t;break;default:throw new Error("invalid SROUND value")}e&=15,e===0?n.srThreshold=0:n.srThreshold=(e/8-.5)*t}function _Y(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"S45ROUND[]",e),n.round=ZN;var t;switch(e&192){case 0:t=Math.sqrt(2)/2;break;case 64:t=Math.sqrt(2);break;case 128:t=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(n.srPeriod=t,e&48){case 0:n.srPhase=0;break;case 16:n.srPhase=.25*t;break;case 32:n.srPhase=.5*t;break;case 48:n.srPhase=.75*t;break;default:throw new Error("invalid S45ROUND value")}e&=15,e===0?n.srThreshold=0:n.srThreshold=(e/8-.5)*t}function bY(n){exports.DEBUG&&console.log(n.step,"ROFF[]"),n.round=iX}function MY(n){exports.DEBUG&&console.log(n.step,"RUTG[]"),n.round=aX}function EY(n){exports.DEBUG&&console.log(n.step,"RDTG[]"),n.round=lX}function AY(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"SCANCTRL[]",e)}function S4(n,e){var t=e.stack,r=t.pop(),i=t.pop(),s=e.z2[r],o=e.z1[i];exports.DEBUG&&console.log(e.step,"SDPVTL["+n+"]",r,i);var a,l;n?(a=s.y-o.y,l=o.x-s.x):(a=o.x-s.x,l=o.y-s.y),e.dpv=a1(a,l)}function TY(n){var e=n.stack,t=e.pop(),r=0;exports.DEBUG&&console.log(n.step,"GETINFO[]",t),t&1&&(r=35),t&32&&(r|=4096),e.push(r)}function CY(n){var e=n.stack,t=e.pop(),r=e.pop(),i=e.pop();exports.DEBUG&&console.log(n.step,"ROLL[]"),e.push(r),e.push(t),e.push(i)}function LY(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"MAX[]",t,r),e.push(Math.max(r,t))}function PY(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"MIN[]",t,r),e.push(Math.min(r,t))}function RY(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"SCANTYPE[]",e)}function kY(n){var e=n.stack.pop(),t=n.stack.pop();switch(exports.DEBUG&&console.log(n.step,"INSTCTRL[]",e,t),e){case 1:n.inhibitGridFit=!!t;return;case 2:n.ignoreCvt=!!t;return;default:throw new Error("invalid INSTCTRL[] selector")}}function Vc(n,e){var t=e.stack,r=e.prog,i=e.ip;exports.DEBUG&&console.log(e.step,"PUSHB["+n+"]");for(var s=0;s<n;s++)t.push(r[++i]);e.ip=i}function Wc(n,e){var t=e.ip,r=e.prog,i=e.stack;exports.DEBUG&&console.log(e.ip,"PUSHW["+n+"]");for(var s=0;s<n;s++){var o=r[++t]<<8|r[++t];o&32768&&(o=-((o^65535)+1)),i.push(o)}e.ip=t}function Jt(n,e,t,r,i,s){var o=s.stack,a=n&&o.pop(),l=o.pop(),u=s.rp0,c=s.z0[u],h=s.z1[l],d=s.minDis,m=s.fv,v=s.dpv,w,x,g,S;x=w=v.distance(h,c,!0,!0),g=x>=0?1:-1,x=Math.abs(x),n&&(S=s.cvt[a],r&&Math.abs(x-S)<s.cvCutIn&&(x=S)),t&&x<d&&(x=d),r&&(x=s.round(x)),m.setRelative(h,c,g*x,v),m.touch(h),exports.DEBUG&&console.log(s.step,(n?"MIRP[":"MDRP[")+(e?"M":"m")+(t?">":"_")+(r?"R":"_")+(i===0?"Gr":i===1?"Bl":i===2?"Wh":"")+"]",n?a+"("+s.cvt[a]+","+S+")":"",l,"(d =",w,"->",g*x,")"),s.rp1=s.rp0,s.rp2=l,e&&(s.rp0=l)}qN=[a4.bind(void 0,ju),a4.bind(void 0,Xl),l4.bind(void 0,ju),l4.bind(void 0,Xl),u4.bind(void 0,ju),u4.bind(void 0,Xl),c4.bind(void 0,0),c4.bind(void 0,1),h4.bind(void 0,0),h4.bind(void 0,1),cX,hX,fX,dX,pX,mX,gX,vX,yX,xX,wX,SX,_X,bX,MX,EX,AX,TX,CX,LX,void 0,void 0,PX,yS,RX,kX,NX,OX,FX,void 0,void 0,void 0,IX,DX,UX,void 0,f4.bind(void 0,0),f4.bind(void 0,1),d4.bind(void 0,ju),d4.bind(void 0,Xl),p4.bind(void 0,0),p4.bind(void 0,1),m4.bind(void 0,0),m4.bind(void 0,1),g4.bind(void 0,0),g4.bind(void 0,1),BX,zX,v4.bind(void 0,0),v4.bind(void 0,1),HX,GX,y4.bind(void 0,0),y4.bind(void 0,1),VX,WX,jX,qX,XX,YX,x4.bind(void 0,0),x4.bind(void 0,1),void 0,w4.bind(void 0,0),w4.bind(void 0,1),$X,void 0,ZX,void 0,void 0,KX,JX,QX,eY,tY,nY,rY,iY,sY,oY,aY,lY,uY,xS.bind(void 0,1),cY,hY,fY,dY,pY,mY,gY,vY,yY,xY,Xv.bind(void 0,0),Xv.bind(void 0,1),Xv.bind(void 0,2),Xv.bind(void 0,3),void 0,void 0,void 0,void 0,wY,xS.bind(void 0,2),xS.bind(void 0,3),wS.bind(void 0,1),wS.bind(void 0,2),wS.bind(void 0,3),SY,_Y,void 0,void 0,bY,void 0,MY,EY,yS,yS,void 0,void 0,void 0,void 0,void 0,AY,S4.bind(void 0,0),S4.bind(void 0,1),TY,void 0,CY,LY,PY,RY,kY,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Vc.bind(void 0,1),Vc.bind(void 0,2),Vc.bind(void 0,3),Vc.bind(void 0,4),Vc.bind(void 0,5),Vc.bind(void 0,6),Vc.bind(void 0,7),Vc.bind(void 0,8),Wc.bind(void 0,1),Wc.bind(void 0,2),Wc.bind(void 0,3),Wc.bind(void 0,4),Wc.bind(void 0,5),Wc.bind(void 0,6),Wc.bind(void 0,7),Wc.bind(void 0,8),Jt.bind(void 0,0,0,0,0,0),Jt.bind(void 0,0,0,0,0,1),Jt.bind(void 0,0,0,0,0,2),Jt.bind(void 0,0,0,0,0,3),Jt.bind(void 0,0,0,0,1,0),Jt.bind(void 0,0,0,0,1,1),Jt.bind(void 0,0,0,0,1,2),Jt.bind(void 0,0,0,0,1,3),Jt.bind(void 0,0,0,1,0,0),Jt.bind(void 0,0,0,1,0,1),Jt.bind(void 0,0,0,1,0,2),Jt.bind(void 0,0,0,1,0,3),Jt.bind(void 0,0,0,1,1,0),Jt.bind(void 0,0,0,1,1,1),Jt.bind(void 0,0,0,1,1,2),Jt.bind(void 0,0,0,1,1,3),Jt.bind(void 0,0,1,0,0,0),Jt.bind(void 0,0,1,0,0,1),Jt.bind(void 0,0,1,0,0,2),Jt.bind(void 0,0,1,0,0,3),Jt.bind(void 0,0,1,0,1,0),Jt.bind(void 0,0,1,0,1,1),Jt.bind(void 0,0,1,0,1,2),Jt.bind(void 0,0,1,0,1,3),Jt.bind(void 0,0,1,1,0,0),Jt.bind(void 0,0,1,1,0,1),Jt.bind(void 0,0,1,1,0,2),Jt.bind(void 0,0,1,1,0,3),Jt.bind(void 0,0,1,1,1,0),Jt.bind(void 0,0,1,1,1,1),Jt.bind(void 0,0,1,1,1,2),Jt.bind(void 0,0,1,1,1,3),Jt.bind(void 0,1,0,0,0,0),Jt.bind(void 0,1,0,0,0,1),Jt.bind(void 0,1,0,0,0,2),Jt.bind(void 0,1,0,0,0,3),Jt.bind(void 0,1,0,0,1,0),Jt.bind(void 0,1,0,0,1,1),Jt.bind(void 0,1,0,0,1,2),Jt.bind(void 0,1,0,0,1,3),Jt.bind(void 0,1,0,1,0,0),Jt.bind(void 0,1,0,1,0,1),Jt.bind(void 0,1,0,1,0,2),Jt.bind(void 0,1,0,1,0,3),Jt.bind(void 0,1,0,1,1,0),Jt.bind(void 0,1,0,1,1,1),Jt.bind(void 0,1,0,1,1,2),Jt.bind(void 0,1,0,1,1,3),Jt.bind(void 0,1,1,0,0,0),Jt.bind(void 0,1,1,0,0,1),Jt.bind(void 0,1,1,0,0,2),Jt.bind(void 0,1,1,0,0,3),Jt.bind(void 0,1,1,0,1,0),Jt.bind(void 0,1,1,0,1,1),Jt.bind(void 0,1,1,0,1,2),Jt.bind(void 0,1,1,0,1,3),Jt.bind(void 0,1,1,1,0,0),Jt.bind(void 0,1,1,1,0,1),Jt.bind(void 0,1,1,1,0,2),Jt.bind(void 0,1,1,1,0,3),Jt.bind(void 0,1,1,1,1,0),Jt.bind(void 0,1,1,1,1,1),Jt.bind(void 0,1,1,1,1,2),Jt.bind(void 0,1,1,1,1,3)];function xm(n){this.char=n,this.state={},this.activeState=null}function q3(n,e,t){this.contextName=t,this.startIndex=n,this.endOffset=e}function NY(n,e,t){this.contextName=n,this.openRange=null,this.ranges=[],this.checkStart=e,this.checkEnd=t}function Sl(n,e){this.context=n,this.index=e,this.length=n.length,this.current=n[e],this.backtrack=n.slice(0,e),this.lookahead=n.slice(e+1)}function vx(n){this.eventId=n,this.subscribers=[]}function IY(n){var e=this,t=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];t.forEach(function(i){Object.defineProperty(e.events,i,{value:new vx(i)})}),n&&t.forEach(function(i){var s=n[i];typeof s=="function"&&e.events[i].subscribe(s)});var r=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];r.forEach(function(i){e.events[i].subscribe(e.updateContextsRanges)})}function Ei(n){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],IY.call(this,n)}xm.prototype.setState=function(n,e){return this.state[n]=e,this.activeState={key:n,value:this.state[n]},this.activeState};xm.prototype.getState=function(n){return this.state[n]||null};Ei.prototype.inboundIndex=function(n){return n>=0&&n<this.tokens.length};Ei.prototype.composeRUD=function(n){var e=this,t=!0,r=n.map(function(s){return e[s[0]].apply(e,s.slice(1).concat(t))}),i=function(s){return typeof s=="object"&&s.hasOwnProperty("FAIL")};if(r.every(i))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:r.filter(i)};this.dispatch("composeRUD",[r.filter(function(s){return!i(s)})])};Ei.prototype.replaceRange=function(n,e,t,r){e=e!==null?e:this.tokens.length;var i=t.every(function(o){return o instanceof xm});if(!isNaN(n)&&this.inboundIndex(n)&&i){var s=this.tokens.splice.apply(this.tokens,[n,e].concat(t));return r||this.dispatch("replaceToken",[n,e,t]),[s,t]}else return{FAIL:"replaceRange: invalid tokens or startIndex."}};Ei.prototype.replaceToken=function(n,e,t){if(!isNaN(n)&&this.inboundIndex(n)&&e instanceof xm){var r=this.tokens.splice(n,1,e);return t||this.dispatch("replaceToken",[n,e]),[r[0],e]}else return{FAIL:"replaceToken: invalid token or index."}};Ei.prototype.removeRange=function(n,e,t){e=isNaN(e)?this.tokens.length:e;var r=this.tokens.splice(n,e);return t||this.dispatch("removeRange",[r,n,e]),r};Ei.prototype.removeToken=function(n,e){if(!isNaN(n)&&this.inboundIndex(n)){var t=this.tokens.splice(n,1);return e||this.dispatch("removeToken",[t,n]),t}else return{FAIL:"removeToken: invalid token index."}};Ei.prototype.insertToken=function(n,e,t){var r=n.every(function(i){return i instanceof xm});return r?(this.tokens.splice.apply(this.tokens,[e,0].concat(n)),t||this.dispatch("insertToken",[n,e]),n):{FAIL:"insertToken: invalid token(s)."}};Ei.prototype.registerModifier=function(n,e,t){this.events.newToken.subscribe(function(r,i){var s=[r,i],o=e===null||e.apply(this,s)===!0,a=[r,i];if(o){var l=t.apply(this,a);r.setState(n,l)}}),this.registeredModifiers.push(n)};vx.prototype.subscribe=function(n){return typeof n=="function"?this.subscribers.push(n)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}};vx.prototype.unsubscribe=function(n){this.subscribers.splice(n,1)};Sl.prototype.setCurrentIndex=function(n){this.index=n,this.current=this.context[n],this.backtrack=this.context.slice(0,n),this.lookahead=this.context.slice(n+1)};Sl.prototype.get=function(n){switch(!0){case n===0:return this.current;case(n<0&&Math.abs(n)<=this.backtrack.length):return this.backtrack.slice(n)[0];case(n>0&&n<=this.lookahead.length):return this.lookahead[n-1];default:return null}};Ei.prototype.rangeToText=function(n){if(n instanceof q3)return this.getRangeTokens(n).map(function(e){return e.char}).join("")};Ei.prototype.getText=function(){return this.tokens.map(function(n){return n.char}).join("")};Ei.prototype.getContext=function(n){var e=this.registeredContexts[n];return e||null};Ei.prototype.on=function(n,e){var t=this.events[n];return t?t.subscribe(e):null};Ei.prototype.dispatch=function(n,e){var t=this,r=this.events[n];r instanceof vx&&r.subscribers.forEach(function(i){i.apply(t,e||[])})};Ei.prototype.registerContextChecker=function(n,e,t){if(this.getContext(n))return{FAIL:"context name '"+n+"' is already registered."};if(typeof e!="function")return{FAIL:"missing context start check."};if(typeof t!="function")return{FAIL:"missing context end check."};var r=new NY(n,e,t);return this.registeredContexts[n]=r,this.contextCheckers.push(r),r};Ei.prototype.getRangeTokens=function(n){var e=n.startIndex+n.endOffset;return[].concat(this.tokens.slice(n.startIndex,e))};Ei.prototype.getContextRanges=function(n){var e=this.getContext(n);return e?e.ranges:{FAIL:"context checker '"+n+"' is not registered."}};Ei.prototype.resetContextsRanges=function(){var n=this.registeredContexts;for(var e in n)if(n.hasOwnProperty(e)){var t=n[e];t.ranges=[]}};Ei.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var n=this.tokens.map(function(r){return r.char}),e=0;e<n.length;e++){var t=new Sl(n,e);this.runContextCheck(t)}this.dispatch("updateContextsRanges",[this.registeredContexts])};Ei.prototype.setEndOffset=function(n,e){var t=this.getContext(e).openRange.startIndex,r=new q3(t,n,e),i=this.getContext(e).ranges;return r.rangeId=e+"."+i.length,i.push(r),this.getContext(e).openRange=null,r};Ei.prototype.runContextCheck=function(n){var e=this,t=n.index;this.contextCheckers.forEach(function(r){var i=r.contextName,s=e.getContext(i).openRange;if(!s&&r.checkStart(n)&&(s=new q3(t,null,i),e.getContext(i).openRange=s,e.dispatch("contextStart",[i,t])),s&&r.checkEnd(n)){var o=t-s.startIndex+1,a=e.setEndOffset(o,i);e.dispatch("contextEnd",[i,a])}})};Ei.prototype.tokenize=function(n){this.tokens=[],this.resetContextsRanges();var e=Array.from(n);this.dispatch("start");for(var t=0;t<e.length;t++){var r=e[t],i=new Sl(e,t);this.dispatch("next",[i]),this.runContextCheck(i);var s=new xm(r);this.tokens.push(s),this.dispatch("newToken",[s,i])}return this.dispatch("end",[this.tokens]),this.tokens};function yh(n){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(n)}function JN(n){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(n)}function Th(n){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(n)}function Ey(n){return/[A-z]/.test(n)}function DY(n){return/\s/.test(n)}function aa(n){this.font=n,this.features={}}function Sf(n){this.id=n.id,this.tag=n.tag,this.substitution=n.substitution}function l1(n,e){if(!n)return-1;switch(e.format){case 1:return e.glyphs.indexOf(n);case 2:for(var t=e.ranges,r=0;r<t.length;r++){var i=t[r];if(n>=i.start&&n<=i.end){var s=n-i.start;return i.index+s}}break;default:return-1}return-1}function OY(n,e){var t=l1(n,e.coverage);return t===-1?null:n+e.deltaGlyphId}function FY(n,e){var t=l1(n,e.coverage);return t===-1?null:e.substitute[t]}function SS(n,e){for(var t=[],r=0;r<n.length;r++){var i=n[r],s=e.current;s=Array.isArray(s)?s[0]:s;var o=l1(s,i);o!==-1&&t.push(o)}return t.length!==n.length?-1:t}function UY(n,e){var t=e.inputCoverage.length+e.lookaheadCoverage.length+e.backtrackCoverage.length;if(n.context.length<t)return[];var r=SS(e.inputCoverage,n);if(r===-1)return[];var i=e.inputCoverage.length-1;if(n.lookahead.length<e.lookaheadCoverage.length)return[];for(var s=n.lookahead.slice(i);s.length&&Th(s[0].char);)s.shift();var o=new Sl(s,0),a=SS(e.lookaheadCoverage,o),l=[].concat(n.backtrack);for(l.reverse();l.length&&Th(l[0].char);)l.shift();if(l.length<e.backtrackCoverage.length)return[];var u=new Sl(l,0),c=SS(e.backtrackCoverage,u),h=r.length===e.inputCoverage.length&&a.length===e.lookaheadCoverage.length&&c.length===e.backtrackCoverage.length,d=[];if(h)for(var m=0;m<e.lookupRecords.length;m++)for(var v=e.lookupRecords[m],w=v.lookupListIndex,x=this.getLookupByIndex(w),g=0;g<x.subtables.length;g++){var S=x.subtables[g],_=this.getLookupMethod(x,S),T=this.getSubstitutionType(x,S);if(T==="12")for(var L=0;L<r.length;L++){var P=n.get(L),N=_(P);N&&d.push(N)}}return d}function BY(n,e){var t=n.current,r=l1(t,e.coverage);if(r===-1)return null;for(var i,s=e.ligatureSets[r],o=0;o<s.length;o++){i=s[o];for(var a=0;a<i.components.length;a++){var l=n.lookahead[a],u=i.components[a];if(l!==u)break;if(a===i.components.length-1)return i}}return null}function zY(n,e){var t=l1(n,e.coverage);return t===-1?null:e.sequences[t]}aa.prototype.getDefaultScriptFeaturesIndexes=function(){for(var n=this.font.tables.gsub.scripts,e=0;e<n.length;e++){var t=n[e];if(t.tag==="DFLT")return t.script.defaultLangSys.featureIndexes}return[]};aa.prototype.getScriptFeaturesIndexes=function(n){var e=this.font.tables;if(!e.gsub)return[];if(!n)return this.getDefaultScriptFeaturesIndexes();for(var t=this.font.tables.gsub.scripts,r=0;r<t.length;r++){var i=t[r];if(i.tag===n&&i.script.defaultLangSys)return i.script.defaultLangSys.featureIndexes;var s=i.langSysRecords;if(s)for(var o=0;o<s.length;o++){var a=s[o];if(a.tag===n){var l=a.langSys;return l.featureIndexes}}}return this.getDefaultScriptFeaturesIndexes()};aa.prototype.mapTagsToFeatures=function(n,e){for(var t={},r=0;r<n.length;r++){var i=n[r].tag,s=n[r].feature;t[i]=s}this.features[e].tags=t};aa.prototype.getScriptFeatures=function(n){var e=this.features[n];if(this.features.hasOwnProperty(n))return e;var t=this.getScriptFeaturesIndexes(n);if(!t)return null;var r=this.font.tables.gsub;return e=t.map(function(i){return r.features[i]}),this.features[n]=e,this.mapTagsToFeatures(e,n),e};aa.prototype.getSubstitutionType=function(n,e){var t=n.lookupType.toString(),r=e.substFormat.toString();return t+r};aa.prototype.getLookupMethod=function(n,e){var t=this,r=this.getSubstitutionType(n,e);switch(r){case"11":return function(i){return OY.apply(t,[i,e])};case"12":return function(i){return FY.apply(t,[i,e])};case"63":return function(i){return UY.apply(t,[i,e])};case"41":return function(i){return BY.apply(t,[i,e])};case"21":return function(i){return zY.apply(t,[i,e])};default:throw new Error("lookupType: "+n.lookupType+" - substFormat: "+e.substFormat+" is not yet supported")}};aa.prototype.lookupFeature=function(n){var e=n.contextParams,t=e.index,r=this.getFeature({tag:n.tag,script:n.script});if(!r)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+n.tag+"' for script '"+n.script+"'.");for(var i=this.getFeatureLookups(r),s=[].concat(e.context),o=0;o<i.length;o++)for(var a=i[o],l=this.getLookupSubtables(a),u=0;u<l.length;u++){var c=l[u],h=this.getSubstitutionType(a,c),d=this.getLookupMethod(a,c),m=void 0;switch(h){case"11":m=d(e.current),m&&s.splice(t,1,new Sf({id:11,tag:n.tag,substitution:m}));break;case"12":m=d(e.current),m&&s.splice(t,1,new Sf({id:12,tag:n.tag,substitution:m}));break;case"63":m=d(e),Array.isArray(m)&&m.length&&s.splice(t,1,new Sf({id:63,tag:n.tag,substitution:m}));break;case"41":m=d(e),m&&s.splice(t,1,new Sf({id:41,tag:n.tag,substitution:m}));break;case"21":m=d(e.current),m&&s.splice(t,1,new Sf({id:21,tag:n.tag,substitution:m}));break}e=new Sl(s,t),!(Array.isArray(m)&&!m.length)&&(m=null)}return s.length?s:null};aa.prototype.supports=function(n){if(!n.script)return!1;this.getScriptFeatures(n.script);var e=this.features.hasOwnProperty(n.script);if(!n.tag)return e;var t=this.features[n.script].some(function(r){return r.tag===n.tag});return e&&t};aa.prototype.getLookupSubtables=function(n){return n.subtables||null};aa.prototype.getLookupByIndex=function(n){var e=this.font.tables.gsub.lookups;return e[n]||null};aa.prototype.getFeatureLookups=function(n){return n.lookupListIndexes.map(this.getLookupByIndex.bind(this))};aa.prototype.getFeature=function(e){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(e.script)||this.getScriptFeatures(e.script);var t=this.features[e.script];return t?t.tags[e.tag]?this.features[e.script].tags[e.tag]:null:{FAIL:"No feature for script "+e.script}};function HY(n){var e=n.current,t=n.get(-1);return t===null&&yh(e)||!yh(t)&&yh(e)}function GY(n){var e=n.get(1);return e===null||!yh(e)}var VY={startCheck:HY,endCheck:GY};function WY(n){var e=n.current,t=n.get(-1);return(yh(e)||Th(e))&&!yh(t)}function jY(n){var e=n.get(1);switch(!0){case e===null:return!0;case(!yh(e)&&!Th(e)):var t=DY(e);if(!t)return!0;if(t){var r=!1;if(r=n.lookahead.some(function(i){return yh(i)||Th(i)}),!r)return!0}break;default:return!1}}var qY={startCheck:WY,endCheck:jY};function XY(n,e,t){e[t].setState(n.tag,n.substitution)}function YY(n,e,t){e[t].setState(n.tag,n.substitution)}function $Y(n,e,t){n.substitution.forEach(function(r,i){var s=e[t+i];s.setState(n.tag,r)})}function ZY(n,e,t){var r=e[t];r.setState(n.tag,n.substitution.ligGlyph);for(var i=n.substitution.components.length,s=0;s<i;s++)r=e[t+s+1],r.setState("deleted",!0)}var _4={11:XY,12:YY,63:$Y,41:ZY};function X3(n,e,t){n instanceof Sf&&_4[n.id]&&_4[n.id](n,e,t)}function KY(n){for(var e=[].concat(n.backtrack),t=e.length-1;t>=0;t--){var r=e[t],i=JN(r),s=Th(r);if(!i&&!s)return!0;if(i)return!1}return!1}function JY(n){if(JN(n.current))return!1;for(var e=0;e<n.lookahead.length;e++){var t=n.lookahead[e],r=Th(t);if(!r)return!0}return!1}function QY(n){var e=this,t="arab",r=this.featuresTags[t],i=this.tokenizer.getRangeTokens(n);if(i.length!==1){var s=new Sl(i.map(function(a){return a.getState("glyphIndex")}),0),o=new Sl(i.map(function(a){return a.char}),0);i.forEach(function(a,l){if(!Th(a.char)){s.setCurrentIndex(l),o.setCurrentIndex(l);var u=0;KY(o)&&(u|=1),JY(o)&&(u|=2);var c;switch(u){case 1:c="fina";break;case 2:c="init";break;case 3:c="medi";break}if(r.indexOf(c)!==-1){var h=e.query.lookupFeature({tag:c,script:t,contextParams:s});if(h instanceof Error)return console.info(h.message);h.forEach(function(d,m){d instanceof Sf&&(X3(d,i,m),s.context[m]=d.substitution)})}}})}}function b4(n,e){var t=n.map(function(r){return r.activeState.value});return new Sl(t,e||0)}function e$(n){var e=this,t="arab",r=this.tokenizer.getRangeTokens(n),i=b4(r);i.context.forEach(function(s,o){i.setCurrentIndex(o);var a=e.query.lookupFeature({tag:"rlig",script:t,contextParams:i});a.length&&(a.forEach(function(l){return X3(l,r,o)}),i=b4(r))})}function t$(n){var e=n.current,t=n.get(-1);return t===null&&Ey(e)||!Ey(t)&&Ey(e)}function n$(n){var e=n.get(1);return e===null||!Ey(e)}var r$={startCheck:t$,endCheck:n$};function M4(n,e){var t=n.map(function(r){return r.activeState.value});return new Sl(t,e||0)}function i$(n){var e=this,t="latn",r=this.tokenizer.getRangeTokens(n),i=M4(r);i.context.forEach(function(s,o){i.setCurrentIndex(o);var a=e.query.lookupFeature({tag:"liga",script:t,contextParams:i});a.length&&(a.forEach(function(l){return X3(l,r,o)}),i=M4(r))})}function Cl(n){this.baseDir=n||"ltr",this.tokenizer=new Ei,this.featuresTags={}}Cl.prototype.setText=function(n){this.text=n};Cl.prototype.contextChecks={latinWordCheck:r$,arabicWordCheck:VY,arabicSentenceCheck:qY};function _S(n){var e=this.contextChecks[n+"Check"];return this.tokenizer.registerContextChecker(n,e.startCheck,e.endCheck)}function s$(){return _S.call(this,"latinWord"),_S.call(this,"arabicWord"),_S.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function o$(){var n=this,e=this.tokenizer.getContextRanges("arabicSentence");e.forEach(function(t){var r=n.tokenizer.getRangeTokens(t);n.tokenizer.replaceRange(t.startIndex,t.endOffset,r.reverse())})}Cl.prototype.registerFeatures=function(n,e){var t=this,r=e.filter(function(i){return t.query.supports({script:n,tag:i})});this.featuresTags.hasOwnProperty(n)?this.featuresTags[n]=this.featuresTags[n].concat(r):this.featuresTags[n]=r};Cl.prototype.applyFeatures=function(n,e){if(!n)throw new Error("No valid font was provided to apply features");this.query||(this.query=new aa(n));for(var t=0;t<e.length;t++){var r=e[t];this.query.supports({script:r.script})&&this.registerFeatures(r.script,r.tags)}};Cl.prototype.registerModifier=function(n,e,t){this.tokenizer.registerModifier(n,e,t)};function Y3(){if(this.tokenizer.registeredModifiers.indexOf("glyphIndex")===-1)throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function a$(){var n=this,e="arab";if(this.featuresTags.hasOwnProperty(e)){Y3.call(this);var t=this.tokenizer.getContextRanges("arabicWord");t.forEach(function(r){QY.call(n,r)})}}function l$(){var n=this,e="arab";if(this.featuresTags.hasOwnProperty(e)){var t=this.featuresTags[e];if(t.indexOf("rlig")!==-1){Y3.call(this);var r=this.tokenizer.getContextRanges("arabicWord");r.forEach(function(i){e$.call(n,i)})}}}function u$(){var n=this,e="latn";if(this.featuresTags.hasOwnProperty(e)){var t=this.featuresTags[e];if(t.indexOf("liga")!==-1){Y3.call(this);var r=this.tokenizer.getContextRanges("latinWord");r.forEach(function(i){i$.call(n,i)})}}}Cl.prototype.checkContextReady=function(n){return!!this.tokenizer.getContext(n)};Cl.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(a$.call(this),l$.call(this)),this.checkContextReady("latinWord")&&u$.call(this),this.checkContextReady("arabicSentence")&&o$.call(this)};Cl.prototype.processText=function(n){(!this.text||this.text!==n)&&(this.setText(n),s$.call(this),this.applyFeaturesToContexts())};Cl.prototype.getBidiText=function(n){return this.processText(n),this.tokenizer.getText()};Cl.prototype.getTextGlyphs=function(n){this.processText(n);for(var e=[],t=0;t<this.tokenizer.tokens.length;t++){var r=this.tokenizer.tokens[t];if(!r.state.deleted){var i=r.activeState.value;e.push(Array.isArray(i)?i[0]:i)}}return e};function Br(n){n=n||{},n.tables=n.tables||{},n.empty||(d0(n.familyName,"When creating a new Font object, familyName is required."),d0(n.styleName,"When creating a new Font object, styleName is required."),d0(n.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),d0(n.ascender,"When creating a new Font object, ascender is required."),d0(n.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:n.familyName||" "},fontSubfamily:{en:n.styleName||" "},fullName:{en:n.fullName||n.familyName+" "+n.styleName},postScriptName:{en:n.postScriptName||(n.familyName+n.styleName).replace(/\s/g,"")},designer:{en:n.designer||" "},designerURL:{en:n.designerURL||" "},manufacturer:{en:n.manufacturer||" "},manufacturerURL:{en:n.manufacturerURL||" "},license:{en:n.license||" "},licenseURL:{en:n.licenseURL||" "},version:{en:n.version||"Version 0.1"},description:{en:n.description||" "},copyright:{en:n.copyright||" "},trademark:{en:n.trademark||" "}},this.unitsPerEm=n.unitsPerEm||1e3,this.ascender=n.ascender,this.descender=n.descender,this.createdTimestamp=n.createdTimestamp,this.tables=Object.assign(n.tables,{os2:Object.assign({usWeightClass:n.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:n.widthClass||this.usWidthClasses.MEDIUM,fsSelection:n.fsSelection||this.fsSelectionValues.REGULAR},n.tables.os2)})),this.supported=!0,this.glyphs=new tu.GlyphSet(this,n.glyphs||[]),this.encoding=new LN(this),this.position=new s1(this),this.substitution=new oa(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new YN(this)}})}Br.prototype.hasChar=function(n){return this.encoding.charToGlyphIndex(n)!==null};Br.prototype.charToGlyphIndex=function(n){return this.encoding.charToGlyphIndex(n)};Br.prototype.charToGlyph=function(n){var e=this.charToGlyphIndex(n),t=this.glyphs.get(e);return t||(t=this.glyphs.get(0)),t};Br.prototype.updateFeatures=function(n){return this.defaultRenderOptions.features.map(function(e){return e.script==="latn"?{script:"latn",tags:e.tags.filter(function(t){return n[t]})}:e})};Br.prototype.stringToGlyphs=function(n,e){var t=this,r=new Cl,i=function(h){return t.charToGlyphIndex(h.char)};r.registerModifier("glyphIndex",null,i);var s=e?this.updateFeatures(e.features):this.defaultRenderOptions.features;r.applyFeatures(this,s);for(var o=r.getTextGlyphs(n),a=o.length,l=new Array(a),u=this.glyphs.get(0),c=0;c<a;c+=1)l[c]=this.glyphs.get(o[c])||u;return l};Br.prototype.nameToGlyphIndex=function(n){return this.glyphNames.nameToGlyphIndex(n)};Br.prototype.nameToGlyph=function(n){var e=this.nameToGlyphIndex(n),t=this.glyphs.get(e);return t||(t=this.glyphs.get(0)),t};Br.prototype.glyphIndexToName=function(n){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(n):""};Br.prototype.getKerningValue=function(n,e){n=n.index||n,e=e.index||e;var t=this.position.defaultKerningTables;return t?this.position.getKerningValue(t,n,e):this.kerningPairs[n+","+e]||0};Br.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]};Br.prototype.forEachGlyph=function(n,e,t,r,i,s){e=e!==void 0?e:0,t=t!==void 0?t:0,r=r!==void 0?r:72,i=Object.assign({},this.defaultRenderOptions,i);var o=1/this.unitsPerEm*r,a=this.stringToGlyphs(n,i),l;if(i.kerning){var u=i.script||this.position.getDefaultScriptName();l=this.position.getKerningTables(u,i.language)}for(var c=0;c<a.length;c+=1){var h=a[c];if(s.call(this,h,e,t,r,i),h.advanceWidth&&(e+=h.advanceWidth*o),i.kerning&&c<a.length-1){var d=l?this.position.getKerningValue(l,h.index,a[c+1].index):this.getKerningValue(h,a[c+1]);e+=d*o}i.letterSpacing?e+=i.letterSpacing*r:i.tracking&&(e+=i.tracking/1e3*r)}return e};Br.prototype.getPath=function(n,e,t,r,i){var s=new rs;return this.forEachGlyph(n,e,t,r,i,function(o,a,l,u){var c=o.getPath(a,l,u,i,this);s.extend(c)}),s};Br.prototype.getPaths=function(n,e,t,r,i){var s=[];return this.forEachGlyph(n,e,t,r,i,function(o,a,l,u){var c=o.getPath(a,l,u,i,this);s.push(c)}),s};Br.prototype.getAdvanceWidth=function(n,e,t){return this.forEachGlyph(n,0,0,e,t,function(){})};Br.prototype.draw=function(n,e,t,r,i,s){this.getPath(e,t,r,i,s).draw(n)};Br.prototype.drawPoints=function(n,e,t,r,i,s){this.forEachGlyph(e,t,r,i,s,function(o,a,l,u){o.drawPoints(n,a,l,u)})};Br.prototype.drawMetrics=function(n,e,t,r,i,s){this.forEachGlyph(e,t,r,i,s,function(o,a,l,u){o.drawMetrics(n,a,l,u)})};Br.prototype.getEnglishName=function(n){var e=this.names[n];if(e)return e.en};Br.prototype.validate=function(){var n=this;function e(r,i){}function t(r){var i=n.getEnglishName(r);i&&i.trim().length>0}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm>0};Br.prototype.toTables=function(){return $q.fontToTable(this)};Br.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()};Br.prototype.toArrayBuffer=function(){for(var n=this.toTables(),e=n.encode(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),i=0;i<e.length;i++)r[i]=e[i];return t};Br.prototype.download=function(n){var e=this.getEnglishName("fontFamily"),t=this.getEnglishName("fontSubfamily");n=n||e.replace(/\s/g,"")+"-"+t+".otf";var r=this.toArrayBuffer();if(Kq())if(window.URL=window.URL||window.webkitURL,window.URL){var i=new DataView(r),s=new Blob([i],{type:"font/opentype"}),o=document.createElement("a");o.href=window.URL.createObjectURL(s),o.download=n;var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!1),o.dispatchEvent(a)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var l=require("fs"),u=Jq(r);l.writeFileSync(n,u)}};Br.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};Br.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};Br.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var oc=new Array(10);oc[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{posFormat:1,coverage:this.parsePointer(lt.coverage),value:this.parseValueRecord()};if(t===2)return{posFormat:2,coverage:this.parsePointer(lt.coverage),values:this.parseValueRecordList()};Nn.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")};oc[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();Nn.assert(t===1||t===2,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var r=this.parsePointer(lt.coverage),i=this.parseUShort(),s=this.parseUShort();if(t===1)return{posFormat:t,coverage:r,valueFormat1:i,valueFormat2:s,pairSets:this.parseList(lt.pointer(lt.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(i),value2:this.parseValueRecord(s)}})))};if(t===2){var o=this.parsePointer(lt.classDef),a=this.parsePointer(lt.classDef),l=this.parseUShort(),u=this.parseUShort();return{posFormat:t,coverage:r,valueFormat1:i,valueFormat2:s,classDef1:o,classDef2:a,class1Count:l,class2Count:u,classRecords:this.parseList(l,lt.list(u,function(){return{value1:this.parseValueRecord(i),value2:this.parseValueRecord(s)}}))}}};oc[3]=function(){return{error:"GPOS Lookup 3 not supported"}};oc[4]=function(){return{error:"GPOS Lookup 4 not supported"}};oc[5]=function(){return{error:"GPOS Lookup 5 not supported"}};oc[6]=function(){return{error:"GPOS Lookup 6 not supported"}};oc[7]=function(){return{error:"GPOS Lookup 7 not supported"}};oc[8]=function(){return{error:"GPOS Lookup 8 not supported"}};oc[9]=function(){return{error:"GPOS Lookup 9 not supported"}};new Array(10);function QN(n,e){return typeof n!="number"||isNaN(n)?{valid:!1,message:`Parameter '${e}' must be a number`}:{valid:!0}}function c$(n,e){return n<=0?{valid:!1,message:`Parameter '${e}' must be positive`}:{valid:!0}}function h$(n,e,t){return n>=e?{valid:!1,message:`${t} (${n}) must be less than ${e}`}:{valid:!0}}function ou(n,e){const t=QN(n,e);return t.valid?c$(n,e):t}function f$(n,e,t){const r=QN(n,t);return r.valid?h$(n,e,t):r}function au(n,e){return t=>{const r=[];for(const i of e){const s=n(t[i],i);s.valid||r.push(s.message)}return{valid:r.length===0,errors:r}}}function E4(n,e){return t=>{const r=t[n],i=t[e],s=f$(r,i,n);return s.valid?{valid:!0,errors:[]}:{valid:!1,errors:[s.message]}}}function Wp({width:n=100,depth:e=100,height:t=100}){if(n===0&&e===0&&t===0)return Pg([0,0,0],[1e-7,1e-7,1e-7]);const r=n/2,i=e/2;return Pg([-r,-i,0],[r,i,t])}const d$={name:"Cuboid",create:Wp,params:[{name:"width",defaultValue:100},{name:"depth",defaultValue:100},{name:"height",defaultValue:100}],validators:[au(ou,["width","depth","height"])],hasExplosion:!1};function p$({radius:n=50}){return rj(n)}const m$={name:"Sphere",create:p$,params:[{name:"radius",defaultValue:50}],validators:[au(ou,["radius"])],hasExplosion:!1};function eI({radius:n=50,height:e=100}){return SN(n,e,[0,0,0],[0,0,-1])}const g$={name:"Cylinder",create:eI,params:[{name:"radius",defaultValue:50},{name:"height",defaultValue:100}],validators:[au(ou,["radius","height"])],hasExplosion:!1};function v$({aLength:n=80,bLength:e=50,cLength:t=30}){return oj(n,e,t)}const y$={name:"Ellipsoid",create:v$,params:[{name:"aLength",defaultValue:80},{name:"bLength",defaultValue:50},{name:"cLength",defaultValue:30}],validators:[au(ou,["aLength","bLength","cLength"])],hasExplosion:!1},tI=n=>n.boundingBox.center;function nI(n,e,t){return t.map(({position:r,direction:i,orientation:s})=>{const o=n(),a=e(o);let l=o.translate([r[0]-a[0],r[1]-a[1],r[2]-a[2]]);const u=[0,0,1],c=new Lt(s||i);if(c.Length>0){const h=new Lt(u).cross(c);if(h.Length>1e-10){const d=new Lt(u).getAngle(c);l=l.rotate(d,r,h)}else c.dot(new Lt(u))<0&&(l=l.rotate(180,r,[1,0,0]))}return l})}function rI(n,e,t,r,i,s=0,o=0,a=1){const l=new Lt([s,o,a]).normalized();return Array.from({length:e*t},(u,c)=>{const h=Math.floor(c/t),m=c%t*r,v=h*i,x=new Do(new Lt(n.origin),new Lt(n.xDirection).normalized(),new Lt(n.normal).normalized()).toWorldCoords([m,v,0]);return{position:[x.x,x.y,x.z],direction:[n.normal[0],n.normal[1],n.normal[2]],orientation:[l.x,l.y,l.z]}})}function x$(n,e,t,r=0,i=0,s=1){return rI({origin:n,xDirection:e,normal:(()=>{const o=new Lt(e),a=new Lt([0,0,1]),l=Math.abs(o.normalized().dot(a))>.99?new Lt([1,0,0]):o.cross(a).normalized();return[l.x,l.y,l.z]})()},1,t,t>1?new Lt(e).Length/(t-1):0,0,r,i,s)}function w$({count:n=5,vectorX:e=0,vectorY:t=50,vectorZ:r=50,originX:i=0,originY:s=0,originZ:o=0,boxWidth:a=10,boxDepth:l=10,boxHeight:u=10,orientationX:c=0,orientationY:h=0,orientationZ:d=1}){return l2(nI(()=>Wp({width:a,depth:l,height:u}),tI,x$([i,s,o],[e,t,r],n,c,h,d)))}const S$={name:"DiagonalCuboidPattern",create:w$,params:[{name:"count",defaultValue:5},{name:"vectorX",defaultValue:0},{name:"vectorY",defaultValue:50},{name:"vectorZ",defaultValue:50},{name:"originX",defaultValue:0},{name:"originY",defaultValue:0},{name:"originZ",defaultValue:0},{name:"boxWidth",defaultValue:10},{name:"boxDepth",defaultValue:10},{name:"boxHeight",defaultValue:10},{name:"orientationX",defaultValue:0},{name:"orientationY",defaultValue:0},{name:"orientationZ",defaultValue:1}],validators:[au(ou,["count","boxWidth","boxDepth","boxHeight"])],hasExplosion:!1};function _$({originX:n=0,originY:e=0,originZ:t=0,directionX:r=1,directionY:i=0,directionZ:s=0,normalX:o=0,normalY:a=0,normalZ:l=1,rowCount:u=3,colCount:c=3,xSpacing:h=30,ySpacing:d=30,boxWidth:m=10,boxDepth:v=10,boxHeight:w=10,orientationX:x=0,orientationY:g=0,orientationZ:S=1}){return l2(nI(()=>Wp({width:m,depth:v,height:w}),tI,rI({origin:[n,e,t],xDirection:[r,i,s],normal:[o,a,l]},u,c,h,d,x,g,S)))}const b$={name:"RectangularCuboidGrid",create:_$,params:[{name:"originX",defaultValue:0},{name:"originY",defaultValue:0},{name:"originZ",defaultValue:0},{name:"directionX",defaultValue:1},{name:"directionY",defaultValue:0},{name:"directionZ",defaultValue:0},{name:"normalX",defaultValue:0},{name:"normalY",defaultValue:0},{name:"normalZ",defaultValue:1},{name:"rowCount",defaultValue:3},{name:"colCount",defaultValue:3},{name:"xSpacing",defaultValue:30},{name:"ySpacing",defaultValue:30},{name:"boxWidth",defaultValue:10},{name:"boxDepth",defaultValue:10},{name:"boxHeight",defaultValue:10},{name:"orientationX",defaultValue:0},{name:"orientationY",defaultValue:0},{name:"orientationZ",defaultValue:1}],validators:[au(ou,["rowCount","colCount","xSpacing","ySpacing","boxWidth","boxDepth","boxHeight"])],hasExplosion:!1};function iI({depth:n=100,flangeXLenght:e=50,flangeYLenght:t=50,thickness:r=5}){const i=Pg([0,-n/2,0],[e,n/2,r]),s=Pg([0,-n/2,0],[r,n/2,t]);return i.fuse(s)}const M$={name:"LProfile",create:iI,params:[{name:"depth",defaultValue:100},{name:"flangeXLenght",defaultValue:50},{name:"flangeYLenght",defaultValue:50},{name:"thickness",defaultValue:5}],validators:[au(ou,["depth","flangeXLenght","flangeYLenght","thickness"]),E4("thickness","flangeXLenght"),E4("thickness","flangeYLenght")],hasExplosion:!1};function sI({bottomRadius:n=50,topRadius:e=25,height:t=100}){return HT(n,{plane:"XY",origin:[0,0,0]}).loftWith(HT(e,{plane:"XY",origin:[0,0,-t]}),{ruled:!0})}const E$={name:"Frustum",create:sI,params:[{name:"bottomRadius",defaultValue:50},{name:"topRadius",defaultValue:25},{name:"height",defaultValue:100}],validators:[au(ou,["bottomRadius","topRadius","height"])],hasExplosion:!1};function oI({bottomRadius:n=50,topRadius:e=25,frustumHeight:t=80,cylinderHeight:r=40}){return sI({bottomRadius:n,topRadius:e,height:t}).fuse(SN(e,r,[0,0,-t],[0,0,-1]))}const A$={name:"Drill",create:oI,params:[{name:"bottomRadius",defaultValue:50},{name:"topRadius",defaultValue:25},{name:"frustumHeight",defaultValue:80},{name:"cylinderHeight",defaultValue:40}],validators:[au(ou,["bottomRadius","topRadius","frustumHeight","cylinderHeight"])],hasExplosion:!1};function T$(n,e){return{main:n,helperSpaces:e}}const qn={FRONT:"front",BACK:"back",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom"},Kn={FRONT_LEFT:"front_left",FRONT_RIGHT:"front_right",FRONT_TOP:"front_top",FRONT_BOTTOM:"front_bottom",BACK_LEFT:"back_left",BACK_RIGHT:"back_right",BACK_TOP:"back_top",BACK_BOTTOM:"back_bottom",LEFT_TOP:"left_top",LEFT_BOTTOM:"left_bottom",RIGHT_TOP:"right_top",RIGHT_BOTTOM:"right_bottom"};function Yv(n){let e;switch(n){case qn.FRONT:e=new Lt([0,-1,0]);break;case qn.BACK:e=new Lt([0,1,0]);break;case qn.LEFT:e=new Lt([-1,0,0]);break;case qn.RIGHT:e=new Lt([1,0,0]);break;case qn.TOP:e=new Lt([0,0,1]);break;case qn.BOTTOM:e=new Lt([0,0,-1]);break;default:throw new Error(`Unknown face identifier: ${n}`)}return e}function aI(n,e){const[[t,r,i],[s,o,a]]=n.bounds;let l;switch(e){case Kn.FRONT_TOP:l=new Lt([t,r,a]);break;case Kn.FRONT_BOTTOM:l=new Lt([t,r,i]);break;case Kn.BACK_TOP:l=new Lt([t,o,a]);break;case Kn.BACK_BOTTOM:l=new Lt([t,o,i]);break;case Kn.LEFT_TOP:l=new Lt([t,r,a]);break;case Kn.LEFT_BOTTOM:l=new Lt([t,r,i]);break;case Kn.RIGHT_TOP:l=new Lt([s,r,a]);break;case Kn.RIGHT_BOTTOM:l=new Lt([s,r,i]);break;case Kn.FRONT_LEFT:l=new Lt([t,r,i]);break;case Kn.FRONT_RIGHT:l=new Lt([s,r,i]);break;case Kn.BACK_LEFT:l=new Lt([t,o,i]);break;case Kn.BACK_RIGHT:l=new Lt([s,o,i]);break;default:throw new Error(`Unknown edge identifier: ${e}`)}return l}function lI(n,e){const[[t,r,i],[s,o,a]]=n.bounds;let l;switch(e){case Kn.FRONT_TOP:l=new Lt([s,r,a]);break;case Kn.FRONT_BOTTOM:l=new Lt([s,r,i]);break;case Kn.BACK_TOP:l=new Lt([s,o,a]);break;case Kn.BACK_BOTTOM:l=new Lt([s,o,i]);break;case Kn.LEFT_TOP:l=new Lt([t,o,a]);break;case Kn.LEFT_BOTTOM:l=new Lt([t,o,i]);break;case Kn.RIGHT_TOP:l=new Lt([s,o,a]);break;case Kn.RIGHT_BOTTOM:l=new Lt([s,o,i]);break;case Kn.FRONT_LEFT:l=new Lt([t,r,a]);break;case Kn.FRONT_RIGHT:l=new Lt([s,r,a]);break;case Kn.BACK_LEFT:l=new Lt([t,o,a]);break;case Kn.BACK_RIGHT:l=new Lt([s,o,a]);break;default:throw new Error(`Unknown edge identifier: ${e}`)}return l}function C$(n){switch(n){case Kn.FRONT_LEFT:return[qn.FRONT,qn.LEFT];case Kn.FRONT_RIGHT:return[qn.FRONT,qn.RIGHT];case Kn.FRONT_TOP:return[qn.FRONT,qn.TOP];case Kn.FRONT_BOTTOM:return[qn.FRONT,qn.BOTTOM];case Kn.BACK_LEFT:return[qn.BACK,qn.LEFT];case Kn.BACK_RIGHT:return[qn.BACK,qn.RIGHT];case Kn.BACK_TOP:return[qn.BACK,qn.TOP];case Kn.BACK_BOTTOM:return[qn.BACK,qn.BOTTOM];case Kn.LEFT_TOP:return[qn.LEFT,qn.TOP];case Kn.LEFT_BOTTOM:return[qn.LEFT,qn.BOTTOM];case Kn.RIGHT_TOP:return[qn.RIGHT,qn.TOP];case Kn.RIGHT_BOTTOM:return[qn.RIGHT,qn.BOTTOM];default:throw new Error(`Unknown edge identifier: ${n}`)}}function L$(n,e,t=.5,r=.5){const[[i,s,o],[a,l,u]]=n.bounds,c=Math.max(0,Math.min(1,t)),h=Math.max(0,Math.min(1,r));let d;switch(e){case qn.FRONT:d=new Lt([i+(a-i)*c,s,o+(u-o)*h]);break;case qn.BACK:d=new Lt([i+(a-i)*c,l,o+(u-o)*h]);break;case qn.LEFT:d=new Lt([i,s+(l-s)*c,o+(u-o)*h]);break;case qn.RIGHT:d=new Lt([a,s+(l-s)*c,o+(u-o)*h]);break;case qn.TOP:d=new Lt([i+(a-i)*c,s+(l-s)*h,u]);break;case qn.BOTTOM:d=new Lt([i+(a-i)*c,s+(l-s)*h,o]);break;default:throw new Error(`Unknown face identifier: ${e}`)}return d}function P$(n,e,t=.5){const r=Math.max(0,Math.min(1,t)),i=aI(n,e),s=lI(n,e);return new Lt([i.x+(s.x-i.x)*r,i.y+(s.y-i.y)*r,i.z+(s.z-i.z)*r])}function R$(n,e){const{type:t,element:r,params:i={}}=e;switch(t){case"face":return L$(n,r,i.u,i.v);case"edge":return P$(n,r,i.t);case"corner":if(r.includes("START")){const s=r.replace("_START","");return aI(n,s)}else if(r.includes("END")){const s=r.replace("_END","");return lI(n,s)}else throw new Error(`Invalid corner identifier: ${r}`);case"center":return new Lt(n.center);default:throw new Error(`Unknown position type: ${t}`)}}function k$(n){const e=n.normalized(),t=Math.abs(e.x),r=Math.abs(e.y),i=Math.abs(e.z);let s;return t<=r&&t<=i?s=new Lt([0,e.z,-e.y]):r<=t&&r<=i?s=new Lt([e.z,0,-e.x]):s=new Lt([e.y,-e.x,0]),s.normalized()}function $v(n,e,t,r={}){const i=R$(n.boundingBox,e);let s;r.normal?s=new Lt(r.normal):s=N$(n,e,r);let o;r.xDir?o=new Lt(r.xDir):o=k$(s);const a=new $f;a.coordSystemChange({origin:i.toTuple(),zDir:s.toTuple(),xDir:o.toTuple()},"reference");const l=hi(a.transform(t.wrapped));return a.delete(),s.delete(),o.delete(),i.delete(),l}function N$(n,e,t={}){const{type:r,element:i}=e;switch(r){case"face":return Yv(i);case"edge":if(t.faceForEdge)return Yv(t.faceForEdge);{const s=C$(i);return Yv(s[0])}case"corner":return t.faceForCorner?Yv(t.faceForCorner):new Lt([0,0,1]);case"center":default:return new Lt([0,0,1])}}function ff(n,e,t,r=!1){return r?hi(n.wrapped).mirror(e,t):n.mirror(e,t)}function I$({width:n=50,depth:e=100,height:t=200,showHelper:r=!0,explosionFactor:i=0}){const s=Wp({width:n,depth:e,height:t}),o=Math.round(t/17.5)-1;if(o<=0)return T$(l2([]),r?[s]:[]);const a=t/(o+1),l=o>1?(e-28)/(o-1):0,u=Wp({width:n-1,depth:20,height:.5}),c=u.boundingBox.center,h=$v(u,{type:"face",element:qn.TOP,params:{u:1.5/(n-1),v:2.25/20}},oI({bottomRadius:1.2,topRadius:.8,frustumHeight:.5*.8,cylinderHeight:.5*.2})),d=u.cut(h).cut(ff(h,"XZ",c,!0)).cut(ff(h,"YZ",c,!0)).cut(ff(ff(h,"XZ",c,!0),"YZ",c,!0)),m=d.clone(),v=iI({depth:20,flangeXLenght:4.5,flangeYLenght:4.5,thickness:.5}),w=v.boundingBox.center,x=$v(v,{type:"face",element:qn.BOTTOM,params:{u:1.5/4.5,v:2.25/20}},eI({radius:.800001,height:.5})),g=v.cut(x).cut(ff(x,"XZ",w,!0)),S=g.clone(),_=$v(d,{type:"edge",element:Kn.LEFT_BOTTOM,params:{t:.5}},g,{normal:[0,0,-1],xDir:[1,0,0]}),T=ff(_,"YZ",c,!0),L=[];let P=0,N=-e/2+14,k=a-(d.boundingBox.bounds[1][2]-d.boundingBox.bounds[0][2]);for(let K=0;K<o;K++){const ae=i*15;L.push(d.clone().translate([P,N,k])),L.push(_.clone().translate([P-ae,N,k])),L.push(T.clone().translate([P+ae,N,k])),N+=l,k+=a}const R=Wp({width:600,depth:20,height:.5}),U=l,F=a,z=Math.sqrt(U*U+F*F),V=z>.001?[0,U/z,F/z]:[1,0,0],J=$v(s,{type:"face",element:qn.RIGHT},R,{normal:[-1,0,0],xDir:V}).intersect(s),ie=J.clone(),ce=s.boundingBox.center,W=ff(J,"YZ",ce,!0),Y=i*30,$=i*30;L.push(J.translate([Y,0,0])),L.push(W.translate([-$,0,0]));const oe=l2(L),D=[{id:"ST001",name:"Stringer",quantity:o,dimensions:`${n-1}200.5cm`,material:"Steel"},{id:"LP001",name:"L-Profile",quantity:o*2,dimensions:"4.54.520cm",material:"Steel"},{id:"SS001",name:"Side Stringer",quantity:2,dimensions:"Variable",material:"Steel"}];return{main:oe,helperSpaces:r?[s]:[],componentData:D,technicalDrawingModels:{ST001:m,LP001:S,SS001:ie}}}const D$={name:"Staircase",create:I$,params:[{name:"width",defaultValue:50},{name:"depth",defaultValue:100},{name:"height",defaultValue:200},{name:"showHelper",defaultValue:!0},{name:"explosionFactor",defaultValue:0}],validators:[au(ou,["width","depth","height"])],hasExplosion:!0},jc={Cuboid:d$,Sphere:m$,Cylinder:g$,Ellipsoid:y$,DiagonalCuboidPattern:S$,RectangularCuboidGrid:b$,LProfile:M$,Frustum:E$,Drill:A$,Staircase:D$};function A4(n){return n.params.reduce((e,t)=>(e[t.name]=t.defaultValue,e),{})}const bS=HL(new OW);function O$(){const[n,e]=qe.useState(Object.keys(jc)[0]),[t,r]=qe.useState(A4(jc[n])),[i,s]=qe.useState(0),[o,a]=qe.useState(null),[l,u]=qe.useState(null),[c,h]=qe.useState([]),[d,m]=qe.useState("3d"),[v,w]=qe.useState(!0),[x,g]=qe.useState(!1);qe.useEffect(()=>{const P=()=>{g(window.innerWidth<768),window.innerWidth<768?w(!1):w(!0)};return P(),window.addEventListener("resize",P),()=>window.removeEventListener("resize",P)},[]),qe.useEffect(()=>{h([]),console.time(`[PERF] worker call for ${n}`),console.log(`[INFO] Creating ${n} with params:`,t);const P={...t};jc[n].hasExplosion&&(P.explosionFactor=i),bS.createMesh(n,P).then(N=>{console.timeEnd(`[PERF] worker call for ${n}`),N.error&&N.validationErrors?(h(N.validationErrors),a(null),u(null)):(a(N),d==="technical"&&bS.createProjections(n,P).then(k=>{u(k)}))})},[n,t,i]),qe.useEffect(()=>{if(d==="technical"&&o&&!l){const P={...t};jc[n].hasExplosion&&(P.explosionFactor=i),bS.createProjections(n,P).then(N=>{u(N)})}},[d]);const S=P=>{const N=P.target.value;e(N),r(A4(jc[N])),s(0),u(null)},_=(P,N)=>{r(k=>({...k,[P]:N}))},T=P=>{s(parseFloat(P.target.value))},L=()=>{w(!v)};return gt(jp,{children:[gt("div",{style:{padding:x?"8px":"10px",borderBottom:"1px solid #eee",backgroundColor:"#f8f8f8",fontSize:x?"11px":"12px",margin:0,flexShrink:0},children:[gt("div",{style:{display:"flex",flexDirection:x?"column":"row",alignItems:x?"flex-start":"center",marginBottom:"10px",gap:x?"8px":"0"},children:[gt("div",{style:{display:"flex",alignItems:"center",width:x?"100%":"auto"},children:[pe("span",{style:{marginRight:"5px",fontWeight:"bold"},children:"Model:"}),pe("select",{value:n,onChange:S,style:{marginRight:"10px",height:x?"30px":"24px",fontSize:x?"14px":"12px",flex:x?"1":"auto"},children:Object.keys(jc).map(P=>pe("option",{value:P,children:P},P))})]}),gt("div",{style:{display:"flex",marginLeft:x?"0":"20px",borderRadius:"4px",overflow:"hidden",border:"1px solid #ccc",width:x?"100%":"auto"},children:[pe("button",{onClick:()=>m("3d"),style:{padding:x?"8px 12px":"4px 12px",border:"none",background:d==="3d"?"#4a90e2":"#f0f0f0",color:d==="3d"?"white":"#333",cursor:"pointer",fontWeight:d==="3d"?"bold":"normal",flex:x?"1":"auto",fontSize:x?"14px":"inherit"},children:"3D View"}),pe("button",{onClick:()=>m("technical"),style:{padding:x?"8px 12px":"4px 12px",border:"none",background:d==="technical"?"#4a90e2":"#f0f0f0",color:d==="technical"?"white":"#333",cursor:"pointer",fontWeight:d==="technical"?"bold":"normal",flex:x?"1":"auto",fontSize:x?"14px":"inherit"},children:"Technical Drawing"}),pe("button",{onClick:()=>m("rendering"),style:{padding:x?"8px 12px":"4px 12px",border:"none",background:d==="rendering"?"#4a90e2":"#f0f0f0",color:d==="rendering"?"white":"#333",cursor:"pointer",fontWeight:d==="rendering"?"bold":"normal",flex:x?"1":"auto",fontSize:x?"14px":"inherit"},children:"360 Rendering"})]}),x&&pe("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:"4px"},children:pe("button",{onClick:L,style:{padding:"8px 16px",background:"#eee",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px",cursor:"pointer",width:"100%"},children:v?"Hide Parameters ":"Show Parameters "})}),d==="3d"&&jc[n].hasExplosion&&gt("div",{style:{display:"flex",alignItems:"center",marginLeft:x?"0":"15px",backgroundColor:"#e6f7ff",padding:"5px 10px",borderRadius:"4px",width:x?"100%":"auto",marginTop:x?"4px":"0"},children:[pe("span",{style:{marginRight:"8px",fontWeight:"bold"},children:"Explosion:"}),pe("input",{type:"range",min:"0",max:"1",step:"0.01",value:i,onChange:T,style:{width:x?"calc(100% - 100px)":"150px",height:x?"24px":"auto"}}),gt("span",{style:{marginLeft:"5px",minWidth:"40px"},children:[Math.round(i*100),"%"]})]})]}),pe("div",{style:{display:v?"flex":"none",flexWrap:"wrap",gap:"10px",margin:0,padding:0},children:jc[n].params.map(P=>{const{name:N,defaultValue:k}=P;if(N==="explosionFactor")return null;const R=t[N];return gt("div",{style:{display:"flex",alignItems:"center",backgroundColor:"#fff",border:"1px solid #ccc",padding:x?"8px":"5px 8px",borderRadius:"4px",width:x?"calc(50% - 5px)":"auto"},children:[gt("span",{style:{marginRight:"8px",fontWeight:"bold",color:"#333",fontSize:x?"13px":"inherit"},children:[N,":"]}),typeof k=="boolean"?pe("input",{id:`param-${N}`,type:"checkbox",checked:R,onChange:F=>_(N,F.target.checked),style:{width:x?"20px":"auto",height:x?"20px":"auto"}}):pe("input",{id:`param-${N}`,type:"number",value:R,onChange:F=>_(N,parseFloat(F.target.value)),style:{width:x?"calc(100% - 50px)":"60px",height:x?"30px":"20px",fontSize:x?"14px":"12px",flex:x?"1":"none"}})]},N)})}),c.length>0&&gt("div",{style:{marginTop:"10px",padding:"8px 12px",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",fontSize:x?"13px":"12px"},children:[pe("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Invalid parameters:"}),pe("ul",{style:{margin:"0",paddingLeft:"20px"},children:c.map((P,N)=>pe("li",{children:P},N))})]})]}),pe("div",{style:{flex:1,position:"relative",overflow:"hidden",display:"flex",margin:0,padding:0},children:c.length>0?pe("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:x?"14px":"12px",color:"#999",padding:"0 20px",textAlign:"center"},children:"Fix parameters to see model"}):gt(jp,{children:[d==="3d"&&o?pe(vG,{children:pe(yG,{edges:o.edges,faces:o.faces,helperSpaces:o.helperSpaces||[]})}):null,d==="technical"?l?pe(CW,{projections:l,isMobile:x}):pe("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:x?"14px":"12px",color:"#999"},children:"Loading technical drawings..."}):null,d==="rendering"?o?pe(DW,{mesh:o,isMobile:x}):pe("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:x?"14px":"12px",color:"#999"},children:"Loading 360 rendering..."}):null]})})]})}function F$(){return gt("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"2rem",color:"#1E293B",overflowX:"hidden"},children:[gt("div",{style:{marginBottom:"4rem"},children:[gt("div",{style:{display:"flex",alignItems:"center",marginBottom:"2rem",gap:"1rem"},children:[pe("div",{style:{width:"4px",height:"2rem",backgroundColor:"#2563EB",borderRadius:"2px"}}),pe("h1",{style:{fontSize:"2.25rem",fontWeight:"800",margin:0},children:"About Me"})]}),gt("div",{style:{display:"flex",gap:"2rem",alignItems:"flex-start",marginBottom:"2rem"},children:[pe("div",{style:{flexShrink:0,width:"180px",height:"180px",borderRadius:"50%",overflow:"hidden",border:"4px solid #E2E8F0",boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},children:pe("img",{src:"https://raw.githubusercontent.com/damjanbab/cad-os/main/assets/profile.jpg",alt:"Damjan Babic",style:{width:"100%",height:"100%",objectFit:"cover"},onError:n=>{const e=["./assets/profile.jpg","/cad-os/assets/profile.jpg","https://raw.githubusercontent.com/haloedDepth/cad-os/main/assets/profile.jpg"],t=n.target.src,r=e.find(i=>i!==t);r?n.target.src=r:n.target.src="https://via.placeholder.com/180x180?text=Profile"}})}),gt("div",{style:{flex:1,minWidth:0},children:[pe("p",{style:{fontSize:"1.125rem",lineHeight:"1.7",color:"#475569",marginBottom:"1rem"},children:"I'm a 31-year-old Croatian professional with a background in Marine Engineering and over a decade of experience in 3D modeling using commercial software. My expertise lies in parametric and programmatic CAD solutions that deliver precise, adaptable models for engineering and manufacturing applications."}),pe("p",{style:{fontSize:"1.125rem",lineHeight:"1.7",color:"#475569",marginBottom:"1rem"},children:"Through self-study, I've developed strong programming skills in JavaScript, Python, Clojure, and various frontend technologies, allowing me to create custom solutions that merge engineering precision with modern web technologies. This combination enables me to offer unique, cost-effective services that traditional CAD approaches can't match."}),pe("p",{style:{fontSize:"1.125rem",lineHeight:"1.7",color:"#475569"},children:"This site serves as my professional portfolio, showcasing the capabilities of my parametric CAD services while demonstrating the technical implementation through interactive demos that potential clients can explore."})]})]})]}),gt("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem",marginBottom:"4rem"},children:[pe(MS,{icon:pe("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:pe("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),title:"Engineering Background",description:"With a formal education in Marine Engineering, I bring a strong technical foundation to every project. This background ensures that all models meet rigorous engineering standards and real-world functionality requirements."}),pe(MS,{icon:gt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[pe("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),pe("polyline",{points:"2 17 12 22 22 17"}),pe("polyline",{points:"2 12 12 17 22 12"})]}),title:"3D Modeling Expertise",description:"Over 10 years of experience with commercial 3D modeling software has given me proficiency in creating complex models across various industries. I specialize in parametric design that allows for rapid iterations and modifications."}),pe(MS,{icon:gt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[pe("path",{d:"M18 10h-4V4h-4v6H6l6 6 6-6z"}),pe("path",{d:"M8 18h8"})]}),title:"Programming Skills",description:"Self-taught programming knowledge in JavaScript, Python, Clojure, and frontend technologies enables me to create custom parametric solutions that bridge the gap between traditional CAD and modern web applications."})]}),gt("div",{style:{backgroundColor:"#F8FAFC",padding:"3rem",borderRadius:"0.5rem",marginBottom:"4rem"},children:[pe("h2",{style:{fontSize:"1.75rem",fontWeight:"700",marginBottom:"2rem",textAlign:"center"},children:"Technology Stack"}),gt("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem"},children:[pe(lp,{name:"Replicad",description:"JavaScript CAD framework based on OpenCascade geometry kernel, enabling powerful programmatic 3D modeling",link:"https://replicad.xyz/"}),pe(lp,{name:"Three.js",description:"3D graphics library for rendering complex geometry in the browser with high performance",link:"https://threejs.org/"}),pe(lp,{name:"React Three Fiber",description:"React renderer for Three.js, making 3D graphics declarative and easier to work with",link:"https://docs.pmnd.rs/react-three-fiber"}),pe(lp,{name:"Web-Based Production",description:"Client-side rendering and processing for secure, real-time collaboration and feedback",link:"#"}),pe(lp,{name:"Parametric Design",description:"Custom parametric approach allowing for instant model updates based on changing parameters",link:"#"}),pe(lp,{name:"Open Source Core",description:"Built on open-source technologies to provide cost-effective solutions without compromising quality",link:"#"})]})]}),gt("div",{style:{marginBottom:"4rem"},children:[pe("h2",{style:{fontSize:"1.75rem",fontWeight:"700",marginBottom:"2rem"},children:"My Service Process"}),gt("div",{style:{display:"flex",flexDirection:"column",gap:"2rem"},children:[pe("div",{style:{width:"100%",maxWidth:"100%"},children:gt("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[pe("div",{style:{fontSize:"2rem",fontWeight:"800",color:"#2563EB",lineHeight:"1",flexShrink:0},children:"01"}),gt("div",{style:{flex:1,minWidth:0},children:[pe("h3",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.5rem"},children:"Client Consultation"}),pe("p",{style:{color:"#475569",fontSize:"1rem",lineHeight:"1.6"},children:"We begin with a detailed discussion about your project needs, including technical requirements, use cases, and design parameters. This consultation ensures I fully understand your vision."})]})]})}),pe("div",{style:{width:"100%",maxWidth:"100%"},children:gt("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[pe("div",{style:{fontSize:"2rem",fontWeight:"800",color:"#2563EB",lineHeight:"1",flexShrink:0},children:"02"}),gt("div",{style:{flex:1,minWidth:0},children:[pe("h3",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.5rem"},children:"Parametric Model Development"}),pe("p",{style:{color:"#475569",fontSize:"1rem",lineHeight:"1.6"},children:"I create a parametric model framework that captures the essential components and relationships of your design, making it easy to adjust and refine throughout the development process."})]})]})}),pe("div",{style:{width:"100%",maxWidth:"100%"},children:gt("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[pe("div",{style:{fontSize:"2rem",fontWeight:"800",color:"#2563EB",lineHeight:"1",flexShrink:0},children:"03"}),gt("div",{style:{flex:1,minWidth:0},children:[pe("h3",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.5rem"},children:"Interactive Collaboration"}),pe("p",{style:{color:"#475569",fontSize:"1rem",lineHeight:"1.6"},children:"You'll receive secure access to view your model's development in real-time, allowing you to provide feedback and request adjustments as the work progresses."})]})]})}),pe("div",{style:{width:"100%",maxWidth:"100%"},children:gt("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[pe("div",{style:{fontSize:"2rem",fontWeight:"800",color:"#2563EB",lineHeight:"1",flexShrink:0},children:"04"}),gt("div",{style:{flex:1,minWidth:0},children:[pe("h3",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.5rem"},children:"Technical Drawing Generation"}),pe("p",{style:{color:"#475569",fontSize:"1rem",lineHeight:"1.6"},children:"Once the 3D model meets your requirements, I generate detailed technical drawings suitable for manufacturing, including dimensions, tolerances, and material specifications."})]})]})}),pe("div",{style:{width:"100%",maxWidth:"100%"},children:gt("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[pe("div",{style:{fontSize:"2rem",fontWeight:"800",color:"#2563EB",lineHeight:"1",flexShrink:0},children:"05"}),gt("div",{style:{flex:1,minWidth:0},children:[pe("h3",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.5rem"},children:"Rendering & Visualization"}),pe("p",{style:{color:"#475569",fontSize:"1rem",lineHeight:"1.6"},children:"High-quality renders and visualizations bring your design to life, perfect for presentations, marketing materials, or assembly instructions."})]})]})}),pe("div",{style:{width:"100%",maxWidth:"100%"},children:gt("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[pe("div",{style:{fontSize:"2rem",fontWeight:"800",color:"#2563EB",lineHeight:"1",flexShrink:0},children:"06"}),gt("div",{style:{flex:1,minWidth:0},children:[pe("h3",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.5rem"},children:"Delivery & Support"}),pe("p",{style:{color:"#475569",fontSize:"1rem",lineHeight:"1.6"},children:"You receive all files in your preferred formats, along with documentation and continued support to ensure the models meet your needs as they move into production."})]})]})})]})]}),gt("div",{id:"contact",style:{padding:"3rem",backgroundColor:"#1E293B",color:"white",borderRadius:"0.5rem",marginBottom:"4rem"},children:[pe("h2",{style:{fontSize:"1.75rem",fontWeight:"700",marginBottom:"1.5rem",textAlign:"center"},children:"Let's Work Together"}),pe("p",{style:{textAlign:"center",maxWidth:"700px",margin:"0 auto",marginBottom:"2.5rem",color:"#CBD5E1"},children:"Have a project in mind or need a custom 3D modeling solution? I'd love to hear about your requirements and discuss how my services can bring your ideas to reality."}),gt("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",maxWidth:"700px",margin:"0 auto"},children:[pe("a",{href:"mailto:damjanbab@icloud.com",style:{textDecoration:"none"},children:gt("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"1.5rem",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"0.5rem",transition:"background-color 0.2s",cursor:"pointer"},onMouseOver:n=>{n.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseOut:n=>{n.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},children:[pe("div",{style:{marginBottom:"1rem",color:"#60A5FA"},children:gt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[pe("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),pe("polyline",{points:"22,6 12,13 2,6"})]})}),pe("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"0.5rem",color:"white"},children:"Email"}),pe("p",{style:{color:"#E2E8F0",fontSize:"0.875rem",textAlign:"center"},children:"damjanbab@icloud.com"})]})}),pe("a",{href:"https://github.com/haloedDepth",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:gt("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"1.5rem",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"0.5rem",transition:"background-color 0.2s",cursor:"pointer"},onMouseOver:n=>{n.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseOut:n=>{n.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},children:[pe("div",{style:{marginBottom:"1rem",color:"#60A5FA"},children:pe("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:pe("path",{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"})})}),pe("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"0.5rem",color:"white"},children:"GitHub"}),pe("p",{style:{color:"#E2E8F0",fontSize:"0.875rem",textAlign:"center"},children:"github.com/haloedDepth"})]})}),pe("a",{href:"https://www.linkedin.com/in/damjanbabic/",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:gt("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"1.5rem",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"0.5rem",transition:"background-color 0.2s",cursor:"pointer"},onMouseOver:n=>{n.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseOut:n=>{n.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},children:[pe("div",{style:{marginBottom:"1rem",color:"#60A5FA"},children:gt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[pe("path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"}),pe("rect",{x:"2",y:"9",width:"4",height:"12"}),pe("circle",{cx:"4",cy:"4",r:"2"})]})}),pe("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"0.5rem",color:"white"},children:"LinkedIn"}),pe("p",{style:{color:"#E2E8F0",fontSize:"0.875rem",textAlign:"center"},children:"linkedin.com/in/damjanbabic"})]})})]}),gt("div",{style:{marginTop:"3rem",display:"flex",justifyContent:"center",gap:"1.5rem"},children:[pe("a",{href:"https://github.com/haloedDepth",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"3rem",height:"3rem",borderRadius:"50%",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"white",transition:"background-color 0.2s",cursor:"pointer"},onMouseOver:n=>{n.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)"},onMouseOut:n=>{n.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},children:pe("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:pe("path",{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"})})}),pe("a",{href:"https://www.linkedin.com/in/damjanbabic/",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"3rem",height:"3rem",borderRadius:"50%",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"white",transition:"background-color 0.2s",cursor:"pointer"},onMouseOver:n=>{n.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)"},onMouseOut:n=>{n.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},children:gt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[pe("path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"}),pe("rect",{x:"2",y:"9",width:"4",height:"12"}),pe("circle",{cx:"4",cy:"4",r:"2"})]})}),pe("a",{href:"mailto:damjanbab@icloud.com",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"3rem",height:"3rem",borderRadius:"50%",backgroundColor:"rgba(255, 255, 255, 0.1)",color:"white",transition:"background-color 0.2s",cursor:"pointer"},onMouseOver:n=>{n.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.2)"},onMouseOut:n=>{n.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},children:gt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[pe("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),pe("polyline",{points:"22,6 12,13 2,6"})]})})]})]}),gt("footer",{style:{textAlign:"center",padding:"2rem 0",color:"#64748B",borderTop:"1px solid #E2E8F0"},children:[gt("p",{style:{marginBottom:"0.5rem"},children:[" ",new Date().getFullYear()," CAD-OS. All rights reserved."]}),pe("p",{style:{fontSize:"0.875rem"},children:"Built with React, Three.js, and Replicad."})]})]})}function MS({icon:n,title:e,description:t}){return gt("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",border:"1px solid #E2E8F0"},children:[pe("div",{style:{color:"#2563EB",marginBottom:"1rem",display:"inline-flex",padding:"0.75rem",backgroundColor:"#EFF6FF",borderRadius:"0.5rem"},children:n}),pe("h3",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.75rem"},children:e}),pe("p",{style:{color:"#475569",lineHeight:"1.5"},children:t})]})}function lp({name:n,description:e,link:t}){return gt("div",{style:{display:"flex",flexDirection:"column",padding:"1.5rem",backgroundColor:"white",borderRadius:"0.375rem",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)",border:"1px solid #E2E8F0",height:"100%"},children:[pe("h3",{style:{fontSize:"1.125rem",fontWeight:"700",marginBottom:"0.625rem",color:"#1E293B"},children:n}),pe("p",{style:{color:"#64748B",fontSize:"0.875rem",marginBottom:"1rem",flex:"1"},children:e}),t!=="#"&&gt("a",{href:t,target:"_blank",rel:"noopener noreferrer",style:{color:"#2563EB",textDecoration:"none",fontWeight:"600",fontSize:"0.875rem",display:"inline-flex",alignItems:"center",marginTop:"auto"},children:["Learn more",gt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginLeft:"0.25rem"},children:[pe("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),pe("polyline",{points:"12 5 19 12 12 19"})]})]})]})}function U$(){const[n,e]=qe.useState("home"),t=r=>{e(r)};return qe.useEffect(()=>{const r=i=>{i.detail&&t(i.detail)};return window.addEventListener("switchToTab",r),()=>window.removeEventListener("switchToTab",r)},[]),gt("div",{style:{height:"100vh",display:"flex",flexDirection:"column",overflow:"hidden",margin:0,padding:0},children:[gt("nav",{style:{backgroundColor:"#1E293B",color:"white",padding:"0.75rem 1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",margin:0,flexShrink:0},children:[gt("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[pe("h1",{style:{margin:0,fontSize:"1.5rem",fontWeight:"600",color:"#F8FAFC"},children:"CAD-OS"}),pe("span",{style:{fontSize:"0.8rem",backgroundColor:"#0EA5E9",padding:"0.2rem 0.5rem",borderRadius:"0.25rem",color:"white"},children:"v0.18.1"})]}),gt("div",{style:{display:"flex",gap:"0.5rem"},children:[pe("button",{onClick:()=>t("home"),style:{backgroundColor:n==="home"?"#2563EB":"transparent",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"0.25rem",cursor:"pointer",fontWeight:n==="home"?"600":"400",transition:"background-color 0.2s"},children:"Home"}),pe("button",{onClick:()=>t("app"),style:{backgroundColor:n==="app"?"#2563EB":"transparent",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"0.25rem",cursor:"pointer",fontWeight:n==="app"?"600":"400",transition:"background-color 0.2s"},children:"App"}),pe("button",{onClick:()=>t("about"),style:{backgroundColor:n==="about"?"#2563EB":"transparent",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"0.25rem",cursor:"pointer",fontWeight:n==="about"?"600":"400",transition:"background-color 0.2s"},children:"About"})]})]}),n==="home"&&pe("div",{style:{flex:1,overflow:"auto"},children:pe(VD,{})}),n==="app"&&pe(O$,{}),n==="about"&&pe("div",{style:{flex:1,overflow:"auto"},children:pe(F$,{})})]})}function B$(){return qe.useEffect(()=>{const n=e=>{e.detail&&window.dispatchEvent(new CustomEvent("switchToTab",{detail:e.detail}))};return window.addEventListener("switchTab",n),()=>{window.removeEventListener("switchTab",n)}},[]),pe(U$,{})}GD.render(pe(I4.StrictMode,{children:pe(B$,{})}),document.getElementById("root"));export{Tr as _,z$ as c};
