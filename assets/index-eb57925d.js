var CB=Object.defineProperty;var PB=(n,e,t)=>e in n?CB(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Vr=(n,e,t)=>(PB(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var ose=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var cv={},RB={get exports(){return cv},set exports(n){cv=n}},vw={},de={},LB={get exports(){return de},set exports(n){de=n}},rr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r1=Symbol.for("react.element"),kB=Symbol.for("react.portal"),IB=Symbol.for("react.fragment"),NB=Symbol.for("react.strict_mode"),FB=Symbol.for("react.profiler"),DB=Symbol.for("react.provider"),OB=Symbol.for("react.context"),BB=Symbol.for("react.forward_ref"),UB=Symbol.for("react.suspense"),zB=Symbol.for("react.memo"),HB=Symbol.for("react.lazy"),gT=Symbol.iterator;function GB(n){return n===null||typeof n!="object"?null:(n=gT&&n[gT]||n["@@iterator"],typeof n=="function"?n:null)}var P4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R4=Object.assign,L4={};function gg(n,e,t){this.props=n,this.context=e,this.refs=L4,this.updater=t||P4}gg.prototype.isReactComponent={};gg.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};gg.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function k4(){}k4.prototype=gg.prototype;function EE(n,e,t){this.props=n,this.context=e,this.refs=L4,this.updater=t||P4}var AE=EE.prototype=new k4;AE.constructor=EE;R4(AE,gg.prototype);AE.isPureReactComponent=!0;var vT=Array.isArray,I4=Object.prototype.hasOwnProperty,TE={current:null},N4={key:!0,ref:!0,__self:!0,__source:!0};function F4(n,e,t){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)I4.call(e,r)&&!N4.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:r1,type:n,key:o,ref:s,props:i,_owner:TE.current}}function VB(n,e){return{$$typeof:r1,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function CE(n){return typeof n=="object"&&n!==null&&n.$$typeof===r1}function WB(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var yT=/\/+/g;function GS(n,e){return typeof n=="object"&&n!==null&&n.key!=null?WB(""+n.key):e.toString(36)}function I2(n,e,t,r,i){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var s=!1;if(n===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(n.$$typeof){case r1:case kB:s=!0}}if(s)return s=n,i=i(s),n=r===""?"."+GS(s,0):r,vT(i)?(t="",n!=null&&(t=n.replace(yT,"$&/")+"/"),I2(i,e,t,"",function(u){return u})):i!=null&&(CE(i)&&(i=VB(i,t+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(yT,"$&/")+"/")+n)),e.push(i)),1;if(s=0,r=r===""?".":r+":",vT(n))for(var a=0;a<n.length;a++){o=n[a];var l=r+GS(o,a);s+=I2(o,e,t,l,i)}else if(l=GB(n),typeof l=="function")for(n=l.call(n),a=0;!(o=n.next()).done;)o=o.value,l=r+GS(o,a++),s+=I2(o,e,t,l,i);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function iy(n,e,t){if(n==null)return n;var r=[],i=0;return I2(n,r,"","",function(o){return e.call(t,o,i++)}),r}function jB(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ds={current:null},N2={transition:null},qB={ReactCurrentDispatcher:Ds,ReactCurrentBatchConfig:N2,ReactCurrentOwner:TE};rr.Children={map:iy,forEach:function(n,e,t){iy(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return iy(n,function(){e++}),e},toArray:function(n){return iy(n,function(e){return e})||[]},only:function(n){if(!CE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};rr.Component=gg;rr.Fragment=IB;rr.Profiler=FB;rr.PureComponent=EE;rr.StrictMode=NB;rr.Suspense=UB;rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qB;rr.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=R4({},n.props),i=n.key,o=n.ref,s=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=TE.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)I4.call(e,l)&&!N4.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:r1,type:n.type,key:i,ref:o,props:r,_owner:s}};rr.createContext=function(n){return n={$$typeof:OB,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:DB,_context:n},n.Consumer=n};rr.createElement=F4;rr.createFactory=function(n){var e=F4.bind(null,n);return e.type=n,e};rr.createRef=function(){return{current:null}};rr.forwardRef=function(n){return{$$typeof:BB,render:n}};rr.isValidElement=CE;rr.lazy=function(n){return{$$typeof:HB,_payload:{_status:-1,_result:n},_init:jB}};rr.memo=function(n,e){return{$$typeof:zB,type:n,compare:e===void 0?null:e}};rr.startTransition=function(n){var e=N2.transition;N2.transition={};try{n()}finally{N2.transition=e}};rr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};rr.useCallback=function(n,e){return Ds.current.useCallback(n,e)};rr.useContext=function(n){return Ds.current.useContext(n)};rr.useDebugValue=function(){};rr.useDeferredValue=function(n){return Ds.current.useDeferredValue(n)};rr.useEffect=function(n,e){return Ds.current.useEffect(n,e)};rr.useId=function(){return Ds.current.useId()};rr.useImperativeHandle=function(n,e,t){return Ds.current.useImperativeHandle(n,e,t)};rr.useInsertionEffect=function(n,e){return Ds.current.useInsertionEffect(n,e)};rr.useLayoutEffect=function(n,e){return Ds.current.useLayoutEffect(n,e)};rr.useMemo=function(n,e){return Ds.current.useMemo(n,e)};rr.useReducer=function(n,e,t){return Ds.current.useReducer(n,e,t)};rr.useRef=function(n){return Ds.current.useRef(n)};rr.useState=function(n){return Ds.current.useState(n)};rr.useSyncExternalStore=function(n,e,t){return Ds.current.useSyncExternalStore(n,e,t)};rr.useTransition=function(){return Ds.current.useTransition()};rr.version="18.2.0";(function(n){n.exports=rr})(LB);const D4=gw(de);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $B=de,XB=Symbol.for("react.element"),YB=Symbol.for("react.fragment"),ZB=Object.prototype.hasOwnProperty,KB=$B.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,JB={key:!0,ref:!0,__self:!0,__source:!0};function O4(n,e,t){var r,i={},o=null,s=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)ZB.call(e,r)&&!JB.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:XB,type:n,key:o,ref:s,props:i,_owner:KB.current}}vw.Fragment=YB;vw.jsx=O4;vw.jsxs=O4;(function(n){n.exports=vw})(RB);const Xm=cv.Fragment,ce=cv.jsx,Je=cv.jsxs;var Kb={},QB={get exports(){return Kb},set exports(n){Kb=n}},Aa={},Jb={},eU={get exports(){return Jb},set exports(n){Jb=n}},B4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(V,J){var j=V.length;V.push(J);e:for(;0<j;){var ie=j-1>>>1,D=V[ie];if(0<i(D,J))V[ie]=J,V[j]=D,j=ie;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var J=V[0],j=V.pop();if(j!==J){V[0]=j;e:for(var ie=0,D=V.length,q=D>>>1;ie<q;){var Z=2*(ie+1)-1,Q=V[Z],se=Z+1,me=V[se];if(0>i(Q,j))se<D&&0>i(me,Q)?(V[ie]=me,V[se]=j,ie=se):(V[ie]=Q,V[Z]=j,ie=Z);else if(se<D&&0>i(me,j))V[ie]=me,V[se]=j,ie=se;else break e}}return J}function i(V,J){var j=V.sortIndex-J.sortIndex;return j!==0?j:V.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,h=null,f=3,d=!1,v=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(V){for(var J=t(u);J!==null;){if(J.callback===null)r(u);else if(J.startTime<=V)r(u),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(u)}}function E(V){if(y=!1,_(V),!v)if(t(l)!==null)v=!0,ee(C);else{var J=t(u);J!==null&&le(E,J.startTime-V)}}function C(V,J){v=!1,y&&(y=!1,g(R),R=-1),d=!0;var j=f;try{for(_(J),h=t(l);h!==null&&(!(h.expirationTime>J)||V&&!N());){var ie=h.callback;if(typeof ie=="function"){h.callback=null,f=h.priorityLevel;var D=ie(h.expirationTime<=J);J=n.unstable_now(),typeof D=="function"?h.callback=D:h===t(l)&&r(l),_(J)}else r(l);h=t(l)}if(h!==null)var q=!0;else{var Z=t(u);Z!==null&&le(E,Z.startTime-J),q=!1}return q}finally{h=null,f=j,d=!1}}var I=!1,F=null,R=-1,k=5,L=-1;function N(){return!(n.unstable_now()-L<k)}function z(){if(F!==null){var V=n.unstable_now();L=V;var J=!0;try{J=F(!0,V)}finally{J?H():(I=!1,F=null)}}else I=!1}var H;if(typeof S=="function")H=function(){S(z)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,K=G.port2;G.port1.onmessage=z,H=function(){K.postMessage(null)}}else H=function(){x(z,0)};function ee(V){F=V,I||(I=!0,H())}function le(V,J){R=x(function(){V(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){v||d||(v=!0,ee(C))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(V){switch(f){case 1:case 2:case 3:var J=3;break;default:J=f}var j=f;f=J;try{return V()}finally{f=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,J){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var j=f;f=V;try{return J()}finally{f=j}},n.unstable_scheduleCallback=function(V,J,j){var ie=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?ie+j:ie):j=ie,V){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=j+D,V={id:c++,callback:J,priorityLevel:V,startTime:j,expirationTime:D,sortIndex:-1},j>ie?(V.sortIndex=j,e(u,V),t(l)===null&&V===t(u)&&(y?(g(R),R=-1):y=!0,le(E,j-ie))):(V.sortIndex=D,e(l,V),v||d||(v=!0,ee(C))),V},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(V){var J=f;return function(){var j=f;f=J;try{return V.apply(this,arguments)}finally{f=j}}}})(B4);(function(n){n.exports=B4})(eU);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U4=de,Ma=Jb;function kt(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var z4=new Set,hv={};function qd(n,e){Ym(n,e),Ym(n+"Capture",e)}function Ym(n,e){for(hv[n]=e,n=0;n<e.length;n++)z4.add(e[n])}var Ic=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Qb=Object.prototype.hasOwnProperty,tU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xT={},wT={};function nU(n){return Qb.call(wT,n)?!0:Qb.call(xT,n)?!1:tU.test(n)?wT[n]=!0:(xT[n]=!0,!1)}function rU(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function iU(n,e,t,r){if(e===null||typeof e>"u"||rU(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Os(n,e,t,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Zo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Zo[n]=new Os(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Zo[e]=new Os(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Zo[n]=new Os(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Zo[n]=new Os(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Zo[n]=new Os(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Zo[n]=new Os(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Zo[n]=new Os(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Zo[n]=new Os(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Zo[n]=new Os(n,5,!1,n.toLowerCase(),null,!1,!1)});var PE=/[\-:]([a-z])/g;function RE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(PE,RE);Zo[e]=new Os(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(PE,RE);Zo[e]=new Os(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(PE,RE);Zo[e]=new Os(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Zo[n]=new Os(n,1,!1,n.toLowerCase(),null,!1,!1)});Zo.xlinkHref=new Os("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Zo[n]=new Os(n,1,!1,n.toLowerCase(),null,!0,!0)});function LE(n,e,t,r){var i=Zo.hasOwnProperty(e)?Zo[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iU(e,t,i,r)&&(t=null),r||i===null?nU(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Gc=U4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,oy=Symbol.for("react.element"),fm=Symbol.for("react.portal"),dm=Symbol.for("react.fragment"),kE=Symbol.for("react.strict_mode"),e5=Symbol.for("react.profiler"),H4=Symbol.for("react.provider"),G4=Symbol.for("react.context"),IE=Symbol.for("react.forward_ref"),t5=Symbol.for("react.suspense"),n5=Symbol.for("react.suspense_list"),NE=Symbol.for("react.memo"),Lh=Symbol.for("react.lazy"),V4=Symbol.for("react.offscreen"),ST=Symbol.iterator;function Zg(n){return n===null||typeof n!="object"?null:(n=ST&&n[ST]||n["@@iterator"],typeof n=="function"?n:null)}var Ti=Object.assign,VS;function T0(n){if(VS===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);VS=e&&e[1]||""}return`
`+VS+n}var WS=!1;function jS(n,e){if(!n||WS)return"";WS=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=s&&0<=a);break}}}finally{WS=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?T0(n):""}function oU(n){switch(n.tag){case 5:return T0(n.type);case 16:return T0("Lazy");case 13:return T0("Suspense");case 19:return T0("SuspenseList");case 0:case 2:case 15:return n=jS(n.type,!1),n;case 11:return n=jS(n.type.render,!1),n;case 1:return n=jS(n.type,!0),n;default:return""}}function r5(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case dm:return"Fragment";case fm:return"Portal";case e5:return"Profiler";case kE:return"StrictMode";case t5:return"Suspense";case n5:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case G4:return(n.displayName||"Context")+".Consumer";case H4:return(n._context.displayName||"Context")+".Provider";case IE:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case NE:return e=n.displayName||null,e!==null?e:r5(n.type)||"Memo";case Lh:e=n._payload,n=n._init;try{return r5(n(e))}catch{}}return null}function sU(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return r5(e);case 8:return e===kE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function af(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function W4(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function aU(n){var e=W4(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function sy(n){n._valueTracker||(n._valueTracker=aU(n))}function j4(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=W4(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function dx(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function i5(n,e){var t=e.checked;return Ti({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function _T(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=af(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function q4(n,e){e=e.checked,e!=null&&LE(n,"checked",e,!1)}function o5(n,e){q4(n,e);var t=af(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?s5(n,e.type,t):e.hasOwnProperty("defaultValue")&&s5(n,e.type,af(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function bT(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function s5(n,e,t){(e!=="number"||dx(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var C0=Array.isArray;function Lm(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+af(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function a5(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(kt(91));return Ti({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function MT(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(kt(92));if(C0(t)){if(1<t.length)throw Error(kt(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:af(t)}}function $4(n,e){var t=af(e.value),r=af(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function ET(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function X4(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function l5(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?X4(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var ay,Y4=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(ay=ay||document.createElement("div"),ay.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ay.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function fv(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var O0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},lU=["Webkit","ms","Moz","O"];Object.keys(O0).forEach(function(n){lU.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),O0[e]=O0[n]})});function Z4(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||O0.hasOwnProperty(n)&&O0[n]?(""+e).trim():e+"px"}function K4(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=Z4(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var uU=Ti({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function u5(n,e){if(e){if(uU[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(kt(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(kt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(kt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(kt(62))}}function c5(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var h5=null;function FE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var f5=null,km=null,Im=null;function AT(n){if(n=s1(n)){if(typeof f5!="function")throw Error(kt(280));var e=n.stateNode;e&&(e=_w(e),f5(n.stateNode,n.type,e))}}function J4(n){km?Im?Im.push(n):Im=[n]:km=n}function Q4(){if(km){var n=km,e=Im;if(Im=km=null,AT(n),e)for(n=0;n<e.length;n++)AT(e[n])}}function ek(n,e){return n(e)}function tk(){}var qS=!1;function nk(n,e,t){if(qS)return n(e,t);qS=!0;try{return ek(n,e,t)}finally{qS=!1,(km!==null||Im!==null)&&(tk(),Q4())}}function dv(n,e){var t=n.stateNode;if(t===null)return null;var r=_w(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(kt(231,e,typeof t));return t}var d5=!1;if(Ic)try{var Kg={};Object.defineProperty(Kg,"passive",{get:function(){d5=!0}}),window.addEventListener("test",Kg,Kg),window.removeEventListener("test",Kg,Kg)}catch{d5=!1}function cU(n,e,t,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var B0=!1,px=null,mx=!1,p5=null,hU={onError:function(n){B0=!0,px=n}};function fU(n,e,t,r,i,o,s,a,l){B0=!1,px=null,cU.apply(hU,arguments)}function dU(n,e,t,r,i,o,s,a,l){if(fU.apply(this,arguments),B0){if(B0){var u=px;B0=!1,px=null}else throw Error(kt(198));mx||(mx=!0,p5=u)}}function $d(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function rk(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function TT(n){if($d(n)!==n)throw Error(kt(188))}function pU(n){var e=n.alternate;if(!e){if(e=$d(n),e===null)throw Error(kt(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===t)return TT(i),n;if(o===r)return TT(i),e;o=o.sibling}throw Error(kt(188))}if(t.return!==r.return)t=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===t){s=!0,t=i,r=o;break}if(a===r){s=!0,r=i,t=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===t){s=!0,t=o,r=i;break}if(a===r){s=!0,r=o,t=i;break}a=a.sibling}if(!s)throw Error(kt(189))}}if(t.alternate!==r)throw Error(kt(190))}if(t.tag!==3)throw Error(kt(188));return t.stateNode.current===t?n:e}function ik(n){return n=pU(n),n!==null?ok(n):null}function ok(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=ok(n);if(e!==null)return e;n=n.sibling}return null}var sk=Ma.unstable_scheduleCallback,CT=Ma.unstable_cancelCallback,mU=Ma.unstable_shouldYield,gU=Ma.unstable_requestPaint,ji=Ma.unstable_now,vU=Ma.unstable_getCurrentPriorityLevel,DE=Ma.unstable_ImmediatePriority,ak=Ma.unstable_UserBlockingPriority,gx=Ma.unstable_NormalPriority,yU=Ma.unstable_LowPriority,lk=Ma.unstable_IdlePriority,yw=null,Cu=null;function xU(n){if(Cu&&typeof Cu.onCommitFiberRoot=="function")try{Cu.onCommitFiberRoot(yw,n,void 0,(n.current.flags&128)===128)}catch{}}var Bl=Math.clz32?Math.clz32:_U,wU=Math.log,SU=Math.LN2;function _U(n){return n>>>=0,n===0?32:31-(wU(n)/SU|0)|0}var ly=64,uy=4194304;function P0(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function vx(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,o=n.pingedLanes,s=t&268435455;if(s!==0){var a=s&~i;a!==0?r=P0(a):(o&=s,o!==0&&(r=P0(o)))}else s=t&~i,s!==0?r=P0(s):o!==0&&(r=P0(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Bl(e),i=1<<t,r|=n[t],e&=~i;return r}function bU(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function MU(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,o=n.pendingLanes;0<o;){var s=31-Bl(o),a=1<<s,l=i[s];l===-1?(!(a&t)||a&r)&&(i[s]=bU(a,e)):l<=e&&(n.expiredLanes|=a),o&=~a}}function m5(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function uk(){var n=ly;return ly<<=1,!(ly&4194240)&&(ly=64),n}function $S(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function i1(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Bl(e),n[e]=t}function EU(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Bl(t),o=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~o}}function OE(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Bl(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Ur=0;function ck(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var hk,BE,fk,dk,pk,g5=!1,cy=[],$h=null,Xh=null,Yh=null,pv=new Map,mv=new Map,Ih=[],AU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PT(n,e){switch(n){case"focusin":case"focusout":$h=null;break;case"dragenter":case"dragleave":Xh=null;break;case"mouseover":case"mouseout":Yh=null;break;case"pointerover":case"pointerout":pv.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":mv.delete(e.pointerId)}}function Jg(n,e,t,r,i,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=s1(e),e!==null&&BE(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function TU(n,e,t,r,i){switch(e){case"focusin":return $h=Jg($h,n,e,t,r,i),!0;case"dragenter":return Xh=Jg(Xh,n,e,t,r,i),!0;case"mouseover":return Yh=Jg(Yh,n,e,t,r,i),!0;case"pointerover":var o=i.pointerId;return pv.set(o,Jg(pv.get(o)||null,n,e,t,r,i)),!0;case"gotpointercapture":return o=i.pointerId,mv.set(o,Jg(mv.get(o)||null,n,e,t,r,i)),!0}return!1}function mk(n){var e=pd(n.target);if(e!==null){var t=$d(e);if(t!==null){if(e=t.tag,e===13){if(e=rk(t),e!==null){n.blockedOn=e,pk(n.priority,function(){fk(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function F2(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=v5(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);h5=r,t.target.dispatchEvent(r),h5=null}else return e=s1(t),e!==null&&BE(e),n.blockedOn=t,!1;e.shift()}return!0}function RT(n,e,t){F2(n)&&t.delete(e)}function CU(){g5=!1,$h!==null&&F2($h)&&($h=null),Xh!==null&&F2(Xh)&&(Xh=null),Yh!==null&&F2(Yh)&&(Yh=null),pv.forEach(RT),mv.forEach(RT)}function Qg(n,e){n.blockedOn===e&&(n.blockedOn=null,g5||(g5=!0,Ma.unstable_scheduleCallback(Ma.unstable_NormalPriority,CU)))}function gv(n){function e(i){return Qg(i,n)}if(0<cy.length){Qg(cy[0],n);for(var t=1;t<cy.length;t++){var r=cy[t];r.blockedOn===n&&(r.blockedOn=null)}}for($h!==null&&Qg($h,n),Xh!==null&&Qg(Xh,n),Yh!==null&&Qg(Yh,n),pv.forEach(e),mv.forEach(e),t=0;t<Ih.length;t++)r=Ih[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Ih.length&&(t=Ih[0],t.blockedOn===null);)mk(t),t.blockedOn===null&&Ih.shift()}var Nm=Gc.ReactCurrentBatchConfig,yx=!0;function PU(n,e,t,r){var i=Ur,o=Nm.transition;Nm.transition=null;try{Ur=1,UE(n,e,t,r)}finally{Ur=i,Nm.transition=o}}function RU(n,e,t,r){var i=Ur,o=Nm.transition;Nm.transition=null;try{Ur=4,UE(n,e,t,r)}finally{Ur=i,Nm.transition=o}}function UE(n,e,t,r){if(yx){var i=v5(n,e,t,r);if(i===null)r_(n,e,r,xx,t),PT(n,r);else if(TU(i,n,e,t,r))r.stopPropagation();else if(PT(n,r),e&4&&-1<AU.indexOf(n)){for(;i!==null;){var o=s1(i);if(o!==null&&hk(o),o=v5(n,e,t,r),o===null&&r_(n,e,r,xx,t),o===i)break;i=o}i!==null&&r.stopPropagation()}else r_(n,e,r,null,t)}}var xx=null;function v5(n,e,t,r){if(xx=null,n=FE(r),n=pd(n),n!==null)if(e=$d(n),e===null)n=null;else if(t=e.tag,t===13){if(n=rk(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return xx=n,null}function gk(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vU()){case DE:return 1;case ak:return 4;case gx:case yU:return 16;case lk:return 536870912;default:return 16}default:return 16}}var Bh=null,zE=null,D2=null;function vk(){if(D2)return D2;var n,e=zE,t=e.length,r,i="value"in Bh?Bh.value:Bh.textContent,o=i.length;for(n=0;n<t&&e[n]===i[n];n++);var s=t-n;for(r=1;r<=s&&e[t-r]===i[o-r];r++);return D2=i.slice(n,1<r?1-r:void 0)}function O2(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function hy(){return!0}function LT(){return!1}function Ta(n){function e(t,r,i,o,s){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?hy:LT,this.isPropagationStopped=LT,this}return Ti(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=hy)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=hy)},persist:function(){},isPersistent:hy}),e}var vg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},HE=Ta(vg),o1=Ti({},vg,{view:0,detail:0}),LU=Ta(o1),XS,YS,e0,xw=Ti({},o1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:GE,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==e0&&(e0&&n.type==="mousemove"?(XS=n.screenX-e0.screenX,YS=n.screenY-e0.screenY):YS=XS=0,e0=n),XS)},movementY:function(n){return"movementY"in n?n.movementY:YS}}),kT=Ta(xw),kU=Ti({},xw,{dataTransfer:0}),IU=Ta(kU),NU=Ti({},o1,{relatedTarget:0}),ZS=Ta(NU),FU=Ti({},vg,{animationName:0,elapsedTime:0,pseudoElement:0}),DU=Ta(FU),OU=Ti({},vg,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),BU=Ta(OU),UU=Ti({},vg,{data:0}),IT=Ta(UU),zU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},HU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VU(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=GU[n])?!!e[n]:!1}function GE(){return VU}var WU=Ti({},o1,{key:function(n){if(n.key){var e=zU[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=O2(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?HU[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:GE,charCode:function(n){return n.type==="keypress"?O2(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?O2(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),jU=Ta(WU),qU=Ti({},xw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),NT=Ta(qU),$U=Ti({},o1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:GE}),XU=Ta($U),YU=Ti({},vg,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZU=Ta(YU),KU=Ti({},xw,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),JU=Ta(KU),QU=[9,13,27,32],VE=Ic&&"CompositionEvent"in window,U0=null;Ic&&"documentMode"in document&&(U0=document.documentMode);var e8=Ic&&"TextEvent"in window&&!U0,yk=Ic&&(!VE||U0&&8<U0&&11>=U0),FT=String.fromCharCode(32),DT=!1;function xk(n,e){switch(n){case"keyup":return QU.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wk(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var pm=!1;function t8(n,e){switch(n){case"compositionend":return wk(e);case"keypress":return e.which!==32?null:(DT=!0,FT);case"textInput":return n=e.data,n===FT&&DT?null:n;default:return null}}function n8(n,e){if(pm)return n==="compositionend"||!VE&&xk(n,e)?(n=vk(),D2=zE=Bh=null,pm=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yk&&e.locale!=="ko"?null:e.data;default:return null}}var r8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OT(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!r8[n.type]:e==="textarea"}function Sk(n,e,t,r){J4(r),e=wx(e,"onChange"),0<e.length&&(t=new HE("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var z0=null,vv=null;function i8(n){kk(n,0)}function ww(n){var e=vm(n);if(j4(e))return n}function o8(n,e){if(n==="change")return e}var _k=!1;if(Ic){var KS;if(Ic){var JS="oninput"in document;if(!JS){var BT=document.createElement("div");BT.setAttribute("oninput","return;"),JS=typeof BT.oninput=="function"}KS=JS}else KS=!1;_k=KS&&(!document.documentMode||9<document.documentMode)}function UT(){z0&&(z0.detachEvent("onpropertychange",bk),vv=z0=null)}function bk(n){if(n.propertyName==="value"&&ww(vv)){var e=[];Sk(e,vv,n,FE(n)),nk(i8,e)}}function s8(n,e,t){n==="focusin"?(UT(),z0=e,vv=t,z0.attachEvent("onpropertychange",bk)):n==="focusout"&&UT()}function a8(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ww(vv)}function l8(n,e){if(n==="click")return ww(e)}function u8(n,e){if(n==="input"||n==="change")return ww(e)}function c8(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Gl=typeof Object.is=="function"?Object.is:c8;function yv(n,e){if(Gl(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!Qb.call(e,i)||!Gl(n[i],e[i]))return!1}return!0}function zT(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function HT(n,e){var t=zT(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=zT(t)}}function Mk(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Mk(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function Ek(){for(var n=window,e=dx();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=dx(n.document)}return e}function WE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function h8(n){var e=Ek(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Mk(t.ownerDocument.documentElement,t)){if(r!==null&&WE(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!n.extend&&o>r&&(i=r,r=o,o=i),i=HT(t,o);var s=HT(t,r);i&&s&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==s.node||n.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),o>r?(n.addRange(e),n.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var f8=Ic&&"documentMode"in document&&11>=document.documentMode,mm=null,y5=null,H0=null,x5=!1;function GT(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;x5||mm==null||mm!==dx(r)||(r=mm,"selectionStart"in r&&WE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),H0&&yv(H0,r)||(H0=r,r=wx(y5,"onSelect"),0<r.length&&(e=new HE("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=mm)))}function fy(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var gm={animationend:fy("Animation","AnimationEnd"),animationiteration:fy("Animation","AnimationIteration"),animationstart:fy("Animation","AnimationStart"),transitionend:fy("Transition","TransitionEnd")},QS={},Ak={};Ic&&(Ak=document.createElement("div").style,"AnimationEvent"in window||(delete gm.animationend.animation,delete gm.animationiteration.animation,delete gm.animationstart.animation),"TransitionEvent"in window||delete gm.transitionend.transition);function Sw(n){if(QS[n])return QS[n];if(!gm[n])return n;var e=gm[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Ak)return QS[n]=e[t];return n}var Tk=Sw("animationend"),Ck=Sw("animationiteration"),Pk=Sw("animationstart"),Rk=Sw("transitionend"),Lk=new Map,VT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yf(n,e){Lk.set(n,e),qd(e,[n])}for(var e_=0;e_<VT.length;e_++){var t_=VT[e_],d8=t_.toLowerCase(),p8=t_[0].toUpperCase()+t_.slice(1);yf(d8,"on"+p8)}yf(Tk,"onAnimationEnd");yf(Ck,"onAnimationIteration");yf(Pk,"onAnimationStart");yf("dblclick","onDoubleClick");yf("focusin","onFocus");yf("focusout","onBlur");yf(Rk,"onTransitionEnd");Ym("onMouseEnter",["mouseout","mouseover"]);Ym("onMouseLeave",["mouseout","mouseover"]);Ym("onPointerEnter",["pointerout","pointerover"]);Ym("onPointerLeave",["pointerout","pointerover"]);qd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));qd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));qd("onBeforeInput",["compositionend","keypress","textInput","paste"]);qd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));qd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));qd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var R0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m8=new Set("cancel close invalid load scroll toggle".split(" ").concat(R0));function WT(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,dU(r,e,void 0,n),n.currentTarget=null}function kk(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;WT(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;WT(i,a,u),o=l}}}if(mx)throw n=p5,mx=!1,p5=null,n}function ti(n,e){var t=e[M5];t===void 0&&(t=e[M5]=new Set);var r=n+"__bubble";t.has(r)||(Ik(e,n,2,!1),t.add(r))}function n_(n,e,t){var r=0;e&&(r|=4),Ik(t,n,r,e)}var dy="_reactListening"+Math.random().toString(36).slice(2);function xv(n){if(!n[dy]){n[dy]=!0,z4.forEach(function(t){t!=="selectionchange"&&(m8.has(t)||n_(t,!1,n),n_(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[dy]||(e[dy]=!0,n_("selectionchange",!1,e))}}function Ik(n,e,t,r){switch(gk(e)){case 1:var i=PU;break;case 4:i=RU;break;default:i=UE}t=i.bind(null,e,t,n),i=void 0,!d5||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function r_(n,e,t,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=pd(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}nk(function(){var u=o,c=FE(t),h=[];e:{var f=Lk.get(n);if(f!==void 0){var d=HE,v=n;switch(n){case"keypress":if(O2(t)===0)break e;case"keydown":case"keyup":d=jU;break;case"focusin":v="focus",d=ZS;break;case"focusout":v="blur",d=ZS;break;case"beforeblur":case"afterblur":d=ZS;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=kT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=IU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=XU;break;case Tk:case Ck:case Pk:d=DU;break;case Rk:d=ZU;break;case"scroll":d=LU;break;case"wheel":d=JU;break;case"copy":case"cut":case"paste":d=BU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=NT}var y=(e&4)!==0,x=!y&&n==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var S=u,_;S!==null;){_=S;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,g!==null&&(E=dv(S,g),E!=null&&y.push(wv(S,E,_)))),x)break;S=S.return}0<y.length&&(f=new d(f,v,null,t,c),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",d=n==="mouseout"||n==="pointerout",f&&t!==h5&&(v=t.relatedTarget||t.fromElement)&&(pd(v)||v[Nc]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(v=t.relatedTarget||t.toElement,d=u,v=v?pd(v):null,v!==null&&(x=$d(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(d=null,v=u),d!==v)){if(y=kT,E="onMouseLeave",g="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(y=NT,E="onPointerLeave",g="onPointerEnter",S="pointer"),x=d==null?f:vm(d),_=v==null?f:vm(v),f=new y(E,S+"leave",d,t,c),f.target=x,f.relatedTarget=_,E=null,pd(c)===u&&(y=new y(g,S+"enter",v,t,c),y.target=_,y.relatedTarget=x,E=y),x=E,d&&v)t:{for(y=d,g=v,S=0,_=y;_;_=Cp(_))S++;for(_=0,E=g;E;E=Cp(E))_++;for(;0<S-_;)y=Cp(y),S--;for(;0<_-S;)g=Cp(g),_--;for(;S--;){if(y===g||g!==null&&y===g.alternate)break t;y=Cp(y),g=Cp(g)}y=null}else y=null;d!==null&&jT(h,f,d,y,!1),v!==null&&x!==null&&jT(h,x,v,y,!0)}}e:{if(f=u?vm(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var C=o8;else if(OT(f))if(_k)C=u8;else{C=a8;var I=s8}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=l8);if(C&&(C=C(n,u))){Sk(h,C,t,c);break e}I&&I(n,f,u),n==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&s5(f,"number",f.value)}switch(I=u?vm(u):window,n){case"focusin":(OT(I)||I.contentEditable==="true")&&(mm=I,y5=u,H0=null);break;case"focusout":H0=y5=mm=null;break;case"mousedown":x5=!0;break;case"contextmenu":case"mouseup":case"dragend":x5=!1,GT(h,t,c);break;case"selectionchange":if(f8)break;case"keydown":case"keyup":GT(h,t,c)}var F;if(VE)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else pm?xk(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(yk&&t.locale!=="ko"&&(pm||R!=="onCompositionStart"?R==="onCompositionEnd"&&pm&&(F=vk()):(Bh=c,zE="value"in Bh?Bh.value:Bh.textContent,pm=!0)),I=wx(u,R),0<I.length&&(R=new IT(R,n,null,t,c),h.push({event:R,listeners:I}),F?R.data=F:(F=wk(t),F!==null&&(R.data=F)))),(F=e8?t8(n,t):n8(n,t))&&(u=wx(u,"onBeforeInput"),0<u.length&&(c=new IT("onBeforeInput","beforeinput",null,t,c),h.push({event:c,listeners:u}),c.data=F))}kk(h,e)})}function wv(n,e,t){return{instance:n,listener:e,currentTarget:t}}function wx(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=dv(n,t),o!=null&&r.unshift(wv(n,o,i)),o=dv(n,e),o!=null&&r.push(wv(n,o,i))),n=n.return}return r}function Cp(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function jT(n,e,t,r,i){for(var o=e._reactName,s=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=dv(t,o),l!=null&&s.unshift(wv(t,l,a))):i||(l=dv(t,o),l!=null&&s.push(wv(t,l,a)))),t=t.return}s.length!==0&&n.push({event:e,listeners:s})}var g8=/\r\n?/g,v8=/\u0000|\uFFFD/g;function qT(n){return(typeof n=="string"?n:""+n).replace(g8,`
`).replace(v8,"")}function py(n,e,t){if(e=qT(e),qT(n)!==e&&t)throw Error(kt(425))}function Sx(){}var w5=null,S5=null;function _5(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var b5=typeof setTimeout=="function"?setTimeout:void 0,y8=typeof clearTimeout=="function"?clearTimeout:void 0,$T=typeof Promise=="function"?Promise:void 0,x8=typeof queueMicrotask=="function"?queueMicrotask:typeof $T<"u"?function(n){return $T.resolve(null).then(n).catch(w8)}:b5;function w8(n){setTimeout(function(){throw n})}function i_(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),gv(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);gv(e)}function Zh(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function XT(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var yg=Math.random().toString(36).slice(2),_u="__reactFiber$"+yg,Sv="__reactProps$"+yg,Nc="__reactContainer$"+yg,M5="__reactEvents$"+yg,S8="__reactListeners$"+yg,_8="__reactHandles$"+yg;function pd(n){var e=n[_u];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Nc]||t[_u]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=XT(n);n!==null;){if(t=n[_u])return t;n=XT(n)}return e}n=t,t=n.parentNode}return null}function s1(n){return n=n[_u]||n[Nc],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function vm(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(kt(33))}function _w(n){return n[Sv]||null}var E5=[],ym=-1;function xf(n){return{current:n}}function ai(n){0>ym||(n.current=E5[ym],E5[ym]=null,ym--)}function Yr(n,e){ym++,E5[ym]=n.current,n.current=e}var lf={},xs=xf(lf),ea=xf(!1),kd=lf;function Zm(n,e){var t=n.type.contextTypes;if(!t)return lf;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in t)i[o]=e[o];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function ta(n){return n=n.childContextTypes,n!=null}function _x(){ai(ea),ai(xs)}function YT(n,e,t){if(xs.current!==lf)throw Error(kt(168));Yr(xs,e),Yr(ea,t)}function Nk(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(kt(108,sU(n)||"Unknown",i));return Ti({},t,r)}function bx(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||lf,kd=xs.current,Yr(xs,n),Yr(ea,ea.current),!0}function ZT(n,e,t){var r=n.stateNode;if(!r)throw Error(kt(169));t?(n=Nk(n,e,kd),r.__reactInternalMemoizedMergedChildContext=n,ai(ea),ai(xs),Yr(xs,n)):ai(ea),Yr(ea,t)}var mc=null,bw=!1,o_=!1;function Fk(n){mc===null?mc=[n]:mc.push(n)}function b8(n){bw=!0,Fk(n)}function wf(){if(!o_&&mc!==null){o_=!0;var n=0,e=Ur;try{var t=mc;for(Ur=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}mc=null,bw=!1}catch(i){throw mc!==null&&(mc=mc.slice(n+1)),sk(DE,wf),i}finally{Ur=e,o_=!1}}return null}var xm=[],wm=0,Mx=null,Ex=0,Qa=[],el=0,Id=null,Sc=1,_c="";function rd(n,e){xm[wm++]=Ex,xm[wm++]=Mx,Mx=n,Ex=e}function Dk(n,e,t){Qa[el++]=Sc,Qa[el++]=_c,Qa[el++]=Id,Id=n;var r=Sc;n=_c;var i=32-Bl(r)-1;r&=~(1<<i),t+=1;var o=32-Bl(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Sc=1<<32-Bl(e)+i|t<<i|r,_c=o+n}else Sc=1<<o|t<<i|r,_c=n}function jE(n){n.return!==null&&(rd(n,1),Dk(n,1,0))}function qE(n){for(;n===Mx;)Mx=xm[--wm],xm[wm]=null,Ex=xm[--wm],xm[wm]=null;for(;n===Id;)Id=Qa[--el],Qa[el]=null,_c=Qa[--el],Qa[el]=null,Sc=Qa[--el],Qa[el]=null}var _a=null,wa=null,fi=!1,Nl=null;function Ok(n,e){var t=nl(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function KT(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,_a=n,wa=Zh(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,_a=n,wa=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Id!==null?{id:Sc,overflow:_c}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=nl(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,_a=n,wa=null,!0):!1;default:return!1}}function A5(n){return(n.mode&1)!==0&&(n.flags&128)===0}function T5(n){if(fi){var e=wa;if(e){var t=e;if(!KT(n,e)){if(A5(n))throw Error(kt(418));e=Zh(t.nextSibling);var r=_a;e&&KT(n,e)?Ok(r,t):(n.flags=n.flags&-4097|2,fi=!1,_a=n)}}else{if(A5(n))throw Error(kt(418));n.flags=n.flags&-4097|2,fi=!1,_a=n}}}function JT(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;_a=n}function my(n){if(n!==_a)return!1;if(!fi)return JT(n),fi=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!_5(n.type,n.memoizedProps)),e&&(e=wa)){if(A5(n))throw Bk(),Error(kt(418));for(;e;)Ok(n,e),e=Zh(e.nextSibling)}if(JT(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(kt(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){wa=Zh(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}wa=null}}else wa=_a?Zh(n.stateNode.nextSibling):null;return!0}function Bk(){for(var n=wa;n;)n=Zh(n.nextSibling)}function Km(){wa=_a=null,fi=!1}function $E(n){Nl===null?Nl=[n]:Nl.push(n)}var M8=Gc.ReactCurrentBatchConfig;function Rl(n,e){if(n&&n.defaultProps){e=Ti({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var Ax=xf(null),Tx=null,Sm=null,XE=null;function YE(){XE=Sm=Tx=null}function ZE(n){var e=Ax.current;ai(Ax),n._currentValue=e}function C5(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Fm(n,e){Tx=n,XE=Sm=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Qs=!0),n.firstContext=null)}function ll(n){var e=n._currentValue;if(XE!==n)if(n={context:n,memoizedValue:e,next:null},Sm===null){if(Tx===null)throw Error(kt(308));Sm=n,Tx.dependencies={lanes:0,firstContext:n}}else Sm=Sm.next=n;return e}var md=null;function KE(n){md===null?md=[n]:md.push(n)}function Uk(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,KE(e)):(t.next=i.next,i.next=t),e.interleaved=t,Fc(n,r)}function Fc(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var kh=!1;function JE(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zk(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Pc(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Kh(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,gr&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fc(n,t)}return i=r.interleaved,i===null?(e.next=e,KE(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fc(n,t)}function B2(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,OE(n,t)}}function QT(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?i=o=s:o=o.next=s,t=t.next}while(t!==null);o===null?i=o=e:o=o.next=e}else i=o=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Cx(n,e,t,r){var i=n.updateQueue;kh=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=n.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var h=i.baseState;s=0,c=u=l=null,a=o;do{var f=a.lane,d=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,y=a;switch(f=e,d=t,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(d,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(d,h,f):v,f==null)break e;h=Ti({},h,f);break e;case 2:kh=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=d,l=h):c=c.next=d,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Fd|=s,n.lanes=s,n.memoizedState=h}}function eC(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(kt(191,i));i.call(r)}}}var Hk=new U4.Component().refs;function P5(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Ti({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Mw={isMounted:function(n){return(n=n._reactInternals)?$d(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Is(),i=Qh(n),o=Pc(r,i);o.payload=e,t!=null&&(o.callback=t),e=Kh(n,o,i),e!==null&&(Ul(e,n,i,r),B2(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Is(),i=Qh(n),o=Pc(r,i);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=Kh(n,o,i),e!==null&&(Ul(e,n,i,r),B2(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Is(),r=Qh(n),i=Pc(t,r);i.tag=2,e!=null&&(i.callback=e),e=Kh(n,i,r),e!==null&&(Ul(e,n,r,t),B2(e,n,r))}};function tC(n,e,t,r,i,o,s){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!yv(t,r)||!yv(i,o):!0}function Gk(n,e,t){var r=!1,i=lf,o=e.contextType;return typeof o=="object"&&o!==null?o=ll(o):(i=ta(e)?kd:xs.current,r=e.contextTypes,o=(r=r!=null)?Zm(n,i):lf),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Mw,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=o),e}function nC(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Mw.enqueueReplaceState(e,e.state,null)}function R5(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=Hk,JE(n);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ll(o):(o=ta(e)?kd:xs.current,i.context=Zm(n,o)),i.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(P5(n,e,o,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Mw.enqueueReplaceState(i,i.state,null),Cx(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function t0(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(kt(309));var r=t.stateNode}if(!r)throw Error(kt(147,n));var i=r,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;a===Hk&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof n!="string")throw Error(kt(284));if(!t._owner)throw Error(kt(290,n))}return n}function gy(n,e){throw n=Object.prototype.toString.call(e),Error(kt(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function rC(n){var e=n._init;return e(n._payload)}function Vk(n){function e(g,S){if(n){var _=g.deletions;_===null?(g.deletions=[S],g.flags|=16):_.push(S)}}function t(g,S){if(!n)return null;for(;S!==null;)e(g,S),S=S.sibling;return null}function r(g,S){for(g=new Map;S!==null;)S.key!==null?g.set(S.key,S):g.set(S.index,S),S=S.sibling;return g}function i(g,S){return g=ef(g,S),g.index=0,g.sibling=null,g}function o(g,S,_){return g.index=_,n?(_=g.alternate,_!==null?(_=_.index,_<S?(g.flags|=2,S):_):(g.flags|=2,S)):(g.flags|=1048576,S)}function s(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,S,_,E){return S===null||S.tag!==6?(S=f_(_,g.mode,E),S.return=g,S):(S=i(S,_),S.return=g,S)}function l(g,S,_,E){var C=_.type;return C===dm?c(g,S,_.props.children,E,_.key):S!==null&&(S.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Lh&&rC(C)===S.type)?(E=i(S,_.props),E.ref=t0(g,S,_),E.return=g,E):(E=W2(_.type,_.key,_.props,null,g.mode,E),E.ref=t0(g,S,_),E.return=g,E)}function u(g,S,_,E){return S===null||S.tag!==4||S.stateNode.containerInfo!==_.containerInfo||S.stateNode.implementation!==_.implementation?(S=d_(_,g.mode,E),S.return=g,S):(S=i(S,_.children||[]),S.return=g,S)}function c(g,S,_,E,C){return S===null||S.tag!==7?(S=Ed(_,g.mode,E,C),S.return=g,S):(S=i(S,_),S.return=g,S)}function h(g,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return S=f_(""+S,g.mode,_),S.return=g,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case oy:return _=W2(S.type,S.key,S.props,null,g.mode,_),_.ref=t0(g,null,S),_.return=g,_;case fm:return S=d_(S,g.mode,_),S.return=g,S;case Lh:var E=S._init;return h(g,E(S._payload),_)}if(C0(S)||Zg(S))return S=Ed(S,g.mode,_,null),S.return=g,S;gy(g,S)}return null}function f(g,S,_,E){var C=S!==null?S.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return C!==null?null:a(g,S,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case oy:return _.key===C?l(g,S,_,E):null;case fm:return _.key===C?u(g,S,_,E):null;case Lh:return C=_._init,f(g,S,C(_._payload),E)}if(C0(_)||Zg(_))return C!==null?null:c(g,S,_,E,null);gy(g,_)}return null}function d(g,S,_,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(_)||null,a(S,g,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case oy:return g=g.get(E.key===null?_:E.key)||null,l(S,g,E,C);case fm:return g=g.get(E.key===null?_:E.key)||null,u(S,g,E,C);case Lh:var I=E._init;return d(g,S,_,I(E._payload),C)}if(C0(E)||Zg(E))return g=g.get(_)||null,c(S,g,E,C,null);gy(S,E)}return null}function v(g,S,_,E){for(var C=null,I=null,F=S,R=S=0,k=null;F!==null&&R<_.length;R++){F.index>R?(k=F,F=null):k=F.sibling;var L=f(g,F,_[R],E);if(L===null){F===null&&(F=k);break}n&&F&&L.alternate===null&&e(g,F),S=o(L,S,R),I===null?C=L:I.sibling=L,I=L,F=k}if(R===_.length)return t(g,F),fi&&rd(g,R),C;if(F===null){for(;R<_.length;R++)F=h(g,_[R],E),F!==null&&(S=o(F,S,R),I===null?C=F:I.sibling=F,I=F);return fi&&rd(g,R),C}for(F=r(g,F);R<_.length;R++)k=d(F,g,R,_[R],E),k!==null&&(n&&k.alternate!==null&&F.delete(k.key===null?R:k.key),S=o(k,S,R),I===null?C=k:I.sibling=k,I=k);return n&&F.forEach(function(N){return e(g,N)}),fi&&rd(g,R),C}function y(g,S,_,E){var C=Zg(_);if(typeof C!="function")throw Error(kt(150));if(_=C.call(_),_==null)throw Error(kt(151));for(var I=C=null,F=S,R=S=0,k=null,L=_.next();F!==null&&!L.done;R++,L=_.next()){F.index>R?(k=F,F=null):k=F.sibling;var N=f(g,F,L.value,E);if(N===null){F===null&&(F=k);break}n&&F&&N.alternate===null&&e(g,F),S=o(N,S,R),I===null?C=N:I.sibling=N,I=N,F=k}if(L.done)return t(g,F),fi&&rd(g,R),C;if(F===null){for(;!L.done;R++,L=_.next())L=h(g,L.value,E),L!==null&&(S=o(L,S,R),I===null?C=L:I.sibling=L,I=L);return fi&&rd(g,R),C}for(F=r(g,F);!L.done;R++,L=_.next())L=d(F,g,R,L.value,E),L!==null&&(n&&L.alternate!==null&&F.delete(L.key===null?R:L.key),S=o(L,S,R),I===null?C=L:I.sibling=L,I=L);return n&&F.forEach(function(z){return e(g,z)}),fi&&rd(g,R),C}function x(g,S,_,E){if(typeof _=="object"&&_!==null&&_.type===dm&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case oy:e:{for(var C=_.key,I=S;I!==null;){if(I.key===C){if(C=_.type,C===dm){if(I.tag===7){t(g,I.sibling),S=i(I,_.props.children),S.return=g,g=S;break e}}else if(I.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Lh&&rC(C)===I.type){t(g,I.sibling),S=i(I,_.props),S.ref=t0(g,I,_),S.return=g,g=S;break e}t(g,I);break}else e(g,I);I=I.sibling}_.type===dm?(S=Ed(_.props.children,g.mode,E,_.key),S.return=g,g=S):(E=W2(_.type,_.key,_.props,null,g.mode,E),E.ref=t0(g,S,_),E.return=g,g=E)}return s(g);case fm:e:{for(I=_.key;S!==null;){if(S.key===I)if(S.tag===4&&S.stateNode.containerInfo===_.containerInfo&&S.stateNode.implementation===_.implementation){t(g,S.sibling),S=i(S,_.children||[]),S.return=g,g=S;break e}else{t(g,S);break}else e(g,S);S=S.sibling}S=d_(_,g.mode,E),S.return=g,g=S}return s(g);case Lh:return I=_._init,x(g,S,I(_._payload),E)}if(C0(_))return v(g,S,_,E);if(Zg(_))return y(g,S,_,E);gy(g,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,S!==null&&S.tag===6?(t(g,S.sibling),S=i(S,_),S.return=g,g=S):(t(g,S),S=f_(_,g.mode,E),S.return=g,g=S),s(g)):t(g,S)}return x}var Jm=Vk(!0),Wk=Vk(!1),a1={},Pu=xf(a1),_v=xf(a1),bv=xf(a1);function gd(n){if(n===a1)throw Error(kt(174));return n}function QE(n,e){switch(Yr(bv,e),Yr(_v,n),Yr(Pu,a1),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:l5(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=l5(e,n)}ai(Pu),Yr(Pu,e)}function Qm(){ai(Pu),ai(_v),ai(bv)}function jk(n){gd(bv.current);var e=gd(Pu.current),t=l5(e,n.type);e!==t&&(Yr(_v,n),Yr(Pu,t))}function e3(n){_v.current===n&&(ai(Pu),ai(_v))}var Si=xf(0);function Px(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var s_=[];function t3(){for(var n=0;n<s_.length;n++)s_[n]._workInProgressVersionPrimary=null;s_.length=0}var U2=Gc.ReactCurrentDispatcher,a_=Gc.ReactCurrentBatchConfig,Nd=0,Ei=null,vo=null,Do=null,Rx=!1,G0=!1,Mv=0,E8=0;function rs(){throw Error(kt(321))}function n3(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Gl(n[t],e[t]))return!1;return!0}function r3(n,e,t,r,i,o){if(Nd=o,Ei=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,U2.current=n===null||n.memoizedState===null?P8:R8,n=t(r,i),G0){o=0;do{if(G0=!1,Mv=0,25<=o)throw Error(kt(301));o+=1,Do=vo=null,e.updateQueue=null,U2.current=L8,n=t(r,i)}while(G0)}if(U2.current=Lx,e=vo!==null&&vo.next!==null,Nd=0,Do=vo=Ei=null,Rx=!1,e)throw Error(kt(300));return n}function i3(){var n=Mv!==0;return Mv=0,n}function xu(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Do===null?Ei.memoizedState=Do=n:Do=Do.next=n,Do}function ul(){if(vo===null){var n=Ei.alternate;n=n!==null?n.memoizedState:null}else n=vo.next;var e=Do===null?Ei.memoizedState:Do.next;if(e!==null)Do=e,vo=n;else{if(n===null)throw Error(kt(310));vo=n,n={memoizedState:vo.memoizedState,baseState:vo.baseState,baseQueue:vo.baseQueue,queue:vo.queue,next:null},Do===null?Ei.memoizedState=Do=n:Do=Do.next=n}return Do}function Ev(n,e){return typeof e=="function"?e(n):e}function l_(n){var e=ul(),t=e.queue;if(t===null)throw Error(kt(311));t.lastRenderedReducer=n;var r=vo,i=r.baseQueue,o=t.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,t.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((Nd&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,s=r):l=l.next=h,Ei.lanes|=c,Fd|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,Gl(r,e.memoizedState)||(Qs=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do o=i.lane,Ei.lanes|=o,Fd|=o,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function u_(n){var e=ul(),t=e.queue;if(t===null)throw Error(kt(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,o=e.memoizedState;if(i!==null){t.pending=null;var s=i=i.next;do o=n(o,s.action),s=s.next;while(s!==i);Gl(o,e.memoizedState)||(Qs=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,r]}function qk(){}function $k(n,e){var t=Ei,r=ul(),i=e(),o=!Gl(r.memoizedState,i);if(o&&(r.memoizedState=i,Qs=!0),r=r.queue,o3(Zk.bind(null,t,r,n),[n]),r.getSnapshot!==e||o||Do!==null&&Do.memoizedState.tag&1){if(t.flags|=2048,Av(9,Yk.bind(null,t,r,i,e),void 0,null),Uo===null)throw Error(kt(349));Nd&30||Xk(t,e,i)}return i}function Xk(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Ei.updateQueue,e===null?(e={lastEffect:null,stores:null},Ei.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Yk(n,e,t,r){e.value=t,e.getSnapshot=r,Kk(e)&&Jk(n)}function Zk(n,e,t){return t(function(){Kk(e)&&Jk(n)})}function Kk(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Gl(n,t)}catch{return!0}}function Jk(n){var e=Fc(n,1);e!==null&&Ul(e,n,1,-1)}function iC(n){var e=xu();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ev,lastRenderedState:n},e.queue=n,n=n.dispatch=C8.bind(null,Ei,n),[e.memoizedState,n]}function Av(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Ei.updateQueue,e===null?(e={lastEffect:null,stores:null},Ei.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function Qk(){return ul().memoizedState}function z2(n,e,t,r){var i=xu();Ei.flags|=n,i.memoizedState=Av(1|e,t,void 0,r===void 0?null:r)}function Ew(n,e,t,r){var i=ul();r=r===void 0?null:r;var o=void 0;if(vo!==null){var s=vo.memoizedState;if(o=s.destroy,r!==null&&n3(r,s.deps)){i.memoizedState=Av(e,t,o,r);return}}Ei.flags|=n,i.memoizedState=Av(1|e,t,o,r)}function oC(n,e){return z2(8390656,8,n,e)}function o3(n,e){return Ew(2048,8,n,e)}function eI(n,e){return Ew(4,2,n,e)}function tI(n,e){return Ew(4,4,n,e)}function nI(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function rI(n,e,t){return t=t!=null?t.concat([n]):null,Ew(4,4,nI.bind(null,e,n),t)}function s3(){}function iI(n,e){var t=ul();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&n3(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function oI(n,e){var t=ul();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&n3(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function sI(n,e,t){return Nd&21?(Gl(t,e)||(t=uk(),Ei.lanes|=t,Fd|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Qs=!0),n.memoizedState=t)}function A8(n,e){var t=Ur;Ur=t!==0&&4>t?t:4,n(!0);var r=a_.transition;a_.transition={};try{n(!1),e()}finally{Ur=t,a_.transition=r}}function aI(){return ul().memoizedState}function T8(n,e,t){var r=Qh(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},lI(n))uI(e,t);else if(t=Uk(n,e,t,r),t!==null){var i=Is();Ul(t,n,r,i),cI(t,e,r)}}function C8(n,e,t){var r=Qh(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(lI(n))uI(e,i);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,t);if(i.hasEagerState=!0,i.eagerState=a,Gl(a,s)){var l=e.interleaved;l===null?(i.next=i,KE(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=Uk(n,e,i,r),t!==null&&(i=Is(),Ul(t,n,r,i),cI(t,e,r))}}function lI(n){var e=n.alternate;return n===Ei||e!==null&&e===Ei}function uI(n,e){G0=Rx=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function cI(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,OE(n,t)}}var Lx={readContext:ll,useCallback:rs,useContext:rs,useEffect:rs,useImperativeHandle:rs,useInsertionEffect:rs,useLayoutEffect:rs,useMemo:rs,useReducer:rs,useRef:rs,useState:rs,useDebugValue:rs,useDeferredValue:rs,useTransition:rs,useMutableSource:rs,useSyncExternalStore:rs,useId:rs,unstable_isNewReconciler:!1},P8={readContext:ll,useCallback:function(n,e){return xu().memoizedState=[n,e===void 0?null:e],n},useContext:ll,useEffect:oC,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,z2(4194308,4,nI.bind(null,e,n),t)},useLayoutEffect:function(n,e){return z2(4194308,4,n,e)},useInsertionEffect:function(n,e){return z2(4,2,n,e)},useMemo:function(n,e){var t=xu();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=xu();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=T8.bind(null,Ei,n),[r.memoizedState,n]},useRef:function(n){var e=xu();return n={current:n},e.memoizedState=n},useState:iC,useDebugValue:s3,useDeferredValue:function(n){return xu().memoizedState=n},useTransition:function(){var n=iC(!1),e=n[0];return n=A8.bind(null,n[1]),xu().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Ei,i=xu();if(fi){if(t===void 0)throw Error(kt(407));t=t()}else{if(t=e(),Uo===null)throw Error(kt(349));Nd&30||Xk(r,e,t)}i.memoizedState=t;var o={value:t,getSnapshot:e};return i.queue=o,oC(Zk.bind(null,r,o,n),[n]),r.flags|=2048,Av(9,Yk.bind(null,r,o,t,e),void 0,null),t},useId:function(){var n=xu(),e=Uo.identifierPrefix;if(fi){var t=_c,r=Sc;t=(r&~(1<<32-Bl(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Mv++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=E8++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},R8={readContext:ll,useCallback:iI,useContext:ll,useEffect:o3,useImperativeHandle:rI,useInsertionEffect:eI,useLayoutEffect:tI,useMemo:oI,useReducer:l_,useRef:Qk,useState:function(){return l_(Ev)},useDebugValue:s3,useDeferredValue:function(n){var e=ul();return sI(e,vo.memoizedState,n)},useTransition:function(){var n=l_(Ev)[0],e=ul().memoizedState;return[n,e]},useMutableSource:qk,useSyncExternalStore:$k,useId:aI,unstable_isNewReconciler:!1},L8={readContext:ll,useCallback:iI,useContext:ll,useEffect:o3,useImperativeHandle:rI,useInsertionEffect:eI,useLayoutEffect:tI,useMemo:oI,useReducer:u_,useRef:Qk,useState:function(){return u_(Ev)},useDebugValue:s3,useDeferredValue:function(n){var e=ul();return vo===null?e.memoizedState=n:sI(e,vo.memoizedState,n)},useTransition:function(){var n=u_(Ev)[0],e=ul().memoizedState;return[n,e]},useMutableSource:qk,useSyncExternalStore:$k,useId:aI,unstable_isNewReconciler:!1};function eg(n,e){try{var t="",r=e;do t+=oU(r),r=r.return;while(r);var i=t}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:i,digest:null}}function c_(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function L5(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var k8=typeof WeakMap=="function"?WeakMap:Map;function hI(n,e,t){t=Pc(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Ix||(Ix=!0,H5=r),L5(n,e)},t}function fI(n,e,t){t=Pc(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){L5(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){L5(n,e),typeof r!="function"&&(Jh===null?Jh=new Set([this]):Jh.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),t}function sC(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new k8;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=q8.bind(null,n,e,t),e.then(n,n))}function aC(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function lC(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Pc(-1,1),e.tag=2,Kh(t,e,1))),t.lanes|=1),n)}var I8=Gc.ReactCurrentOwner,Qs=!1;function Ps(n,e,t,r){e.child=n===null?Wk(e,null,t,r):Jm(e,n.child,t,r)}function uC(n,e,t,r,i){t=t.render;var o=e.ref;return Fm(e,i),r=r3(n,e,t,r,o,i),t=i3(),n!==null&&!Qs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Dc(n,e,i)):(fi&&t&&jE(e),e.flags|=1,Ps(n,e,r,i),e.child)}function cC(n,e,t,r,i){if(n===null){var o=t.type;return typeof o=="function"&&!p3(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,dI(n,e,o,r,i)):(n=W2(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&i)){var s=o.memoizedProps;if(t=t.compare,t=t!==null?t:yv,t(s,r)&&n.ref===e.ref)return Dc(n,e,i)}return e.flags|=1,n=ef(o,r),n.ref=e.ref,n.return=e,e.child=n}function dI(n,e,t,r,i){if(n!==null){var o=n.memoizedProps;if(yv(o,r)&&n.ref===e.ref)if(Qs=!1,e.pendingProps=r=o,(n.lanes&i)!==0)n.flags&131072&&(Qs=!0);else return e.lanes=n.lanes,Dc(n,e,i)}return k5(n,e,t,r,i)}function pI(n,e,t){var r=e.pendingProps,i=r.children,o=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Yr(bm,xa),xa|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Yr(bm,xa),xa|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:t,Yr(bm,xa),xa|=r}else o!==null?(r=o.baseLanes|t,e.memoizedState=null):r=t,Yr(bm,xa),xa|=r;return Ps(n,e,i,t),e.child}function mI(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function k5(n,e,t,r,i){var o=ta(t)?kd:xs.current;return o=Zm(e,o),Fm(e,i),t=r3(n,e,t,r,o,i),r=i3(),n!==null&&!Qs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Dc(n,e,i)):(fi&&r&&jE(e),e.flags|=1,Ps(n,e,t,i),e.child)}function hC(n,e,t,r,i){if(ta(t)){var o=!0;bx(e)}else o=!1;if(Fm(e,i),e.stateNode===null)H2(n,e),Gk(e,t,r),R5(e,t,r,i),r=!0;else if(n===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=t.contextType;typeof u=="object"&&u!==null?u=ll(u):(u=ta(t)?kd:xs.current,u=Zm(e,u));var c=t.getDerivedStateFromProps,h=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&nC(e,s,r,u),kh=!1;var f=e.memoizedState;s.state=f,Cx(e,r,s,i),l=e.memoizedState,a!==r||f!==l||ea.current||kh?(typeof c=="function"&&(P5(e,t,c,r),l=e.memoizedState),(a=kh||tC(e,t,a,r,f,l,u))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,zk(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:Rl(e.type,a),s.props=u,h=e.pendingProps,f=s.context,l=t.contextType,typeof l=="object"&&l!==null?l=ll(l):(l=ta(t)?kd:xs.current,l=Zm(e,l));var d=t.getDerivedStateFromProps;(c=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||f!==l)&&nC(e,s,r,l),kh=!1,f=e.memoizedState,s.state=f,Cx(e,r,s,i);var v=e.memoizedState;a!==h||f!==v||ea.current||kh?(typeof d=="function"&&(P5(e,t,d,r),v=e.memoizedState),(u=kh||tC(e,t,u,r,f,v,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),s.props=r,s.state=v,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return I5(n,e,t,r,o,i)}function I5(n,e,t,r,i,o){mI(n,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&ZT(e,t,!1),Dc(n,e,o);r=e.stateNode,I8.current=e;var a=s&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&s?(e.child=Jm(e,n.child,null,o),e.child=Jm(e,null,a,o)):Ps(n,e,a,o),e.memoizedState=r.state,i&&ZT(e,t,!0),e.child}function gI(n){var e=n.stateNode;e.pendingContext?YT(n,e.pendingContext,e.pendingContext!==e.context):e.context&&YT(n,e.context,!1),QE(n,e.containerInfo)}function fC(n,e,t,r,i){return Km(),$E(i),e.flags|=256,Ps(n,e,t,r),e.child}var N5={dehydrated:null,treeContext:null,retryLane:0};function F5(n){return{baseLanes:n,cachePool:null,transitions:null}}function vI(n,e,t){var r=e.pendingProps,i=Si.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),Yr(Si,i&1),n===null)return T5(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,n=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Cw(s,r,0,null),n=Ed(n,r,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=F5(t),e.memoizedState=N5,n):a3(e,s));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return N8(n,e,s,r,a,i,t);if(o){o=r.fallback,s=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ef(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=ef(a,o):(o=Ed(o,s,t,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=n.child.memoizedState,s=s===null?F5(t):{baseLanes:s.baseLanes|t,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=n.childLanes&~t,e.memoizedState=N5,r}return o=n.child,n=o.sibling,r=ef(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function a3(n,e){return e=Cw({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function vy(n,e,t,r){return r!==null&&$E(r),Jm(e,n.child,null,t),n=a3(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function N8(n,e,t,r,i,o,s){if(t)return e.flags&256?(e.flags&=-257,r=c_(Error(kt(422))),vy(n,e,s,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Cw({mode:"visible",children:r.children},i,0,null),o=Ed(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Jm(e,n.child,null,s),e.child.memoizedState=F5(s),e.memoizedState=N5,o);if(!(e.mode&1))return vy(n,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(kt(419)),r=c_(o,r,void 0),vy(n,e,s,r)}if(a=(s&n.childLanes)!==0,Qs||a){if(r=Uo,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Fc(n,i),Ul(r,n,i,-1))}return d3(),r=c_(Error(kt(421))),vy(n,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=$8.bind(null,n),i._reactRetry=e,null):(n=o.treeContext,wa=Zh(i.nextSibling),_a=e,fi=!0,Nl=null,n!==null&&(Qa[el++]=Sc,Qa[el++]=_c,Qa[el++]=Id,Sc=n.id,_c=n.overflow,Id=e),e=a3(e,r.children),e.flags|=4096,e)}function dC(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),C5(n.return,e,t)}function h_(n,e,t,r,i){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=t,o.tailMode=i)}function yI(n,e,t){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ps(n,e,r.children,t),r=Si.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&dC(n,t,e);else if(n.tag===19)dC(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Yr(Si,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Px(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),h_(e,!1,i,t,o);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Px(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}h_(e,!0,t,null,o);break;case"together":h_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function H2(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Dc(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Fd|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(kt(153));if(e.child!==null){for(n=e.child,t=ef(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ef(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function F8(n,e,t){switch(e.tag){case 3:gI(e),Km();break;case 5:jk(e);break;case 1:ta(e.type)&&bx(e);break;case 4:QE(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Yr(Ax,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Yr(Si,Si.current&1),e.flags|=128,null):t&e.child.childLanes?vI(n,e,t):(Yr(Si,Si.current&1),n=Dc(n,e,t),n!==null?n.sibling:null);Yr(Si,Si.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return yI(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Yr(Si,Si.current),r)break;return null;case 22:case 23:return e.lanes=0,pI(n,e,t)}return Dc(n,e,t)}var xI,D5,wI,SI;xI=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};D5=function(){};wI=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,gd(Pu.current);var o=null;switch(t){case"input":i=i5(n,i),r=i5(n,r),o=[];break;case"select":i=Ti({},i,{value:void 0}),r=Ti({},r,{value:void 0}),o=[];break;case"textarea":i=a5(n,i),r=a5(n,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Sx)}u5(t,r);var s;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(hv.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(t||(t={}),t[s]=l[s])}else t||(o||(o=[]),o.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(hv.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ti("scroll",n),o||a===l||(o=[])):(o=o||[]).push(u,l))}t&&(o=o||[]).push("style",t);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};SI=function(n,e,t,r){t!==r&&(e.flags|=4)};function n0(n,e){if(!fi)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function is(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function D8(n,e,t){var r=e.pendingProps;switch(qE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return is(e),null;case 1:return ta(e.type)&&_x(),is(e),null;case 3:return r=e.stateNode,Qm(),ai(ea),ai(xs),t3(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(my(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nl!==null&&(W5(Nl),Nl=null))),D5(n,e),is(e),null;case 5:e3(e);var i=gd(bv.current);if(t=e.type,n!==null&&e.stateNode!=null)wI(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(kt(166));return is(e),null}if(n=gd(Pu.current),my(e)){r=e.stateNode,t=e.type;var o=e.memoizedProps;switch(r[_u]=e,r[Sv]=o,n=(e.mode&1)!==0,t){case"dialog":ti("cancel",r),ti("close",r);break;case"iframe":case"object":case"embed":ti("load",r);break;case"video":case"audio":for(i=0;i<R0.length;i++)ti(R0[i],r);break;case"source":ti("error",r);break;case"img":case"image":case"link":ti("error",r),ti("load",r);break;case"details":ti("toggle",r);break;case"input":_T(r,o),ti("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},ti("invalid",r);break;case"textarea":MT(r,o),ti("invalid",r)}u5(t,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&py(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&py(r.textContent,a,n),i=["children",""+a]):hv.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&ti("scroll",r)}switch(t){case"input":sy(r),bT(r,o,!0);break;case"textarea":sy(r),ET(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Sx)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=X4(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=s.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=s.createElement(t,{is:r.is}):(n=s.createElement(t),t==="select"&&(s=n,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):n=s.createElementNS(n,t),n[_u]=e,n[Sv]=r,xI(n,e,!1,!1),e.stateNode=n;e:{switch(s=c5(t,r),t){case"dialog":ti("cancel",n),ti("close",n),i=r;break;case"iframe":case"object":case"embed":ti("load",n),i=r;break;case"video":case"audio":for(i=0;i<R0.length;i++)ti(R0[i],n);i=r;break;case"source":ti("error",n),i=r;break;case"img":case"image":case"link":ti("error",n),ti("load",n),i=r;break;case"details":ti("toggle",n),i=r;break;case"input":_T(n,r),i=i5(n,r),ti("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Ti({},r,{value:void 0}),ti("invalid",n);break;case"textarea":MT(n,r),i=a5(n,r),ti("invalid",n);break;default:i=r}u5(t,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?K4(n,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Y4(n,l)):o==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&fv(n,l):typeof l=="number"&&fv(n,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(hv.hasOwnProperty(o)?l!=null&&o==="onScroll"&&ti("scroll",n):l!=null&&LE(n,o,l,s))}switch(t){case"input":sy(n),bT(n,r,!1);break;case"textarea":sy(n),ET(n);break;case"option":r.value!=null&&n.setAttribute("value",""+af(r.value));break;case"select":n.multiple=!!r.multiple,o=r.value,o!=null?Lm(n,!!r.multiple,o,!1):r.defaultValue!=null&&Lm(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Sx)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return is(e),null;case 6:if(n&&e.stateNode!=null)SI(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(kt(166));if(t=gd(bv.current),gd(Pu.current),my(e)){if(r=e.stateNode,t=e.memoizedProps,r[_u]=e,(o=r.nodeValue!==t)&&(n=_a,n!==null))switch(n.tag){case 3:py(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&py(r.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[_u]=e,e.stateNode=r}return is(e),null;case 13:if(ai(Si),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(fi&&wa!==null&&e.mode&1&&!(e.flags&128))Bk(),Km(),e.flags|=98560,o=!1;else if(o=my(e),r!==null&&r.dehydrated!==null){if(n===null){if(!o)throw Error(kt(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(kt(317));o[_u]=e}else Km(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;is(e),o=!1}else Nl!==null&&(W5(Nl),Nl=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Si.current&1?yo===0&&(yo=3):d3())),e.updateQueue!==null&&(e.flags|=4),is(e),null);case 4:return Qm(),D5(n,e),n===null&&xv(e.stateNode.containerInfo),is(e),null;case 10:return ZE(e.type._context),is(e),null;case 17:return ta(e.type)&&_x(),is(e),null;case 19:if(ai(Si),o=e.memoizedState,o===null)return is(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)n0(o,!1);else{if(yo!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(s=Px(n),s!==null){for(e.flags|=128,n0(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)o=t,n=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,n=s.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Yr(Si,Si.current&1|2),e.child}n=n.sibling}o.tail!==null&&ji()>tg&&(e.flags|=128,r=!0,n0(o,!1),e.lanes=4194304)}else{if(!r)if(n=Px(s),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),n0(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!fi)return is(e),null}else 2*ji()-o.renderingStartTime>tg&&t!==1073741824&&(e.flags|=128,r=!0,n0(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(t=o.last,t!==null?t.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ji(),e.sibling=null,t=Si.current,Yr(Si,r?t&1|2:t&1),e):(is(e),null);case 22:case 23:return f3(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xa&1073741824&&(is(e),e.subtreeFlags&6&&(e.flags|=8192)):is(e),null;case 24:return null;case 25:return null}throw Error(kt(156,e.tag))}function O8(n,e){switch(qE(e),e.tag){case 1:return ta(e.type)&&_x(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return Qm(),ai(ea),ai(xs),t3(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return e3(e),null;case 13:if(ai(Si),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(kt(340));Km()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ai(Si),null;case 4:return Qm(),null;case 10:return ZE(e.type._context),null;case 22:case 23:return f3(),null;case 24:return null;default:return null}}var yy=!1,ds=!1,B8=typeof WeakSet=="function"?WeakSet:Set,Jt=null;function _m(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Ii(n,e,r)}else t.current=null}function O5(n,e,t){try{t()}catch(r){Ii(n,e,r)}}var pC=!1;function U8(n,e){if(w5=yx,n=Ek(),WE(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var s=0,a=-1,l=-1,u=0,c=0,h=n,f=null;t:for(;;){for(var d;h!==t||i!==0&&h.nodeType!==3||(a=s+i),h!==o||r!==0&&h.nodeType!==3||(l=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===n)break t;if(f===t&&++u===i&&(a=s),f===o&&++c===r&&(l=s),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(S5={focusedElem:n,selectionRange:t},yx=!1,Jt=e;Jt!==null;)if(e=Jt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Jt=n;else for(;Jt!==null;){e=Jt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,x=v.memoizedState,g=e.stateNode,S=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:Rl(e.type,y),x);g.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(kt(163))}}catch(E){Ii(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,Jt=n;break}Jt=e.return}return v=pC,pC=!1,v}function V0(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var o=i.destroy;i.destroy=void 0,o!==void 0&&O5(e,t,o)}i=i.next}while(i!==r)}}function Aw(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function B5(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function _I(n){var e=n.alternate;e!==null&&(n.alternate=null,_I(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[_u],delete e[Sv],delete e[M5],delete e[S8],delete e[_8])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function bI(n){return n.tag===5||n.tag===3||n.tag===4}function mC(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||bI(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function U5(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Sx));else if(r!==4&&(n=n.child,n!==null))for(U5(n,e,t),n=n.sibling;n!==null;)U5(n,e,t),n=n.sibling}function z5(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(z5(n,e,t),n=n.sibling;n!==null;)z5(n,e,t),n=n.sibling}var qo=null,Il=!1;function yh(n,e,t){for(t=t.child;t!==null;)MI(n,e,t),t=t.sibling}function MI(n,e,t){if(Cu&&typeof Cu.onCommitFiberUnmount=="function")try{Cu.onCommitFiberUnmount(yw,t)}catch{}switch(t.tag){case 5:ds||_m(t,e);case 6:var r=qo,i=Il;qo=null,yh(n,e,t),qo=r,Il=i,qo!==null&&(Il?(n=qo,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):qo.removeChild(t.stateNode));break;case 18:qo!==null&&(Il?(n=qo,t=t.stateNode,n.nodeType===8?i_(n.parentNode,t):n.nodeType===1&&i_(n,t),gv(n)):i_(qo,t.stateNode));break;case 4:r=qo,i=Il,qo=t.stateNode.containerInfo,Il=!0,yh(n,e,t),qo=r,Il=i;break;case 0:case 11:case 14:case 15:if(!ds&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&O5(t,e,s),i=i.next}while(i!==r)}yh(n,e,t);break;case 1:if(!ds&&(_m(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Ii(t,e,a)}yh(n,e,t);break;case 21:yh(n,e,t);break;case 22:t.mode&1?(ds=(r=ds)||t.memoizedState!==null,yh(n,e,t),ds=r):yh(n,e,t);break;default:yh(n,e,t)}}function gC(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new B8),e.forEach(function(r){var i=X8.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function _l(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var o=n,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:qo=a.stateNode,Il=!1;break e;case 3:qo=a.stateNode.containerInfo,Il=!0;break e;case 4:qo=a.stateNode.containerInfo,Il=!0;break e}a=a.return}if(qo===null)throw Error(kt(160));MI(o,s,i),qo=null,Il=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ii(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)EI(e,n),e=e.sibling}function EI(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(_l(e,n),gu(n),r&4){try{V0(3,n,n.return),Aw(3,n)}catch(y){Ii(n,n.return,y)}try{V0(5,n,n.return)}catch(y){Ii(n,n.return,y)}}break;case 1:_l(e,n),gu(n),r&512&&t!==null&&_m(t,t.return);break;case 5:if(_l(e,n),gu(n),r&512&&t!==null&&_m(t,t.return),n.flags&32){var i=n.stateNode;try{fv(i,"")}catch(y){Ii(n,n.return,y)}}if(r&4&&(i=n.stateNode,i!=null)){var o=n.memoizedProps,s=t!==null?t.memoizedProps:o,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&q4(i,o),c5(a,s);var u=c5(a,o);for(s=0;s<l.length;s+=2){var c=l[s],h=l[s+1];c==="style"?K4(i,h):c==="dangerouslySetInnerHTML"?Y4(i,h):c==="children"?fv(i,h):LE(i,c,h,u)}switch(a){case"input":o5(i,o);break;case"textarea":$4(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var d=o.value;d!=null?Lm(i,!!o.multiple,d,!1):f!==!!o.multiple&&(o.defaultValue!=null?Lm(i,!!o.multiple,o.defaultValue,!0):Lm(i,!!o.multiple,o.multiple?[]:"",!1))}i[Sv]=o}catch(y){Ii(n,n.return,y)}}break;case 6:if(_l(e,n),gu(n),r&4){if(n.stateNode===null)throw Error(kt(162));i=n.stateNode,o=n.memoizedProps;try{i.nodeValue=o}catch(y){Ii(n,n.return,y)}}break;case 3:if(_l(e,n),gu(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{gv(e.containerInfo)}catch(y){Ii(n,n.return,y)}break;case 4:_l(e,n),gu(n);break;case 13:_l(e,n),gu(n),i=n.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(c3=ji())),r&4&&gC(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(ds=(u=ds)||c,_l(e,n),ds=u):_l(e,n),gu(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!c&&n.mode&1)for(Jt=n,c=n.child;c!==null;){for(h=Jt=c;Jt!==null;){switch(f=Jt,d=f.child,f.tag){case 0:case 11:case 14:case 15:V0(4,f,f.return);break;case 1:_m(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){Ii(r,t,y)}}break;case 5:_m(f,f.return);break;case 22:if(f.memoizedState!==null){yC(h);continue}}d!==null?(d.return=f,Jt=d):yC(h)}c=c.sibling}e:for(c=null,h=n;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=h.stateNode,l=h.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Z4("display",s))}catch(y){Ii(n,n.return,y)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){Ii(n,n.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_l(e,n),gu(n),r&4&&gC(n);break;case 21:break;default:_l(e,n),gu(n)}}function gu(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(bI(t)){var r=t;break e}t=t.return}throw Error(kt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(fv(i,""),r.flags&=-33);var o=mC(n);z5(n,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=mC(n);U5(n,a,s);break;default:throw Error(kt(161))}}catch(l){Ii(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function z8(n,e,t){Jt=n,AI(n)}function AI(n,e,t){for(var r=(n.mode&1)!==0;Jt!==null;){var i=Jt,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||yy;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ds;a=yy;var u=ds;if(yy=s,(ds=l)&&!u)for(Jt=i;Jt!==null;)s=Jt,l=s.child,s.tag===22&&s.memoizedState!==null?xC(i):l!==null?(l.return=s,Jt=l):xC(i);for(;o!==null;)Jt=o,AI(o),o=o.sibling;Jt=i,yy=a,ds=u}vC(n)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Jt=o):vC(n)}}function vC(n){for(;Jt!==null;){var e=Jt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ds||Aw(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ds)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Rl(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&eC(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}eC(e,s,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&gv(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(kt(163))}ds||e.flags&512&&B5(e)}catch(f){Ii(e,e.return,f)}}if(e===n){Jt=null;break}if(t=e.sibling,t!==null){t.return=e.return,Jt=t;break}Jt=e.return}}function yC(n){for(;Jt!==null;){var e=Jt;if(e===n){Jt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Jt=t;break}Jt=e.return}}function xC(n){for(;Jt!==null;){var e=Jt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Aw(4,e)}catch(l){Ii(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ii(e,i,l)}}var o=e.return;try{B5(e)}catch(l){Ii(e,o,l)}break;case 5:var s=e.return;try{B5(e)}catch(l){Ii(e,s,l)}}}catch(l){Ii(e,e.return,l)}if(e===n){Jt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Jt=a;break}Jt=e.return}}var H8=Math.ceil,kx=Gc.ReactCurrentDispatcher,l3=Gc.ReactCurrentOwner,sl=Gc.ReactCurrentBatchConfig,gr=0,Uo=null,oo=null,Xo=0,xa=0,bm=xf(0),yo=0,Tv=null,Fd=0,Tw=0,u3=0,W0=null,Zs=null,c3=0,tg=1/0,dc=null,Ix=!1,H5=null,Jh=null,xy=!1,Uh=null,Nx=0,j0=0,G5=null,G2=-1,V2=0;function Is(){return gr&6?ji():G2!==-1?G2:G2=ji()}function Qh(n){return n.mode&1?gr&2&&Xo!==0?Xo&-Xo:M8.transition!==null?(V2===0&&(V2=uk()),V2):(n=Ur,n!==0||(n=window.event,n=n===void 0?16:gk(n.type)),n):1}function Ul(n,e,t,r){if(50<j0)throw j0=0,G5=null,Error(kt(185));i1(n,t,r),(!(gr&2)||n!==Uo)&&(n===Uo&&(!(gr&2)&&(Tw|=t),yo===4&&Nh(n,Xo)),na(n,r),t===1&&gr===0&&!(e.mode&1)&&(tg=ji()+500,bw&&wf()))}function na(n,e){var t=n.callbackNode;MU(n,e);var r=vx(n,n===Uo?Xo:0);if(r===0)t!==null&&CT(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&CT(t),e===1)n.tag===0?b8(wC.bind(null,n)):Fk(wC.bind(null,n)),x8(function(){!(gr&6)&&wf()}),t=null;else{switch(ck(r)){case 1:t=DE;break;case 4:t=ak;break;case 16:t=gx;break;case 536870912:t=lk;break;default:t=gx}t=NI(t,TI.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function TI(n,e){if(G2=-1,V2=0,gr&6)throw Error(kt(327));var t=n.callbackNode;if(Dm()&&n.callbackNode!==t)return null;var r=vx(n,n===Uo?Xo:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Fx(n,r);else{e=r;var i=gr;gr|=2;var o=PI();(Uo!==n||Xo!==e)&&(dc=null,tg=ji()+500,Md(n,e));do try{W8();break}catch(a){CI(n,a)}while(1);YE(),kx.current=o,gr=i,oo!==null?e=0:(Uo=null,Xo=0,e=yo)}if(e!==0){if(e===2&&(i=m5(n),i!==0&&(r=i,e=V5(n,i))),e===1)throw t=Tv,Md(n,0),Nh(n,r),na(n,ji()),t;if(e===6)Nh(n,r);else{if(i=n.current.alternate,!(r&30)&&!G8(i)&&(e=Fx(n,r),e===2&&(o=m5(n),o!==0&&(r=o,e=V5(n,o))),e===1))throw t=Tv,Md(n,0),Nh(n,r),na(n,ji()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(kt(345));case 2:id(n,Zs,dc);break;case 3:if(Nh(n,r),(r&130023424)===r&&(e=c3+500-ji(),10<e)){if(vx(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Is(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=b5(id.bind(null,n,Zs,dc),e);break}id(n,Zs,dc);break;case 4:if(Nh(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var s=31-Bl(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=ji()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*H8(r/1960))-r,10<r){n.timeoutHandle=b5(id.bind(null,n,Zs,dc),r);break}id(n,Zs,dc);break;case 5:id(n,Zs,dc);break;default:throw Error(kt(329))}}}return na(n,ji()),n.callbackNode===t?TI.bind(null,n):null}function V5(n,e){var t=W0;return n.current.memoizedState.isDehydrated&&(Md(n,e).flags|=256),n=Fx(n,e),n!==2&&(e=Zs,Zs=t,e!==null&&W5(e)),n}function W5(n){Zs===null?Zs=n:Zs.push.apply(Zs,n)}function G8(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],o=i.getSnapshot;i=i.value;try{if(!Gl(o(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Nh(n,e){for(e&=~u3,e&=~Tw,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Bl(e),r=1<<t;n[t]=-1,e&=~r}}function wC(n){if(gr&6)throw Error(kt(327));Dm();var e=vx(n,0);if(!(e&1))return na(n,ji()),null;var t=Fx(n,e);if(n.tag!==0&&t===2){var r=m5(n);r!==0&&(e=r,t=V5(n,r))}if(t===1)throw t=Tv,Md(n,0),Nh(n,e),na(n,ji()),t;if(t===6)throw Error(kt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,id(n,Zs,dc),na(n,ji()),null}function h3(n,e){var t=gr;gr|=1;try{return n(e)}finally{gr=t,gr===0&&(tg=ji()+500,bw&&wf())}}function Dd(n){Uh!==null&&Uh.tag===0&&!(gr&6)&&Dm();var e=gr;gr|=1;var t=sl.transition,r=Ur;try{if(sl.transition=null,Ur=1,n)return n()}finally{Ur=r,sl.transition=t,gr=e,!(gr&6)&&wf()}}function f3(){xa=bm.current,ai(bm)}function Md(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,y8(t)),oo!==null)for(t=oo.return;t!==null;){var r=t;switch(qE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&_x();break;case 3:Qm(),ai(ea),ai(xs),t3();break;case 5:e3(r);break;case 4:Qm();break;case 13:ai(Si);break;case 19:ai(Si);break;case 10:ZE(r.type._context);break;case 22:case 23:f3()}t=t.return}if(Uo=n,oo=n=ef(n.current,null),Xo=xa=e,yo=0,Tv=null,u3=Tw=Fd=0,Zs=W0=null,md!==null){for(e=0;e<md.length;e++)if(t=md[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,o=t.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}t.pending=r}md=null}return n}function CI(n,e){do{var t=oo;try{if(YE(),U2.current=Lx,Rx){for(var r=Ei.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Rx=!1}if(Nd=0,Do=vo=Ei=null,G0=!1,Mv=0,l3.current=null,t===null||t.return===null){yo=1,Tv=e,oo=null;break}e:{var o=n,s=t.return,a=t,l=e;if(e=Xo,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=aC(s);if(d!==null){d.flags&=-257,lC(d,s,a,o,e),d.mode&1&&sC(o,u,e),e=d,l=u;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){sC(o,u,e),d3();break e}l=Error(kt(426))}}else if(fi&&a.mode&1){var x=aC(s);if(x!==null){!(x.flags&65536)&&(x.flags|=256),lC(x,s,a,o,e),$E(eg(l,a));break e}}o=l=eg(l,a),yo!==4&&(yo=2),W0===null?W0=[o]:W0.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=hI(o,l,e);QT(o,g);break e;case 1:a=l;var S=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof S.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Jh===null||!Jh.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=fI(o,a,e);QT(o,E);break e}}o=o.return}while(o!==null)}LI(t)}catch(C){e=C,oo===t&&t!==null&&(oo=t=t.return);continue}break}while(1)}function PI(){var n=kx.current;return kx.current=Lx,n===null?Lx:n}function d3(){(yo===0||yo===3||yo===2)&&(yo=4),Uo===null||!(Fd&268435455)&&!(Tw&268435455)||Nh(Uo,Xo)}function Fx(n,e){var t=gr;gr|=2;var r=PI();(Uo!==n||Xo!==e)&&(dc=null,Md(n,e));do try{V8();break}catch(i){CI(n,i)}while(1);if(YE(),gr=t,kx.current=r,oo!==null)throw Error(kt(261));return Uo=null,Xo=0,yo}function V8(){for(;oo!==null;)RI(oo)}function W8(){for(;oo!==null&&!mU();)RI(oo)}function RI(n){var e=II(n.alternate,n,xa);n.memoizedProps=n.pendingProps,e===null?LI(n):oo=e,l3.current=null}function LI(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=O8(t,e),t!==null){t.flags&=32767,oo=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{yo=6,oo=null;return}}else if(t=D8(t,e,xa),t!==null){oo=t;return}if(e=e.sibling,e!==null){oo=e;return}oo=e=n}while(e!==null);yo===0&&(yo=5)}function id(n,e,t){var r=Ur,i=sl.transition;try{sl.transition=null,Ur=1,j8(n,e,t,r)}finally{sl.transition=i,Ur=r}return null}function j8(n,e,t,r){do Dm();while(Uh!==null);if(gr&6)throw Error(kt(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(kt(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(EU(n,o),n===Uo&&(oo=Uo=null,Xo=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||xy||(xy=!0,NI(gx,function(){return Dm(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=sl.transition,sl.transition=null;var s=Ur;Ur=1;var a=gr;gr|=4,l3.current=null,U8(n,t),EI(t,n),h8(S5),yx=!!w5,S5=w5=null,n.current=t,z8(t),gU(),gr=a,Ur=s,sl.transition=o}else n.current=t;if(xy&&(xy=!1,Uh=n,Nx=i),o=n.pendingLanes,o===0&&(Jh=null),xU(t.stateNode),na(n,ji()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ix)throw Ix=!1,n=H5,H5=null,n;return Nx&1&&n.tag!==0&&Dm(),o=n.pendingLanes,o&1?n===G5?j0++:(j0=0,G5=n):j0=0,wf(),null}function Dm(){if(Uh!==null){var n=ck(Nx),e=sl.transition,t=Ur;try{if(sl.transition=null,Ur=16>n?16:n,Uh===null)var r=!1;else{if(n=Uh,Uh=null,Nx=0,gr&6)throw Error(kt(331));var i=gr;for(gr|=4,Jt=n.current;Jt!==null;){var o=Jt,s=o.child;if(Jt.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Jt=u;Jt!==null;){var c=Jt;switch(c.tag){case 0:case 11:case 15:V0(8,c,o)}var h=c.child;if(h!==null)h.return=c,Jt=h;else for(;Jt!==null;){c=Jt;var f=c.sibling,d=c.return;if(_I(c),c===u){Jt=null;break}if(f!==null){f.return=d,Jt=f;break}Jt=d}}}var v=o.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}Jt=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Jt=s;else e:for(;Jt!==null;){if(o=Jt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:V0(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,Jt=g;break e}Jt=o.return}}var S=n.current;for(Jt=S;Jt!==null;){s=Jt;var _=s.child;if(s.subtreeFlags&2064&&_!==null)_.return=s,Jt=_;else e:for(s=S;Jt!==null;){if(a=Jt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Aw(9,a)}}catch(C){Ii(a,a.return,C)}if(a===s){Jt=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Jt=E;break e}Jt=a.return}}if(gr=i,wf(),Cu&&typeof Cu.onPostCommitFiberRoot=="function")try{Cu.onPostCommitFiberRoot(yw,n)}catch{}r=!0}return r}finally{Ur=t,sl.transition=e}}return!1}function SC(n,e,t){e=eg(t,e),e=hI(n,e,1),n=Kh(n,e,1),e=Is(),n!==null&&(i1(n,1,e),na(n,e))}function Ii(n,e,t){if(n.tag===3)SC(n,n,t);else for(;e!==null;){if(e.tag===3){SC(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Jh===null||!Jh.has(r))){n=eg(t,n),n=fI(e,n,1),e=Kh(e,n,1),n=Is(),e!==null&&(i1(e,1,n),na(e,n));break}}e=e.return}}function q8(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Is(),n.pingedLanes|=n.suspendedLanes&t,Uo===n&&(Xo&t)===t&&(yo===4||yo===3&&(Xo&130023424)===Xo&&500>ji()-c3?Md(n,0):u3|=t),na(n,e)}function kI(n,e){e===0&&(n.mode&1?(e=uy,uy<<=1,!(uy&130023424)&&(uy=4194304)):e=1);var t=Is();n=Fc(n,e),n!==null&&(i1(n,e,t),na(n,t))}function $8(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),kI(n,t)}function X8(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(kt(314))}r!==null&&r.delete(e),kI(n,t)}var II;II=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ea.current)Qs=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Qs=!1,F8(n,e,t);Qs=!!(n.flags&131072)}else Qs=!1,fi&&e.flags&1048576&&Dk(e,Ex,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;H2(n,e),n=e.pendingProps;var i=Zm(e,xs.current);Fm(e,t),i=r3(null,e,r,n,i,t);var o=i3();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ta(r)?(o=!0,bx(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,JE(e),i.updater=Mw,e.stateNode=i,i._reactInternals=e,R5(e,r,n,t),e=I5(null,e,r,!0,o,t)):(e.tag=0,fi&&o&&jE(e),Ps(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch(H2(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Z8(r),n=Rl(r,n),i){case 0:e=k5(null,e,r,n,t);break e;case 1:e=hC(null,e,r,n,t);break e;case 11:e=uC(null,e,r,n,t);break e;case 14:e=cC(null,e,r,Rl(r.type,n),t);break e}throw Error(kt(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rl(r,i),k5(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rl(r,i),hC(n,e,r,i,t);case 3:e:{if(gI(e),n===null)throw Error(kt(387));r=e.pendingProps,o=e.memoizedState,i=o.element,zk(n,e),Cx(e,r,null,t);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=eg(Error(kt(423)),e),e=fC(n,e,r,t,i);break e}else if(r!==i){i=eg(Error(kt(424)),e),e=fC(n,e,r,t,i);break e}else for(wa=Zh(e.stateNode.containerInfo.firstChild),_a=e,fi=!0,Nl=null,t=Wk(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Km(),r===i){e=Dc(n,e,t);break e}Ps(n,e,r,t)}e=e.child}return e;case 5:return jk(e),n===null&&T5(e),r=e.type,i=e.pendingProps,o=n!==null?n.memoizedProps:null,s=i.children,_5(r,i)?s=null:o!==null&&_5(r,o)&&(e.flags|=32),mI(n,e),Ps(n,e,s,t),e.child;case 6:return n===null&&T5(e),null;case 13:return vI(n,e,t);case 4:return QE(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=Jm(e,null,r,t):Ps(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rl(r,i),uC(n,e,r,i,t);case 7:return Ps(n,e,e.pendingProps,t),e.child;case 8:return Ps(n,e,e.pendingProps.children,t),e.child;case 12:return Ps(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,Yr(Ax,r._currentValue),r._currentValue=s,o!==null)if(Gl(o.value,s)){if(o.children===i.children&&!ea.current){e=Dc(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Pc(-1,t&-t),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),C5(o.return,t,e),a.lanes|=t;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(kt(341));s.lanes|=t,a=s.alternate,a!==null&&(a.lanes|=t),C5(s,t,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Ps(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Fm(e,t),i=ll(i),r=r(i),e.flags|=1,Ps(n,e,r,t),e.child;case 14:return r=e.type,i=Rl(r,e.pendingProps),i=Rl(r.type,i),cC(n,e,r,i,t);case 15:return dI(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rl(r,i),H2(n,e),e.tag=1,ta(r)?(n=!0,bx(e)):n=!1,Fm(e,t),Gk(e,r,i),R5(e,r,i,t),I5(null,e,r,!0,n,t);case 19:return yI(n,e,t);case 22:return pI(n,e,t)}throw Error(kt(156,e.tag))};function NI(n,e){return sk(n,e)}function Y8(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nl(n,e,t,r){return new Y8(n,e,t,r)}function p3(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Z8(n){if(typeof n=="function")return p3(n)?1:0;if(n!=null){if(n=n.$$typeof,n===IE)return 11;if(n===NE)return 14}return 2}function ef(n,e){var t=n.alternate;return t===null?(t=nl(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function W2(n,e,t,r,i,o){var s=2;if(r=n,typeof n=="function")p3(n)&&(s=1);else if(typeof n=="string")s=5;else e:switch(n){case dm:return Ed(t.children,i,o,e);case kE:s=8,i|=8;break;case e5:return n=nl(12,t,e,i|2),n.elementType=e5,n.lanes=o,n;case t5:return n=nl(13,t,e,i),n.elementType=t5,n.lanes=o,n;case n5:return n=nl(19,t,e,i),n.elementType=n5,n.lanes=o,n;case V4:return Cw(t,i,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case H4:s=10;break e;case G4:s=9;break e;case IE:s=11;break e;case NE:s=14;break e;case Lh:s=16,r=null;break e}throw Error(kt(130,n==null?n:typeof n,""))}return e=nl(s,t,e,i),e.elementType=n,e.type=r,e.lanes=o,e}function Ed(n,e,t,r){return n=nl(7,n,r,e),n.lanes=t,n}function Cw(n,e,t,r){return n=nl(22,n,r,e),n.elementType=V4,n.lanes=t,n.stateNode={isHidden:!1},n}function f_(n,e,t){return n=nl(6,n,null,e),n.lanes=t,n}function d_(n,e,t){return e=nl(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function K8(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$S(0),this.expirationTimes=$S(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$S(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function m3(n,e,t,r,i,o,s,a,l){return n=new K8(n,e,t,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=nl(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},JE(o),n}function J8(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fm,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function FI(n){if(!n)return lf;n=n._reactInternals;e:{if($d(n)!==n||n.tag!==1)throw Error(kt(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ta(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(kt(171))}if(n.tag===1){var t=n.type;if(ta(t))return Nk(n,t,e)}return e}function DI(n,e,t,r,i,o,s,a,l){return n=m3(t,r,!0,n,i,o,s,a,l),n.context=FI(null),t=n.current,r=Is(),i=Qh(t),o=Pc(r,i),o.callback=e??null,Kh(t,o,i),n.current.lanes=i,i1(n,i,r),na(n,r),n}function Pw(n,e,t,r){var i=e.current,o=Is(),s=Qh(i);return t=FI(t),e.context===null?e.context=t:e.pendingContext=t,e=Pc(o,s),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=Kh(i,e,s),n!==null&&(Ul(n,i,s,o),B2(n,i,s)),s}function Dx(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function _C(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function g3(n,e){_C(n,e),(n=n.alternate)&&_C(n,e)}function Q8(){return null}var OI=typeof reportError=="function"?reportError:function(n){console.error(n)};function v3(n){this._internalRoot=n}Rw.prototype.render=v3.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(kt(409));Pw(n,e,null,null)};Rw.prototype.unmount=v3.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Dd(function(){Pw(null,n,null,null)}),e[Nc]=null}};function Rw(n){this._internalRoot=n}Rw.prototype.unstable_scheduleHydration=function(n){if(n){var e=dk();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ih.length&&e!==0&&e<Ih[t].priority;t++);Ih.splice(t,0,n),t===0&&mk(n)}};function y3(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Lw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function bC(){}function ez(n,e,t,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Dx(s);o.call(u)}}var s=DI(e,r,n,0,null,!1,!1,"",bC);return n._reactRootContainer=s,n[Nc]=s.current,xv(n.nodeType===8?n.parentNode:n),Dd(),s}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Dx(l);a.call(u)}}var l=m3(n,0,!1,null,null,!1,!1,"",bC);return n._reactRootContainer=l,n[Nc]=l.current,xv(n.nodeType===8?n.parentNode:n),Dd(function(){Pw(e,l,t,r)}),l}function kw(n,e,t,r,i){var o=t._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Dx(s);a.call(l)}}Pw(e,s,n,i)}else s=ez(t,e,n,i,r);return Dx(s)}hk=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=P0(e.pendingLanes);t!==0&&(OE(e,t|1),na(e,ji()),!(gr&6)&&(tg=ji()+500,wf()))}break;case 13:Dd(function(){var r=Fc(n,1);if(r!==null){var i=Is();Ul(r,n,1,i)}}),g3(n,1)}};BE=function(n){if(n.tag===13){var e=Fc(n,134217728);if(e!==null){var t=Is();Ul(e,n,134217728,t)}g3(n,134217728)}};fk=function(n){if(n.tag===13){var e=Qh(n),t=Fc(n,e);if(t!==null){var r=Is();Ul(t,n,e,r)}g3(n,e)}};dk=function(){return Ur};pk=function(n,e){var t=Ur;try{return Ur=n,e()}finally{Ur=t}};f5=function(n,e,t){switch(e){case"input":if(o5(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=_w(r);if(!i)throw Error(kt(90));j4(r),o5(r,i)}}}break;case"textarea":$4(n,t);break;case"select":e=t.value,e!=null&&Lm(n,!!t.multiple,e,!1)}};ek=h3;tk=Dd;var tz={usingClientEntryPoint:!1,Events:[s1,vm,_w,J4,Q4,h3]},r0={findFiberByHostInstance:pd,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nz={bundleType:r0.bundleType,version:r0.version,rendererPackageName:r0.rendererPackageName,rendererConfig:r0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gc.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=ik(n),n===null?null:n.stateNode},findFiberByHostInstance:r0.findFiberByHostInstance||Q8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wy=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wy.isDisabled&&wy.supportsFiber)try{yw=wy.inject(nz),Cu=wy}catch{}}Aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tz;Aa.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y3(e))throw Error(kt(200));return J8(n,e,null,t)};Aa.createRoot=function(n,e){if(!y3(n))throw Error(kt(299));var t=!1,r="",i=OI;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=m3(n,1,!1,null,null,t,!1,r,i),n[Nc]=e.current,xv(n.nodeType===8?n.parentNode:n),new v3(e)};Aa.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(kt(188)):(n=Object.keys(n).join(","),Error(kt(268,n)));return n=ik(e),n=n===null?null:n.stateNode,n};Aa.flushSync=function(n){return Dd(n)};Aa.hydrate=function(n,e,t){if(!Lw(e))throw Error(kt(200));return kw(null,n,e,!0,t)};Aa.hydrateRoot=function(n,e,t){if(!y3(n))throw Error(kt(405));var r=t!=null&&t.hydratedSources||null,i=!1,o="",s=OI;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),e=DI(e,null,n,1,t??null,i,!1,o,s),n[Nc]=e.current,xv(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Rw(e)};Aa.render=function(n,e,t){if(!Lw(e))throw Error(kt(200));return kw(null,n,e,!1,t)};Aa.unmountComponentAtNode=function(n){if(!Lw(n))throw Error(kt(40));return n._reactRootContainer?(Dd(function(){kw(null,null,n,!1,function(){n._reactRootContainer=null,n[Nc]=null})}),!0):!1};Aa.unstable_batchedUpdates=h3;Aa.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Lw(t))throw Error(kt(200));if(n==null||n._reactInternals===void 0)throw Error(kt(38));return kw(n,e,t,!1,r)};Aa.version="18.2.0-next-9e3b772b8-20220608";(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=Aa})(QB);const rz=gw(Kb),iz="modulepreload",oz=function(n){return"/cad-os/"+n},MC={},Ox=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(o=>{if(o=oz(o),o in MC)return;MC[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const h=i[c];if(h.href===o&&(!s||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":iz,s||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),s)return new Promise((c,h)=>{u.addEventListener("load",c),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())};var x3={};Object.defineProperty(x3,"__esModule",{value:!0});x3.parse=fz;x3.serialize=dz;const sz=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,az=/^[\u0021-\u003A\u003C-\u007E]*$/,lz=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,uz=/^[\u0020-\u003A\u003D-\u007E]*$/,cz=Object.prototype.toString,hz=(()=>{const n=function(){};return n.prototype=Object.create(null),n})();function fz(n,e){const t=new hz,r=n.length;if(r<2)return t;const i=(e==null?void 0:e.decode)||pz;let o=0;do{const s=n.indexOf("=",o);if(s===-1)break;const a=n.indexOf(";",o),l=a===-1?r:a;if(s>l){o=n.lastIndexOf(";",s-1)+1;continue}const u=EC(n,o,s),c=AC(n,s,u),h=n.slice(u,c);if(t[h]===void 0){let f=EC(n,s+1,l),d=AC(n,l,f);const v=i(n.slice(f,d));t[h]=v}o=l+1}while(o<r);return t}function EC(n,e,t){do{const r=n.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<t);return t}function AC(n,e,t){for(;e>t;){const r=n.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return t}function dz(n,e,t){const r=(t==null?void 0:t.encode)||encodeURIComponent;if(!sz.test(n))throw new TypeError(`argument name is invalid: ${n}`);const i=r(e);if(!az.test(i))throw new TypeError(`argument val is invalid: ${e}`);let o=n+"="+i;if(!t)return o;if(t.maxAge!==void 0){if(!Number.isInteger(t.maxAge))throw new TypeError(`option maxAge is invalid: ${t.maxAge}`);o+="; Max-Age="+t.maxAge}if(t.domain){if(!lz.test(t.domain))throw new TypeError(`option domain is invalid: ${t.domain}`);o+="; Domain="+t.domain}if(t.path){if(!uz.test(t.path))throw new TypeError(`option path is invalid: ${t.path}`);o+="; Path="+t.path}if(t.expires){if(!mz(t.expires)||!Number.isFinite(t.expires.valueOf()))throw new TypeError(`option expires is invalid: ${t.expires}`);o+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(o+="; HttpOnly"),t.secure&&(o+="; Secure"),t.partitioned&&(o+="; Partitioned"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${t.priority}`)}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${t.sameSite}`)}return o}function pz(n){if(n.indexOf("%")===-1)return n;try{return decodeURIComponent(n)}catch{return n}}function mz(n){return cz.call(n)==="[object Date]"}var TC="popstate";function gz(n={}){function e(i,o){let{pathname:s="/",search:a="",hash:l=""}=Xd(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),j5("",{pathname:s,search:a,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){let s=i.document.querySelector("base"),a="";if(s&&s.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof o=="string"?o:Cv(o))}function r(i,o){Vl(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return yz(e,t,r,n)}function Ai(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Vl(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vz(){return Math.random().toString(36).substring(2,10)}function CC(n,e){return{usr:n.state,key:n.key,idx:e}}function j5(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Xd(e):e,state:t,key:e&&e.key||r||vz()}}function Cv({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Xd(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function yz(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",l=null,u=c();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function c(){return(s.state||{idx:null}).idx}function h(){a="POP";let x=c(),g=x==null?null:x-u;u=x,l&&l({action:a,location:y.location,delta:g})}function f(x,g){a="PUSH";let S=j5(y.location,x,g);t&&t(S,x),u=c()+1;let _=CC(S,u),E=y.createHref(S);try{s.pushState(_,"",E)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(E)}o&&l&&l({action:a,location:y.location,delta:1})}function d(x,g){a="REPLACE";let S=j5(y.location,x,g);t&&t(S,x),u=c();let _=CC(S,u),E=y.createHref(S);s.replaceState(_,"",E),o&&l&&l({action:a,location:y.location,delta:0})}function v(x){let g=i.location.origin!=="null"?i.location.origin:i.location.href,S=typeof x=="string"?x:Cv(x);return S=S.replace(/ $/,"%20"),Ai(g,`No window.location.(origin|href) available to create URL for href: ${S}`),new URL(S,g)}let y={get action(){return a},get location(){return n(i,s)},listen(x){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(TC,h),l=x,()=>{i.removeEventListener(TC,h),l=null}},createHref(x){return e(i,x)},createURL:v,encodeLocation(x){let g=v(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:d,go(x){return s.go(x)}};return y}function BI(n,e,t="/"){return xz(n,e,t,!1)}function xz(n,e,t,r){let i=typeof e=="string"?Xd(e):e,o=Oc(i.pathname||"/",t);if(o==null)return null;let s=UI(n);wz(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let u=Lz(o);a=Pz(s[l],u,r)}return a}function UI(n,e=[],t=[],r=""){let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(Ai(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=Rc([r,l.relativePath]),c=t.concat(l);o.children&&o.children.length>0&&(Ai(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),UI(o.children,e,c,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:Tz(u,o.index),routesMeta:c})};return n.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of zI(o.path))i(o,s,l)}),e}function zI(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=zI(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function wz(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Cz(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var Sz=/^:[\w-]+$/,_z=3,bz=2,Mz=1,Ez=10,Az=-2,PC=n=>n==="*";function Tz(n,e){let t=n.split("/"),r=t.length;return t.some(PC)&&(r+=Az),e&&(r+=bz),t.filter(i=>!PC(i)).reduce((i,o)=>i+(Sz.test(o)?_z:o===""?Mz:Ez),r)}function Cz(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function Pz(n,e,t=!1){let{routesMeta:r}=n,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=o==="/"?e:e.slice(o.length)||"/",h=Bx({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!h&&u&&t&&!r[r.length-1].route.index&&(h=Bx({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:Rc([o,h.pathname]),pathnameBase:Fz(Rc([o,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(o=Rc([o,h.pathnameBase]))}return s}function Bx(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Rz(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:h},f)=>{if(c==="*"){let v=a[f]||"";s=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const d=a[f];return h&&!d?u[c]=void 0:u[c]=(d||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:n}}function Rz(n,e=!1,t=!0){Vl(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Lz(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vl(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Oc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function kz(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Xd(n):n;return{pathname:t?t.startsWith("/")?t:Iz(t,e):e,search:Dz(r),hash:Oz(i)}}function Iz(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function p_(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Nz(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function HI(n){let e=Nz(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function GI(n,e,t,r=!1){let i;typeof n=="string"?i=Xd(n):(i={...n},Ai(!i.pathname||!i.pathname.includes("?"),p_("?","pathname","search",i)),Ai(!i.pathname||!i.pathname.includes("#"),p_("#","pathname","hash",i)),Ai(!i.search||!i.search.includes("#"),p_("#","search","hash",i)));let o=n===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=t;else{let h=e.length-1;if(!r&&s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=kz(i,a),u=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Rc=n=>n.join("/").replace(/\/\/+/g,"/"),Fz=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Dz=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Oz=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function Bz(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var VI=["POST","PUT","PATCH","DELETE"];new Set(VI);var Uz=["GET",...VI];new Set(Uz);var xg=de.createContext(null);xg.displayName="DataRouter";var Iw=de.createContext(null);Iw.displayName="DataRouterState";var WI=de.createContext({isTransitioning:!1});WI.displayName="ViewTransition";var zz=de.createContext(new Map);zz.displayName="Fetchers";var Hz=de.createContext(null);Hz.displayName="Await";var Ou=de.createContext(null);Ou.displayName="Navigation";var l1=de.createContext(null);l1.displayName="Location";var Bu=de.createContext({outlet:null,matches:[],isDataRoute:!1});Bu.displayName="Route";var w3=de.createContext(null);w3.displayName="RouteError";function Gz(n,{relative:e}={}){Ai(u1(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=de.useContext(Ou),{hash:i,pathname:o,search:s}=c1(n,{relative:e}),a=o;return t!=="/"&&(a=o==="/"?t:Rc([t,o])),r.createHref({pathname:a,search:s,hash:i})}function u1(){return de.useContext(l1)!=null}function Yd(){return Ai(u1(),"useLocation() may be used only in the context of a <Router> component."),de.useContext(l1).location}var jI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function qI(n){de.useContext(Ou).static||de.useLayoutEffect(n)}function $I(){let{isDataRoute:n}=de.useContext(Bu);return n?n7():Vz()}function Vz(){Ai(u1(),"useNavigate() may be used only in the context of a <Router> component.");let n=de.useContext(xg),{basename:e,navigator:t}=de.useContext(Ou),{matches:r}=de.useContext(Bu),{pathname:i}=Yd(),o=JSON.stringify(HI(r)),s=de.useRef(!1);return qI(()=>{s.current=!0}),de.useCallback((l,u={})=>{if(Vl(s.current,jI),!s.current)return;if(typeof l=="number"){t.go(l);return}let c=GI(l,JSON.parse(o),i,u.relative==="path");n==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Rc([e,c.pathname])),(u.replace?t.replace:t.push)(c,u.state,u)},[e,t,o,i,n])}de.createContext(null);function Wz(){let{matches:n}=de.useContext(Bu),e=n[n.length-1];return e?e.params:{}}function c1(n,{relative:e}={}){let{matches:t}=de.useContext(Bu),{pathname:r}=Yd(),i=JSON.stringify(HI(t));return de.useMemo(()=>GI(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function jz(n,e){return XI(n,e)}function XI(n,e,t,r){var S;Ai(u1(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=de.useContext(Ou),{matches:s}=de.useContext(Bu),a=s[s.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",h=a&&a.route;{let _=h&&h.path||"";YI(u,!h||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let f=Yd(),d;if(e){let _=typeof e=="string"?Xd(e):e;Ai(c==="/"||((S=_.pathname)==null?void 0:S.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${_.pathname}" was given in the \`location\` prop.`),d=_}else d=f;let v=d.pathname||"/",y=v;if(c!=="/"){let _=c.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(_.length).join("/")}let x=!o&&t&&t.matches&&t.matches.length>0?t.matches:BI(n,{pathname:y});Vl(h||x!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),Vl(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=Zz(x&&x.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Rc([c,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Rc([c,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,t,r);return e&&g?de.createElement(l1.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},g):g}function qz(){let n=t7(),e=Bz(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",n),s=de.createElement(de.Fragment,null,de.createElement("p",null," Hey developer "),de.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",de.createElement("code",{style:o},"ErrorBoundary")," or"," ",de.createElement("code",{style:o},"errorElement")," prop on your route.")),de.createElement(de.Fragment,null,de.createElement("h2",null,"Unexpected Application Error!"),de.createElement("h3",{style:{fontStyle:"italic"}},e),t?de.createElement("pre",{style:i},t):null,s)}var $z=de.createElement(qz,null),Xz=class extends de.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?de.createElement(Bu.Provider,{value:this.props.routeContext},de.createElement(w3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Yz({routeContext:n,match:e,children:t}){let r=de.useContext(xg);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),de.createElement(Bu.Provider,{value:n},t)}function Zz(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,o=t==null?void 0:t.errors;if(o!=null){let l=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);Ai(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let s=!1,a=-1;if(t)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:c,errors:h}=t,f=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||f){s=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,c)=>{let h,f=!1,d=null,v=null;t&&(h=o&&u.route.id?o[u.route.id]:void 0,d=u.route.errorElement||$z,s&&(a<0&&c===0?(YI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,v=null):a===c&&(f=!0,v=u.route.hydrateFallbackElement||null)));let y=e.concat(i.slice(0,c+1)),x=()=>{let g;return h?g=d:f?g=v:u.route.Component?g=de.createElement(u.route.Component,null):u.route.element?g=u.route.element:g=l,de.createElement(Yz,{match:u,routeContext:{outlet:l,matches:y,isDataRoute:t!=null},children:g})};return t&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?de.createElement(Xz,{location:t.location,revalidation:t.revalidation,component:d,error:h,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}function S3(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Kz(n){let e=de.useContext(xg);return Ai(e,S3(n)),e}function Jz(n){let e=de.useContext(Iw);return Ai(e,S3(n)),e}function Qz(n){let e=de.useContext(Bu);return Ai(e,S3(n)),e}function _3(n){let e=Qz(n),t=e.matches[e.matches.length-1];return Ai(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function e7(){return _3("useRouteId")}function t7(){var r;let n=de.useContext(w3),e=Jz("useRouteError"),t=_3("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function n7(){let{router:n}=Kz("useNavigate"),e=_3("useNavigate"),t=de.useRef(!1);return qI(()=>{t.current=!0}),de.useCallback(async(i,o={})=>{Vl(t.current,jI),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...o}))},[n,e])}var RC={};function YI(n,e,t){!e&&!RC[n]&&(RC[n]=!0,Vl(!1,t))}de.memo(r7);function r7({routes:n,future:e,state:t}){return XI(n,void 0,t,e)}function Fh(n){Ai(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function i7({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:o=!1}){Ai(!u1(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=n.replace(/^\/*/,"/"),a=de.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof t=="string"&&(t=Xd(t));let{pathname:l="/",search:u="",hash:c="",state:h=null,key:f="default"}=t,d=de.useMemo(()=>{let v=Oc(l,s);return v==null?null:{location:{pathname:v,search:u,hash:c,state:h,key:f},navigationType:r}},[s,l,u,c,h,f,r]);return Vl(d!=null,`<Router basename="${s}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),d==null?null:de.createElement(Ou.Provider,{value:a},de.createElement(l1.Provider,{children:e,value:d}))}function ZI({children:n,location:e}){return jz(q5(n),e)}function q5(n,e=[]){let t=[];return de.Children.forEach(n,(r,i)=>{if(!de.isValidElement(r))return;let o=[...e,i];if(r.type===de.Fragment){t.push.apply(t,q5(r.props.children,o));return}Ai(r.type===Fh,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ai(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=q5(r.props.children,o)),t.push(s)}),t}var j2="get",q2="application/x-www-form-urlencoded";function Nw(n){return n!=null&&typeof n.tagName=="string"}function o7(n){return Nw(n)&&n.tagName.toLowerCase()==="button"}function s7(n){return Nw(n)&&n.tagName.toLowerCase()==="form"}function a7(n){return Nw(n)&&n.tagName.toLowerCase()==="input"}function l7(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function u7(n,e){return n.button===0&&(!e||e==="_self")&&!l7(n)}var Sy=null;function c7(){if(Sy===null)try{new FormData(document.createElement("form"),0),Sy=!1}catch{Sy=!0}return Sy}var h7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function m_(n){return n!=null&&!h7.has(n)?(Vl(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${q2}"`),null):n}function f7(n,e){let t,r,i,o,s;if(s7(n)){let a=n.getAttribute("action");r=a?Oc(a,e):null,t=n.getAttribute("method")||j2,i=m_(n.getAttribute("enctype"))||q2,o=new FormData(n)}else if(o7(n)||a7(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(r=l?Oc(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||j2,i=m_(n.getAttribute("formenctype"))||m_(a.getAttribute("enctype"))||q2,o=new FormData(a,n),!c7()){let{name:u,type:c,value:h}=n;if(c==="image"){let f=u?`${u}.`:"";o.append(`${f}x`,"0"),o.append(`${f}y`,"0")}else u&&o.append(u,h)}}else{if(Nw(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=j2,r=null,i=q2,s=n}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:o,body:s}}function b3(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function d7(n,e){if(n.id in e)return e[n.id];try{let t=await Ox(()=>import(n.module),[]);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function p7(n){return n!=null&&typeof n.page=="string"}function m7(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function g7(n,e,t){let r=await Promise.all(n.map(async i=>{let o=e.routes[i.route.id];if(o){let s=await d7(o,t);return s.links?s.links():[]}return[]}));return w7(r.flat(1).filter(m7).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function LC(n,e,t,r,i,o){let s=(l,u)=>t[u]?l.route.id!==t[u].route.id:!0,a=(l,u)=>{var c;return t[u].pathname!==l.pathname||((c=t[u].route.path)==null?void 0:c.endsWith("*"))&&t[u].params["*"]!==l.params["*"]};return o==="assets"?e.filter((l,u)=>s(l,u)||a(l,u)):o==="data"?e.filter((l,u)=>{var h;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(s(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((h=t[0])==null?void 0:h.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function v7(n,e,{includeHydrateFallback:t}={}){return y7(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function y7(n){return[...new Set(n)]}function x7(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function w7(n,e){let t=new Set,r=new Set(e);return n.reduce((i,o)=>{if(e&&!p7(o)&&o.as==="script"&&o.href&&r.has(o.href))return i;let a=JSON.stringify(x7(o));return t.has(a)||(t.add(a),i.push({key:a,link:o})),i},[])}function S7(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Oc(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function KI(){let n=de.useContext(xg);return b3(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function _7(){let n=de.useContext(Iw);return b3(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var M3=de.createContext(void 0);M3.displayName="FrameworkContext";function JI(){let n=de.useContext(M3);return b3(n,"You must render this element inside a <HydratedRouter> element"),n}function b7(n,e){let t=de.useContext(M3),[r,i]=de.useState(!1),[o,s]=de.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:h}=e,f=de.useRef(null);de.useEffect(()=>{if(n==="render"&&s(!0),n==="viewport"){let y=g=>{g.forEach(S=>{s(S.isIntersecting)})},x=new IntersectionObserver(y,{threshold:.5});return f.current&&x.observe(f.current),()=>{x.disconnect()}}},[n]),de.useEffect(()=>{if(r){let y=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(y)}}},[r]);let d=()=>{i(!0)},v=()=>{i(!1),s(!1)};return t?n!=="intent"?[o,f,{}]:[o,f,{onFocus:i0(a,d),onBlur:i0(l,v),onMouseEnter:i0(u,d),onMouseLeave:i0(c,v),onTouchStart:i0(h,d)}]:[!1,f,{}]}function i0(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function M7({page:n,...e}){let{router:t}=KI(),r=de.useMemo(()=>BI(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?de.createElement(A7,{page:n,matches:r,...e}):null}function E7(n){let{manifest:e,routeModules:t}=JI(),[r,i]=de.useState([]);return de.useEffect(()=>{let o=!1;return g7(n,e,t).then(s=>{o||i(s)}),()=>{o=!0}},[n,e,t]),r}function A7({page:n,matches:e,...t}){let r=Yd(),{manifest:i,routeModules:o}=JI(),{basename:s}=KI(),{loaderData:a,matches:l}=_7(),u=de.useMemo(()=>LC(n,e,l,i,r,"data"),[n,e,l,i,r]),c=de.useMemo(()=>LC(n,e,l,i,r,"assets"),[n,e,l,i,r]),h=de.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let v=new Set,y=!1;if(e.forEach(g=>{var _;let S=i.routes[g.route.id];!S||!S.hasLoader||(!u.some(E=>E.route.id===g.route.id)&&g.route.id in a&&((_=o[g.route.id])!=null&&_.shouldRevalidate)||S.hasClientLoader?y=!0:v.add(g.route.id))}),v.size===0)return[];let x=S7(n,s);return y&&v.size>0&&x.searchParams.set("_routes",e.filter(g=>v.has(g.route.id)).map(g=>g.route.id).join(",")),[x.pathname+x.search]},[s,a,r,i,u,e,n,o]),f=de.useMemo(()=>v7(c,i),[c,i]),d=E7(c);return de.createElement(de.Fragment,null,h.map(v=>de.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),f.map(v=>de.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),d.map(({key:v,link:y})=>de.createElement("link",{key:v,...y})))}function T7(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var QI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{QI&&(window.__reactRouterVersion="7.5.0")}catch{}function C7({basename:n,children:e,window:t}){let r=de.useRef();r.current==null&&(r.current=gz({window:t,v5Compat:!0}));let i=r.current,[o,s]=de.useState({action:i.action,location:i.location}),a=de.useCallback(l=>{de.startTransition(()=>s(l))},[s]);return de.useLayoutEffect(()=>i.listen(a),[i,a]),de.createElement(i7,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:i})}var eN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,h1=de.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:l,to:u,preventScrollReset:c,viewTransition:h,...f},d){let{basename:v}=de.useContext(Ou),y=typeof u=="string"&&eN.test(u),x,g=!1;if(typeof u=="string"&&y&&(x=u,QI))try{let k=new URL(window.location.href),L=u.startsWith("//")?new URL(k.protocol+u):new URL(u),N=Oc(L.pathname,v);L.origin===k.origin&&N!=null?u=N+L.search+L.hash:g=!0}catch{Vl(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let S=Gz(u,{relative:i}),[_,E,C]=b7(r,f),I=L7(u,{replace:s,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:h});function F(k){e&&e(k),k.defaultPrevented||I(k)}let R=de.createElement("a",{...f,...C,href:x||S,onClick:g||o?e:F,ref:T7(d,E),target:l,"data-discover":!y&&t==="render"?"true":void 0});return _&&!y?de.createElement(de.Fragment,null,R,de.createElement(M7,{page:S})):R});h1.displayName="Link";var sm=de.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:l,...u},c){let h=c1(s,{relative:u.relative}),f=Yd(),d=de.useContext(Iw),{navigator:v,basename:y}=de.useContext(Ou),x=d!=null&&D7(h)&&a===!0,g=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,S=f.pathname,_=d&&d.navigation&&d.navigation.location?d.navigation.location.pathname:null;t||(S=S.toLowerCase(),_=_?_.toLowerCase():null,g=g.toLowerCase()),_&&y&&(_=Oc(_,y)||_);const E=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let C=S===g||!i&&S.startsWith(g)&&S.charAt(E)==="/",I=_!=null&&(_===g||!i&&_.startsWith(g)&&_.charAt(g.length)==="/"),F={isActive:C,isPending:I,isTransitioning:x},R=C?e:void 0,k;typeof r=="function"?k=r(F):k=[r,C?"active":null,I?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let L=typeof o=="function"?o(F):o;return de.createElement(h1,{...u,"aria-current":R,className:k,ref:c,style:L,to:s,viewTransition:a},typeof l=="function"?l(F):l)});sm.displayName="NavLink";var P7=de.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:o,method:s=j2,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:h,...f},d)=>{let v=N7(),y=F7(a,{relative:u}),x=s.toLowerCase()==="get"?"get":"post",g=typeof a=="string"&&eN.test(a),S=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let E=_.nativeEvent.submitter,C=(E==null?void 0:E.getAttribute("formmethod"))||s;v(E||_.currentTarget,{fetcherKey:e,method:C,navigate:t,replace:i,state:o,relative:u,preventScrollReset:c,viewTransition:h})};return de.createElement("form",{ref:d,method:x,action:y,onSubmit:r?l:S,...f,"data-discover":!g&&n==="render"?"true":void 0})});P7.displayName="Form";function R7(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tN(n){let e=de.useContext(xg);return Ai(e,R7(n)),e}function L7(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=$I(),l=Yd(),u=c1(n,{relative:o});return de.useCallback(c=>{if(u7(c,e)){c.preventDefault();let h=t!==void 0?t:Cv(l)===Cv(u);a(n,{replace:h,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[l,a,u,t,r,e,n,i,o,s])}var k7=0,I7=()=>`__${String(++k7)}__`;function N7(){let{router:n}=tN("useSubmit"),{basename:e}=de.useContext(Ou),t=e7();return de.useCallback(async(r,i={})=>{let{action:o,method:s,encType:a,formData:l,body:u}=f7(r,e);if(i.navigate===!1){let c=i.fetcherKey||I7();await n.fetch(c,t,i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await n.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function F7(n,{relative:e}={}){let{basename:t}=de.useContext(Ou),r=de.useContext(Bu);Ai(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...c1(n||".",{relative:e})},s=Yd();if(n==null){o.search=s.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let c=a.toString();o.search=c?`?${c}`:""}}return(!n||n===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Rc([t,o.pathname])),Cv(o)}function D7(n,e={}){let t=de.useContext(WI);Ai(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=tN("useViewTransitionState"),i=c1(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Oc(t.currentLocation.pathname,r)||t.currentLocation.pathname,s=Oc(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Bx(i.pathname,s)!=null||Bx(i.pathname,o)!=null}new TextEncoder;function O7(){const n=$I();return de.useEffect(()=>{if(document.getElementById("calendly-css"))return;const e=document.createElement("link");e.id="calendly-css",e.href="https://assets.calendly.com/assets/external/widget.css",e.rel="stylesheet",document.head.appendChild(e);const t=document.createElement("script");return t.id="calendly-js",t.src="https://assets.calendly.com/assets/external/widget.js",t.async=!0,t.onload=()=>{window.Calendly&&window.Calendly.initBadgeWidget({url:"https://calendly.com/damjanbab/30min",text:"Schedule a FREE consultation meeting",color:"#0069ff",textColor:"#ffffff"})},document.body.appendChild(t),()=>{var s;const r=document.getElementById("calendly-css"),i=document.getElementById("calendly-js"),o=document.querySelector(".calendly-badge-widget");r&&document.head.removeChild(r),i&&document.body.removeChild(i),o&&((s=o.parentElement)==null||s.removeChild(o))}},[]),Je("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:window.innerWidth<480?"1rem 0":"2rem 0",color:"#1E293B"},children:[Je("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"4rem",textAlign:"center"},children:[ce("h1",{style:{fontSize:"3rem",fontWeight:"800",marginBottom:"1rem",background:"linear-gradient(90deg, #2563EB, #0EA5E9)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent"},children:"Parametric CAD Services"}),ce("p",{style:{fontSize:"1.25rem",maxWidth:"800px",lineHeight:"1.7",color:"#475569"},children:"Professional 3D modeling, technical drawings, and high-quality rendering services for engineering and manufacturing needs."}),Je("div",{style:{marginTop:"2rem",display:"flex",gap:"1rem"},children:[Je("button",{onClick:()=>n("/app"),style:{backgroundColor:"#1E293B",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",transition:"background-color 0.2s"},children:[Je("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ce("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),ce("circle",{cx:"12",cy:"12",r:"3"})]}),"View Demo Models"]}),ce("button",{onClick:()=>window.location.href="mailto:damjanbab@icloud.com",style:{backgroundColor:"white",color:"#1E293B",border:"1px solid #CBD5E1",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",transition:"background-color 0.2s"},children:"Contact Me"})]})]}),Je("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem",marginBottom:"4rem"},children:[ce(g_,{icon:ce("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:ce("path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z"})}),title:"Parametric 3D Modeling",description:"Custom 3D models created with a parametric approach, allowing for quick adjustments based on changing requirements. Real-time updates and development monitoring available."}),ce(g_,{icon:Je("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ce("path",{d:"M3 3v18h18"}),ce("path",{d:"m3 9 4-4 5 5 4-4 5 5"})]}),title:"Technical Drawings",description:"Automated generation of manufacturing-ready technical drawings in any format you need. Includes orthographic projections, dimensions, and manufacturing specifications."}),ce(g_,{icon:Je("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ce("circle",{cx:"12",cy:"12",r:"10"}),ce("path",{d:"M12 16a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"}),ce("path",{d:"M12 2v2"}),ce("path",{d:"M12 20v2"}),ce("path",{d:"m4.93 4.93 1.41 1.41"}),ce("path",{d:"m17.66 17.66 1.41 1.41"}),ce("path",{d:"M2 12h2"}),ce("path",{d:"M20 12h2"}),ce("path",{d:"m6.34 17.66-1.41 1.41"}),ce("path",{d:"m19.07 4.93-1.41 1.41"})]}),title:"High-Quality Rendering",description:"Professional visualizations of your models through high-quality images and videos with customizable camera angles, lighting, and environments."})]}),Je("div",{style:{backgroundColor:"#F1F5F9",padding:"2rem",borderRadius:"0.5rem",marginBottom:"4rem"},children:[ce("h2",{style:{marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"700"},children:"How It Works"}),Je("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[Je("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[ce("div",{style:{backgroundColor:"#2563EB",color:"white",width:"2rem",height:"2rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"1"}),Je("div",{children:[ce("h3",{style:{marginBottom:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:"Define Requirements"}),ce("p",{style:{color:"#475569"},children:"We'll discuss your project needs, including dimensions, functionality, and aesthetic preferences to establish clear parameters for your model."})]})]}),Je("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[ce("div",{style:{backgroundColor:"#2563EB",color:"white",width:"2rem",height:"2rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"2"}),Je("div",{children:[ce("h3",{style:{marginBottom:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:"Real-Time Development"}),ce("p",{style:{color:"#475569"},children:"Access a password-protected workspace where you can monitor progress and provide feedback as your model is being developed."})]})]}),Je("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[ce("div",{style:{backgroundColor:"#2563EB",color:"white",width:"2rem",height:"2rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"3"}),Je("div",{children:[ce("h3",{style:{marginBottom:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:"Parameter Refinement"}),ce("p",{style:{color:"#475569"},children:"Request adjustments to your model parameters at any time. Thanks to the parametric approach, most changes can be implemented instantly."})]})]}),Je("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[ce("div",{style:{backgroundColor:"#2563EB",color:"white",width:"2rem",height:"2rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"4"}),Je("div",{children:[ce("h3",{style:{marginBottom:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:"Final Delivery"}),ce("p",{style:{color:"#475569"},children:"Receive your completed 3D models, technical drawings, and renderings in the formats you need for manufacturing or presentation."})]})]})]})]}),Je("div",{style:{marginBottom:"4rem"},children:[ce("h2",{style:{marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"700"},children:"Technical Capabilities"}),Je("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem"},children:[ce(Pp,{title:"Assembly Constructions",description:"Automated assembly constructions with options for exploded views or step-by-step assembly instructions with labeled components."}),ce(Pp,{title:"Parametric Design",description:"Dynamic models that update instantly when dimensions or parameters change, allowing for rapid iteration and refinement."}),ce(Pp,{title:"Engineering Specifications",description:"Detailed technical drawings with precise measurements, tolerances, and manufacturing notes for production."}),ce(Pp,{title:"Real-Time Collaboration",description:"Secure access to your model's development progress, allowing for immediate feedback and adjustments."}),ce(Pp,{title:"Custom Rendering",description:"Photorealistic visualizations with adjustable lighting, materials, camera angles, and environments."}),ce(Pp,{title:"Cost-Effective Solutions",description:"Built with open-source technologies to offer professional services at competitive rates."})]})]}),Je("div",{style:{textAlign:"center",marginBottom:"2rem",padding:"3rem",backgroundColor:"#1E293B",borderRadius:"0.5rem",color:"white"},children:[ce("h2",{style:{fontSize:"1.875rem",fontWeight:"700",marginBottom:"1rem"},children:"Ready to bring your design to life?"}),ce("p",{style:{color:"#CBD5E1",marginBottom:"2rem",maxWidth:"800px",margin:"0 auto 2rem"},children:"Explore the demo models to see the capabilities, then get in touch to discuss your specific project needs and requirements."}),Je("div",{style:{display:"flex",flexWrap:"wrap",gap:"1.5rem",justifyContent:"center",marginBottom:"2rem"},children:[Je("a",{href:"mailto:damjanbab@icloud.com",style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"#2563EB",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",textDecoration:"none",boxShadow:"0 4px 6px rgba(37, 99, 235, 0.25)",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 8px rgba(37, 99, 235, 0.3)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 6px rgba(37, 99, 235, 0.25)"},children:[Je("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ce("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),ce("polyline",{points:"22,6 12,13 2,6"})]}),"Email Me"]}),Je("a",{href:"https://github.com/damjanbab",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"transparent",color:"white",border:"1px solid #CBD5E1",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",textDecoration:"none",transition:"background-color 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[ce("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:ce("path",{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"})}),"GitHub"]}),Je("a",{href:"https://www.linkedin.com/in/damjanbabic/",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"transparent",color:"white",border:"1px solid #CBD5E1",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",textDecoration:"none",transition:"background-color 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[Je("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ce("path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"}),ce("rect",{x:"2",y:"9",width:"4",height:"12"}),ce("circle",{cx:"4",cy:"4",r:"2"})]}),"LinkedIn"]})]}),ce("button",{onClick:()=>n("/app"),style:{backgroundColor:"#0EA5E9",color:"white",border:"none",padding:"0.75rem 2rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 4px 6px rgba(14, 165, 233, 0.25)",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 8px rgba(14, 165, 233, 0.3)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 6px rgba(14, 165, 233, 0.25)"},children:"Try Demo Models"})]})]})}function g_({icon:n,title:e,description:t}){return Je("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",border:"1px solid #E2E8F0",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:r=>{r.currentTarget.style.transform="translateY(-4px)",r.currentTarget.style.boxShadow="0 10px 15px rgba(0, 0, 0, 0.05)"},onMouseOut:r=>{r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.1)"},children:[ce("div",{style:{color:"#2563EB",marginBottom:"1rem",display:"inline-flex",padding:"0.75rem",backgroundColor:"#EFF6FF",borderRadius:"0.5rem"},children:n}),ce("h3",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.75rem"},children:e}),ce("p",{style:{color:"#475569",lineHeight:"1.5"},children:t})]})}function Pp({title:n,description:e}){return Je("div",{style:{padding:"1.25rem",borderRadius:"0.5rem",backgroundColor:"#F8FAFC",border:"1px solid #E2E8F0"},children:[ce("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"0.75rem",color:"#1E293B"},children:n}),ce("p",{style:{color:"#475569",fontSize:"0.9375rem",lineHeight:"1.5"},children:e})]})}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const nN=Symbol("Comlink.proxy"),B7=Symbol("Comlink.endpoint"),U7=Symbol("Comlink.releaseProxy"),v_=Symbol("Comlink.finalizer"),$2=Symbol("Comlink.thrown"),rN=n=>typeof n=="object"&&n!==null||typeof n=="function",z7={canHandle:n=>rN(n)&&n[nN],serialize(n){const{port1:e,port2:t}=new MessageChannel;return oN(n,e),[t,[t]]},deserialize(n){return n.start(),Fw(n)}},H7={canHandle:n=>rN(n)&&$2 in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},iN=new Map([["proxy",z7],["throw",H7]]);function G7(n,e){for(const t of n)if(e===t||t==="*"||t instanceof RegExp&&t.test(e))return!0;return!1}function oN(n,e=globalThis,t=["*"]){e.addEventListener("message",function r(i){if(!i||!i.data)return;if(!G7(t,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:o,type:s,path:a}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(ld);let u;try{const c=a.slice(0,-1).reduce((f,d)=>f[d],n),h=a.reduce((f,d)=>f[d],n);switch(s){case"GET":u=h;break;case"SET":c[a.slice(-1)[0]]=ld(i.data.value),u=!0;break;case"APPLY":u=h.apply(c,l);break;case"CONSTRUCT":{const f=new h(...l);u=X7(f)}break;case"ENDPOINT":{const{port1:f,port2:d}=new MessageChannel;oN(n,d),u=$7(f,[f])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[$2]:0}}Promise.resolve(u).catch(c=>({value:c,[$2]:0})).then(c=>{const[h,f]=Hx(c);e.postMessage(Object.assign(Object.assign({},h),{id:o}),f),s==="RELEASE"&&(e.removeEventListener("message",r),sN(e),v_ in n&&typeof n[v_]=="function"&&n[v_]())}).catch(c=>{const[h,f]=Hx({value:new TypeError("Unserializable return value"),[$2]:0});e.postMessage(Object.assign(Object.assign({},h),{id:o}),f)})}),e.start&&e.start()}function V7(n){return n.constructor.name==="MessagePort"}function sN(n){V7(n)&&n.close()}function Fw(n,e){const t=new Map;return n.addEventListener("message",function(i){const{data:o}=i;if(!o||!o.id)return;const s=t.get(o.id);if(s)try{s(o)}finally{t.delete(o.id)}}),$5(n,t,[],e)}function _y(n){if(n)throw new Error("Proxy has been released and is not useable")}function aN(n){return am(n,new Map,{type:"RELEASE"}).then(()=>{sN(n)})}const Ux=new WeakMap,zx="FinalizationRegistry"in globalThis&&new FinalizationRegistry(n=>{const e=(Ux.get(n)||0)-1;Ux.set(n,e),e===0&&aN(n)});function W7(n,e){const t=(Ux.get(e)||0)+1;Ux.set(e,t),zx&&zx.register(n,e,n)}function j7(n){zx&&zx.unregister(n)}function $5(n,e,t=[],r=function(){}){let i=!1;const o=new Proxy(r,{get(s,a){if(_y(i),a===U7)return()=>{j7(o),aN(n),e.clear(),i=!0};if(a==="then"){if(t.length===0)return{then:()=>o};const l=am(n,e,{type:"GET",path:t.map(u=>u.toString())}).then(ld);return l.then.bind(l)}return $5(n,e,[...t,a])},set(s,a,l){_y(i);const[u,c]=Hx(l);return am(n,e,{type:"SET",path:[...t,a].map(h=>h.toString()),value:u},c).then(ld)},apply(s,a,l){_y(i);const u=t[t.length-1];if(u===B7)return am(n,e,{type:"ENDPOINT"}).then(ld);if(u==="bind")return $5(n,e,t.slice(0,-1));const[c,h]=kC(l);return am(n,e,{type:"APPLY",path:t.map(f=>f.toString()),argumentList:c},h).then(ld)},construct(s,a){_y(i);const[l,u]=kC(a);return am(n,e,{type:"CONSTRUCT",path:t.map(c=>c.toString()),argumentList:l},u).then(ld)}});return W7(o,n),o}function q7(n){return Array.prototype.concat.apply([],n)}function kC(n){const e=n.map(Hx);return[e.map(t=>t[0]),q7(e.map(t=>t[1]))]}const lN=new WeakMap;function $7(n,e){return lN.set(n,e),n}function X7(n){return Object.assign(n,{[nN]:!0})}function Hx(n){for(const[e,t]of iN)if(t.canHandle(n)){const[r,i]=t.serialize(n);return[{type:"HANDLER",name:e,value:r},i]}return[{type:"RAW",value:n},lN.get(n)||[]]}function ld(n){switch(n.type){case"HANDLER":return iN.get(n.name).deserialize(n.value);case"RAW":return n.value}}function am(n,e,t,r){return new Promise(i=>{const o=Y7();e.set(o,i),n.start&&n.start(),n.postMessage(Object.assign({id:o},t),r)})}function Y7(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const f1="155",wu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},gc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},uN=0,X5=1,cN=2,Z7=3,hN=0,Dw=1,q0=2,Ll=3,Bc=0,Ns=1,Ol=2,K7=2,Lc=0,Ad=1,Y5=2,Z5=3,K5=4,fN=5,ud=100,dN=101,pN=102,J5=103,Q5=104,mN=200,gN=201,vN=202,yN=203,E3=204,A3=205,xN=206,wN=207,SN=208,_N=209,bN=210,MN=0,EN=1,AN=2,Gx=3,TN=4,CN=5,PN=6,RN=7,d1=0,LN=1,kN=2,Ru=0,IN=1,NN=2,FN=3,T3=4,DN=5,Ow=300,Du=301,uf=302,ng=303,Pv=304,wg=306,Rv=1e3,ps=1001,Lv=1002,Wi=1003,Vx=1004,J7=1004,$0=1005,Q7=1005,ri=1006,C3=1007,eH=1007,cf=1008,tH=1008,Lu=1009,ON=1010,BN=1011,Bw=1012,P3=1013,bc=1014,vs=1015,Ls=1016,R3=1017,L3=1018,tf=1020,UN=1021,Rs=1023,zN=1024,HN=1025,nf=1026,Od=1027,k3=1028,I3=1029,GN=1030,N3=1031,F3=1033,X2=33776,Y2=33777,Z2=33778,K2=33779,eM=35840,tM=35841,nM=35842,rM=35843,VN=36196,iM=37492,oM=37496,sM=37808,aM=37809,lM=37810,uM=37811,cM=37812,hM=37813,fM=37814,dM=37815,pM=37816,mM=37817,gM=37818,vM=37819,yM=37820,xM=37821,J2=36492,WN=36283,wM=36284,SM=36285,_M=36286,jN=2200,qN=2201,$N=2202,kv=2300,Iv=2301,Q2=2302,vd=2400,yd=2401,Nv=2402,Uw=2500,D3=2501,nH=0,rH=1,iH=2,O3=3e3,rf=3001,XN=3200,YN=3201,Sf=0,ZN=1,of="",Hn="srgb",Wl="srgb-linear",B3="display-p3",oH=0,ex=7680,sH=7681,aH=7682,lH=7683,uH=34055,cH=34056,hH=5386,fH=512,dH=513,pH=514,mH=515,gH=516,vH=517,yH=518,KN=519,JN=512,QN=513,eF=514,tF=515,nF=516,rF=517,iF=518,oF=519,Fv=35044,xH=35048,wH=35040,SH=35045,_H=35049,bH=35041,MH=35046,EH=35050,AH=35042,TH="100",bM="300 es",Wx=1035,bu=2e3,Dv=2001;let Vc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(t);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,e);e.target=null}}};const os=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let IC=1234567;const Td=Math.PI/180,rg=180/Math.PI;function ba(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(os[n&255]+os[n>>8&255]+os[n>>16&255]+os[n>>24&255]+"-"+os[e&255]+os[e>>8&255]+"-"+os[e>>16&15|64]+os[e>>24&255]+"-"+os[t&63|128]+os[t>>8&255]+"-"+os[t>>16&255]+os[t>>24&255]+os[r&255]+os[r>>8&255]+os[r>>16&255]+os[r>>24&255]).toLowerCase()}function Ni(n,e,t){return Math.max(e,Math.min(t,n))}function U3(n,e){return(n%e+e)%e}function CH(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function PH(n,e,t){return n!==e?(t-n)/(e-n):0}function X0(n,e,t){return(1-t)*n+t*e}function RH(n,e,t,r){return X0(n,e,1-Math.exp(-t*r))}function LH(n,e=1){return e-Math.abs(U3(n,e*2)-e)}function kH(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function IH(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function NH(n,e){return n+Math.floor(Math.random()*(e-n+1))}function FH(n,e){return n+Math.random()*(e-n)}function DH(n){return n*(.5-Math.random())}function OH(n){n!==void 0&&(IC=n);let e=IC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function BH(n){return n*Td}function UH(n){return n*rg}function MM(n){return(n&n-1)===0&&n!==0}function sF(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function jx(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function zH(n,e,t,r,i){const o=Math.cos,s=Math.sin,a=o(t/2),l=s(t/2),u=o((e+r)/2),c=s((e+r)/2),h=o((e-r)/2),f=s((e-r)/2),d=o((r-e)/2),v=s((r-e)/2);switch(i){case"XYX":n.set(a*c,l*h,l*f,a*u);break;case"YZY":n.set(l*f,a*c,l*h,a*u);break;case"ZXZ":n.set(l*h,l*f,a*c,a*u);break;case"XZX":n.set(a*c,l*v,l*d,a*u);break;case"YXY":n.set(l*d,a*c,l*v,a*u);break;case"ZYZ":n.set(l*v,l*d,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Js(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function qn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const HH={DEG2RAD:Td,RAD2DEG:rg,generateUUID:ba,clamp:Ni,euclideanModulo:U3,mapLinear:CH,inverseLerp:PH,lerp:X0,damp:RH,pingpong:LH,smoothstep:kH,smootherstep:IH,randInt:NH,randFloat:FH,randFloatSpread:DH,seededRandom:OH,degToRad:BH,radToDeg:UH,isPowerOfTwo:MM,ceilPowerOfTwo:sF,floorPowerOfTwo:jx,setQuaternionFromProperEuler:zH,normalize:qn,denormalize:Js};class xt{constructor(e=0,t=0){xt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Ni(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*r-s*i+e.x,this.y=o*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Xn{constructor(e,t,r,i,o,s,a,l,u){Xn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,o,s,a,l,u)}set(e,t,r,i,o,s,a,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=o,c[5]=l,c[6]=r,c[7]=s,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,o=this.elements,s=r[0],a=r[3],l=r[6],u=r[1],c=r[4],h=r[7],f=r[2],d=r[5],v=r[8],y=i[0],x=i[3],g=i[6],S=i[1],_=i[4],E=i[7],C=i[2],I=i[5],F=i[8];return o[0]=s*y+a*S+l*C,o[3]=s*x+a*_+l*I,o[6]=s*g+a*E+l*F,o[1]=u*y+c*S+h*C,o[4]=u*x+c*_+h*I,o[7]=u*g+c*E+h*F,o[2]=f*y+d*S+v*C,o[5]=f*x+d*_+v*I,o[8]=f*g+d*E+v*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t*s*c-t*a*u-r*o*c+r*a*l+i*o*u-i*s*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=c*s-a*u,f=a*l-c*o,d=u*o-s*l,v=t*h+r*f+i*d;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/v;return e[0]=h*y,e[1]=(i*u-c*r)*y,e[2]=(a*r-i*s)*y,e[3]=f*y,e[4]=(c*t-i*l)*y,e[5]=(i*o-a*t)*y,e[6]=d*y,e[7]=(r*l-u*t)*y,e[8]=(s*t-r*o)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,o,s,a){const l=Math.cos(o),u=Math.sin(o);return this.set(r*l,r*u,-r*(l*s+u*a)+s+e,-i*u,i*l,-i*(-u*s+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(y_.makeScale(e,t)),this}rotate(e){return this.premultiply(y_.makeRotation(-e)),this}translate(e,t){return this.premultiply(y_.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const y_=new Xn;function aF(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const GH={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Mm(n,e){return new GH[n](e)}function Ov(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const NC={};function Y0(n){n in NC||(NC[n]=!0,console.warn(n))}function Om(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function x_(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const VH=new Xn().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),WH=new Xn().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function jH(n){return n.convertSRGBToLinear().applyMatrix3(WH)}function qH(n){return n.applyMatrix3(VH).convertLinearToSRGB()}const $H={[Wl]:n=>n,[Hn]:n=>n.convertSRGBToLinear(),[B3]:jH},XH={[Wl]:n=>n,[Hn]:n=>n.convertLinearToSRGB(),[B3]:qH},Ka={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return Wl},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=$H[e],i=XH[t];if(r===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let Rp;class z3{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Rp===void 0&&(Rp=Ov("canvas")),Rp.width=e.width,Rp.height=e.height;const r=Rp.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Rp}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Ov("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let s=0;s<o.length;s++)o[s]=Om(o[s]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Om(t[r]/255)*255):t[r]=Om(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let YH=0;class xd{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:YH++}),this.uuid=ba(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let s=0,a=i.length;s<a;s++)i[s].isDataTexture?o.push(w_(i[s].image)):o.push(w_(i[s]))}else o=w_(i);r.url=o}return t||(e.images[this.uuid]=r),r}}function w_(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?z3.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ZH=0;class Di extends Vc{constructor(e=Di.DEFAULT_IMAGE,t=Di.DEFAULT_MAPPING,r=ps,i=ps,o=ri,s=cf,a=Rs,l=Lu,u=Di.DEFAULT_ANISOTROPY,c=of){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ZH++}),this.uuid=ba(),this.name="",this.source=new xd(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=s,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new xt(0,0),this.repeat=new xt(1,1),this.center=new xt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Xn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof c=="string"?this.colorSpace=c:(Y0("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===rf?Hn:of),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Ow)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Rv:e.x=e.x-Math.floor(e.x);break;case ps:e.x=e.x<0?0:1;break;case Lv:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Rv:e.y=e.y-Math.floor(e.y);break;case ps:e.y=e.y<0?0:1;break;case Lv:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Y0("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Hn?rf:O3}set encoding(e){Y0("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===rf?Hn:of}}Di.DEFAULT_IMAGE=null;Di.DEFAULT_MAPPING=Ow;Di.DEFAULT_ANISOTROPY=1;class Or{constructor(e=0,t=0,r=0,i=1){Or.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*o,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*o,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*o,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,o;const l=e.elements,u=l[0],c=l[4],h=l[8],f=l[1],d=l[5],v=l[9],y=l[2],x=l[6],g=l[10];if(Math.abs(c-f)<.01&&Math.abs(h-y)<.01&&Math.abs(v-x)<.01){if(Math.abs(c+f)<.1&&Math.abs(h+y)<.1&&Math.abs(v+x)<.1&&Math.abs(u+d+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(u+1)/2,E=(d+1)/2,C=(g+1)/2,I=(c+f)/4,F=(h+y)/4,R=(v+x)/4;return _>E&&_>C?_<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(_),i=I/r,o=F/r):E>C?E<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(E),r=I/i,o=R/i):C<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(C),r=F/o,i=R/o),this.set(r,i,o,t),this}let S=Math.sqrt((x-v)*(x-v)+(h-y)*(h-y)+(f-c)*(f-c));return Math.abs(S)<.001&&(S=1),this.x=(x-v)/S,this.y=(h-y)/S,this.z=(f-c)/S,this.w=Math.acos((u+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class lF extends Vc{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Or(0,0,e,t),this.scissorTest=!1,this.viewport=new Or(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(Y0("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===rf?Hn:of),this.texture=new Di(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:ri,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new xd(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class jl extends lF{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class zw extends Di{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Wi,this.minFilter=Wi,this.wrapR=ps,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class KH extends jl{constructor(e=1,t=1,r=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new zw(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class H3 extends Di{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Wi,this.minFilter=Wi,this.wrapR=ps,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class JH extends jl{constructor(e=1,t=1,r=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new H3(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class QH extends jl{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const o=this.texture;this.texture=[];for(let s=0;s<r;s++)this.texture[s]=o.clone(),this.texture[s].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,o=this.texture.length;i<o;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class ys{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,o,s,a){let l=r[i+0],u=r[i+1],c=r[i+2],h=r[i+3];const f=o[s+0],d=o[s+1],v=o[s+2],y=o[s+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h;return}if(a===1){e[t+0]=f,e[t+1]=d,e[t+2]=v,e[t+3]=y;return}if(h!==y||l!==f||u!==d||c!==v){let x=1-a;const g=l*f+u*d+c*v+h*y,S=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){const C=Math.sqrt(_),I=Math.atan2(C,g*S);x=Math.sin(x*I)/C,a=Math.sin(a*I)/C}const E=a*S;if(l=l*x+f*E,u=u*x+d*E,c=c*x+v*E,h=h*x+y*E,x===1-a){const C=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=C,u*=C,c*=C,h*=C}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,o,s){const a=r[i],l=r[i+1],u=r[i+2],c=r[i+3],h=o[s],f=o[s+1],d=o[s+2],v=o[s+3];return e[t]=a*v+c*h+l*d-u*f,e[t+1]=l*v+c*f+u*h-a*d,e[t+2]=u*v+c*d+a*f-l*h,e[t+3]=c*v-a*h-l*f-u*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,u=a(r/2),c=a(i/2),h=a(o/2),f=l(r/2),d=l(i/2),v=l(o/2);switch(s){case"XYZ":this._x=f*c*h+u*d*v,this._y=u*d*h-f*c*v,this._z=u*c*v+f*d*h,this._w=u*c*h-f*d*v;break;case"YXZ":this._x=f*c*h+u*d*v,this._y=u*d*h-f*c*v,this._z=u*c*v-f*d*h,this._w=u*c*h+f*d*v;break;case"ZXY":this._x=f*c*h-u*d*v,this._y=u*d*h+f*c*v,this._z=u*c*v+f*d*h,this._w=u*c*h-f*d*v;break;case"ZYX":this._x=f*c*h-u*d*v,this._y=u*d*h+f*c*v,this._z=u*c*v-f*d*h,this._w=u*c*h+f*d*v;break;case"YZX":this._x=f*c*h+u*d*v,this._y=u*d*h+f*c*v,this._z=u*c*v-f*d*h,this._w=u*c*h-f*d*v;break;case"XZY":this._x=f*c*h-u*d*v,this._y=u*d*h-f*c*v,this._z=u*c*v+f*d*h,this._w=u*c*h+f*d*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],o=t[8],s=t[1],a=t[5],l=t[9],u=t[2],c=t[6],h=t[10],f=r+a+h;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(c-l)*d,this._y=(o-u)*d,this._z=(s-i)*d}else if(r>a&&r>h){const d=2*Math.sqrt(1+r-a-h);this._w=(c-l)/d,this._x=.25*d,this._y=(i+s)/d,this._z=(o+u)/d}else if(a>h){const d=2*Math.sqrt(1+a-r-h);this._w=(o-u)/d,this._x=(i+s)/d,this._y=.25*d,this._z=(l+c)/d}else{const d=2*Math.sqrt(1+h-r-a);this._w=(s-i)/d,this._x=(o+u)/d,this._y=(l+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ni(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,o=e._z,s=e._w,a=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+s*a+i*u-o*l,this._y=i*c+s*l+o*a-r*u,this._z=o*c+s*u+r*l-i*a,this._w=s*c-r*a-i*l-o*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,s=this._w;let a=s*e._w+r*e._x+i*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=r,this._y=i,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-t;return this._w=d*s+t*this._w,this._x=d*r+t*this._x,this._y=d*i+t*this._y,this._z=d*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),h=Math.sin((1-t)*c)/u,f=Math.sin(t*c)/u;return this._w=s*h+this._w*f,this._x=r*h+this._x*f,this._y=i*h+this._y*f,this._z=o*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(o),r*Math.cos(o),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ye{constructor(e=0,t=0,r=0){ye.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(FC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(FC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6]*i,this.y=o[1]*t+o[4]*r+o[7]*i,this.z=o[2]*t+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,o=e.elements,s=1/(o[3]*t+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*t+o[4]*r+o[8]*i+o[12])*s,this.y=(o[1]*t+o[5]*r+o[9]*i+o[13])*s,this.z=(o[2]*t+o[6]*r+o[10]*i+o[14])*s,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,o=e.x,s=e.y,a=e.z,l=e.w,u=l*t+s*i-a*r,c=l*r+a*t-o*i,h=l*i+o*r-s*t,f=-o*t-s*r-a*i;return this.x=u*l+f*-o+c*-a-h*-s,this.y=c*l+f*-s+h*-o-u*-a,this.z=h*l+f*-a+u*-s-c*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i,this.y=o[1]*t+o[5]*r+o[9]*i,this.z=o[2]*t+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,o=e.z,s=t.x,a=t.y,l=t.z;return this.x=i*l-o*a,this.y=o*s-r*l,this.z=r*a-i*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return S_.copy(this).projectOnVector(e),this.sub(S_)}reflect(e){return this.sub(S_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Ni(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const S_=new ye,FC=new ys;class Uu{constructor(e=new ye(1/0,1/0,1/0),t=new ye(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(sc.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(sc.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=sc.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Lp.copy(e.boundingBox),Lp.applyMatrix4(e.matrixWorld),this.union(Lp);else{const i=e.geometry;if(i!==void 0)if(t&&i.attributes!==void 0&&i.attributes.position!==void 0){const o=i.attributes.position;for(let s=0,a=o.count;s<a;s++)sc.fromBufferAttribute(o,s).applyMatrix4(e.matrixWorld),this.expandByPoint(sc)}else i.boundingBox===null&&i.computeBoundingBox(),Lp.copy(i.boundingBox),Lp.applyMatrix4(e.matrixWorld),this.union(Lp)}const r=e.children;for(let i=0,o=r.length;i<o;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,sc),sc.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(o0),by.subVectors(this.max,o0),kp.subVectors(e.a,o0),Ip.subVectors(e.b,o0),Np.subVectors(e.c,o0),xh.subVectors(Ip,kp),wh.subVectors(Np,Ip),qf.subVectors(kp,Np);let t=[0,-xh.z,xh.y,0,-wh.z,wh.y,0,-qf.z,qf.y,xh.z,0,-xh.x,wh.z,0,-wh.x,qf.z,0,-qf.x,-xh.y,xh.x,0,-wh.y,wh.x,0,-qf.y,qf.x,0];return!__(t,kp,Ip,Np,by)||(t=[1,0,0,0,1,0,0,0,1],!__(t,kp,Ip,Np,by))?!1:(My.crossVectors(xh,wh),t=[My.x,My.y,My.z],__(t,kp,Ip,Np,by))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,sc).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(sc).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(oc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),oc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),oc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),oc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),oc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),oc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),oc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),oc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(oc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const oc=[new ye,new ye,new ye,new ye,new ye,new ye,new ye,new ye],sc=new ye,Lp=new Uu,kp=new ye,Ip=new ye,Np=new ye,xh=new ye,wh=new ye,qf=new ye,o0=new ye,by=new ye,My=new ye,$f=new ye;function __(n,e,t,r,i){for(let o=0,s=n.length-3;o<=s;o+=3){$f.fromArray(n,o);const a=i.x*Math.abs($f.x)+i.y*Math.abs($f.y)+i.z*Math.abs($f.z),l=e.dot($f),u=t.dot($f),c=r.dot($f);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const e9=new Uu,s0=new ye,b_=new ye;class Zl{constructor(e=new ye,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):e9.setFromPoints(e).getCenter(r);let i=0;for(let o=0,s=e.length;o<s;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;s0.subVectors(e,this.center);const t=s0.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(s0,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(b_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(s0.copy(e.center).add(b_)),this.expandByPoint(s0.copy(e.center).sub(b_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ac=new ye,M_=new ye,Ey=new ye,Sh=new ye,E_=new ye,Ay=new ye,A_=new ye;class Zd{constructor(e=new ye,t=new ye(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ac)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ac.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ac.copy(this.origin).addScaledVector(this.direction,t),ac.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){M_.copy(e).add(t).multiplyScalar(.5),Ey.copy(t).sub(e).normalize(),Sh.copy(this.origin).sub(M_);const o=e.distanceTo(t)*.5,s=-this.direction.dot(Ey),a=Sh.dot(this.direction),l=-Sh.dot(Ey),u=Sh.lengthSq(),c=Math.abs(1-s*s);let h,f,d,v;if(c>0)if(h=s*l-a,f=s*a-l,v=o*c,h>=0)if(f>=-v)if(f<=v){const y=1/c;h*=y,f*=y,d=h*(h+s*f+2*a)+f*(s*h+f+2*l)+u}else f=o,h=Math.max(0,-(s*f+a)),d=-h*h+f*(f+2*l)+u;else f=-o,h=Math.max(0,-(s*f+a)),d=-h*h+f*(f+2*l)+u;else f<=-v?(h=Math.max(0,-(-s*o+a)),f=h>0?-o:Math.min(Math.max(-o,-l),o),d=-h*h+f*(f+2*l)+u):f<=v?(h=0,f=Math.min(Math.max(-o,-l),o),d=f*(f+2*l)+u):(h=Math.max(0,-(s*o+a)),f=h>0?o:Math.min(Math.max(-o,-l),o),d=-h*h+f*(f+2*l)+u);else f=s>0?-o:o,h=Math.max(0,-(s*f+a)),d=-h*h+f*(f+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(M_).addScaledVector(Ey,f),d}intersectSphere(e,t){ac.subVectors(e.center,this.origin);const r=ac.dot(this.direction),i=ac.dot(ac)-r*r,o=e.radius*e.radius;if(i>o)return null;const s=Math.sqrt(o-i),a=r-s,l=r+s;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,o,s,a,l;const u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,f=this.origin;return u>=0?(r=(e.min.x-f.x)*u,i=(e.max.x-f.x)*u):(r=(e.max.x-f.x)*u,i=(e.min.x-f.x)*u),c>=0?(o=(e.min.y-f.y)*c,s=(e.max.y-f.y)*c):(o=(e.max.y-f.y)*c,s=(e.min.y-f.y)*c),r>s||o>i||((o>r||isNaN(r))&&(r=o),(s<i||isNaN(i))&&(i=s),h>=0?(a=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(a=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,ac)!==null}intersectTriangle(e,t,r,i,o){E_.subVectors(t,e),Ay.subVectors(r,e),A_.crossVectors(E_,Ay);let s=this.direction.dot(A_),a;if(s>0){if(i)return null;a=1}else if(s<0)a=-1,s=-s;else return null;Sh.subVectors(this.origin,e);const l=a*this.direction.dot(Ay.crossVectors(Sh,Ay));if(l<0)return null;const u=a*this.direction.dot(E_.cross(Sh));if(u<0||l+u>s)return null;const c=-a*Sh.dot(A_);return c<0?null:this.at(c/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class zn{constructor(e,t,r,i,o,s,a,l,u,c,h,f,d,v,y,x){zn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,o,s,a,l,u,c,h,f,d,v,y,x)}set(e,t,r,i,o,s,a,l,u,c,h,f,d,v,y,x){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=o,g[5]=s,g[9]=a,g[13]=l,g[2]=u,g[6]=c,g[10]=h,g[14]=f,g[3]=d,g[7]=v,g[11]=y,g[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new zn().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Fp.setFromMatrixColumn(e,0).length(),o=1/Fp.setFromMatrixColumn(e,1).length(),s=1/Fp.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*o,t[5]=r[5]*o,t[6]=r[6]*o,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,o=e.z,s=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(o),h=Math.sin(o);if(e.order==="XYZ"){const f=s*c,d=s*h,v=a*c,y=a*h;t[0]=l*c,t[4]=-l*h,t[8]=u,t[1]=d+v*u,t[5]=f-y*u,t[9]=-a*l,t[2]=y-f*u,t[6]=v+d*u,t[10]=s*l}else if(e.order==="YXZ"){const f=l*c,d=l*h,v=u*c,y=u*h;t[0]=f+y*a,t[4]=v*a-d,t[8]=s*u,t[1]=s*h,t[5]=s*c,t[9]=-a,t[2]=d*a-v,t[6]=y+f*a,t[10]=s*l}else if(e.order==="ZXY"){const f=l*c,d=l*h,v=u*c,y=u*h;t[0]=f-y*a,t[4]=-s*h,t[8]=v+d*a,t[1]=d+v*a,t[5]=s*c,t[9]=y-f*a,t[2]=-s*u,t[6]=a,t[10]=s*l}else if(e.order==="ZYX"){const f=s*c,d=s*h,v=a*c,y=a*h;t[0]=l*c,t[4]=v*u-d,t[8]=f*u+y,t[1]=l*h,t[5]=y*u+f,t[9]=d*u-v,t[2]=-u,t[6]=a*l,t[10]=s*l}else if(e.order==="YZX"){const f=s*l,d=s*u,v=a*l,y=a*u;t[0]=l*c,t[4]=y-f*h,t[8]=v*h+d,t[1]=h,t[5]=s*c,t[9]=-a*c,t[2]=-u*c,t[6]=d*h+v,t[10]=f-y*h}else if(e.order==="XZY"){const f=s*l,d=s*u,v=a*l,y=a*u;t[0]=l*c,t[4]=-h,t[8]=u*c,t[1]=f*h+y,t[5]=s*c,t[9]=d*h-v,t[2]=v*h-d,t[6]=a*c,t[10]=y*h+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(t9,e,n9)}lookAt(e,t,r){const i=this.elements;return va.subVectors(e,t),va.lengthSq()===0&&(va.z=1),va.normalize(),_h.crossVectors(r,va),_h.lengthSq()===0&&(Math.abs(r.z)===1?va.x+=1e-4:va.z+=1e-4,va.normalize(),_h.crossVectors(r,va)),_h.normalize(),Ty.crossVectors(va,_h),i[0]=_h.x,i[4]=Ty.x,i[8]=va.x,i[1]=_h.y,i[5]=Ty.y,i[9]=va.y,i[2]=_h.z,i[6]=Ty.z,i[10]=va.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,o=this.elements,s=r[0],a=r[4],l=r[8],u=r[12],c=r[1],h=r[5],f=r[9],d=r[13],v=r[2],y=r[6],x=r[10],g=r[14],S=r[3],_=r[7],E=r[11],C=r[15],I=i[0],F=i[4],R=i[8],k=i[12],L=i[1],N=i[5],z=i[9],H=i[13],G=i[2],K=i[6],ee=i[10],le=i[14],V=i[3],J=i[7],j=i[11],ie=i[15];return o[0]=s*I+a*L+l*G+u*V,o[4]=s*F+a*N+l*K+u*J,o[8]=s*R+a*z+l*ee+u*j,o[12]=s*k+a*H+l*le+u*ie,o[1]=c*I+h*L+f*G+d*V,o[5]=c*F+h*N+f*K+d*J,o[9]=c*R+h*z+f*ee+d*j,o[13]=c*k+h*H+f*le+d*ie,o[2]=v*I+y*L+x*G+g*V,o[6]=v*F+y*N+x*K+g*J,o[10]=v*R+y*z+x*ee+g*j,o[14]=v*k+y*H+x*le+g*ie,o[3]=S*I+_*L+E*G+C*V,o[7]=S*F+_*N+E*K+C*J,o[11]=S*R+_*z+E*ee+C*j,o[15]=S*k+_*H+E*le+C*ie,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],o=e[12],s=e[1],a=e[5],l=e[9],u=e[13],c=e[2],h=e[6],f=e[10],d=e[14],v=e[3],y=e[7],x=e[11],g=e[15];return v*(+o*l*h-i*u*h-o*a*f+r*u*f+i*a*d-r*l*d)+y*(+t*l*d-t*u*f+o*s*f-i*s*d+i*u*c-o*l*c)+x*(+t*u*h-t*a*d-o*s*h+r*s*d+o*a*c-r*u*c)+g*(-i*a*c-t*l*h+t*a*f+i*s*h-r*s*f+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],d=e[11],v=e[12],y=e[13],x=e[14],g=e[15],S=h*x*u-y*f*u+y*l*d-a*x*d-h*l*g+a*f*g,_=v*f*u-c*x*u-v*l*d+s*x*d+c*l*g-s*f*g,E=c*y*u-v*h*u+v*a*d-s*y*d-c*a*g+s*h*g,C=v*h*l-c*y*l-v*a*f+s*y*f+c*a*x-s*h*x,I=t*S+r*_+i*E+o*C;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/I;return e[0]=S*F,e[1]=(y*f*o-h*x*o-y*i*d+r*x*d+h*i*g-r*f*g)*F,e[2]=(a*x*o-y*l*o+y*i*u-r*x*u-a*i*g+r*l*g)*F,e[3]=(h*l*o-a*f*o-h*i*u+r*f*u+a*i*d-r*l*d)*F,e[4]=_*F,e[5]=(c*x*o-v*f*o+v*i*d-t*x*d-c*i*g+t*f*g)*F,e[6]=(v*l*o-s*x*o-v*i*u+t*x*u+s*i*g-t*l*g)*F,e[7]=(s*f*o-c*l*o+c*i*u-t*f*u-s*i*d+t*l*d)*F,e[8]=E*F,e[9]=(v*h*o-c*y*o-v*r*d+t*y*d+c*r*g-t*h*g)*F,e[10]=(s*y*o-v*a*o+v*r*u-t*y*u-s*r*g+t*a*g)*F,e[11]=(c*a*o-s*h*o-c*r*u+t*h*u+s*r*d-t*a*d)*F,e[12]=C*F,e[13]=(c*y*i-v*h*i+v*r*f-t*y*f-c*r*x+t*h*x)*F,e[14]=(v*a*i-s*y*i-v*r*l+t*y*l+s*r*x-t*a*x)*F,e[15]=(s*h*i-c*a*i+c*r*l-t*h*l-s*r*f+t*a*f)*F,this}scale(e){const t=this.elements,r=e.x,i=e.y,o=e.z;return t[0]*=r,t[4]*=i,t[8]*=o,t[1]*=r,t[5]*=i,t[9]*=o,t[2]*=r,t[6]*=i,t[10]*=o,t[3]*=r,t[7]*=i,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),o=1-r,s=e.x,a=e.y,l=e.z,u=o*s,c=o*a;return this.set(u*s+r,u*a-i*l,u*l+i*a,0,u*a+i*l,c*a+r,c*l-i*s,0,u*l-i*a,c*l+i*s,o*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,o,s){return this.set(1,r,o,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,o=t._x,s=t._y,a=t._z,l=t._w,u=o+o,c=s+s,h=a+a,f=o*u,d=o*c,v=o*h,y=s*c,x=s*h,g=a*h,S=l*u,_=l*c,E=l*h,C=r.x,I=r.y,F=r.z;return i[0]=(1-(y+g))*C,i[1]=(d+E)*C,i[2]=(v-_)*C,i[3]=0,i[4]=(d-E)*I,i[5]=(1-(f+g))*I,i[6]=(x+S)*I,i[7]=0,i[8]=(v+_)*F,i[9]=(x-S)*F,i[10]=(1-(f+y))*F,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let o=Fp.set(i[0],i[1],i[2]).length();const s=Fp.set(i[4],i[5],i[6]).length(),a=Fp.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],bl.copy(this);const u=1/o,c=1/s,h=1/a;return bl.elements[0]*=u,bl.elements[1]*=u,bl.elements[2]*=u,bl.elements[4]*=c,bl.elements[5]*=c,bl.elements[6]*=c,bl.elements[8]*=h,bl.elements[9]*=h,bl.elements[10]*=h,t.setFromRotationMatrix(bl),r.x=o,r.y=s,r.z=a,this}makePerspective(e,t,r,i,o,s,a=bu){const l=this.elements,u=2*o/(t-e),c=2*o/(r-i),h=(t+e)/(t-e),f=(r+i)/(r-i);let d,v;if(a===bu)d=-(s+o)/(s-o),v=-2*s*o/(s-o);else if(a===Dv)d=-s/(s-o),v=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=c,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,o,s,a=bu){const l=this.elements,u=1/(t-e),c=1/(r-i),h=1/(s-o),f=(t+e)*u,d=(r+i)*c;let v,y;if(a===bu)v=(s+o)*h,y=-2*h;else if(a===Dv)v=o*h,y=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=y,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Fp=new ye,bl=new zn,t9=new ye(0,0,0),n9=new ye(1,1,1),_h=new ye,Ty=new ye,va=new ye,DC=new zn,OC=new ys;class p1{constructor(e=0,t=0,r=0,i=p1.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,o=i[0],s=i[4],a=i[8],l=i[1],u=i[5],c=i[9],h=i[2],f=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(Ni(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Ni(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(Ni(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-Ni(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(Ni(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Ni(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return DC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(DC,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return OC.setFromEuler(this),this.setFromQuaternion(OC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}p1.DEFAULT_ORDER="XYZ";class Cd{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let r9=0;const BC=new ye,Dp=new ys,lc=new zn,Cy=new ye,a0=new ye,i9=new ye,o9=new ys,UC=new ye(1,0,0),zC=new ye(0,1,0),HC=new ye(0,0,1),s9={type:"added"},GC={type:"removed"};class fr extends Vc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:r9++}),this.uuid=ba(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=fr.DEFAULT_UP.clone();const e=new ye,t=new p1,r=new ys,i=new ye(1,1,1);function o(){r.setFromEuler(t,!1)}function s(){t.setFromQuaternion(r,void 0,!1)}t._onChange(o),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new zn},normalMatrix:{value:new Xn}}),this.matrix=new zn,this.matrixWorld=new zn,this.matrixAutoUpdate=fr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=fr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Cd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Dp.setFromAxisAngle(e,t),this.quaternion.multiply(Dp),this}rotateOnWorldAxis(e,t){return Dp.setFromAxisAngle(e,t),this.quaternion.premultiply(Dp),this}rotateX(e){return this.rotateOnAxis(UC,e)}rotateY(e){return this.rotateOnAxis(zC,e)}rotateZ(e){return this.rotateOnAxis(HC,e)}translateOnAxis(e,t){return BC.copy(e).applyQuaternion(this.quaternion),this.position.add(BC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(UC,e)}translateY(e){return this.translateOnAxis(zC,e)}translateZ(e){return this.translateOnAxis(HC,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(lc.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?Cy.copy(e):Cy.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),a0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?lc.lookAt(a0,Cy,this.up):lc.lookAt(Cy,a0,this.up),this.quaternion.setFromRotationMatrix(lc),i&&(lc.extractRotation(i.matrixWorld),Dp.setFromRotationMatrix(lc),this.quaternion.premultiply(Dp.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(s9)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(GC)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(GC)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),lc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),lc.multiply(e.parent.matrixWorld)),e.applyMatrix4(lc),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,o=this.children.length;i<o;i++){const s=this.children[i].getObjectsByProperty(e,t);s.length>0&&(r=r.concat(s))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(a0,e,i9),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(a0,o9,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const o=t[r];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let o=0,s=i.length;o<s;o++){const a=i[o];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function o(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const h=l[u];o(e.shapes,h)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(o(e.materials,this.material[l]));i.material=a}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(o(e.animations,l))}}if(t){const a=s(e.geometries),l=s(e.materials),u=s(e.textures),c=s(e.images),h=s(e.shapes),f=s(e.skeletons),d=s(e.animations),v=s(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),d.length>0&&(r.animations=d),v.length>0&&(r.nodes=v)}return r.object=i,r;function s(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}fr.DEFAULT_UP=new ye(0,1,0);fr.DEFAULT_MATRIX_AUTO_UPDATE=!0;fr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ml=new ye,uc=new ye,T_=new ye,cc=new ye,Op=new ye,Bp=new ye,VC=new ye,C_=new ye,P_=new ye,R_=new ye;let Py=!1;class Ks{constructor(e=new ye,t=new ye,r=new ye){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Ml.subVectors(e,t),i.cross(Ml);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,t,r,i,o){Ml.subVectors(i,t),uc.subVectors(r,t),T_.subVectors(e,t);const s=Ml.dot(Ml),a=Ml.dot(uc),l=Ml.dot(T_),u=uc.dot(uc),c=uc.dot(T_),h=s*u-a*a;if(h===0)return o.set(-2,-1,-1);const f=1/h,d=(u*l-a*c)*f,v=(s*c-a*l)*f;return o.set(1-d-v,v,d)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,cc),cc.x>=0&&cc.y>=0&&cc.x+cc.y<=1}static getUV(e,t,r,i,o,s,a,l){return Py===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Py=!0),this.getInterpolation(e,t,r,i,o,s,a,l)}static getInterpolation(e,t,r,i,o,s,a,l){return this.getBarycoord(e,t,r,i,cc),l.setScalar(0),l.addScaledVector(o,cc.x),l.addScaledVector(s,cc.y),l.addScaledVector(a,cc.z),l}static isFrontFacing(e,t,r,i){return Ml.subVectors(r,t),uc.subVectors(e,t),Ml.cross(uc).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ml.subVectors(this.c,this.b),uc.subVectors(this.a,this.b),Ml.cross(uc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ks.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ks.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,o){return Py===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Py=!0),Ks.getInterpolation(e,this.a,this.b,this.c,t,r,i,o)}getInterpolation(e,t,r,i,o){return Ks.getInterpolation(e,this.a,this.b,this.c,t,r,i,o)}containsPoint(e){return Ks.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ks.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,o=this.c;let s,a;Op.subVectors(i,r),Bp.subVectors(o,r),C_.subVectors(e,r);const l=Op.dot(C_),u=Bp.dot(C_);if(l<=0&&u<=0)return t.copy(r);P_.subVectors(e,i);const c=Op.dot(P_),h=Bp.dot(P_);if(c>=0&&h<=c)return t.copy(i);const f=l*h-c*u;if(f<=0&&l>=0&&c<=0)return s=l/(l-c),t.copy(r).addScaledVector(Op,s);R_.subVectors(e,o);const d=Op.dot(R_),v=Bp.dot(R_);if(v>=0&&d<=v)return t.copy(o);const y=d*u-l*v;if(y<=0&&u>=0&&v<=0)return a=u/(u-v),t.copy(r).addScaledVector(Bp,a);const x=c*v-d*h;if(x<=0&&h-c>=0&&d-v>=0)return VC.subVectors(o,i),a=(h-c)/(h-c+(d-v)),t.copy(i).addScaledVector(VC,a);const g=1/(x+y+f);return s=y*g,a=f*g,t.copy(r).addScaledVector(Op,s).addScaledVector(Bp,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let a9=0;class Ko extends Vc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:a9++}),this.uuid=ba(),this.name="",this.type="Material",this.blending=Ad,this.side=Bc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=E3,this.blendDst=A3,this.blendEquation=ud,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Gx,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=KN,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ex,this.stencilZFail=ex,this.stencilZPass=ex,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Ad&&(r.blending=this.blending),this.side!==Bc&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(t){const o=i(e.textures),s=i(e.images);o.length>0&&(r.textures=o),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=t[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const uF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},El={h:0,s:0,l:0},Ry={h:0,s:0,l:0};function L_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Kt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Hn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ka.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Ka.workingColorSpace){return this.r=e,this.g=t,this.b=r,Ka.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Ka.workingColorSpace){if(e=U3(e,1),t=Ni(t,0,1),r=Ni(r,0,1),t===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+t):r+t-r*t,s=2*r-o;this.r=L_(s,o,e+1/3),this.g=L_(s,o,e),this.b=L_(s,o,e-1/3)}return Ka.toWorkingColorSpace(this,i),this}setStyle(e,t=Hn){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Hn){const r=uF[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Om(e.r),this.g=Om(e.g),this.b=Om(e.b),this}copyLinearToSRGB(e){return this.r=x_(e.r),this.g=x_(e.g),this.b=x_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Hn){return Ka.fromWorkingColorSpace(ss.copy(this),e),Math.round(Ni(ss.r*255,0,255))*65536+Math.round(Ni(ss.g*255,0,255))*256+Math.round(Ni(ss.b*255,0,255))}getHexString(e=Hn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ka.workingColorSpace){Ka.fromWorkingColorSpace(ss.copy(this),t);const r=ss.r,i=ss.g,o=ss.b,s=Math.max(r,i,o),a=Math.min(r,i,o);let l,u;const c=(a+s)/2;if(a===s)l=0,u=0;else{const h=s-a;switch(u=c<=.5?h/(s+a):h/(2-s-a),s){case r:l=(i-o)/h+(i<o?6:0);break;case i:l=(o-r)/h+2;break;case o:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Ka.workingColorSpace){return Ka.fromWorkingColorSpace(ss.copy(this),t),e.r=ss.r,e.g=ss.g,e.b=ss.b,e}getStyle(e=Hn){Ka.fromWorkingColorSpace(ss.copy(this),e);const t=ss.r,r=ss.g,i=ss.b;return e!==Hn?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(El),El.h+=e,El.s+=t,El.l+=r,this.setHSL(El.h,El.s,El.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(El),e.getHSL(Ry);const r=X0(El.h,Ry.h,t),i=X0(El.s,Ry.s,t),o=X0(El.l,Ry.l,t);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*t+o[3]*r+o[6]*i,this.g=o[1]*t+o[4]*r+o[7]*i,this.b=o[2]*t+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ss=new Kt;Kt.NAMES=uF;class _f extends Ko{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Kt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=d1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const wc=l9();function l9(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,o[l]=u|c}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:o,exponentTable:s,offsetTable:a}}function Xs(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Ni(n,-65504,65504),wc.floatView[0]=n;const e=wc.uint32View[0],t=e>>23&511;return wc.baseTable[t]+((e&8388607)>>wc.shiftTable[t])}function L0(n){const e=n>>10;return wc.uint32View[0]=wc.mantissaTable[wc.offsetTable[e]+(n&1023)]+wc.exponentTable[e],wc.floatView[0]}const wd={toHalfFloat:Xs,fromHalfFloat:L0},ro=new ye,Ly=new xt;class Mr{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Fv,this.updateRange={offset:0,count:-1},this.gpuType=vs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Ly.fromBufferAttribute(this,t),Ly.applyMatrix3(e),this.setXY(t,Ly.x,Ly.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)ro.fromBufferAttribute(this,t),ro.applyMatrix3(e),this.setXYZ(t,ro.x,ro.y,ro.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)ro.fromBufferAttribute(this,t),ro.applyMatrix4(e),this.setXYZ(t,ro.x,ro.y,ro.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)ro.fromBufferAttribute(this,t),ro.applyNormalMatrix(e),this.setXYZ(t,ro.x,ro.y,ro.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)ro.fromBufferAttribute(this,t),ro.transformDirection(e),this.setXYZ(t,ro.x,ro.y,ro.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Js(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=qn(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Js(t,this.array)),t}setX(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Js(t,this.array)),t}setY(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Js(t,this.array)),t}setZ(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Js(t,this.array)),t}setW(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=qn(t,this.array),r=qn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=qn(t,this.array),r=qn(r,this.array),i=qn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,o){return e*=this.itemSize,this.normalized&&(t=qn(t,this.array),r=qn(r,this.array),i=qn(i,this.array),o=qn(o,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Fv&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class u9 extends Mr{constructor(e,t,r){super(new Int8Array(e),t,r)}}class c9 extends Mr{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class h9 extends Mr{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class f9 extends Mr{constructor(e,t,r){super(new Int16Array(e),t,r)}}class G3 extends Mr{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class d9 extends Mr{constructor(e,t,r){super(new Int32Array(e),t,r)}}class V3 extends Mr{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class p9 extends Mr{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=L0(this.array[e*this.itemSize]);return this.normalized&&(t=Js(t,this.array)),t}setX(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize]=Xs(t),this}getY(e){let t=L0(this.array[e*this.itemSize+1]);return this.normalized&&(t=Js(t,this.array)),t}setY(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize+1]=Xs(t),this}getZ(e){let t=L0(this.array[e*this.itemSize+2]);return this.normalized&&(t=Js(t,this.array)),t}setZ(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize+2]=Xs(t),this}getW(e){let t=L0(this.array[e*this.itemSize+3]);return this.normalized&&(t=Js(t,this.array)),t}setW(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize+3]=Xs(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=qn(t,this.array),r=qn(r,this.array)),this.array[e+0]=Xs(t),this.array[e+1]=Xs(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=qn(t,this.array),r=qn(r,this.array),i=qn(i,this.array)),this.array[e+0]=Xs(t),this.array[e+1]=Xs(r),this.array[e+2]=Xs(i),this}setXYZW(e,t,r,i,o){return e*=this.itemSize,this.normalized&&(t=qn(t,this.array),r=qn(r,this.array),i=qn(i,this.array),o=qn(o,this.array)),this.array[e+0]=Xs(t),this.array[e+1]=Xs(r),this.array[e+2]=Xs(i),this.array[e+3]=Xs(o),this}}class nn extends Mr{constructor(e,t,r){super(new Float32Array(e),t,r)}}class m9 extends Mr{constructor(e,t,r){super(new Float64Array(e),t,r)}}let g9=0;const Za=new zn,k_=new fr,Up=new ye,ya=new Uu,l0=new Uu,No=new ye;class Rn extends Vc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:g9++}),this.uuid=ba(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(aF(e)?V3:G3)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new Xn().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Za.makeRotationFromQuaternion(e),this.applyMatrix4(Za),this}rotateX(e){return Za.makeRotationX(e),this.applyMatrix4(Za),this}rotateY(e){return Za.makeRotationY(e),this.applyMatrix4(Za),this}rotateZ(e){return Za.makeRotationZ(e),this.applyMatrix4(Za),this}translate(e,t,r){return Za.makeTranslation(e,t,r),this.applyMatrix4(Za),this}scale(e,t,r){return Za.makeScale(e,t,r),this.applyMatrix4(Za),this}lookAt(e){return k_.lookAt(e),k_.updateMatrix(),this.applyMatrix4(k_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Up).negate(),this.translate(Up.x,Up.y,Up.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new nn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Uu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ye(-1/0,-1/0,-1/0),new ye(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const o=t[r];ya.setFromBufferAttribute(o),this.morphTargetsRelative?(No.addVectors(this.boundingBox.min,ya.min),this.boundingBox.expandByPoint(No),No.addVectors(this.boundingBox.max,ya.max),this.boundingBox.expandByPoint(No)):(this.boundingBox.expandByPoint(ya.min),this.boundingBox.expandByPoint(ya.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Zl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ye,1/0);return}if(e){const r=this.boundingSphere.center;if(ya.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++){const a=t[o];l0.setFromBufferAttribute(a),this.morphTargetsRelative?(No.addVectors(ya.min,l0.min),ya.expandByPoint(No),No.addVectors(ya.max,l0.max),ya.expandByPoint(No)):(ya.expandByPoint(l0.min),ya.expandByPoint(l0.max))}ya.getCenter(r);let i=0;for(let o=0,s=e.count;o<s;o++)No.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(No));if(t)for(let o=0,s=t.length;o<s;o++){const a=t[o],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)No.fromBufferAttribute(a,u),l&&(Up.fromBufferAttribute(e,u),No.add(Up)),i=Math.max(i,r.distanceToSquared(No))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,o=t.normal.array,s=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Mr(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let L=0;L<a;L++)u[L]=new ye,c[L]=new ye;const h=new ye,f=new ye,d=new ye,v=new xt,y=new xt,x=new xt,g=new ye,S=new ye;function _(L,N,z){h.fromArray(i,L*3),f.fromArray(i,N*3),d.fromArray(i,z*3),v.fromArray(s,L*2),y.fromArray(s,N*2),x.fromArray(s,z*2),f.sub(h),d.sub(h),y.sub(v),x.sub(v);const H=1/(y.x*x.y-x.x*y.y);isFinite(H)&&(g.copy(f).multiplyScalar(x.y).addScaledVector(d,-y.y).multiplyScalar(H),S.copy(d).multiplyScalar(y.x).addScaledVector(f,-x.x).multiplyScalar(H),u[L].add(g),u[N].add(g),u[z].add(g),c[L].add(S),c[N].add(S),c[z].add(S))}let E=this.groups;E.length===0&&(E=[{start:0,count:r.length}]);for(let L=0,N=E.length;L<N;++L){const z=E[L],H=z.start,G=z.count;for(let K=H,ee=H+G;K<ee;K+=3)_(r[K+0],r[K+1],r[K+2])}const C=new ye,I=new ye,F=new ye,R=new ye;function k(L){F.fromArray(o,L*3),R.copy(F);const N=u[L];C.copy(N),C.sub(F.multiplyScalar(F.dot(N))).normalize(),I.crossVectors(R,N);const H=I.dot(c[L])<0?-1:1;l[L*4]=C.x,l[L*4+1]=C.y,l[L*4+2]=C.z,l[L*4+3]=H}for(let L=0,N=E.length;L<N;++L){const z=E[L],H=z.start,G=z.count;for(let K=H,ee=H+G;K<ee;K+=3)k(r[K+0]),k(r[K+1]),k(r[K+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new Mr(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let f=0,d=r.count;f<d;f++)r.setXYZ(f,0,0,0);const i=new ye,o=new ye,s=new ye,a=new ye,l=new ye,u=new ye,c=new ye,h=new ye;if(e)for(let f=0,d=e.count;f<d;f+=3){const v=e.getX(f+0),y=e.getX(f+1),x=e.getX(f+2);i.fromBufferAttribute(t,v),o.fromBufferAttribute(t,y),s.fromBufferAttribute(t,x),c.subVectors(s,o),h.subVectors(i,o),c.cross(h),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,y),u.fromBufferAttribute(r,x),a.add(c),l.add(c),u.add(c),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(y,l.x,l.y,l.z),r.setXYZ(x,u.x,u.y,u.z)}else for(let f=0,d=t.count;f<d;f+=3)i.fromBufferAttribute(t,f+0),o.fromBufferAttribute(t,f+1),s.fromBufferAttribute(t,f+2),c.subVectors(s,o),h.subVectors(i,o),c.cross(h),r.setXYZ(f+0,c.x,c.y,c.z),r.setXYZ(f+1,c.x,c.y,c.z),r.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)No.fromBufferAttribute(e,t),No.normalize(),e.setXYZ(t,No.x,No.y,No.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,h=a.normalized,f=new u.constructor(l.length*c);let d=0,v=0;for(let y=0,x=l.length;y<x;y++){a.isInterleavedBufferAttribute?d=l[y]*a.data.stride+a.offset:d=l[y]*c;for(let g=0;g<c;g++)f[v++]=u[d++]}return new Mr(f,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Rn,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);t.setAttribute(a,u)}const o=this.morphAttributes;for(const a in o){const l=[],u=o[a];for(let c=0,h=u.length;c<h;c++){const f=u[c],d=e(f,r);l.push(d)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const u=s[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let o=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let h=0,f=u.length;h<f;h++){const d=u[h];c.push(d.toJSON(e.data))}c.length>0&&(i[l]=c,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const o=e.morphAttributes;for(const u in o){const c=[],h=o[u];for(let f=0,d=h.length;f<d;f++)c.push(h[f].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,c=s.length;u<c;u++){const h=s[u];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const WC=new zn,Xf=new Zd,ky=new Zl,jC=new ye,zp=new ye,Hp=new ye,Gp=new ye,I_=new ye,Iy=new ye,Ny=new xt,Fy=new xt,Dy=new xt,qC=new ye,$C=new ye,XC=new ye,Oy=new ye,By=new ye;class xo extends fr{constructor(e=new Rn,t=new _f){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,s=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(o&&a){Iy.set(0,0,0);for(let l=0,u=o.length;l<u;l++){const c=a[l],h=o[l];c!==0&&(I_.fromBufferAttribute(h,e),s?Iy.addScaledVector(I_,c):Iy.addScaledVector(I_.sub(t),c))}t.add(Iy)}return t}raycast(e,t){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),ky.copy(r.boundingSphere),ky.applyMatrix4(o),Xf.copy(e.ray).recast(e.near),!(ky.containsPoint(Xf.origin)===!1&&(Xf.intersectSphere(ky,jC)===null||Xf.origin.distanceToSquared(jC)>(e.far-e.near)**2))&&(WC.copy(o).invert(),Xf.copy(e.ray).applyMatrix4(WC),!(r.boundingBox!==null&&Xf.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Xf)))}_computeIntersections(e,t,r){let i;const o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,u=o.attributes.uv,c=o.attributes.uv1,h=o.attributes.normal,f=o.groups,d=o.drawRange;if(a!==null)if(Array.isArray(s))for(let v=0,y=f.length;v<y;v++){const x=f[v],g=s[x.materialIndex],S=Math.max(x.start,d.start),_=Math.min(a.count,Math.min(x.start+x.count,d.start+d.count));for(let E=S,C=_;E<C;E+=3){const I=a.getX(E),F=a.getX(E+1),R=a.getX(E+2);i=Uy(this,g,e,r,u,c,h,I,F,R),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=x.materialIndex,t.push(i))}}else{const v=Math.max(0,d.start),y=Math.min(a.count,d.start+d.count);for(let x=v,g=y;x<g;x+=3){const S=a.getX(x),_=a.getX(x+1),E=a.getX(x+2);i=Uy(this,s,e,r,u,c,h,S,_,E),i&&(i.faceIndex=Math.floor(x/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(s))for(let v=0,y=f.length;v<y;v++){const x=f[v],g=s[x.materialIndex],S=Math.max(x.start,d.start),_=Math.min(l.count,Math.min(x.start+x.count,d.start+d.count));for(let E=S,C=_;E<C;E+=3){const I=E,F=E+1,R=E+2;i=Uy(this,g,e,r,u,c,h,I,F,R),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=x.materialIndex,t.push(i))}}else{const v=Math.max(0,d.start),y=Math.min(l.count,d.start+d.count);for(let x=v,g=y;x<g;x+=3){const S=x,_=x+1,E=x+2;i=Uy(this,s,e,r,u,c,h,S,_,E),i&&(i.faceIndex=Math.floor(x/3),t.push(i))}}}}function v9(n,e,t,r,i,o,s,a){let l;if(e.side===Ns?l=r.intersectTriangle(s,o,i,!0,a):l=r.intersectTriangle(i,o,s,e.side===Bc,a),l===null)return null;By.copy(a),By.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(By);return u<t.near||u>t.far?null:{distance:u,point:By.clone(),object:n}}function Uy(n,e,t,r,i,o,s,a,l,u){n.getVertexPosition(a,zp),n.getVertexPosition(l,Hp),n.getVertexPosition(u,Gp);const c=v9(n,e,t,r,zp,Hp,Gp,Oy);if(c){i&&(Ny.fromBufferAttribute(i,a),Fy.fromBufferAttribute(i,l),Dy.fromBufferAttribute(i,u),c.uv=Ks.getInterpolation(Oy,zp,Hp,Gp,Ny,Fy,Dy,new xt)),o&&(Ny.fromBufferAttribute(o,a),Fy.fromBufferAttribute(o,l),Dy.fromBufferAttribute(o,u),c.uv1=Ks.getInterpolation(Oy,zp,Hp,Gp,Ny,Fy,Dy,new xt),c.uv2=c.uv1),s&&(qC.fromBufferAttribute(s,a),$C.fromBufferAttribute(s,l),XC.fromBufferAttribute(s,u),c.normal=Ks.getInterpolation(Oy,zp,Hp,Gp,qC,$C,XC,new ye),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const h={a,b:l,c:u,normal:new ye,materialIndex:0};Ks.getNormal(zp,Hp,Gp,h.normal),c.face=h}return c}class Kd extends Rn{constructor(e=1,t=1,r=1,i=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:o,depthSegments:s};const a=this;i=Math.floor(i),o=Math.floor(o),s=Math.floor(s);const l=[],u=[],c=[],h=[];let f=0,d=0;v("z","y","x",-1,-1,r,t,e,s,o,0),v("z","y","x",1,-1,r,t,-e,s,o,1),v("x","z","y",1,1,e,r,t,i,s,2),v("x","z","y",1,-1,e,r,-t,i,s,3),v("x","y","z",1,-1,e,t,r,i,o,4),v("x","y","z",-1,-1,e,t,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new nn(u,3)),this.setAttribute("normal",new nn(c,3)),this.setAttribute("uv",new nn(h,2));function v(y,x,g,S,_,E,C,I,F,R,k){const L=E/F,N=C/R,z=E/2,H=C/2,G=I/2,K=F+1,ee=R+1;let le=0,V=0;const J=new ye;for(let j=0;j<ee;j++){const ie=j*N-H;for(let D=0;D<K;D++){const q=D*L-z;J[y]=q*S,J[x]=ie*_,J[g]=G,u.push(J.x,J.y,J.z),J[y]=0,J[x]=0,J[g]=I>0?1:-1,c.push(J.x,J.y,J.z),h.push(D/F),h.push(1-j/R),le+=1}}for(let j=0;j<R;j++)for(let ie=0;ie<F;ie++){const D=f+ie+K*j,q=f+ie+K*(j+1),Z=f+(ie+1)+K*(j+1),Q=f+(ie+1)+K*j;l.push(D,q,Q),l.push(q,Z,Q),V+=6}a.addGroup(d,V,k),d+=V,f+=le}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ig(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Cs(n){const e={};for(let t=0;t<n.length;t++){const r=ig(n[t]);for(const i in r)e[i]=r[i]}return e}function y9(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function cF(n){return n.getRenderTarget()===null?n.outputColorSpace:Wl}const hF={clone:ig,merge:Cs};var x9=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,w9=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ql extends Ko{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=x9,this.fragmentShader=w9,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ig(e.uniforms),this.uniformsGroups=y9(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?t.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[i]={type:"m4",value:s.toArray()}:t.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class m1 extends fr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new zn,this.projectionMatrix=new zn,this.projectionMatrixInverse=new zn,this.coordinateSystem=bu}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class _i extends m1{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=rg*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Td*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return rg*2*Math.atan(Math.tan(Td*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,o,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Td*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,o=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,u=s.fullHeight;o+=s.offsetX*i/l,t-=s.offsetY*r/u,i*=s.width/l,r*=s.height/u}const a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Vp=-90,Wp=1;class fF extends fr{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null;const i=new _i(Vp,Wp,e,t);i.layers=this.layers,this.add(i);const o=new _i(Vp,Wp,e,t);o.layers=this.layers,this.add(o);const s=new _i(Vp,Wp,e,t);s.layers=this.layers,this.add(s);const a=new _i(Vp,Wp,e,t);a.layers=this.layers,this.add(a);const l=new _i(Vp,Wp,e,t);l.layers=this.layers,this.add(l);const u=new _i(Vp,Wp,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,o,s,a,l]=t;for(const u of t)this.remove(u);if(e===bu)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Dv)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,o,s,a,l,u]=this.children,c=e.getRenderTarget(),h=e.xr.enabled;e.xr.enabled=!1;const f=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,o),e.setRenderTarget(r,2),e.render(t,s),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=f,e.setRenderTarget(r,5),e.render(t,u),e.setRenderTarget(c),e.xr.enabled=h,r.texture.needsPMREMUpdate=!0}}class g1 extends Di{constructor(e,t,r,i,o,s,a,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:Du,super(e,t,r,i,o,s,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class W3 extends jl{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(Y0("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===rf?Hn:of),this.texture=new g1(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ri}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new Kd(5,5,5),o=new ql({name:"CubemapFromEquirect",uniforms:ig(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Ns,blending:Lc});o.uniforms.tEquirect.value=t;const s=new xo(i,o),a=t.minFilter;return t.minFilter===cf&&(t.minFilter=ri),new fF(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,r,i){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(o)}}const N_=new ye,S9=new ye,_9=new Xn;let vc=class{constructor(e=new ye(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=N_.subVectors(r,t).cross(S9.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(N_),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:t.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||_9.getNormalMatrix(e),i=this.coplanarPoint(N_).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Yf=new Zl,zy=new ye;class Hw{constructor(e=new vc,t=new vc,r=new vc,i=new vc,o=new vc,s=new vc){this.planes=[e,t,r,i,o,s]}set(e,t,r,i,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(o),a[5].copy(s),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=bu){const r=this.planes,i=e.elements,o=i[0],s=i[1],a=i[2],l=i[3],u=i[4],c=i[5],h=i[6],f=i[7],d=i[8],v=i[9],y=i[10],x=i[11],g=i[12],S=i[13],_=i[14],E=i[15];if(r[0].setComponents(l-o,f-u,x-d,E-g).normalize(),r[1].setComponents(l+o,f+u,x+d,E+g).normalize(),r[2].setComponents(l+s,f+c,x+v,E+S).normalize(),r[3].setComponents(l-s,f-c,x-v,E-S).normalize(),r[4].setComponents(l-a,f-h,x-y,E-_).normalize(),t===bu)r[5].setComponents(l+a,f+h,x+y,E+_).normalize();else if(t===Dv)r[5].setComponents(a,h,y,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Yf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Yf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Yf)}intersectsSprite(e){return Yf.center.set(0,0,0),Yf.radius=.7071067811865476,Yf.applyMatrix4(e.matrixWorld),this.intersectsSphere(Yf)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(zy.x=i.normal.x>0?e.max.x:e.min.x,zy.y=i.normal.y>0?e.max.y:e.min.y,zy.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(zy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function dF(){let n=null,e=!1,t=null,r=null;function i(o,s){t(o,s),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function b9(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,c){const h=u.array,f=u.usage,d=n.createBuffer();n.bindBuffer(c,d),n.bufferData(c,h,f),u.onUploadCallback();let v;if(h instanceof Float32Array)v=n.FLOAT;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)v=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)v=n.SHORT;else if(h instanceof Uint32Array)v=n.UNSIGNED_INT;else if(h instanceof Int32Array)v=n.INT;else if(h instanceof Int8Array)v=n.BYTE;else if(h instanceof Uint8Array)v=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)v=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:d,type:v,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version}}function o(u,c,h){const f=c.array,d=c.updateRange;n.bindBuffer(h,u),d.count===-1?n.bufferSubData(h,0,f):(t?n.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f,d.offset,d.count):n.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f.subarray(d.offset,d.offset+d.count)),d.count=-1),c.onUploadCallback()}function s(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=r.get(u);c&&(n.deleteBuffer(c.buffer),r.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const f=r.get(u);(!f||f.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=r.get(u);h===void 0?r.set(u,i(u,c)):h.version<u.version&&(o(h.buffer,u,c),h.version=u.version)}return{get:s,remove:a,update:l}}class v1 extends Rn{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const o=e/2,s=t/2,a=Math.floor(r),l=Math.floor(i),u=a+1,c=l+1,h=e/a,f=t/l,d=[],v=[],y=[],x=[];for(let g=0;g<c;g++){const S=g*f-s;for(let _=0;_<u;_++){const E=_*h-o;v.push(E,-S,0),y.push(0,0,1),x.push(_/a),x.push(1-g/l)}}for(let g=0;g<l;g++)for(let S=0;S<a;S++){const _=S+u*g,E=S+u*(g+1),C=S+1+u*(g+1),I=S+1+u*g;d.push(_,E,I),d.push(E,C,I)}this.setIndex(d),this.setAttribute("position",new nn(v,3)),this.setAttribute("normal",new nn(y,3)),this.setAttribute("uv",new nn(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new v1(e.width,e.height,e.widthSegments,e.heightSegments)}}var M9=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,E9=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,A9=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,T9=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,C9=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,P9=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,R9=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,L9=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,k9=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,I9=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,N9=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,F9=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,D9=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,O9=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,B9=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,U9=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,z9=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,H9=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,G9=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,V9=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,W9=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,j9=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,q9=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,$9=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,X9=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Y9=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Z9=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,K9=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,J9="gl_FragColor = linearToOutputTexel( gl_FragColor );",Q9=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,eG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,tG=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,nG=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,rG=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,iG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,oG=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,sG=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,aG=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,lG=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,uG=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,cG=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,hG=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,fG=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,dG=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,pG=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,mG=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,gG=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,vG=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,yG=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,xG=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,wG=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,SG=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,_G=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,bG=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,MG=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,EG=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,AG=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,TG=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,CG=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,PG=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,RG=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,LG=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,kG=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,IG=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,NG=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,FG=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,DG=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,OG=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,BG=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,UG=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,zG=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,HG=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,GG=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,VG=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,WG=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,jG=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,qG=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,$G=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,XG=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,YG=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,ZG=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,KG=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,JG=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,QG=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,eV=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,tV=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,nV=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,rV=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,iV=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,oV=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,sV=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,aV=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,lV=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,uV=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,cV=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,hV=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,fV=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,dV=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,pV=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,mV=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,gV=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,vV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,yV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,xV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,wV=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const SV=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,_V=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,bV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,MV=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,AV=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,TV=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,CV=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,PV=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,RV=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,LV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,kV=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,IV=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,NV=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,FV=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,DV=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,OV=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,BV=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UV=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,zV=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HV=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,GV=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,VV=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,WV=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jV=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,qV=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$V=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,XV=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,YV=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ZV=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,KV=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,JV=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,QV=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,eW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,jn={alphahash_fragment:M9,alphahash_pars_fragment:E9,alphamap_fragment:A9,alphamap_pars_fragment:T9,alphatest_fragment:C9,alphatest_pars_fragment:P9,aomap_fragment:R9,aomap_pars_fragment:L9,begin_vertex:k9,beginnormal_vertex:I9,bsdfs:N9,iridescence_fragment:F9,bumpmap_pars_fragment:D9,clipping_planes_fragment:O9,clipping_planes_pars_fragment:B9,clipping_planes_pars_vertex:U9,clipping_planes_vertex:z9,color_fragment:H9,color_pars_fragment:G9,color_pars_vertex:V9,color_vertex:W9,common:j9,cube_uv_reflection_fragment:q9,defaultnormal_vertex:$9,displacementmap_pars_vertex:X9,displacementmap_vertex:Y9,emissivemap_fragment:Z9,emissivemap_pars_fragment:K9,colorspace_fragment:J9,colorspace_pars_fragment:Q9,envmap_fragment:eG,envmap_common_pars_fragment:tG,envmap_pars_fragment:nG,envmap_pars_vertex:rG,envmap_physical_pars_fragment:mG,envmap_vertex:iG,fog_vertex:oG,fog_pars_vertex:sG,fog_fragment:aG,fog_pars_fragment:lG,gradientmap_pars_fragment:uG,lightmap_fragment:cG,lightmap_pars_fragment:hG,lights_lambert_fragment:fG,lights_lambert_pars_fragment:dG,lights_pars_begin:pG,lights_toon_fragment:gG,lights_toon_pars_fragment:vG,lights_phong_fragment:yG,lights_phong_pars_fragment:xG,lights_physical_fragment:wG,lights_physical_pars_fragment:SG,lights_fragment_begin:_G,lights_fragment_maps:bG,lights_fragment_end:MG,logdepthbuf_fragment:EG,logdepthbuf_pars_fragment:AG,logdepthbuf_pars_vertex:TG,logdepthbuf_vertex:CG,map_fragment:PG,map_pars_fragment:RG,map_particle_fragment:LG,map_particle_pars_fragment:kG,metalnessmap_fragment:IG,metalnessmap_pars_fragment:NG,morphcolor_vertex:FG,morphnormal_vertex:DG,morphtarget_pars_vertex:OG,morphtarget_vertex:BG,normal_fragment_begin:UG,normal_fragment_maps:zG,normal_pars_fragment:HG,normal_pars_vertex:GG,normal_vertex:VG,normalmap_pars_fragment:WG,clearcoat_normal_fragment_begin:jG,clearcoat_normal_fragment_maps:qG,clearcoat_pars_fragment:$G,iridescence_pars_fragment:XG,opaque_fragment:YG,packing:ZG,premultiplied_alpha_fragment:KG,project_vertex:JG,dithering_fragment:QG,dithering_pars_fragment:eV,roughnessmap_fragment:tV,roughnessmap_pars_fragment:nV,shadowmap_pars_fragment:rV,shadowmap_pars_vertex:iV,shadowmap_vertex:oV,shadowmask_pars_fragment:sV,skinbase_vertex:aV,skinning_pars_vertex:lV,skinning_vertex:uV,skinnormal_vertex:cV,specularmap_fragment:hV,specularmap_pars_fragment:fV,tonemapping_fragment:dV,tonemapping_pars_fragment:pV,transmission_fragment:mV,transmission_pars_fragment:gV,uv_pars_fragment:vV,uv_pars_vertex:yV,uv_vertex:xV,worldpos_vertex:wV,background_vert:SV,background_frag:_V,backgroundCube_vert:bV,backgroundCube_frag:MV,cube_vert:EV,cube_frag:AV,depth_vert:TV,depth_frag:CV,distanceRGBA_vert:PV,distanceRGBA_frag:RV,equirect_vert:LV,equirect_frag:kV,linedashed_vert:IV,linedashed_frag:NV,meshbasic_vert:FV,meshbasic_frag:DV,meshlambert_vert:OV,meshlambert_frag:BV,meshmatcap_vert:UV,meshmatcap_frag:zV,meshnormal_vert:HV,meshnormal_frag:GV,meshphong_vert:VV,meshphong_frag:WV,meshphysical_vert:jV,meshphysical_frag:qV,meshtoon_vert:$V,meshtoon_frag:XV,points_vert:YV,points_frag:ZV,shadow_vert:KV,shadow_frag:JV,sprite_vert:QV,sprite_frag:eW},Vt={common:{diffuse:{value:new Kt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Xn},alphaMap:{value:null},alphaMapTransform:{value:new Xn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Xn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Xn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Xn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Xn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Xn},normalScale:{value:new xt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Xn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Xn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Xn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Xn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Kt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Kt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Xn},alphaTest:{value:0},uvTransform:{value:new Xn}},sprite:{diffuse:{value:new Kt(16777215)},opacity:{value:1},center:{value:new xt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Xn},alphaMap:{value:null},alphaMapTransform:{value:new Xn},alphaTest:{value:0}}},Fl={basic:{uniforms:Cs([Vt.common,Vt.specularmap,Vt.envmap,Vt.aomap,Vt.lightmap,Vt.fog]),vertexShader:jn.meshbasic_vert,fragmentShader:jn.meshbasic_frag},lambert:{uniforms:Cs([Vt.common,Vt.specularmap,Vt.envmap,Vt.aomap,Vt.lightmap,Vt.emissivemap,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.fog,Vt.lights,{emissive:{value:new Kt(0)}}]),vertexShader:jn.meshlambert_vert,fragmentShader:jn.meshlambert_frag},phong:{uniforms:Cs([Vt.common,Vt.specularmap,Vt.envmap,Vt.aomap,Vt.lightmap,Vt.emissivemap,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.fog,Vt.lights,{emissive:{value:new Kt(0)},specular:{value:new Kt(1118481)},shininess:{value:30}}]),vertexShader:jn.meshphong_vert,fragmentShader:jn.meshphong_frag},standard:{uniforms:Cs([Vt.common,Vt.envmap,Vt.aomap,Vt.lightmap,Vt.emissivemap,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.roughnessmap,Vt.metalnessmap,Vt.fog,Vt.lights,{emissive:{value:new Kt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:jn.meshphysical_vert,fragmentShader:jn.meshphysical_frag},toon:{uniforms:Cs([Vt.common,Vt.aomap,Vt.lightmap,Vt.emissivemap,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.gradientmap,Vt.fog,Vt.lights,{emissive:{value:new Kt(0)}}]),vertexShader:jn.meshtoon_vert,fragmentShader:jn.meshtoon_frag},matcap:{uniforms:Cs([Vt.common,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,Vt.fog,{matcap:{value:null}}]),vertexShader:jn.meshmatcap_vert,fragmentShader:jn.meshmatcap_frag},points:{uniforms:Cs([Vt.points,Vt.fog]),vertexShader:jn.points_vert,fragmentShader:jn.points_frag},dashed:{uniforms:Cs([Vt.common,Vt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:jn.linedashed_vert,fragmentShader:jn.linedashed_frag},depth:{uniforms:Cs([Vt.common,Vt.displacementmap]),vertexShader:jn.depth_vert,fragmentShader:jn.depth_frag},normal:{uniforms:Cs([Vt.common,Vt.bumpmap,Vt.normalmap,Vt.displacementmap,{opacity:{value:1}}]),vertexShader:jn.meshnormal_vert,fragmentShader:jn.meshnormal_frag},sprite:{uniforms:Cs([Vt.sprite,Vt.fog]),vertexShader:jn.sprite_vert,fragmentShader:jn.sprite_frag},background:{uniforms:{uvTransform:{value:new Xn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:jn.background_vert,fragmentShader:jn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:jn.backgroundCube_vert,fragmentShader:jn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:jn.cube_vert,fragmentShader:jn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:jn.equirect_vert,fragmentShader:jn.equirect_frag},distanceRGBA:{uniforms:Cs([Vt.common,Vt.displacementmap,{referencePosition:{value:new ye},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:jn.distanceRGBA_vert,fragmentShader:jn.distanceRGBA_frag},shadow:{uniforms:Cs([Vt.lights,Vt.fog,{color:{value:new Kt(0)},opacity:{value:1}}]),vertexShader:jn.shadow_vert,fragmentShader:jn.shadow_frag}};Fl.physical={uniforms:Cs([Fl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Xn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Xn},clearcoatNormalScale:{value:new xt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Xn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Xn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Xn},sheen:{value:0},sheenColor:{value:new Kt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Xn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Xn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Xn},transmissionSamplerSize:{value:new xt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Xn},attenuationDistance:{value:0},attenuationColor:{value:new Kt(0)},specularColor:{value:new Kt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Xn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Xn},anisotropyVector:{value:new xt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Xn}}]),vertexShader:jn.meshphysical_vert,fragmentShader:jn.meshphysical_frag};const Hy={r:0,b:0,g:0};function tW(n,e,t,r,i,o,s){const a=new Kt(0);let l=o===!0?0:1,u,c,h=null,f=0,d=null;function v(x,g){let S=!1,_=g.isScene===!0?g.background:null;switch(_&&_.isTexture&&(_=(g.backgroundBlurriness>0?t:e).get(_)),_===null?y(a,l):_&&_.isColor&&(y(_,1),S=!0),n.xr.getEnvironmentBlendMode()){case"opaque":S=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,s),S=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,s),S=!0;break}(n.autoClear||S)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),_&&(_.isCubeTexture||_.mapping===wg)?(c===void 0&&(c=new xo(new Kd(1,1,1),new ql({name:"BackgroundCubeMaterial",uniforms:ig(Fl.backgroundCube.uniforms),vertexShader:Fl.backgroundCube.vertexShader,fragmentShader:Fl.backgroundCube.fragmentShader,side:Ns,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(I,F,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=_,c.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=_.colorSpace!==Hn,(h!==_||f!==_.version||d!==n.toneMapping)&&(c.material.needsUpdate=!0,h=_,f=_.version,d=n.toneMapping),c.layers.enableAll(),x.unshift(c,c.geometry,c.material,0,0,null)):_&&_.isTexture&&(u===void 0&&(u=new xo(new v1(2,2),new ql({name:"BackgroundMaterial",uniforms:ig(Fl.background.uniforms),vertexShader:Fl.background.vertexShader,fragmentShader:Fl.background.fragmentShader,side:Bc,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=_,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=_.colorSpace!==Hn,_.matrixAutoUpdate===!0&&_.updateMatrix(),u.material.uniforms.uvTransform.value.copy(_.matrix),(h!==_||f!==_.version||d!==n.toneMapping)&&(u.material.needsUpdate=!0,h=_,f=_.version,d=n.toneMapping),u.layers.enableAll(),x.unshift(u,u.geometry,u.material,0,0,null))}function y(x,g){x.getRGB(Hy,cF(n)),r.buffers.color.setClear(Hy.r,Hy.g,Hy.b,g,s)}return{getClearColor:function(){return a},setClearColor:function(x,g=1){a.set(x),l=g,y(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(x){l=x,y(a,l)},render:v}}function nW(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||o!==null,a={},l=x(null);let u=l,c=!1;function h(G,K,ee,le,V){let J=!1;if(s){const j=y(le,ee,K);u!==j&&(u=j,d(u.object)),J=g(G,le,ee,V),J&&S(G,le,ee,V)}else{const j=K.wireframe===!0;(u.geometry!==le.id||u.program!==ee.id||u.wireframe!==j)&&(u.geometry=le.id,u.program=ee.id,u.wireframe=j,J=!0)}V!==null&&t.update(V,n.ELEMENT_ARRAY_BUFFER),(J||c)&&(c=!1,R(G,K,ee,le),V!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(V).buffer))}function f(){return r.isWebGL2?n.createVertexArray():o.createVertexArrayOES()}function d(G){return r.isWebGL2?n.bindVertexArray(G):o.bindVertexArrayOES(G)}function v(G){return r.isWebGL2?n.deleteVertexArray(G):o.deleteVertexArrayOES(G)}function y(G,K,ee){const le=ee.wireframe===!0;let V=a[G.id];V===void 0&&(V={},a[G.id]=V);let J=V[K.id];J===void 0&&(J={},V[K.id]=J);let j=J[le];return j===void 0&&(j=x(f()),J[le]=j),j}function x(G){const K=[],ee=[],le=[];for(let V=0;V<i;V++)K[V]=0,ee[V]=0,le[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:K,enabledAttributes:ee,attributeDivisors:le,object:G,attributes:{},index:null}}function g(G,K,ee,le){const V=u.attributes,J=K.attributes;let j=0;const ie=ee.getAttributes();for(const D in ie)if(ie[D].location>=0){const Z=V[D];let Q=J[D];if(Q===void 0&&(D==="instanceMatrix"&&G.instanceMatrix&&(Q=G.instanceMatrix),D==="instanceColor"&&G.instanceColor&&(Q=G.instanceColor)),Z===void 0||Z.attribute!==Q||Q&&Z.data!==Q.data)return!0;j++}return u.attributesNum!==j||u.index!==le}function S(G,K,ee,le){const V={},J=K.attributes;let j=0;const ie=ee.getAttributes();for(const D in ie)if(ie[D].location>=0){let Z=J[D];Z===void 0&&(D==="instanceMatrix"&&G.instanceMatrix&&(Z=G.instanceMatrix),D==="instanceColor"&&G.instanceColor&&(Z=G.instanceColor));const Q={};Q.attribute=Z,Z&&Z.data&&(Q.data=Z.data),V[D]=Q,j++}u.attributes=V,u.attributesNum=j,u.index=le}function _(){const G=u.newAttributes;for(let K=0,ee=G.length;K<ee;K++)G[K]=0}function E(G){C(G,0)}function C(G,K){const ee=u.newAttributes,le=u.enabledAttributes,V=u.attributeDivisors;ee[G]=1,le[G]===0&&(n.enableVertexAttribArray(G),le[G]=1),V[G]!==K&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](G,K),V[G]=K)}function I(){const G=u.newAttributes,K=u.enabledAttributes;for(let ee=0,le=K.length;ee<le;ee++)K[ee]!==G[ee]&&(n.disableVertexAttribArray(ee),K[ee]=0)}function F(G,K,ee,le,V,J,j){j===!0?n.vertexAttribIPointer(G,K,ee,V,J):n.vertexAttribPointer(G,K,ee,le,V,J)}function R(G,K,ee,le){if(r.isWebGL2===!1&&(G.isInstancedMesh||le.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const V=le.attributes,J=ee.getAttributes(),j=K.defaultAttributeValues;for(const ie in J){const D=J[ie];if(D.location>=0){let q=V[ie];if(q===void 0&&(ie==="instanceMatrix"&&G.instanceMatrix&&(q=G.instanceMatrix),ie==="instanceColor"&&G.instanceColor&&(q=G.instanceColor)),q!==void 0){const Z=q.normalized,Q=q.itemSize,se=t.get(q);if(se===void 0)continue;const me=se.buffer,Se=se.type,Ce=se.bytesPerElement,$e=r.isWebGL2===!0&&(Se===n.INT||Se===n.UNSIGNED_INT||q.gpuType===P3);if(q.isInterleavedBufferAttribute){const ke=q.data,fe=ke.stride,Ie=q.offset;if(ke.isInstancedInterleavedBuffer){for(let Ue=0;Ue<D.locationSize;Ue++)C(D.location+Ue,ke.meshPerAttribute);G.isInstancedMesh!==!0&&le._maxInstanceCount===void 0&&(le._maxInstanceCount=ke.meshPerAttribute*ke.count)}else for(let Ue=0;Ue<D.locationSize;Ue++)E(D.location+Ue);n.bindBuffer(n.ARRAY_BUFFER,me);for(let Ue=0;Ue<D.locationSize;Ue++)F(D.location+Ue,Q/D.locationSize,Se,Z,fe*Ce,(Ie+Q/D.locationSize*Ue)*Ce,$e)}else{if(q.isInstancedBufferAttribute){for(let ke=0;ke<D.locationSize;ke++)C(D.location+ke,q.meshPerAttribute);G.isInstancedMesh!==!0&&le._maxInstanceCount===void 0&&(le._maxInstanceCount=q.meshPerAttribute*q.count)}else for(let ke=0;ke<D.locationSize;ke++)E(D.location+ke);n.bindBuffer(n.ARRAY_BUFFER,me);for(let ke=0;ke<D.locationSize;ke++)F(D.location+ke,Q/D.locationSize,Se,Z,Q*Ce,Q/D.locationSize*ke*Ce,$e)}}else if(j!==void 0){const Z=j[ie];if(Z!==void 0)switch(Z.length){case 2:n.vertexAttrib2fv(D.location,Z);break;case 3:n.vertexAttrib3fv(D.location,Z);break;case 4:n.vertexAttrib4fv(D.location,Z);break;default:n.vertexAttrib1fv(D.location,Z)}}}}I()}function k(){z();for(const G in a){const K=a[G];for(const ee in K){const le=K[ee];for(const V in le)v(le[V].object),delete le[V];delete K[ee]}delete a[G]}}function L(G){if(a[G.id]===void 0)return;const K=a[G.id];for(const ee in K){const le=K[ee];for(const V in le)v(le[V].object),delete le[V];delete K[ee]}delete a[G.id]}function N(G){for(const K in a){const ee=a[K];if(ee[G.id]===void 0)continue;const le=ee[G.id];for(const V in le)v(le[V].object),delete le[V];delete ee[G.id]}}function z(){H(),c=!0,u!==l&&(u=l,d(u.object))}function H(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:z,resetDefaultState:H,dispose:k,releaseStatesOfGeometry:L,releaseStatesOfProgram:N,initAttributes:_,enableAttribute:E,disableUnusedAttributes:I}}function rW(n,e,t,r){const i=r.isWebGL2;let o;function s(u){o=u}function a(u,c){n.drawArrays(o,u,c),t.update(c,o,1)}function l(u,c,h){if(h===0)return;let f,d;if(i)f=n,d="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[d](o,u,c,h),t.update(c,o,h)}this.setMode=s,this.render=a,this.renderInstances=l}function iW(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const F=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(F){if(F==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=s||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),y=n.getParameter(n.MAX_VERTEX_ATTRIBS),x=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),S=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),_=f>0,E=s||e.has("OES_texture_float"),C=_&&E,I=s?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:o,precision:a,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:f,maxTextureSize:d,maxCubemapSize:v,maxAttributes:y,maxVertexUniforms:x,maxVaryings:g,maxFragmentUniforms:S,vertexTextures:_,floatFragmentTextures:E,floatVertexTextures:C,maxSamples:I}}function oW(n){const e=this;let t=null,r=0,i=!1,o=!1;const s=new vc,a=new Xn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f){const d=h.length!==0||f||r!==0||i;return i=f,r=h.length,d},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(h,f){t=c(h,f,0)},this.setState=function(h,f,d){const v=h.clippingPlanes,y=h.clipIntersection,x=h.clipShadows,g=n.get(h);if(!i||v===null||v.length===0||o&&!x)o?c(null):u();else{const S=o?0:r,_=S*4;let E=g.clippingState||null;l.value=E,E=c(v,f,_,d);for(let C=0;C!==_;++C)E[C]=t[C];g.clippingState=E,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=S}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(h,f,d,v){const y=h!==null?h.length:0;let x=null;if(y!==0){if(x=l.value,v!==!0||x===null){const g=d+y*4,S=f.matrixWorldInverse;a.getNormalMatrix(S),(x===null||x.length<g)&&(x=new Float32Array(g));for(let _=0,E=d;_!==y;++_,E+=4)s.copy(h[_]).applyMatrix4(S,a),s.normal.toArray(x,E),x[E+3]=s.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,x}}function sW(n){let e=new WeakMap;function t(s,a){return a===ng?s.mapping=Du:a===Pv&&(s.mapping=uf),s}function r(s){if(s&&s.isTexture&&s.isRenderTargetTexture===!1){const a=s.mapping;if(a===ng||a===Pv)if(e.has(s)){const l=e.get(s).texture;return t(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const u=new W3(l.height/2);return u.fromEquirectangularTexture(n,s),e.set(s,u),s.addEventListener("dispose",i),t(u.texture,s.mapping)}else return null}}return s}function i(s){const a=s.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class ku extends m1{constructor(e=-1,t=1,r=1,i=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,s=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,s=o+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Em=4,YC=[.125,.215,.35,.446,.526,.582],cd=20,F_=new ku,ZC=new Kt;let D_=null;const od=(1+Math.sqrt(5))/2,jp=1/od,KC=[new ye(1,1,1),new ye(-1,1,1),new ye(1,1,-1),new ye(-1,1,-1),new ye(0,od,jp),new ye(0,od,-jp),new ye(jp,0,od),new ye(-jp,0,od),new ye(od,jp,0),new ye(-od,jp,0)];class EM{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){D_=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=eP(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=QC(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(D_),e.scissorTest=!1,Gy(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Du||e.mapping===uf?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),D_=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:ri,minFilter:ri,generateMipmaps:!1,type:Ls,format:Rs,colorSpace:Wl,depthBuffer:!1},i=JC(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=JC(e,t,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=aW(o)),this._blurMaterial=lW(o,e,t)}return i}_compileMaterial(e){const t=new xo(this._lodPlanes[0],e);this._renderer.compile(t,F_)}_sceneToCubeUV(e,t,r,i){const a=new _i(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,h=c.autoClear,f=c.toneMapping;c.getClearColor(ZC),c.toneMapping=Ru,c.autoClear=!1;const d=new _f({name:"PMREM.Background",side:Ns,depthWrite:!1,depthTest:!1}),v=new xo(new Kd,d);let y=!1;const x=e.background;x?x.isColor&&(d.color.copy(x),e.background=null,y=!0):(d.color.copy(ZC),y=!0);for(let g=0;g<6;g++){const S=g%3;S===0?(a.up.set(0,l[g],0),a.lookAt(u[g],0,0)):S===1?(a.up.set(0,0,l[g]),a.lookAt(0,u[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,u[g]));const _=this._cubeSize;Gy(i,S*_,g>2?_:0,_,_),c.setRenderTarget(i),y&&c.render(v,a),c.render(e,a)}v.geometry.dispose(),v.material.dispose(),c.toneMapping=f,c.autoClear=h,e.background=x}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Du||e.mapping===uf;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=eP()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=QC());const o=i?this._cubemapMaterial:this._equirectMaterial,s=new xo(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;const l=this._cubeSize;Gy(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(s,F_)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=KC[(i-1)%KC.length];this._blur(e,i-1,i,o,s)}t.autoClear=r}_blur(e,t,r,i,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",o),this._halfBlur(s,e,r,r,i,"longitudinal",o)}_halfBlur(e,t,r,i,o,s,a){const l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,h=new xo(this._lodPlanes[i],u),f=u.uniforms,d=this._sizeLods[r]-1,v=isFinite(o)?Math.PI/(2*d):2*Math.PI/(2*cd-1),y=o/v,x=isFinite(o)?1+Math.floor(c*y):cd;x>cd&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${cd}`);const g=[];let S=0;for(let F=0;F<cd;++F){const R=F/y,k=Math.exp(-R*R/2);g.push(k),F===0?S+=k:F<x&&(S+=2*k)}for(let F=0;F<g.length;F++)g[F]=g[F]/S;f.envMap.value=e.texture,f.samples.value=x,f.weights.value=g,f.latitudinal.value=s==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:_}=this;f.dTheta.value=v,f.mipInt.value=_-r;const E=this._sizeLods[i],C=3*E*(i>_-Em?i-_+Em:0),I=4*(this._cubeSize-E);Gy(t,C,I,3*E,2*E),l.setRenderTarget(t),l.render(h,F_)}}function aW(n){const e=[],t=[],r=[];let i=n;const o=n-Em+1+YC.length;for(let s=0;s<o;s++){const a=Math.pow(2,i);t.push(a);let l=1/a;s>n-Em?l=YC[s-n+Em-1]:s===0&&(l=0),r.push(l);const u=1/(a-2),c=-u,h=1+u,f=[c,c,h,c,h,h,c,c,h,h,c,h],d=6,v=6,y=3,x=2,g=1,S=new Float32Array(y*v*d),_=new Float32Array(x*v*d),E=new Float32Array(g*v*d);for(let I=0;I<d;I++){const F=I%3*2/3-1,R=I>2?0:-1,k=[F,R,0,F+2/3,R,0,F+2/3,R+1,0,F,R,0,F+2/3,R+1,0,F,R+1,0];S.set(k,y*v*I),_.set(f,x*v*I);const L=[I,I,I,I,I,I];E.set(L,g*v*I)}const C=new Rn;C.setAttribute("position",new Mr(S,y)),C.setAttribute("uv",new Mr(_,x)),C.setAttribute("faceIndex",new Mr(E,g)),e.push(C),i>Em&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function JC(n,e,t){const r=new jl(n,e,t);return r.texture.mapping=wg,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Gy(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function lW(n,e,t){const r=new Float32Array(cd),i=new ye(0,1,0);return new ql({name:"SphericalGaussianBlur",defines:{n:cd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:j3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Lc,depthTest:!1,depthWrite:!1})}function QC(){return new ql({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:j3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Lc,depthTest:!1,depthWrite:!1})}function eP(){return new ql({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:j3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Lc,depthTest:!1,depthWrite:!1})}function j3(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function uW(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===ng||l===Pv,c=l===Du||l===uf;if(u||c)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return t===null&&(t=new EM(n)),h=u?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(u&&h&&h.height>0||c&&h&&i(h)){t===null&&(t=new EM(n));const f=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,f),a.addEventListener("dispose",o),f.texture}else return null}}}return a}function i(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function o(a){const l=a.target;l.removeEventListener("dispose",o);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:s}}function cW(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function hW(n,e,t,r){const i={},o=new WeakMap;function s(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const v in f.attributes)e.remove(f.attributes[v]);for(const v in f.morphAttributes){const y=f.morphAttributes[v];for(let x=0,g=y.length;x<g;x++)e.remove(y[x])}f.removeEventListener("dispose",s),delete i[f.id];const d=o.get(f);d&&(e.remove(d),o.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(h,f){return i[f.id]===!0||(f.addEventListener("dispose",s),i[f.id]=!0,t.memory.geometries++),f}function l(h){const f=h.attributes;for(const v in f)e.update(f[v],n.ARRAY_BUFFER);const d=h.morphAttributes;for(const v in d){const y=d[v];for(let x=0,g=y.length;x<g;x++)e.update(y[x],n.ARRAY_BUFFER)}}function u(h){const f=[],d=h.index,v=h.attributes.position;let y=0;if(d!==null){const S=d.array;y=d.version;for(let _=0,E=S.length;_<E;_+=3){const C=S[_+0],I=S[_+1],F=S[_+2];f.push(C,I,I,F,F,C)}}else if(v!==void 0){const S=v.array;y=v.version;for(let _=0,E=S.length/3-1;_<E;_+=3){const C=_+0,I=_+1,F=_+2;f.push(C,I,I,F,F,C)}}else return;const x=new(aF(f)?V3:G3)(f,1);x.version=y;const g=o.get(h);g&&e.remove(g),o.set(h,x)}function c(h){const f=o.get(h);if(f){const d=h.index;d!==null&&f.version<d.version&&u(h)}else u(h);return o.get(h)}return{get:a,update:l,getWireframeAttribute:c}}function fW(n,e,t,r){const i=r.isWebGL2;let o;function s(f){o=f}let a,l;function u(f){a=f.type,l=f.bytesPerElement}function c(f,d){n.drawElements(o,d,a,f*l),t.update(d,o,1)}function h(f,d,v){if(v===0)return;let y,x;if(i)y=n,x="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),x="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[x](o,d,a,f*l,v),t.update(d,o,v)}this.setMode=s,this.setIndex=u,this.render=c,this.renderInstances=h}function dW(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,s,a){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=a*(o/3);break;case n.LINES:t.lines+=a*(o/2);break;case n.LINE_STRIP:t.lines+=a*(o-1);break;case n.LINE_LOOP:t.lines+=a*o;break;case n.POINTS:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function pW(n,e){return n[0]-e[0]}function mW(n,e){return Math.abs(e[1])-Math.abs(n[1])}function gW(n,e,t){const r={},i=new Float32Array(8),o=new WeakMap,s=new Or,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,c,h){const f=u.morphTargetInfluences;if(e.isWebGL2===!0){const d=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,v=d!==void 0?d.length:0;let y=o.get(c);if(y===void 0||y.count!==v){let G=function(){z.dispose(),o.delete(c),c.removeEventListener("dispose",G)};y!==void 0&&y.texture.dispose();const S=c.morphAttributes.position!==void 0,_=c.morphAttributes.normal!==void 0,E=c.morphAttributes.color!==void 0,C=c.morphAttributes.position||[],I=c.morphAttributes.normal||[],F=c.morphAttributes.color||[];let R=0;S===!0&&(R=1),_===!0&&(R=2),E===!0&&(R=3);let k=c.attributes.position.count*R,L=1;k>e.maxTextureSize&&(L=Math.ceil(k/e.maxTextureSize),k=e.maxTextureSize);const N=new Float32Array(k*L*4*v),z=new zw(N,k,L,v);z.type=vs,z.needsUpdate=!0;const H=R*4;for(let K=0;K<v;K++){const ee=C[K],le=I[K],V=F[K],J=k*L*4*K;for(let j=0;j<ee.count;j++){const ie=j*H;S===!0&&(s.fromBufferAttribute(ee,j),N[J+ie+0]=s.x,N[J+ie+1]=s.y,N[J+ie+2]=s.z,N[J+ie+3]=0),_===!0&&(s.fromBufferAttribute(le,j),N[J+ie+4]=s.x,N[J+ie+5]=s.y,N[J+ie+6]=s.z,N[J+ie+7]=0),E===!0&&(s.fromBufferAttribute(V,j),N[J+ie+8]=s.x,N[J+ie+9]=s.y,N[J+ie+10]=s.z,N[J+ie+11]=V.itemSize===4?s.w:1)}}y={count:v,texture:z,size:new xt(k,L)},o.set(c,y),c.addEventListener("dispose",G)}let x=0;for(let S=0;S<f.length;S++)x+=f[S];const g=c.morphTargetsRelative?1:1-x;h.getUniforms().setValue(n,"morphTargetBaseInfluence",g),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",y.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}else{const d=f===void 0?0:f.length;let v=r[c.id];if(v===void 0||v.length!==d){v=[];for(let _=0;_<d;_++)v[_]=[_,0];r[c.id]=v}for(let _=0;_<d;_++){const E=v[_];E[0]=_,E[1]=f[_]}v.sort(mW);for(let _=0;_<8;_++)_<d&&v[_][1]?(a[_][0]=v[_][0],a[_][1]=v[_][1]):(a[_][0]=Number.MAX_SAFE_INTEGER,a[_][1]=0);a.sort(pW);const y=c.morphAttributes.position,x=c.morphAttributes.normal;let g=0;for(let _=0;_<8;_++){const E=a[_],C=E[0],I=E[1];C!==Number.MAX_SAFE_INTEGER&&I?(y&&c.getAttribute("morphTarget"+_)!==y[C]&&c.setAttribute("morphTarget"+_,y[C]),x&&c.getAttribute("morphNormal"+_)!==x[C]&&c.setAttribute("morphNormal"+_,x[C]),i[_]=I,g+=I):(y&&c.hasAttribute("morphTarget"+_)===!0&&c.deleteAttribute("morphTarget"+_),x&&c.hasAttribute("morphNormal"+_)===!0&&c.deleteAttribute("morphNormal"+_),i[_]=0)}const S=c.morphTargetsRelative?1:1-g;h.getUniforms().setValue(n,"morphTargetBaseInfluence",S),h.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function vW(n,e,t,r){let i=new WeakMap;function o(l){const u=r.render.frame,c=l.geometry,h=e.get(l,c);if(i.get(h)!==u&&(e.update(h),i.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==u&&(f.update(),i.set(f,u))}return h}function s(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:o,dispose:s}}const pF=new Di,mF=new zw,gF=new H3,vF=new g1,tP=[],nP=[],rP=new Float32Array(16),iP=new Float32Array(9),oP=new Float32Array(4);function Sg(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let o=tP[i];if(o===void 0&&(o=new Float32Array(i),tP[i]=o),e!==0){r.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function wo(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function So(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function Gw(n,e){let t=nP[e];t===void 0&&(t=new Int32Array(e),nP[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function yW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function xW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(wo(t,e))return;n.uniform2fv(this.addr,e),So(t,e)}}function wW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(wo(t,e))return;n.uniform3fv(this.addr,e),So(t,e)}}function SW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(wo(t,e))return;n.uniform4fv(this.addr,e),So(t,e)}}function _W(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(wo(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),So(t,e)}else{if(wo(t,r))return;oP.set(r),n.uniformMatrix2fv(this.addr,!1,oP),So(t,r)}}function bW(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(wo(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),So(t,e)}else{if(wo(t,r))return;iP.set(r),n.uniformMatrix3fv(this.addr,!1,iP),So(t,r)}}function MW(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(wo(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),So(t,e)}else{if(wo(t,r))return;rP.set(r),n.uniformMatrix4fv(this.addr,!1,rP),So(t,r)}}function EW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function AW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(wo(t,e))return;n.uniform2iv(this.addr,e),So(t,e)}}function TW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(wo(t,e))return;n.uniform3iv(this.addr,e),So(t,e)}}function CW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(wo(t,e))return;n.uniform4iv(this.addr,e),So(t,e)}}function PW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function RW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(wo(t,e))return;n.uniform2uiv(this.addr,e),So(t,e)}}function LW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(wo(t,e))return;n.uniform3uiv(this.addr,e),So(t,e)}}function kW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(wo(t,e))return;n.uniform4uiv(this.addr,e),So(t,e)}}function IW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||pF,i)}function NW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||gF,i)}function FW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||vF,i)}function DW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||mF,i)}function OW(n){switch(n){case 5126:return yW;case 35664:return xW;case 35665:return wW;case 35666:return SW;case 35674:return _W;case 35675:return bW;case 35676:return MW;case 5124:case 35670:return EW;case 35667:case 35671:return AW;case 35668:case 35672:return TW;case 35669:case 35673:return CW;case 5125:return PW;case 36294:return RW;case 36295:return LW;case 36296:return kW;case 35678:case 36198:case 36298:case 36306:case 35682:return IW;case 35679:case 36299:case 36307:return NW;case 35680:case 36300:case 36308:case 36293:return FW;case 36289:case 36303:case 36311:case 36292:return DW}}function BW(n,e){n.uniform1fv(this.addr,e)}function UW(n,e){const t=Sg(e,this.size,2);n.uniform2fv(this.addr,t)}function zW(n,e){const t=Sg(e,this.size,3);n.uniform3fv(this.addr,t)}function HW(n,e){const t=Sg(e,this.size,4);n.uniform4fv(this.addr,t)}function GW(n,e){const t=Sg(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function VW(n,e){const t=Sg(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function WW(n,e){const t=Sg(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function jW(n,e){n.uniform1iv(this.addr,e)}function qW(n,e){n.uniform2iv(this.addr,e)}function $W(n,e){n.uniform3iv(this.addr,e)}function XW(n,e){n.uniform4iv(this.addr,e)}function YW(n,e){n.uniform1uiv(this.addr,e)}function ZW(n,e){n.uniform2uiv(this.addr,e)}function KW(n,e){n.uniform3uiv(this.addr,e)}function JW(n,e){n.uniform4uiv(this.addr,e)}function QW(n,e,t){const r=this.cache,i=e.length,o=Gw(t,i);wo(r,o)||(n.uniform1iv(this.addr,o),So(r,o));for(let s=0;s!==i;++s)t.setTexture2D(e[s]||pF,o[s])}function ej(n,e,t){const r=this.cache,i=e.length,o=Gw(t,i);wo(r,o)||(n.uniform1iv(this.addr,o),So(r,o));for(let s=0;s!==i;++s)t.setTexture3D(e[s]||gF,o[s])}function tj(n,e,t){const r=this.cache,i=e.length,o=Gw(t,i);wo(r,o)||(n.uniform1iv(this.addr,o),So(r,o));for(let s=0;s!==i;++s)t.setTextureCube(e[s]||vF,o[s])}function nj(n,e,t){const r=this.cache,i=e.length,o=Gw(t,i);wo(r,o)||(n.uniform1iv(this.addr,o),So(r,o));for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||mF,o[s])}function rj(n){switch(n){case 5126:return BW;case 35664:return UW;case 35665:return zW;case 35666:return HW;case 35674:return GW;case 35675:return VW;case 35676:return WW;case 5124:case 35670:return jW;case 35667:case 35671:return qW;case 35668:case 35672:return $W;case 35669:case 35673:return XW;case 5125:return YW;case 36294:return ZW;case 36295:return KW;case 36296:return JW;case 35678:case 36198:case 36298:case 36306:case 35682:return QW;case 35679:case 36299:case 36307:return ej;case 35680:case 36300:case 36308:case 36293:return tj;case 36289:case 36303:case 36311:case 36292:return nj}}class ij{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=OW(t.type)}}class oj{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=rj(t.type)}}class sj{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let o=0,s=i.length;o!==s;++o){const a=i[o];a.setValue(e,t[a.id],r)}}}const O_=/(\w+)(\])?(\[|\.)?/g;function sP(n,e){n.seq.push(e),n.map[e.id]=e}function aj(n,e,t){const r=n.name,i=r.length;for(O_.lastIndex=0;;){const o=O_.exec(r),s=O_.lastIndex;let a=o[1];const l=o[2]==="]",u=o[3];if(l&&(a=a|0),u===void 0||u==="["&&s+2===i){sP(t,u===void 0?new ij(a,n,e):new oj(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new sj(a),sP(t,h)),t=h}}}class tx{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(t,i),s=e.getUniformLocation(t,o.name);aj(o,s,this)}}setValue(e,t,r,i){const o=this.map[t];o!==void 0&&o.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let o=0,s=t.length;o!==s;++o){const a=t[o],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,o=e.length;i!==o;++i){const s=e[i];s.id in t&&r.push(s)}return r}}function aP(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let lj=0;function uj(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=i;s<o;s++){const a=s+1;r.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return r.join(`
`)}function cj(n){switch(n){case Wl:return["Linear","( value )"];case Hn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function lP(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const s=parseInt(o[1]);return t.toUpperCase()+`

`+i+`

`+uj(n.getShaderSource(e),s)}else return i}function hj(n,e){const t=cj(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function fj(n,e){let t;switch(e){case IN:t="Linear";break;case NN:t="Reinhard";break;case FN:t="OptimizedCineon";break;case T3:t="ACESFilmic";break;case DN:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function dj(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(k0).join(`
`)}function pj(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function mj(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=n.getActiveAttrib(e,i),s=o.name;let a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}function k0(n){return n!==""}function uP(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function cP(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const gj=/^[ \t]*#include +<([\w\d./]+)>/gm;function AM(n){return n.replace(gj,yj)}const vj=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function yj(n,e){let t=jn[e];if(t===void 0){const r=vj.get(e);if(r!==void 0)t=jn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return AM(t)}const xj=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function hP(n){return n.replace(xj,wj)}function wj(n,e,t,r){let i="";for(let o=parseInt(e);o<parseInt(t);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function fP(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Sj(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Dw?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===q0?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Ll&&(e="SHADOWMAP_TYPE_VSM"),e}function _j(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Du:case uf:e="ENVMAP_TYPE_CUBE";break;case wg:e="ENVMAP_TYPE_CUBE_UV";break}return e}function bj(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case uf:e="ENVMAP_MODE_REFRACTION";break}return e}function Mj(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case d1:e="ENVMAP_BLENDING_MULTIPLY";break;case LN:e="ENVMAP_BLENDING_MIX";break;case kN:e="ENVMAP_BLENDING_ADD";break}return e}function Ej(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function Aj(n,e,t,r){const i=n.getContext(),o=t.defines;let s=t.vertexShader,a=t.fragmentShader;const l=Sj(t),u=_j(t),c=bj(t),h=Mj(t),f=Ej(t),d=t.isWebGL2?"":dj(t),v=pj(o),y=i.createProgram();let x,g,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(k0).join(`
`),x.length>0&&(x+=`
`),g=[d,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(k0).join(`
`),g.length>0&&(g+=`
`)):(x=[fP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(k0).join(`
`),g=[d,fP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ru?"#define TONE_MAPPING":"",t.toneMapping!==Ru?jn.tonemapping_pars_fragment:"",t.toneMapping!==Ru?fj("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",jn.colorspace_pars_fragment,hj("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(k0).join(`
`)),s=AM(s),s=uP(s,t),s=cP(s,t),a=AM(a),a=uP(a,t),a=cP(a,t),s=hP(s),a=hP(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,x=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,g=["#define varying in",t.glslVersion===bM?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===bM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const _=S+x+s,E=S+g+a,C=aP(i,i.VERTEX_SHADER,_),I=aP(i,i.FRAGMENT_SHADER,E);if(i.attachShader(y,C),i.attachShader(y,I),t.index0AttributeName!==void 0?i.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),n.debug.checkShaderErrors){const k=i.getProgramInfoLog(y).trim(),L=i.getShaderInfoLog(C).trim(),N=i.getShaderInfoLog(I).trim();let z=!0,H=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(z=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,y,C,I);else{const G=lP(i,C,"vertex"),K=lP(i,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Program Info Log: `+k+`
`+G+`
`+K)}else k!==""?console.warn("THREE.WebGLProgram: Program Info Log:",k):(L===""||N==="")&&(H=!1);H&&(this.diagnostics={runnable:z,programLog:k,vertexShader:{log:L,prefix:x},fragmentShader:{log:N,prefix:g}})}i.deleteShader(C),i.deleteShader(I);let F;this.getUniforms=function(){return F===void 0&&(F=new tx(i,y)),F};let R;return this.getAttributes=function(){return R===void 0&&(R=mj(i,y)),R},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=lj++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=C,this.fragmentShader=I,this}let Tj=0;class Cj{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),o=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new Pj(e),t.set(e,r)),r}}class Pj{constructor(e){this.id=Tj++,this.code=e,this.usedTimes=0}}function Rj(n,e,t,r,i,o,s){const a=new Cd,l=new Cj,u=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,f=i.vertexTextures;let d=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(k){return k===0?"uv":`uv${k}`}function x(k,L,N,z,H){const G=z.fog,K=H.geometry,ee=k.isMeshStandardMaterial?z.environment:null,le=(k.isMeshStandardMaterial?t:e).get(k.envMap||ee),V=le&&le.mapping===wg?le.image.height:null,J=v[k.type];k.precision!==null&&(d=i.getMaxPrecision(k.precision),d!==k.precision&&console.warn("THREE.WebGLProgram.getParameters:",k.precision,"not supported, using",d,"instead."));const j=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,ie=j!==void 0?j.length:0;let D=0;K.morphAttributes.position!==void 0&&(D=1),K.morphAttributes.normal!==void 0&&(D=2),K.morphAttributes.color!==void 0&&(D=3);let q,Z,Q,se;if(J){const wn=Fl[J];q=wn.vertexShader,Z=wn.fragmentShader}else q=k.vertexShader,Z=k.fragmentShader,l.update(k),Q=l.getVertexShaderID(k),se=l.getFragmentShaderID(k);const me=n.getRenderTarget(),Se=H.isInstancedMesh===!0,Ce=!!k.map,$e=!!k.matcap,ke=!!le,fe=!!k.aoMap,Ie=!!k.lightMap,Ue=!!k.bumpMap,Te=!!k.normalMap,ae=!!k.displacementMap,gt=!!k.emissiveMap,Ye=!!k.metalnessMap,Ge=!!k.roughnessMap,et=k.anisotropy>0,vt=k.clearcoat>0,bt=k.iridescence>0,pe=k.sheen>0,te=k.transmission>0,Ne=et&&!!k.anisotropyMap,st=vt&&!!k.clearcoatMap,rt=vt&&!!k.clearcoatNormalMap,pt=vt&&!!k.clearcoatRoughnessMap,wt=bt&&!!k.iridescenceMap,ut=bt&&!!k.iridescenceThicknessMap,Pe=pe&&!!k.sheenColorMap,Ht=pe&&!!k.sheenRoughnessMap,Pt=!!k.specularMap,Dt=!!k.specularColorMap,Tt=!!k.specularIntensityMap,be=te&&!!k.transmissionMap,Ke=te&&!!k.thicknessMap,ct=!!k.gradientMap,Ae=!!k.alphaMap,Oe=k.alphaTest>0,Ve=!!k.alphaHash,At=!!k.extensions,Ct=!!K.attributes.uv1,Nt=!!K.attributes.uv2,Xt=!!K.attributes.uv3;let kn=Ru;return k.toneMapped&&(me===null||me.isXRRenderTarget===!0)&&(kn=n.toneMapping),{isWebGL2:c,shaderID:J,shaderType:k.type,shaderName:k.name,vertexShader:q,fragmentShader:Z,defines:k.defines,customVertexShaderID:Q,customFragmentShaderID:se,isRawShaderMaterial:k.isRawShaderMaterial===!0,glslVersion:k.glslVersion,precision:d,instancing:Se,instancingColor:Se&&H.instanceColor!==null,supportsVertexTextures:f,outputColorSpace:me===null?n.outputColorSpace:me.isXRRenderTarget===!0?me.texture.colorSpace:Wl,map:Ce,matcap:$e,envMap:ke,envMapMode:ke&&le.mapping,envMapCubeUVHeight:V,aoMap:fe,lightMap:Ie,bumpMap:Ue,normalMap:Te,displacementMap:f&&ae,emissiveMap:gt,normalMapObjectSpace:Te&&k.normalMapType===ZN,normalMapTangentSpace:Te&&k.normalMapType===Sf,metalnessMap:Ye,roughnessMap:Ge,anisotropy:et,anisotropyMap:Ne,clearcoat:vt,clearcoatMap:st,clearcoatNormalMap:rt,clearcoatRoughnessMap:pt,iridescence:bt,iridescenceMap:wt,iridescenceThicknessMap:ut,sheen:pe,sheenColorMap:Pe,sheenRoughnessMap:Ht,specularMap:Pt,specularColorMap:Dt,specularIntensityMap:Tt,transmission:te,transmissionMap:be,thicknessMap:Ke,gradientMap:ct,opaque:k.transparent===!1&&k.blending===Ad,alphaMap:Ae,alphaTest:Oe,alphaHash:Ve,combine:k.combine,mapUv:Ce&&y(k.map.channel),aoMapUv:fe&&y(k.aoMap.channel),lightMapUv:Ie&&y(k.lightMap.channel),bumpMapUv:Ue&&y(k.bumpMap.channel),normalMapUv:Te&&y(k.normalMap.channel),displacementMapUv:ae&&y(k.displacementMap.channel),emissiveMapUv:gt&&y(k.emissiveMap.channel),metalnessMapUv:Ye&&y(k.metalnessMap.channel),roughnessMapUv:Ge&&y(k.roughnessMap.channel),anisotropyMapUv:Ne&&y(k.anisotropyMap.channel),clearcoatMapUv:st&&y(k.clearcoatMap.channel),clearcoatNormalMapUv:rt&&y(k.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:pt&&y(k.clearcoatRoughnessMap.channel),iridescenceMapUv:wt&&y(k.iridescenceMap.channel),iridescenceThicknessMapUv:ut&&y(k.iridescenceThicknessMap.channel),sheenColorMapUv:Pe&&y(k.sheenColorMap.channel),sheenRoughnessMapUv:Ht&&y(k.sheenRoughnessMap.channel),specularMapUv:Pt&&y(k.specularMap.channel),specularColorMapUv:Dt&&y(k.specularColorMap.channel),specularIntensityMapUv:Tt&&y(k.specularIntensityMap.channel),transmissionMapUv:be&&y(k.transmissionMap.channel),thicknessMapUv:Ke&&y(k.thicknessMap.channel),alphaMapUv:Ae&&y(k.alphaMap.channel),vertexTangents:!!K.attributes.tangent&&(Te||et),vertexColors:k.vertexColors,vertexAlphas:k.vertexColors===!0&&!!K.attributes.color&&K.attributes.color.itemSize===4,vertexUv1s:Ct,vertexUv2s:Nt,vertexUv3s:Xt,pointsUvs:H.isPoints===!0&&!!K.attributes.uv&&(Ce||Ae),fog:!!G,useFog:k.fog===!0,fogExp2:G&&G.isFogExp2,flatShading:k.flatShading===!0,sizeAttenuation:k.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:H.isSkinnedMesh===!0,morphTargets:K.morphAttributes.position!==void 0,morphNormals:K.morphAttributes.normal!==void 0,morphColors:K.morphAttributes.color!==void 0,morphTargetsCount:ie,morphTextureStride:D,numDirLights:L.directional.length,numPointLights:L.point.length,numSpotLights:L.spot.length,numSpotLightMaps:L.spotLightMap.length,numRectAreaLights:L.rectArea.length,numHemiLights:L.hemi.length,numDirLightShadows:L.directionalShadowMap.length,numPointLightShadows:L.pointShadowMap.length,numSpotLightShadows:L.spotShadowMap.length,numSpotLightShadowsWithMaps:L.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:k.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:kn,useLegacyLights:n._useLegacyLights,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===Ol,flipSided:k.side===Ns,useDepthPacking:k.depthPacking>=0,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionDerivatives:At&&k.extensions.derivatives===!0,extensionFragDepth:At&&k.extensions.fragDepth===!0,extensionDrawBuffers:At&&k.extensions.drawBuffers===!0,extensionShaderTextureLOD:At&&k.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:k.customProgramCacheKey()}}function g(k){const L=[];if(k.shaderID?L.push(k.shaderID):(L.push(k.customVertexShaderID),L.push(k.customFragmentShaderID)),k.defines!==void 0)for(const N in k.defines)L.push(N),L.push(k.defines[N]);return k.isRawShaderMaterial===!1&&(S(L,k),_(L,k),L.push(n.outputColorSpace)),L.push(k.customProgramCacheKey),L.join()}function S(k,L){k.push(L.precision),k.push(L.outputColorSpace),k.push(L.envMapMode),k.push(L.envMapCubeUVHeight),k.push(L.mapUv),k.push(L.alphaMapUv),k.push(L.lightMapUv),k.push(L.aoMapUv),k.push(L.bumpMapUv),k.push(L.normalMapUv),k.push(L.displacementMapUv),k.push(L.emissiveMapUv),k.push(L.metalnessMapUv),k.push(L.roughnessMapUv),k.push(L.anisotropyMapUv),k.push(L.clearcoatMapUv),k.push(L.clearcoatNormalMapUv),k.push(L.clearcoatRoughnessMapUv),k.push(L.iridescenceMapUv),k.push(L.iridescenceThicknessMapUv),k.push(L.sheenColorMapUv),k.push(L.sheenRoughnessMapUv),k.push(L.specularMapUv),k.push(L.specularColorMapUv),k.push(L.specularIntensityMapUv),k.push(L.transmissionMapUv),k.push(L.thicknessMapUv),k.push(L.combine),k.push(L.fogExp2),k.push(L.sizeAttenuation),k.push(L.morphTargetsCount),k.push(L.morphAttributeCount),k.push(L.numDirLights),k.push(L.numPointLights),k.push(L.numSpotLights),k.push(L.numSpotLightMaps),k.push(L.numHemiLights),k.push(L.numRectAreaLights),k.push(L.numDirLightShadows),k.push(L.numPointLightShadows),k.push(L.numSpotLightShadows),k.push(L.numSpotLightShadowsWithMaps),k.push(L.shadowMapType),k.push(L.toneMapping),k.push(L.numClippingPlanes),k.push(L.numClipIntersection),k.push(L.depthPacking)}function _(k,L){a.disableAll(),L.isWebGL2&&a.enable(0),L.supportsVertexTextures&&a.enable(1),L.instancing&&a.enable(2),L.instancingColor&&a.enable(3),L.matcap&&a.enable(4),L.envMap&&a.enable(5),L.normalMapObjectSpace&&a.enable(6),L.normalMapTangentSpace&&a.enable(7),L.clearcoat&&a.enable(8),L.iridescence&&a.enable(9),L.alphaTest&&a.enable(10),L.vertexColors&&a.enable(11),L.vertexAlphas&&a.enable(12),L.vertexUv1s&&a.enable(13),L.vertexUv2s&&a.enable(14),L.vertexUv3s&&a.enable(15),L.vertexTangents&&a.enable(16),L.anisotropy&&a.enable(17),k.push(a.mask),a.disableAll(),L.fog&&a.enable(0),L.useFog&&a.enable(1),L.flatShading&&a.enable(2),L.logarithmicDepthBuffer&&a.enable(3),L.skinning&&a.enable(4),L.morphTargets&&a.enable(5),L.morphNormals&&a.enable(6),L.morphColors&&a.enable(7),L.premultipliedAlpha&&a.enable(8),L.shadowMapEnabled&&a.enable(9),L.useLegacyLights&&a.enable(10),L.doubleSided&&a.enable(11),L.flipSided&&a.enable(12),L.useDepthPacking&&a.enable(13),L.dithering&&a.enable(14),L.transmission&&a.enable(15),L.sheen&&a.enable(16),L.opaque&&a.enable(17),L.pointsUvs&&a.enable(18),k.push(a.mask)}function E(k){const L=v[k.type];let N;if(L){const z=Fl[L];N=hF.clone(z.uniforms)}else N=k.uniforms;return N}function C(k,L){let N;for(let z=0,H=u.length;z<H;z++){const G=u[z];if(G.cacheKey===L){N=G,++N.usedTimes;break}}return N===void 0&&(N=new Aj(n,L,k,o),u.push(N)),N}function I(k){if(--k.usedTimes===0){const L=u.indexOf(k);u[L]=u[u.length-1],u.pop(),k.destroy()}}function F(k){l.remove(k)}function R(){l.dispose()}return{getParameters:x,getProgramCacheKey:g,getUniforms:E,acquireProgram:C,releaseProgram:I,releaseShaderCache:F,programs:u,dispose:R}}function Lj(){let n=new WeakMap;function e(o){let s=n.get(o);return s===void 0&&(s={},n.set(o,s)),s}function t(o){n.delete(o)}function r(o,s,a){n.get(o)[s]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function kj(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function dP(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function pP(){const n=[];let e=0;const t=[],r=[],i=[];function o(){e=0,t.length=0,r.length=0,i.length=0}function s(h,f,d,v,y,x){let g=n[e];return g===void 0?(g={id:h.id,object:h,geometry:f,material:d,groupOrder:v,renderOrder:h.renderOrder,z:y,group:x},n[e]=g):(g.id=h.id,g.object=h,g.geometry=f,g.material=d,g.groupOrder=v,g.renderOrder=h.renderOrder,g.z=y,g.group=x),e++,g}function a(h,f,d,v,y,x){const g=s(h,f,d,v,y,x);d.transmission>0?r.push(g):d.transparent===!0?i.push(g):t.push(g)}function l(h,f,d,v,y,x){const g=s(h,f,d,v,y,x);d.transmission>0?r.unshift(g):d.transparent===!0?i.unshift(g):t.unshift(g)}function u(h,f){t.length>1&&t.sort(h||kj),r.length>1&&r.sort(f||dP),i.length>1&&i.sort(f||dP)}function c(){for(let h=e,f=n.length;h<f;h++){const d=n[h];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:t,transmissive:r,transparent:i,init:o,push:a,unshift:l,finish:c,sort:u}}function Ij(){let n=new WeakMap;function e(r,i){const o=n.get(r);let s;return o===void 0?(s=new pP,n.set(r,[s])):i>=o.length?(s=new pP,o.push(s)):s=o[i],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function Nj(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ye,color:new Kt};break;case"SpotLight":t={position:new ye,direction:new ye,color:new Kt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ye,color:new Kt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ye,skyColor:new Kt,groundColor:new Kt};break;case"RectAreaLight":t={color:new Kt,position:new ye,halfWidth:new ye,halfHeight:new ye};break}return n[e.id]=t,t}}}function Fj(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new xt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Dj=0;function Oj(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Bj(n,e){const t=new Nj,r=Fj(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)i.probe.push(new ye);const o=new ye,s=new zn,a=new zn;function l(c,h){let f=0,d=0,v=0;for(let N=0;N<9;N++)i.probe[N].set(0,0,0);let y=0,x=0,g=0,S=0,_=0,E=0,C=0,I=0,F=0,R=0;c.sort(Oj);const k=h===!0?Math.PI:1;for(let N=0,z=c.length;N<z;N++){const H=c[N],G=H.color,K=H.intensity,ee=H.distance,le=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)f+=G.r*K*k,d+=G.g*K*k,v+=G.b*K*k;else if(H.isLightProbe)for(let V=0;V<9;V++)i.probe[V].addScaledVector(H.sh.coefficients[V],K);else if(H.isDirectionalLight){const V=t.get(H);if(V.color.copy(H.color).multiplyScalar(H.intensity*k),H.castShadow){const J=H.shadow,j=r.get(H);j.shadowBias=J.bias,j.shadowNormalBias=J.normalBias,j.shadowRadius=J.radius,j.shadowMapSize=J.mapSize,i.directionalShadow[y]=j,i.directionalShadowMap[y]=le,i.directionalShadowMatrix[y]=H.shadow.matrix,E++}i.directional[y]=V,y++}else if(H.isSpotLight){const V=t.get(H);V.position.setFromMatrixPosition(H.matrixWorld),V.color.copy(G).multiplyScalar(K*k),V.distance=ee,V.coneCos=Math.cos(H.angle),V.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),V.decay=H.decay,i.spot[g]=V;const J=H.shadow;if(H.map&&(i.spotLightMap[F]=H.map,F++,J.updateMatrices(H),H.castShadow&&R++),i.spotLightMatrix[g]=J.matrix,H.castShadow){const j=r.get(H);j.shadowBias=J.bias,j.shadowNormalBias=J.normalBias,j.shadowRadius=J.radius,j.shadowMapSize=J.mapSize,i.spotShadow[g]=j,i.spotShadowMap[g]=le,I++}g++}else if(H.isRectAreaLight){const V=t.get(H);V.color.copy(G).multiplyScalar(K),V.halfWidth.set(H.width*.5,0,0),V.halfHeight.set(0,H.height*.5,0),i.rectArea[S]=V,S++}else if(H.isPointLight){const V=t.get(H);if(V.color.copy(H.color).multiplyScalar(H.intensity*k),V.distance=H.distance,V.decay=H.decay,H.castShadow){const J=H.shadow,j=r.get(H);j.shadowBias=J.bias,j.shadowNormalBias=J.normalBias,j.shadowRadius=J.radius,j.shadowMapSize=J.mapSize,j.shadowCameraNear=J.camera.near,j.shadowCameraFar=J.camera.far,i.pointShadow[x]=j,i.pointShadowMap[x]=le,i.pointShadowMatrix[x]=H.shadow.matrix,C++}i.point[x]=V,x++}else if(H.isHemisphereLight){const V=t.get(H);V.skyColor.copy(H.color).multiplyScalar(K*k),V.groundColor.copy(H.groundColor).multiplyScalar(K*k),i.hemi[_]=V,_++}}S>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Vt.LTC_FLOAT_1,i.rectAreaLTC2=Vt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Vt.LTC_HALF_1,i.rectAreaLTC2=Vt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=f,i.ambient[1]=d,i.ambient[2]=v;const L=i.hash;(L.directionalLength!==y||L.pointLength!==x||L.spotLength!==g||L.rectAreaLength!==S||L.hemiLength!==_||L.numDirectionalShadows!==E||L.numPointShadows!==C||L.numSpotShadows!==I||L.numSpotMaps!==F)&&(i.directional.length=y,i.spot.length=g,i.rectArea.length=S,i.point.length=x,i.hemi.length=_,i.directionalShadow.length=E,i.directionalShadowMap.length=E,i.pointShadow.length=C,i.pointShadowMap.length=C,i.spotShadow.length=I,i.spotShadowMap.length=I,i.directionalShadowMatrix.length=E,i.pointShadowMatrix.length=C,i.spotLightMatrix.length=I+F-R,i.spotLightMap.length=F,i.numSpotLightShadowsWithMaps=R,L.directionalLength=y,L.pointLength=x,L.spotLength=g,L.rectAreaLength=S,L.hemiLength=_,L.numDirectionalShadows=E,L.numPointShadows=C,L.numSpotShadows=I,L.numSpotMaps=F,i.version=Dj++)}function u(c,h){let f=0,d=0,v=0,y=0,x=0;const g=h.matrixWorldInverse;for(let S=0,_=c.length;S<_;S++){const E=c[S];if(E.isDirectionalLight){const C=i.directional[f];C.direction.setFromMatrixPosition(E.matrixWorld),o.setFromMatrixPosition(E.target.matrixWorld),C.direction.sub(o),C.direction.transformDirection(g),f++}else if(E.isSpotLight){const C=i.spot[v];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(g),C.direction.setFromMatrixPosition(E.matrixWorld),o.setFromMatrixPosition(E.target.matrixWorld),C.direction.sub(o),C.direction.transformDirection(g),v++}else if(E.isRectAreaLight){const C=i.rectArea[y];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(g),a.identity(),s.copy(E.matrixWorld),s.premultiply(g),a.extractRotation(s),C.halfWidth.set(E.width*.5,0,0),C.halfHeight.set(0,E.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),y++}else if(E.isPointLight){const C=i.point[d];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(g),d++}else if(E.isHemisphereLight){const C=i.hemi[x];C.direction.setFromMatrixPosition(E.matrixWorld),C.direction.transformDirection(g),x++}}}return{setup:l,setupView:u,state:i}}function mP(n,e){const t=new Bj(n,e),r=[],i=[];function o(){r.length=0,i.length=0}function s(h){r.push(h)}function a(h){i.push(h)}function l(h){t.setup(r,h)}function u(h){t.setupView(r,h)}return{init:o,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:s,pushShadow:a}}function Uj(n,e){let t=new WeakMap;function r(o,s=0){const a=t.get(o);let l;return a===void 0?(l=new mP(n,e),t.set(o,[l])):s>=a.length?(l=new mP(n,e),a.push(l)):l=a[s],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class q3 extends Ko{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=XN,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class $3 extends Ko{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const zj=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Hj=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Gj(n,e,t){let r=new Hw;const i=new xt,o=new xt,s=new Or,a=new q3({depthPacking:YN}),l=new $3,u={},c=t.maxTextureSize,h={[Bc]:Ns,[Ns]:Bc,[Ol]:Ol},f=new ql({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new xt},radius:{value:4}},vertexShader:zj,fragmentShader:Hj}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const v=new Rn;v.setAttribute("position",new Mr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new xo(v,f),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Dw;let g=this.type;this.render=function(C,I,F){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||C.length===0)return;const R=n.getRenderTarget(),k=n.getActiveCubeFace(),L=n.getActiveMipmapLevel(),N=n.state;N.setBlending(Lc),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);const z=g!==Ll&&this.type===Ll,H=g===Ll&&this.type!==Ll;for(let G=0,K=C.length;G<K;G++){const ee=C[G],le=ee.shadow;if(le===void 0){console.warn("THREE.WebGLShadowMap:",ee,"has no shadow.");continue}if(le.autoUpdate===!1&&le.needsUpdate===!1)continue;i.copy(le.mapSize);const V=le.getFrameExtents();if(i.multiply(V),o.copy(le.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(o.x=Math.floor(c/V.x),i.x=o.x*V.x,le.mapSize.x=o.x),i.y>c&&(o.y=Math.floor(c/V.y),i.y=o.y*V.y,le.mapSize.y=o.y)),le.map===null||z===!0||H===!0){const j=this.type!==Ll?{minFilter:Wi,magFilter:Wi}:{};le.map!==null&&le.map.dispose(),le.map=new jl(i.x,i.y,j),le.map.texture.name=ee.name+".shadowMap",le.camera.updateProjectionMatrix()}n.setRenderTarget(le.map),n.clear();const J=le.getViewportCount();for(let j=0;j<J;j++){const ie=le.getViewport(j);s.set(o.x*ie.x,o.y*ie.y,o.x*ie.z,o.y*ie.w),N.viewport(s),le.updateMatrices(ee,j),r=le.getFrustum(),E(I,F,le.camera,ee,this.type)}le.isPointLightShadow!==!0&&this.type===Ll&&S(le,F),le.needsUpdate=!1}g=this.type,x.needsUpdate=!1,n.setRenderTarget(R,k,L)};function S(C,I){const F=e.update(y);f.defines.VSM_SAMPLES!==C.blurSamples&&(f.defines.VSM_SAMPLES=C.blurSamples,d.defines.VSM_SAMPLES=C.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new jl(i.x,i.y)),f.uniforms.shadow_pass.value=C.map.texture,f.uniforms.resolution.value=C.mapSize,f.uniforms.radius.value=C.radius,n.setRenderTarget(C.mapPass),n.clear(),n.renderBufferDirect(I,null,F,f,y,null),d.uniforms.shadow_pass.value=C.mapPass.texture,d.uniforms.resolution.value=C.mapSize,d.uniforms.radius.value=C.radius,n.setRenderTarget(C.map),n.clear(),n.renderBufferDirect(I,null,F,d,y,null)}function _(C,I,F,R){let k=null;const L=F.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(L!==void 0)k=L;else if(k=F.isPointLight===!0?l:a,n.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0){const N=k.uuid,z=I.uuid;let H=u[N];H===void 0&&(H={},u[N]=H);let G=H[z];G===void 0&&(G=k.clone(),H[z]=G),k=G}if(k.visible=I.visible,k.wireframe=I.wireframe,R===Ll?k.side=I.shadowSide!==null?I.shadowSide:I.side:k.side=I.shadowSide!==null?I.shadowSide:h[I.side],k.alphaMap=I.alphaMap,k.alphaTest=I.alphaTest,k.map=I.map,k.clipShadows=I.clipShadows,k.clippingPlanes=I.clippingPlanes,k.clipIntersection=I.clipIntersection,k.displacementMap=I.displacementMap,k.displacementScale=I.displacementScale,k.displacementBias=I.displacementBias,k.wireframeLinewidth=I.wireframeLinewidth,k.linewidth=I.linewidth,F.isPointLight===!0&&k.isMeshDistanceMaterial===!0){const N=n.properties.get(k);N.light=F}return k}function E(C,I,F,R,k){if(C.visible===!1)return;if(C.layers.test(I.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&k===Ll)&&(!C.frustumCulled||r.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,C.matrixWorld);const z=e.update(C),H=C.material;if(Array.isArray(H)){const G=z.groups;for(let K=0,ee=G.length;K<ee;K++){const le=G[K],V=H[le.materialIndex];if(V&&V.visible){const J=_(C,V,R,k);n.renderBufferDirect(F,null,z,J,C,le)}}}else if(H.visible){const G=_(C,H,R,k);n.renderBufferDirect(F,null,z,G,C,null)}}const N=C.children;for(let z=0,H=N.length;z<H;z++)E(N[z],I,F,R,k)}}function Vj(n,e,t){const r=t.isWebGL2;function i(){let Ae=!1;const Oe=new Or;let Ve=null;const At=new Or(0,0,0,0);return{setMask:function(Ct){Ve!==Ct&&!Ae&&(n.colorMask(Ct,Ct,Ct,Ct),Ve=Ct)},setLocked:function(Ct){Ae=Ct},setClear:function(Ct,Nt,Xt,kn,Yn){Yn===!0&&(Ct*=kn,Nt*=kn,Xt*=kn),Oe.set(Ct,Nt,Xt,kn),At.equals(Oe)===!1&&(n.clearColor(Ct,Nt,Xt,kn),At.copy(Oe))},reset:function(){Ae=!1,Ve=null,At.set(-1,0,0,0)}}}function o(){let Ae=!1,Oe=null,Ve=null,At=null;return{setTest:function(Ct){Ct?me(n.DEPTH_TEST):Se(n.DEPTH_TEST)},setMask:function(Ct){Oe!==Ct&&!Ae&&(n.depthMask(Ct),Oe=Ct)},setFunc:function(Ct){if(Ve!==Ct){switch(Ct){case MN:n.depthFunc(n.NEVER);break;case EN:n.depthFunc(n.ALWAYS);break;case AN:n.depthFunc(n.LESS);break;case Gx:n.depthFunc(n.LEQUAL);break;case TN:n.depthFunc(n.EQUAL);break;case CN:n.depthFunc(n.GEQUAL);break;case PN:n.depthFunc(n.GREATER);break;case RN:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ve=Ct}},setLocked:function(Ct){Ae=Ct},setClear:function(Ct){At!==Ct&&(n.clearDepth(Ct),At=Ct)},reset:function(){Ae=!1,Oe=null,Ve=null,At=null}}}function s(){let Ae=!1,Oe=null,Ve=null,At=null,Ct=null,Nt=null,Xt=null,kn=null,Yn=null;return{setTest:function(wn){Ae||(wn?me(n.STENCIL_TEST):Se(n.STENCIL_TEST))},setMask:function(wn){Oe!==wn&&!Ae&&(n.stencilMask(wn),Oe=wn)},setFunc:function(wn,ir,Wt){(Ve!==wn||At!==ir||Ct!==Wt)&&(n.stencilFunc(wn,ir,Wt),Ve=wn,At=ir,Ct=Wt)},setOp:function(wn,ir,Wt){(Nt!==wn||Xt!==ir||kn!==Wt)&&(n.stencilOp(wn,ir,Wt),Nt=wn,Xt=ir,kn=Wt)},setLocked:function(wn){Ae=wn},setClear:function(wn){Yn!==wn&&(n.clearStencil(wn),Yn=wn)},reset:function(){Ae=!1,Oe=null,Ve=null,At=null,Ct=null,Nt=null,Xt=null,kn=null,Yn=null}}}const a=new i,l=new o,u=new s,c=new WeakMap,h=new WeakMap;let f={},d={},v=new WeakMap,y=[],x=null,g=!1,S=null,_=null,E=null,C=null,I=null,F=null,R=null,k=!1,L=null,N=null,z=null,H=null,G=null;const K=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let ee=!1,le=0;const V=n.getParameter(n.VERSION);V.indexOf("WebGL")!==-1?(le=parseFloat(/^WebGL (\d)/.exec(V)[1]),ee=le>=1):V.indexOf("OpenGL ES")!==-1&&(le=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),ee=le>=2);let J=null,j={};const ie=n.getParameter(n.SCISSOR_BOX),D=n.getParameter(n.VIEWPORT),q=new Or().fromArray(ie),Z=new Or().fromArray(D);function Q(Ae,Oe,Ve,At){const Ct=new Uint8Array(4),Nt=n.createTexture();n.bindTexture(Ae,Nt),n.texParameteri(Ae,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Ae,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Xt=0;Xt<Ve;Xt++)r&&(Ae===n.TEXTURE_3D||Ae===n.TEXTURE_2D_ARRAY)?n.texImage3D(Oe,0,n.RGBA,1,1,At,0,n.RGBA,n.UNSIGNED_BYTE,Ct):n.texImage2D(Oe+Xt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ct);return Nt}const se={};se[n.TEXTURE_2D]=Q(n.TEXTURE_2D,n.TEXTURE_2D,1),se[n.TEXTURE_CUBE_MAP]=Q(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(se[n.TEXTURE_2D_ARRAY]=Q(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),se[n.TEXTURE_3D]=Q(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),me(n.DEPTH_TEST),l.setFunc(Gx),ae(!1),gt(X5),me(n.CULL_FACE),Ue(Lc);function me(Ae){f[Ae]!==!0&&(n.enable(Ae),f[Ae]=!0)}function Se(Ae){f[Ae]!==!1&&(n.disable(Ae),f[Ae]=!1)}function Ce(Ae,Oe){return d[Ae]!==Oe?(n.bindFramebuffer(Ae,Oe),d[Ae]=Oe,r&&(Ae===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=Oe),Ae===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=Oe)),!0):!1}function $e(Ae,Oe){let Ve=y,At=!1;if(Ae)if(Ve=v.get(Oe),Ve===void 0&&(Ve=[],v.set(Oe,Ve)),Ae.isWebGLMultipleRenderTargets){const Ct=Ae.texture;if(Ve.length!==Ct.length||Ve[0]!==n.COLOR_ATTACHMENT0){for(let Nt=0,Xt=Ct.length;Nt<Xt;Nt++)Ve[Nt]=n.COLOR_ATTACHMENT0+Nt;Ve.length=Ct.length,At=!0}}else Ve[0]!==n.COLOR_ATTACHMENT0&&(Ve[0]=n.COLOR_ATTACHMENT0,At=!0);else Ve[0]!==n.BACK&&(Ve[0]=n.BACK,At=!0);At&&(t.isWebGL2?n.drawBuffers(Ve):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ve))}function ke(Ae){return x!==Ae?(n.useProgram(Ae),x=Ae,!0):!1}const fe={[ud]:n.FUNC_ADD,[dN]:n.FUNC_SUBTRACT,[pN]:n.FUNC_REVERSE_SUBTRACT};if(r)fe[J5]=n.MIN,fe[Q5]=n.MAX;else{const Ae=e.get("EXT_blend_minmax");Ae!==null&&(fe[J5]=Ae.MIN_EXT,fe[Q5]=Ae.MAX_EXT)}const Ie={[mN]:n.ZERO,[gN]:n.ONE,[vN]:n.SRC_COLOR,[E3]:n.SRC_ALPHA,[bN]:n.SRC_ALPHA_SATURATE,[SN]:n.DST_COLOR,[xN]:n.DST_ALPHA,[yN]:n.ONE_MINUS_SRC_COLOR,[A3]:n.ONE_MINUS_SRC_ALPHA,[_N]:n.ONE_MINUS_DST_COLOR,[wN]:n.ONE_MINUS_DST_ALPHA};function Ue(Ae,Oe,Ve,At,Ct,Nt,Xt,kn){if(Ae===Lc){g===!0&&(Se(n.BLEND),g=!1);return}if(g===!1&&(me(n.BLEND),g=!0),Ae!==fN){if(Ae!==S||kn!==k){if((_!==ud||I!==ud)&&(n.blendEquation(n.FUNC_ADD),_=ud,I=ud),kn)switch(Ae){case Ad:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Y5:n.blendFunc(n.ONE,n.ONE);break;case Z5:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case K5:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}else switch(Ae){case Ad:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Y5:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Z5:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case K5:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}E=null,C=null,F=null,R=null,S=Ae,k=kn}return}Ct=Ct||Oe,Nt=Nt||Ve,Xt=Xt||At,(Oe!==_||Ct!==I)&&(n.blendEquationSeparate(fe[Oe],fe[Ct]),_=Oe,I=Ct),(Ve!==E||At!==C||Nt!==F||Xt!==R)&&(n.blendFuncSeparate(Ie[Ve],Ie[At],Ie[Nt],Ie[Xt]),E=Ve,C=At,F=Nt,R=Xt),S=Ae,k=!1}function Te(Ae,Oe){Ae.side===Ol?Se(n.CULL_FACE):me(n.CULL_FACE);let Ve=Ae.side===Ns;Oe&&(Ve=!Ve),ae(Ve),Ae.blending===Ad&&Ae.transparent===!1?Ue(Lc):Ue(Ae.blending,Ae.blendEquation,Ae.blendSrc,Ae.blendDst,Ae.blendEquationAlpha,Ae.blendSrcAlpha,Ae.blendDstAlpha,Ae.premultipliedAlpha),l.setFunc(Ae.depthFunc),l.setTest(Ae.depthTest),l.setMask(Ae.depthWrite),a.setMask(Ae.colorWrite);const At=Ae.stencilWrite;u.setTest(At),At&&(u.setMask(Ae.stencilWriteMask),u.setFunc(Ae.stencilFunc,Ae.stencilRef,Ae.stencilFuncMask),u.setOp(Ae.stencilFail,Ae.stencilZFail,Ae.stencilZPass)),Ge(Ae.polygonOffset,Ae.polygonOffsetFactor,Ae.polygonOffsetUnits),Ae.alphaToCoverage===!0?me(n.SAMPLE_ALPHA_TO_COVERAGE):Se(n.SAMPLE_ALPHA_TO_COVERAGE)}function ae(Ae){L!==Ae&&(Ae?n.frontFace(n.CW):n.frontFace(n.CCW),L=Ae)}function gt(Ae){Ae!==uN?(me(n.CULL_FACE),Ae!==N&&(Ae===X5?n.cullFace(n.BACK):Ae===cN?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Se(n.CULL_FACE),N=Ae}function Ye(Ae){Ae!==z&&(ee&&n.lineWidth(Ae),z=Ae)}function Ge(Ae,Oe,Ve){Ae?(me(n.POLYGON_OFFSET_FILL),(H!==Oe||G!==Ve)&&(n.polygonOffset(Oe,Ve),H=Oe,G=Ve)):Se(n.POLYGON_OFFSET_FILL)}function et(Ae){Ae?me(n.SCISSOR_TEST):Se(n.SCISSOR_TEST)}function vt(Ae){Ae===void 0&&(Ae=n.TEXTURE0+K-1),J!==Ae&&(n.activeTexture(Ae),J=Ae)}function bt(Ae,Oe,Ve){Ve===void 0&&(J===null?Ve=n.TEXTURE0+K-1:Ve=J);let At=j[Ve];At===void 0&&(At={type:void 0,texture:void 0},j[Ve]=At),(At.type!==Ae||At.texture!==Oe)&&(J!==Ve&&(n.activeTexture(Ve),J=Ve),n.bindTexture(Ae,Oe||se[Ae]),At.type=Ae,At.texture=Oe)}function pe(){const Ae=j[J];Ae!==void 0&&Ae.type!==void 0&&(n.bindTexture(Ae.type,null),Ae.type=void 0,Ae.texture=void 0)}function te(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Ne(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function st(){try{n.texSubImage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function rt(){try{n.texSubImage3D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function pt(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function wt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function ut(){try{n.texStorage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Pe(){try{n.texStorage3D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Ht(){try{n.texImage2D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Pt(){try{n.texImage3D.apply(n,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Dt(Ae){q.equals(Ae)===!1&&(n.scissor(Ae.x,Ae.y,Ae.z,Ae.w),q.copy(Ae))}function Tt(Ae){Z.equals(Ae)===!1&&(n.viewport(Ae.x,Ae.y,Ae.z,Ae.w),Z.copy(Ae))}function be(Ae,Oe){let Ve=h.get(Oe);Ve===void 0&&(Ve=new WeakMap,h.set(Oe,Ve));let At=Ve.get(Ae);At===void 0&&(At=n.getUniformBlockIndex(Oe,Ae.name),Ve.set(Ae,At))}function Ke(Ae,Oe){const At=h.get(Oe).get(Ae);c.get(Oe)!==At&&(n.uniformBlockBinding(Oe,At,Ae.__bindingPointIndex),c.set(Oe,At))}function ct(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},J=null,j={},d={},v=new WeakMap,y=[],x=null,g=!1,S=null,_=null,E=null,C=null,I=null,F=null,R=null,k=!1,L=null,N=null,z=null,H=null,G=null,q.set(0,0,n.canvas.width,n.canvas.height),Z.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:me,disable:Se,bindFramebuffer:Ce,drawBuffers:$e,useProgram:ke,setBlending:Ue,setMaterial:Te,setFlipSided:ae,setCullFace:gt,setLineWidth:Ye,setPolygonOffset:Ge,setScissorTest:et,activeTexture:vt,bindTexture:bt,unbindTexture:pe,compressedTexImage2D:te,compressedTexImage3D:Ne,texImage2D:Ht,texImage3D:Pt,updateUBOMapping:be,uniformBlockBinding:Ke,texStorage2D:ut,texStorage3D:Pe,texSubImage2D:st,texSubImage3D:rt,compressedTexSubImage2D:pt,compressedTexSubImage3D:wt,scissor:Dt,viewport:Tt,reset:ct}}function Wj(n,e,t,r,i,o,s){const a=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,h=i.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let y;const x=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(pe,te){return g?new OffscreenCanvas(pe,te):Ov("canvas")}function _(pe,te,Ne,st){let rt=1;if((pe.width>st||pe.height>st)&&(rt=st/Math.max(pe.width,pe.height)),rt<1||te===!0)if(typeof HTMLImageElement<"u"&&pe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&pe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&pe instanceof ImageBitmap){const pt=te?jx:Math.floor,wt=pt(rt*pe.width),ut=pt(rt*pe.height);y===void 0&&(y=S(wt,ut));const Pe=Ne?S(wt,ut):y;return Pe.width=wt,Pe.height=ut,Pe.getContext("2d").drawImage(pe,0,0,wt,ut),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+pe.width+"x"+pe.height+") to ("+wt+"x"+ut+")."),Pe}else return"data"in pe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+pe.width+"x"+pe.height+")."),pe;return pe}function E(pe){return MM(pe.width)&&MM(pe.height)}function C(pe){return a?!1:pe.wrapS!==ps||pe.wrapT!==ps||pe.minFilter!==Wi&&pe.minFilter!==ri}function I(pe,te){return pe.generateMipmaps&&te&&pe.minFilter!==Wi&&pe.minFilter!==ri}function F(pe){n.generateMipmap(pe)}function R(pe,te,Ne,st,rt=!1){if(a===!1)return te;if(pe!==null){if(n[pe]!==void 0)return n[pe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+pe+"'")}let pt=te;return te===n.RED&&(Ne===n.FLOAT&&(pt=n.R32F),Ne===n.HALF_FLOAT&&(pt=n.R16F),Ne===n.UNSIGNED_BYTE&&(pt=n.R8)),te===n.RED_INTEGER&&(Ne===n.UNSIGNED_BYTE&&(pt=n.R8UI),Ne===n.UNSIGNED_SHORT&&(pt=n.R16UI),Ne===n.UNSIGNED_INT&&(pt=n.R32UI),Ne===n.BYTE&&(pt=n.R8I),Ne===n.SHORT&&(pt=n.R16I),Ne===n.INT&&(pt=n.R32I)),te===n.RG&&(Ne===n.FLOAT&&(pt=n.RG32F),Ne===n.HALF_FLOAT&&(pt=n.RG16F),Ne===n.UNSIGNED_BYTE&&(pt=n.RG8)),te===n.RGBA&&(Ne===n.FLOAT&&(pt=n.RGBA32F),Ne===n.HALF_FLOAT&&(pt=n.RGBA16F),Ne===n.UNSIGNED_BYTE&&(pt=st===Hn&&rt===!1?n.SRGB8_ALPHA8:n.RGBA8),Ne===n.UNSIGNED_SHORT_4_4_4_4&&(pt=n.RGBA4),Ne===n.UNSIGNED_SHORT_5_5_5_1&&(pt=n.RGB5_A1)),(pt===n.R16F||pt===n.R32F||pt===n.RG16F||pt===n.RG32F||pt===n.RGBA16F||pt===n.RGBA32F)&&e.get("EXT_color_buffer_float"),pt}function k(pe,te,Ne){return I(pe,Ne)===!0||pe.isFramebufferTexture&&pe.minFilter!==Wi&&pe.minFilter!==ri?Math.log2(Math.max(te.width,te.height))+1:pe.mipmaps!==void 0&&pe.mipmaps.length>0?pe.mipmaps.length:pe.isCompressedTexture&&Array.isArray(pe.image)?te.mipmaps.length:1}function L(pe){return pe===Wi||pe===Vx||pe===$0?n.NEAREST:n.LINEAR}function N(pe){const te=pe.target;te.removeEventListener("dispose",N),H(te),te.isVideoTexture&&v.delete(te)}function z(pe){const te=pe.target;te.removeEventListener("dispose",z),K(te)}function H(pe){const te=r.get(pe);if(te.__webglInit===void 0)return;const Ne=pe.source,st=x.get(Ne);if(st){const rt=st[te.__cacheKey];rt.usedTimes--,rt.usedTimes===0&&G(pe),Object.keys(st).length===0&&x.delete(Ne)}r.remove(pe)}function G(pe){const te=r.get(pe);n.deleteTexture(te.__webglTexture);const Ne=pe.source,st=x.get(Ne);delete st[te.__cacheKey],s.memory.textures--}function K(pe){const te=pe.texture,Ne=r.get(pe),st=r.get(te);if(st.__webglTexture!==void 0&&(n.deleteTexture(st.__webglTexture),s.memory.textures--),pe.depthTexture&&pe.depthTexture.dispose(),pe.isWebGLCubeRenderTarget)for(let rt=0;rt<6;rt++){if(Array.isArray(Ne.__webglFramebuffer[rt]))for(let pt=0;pt<Ne.__webglFramebuffer[rt].length;pt++)n.deleteFramebuffer(Ne.__webglFramebuffer[rt][pt]);else n.deleteFramebuffer(Ne.__webglFramebuffer[rt]);Ne.__webglDepthbuffer&&n.deleteRenderbuffer(Ne.__webglDepthbuffer[rt])}else{if(Array.isArray(Ne.__webglFramebuffer))for(let rt=0;rt<Ne.__webglFramebuffer.length;rt++)n.deleteFramebuffer(Ne.__webglFramebuffer[rt]);else n.deleteFramebuffer(Ne.__webglFramebuffer);if(Ne.__webglDepthbuffer&&n.deleteRenderbuffer(Ne.__webglDepthbuffer),Ne.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Ne.__webglMultisampledFramebuffer),Ne.__webglColorRenderbuffer)for(let rt=0;rt<Ne.__webglColorRenderbuffer.length;rt++)Ne.__webglColorRenderbuffer[rt]&&n.deleteRenderbuffer(Ne.__webglColorRenderbuffer[rt]);Ne.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Ne.__webglDepthRenderbuffer)}if(pe.isWebGLMultipleRenderTargets)for(let rt=0,pt=te.length;rt<pt;rt++){const wt=r.get(te[rt]);wt.__webglTexture&&(n.deleteTexture(wt.__webglTexture),s.memory.textures--),r.remove(te[rt])}r.remove(te),r.remove(pe)}let ee=0;function le(){ee=0}function V(){const pe=ee;return pe>=l&&console.warn("THREE.WebGLTextures: Trying to use "+pe+" texture units while this GPU supports only "+l),ee+=1,pe}function J(pe){const te=[];return te.push(pe.wrapS),te.push(pe.wrapT),te.push(pe.wrapR||0),te.push(pe.magFilter),te.push(pe.minFilter),te.push(pe.anisotropy),te.push(pe.internalFormat),te.push(pe.format),te.push(pe.type),te.push(pe.generateMipmaps),te.push(pe.premultiplyAlpha),te.push(pe.flipY),te.push(pe.unpackAlignment),te.push(pe.colorSpace),te.join()}function j(pe,te){const Ne=r.get(pe);if(pe.isVideoTexture&&vt(pe),pe.isRenderTargetTexture===!1&&pe.version>0&&Ne.__version!==pe.version){const st=pe.image;if(st===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(st.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ce(Ne,pe,te);return}}t.bindTexture(n.TEXTURE_2D,Ne.__webglTexture,n.TEXTURE0+te)}function ie(pe,te){const Ne=r.get(pe);if(pe.version>0&&Ne.__version!==pe.version){Ce(Ne,pe,te);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Ne.__webglTexture,n.TEXTURE0+te)}function D(pe,te){const Ne=r.get(pe);if(pe.version>0&&Ne.__version!==pe.version){Ce(Ne,pe,te);return}t.bindTexture(n.TEXTURE_3D,Ne.__webglTexture,n.TEXTURE0+te)}function q(pe,te){const Ne=r.get(pe);if(pe.version>0&&Ne.__version!==pe.version){$e(Ne,pe,te);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Ne.__webglTexture,n.TEXTURE0+te)}const Z={[Rv]:n.REPEAT,[ps]:n.CLAMP_TO_EDGE,[Lv]:n.MIRRORED_REPEAT},Q={[Wi]:n.NEAREST,[Vx]:n.NEAREST_MIPMAP_NEAREST,[$0]:n.NEAREST_MIPMAP_LINEAR,[ri]:n.LINEAR,[C3]:n.LINEAR_MIPMAP_NEAREST,[cf]:n.LINEAR_MIPMAP_LINEAR},se={[JN]:n.NEVER,[oF]:n.ALWAYS,[QN]:n.LESS,[tF]:n.LEQUAL,[eF]:n.EQUAL,[iF]:n.GEQUAL,[nF]:n.GREATER,[rF]:n.NOTEQUAL};function me(pe,te,Ne){if(Ne?(n.texParameteri(pe,n.TEXTURE_WRAP_S,Z[te.wrapS]),n.texParameteri(pe,n.TEXTURE_WRAP_T,Z[te.wrapT]),(pe===n.TEXTURE_3D||pe===n.TEXTURE_2D_ARRAY)&&n.texParameteri(pe,n.TEXTURE_WRAP_R,Z[te.wrapR]),n.texParameteri(pe,n.TEXTURE_MAG_FILTER,Q[te.magFilter]),n.texParameteri(pe,n.TEXTURE_MIN_FILTER,Q[te.minFilter])):(n.texParameteri(pe,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(pe,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(pe===n.TEXTURE_3D||pe===n.TEXTURE_2D_ARRAY)&&n.texParameteri(pe,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(te.wrapS!==ps||te.wrapT!==ps)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(pe,n.TEXTURE_MAG_FILTER,L(te.magFilter)),n.texParameteri(pe,n.TEXTURE_MIN_FILTER,L(te.minFilter)),te.minFilter!==Wi&&te.minFilter!==ri&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),te.compareFunction&&(n.texParameteri(pe,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(pe,n.TEXTURE_COMPARE_FUNC,se[te.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const st=e.get("EXT_texture_filter_anisotropic");if(te.magFilter===Wi||te.minFilter!==$0&&te.minFilter!==cf||te.type===vs&&e.has("OES_texture_float_linear")===!1||a===!1&&te.type===Ls&&e.has("OES_texture_half_float_linear")===!1)return;(te.anisotropy>1||r.get(te).__currentAnisotropy)&&(n.texParameterf(pe,st.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(te.anisotropy,i.getMaxAnisotropy())),r.get(te).__currentAnisotropy=te.anisotropy)}}function Se(pe,te){let Ne=!1;pe.__webglInit===void 0&&(pe.__webglInit=!0,te.addEventListener("dispose",N));const st=te.source;let rt=x.get(st);rt===void 0&&(rt={},x.set(st,rt));const pt=J(te);if(pt!==pe.__cacheKey){rt[pt]===void 0&&(rt[pt]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,Ne=!0),rt[pt].usedTimes++;const wt=rt[pe.__cacheKey];wt!==void 0&&(rt[pe.__cacheKey].usedTimes--,wt.usedTimes===0&&G(te)),pe.__cacheKey=pt,pe.__webglTexture=rt[pt].texture}return Ne}function Ce(pe,te,Ne){let st=n.TEXTURE_2D;(te.isDataArrayTexture||te.isCompressedArrayTexture)&&(st=n.TEXTURE_2D_ARRAY),te.isData3DTexture&&(st=n.TEXTURE_3D);const rt=Se(pe,te),pt=te.source;t.bindTexture(st,pe.__webglTexture,n.TEXTURE0+Ne);const wt=r.get(pt);if(pt.version!==wt.__version||rt===!0){t.activeTexture(n.TEXTURE0+Ne),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,te.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,te.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const ut=C(te)&&E(te.image)===!1;let Pe=_(te.image,ut,!1,c);Pe=bt(te,Pe);const Ht=E(Pe)||a,Pt=o.convert(te.format,te.colorSpace);let Dt=o.convert(te.type),Tt=R(te.internalFormat,Pt,Dt,te.colorSpace);me(st,te,Ht);let be;const Ke=te.mipmaps,ct=a&&te.isVideoTexture!==!0,Ae=wt.__version===void 0||rt===!0,Oe=k(te,Pe,Ht);if(te.isDepthTexture)Tt=n.DEPTH_COMPONENT,a?te.type===vs?Tt=n.DEPTH_COMPONENT32F:te.type===bc?Tt=n.DEPTH_COMPONENT24:te.type===tf?Tt=n.DEPTH24_STENCIL8:Tt=n.DEPTH_COMPONENT16:te.type===vs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),te.format===nf&&Tt===n.DEPTH_COMPONENT&&te.type!==Bw&&te.type!==bc&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),te.type=bc,Dt=o.convert(te.type)),te.format===Od&&Tt===n.DEPTH_COMPONENT&&(Tt=n.DEPTH_STENCIL,te.type!==tf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),te.type=tf,Dt=o.convert(te.type))),Ae&&(ct?t.texStorage2D(n.TEXTURE_2D,1,Tt,Pe.width,Pe.height):t.texImage2D(n.TEXTURE_2D,0,Tt,Pe.width,Pe.height,0,Pt,Dt,null));else if(te.isDataTexture)if(Ke.length>0&&Ht){ct&&Ae&&t.texStorage2D(n.TEXTURE_2D,Oe,Tt,Ke[0].width,Ke[0].height);for(let Ve=0,At=Ke.length;Ve<At;Ve++)be=Ke[Ve],ct?t.texSubImage2D(n.TEXTURE_2D,Ve,0,0,be.width,be.height,Pt,Dt,be.data):t.texImage2D(n.TEXTURE_2D,Ve,Tt,be.width,be.height,0,Pt,Dt,be.data);te.generateMipmaps=!1}else ct?(Ae&&t.texStorage2D(n.TEXTURE_2D,Oe,Tt,Pe.width,Pe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Pe.width,Pe.height,Pt,Dt,Pe.data)):t.texImage2D(n.TEXTURE_2D,0,Tt,Pe.width,Pe.height,0,Pt,Dt,Pe.data);else if(te.isCompressedTexture)if(te.isCompressedArrayTexture){ct&&Ae&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Oe,Tt,Ke[0].width,Ke[0].height,Pe.depth);for(let Ve=0,At=Ke.length;Ve<At;Ve++)be=Ke[Ve],te.format!==Rs?Pt!==null?ct?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Ve,0,0,0,be.width,be.height,Pe.depth,Pt,be.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Ve,Tt,be.width,be.height,Pe.depth,0,be.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ct?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Ve,0,0,0,be.width,be.height,Pe.depth,Pt,Dt,be.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Ve,Tt,be.width,be.height,Pe.depth,0,Pt,Dt,be.data)}else{ct&&Ae&&t.texStorage2D(n.TEXTURE_2D,Oe,Tt,Ke[0].width,Ke[0].height);for(let Ve=0,At=Ke.length;Ve<At;Ve++)be=Ke[Ve],te.format!==Rs?Pt!==null?ct?t.compressedTexSubImage2D(n.TEXTURE_2D,Ve,0,0,be.width,be.height,Pt,be.data):t.compressedTexImage2D(n.TEXTURE_2D,Ve,Tt,be.width,be.height,0,be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):ct?t.texSubImage2D(n.TEXTURE_2D,Ve,0,0,be.width,be.height,Pt,Dt,be.data):t.texImage2D(n.TEXTURE_2D,Ve,Tt,be.width,be.height,0,Pt,Dt,be.data)}else if(te.isDataArrayTexture)ct?(Ae&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Oe,Tt,Pe.width,Pe.height,Pe.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Pe.width,Pe.height,Pe.depth,Pt,Dt,Pe.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Tt,Pe.width,Pe.height,Pe.depth,0,Pt,Dt,Pe.data);else if(te.isData3DTexture)ct?(Ae&&t.texStorage3D(n.TEXTURE_3D,Oe,Tt,Pe.width,Pe.height,Pe.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Pe.width,Pe.height,Pe.depth,Pt,Dt,Pe.data)):t.texImage3D(n.TEXTURE_3D,0,Tt,Pe.width,Pe.height,Pe.depth,0,Pt,Dt,Pe.data);else if(te.isFramebufferTexture){if(Ae)if(ct)t.texStorage2D(n.TEXTURE_2D,Oe,Tt,Pe.width,Pe.height);else{let Ve=Pe.width,At=Pe.height;for(let Ct=0;Ct<Oe;Ct++)t.texImage2D(n.TEXTURE_2D,Ct,Tt,Ve,At,0,Pt,Dt,null),Ve>>=1,At>>=1}}else if(Ke.length>0&&Ht){ct&&Ae&&t.texStorage2D(n.TEXTURE_2D,Oe,Tt,Ke[0].width,Ke[0].height);for(let Ve=0,At=Ke.length;Ve<At;Ve++)be=Ke[Ve],ct?t.texSubImage2D(n.TEXTURE_2D,Ve,0,0,Pt,Dt,be):t.texImage2D(n.TEXTURE_2D,Ve,Tt,Pt,Dt,be);te.generateMipmaps=!1}else ct?(Ae&&t.texStorage2D(n.TEXTURE_2D,Oe,Tt,Pe.width,Pe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Pt,Dt,Pe)):t.texImage2D(n.TEXTURE_2D,0,Tt,Pt,Dt,Pe);I(te,Ht)&&F(st),wt.__version=pt.version,te.onUpdate&&te.onUpdate(te)}pe.__version=te.version}function $e(pe,te,Ne){if(te.image.length!==6)return;const st=Se(pe,te),rt=te.source;t.bindTexture(n.TEXTURE_CUBE_MAP,pe.__webglTexture,n.TEXTURE0+Ne);const pt=r.get(rt);if(rt.version!==pt.__version||st===!0){t.activeTexture(n.TEXTURE0+Ne),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,te.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,te.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const wt=te.isCompressedTexture||te.image[0].isCompressedTexture,ut=te.image[0]&&te.image[0].isDataTexture,Pe=[];for(let Ve=0;Ve<6;Ve++)!wt&&!ut?Pe[Ve]=_(te.image[Ve],!1,!0,u):Pe[Ve]=ut?te.image[Ve].image:te.image[Ve],Pe[Ve]=bt(te,Pe[Ve]);const Ht=Pe[0],Pt=E(Ht)||a,Dt=o.convert(te.format,te.colorSpace),Tt=o.convert(te.type),be=R(te.internalFormat,Dt,Tt,te.colorSpace),Ke=a&&te.isVideoTexture!==!0,ct=pt.__version===void 0||st===!0;let Ae=k(te,Ht,Pt);me(n.TEXTURE_CUBE_MAP,te,Pt);let Oe;if(wt){Ke&&ct&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ae,be,Ht.width,Ht.height);for(let Ve=0;Ve<6;Ve++){Oe=Pe[Ve].mipmaps;for(let At=0;At<Oe.length;At++){const Ct=Oe[At];te.format!==Rs?Dt!==null?Ke?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,At,0,0,Ct.width,Ct.height,Dt,Ct.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,At,be,Ct.width,Ct.height,0,Ct.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ke?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,At,0,0,Ct.width,Ct.height,Dt,Tt,Ct.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,At,be,Ct.width,Ct.height,0,Dt,Tt,Ct.data)}}}else{Oe=te.mipmaps,Ke&&ct&&(Oe.length>0&&Ae++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Ae,be,Pe[0].width,Pe[0].height));for(let Ve=0;Ve<6;Ve++)if(ut){Ke?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0,0,0,Pe[Ve].width,Pe[Ve].height,Dt,Tt,Pe[Ve].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0,be,Pe[Ve].width,Pe[Ve].height,0,Dt,Tt,Pe[Ve].data);for(let At=0;At<Oe.length;At++){const Nt=Oe[At].image[Ve].image;Ke?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,At+1,0,0,Nt.width,Nt.height,Dt,Tt,Nt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,At+1,be,Nt.width,Nt.height,0,Dt,Tt,Nt.data)}}else{Ke?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0,0,0,Dt,Tt,Pe[Ve]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,0,be,Dt,Tt,Pe[Ve]);for(let At=0;At<Oe.length;At++){const Ct=Oe[At];Ke?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,At+1,0,0,Dt,Tt,Ct.image[Ve]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ve,At+1,be,Dt,Tt,Ct.image[Ve])}}}I(te,Pt)&&F(n.TEXTURE_CUBE_MAP),pt.__version=rt.version,te.onUpdate&&te.onUpdate(te)}pe.__version=te.version}function ke(pe,te,Ne,st,rt,pt){const wt=o.convert(Ne.format,Ne.colorSpace),ut=o.convert(Ne.type),Pe=R(Ne.internalFormat,wt,ut,Ne.colorSpace);if(!r.get(te).__hasExternalTextures){const Pt=Math.max(1,te.width>>pt),Dt=Math.max(1,te.height>>pt);rt===n.TEXTURE_3D||rt===n.TEXTURE_2D_ARRAY?t.texImage3D(rt,pt,Pe,Pt,Dt,te.depth,0,wt,ut,null):t.texImage2D(rt,pt,Pe,Pt,Dt,0,wt,ut,null)}t.bindFramebuffer(n.FRAMEBUFFER,pe),et(te)?f.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,st,rt,r.get(Ne).__webglTexture,0,Ge(te)):(rt===n.TEXTURE_2D||rt>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&rt<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,st,rt,r.get(Ne).__webglTexture,pt),t.bindFramebuffer(n.FRAMEBUFFER,null)}function fe(pe,te,Ne){if(n.bindRenderbuffer(n.RENDERBUFFER,pe),te.depthBuffer&&!te.stencilBuffer){let st=n.DEPTH_COMPONENT16;if(Ne||et(te)){const rt=te.depthTexture;rt&&rt.isDepthTexture&&(rt.type===vs?st=n.DEPTH_COMPONENT32F:rt.type===bc&&(st=n.DEPTH_COMPONENT24));const pt=Ge(te);et(te)?f.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,pt,st,te.width,te.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,pt,st,te.width,te.height)}else n.renderbufferStorage(n.RENDERBUFFER,st,te.width,te.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,pe)}else if(te.depthBuffer&&te.stencilBuffer){const st=Ge(te);Ne&&et(te)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,st,n.DEPTH24_STENCIL8,te.width,te.height):et(te)?f.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,st,n.DEPTH24_STENCIL8,te.width,te.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,te.width,te.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,pe)}else{const st=te.isWebGLMultipleRenderTargets===!0?te.texture:[te.texture];for(let rt=0;rt<st.length;rt++){const pt=st[rt],wt=o.convert(pt.format,pt.colorSpace),ut=o.convert(pt.type),Pe=R(pt.internalFormat,wt,ut,pt.colorSpace),Ht=Ge(te);Ne&&et(te)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ht,Pe,te.width,te.height):et(te)?f.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ht,Pe,te.width,te.height):n.renderbufferStorage(n.RENDERBUFFER,Pe,te.width,te.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Ie(pe,te){if(te&&te.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,pe),!(te.depthTexture&&te.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(te.depthTexture).__webglTexture||te.depthTexture.image.width!==te.width||te.depthTexture.image.height!==te.height)&&(te.depthTexture.image.width=te.width,te.depthTexture.image.height=te.height,te.depthTexture.needsUpdate=!0),j(te.depthTexture,0);const st=r.get(te.depthTexture).__webglTexture,rt=Ge(te);if(te.depthTexture.format===nf)et(te)?f.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,st,0,rt):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,st,0);else if(te.depthTexture.format===Od)et(te)?f.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,st,0,rt):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,st,0);else throw new Error("Unknown depthTexture format")}function Ue(pe){const te=r.get(pe),Ne=pe.isWebGLCubeRenderTarget===!0;if(pe.depthTexture&&!te.__autoAllocateDepthBuffer){if(Ne)throw new Error("target.depthTexture not supported in Cube render targets");Ie(te.__webglFramebuffer,pe)}else if(Ne){te.__webglDepthbuffer=[];for(let st=0;st<6;st++)t.bindFramebuffer(n.FRAMEBUFFER,te.__webglFramebuffer[st]),te.__webglDepthbuffer[st]=n.createRenderbuffer(),fe(te.__webglDepthbuffer[st],pe,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,te.__webglFramebuffer),te.__webglDepthbuffer=n.createRenderbuffer(),fe(te.__webglDepthbuffer,pe,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Te(pe,te,Ne){const st=r.get(pe);te!==void 0&&ke(st.__webglFramebuffer,pe,pe.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Ne!==void 0&&Ue(pe)}function ae(pe){const te=pe.texture,Ne=r.get(pe),st=r.get(te);pe.addEventListener("dispose",z),pe.isWebGLMultipleRenderTargets!==!0&&(st.__webglTexture===void 0&&(st.__webglTexture=n.createTexture()),st.__version=te.version,s.memory.textures++);const rt=pe.isWebGLCubeRenderTarget===!0,pt=pe.isWebGLMultipleRenderTargets===!0,wt=E(pe)||a;if(rt){Ne.__webglFramebuffer=[];for(let ut=0;ut<6;ut++)if(a&&te.mipmaps&&te.mipmaps.length>0){Ne.__webglFramebuffer[ut]=[];for(let Pe=0;Pe<te.mipmaps.length;Pe++)Ne.__webglFramebuffer[ut][Pe]=n.createFramebuffer()}else Ne.__webglFramebuffer[ut]=n.createFramebuffer()}else{if(a&&te.mipmaps&&te.mipmaps.length>0){Ne.__webglFramebuffer=[];for(let ut=0;ut<te.mipmaps.length;ut++)Ne.__webglFramebuffer[ut]=n.createFramebuffer()}else Ne.__webglFramebuffer=n.createFramebuffer();if(pt)if(i.drawBuffers){const ut=pe.texture;for(let Pe=0,Ht=ut.length;Pe<Ht;Pe++){const Pt=r.get(ut[Pe]);Pt.__webglTexture===void 0&&(Pt.__webglTexture=n.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&pe.samples>0&&et(pe)===!1){const ut=pt?te:[te];Ne.__webglMultisampledFramebuffer=n.createFramebuffer(),Ne.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer);for(let Pe=0;Pe<ut.length;Pe++){const Ht=ut[Pe];Ne.__webglColorRenderbuffer[Pe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Ne.__webglColorRenderbuffer[Pe]);const Pt=o.convert(Ht.format,Ht.colorSpace),Dt=o.convert(Ht.type),Tt=R(Ht.internalFormat,Pt,Dt,Ht.colorSpace,pe.isXRRenderTarget===!0),be=Ge(pe);n.renderbufferStorageMultisample(n.RENDERBUFFER,be,Tt,pe.width,pe.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pe,n.RENDERBUFFER,Ne.__webglColorRenderbuffer[Pe])}n.bindRenderbuffer(n.RENDERBUFFER,null),pe.depthBuffer&&(Ne.__webglDepthRenderbuffer=n.createRenderbuffer(),fe(Ne.__webglDepthRenderbuffer,pe,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(rt){t.bindTexture(n.TEXTURE_CUBE_MAP,st.__webglTexture),me(n.TEXTURE_CUBE_MAP,te,wt);for(let ut=0;ut<6;ut++)if(a&&te.mipmaps&&te.mipmaps.length>0)for(let Pe=0;Pe<te.mipmaps.length;Pe++)ke(Ne.__webglFramebuffer[ut][Pe],pe,te,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ut,Pe);else ke(Ne.__webglFramebuffer[ut],pe,te,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ut,0);I(te,wt)&&F(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(pt){const ut=pe.texture;for(let Pe=0,Ht=ut.length;Pe<Ht;Pe++){const Pt=ut[Pe],Dt=r.get(Pt);t.bindTexture(n.TEXTURE_2D,Dt.__webglTexture),me(n.TEXTURE_2D,Pt,wt),ke(Ne.__webglFramebuffer,pe,Pt,n.COLOR_ATTACHMENT0+Pe,n.TEXTURE_2D,0),I(Pt,wt)&&F(n.TEXTURE_2D)}t.unbindTexture()}else{let ut=n.TEXTURE_2D;if((pe.isWebGL3DRenderTarget||pe.isWebGLArrayRenderTarget)&&(a?ut=pe.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ut,st.__webglTexture),me(ut,te,wt),a&&te.mipmaps&&te.mipmaps.length>0)for(let Pe=0;Pe<te.mipmaps.length;Pe++)ke(Ne.__webglFramebuffer[Pe],pe,te,n.COLOR_ATTACHMENT0,ut,Pe);else ke(Ne.__webglFramebuffer,pe,te,n.COLOR_ATTACHMENT0,ut,0);I(te,wt)&&F(ut),t.unbindTexture()}pe.depthBuffer&&Ue(pe)}function gt(pe){const te=E(pe)||a,Ne=pe.isWebGLMultipleRenderTargets===!0?pe.texture:[pe.texture];for(let st=0,rt=Ne.length;st<rt;st++){const pt=Ne[st];if(I(pt,te)){const wt=pe.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,ut=r.get(pt).__webglTexture;t.bindTexture(wt,ut),F(wt),t.unbindTexture()}}}function Ye(pe){if(a&&pe.samples>0&&et(pe)===!1){const te=pe.isWebGLMultipleRenderTargets?pe.texture:[pe.texture],Ne=pe.width,st=pe.height;let rt=n.COLOR_BUFFER_BIT;const pt=[],wt=pe.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ut=r.get(pe),Pe=pe.isWebGLMultipleRenderTargets===!0;if(Pe)for(let Ht=0;Ht<te.length;Ht++)t.bindFramebuffer(n.FRAMEBUFFER,ut.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ht,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,ut.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ht,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,ut.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ut.__webglFramebuffer);for(let Ht=0;Ht<te.length;Ht++){pt.push(n.COLOR_ATTACHMENT0+Ht),pe.depthBuffer&&pt.push(wt);const Pt=ut.__ignoreDepthValues!==void 0?ut.__ignoreDepthValues:!1;if(Pt===!1&&(pe.depthBuffer&&(rt|=n.DEPTH_BUFFER_BIT),pe.stencilBuffer&&(rt|=n.STENCIL_BUFFER_BIT)),Pe&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ut.__webglColorRenderbuffer[Ht]),Pt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[wt]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[wt])),Pe){const Dt=r.get(te[Ht]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Dt,0)}n.blitFramebuffer(0,0,Ne,st,0,0,Ne,st,rt,n.NEAREST),d&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,pt)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Pe)for(let Ht=0;Ht<te.length;Ht++){t.bindFramebuffer(n.FRAMEBUFFER,ut.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ht,n.RENDERBUFFER,ut.__webglColorRenderbuffer[Ht]);const Pt=r.get(te[Ht]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,ut.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ht,n.TEXTURE_2D,Pt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ut.__webglMultisampledFramebuffer)}}function Ge(pe){return Math.min(h,pe.samples)}function et(pe){const te=r.get(pe);return a&&pe.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&te.__useRenderToTexture!==!1}function vt(pe){const te=s.render.frame;v.get(pe)!==te&&(v.set(pe,te),pe.update())}function bt(pe,te){const Ne=pe.colorSpace,st=pe.format,rt=pe.type;return pe.isCompressedTexture===!0||pe.format===Wx||Ne!==Wl&&Ne!==of&&(Ne===Hn?a===!1?e.has("EXT_sRGB")===!0&&st===Rs?(pe.format=Wx,pe.minFilter=ri,pe.generateMipmaps=!1):te=z3.sRGBToLinear(te):(st!==Rs||rt!==Lu)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Ne)),te}this.allocateTextureUnit=V,this.resetTextureUnits=le,this.setTexture2D=j,this.setTexture2DArray=ie,this.setTexture3D=D,this.setTextureCube=q,this.rebindTextures=Te,this.setupRenderTarget=ae,this.updateRenderTargetMipmap=gt,this.updateMultisampleRenderTarget=Ye,this.setupDepthRenderbuffer=Ue,this.setupFrameBufferTexture=ke,this.useMultisampledRTT=et}function yF(n,e,t){const r=t.isWebGL2;function i(o,s=of){let a;if(o===Lu)return n.UNSIGNED_BYTE;if(o===R3)return n.UNSIGNED_SHORT_4_4_4_4;if(o===L3)return n.UNSIGNED_SHORT_5_5_5_1;if(o===ON)return n.BYTE;if(o===BN)return n.SHORT;if(o===Bw)return n.UNSIGNED_SHORT;if(o===P3)return n.INT;if(o===bc)return n.UNSIGNED_INT;if(o===vs)return n.FLOAT;if(o===Ls)return r?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(o===UN)return n.ALPHA;if(o===Rs)return n.RGBA;if(o===zN)return n.LUMINANCE;if(o===HN)return n.LUMINANCE_ALPHA;if(o===nf)return n.DEPTH_COMPONENT;if(o===Od)return n.DEPTH_STENCIL;if(o===Wx)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(o===k3)return n.RED;if(o===I3)return n.RED_INTEGER;if(o===GN)return n.RG;if(o===N3)return n.RG_INTEGER;if(o===F3)return n.RGBA_INTEGER;if(o===X2||o===Y2||o===Z2||o===K2)if(s===Hn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(o===X2)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===Y2)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===Z2)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===K2)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(o===X2)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===Y2)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===Z2)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===K2)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===eM||o===tM||o===nM||o===rM)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(o===eM)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===tM)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===nM)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===rM)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===VN)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===iM||o===oM)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(o===iM)return s===Hn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(o===oM)return s===Hn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===sM||o===aM||o===lM||o===uM||o===cM||o===hM||o===fM||o===dM||o===pM||o===mM||o===gM||o===vM||o===yM||o===xM)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(o===sM)return s===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===aM)return s===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===lM)return s===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===uM)return s===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===cM)return s===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===hM)return s===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===fM)return s===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===dM)return s===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===pM)return s===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===mM)return s===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===gM)return s===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===vM)return s===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===yM)return s===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===xM)return s===Hn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===J2)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(o===J2)return s===Hn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(o===WN||o===wM||o===SM||o===_M)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(o===J2)return a.COMPRESSED_RED_RGTC1_EXT;if(o===wM)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===SM)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===_M)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===tf?r?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[o]!==void 0?n[o]:null}return{convert:i}}class xF extends _i{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Am extends fr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const jj={type:"move"};class B_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Am,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Am,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ye,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ye),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Am,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ye,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ye),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,o=null,s=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(const y of e.hand.values()){const x=t.getJointPose(y,r),g=this._getHandJoint(u,y);x!==null&&(g.matrix.fromArray(x.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=x.radius),g.visible=x!==null}const c=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],f=c.position.distanceTo(h.position),d=.02,v=.005;u.inputState.pinching&&f>d+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&f<=d-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,r),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(jj)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=o!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Am;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class wF extends Di{constructor(e,t,r,i,o,s,a,l,u,c){if(c=c!==void 0?c:nf,c!==nf&&c!==Od)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===nf&&(r=bc),r===void 0&&c===Od&&(r=tf),super(null,i,o,s,a,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Wi,this.minFilter=l!==void 0?l:Wi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class qj extends Vc{constructor(e,t){super();const r=this;let i=null,o=1,s=null,a="local-floor",l=1,u=null,c=null,h=null,f=null,d=null,v=null;const y=t.getContextAttributes();let x=null,g=null;const S=[],_=[],E=new _i;E.layers.enable(1),E.viewport=new Or;const C=new _i;C.layers.enable(2),C.viewport=new Or;const I=[E,C],F=new xF;F.layers.enable(1),F.layers.enable(2);let R=null,k=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ie){let D=S[ie];return D===void 0&&(D=new B_,S[ie]=D),D.getTargetRaySpace()},this.getControllerGrip=function(ie){let D=S[ie];return D===void 0&&(D=new B_,S[ie]=D),D.getGripSpace()},this.getHand=function(ie){let D=S[ie];return D===void 0&&(D=new B_,S[ie]=D),D.getHandSpace()};function L(ie){const D=_.indexOf(ie.inputSource);if(D===-1)return;const q=S[D];q!==void 0&&(q.update(ie.inputSource,ie.frame,u||s),q.dispatchEvent({type:ie.type,data:ie.inputSource}))}function N(){i.removeEventListener("select",L),i.removeEventListener("selectstart",L),i.removeEventListener("selectend",L),i.removeEventListener("squeeze",L),i.removeEventListener("squeezestart",L),i.removeEventListener("squeezeend",L),i.removeEventListener("end",N),i.removeEventListener("inputsourceschange",z);for(let ie=0;ie<S.length;ie++){const D=_[ie];D!==null&&(_[ie]=null,S[ie].disconnect(D))}R=null,k=null,e.setRenderTarget(x),d=null,f=null,h=null,i=null,g=null,j.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ie){o=ie,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ie){a=ie,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(ie){u=ie},this.getBaseLayer=function(){return f!==null?f:d},this.getBinding=function(){return h},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(ie){if(i=ie,i!==null){if(x=e.getRenderTarget(),i.addEventListener("select",L),i.addEventListener("selectstart",L),i.addEventListener("selectend",L),i.addEventListener("squeeze",L),i.addEventListener("squeezestart",L),i.addEventListener("squeezeend",L),i.addEventListener("end",N),i.addEventListener("inputsourceschange",z),y.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const D={antialias:i.renderState.layers===void 0?y.antialias:!0,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(i,t,D),i.updateRenderState({baseLayer:d}),g=new jl(d.framebufferWidth,d.framebufferHeight,{format:Rs,type:Lu,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let D=null,q=null,Z=null;y.depth&&(Z=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,D=y.stencil?Od:nf,q=y.stencil?tf:bc);const Q={colorFormat:t.RGBA8,depthFormat:Z,scaleFactor:o};h=new XRWebGLBinding(i,t),f=h.createProjectionLayer(Q),i.updateRenderState({layers:[f]}),g=new jl(f.textureWidth,f.textureHeight,{format:Rs,type:Lu,depthTexture:new wF(f.textureWidth,f.textureHeight,q,void 0,void 0,void 0,void 0,void 0,void 0,D),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0});const se=e.properties.get(g);se.__ignoreDepthValues=f.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=await i.requestReferenceSpace(a),j.setContext(i),j.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function z(ie){for(let D=0;D<ie.removed.length;D++){const q=ie.removed[D],Z=_.indexOf(q);Z>=0&&(_[Z]=null,S[Z].disconnect(q))}for(let D=0;D<ie.added.length;D++){const q=ie.added[D];let Z=_.indexOf(q);if(Z===-1){for(let se=0;se<S.length;se++)if(se>=_.length){_.push(q),Z=se;break}else if(_[se]===null){_[se]=q,Z=se;break}if(Z===-1)break}const Q=S[Z];Q&&Q.connect(q)}}const H=new ye,G=new ye;function K(ie,D,q){H.setFromMatrixPosition(D.matrixWorld),G.setFromMatrixPosition(q.matrixWorld);const Z=H.distanceTo(G),Q=D.projectionMatrix.elements,se=q.projectionMatrix.elements,me=Q[14]/(Q[10]-1),Se=Q[14]/(Q[10]+1),Ce=(Q[9]+1)/Q[5],$e=(Q[9]-1)/Q[5],ke=(Q[8]-1)/Q[0],fe=(se[8]+1)/se[0],Ie=me*ke,Ue=me*fe,Te=Z/(-ke+fe),ae=Te*-ke;D.matrixWorld.decompose(ie.position,ie.quaternion,ie.scale),ie.translateX(ae),ie.translateZ(Te),ie.matrixWorld.compose(ie.position,ie.quaternion,ie.scale),ie.matrixWorldInverse.copy(ie.matrixWorld).invert();const gt=me+Te,Ye=Se+Te,Ge=Ie-ae,et=Ue+(Z-ae),vt=Ce*Se/Ye*gt,bt=$e*Se/Ye*gt;ie.projectionMatrix.makePerspective(Ge,et,vt,bt,gt,Ye),ie.projectionMatrixInverse.copy(ie.projectionMatrix).invert()}function ee(ie,D){D===null?ie.matrixWorld.copy(ie.matrix):ie.matrixWorld.multiplyMatrices(D.matrixWorld,ie.matrix),ie.matrixWorldInverse.copy(ie.matrixWorld).invert()}this.updateCamera=function(ie){if(i===null)return;F.near=C.near=E.near=ie.near,F.far=C.far=E.far=ie.far,(R!==F.near||k!==F.far)&&(i.updateRenderState({depthNear:F.near,depthFar:F.far}),R=F.near,k=F.far);const D=ie.parent,q=F.cameras;ee(F,D);for(let Z=0;Z<q.length;Z++)ee(q[Z],D);q.length===2?K(F,E,C):F.projectionMatrix.copy(E.projectionMatrix),le(ie,F,D)};function le(ie,D,q){q===null?ie.matrix.copy(D.matrixWorld):(ie.matrix.copy(q.matrixWorld),ie.matrix.invert(),ie.matrix.multiply(D.matrixWorld)),ie.matrix.decompose(ie.position,ie.quaternion,ie.scale),ie.updateMatrixWorld(!0);const Z=ie.children;for(let Q=0,se=Z.length;Q<se;Q++)Z[Q].updateMatrixWorld(!0);ie.projectionMatrix.copy(D.projectionMatrix),ie.projectionMatrixInverse.copy(D.projectionMatrixInverse),ie.isPerspectiveCamera&&(ie.fov=rg*2*Math.atan(1/ie.projectionMatrix.elements[5]),ie.zoom=1)}this.getCamera=function(){return F},this.getFoveation=function(){if(!(f===null&&d===null))return l},this.setFoveation=function(ie){l=ie,f!==null&&(f.fixedFoveation=ie),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=ie)};let V=null;function J(ie,D){if(c=D.getViewerPose(u||s),v=D,c!==null){const q=c.views;d!==null&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let Z=!1;q.length!==F.cameras.length&&(F.cameras.length=0,Z=!0);for(let Q=0;Q<q.length;Q++){const se=q[Q];let me=null;if(d!==null)me=d.getViewport(se);else{const Ce=h.getViewSubImage(f,se);me=Ce.viewport,Q===0&&(e.setRenderTargetTextures(g,Ce.colorTexture,f.ignoreDepthValues?void 0:Ce.depthStencilTexture),e.setRenderTarget(g))}let Se=I[Q];Se===void 0&&(Se=new _i,Se.layers.enable(Q),Se.viewport=new Or,I[Q]=Se),Se.matrix.fromArray(se.transform.matrix),Se.matrix.decompose(Se.position,Se.quaternion,Se.scale),Se.projectionMatrix.fromArray(se.projectionMatrix),Se.projectionMatrixInverse.copy(Se.projectionMatrix).invert(),Se.viewport.set(me.x,me.y,me.width,me.height),Q===0&&(F.matrix.copy(Se.matrix),F.matrix.decompose(F.position,F.quaternion,F.scale)),Z===!0&&F.cameras.push(Se)}}for(let q=0;q<S.length;q++){const Z=_[q],Q=S[q];Z!==null&&Q!==void 0&&Q.update(Z,D,u||s)}V&&V(ie,D),D.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:D}),v=null}const j=new dF;j.setAnimationLoop(J),this.setAnimationLoop=function(ie){V=ie},this.dispose=function(){}}}function $j(n,e){function t(x,g){x.matrixAutoUpdate===!0&&x.updateMatrix(),g.value.copy(x.matrix)}function r(x,g){g.color.getRGB(x.fogColor.value,cF(n)),g.isFog?(x.fogNear.value=g.near,x.fogFar.value=g.far):g.isFogExp2&&(x.fogDensity.value=g.density)}function i(x,g,S,_,E){g.isMeshBasicMaterial||g.isMeshLambertMaterial?o(x,g):g.isMeshToonMaterial?(o(x,g),h(x,g)):g.isMeshPhongMaterial?(o(x,g),c(x,g)):g.isMeshStandardMaterial?(o(x,g),f(x,g),g.isMeshPhysicalMaterial&&d(x,g,E)):g.isMeshMatcapMaterial?(o(x,g),v(x,g)):g.isMeshDepthMaterial?o(x,g):g.isMeshDistanceMaterial?(o(x,g),y(x,g)):g.isMeshNormalMaterial?o(x,g):g.isLineBasicMaterial?(s(x,g),g.isLineDashedMaterial&&a(x,g)):g.isPointsMaterial?l(x,g,S,_):g.isSpriteMaterial?u(x,g):g.isShadowMaterial?(x.color.value.copy(g.color),x.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function o(x,g){x.opacity.value=g.opacity,g.color&&x.diffuse.value.copy(g.color),g.emissive&&x.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.bumpMap&&(x.bumpMap.value=g.bumpMap,t(g.bumpMap,x.bumpMapTransform),x.bumpScale.value=g.bumpScale,g.side===Ns&&(x.bumpScale.value*=-1)),g.normalMap&&(x.normalMap.value=g.normalMap,t(g.normalMap,x.normalMapTransform),x.normalScale.value.copy(g.normalScale),g.side===Ns&&x.normalScale.value.negate()),g.displacementMap&&(x.displacementMap.value=g.displacementMap,t(g.displacementMap,x.displacementMapTransform),x.displacementScale.value=g.displacementScale,x.displacementBias.value=g.displacementBias),g.emissiveMap&&(x.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,x.emissiveMapTransform)),g.specularMap&&(x.specularMap.value=g.specularMap,t(g.specularMap,x.specularMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest);const S=e.get(g).envMap;if(S&&(x.envMap.value=S,x.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=g.reflectivity,x.ior.value=g.ior,x.refractionRatio.value=g.refractionRatio),g.lightMap){x.lightMap.value=g.lightMap;const _=n._useLegacyLights===!0?Math.PI:1;x.lightMapIntensity.value=g.lightMapIntensity*_,t(g.lightMap,x.lightMapTransform)}g.aoMap&&(x.aoMap.value=g.aoMap,x.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,x.aoMapTransform))}function s(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform))}function a(x,g){x.dashSize.value=g.dashSize,x.totalSize.value=g.dashSize+g.gapSize,x.scale.value=g.scale}function l(x,g,S,_){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.size.value=g.size*S,x.scale.value=_*.5,g.map&&(x.map.value=g.map,t(g.map,x.uvTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function u(x,g){x.diffuse.value.copy(g.color),x.opacity.value=g.opacity,x.rotation.value=g.rotation,g.map&&(x.map.value=g.map,t(g.map,x.mapTransform)),g.alphaMap&&(x.alphaMap.value=g.alphaMap,t(g.alphaMap,x.alphaMapTransform)),g.alphaTest>0&&(x.alphaTest.value=g.alphaTest)}function c(x,g){x.specular.value.copy(g.specular),x.shininess.value=Math.max(g.shininess,1e-4)}function h(x,g){g.gradientMap&&(x.gradientMap.value=g.gradientMap)}function f(x,g){x.metalness.value=g.metalness,g.metalnessMap&&(x.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,x.metalnessMapTransform)),x.roughness.value=g.roughness,g.roughnessMap&&(x.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,x.roughnessMapTransform)),e.get(g).envMap&&(x.envMapIntensity.value=g.envMapIntensity)}function d(x,g,S){x.ior.value=g.ior,g.sheen>0&&(x.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),x.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(x.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,x.sheenColorMapTransform)),g.sheenRoughnessMap&&(x.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,x.sheenRoughnessMapTransform))),g.clearcoat>0&&(x.clearcoat.value=g.clearcoat,x.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(x.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,x.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(x.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Ns&&x.clearcoatNormalScale.value.negate())),g.iridescence>0&&(x.iridescence.value=g.iridescence,x.iridescenceIOR.value=g.iridescenceIOR,x.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(x.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,x.iridescenceMapTransform)),g.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),g.transmission>0&&(x.transmission.value=g.transmission,x.transmissionSamplerMap.value=S.texture,x.transmissionSamplerSize.value.set(S.width,S.height),g.transmissionMap&&(x.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,x.transmissionMapTransform)),x.thickness.value=g.thickness,g.thicknessMap&&(x.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=g.attenuationDistance,x.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(x.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(x.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=g.specularIntensity,x.specularColor.value.copy(g.specularColor),g.specularColorMap&&(x.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,x.specularColorMapTransform)),g.specularIntensityMap&&(x.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,x.specularIntensityMapTransform))}function v(x,g){g.matcap&&(x.matcap.value=g.matcap)}function y(x,g){const S=e.get(g).light;x.referencePosition.value.setFromMatrixPosition(S.matrixWorld),x.nearDistance.value=S.shadow.camera.near,x.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function Xj(n,e,t,r){let i={},o={},s=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(S,_){const E=_.program;r.uniformBlockBinding(S,E)}function u(S,_){let E=i[S.id];E===void 0&&(v(S),E=c(S),i[S.id]=E,S.addEventListener("dispose",x));const C=_.program;r.updateUBOMapping(S,C);const I=e.render.frame;o[S.id]!==I&&(f(S),o[S.id]=I)}function c(S){const _=h();S.__bindingPointIndex=_;const E=n.createBuffer(),C=S.__size,I=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,C,I),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,_,E),E}function h(){for(let S=0;S<a;S++)if(s.indexOf(S)===-1)return s.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(S){const _=i[S.id],E=S.uniforms,C=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,_);for(let I=0,F=E.length;I<F;I++){const R=E[I];if(d(R,I,C)===!0){const k=R.__offset,L=Array.isArray(R.value)?R.value:[R.value];let N=0;for(let z=0;z<L.length;z++){const H=L[z],G=y(H);typeof H=="number"?(R.__data[0]=H,n.bufferSubData(n.UNIFORM_BUFFER,k+N,R.__data)):H.isMatrix3?(R.__data[0]=H.elements[0],R.__data[1]=H.elements[1],R.__data[2]=H.elements[2],R.__data[3]=H.elements[0],R.__data[4]=H.elements[3],R.__data[5]=H.elements[4],R.__data[6]=H.elements[5],R.__data[7]=H.elements[0],R.__data[8]=H.elements[6],R.__data[9]=H.elements[7],R.__data[10]=H.elements[8],R.__data[11]=H.elements[0]):(H.toArray(R.__data,N),N+=G.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,k,R.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function d(S,_,E){const C=S.value;if(E[_]===void 0){if(typeof C=="number")E[_]=C;else{const I=Array.isArray(C)?C:[C],F=[];for(let R=0;R<I.length;R++)F.push(I[R].clone());E[_]=F}return!0}else if(typeof C=="number"){if(E[_]!==C)return E[_]=C,!0}else{const I=Array.isArray(E[_])?E[_]:[E[_]],F=Array.isArray(C)?C:[C];for(let R=0;R<I.length;R++){const k=I[R];if(k.equals(F[R])===!1)return k.copy(F[R]),!0}}return!1}function v(S){const _=S.uniforms;let E=0;const C=16;let I=0;for(let F=0,R=_.length;F<R;F++){const k=_[F],L={boundary:0,storage:0},N=Array.isArray(k.value)?k.value:[k.value];for(let z=0,H=N.length;z<H;z++){const G=N[z],K=y(G);L.boundary+=K.boundary,L.storage+=K.storage}if(k.__data=new Float32Array(L.storage/Float32Array.BYTES_PER_ELEMENT),k.__offset=E,F>0){I=E%C;const z=C-I;I!==0&&z-L.boundary<0&&(E+=C-I,k.__offset=E)}E+=L.storage}return I=E%C,I>0&&(E+=C-I),S.__size=E,S.__cache={},this}function y(S){const _={boundary:0,storage:0};return typeof S=="number"?(_.boundary=4,_.storage=4):S.isVector2?(_.boundary=8,_.storage=8):S.isVector3||S.isColor?(_.boundary=16,_.storage=12):S.isVector4?(_.boundary=16,_.storage=16):S.isMatrix3?(_.boundary=48,_.storage=48):S.isMatrix4?(_.boundary=64,_.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),_}function x(S){const _=S.target;_.removeEventListener("dispose",x);const E=s.indexOf(_.__bindingPointIndex);s.splice(E,1),n.deleteBuffer(i[_.id]),delete i[_.id],delete o[_.id]}function g(){for(const S in i)n.deleteBuffer(i[S]);s=[],i={},o={}}return{bind:l,update:u,dispose:g}}function Yj(){const n=Ov("canvas");return n.style.display="block",n}class Vw{constructor(e={}){const{canvas:t=Yj(),context:r=null,depth:i=!0,stencil:o=!0,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let f;r!==null?f=r.getContextAttributes().alpha:f=s;const d=new Uint32Array(4),v=new Int32Array(4);let y=null,x=null;const g=[],S=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Hn,this._useLegacyLights=!1,this.toneMapping=Ru,this.toneMappingExposure=1;const _=this;let E=!1,C=0,I=0,F=null,R=-1,k=null;const L=new Or,N=new Or;let z=null;const H=new Kt(0);let G=0,K=t.width,ee=t.height,le=1,V=null,J=null;const j=new Or(0,0,K,ee),ie=new Or(0,0,K,ee);let D=!1;const q=new Hw;let Z=!1,Q=!1,se=null;const me=new zn,Se=new xt,Ce=new ye,$e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ke(){return F===null?le:1}let fe=r;function Ie(B,re){for(let ve=0;ve<B.length;ve++){const ge=B[ve],_e=t.getContext(ge,re);if(_e!==null)return _e}return null}try{const B={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${f1}`),t.addEventListener("webglcontextlost",Oe,!1),t.addEventListener("webglcontextrestored",Ve,!1),t.addEventListener("webglcontextcreationerror",At,!1),fe===null){const re=["webgl2","webgl","experimental-webgl"];if(_.isWebGL1Renderer===!0&&re.shift(),fe=Ie(re,B),fe===null)throw Ie(re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&fe instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),fe.getShaderPrecisionFormat===void 0&&(fe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(B){throw console.error("THREE.WebGLRenderer: "+B.message),B}let Ue,Te,ae,gt,Ye,Ge,et,vt,bt,pe,te,Ne,st,rt,pt,wt,ut,Pe,Ht,Pt,Dt,Tt,be,Ke;function ct(){Ue=new cW(fe),Te=new iW(fe,Ue,e),Ue.init(Te),Tt=new yF(fe,Ue,Te),ae=new Vj(fe,Ue,Te),gt=new dW(fe),Ye=new Lj,Ge=new Wj(fe,Ue,ae,Ye,Te,Tt,gt),et=new sW(_),vt=new uW(_),bt=new b9(fe,Te),be=new nW(fe,Ue,bt,Te),pe=new hW(fe,bt,gt,be),te=new vW(fe,pe,bt,gt),Ht=new gW(fe,Te,Ge),wt=new oW(Ye),Ne=new Rj(_,et,vt,Ue,Te,be,wt),st=new $j(_,Ye),rt=new Ij,pt=new Uj(Ue,Te),Pe=new tW(_,et,vt,ae,te,f,l),ut=new Gj(_,te,Te),Ke=new Xj(fe,gt,Te,ae),Pt=new rW(fe,Ue,gt,Te),Dt=new fW(fe,Ue,gt,Te),gt.programs=Ne.programs,_.capabilities=Te,_.extensions=Ue,_.properties=Ye,_.renderLists=rt,_.shadowMap=ut,_.state=ae,_.info=gt}ct();const Ae=new qj(_,fe);this.xr=Ae,this.getContext=function(){return fe},this.getContextAttributes=function(){return fe.getContextAttributes()},this.forceContextLoss=function(){const B=Ue.get("WEBGL_lose_context");B&&B.loseContext()},this.forceContextRestore=function(){const B=Ue.get("WEBGL_lose_context");B&&B.restoreContext()},this.getPixelRatio=function(){return le},this.setPixelRatio=function(B){B!==void 0&&(le=B,this.setSize(K,ee,!1))},this.getSize=function(B){return B.set(K,ee)},this.setSize=function(B,re,ve=!0){if(Ae.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}K=B,ee=re,t.width=Math.floor(B*le),t.height=Math.floor(re*le),ve===!0&&(t.style.width=B+"px",t.style.height=re+"px"),this.setViewport(0,0,B,re)},this.getDrawingBufferSize=function(B){return B.set(K*le,ee*le).floor()},this.setDrawingBufferSize=function(B,re,ve){K=B,ee=re,le=ve,t.width=Math.floor(B*ve),t.height=Math.floor(re*ve),this.setViewport(0,0,B,re)},this.getCurrentViewport=function(B){return B.copy(L)},this.getViewport=function(B){return B.copy(j)},this.setViewport=function(B,re,ve,ge){B.isVector4?j.set(B.x,B.y,B.z,B.w):j.set(B,re,ve,ge),ae.viewport(L.copy(j).multiplyScalar(le).floor())},this.getScissor=function(B){return B.copy(ie)},this.setScissor=function(B,re,ve,ge){B.isVector4?ie.set(B.x,B.y,B.z,B.w):ie.set(B,re,ve,ge),ae.scissor(N.copy(ie).multiplyScalar(le).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(B){ae.setScissorTest(D=B)},this.setOpaqueSort=function(B){V=B},this.setTransparentSort=function(B){J=B},this.getClearColor=function(B){return B.copy(Pe.getClearColor())},this.setClearColor=function(){Pe.setClearColor.apply(Pe,arguments)},this.getClearAlpha=function(){return Pe.getClearAlpha()},this.setClearAlpha=function(){Pe.setClearAlpha.apply(Pe,arguments)},this.clear=function(B=!0,re=!0,ve=!0){let ge=0;if(B){let _e=!1;if(F!==null){const qe=F.texture.format;_e=qe===F3||qe===N3||qe===I3}if(_e){const qe=F.texture.type,Xe=qe===Lu||qe===bc||qe===Bw||qe===tf||qe===R3||qe===L3,it=Pe.getClearColor(),tt=Pe.getClearAlpha(),dt=it.r,nt=it.g,jt=it.b;Xe?(d[0]=dt,d[1]=nt,d[2]=jt,d[3]=tt,fe.clearBufferuiv(fe.COLOR,0,d)):(v[0]=dt,v[1]=nt,v[2]=jt,v[3]=tt,fe.clearBufferiv(fe.COLOR,0,v))}else ge|=fe.COLOR_BUFFER_BIT}re&&(ge|=fe.DEPTH_BUFFER_BIT),ve&&(ge|=fe.STENCIL_BUFFER_BIT),fe.clear(ge)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Oe,!1),t.removeEventListener("webglcontextrestored",Ve,!1),t.removeEventListener("webglcontextcreationerror",At,!1),rt.dispose(),pt.dispose(),Ye.dispose(),et.dispose(),vt.dispose(),te.dispose(),be.dispose(),Ke.dispose(),Ne.dispose(),Ae.dispose(),Ae.removeEventListener("sessionstart",wn),Ae.removeEventListener("sessionend",ir),se&&(se.dispose(),se=null),Wt.stop()};function Oe(B){B.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function Ve(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const B=gt.autoReset,re=ut.enabled,ve=ut.autoUpdate,ge=ut.needsUpdate,_e=ut.type;ct(),gt.autoReset=B,ut.enabled=re,ut.autoUpdate=ve,ut.needsUpdate=ge,ut.type=_e}function At(B){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",B.statusMessage)}function Ct(B){const re=B.target;re.removeEventListener("dispose",Ct),Nt(re)}function Nt(B){Xt(B),Ye.remove(B)}function Xt(B){const re=Ye.get(B).programs;re!==void 0&&(re.forEach(function(ve){Ne.releaseProgram(ve)}),B.isShaderMaterial&&Ne.releaseShaderCache(B))}this.renderBufferDirect=function(B,re,ve,ge,_e,qe){re===null&&(re=$e);const Xe=_e.isMesh&&_e.matrixWorld.determinant()<0,it=Ki(B,re,ve,ge,_e);ae.setMaterial(ge,Xe);let tt=ve.index,dt=1;if(ge.wireframe===!0){if(tt=pe.getWireframeAttribute(ve),tt===void 0)return;dt=2}const nt=ve.drawRange,jt=ve.attributes.position;let It=nt.start*dt,Ot=(nt.start+nt.count)*dt;qe!==null&&(It=Math.max(It,qe.start*dt),Ot=Math.min(Ot,(qe.start+qe.count)*dt)),tt!==null?(It=Math.max(It,0),Ot=Math.min(Ot,tt.count)):jt!=null&&(It=Math.max(It,0),Ot=Math.min(Ot,jt.count));const rn=Ot-It;if(rn<0||rn===1/0)return;be.setup(_e,ge,it,ve,tt);let sn,mt=Pt;if(tt!==null&&(sn=bt.get(tt),mt=Dt,mt.setIndex(sn)),_e.isMesh)ge.wireframe===!0?(ae.setLineWidth(ge.wireframeLinewidth*ke()),mt.setMode(fe.LINES)):mt.setMode(fe.TRIANGLES);else if(_e.isLine){let ht=ge.linewidth;ht===void 0&&(ht=1),ae.setLineWidth(ht*ke()),_e.isLineSegments?mt.setMode(fe.LINES):_e.isLineLoop?mt.setMode(fe.LINE_LOOP):mt.setMode(fe.LINE_STRIP)}else _e.isPoints?mt.setMode(fe.POINTS):_e.isSprite&&mt.setMode(fe.TRIANGLES);if(_e.isInstancedMesh)mt.renderInstances(It,rn,_e.count);else if(ve.isInstancedBufferGeometry){const ht=ve._maxInstanceCount!==void 0?ve._maxInstanceCount:1/0,an=Math.min(ve.instanceCount,ht);mt.renderInstances(It,rn,an)}else mt.render(It,rn)},this.compile=function(B,re){function ve(ge,_e,qe){ge.transparent===!0&&ge.side===Ol&&ge.forceSinglePass===!1?(ge.side=Ns,ge.needsUpdate=!0,lr(ge,_e,qe),ge.side=Bc,ge.needsUpdate=!0,lr(ge,_e,qe),ge.side=Ol):lr(ge,_e,qe)}x=pt.get(B),x.init(),S.push(x),B.traverseVisible(function(ge){ge.isLight&&ge.layers.test(re.layers)&&(x.pushLight(ge),ge.castShadow&&x.pushShadow(ge))}),x.setupLights(_._useLegacyLights),B.traverse(function(ge){const _e=ge.material;if(_e)if(Array.isArray(_e))for(let qe=0;qe<_e.length;qe++){const Xe=_e[qe];ve(Xe,B,ge)}else ve(_e,B,ge)}),S.pop(),x=null};let kn=null;function Yn(B){kn&&kn(B)}function wn(){Wt.stop()}function ir(){Wt.start()}const Wt=new dF;Wt.setAnimationLoop(Yn),typeof self<"u"&&Wt.setContext(self),this.setAnimationLoop=function(B){kn=B,Ae.setAnimationLoop(B),B===null?Wt.stop():Wt.start()},Ae.addEventListener("sessionstart",wn),Ae.addEventListener("sessionend",ir),this.render=function(B,re){if(re!==void 0&&re.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;B.matrixWorldAutoUpdate===!0&&B.updateMatrixWorld(),re.parent===null&&re.matrixWorldAutoUpdate===!0&&re.updateMatrixWorld(),Ae.enabled===!0&&Ae.isPresenting===!0&&(Ae.cameraAutoUpdate===!0&&Ae.updateCamera(re),re=Ae.getCamera()),B.isScene===!0&&B.onBeforeRender(_,B,re,F),x=pt.get(B,S.length),x.init(),S.push(x),me.multiplyMatrices(re.projectionMatrix,re.matrixWorldInverse),q.setFromProjectionMatrix(me),Q=this.localClippingEnabled,Z=wt.init(this.clippingPlanes,Q),y=rt.get(B,g.length),y.init(),g.push(y),Yi(B,re,0,_.sortObjects),y.finish(),_.sortObjects===!0&&y.sort(V,J),this.info.render.frame++,Z===!0&&wt.beginShadows();const ve=x.state.shadowsArray;if(ut.render(ve,B,re),Z===!0&&wt.endShadows(),this.info.autoReset===!0&&this.info.reset(),Pe.render(y,B),x.setupLights(_._useLegacyLights),re.isArrayCamera){const ge=re.cameras;for(let _e=0,qe=ge.length;_e<qe;_e++){const Xe=ge[_e];Zi(y,B,Xe,Xe.viewport)}}else Zi(y,B,re);F!==null&&(Ge.updateMultisampleRenderTarget(F),Ge.updateRenderTargetMipmap(F)),B.isScene===!0&&B.onAfterRender(_,B,re),be.resetDefaultState(),R=-1,k=null,S.pop(),S.length>0?x=S[S.length-1]:x=null,g.pop(),g.length>0?y=g[g.length-1]:y=null};function Yi(B,re,ve,ge){if(B.visible===!1)return;if(B.layers.test(re.layers)){if(B.isGroup)ve=B.renderOrder;else if(B.isLOD)B.autoUpdate===!0&&B.update(re);else if(B.isLight)x.pushLight(B),B.castShadow&&x.pushShadow(B);else if(B.isSprite){if(!B.frustumCulled||q.intersectsSprite(B)){ge&&Ce.setFromMatrixPosition(B.matrixWorld).applyMatrix4(me);const Xe=te.update(B),it=B.material;it.visible&&y.push(B,Xe,it,ve,Ce.z,null)}}else if((B.isMesh||B.isLine||B.isPoints)&&(!B.frustumCulled||q.intersectsObject(B))){const Xe=te.update(B),it=B.material;if(ge&&(B.boundingSphere!==void 0?(B.boundingSphere===null&&B.computeBoundingSphere(),Ce.copy(B.boundingSphere.center)):(Xe.boundingSphere===null&&Xe.computeBoundingSphere(),Ce.copy(Xe.boundingSphere.center)),Ce.applyMatrix4(B.matrixWorld).applyMatrix4(me)),Array.isArray(it)){const tt=Xe.groups;for(let dt=0,nt=tt.length;dt<nt;dt++){const jt=tt[dt],It=it[jt.materialIndex];It&&It.visible&&y.push(B,Xe,It,ve,Ce.z,jt)}}else it.visible&&y.push(B,Xe,it,ve,Ce.z,null)}}const qe=B.children;for(let Xe=0,it=qe.length;Xe<it;Xe++)Yi(qe[Xe],re,ve,ge)}function Zi(B,re,ve,ge){const _e=B.opaque,qe=B.transmissive,Xe=B.transparent;x.setupLightsView(ve),Z===!0&&wt.setGlobalState(_.clippingPlanes,ve),qe.length>0&&Ir(_e,qe,re,ve),ge&&ae.viewport(L.copy(ge)),_e.length>0&&ar(_e,re,ve),qe.length>0&&ar(qe,re,ve),Xe.length>0&&ar(Xe,re,ve),ae.buffers.depth.setTest(!0),ae.buffers.depth.setMask(!0),ae.buffers.color.setMask(!0),ae.setPolygonOffset(!1)}function Ir(B,re,ve,ge){const _e=Te.isWebGL2;se===null&&(se=new jl(1,1,{generateMipmaps:!0,type:Ue.has("EXT_color_buffer_half_float")?Ls:Lu,minFilter:cf,samples:_e?4:0})),_.getDrawingBufferSize(Se),_e?se.setSize(Se.x,Se.y):se.setSize(jx(Se.x),jx(Se.y));const qe=_.getRenderTarget();_.setRenderTarget(se),_.getClearColor(H),G=_.getClearAlpha(),G<1&&_.setClearColor(16777215,.5),_.clear();const Xe=_.toneMapping;_.toneMapping=Ru,ar(B,ve,ge),Ge.updateMultisampleRenderTarget(se),Ge.updateRenderTargetMipmap(se);let it=!1;for(let tt=0,dt=re.length;tt<dt;tt++){const nt=re[tt],jt=nt.object,It=nt.geometry,Ot=nt.material,rn=nt.group;if(Ot.side===Ol&&jt.layers.test(ge.layers)){const sn=Ot.side;Ot.side=Ns,Ot.needsUpdate=!0,dr(jt,ve,ge,It,Ot,rn),Ot.side=sn,Ot.needsUpdate=!0,it=!0}}it===!0&&(Ge.updateMultisampleRenderTarget(se),Ge.updateRenderTargetMipmap(se)),_.setRenderTarget(qe),_.setClearColor(H,G),_.toneMapping=Xe}function ar(B,re,ve){const ge=re.isScene===!0?re.overrideMaterial:null;for(let _e=0,qe=B.length;_e<qe;_e++){const Xe=B[_e],it=Xe.object,tt=Xe.geometry,dt=ge===null?Xe.material:ge,nt=Xe.group;it.layers.test(ve.layers)&&dr(it,re,ve,tt,dt,nt)}}function dr(B,re,ve,ge,_e,qe){B.onBeforeRender(_,re,ve,ge,_e,qe),B.modelViewMatrix.multiplyMatrices(ve.matrixWorldInverse,B.matrixWorld),B.normalMatrix.getNormalMatrix(B.modelViewMatrix),_e.onBeforeRender(_,re,ve,ge,B,qe),_e.transparent===!0&&_e.side===Ol&&_e.forceSinglePass===!1?(_e.side=Ns,_e.needsUpdate=!0,_.renderBufferDirect(ve,re,ge,_e,B,qe),_e.side=Bc,_e.needsUpdate=!0,_.renderBufferDirect(ve,re,ge,_e,B,qe),_e.side=Ol):_.renderBufferDirect(ve,re,ge,_e,B,qe),B.onAfterRender(_,re,ve,ge,_e,qe)}function lr(B,re,ve){re.isScene!==!0&&(re=$e);const ge=Ye.get(B),_e=x.state.lights,qe=x.state.shadowsArray,Xe=_e.state.version,it=Ne.getParameters(B,_e.state,qe,re,ve),tt=Ne.getProgramCacheKey(it);let dt=ge.programs;ge.environment=B.isMeshStandardMaterial?re.environment:null,ge.fog=re.fog,ge.envMap=(B.isMeshStandardMaterial?vt:et).get(B.envMap||ge.environment),dt===void 0&&(B.addEventListener("dispose",Ct),dt=new Map,ge.programs=dt);let nt=dt.get(tt);if(nt!==void 0){if(ge.currentProgram===nt&&ge.lightsStateVersion===Xe)return yn(B,it),nt}else it.uniforms=Ne.getUniforms(B),B.onBuild(ve,it,_),B.onBeforeCompile(it,_),nt=Ne.acquireProgram(it,tt),dt.set(tt,nt),ge.uniforms=it.uniforms;const jt=ge.uniforms;(!B.isShaderMaterial&&!B.isRawShaderMaterial||B.clipping===!0)&&(jt.clippingPlanes=wt.uniform),yn(B,it),ge.needsLights=$(B),ge.lightsStateVersion=Xe,ge.needsLights&&(jt.ambientLightColor.value=_e.state.ambient,jt.lightProbe.value=_e.state.probe,jt.directionalLights.value=_e.state.directional,jt.directionalLightShadows.value=_e.state.directionalShadow,jt.spotLights.value=_e.state.spot,jt.spotLightShadows.value=_e.state.spotShadow,jt.rectAreaLights.value=_e.state.rectArea,jt.ltc_1.value=_e.state.rectAreaLTC1,jt.ltc_2.value=_e.state.rectAreaLTC2,jt.pointLights.value=_e.state.point,jt.pointLightShadows.value=_e.state.pointShadow,jt.hemisphereLights.value=_e.state.hemi,jt.directionalShadowMap.value=_e.state.directionalShadowMap,jt.directionalShadowMatrix.value=_e.state.directionalShadowMatrix,jt.spotShadowMap.value=_e.state.spotShadowMap,jt.spotLightMatrix.value=_e.state.spotLightMatrix,jt.spotLightMap.value=_e.state.spotLightMap,jt.pointShadowMap.value=_e.state.pointShadowMap,jt.pointShadowMatrix.value=_e.state.pointShadowMatrix);const It=nt.getUniforms(),Ot=tx.seqWithValue(It.seq,jt);return ge.currentProgram=nt,ge.uniformsList=Ot,nt}function yn(B,re){const ve=Ye.get(B);ve.outputColorSpace=re.outputColorSpace,ve.instancing=re.instancing,ve.instancingColor=re.instancingColor,ve.skinning=re.skinning,ve.morphTargets=re.morphTargets,ve.morphNormals=re.morphNormals,ve.morphColors=re.morphColors,ve.morphTargetsCount=re.morphTargetsCount,ve.numClippingPlanes=re.numClippingPlanes,ve.numIntersection=re.numClipIntersection,ve.vertexAlphas=re.vertexAlphas,ve.vertexTangents=re.vertexTangents,ve.toneMapping=re.toneMapping}function Ki(B,re,ve,ge,_e){re.isScene!==!0&&(re=$e),Ge.resetTextureUnits();const qe=re.fog,Xe=ge.isMeshStandardMaterial?re.environment:null,it=F===null?_.outputColorSpace:F.isXRRenderTarget===!0?F.texture.colorSpace:Wl,tt=(ge.isMeshStandardMaterial?vt:et).get(ge.envMap||Xe),dt=ge.vertexColors===!0&&!!ve.attributes.color&&ve.attributes.color.itemSize===4,nt=!!ve.attributes.tangent&&(!!ge.normalMap||ge.anisotropy>0),jt=!!ve.morphAttributes.position,It=!!ve.morphAttributes.normal,Ot=!!ve.morphAttributes.color;let rn=Ru;ge.toneMapped&&(F===null||F.isXRRenderTarget===!0)&&(rn=_.toneMapping);const sn=ve.morphAttributes.position||ve.morphAttributes.normal||ve.morphAttributes.color,mt=sn!==void 0?sn.length:0,ht=Ye.get(ge),an=x.state.lights;if(Z===!0&&(Q===!0||B!==k)){const fn=B===k&&ge.id===R;wt.setState(ge,B,fn)}let Zt=!1;ge.version===ht.__version?(ht.needsLights&&ht.lightsStateVersion!==an.state.version||ht.outputColorSpace!==it||_e.isInstancedMesh&&ht.instancing===!1||!_e.isInstancedMesh&&ht.instancing===!0||_e.isSkinnedMesh&&ht.skinning===!1||!_e.isSkinnedMesh&&ht.skinning===!0||_e.isInstancedMesh&&ht.instancingColor===!0&&_e.instanceColor===null||_e.isInstancedMesh&&ht.instancingColor===!1&&_e.instanceColor!==null||ht.envMap!==tt||ge.fog===!0&&ht.fog!==qe||ht.numClippingPlanes!==void 0&&(ht.numClippingPlanes!==wt.numPlanes||ht.numIntersection!==wt.numIntersection)||ht.vertexAlphas!==dt||ht.vertexTangents!==nt||ht.morphTargets!==jt||ht.morphNormals!==It||ht.morphColors!==Ot||ht.toneMapping!==rn||Te.isWebGL2===!0&&ht.morphTargetsCount!==mt)&&(Zt=!0):(Zt=!0,ht.__version=ge.version);let Mn=ht.currentProgram;Zt===!0&&(Mn=lr(ge,re,_e));let pn=!1,xn=!1,or=!1;const Kn=Mn.getUniforms(),ur=ht.uniforms;if(ae.useProgram(Mn.program)&&(pn=!0,xn=!0,or=!0),ge.id!==R&&(R=ge.id,xn=!0),pn||k!==B){if(Kn.setValue(fe,"projectionMatrix",B.projectionMatrix),Te.logarithmicDepthBuffer&&Kn.setValue(fe,"logDepthBufFC",2/(Math.log(B.far+1)/Math.LN2)),k!==B&&(k=B,xn=!0,or=!0),ge.isShaderMaterial||ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshStandardMaterial||ge.envMap){const fn=Kn.map.cameraPosition;fn!==void 0&&fn.setValue(fe,Ce.setFromMatrixPosition(B.matrixWorld))}(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial)&&Kn.setValue(fe,"isOrthographic",B.isOrthographicCamera===!0),(ge.isMeshPhongMaterial||ge.isMeshToonMaterial||ge.isMeshLambertMaterial||ge.isMeshBasicMaterial||ge.isMeshStandardMaterial||ge.isShaderMaterial||ge.isShadowMaterial||_e.isSkinnedMesh)&&Kn.setValue(fe,"viewMatrix",B.matrixWorldInverse)}if(_e.isSkinnedMesh){Kn.setOptional(fe,_e,"bindMatrix"),Kn.setOptional(fe,_e,"bindMatrixInverse");const fn=_e.skeleton;fn&&(Te.floatVertexTextures?(fn.boneTexture===null&&fn.computeBoneTexture(),Kn.setValue(fe,"boneTexture",fn.boneTexture,Ge),Kn.setValue(fe,"boneTextureSize",fn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Kr=ve.morphAttributes;if((Kr.position!==void 0||Kr.normal!==void 0||Kr.color!==void 0&&Te.isWebGL2===!0)&&Ht.update(_e,ve,Mn),(xn||ht.receiveShadow!==_e.receiveShadow)&&(ht.receiveShadow=_e.receiveShadow,Kn.setValue(fe,"receiveShadow",_e.receiveShadow)),ge.isMeshGouraudMaterial&&ge.envMap!==null&&(ur.envMap.value=tt,ur.flipEnvMap.value=tt.isCubeTexture&&tt.isRenderTargetTexture===!1?-1:1),xn&&(Kn.setValue(fe,"toneMappingExposure",_.toneMappingExposure),ht.needsLights&&Bi(ur,or),qe&&ge.fog===!0&&st.refreshFogUniforms(ur,qe),st.refreshMaterialUniforms(ur,ge,le,ee,se),tx.upload(fe,ht.uniformsList,ur,Ge)),ge.isShaderMaterial&&ge.uniformsNeedUpdate===!0&&(tx.upload(fe,ht.uniformsList,ur,Ge),ge.uniformsNeedUpdate=!1),ge.isSpriteMaterial&&Kn.setValue(fe,"center",_e.center),Kn.setValue(fe,"modelViewMatrix",_e.modelViewMatrix),Kn.setValue(fe,"normalMatrix",_e.normalMatrix),Kn.setValue(fe,"modelMatrix",_e.matrixWorld),ge.isShaderMaterial||ge.isRawShaderMaterial){const fn=ge.uniformsGroups;for(let Er=0,Pn=fn.length;Er<Pn;Er++)if(Te.isWebGL2){const Vn=fn[Er];Ke.update(Vn,Mn),Ke.bind(Vn,Mn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Mn}function Bi(B,re){B.ambientLightColor.needsUpdate=re,B.lightProbe.needsUpdate=re,B.directionalLights.needsUpdate=re,B.directionalLightShadows.needsUpdate=re,B.pointLights.needsUpdate=re,B.pointLightShadows.needsUpdate=re,B.spotLights.needsUpdate=re,B.spotLightShadows.needsUpdate=re,B.rectAreaLights.needsUpdate=re,B.hemisphereLights.needsUpdate=re}function $(B){return B.isMeshLambertMaterial||B.isMeshToonMaterial||B.isMeshPhongMaterial||B.isMeshStandardMaterial||B.isShadowMaterial||B.isShaderMaterial&&B.lights===!0}this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return F},this.setRenderTargetTextures=function(B,re,ve){Ye.get(B.texture).__webglTexture=re,Ye.get(B.depthTexture).__webglTexture=ve;const ge=Ye.get(B);ge.__hasExternalTextures=!0,ge.__hasExternalTextures&&(ge.__autoAllocateDepthBuffer=ve===void 0,ge.__autoAllocateDepthBuffer||Ue.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ge.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(B,re){const ve=Ye.get(B);ve.__webglFramebuffer=re,ve.__useDefaultFramebuffer=re===void 0},this.setRenderTarget=function(B,re=0,ve=0){F=B,C=re,I=ve;let ge=!0,_e=null,qe=!1,Xe=!1;if(B){const tt=Ye.get(B);tt.__useDefaultFramebuffer!==void 0?(ae.bindFramebuffer(fe.FRAMEBUFFER,null),ge=!1):tt.__webglFramebuffer===void 0?Ge.setupRenderTarget(B):tt.__hasExternalTextures&&Ge.rebindTextures(B,Ye.get(B.texture).__webglTexture,Ye.get(B.depthTexture).__webglTexture);const dt=B.texture;(dt.isData3DTexture||dt.isDataArrayTexture||dt.isCompressedArrayTexture)&&(Xe=!0);const nt=Ye.get(B).__webglFramebuffer;B.isWebGLCubeRenderTarget?(Array.isArray(nt[re])?_e=nt[re][ve]:_e=nt[re],qe=!0):Te.isWebGL2&&B.samples>0&&Ge.useMultisampledRTT(B)===!1?_e=Ye.get(B).__webglMultisampledFramebuffer:Array.isArray(nt)?_e=nt[ve]:_e=nt,L.copy(B.viewport),N.copy(B.scissor),z=B.scissorTest}else L.copy(j).multiplyScalar(le).floor(),N.copy(ie).multiplyScalar(le).floor(),z=D;if(ae.bindFramebuffer(fe.FRAMEBUFFER,_e)&&Te.drawBuffers&&ge&&ae.drawBuffers(B,_e),ae.viewport(L),ae.scissor(N),ae.setScissorTest(z),qe){const tt=Ye.get(B.texture);fe.framebufferTexture2D(fe.FRAMEBUFFER,fe.COLOR_ATTACHMENT0,fe.TEXTURE_CUBE_MAP_POSITIVE_X+re,tt.__webglTexture,ve)}else if(Xe){const tt=Ye.get(B.texture),dt=re||0;fe.framebufferTextureLayer(fe.FRAMEBUFFER,fe.COLOR_ATTACHMENT0,tt.__webglTexture,ve||0,dt)}R=-1},this.readRenderTargetPixels=function(B,re,ve,ge,_e,qe,Xe){if(!(B&&B.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let it=Ye.get(B).__webglFramebuffer;if(B.isWebGLCubeRenderTarget&&Xe!==void 0&&(it=it[Xe]),it){ae.bindFramebuffer(fe.FRAMEBUFFER,it);try{const tt=B.texture,dt=tt.format,nt=tt.type;if(dt!==Rs&&Tt.convert(dt)!==fe.getParameter(fe.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const jt=nt===Ls&&(Ue.has("EXT_color_buffer_half_float")||Te.isWebGL2&&Ue.has("EXT_color_buffer_float"));if(nt!==Lu&&Tt.convert(nt)!==fe.getParameter(fe.IMPLEMENTATION_COLOR_READ_TYPE)&&!(nt===vs&&(Te.isWebGL2||Ue.has("OES_texture_float")||Ue.has("WEBGL_color_buffer_float")))&&!jt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}re>=0&&re<=B.width-ge&&ve>=0&&ve<=B.height-_e&&fe.readPixels(re,ve,ge,_e,Tt.convert(dt),Tt.convert(nt),qe)}finally{const tt=F!==null?Ye.get(F).__webglFramebuffer:null;ae.bindFramebuffer(fe.FRAMEBUFFER,tt)}}},this.copyFramebufferToTexture=function(B,re,ve=0){const ge=Math.pow(2,-ve),_e=Math.floor(re.image.width*ge),qe=Math.floor(re.image.height*ge);Ge.setTexture2D(re,0),fe.copyTexSubImage2D(fe.TEXTURE_2D,ve,0,0,B.x,B.y,_e,qe),ae.unbindTexture()},this.copyTextureToTexture=function(B,re,ve,ge=0){const _e=re.image.width,qe=re.image.height,Xe=Tt.convert(ve.format),it=Tt.convert(ve.type);Ge.setTexture2D(ve,0),fe.pixelStorei(fe.UNPACK_FLIP_Y_WEBGL,ve.flipY),fe.pixelStorei(fe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ve.premultiplyAlpha),fe.pixelStorei(fe.UNPACK_ALIGNMENT,ve.unpackAlignment),re.isDataTexture?fe.texSubImage2D(fe.TEXTURE_2D,ge,B.x,B.y,_e,qe,Xe,it,re.image.data):re.isCompressedTexture?fe.compressedTexSubImage2D(fe.TEXTURE_2D,ge,B.x,B.y,re.mipmaps[0].width,re.mipmaps[0].height,Xe,re.mipmaps[0].data):fe.texSubImage2D(fe.TEXTURE_2D,ge,B.x,B.y,Xe,it,re.image),ge===0&&ve.generateMipmaps&&fe.generateMipmap(fe.TEXTURE_2D),ae.unbindTexture()},this.copyTextureToTexture3D=function(B,re,ve,ge,_e=0){if(_.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const qe=B.max.x-B.min.x+1,Xe=B.max.y-B.min.y+1,it=B.max.z-B.min.z+1,tt=Tt.convert(ge.format),dt=Tt.convert(ge.type);let nt;if(ge.isData3DTexture)Ge.setTexture3D(ge,0),nt=fe.TEXTURE_3D;else if(ge.isDataArrayTexture)Ge.setTexture2DArray(ge,0),nt=fe.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}fe.pixelStorei(fe.UNPACK_FLIP_Y_WEBGL,ge.flipY),fe.pixelStorei(fe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ge.premultiplyAlpha),fe.pixelStorei(fe.UNPACK_ALIGNMENT,ge.unpackAlignment);const jt=fe.getParameter(fe.UNPACK_ROW_LENGTH),It=fe.getParameter(fe.UNPACK_IMAGE_HEIGHT),Ot=fe.getParameter(fe.UNPACK_SKIP_PIXELS),rn=fe.getParameter(fe.UNPACK_SKIP_ROWS),sn=fe.getParameter(fe.UNPACK_SKIP_IMAGES),mt=ve.isCompressedTexture?ve.mipmaps[0]:ve.image;fe.pixelStorei(fe.UNPACK_ROW_LENGTH,mt.width),fe.pixelStorei(fe.UNPACK_IMAGE_HEIGHT,mt.height),fe.pixelStorei(fe.UNPACK_SKIP_PIXELS,B.min.x),fe.pixelStorei(fe.UNPACK_SKIP_ROWS,B.min.y),fe.pixelStorei(fe.UNPACK_SKIP_IMAGES,B.min.z),ve.isDataTexture||ve.isData3DTexture?fe.texSubImage3D(nt,_e,re.x,re.y,re.z,qe,Xe,it,tt,dt,mt.data):ve.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),fe.compressedTexSubImage3D(nt,_e,re.x,re.y,re.z,qe,Xe,it,tt,mt.data)):fe.texSubImage3D(nt,_e,re.x,re.y,re.z,qe,Xe,it,tt,dt,mt),fe.pixelStorei(fe.UNPACK_ROW_LENGTH,jt),fe.pixelStorei(fe.UNPACK_IMAGE_HEIGHT,It),fe.pixelStorei(fe.UNPACK_SKIP_PIXELS,Ot),fe.pixelStorei(fe.UNPACK_SKIP_ROWS,rn),fe.pixelStorei(fe.UNPACK_SKIP_IMAGES,sn),_e===0&&ge.generateMipmaps&&fe.generateMipmap(nt),ae.unbindTexture()},this.initTexture=function(B){B.isCubeTexture?Ge.setTextureCube(B,0):B.isData3DTexture?Ge.setTexture3D(B,0):B.isDataArrayTexture||B.isCompressedArrayTexture?Ge.setTexture2DArray(B,0):Ge.setTexture2D(B,0),ae.unbindTexture()},this.resetState=function(){C=0,I=0,F=null,ae.reset(),be.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return bu}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Hn?rf:O3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===rf?Hn:Wl}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class SF extends Vw{}SF.prototype.isWebGL1Renderer=!0;class Ww{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Kt(e),this.density=t}clone(){return new Ww(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class jw{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Kt(e),this.near=t,this.far=r}clone(){return new jw(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}let og=class extends fr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}};class qw{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Fv,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ba()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,o=this.stride;i<o;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ba()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ba()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ts=new ye;class Bd{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Ts.fromBufferAttribute(this,t),Ts.applyMatrix4(e),this.setXYZ(t,Ts.x,Ts.y,Ts.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ts.fromBufferAttribute(this,t),Ts.applyNormalMatrix(e),this.setXYZ(t,Ts.x,Ts.y,Ts.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ts.fromBufferAttribute(this,t),Ts.transformDirection(e),this.setXYZ(t,Ts.x,Ts.y,Ts.z);return this}setX(e,t){return this.normalized&&(t=qn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=qn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=qn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=qn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Js(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Js(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Js(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Js(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=qn(t,this.array),r=qn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=qn(t,this.array),r=qn(r,this.array),i=qn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=qn(t,this.array),r=qn(r,this.array),i=qn(i,this.array),o=qn(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[i+o])}return new Mr(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Bd(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[i+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class X3 extends Ko{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Kt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let qp;const u0=new ye,$p=new ye,Xp=new ye,Yp=new xt,c0=new xt,_F=new zn,Vy=new ye,h0=new ye,Wy=new ye,gP=new xt,U_=new xt,vP=new xt;class bF extends fr{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",qp===void 0){qp=new Rn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new qw(t,5);qp.setIndex([0,1,2,0,2,3]),qp.setAttribute("position",new Bd(r,3,0,!1)),qp.setAttribute("uv",new Bd(r,2,3,!1))}this.geometry=qp,this.material=e!==void 0?e:new X3,this.center=new xt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),$p.setFromMatrixScale(this.matrixWorld),_F.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Xp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&$p.multiplyScalar(-Xp.z);const r=this.material.rotation;let i,o;r!==0&&(o=Math.cos(r),i=Math.sin(r));const s=this.center;jy(Vy.set(-.5,-.5,0),Xp,s,$p,i,o),jy(h0.set(.5,-.5,0),Xp,s,$p,i,o),jy(Wy.set(.5,.5,0),Xp,s,$p,i,o),gP.set(0,0),U_.set(1,0),vP.set(1,1);let a=e.ray.intersectTriangle(Vy,h0,Wy,!1,u0);if(a===null&&(jy(h0.set(-.5,.5,0),Xp,s,$p,i,o),U_.set(0,1),a=e.ray.intersectTriangle(Vy,Wy,h0,!1,u0),a===null))return;const l=e.ray.origin.distanceTo(u0);l<e.near||l>e.far||t.push({distance:l,point:u0.clone(),uv:Ks.getInterpolation(u0,Vy,h0,Wy,gP,U_,vP,new xt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function jy(n,e,t,r,i,o){Yp.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(c0.x=o*Yp.x-i*Yp.y,c0.y=i*Yp.x+o*Yp.y):c0.copy(Yp),n.copy(e),n.x+=c0.x,n.y+=c0.y,n.applyMatrix4(_F)}const qy=new ye,yP=new ye;class MF extends fr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const o=t[r];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let o;for(o=0;o<i.length&&!(t<i[o].distance);o++);return i.splice(o,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),e<o)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){qy.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(qy);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){qy.setFromMatrixPosition(e.matrixWorld),yP.setFromMatrixPosition(this.matrixWorld);const r=qy.distanceTo(yP)/e.zoom;t[0].object.visible=!0;let i,o;for(i=1,o=t.length;i<o;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),r>=s)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<o;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,o=r.length;i<o;i++){const s=r[i];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const xP=new ye,wP=new Or,SP=new Or,Zj=new ye,_P=new zn,Zp=new ye,z_=new Zl,bP=new zn,H_=new Zd;class EF extends xo{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new zn,this.bindMatrixInverse=new zn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Uu),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)Zp.fromBufferAttribute(t,r),this.applyBoneTransform(r,Zp),this.boundingBox.expandByPoint(Zp)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Zl),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)Zp.fromBufferAttribute(t,r),this.applyBoneTransform(r,Zp),this.boundingSphere.expandByPoint(Zp)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),z_.copy(this.boundingSphere),z_.applyMatrix4(i),e.ray.intersectsSphere(z_)!==!1&&(bP.copy(i).invert(),H_.copy(e.ray).applyMatrix4(bP),!(this.boundingBox!==null&&H_.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,H_)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Or,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;wP.fromBufferAttribute(i.attributes.skinIndex,e),SP.fromBufferAttribute(i.attributes.skinWeight,e),xP.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const s=SP.getComponent(o);if(s!==0){const a=wP.getComponent(o);_P.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(Zj.copy(xP).applyMatrix4(_P),s)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class Y3 extends fr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Bm extends Di{constructor(e=null,t=1,r=1,i,o,s,a,l,u=Wi,c=Wi,h,f){super(null,s,a,l,u,c,i,o,h,f),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const MP=new zn,Kj=new zn;class $w{constructor(e=[],t=[]){this.uuid=ba(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new zn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new zn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let o=0,s=e.length;o<s;o++){const a=e[o]?e[o].matrixWorld:Kj;MP.multiplyMatrices(a,t[o]),MP.toArray(r,o*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new $w(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=sF(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new Bm(t,e,e,Rs,vs);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const o=e.bones[r];let s=t[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new Y3),this.bones.push(s),this.boneInverses.push(new zn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,o=t.length;i<o;i++){const s=t[i];e.bones.push(s.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class sg extends Mr{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Kp=new zn,EP=new zn,$y=[],AP=new Uu,Jj=new zn,f0=new xo,d0=new Zl;class AF extends xo{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new sg(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,Jj)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Uu),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Kp),AP.copy(e.boundingBox).applyMatrix4(Kp),this.boundingBox.union(AP)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Zl),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,Kp),d0.copy(e.boundingSphere).applyMatrix4(Kp),this.boundingSphere.union(d0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(f0.geometry=this.geometry,f0.material=this.material,f0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),d0.copy(this.boundingSphere),d0.applyMatrix4(r),e.ray.intersectsSphere(d0)!==!1))for(let o=0;o<i;o++){this.getMatrixAt(o,Kp),EP.multiplyMatrices(r,Kp),f0.matrixWorld=EP,f0.raycast(e,$y);for(let s=0,a=$y.length;s<a;s++){const l=$y[s];l.instanceId=o,l.object=this,t.push(l)}$y.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new sg(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ss extends Ko{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Kt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const TP=new ye,CP=new ye,PP=new zn,G_=new Zd,Xy=new Zl;class hf extends fr{constructor(e=new Rn,t=new Ss){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,o=t.count;i<o;i++)TP.fromBufferAttribute(t,i-1),CP.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=TP.distanceTo(CP);e.setAttribute("lineDistance",new nn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,o=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Xy.copy(r.boundingSphere),Xy.applyMatrix4(i),Xy.radius+=o,e.ray.intersectsSphere(Xy)===!1)return;PP.copy(i).invert(),G_.copy(e.ray).applyMatrix4(PP);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new ye,c=new ye,h=new ye,f=new ye,d=this.isLineSegments?2:1,v=r.index,x=r.attributes.position;if(v!==null){const g=Math.max(0,s.start),S=Math.min(v.count,s.start+s.count);for(let _=g,E=S-1;_<E;_+=d){const C=v.getX(_),I=v.getX(_+1);if(u.fromBufferAttribute(x,C),c.fromBufferAttribute(x,I),G_.distanceSqToSegment(u,c,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const R=e.ray.origin.distanceTo(f);R<e.near||R>e.far||t.push({distance:R,point:h.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,s.start),S=Math.min(x.count,s.start+s.count);for(let _=g,E=S-1;_<E;_+=d){if(u.fromBufferAttribute(x,_),c.fromBufferAttribute(x,_+1),G_.distanceSqToSegment(u,c,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(f);I<e.near||I>e.far||t.push({distance:I,point:h.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}const RP=new ye,LP=new ye;class Kl extends hf{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,o=t.count;i<o;i+=2)RP.fromBufferAttribute(t,i),LP.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+RP.distanceTo(LP);e.setAttribute("lineDistance",new nn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class TF extends hf{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Z3 extends Ko{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Kt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const kP=new zn,TM=new Zd,Yy=new Zl,Zy=new ye;class CF extends fr{constructor(e=new Rn,t=new Z3){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Yy.copy(r.boundingSphere),Yy.applyMatrix4(i),Yy.radius+=o,e.ray.intersectsSphere(Yy)===!1)return;kP.copy(i).invert(),TM.copy(e.ray).applyMatrix4(kP);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,h=r.attributes.position;if(u!==null){const f=Math.max(0,s.start),d=Math.min(u.count,s.start+s.count);for(let v=f,y=d;v<y;v++){const x=u.getX(v);Zy.fromBufferAttribute(h,x),IP(Zy,x,l,i,e,t,this)}}else{const f=Math.max(0,s.start),d=Math.min(h.count,s.start+s.count);for(let v=f,y=d;v<y;v++)Zy.fromBufferAttribute(h,v),IP(Zy,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}function IP(n,e,t,r,i,o,s){const a=TM.distanceSqToPoint(n);if(a<t){const l=new ye;TM.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;o.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:s})}}class Qj extends Di{constructor(e,t,r,i,o,s,a,l,u){super(e,t,r,i,o,s,a,l,u),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:ri,this.magFilter=o!==void 0?o:ri,this.generateMipmaps=!1;const c=this;function h(){c.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class eq extends Di{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Wi,this.minFilter=Wi,this.generateMipmaps=!1,this.needsUpdate=!0}}class Xw extends Di{constructor(e,t,r,i,o,s,a,l,u,c,h,f){super(null,s,a,l,u,c,i,o,h,f),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class tq extends Xw{constructor(e,t,r,i,o,s){super(e,t,r,o,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=ps}}class nq extends Xw{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,Du),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class rq extends Di{constructor(e,t,r,i,o,s,a,l,u){super(e,t,r,i,o,s,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}let Jl=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),o=0;t.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),o+=r.distanceTo(i),t.push(o),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const o=r.length;let s;t?s=t:s=e*r[o-1];let a=0,l=o-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-s,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===s)return i/(o-1);const c=r[i],f=r[i+1]-c,d=(s-c)/f;return(i+d)/(o-1)}getTangent(e,t){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);const s=this.getPoint(i),a=this.getPoint(o),l=t||(s.isVector2?new xt:new ye);return l.copy(a).sub(s).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new ye,i=[],o=[],s=[],a=new ye,l=new zn;for(let d=0;d<=e;d++){const v=d/e;i[d]=this.getTangentAt(v,new ye)}o[0]=new ye,s[0]=new ye;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),h=Math.abs(i[0].y),f=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),h<=u&&(u=h,r.set(0,1,0)),f<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],a),s[0].crossVectors(i[0],o[0]);for(let d=1;d<=e;d++){if(o[d]=o[d-1].clone(),s[d]=s[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Ni(i[d-1].dot(i[d]),-1,1));o[d].applyMatrix4(l.makeRotationAxis(a,v))}s[d].crossVectors(i[d],o[d])}if(t===!0){let d=Math.acos(Ni(o[0].dot(o[e]),-1,1));d/=e,i[0].dot(a.crossVectors(o[0],o[e]))>0&&(d=-d);for(let v=1;v<=e;v++)o[v].applyMatrix4(l.makeRotationAxis(i[v],d*v)),s[v].crossVectors(i[v],o[v])}return{tangents:i,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};class Yw extends Jl{constructor(e=0,t=0,r=1,i=1,o=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new xt,i=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(s?o=0:o=i),this.aClockwise===!0&&!s&&(o===i?o=-i:o=o-i);const a=this.aStartAngle+e*o;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=l-this.aX,d=u-this.aY;l=f*c-d*h+this.aX,u=f*h+d*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class PF extends Yw{constructor(e,t,r,i,o,s){super(e,t,r,r,i,o,s),this.isArcCurve=!0,this.type="ArcCurve"}}function K3(){let n=0,e=0,t=0,r=0;function i(o,s,a,l){n=o,e=a,t=-3*o+3*s-2*a-l,r=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,u){i(s,a,u*(a-o),u*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,u,c,h){let f=(s-o)/u-(a-o)/(u+c)+(a-s)/c,d=(a-s)/c-(l-s)/(c+h)+(l-a)/h;f*=c,d*=c,i(s,a,f,d)},calc:function(o){const s=o*o,a=s*o;return n+e*o+t*s+r*a}}}const Ky=new ye,V_=new K3,W_=new K3,j_=new K3;class RF extends Jl{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new ye){const r=t,i=this.points,o=i.length,s=(o-(this.closed?0:1))*e;let a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:l===0&&a===o-1&&(a=o-2,l=1);let u,c;this.closed||a>0?u=i[(a-1)%o]:(Ky.subVectors(i[0],i[1]).add(i[0]),u=Ky);const h=i[a%o],f=i[(a+1)%o];if(this.closed||a+2<o?c=i[(a+2)%o]:(Ky.subVectors(i[o-1],i[o-2]).add(i[o-1]),c=Ky),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(h),d),y=Math.pow(h.distanceToSquared(f),d),x=Math.pow(f.distanceToSquared(c),d);y<1e-4&&(y=1),v<1e-4&&(v=y),x<1e-4&&(x=y),V_.initNonuniformCatmullRom(u.x,h.x,f.x,c.x,v,y,x),W_.initNonuniformCatmullRom(u.y,h.y,f.y,c.y,v,y,x),j_.initNonuniformCatmullRom(u.z,h.z,f.z,c.z,v,y,x)}else this.curveType==="catmullrom"&&(V_.initCatmullRom(u.x,h.x,f.x,c.x,this.tension),W_.initCatmullRom(u.y,h.y,f.y,c.y,this.tension),j_.initCatmullRom(u.z,h.z,f.z,c.z,this.tension));return r.set(V_.calc(l),W_.calc(l),j_.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new ye().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function NP(n,e,t,r,i){const o=(r-e)*.5,s=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+o+s)*l+(-3*t+3*r-2*o-s)*a+o*n+t}function iq(n,e){const t=1-n;return t*t*e}function oq(n,e){return 2*(1-n)*n*e}function sq(n,e){return n*n*e}function Z0(n,e,t,r){return iq(n,e)+oq(n,t)+sq(n,r)}function aq(n,e){const t=1-n;return t*t*t*e}function lq(n,e){const t=1-n;return 3*t*t*n*e}function uq(n,e){return 3*(1-n)*n*n*e}function cq(n,e){return n*n*n*e}function K0(n,e,t,r,i){return aq(n,e)+lq(n,t)+uq(n,r)+cq(n,i)}class J3 extends Jl{constructor(e=new xt,t=new xt,r=new xt,i=new xt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new xt){const r=t,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(K0(e,i.x,o.x,s.x,a.x),K0(e,i.y,o.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class LF extends Jl{constructor(e=new ye,t=new ye,r=new ye,i=new ye){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new ye){const r=t,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(K0(e,i.x,o.x,s.x,a.x),K0(e,i.y,o.y,s.y,a.y),K0(e,i.z,o.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Zw extends Jl{constructor(e=new xt,t=new xt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new xt){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new xt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class kF extends Jl{constructor(e=new ye,t=new ye){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ye){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ye){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Q3 extends Jl{constructor(e=new xt,t=new xt,r=new xt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new xt){const r=t,i=this.v0,o=this.v1,s=this.v2;return r.set(Z0(e,i.x,o.x,s.x),Z0(e,i.y,o.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class eA extends Jl{constructor(e=new ye,t=new ye,r=new ye){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ye){const r=t,i=this.v0,o=this.v1,s=this.v2;return r.set(Z0(e,i.x,o.x,s.x),Z0(e,i.y,o.y,s.y),Z0(e,i.z,o.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class tA extends Jl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new xt){const r=t,i=this.points,o=(i.length-1)*e,s=Math.floor(o),a=o-s,l=i[s===0?s:s-1],u=i[s],c=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return r.set(NP(a,l.x,u.x,c.x,h.x),NP(a,l.y,u.y,c.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new xt().fromArray(i))}return this}}var nA=Object.freeze({__proto__:null,ArcCurve:PF,CatmullRomCurve3:RF,CubicBezierCurve:J3,CubicBezierCurve3:LF,EllipseCurve:Yw,LineCurve:Zw,LineCurve3:kF,QuadraticBezierCurve:Q3,QuadraticBezierCurve3:eA,SplineCurve:tA});class IF extends Jl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Zw(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let o=0;for(;o<i.length;){if(i[o]>=r){const s=i[o]-r,a=this.curves[o],l=a.getLength(),u=l===0?0:1-s/l;return a.getPointAt(u,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,o=this.curves;i<o.length;i++){const s=o[i],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new nA[i.type]().fromJSON(i))}return this}}let Bv=class extends IF{constructor(e){super(),this.type="Path",this.currentPoint=new xt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new Zw(this.currentPoint.clone(),new xt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const o=new Q3(this.currentPoint.clone(),new xt(e,t),new xt(r,i));return this.curves.push(o),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,o,s){const a=new J3(this.currentPoint.clone(),new xt(e,t),new xt(r,i),new xt(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new tA(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,o,s){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,o,s),this}absarc(e,t,r,i,o,s){return this.absellipse(e,t,r,r,i,o,s),this}ellipse(e,t,r,i,o,s,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,r,i,o,s,a,l),this}absellipse(e,t,r,i,o,s,a,l){const u=new Yw(e,t,r,i,o,s,a,l);if(this.curves.length>0){const h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class y1 extends Rn{constructor(e=[new xt(0,-.5),new xt(.5,0),new xt(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Ni(i,0,Math.PI*2);const o=[],s=[],a=[],l=[],u=[],c=1/t,h=new ye,f=new xt,d=new ye,v=new ye,y=new ye;let x=0,g=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:x=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,d.x=g*1,d.y=-x,d.z=g*0,y.copy(d),d.normalize(),l.push(d.x,d.y,d.z);break;case e.length-1:l.push(y.x,y.y,y.z);break;default:x=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,d.x=g*1,d.y=-x,d.z=g*0,v.copy(d),d.x+=y.x,d.y+=y.y,d.z+=y.z,d.normalize(),l.push(d.x,d.y,d.z),y.copy(v)}for(let S=0;S<=t;S++){const _=r+S*c*i,E=Math.sin(_),C=Math.cos(_);for(let I=0;I<=e.length-1;I++){h.x=e[I].x*E,h.y=e[I].y,h.z=e[I].x*C,s.push(h.x,h.y,h.z),f.x=S/t,f.y=I/(e.length-1),a.push(f.x,f.y);const F=l[3*I+0]*E,R=l[3*I+1],k=l[3*I+0]*C;u.push(F,R,k)}}for(let S=0;S<t;S++)for(let _=0;_<e.length-1;_++){const E=_+S*e.length,C=E,I=E+e.length,F=E+e.length+1,R=E+1;o.push(C,I,R),o.push(F,R,I)}this.setIndex(o),this.setAttribute("position",new nn(s,3)),this.setAttribute("uv",new nn(a,2)),this.setAttribute("normal",new nn(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new y1(e.points,e.segments,e.phiStart,e.phiLength)}}class Kw extends y1{constructor(e=1,t=1,r=4,i=8){const o=new Bv;o.absarc(0,-t/2,e,Math.PI*1.5,0),o.absarc(0,t/2,e,0,Math.PI*.5),super(o.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new Kw(e.radius,e.length,e.capSegments,e.radialSegments)}}class Jw extends Rn{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const o=[],s=[],a=[],l=[],u=new ye,c=new xt;s.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,f=3;h<=t;h++,f+=3){const d=r+h/t*i;u.x=e*Math.cos(d),u.y=e*Math.sin(d),s.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(s[f]/e+1)/2,c.y=(s[f+1]/e+1)/2,l.push(c.x,c.y)}for(let h=1;h<=t;h++)o.push(h,h+1,0);this.setIndex(o),this.setAttribute("position",new nn(s,3)),this.setAttribute("normal",new nn(a,3)),this.setAttribute("uv",new nn(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jw(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class _g extends Rn{constructor(e=1,t=1,r=1,i=32,o=1,s=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),o=Math.floor(o);const c=[],h=[],f=[],d=[];let v=0;const y=[],x=r/2;let g=0;S(),s===!1&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(c),this.setAttribute("position",new nn(h,3)),this.setAttribute("normal",new nn(f,3)),this.setAttribute("uv",new nn(d,2));function S(){const E=new ye,C=new ye;let I=0;const F=(t-e)/r;for(let R=0;R<=o;R++){const k=[],L=R/o,N=L*(t-e)+e;for(let z=0;z<=i;z++){const H=z/i,G=H*l+a,K=Math.sin(G),ee=Math.cos(G);C.x=N*K,C.y=-L*r+x,C.z=N*ee,h.push(C.x,C.y,C.z),E.set(K,F,ee).normalize(),f.push(E.x,E.y,E.z),d.push(H,1-L),k.push(v++)}y.push(k)}for(let R=0;R<i;R++)for(let k=0;k<o;k++){const L=y[k][R],N=y[k+1][R],z=y[k+1][R+1],H=y[k][R+1];c.push(L,N,H),c.push(N,z,H),I+=6}u.addGroup(g,I,0),g+=I}function _(E){const C=v,I=new xt,F=new ye;let R=0;const k=E===!0?e:t,L=E===!0?1:-1;for(let z=1;z<=i;z++)h.push(0,x*L,0),f.push(0,L,0),d.push(.5,.5),v++;const N=v;for(let z=0;z<=i;z++){const G=z/i*l+a,K=Math.cos(G),ee=Math.sin(G);F.x=k*ee,F.y=x*L,F.z=k*K,h.push(F.x,F.y,F.z),f.push(0,L,0),I.x=K*.5+.5,I.y=ee*.5*L+.5,d.push(I.x,I.y),v++}for(let z=0;z<i;z++){const H=C+z,G=N+z;E===!0?c.push(G,G+1,H):c.push(G+1,G,H),R+=3}u.addGroup(g,R,E===!0?1:2),g+=R}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _g(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Qw extends _g{constructor(e=1,t=1,r=32,i=1,o=!1,s=0,a=Math.PI*2){super(0,e,t,r,i,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new Qw(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class bf extends Rn{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const o=[],s=[];a(i),u(r),c(),this.setAttribute("position",new nn(o,3)),this.setAttribute("normal",new nn(o.slice(),3)),this.setAttribute("uv",new nn(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const _=new ye,E=new ye,C=new ye;for(let I=0;I<t.length;I+=3)d(t[I+0],_),d(t[I+1],E),d(t[I+2],C),l(_,E,C,S)}function l(S,_,E,C){const I=C+1,F=[];for(let R=0;R<=I;R++){F[R]=[];const k=S.clone().lerp(E,R/I),L=_.clone().lerp(E,R/I),N=I-R;for(let z=0;z<=N;z++)z===0&&R===I?F[R][z]=k:F[R][z]=k.clone().lerp(L,z/N)}for(let R=0;R<I;R++)for(let k=0;k<2*(I-R)-1;k++){const L=Math.floor(k/2);k%2===0?(f(F[R][L+1]),f(F[R+1][L]),f(F[R][L])):(f(F[R][L+1]),f(F[R+1][L+1]),f(F[R+1][L]))}}function u(S){const _=new ye;for(let E=0;E<o.length;E+=3)_.x=o[E+0],_.y=o[E+1],_.z=o[E+2],_.normalize().multiplyScalar(S),o[E+0]=_.x,o[E+1]=_.y,o[E+2]=_.z}function c(){const S=new ye;for(let _=0;_<o.length;_+=3){S.x=o[_+0],S.y=o[_+1],S.z=o[_+2];const E=x(S)/2/Math.PI+.5,C=g(S)/Math.PI+.5;s.push(E,1-C)}v(),h()}function h(){for(let S=0;S<s.length;S+=6){const _=s[S+0],E=s[S+2],C=s[S+4],I=Math.max(_,E,C),F=Math.min(_,E,C);I>.9&&F<.1&&(_<.2&&(s[S+0]+=1),E<.2&&(s[S+2]+=1),C<.2&&(s[S+4]+=1))}}function f(S){o.push(S.x,S.y,S.z)}function d(S,_){const E=S*3;_.x=e[E+0],_.y=e[E+1],_.z=e[E+2]}function v(){const S=new ye,_=new ye,E=new ye,C=new ye,I=new xt,F=new xt,R=new xt;for(let k=0,L=0;k<o.length;k+=9,L+=6){S.set(o[k+0],o[k+1],o[k+2]),_.set(o[k+3],o[k+4],o[k+5]),E.set(o[k+6],o[k+7],o[k+8]),I.set(s[L+0],s[L+1]),F.set(s[L+2],s[L+3]),R.set(s[L+4],s[L+5]),C.copy(S).add(_).add(E).divideScalar(3);const N=x(C);y(I,L+0,S,N),y(F,L+2,_,N),y(R,L+4,E,N)}}function y(S,_,E,C){C<0&&S.x===1&&(s[_]=S.x-1),E.x===0&&E.z===0&&(s[_]=C/2/Math.PI+.5)}function x(S){return Math.atan2(S.z,-S.x)}function g(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bf(e.vertices,e.indices,e.radius,e.details)}}class eS extends bf{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new eS(e.radius,e.detail)}}const Jy=new ye,Qy=new ye,q_=new ye,e2=new Ks;class rA extends Rn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),o=Math.cos(Td*t),s=e.getIndex(),a=e.getAttribute("position"),l=s?s.count:a.count,u=[0,0,0],c=["a","b","c"],h=new Array(3),f={},d=[];for(let v=0;v<l;v+=3){s?(u[0]=s.getX(v),u[1]=s.getX(v+1),u[2]=s.getX(v+2)):(u[0]=v,u[1]=v+1,u[2]=v+2);const{a:y,b:x,c:g}=e2;if(y.fromBufferAttribute(a,u[0]),x.fromBufferAttribute(a,u[1]),g.fromBufferAttribute(a,u[2]),e2.getNormal(q_),h[0]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,h[1]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,h[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let S=0;S<3;S++){const _=(S+1)%3,E=h[S],C=h[_],I=e2[c[S]],F=e2[c[_]],R=`${E}_${C}`,k=`${C}_${E}`;k in f&&f[k]?(q_.dot(f[k].normal)<=o&&(d.push(I.x,I.y,I.z),d.push(F.x,F.y,F.z)),f[k]=null):R in f||(f[R]={index0:u[S],index1:u[_],normal:q_.clone()})}}for(const v in f)if(f[v]){const{index0:y,index1:x}=f[v];Jy.fromBufferAttribute(a,y),Qy.fromBufferAttribute(a,x),d.push(Jy.x,Jy.y,Jy.z),d.push(Qy.x,Qy.y,Qy.z)}this.setAttribute("position",new nn(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let Pd=class extends Bv{constructor(e){super(e),this.uuid=ba(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new Bv().fromJSON(i))}return this}};const hq={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let o=NF(n,0,i,t,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,u,c,h,f,d;if(r&&(o=gq(n,e,o,t)),n.length>80*t){a=u=n[0],l=c=n[1];for(let v=t;v<i;v+=t)h=n[v],f=n[v+1],h<a&&(a=h),f<l&&(l=f),h>u&&(u=h),f>c&&(c=f);d=Math.max(u-a,c-l),d=d!==0?32767/d:0}return Uv(o,s,t,a,l,d,0),s}};function NF(n,e,t,r,i){let o,s;if(i===Tq(n,e,t,r)>0)for(o=e;o<t;o+=r)s=FP(o,n[o],n[o+1],s);else for(o=t-r;o>=e;o-=r)s=FP(o,n[o],n[o+1],s);return s&&tS(s,s.next)&&(Hv(s),s=s.next),s}function Ud(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(tS(t,t.next)||bi(t.prev,t,t.next)===0)){if(Hv(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Uv(n,e,t,r,i,o,s){if(!n)return;!s&&o&&Sq(n,r,i,o);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,o?dq(n,r,i,o):fq(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),Hv(n),n=u.next,a=u.next;continue}if(n=u,n===a){s?s===1?(n=pq(Ud(n),e,t),Uv(n,e,t,r,i,o,2)):s===2&&mq(n,e,t,r,i,o):Uv(Ud(n),e,t,r,i,o,1);break}}}function fq(n){const e=n.prev,t=n,r=n.next;if(bi(e,t,r)>=0)return!1;const i=e.x,o=t.x,s=r.x,a=e.y,l=t.y,u=r.y,c=i<o?i<s?i:s:o<s?o:s,h=a<l?a<u?a:u:l<u?l:u,f=i>o?i>s?i:s:o>s?o:s,d=a>l?a>u?a:u:l>u?l:u;let v=r.next;for(;v!==e;){if(v.x>=c&&v.x<=f&&v.y>=h&&v.y<=d&&Tm(i,a,o,l,s,u,v.x,v.y)&&bi(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function dq(n,e,t,r){const i=n.prev,o=n,s=n.next;if(bi(i,o,s)>=0)return!1;const a=i.x,l=o.x,u=s.x,c=i.y,h=o.y,f=s.y,d=a<l?a<u?a:u:l<u?l:u,v=c<h?c<f?c:f:h<f?h:f,y=a>l?a>u?a:u:l>u?l:u,x=c>h?c>f?c:f:h>f?h:f,g=CM(d,v,e,t,r),S=CM(y,x,e,t,r);let _=n.prevZ,E=n.nextZ;for(;_&&_.z>=g&&E&&E.z<=S;){if(_.x>=d&&_.x<=y&&_.y>=v&&_.y<=x&&_!==i&&_!==s&&Tm(a,c,l,h,u,f,_.x,_.y)&&bi(_.prev,_,_.next)>=0||(_=_.prevZ,E.x>=d&&E.x<=y&&E.y>=v&&E.y<=x&&E!==i&&E!==s&&Tm(a,c,l,h,u,f,E.x,E.y)&&bi(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;_&&_.z>=g;){if(_.x>=d&&_.x<=y&&_.y>=v&&_.y<=x&&_!==i&&_!==s&&Tm(a,c,l,h,u,f,_.x,_.y)&&bi(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;E&&E.z<=S;){if(E.x>=d&&E.x<=y&&E.y>=v&&E.y<=x&&E!==i&&E!==s&&Tm(a,c,l,h,u,f,E.x,E.y)&&bi(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function pq(n,e,t){let r=n;do{const i=r.prev,o=r.next.next;!tS(i,o)&&FF(i,r,r.next,o)&&zv(i,o)&&zv(o,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(o.i/t|0),Hv(r),Hv(r.next),r=n=o),r=r.next}while(r!==n);return Ud(r)}function mq(n,e,t,r,i,o){let s=n;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&Mq(s,a)){let l=DF(s,a);s=Ud(s,s.next),l=Ud(l,l.next),Uv(s,e,t,r,i,o,0),Uv(l,e,t,r,i,o,0);return}a=a.next}s=s.next}while(s!==n)}function gq(n,e,t,r){const i=[];let o,s,a,l,u;for(o=0,s=e.length;o<s;o++)a=e[o]*r,l=o<s-1?e[o+1]*r:n.length,u=NF(n,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(bq(u));for(i.sort(vq),o=0;o<i.length;o++)t=yq(i[o],t);return t}function vq(n,e){return n.x-e.x}function yq(n,e){const t=xq(n,e);if(!t)return e;const r=DF(t,n);return Ud(r,r.next),Ud(t,t.next)}function xq(n,e){let t=e,r=-1/0,i;const o=n.x,s=n.y;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const f=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=o&&f>r&&(r=f,i=t.x<t.next.x?t:t.next,f===o))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,u=i.y;let c=1/0,h;t=i;do o>=t.x&&t.x>=l&&o!==t.x&&Tm(s<u?o:r,s,l,u,s<u?r:o,s,t.x,t.y)&&(h=Math.abs(s-t.y)/(o-t.x),zv(t,n)&&(h<c||h===c&&(t.x>i.x||t.x===i.x&&wq(i,t)))&&(i=t,c=h)),t=t.next;while(t!==a);return i}function wq(n,e){return bi(n.prev,n,e.prev)<0&&bi(e.next,n,n.next)<0}function Sq(n,e,t,r){let i=n;do i.z===0&&(i.z=CM(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,_q(i)}function _q(n){let e,t,r,i,o,s,a,l,u=1;do{for(t=n,n=null,o=null,s=0;t;){for(s++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:n=i,i.prevZ=o,o=i;t=r}o.nextZ=null,u*=2}while(s>1);return n}function CM(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function bq(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Tm(n,e,t,r,i,o,s,a){return(i-s)*(e-a)>=(n-s)*(o-a)&&(n-s)*(r-a)>=(t-s)*(e-a)&&(t-s)*(o-a)>=(i-s)*(r-a)}function Mq(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!Eq(n,e)&&(zv(n,e)&&zv(e,n)&&Aq(n,e)&&(bi(n.prev,n,e.prev)||bi(n,e.prev,e))||tS(n,e)&&bi(n.prev,n,n.next)>0&&bi(e.prev,e,e.next)>0)}function bi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function tS(n,e){return n.x===e.x&&n.y===e.y}function FF(n,e,t,r){const i=n2(bi(n,e,t)),o=n2(bi(n,e,r)),s=n2(bi(t,r,n)),a=n2(bi(t,r,e));return!!(i!==o&&s!==a||i===0&&t2(n,t,e)||o===0&&t2(n,r,e)||s===0&&t2(t,n,r)||a===0&&t2(t,e,r))}function t2(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function n2(n){return n>0?1:n<0?-1:0}function Eq(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&FF(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function zv(n,e){return bi(n.prev,n,n.next)<0?bi(n,e,n.next)>=0&&bi(n,n.prev,e)>=0:bi(n,e,n.prev)<0||bi(n,n.next,e)<0}function Aq(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&i<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function DF(n,e){const t=new PM(n.i,n.x,n.y),r=new PM(e.i,e.x,e.y),i=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,o.next=r,r.prev=o,r}function FP(n,e,t,r){const i=new PM(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Hv(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function PM(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Tq(n,e,t,r){let i=0;for(let o=e,s=t-r;o<t;o+=r)i+=(n[s]-n[o])*(n[o+1]+n[s+1]),s=o;return i}class Iu{static area(e){const t=e.length;let r=0;for(let i=t-1,o=0;o<t;i=o++)r+=e[i].x*e[o].y-e[o].x*e[i].y;return r*.5}static isClockWise(e){return Iu.area(e)<0}static triangulateShape(e,t){const r=[],i=[],o=[];DP(e),OP(r,e);let s=e.length;t.forEach(DP);for(let l=0;l<t.length;l++)i.push(s),s+=t[l].length,OP(r,t[l]);const a=hq.triangulate(r,i);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}}function DP(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function OP(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class nS extends Rn{constructor(e=new Pd([new xt(.5,.5),new xt(-.5,.5),new xt(-.5,-.5),new xt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];s(u)}this.setAttribute("position",new nn(i,3)),this.setAttribute("uv",new nn(o,2)),this.computeVertexNormals();function s(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,d=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:d-.1,y=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:Cq;let _,E=!1,C,I,F,R;g&&(_=g.getSpacedPoints(c),E=!0,f=!1,C=g.computeFrenetFrames(c,!1),I=new ye,F=new ye,R=new ye),f||(x=0,d=0,v=0,y=0);const k=a.extractPoints(u);let L=k.shape;const N=k.holes;if(!Iu.isClockWise(L)){L=L.reverse();for(let fe=0,Ie=N.length;fe<Ie;fe++){const Ue=N[fe];Iu.isClockWise(Ue)&&(N[fe]=Ue.reverse())}}const H=Iu.triangulateShape(L,N),G=L;for(let fe=0,Ie=N.length;fe<Ie;fe++){const Ue=N[fe];L=L.concat(Ue)}function K(fe,Ie,Ue){return Ie||console.error("THREE.ExtrudeGeometry: vec does not exist"),fe.clone().addScaledVector(Ie,Ue)}const ee=L.length,le=H.length;function V(fe,Ie,Ue){let Te,ae,gt;const Ye=fe.x-Ie.x,Ge=fe.y-Ie.y,et=Ue.x-fe.x,vt=Ue.y-fe.y,bt=Ye*Ye+Ge*Ge,pe=Ye*vt-Ge*et;if(Math.abs(pe)>Number.EPSILON){const te=Math.sqrt(bt),Ne=Math.sqrt(et*et+vt*vt),st=Ie.x-Ge/te,rt=Ie.y+Ye/te,pt=Ue.x-vt/Ne,wt=Ue.y+et/Ne,ut=((pt-st)*vt-(wt-rt)*et)/(Ye*vt-Ge*et);Te=st+Ye*ut-fe.x,ae=rt+Ge*ut-fe.y;const Pe=Te*Te+ae*ae;if(Pe<=2)return new xt(Te,ae);gt=Math.sqrt(Pe/2)}else{let te=!1;Ye>Number.EPSILON?et>Number.EPSILON&&(te=!0):Ye<-Number.EPSILON?et<-Number.EPSILON&&(te=!0):Math.sign(Ge)===Math.sign(vt)&&(te=!0),te?(Te=-Ge,ae=Ye,gt=Math.sqrt(bt)):(Te=Ye,ae=Ge,gt=Math.sqrt(bt/2))}return new xt(Te/gt,ae/gt)}const J=[];for(let fe=0,Ie=G.length,Ue=Ie-1,Te=fe+1;fe<Ie;fe++,Ue++,Te++)Ue===Ie&&(Ue=0),Te===Ie&&(Te=0),J[fe]=V(G[fe],G[Ue],G[Te]);const j=[];let ie,D=J.concat();for(let fe=0,Ie=N.length;fe<Ie;fe++){const Ue=N[fe];ie=[];for(let Te=0,ae=Ue.length,gt=ae-1,Ye=Te+1;Te<ae;Te++,gt++,Ye++)gt===ae&&(gt=0),Ye===ae&&(Ye=0),ie[Te]=V(Ue[Te],Ue[gt],Ue[Ye]);j.push(ie),D=D.concat(ie)}for(let fe=0;fe<x;fe++){const Ie=fe/x,Ue=d*Math.cos(Ie*Math.PI/2),Te=v*Math.sin(Ie*Math.PI/2)+y;for(let ae=0,gt=G.length;ae<gt;ae++){const Ye=K(G[ae],J[ae],Te);me(Ye.x,Ye.y,-Ue)}for(let ae=0,gt=N.length;ae<gt;ae++){const Ye=N[ae];ie=j[ae];for(let Ge=0,et=Ye.length;Ge<et;Ge++){const vt=K(Ye[Ge],ie[Ge],Te);me(vt.x,vt.y,-Ue)}}}const q=v+y;for(let fe=0;fe<ee;fe++){const Ie=f?K(L[fe],D[fe],q):L[fe];E?(F.copy(C.normals[0]).multiplyScalar(Ie.x),I.copy(C.binormals[0]).multiplyScalar(Ie.y),R.copy(_[0]).add(F).add(I),me(R.x,R.y,R.z)):me(Ie.x,Ie.y,0)}for(let fe=1;fe<=c;fe++)for(let Ie=0;Ie<ee;Ie++){const Ue=f?K(L[Ie],D[Ie],q):L[Ie];E?(F.copy(C.normals[fe]).multiplyScalar(Ue.x),I.copy(C.binormals[fe]).multiplyScalar(Ue.y),R.copy(_[fe]).add(F).add(I),me(R.x,R.y,R.z)):me(Ue.x,Ue.y,h/c*fe)}for(let fe=x-1;fe>=0;fe--){const Ie=fe/x,Ue=d*Math.cos(Ie*Math.PI/2),Te=v*Math.sin(Ie*Math.PI/2)+y;for(let ae=0,gt=G.length;ae<gt;ae++){const Ye=K(G[ae],J[ae],Te);me(Ye.x,Ye.y,h+Ue)}for(let ae=0,gt=N.length;ae<gt;ae++){const Ye=N[ae];ie=j[ae];for(let Ge=0,et=Ye.length;Ge<et;Ge++){const vt=K(Ye[Ge],ie[Ge],Te);E?me(vt.x,vt.y+_[c-1].y,_[c-1].x+Ue):me(vt.x,vt.y,h+Ue)}}}Z(),Q();function Z(){const fe=i.length/3;if(f){let Ie=0,Ue=ee*Ie;for(let Te=0;Te<le;Te++){const ae=H[Te];Se(ae[2]+Ue,ae[1]+Ue,ae[0]+Ue)}Ie=c+x*2,Ue=ee*Ie;for(let Te=0;Te<le;Te++){const ae=H[Te];Se(ae[0]+Ue,ae[1]+Ue,ae[2]+Ue)}}else{for(let Ie=0;Ie<le;Ie++){const Ue=H[Ie];Se(Ue[2],Ue[1],Ue[0])}for(let Ie=0;Ie<le;Ie++){const Ue=H[Ie];Se(Ue[0]+ee*c,Ue[1]+ee*c,Ue[2]+ee*c)}}r.addGroup(fe,i.length/3-fe,0)}function Q(){const fe=i.length/3;let Ie=0;se(G,Ie),Ie+=G.length;for(let Ue=0,Te=N.length;Ue<Te;Ue++){const ae=N[Ue];se(ae,Ie),Ie+=ae.length}r.addGroup(fe,i.length/3-fe,1)}function se(fe,Ie){let Ue=fe.length;for(;--Ue>=0;){const Te=Ue;let ae=Ue-1;ae<0&&(ae=fe.length-1);for(let gt=0,Ye=c+x*2;gt<Ye;gt++){const Ge=ee*gt,et=ee*(gt+1),vt=Ie+Te+Ge,bt=Ie+ae+Ge,pe=Ie+ae+et,te=Ie+Te+et;Ce(vt,bt,pe,te)}}}function me(fe,Ie,Ue){l.push(fe),l.push(Ie),l.push(Ue)}function Se(fe,Ie,Ue){$e(fe),$e(Ie),$e(Ue);const Te=i.length/3,ae=S.generateTopUV(r,i,Te-3,Te-2,Te-1);ke(ae[0]),ke(ae[1]),ke(ae[2])}function Ce(fe,Ie,Ue,Te){$e(fe),$e(Ie),$e(Te),$e(Ie),$e(Ue),$e(Te);const ae=i.length/3,gt=S.generateSideWallUV(r,i,ae-6,ae-3,ae-2,ae-1);ke(gt[0]),ke(gt[1]),ke(gt[3]),ke(gt[1]),ke(gt[2]),ke(gt[3])}function $e(fe){i.push(l[fe*3+0]),i.push(l[fe*3+1]),i.push(l[fe*3+2])}function ke(fe){o.push(fe.x),o.push(fe.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return Pq(t,r,e)}static fromJSON(e,t){const r=[];for(let o=0,s=e.shapes.length;o<s;o++){const a=t[e.shapes[o]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new nA[i.type]().fromJSON(i)),new nS(r,e.options)}}const Cq={generateTopUV:function(n,e,t,r,i){const o=e[t*3],s=e[t*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new xt(o,s),new xt(a,l),new xt(u,c)]},generateSideWallUV:function(n,e,t,r,i,o){const s=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[r*3],c=e[r*3+1],h=e[r*3+2],f=e[i*3],d=e[i*3+1],v=e[i*3+2],y=e[o*3],x=e[o*3+1],g=e[o*3+2];return Math.abs(a-c)<Math.abs(s-u)?[new xt(s,1-l),new xt(u,1-h),new xt(f,1-v),new xt(y,1-g)]:[new xt(a,1-l),new xt(c,1-h),new xt(d,1-v),new xt(x,1-g)]}};function Pq(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const o=n[r];t.shapes.push(o.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class x1 extends bf{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,o,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new x1(e.radius,e.detail)}}class w1 extends bf{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new w1(e.radius,e.detail)}}class rS extends Rn{constructor(e=.5,t=1,r=32,i=1,o=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:o,thetaLength:s},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],c=[];let h=e;const f=(t-e)/i,d=new ye,v=new xt;for(let y=0;y<=i;y++){for(let x=0;x<=r;x++){const g=o+x/r*s;d.x=h*Math.cos(g),d.y=h*Math.sin(g),l.push(d.x,d.y,d.z),u.push(0,0,1),v.x=(d.x/t+1)/2,v.y=(d.y/t+1)/2,c.push(v.x,v.y)}h+=f}for(let y=0;y<i;y++){const x=y*(r+1);for(let g=0;g<r;g++){const S=g+x,_=S,E=S+r+1,C=S+r+2,I=S+1;a.push(_,E,I),a.push(E,C,I)}}this.setIndex(a),this.setAttribute("position",new nn(l,3)),this.setAttribute("normal",new nn(u,3)),this.setAttribute("uv",new nn(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rS(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class iS extends Rn{constructor(e=new Pd([new xt(0,.5),new xt(-.5,-.5),new xt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],o=[],s=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new nn(i,3)),this.setAttribute("normal",new nn(o,3)),this.setAttribute("uv",new nn(s,2));function u(c){const h=i.length/3,f=c.extractPoints(t);let d=f.shape;const v=f.holes;Iu.isClockWise(d)===!1&&(d=d.reverse());for(let x=0,g=v.length;x<g;x++){const S=v[x];Iu.isClockWise(S)===!0&&(v[x]=S.reverse())}const y=Iu.triangulateShape(d,v);for(let x=0,g=v.length;x<g;x++){const S=v[x];d=d.concat(S)}for(let x=0,g=d.length;x<g;x++){const S=d[x];i.push(S.x,S.y,0),o.push(0,0,1),s.push(S.x,S.y)}for(let x=0,g=y.length;x<g;x++){const S=y[x],_=S[0]+h,E=S[1]+h,C=S[2]+h;r.push(_,E,C),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return Rq(t,e)}static fromJSON(e,t){const r=[];for(let i=0,o=e.shapes.length;i<o;i++){const s=t[e.shapes[i]];r.push(s)}return new iS(r,e.curveSegments)}}function Rq(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class S1 extends Rn{constructor(e=1,t=32,r=16,i=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:o,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(s+a,Math.PI);let u=0;const c=[],h=new ye,f=new ye,d=[],v=[],y=[],x=[];for(let g=0;g<=r;g++){const S=[],_=g/r;let E=0;g===0&&s===0?E=.5/t:g===r&&l===Math.PI&&(E=-.5/t);for(let C=0;C<=t;C++){const I=C/t;h.x=-e*Math.cos(i+I*o)*Math.sin(s+_*a),h.y=e*Math.cos(s+_*a),h.z=e*Math.sin(i+I*o)*Math.sin(s+_*a),v.push(h.x,h.y,h.z),f.copy(h).normalize(),y.push(f.x,f.y,f.z),x.push(I+E,1-_),S.push(u++)}c.push(S)}for(let g=0;g<r;g++)for(let S=0;S<t;S++){const _=c[g][S+1],E=c[g][S],C=c[g+1][S],I=c[g+1][S+1];(g!==0||s>0)&&d.push(_,E,I),(g!==r-1||l<Math.PI)&&d.push(E,C,I)}this.setIndex(d),this.setAttribute("position",new nn(v,3)),this.setAttribute("normal",new nn(y,3)),this.setAttribute("uv",new nn(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new S1(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class oS extends bf{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new oS(e.radius,e.detail)}}class sS extends Rn{constructor(e=1,t=.4,r=12,i=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:o},r=Math.floor(r),i=Math.floor(i);const s=[],a=[],l=[],u=[],c=new ye,h=new ye,f=new ye;for(let d=0;d<=r;d++)for(let v=0;v<=i;v++){const y=v/i*o,x=d/r*Math.PI*2;h.x=(e+t*Math.cos(x))*Math.cos(y),h.y=(e+t*Math.cos(x))*Math.sin(y),h.z=t*Math.sin(x),a.push(h.x,h.y,h.z),c.x=e*Math.cos(y),c.y=e*Math.sin(y),f.subVectors(h,c).normalize(),l.push(f.x,f.y,f.z),u.push(v/i),u.push(d/r)}for(let d=1;d<=r;d++)for(let v=1;v<=i;v++){const y=(i+1)*d+v-1,x=(i+1)*(d-1)+v-1,g=(i+1)*(d-1)+v,S=(i+1)*d+v;s.push(y,x,S),s.push(x,g,S)}this.setIndex(s),this.setAttribute("position",new nn(a,3)),this.setAttribute("normal",new nn(l,3)),this.setAttribute("uv",new nn(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sS(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class aS extends Rn{constructor(e=1,t=.4,r=64,i=8,o=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:o,q:s},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],c=[],h=new ye,f=new ye,d=new ye,v=new ye,y=new ye,x=new ye,g=new ye;for(let _=0;_<=r;++_){const E=_/r*o*Math.PI*2;S(E,o,s,e,d),S(E+.01,o,s,e,v),x.subVectors(v,d),g.addVectors(v,d),y.crossVectors(x,g),g.crossVectors(y,x),y.normalize(),g.normalize();for(let C=0;C<=i;++C){const I=C/i*Math.PI*2,F=-t*Math.cos(I),R=t*Math.sin(I);h.x=d.x+(F*g.x+R*y.x),h.y=d.y+(F*g.y+R*y.y),h.z=d.z+(F*g.z+R*y.z),l.push(h.x,h.y,h.z),f.subVectors(h,d).normalize(),u.push(f.x,f.y,f.z),c.push(_/r),c.push(C/i)}}for(let _=1;_<=r;_++)for(let E=1;E<=i;E++){const C=(i+1)*(_-1)+(E-1),I=(i+1)*_+(E-1),F=(i+1)*_+E,R=(i+1)*(_-1)+E;a.push(C,I,R),a.push(I,F,R)}this.setIndex(a),this.setAttribute("position",new nn(l,3)),this.setAttribute("normal",new nn(u,3)),this.setAttribute("uv",new nn(c,2));function S(_,E,C,I,F){const R=Math.cos(_),k=Math.sin(_),L=C/E*_,N=Math.cos(L);F.x=I*(2+N)*.5*R,F.y=I*(2+N)*k*.5,F.z=I*Math.sin(L)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new aS(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class lS extends Rn{constructor(e=new eA(new ye(-1,-1,0),new ye(-1,1,0),new ye(1,1,0)),t=64,r=1,i=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:o};const s=e.computeFrenetFrames(t,o);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const a=new ye,l=new ye,u=new xt;let c=new ye;const h=[],f=[],d=[],v=[];y(),this.setIndex(v),this.setAttribute("position",new nn(h,3)),this.setAttribute("normal",new nn(f,3)),this.setAttribute("uv",new nn(d,2));function y(){for(let _=0;_<t;_++)x(_);x(o===!1?t:0),S(),g()}function x(_){c=e.getPointAt(_/t,c);const E=s.normals[_],C=s.binormals[_];for(let I=0;I<=i;I++){const F=I/i*Math.PI*2,R=Math.sin(F),k=-Math.cos(F);l.x=k*E.x+R*C.x,l.y=k*E.y+R*C.y,l.z=k*E.z+R*C.z,l.normalize(),f.push(l.x,l.y,l.z),a.x=c.x+r*l.x,a.y=c.y+r*l.y,a.z=c.z+r*l.z,h.push(a.x,a.y,a.z)}}function g(){for(let _=1;_<=t;_++)for(let E=1;E<=i;E++){const C=(i+1)*(_-1)+(E-1),I=(i+1)*_+(E-1),F=(i+1)*_+E,R=(i+1)*(_-1)+E;v.push(C,I,R),v.push(I,F,R)}}function S(){for(let _=0;_<=t;_++)for(let E=0;E<=i;E++)u.x=_/t,u.y=E/i,d.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new lS(new nA[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class OF extends Rn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new ye,o=new ye;if(e.index!==null){const s=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const h=l[u],f=h.start,d=h.count;for(let v=f,y=f+d;v<y;v+=3)for(let x=0;x<3;x++){const g=a.getX(v+x),S=a.getX(v+(x+1)%3);i.fromBufferAttribute(s,g),o.fromBufferAttribute(s,S),BP(i,o,r)===!0&&(t.push(i.x,i.y,i.z),t.push(o.x,o.y,o.z))}}}else{const s=e.attributes.position;for(let a=0,l=s.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,h=3*a+(u+1)%3;i.fromBufferAttribute(s,c),o.fromBufferAttribute(s,h),BP(i,o,r)===!0&&(t.push(i.x,i.y,i.z),t.push(o.x,o.y,o.z))}}this.setAttribute("position",new nn(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function BP(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var UP=Object.freeze({__proto__:null,BoxGeometry:Kd,CapsuleGeometry:Kw,CircleGeometry:Jw,ConeGeometry:Qw,CylinderGeometry:_g,DodecahedronGeometry:eS,EdgesGeometry:rA,ExtrudeGeometry:nS,IcosahedronGeometry:x1,LatheGeometry:y1,OctahedronGeometry:w1,PlaneGeometry:v1,PolyhedronGeometry:bf,RingGeometry:rS,ShapeGeometry:iS,SphereGeometry:S1,TetrahedronGeometry:oS,TorusGeometry:sS,TorusKnotGeometry:aS,TubeGeometry:lS,WireframeGeometry:OF});class BF extends Ko{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Kt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class UF extends ql{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class uS extends Ko{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Kt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sf,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zF extends uS{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new xt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ni(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Kt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Kt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Kt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class HF extends Ko{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Kt(16777215),this.specular=new Kt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sf,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=d1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class GF extends Ko{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Kt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sf,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class VF extends Ko{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sf,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class WF extends Ko{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Kt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Kt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sf,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=d1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jF extends Ko{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Kt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Sf,this.normalScale=new xt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class qF extends Ss{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ja(n,e,t){return iA(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Sd(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function iA(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function $F(n){function e(i,o){return n[i]-n[o]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function RM(n,e,t){const r=n.length,i=new n.constructor(r);for(let o=0,s=0;s!==r;++o){const a=t[o]*e;for(let l=0;l!==e;++l)i[s++]=n[a+l]}return i}function oA(n,e,t,r){let i=1,o=n[0];for(;o!==void 0&&o[r]===void 0;)o=n[i++];if(o===void 0)return;let s=o[r];if(s!==void 0)if(Array.isArray(s))do s=o[r],s!==void 0&&(e.push(o.time),t.push.apply(t,s)),o=n[i++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[r],s!==void 0&&(e.push(o.time),s.toArray(t,t.length)),o=n[i++];while(o!==void 0);else do s=o[r],s!==void 0&&(e.push(o.time),t.push(s)),o=n[i++];while(o!==void 0)}function Lq(n,e,t,r,i=30){const o=n.clone();o.name=e;const s=[];for(let l=0;l<o.tracks.length;++l){const u=o.tracks[l],c=u.getValueSize(),h=[],f=[];for(let d=0;d<u.times.length;++d){const v=u.times[d]*i;if(!(v<t||v>=r)){h.push(u.times[d]);for(let y=0;y<c;++y)f.push(u.values[d*c+y])}}h.length!==0&&(u.times=Sd(h,u.times.constructor),u.values=Sd(f,u.values.constructor),s.push(u))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o}function kq(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,o=e/r;for(let s=0;s<i;++s){const a=t.tracks[s],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(u===void 0)continue;let c=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);let f=0;const d=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);const v=a.times.length-1;let y;if(o<=a.times[0]){const g=c,S=h-c;y=Ja(a.values,g,S)}else if(o>=a.times[v]){const g=v*h+c,S=g+h-c;y=Ja(a.values,g,S)}else{const g=a.createInterpolant(),S=c,_=h-c;g.evaluate(o),y=Ja(g.resultBuffer,S,_)}l==="quaternion"&&new ys().fromArray(y).normalize().conjugate().toArray(y);const x=u.times.length;for(let g=0;g<x;++g){const S=g*d+f;if(l==="quaternion")ys.multiplyQuaternionsFlat(u.values,S,y,0,u.values,S);else{const _=d-f*2;for(let E=0;E<_;++E)u.values[S+E]-=y[E]}}}return n.blendMode=D3,n}const Iq={arraySlice:Ja,convertArray:Sd,isTypedArray:iA,getKeyframeOrder:$F,sortedArray:RM,flattenJSON:oA,subclip:Lq,makeClipAdditive:kq};class _1{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],o=t[r-1];e:{t:{let s;n:{i:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<o)break i;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(o=i,i=t[++r],e<i)break t}s=t.length;break n}if(!(e>=o)){const a=t[1];e<a&&(r=2,o=a);for(let l=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=o,o=t[--r-1],e>=o)break t}s=r,r=0;break n}break e}for(;r<s;){const a=r+s>>>1;e<t[a]?s=a:r=a+1}if(i=t[r],o=t[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=e*i;for(let s=0;s!==i;++s)t[s]=r[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class XF extends _1{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:vd,endingEnd:vd}}intervalChanged_(e,t,r){const i=this.parameterPositions;let o=e-2,s=e+1,a=i[o],l=i[s];if(a===void 0)switch(this.getSettings_().endingStart){case yd:o=e,a=2*t-r;break;case Nv:o=i.length-2,a=t+i[o]-i[o+1];break;default:o=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case yd:s=e,l=2*r-t;break;case Nv:s=1,l=r+i[1]-i[0];break;default:s=e-1,l=t}const u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-r),this._offsetPrev=o*c,this._offsetNext=s*c}interpolate_(e,t,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,h=this._offsetNext,f=this._weightPrev,d=this._weightNext,v=(r-t)/(i-t),y=v*v,x=y*v,g=-f*x+2*f*y-f*v,S=(1+f)*x+(-1.5-2*f)*y+(-.5+f)*v+1,_=(-1-d)*x+(1.5+d)*y+.5*v,E=d*x-d*y;for(let C=0;C!==a;++C)o[C]=g*s[c+C]+S*s[u+C]+_*s[l+C]+E*s[h+C];return o}}class sA extends _1{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(r-t)/(i-t),h=1-c;for(let f=0;f!==a;++f)o[f]=s[u+f]*h+s[l+f]*c;return o}}class YF extends _1{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ql{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Sd(t,this.TimeBufferType),this.values=Sd(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Sd(e.times,Array),values:Sd(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new YF(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new sA(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new XF(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case kv:t=this.InterpolantFactoryMethodDiscrete;break;case Iv:t=this.InterpolantFactoryMethodLinear;break;case Q2:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return kv;case this.InterpolantFactoryMethodLinear:return Iv;case this.InterpolantFactoryMethodSmooth:return Q2}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let o=0,s=i-1;for(;o!==i&&r[o]<e;)++o;for(;s!==-1&&r[s]>t;)--s;if(++s,o!==0||s!==i){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=Ja(r,o,s),this.values=Ja(this.values,o*a,s*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(i!==void 0&&iA(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=Ja(this.times),t=Ja(this.values),r=this.getValueSize(),i=this.getInterpolation()===Q2,o=e.length-1;let s=1;for(let a=1;a<o;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(i)l=!0;else{const h=a*r,f=h-r,d=h+r;for(let v=0;v!==r;++v){const y=t[h+v];if(y!==t[f+v]||y!==t[d+v]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];const h=a*r,f=s*r;for(let d=0;d!==r;++d)t[f+d]=t[h+d]}++s}}if(o>0){e[s]=e[o];for(let a=o*r,l=s*r,u=0;u!==r;++u)t[l+u]=t[a+u];++s}return s!==e.length?(this.times=Ja(e,0,s),this.values=Ja(t,0,s*r)):(this.times=e,this.values=t),this}clone(){const e=Ja(this.times,0),t=Ja(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Ql.prototype.TimeBufferType=Float32Array;Ql.prototype.ValueBufferType=Float32Array;Ql.prototype.DefaultInterpolation=Iv;class Jd extends Ql{}Jd.prototype.ValueTypeName="bool";Jd.prototype.ValueBufferType=Array;Jd.prototype.DefaultInterpolation=kv;Jd.prototype.InterpolantFactoryMethodLinear=void 0;Jd.prototype.InterpolantFactoryMethodSmooth=void 0;class aA extends Ql{}aA.prototype.ValueTypeName="color";class Gv extends Ql{}Gv.prototype.ValueTypeName="number";class ZF extends _1{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let u=e*a;for(let c=u+a;u!==c;u+=4)ys.slerpFlat(o,0,s,u-a,s,u,l);return o}}class bg extends Ql{InterpolantFactoryMethodLinear(e){return new ZF(this.times,this.values,this.getValueSize(),e)}}bg.prototype.ValueTypeName="quaternion";bg.prototype.DefaultInterpolation=Iv;bg.prototype.InterpolantFactoryMethodSmooth=void 0;class Qd extends Ql{}Qd.prototype.ValueTypeName="string";Qd.prototype.ValueBufferType=Array;Qd.prototype.DefaultInterpolation=kv;Qd.prototype.InterpolantFactoryMethodLinear=void 0;Qd.prototype.InterpolantFactoryMethodSmooth=void 0;class Vv extends Ql{}Vv.prototype.ValueTypeName="vector";class Wv{constructor(e,t=-1,r,i=Uw){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=ba(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,a=r.length;s!==a;++s)t.push(Fq(r[s]).scale(i));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=r.length;o!==s;++o)t.push(Ql.toJSON(r[o]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const o=t.length,s=[];for(let a=0;a<o;a++){let l=[],u=[];l.push((a+o-1)%o,a,(a+1)%o),u.push(0,1,0);const c=$F(l);l=RM(l,1,c),u=RM(u,1,c),!i&&l[0]===0&&(l.push(o),u.push(u[0])),s.push(new Gv(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/r))}return new this(e,-1,s)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(o);if(c&&c.length>1){const h=c[1];let f=i[h];f||(i[h]=f=[]),f.push(u)}}const s=[];for(const a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,f,d,v,y){if(d.length!==0){const x=[],g=[];oA(d,x,g,v),x.length!==0&&y.push(new h(f,x,g))}},i=[],o=e.name||"default",s=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const f=u[h].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const d={};let v;for(v=0;v<f.length;v++)if(f[v].morphTargets)for(let y=0;y<f[v].morphTargets.length;y++)d[f[v].morphTargets[y]]=-1;for(const y in d){const x=[],g=[];for(let S=0;S!==f[v].morphTargets.length;++S){const _=f[v];x.push(_.time),g.push(_.morphTarget===y?1:0)}i.push(new Gv(".morphTargetInfluence["+y+"]",x,g))}l=d.length*s}else{const d=".bones["+t[h].name+"]";r(Vv,d+".position",f,"pos",i),r(bg,d+".quaternion",f,"rot",i),r(Vv,d+".scale",f,"scl",i)}}return i.length===0?null:new this(o,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const o=this.tracks[r];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Nq(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Gv;case"vector":case"vector2":case"vector3":case"vector4":return Vv;case"color":return aA;case"quaternion":return bg;case"bool":case"boolean":return Jd;case"string":return Qd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function Fq(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=Nq(n.type);if(n.times===void 0){const t=[],r=[];oA(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const zd={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class lA{constructor(e,t,r){const i=this;let o=!1,s=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){a++,o===!1&&i.onStart!==void 0&&i.onStart(c,s,a),o=!0},this.itemEnd=function(c){s++,i.onProgress!==void 0&&i.onProgress(c,s,a),s===a&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,h){return u.push(c,h),this},this.removeHandler=function(c){const h=u.indexOf(c);return h!==-1&&u.splice(h,2),this},this.getHandler=function(c){for(let h=0,f=u.length;h<f;h+=2){const d=u[h],v=u[h+1];if(d.global&&(d.lastIndex=0),d.test(c))return v}return null}}}const KF=new lA;class ra{constructor(e){this.manager=e!==void 0?e:KF,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,o){r.load(e,i,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ra.DEFAULT_MATERIAL_NAME="__DEFAULT";const hc={};class Dq extends Error{constructor(e,t){super(e),this.response=t}}class Uc extends ra{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=zd.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(hc[e]!==void 0){hc[e].push({onLoad:t,onProgress:r,onError:i});return}hc[e]=[],hc[e].push({onLoad:t,onProgress:r,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=hc[e],h=u.body.getReader(),f=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),d=f?parseInt(f):0,v=d!==0;let y=0;const x=new ReadableStream({start(g){S();function S(){h.read().then(({done:_,value:E})=>{if(_)g.close();else{y+=E.byteLength;const C=new ProgressEvent("progress",{lengthComputable:v,loaded:y,total:d});for(let I=0,F=c.length;I<F;I++){const R=c[I];R.onProgress&&R.onProgress(C)}g.enqueue(E),S()}})}}});return new Response(x)}else throw new Dq(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a===void 0)return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),f=h&&h[1]?h[1].toLowerCase():void 0,d=new TextDecoder(f);return u.arrayBuffer().then(v=>d.decode(v))}}}).then(u=>{zd.add(e,u);const c=hc[e];delete hc[e];for(let h=0,f=c.length;h<f;h++){const d=c[h];d.onLoad&&d.onLoad(u)}}).catch(u=>{const c=hc[e];if(c===void 0)throw this.manager.itemError(e),u;delete hc[e];for(let h=0,f=c.length;h<f;h++){const d=c[h];d.onError&&d.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Oq extends ra{constructor(e){super(e)}load(e,t,r,i){const o=this,s=new Uc(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{t(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=Wv.parse(e[r]);t.push(i)}return t}}class Bq extends ra{constructor(e){super(e)}load(e,t,r,i){const o=this,s=[],a=new Xw,l=new Uc(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials);let u=0;function c(h){l.load(e[h],function(f){const d=o.parse(f,!0);s[h]={width:d.width,height:d.height,format:d.format,mipmaps:d.mipmaps},u+=1,u===6&&(d.mipmapCount===1&&(a.minFilter=ri),a.image=s,a.format=d.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let h=0,f=e.length;h<f;++h)c(h);else l.load(e,function(h){const f=o.parse(h,!0);if(f.isCubemap){const d=f.mipmaps.length/f.mipmapCount;for(let v=0;v<d;v++){s[v]={mipmaps:[]};for(let y=0;y<f.mipmapCount;y++)s[v].mipmaps.push(f.mipmaps[v*f.mipmapCount+y]),s[v].format=f.format,s[v].width=f.width,s[v].height=f.height}a.image=s}else a.image.width=f.width,a.image.height=f.height,a.mipmaps=f.mipmaps;f.mipmapCount===1&&(a.minFilter=ri),a.format=f.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class jv extends ra{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=zd.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const a=Ov("img");function l(){c(),zd.add(e,this),t&&t(this),o.manager.itemEnd(e)}function u(h){c(),i&&i(h),o.manager.itemError(e),o.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}}class JF extends ra{constructor(e){super(e)}load(e,t,r,i){const o=new g1;o.colorSpace=Hn;const s=new jv(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function l(u){s.load(e[u],function(c){o.images[u]=c,a++,a===6&&(o.needsUpdate=!0,t&&t(o))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return o}}class uA extends ra{constructor(e){super(e)}load(e,t,r,i){const o=this,s=new Bm,a=new Uc(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(o.withCredentials),a.load(e,function(l){let u;try{u=o.parse(l)}catch(c){if(i!==void 0)i(c);else{console.error(c);return}}if(!u)return i();u.image!==void 0?s.image=u.image:u.data!==void 0&&(s.image.width=u.width,s.image.height=u.height,s.image.data=u.data),s.wrapS=u.wrapS!==void 0?u.wrapS:ps,s.wrapT=u.wrapT!==void 0?u.wrapT:ps,s.magFilter=u.magFilter!==void 0?u.magFilter:ri,s.minFilter=u.minFilter!==void 0?u.minFilter:ri,s.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?s.colorSpace=u.colorSpace:u.encoding!==void 0&&(s.encoding=u.encoding),u.flipY!==void 0&&(s.flipY=u.flipY),u.format!==void 0&&(s.format=u.format),u.type!==void 0&&(s.type=u.type),u.mipmaps!==void 0&&(s.mipmaps=u.mipmaps,s.minFilter=cf),u.mipmapCount===1&&(s.minFilter=ri),u.generateMipmaps!==void 0&&(s.generateMipmaps=u.generateMipmaps),s.needsUpdate=!0,t&&t(s,u)},r,i),s}}class Uq extends ra{constructor(e){super(e)}load(e,t,r,i){const o=new Di,s=new jv(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,t!==void 0&&t(o)},r,i),o}}class Mf extends fr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Kt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class cA extends Mf{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(fr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Kt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const $_=new zn,zP=new ye,HP=new ye;class hA{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new xt(512,512),this.map=null,this.mapPass=null,this.matrix=new zn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Hw,this._frameExtents=new xt(1,1),this._viewportCount=1,this._viewports=[new Or(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;zP.setFromMatrixPosition(e.matrixWorld),t.position.copy(zP),HP.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(HP),t.updateMatrixWorld(),$_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix($_),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply($_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class zq extends hA{constructor(){super(new _i(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=rg*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(r!==t.fov||i!==t.aspect||o!==t.far)&&(t.fov=r,t.aspect=i,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class QF extends Mf{constructor(e,t,r=0,i=Math.PI/3,o=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(fr.DEFAULT_UP),this.updateMatrix(),this.target=new fr,this.distance=r,this.angle=i,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new zq}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const GP=new zn,p0=new ye,X_=new ye;class Hq extends hA{constructor(){super(new _i(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new xt(4,2),this._viewportCount=6,this._viewports=[new Or(2,1,1,1),new Or(0,1,1,1),new Or(3,1,1,1),new Or(1,1,1,1),new Or(3,0,1,1),new Or(1,0,1,1)],this._cubeDirections=[new ye(1,0,0),new ye(-1,0,0),new ye(0,0,1),new ye(0,0,-1),new ye(0,1,0),new ye(0,-1,0)],this._cubeUps=[new ye(0,1,0),new ye(0,1,0),new ye(0,1,0),new ye(0,1,0),new ye(0,0,1),new ye(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),p0.setFromMatrixPosition(e.matrixWorld),r.position.copy(p0),X_.copy(r.position),X_.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(X_),r.updateMatrixWorld(),i.makeTranslation(-p0.x,-p0.y,-p0.z),GP.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(GP)}}class e6 extends Mf{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new Hq}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Gq extends hA{constructor(){super(new ku(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class qx extends Mf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(fr.DEFAULT_UP),this.updateMatrix(),this.target=new fr,this.shadow=new Gq}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class fA extends Mf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class t6 extends Mf{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class n6{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ye)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,o=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*i),t.addScaledVector(s[2],.488603*o),t.addScaledVector(s[3],.488603*r),t.addScaledVector(s[4],1.092548*(r*i)),t.addScaledVector(s[5],1.092548*(i*o)),t.addScaledVector(s[6],.315392*(3*o*o-1)),t.addScaledVector(s[7],1.092548*(r*o)),t.addScaledVector(s[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,o=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*i),t.addScaledVector(s[2],2*.511664*o),t.addScaledVector(s[3],2*.511664*r),t.addScaledVector(s[4],2*.429043*r*i),t.addScaledVector(s[5],2*.429043*i*o),t.addScaledVector(s[6],.743125*o*o-.247708),t.addScaledVector(s[7],2*.429043*r*o),t.addScaledVector(s[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,o=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*o,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*r*o,t[8]=.546274*(r*r-i*i)}}class cS extends Mf{constructor(e=new n6,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class hS extends ra{constructor(e){super(e),this.textures={}}load(e,t,r,i){const o=this,s=new Uc(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{t(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(o){return t[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),t[o]}const i=hS.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Kt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const s=e.uniforms[o];switch(i.uniforms[o]={},s.type){case"t":i.uniforms[o].value=r(s.value);break;case"c":i.uniforms[o].value=new Kt().setHex(s.value);break;case"v2":i.uniforms[o].value=new xt().fromArray(s.value);break;case"v3":i.uniforms[o].value=new ye().fromArray(s.value);break;case"v4":i.uniforms[o].value=new Or().fromArray(s.value);break;case"m3":i.uniforms[o].value=new Xn().fromArray(s.value);break;case"m4":i.uniforms[o].value=new zn().fromArray(s.value);break;default:i.uniforms[o].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const o in e.extensions)i.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),i.normalScale=new xt().fromArray(o)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new xt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:BF,SpriteMaterial:X3,RawShaderMaterial:UF,ShaderMaterial:ql,PointsMaterial:Z3,MeshPhysicalMaterial:zF,MeshStandardMaterial:uS,MeshPhongMaterial:HF,MeshToonMaterial:GF,MeshNormalMaterial:VF,MeshLambertMaterial:WF,MeshDepthMaterial:q3,MeshDistanceMaterial:$3,MeshBasicMaterial:_f,MeshMatcapMaterial:jF,LineDashedMaterial:qF,LineBasicMaterial:Ss,Material:Ko};return new t[e]}}class LM{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class r6 extends Rn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class i6 extends ra{constructor(e){super(e)}load(e,t,r,i){const o=this,s=new Uc(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{t(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(d,v){if(t[v]!==void 0)return t[v];const x=d.interleavedBuffers[v],g=o(d,x.buffer),S=Mm(x.type,g),_=new qw(S,x.stride);return _.uuid=x.uuid,t[v]=_,_}function o(d,v){if(r[v]!==void 0)return r[v];const x=d.arrayBuffers[v],g=new Uint32Array(x).buffer;return r[v]=g,g}const s=e.isInstancedBufferGeometry?new r6:new Rn,a=e.data.index;if(a!==void 0){const d=Mm(a.type,a.array);s.setIndex(new Mr(d,1))}const l=e.data.attributes;for(const d in l){const v=l[d];let y;if(v.isInterleavedBufferAttribute){const x=i(e.data,v.data);y=new Bd(x,v.itemSize,v.offset,v.normalized)}else{const x=Mm(v.type,v.array),g=v.isInstancedBufferAttribute?sg:Mr;y=new g(x,v.itemSize,v.normalized)}v.name!==void 0&&(y.name=v.name),v.usage!==void 0&&y.setUsage(v.usage),v.updateRange!==void 0&&(y.updateRange.offset=v.updateRange.offset,y.updateRange.count=v.updateRange.count),s.setAttribute(d,y)}const u=e.data.morphAttributes;if(u)for(const d in u){const v=u[d],y=[];for(let x=0,g=v.length;x<g;x++){const S=v[x];let _;if(S.isInterleavedBufferAttribute){const E=i(e.data,S.data);_=new Bd(E,S.itemSize,S.offset,S.normalized)}else{const E=Mm(S.type,S.array);_=new Mr(E,S.itemSize,S.normalized)}S.name!==void 0&&(_.name=S.name),y.push(_)}s.morphAttributes[d]=y}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let d=0,v=h.length;d!==v;++d){const y=h[d];s.addGroup(y.start,y.count,y.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const d=new ye;f.center!==void 0&&d.fromArray(f.center),s.boundingSphere=new Zl(d,f.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class Vq extends ra{constructor(e){super(e)}load(e,t,r,i){const o=this,s=this.path===""?LM.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new Uc(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(h){i!==void 0&&i(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?LM.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const o=new Uc(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const s=await o.loadAsync(e,t),a=JSON.parse(s),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,o,l,a,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),t!==void 0){let h=!1;for(const f in s)if(s[f].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,o),a=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,i,a,s,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const o=new Pd().fromJSON(e[r]);t[o.uuid]=o}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(o){o.isBone&&(i[o.uuid]=o)}),e!==void 0)for(let o=0,s=e.length;o<s;o++){const a=new $w().fromJSON(e[o],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new i6;for(let o=0,s=e.length;o<s;o++){let a;const l=e[o];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in UP?a=UP[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const o=new hS;o.setTextures(t);for(let s=0,a=e.length;s<a;s++){const l=e[s];r[l.uuid]===void 0&&(r[l.uuid]=o.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],o=Wv.parse(i);t[o.uuid]=o}return t}parseImages(e,t){const r=this,i={};let o;function s(l){return r.manager.itemStart(l),o.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return s(c)}else return l.data?{data:Mm(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new lA(t);o=new jv(l),o.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const h=e[u],f=h.url;if(Array.isArray(f)){const d=[];for(let v=0,y=f.length;v<y;v++){const x=f[v],g=a(x);g!==null&&(g instanceof HTMLImageElement?d.push(g):d.push(new Bm(g.data,g.width,g.height)))}i[h.uuid]=new xd(d)}else{const d=a(h.url);i[h.uuid]=new xd(d)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function o(s){if(typeof s=="string"){const a=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return s.data?{data:Mm(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){i=new jv(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,a=e.length;s<a;s++){const l=e[s],u=l.url;if(Array.isArray(u)){const c=[];for(let h=0,f=u.length;h<f;h++){const d=u[h],v=await o(d);v!==null&&(v instanceof HTMLImageElement?c.push(v):c.push(new Bm(v.data,v.width,v.height)))}r[l.uuid]=new xd(c)}else{const c=await o(l.url);r[l.uuid]=new xd(c)}}}return r}parseTextures(e,t){function r(o,s){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),s[o])}const i={};if(e!==void 0)for(let o=0,s=e.length;o<s;o++){const a=e[o];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let c;Array.isArray(u)?(c=new g1,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new Bm:c=new Di,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=r(a.mapping,Wq)),a.channel!==void 0&&(c.channel=a.channel),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=r(a.wrap[0],VP),c.wrapT=r(a.wrap[1],VP)),a.format!==void 0&&(c.format=a.format),a.internalFormat!==void 0&&(c.internalFormat=a.internalFormat),a.type!==void 0&&(c.type=a.type),a.colorSpace!==void 0&&(c.colorSpace=a.colorSpace),a.encoding!==void 0&&(c.encoding=a.encoding),a.minFilter!==void 0&&(c.minFilter=r(a.minFilter,WP)),a.magFilter!==void 0&&(c.magFilter=r(a.magFilter,WP)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.generateMipmaps!==void 0&&(c.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(c.compareFunction=a.compareFunction),a.userData!==void 0&&(c.userData=a.userData),i[a.uuid]=c}return i}parseObject(e,t,r,i,o){let s;function a(f){return t[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),t[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const d=[];for(let v=0,y=f.length;v<y;v++){const x=f[v];r[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),d.push(r[x])}return d}return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),r[f]}}function u(f){return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),i[f]}let c,h;switch(e.type){case"Scene":s=new og,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Kt(e.background):s.background=u(e.background)),e.environment!==void 0&&(s.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new jw(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new Ww(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":s=new _i(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new ku(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new fA(e.color,e.intensity);break;case"DirectionalLight":s=new qx(e.color,e.intensity);break;case"PointLight":s=new e6(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new t6(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new QF(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new cA(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new cS().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),h=l(e.material),s=new EF(c,h),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),h=l(e.material),s=new xo(c,h);break;case"InstancedMesh":c=a(e.geometry),h=l(e.material);const f=e.count,d=e.instanceMatrix,v=e.instanceColor;s=new AF(c,h,f),s.instanceMatrix=new sg(new Float32Array(d.array),16),v!==void 0&&(s.instanceColor=new sg(new Float32Array(v.array),v.itemSize));break;case"LOD":s=new MF;break;case"Line":s=new hf(a(e.geometry),l(e.material));break;case"LineLoop":s=new TF(a(e.geometry),l(e.material));break;case"LineSegments":s=new Kl(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new CF(a(e.geometry),l(e.material));break;case"Sprite":s=new bF(l(e.material));break;case"Group":s=new Am;break;case"Bone":s=new Y3;break;default:s=new fr}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let d=0;d<f.length;d++)s.add(this.parseObject(f[d],t,r,i,o))}if(e.animations!==void 0){const f=e.animations;for(let d=0;d<f.length;d++){const v=f[d];s.animations.push(o[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const f=e.levels;for(let d=0;d<f.length;d++){const v=f[d],y=s.getObjectByProperty("uuid",v.object);y!==void 0&&s.addLevel(y,v.distance,v.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const Wq={UVMapping:Ow,CubeReflectionMapping:Du,CubeRefractionMapping:uf,EquirectangularReflectionMapping:ng,EquirectangularRefractionMapping:Pv,CubeUVReflectionMapping:wg},VP={RepeatWrapping:Rv,ClampToEdgeWrapping:ps,MirroredRepeatWrapping:Lv},WP={NearestFilter:Wi,NearestMipmapNearestFilter:Vx,NearestMipmapLinearFilter:$0,LinearFilter:ri,LinearMipmapNearestFilter:C3,LinearMipmapLinearFilter:cf};class jq extends ra{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=zd.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(l){zd.add(e,l),t&&t(l),o.manager.itemEnd(e)}).catch(function(l){i&&i(l),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}let r2;class dA{static getContext(){return r2===void 0&&(r2=new(window.AudioContext||window.webkitAudioContext)),r2}static setContext(e){r2=e}}class qq extends ra{constructor(e){super(e)}load(e,t,r,i){const o=this,s=new Uc(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const u=l.slice(0);dA.getContext().decodeAudioData(u,function(h){t(h)},a)}catch(u){a(u)}},r,i);function a(l){i?i(l):console.error(l),o.manager.itemError(e)}}}class $q extends cS{constructor(e,t,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new Kt().set(e),o=new Kt().set(t),s=new ye(i.r,i.g,i.b),a=new ye(o.r,o.g,o.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(s).sub(a).multiplyScalar(u)}}class Xq extends cS{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const r=new Kt().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const jP=new zn,qP=new zn,Zf=new zn;class Yq{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new _i,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new _i,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Zf.copy(e.projectionMatrix);const i=t.eyeSep/2,o=i*t.near/t.focus,s=t.near*Math.tan(Td*t.fov*.5)/t.zoom;let a,l;qP.elements[12]=-i,jP.elements[12]=i,a=-s*t.aspect+o,l=s*t.aspect+o,Zf.elements[0]=2*t.near/(l-a),Zf.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Zf),a=-s*t.aspect-o,l=s*t.aspect-o,Zf.elements[0]=2*t.near/(l-a),Zf.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Zf)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(qP),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(jP)}}class pA{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=$P(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=$P();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function $P(){return(typeof performance>"u"?Date:performance).now()}const Kf=new ye,XP=new ys,Zq=new ye,Jf=new ye;class Kq extends fr{constructor(){super(),this.type="AudioListener",this.context=dA.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new pA}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Kf,XP,Zq),Jf.set(0,0,-1).applyQuaternion(XP),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Kf.x,i),t.positionY.linearRampToValueAtTime(Kf.y,i),t.positionZ.linearRampToValueAtTime(Kf.z,i),t.forwardX.linearRampToValueAtTime(Jf.x,i),t.forwardY.linearRampToValueAtTime(Jf.y,i),t.forwardZ.linearRampToValueAtTime(Jf.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(Kf.x,Kf.y,Kf.z),t.setOrientation(Jf.x,Jf.y,Jf.z,r.x,r.y,r.z)}}class o6 extends fr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Qf=new ye,YP=new ys,Jq=new ye,ed=new ye;class Qq extends o6{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Qf,YP,Jq),ed.set(0,0,1).applyQuaternion(YP);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Qf.x,r),t.positionY.linearRampToValueAtTime(Qf.y,r),t.positionZ.linearRampToValueAtTime(Qf.z,r),t.orientationX.linearRampToValueAtTime(ed.x,r),t.orientationY.linearRampToValueAtTime(ed.y,r),t.orientationZ.linearRampToValueAtTime(ed.z,r)}else t.setPosition(Qf.x,Qf.y,Qf.z),t.setOrientation(ed.x,ed.y,ed.z)}}class e${constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class s6{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,o,s;switch(t){case"quaternion":i=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,o=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let a=0;a!==i;++a)r[o+a]=r[a];s=t}else{s+=t;const a=t/s;this._mixBufferRegion(r,o,0,a,i)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-o,t)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let o=r,s=i;o!==s;++o)t[o]=t[i+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,o){if(i>=.5)for(let s=0;s!==o;++s)e[t+s]=e[r+s]}_slerp(e,t,r,i){ys.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,o){const s=this._workIndex*o;ys.multiplyQuaternionsFlat(e,s,e,t,e,r),ys.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,r,i,o){const s=1-i;for(let a=0;a!==o;++a){const l=t+a;e[l]=e[l]*s+e[r+a]*i}}_lerpAdditive(e,t,r,i,o){for(let s=0;s!==o;++s){const a=t+s;e[a]=e[a]+e[r+s]*i}}}const mA="\\[\\]\\.:\\/",t$=new RegExp("["+mA+"]","g"),gA="[^"+mA+"]",n$="[^"+mA.replace("\\.","")+"]",r$=/((?:WC+[\/:])*)/.source.replace("WC",gA),i$=/(WCOD+)?/.source.replace("WCOD",n$),o$=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",gA),s$=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",gA),a$=new RegExp("^"+r$+i$+o$+s$+"$"),l$=["material","materials","bones","map"];class u${constructor(e,t,r){const i=r||mr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=r.length;i!==o;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class mr{constructor(e,t,r){this.path=t,this.parsedPath=r||mr.parseTrackName(t),this.node=mr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new mr.Composite(e,t,r):new mr(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(t$,"")}static parseTrackName(e){const t=a$.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const o=r.nodeName.substring(i+1);l$.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(o){for(let s=0;s<o.length;s++){const a=o[s];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let o=t.propertyIndex;if(e||(e=mr.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const s=e[i];if(s===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=o}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}mr.Composite=u$;mr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};mr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};mr.prototype.GetterByBindingType=[mr.prototype._getValue_direct,mr.prototype._getValue_array,mr.prototype._getValue_arrayElement,mr.prototype._getValue_toArray];mr.prototype.SetterByBindingTypeAndVersioning=[[mr.prototype._setValue_direct,mr.prototype._setValue_direct_setNeedsUpdate,mr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[mr.prototype._setValue_array,mr.prototype._setValue_array_setNeedsUpdate,mr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[mr.prototype._setValue_arrayElement,mr.prototype._setValue_arrayElement_setNeedsUpdate,mr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[mr.prototype._setValue_fromArray,mr.prototype._setValue_fromArray_setNeedsUpdate,mr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class c${constructor(){this.isAnimationObjectGroup=!0,this.uuid=ba(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,o=this._bindings,s=o.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const f=arguments[c],d=f.uuid;let v=t[d];if(v===void 0){v=l++,t[d]=v,e.push(f);for(let y=0,x=s;y!==x;++y)o[y].push(new mr(f,r[y],i[y]))}else if(v<u){a=e[v];const y=--u,x=e[y];t[x.uuid]=v,e[v]=x,t[d]=y,e[y]=f;for(let g=0,S=s;g!==S;++g){const _=o[g],E=_[y];let C=_[v];_[v]=E,C===void 0&&(C=new mr(f,r[g],i[g])),_[y]=C}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const l=arguments[s],u=l.uuid,c=t[u];if(c!==void 0&&c>=o){const h=o++,f=e[h];t[f.uuid]=c,e[c]=f,t[u]=h,e[h]=l;for(let d=0,v=i;d!==v;++d){const y=r[d],x=y[h],g=y[c];y[c]=x,y[h]=g}}}this.nCachedObjects_=o}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_,s=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,h=t[c];if(h!==void 0)if(delete t[c],h<o){const f=--o,d=e[f],v=--s,y=e[v];t[d.uuid]=h,e[h]=d,t[y.uuid]=f,e[f]=y,e.pop();for(let x=0,g=i;x!==g;++x){const S=r[x],_=S[f],E=S[v];S[h]=_,S[f]=E,S.pop()}}else{const f=--s,d=e[f];f>0&&(t[d.uuid]=h),e[h]=d,e.pop();for(let v=0,y=i;v!==y;++v){const x=r[v];x[h]=x[f],x.pop()}}}this.nCachedObjects_=o}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const o=this._bindings;if(i!==void 0)return o[i];const s=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,h=new Array(u);i=o.length,r[e]=i,s.push(e),a.push(t),o.push(h);for(let f=c,d=l.length;f!==d;++f){const v=l[f];h[f]=new mr(v,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length-1,l=s[a],u=e[a];t[u]=r,s[r]=l,s.pop(),o[r]=o[a],o.pop(),i[r]=i[a],i.pop()}}}class a6{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const o=t.tracks,s=o.length,a=new Array(s),l={endingStart:vd,endingEnd:vd};for(let u=0;u!==s;++u){const c=o[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=qN,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,o=e._clip.duration,s=o/i,a=i/o;e.warp(1,s,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,o=i.time,s=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=o,l[1]=o+r,u[0]=e/s,u[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const l=(e-o)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const s=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case D3:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(s),u[c].accumulateAdditive(a);break;case Uw:default:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(s),u[c].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,o=this._loopCount;const s=r===$N;if(e===0)return o===-1?i:s&&(o&1)===1?t-i:i;if(r===jN){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,o+=Math.abs(a);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(s&&(o&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=yd,i.endingEnd=yd):(e?i.endingStart=this.zeroSlopeAtStart?yd:vd:i.endingStart=Nv,t?i.endingEnd=this.zeroSlopeAtEnd?yd:vd:i.endingEnd=Nv)}_scheduleFading(e,t,r){const i=this._mixer,o=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=t,a[1]=o+e,l[1]=r,this}}const h$=new Float32Array(1);class f$ extends Vc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,o=i.length,s=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let h=0;h!==o;++h){const f=i[h],d=f.name;let v=c[d];if(v!==void 0)++v.referenceCount,s[h]=v;else{if(v=s[h],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,d));continue}const y=t&&t._propertyBindings[h].binding.parsedPath;v=new s6(mr.create(r,d,y),f.ValueTypeName,f.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,d),s[h]=v}a[h].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,o=this._actionsByClip[i];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const o=t[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const o=t[r];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,o=this._actionsByClip;let s=o[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=s;else{const a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,s=this._actionsByClip,a=s[o],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete h[f],l.length===0&&delete s[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const o=t[r];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,o=this._bindings;let s=i[t];s===void 0&&(s={},i[t]=s),s[r]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,o=r.path,s=this._bindingsByRootAndName,a=s[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[o],Object.keys(a).length===0&&delete s[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new sA(new Float32Array(2),new Float32Array(2),1,h$),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,o=t[i];e.__cacheIndex=i,t[i]=e,o.__cacheIndex=r,t[r]=o}clipAction(e,t,r){const i=t||this._root,o=i.uuid;let s=typeof e=="string"?Wv.findByName(i,e):e;const a=s!==null?s.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(s!==null?r=s.blendMode:r=Uw),l!==void 0){const h=l.actionByRoot[o];if(h!==void 0&&h.blendMode===r)return h;u=l.knownActions[0],s===null&&(s=u._clip)}if(s===null)return null;const c=new a6(this,s,t,r);return this._bindAction(c,u),this._addInactiveAction(c,a,o),c}existingAction(e,t){const r=t||this._root,i=r.uuid,o=typeof e=="string"?Wv.findByName(r,e):e,s=o?o.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,o=Math.sign(e),s=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,o,s);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,o=i[r];if(o!==void 0){const s=o.knownActions;for(let a=0,l=s.length;a!==l;++a){const u=s[a];this._deactivateAction(u);const c=u._cacheIndex,h=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=c,t[c]=h,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const s in r){const a=r[s].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,o=i[t];if(o!==void 0)for(const s in o){const a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class vA{constructor(e){this.value=e}clone(){return new vA(this.value.clone===void 0?this.value:this.value.clone())}}let d$=0;class p$ extends Vc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:d$++}),this.name="",this.usage=Fv,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class m$ extends qw{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class g${constructor(e,t,r,i,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class yA{constructor(e,t,r=0,i=1/0){this.ray=new Zd(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Cd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return kM(e,this,r,t),r.sort(ZP),r}intersectObjects(e,t=!0,r=[]){for(let i=0,o=e.length;i<o;i++)kM(e[i],this,r,t);return r.sort(ZP),r}}function ZP(n,e){return n.distance-e.distance}function kM(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let o=0,s=i.length;o<s;o++)kM(i[o],e,t,!0)}}class IM{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Ni(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class v${constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const KP=new xt;class y${constructor(e=new xt(1/0,1/0),t=new xt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=KP.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,KP).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const JP=new ye,i2=new ye;class x${constructor(e=new ye,t=new ye){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){JP.subVectors(e,this.start),i2.subVectors(this.end,this.start);const r=i2.dot(i2);let o=i2.dot(JP)/r;return t&&(o=Ni(o,0,1)),o}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const QP=new ye;class w$ extends fr{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new Rn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,l=32;s<l;s++,a++){const u=s/l*Math.PI*2,c=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new nn(i,3));const o=new Ss({fog:!1,toneMapped:!1});this.cone=new Kl(r,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),QP.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(QP),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const bh=new ye,o2=new zn,Y_=new zn;class S$ extends Kl{constructor(e){const t=l6(e),r=new Rn,i=[],o=[],s=new Kt(0,0,1),a=new Kt(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),o.push(s.r,s.g,s.b),o.push(a.r,a.g,a.b))}r.setAttribute("position",new nn(i,3)),r.setAttribute("color",new nn(o,3));const l=new Ss({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");Y_.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<t.length;o++){const a=t[o];a.parent&&a.parent.isBone&&(o2.multiplyMatrices(Y_,a.matrixWorld),bh.setFromMatrixPosition(o2),i.setXYZ(s,bh.x,bh.y,bh.z),o2.multiplyMatrices(Y_,a.parent.matrixWorld),bh.setFromMatrixPosition(o2),i.setXYZ(s+1,bh.x,bh.y,bh.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function l6(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,l6(n.children[t]));return e}class _$ extends xo{constructor(e,t,r){const i=new S1(t,4,2),o=new _f({wireframe:!0,fog:!1,toneMapped:!1});super(i,o),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const b$=new ye,eR=new Kt,tR=new Kt;class M$ extends fr{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new w1(t);i.rotateY(Math.PI*.5),this.material=new _f({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=i.getAttribute("position"),s=new Float32Array(o.count*3);i.setAttribute("color",new Mr(s,3)),this.add(new xo(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");eR.copy(this.light.color),tR.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const o=r<i/2?eR:tR;t.setXYZ(r,o.r,o.g,o.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(b$.setFromMatrixPosition(this.light.matrixWorld).negate())}}class E$ extends Kl{constructor(e=10,t=10,r=4473924,i=8947848){r=new Kt(r),i=new Kt(i);const o=t/2,s=e/t,a=e/2,l=[],u=[];for(let f=0,d=0,v=-a;f<=t;f++,v+=s){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const y=f===o?r:i;y.toArray(u,d),d+=3,y.toArray(u,d),d+=3,y.toArray(u,d),d+=3,y.toArray(u,d),d+=3}const c=new Rn;c.setAttribute("position",new nn(l,3)),c.setAttribute("color",new nn(u,3));const h=new Ss({vertexColors:!0,toneMapped:!1});super(c,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class A$ extends Kl{constructor(e=10,t=16,r=8,i=64,o=4473924,s=8947848){o=new Kt(o),s=new Kt(s);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const f=h/t*(Math.PI*2),d=Math.sin(f)*e,v=Math.cos(f)*e;a.push(0,0,0),a.push(d,0,v);const y=h&1?o:s;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let h=0;h<r;h++){const f=h&1?o:s,d=e-e/r*h;for(let v=0;v<i;v++){let y=v/i*(Math.PI*2),x=Math.sin(y)*d,g=Math.cos(y)*d;a.push(x,0,g),l.push(f.r,f.g,f.b),y=(v+1)/i*(Math.PI*2),x=Math.sin(y)*d,g=Math.cos(y)*d,a.push(x,0,g),l.push(f.r,f.g,f.b)}}const u=new Rn;u.setAttribute("position",new nn(a,3)),u.setAttribute("color",new nn(l,3));const c=new Ss({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const nR=new ye,s2=new ye,rR=new ye;class T$ extends fr{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Rn;i.setAttribute("position",new nn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const o=new Ss({fog:!1,toneMapped:!1});this.lightPlane=new hf(i,o),this.add(this.lightPlane),i=new Rn,i.setAttribute("position",new nn([0,0,0,0,0,1],3)),this.targetLine=new hf(i,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),nR.setFromMatrixPosition(this.light.matrixWorld),s2.setFromMatrixPosition(this.light.target.matrixWorld),rR.subVectors(s2,nR),this.lightPlane.lookAt(s2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(s2),this.targetLine.scale.z=rR.length()}}const a2=new ye,Li=new m1;class C$ extends Kl{constructor(e){const t=new Rn,r=new Ss({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],o=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,y){l(v),l(y)}function l(v){i.push(0,0,0),o.push(0,0,0),s[v]===void 0&&(s[v]=[]),s[v].push(i.length/3-1)}t.setAttribute("position",new nn(i,3)),t.setAttribute("color",new nn(o,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const u=new Kt(16755200),c=new Kt(16711680),h=new Kt(43775),f=new Kt(16777215),d=new Kt(3355443);this.setColors(u,c,h,f,d)}setColors(e,t,r,i,o){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,o.r,o.g,o.b),a.setXYZ(41,o.r,o.g,o.b),a.setXYZ(42,o.r,o.g,o.b),a.setXYZ(43,o.r,o.g,o.b),a.setXYZ(44,o.r,o.g,o.b),a.setXYZ(45,o.r,o.g,o.b),a.setXYZ(46,o.r,o.g,o.b),a.setXYZ(47,o.r,o.g,o.b),a.setXYZ(48,o.r,o.g,o.b),a.setXYZ(49,o.r,o.g,o.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Li.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Vi("c",t,e,Li,0,0,-1),Vi("t",t,e,Li,0,0,1),Vi("n1",t,e,Li,-r,-i,-1),Vi("n2",t,e,Li,r,-i,-1),Vi("n3",t,e,Li,-r,i,-1),Vi("n4",t,e,Li,r,i,-1),Vi("f1",t,e,Li,-r,-i,1),Vi("f2",t,e,Li,r,-i,1),Vi("f3",t,e,Li,-r,i,1),Vi("f4",t,e,Li,r,i,1),Vi("u1",t,e,Li,r*.7,i*1.1,-1),Vi("u2",t,e,Li,-r*.7,i*1.1,-1),Vi("u3",t,e,Li,0,i*2,-1),Vi("cf1",t,e,Li,-r,0,1),Vi("cf2",t,e,Li,r,0,1),Vi("cf3",t,e,Li,0,-i,1),Vi("cf4",t,e,Li,0,i,1),Vi("cn1",t,e,Li,-r,0,-1),Vi("cn2",t,e,Li,r,0,-1),Vi("cn3",t,e,Li,0,-i,-1),Vi("cn4",t,e,Li,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Vi(n,e,t,r,i,o,s){a2.set(i,o,s).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],a2.x,a2.y,a2.z)}}const l2=new Uu;class P$ extends Kl{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),o=new Rn;o.setIndex(new Mr(r,1)),o.setAttribute("position",new Mr(i,3)),super(o,new Ss({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&l2.setFromObject(this.object),l2.isEmpty())return;const t=l2.min,r=l2.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=t.x,o[4]=r.y,o[5]=r.z,o[6]=t.x,o[7]=t.y,o[8]=r.z,o[9]=r.x,o[10]=t.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=t.z,o[15]=t.x,o[16]=r.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=r.x,o[22]=t.y,o[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class R$ extends Kl{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Rn;o.setIndex(new Mr(r,1)),o.setAttribute("position",new nn(i,3)),super(o,new Ss({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class L$ extends hf{constructor(e,t=1,r=16776960){const i=r,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new Rn;s.setAttribute("position",new nn(o,3)),s.computeBoundingSphere(),super(s,new Ss({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Rn;l.setAttribute("position",new nn(a,3)),l.computeBoundingSphere(),this.add(new xo(l,new _f({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const iR=new ye;let u2,Z_;class k$ extends fr{constructor(e=new ye(0,0,1),t=new ye(0,0,0),r=1,i=16776960,o=r*.2,s=o*.2){super(),this.type="ArrowHelper",u2===void 0&&(u2=new Rn,u2.setAttribute("position",new nn([0,0,0,0,1,0],3)),Z_=new _g(0,.5,1,5,1),Z_.translate(0,-.5,0)),this.position.copy(t),this.line=new hf(u2,new Ss({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new xo(Z_,new _f({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,o,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{iR.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(iR,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class I$ extends Kl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Rn;i.setAttribute("position",new nn(t,3)),i.setAttribute("color",new nn(r,3));const o=new Ss({vertexColors:!0,toneMapped:!1});super(i,o),this.type="AxesHelper"}setColors(e,t,r){const i=new Kt,o=this.geometry.attributes.color.array;return i.set(e),i.toArray(o,0),i.toArray(o,3),i.set(t),i.toArray(o,6),i.toArray(o,9),i.set(r),i.toArray(o,12),i.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class N${constructor(){this.type="ShapePath",this.color=new Kt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Bv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,o,s){return this.currentPath.bezierCurveTo(e,t,r,i,o,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const S=[];for(let _=0,E=g.length;_<E;_++){const C=g[_],I=new Pd;I.curves=C.curves,S.push(I)}return S}function r(g,S){const _=S.length;let E=!1;for(let C=_-1,I=0;I<_;C=I++){let F=S[C],R=S[I],k=R.x-F.x,L=R.y-F.y;if(Math.abs(L)>Number.EPSILON){if(L<0&&(F=S[I],k=-k,R=S[C],L=-L),g.y<F.y||g.y>R.y)continue;if(g.y===F.y){if(g.x===F.x)return!0}else{const N=L*(g.x-F.x)-k*(g.y-F.y);if(N===0)return!0;if(N<0)continue;E=!E}}else{if(g.y!==F.y)continue;if(R.x<=g.x&&g.x<=F.x||F.x<=g.x&&g.x<=R.x)return!0}}return E}const i=Iu.isClockWise,o=this.subPaths;if(o.length===0)return[];let s,a,l;const u=[];if(o.length===1)return a=o[0],l=new Pd,l.curves=a.curves,u.push(l),u;let c=!i(o[0].getPoints());c=e?!c:c;const h=[],f=[];let d=[],v=0,y;f[v]=void 0,d[v]=[];for(let g=0,S=o.length;g<S;g++)a=o[g],y=a.getPoints(),s=i(y),s=e?!s:s,s?(!c&&f[v]&&v++,f[v]={s:new Pd,p:y},f[v].s.curves=a.curves,c&&v++,d[v]=[]):d[v].push({h:a,p:y[0]});if(!f[0])return t(o);if(f.length>1){let g=!1,S=0;for(let _=0,E=f.length;_<E;_++)h[_]=[];for(let _=0,E=f.length;_<E;_++){const C=d[_];for(let I=0;I<C.length;I++){const F=C[I];let R=!0;for(let k=0;k<f.length;k++)r(F.p,f[k].p)&&(_!==k&&S++,R?(R=!1,h[k].push(F)):g=!0);R&&h[_].push(F)}}S>0&&g===!1&&(d=h)}let x;for(let g=0,S=f.length;g<S;g++){l=f[g].s,u.push(l),x=d[g];for(let _=0,E=x.length;_<E;_++)l.holes.push(x[_].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:f1}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=f1);const F$=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:T3,AddEquation:ud,AddOperation:kN,AdditiveAnimationBlendMode:D3,AdditiveBlending:Y5,AlphaFormat:UN,AlwaysCompare:oF,AlwaysDepth:EN,AlwaysStencilFunc:KN,AmbientLight:fA,AmbientLightProbe:Xq,AnimationAction:a6,AnimationClip:Wv,AnimationLoader:Oq,AnimationMixer:f$,AnimationObjectGroup:c$,AnimationUtils:Iq,ArcCurve:PF,ArrayCamera:xF,ArrowHelper:k$,Audio:o6,AudioAnalyser:e$,AudioContext:dA,AudioListener:Kq,AudioLoader:qq,AxesHelper:I$,BackSide:Ns,BasicDepthPacking:XN,BasicShadowMap:hN,Bone:Y3,BooleanKeyframeTrack:Jd,Box2:y$,Box3:Uu,Box3Helper:R$,BoxGeometry:Kd,BoxHelper:P$,BufferAttribute:Mr,BufferGeometry:Rn,BufferGeometryLoader:i6,ByteType:ON,Cache:zd,Camera:m1,CameraHelper:C$,CanvasTexture:rq,CapsuleGeometry:Kw,CatmullRomCurve3:RF,CineonToneMapping:FN,CircleGeometry:Jw,ClampToEdgeWrapping:ps,Clock:pA,Color:Kt,ColorKeyframeTrack:aA,ColorManagement:Ka,CompressedArrayTexture:tq,CompressedCubeTexture:nq,CompressedTexture:Xw,CompressedTextureLoader:Bq,ConeGeometry:Qw,CubeCamera:fF,CubeReflectionMapping:Du,CubeRefractionMapping:uf,CubeTexture:g1,CubeTextureLoader:JF,CubeUVReflectionMapping:wg,CubicBezierCurve:J3,CubicBezierCurve3:LF,CubicInterpolant:XF,CullFaceBack:X5,CullFaceFront:cN,CullFaceFrontBack:Z7,CullFaceNone:uN,Curve:Jl,CurvePath:IF,CustomBlending:fN,CustomToneMapping:DN,CylinderGeometry:_g,Cylindrical:v$,Data3DTexture:H3,DataArrayTexture:zw,DataTexture:Bm,DataTextureLoader:uA,DataUtils:wd,DecrementStencilOp:lH,DecrementWrapStencilOp:cH,DefaultLoadingManager:KF,DepthFormat:nf,DepthStencilFormat:Od,DepthTexture:wF,DirectionalLight:qx,DirectionalLightHelper:T$,DiscreteInterpolant:YF,DisplayP3ColorSpace:B3,DodecahedronGeometry:eS,DoubleSide:Ol,DstAlphaFactor:xN,DstColorFactor:SN,DynamicCopyUsage:EH,DynamicDrawUsage:xH,DynamicReadUsage:_H,EdgesGeometry:rA,EllipseCurve:Yw,EqualCompare:eF,EqualDepth:TN,EqualStencilFunc:pH,EquirectangularReflectionMapping:ng,EquirectangularRefractionMapping:Pv,Euler:p1,EventDispatcher:Vc,ExtrudeGeometry:nS,FileLoader:Uc,Float16BufferAttribute:p9,Float32BufferAttribute:nn,Float64BufferAttribute:m9,FloatType:vs,Fog:jw,FogExp2:Ww,FramebufferTexture:eq,FrontSide:Bc,Frustum:Hw,GLBufferAttribute:g$,GLSL1:TH,GLSL3:bM,GreaterCompare:nF,GreaterDepth:PN,GreaterEqualCompare:iF,GreaterEqualDepth:CN,GreaterEqualStencilFunc:yH,GreaterStencilFunc:gH,GridHelper:E$,Group:Am,HalfFloatType:Ls,HemisphereLight:cA,HemisphereLightHelper:M$,HemisphereLightProbe:$q,IcosahedronGeometry:x1,ImageBitmapLoader:jq,ImageLoader:jv,ImageUtils:z3,IncrementStencilOp:aH,IncrementWrapStencilOp:uH,InstancedBufferAttribute:sg,InstancedBufferGeometry:r6,InstancedInterleavedBuffer:m$,InstancedMesh:AF,Int16BufferAttribute:f9,Int32BufferAttribute:d9,Int8BufferAttribute:u9,IntType:P3,InterleavedBuffer:qw,InterleavedBufferAttribute:Bd,Interpolant:_1,InterpolateDiscrete:kv,InterpolateLinear:Iv,InterpolateSmooth:Q2,InvertStencilOp:hH,KeepStencilOp:ex,KeyframeTrack:Ql,LOD:MF,LatheGeometry:y1,Layers:Cd,LessCompare:QN,LessDepth:AN,LessEqualCompare:tF,LessEqualDepth:Gx,LessEqualStencilFunc:mH,LessStencilFunc:dH,Light:Mf,LightProbe:cS,Line:hf,Line3:x$,LineBasicMaterial:Ss,LineCurve:Zw,LineCurve3:kF,LineDashedMaterial:qF,LineLoop:TF,LineSegments:Kl,LinearEncoding:O3,LinearFilter:ri,LinearInterpolant:sA,LinearMipMapLinearFilter:tH,LinearMipMapNearestFilter:eH,LinearMipmapLinearFilter:cf,LinearMipmapNearestFilter:C3,LinearSRGBColorSpace:Wl,LinearToneMapping:IN,Loader:ra,LoaderUtils:LM,LoadingManager:lA,LoopOnce:jN,LoopPingPong:$N,LoopRepeat:qN,LuminanceAlphaFormat:HN,LuminanceFormat:zN,MOUSE:wu,Material:Ko,MaterialLoader:hS,MathUtils:HH,Matrix3:Xn,Matrix4:zn,MaxEquation:Q5,Mesh:xo,MeshBasicMaterial:_f,MeshDepthMaterial:q3,MeshDistanceMaterial:$3,MeshLambertMaterial:WF,MeshMatcapMaterial:jF,MeshNormalMaterial:VF,MeshPhongMaterial:HF,MeshPhysicalMaterial:zF,MeshStandardMaterial:uS,MeshToonMaterial:GF,MinEquation:J5,MirroredRepeatWrapping:Lv,MixOperation:LN,MultiplyBlending:K5,MultiplyOperation:d1,NearestFilter:Wi,NearestMipMapLinearFilter:Q7,NearestMipMapNearestFilter:J7,NearestMipmapLinearFilter:$0,NearestMipmapNearestFilter:Vx,NeverCompare:JN,NeverDepth:MN,NeverStencilFunc:fH,NoBlending:Lc,NoColorSpace:of,NoToneMapping:Ru,NormalAnimationBlendMode:Uw,NormalBlending:Ad,NotEqualCompare:rF,NotEqualDepth:RN,NotEqualStencilFunc:vH,NumberKeyframeTrack:Gv,Object3D:fr,ObjectLoader:Vq,ObjectSpaceNormalMap:ZN,OctahedronGeometry:w1,OneFactor:gN,OneMinusDstAlphaFactor:wN,OneMinusDstColorFactor:_N,OneMinusSrcAlphaFactor:A3,OneMinusSrcColorFactor:yN,OrthographicCamera:ku,PCFShadowMap:Dw,PCFSoftShadowMap:q0,PMREMGenerator:EM,Path:Bv,PerspectiveCamera:_i,Plane:vc,PlaneGeometry:v1,PlaneHelper:L$,PointLight:e6,PointLightHelper:_$,Points:CF,PointsMaterial:Z3,PolarGridHelper:A$,PolyhedronGeometry:bf,PositionalAudio:Qq,PropertyBinding:mr,PropertyMixer:s6,QuadraticBezierCurve:Q3,QuadraticBezierCurve3:eA,Quaternion:ys,QuaternionKeyframeTrack:bg,QuaternionLinearInterpolant:ZF,RED_GREEN_RGTC2_Format:SM,RED_RGTC1_Format:WN,REVISION:f1,RGBADepthPacking:YN,RGBAFormat:Rs,RGBAIntegerFormat:F3,RGBA_ASTC_10x10_Format:vM,RGBA_ASTC_10x5_Format:pM,RGBA_ASTC_10x6_Format:mM,RGBA_ASTC_10x8_Format:gM,RGBA_ASTC_12x10_Format:yM,RGBA_ASTC_12x12_Format:xM,RGBA_ASTC_4x4_Format:sM,RGBA_ASTC_5x4_Format:aM,RGBA_ASTC_5x5_Format:lM,RGBA_ASTC_6x5_Format:uM,RGBA_ASTC_6x6_Format:cM,RGBA_ASTC_8x5_Format:hM,RGBA_ASTC_8x6_Format:fM,RGBA_ASTC_8x8_Format:dM,RGBA_BPTC_Format:J2,RGBA_ETC2_EAC_Format:oM,RGBA_PVRTC_2BPPV1_Format:rM,RGBA_PVRTC_4BPPV1_Format:nM,RGBA_S3TC_DXT1_Format:Y2,RGBA_S3TC_DXT3_Format:Z2,RGBA_S3TC_DXT5_Format:K2,RGB_ETC1_Format:VN,RGB_ETC2_Format:iM,RGB_PVRTC_2BPPV1_Format:tM,RGB_PVRTC_4BPPV1_Format:eM,RGB_S3TC_DXT1_Format:X2,RGFormat:GN,RGIntegerFormat:N3,RawShaderMaterial:UF,Ray:Zd,Raycaster:yA,RectAreaLight:t6,RedFormat:k3,RedIntegerFormat:I3,ReinhardToneMapping:NN,RenderTarget:lF,RepeatWrapping:Rv,ReplaceStencilOp:sH,ReverseSubtractEquation:pN,RingGeometry:rS,SIGNED_RED_GREEN_RGTC2_Format:_M,SIGNED_RED_RGTC1_Format:wM,SRGBColorSpace:Hn,Scene:og,ShaderChunk:jn,ShaderLib:Fl,ShaderMaterial:ql,ShadowMaterial:BF,Shape:Pd,ShapeGeometry:iS,ShapePath:N$,ShapeUtils:Iu,ShortType:BN,Skeleton:$w,SkeletonHelper:S$,SkinnedMesh:EF,Source:xd,Sphere:Zl,SphereGeometry:S1,Spherical:IM,SphericalHarmonics3:n6,SplineCurve:tA,SpotLight:QF,SpotLightHelper:w$,Sprite:bF,SpriteMaterial:X3,SrcAlphaFactor:E3,SrcAlphaSaturateFactor:bN,SrcColorFactor:vN,StaticCopyUsage:MH,StaticDrawUsage:Fv,StaticReadUsage:SH,StereoCamera:Yq,StreamCopyUsage:AH,StreamDrawUsage:wH,StreamReadUsage:bH,StringKeyframeTrack:Qd,SubtractEquation:dN,SubtractiveBlending:Z5,TOUCH:gc,TangentSpaceNormalMap:Sf,TetrahedronGeometry:oS,Texture:Di,TextureLoader:Uq,TorusGeometry:sS,TorusKnotGeometry:aS,Triangle:Ks,TriangleFanDrawMode:iH,TriangleStripDrawMode:rH,TrianglesDrawMode:nH,TubeGeometry:lS,TwoPassDoubleSide:K7,UVMapping:Ow,Uint16BufferAttribute:G3,Uint32BufferAttribute:V3,Uint8BufferAttribute:c9,Uint8ClampedBufferAttribute:h9,Uniform:vA,UniformsGroup:p$,UniformsLib:Vt,UniformsUtils:hF,UnsignedByteType:Lu,UnsignedInt248Type:tf,UnsignedIntType:bc,UnsignedShort4444Type:R3,UnsignedShort5551Type:L3,UnsignedShortType:Bw,VSMShadowMap:Ll,Vector2:xt,Vector3:ye,Vector4:Or,VectorKeyframeTrack:Vv,VideoTexture:Qj,WebGL1Renderer:SF,WebGL3DRenderTarget:JH,WebGLArrayRenderTarget:KH,WebGLCoordinateSystem:bu,WebGLCubeRenderTarget:W3,WebGLMultipleRenderTargets:QH,WebGLRenderTarget:jl,WebGLRenderer:Vw,WebGLUtils:yF,WebGPUCoordinateSystem:Dv,WireframeGeometry:OF,WrapAroundEnding:Nv,ZeroCurvatureEnding:vd,ZeroFactor:mN,ZeroSlopeEnding:yd,ZeroStencilOp:oH,_SRGBAFormat:Wx,sRGBEncoding:rf},Symbol.toStringTag,{value:"Module"}));var zh={},D$={get exports(){return zh},set exports(n){zh=n}},ep={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */ep.ConcurrentRoot=1;ep.ContinuousEventPriority=4;ep.DefaultEventPriority=16;ep.DiscreteEventPriority=1;ep.IdleEventPriority=536870912;ep.LegacyRoot=0;(function(n){n.exports=ep})(D$);function O$(n){let e;const t=new Set,r=(u,c)=>{const h=typeof u=="function"?u(e):u;if(h!==e){const f=e;e=c?h:Object.assign({},e,h),t.forEach(d=>d(e,f))}},i=()=>e,o=(u,c=i,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=c(e);function d(){const v=c(e);if(!h(f,v)){const y=f;u(f=v,y)}}return t.add(d),()=>t.delete(d)},l={setState:r,getState:i,subscribe:(u,c,h)=>c||h?o(u,c,h):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const B$=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),oR=B$?de.useEffect:de.useLayoutEffect;function u6(n){const e=typeof n=="function"?O$(n):n,t=(r=e.getState,i=Object.is)=>{const[,o]=de.useReducer(x=>x+1,0),s=e.getState(),a=de.useRef(s),l=de.useRef(r),u=de.useRef(i),c=de.useRef(!1),h=de.useRef();h.current===void 0&&(h.current=r(s));let f,d=!1;(a.current!==s||l.current!==r||u.current!==i||c.current)&&(f=r(s),d=!i(h.current,f)),oR(()=>{d&&(h.current=f),a.current=s,l.current=r,u.current=i,c.current=!1});const v=de.useRef(s);oR(()=>{const x=()=>{try{const S=e.getState(),_=l.current(S);u.current(h.current,_)||(a.current=S,h.current=_,o())}catch{c.current=!0,o()}},g=e.subscribe(x);return e.getState()!==v.current&&x(),g},[]);const y=d?f:h.current;return de.useDebugValue(y),y};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var NM={},U$={get exports(){return NM},set exports(n){NM=n}},qv={},z$={get exports(){return qv},set exports(n){qv=n}},c6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(V,J){var j=V.length;V.push(J);e:for(;0<j;){var ie=j-1>>>1,D=V[ie];if(0<i(D,J))V[ie]=J,V[j]=D,j=ie;else break e}}function t(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var J=V[0],j=V.pop();if(j!==J){V[0]=j;e:for(var ie=0,D=V.length,q=D>>>1;ie<q;){var Z=2*(ie+1)-1,Q=V[Z],se=Z+1,me=V[se];if(0>i(Q,j))se<D&&0>i(me,Q)?(V[ie]=me,V[se]=j,ie=se):(V[ie]=Q,V[Z]=j,ie=Z);else if(se<D&&0>i(me,j))V[ie]=me,V[se]=j,ie=se;else break e}}return J}function i(V,J){var j=V.sortIndex-J.sortIndex;return j!==0?j:V.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,h=null,f=3,d=!1,v=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(V){for(var J=t(u);J!==null;){if(J.callback===null)r(u);else if(J.startTime<=V)r(u),J.sortIndex=J.expirationTime,e(l,J);else break;J=t(u)}}function E(V){if(y=!1,_(V),!v)if(t(l)!==null)v=!0,ee(C);else{var J=t(u);J!==null&&le(E,J.startTime-V)}}function C(V,J){v=!1,y&&(y=!1,g(R),R=-1),d=!0;var j=f;try{for(_(J),h=t(l);h!==null&&(!(h.expirationTime>J)||V&&!N());){var ie=h.callback;if(typeof ie=="function"){h.callback=null,f=h.priorityLevel;var D=ie(h.expirationTime<=J);J=n.unstable_now(),typeof D=="function"?h.callback=D:h===t(l)&&r(l),_(J)}else r(l);h=t(l)}if(h!==null)var q=!0;else{var Z=t(u);Z!==null&&le(E,Z.startTime-J),q=!1}return q}finally{h=null,f=j,d=!1}}var I=!1,F=null,R=-1,k=5,L=-1;function N(){return!(n.unstable_now()-L<k)}function z(){if(F!==null){var V=n.unstable_now();L=V;var J=!0;try{J=F(!0,V)}finally{J?H():(I=!1,F=null)}}else I=!1}var H;if(typeof S=="function")H=function(){S(z)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,K=G.port2;G.port1.onmessage=z,H=function(){K.postMessage(null)}}else H=function(){x(z,0)};function ee(V){F=V,I||(I=!0,H())}function le(V,J){R=x(function(){V(n.unstable_now())},J)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){v||d||(v=!0,ee(C))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(V){switch(f){case 1:case 2:case 3:var J=3;break;default:J=f}var j=f;f=J;try{return V()}finally{f=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,J){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var j=f;f=V;try{return J()}finally{f=j}},n.unstable_scheduleCallback=function(V,J,j){var ie=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?ie+j:ie):j=ie,V){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=j+D,V={id:c++,callback:J,priorityLevel:V,startTime:j,expirationTime:D,sortIndex:-1},j>ie?(V.sortIndex=j,e(u,V),t(l)===null&&V===t(u)&&(y?(g(R),R=-1):y=!0,le(E,j-ie))):(V.sortIndex=D,e(l,V),v||d||(v=!0,ee(C))),V},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(V){var J=f;return function(){var j=f;f=J;try{return V.apply(this,arguments)}finally{f=j}}}})(c6);(function(n){n.exports=c6})(z$);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H$=function(e){var t={},r=de,i=qv,o=Object.assign;function s(p){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+p,b=1;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),v=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),C=Symbol.iterator;function I(p){return p===null||typeof p!="object"?null:(p=C&&p[C]||p["@@iterator"],typeof p=="function"?p:null)}function F(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case c:return"Fragment";case u:return"Portal";case f:return"Profiler";case h:return"StrictMode";case x:return"Suspense";case g:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case v:return(p.displayName||"Context")+".Consumer";case d:return(p._context.displayName||"Context")+".Provider";case y:var m=p.render;return p=p.displayName,p||(p=m.displayName||m.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case S:return m=p.displayName||null,m!==null?m:F(p.type)||"Memo";case _:m=p._payload,p=p._init;try{return F(p(m))}catch{}}return null}function R(p){var m=p.type;switch(p.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=m.render,p=p.displayName||p.name||"",m.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(m);case 8:return m===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function k(p){var m=p,b=p;if(p.alternate)for(;m.return;)m=m.return;else{p=m;do m=p,m.flags&4098&&(b=m.return),p=m.return;while(p)}return m.tag===3?b:null}function L(p){if(k(p)!==p)throw Error(s(188))}function N(p){var m=p.alternate;if(!m){if(m=k(p),m===null)throw Error(s(188));return m!==p?null:p}for(var b=p,A=m;;){var O=b.return;if(O===null)break;var W=O.alternate;if(W===null){if(A=O.return,A!==null){b=A;continue}break}if(O.child===W.child){for(W=O.child;W;){if(W===b)return L(O),p;if(W===A)return L(O),m;W=W.sibling}throw Error(s(188))}if(b.return!==A.return)b=O,A=W;else{for(var Ee=!1,De=O.child;De;){if(De===b){Ee=!0,b=O,A=W;break}if(De===A){Ee=!0,A=O,b=W;break}De=De.sibling}if(!Ee){for(De=W.child;De;){if(De===b){Ee=!0,b=W,A=O;break}if(De===A){Ee=!0,A=W,b=O;break}De=De.sibling}if(!Ee)throw Error(s(189))}}if(b.alternate!==A)throw Error(s(190))}if(b.tag!==3)throw Error(s(188));return b.stateNode.current===b?p:m}function z(p){return p=N(p),p!==null?H(p):null}function H(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var m=H(p);if(m!==null)return m;p=p.sibling}return null}function G(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){if(p.tag!==4){var m=G(p);if(m!==null)return m}p=p.sibling}return null}var K=Array.isArray,ee=e.getPublicInstance,le=e.getRootHostContext,V=e.getChildHostContext,J=e.prepareForCommit,j=e.resetAfterCommit,ie=e.createInstance,D=e.appendInitialChild,q=e.finalizeInitialChildren,Z=e.prepareUpdate,Q=e.shouldSetTextContent,se=e.createTextInstance,me=e.scheduleTimeout,Se=e.cancelTimeout,Ce=e.noTimeout,$e=e.isPrimaryRenderer,ke=e.supportsMutation,fe=e.supportsPersistence,Ie=e.supportsHydration,Ue=e.getInstanceFromNode,Te=e.preparePortalMount,ae=e.getCurrentEventPriority,gt=e.detachDeletedInstance,Ye=e.supportsMicrotasks,Ge=e.scheduleMicrotask,et=e.supportsTestSelectors,vt=e.findFiberRoot,bt=e.getBoundingRect,pe=e.getTextContent,te=e.isHiddenSubtree,Ne=e.matchAccessibilityRole,st=e.setFocusIfFocusable,rt=e.setupIntersectionObserver,pt=e.appendChild,wt=e.appendChildToContainer,ut=e.commitTextUpdate,Pe=e.commitMount,Ht=e.commitUpdate,Pt=e.insertBefore,Dt=e.insertInContainerBefore,Tt=e.removeChild,be=e.removeChildFromContainer,Ke=e.resetTextContent,ct=e.hideInstance,Ae=e.hideTextInstance,Oe=e.unhideInstance,Ve=e.unhideTextInstance,At=e.clearContainer,Ct=e.cloneInstance,Nt=e.createContainerChildSet,Xt=e.appendChildToContainerChildSet,kn=e.finalizeContainerChildren,Yn=e.replaceContainerChildren,wn=e.cloneHiddenInstance,ir=e.cloneHiddenTextInstance,Wt=e.canHydrateInstance,Yi=e.canHydrateTextInstance,Zi=e.canHydrateSuspenseInstance,Ir=e.isSuspenseInstancePending,ar=e.isSuspenseInstanceFallback,dr=e.registerSuspenseInstanceRetry,lr=e.getNextHydratableSibling,yn=e.getFirstHydratableChild,Ki=e.getFirstHydratableChildWithinContainer,Bi=e.getFirstHydratableChildWithinSuspenseInstance,$=e.hydrateInstance,B=e.hydrateTextInstance,re=e.hydrateSuspenseInstance,ve=e.getNextHydratableInstanceAfterSuspenseInstance,ge=e.commitHydratedContainer,_e=e.commitHydratedSuspenseInstance,qe=e.clearSuspenseBoundary,Xe=e.clearSuspenseBoundaryFromContainer,it=e.shouldDeleteUnhydratedTailInstances,tt=e.didNotMatchHydratedContainerTextInstance,dt=e.didNotMatchHydratedTextInstance,nt;function jt(p){if(nt===void 0)try{throw Error()}catch(b){var m=b.stack.trim().match(/\n( *(at )?)/);nt=m&&m[1]||""}return`
`+nt+p}var It=!1;function Ot(p,m){if(!p||It)return"";It=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(Ft){var A=Ft}Reflect.construct(p,[],m)}else{try{m.call()}catch(Ft){A=Ft}p.call(m.prototype)}else{try{throw Error()}catch(Ft){A=Ft}p()}}catch(Ft){if(Ft&&A&&typeof Ft.stack=="string"){for(var O=Ft.stack.split(`
`),W=A.stack.split(`
`),Ee=O.length-1,De=W.length-1;1<=Ee&&0<=De&&O[Ee]!==W[De];)De--;for(;1<=Ee&&0<=De;Ee--,De--)if(O[Ee]!==W[De]){if(Ee!==1||De!==1)do if(Ee--,De--,0>De||O[Ee]!==W[De]){var ft=`
`+O[Ee].replace(" at new "," at ");return p.displayName&&ft.includes("<anonymous>")&&(ft=ft.replace("<anonymous>",p.displayName)),ft}while(1<=Ee&&0<=De);break}}}finally{It=!1,Error.prepareStackTrace=b}return(p=p?p.displayName||p.name:"")?jt(p):""}var rn=Object.prototype.hasOwnProperty,sn=[],mt=-1;function ht(p){return{current:p}}function an(p){0>mt||(p.current=sn[mt],sn[mt]=null,mt--)}function Zt(p,m){mt++,sn[mt]=p.current,p.current=m}var Mn={},pn=ht(Mn),xn=ht(!1),or=Mn;function Kn(p,m){var b=p.type.contextTypes;if(!b)return Mn;var A=p.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===m)return A.__reactInternalMemoizedMaskedChildContext;var O={},W;for(W in b)O[W]=m[W];return A&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=m,p.__reactInternalMemoizedMaskedChildContext=O),O}function ur(p){return p=p.childContextTypes,p!=null}function Kr(){an(xn),an(pn)}function fn(p,m,b){if(pn.current!==Mn)throw Error(s(168));Zt(pn,m),Zt(xn,b)}function Er(p,m,b){var A=p.stateNode;if(m=m.childContextTypes,typeof A.getChildContext!="function")return b;A=A.getChildContext();for(var O in A)if(!(O in m))throw Error(s(108,R(p)||"Unknown",O));return o({},b,A)}function Pn(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||Mn,or=pn.current,Zt(pn,p),Zt(xn,xn.current),!0}function Vn(p,m,b){var A=p.stateNode;if(!A)throw Error(s(169));b?(p=Er(p,m,or),A.__reactInternalMemoizedMergedChildContext=p,an(xn),an(pn),Zt(pn,p)):an(xn),Zt(xn,b)}var Nr=Math.clz32?Math.clz32:Bs,oa=Math.log,Ji=Math.LN2;function Bs(p){return p>>>=0,p===0?32:31-(oa(p)/Ji|0)|0}var Hu=64,qc=4194304;function fl(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function $c(p,m){var b=p.pendingLanes;if(b===0)return 0;var A=0,O=p.suspendedLanes,W=p.pingedLanes,Ee=b&268435455;if(Ee!==0){var De=Ee&~O;De!==0?A=fl(De):(W&=Ee,W!==0&&(A=fl(W)))}else Ee=b&~O,Ee!==0?A=fl(Ee):W!==0&&(A=fl(W));if(A===0)return 0;if(m!==0&&m!==A&&!(m&O)&&(O=A&-A,W=m&-m,O>=W||O===16&&(W&4194240)!==0))return m;if(A&4&&(A|=b&16),m=p.entangledLanes,m!==0)for(p=p.entanglements,m&=A;0<m;)b=31-Nr(m),O=1<<b,A|=p[b],m&=~O;return A}function Tg(p,m){switch(p){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cg(p,m){for(var b=p.suspendedLanes,A=p.pingedLanes,O=p.expirationTimes,W=p.pendingLanes;0<W;){var Ee=31-Nr(W),De=1<<Ee,ft=O[Ee];ft===-1?(!(De&b)||De&A)&&(O[Ee]=Tg(De,m)):ft<=m&&(p.expiredLanes|=De),W&=~De}}function sa(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function su(p){for(var m=[],b=0;31>b;b++)m.push(p);return m}function Ra(p,m,b){p.pendingLanes|=m,m!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,m=31-Nr(m),p[m]=b}function ip(p,m){var b=p.pendingLanes&~m;p.pendingLanes=m,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=m,p.mutableReadLanes&=m,p.entangledLanes&=m,m=p.entanglements;var A=p.eventTimes;for(p=p.expirationTimes;0<b;){var O=31-Nr(b),W=1<<O;m[O]=0,A[O]=-1,p[O]=-1,b&=~W}}function Qi(p,m){var b=p.entangledLanes|=m;for(p=p.entanglements;b;){var A=31-Nr(b),O=1<<A;O&m|p[A]&m&&(p[A]|=m),b&=~O}}var nr=0;function Rf(p){return p&=-p,1<p?4<p?p&268435455?16:536870912:4:1}var Sn=i.unstable_scheduleCallback,op=i.unstable_cancelCallback,Pg=i.unstable_shouldYield,La=i.unstable_requestPaint,pi=i.unstable_now,Xc=i.unstable_ImmediatePriority,Yc=i.unstable_UserBlockingPriority,Gu=i.unstable_NormalPriority,Rg=i.unstable_IdlePriority,Zc=null,Us=null;function Lf(p){if(Us&&typeof Us.onCommitFiberRoot=="function")try{Us.onCommitFiberRoot(Zc,p,void 0,(p.current.flags&128)===128)}catch{}}function Vu(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var ao=typeof Object.is=="function"?Object.is:Vu,aa=null,ka=!1,Wu=!1;function ju(p){aa===null?aa=[p]:aa.push(p)}function sp(p){ka=!0,ju(p)}function _s(){if(!Wu&&aa!==null){Wu=!0;var p=0,m=nr;try{var b=aa;for(nr=1;p<b.length;p++){var A=b[p];do A=A(!0);while(A!==null)}aa=null,ka=!1}catch(O){throw aa!==null&&(aa=aa.slice(p+1)),Sn(Xc,_s),O}finally{nr=m,Wu=!1}}return null}var ap=a.ReactCurrentBatchConfig;function qu(p,m){if(ao(p,m))return!0;if(typeof p!="object"||p===null||typeof m!="object"||m===null)return!1;var b=Object.keys(p),A=Object.keys(m);if(b.length!==A.length)return!1;for(A=0;A<b.length;A++){var O=b[A];if(!rn.call(m,O)||!ao(p[O],m[O]))return!1}return!0}function Ia(p){switch(p.tag){case 5:return jt(p.type);case 16:return jt("Lazy");case 13:return jt("Suspense");case 19:return jt("SuspenseList");case 0:case 2:case 15:return p=Ot(p.type,!1),p;case 11:return p=Ot(p.type.render,!1),p;case 1:return p=Ot(p.type,!0),p;default:return""}}function Ui(p,m){if(p&&p.defaultProps){m=o({},m),p=p.defaultProps;for(var b in p)m[b]===void 0&&(m[b]=p[b]);return m}return m}var Kc=ht(null),la=null,bo=null,$u=null;function dl(){$u=bo=la=null}function lp(p,m,b){$e?(Zt(Kc,m._currentValue),m._currentValue=b):(Zt(Kc,m._currentValue2),m._currentValue2=b)}function au(p){var m=Kc.current;an(Kc),$e?p._currentValue=m:p._currentValue2=m}function kf(p,m,b){for(;p!==null;){var A=p.alternate;if((p.childLanes&m)!==m?(p.childLanes|=m,A!==null&&(A.childLanes|=m)):A!==null&&(A.childLanes&m)!==m&&(A.childLanes|=m),p===b)break;p=p.return}}function Na(p,m){la=p,$u=bo=null,p=p.dependencies,p!==null&&p.firstContext!==null&&(p.lanes&m&&(Po=!0),p.firstContext=null)}function Mo(p){var m=$e?p._currentValue:p._currentValue2;if($u!==p)if(p={context:p,memoizedValue:m,next:null},bo===null){if(la===null)throw Error(s(308));bo=p,la.dependencies={lanes:0,firstContext:p}}else bo=bo.next=p;return m}var bs=null,Ms=!1;function Xu(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jc(p,m){p=p.updateQueue,m.updateQueue===p&&(m.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function zs(p,m){return{eventTime:p,lane:m,tag:0,payload:null,callback:null,next:null}}function Fa(p,m){var b=p.updateQueue;b!==null&&(b=b.shared,xi!==null&&p.mode&1&&!(Dn&2)?(p=b.interleaved,p===null?(m.next=m,bs===null?bs=[b]:bs.push(b)):(m.next=p.next,p.next=m),b.interleaved=m):(p=b.pending,p===null?m.next=m:(m.next=p.next,p.next=m),b.pending=m))}function pl(p,m,b){if(m=m.updateQueue,m!==null&&(m=m.shared,(b&4194240)!==0)){var A=m.lanes;A&=p.pendingLanes,b|=A,m.lanes=b,Qi(p,b)}}function lu(p,m){var b=p.updateQueue,A=p.alternate;if(A!==null&&(A=A.updateQueue,b===A)){var O=null,W=null;if(b=b.firstBaseUpdate,b!==null){do{var Ee={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};W===null?O=W=Ee:W=W.next=Ee,b=b.next}while(b!==null);W===null?O=W=m:W=W.next=m}else O=W=m;b={baseState:A.baseState,firstBaseUpdate:O,lastBaseUpdate:W,shared:A.shared,effects:A.effects},p.updateQueue=b;return}p=b.lastBaseUpdate,p===null?b.firstBaseUpdate=m:p.next=m,b.lastBaseUpdate=m}function uu(p,m,b,A){var O=p.updateQueue;Ms=!1;var W=O.firstBaseUpdate,Ee=O.lastBaseUpdate,De=O.shared.pending;if(De!==null){O.shared.pending=null;var ft=De,Ft=ft.next;ft.next=null,Ee===null?W=Ft:Ee.next=Ft,Ee=ft;var Qt=p.alternate;Qt!==null&&(Qt=Qt.updateQueue,De=Qt.lastBaseUpdate,De!==Ee&&(De===null?Qt.firstBaseUpdate=Ft:De.next=Ft,Qt.lastBaseUpdate=ft))}if(W!==null){var On=O.baseState;Ee=0,Qt=Ft=ft=null,De=W;do{var mn=De.lane,Gr=De.eventTime;if((A&mn)===mn){Qt!==null&&(Qt=Qt.next={eventTime:Gr,lane:0,tag:De.tag,payload:De.payload,callback:De.callback,next:null});e:{var hn=p,ns=De;switch(mn=m,Gr=b,ns.tag){case 1:if(hn=ns.payload,typeof hn=="function"){On=hn.call(Gr,On,mn);break e}On=hn;break e;case 3:hn.flags=hn.flags&-65537|128;case 0:if(hn=ns.payload,mn=typeof hn=="function"?hn.call(Gr,On,mn):hn,mn==null)break e;On=o({},On,mn);break e;case 2:Ms=!0}}De.callback!==null&&De.lane!==0&&(p.flags|=64,mn=O.effects,mn===null?O.effects=[De]:mn.push(De))}else Gr={eventTime:Gr,lane:mn,tag:De.tag,payload:De.payload,callback:De.callback,next:null},Qt===null?(Ft=Qt=Gr,ft=On):Qt=Qt.next=Gr,Ee|=mn;if(De=De.next,De===null){if(De=O.shared.pending,De===null)break;mn=De,De=mn.next,mn.next=null,O.lastBaseUpdate=mn,O.shared.pending=null}}while(1);if(Qt===null&&(ft=On),O.baseState=ft,O.firstBaseUpdate=Ft,O.lastBaseUpdate=Qt,m=O.shared.interleaved,m!==null){O=m;do Ee|=O.lane,O=O.next;while(O!==m)}else W===null&&(O.shared.lanes=0);pa|=Ee,p.lanes=Ee,p.memoizedState=On}}function ml(p,m,b){if(p=m.effects,m.effects=null,p!==null)for(m=0;m<p.length;m++){var A=p[m],O=A.callback;if(O!==null){if(A.callback=null,A=b,typeof O!="function")throw Error(s(191,O));O.call(A)}}}var Qc=new r.Component().refs;function T(p,m,b,A){m=p.memoizedState,b=b(A,m),b=b==null?m:o({},m,b),p.memoizedState=b,p.lanes===0&&(p.updateQueue.baseState=b)}var Y={isMounted:function(p){return(p=p._reactInternals)?k(p)===p:!1},enqueueSetState:function(p,m,b){p=p._reactInternals;var A=ko(),O=ga(p),W=zs(A,O);W.payload=m,b!=null&&(W.callback=b),Fa(p,W),m=es(p,O,A),m!==null&&pl(m,p,O)},enqueueReplaceState:function(p,m,b){p=p._reactInternals;var A=ko(),O=ga(p),W=zs(A,O);W.tag=1,W.payload=m,b!=null&&(W.callback=b),Fa(p,W),m=es(p,O,A),m!==null&&pl(m,p,O)},enqueueForceUpdate:function(p,m){p=p._reactInternals;var b=ko(),A=ga(p),O=zs(b,A);O.tag=2,m!=null&&(O.callback=m),Fa(p,O),m=es(p,A,b),m!==null&&pl(m,p,A)}};function Me(p,m,b,A,O,W,Ee){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(A,W,Ee):m.prototype&&m.prototype.isPureReactComponent?!qu(b,A)||!qu(O,W):!0}function Re(p,m,b){var A=!1,O=Mn,W=m.contextType;return typeof W=="object"&&W!==null?W=Mo(W):(O=ur(m)?or:pn.current,A=m.contextTypes,W=(A=A!=null)?Kn(p,O):Mn),m=new m(b,W),p.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=Y,p.stateNode=m,m._reactInternals=p,A&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=O,p.__reactInternalMemoizedMaskedChildContext=W),m}function He(p,m,b,A){p=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(b,A),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(b,A),m.state!==p&&Y.enqueueReplaceState(m,m.state,null)}function at(p,m,b,A){var O=p.stateNode;O.props=b,O.state=p.memoizedState,O.refs=Qc,Xu(p);var W=m.contextType;typeof W=="object"&&W!==null?O.context=Mo(W):(W=ur(m)?or:pn.current,O.context=Kn(p,W)),O.state=p.memoizedState,W=m.getDerivedStateFromProps,typeof W=="function"&&(T(p,m,W,b),O.state=p.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(m=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),m!==O.state&&Y.enqueueReplaceState(O,O.state,null),uu(p,b,O,A),O.state=p.memoizedState),typeof O.componentDidMount=="function"&&(p.flags|=4194308)}var Et=[],Gt=0,ln=null,bn=0,cn=[],En=0,_r=null,vr=1,Ar="";function li(p,m){Et[Gt++]=bn,Et[Gt++]=ln,ln=p,bn=m}function zi(p,m,b){cn[En++]=vr,cn[En++]=Ar,cn[En++]=_r,_r=p;var A=vr;p=Ar;var O=32-Nr(A)-1;A&=~(1<<O),b+=1;var W=32-Nr(m)+O;if(30<W){var Ee=O-O%5;W=(A&(1<<Ee)-1).toString(32),A>>=Ee,O-=Ee,vr=1<<32-Nr(m)+O|b<<O|A,Ar=W+p}else vr=1<<W|b<<O|A,Ar=p}function Es(p){p.return!==null&&(li(p,1),zi(p,1,0))}function zo(p){for(;p===ln;)ln=Et[--Gt],Et[Gt]=null,bn=Et[--Gt],Et[Gt]=null;for(;p===_r;)_r=cn[--En],cn[En]=null,Ar=cn[--En],cn[En]=null,vr=cn[--En],cn[En]=null}var ui=null,Eo=null,Tr=!1,gl=!1,Ao=null;function eh(p,m){var b=Xa(5,null,null,0);b.elementType="DELETED",b.stateNode=m,b.return=p,m=p.deletions,m===null?(p.deletions=[b],p.flags|=16):m.push(b)}function th(p,m){switch(p.tag){case 5:return m=Wt(m,p.type,p.pendingProps),m!==null?(p.stateNode=m,ui=p,Eo=yn(m),!0):!1;case 6:return m=Yi(m,p.pendingProps),m!==null?(p.stateNode=m,ui=p,Eo=null,!0):!1;case 13:if(m=Zi(m),m!==null){var b=_r!==null?{id:vr,overflow:Ar}:null;return p.memoizedState={dehydrated:m,treeContext:b,retryLane:1073741824},b=Xa(18,null,null,0),b.stateNode=m,b.return=p,p.child=b,ui=p,Eo=null,!0}return!1;default:return!1}}function cu(p){return(p.mode&1)!==0&&(p.flags&128)===0}function Hi(p){if(Tr){var m=Eo;if(m){var b=m;if(!th(p,m)){if(cu(p))throw Error(s(418));m=lr(b);var A=ui;m&&th(p,m)?eh(A,b):(p.flags=p.flags&-4097|2,Tr=!1,ui=p)}}else{if(cu(p))throw Error(s(418));p.flags=p.flags&-4097|2,Tr=!1,ui=p}}}function Yu(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;ui=p}function Da(p){if(!Ie||p!==ui)return!1;if(!Tr)return Yu(p),Tr=!0,!1;if(p.tag!==3&&(p.tag!==5||it(p.type)&&!Q(p.type,p.memoizedProps))){var m=Eo;if(m){if(cu(p)){for(p=Eo;p;)p=lr(p);throw Error(s(418))}for(;m;)eh(p,m),m=lr(m)}}if(Yu(p),p.tag===13){if(!Ie)throw Error(s(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));Eo=ve(p)}else Eo=ui?lr(p.stateNode):null;return!0}function ua(){Ie&&(Eo=ui=null,gl=Tr=!1)}function Zu(p){Ao===null?Ao=[p]:Ao.push(p)}function eo(p,m,b){if(p=b.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(s(309));var A=b.stateNode}if(!A)throw Error(s(147,p));var O=A,W=""+p;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===W?m.ref:(m=function(Ee){var De=O.refs;De===Qc&&(De=O.refs={}),Ee===null?delete De[W]:De[W]=Ee},m._stringRef=W,m)}if(typeof p!="string")throw Error(s(284));if(!b._owner)throw Error(s(290,p))}return p}function nh(p,m){throw p=Object.prototype.toString.call(m),Error(s(31,p==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":p))}function rh(p){var m=p._init;return m(p._payload)}function If(p){function m(Ze,ze){if(p){var ot=Ze.deletions;ot===null?(Ze.deletions=[ze],Ze.flags|=16):ot.push(ze)}}function b(Ze,ze){if(!p)return null;for(;ze!==null;)m(Ze,ze),ze=ze.sibling;return null}function A(Ze,ze){for(Ze=new Map;ze!==null;)ze.key!==null?Ze.set(ze.key,ze):Ze.set(ze.index,ze),ze=ze.sibling;return Ze}function O(Ze,ze){return Ze=gh(Ze,ze),Ze.index=0,Ze.sibling=null,Ze}function W(Ze,ze,ot){return Ze.index=ot,p?(ot=Ze.alternate,ot!==null?(ot=ot.index,ot<ze?(Ze.flags|=2,ze):ot):(Ze.flags|=2,ze)):(Ze.flags|=1048576,ze)}function Ee(Ze){return p&&Ze.alternate===null&&(Ze.flags|=2),Ze}function De(Ze,ze,ot,Yt){return ze===null||ze.tag!==6?(ze=US(ot,Ze.mode,Yt),ze.return=Ze,ze):(ze=O(ze,ot),ze.return=Ze,ze)}function ft(Ze,ze,ot,Yt){var un=ot.type;return un===c?Qt(Ze,ze,ot.props.children,Yt,ot.key):ze!==null&&(ze.elementType===un||typeof un=="object"&&un!==null&&un.$$typeof===_&&rh(un)===ze.type)?(Yt=O(ze,ot.props),Yt.ref=eo(Ze,ze,ot),Yt.return=Ze,Yt):(Yt=ny(ot.type,ot.key,ot.props,null,Ze.mode,Yt),Yt.ref=eo(Ze,ze,ot),Yt.return=Ze,Yt)}function Ft(Ze,ze,ot,Yt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==ot.containerInfo||ze.stateNode.implementation!==ot.implementation?(ze=zS(ot,Ze.mode,Yt),ze.return=Ze,ze):(ze=O(ze,ot.children||[]),ze.return=Ze,ze)}function Qt(Ze,ze,ot,Yt,un){return ze===null||ze.tag!==7?(ze=jf(ot,Ze.mode,Yt,un),ze.return=Ze,ze):(ze=O(ze,ot),ze.return=Ze,ze)}function On(Ze,ze,ot){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ze=US(""+ze,Ze.mode,ot),ze.return=Ze,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case l:return ot=ny(ze.type,ze.key,ze.props,null,Ze.mode,ot),ot.ref=eo(Ze,null,ze),ot.return=Ze,ot;case u:return ze=zS(ze,Ze.mode,ot),ze.return=Ze,ze;case _:var Yt=ze._init;return On(Ze,Yt(ze._payload),ot)}if(K(ze)||I(ze))return ze=jf(ze,Ze.mode,ot,null),ze.return=Ze,ze;nh(Ze,ze)}return null}function mn(Ze,ze,ot,Yt){var un=ze!==null?ze.key:null;if(typeof ot=="string"&&ot!==""||typeof ot=="number")return un!==null?null:De(Ze,ze,""+ot,Yt);if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case l:return ot.key===un?ft(Ze,ze,ot,Yt):null;case u:return ot.key===un?Ft(Ze,ze,ot,Yt):null;case _:return un=ot._init,mn(Ze,ze,un(ot._payload),Yt)}if(K(ot)||I(ot))return un!==null?null:Qt(Ze,ze,ot,Yt,null);nh(Ze,ot)}return null}function Gr(Ze,ze,ot,Yt,un){if(typeof Yt=="string"&&Yt!==""||typeof Yt=="number")return Ze=Ze.get(ot)||null,De(ze,Ze,""+Yt,un);if(typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case l:return Ze=Ze.get(Yt.key===null?ot:Yt.key)||null,ft(ze,Ze,Yt,un);case u:return Ze=Ze.get(Yt.key===null?ot:Yt.key)||null,Ft(ze,Ze,Yt,un);case _:var $n=Yt._init;return Gr(Ze,ze,ot,$n(Yt._payload),un)}if(K(Yt)||I(Yt))return Ze=Ze.get(ot)||null,Qt(ze,Ze,Yt,un,null);nh(ze,Yt)}return null}function hn(Ze,ze,ot,Yt){for(var un=null,$n=null,Bn=ze,xr=ze=0,Io=null;Bn!==null&&xr<ot.length;xr++){Bn.index>xr?(Io=Bn,Bn=null):Io=Bn.sibling;var wr=mn(Ze,Bn,ot[xr],Yt);if(wr===null){Bn===null&&(Bn=Io);break}p&&Bn&&wr.alternate===null&&m(Ze,Bn),ze=W(wr,ze,xr),$n===null?un=wr:$n.sibling=wr,$n=wr,Bn=Io}if(xr===ot.length)return b(Ze,Bn),Tr&&li(Ze,xr),un;if(Bn===null){for(;xr<ot.length;xr++)Bn=On(Ze,ot[xr],Yt),Bn!==null&&(ze=W(Bn,ze,xr),$n===null?un=Bn:$n.sibling=Bn,$n=Bn);return Tr&&li(Ze,xr),un}for(Bn=A(Ze,Bn);xr<ot.length;xr++)Io=Gr(Bn,Ze,xr,ot[xr],Yt),Io!==null&&(p&&Io.alternate!==null&&Bn.delete(Io.key===null?xr:Io.key),ze=W(Io,ze,xr),$n===null?un=Io:$n.sibling=Io,$n=Io);return p&&Bn.forEach(function(vh){return m(Ze,vh)}),Tr&&li(Ze,xr),un}function ns(Ze,ze,ot,Yt){var un=I(ot);if(typeof un!="function")throw Error(s(150));if(ot=un.call(ot),ot==null)throw Error(s(151));for(var $n=un=null,Bn=ze,xr=ze=0,Io=null,wr=ot.next();Bn!==null&&!wr.done;xr++,wr=ot.next()){Bn.index>xr?(Io=Bn,Bn=null):Io=Bn.sibling;var vh=mn(Ze,Bn,wr.value,Yt);if(vh===null){Bn===null&&(Bn=Io);break}p&&Bn&&vh.alternate===null&&m(Ze,Bn),ze=W(vh,ze,xr),$n===null?un=vh:$n.sibling=vh,$n=vh,Bn=Io}if(wr.done)return b(Ze,Bn),Tr&&li(Ze,xr),un;if(Bn===null){for(;!wr.done;xr++,wr=ot.next())wr=On(Ze,wr.value,Yt),wr!==null&&(ze=W(wr,ze,xr),$n===null?un=wr:$n.sibling=wr,$n=wr);return Tr&&li(Ze,xr),un}for(Bn=A(Ze,Bn);!wr.done;xr++,wr=ot.next())wr=Gr(Bn,Ze,xr,wr.value,Yt),wr!==null&&(p&&wr.alternate!==null&&Bn.delete(wr.key===null?xr:wr.key),ze=W(wr,ze,xr),$n===null?un=wr:$n.sibling=wr,$n=wr);return p&&Bn.forEach(function(TB){return m(Ze,TB)}),Tr&&li(Ze,xr),un}function Ya(Ze,ze,ot,Yt){if(typeof ot=="object"&&ot!==null&&ot.type===c&&ot.key===null&&(ot=ot.props.children),typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case l:e:{for(var un=ot.key,$n=ze;$n!==null;){if($n.key===un){if(un=ot.type,un===c){if($n.tag===7){b(Ze,$n.sibling),ze=O($n,ot.props.children),ze.return=Ze,Ze=ze;break e}}else if($n.elementType===un||typeof un=="object"&&un!==null&&un.$$typeof===_&&rh(un)===$n.type){b(Ze,$n.sibling),ze=O($n,ot.props),ze.ref=eo(Ze,$n,ot),ze.return=Ze,Ze=ze;break e}b(Ze,$n);break}else m(Ze,$n);$n=$n.sibling}ot.type===c?(ze=jf(ot.props.children,Ze.mode,Yt,ot.key),ze.return=Ze,Ze=ze):(Yt=ny(ot.type,ot.key,ot.props,null,Ze.mode,Yt),Yt.ref=eo(Ze,ze,ot),Yt.return=Ze,Ze=Yt)}return Ee(Ze);case u:e:{for($n=ot.key;ze!==null;){if(ze.key===$n)if(ze.tag===4&&ze.stateNode.containerInfo===ot.containerInfo&&ze.stateNode.implementation===ot.implementation){b(Ze,ze.sibling),ze=O(ze,ot.children||[]),ze.return=Ze,Ze=ze;break e}else{b(Ze,ze);break}else m(Ze,ze);ze=ze.sibling}ze=zS(ot,Ze.mode,Yt),ze.return=Ze,Ze=ze}return Ee(Ze);case _:return $n=ot._init,Ya(Ze,ze,$n(ot._payload),Yt)}if(K(ot))return hn(Ze,ze,ot,Yt);if(I(ot))return ns(Ze,ze,ot,Yt);nh(Ze,ot)}return typeof ot=="string"&&ot!==""||typeof ot=="number"?(ot=""+ot,ze!==null&&ze.tag===6?(b(Ze,ze.sibling),ze=O(ze,ot),ze.return=Ze,Ze=ze):(b(Ze,ze),ze=US(ot,Ze.mode,Yt),ze.return=Ze,Ze=ze),Ee(Ze)):b(Ze,ze)}return Ya}var lo=If(!0),Ku=If(!1),hu={},Ho=ht(hu),Hs=ht(hu),Gs=ht(hu);function Jr(p){if(p===hu)throw Error(s(174));return p}function uo(p,m){Zt(Gs,m),Zt(Hs,p),Zt(Ho,hu),p=le(m),an(Ho),Zt(Ho,p)}function As(){an(Ho),an(Hs),an(Gs)}function Oa(p){var m=Jr(Gs.current),b=Jr(Ho.current);m=V(b,p.type,m),b!==m&&(Zt(Hs,p),Zt(Ho,m))}function ca(p){Hs.current===p&&(an(Ho),an(Hs))}var Cr=ht(0);function Vs(p){for(var m=p;m!==null;){if(m.tag===13){var b=m.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||Ir(b)||ar(b)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===p)break;for(;m.sibling===null;){if(m.return===null||m.return===p)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var Qr=[];function Ju(){for(var p=0;p<Qr.length;p++){var m=Qr[p];$e?m._workInProgressVersionPrimary=null:m._workInProgressVersionSecondary=null}Qr.length=0}var to=a.ReactCurrentDispatcher,ei=a.ReactCurrentBatchConfig,ha=0,Hr=null,Ci=null,$r=null,Ba=!1,Ws=!1,fa=0,ih=0;function ci(){throw Error(s(321))}function Ua(p,m){if(m===null)return!1;for(var b=0;b<m.length&&b<p.length;b++)if(!ao(p[b],m[b]))return!1;return!0}function Qu(p,m,b,A,O,W){if(ha=W,Hr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,to.current=p===null||p.memoizedState===null?Bf:kS,p=b(A,O),Ws){W=0;do{if(Ws=!1,fa=0,25<=W)throw Error(s(301));W+=1,$r=Ci=null,m.updateQueue=null,to.current=IS,p=b(A,O)}while(Ws)}if(to.current=lh,m=Ci!==null&&Ci.next!==null,ha=0,$r=Ci=Hr=null,Ba=!1,m)throw Error(s(300));return p}function Jo(){var p=fa!==0;return fa=0,p}function Pi(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $r===null?Hr.memoizedState=$r=p:$r=$r.next=p,$r}function Jn(){if(Ci===null){var p=Hr.alternate;p=p!==null?p.memoizedState:null}else p=Ci.next;var m=$r===null?Hr.memoizedState:$r.next;if(m!==null)$r=m,Ci=p;else{if(p===null)throw Error(s(310));Ci=p,p={memoizedState:Ci.memoizedState,baseState:Ci.baseState,baseQueue:Ci.baseQueue,queue:Ci.queue,next:null},$r===null?Hr.memoizedState=$r=p:$r=$r.next=p}return $r}function cr(p,m){return typeof m=="function"?m(p):m}function Xr(p){var m=Jn(),b=m.queue;if(b===null)throw Error(s(311));b.lastRenderedReducer=p;var A=Ci,O=A.baseQueue,W=b.pending;if(W!==null){if(O!==null){var Ee=O.next;O.next=W.next,W.next=Ee}A.baseQueue=O=W,b.pending=null}if(O!==null){W=O.next,A=A.baseState;var De=Ee=null,ft=null,Ft=W;do{var Qt=Ft.lane;if((ha&Qt)===Qt)ft!==null&&(ft=ft.next={lane:0,action:Ft.action,hasEagerState:Ft.hasEagerState,eagerState:Ft.eagerState,next:null}),A=Ft.hasEagerState?Ft.eagerState:p(A,Ft.action);else{var On={lane:Qt,action:Ft.action,hasEagerState:Ft.hasEagerState,eagerState:Ft.eagerState,next:null};ft===null?(De=ft=On,Ee=A):ft=ft.next=On,Hr.lanes|=Qt,pa|=Qt}Ft=Ft.next}while(Ft!==null&&Ft!==W);ft===null?Ee=A:ft.next=De,ao(A,m.memoizedState)||(Po=!0),m.memoizedState=A,m.baseState=Ee,m.baseQueue=ft,b.lastRenderedState=A}if(p=b.interleaved,p!==null){O=p;do W=O.lane,Hr.lanes|=W,pa|=W,O=O.next;while(O!==p)}else O===null&&(b.lanes=0);return[m.memoizedState,b.dispatch]}function hi(p){var m=Jn(),b=m.queue;if(b===null)throw Error(s(311));b.lastRenderedReducer=p;var A=b.dispatch,O=b.pending,W=m.memoizedState;if(O!==null){b.pending=null;var Ee=O=O.next;do W=p(W,Ee.action),Ee=Ee.next;while(Ee!==O);ao(W,m.memoizedState)||(Po=!0),m.memoizedState=W,m.baseQueue===null&&(m.baseState=W),b.lastRenderedState=W}return[W,A]}function za(){}function oh(p,m){var b=Hr,A=Jn(),O=m(),W=!ao(A.memoizedState,O);if(W&&(A.memoizedState=O,Po=!0),A=A.queue,fu(up.bind(null,b,A,p),[p]),A.getSnapshot!==m||W||$r!==null&&$r.memoizedState.tag&1){if(b.flags|=2048,To(9,Nf.bind(null,b,A,O,m),void 0,null),xi===null)throw Error(s(349));ha&30||ec(b,m,O)}return O}function ec(p,m,b){p.flags|=16384,p={getSnapshot:m,value:b},m=Hr.updateQueue,m===null?(m={lastEffect:null,stores:null},Hr.updateQueue=m,m.stores=[p]):(b=m.stores,b===null?m.stores=[p]:b.push(p))}function Nf(p,m,b,A){m.value=b,m.getSnapshot=A,Ff(m)&&es(p,1,-1)}function up(p,m,b){return b(function(){Ff(m)&&es(p,1,-1)})}function Ff(p){var m=p.getSnapshot;p=p.value;try{var b=m();return!ao(p,b)}catch{return!0}}function Go(p){var m=Pi();return typeof p=="function"&&(p=p()),m.memoizedState=m.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cr,lastRenderedState:p},m.queue=p,p=p.dispatch=LS.bind(null,Hr,p),[m.memoizedState,p]}function To(p,m,b,A){return p={tag:p,create:m,destroy:b,deps:A,next:null},m=Hr.updateQueue,m===null?(m={lastEffect:null,stores:null},Hr.updateQueue=m,m.lastEffect=p.next=p):(b=m.lastEffect,b===null?m.lastEffect=p.next=p:(A=b.next,b.next=p,p.next=A,m.lastEffect=p)),p}function Df(){return Jn().memoizedState}function tc(p,m,b,A){var O=Pi();Hr.flags|=p,O.memoizedState=To(1|m,b,void 0,A===void 0?null:A)}function Of(p,m,b,A){var O=Jn();A=A===void 0?null:A;var W=void 0;if(Ci!==null){var Ee=Ci.memoizedState;if(W=Ee.destroy,A!==null&&Ua(A,Ee.deps)){O.memoizedState=To(m,b,W,A);return}}Hr.flags|=p,O.memoizedState=To(1|m,b,W,A)}function sh(p,m){return tc(8390656,8,p,m)}function fu(p,m){return Of(2048,8,p,m)}function cp(p,m){return Of(4,2,p,m)}function Lg(p,m){return Of(4,4,p,m)}function hp(p,m){if(typeof m=="function")return p=p(),m(p),function(){m(null)};if(m!=null)return p=p(),m.current=p,function(){m.current=null}}function fp(p,m,b){return b=b!=null?b.concat([p]):null,Of(4,4,hp.bind(null,m,p),b)}function ah(){}function dp(p,m){var b=Jn();m=m===void 0?null:m;var A=b.memoizedState;return A!==null&&m!==null&&Ua(m,A[1])?A[0]:(b.memoizedState=[p,m],p)}function H1(p,m){var b=Jn();m=m===void 0?null:m;var A=b.memoizedState;return A!==null&&m!==null&&Ua(m,A[1])?A[0]:(p=p(),b.memoizedState=[p,m],p)}function PS(p,m){var b=nr;nr=b!==0&&4>b?b:4,p(!0);var A=ei.transition;ei.transition={};try{p(!1),m()}finally{nr=b,ei.transition=A}}function kg(){return Jn().memoizedState}function RS(p,m,b){var A=ga(p);b={lane:A,action:b,hasEagerState:!1,eagerState:null,next:null},G1(p)?V1(m,b):(W1(p,m,b),b=ko(),p=es(p,A,b),p!==null&&pp(p,m,A))}function LS(p,m,b){var A=ga(p),O={lane:A,action:b,hasEagerState:!1,eagerState:null,next:null};if(G1(p))V1(m,O);else{W1(p,m,O);var W=p.alternate;if(p.lanes===0&&(W===null||W.lanes===0)&&(W=m.lastRenderedReducer,W!==null))try{var Ee=m.lastRenderedState,De=W(Ee,b);if(O.hasEagerState=!0,O.eagerState=De,ao(De,Ee))return}catch{}finally{}b=ko(),p=es(p,A,b),p!==null&&pp(p,m,A)}}function G1(p){var m=p.alternate;return p===Hr||m!==null&&m===Hr}function V1(p,m){Ws=Ba=!0;var b=p.pending;b===null?m.next=m:(m.next=b.next,b.next=m),p.pending=m}function W1(p,m,b){xi!==null&&p.mode&1&&!(Dn&2)?(p=m.interleaved,p===null?(b.next=b,bs===null?bs=[m]:bs.push(m)):(b.next=p.next,p.next=b),m.interleaved=b):(p=m.pending,p===null?b.next=b:(b.next=p.next,p.next=b),m.pending=b)}function pp(p,m,b){if(b&4194240){var A=m.lanes;A&=p.pendingLanes,b|=A,m.lanes=b,Qi(p,b)}}var lh={readContext:Mo,useCallback:ci,useContext:ci,useEffect:ci,useImperativeHandle:ci,useInsertionEffect:ci,useLayoutEffect:ci,useMemo:ci,useReducer:ci,useRef:ci,useState:ci,useDebugValue:ci,useDeferredValue:ci,useTransition:ci,useMutableSource:ci,useSyncExternalStore:ci,useId:ci,unstable_isNewReconciler:!1},Bf={readContext:Mo,useCallback:function(p,m){return Pi().memoizedState=[p,m===void 0?null:m],p},useContext:Mo,useEffect:sh,useImperativeHandle:function(p,m,b){return b=b!=null?b.concat([p]):null,tc(4194308,4,hp.bind(null,m,p),b)},useLayoutEffect:function(p,m){return tc(4194308,4,p,m)},useInsertionEffect:function(p,m){return tc(4,2,p,m)},useMemo:function(p,m){var b=Pi();return m=m===void 0?null:m,p=p(),b.memoizedState=[p,m],p},useReducer:function(p,m,b){var A=Pi();return m=b!==void 0?b(m):m,A.memoizedState=A.baseState=m,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:m},A.queue=p,p=p.dispatch=RS.bind(null,Hr,p),[A.memoizedState,p]},useRef:function(p){var m=Pi();return p={current:p},m.memoizedState=p},useState:Go,useDebugValue:ah,useDeferredValue:function(p){var m=Go(p),b=m[0],A=m[1];return sh(function(){var O=ei.transition;ei.transition={};try{A(p)}finally{ei.transition=O}},[p]),b},useTransition:function(){var p=Go(!1),m=p[0];return p=PS.bind(null,p[1]),Pi().memoizedState=p,[m,p]},useMutableSource:function(){},useSyncExternalStore:function(p,m,b){var A=Hr,O=Pi();if(Tr){if(b===void 0)throw Error(s(407));b=b()}else{if(b=m(),xi===null)throw Error(s(349));ha&30||ec(A,m,b)}O.memoizedState=b;var W={value:b,getSnapshot:m};return O.queue=W,sh(up.bind(null,A,W,p),[p]),A.flags|=2048,To(9,Nf.bind(null,A,W,b,m),void 0,null),b},useId:function(){var p=Pi(),m=xi.identifierPrefix;if(Tr){var b=Ar,A=vr;b=(A&~(1<<32-Nr(A)-1)).toString(32)+b,m=":"+m+"R"+b,b=fa++,0<b&&(m+="H"+b.toString(32)),m+=":"}else b=ih++,m=":"+m+"r"+b.toString(32)+":";return p.memoizedState=m},unstable_isNewReconciler:!1},kS={readContext:Mo,useCallback:dp,useContext:Mo,useEffect:fu,useImperativeHandle:fp,useInsertionEffect:cp,useLayoutEffect:Lg,useMemo:H1,useReducer:Xr,useRef:Df,useState:function(){return Xr(cr)},useDebugValue:ah,useDeferredValue:function(p){var m=Xr(cr),b=m[0],A=m[1];return fu(function(){var O=ei.transition;ei.transition={};try{A(p)}finally{ei.transition=O}},[p]),b},useTransition:function(){var p=Xr(cr)[0],m=Jn().memoizedState;return[p,m]},useMutableSource:za,useSyncExternalStore:oh,useId:kg,unstable_isNewReconciler:!1},IS={readContext:Mo,useCallback:dp,useContext:Mo,useEffect:fu,useImperativeHandle:fp,useInsertionEffect:cp,useLayoutEffect:Lg,useMemo:H1,useReducer:hi,useRef:Df,useState:function(){return hi(cr)},useDebugValue:ah,useDeferredValue:function(p){var m=hi(cr),b=m[0],A=m[1];return fu(function(){var O=ei.transition;ei.transition={};try{A(p)}finally{ei.transition=O}},[p]),b},useTransition:function(){var p=hi(cr)[0],m=Jn().memoizedState;return[p,m]},useMutableSource:za,useSyncExternalStore:oh,useId:kg,unstable_isNewReconciler:!1};function mp(p,m){try{var b="",A=m;do b+=Ia(A),A=A.return;while(A);var O=b}catch(W){O=`
Error generating stack: `+W.message+`
`+W.stack}return{value:p,source:m,stack:O}}function Ig(p,m){try{console.error(m.value)}catch(b){setTimeout(function(){throw b})}}var NS=typeof WeakMap=="function"?WeakMap:Map;function j1(p,m,b){b=zs(-1,b),b.tag=3,b.payload={element:null};var A=m.value;return b.callback=function(){wp||(wp=!0,Gg=A),Ig(p,m)},b}function q1(p,m,b){b=zs(-1,b),b.tag=3;var A=p.type.getDerivedStateFromError;if(typeof A=="function"){var O=m.value;b.payload=function(){return A(O)},b.callback=function(){Ig(p,m)}}var W=p.stateNode;return W!==null&&typeof W.componentDidCatch=="function"&&(b.callback=function(){Ig(p,m),typeof A!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var Ee=m.stack;this.componentDidCatch(m.value,{componentStack:Ee!==null?Ee:""})}),b}function vl(p,m,b){var A=p.pingCache;if(A===null){A=p.pingCache=new NS;var O=new Set;A.set(m,O)}else O=A.get(m),O===void 0&&(O=new Set,A.set(m,O));O.has(b)||(O.add(b),p=$g.bind(null,p,m,b),m.then(p,p))}function js(p){do{var m;if((m=p.tag===13)&&(m=p.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return p;p=p.return}while(p!==null);return null}function Ha(p,m,b,A,O){return p.mode&1?(p.flags|=65536,p.lanes=O,p):(p===m?p.flags|=65536:(p.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(m=zs(-1,1),m.tag=2,Fa(b,m))),b.lanes|=1),p)}function Ga(p){p.flags|=4}function Ng(p,m){if(p!==null&&p.child===m.child)return!0;if(m.flags&16)return!1;for(p=m.child;p!==null;){if(p.flags&12854||p.subtreeFlags&12854)return!1;p=p.sibling}return!0}var qs,Co,gp,vp;if(ke)qs=function(p,m){for(var b=m.child;b!==null;){if(b.tag===5||b.tag===6)D(p,b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===m)break;for(;b.sibling===null;){if(b.return===null||b.return===m)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},Co=function(){},gp=function(p,m,b,A,O){if(p=p.memoizedProps,p!==A){var W=m.stateNode,Ee=Jr(Ho.current);b=Z(W,b,p,A,O,Ee),(m.updateQueue=b)&&Ga(m)}},vp=function(p,m,b,A){b!==A&&Ga(m)};else if(fe){qs=function(p,m,b,A){for(var O=m.child;O!==null;){if(O.tag===5){var W=O.stateNode;b&&A&&(W=wn(W,O.type,O.memoizedProps,O)),D(p,W)}else if(O.tag===6)W=O.stateNode,b&&A&&(W=ir(W,O.memoizedProps,O)),D(p,W);else if(O.tag!==4){if(O.tag===22&&O.memoizedState!==null)W=O.child,W!==null&&(W.return=O),qs(p,O,!0,!0);else if(O.child!==null){O.child.return=O,O=O.child;continue}}if(O===m)break;for(;O.sibling===null;){if(O.return===null||O.return===m)return;O=O.return}O.sibling.return=O.return,O=O.sibling}};var Fg=function(p,m,b,A){for(var O=m.child;O!==null;){if(O.tag===5){var W=O.stateNode;b&&A&&(W=wn(W,O.type,O.memoizedProps,O)),Xt(p,W)}else if(O.tag===6)W=O.stateNode,b&&A&&(W=ir(W,O.memoizedProps,O)),Xt(p,W);else if(O.tag!==4){if(O.tag===22&&O.memoizedState!==null)W=O.child,W!==null&&(W.return=O),Fg(p,O,!0,!0);else if(O.child!==null){O.child.return=O,O=O.child;continue}}if(O===m)break;for(;O.sibling===null;){if(O.return===null||O.return===m)return;O=O.return}O.sibling.return=O.return,O=O.sibling}};Co=function(p,m){var b=m.stateNode;if(!Ng(p,m)){p=b.containerInfo;var A=Nt(p);Fg(A,m,!1,!1),b.pendingChildren=A,Ga(m),kn(p,A)}},gp=function(p,m,b,A,O){var W=p.stateNode,Ee=p.memoizedProps;if((p=Ng(p,m))&&Ee===A)m.stateNode=W;else{var De=m.stateNode,ft=Jr(Ho.current),Ft=null;Ee!==A&&(Ft=Z(De,b,Ee,A,O,ft)),p&&Ft===null?m.stateNode=W:(W=Ct(W,Ft,b,Ee,A,m,p,De),q(W,b,A,O,ft)&&Ga(m),m.stateNode=W,p?Ga(m):qs(W,m,!1,!1))}},vp=function(p,m,b,A){b!==A?(p=Jr(Gs.current),b=Jr(Ho.current),m.stateNode=se(A,p,b,m),Ga(m)):m.stateNode=p.stateNode}}else Co=function(){},gp=function(){},vp=function(){};function uh(p,m){if(!Tr)switch(p.tailMode){case"hidden":m=p.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?p.tail=null:b.sibling=null;break;case"collapsed":b=p.tail;for(var A=null;b!==null;)b.alternate!==null&&(A=b),b=b.sibling;A===null?m||p.tail===null?p.tail=null:p.tail.sibling=null:A.sibling=null}}function co(p){var m=p.alternate!==null&&p.alternate.child===p.child,b=0,A=0;if(m)for(var O=p.child;O!==null;)b|=O.lanes|O.childLanes,A|=O.subtreeFlags&14680064,A|=O.flags&14680064,O.return=p,O=O.sibling;else for(O=p.child;O!==null;)b|=O.lanes|O.childLanes,A|=O.subtreeFlags,A|=O.flags,O.return=p,O=O.sibling;return p.subtreeFlags|=A,p.childLanes=b,m}function $1(p,m,b){var A=m.pendingProps;switch(zo(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return co(m),null;case 1:return ur(m.type)&&Kr(),co(m),null;case 3:return A=m.stateNode,As(),an(xn),an(pn),Ju(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(p===null||p.child===null)&&(Da(m)?Ga(m):p===null||p.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,Ao!==null&&(bp(Ao),Ao=null))),Co(p,m),co(m),null;case 5:ca(m),b=Jr(Gs.current);var O=m.type;if(p!==null&&m.stateNode!=null)gp(p,m,O,A,b),p.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!A){if(m.stateNode===null)throw Error(s(166));return co(m),null}if(p=Jr(Ho.current),Da(m)){if(!Ie)throw Error(s(175));p=$(m.stateNode,m.type,m.memoizedProps,b,p,m,!gl),m.updateQueue=p,p!==null&&Ga(m)}else{var W=ie(O,A,b,p,m);qs(W,m,!1,!1),m.stateNode=W,q(W,O,A,b,p)&&Ga(m)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return co(m),null;case 6:if(p&&m.stateNode!=null)vp(p,m,p.memoizedProps,A);else{if(typeof A!="string"&&m.stateNode===null)throw Error(s(166));if(p=Jr(Gs.current),b=Jr(Ho.current),Da(m)){if(!Ie)throw Error(s(176));if(p=m.stateNode,A=m.memoizedProps,(b=B(p,A,m,!gl))&&(O=ui,O!==null))switch(W=(O.mode&1)!==0,O.tag){case 3:tt(O.stateNode.containerInfo,p,A,W);break;case 5:dt(O.type,O.memoizedProps,O.stateNode,p,A,W)}b&&Ga(m)}else m.stateNode=se(A,p,b,m)}return co(m),null;case 13:if(an(Cr),A=m.memoizedState,Tr&&Eo!==null&&m.mode&1&&!(m.flags&128)){for(p=Eo;p;)p=lr(p);return ua(),m.flags|=98560,m}if(A!==null&&A.dehydrated!==null){if(A=Da(m),p===null){if(!A)throw Error(s(318));if(!Ie)throw Error(s(344));if(p=m.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));re(p,m)}else ua(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;return co(m),null}return Ao!==null&&(bp(Ao),Ao=null),m.flags&128?(m.lanes=b,m):(A=A!==null,b=!1,p===null?Da(m):b=p.memoizedState!==null,A&&!b&&(m.child.flags|=8192,m.mode&1&&(p===null||Cr.current&1?br===0&&(br=3):Mp())),m.updateQueue!==null&&(m.flags|=4),co(m),null);case 4:return As(),Co(p,m),p===null&&Te(m.stateNode.containerInfo),co(m),null;case 10:return au(m.type._context),co(m),null;case 17:return ur(m.type)&&Kr(),co(m),null;case 19:if(an(Cr),O=m.memoizedState,O===null)return co(m),null;if(A=(m.flags&128)!==0,W=O.rendering,W===null)if(A)uh(O,!1);else{if(br!==0||p!==null&&p.flags&128)for(p=m.child;p!==null;){if(W=Vs(p),W!==null){for(m.flags|=128,uh(O,!1),p=W.updateQueue,p!==null&&(m.updateQueue=p,m.flags|=4),m.subtreeFlags=0,p=b,A=m.child;A!==null;)b=A,O=p,b.flags&=14680066,W=b.alternate,W===null?(b.childLanes=0,b.lanes=O,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=W.childLanes,b.lanes=W.lanes,b.child=W.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=W.memoizedProps,b.memoizedState=W.memoizedState,b.updateQueue=W.updateQueue,b.type=W.type,O=W.dependencies,b.dependencies=O===null?null:{lanes:O.lanes,firstContext:O.firstContext}),A=A.sibling;return Zt(Cr,Cr.current&1|2),m.child}p=p.sibling}O.tail!==null&&pi()>dh&&(m.flags|=128,A=!0,uh(O,!1),m.lanes=4194304)}else{if(!A)if(p=Vs(W),p!==null){if(m.flags|=128,A=!0,p=p.updateQueue,p!==null&&(m.updateQueue=p,m.flags|=4),uh(O,!0),O.tail===null&&O.tailMode==="hidden"&&!W.alternate&&!Tr)return co(m),null}else 2*pi()-O.renderingStartTime>dh&&b!==1073741824&&(m.flags|=128,A=!0,uh(O,!1),m.lanes=4194304);O.isBackwards?(W.sibling=m.child,m.child=W):(p=O.last,p!==null?p.sibling=W:m.child=W,O.last=W)}return O.tail!==null?(m=O.tail,O.rendering=m,O.tail=m.sibling,O.renderingStartTime=pi(),m.sibling=null,p=Cr.current,Zt(Cr,A?p&1|2:p&1),m):(co(m),null);case 22:case 23:return qg(),A=m.memoizedState!==null,p!==null&&p.memoizedState!==null!==A&&(m.flags|=8192),A&&m.mode&1?po&1073741824&&(co(m),ke&&m.subtreeFlags&6&&(m.flags|=8192)):co(m),null;case 24:return null;case 25:return null}throw Error(s(156,m.tag))}var FS=a.ReactCurrentOwner,Po=!1;function no(p,m,b,A){m.child=p===null?Ku(m,null,b,A):lo(m,p.child,b,A)}function ch(p,m,b,A,O){b=b.render;var W=m.ref;return Na(m,O),A=Qu(p,m,b,A,W,O),b=Jo(),p!==null&&!Po?(m.updateQueue=p.updateQueue,m.flags&=-2053,p.lanes&=~O,X(p,m,O)):(Tr&&b&&Es(m),m.flags|=1,no(p,m,A,O),m.child)}function yp(p,m,b,A,O){if(p===null){var W=b.type;return typeof W=="function"&&!BS(W)&&W.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(m.tag=15,m.type=W,Dg(p,m,W,A,O)):(p=ny(b.type,null,A,m,m.mode,O),p.ref=m.ref,p.return=m,m.child=p)}if(W=p.child,!(p.lanes&O)){var Ee=W.memoizedProps;if(b=b.compare,b=b!==null?b:qu,b(Ee,A)&&p.ref===m.ref)return X(p,m,O)}return m.flags|=1,p=gh(W,A),p.ref=m.ref,p.return=m,m.child=p}function Dg(p,m,b,A,O){if(p!==null&&qu(p.memoizedProps,A)&&p.ref===m.ref)if(Po=!1,(p.lanes&O)!==0)p.flags&131072&&(Po=!0);else return m.lanes=p.lanes,X(p,m,O);return Bg(p,m,b,A,O)}function X1(p,m,b){var A=m.pendingProps,O=A.children,W=p!==null?p.memoizedState:null;if(A.mode==="hidden")if(!(m.mode&1))m.memoizedState={baseLanes:0,cachePool:null},Zt(xl,po),po|=b;else if(b&1073741824)m.memoizedState={baseLanes:0,cachePool:null},A=W!==null?W.baseLanes:b,Zt(xl,po),po|=A;else return p=W!==null?W.baseLanes|b:b,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:p,cachePool:null},m.updateQueue=null,Zt(xl,po),po|=p,null;else W!==null?(A=W.baseLanes|b,m.memoizedState=null):A=b,Zt(xl,po),po|=A;return no(p,m,O,b),m.child}function Og(p,m){var b=m.ref;(p===null&&b!==null||p!==null&&p.ref!==b)&&(m.flags|=512,m.flags|=2097152)}function Bg(p,m,b,A,O){var W=ur(b)?or:pn.current;return W=Kn(m,W),Na(m,O),b=Qu(p,m,b,A,W,O),A=Jo(),p!==null&&!Po?(m.updateQueue=p.updateQueue,m.flags&=-2053,p.lanes&=~O,X(p,m,O)):(Tr&&A&&Es(m),m.flags|=1,no(p,m,b,O),m.child)}function Y1(p,m,b,A,O){if(ur(b)){var W=!0;Pn(m)}else W=!1;if(Na(m,O),m.stateNode===null)p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),Re(m,b,A),at(m,b,A,O),A=!0;else if(p===null){var Ee=m.stateNode,De=m.memoizedProps;Ee.props=De;var ft=Ee.context,Ft=b.contextType;typeof Ft=="object"&&Ft!==null?Ft=Mo(Ft):(Ft=ur(b)?or:pn.current,Ft=Kn(m,Ft));var Qt=b.getDerivedStateFromProps,On=typeof Qt=="function"||typeof Ee.getSnapshotBeforeUpdate=="function";On||typeof Ee.UNSAFE_componentWillReceiveProps!="function"&&typeof Ee.componentWillReceiveProps!="function"||(De!==A||ft!==Ft)&&He(m,Ee,A,Ft),Ms=!1;var mn=m.memoizedState;Ee.state=mn,uu(m,A,Ee,O),ft=m.memoizedState,De!==A||mn!==ft||xn.current||Ms?(typeof Qt=="function"&&(T(m,b,Qt,A),ft=m.memoizedState),(De=Ms||Me(m,b,De,A,mn,ft,Ft))?(On||typeof Ee.UNSAFE_componentWillMount!="function"&&typeof Ee.componentWillMount!="function"||(typeof Ee.componentWillMount=="function"&&Ee.componentWillMount(),typeof Ee.UNSAFE_componentWillMount=="function"&&Ee.UNSAFE_componentWillMount()),typeof Ee.componentDidMount=="function"&&(m.flags|=4194308)):(typeof Ee.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=A,m.memoizedState=ft),Ee.props=A,Ee.state=ft,Ee.context=Ft,A=De):(typeof Ee.componentDidMount=="function"&&(m.flags|=4194308),A=!1)}else{Ee=m.stateNode,Jc(p,m),De=m.memoizedProps,Ft=m.type===m.elementType?De:Ui(m.type,De),Ee.props=Ft,On=m.pendingProps,mn=Ee.context,ft=b.contextType,typeof ft=="object"&&ft!==null?ft=Mo(ft):(ft=ur(b)?or:pn.current,ft=Kn(m,ft));var Gr=b.getDerivedStateFromProps;(Qt=typeof Gr=="function"||typeof Ee.getSnapshotBeforeUpdate=="function")||typeof Ee.UNSAFE_componentWillReceiveProps!="function"&&typeof Ee.componentWillReceiveProps!="function"||(De!==On||mn!==ft)&&He(m,Ee,A,ft),Ms=!1,mn=m.memoizedState,Ee.state=mn,uu(m,A,Ee,O);var hn=m.memoizedState;De!==On||mn!==hn||xn.current||Ms?(typeof Gr=="function"&&(T(m,b,Gr,A),hn=m.memoizedState),(Ft=Ms||Me(m,b,Ft,A,mn,hn,ft)||!1)?(Qt||typeof Ee.UNSAFE_componentWillUpdate!="function"&&typeof Ee.componentWillUpdate!="function"||(typeof Ee.componentWillUpdate=="function"&&Ee.componentWillUpdate(A,hn,ft),typeof Ee.UNSAFE_componentWillUpdate=="function"&&Ee.UNSAFE_componentWillUpdate(A,hn,ft)),typeof Ee.componentDidUpdate=="function"&&(m.flags|=4),typeof Ee.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof Ee.componentDidUpdate!="function"||De===p.memoizedProps&&mn===p.memoizedState||(m.flags|=4),typeof Ee.getSnapshotBeforeUpdate!="function"||De===p.memoizedProps&&mn===p.memoizedState||(m.flags|=1024),m.memoizedProps=A,m.memoizedState=hn),Ee.props=A,Ee.state=hn,Ee.context=ft,A=Ft):(typeof Ee.componentDidUpdate!="function"||De===p.memoizedProps&&mn===p.memoizedState||(m.flags|=4),typeof Ee.getSnapshotBeforeUpdate!="function"||De===p.memoizedProps&&mn===p.memoizedState||(m.flags|=1024),A=!1)}return Ug(p,m,b,A,W,O)}function Ug(p,m,b,A,O,W){Og(p,m);var Ee=(m.flags&128)!==0;if(!A&&!Ee)return O&&Vn(m,b,!1),X(p,m,W);A=m.stateNode,FS.current=m;var De=Ee&&typeof b.getDerivedStateFromError!="function"?null:A.render();return m.flags|=1,p!==null&&Ee?(m.child=lo(m,p.child,null,W),m.child=lo(m,null,De,W)):no(p,m,De,W),m.memoizedState=A.state,O&&Vn(m,b,!0),m.child}function Z1(p){var m=p.stateNode;m.pendingContext?fn(p,m.pendingContext,m.pendingContext!==m.context):m.context&&fn(p,m.context,!1),uo(p,m.containerInfo)}function K1(p,m,b,A,O){return ua(),Zu(O),m.flags|=256,no(p,m,b,A),m.child}var xp={dehydrated:null,treeContext:null,retryLane:0};function Uf(p){return{baseLanes:p,cachePool:null}}function zf(p,m,b){var A=m.pendingProps,O=Cr.current,W=!1,Ee=(m.flags&128)!==0,De;if((De=Ee)||(De=p!==null&&p.memoizedState===null?!1:(O&2)!==0),De?(W=!0,m.flags&=-129):(p===null||p.memoizedState!==null)&&(O|=1),Zt(Cr,O&1),p===null)return Hi(m),p=m.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?(m.mode&1?ar(p)?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):(O=A.children,p=A.fallback,W?(A=m.mode,W=m.child,O={mode:"hidden",children:O},!(A&1)&&W!==null?(W.childLanes=0,W.pendingProps=O):W=ry(O,A,0,null),p=jf(p,A,b,null),W.return=m,p.return=m,W.sibling=p,m.child=W,m.child.memoizedState=Uf(b),m.memoizedState=xp,p):zg(m,O));if(O=p.memoizedState,O!==null){if(De=O.dehydrated,De!==null){if(Ee)return m.flags&256?(m.flags&=-257,w(p,m,b,Error(s(422)))):m.memoizedState!==null?(m.child=p.child,m.flags|=128,null):(W=A.fallback,O=m.mode,A=ry({mode:"visible",children:A.children},O,0,null),W=jf(W,O,b,null),W.flags|=2,A.return=m,W.return=m,A.sibling=W,m.child=A,m.mode&1&&lo(m,p.child,null,b),m.child.memoizedState=Uf(b),m.memoizedState=xp,W);if(!(m.mode&1))m=w(p,m,b,null);else if(ar(De))m=w(p,m,b,Error(s(419)));else if(A=(b&p.childLanes)!==0,Po||A){if(A=xi,A!==null){switch(b&-b){case 4:W=2;break;case 16:W=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:W=32;break;case 536870912:W=268435456;break;default:W=0}A=W&(A.suspendedLanes|b)?0:W,A!==0&&A!==O.retryLane&&(O.retryLane=A,es(p,A,-1))}Mp(),m=w(p,m,b,Error(s(421)))}else Ir(De)?(m.flags|=128,m.child=p.child,m=OS.bind(null,p),dr(De,m),m=null):(b=O.treeContext,Ie&&(Eo=Bi(De),ui=m,Tr=!0,Ao=null,gl=!1,b!==null&&(cn[En++]=vr,cn[En++]=Ar,cn[En++]=_r,vr=b.id,Ar=b.overflow,_r=m)),m=zg(m,m.pendingProps.children),m.flags|=4096);return m}return W?(A=Hg(p,m,A.children,A.fallback,b),W=m.child,O=p.child.memoizedState,W.memoizedState=O===null?Uf(b):{baseLanes:O.baseLanes|b,cachePool:null},W.childLanes=p.childLanes&~b,m.memoizedState=xp,A):(b=J1(p,m,A.children,b),m.memoizedState=null,b)}return W?(A=Hg(p,m,A.children,A.fallback,b),W=m.child,O=p.child.memoizedState,W.memoizedState=O===null?Uf(b):{baseLanes:O.baseLanes|b,cachePool:null},W.childLanes=p.childLanes&~b,m.memoizedState=xp,A):(b=J1(p,m,A.children,b),m.memoizedState=null,b)}function zg(p,m){return m=ry({mode:"visible",children:m},p.mode,0,null),m.return=p,p.child=m}function J1(p,m,b,A){var O=p.child;return p=O.sibling,b=gh(O,{mode:"visible",children:b}),!(m.mode&1)&&(b.lanes=A),b.return=m,b.sibling=null,p!==null&&(A=m.deletions,A===null?(m.deletions=[p],m.flags|=16):A.push(p)),m.child=b}function Hg(p,m,b,A,O){var W=m.mode;p=p.child;var Ee=p.sibling,De={mode:"hidden",children:b};return!(W&1)&&m.child!==p?(b=m.child,b.childLanes=0,b.pendingProps=De,m.deletions=null):(b=gh(p,De),b.subtreeFlags=p.subtreeFlags&14680064),Ee!==null?A=gh(Ee,A):(A=jf(A,W,O,null),A.flags|=2),A.return=m,b.return=m,b.sibling=A,m.child=b,A}function w(p,m,b,A){return A!==null&&Zu(A),lo(m,p.child,null,b),p=zg(m,m.pendingProps.children),p.flags|=2,m.memoizedState=null,p}function M(p,m,b){p.lanes|=m;var A=p.alternate;A!==null&&(A.lanes|=m),kf(p.return,m,b)}function P(p,m,b,A,O){var W=p.memoizedState;W===null?p.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:A,tail:b,tailMode:O}:(W.isBackwards=m,W.rendering=null,W.renderingStartTime=0,W.last=A,W.tail=b,W.tailMode=O)}function U(p,m,b){var A=m.pendingProps,O=A.revealOrder,W=A.tail;if(no(p,m,A.children,b),A=Cr.current,A&2)A=A&1|2,m.flags|=128;else{if(p!==null&&p.flags&128)e:for(p=m.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&M(p,b,m);else if(p.tag===19)M(p,b,m);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===m)break e;for(;p.sibling===null;){if(p.return===null||p.return===m)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}A&=1}if(Zt(Cr,A),!(m.mode&1))m.memoizedState=null;else switch(O){case"forwards":for(b=m.child,O=null;b!==null;)p=b.alternate,p!==null&&Vs(p)===null&&(O=b),b=b.sibling;b=O,b===null?(O=m.child,m.child=null):(O=b.sibling,b.sibling=null),P(m,!1,O,b,W);break;case"backwards":for(b=null,O=m.child,m.child=null;O!==null;){if(p=O.alternate,p!==null&&Vs(p)===null){m.child=O;break}p=O.sibling,O.sibling=b,b=O,O=p}P(m,!0,b,null,W);break;case"together":P(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function X(p,m,b){if(p!==null&&(m.dependencies=p.dependencies),pa|=m.lanes,!(b&m.childLanes))return null;if(p!==null&&m.child!==p.child)throw Error(s(153));if(m.child!==null){for(p=m.child,b=gh(p,p.pendingProps),m.child=b,b.return=m;p.sibling!==null;)p=p.sibling,b=b.sibling=gh(p,p.pendingProps),b.return=m;b.sibling=null}return m.child}function ne(p,m,b){switch(m.tag){case 3:Z1(m),ua();break;case 5:Oa(m);break;case 1:ur(m.type)&&Pn(m);break;case 4:uo(m,m.stateNode.containerInfo);break;case 10:lp(m,m.type._context,m.memoizedProps.value);break;case 13:var A=m.memoizedState;if(A!==null)return A.dehydrated!==null?(Zt(Cr,Cr.current&1),m.flags|=128,null):b&m.child.childLanes?zf(p,m,b):(Zt(Cr,Cr.current&1),p=X(p,m,b),p!==null?p.sibling:null);Zt(Cr,Cr.current&1);break;case 19:if(A=(b&m.childLanes)!==0,p.flags&128){if(A)return U(p,m,b);m.flags|=128}var O=m.memoizedState;if(O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),Zt(Cr,Cr.current),A)break;return null;case 22:case 23:return m.lanes=0,X1(p,m,b)}return X(p,m,b)}function oe(p,m){switch(zo(m),m.tag){case 1:return ur(m.type)&&Kr(),p=m.flags,p&65536?(m.flags=p&-65537|128,m):null;case 3:return As(),an(xn),an(pn),Ju(),p=m.flags,p&65536&&!(p&128)?(m.flags=p&-65537|128,m):null;case 5:return ca(m),null;case 13:if(an(Cr),p=m.memoizedState,p!==null&&p.dehydrated!==null){if(m.alternate===null)throw Error(s(340));ua()}return p=m.flags,p&65536?(m.flags=p&-65537|128,m):null;case 19:return an(Cr),null;case 4:return As(),null;case 10:return au(m.type._context),null;case 22:case 23:return qg(),null;case 24:return null;default:return null}}var ue=!1,he=!1,xe=typeof WeakSet=="function"?WeakSet:Set,we=null;function We(p,m){var b=p.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(A){go(p,m,A)}else b.current=null}function je(p,m,b){try{b()}catch(A){go(p,m,A)}}var Be=!1;function _t(p,m){for(J(p.containerInfo),we=m;we!==null;)if(p=we,m=p.child,(p.subtreeFlags&1028)!==0&&m!==null)m.return=p,we=m;else for(;we!==null;){p=we;try{var b=p.alternate;if(p.flags&1024)switch(p.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var A=b.memoizedProps,O=b.memoizedState,W=p.stateNode,Ee=W.getSnapshotBeforeUpdate(p.elementType===p.type?A:Ui(p.type,A),O);W.__reactInternalSnapshotBeforeUpdate=Ee}break;case 3:ke&&At(p.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(De){go(p,p.return,De)}if(m=p.sibling,m!==null){m.return=p.return,we=m;break}we=p.return}return b=Be,Be=!1,b}function Qe(p,m,b){var A=m.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var O=A=A.next;do{if((O.tag&p)===p){var W=O.destroy;O.destroy=void 0,W!==void 0&&je(m,b,W)}O=O.next}while(O!==A)}}function Le(p,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var b=m=m.next;do{if((b.tag&p)===p){var A=b.create;b.destroy=A()}b=b.next}while(b!==m)}}function Fe(p){var m=p.ref;if(m!==null){var b=p.stateNode;switch(p.tag){case 5:p=ee(b);break;default:p=b}typeof m=="function"?m(p):m.current=p}}function yt(p,m,b){if(Us&&typeof Us.onCommitFiberUnmount=="function")try{Us.onCommitFiberUnmount(Zc,m)}catch{}switch(m.tag){case 0:case 11:case 14:case 15:if(p=m.updateQueue,p!==null&&(p=p.lastEffect,p!==null)){var A=p=p.next;do{var O=A,W=O.destroy;O=O.tag,W!==void 0&&(O&2||O&4)&&je(m,b,W),A=A.next}while(A!==p)}break;case 1:if(We(m,b),p=m.stateNode,typeof p.componentWillUnmount=="function")try{p.props=m.memoizedProps,p.state=m.memoizedState,p.componentWillUnmount()}catch(Ee){go(m,b,Ee)}break;case 5:We(m,b);break;case 4:ke?yr(p,m,b):fe&&fe&&(m=m.stateNode.containerInfo,b=Nt(m),Yn(m,b))}}function Mt(p,m,b){for(var A=m;;)if(yt(p,A,b),A.child===null||ke&&A.tag===4){if(A===m)break;for(;A.sibling===null;){if(A.return===null||A.return===m)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else A.child.return=A,A=A.child}function St(p){var m=p.alternate;m!==null&&(p.alternate=null,St(m)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(m=p.stateNode,m!==null&&gt(m)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function $t(p){return p.tag===5||p.tag===3||p.tag===4}function Bt(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||$t(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function dn(p){if(ke){e:{for(var m=p.return;m!==null;){if($t(m))break e;m=m.return}throw Error(s(160))}var b=m;switch(b.tag){case 5:m=b.stateNode,b.flags&32&&(Ke(m),b.flags&=-33),b=Bt(p),sr(p,b,m);break;case 3:case 4:m=b.stateNode.containerInfo,b=Bt(p),Ut(p,b,m);break;default:throw Error(s(161))}}}function Ut(p,m,b){var A=p.tag;if(A===5||A===6)p=p.stateNode,m?Dt(b,p,m):wt(b,p);else if(A!==4&&(p=p.child,p!==null))for(Ut(p,m,b),p=p.sibling;p!==null;)Ut(p,m,b),p=p.sibling}function sr(p,m,b){var A=p.tag;if(A===5||A===6)p=p.stateNode,m?Pt(b,p,m):pt(b,p);else if(A!==4&&(p=p.child,p!==null))for(sr(p,m,b),p=p.sibling;p!==null;)sr(p,m,b),p=p.sibling}function yr(p,m,b){for(var A=m,O=!1,W,Ee;;){if(!O){O=A.return;e:for(;;){if(O===null)throw Error(s(160));switch(W=O.stateNode,O.tag){case 5:Ee=!1;break e;case 3:W=W.containerInfo,Ee=!0;break e;case 4:W=W.containerInfo,Ee=!0;break e}O=O.return}O=!0}if(A.tag===5||A.tag===6)Mt(p,A,b),Ee?be(W,A.stateNode):Tt(W,A.stateNode);else if(A.tag===18)Ee?Xe(W,A.stateNode):qe(W,A.stateNode);else if(A.tag===4){if(A.child!==null){W=A.stateNode.containerInfo,Ee=!0,A.child.return=A,A=A.child;continue}}else if(yt(p,A,b),A.child!==null){A.child.return=A,A=A.child;continue}if(A===m)break;for(;A.sibling===null;){if(A.return===null||A.return===m)return;A=A.return,A.tag===4&&(O=!1)}A.sibling.return=A.return,A=A.sibling}}function Qn(p,m){if(ke){switch(m.tag){case 0:case 11:case 14:case 15:Qe(3,m,m.return),Le(3,m),Qe(5,m,m.return);return;case 1:return;case 5:var b=m.stateNode;if(b!=null){var A=m.memoizedProps;p=p!==null?p.memoizedProps:A;var O=m.type,W=m.updateQueue;m.updateQueue=null,W!==null&&Ht(b,W,O,p,A,m)}return;case 6:if(m.stateNode===null)throw Error(s(162));b=m.memoizedProps,ut(m.stateNode,p!==null?p.memoizedProps:b,b);return;case 3:Ie&&p!==null&&p.memoizedState.isDehydrated&&ge(m.stateNode.containerInfo);return;case 12:return;case 13:Wn(m);return;case 19:Wn(m);return;case 17:return}throw Error(s(163))}switch(m.tag){case 0:case 11:case 14:case 15:Qe(3,m,m.return),Le(3,m),Qe(5,m,m.return);return;case 12:return;case 13:Wn(m);return;case 19:Wn(m);return;case 3:Ie&&p!==null&&p.memoizedState.isDehydrated&&ge(m.stateNode.containerInfo);break;case 22:case 23:return}e:if(fe){switch(m.tag){case 1:case 5:case 6:break e;case 3:case 4:m=m.stateNode,Yn(m.containerInfo,m.pendingChildren);break e}throw Error(s(163))}}function Wn(p){var m=p.updateQueue;if(m!==null){p.updateQueue=null;var b=p.stateNode;b===null&&(b=p.stateNode=new xe),m.forEach(function(A){var O=Yg.bind(null,p,A);b.has(A)||(b.add(A),A.then(O,O))})}}function Fr(p,m){for(we=m;we!==null;){m=we;var b=m.deletions;if(b!==null)for(var A=0;A<b.length;A++){var O=b[A];try{var W=p;ke?yr(W,O,m):Mt(W,O,m);var Ee=O.alternate;Ee!==null&&(Ee.return=null),O.return=null}catch(un){go(O,m,un)}}if(b=m.child,m.subtreeFlags&12854&&b!==null)b.return=m,we=b;else for(;we!==null;){m=we;try{var De=m.flags;if(De&32&&ke&&Ke(m.stateNode),De&512){var ft=m.alternate;if(ft!==null){var Ft=ft.ref;Ft!==null&&(typeof Ft=="function"?Ft(null):Ft.current=null)}}if(De&8192)switch(m.tag){case 13:if(m.memoizedState!==null){var Qt=m.alternate;(Qt===null||Qt.memoizedState===null)&&(Gf=pi())}break;case 22:var On=m.memoizedState!==null,mn=m.alternate,Gr=mn!==null&&mn.memoizedState!==null;if(b=m,ke){e:if(A=b,O=On,W=null,ke)for(var hn=A;;){if(hn.tag===5){if(W===null){W=hn;var ns=hn.stateNode;O?ct(ns):Oe(hn.stateNode,hn.memoizedProps)}}else if(hn.tag===6){if(W===null){var Ya=hn.stateNode;O?Ae(Ya):Ve(Ya,hn.memoizedProps)}}else if((hn.tag!==22&&hn.tag!==23||hn.memoizedState===null||hn===A)&&hn.child!==null){hn.child.return=hn,hn=hn.child;continue}if(hn===A)break;for(;hn.sibling===null;){if(hn.return===null||hn.return===A)break e;W===hn&&(W=null),hn=hn.return}W===hn&&(W=null),hn.sibling.return=hn.return,hn=hn.sibling}}if(On&&!Gr&&b.mode&1){we=b;for(var Ze=b.child;Ze!==null;){for(b=we=Ze;we!==null;){A=we;var ze=A.child;switch(A.tag){case 0:case 11:case 14:case 15:Qe(4,A,A.return);break;case 1:We(A,A.return);var ot=A.stateNode;if(typeof ot.componentWillUnmount=="function"){var Yt=A.return;try{ot.props=A.memoizedProps,ot.state=A.memoizedState,ot.componentWillUnmount()}catch(un){go(A,Yt,un)}}break;case 5:We(A,A.return);break;case 22:if(A.memoizedState!==null){Vo(b);continue}}ze!==null?(ze.return=A,we=ze):Vo(b)}Ze=Ze.sibling}}}switch(De&4102){case 2:dn(m),m.flags&=-3;break;case 6:dn(m),m.flags&=-3,Qn(m.alternate,m);break;case 4096:m.flags&=-4097;break;case 4100:m.flags&=-4097,Qn(m.alternate,m);break;case 4:Qn(m.alternate,m)}}catch(un){go(m,m.return,un)}if(b=m.sibling,b!==null){b.return=m.return,we=b;break}we=m.return}}}function Pr(p,m,b){we=p,Ln(p)}function Ln(p,m,b){for(var A=(p.mode&1)!==0;we!==null;){var O=we,W=O.child;if(O.tag===22&&A){var Ee=O.memoizedState!==null||ue;if(!Ee){var De=O.alternate,ft=De!==null&&De.memoizedState!==null||he;De=ue;var Ft=he;if(ue=Ee,(he=ft)&&!Ft)for(we=O;we!==null;)Ee=we,ft=Ee.child,Ee.tag===22&&Ee.memoizedState!==null?gi(O):ft!==null?(ft.return=Ee,we=ft):gi(O);for(;W!==null;)we=W,Ln(W),W=W.sibling;we=O,ue=De,he=Ft}mi(p)}else O.subtreeFlags&8772&&W!==null?(W.return=O,we=W):mi(p)}}function mi(p){for(;we!==null;){var m=we;if(m.flags&8772){var b=m.alternate;try{if(m.flags&8772)switch(m.tag){case 0:case 11:case 15:he||Le(5,m);break;case 1:var A=m.stateNode;if(m.flags&4&&!he)if(b===null)A.componentDidMount();else{var O=m.elementType===m.type?b.memoizedProps:Ui(m.type,b.memoizedProps);A.componentDidUpdate(O,b.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var W=m.updateQueue;W!==null&&ml(m,W,A);break;case 3:var Ee=m.updateQueue;if(Ee!==null){if(b=null,m.child!==null)switch(m.child.tag){case 5:b=ee(m.child.stateNode);break;case 1:b=m.child.stateNode}ml(m,Ee,b)}break;case 5:var De=m.stateNode;b===null&&m.flags&4&&Pe(De,m.type,m.memoizedProps,m);break;case 6:break;case 4:break;case 12:break;case 13:if(Ie&&m.memoizedState===null){var ft=m.alternate;if(ft!==null){var Ft=ft.memoizedState;if(Ft!==null){var Qt=Ft.dehydrated;Qt!==null&&_e(Qt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(s(163))}he||m.flags&512&&Fe(m)}catch(On){go(m,m.return,On)}}if(m===p){we=null;break}if(b=m.sibling,b!==null){b.return=m.return,we=b;break}we=m.return}}function Vo(p){for(;we!==null;){var m=we;if(m===p){we=null;break}var b=m.sibling;if(b!==null){b.return=m.return,we=b;break}we=m.return}}function gi(p){for(;we!==null;){var m=we;try{switch(m.tag){case 0:case 11:case 15:var b=m.return;try{Le(4,m)}catch(ft){go(m,b,ft)}break;case 1:var A=m.stateNode;if(typeof A.componentDidMount=="function"){var O=m.return;try{A.componentDidMount()}catch(ft){go(m,O,ft)}}var W=m.return;try{Fe(m)}catch(ft){go(m,W,ft)}break;case 5:var Ee=m.return;try{Fe(m)}catch(ft){go(m,Ee,ft)}}}catch(ft){go(m,m.return,ft)}if(m===p){we=null;break}var De=m.sibling;if(De!==null){De.return=m.return,we=De;break}we=m.return}}var ho=0,hr=1,Ro=2,Lo=3,vi=4;if(typeof Symbol=="function"&&Symbol.for){var yi=Symbol.for;ho=yi("selector.component"),hr=yi("selector.has_pseudo_class"),Ro=yi("selector.role"),Lo=yi("selector.test_id"),vi=yi("selector.text")}function fo(p){var m=Ue(p);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(s(364));return m}if(p=vt(p),p===null)throw Error(s(362));return p.stateNode.current}function Qo(p,m){switch(m.$$typeof){case ho:if(p.type===m.value)return!0;break;case hr:e:{m=m.value,p=[p,0];for(var b=0;b<p.length;){var A=p[b++],O=p[b++],W=m[O];if(A.tag!==5||!te(A)){for(;W!=null&&Qo(A,W);)O++,W=m[O];if(O===m.length){m=!0;break e}else for(A=A.child;A!==null;)p.push(A,O),A=A.sibling}}m=!1}return m;case Ro:if(p.tag===5&&Ne(p.stateNode,m.value))return!0;break;case vi:if((p.tag===5||p.tag===6)&&(p=pe(p),p!==null&&0<=p.indexOf(m.value)))return!0;break;case Lo:if(p.tag===5&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function $s(p){switch(p.$$typeof){case ho:return"<"+(F(p.value)||"Unknown")+">";case hr:return":has("+($s(p)||"")+")";case Ro:return'[role="'+p.value+'"]';case vi:return'"'+p.value+'"';case Lo:return'[data-testname="'+p.value+'"]';default:throw Error(s(365))}}function Gi(p,m){var b=[];p=[p,0];for(var A=0;A<p.length;){var O=p[A++],W=p[A++],Ee=m[W];if(O.tag!==5||!te(O)){for(;Ee!=null&&Qo(O,Ee);)W++,Ee=m[W];if(W===m.length)b.push(O);else for(O=O.child;O!==null;)p.push(O,W),O=O.sibling}}return b}function da(p,m){if(!et)throw Error(s(363));p=fo(p),p=Gi(p,m),m=[],p=Array.from(p);for(var b=0;b<p.length;){var A=p[b++];if(A.tag===5)te(A)||m.push(A.stateNode);else for(A=A.child;A!==null;)p.push(A),A=A.sibling}return m}var nc=Math.ceil,yl=a.ReactCurrentDispatcher,Va=a.ReactCurrentOwner,In=a.ReactCurrentBatchConfig,Dn=0,xi=null,wi=null,Ri=0,po=0,xl=ht(0),br=0,Wa=null,pa=0,Hf=0,hh=0,fh=null,mo=null,Gf=0,dh=1/0;function ja(){dh=pi()+500}var wp=!1,Gg=null,qa=null,ma=!1,du=null,Sp=0,Vf=0,_p=null,rc=-1,Wf=0;function ko(){return Dn&6?pi():rc!==-1?rc:rc=pi()}function ga(p){return p.mode&1?Dn&2&&Ri!==0?Ri&-Ri:ap.transition!==null?(Wf===0&&(p=Hu,Hu<<=1,!(Hu&4194240)&&(Hu=64),Wf=p),Wf):(p=nr,p!==0?p:ae()):1}function es(p,m,b){if(50<Vf)throw Vf=0,_p=null,Error(s(185));var A=pu(p,m);return A===null?null:(Ra(A,m,b),(!(Dn&2)||A!==xi)&&(A===xi&&(!(Dn&2)&&(Hf|=m),br===4&&jo(A,Ri)),Wo(A,b),m===1&&Dn===0&&!(p.mode&1)&&(ja(),ka&&_s())),A)}function pu(p,m){p.lanes|=m;var b=p.alternate;for(b!==null&&(b.lanes|=m),b=p,p=p.return;p!==null;)p.childLanes|=m,b=p.alternate,b!==null&&(b.childLanes|=m),b=p,p=p.return;return b.tag===3?b.stateNode:null}function Wo(p,m){var b=p.callbackNode;Cg(p,m);var A=$c(p,p===xi?Ri:0);if(A===0)b!==null&&op(b),p.callbackNode=null,p.callbackPriority=0;else if(m=A&-A,p.callbackPriority!==m){if(b!=null&&op(b),m===1)p.tag===0?sp(Wg.bind(null,p)):ju(Wg.bind(null,p)),Ye?Ge(function(){Dn===0&&_s()}):Sn(Xc,_s),b=null;else{switch(Rf(A)){case 1:b=Xc;break;case 4:b=Yc;break;case 16:b=Gu;break;case 536870912:b=Rg;break;default:b=Gu}b=hT(b,Q1.bind(null,p))}p.callbackPriority=m,p.callbackNode=b}}function Q1(p,m){if(rc=-1,Wf=0,Dn&6)throw Error(s(327));var b=p.callbackNode;if(ts()&&p.callbackNode!==b)return null;var A=$c(p,p===xi?Ri:0);if(A===0)return null;if(A&30||A&p.expiredLanes||m)m=Ep(p,A);else{m=A;var O=Dn;Dn|=2;var W=ey();(xi!==p||Ri!==m)&&(ja(),mu(p,m));do try{DS();break}catch(De){ic(p,De)}while(1);dl(),yl.current=W,Dn=O,wi!==null?m=0:(xi=null,Ri=0,m=br)}if(m!==0){if(m===2&&(O=sa(p),O!==0&&(A=O,m=ph(p,O))),m===1)throw b=Wa,mu(p,0),jo(p,A),Wo(p,pi()),b;if(m===6)jo(p,A);else{if(O=p.current.alternate,!(A&30)&&!Vg(O)&&(m=Ep(p,A),m===2&&(W=sa(p),W!==0&&(A=W,m=ph(p,W))),m===1))throw b=Wa,mu(p,0),jo(p,A),Wo(p,pi()),b;switch(p.finishedWork=O,p.finishedLanes=A,m){case 0:case 1:throw Error(s(345));case 2:$a(p,mo);break;case 3:if(jo(p,A),(A&130023424)===A&&(m=Gf+500-pi(),10<m)){if($c(p,0)!==0)break;if(O=p.suspendedLanes,(O&A)!==A){ko(),p.pingedLanes|=p.suspendedLanes&O;break}p.timeoutHandle=me($a.bind(null,p,mo),m);break}$a(p,mo);break;case 4:if(jo(p,A),(A&4194240)===A)break;for(m=p.eventTimes,O=-1;0<A;){var Ee=31-Nr(A);W=1<<Ee,Ee=m[Ee],Ee>O&&(O=Ee),A&=~W}if(A=O,A=pi()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*nc(A/1960))-A,10<A){p.timeoutHandle=me($a.bind(null,p,mo),A);break}$a(p,mo);break;case 5:$a(p,mo);break;default:throw Error(s(329))}}}return Wo(p,pi()),p.callbackNode===b?Q1.bind(null,p):null}function ph(p,m){var b=fh;return p.current.memoizedState.isDehydrated&&(mu(p,m).flags|=256),p=Ep(p,m),p!==2&&(m=mo,mo=b,m!==null&&bp(m)),p}function bp(p){mo===null?mo=p:mo.push.apply(mo,p)}function Vg(p){for(var m=p;;){if(m.flags&16384){var b=m.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var A=0;A<b.length;A++){var O=b[A],W=O.getSnapshot;O=O.value;try{if(!ao(W(),O))return!1}catch{return!1}}}if(b=m.child,m.subtreeFlags&16384&&b!==null)b.return=m,m=b;else{if(m===p)break;for(;m.sibling===null;){if(m.return===null||m.return===p)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function jo(p,m){for(m&=~hh,m&=~Hf,p.suspendedLanes|=m,p.pingedLanes&=~m,p=p.expirationTimes;0<m;){var b=31-Nr(m),A=1<<b;p[b]=-1,m&=~A}}function Wg(p){if(Dn&6)throw Error(s(327));ts();var m=$c(p,0);if(!(m&1))return Wo(p,pi()),null;var b=Ep(p,m);if(p.tag!==0&&b===2){var A=sa(p);A!==0&&(m=A,b=ph(p,A))}if(b===1)throw b=Wa,mu(p,0),jo(p,m),Wo(p,pi()),b;if(b===6)throw Error(s(345));return p.finishedWork=p.current.alternate,p.finishedLanes=m,$a(p,mo),Wo(p,pi()),null}function jg(p){du!==null&&du.tag===0&&!(Dn&6)&&ts();var m=Dn;Dn|=1;var b=In.transition,A=nr;try{if(In.transition=null,nr=1,p)return p()}finally{nr=A,In.transition=b,Dn=m,!(Dn&6)&&_s()}}function qg(){po=xl.current,an(xl)}function mu(p,m){p.finishedWork=null,p.finishedLanes=0;var b=p.timeoutHandle;if(b!==Ce&&(p.timeoutHandle=Ce,Se(b)),wi!==null)for(b=wi.return;b!==null;){var A=b;switch(zo(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&Kr();break;case 3:As(),an(xn),an(pn),Ju();break;case 5:ca(A);break;case 4:As();break;case 13:an(Cr);break;case 19:an(Cr);break;case 10:au(A.type._context);break;case 22:case 23:qg()}b=b.return}if(xi=p,wi=p=gh(p.current,null),Ri=po=m,br=0,Wa=null,hh=Hf=pa=0,mo=fh=null,bs!==null){for(m=0;m<bs.length;m++)if(b=bs[m],A=b.interleaved,A!==null){b.interleaved=null;var O=A.next,W=b.pending;if(W!==null){var Ee=W.next;W.next=O,A.next=Ee}b.pending=A}bs=null}return p}function ic(p,m){do{var b=wi;try{if(dl(),to.current=lh,Ba){for(var A=Hr.memoizedState;A!==null;){var O=A.queue;O!==null&&(O.pending=null),A=A.next}Ba=!1}if(ha=0,$r=Ci=Hr=null,Ws=!1,fa=0,Va.current=null,b===null||b.return===null){br=1,Wa=m,wi=null;break}e:{var W=p,Ee=b.return,De=b,ft=m;if(m=Ri,De.flags|=32768,ft!==null&&typeof ft=="object"&&typeof ft.then=="function"){var Ft=ft,Qt=De,On=Qt.tag;if(!(Qt.mode&1)&&(On===0||On===11||On===15)){var mn=Qt.alternate;mn?(Qt.updateQueue=mn.updateQueue,Qt.memoizedState=mn.memoizedState,Qt.lanes=mn.lanes):(Qt.updateQueue=null,Qt.memoizedState=null)}var Gr=js(Ee);if(Gr!==null){Gr.flags&=-257,Ha(Gr,Ee,De,W,m),Gr.mode&1&&vl(W,Ft,m),m=Gr,ft=Ft;var hn=m.updateQueue;if(hn===null){var ns=new Set;ns.add(ft),m.updateQueue=ns}else hn.add(ft);break e}else{if(!(m&1)){vl(W,Ft,m),Mp();break e}ft=Error(s(426))}}else if(Tr&&De.mode&1){var Ya=js(Ee);if(Ya!==null){!(Ya.flags&65536)&&(Ya.flags|=256),Ha(Ya,Ee,De,W,m),Zu(ft);break e}}W=ft,br!==4&&(br=2),fh===null?fh=[W]:fh.push(W),ft=mp(ft,De),De=Ee;do{switch(De.tag){case 3:De.flags|=65536,m&=-m,De.lanes|=m;var Ze=j1(De,ft,m);lu(De,Ze);break e;case 1:W=ft;var ze=De.type,ot=De.stateNode;if(!(De.flags&128)&&(typeof ze.getDerivedStateFromError=="function"||ot!==null&&typeof ot.componentDidCatch=="function"&&(qa===null||!qa.has(ot)))){De.flags|=65536,m&=-m,De.lanes|=m;var Yt=q1(De,W,m);lu(De,Yt);break e}}De=De.return}while(De!==null)}Ap(b)}catch(un){m=un,wi===b&&b!==null&&(wi=b=b.return);continue}break}while(1)}function ey(){var p=yl.current;return yl.current=lh,p===null?lh:p}function Mp(){(br===0||br===3||br===2)&&(br=4),xi===null||!(pa&268435455)&&!(Hf&268435455)||jo(xi,Ri)}function Ep(p,m){var b=Dn;Dn|=2;var A=ey();xi===p&&Ri===m||mu(p,m);do try{ty();break}catch(O){ic(p,O)}while(1);if(dl(),Dn=b,yl.current=A,wi!==null)throw Error(s(261));return xi=null,Ri=0,br}function ty(){for(;wi!==null;)mh(wi)}function DS(){for(;wi!==null&&!Pg();)mh(wi)}function mh(p){var m=Tp(p.alternate,p,po);p.memoizedProps=p.pendingProps,m===null?Ap(p):wi=m,Va.current=null}function Ap(p){var m=p;do{var b=m.alternate;if(p=m.return,m.flags&32768){if(b=oe(b,m),b!==null){b.flags&=32767,wi=b;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{br=6,wi=null;return}}else if(b=$1(b,m,po),b!==null){wi=b;return}if(m=m.sibling,m!==null){wi=m;return}wi=m=p}while(m!==null);br===0&&(br=5)}function $a(p,m){var b=nr,A=In.transition;try{In.transition=null,nr=1,wl(p,m,b)}finally{In.transition=A,nr=b}return null}function wl(p,m,b){do ts();while(du!==null);if(Dn&6)throw Error(s(327));var A=p.finishedWork,O=p.finishedLanes;if(A===null)return null;if(p.finishedWork=null,p.finishedLanes=0,A===p.current)throw Error(s(177));p.callbackNode=null,p.callbackPriority=0;var W=A.lanes|A.childLanes;if(ip(p,W),p===xi&&(wi=xi=null,Ri=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||ma||(ma=!0,hT(Gu,function(){return ts(),null})),W=(A.flags&15990)!==0,A.subtreeFlags&15990||W){W=In.transition,In.transition=null;var Ee=nr;nr=1;var De=Dn;Dn|=4,Va.current=null,_t(p,A),Fr(p,A),j(p.containerInfo),p.current=A,Pr(A),La(),Dn=De,nr=Ee,In.transition=W}else p.current=A;if(ma&&(ma=!1,du=p,Sp=O),W=p.pendingLanes,W===0&&(qa=null),Lf(A.stateNode),Wo(p,pi()),m!==null)for(b=p.onRecoverableError,A=0;A<m.length;A++)b(m[A]);if(wp)throw wp=!1,p=Gg,Gg=null,p;return Sp&1&&p.tag!==0&&ts(),W=p.pendingLanes,W&1?p===_p?Vf++:(Vf=0,_p=p):Vf=0,_s(),null}function ts(){if(du!==null){var p=Rf(Sp),m=In.transition,b=nr;try{if(In.transition=null,nr=16>p?16:p,du===null)var A=!1;else{if(p=du,du=null,Sp=0,Dn&6)throw Error(s(331));var O=Dn;for(Dn|=4,we=p.current;we!==null;){var W=we,Ee=W.child;if(we.flags&16){var De=W.deletions;if(De!==null){for(var ft=0;ft<De.length;ft++){var Ft=De[ft];for(we=Ft;we!==null;){var Qt=we;switch(Qt.tag){case 0:case 11:case 15:Qe(8,Qt,W)}var On=Qt.child;if(On!==null)On.return=Qt,we=On;else for(;we!==null;){Qt=we;var mn=Qt.sibling,Gr=Qt.return;if(St(Qt),Qt===Ft){we=null;break}if(mn!==null){mn.return=Gr,we=mn;break}we=Gr}}}var hn=W.alternate;if(hn!==null){var ns=hn.child;if(ns!==null){hn.child=null;do{var Ya=ns.sibling;ns.sibling=null,ns=Ya}while(ns!==null)}}we=W}}if(W.subtreeFlags&2064&&Ee!==null)Ee.return=W,we=Ee;else e:for(;we!==null;){if(W=we,W.flags&2048)switch(W.tag){case 0:case 11:case 15:Qe(9,W,W.return)}var Ze=W.sibling;if(Ze!==null){Ze.return=W.return,we=Ze;break e}we=W.return}}var ze=p.current;for(we=ze;we!==null;){Ee=we;var ot=Ee.child;if(Ee.subtreeFlags&2064&&ot!==null)ot.return=Ee,we=ot;else e:for(Ee=ze;we!==null;){if(De=we,De.flags&2048)try{switch(De.tag){case 0:case 11:case 15:Le(9,De)}}catch(un){go(De,De.return,un)}if(De===Ee){we=null;break e}var Yt=De.sibling;if(Yt!==null){Yt.return=De.return,we=Yt;break e}we=De.return}}if(Dn=O,_s(),Us&&typeof Us.onPostCommitFiberRoot=="function")try{Us.onPostCommitFiberRoot(Zc,p)}catch{}A=!0}return A}finally{nr=b,In.transition=m}}return!1}function Sl(p,m,b){m=mp(b,m),m=j1(p,m,1),Fa(p,m),m=ko(),p=pu(p,1),p!==null&&(Ra(p,1,m),Wo(p,m))}function go(p,m,b){if(p.tag===3)Sl(p,p,b);else for(;m!==null;){if(m.tag===3){Sl(m,p,b);break}else if(m.tag===1){var A=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(qa===null||!qa.has(A))){p=mp(b,p),p=q1(m,p,1),Fa(m,p),p=ko(),m=pu(m,1),m!==null&&(Ra(m,1,p),Wo(m,p));break}}m=m.return}}function $g(p,m,b){var A=p.pingCache;A!==null&&A.delete(m),m=ko(),p.pingedLanes|=p.suspendedLanes&b,xi===p&&(Ri&b)===b&&(br===4||br===3&&(Ri&130023424)===Ri&&500>pi()-Gf?mu(p,0):hh|=b),Wo(p,m)}function Xg(p,m){m===0&&(p.mode&1?(m=qc,qc<<=1,!(qc&130023424)&&(qc=4194304)):m=1);var b=ko();p=pu(p,m),p!==null&&(Ra(p,m,b),Wo(p,b))}function OS(p){var m=p.memoizedState,b=0;m!==null&&(b=m.retryLane),Xg(p,b)}function Yg(p,m){var b=0;switch(p.tag){case 13:var A=p.stateNode,O=p.memoizedState;O!==null&&(b=O.retryLane);break;case 19:A=p.stateNode;break;default:throw Error(s(314))}A!==null&&A.delete(m),Xg(p,b)}var Tp;Tp=function(p,m,b){if(p!==null)if(p.memoizedProps!==m.pendingProps||xn.current)Po=!0;else{if(!(p.lanes&b)&&!(m.flags&128))return Po=!1,ne(p,m,b);Po=!!(p.flags&131072)}else Po=!1,Tr&&m.flags&1048576&&zi(m,bn,m.index);switch(m.lanes=0,m.tag){case 2:var A=m.type;p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),p=m.pendingProps;var O=Kn(m,pn.current);Na(m,b),O=Qu(null,m,A,p,O,b);var W=Jo();return m.flags|=1,typeof O=="object"&&O!==null&&typeof O.render=="function"&&O.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,ur(A)?(W=!0,Pn(m)):W=!1,m.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,Xu(m),O.updater=Y,m.stateNode=O,O._reactInternals=m,at(m,A,p,b),m=Ug(null,m,A,!0,W,b)):(m.tag=0,Tr&&W&&Es(m),no(null,m,O,b),m=m.child),m;case 16:A=m.elementType;e:{switch(p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),p=m.pendingProps,O=A._init,A=O(A._payload),m.type=A,O=m.tag=bB(A),p=Ui(A,p),O){case 0:m=Bg(null,m,A,p,b);break e;case 1:m=Y1(null,m,A,p,b);break e;case 11:m=ch(null,m,A,p,b);break e;case 14:m=yp(null,m,A,Ui(A.type,p),b);break e}throw Error(s(306,A,""))}return m;case 0:return A=m.type,O=m.pendingProps,O=m.elementType===A?O:Ui(A,O),Bg(p,m,A,O,b);case 1:return A=m.type,O=m.pendingProps,O=m.elementType===A?O:Ui(A,O),Y1(p,m,A,O,b);case 3:e:{if(Z1(m),p===null)throw Error(s(387));A=m.pendingProps,W=m.memoizedState,O=W.element,Jc(p,m),uu(m,A,null,b);var Ee=m.memoizedState;if(A=Ee.element,Ie&&W.isDehydrated)if(W={element:A,isDehydrated:!1,cache:Ee.cache,transitions:Ee.transitions},m.updateQueue.baseState=W,m.memoizedState=W,m.flags&256){O=Error(s(423)),m=K1(p,m,A,b,O);break e}else if(A!==O){O=Error(s(424)),m=K1(p,m,A,b,O);break e}else for(Ie&&(Eo=Ki(m.stateNode.containerInfo),ui=m,Tr=!0,Ao=null,gl=!1),b=Ku(m,null,A,b),m.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(ua(),A===O){m=X(p,m,b);break e}no(p,m,A,b)}m=m.child}return m;case 5:return Oa(m),p===null&&Hi(m),A=m.type,O=m.pendingProps,W=p!==null?p.memoizedProps:null,Ee=O.children,Q(A,O)?Ee=null:W!==null&&Q(A,W)&&(m.flags|=32),Og(p,m),no(p,m,Ee,b),m.child;case 6:return p===null&&Hi(m),null;case 13:return zf(p,m,b);case 4:return uo(m,m.stateNode.containerInfo),A=m.pendingProps,p===null?m.child=lo(m,null,A,b):no(p,m,A,b),m.child;case 11:return A=m.type,O=m.pendingProps,O=m.elementType===A?O:Ui(A,O),ch(p,m,A,O,b);case 7:return no(p,m,m.pendingProps,b),m.child;case 8:return no(p,m,m.pendingProps.children,b),m.child;case 12:return no(p,m,m.pendingProps.children,b),m.child;case 10:e:{if(A=m.type._context,O=m.pendingProps,W=m.memoizedProps,Ee=O.value,lp(m,A,Ee),W!==null)if(ao(W.value,Ee)){if(W.children===O.children&&!xn.current){m=X(p,m,b);break e}}else for(W=m.child,W!==null&&(W.return=m);W!==null;){var De=W.dependencies;if(De!==null){Ee=W.child;for(var ft=De.firstContext;ft!==null;){if(ft.context===A){if(W.tag===1){ft=zs(-1,b&-b),ft.tag=2;var Ft=W.updateQueue;if(Ft!==null){Ft=Ft.shared;var Qt=Ft.pending;Qt===null?ft.next=ft:(ft.next=Qt.next,Qt.next=ft),Ft.pending=ft}}W.lanes|=b,ft=W.alternate,ft!==null&&(ft.lanes|=b),kf(W.return,b,m),De.lanes|=b;break}ft=ft.next}}else if(W.tag===10)Ee=W.type===m.type?null:W.child;else if(W.tag===18){if(Ee=W.return,Ee===null)throw Error(s(341));Ee.lanes|=b,De=Ee.alternate,De!==null&&(De.lanes|=b),kf(Ee,b,m),Ee=W.sibling}else Ee=W.child;if(Ee!==null)Ee.return=W;else for(Ee=W;Ee!==null;){if(Ee===m){Ee=null;break}if(W=Ee.sibling,W!==null){W.return=Ee.return,Ee=W;break}Ee=Ee.return}W=Ee}no(p,m,O.children,b),m=m.child}return m;case 9:return O=m.type,A=m.pendingProps.children,Na(m,b),O=Mo(O),A=A(O),m.flags|=1,no(p,m,A,b),m.child;case 14:return A=m.type,O=Ui(A,m.pendingProps),O=Ui(A.type,O),yp(p,m,A,O,b);case 15:return Dg(p,m,m.type,m.pendingProps,b);case 17:return A=m.type,O=m.pendingProps,O=m.elementType===A?O:Ui(A,O),p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),m.tag=1,ur(A)?(p=!0,Pn(m)):p=!1,Na(m,b),Re(m,A,O),at(m,A,O,b),Ug(null,m,A,!0,p,b);case 19:return U(p,m,b);case 22:return X1(p,m,b)}throw Error(s(156,m.tag))};function hT(p,m){return Sn(p,m)}function _B(p,m,b,A){this.tag=p,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xa(p,m,b,A){return new _B(p,m,b,A)}function BS(p){return p=p.prototype,!(!p||!p.isReactComponent)}function bB(p){if(typeof p=="function")return BS(p)?1:0;if(p!=null){if(p=p.$$typeof,p===y)return 11;if(p===S)return 14}return 2}function gh(p,m){var b=p.alternate;return b===null?(b=Xa(p.tag,m,p.key,p.mode),b.elementType=p.elementType,b.type=p.type,b.stateNode=p.stateNode,b.alternate=p,p.alternate=b):(b.pendingProps=m,b.type=p.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=p.flags&14680064,b.childLanes=p.childLanes,b.lanes=p.lanes,b.child=p.child,b.memoizedProps=p.memoizedProps,b.memoizedState=p.memoizedState,b.updateQueue=p.updateQueue,m=p.dependencies,b.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},b.sibling=p.sibling,b.index=p.index,b.ref=p.ref,b}function ny(p,m,b,A,O,W){var Ee=2;if(A=p,typeof p=="function")BS(p)&&(Ee=1);else if(typeof p=="string")Ee=5;else e:switch(p){case c:return jf(b.children,O,W,m);case h:Ee=8,O|=8;break;case f:return p=Xa(12,b,m,O|2),p.elementType=f,p.lanes=W,p;case x:return p=Xa(13,b,m,O),p.elementType=x,p.lanes=W,p;case g:return p=Xa(19,b,m,O),p.elementType=g,p.lanes=W,p;case E:return ry(b,O,W,m);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case d:Ee=10;break e;case v:Ee=9;break e;case y:Ee=11;break e;case S:Ee=14;break e;case _:Ee=16,A=null;break e}throw Error(s(130,p==null?p:typeof p,""))}return m=Xa(Ee,b,m,O),m.elementType=p,m.type=A,m.lanes=W,m}function jf(p,m,b,A){return p=Xa(7,p,A,m),p.lanes=b,p}function ry(p,m,b,A){return p=Xa(22,p,A,m),p.elementType=E,p.lanes=b,p.stateNode={},p}function US(p,m,b){return p=Xa(6,p,null,m),p.lanes=b,p}function zS(p,m,b){return m=Xa(4,p.children!==null?p.children:[],p.key,m),m.lanes=b,m.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},m}function MB(p,m,b,A,O){this.tag=m,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ce,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=su(0),this.expirationTimes=su(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=su(0),this.identifierPrefix=A,this.onRecoverableError=O,Ie&&(this.mutableSourceEagerHydrationData=null)}function fT(p,m,b,A,O,W,Ee,De,ft){return p=new MB(p,m,b,De,ft),m===1?(m=1,W===!0&&(m|=8)):m=0,W=Xa(3,null,null,m),p.current=W,W.stateNode=p,W.memoizedState={element:A,isDehydrated:b,cache:null,transitions:null},Xu(W),p}function dT(p){if(!p)return Mn;p=p._reactInternals;e:{if(k(p)!==p||p.tag!==1)throw Error(s(170));var m=p;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(ur(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(s(171))}if(p.tag===1){var b=p.type;if(ur(b))return Er(p,b,m)}return m}function pT(p){var m=p._reactInternals;if(m===void 0)throw typeof p.render=="function"?Error(s(188)):(p=Object.keys(p).join(","),Error(s(268,p)));return p=z(m),p===null?null:p.stateNode}function mT(p,m){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var b=p.retryLane;p.retryLane=b!==0&&b<m?b:m}}function HS(p,m){mT(p,m),(p=p.alternate)&&mT(p,m)}function EB(p){return p=z(p),p===null?null:p.stateNode}function AB(){return null}return t.attemptContinuousHydration=function(p){if(p.tag===13){var m=ko();es(p,134217728,m),HS(p,134217728)}},t.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var m=ko(),b=ga(p);es(p,b,m),HS(p,b)}},t.attemptSynchronousHydration=function(p){switch(p.tag){case 3:var m=p.stateNode;if(m.current.memoizedState.isDehydrated){var b=fl(m.pendingLanes);b!==0&&(Qi(m,b|1),Wo(m,pi()),!(Dn&6)&&(ja(),_s()))}break;case 13:var A=ko();jg(function(){return es(p,1,A)}),HS(p,1)}},t.batchedUpdates=function(p,m){var b=Dn;Dn|=1;try{return p(m)}finally{Dn=b,Dn===0&&(ja(),ka&&_s())}},t.createComponentSelector=function(p){return{$$typeof:ho,value:p}},t.createContainer=function(p,m,b,A,O,W,Ee){return fT(p,m,!1,null,b,A,O,W,Ee)},t.createHasPseudoClassSelector=function(p){return{$$typeof:hr,value:p}},t.createHydrationContainer=function(p,m,b,A,O,W,Ee,De,ft){return p=fT(b,A,!0,p,O,W,Ee,De,ft),p.context=dT(null),b=p.current,A=ko(),O=ga(b),W=zs(A,O),W.callback=m??null,Fa(b,W),p.current.lanes=O,Ra(p,O,A),Wo(p,A),p},t.createPortal=function(p,m,b){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:A==null?null:""+A,children:p,containerInfo:m,implementation:b}},t.createRoleSelector=function(p){return{$$typeof:Ro,value:p}},t.createTestNameSelector=function(p){return{$$typeof:Lo,value:p}},t.createTextSelector=function(p){return{$$typeof:vi,value:p}},t.deferredUpdates=function(p){var m=nr,b=In.transition;try{return In.transition=null,nr=16,p()}finally{nr=m,In.transition=b}},t.discreteUpdates=function(p,m,b,A,O){var W=nr,Ee=In.transition;try{return In.transition=null,nr=1,p(m,b,A,O)}finally{nr=W,In.transition=Ee,Dn===0&&ja()}},t.findAllNodes=da,t.findBoundingRects=function(p,m){if(!et)throw Error(s(363));m=da(p,m),p=[];for(var b=0;b<m.length;b++)p.push(bt(m[b]));for(m=p.length-1;0<m;m--){b=p[m];for(var A=b.x,O=A+b.width,W=b.y,Ee=W+b.height,De=m-1;0<=De;De--)if(m!==De){var ft=p[De],Ft=ft.x,Qt=Ft+ft.width,On=ft.y,mn=On+ft.height;if(A>=Ft&&W>=On&&O<=Qt&&Ee<=mn){p.splice(m,1);break}else if(A!==Ft||b.width!==ft.width||mn<W||On>Ee){if(!(W!==On||b.height!==ft.height||Qt<A||Ft>O)){Ft>A&&(ft.width+=Ft-A,ft.x=A),Qt<O&&(ft.width=O-Ft),p.splice(m,1);break}}else{On>W&&(ft.height+=On-W,ft.y=W),mn<Ee&&(ft.height=Ee-On),p.splice(m,1);break}}}return p},t.findHostInstance=pT,t.findHostInstanceWithNoPortals=function(p){return p=N(p),p=p!==null?G(p):null,p===null?null:p.stateNode},t.findHostInstanceWithWarning=function(p){return pT(p)},t.flushControlled=function(p){var m=Dn;Dn|=1;var b=In.transition,A=nr;try{In.transition=null,nr=1,p()}finally{nr=A,In.transition=b,Dn=m,Dn===0&&(ja(),_s())}},t.flushPassiveEffects=ts,t.flushSync=jg,t.focusWithin=function(p,m){if(!et)throw Error(s(363));for(p=fo(p),m=Gi(p,m),m=Array.from(m),p=0;p<m.length;){var b=m[p++];if(!te(b)){if(b.tag===5&&st(b.stateNode))return!0;for(b=b.child;b!==null;)m.push(b),b=b.sibling}}return!1},t.getCurrentUpdatePriority=function(){return nr},t.getFindAllNodesFailureDescription=function(p,m){if(!et)throw Error(s(363));var b=0,A=[];p=[fo(p),0];for(var O=0;O<p.length;){var W=p[O++],Ee=p[O++],De=m[Ee];if((W.tag!==5||!te(W))&&(Qo(W,De)&&(A.push($s(De)),Ee++,Ee>b&&(b=Ee)),Ee<m.length))for(W=W.child;W!==null;)p.push(W,Ee),W=W.sibling}if(b<m.length){for(p=[];b<m.length;b++)p.push($s(m[b]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},t.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return ee(p.child.stateNode);default:return p.child.stateNode}},t.injectIntoDevTools=function(p){if(p={bundleType:p.bundleType,version:p.version,rendererPackageName:p.rendererPackageName,rendererConfig:p.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:EB,findFiberByHostInstance:p.findFiberByHostInstance||AB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)p=!0;else{try{Zc=m.inject(p),Us=m}catch{}p=!!m.checkDCE}}return p},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(p,m,b,A){if(!et)throw Error(s(363));p=da(p,m);var O=rt(p,b,A).disconnect;return{disconnect:function(){O()}}},t.registerMutableSourceForHydration=function(p,m){var b=m._getVersion;b=b(m._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[m,b]:p.mutableSourceEagerHydrationData.push(m,b)},t.runWithPriority=function(p,m){var b=nr;try{return nr=p,m()}finally{nr=b}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(p,m,b,A){var O=m.current,W=ko(),Ee=ga(O);return b=dT(b),m.context===null?m.context=b:m.pendingContext=b,m=zs(W,Ee),m.payload={element:p},A=A===void 0?null:A,A!==null&&(m.callback=A),Fa(O,m),p=es(O,Ee,W),p!==null&&pl(p,O,Ee),Ee},t};(function(n){n.exports=H$})(U$);const G$=gw(NM),V$=n=>typeof n=="object"&&typeof n.then=="function",_d=[];function h6(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function f6(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const o of _d)if(h6(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return r.lifespan&&r.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,r.lifespan)),o.response;if(!t)throw o.promise}const i={keys:e,equal:r.equal,remove:()=>{const o=_d.indexOf(i);o!==-1&&_d.splice(o,1)},promise:(V$(n)?n:n(...e)).then(o=>{i.response=o,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(o=>i.error=o)};if(_d.push(i),!t)throw i.promise}const W$=(n,e,t)=>f6(n,e,!1,t),j$=(n,e,t)=>void f6(n,e,!0,t),q$=n=>{if(n===void 0||n.length===0)_d.splice(0,_d.length);else{const e=_d.find(t=>h6(n,t.keys,t.equal));e&&e.remove()}},xA={},d6=n=>void Object.assign(xA,n);function $$(n,e){function t(c,{args:h=[],attach:f,...d},v){let y=`${c[0].toUpperCase()}${c.slice(1)}`,x;if(c==="primitive"){if(d.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=d.object;x=lm(g,{type:c,root:v,attach:f,primitive:!0})}else{const g=xA[y];if(!g)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");x=lm(new g(...h),{type:c,root:v,attach:f,memoizedProps:{args:h}})}return x.__r3f.attach===void 0&&(x instanceof Rn?x.__r3f.attach="geometry":x instanceof Ko&&(x.__r3f.attach="material")),y!=="inject"&&Q_(x,d),x}function r(c,h){let f=!1;if(h){var d,v;(d=h.__r3f)!=null&&d.attach?J_(c,h,h.__r3f.attach):h.isObject3D&&c.isObject3D&&(c.add(h),f=!0),f||(v=c.__r3f)==null||v.objects.push(h),h.__r3f||lm(h,{}),h.__r3f.parent=c,DM(h),um(h)}}function i(c,h,f){let d=!1;if(h){var v,y;if((v=h.__r3f)!=null&&v.attach)J_(c,h,h.__r3f.attach);else if(h.isObject3D&&c.isObject3D){h.parent=c,h.dispatchEvent({type:"added"});const x=c.children.filter(S=>S!==h),g=x.indexOf(f);c.children=[...x.slice(0,g),h,...x.slice(g)],d=!0}d||(y=c.__r3f)==null||y.objects.push(h),h.__r3f||lm(h,{}),h.__r3f.parent=c,DM(h),um(h)}}function o(c,h,f=!1){c&&[...c].forEach(d=>s(h,d,f))}function s(c,h,f){if(h){var d,v,y;if(h.__r3f&&(h.__r3f.parent=null),(d=c.__r3f)!=null&&d.objects&&(c.__r3f.objects=c.__r3f.objects.filter(E=>E!==h)),(v=h.__r3f)!=null&&v.attach)cR(c,h,h.__r3f.attach);else if(h.isObject3D&&c.isObject3D){var x;c.remove(h),(x=h.__r3f)!=null&&x.root&&eX(h.__r3f.root,h)}const S=(y=h.__r3f)==null?void 0:y.primitive,_=f===void 0?h.dispose!==null&&!S:f;if(!S){var g;o((g=h.__r3f)==null?void 0:g.objects,h,_),o(h.children,h,_)}delete h.__r3f,_&&h.dispose&&h.type!=="Scene"&&qv.unstable_scheduleCallback(qv.unstable_IdlePriority,()=>{try{h.dispose()}catch{}}),um(c)}}function a(c,h,f,d){var v;const y=(v=c.__r3f)==null?void 0:v.parent;if(!y)return;const x=t(h,f,c.__r3f.root);if(c.children){for(const g of c.children)g.__r3f&&r(x,g);c.children=c.children.filter(g=>!g.__r3f)}c.__r3f.objects.forEach(g=>r(x,g)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||s(y,c),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),r(y,x),x.raycast&&x.__r3f.eventCount&&x.__r3f.root.getState().internal.interaction.push(x),[d,d.alternate].forEach(g=>{g!==null&&(g.stateNode=x,g.ref&&(typeof g.ref=="function"?g.ref(x):g.ref.current=x))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:G$({createInstance:t,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,h)=>{if(!h)return;const f=c.getState().scene;f.__r3f&&(f.__r3f.root=c,r(f,h))},removeChildFromContainer:(c,h)=>{h&&s(c.getState().scene,h)},insertInContainerBefore:(c,h,f)=>{if(!h||!f)return;const d=c.getState().scene;d.__r3f&&i(d,h,f)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var h;const f=(h=c==null?void 0:c.__r3f)!=null?h:{};return Boolean(f.handlers)},prepareUpdate(c,h,f,d){var v;if(((v=c==null?void 0:c.__r3f)!=null?v:{}).primitive&&d.object&&d.object!==c)return[!0];{const{args:x=[],children:g,...S}=d,{args:_=[],children:E,...C}=f;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((F,R)=>F!==_[R]))return[!0];const I=w6(c,S,C,!0);return I.changes.length?[!1,I]:null}},commitUpdate(c,[h,f],d,v,y,x){h?a(c,d,y,x):Q_(c,f)},commitMount(c,h,f,d){var v;const y=(v=c.__r3f)!=null?v:{};c.raycast&&y.handlers&&y.eventCount&&c.__r3f.root.getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>lm(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var h;const{attach:f,parent:d}=(h=c.__r3f)!=null?h:{};f&&d&&cR(d,c,f),c.isObject3D&&(c.visible=!1),um(c)},unhideInstance(c,h){var f;const{attach:d,parent:v}=(f=c.__r3f)!=null?f:{};d&&v&&J_(v,c,d),(c.isObject3D&&h.visible==null||h.visible)&&(c.visible=!0),um(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():zh.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&ni.fun(performance.now)?performance.now:ni.fun(Date.now)?Date.now:()=>0,scheduleTimeout:ni.fun(setTimeout)?setTimeout:void 0,cancelTimeout:ni.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Q_}}var sR,aR;const K_=n=>"colorSpace"in n||"outputColorSpace"in n,p6=()=>{var n;return(n=xA.ColorManagement)!=null?n:null},m6=n=>n&&n.isOrthographicCamera,X$=n=>n&&n.hasOwnProperty("current"),b1=typeof window<"u"&&((sR=window.document)!=null&&sR.createElement||((aR=window.navigator)==null?void 0:aR.product)==="ReactNative")?de.useLayoutEffect:de.useEffect;function g6(n){const e=de.useRef(n);return b1(()=>void(e.current=n),[n]),e}function Y$({set:n}){return b1(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class v6 extends de.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}v6.getDerivedStateFromError=()=>({error:!0});const y6="__default",lR=new Map,Z$=n=>n&&!!n.memoized&&!!n.changes;function x6(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const m0=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},ni={obj:n=>n===Object(n)&&!ni.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(ni.str(n)||ni.num(n))return n===e;const o=ni.obj(n);if(o&&r==="reference")return n===e;const s=ni.arr(n);if(s&&t==="reference")return n===e;if((s||o)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(o&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!ni.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(ni.und(a)){if(s&&n.length===0&&e.length===0||o&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function K$(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function J$(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function lm(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function FM(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((o,s)=>o[s],n),{target:t,key:i}}else return{target:t,key:e}}const uR=/-\d+$/;function J_(n,e,t){if(ni.str(t)){if(uR.test(t)){const o=t.replace(uR,""),{target:s,key:a}=FM(n,o);Array.isArray(s[a])||(s[a]=[])}const{target:r,key:i}=FM(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function cR(n,e,t){var r,i;if(ni.str(t)){const{target:o,key:s}=FM(n,t),a=e.__r3f.previousAttach;a===void 0?delete o[s]:o[s]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function w6(n,{children:e,key:t,ref:r,...i},{children:o,key:s,ref:a,...l}={},u=!1){var c;const h=(c=n==null?void 0:n.__r3f)!=null?c:{},f=Object.entries(i),d=[];if(u){const y=Object.keys(l);for(let x=0;x<y.length;x++)i.hasOwnProperty(y[x])||f.unshift([y[x],y6+"remove"])}f.forEach(([y,x])=>{var g;if((g=n.__r3f)!=null&&g.primitive&&y==="object"||ni.equ(x,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return d.push([y,x,!0,[]]);let S=[];y.includes("-")&&(S=y.split("-")),d.push([y,x,!1,S]);for(const _ in i){const E=i[_];_.startsWith(`${y}-`)&&d.push([_,E,!1,_.split("-")])}});const v={...i};return h.memoizedProps&&h.memoizedProps.args&&(v.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(v.attach=h.memoizedProps.attach),{memoized:v,changes:d}}function Q_(n,e){var t,r,i;const o=(t=n.__r3f)!=null?t:{},s=o.root,a=(r=s==null||s.getState==null?void 0:s.getState())!=null?r:{},{memoized:l,changes:u}=Z$(e)?e:w6(n,e),c=o.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let f=0;f<u.length;f++){let[d,v,y,x]=u[f];if(K_(n)){const E="srgb",C="srgb-linear";d==="encoding"?(d="colorSpace",v=v===3001?E:C):d==="outputEncoding"&&(d="outputColorSpace",v=v===3001?E:C)}let g=n,S=g[d];if(x.length&&(S=x.reduce((_,E)=>_[E],n),!(S&&S.set))){const[_,...E]=x.reverse();g=E.reverse().reduce((C,I)=>C[I],n),d=_}if(v===y6+"remove")if(g.constructor){let _=lR.get(g.constructor);_||(_=new g.constructor,lR.set(g.constructor,_)),v=_[d]}else v=0;if(y)v?o.handlers[d]=v:delete o.handlers[d],o.eventCount=Object.keys(o.handlers).length;else if(S&&S.set&&(S.copy||S instanceof Cd)){if(Array.isArray(v))S.fromArray?S.fromArray(v):S.set(...v);else if(S.copy&&v&&v.constructor&&S.constructor===v.constructor)S.copy(v);else if(v!==void 0){const _=S instanceof Kt;!_&&S.setScalar?S.setScalar(v):S instanceof Cd&&v instanceof Cd?S.mask=v.mask:S.set(v),!p6()&&!a.linear&&_&&S.convertSRGBToLinear()}}else if(g[d]=v,g[d]instanceof Di&&g[d].format===Rs&&g[d].type===Lu){const _=g[d];K_(_)&&K_(a.gl)?_.colorSpace=a.gl.outputColorSpace:_.encoding=a.gl.outputEncoding}um(n)}if(o.parent&&a.internal&&n.raycast&&c!==o.eventCount){const f=a.internal.interaction.indexOf(n);f>-1&&a.internal.interaction.splice(f,1),o.eventCount&&a.internal.interaction.push(n)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(i=n.__r3f)!=null&&i.parent&&DM(n),n}function um(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function DM(n){n.onUpdate==null||n.onUpdate(n)}function S6(n,e){n.manual||(m6(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function c2(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Q$(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return zh.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return zh.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return zh.ContinuousEventPriority;default:return zh.DefaultEventPriority}}function _6(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function eX(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{_6(t.capturedMap,e,r,i)})}function tX(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],h=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+h*h))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var h;return(h=u.__r3f)==null?void 0:h.handlers["onPointer"+c]}))}function r(l,u){const c=n.getState(),h=new Set,f=[],d=u?u(c.internal.interaction):c.internal.interaction;for(let g=0;g<d.length;g++){const S=m0(d[g]);S&&(S.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function v(g){const S=m0(g);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var _;S.events.compute==null||S.events.compute(l,S,(_=S.previousRoot)==null?void 0:_.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(g,!0):[]}let y=d.flatMap(v).sort((g,S)=>{const _=m0(g.object),E=m0(S.object);return!_||!E?g.distance-S.distance:E.events.priority-_.events.priority||g.distance-S.distance}).filter(g=>{const S=c2(g);return h.has(S)?!1:(h.add(S),!0)});c.events.filter&&(y=c.events.filter(y,c));for(const g of y){let S=g.object;for(;S;){var x;(x=S.__r3f)!=null&&x.eventCount&&f.push({...g,eventObject:S}),S=S.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let g of c.internal.capturedMap.get(l.pointerId).values())h.has(c2(g.intersection))||f.push(g.intersection);return f}function i(l,u,c,h){const f=n.getState();if(l.length){const d={stopped:!1};for(const v of l){const y=m0(v.object)||f,{raycaster:x,pointer:g,camera:S,internal:_}=y,E=new ye(g.x,g.y,0).unproject(S),C=L=>{var N,z;return(N=(z=_.capturedMap.get(L))==null?void 0:z.has(v.eventObject))!=null?N:!1},I=L=>{const N={intersection:v,target:u.target};_.capturedMap.has(L)?_.capturedMap.get(L).set(v.eventObject,N):_.capturedMap.set(L,new Map([[v.eventObject,N]])),u.target.setPointerCapture(L)},F=L=>{const N=_.capturedMap.get(L);N&&_6(_.capturedMap,v.eventObject,N,L)};let R={};for(let L in u){let N=u[L];typeof N!="function"&&(R[L]=N)}let k={...v,...R,pointer:g,intersections:l,stopped:d.stopped,delta:c,unprojectedPoint:E,ray:x.ray,camera:S,stopPropagation(){const L="pointerId"in u&&_.capturedMap.get(u.pointerId);if((!L||L.has(v.eventObject))&&(k.stopped=d.stopped=!0,_.hovered.size&&Array.from(_.hovered.values()).find(N=>N.eventObject===v.eventObject))){const N=l.slice(0,l.indexOf(v));o([...N,v])}},target:{hasPointerCapture:C,setPointerCapture:I,releasePointerCapture:F},currentTarget:{hasPointerCapture:C,setPointerCapture:I,releasePointerCapture:F},nativeEvent:u};if(h(k),d.stopped===!0)break}}return l}function o(l){const{internal:u}=n.getState();for(const c of u.hovered.values())if(!l.length||!l.find(h=>h.object===c.object&&h.index===c.index&&h.instanceId===c.instanceId)){const f=c.eventObject.__r3f,d=f==null?void 0:f.handlers;if(u.hovered.delete(c2(c)),f!=null&&f.eventCount){const v={...c,intersections:l};d.onPointerOut==null||d.onPointerOut(v),d.onPointerLeave==null||d.onPointerLeave(v)}}}function s(l,u){for(let c=0;c<u.length;c++){const h=u[c].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),o([]))})}}return function(c){const{onPointerMissed:h,internal:f}=n.getState();f.lastEvent.current=c;const d=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=r(c,d?t:void 0),g=v?e(c):0;l==="onPointerDown"&&(f.initialClick=[c.offsetX,c.offsetY],f.initialHits=x.map(_=>_.eventObject)),v&&!x.length&&g<=2&&(s(c,f.interaction),h&&h(c)),d&&o(x);function S(_){const E=_.eventObject,C=E.__r3f,I=C==null?void 0:C.handlers;if(C!=null&&C.eventCount)if(d){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const F=c2(_),R=f.hovered.get(F);R?R.stopped&&_.stopPropagation():(f.hovered.set(F,_),I.onPointerOver==null||I.onPointerOver(_),I.onPointerEnter==null||I.onPointerEnter(_))}I.onPointerMove==null||I.onPointerMove(_)}else{const F=I[l];F?(!v||f.initialHits.includes(E))&&(s(c,f.interaction.filter(R=>!f.initialHits.includes(R))),F(_)):v&&f.initialHits.includes(E)&&s(c,f.interaction.filter(R=>!f.initialHits.includes(R)))}}i(x,c,g,S)}}return{handlePointer:a}}const nX=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],b6=n=>!!(n!=null&&n.render),wA=de.createContext(null),rX=(n,e)=>{const t=u6((a,l)=>{const u=new ye,c=new ye,h=new ye;function f(g=l().camera,S=c,_=l().size){const{width:E,height:C,top:I,left:F}=_,R=E/C;S instanceof ye?h.copy(S):h.set(...S);const k=g.getWorldPosition(u).distanceTo(h);if(m6(g))return{width:E/g.zoom,height:C/g.zoom,top:I,left:F,factor:1,distance:k,aspect:R};{const L=g.fov*Math.PI/180,N=2*Math.tan(L/2)*k,z=N*(E/C);return{width:z,height:N,top:I,left:F,factor:E/z,distance:k,aspect:R}}}let d;const v=g=>a(S=>({performance:{...S.performance,current:g}})),y=new xt;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,S)=>e(g,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new pA,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();d&&clearTimeout(d),g.performance.current!==g.performance.min&&v(g.performance.min),d=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:f},setEvents:g=>a(S=>({...S,events:{...S.events,...g}})),setSize:(g,S,_,E,C)=>{const I=l().camera,F={width:g,height:S,top:E||0,left:C||0,updateStyle:_};a(R=>({size:F,viewport:{...R.viewport,...f(I,c,F)}}))},setDpr:g=>a(S=>{const _=x6(g);return{viewport:{...S.viewport,dpr:_,initialDpr:S.viewport.initialDpr||_}}}),setFrameloop:(g="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,g!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:de.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,S,_)=>{const E=l().internal;return E.priority=E.priority+(S>0?1:0),E.subscribers.push({ref:g,priority:S,store:_}),E.subscribers=E.subscribers.sort((C,I)=>C.priority-I.priority),()=>{const C=l().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(S>0?1:0),C.subscribers=C.subscribers.filter(I=>I.ref!==g))}}}}}),r=t.getState();let i=r.size,o=r.viewport.dpr,s=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:h}=t.getState();if(l!==i||u.dpr!==o){var f;i=l,o=u.dpr,S6(a,l),c.setPixelRatio(u.dpr);const d=(f=l.updateStyle)!=null?f:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,d)}a!==s&&(s=a,h(d=>({viewport:{...d.viewport,...d.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let h2,iX=new Set,oX=new Set,sX=new Set;function eb(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function g0(n,e){switch(n){case"before":return eb(iX,e);case"after":return eb(oX,e);case"tail":return eb(sX,e)}}let tb,nb;function rb(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),tb=e.internal.subscribers,h2=0;h2<tb.length;h2++)nb=tb[h2],nb.ref.current(nb.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function aX(n){let e=!1,t,r,i;function o(l){r=requestAnimationFrame(o),e=!0,t=0,g0("before",l);for(const c of n.values()){var u;i=c.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((u=i.gl.xr)!=null&&u.isPresenting)&&(t+=rb(l,i))}if(g0("after",l),t===0)return g0("tail",l),e=!1,cancelAnimationFrame(r)}function s(l,u=1){var c;if(!l)return n.forEach(h=>s(h.store.getState()),u);(c=l.gl.xr)!=null&&c.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(o)))}function a(l,u=!0,c,h){if(u&&g0("before",l),c)rb(l,c,h);else for(const f of n.values())rb(l,f.store.getState());u&&g0("after",l)}return{loop:o,invalidate:s,advance:a}}function SA(){const n=de.useContext(wA);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function fs(n=t=>t,e){return SA()(n,e)}function M6(n,e=0){const t=SA(),r=t.getState().internal.subscribe,i=g6(n);return b1(()=>r(i,e,t),[e,r,t]),null}function E6(n,e){return function(t,...r){const i=new t;return n&&n(i),Promise.all(r.map(o=>new Promise((s,a)=>i.load(o,l=>{l.scene&&Object.assign(l,K$(l.scene)),s(l)},e,l=>a(new Error(`Could not load ${o}: ${l.message}`))))))}}function _A(n,e,t,r){const i=Array.isArray(e)?e:[e],o=W$(E6(t,r),[n,...i],{equal:ni.equ});return Array.isArray(e)?o:o[0]}_A.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return j$(E6(t),[n,...r])};_A.clear=function(n,e){const t=Array.isArray(e)?e:[e];return q$([n,...t])};const ag=new Map,{invalidate:hR,advance:fR}=aX(ag),{reconciler:$v,applyProps:Jp}=$$(ag,Q$),Qp={objects:"shallow",strict:!1},lX=(n,e)=>{const t=typeof n=="function"?n(e):n;return b6(t)?t:new Vw({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function uX(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:r,top:i,left:o}=n.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:o}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function cX(n){const e=ag.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,o=r||rX(hR,fR),s=t||$v.createContainer(o,zh.ConcurrentRoot,null,!1,null,"",i,null);e||ag.set(n,{fiber:s,store:o});let a,l=!1,u;return{configure(c={}){let{gl:h,size:f,scene:d,events:v,onCreated:y,shadows:x=!1,linear:g=!1,flat:S=!1,legacy:_=!1,orthographic:E=!1,frameloop:C="always",dpr:I=[1,2],performance:F,raycaster:R,camera:k,onPointerMissed:L}=c,N=o.getState(),z=N.gl;N.gl||N.set({gl:z=lX(h,n)});let H=N.raycaster;H||N.set({raycaster:H=new yA});const{params:G,...K}=R||{};if(ni.equ(K,H,Qp)||Jp(H,{...K}),ni.equ(G,H.params,Qp)||Jp(H,{params:{...H.params,...G}}),!N.camera||N.camera===u&&!ni.equ(u,k,Qp)){u=k;const D=k instanceof m1,q=D?k:E?new ku(0,0,0,0,.1,1e3):new _i(75,0,.1,1e3);D||(q.position.z=5,k&&Jp(q,k),!N.camera&&!(k!=null&&k.rotation)&&q.lookAt(0,0,0)),N.set({camera:q})}if(!N.scene){let D;d instanceof og?D=d:(D=new og,d&&Jp(D,d)),N.set({scene:lm(D)})}if(!N.xr){var ee;const D=(Q,se)=>{const me=o.getState();me.frameloop!=="never"&&fR(Q,!0,me,se)},q=()=>{const Q=o.getState();Q.gl.xr.enabled=Q.gl.xr.isPresenting,Q.gl.xr.setAnimationLoop(Q.gl.xr.isPresenting?D:null),Q.gl.xr.isPresenting||hR(Q)},Z={connect(){const Q=o.getState().gl;Q.xr.addEventListener("sessionstart",q),Q.xr.addEventListener("sessionend",q)},disconnect(){const Q=o.getState().gl;Q.xr.removeEventListener("sessionstart",q),Q.xr.removeEventListener("sessionend",q)}};typeof((ee=z.xr)==null?void 0:ee.addEventListener)=="function"&&Z.connect(),N.set({xr:Z})}if(z.shadowMap){const D=z.shadowMap.enabled,q=z.shadowMap.type;if(z.shadowMap.enabled=!!x,ni.boo(x))z.shadowMap.type=q0;else if(ni.str(x)){var le;const Z={basic:hN,percentage:Dw,soft:q0,variance:Ll};z.shadowMap.type=(le=Z[x])!=null?le:q0}else ni.obj(x)&&Object.assign(z.shadowMap,x);(D!==z.shadowMap.enabled||q!==z.shadowMap.type)&&(z.shadowMap.needsUpdate=!0)}const V=p6();V&&("enabled"in V?V.enabled=!_:"legacyMode"in V&&(V.legacyMode=_)),Jp(z,{outputEncoding:g?3e3:3001,toneMapping:S?Ru:T3}),N.legacy!==_&&N.set(()=>({legacy:_})),N.linear!==g&&N.set(()=>({linear:g})),N.flat!==S&&N.set(()=>({flat:S})),h&&!ni.fun(h)&&!b6(h)&&!ni.equ(h,z,Qp)&&Jp(z,h),v&&!N.events.handlers&&N.set({events:v(o)});const ie=uX(n,f);return ni.equ(ie,N.size,Qp)||N.setSize(ie.width,ie.height,ie.updateStyle,ie.top,ie.left),I&&N.viewport.dpr!==x6(I)&&N.setDpr(I),N.frameloop!==C&&N.setFrameloop(C),N.onPointerMissed||N.set({onPointerMissed:L}),F&&!ni.equ(F,N.performance,Qp)&&N.set(D=>({performance:{...D.performance,...F}})),a=y,l=!0,this},render(c){return l||this.configure(),$v.updateContainer(de.createElement(hX,{store:o,children:c,onCreated:a,rootElement:n}),s,null,()=>{}),o},unmount(){A6(n)}}}function hX({store:n,children:e,onCreated:t,rootElement:r}){return b1(()=>{const i=n.getState();i.set(o=>({internal:{...o.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),de.createElement(wA.Provider,{value:n},e)}function A6(n,e){const t=ag.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),$v.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var o,s,a,l;i.events.disconnect==null||i.events.disconnect(),(o=i.gl)==null||(s=o.renderLists)==null||s.dispose==null||s.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),J$(i),ag.delete(n),e&&e(n)}catch{}},500)})}}function fX(n,e,t){return de.createElement(dX,{key:e.uuid,children:n,container:e,state:t})}function dX({state:n={},children:e,container:t}){const{events:r,size:i,...o}=n,s=SA(),[a]=de.useState(()=>new yA),[l]=de.useState(()=>new xt),u=de.useCallback((h,f)=>{const d={...h};Object.keys(h).forEach(y=>{(nX.includes(y)||h[y]!==f[y]&&f[y])&&delete d[y]});let v;if(f&&i){const y=f.camera;v=h.viewport.getCurrentViewport(y,new ye,i),y!==h.camera&&S6(y,i)}return{...d,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:s,events:{...h.events,...f==null?void 0:f.events,...r},size:{...h.size,...i},viewport:{...h.viewport,...v},...o}},[n]),[c]=de.useState(()=>{const h=s.getState();return u6((d,v)=>({...h,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:s,events:{...h.events,...r},size:{...h.size,...i},...o,set:d,get:v,setEvents:y=>d(x=>({...x,events:{...x.events,...y}}))}))});return de.useEffect(()=>{const h=s.subscribe(f=>c.setState(d=>u(f,d)));return()=>{h(),c.destroy()}},[]),de.useEffect(()=>{c.setState(h=>u(s.getState(),h))},[u]),de.createElement(de.Fragment,null,$v.createPortal(de.createElement(wA.Provider,{value:c},e),c,null))}$v.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:de.version});function lg(){return lg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},lg.apply(null,arguments)}function dR(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function pX({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,s]=de.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=de.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,c=de.useRef(!1);de.useEffect(()=>(c.current=!0,()=>void(c.current=!1)));const[h,f,d]=de.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:S,top:_,width:E,height:C,bottom:I,right:F,x:R,y:k}=a.current.element.getBoundingClientRect(),L={left:S,top:_,width:E,height:C,bottom:I,right:F,x:R,y:k};a.current.element instanceof HTMLElement&&r&&(L.height=a.current.element.offsetHeight,L.width=a.current.element.offsetWidth),Object.freeze(L),c.current&&!yX(a.current.lastBounds,L)&&s(a.current.lastBounds=L)};return[g,u?dR(g,u):g,l?dR(g,l):g]},[s,r,l,u]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",d,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function y(){a.current.element&&(a.current.resizeObserver=new i(d),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",d,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{d()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const x=g=>{!g||g===a.current.element||(v(),a.current.element=g,a.current.scrollContainers=T6(g),y())};return gX(d,!!e),mX(f),de.useEffect(()=>{v(),y()},[e,d,f]),de.useEffect(()=>v,[]),[x,o,h]}function mX(n){de.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function gX(n,e){de.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function T6(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(o=>o==="auto"||o==="scroll")&&e.push(n),[...e,...T6(n.parentElement)]}const vX=["x","y","top","bottom","left","right","width","height"],yX=(n,e)=>vX.every(t=>n[t]===e[t]);var xX=Object.defineProperty,wX=Object.defineProperties,SX=Object.getOwnPropertyDescriptors,pR=Object.getOwnPropertySymbols,_X=Object.prototype.hasOwnProperty,bX=Object.prototype.propertyIsEnumerable,mR=(n,e,t)=>e in n?xX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gR=(n,e)=>{for(var t in e||(e={}))_X.call(e,t)&&mR(n,t,e[t]);if(pR)for(var t of pR(e))bX.call(e,t)&&mR(n,t,e[t]);return n},MX=(n,e)=>wX(n,SX(e)),vR,yR;typeof window<"u"&&((vR=window.document)!=null&&vR.createElement||((yR=window.navigator)==null?void 0:yR.product)==="ReactNative")?de.useLayoutEffect:de.useEffect;function C6(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=C6(r,e,t);if(i)return i;r=e?null:r.sibling}}function P6(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const xR=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=xR;return}return xR.apply(this,arguments)};const bA=P6(de.createContext(null));class R6 extends de.Component{render(){return de.createElement(bA.Provider,{value:this._reactInternals},this.props.children)}}function EX(){const n=de.useContext(bA);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=de.useId();return de.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=C6(r,!1,o=>{let s=o.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[n,e])}function AX(){const n=EX(),[e]=de.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==bA&&!e.has(i)&&e.set(i,de.useContext(P6(i)))}t=t.return}return e}function TX(){const n=AX();return de.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>de.createElement(e,null,de.createElement(t.Provider,MX(gR({},r),{value:n.get(t)}))),e=>de.createElement(R6,gR({},e))),[n])}const ib={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function CX(n){const{handlePointer:e}=tX(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(ib).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:o}=n.getState();o.disconnect==null||o.disconnect(),i(s=>({events:{...s.events,connected:t}})),Object.entries((r=o.handlers)!=null?r:[]).forEach(([s,a])=>{const[l,u]=ib[s];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([o,s])=>{if(r&&r.connected instanceof HTMLElement){const[a]=ib[o];r.connected.removeEventListener(a,s)}}),t(o=>({events:{...o.events,connected:void 0}}))}}}}const PX=de.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:o,events:s=CX,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:h,legacy:f,orthographic:d,frameloop:v,dpr:y,performance:x,raycaster:g,camera:S,onPointerMissed:_,onCreated:E,...C},I){de.useMemo(()=>d6(F$),[]);const F=TX(),[R,k]=pX({scroll:!0,debounce:{scroll:50,resize:0},...r}),L=de.useRef(null),N=de.useRef(null);de.useImperativeHandle(I,()=>L.current);const z=g6(_),[H,G]=de.useState(!1),[K,ee]=de.useState(!1);if(H)throw H;if(K)throw K;const le=de.useRef(null);b1(()=>{const J=L.current;k.width>0&&k.height>0&&J&&(le.current||(le.current=cX(J)),le.current.configure({gl:o,events:s,shadows:u,linear:c,flat:h,legacy:f,orthographic:d,frameloop:v,dpr:y,performance:x,raycaster:g,camera:S,size:k,onPointerMissed:(...j)=>z.current==null?void 0:z.current(...j),onCreated:j=>{j.events.connect==null||j.events.connect(a?X$(a)?a.current:a:N.current),l&&j.setEvents({compute:(ie,D)=>{const q=ie[l+"X"],Z=ie[l+"Y"];D.pointer.set(q/D.size.width*2-1,-(Z/D.size.height)*2+1),D.raycaster.setFromCamera(D.pointer,D.camera)}}),E==null||E(j)}}),le.current.render(de.createElement(F,null,de.createElement(v6,{set:ee},de.createElement(de.Suspense,{fallback:de.createElement(Y$,{set:G})},e)))))}),de.useEffect(()=>{const J=L.current;if(J)return()=>A6(J)},[]);const V=a?"none":"auto";return de.createElement("div",lg({ref:N,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:V,...i}},C),de.createElement("div",{ref:R,style:{width:"100%",height:"100%"}},de.createElement("canvas",{ref:L,style:{display:"block"}},t)))}),L6=de.forwardRef(function(e,t){return de.createElement(R6,null,de.createElement(PX,lg({},e,{ref:t})))}),k6=(()=>parseInt(f1.replace(/\D+/g,"")))();var tl=Uint8Array,Hh=Uint16Array,OM=Uint32Array,I6=new tl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),N6=new tl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),RX=new tl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),F6=function(n,e){for(var t=new Hh(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new OM(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return[t,i]},D6=F6(I6,2),O6=D6[0],LX=D6[1];O6[28]=258,LX[258]=28;var kX=F6(N6,0),IX=kX[0],BM=new Hh(32768);for(var oi=0;oi<32768;++oi){var Mh=(oi&43690)>>>1|(oi&21845)<<1;Mh=(Mh&52428)>>>2|(Mh&13107)<<2,Mh=(Mh&61680)>>>4|(Mh&3855)<<4,BM[oi]=((Mh&65280)>>>8|(Mh&255)<<8)>>>1}var J0=function(n,e,t){for(var r=n.length,i=0,o=new Hh(e);i<r;++i)++o[n[i]-1];var s=new Hh(e);for(i=0;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(t){a=new Hh(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],c=e-n[i],h=s[n[i]-1]++<<c,f=h|(1<<c)-1;h<=f;++h)a[BM[h]>>>l]=u}else for(a=new Hh(r),i=0;i<r;++i)n[i]&&(a[i]=BM[s[n[i]-1]++]>>>15-n[i]);return a},M1=new tl(288);for(var oi=0;oi<144;++oi)M1[oi]=8;for(var oi=144;oi<256;++oi)M1[oi]=9;for(var oi=256;oi<280;++oi)M1[oi]=7;for(var oi=280;oi<288;++oi)M1[oi]=8;var B6=new tl(32);for(var oi=0;oi<32;++oi)B6[oi]=5;var NX=J0(M1,9,1),FX=J0(B6,5,1),ob=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Al=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},sb=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},DX=function(n){return(n/8|0)+(n&7&&1)},OX=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof Hh?Hh:n instanceof OM?OM:tl)(t-e);return r.set(n.subarray(e,t)),r},BX=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new tl(0);var i=!e||t,o=!t||t.i;t||(t={}),e||(e=new tl(r*3));var s=function(se){var me=e.length;if(se>me){var Se=new tl(Math.max(me*2,se));Se.set(e),e=Se}},a=t.f||0,l=t.p||0,u=t.b||0,c=t.l,h=t.d,f=t.m,d=t.n,v=r*8;do{if(!c){t.f=a=Al(n,l,1);var y=Al(n,l+1,3);if(l+=3,y)if(y==1)c=NX,h=FX,f=9,d=5;else if(y==2){var _=Al(n,l,31)+257,E=Al(n,l+10,15)+4,C=_+Al(n,l+5,31)+1;l+=14;for(var I=new tl(C),F=new tl(19),R=0;R<E;++R)F[RX[R]]=Al(n,l+R*3,7);l+=E*3;for(var k=ob(F),L=(1<<k)-1,N=J0(F,k,1),R=0;R<C;){var z=N[Al(n,l,L)];l+=z&15;var x=z>>>4;if(x<16)I[R++]=x;else{var H=0,G=0;for(x==16?(G=3+Al(n,l,3),l+=2,H=I[R-1]):x==17?(G=3+Al(n,l,7),l+=3):x==18&&(G=11+Al(n,l,127),l+=7);G--;)I[R++]=H}}var K=I.subarray(0,_),ee=I.subarray(_);f=ob(K),d=ob(ee),c=J0(K,f,1),h=J0(ee,d,1)}else throw"invalid block type";else{var x=DX(l)+4,g=n[x-4]|n[x-3]<<8,S=x+g;if(S>r){if(o)throw"unexpected EOF";break}i&&s(u+g),e.set(n.subarray(x,S),u),t.b=u+=g,t.p=l=S*8;continue}if(l>v){if(o)throw"unexpected EOF";break}}i&&s(u+131072);for(var le=(1<<f)-1,V=(1<<d)-1,J=l;;J=l){var H=c[sb(n,l)&le],j=H>>>4;if(l+=H&15,l>v){if(o)throw"unexpected EOF";break}if(!H)throw"invalid length/literal";if(j<256)e[u++]=j;else if(j==256){J=l,c=null;break}else{var ie=j-254;if(j>264){var R=j-257,D=I6[R];ie=Al(n,l,(1<<D)-1)+O6[R],l+=D}var q=h[sb(n,l)&V],Z=q>>>4;if(!q)throw"invalid distance";l+=q&15;var ee=IX[Z];if(Z>3){var D=N6[Z];ee+=sb(n,l)&(1<<D)-1,l+=D}if(l>v){if(o)throw"unexpected EOF";break}i&&s(u+131072);for(var Q=u+ie;u<Q;u+=4)e[u]=e[u-ee],e[u+1]=e[u+1-ee],e[u+2]=e[u+2-ee],e[u+3]=e[u+3-ee];u=Q}}t.l=c,t.p=J,t.b=u,c&&(a=1,t.m=f,t.d=h,t.n=d)}while(!a);return u==e.length?e:OX(e,0,u)},UX=new tl(0),zX=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function f2(n,e){return BX((zX(n),n.subarray(2,-4)),e)}var HX=typeof TextDecoder<"u"&&new TextDecoder,GX=0;try{HX.decode(UX,{stream:!0}),GX=1}catch{}const VX=n=>n&&n.isCubeTexture;class WX extends xo{constructor(e,t){var r,i;const o=VX(e),a=((i=o?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),u=Math.pow(2,l),c=3*Math.max(u,16*7),h=4*u,f=[o?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/c}`,`#define CUBEUV_TEXEL_HEIGHT ${1/h}`,`#define CUBEUV_MAX_MIP ${l}.0`],d=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=f.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${k6>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,y={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},x=new x1(1,16),g=new ql({uniforms:y,fragmentShader:v,vertexShader:d,side:Ol});super(x,g)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var jX=Object.defineProperty,qX=(n,e,t)=>e in n?jX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$X=(n,e,t)=>(qX(n,typeof e!="symbol"?e+"":e,t),t);class XX{constructor(){$X(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(t);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,e);e.target=null}}}var YX=Object.defineProperty,ZX=(n,e,t)=>e in n?YX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,gn=(n,e,t)=>(ZX(n,typeof e!="symbol"?e+"":e,t),t);const d2=new Zd,wR=new vc,KX=Math.cos(70*(Math.PI/180)),SR=(n,e)=>(n%e+e)%e;let JX=class extends XX{constructor(e,t){super(),gn(this,"object"),gn(this,"domElement"),gn(this,"enabled",!0),gn(this,"target",new ye),gn(this,"minDistance",0),gn(this,"maxDistance",1/0),gn(this,"minZoom",0),gn(this,"maxZoom",1/0),gn(this,"minPolarAngle",0),gn(this,"maxPolarAngle",Math.PI),gn(this,"minAzimuthAngle",-1/0),gn(this,"maxAzimuthAngle",1/0),gn(this,"enableDamping",!1),gn(this,"dampingFactor",.05),gn(this,"enableZoom",!0),gn(this,"zoomSpeed",1),gn(this,"enableRotate",!0),gn(this,"rotateSpeed",1),gn(this,"enablePan",!0),gn(this,"panSpeed",1),gn(this,"screenSpacePanning",!0),gn(this,"keyPanSpeed",7),gn(this,"zoomToCursor",!1),gn(this,"autoRotate",!1),gn(this,"autoRotateSpeed",2),gn(this,"reverseOrbit",!1),gn(this,"reverseHorizontalOrbit",!1),gn(this,"reverseVerticalOrbit",!1),gn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),gn(this,"mouseButtons",{LEFT:wu.ROTATE,MIDDLE:wu.DOLLY,RIGHT:wu.PAN}),gn(this,"touches",{ONE:gc.ROTATE,TWO:gc.DOLLY_PAN}),gn(this,"target0"),gn(this,"position0"),gn(this,"zoom0"),gn(this,"_domElementKeyEvents",null),gn(this,"getPolarAngle"),gn(this,"getAzimuthalAngle"),gn(this,"setPolarAngle"),gn(this,"setAzimuthalAngle"),gn(this,"getDistance"),gn(this,"getZoomScale"),gn(this,"listenToKeyEvents"),gn(this,"stopListenToKeyEvents"),gn(this,"saveState"),gn(this,"reset"),gn(this,"update"),gn(this,"connect"),gn(this,"dispose"),gn(this,"dollyIn"),gn(this,"dollyOut"),gn(this,"getScale"),gn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=be=>{let Ke=SR(be,2*Math.PI),ct=c.phi;ct<0&&(ct+=2*Math.PI),Ke<0&&(Ke+=2*Math.PI);let Ae=Math.abs(Ke-ct);2*Math.PI-Ae<Ae&&(Ke<ct?Ke+=2*Math.PI:ct+=2*Math.PI),h.phi=Ke-ct,r.update()},this.setAzimuthalAngle=be=>{let Ke=SR(be,2*Math.PI),ct=c.theta;ct<0&&(ct+=2*Math.PI),Ke<0&&(Ke+=2*Math.PI);let Ae=Math.abs(Ke-ct);2*Math.PI-Ae<Ae&&(Ke<ct?Ke+=2*Math.PI:ct+=2*Math.PI),h.theta=Ke-ct,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=be=>{be.addEventListener("keydown",pt),this._domElementKeyEvents=be},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",pt),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const be=new ye,Ke=new ye(0,1,0),ct=new ys().setFromUnitVectors(e.up,Ke),Ae=ct.clone().invert(),Oe=new ye,Ve=new ys,At=2*Math.PI;return function(){const Nt=r.object.position;ct.setFromUnitVectors(e.up,Ke),Ae.copy(ct).invert(),be.copy(Nt).sub(r.target),be.applyQuaternion(ct),c.setFromVector3(be),r.autoRotate&&l===a.NONE&&G(z()),r.enableDamping?(c.theta+=h.theta*r.dampingFactor,c.phi+=h.phi*r.dampingFactor):(c.theta+=h.theta,c.phi+=h.phi);let Xt=r.minAzimuthAngle,kn=r.maxAzimuthAngle;isFinite(Xt)&&isFinite(kn)&&(Xt<-Math.PI?Xt+=At:Xt>Math.PI&&(Xt-=At),kn<-Math.PI?kn+=At:kn>Math.PI&&(kn-=At),Xt<=kn?c.theta=Math.max(Xt,Math.min(kn,c.theta)):c.theta=c.theta>(Xt+kn)/2?Math.max(Xt,c.theta):Math.min(kn,c.theta)),c.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,c.phi)),c.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(d,r.dampingFactor):r.target.add(d),r.zoomToCursor&&k||r.object.isOrthographicCamera?c.radius=q(c.radius):c.radius=q(c.radius*f),be.setFromSpherical(c),be.applyQuaternion(Ae),Nt.copy(r.target).add(be),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(h.theta*=1-r.dampingFactor,h.phi*=1-r.dampingFactor,d.multiplyScalar(1-r.dampingFactor)):(h.set(0,0,0),d.set(0,0,0));let Yn=!1;if(r.zoomToCursor&&k){let wn=null;if(r.object instanceof _i&&r.object.isPerspectiveCamera){const ir=be.length();wn=q(ir*f);const Wt=ir-wn;r.object.position.addScaledVector(F,Wt),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const ir=new ye(R.x,R.y,0);ir.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix(),Yn=!0;const Wt=new ye(R.x,R.y,0);Wt.unproject(r.object),r.object.position.sub(Wt).add(ir),r.object.updateMatrixWorld(),wn=be.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;wn!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(wn).add(r.object.position):(d2.origin.copy(r.object.position),d2.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(d2.direction))<KX?e.lookAt(r.target):(wR.setFromNormalAndCoplanarPoint(r.object.up,r.target),d2.intersectPlane(wR,r.target))))}else r.object instanceof ku&&r.object.isOrthographicCamera&&(Yn=f!==1,Yn&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix()));return f=1,k=!1,Yn||Oe.distanceToSquared(r.object.position)>u||8*(1-Ve.dot(r.object.quaternion))>u?(r.dispatchEvent(i),Oe.copy(r.object.position),Ve.copy(r.object.quaternion),Yn=!1,!0):!1}})(),this.connect=be=>{r.domElement=be,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Pe),r.domElement.addEventListener("pointerdown",bt),r.domElement.addEventListener("pointercancel",te),r.domElement.addEventListener("wheel",rt)},this.dispose=()=>{var be,Ke,ct,Ae,Oe,Ve;r.domElement&&(r.domElement.style.touchAction="auto"),(be=r.domElement)==null||be.removeEventListener("contextmenu",Pe),(Ke=r.domElement)==null||Ke.removeEventListener("pointerdown",bt),(ct=r.domElement)==null||ct.removeEventListener("pointercancel",te),(Ae=r.domElement)==null||Ae.removeEventListener("wheel",rt),(Oe=r.domElement)==null||Oe.ownerDocument.removeEventListener("pointermove",pe),(Ve=r.domElement)==null||Ve.ownerDocument.removeEventListener("pointerup",te),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",pt)};const r=this,i={type:"change"},o={type:"start"},s={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,c=new IM,h=new IM;let f=1;const d=new ye,v=new xt,y=new xt,x=new xt,g=new xt,S=new xt,_=new xt,E=new xt,C=new xt,I=new xt,F=new ye,R=new xt;let k=!1;const L=[],N={};function z(){return 2*Math.PI/60/60*r.autoRotateSpeed}function H(){return Math.pow(.95,r.zoomSpeed)}function G(be){r.reverseOrbit||r.reverseHorizontalOrbit?h.theta+=be:h.theta-=be}function K(be){r.reverseOrbit||r.reverseVerticalOrbit?h.phi+=be:h.phi-=be}const ee=(()=>{const be=new ye;return function(ct,Ae){be.setFromMatrixColumn(Ae,0),be.multiplyScalar(-ct),d.add(be)}})(),le=(()=>{const be=new ye;return function(ct,Ae){r.screenSpacePanning===!0?be.setFromMatrixColumn(Ae,1):(be.setFromMatrixColumn(Ae,0),be.crossVectors(r.object.up,be)),be.multiplyScalar(ct),d.add(be)}})(),V=(()=>{const be=new ye;return function(ct,Ae){const Oe=r.domElement;if(Oe&&r.object instanceof _i&&r.object.isPerspectiveCamera){const Ve=r.object.position;be.copy(Ve).sub(r.target);let At=be.length();At*=Math.tan(r.object.fov/2*Math.PI/180),ee(2*ct*At/Oe.clientHeight,r.object.matrix),le(2*Ae*At/Oe.clientHeight,r.object.matrix)}else Oe&&r.object instanceof ku&&r.object.isOrthographicCamera?(ee(ct*(r.object.right-r.object.left)/r.object.zoom/Oe.clientWidth,r.object.matrix),le(Ae*(r.object.top-r.object.bottom)/r.object.zoom/Oe.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function J(be){r.object instanceof _i&&r.object.isPerspectiveCamera||r.object instanceof ku&&r.object.isOrthographicCamera?f=be:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function j(be){J(f/be)}function ie(be){J(f*be)}function D(be){if(!r.zoomToCursor||!r.domElement)return;k=!0;const Ke=r.domElement.getBoundingClientRect(),ct=be.clientX-Ke.left,Ae=be.clientY-Ke.top,Oe=Ke.width,Ve=Ke.height;R.x=ct/Oe*2-1,R.y=-(Ae/Ve)*2+1,F.set(R.x,R.y,1).unproject(r.object).sub(r.object.position).normalize()}function q(be){return Math.max(r.minDistance,Math.min(r.maxDistance,be))}function Z(be){v.set(be.clientX,be.clientY)}function Q(be){D(be),E.set(be.clientX,be.clientY)}function se(be){g.set(be.clientX,be.clientY)}function me(be){y.set(be.clientX,be.clientY),x.subVectors(y,v).multiplyScalar(r.rotateSpeed);const Ke=r.domElement;Ke&&(G(2*Math.PI*x.x/Ke.clientHeight),K(2*Math.PI*x.y/Ke.clientHeight)),v.copy(y),r.update()}function Se(be){C.set(be.clientX,be.clientY),I.subVectors(C,E),I.y>0?j(H()):I.y<0&&ie(H()),E.copy(C),r.update()}function Ce(be){S.set(be.clientX,be.clientY),_.subVectors(S,g).multiplyScalar(r.panSpeed),V(_.x,_.y),g.copy(S),r.update()}function $e(be){D(be),be.deltaY<0?ie(H()):be.deltaY>0&&j(H()),r.update()}function ke(be){let Ke=!1;switch(be.code){case r.keys.UP:V(0,r.keyPanSpeed),Ke=!0;break;case r.keys.BOTTOM:V(0,-r.keyPanSpeed),Ke=!0;break;case r.keys.LEFT:V(r.keyPanSpeed,0),Ke=!0;break;case r.keys.RIGHT:V(-r.keyPanSpeed,0),Ke=!0;break}Ke&&(be.preventDefault(),r.update())}function fe(){if(L.length==1)v.set(L[0].pageX,L[0].pageY);else{const be=.5*(L[0].pageX+L[1].pageX),Ke=.5*(L[0].pageY+L[1].pageY);v.set(be,Ke)}}function Ie(){if(L.length==1)g.set(L[0].pageX,L[0].pageY);else{const be=.5*(L[0].pageX+L[1].pageX),Ke=.5*(L[0].pageY+L[1].pageY);g.set(be,Ke)}}function Ue(){const be=L[0].pageX-L[1].pageX,Ke=L[0].pageY-L[1].pageY,ct=Math.sqrt(be*be+Ke*Ke);E.set(0,ct)}function Te(){r.enableZoom&&Ue(),r.enablePan&&Ie()}function ae(){r.enableZoom&&Ue(),r.enableRotate&&fe()}function gt(be){if(L.length==1)y.set(be.pageX,be.pageY);else{const ct=Tt(be),Ae=.5*(be.pageX+ct.x),Oe=.5*(be.pageY+ct.y);y.set(Ae,Oe)}x.subVectors(y,v).multiplyScalar(r.rotateSpeed);const Ke=r.domElement;Ke&&(G(2*Math.PI*x.x/Ke.clientHeight),K(2*Math.PI*x.y/Ke.clientHeight)),v.copy(y)}function Ye(be){if(L.length==1)S.set(be.pageX,be.pageY);else{const Ke=Tt(be),ct=.5*(be.pageX+Ke.x),Ae=.5*(be.pageY+Ke.y);S.set(ct,Ae)}_.subVectors(S,g).multiplyScalar(r.panSpeed),V(_.x,_.y),g.copy(S)}function Ge(be){const Ke=Tt(be),ct=be.pageX-Ke.x,Ae=be.pageY-Ke.y,Oe=Math.sqrt(ct*ct+Ae*Ae);C.set(0,Oe),I.set(0,Math.pow(C.y/E.y,r.zoomSpeed)),j(I.y),E.copy(C)}function et(be){r.enableZoom&&Ge(be),r.enablePan&&Ye(be)}function vt(be){r.enableZoom&&Ge(be),r.enableRotate&&gt(be)}function bt(be){var Ke,ct;r.enabled!==!1&&(L.length===0&&((Ke=r.domElement)==null||Ke.ownerDocument.addEventListener("pointermove",pe),(ct=r.domElement)==null||ct.ownerDocument.addEventListener("pointerup",te)),Ht(be),be.pointerType==="touch"?wt(be):Ne(be))}function pe(be){r.enabled!==!1&&(be.pointerType==="touch"?ut(be):st(be))}function te(be){var Ke,ct,Ae;Pt(be),L.length===0&&((Ke=r.domElement)==null||Ke.releasePointerCapture(be.pointerId),(ct=r.domElement)==null||ct.ownerDocument.removeEventListener("pointermove",pe),(Ae=r.domElement)==null||Ae.ownerDocument.removeEventListener("pointerup",te)),r.dispatchEvent(s),l=a.NONE}function Ne(be){let Ke;switch(be.button){case 0:Ke=r.mouseButtons.LEFT;break;case 1:Ke=r.mouseButtons.MIDDLE;break;case 2:Ke=r.mouseButtons.RIGHT;break;default:Ke=-1}switch(Ke){case wu.DOLLY:if(r.enableZoom===!1)return;Q(be),l=a.DOLLY;break;case wu.ROTATE:if(be.ctrlKey||be.metaKey||be.shiftKey){if(r.enablePan===!1)return;se(be),l=a.PAN}else{if(r.enableRotate===!1)return;Z(be),l=a.ROTATE}break;case wu.PAN:if(be.ctrlKey||be.metaKey||be.shiftKey){if(r.enableRotate===!1)return;Z(be),l=a.ROTATE}else{if(r.enablePan===!1)return;se(be),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(o)}function st(be){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;me(be);break;case a.DOLLY:if(r.enableZoom===!1)return;Se(be);break;case a.PAN:if(r.enablePan===!1)return;Ce(be);break}}function rt(be){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(be.preventDefault(),r.dispatchEvent(o),$e(be),r.dispatchEvent(s))}function pt(be){r.enabled===!1||r.enablePan===!1||ke(be)}function wt(be){switch(Dt(be),L.length){case 1:switch(r.touches.ONE){case gc.ROTATE:if(r.enableRotate===!1)return;fe(),l=a.TOUCH_ROTATE;break;case gc.PAN:if(r.enablePan===!1)return;Ie(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case gc.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Te(),l=a.TOUCH_DOLLY_PAN;break;case gc.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ae(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(o)}function ut(be){switch(Dt(be),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;gt(be),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;Ye(be),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;et(be),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;vt(be),r.update();break;default:l=a.NONE}}function Pe(be){r.enabled!==!1&&be.preventDefault()}function Ht(be){L.push(be)}function Pt(be){delete N[be.pointerId];for(let Ke=0;Ke<L.length;Ke++)if(L[Ke].pointerId==be.pointerId){L.splice(Ke,1);return}}function Dt(be){let Ke=N[be.pointerId];Ke===void 0&&(Ke=new xt,N[be.pointerId]=Ke),Ke.set(be.pageX,be.pageY)}function Tt(be){const Ke=be.pointerId===L[0].pointerId?L[1]:L[0];return N[Ke.pointerId]}this.dollyIn=(be=H())=>{ie(be),r.update()},this.dollyOut=(be=H())=>{j(be),r.update()},this.getScale=()=>f,this.setScale=be=>{J(be),r.update()},this.getZoomScale=()=>H(),t!==void 0&&this.connect(t),this.update()}};class QX extends uA{constructor(e){super(e),this.type=Ls}parse(e){const s=function(R,k){switch(R){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(k||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(k||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(k||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(k||""))}},c=`
`,h=function(R,k,L){k=k||1024;let z=R.pos,H=-1,G=0,K="",ee=String.fromCharCode.apply(null,new Uint16Array(R.subarray(z,z+128)));for(;0>(H=ee.indexOf(c))&&G<k&&z<R.byteLength;)K+=ee,G+=ee.length,z+=128,ee+=String.fromCharCode.apply(null,new Uint16Array(R.subarray(z,z+128)));return-1<H?(L!==!1&&(R.pos+=G+H+1),K+ee.slice(0,H)):!1},f=function(R){const k=/^#\?(\S+)/,L=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,N=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,z=/^\s*FORMAT=(\S+)\s*$/,H=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,G={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let K,ee;for((R.pos>=R.byteLength||!(K=h(R)))&&s(1,"no header found"),(ee=K.match(k))||s(3,"bad initial token"),G.valid|=1,G.programtype=ee[1],G.string+=K+`
`;K=h(R),K!==!1;){if(G.string+=K+`
`,K.charAt(0)==="#"){G.comments+=K+`
`;continue}if((ee=K.match(L))&&(G.gamma=parseFloat(ee[1])),(ee=K.match(N))&&(G.exposure=parseFloat(ee[1])),(ee=K.match(z))&&(G.valid|=2,G.format=ee[1]),(ee=K.match(H))&&(G.valid|=4,G.height=parseInt(ee[1],10),G.width=parseInt(ee[2],10)),G.valid&2&&G.valid&4)break}return G.valid&2||s(3,"missing format specifier"),G.valid&4||s(3,"missing image size specifier"),G},d=function(R,k,L){const N=k;if(N<8||N>32767||R[0]!==2||R[1]!==2||R[2]&128)return new Uint8Array(R);N!==(R[2]<<8|R[3])&&s(3,"wrong scanline width");const z=new Uint8Array(4*k*L);z.length||s(4,"unable to allocate buffer space");let H=0,G=0;const K=4*N,ee=new Uint8Array(4),le=new Uint8Array(K);let V=L;for(;V>0&&G<R.byteLength;){G+4>R.byteLength&&s(1),ee[0]=R[G++],ee[1]=R[G++],ee[2]=R[G++],ee[3]=R[G++],(ee[0]!=2||ee[1]!=2||(ee[2]<<8|ee[3])!=N)&&s(3,"bad rgbe scanline format");let J=0,j;for(;J<K&&G<R.byteLength;){j=R[G++];const D=j>128;if(D&&(j-=128),(j===0||J+j>K)&&s(3,"bad scanline data"),D){const q=R[G++];for(let Z=0;Z<j;Z++)le[J++]=q}else le.set(R.subarray(G,G+j),J),J+=j,G+=j}const ie=N;for(let D=0;D<ie;D++){let q=0;z[H]=le[D+q],q+=N,z[H+1]=le[D+q],q+=N,z[H+2]=le[D+q],q+=N,z[H+3]=le[D+q],H+=4}V--}return z},v=function(R,k,L,N){const z=R[k+3],H=Math.pow(2,z-128)/255;L[N+0]=R[k+0]*H,L[N+1]=R[k+1]*H,L[N+2]=R[k+2]*H,L[N+3]=1},y=function(R,k,L,N){const z=R[k+3],H=Math.pow(2,z-128)/255;L[N+0]=wd.toHalfFloat(Math.min(R[k+0]*H,65504)),L[N+1]=wd.toHalfFloat(Math.min(R[k+1]*H,65504)),L[N+2]=wd.toHalfFloat(Math.min(R[k+2]*H,65504)),L[N+3]=wd.toHalfFloat(1)},x=new Uint8Array(e);x.pos=0;const g=f(x),S=g.width,_=g.height,E=d(x.subarray(x.pos),S,_);let C,I,F;switch(this.type){case vs:F=E.length/4;const R=new Float32Array(F*4);for(let L=0;L<F;L++)v(E,L*4,R,L*4);C=R,I=vs;break;case Ls:F=E.length/4;const k=new Uint16Array(F*4);for(let L=0;L<F;L++)y(E,L*4,k,L*4);C=k,I=Ls;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:S,height:_,data:C,header:g.string,gamma:g.gamma,exposure:g.exposure,type:I}}setDataType(e){return this.type=e,this}load(e,t,r,i){function o(s,a){switch(s.type){case vs:case Ls:"colorSpace"in s?s.colorSpace="srgb-linear":s.encoding=3e3,s.minFilter=ri,s.magFilter=ri,s.generateMipmaps=!1,s.flipY=!0;break}t&&t(s,a)}return super.load(e,o,r,i)}}const v0=k6>=152;class eY extends uA{constructor(e){super(e),this.type=Ls}parse(e){const k=Math.pow(2.7182818,2.2);function L($,B){for(var re=0,ve=0;ve<65536;++ve)(ve==0||$[ve>>3]&1<<(ve&7))&&(B[re++]=ve);for(var ge=re-1;re<65536;)B[re++]=0;return ge}function N($){for(var B=0;B<16384;B++)$[B]={},$[B].len=0,$[B].lit=0,$[B].p=null}const z={l:0,c:0,lc:0};function H($,B,re,ve,ge){for(;re<$;)B=B<<8|Tt(ve,ge),re+=8;re-=$,z.l=B>>re&(1<<$)-1,z.c=B,z.lc=re}const G=new Array(59);function K($){for(var B=0;B<=58;++B)G[B]=0;for(var B=0;B<65537;++B)G[$[B]]+=1;for(var re=0,B=58;B>0;--B){var ve=re+G[B]>>1;G[B]=re,re=ve}for(var B=0;B<65537;++B){var ge=$[B];ge>0&&($[B]=ge|G[ge]++<<6)}}function ee($,B,re,ve,ge,_e,qe){for(var Xe=re,it=0,tt=0;ge<=_e;ge++){if(Xe.value-re.value>ve)return!1;H(6,it,tt,$,Xe);var dt=z.l;if(it=z.c,tt=z.lc,qe[ge]=dt,dt==63){if(Xe.value-re.value>ve)throw"Something wrong with hufUnpackEncTable";H(8,it,tt,$,Xe);var nt=z.l+6;if(it=z.c,tt=z.lc,ge+nt>_e+1)throw"Something wrong with hufUnpackEncTable";for(;nt--;)qe[ge++]=0;ge--}else if(dt>=59){var nt=dt-59+2;if(ge+nt>_e+1)throw"Something wrong with hufUnpackEncTable";for(;nt--;)qe[ge++]=0;ge--}}K(qe)}function le($){return $&63}function V($){return $>>6}function J($,B,re,ve){for(;B<=re;B++){var ge=V($[B]),_e=le($[B]);if(ge>>_e)throw"Invalid table entry";if(_e>14){var qe=ve[ge>>_e-14];if(qe.len)throw"Invalid table entry";if(qe.lit++,qe.p){var Xe=qe.p;qe.p=new Array(qe.lit);for(var it=0;it<qe.lit-1;++it)qe.p[it]=Xe[it]}else qe.p=new Array(1);qe.p[qe.lit-1]=B}else if(_e)for(var tt=0,it=1<<14-_e;it>0;it--){var qe=ve[(ge<<14-_e)+tt];if(qe.len||qe.p)throw"Invalid table entry";qe.len=_e,qe.lit=B,tt++}}return!0}const j={c:0,lc:0};function ie($,B,re,ve){$=$<<8|Tt(re,ve),B+=8,j.c=$,j.lc=B}const D={c:0,lc:0};function q($,B,re,ve,ge,_e,qe,Xe,it,tt){if($==B){ve<8&&(ie(re,ve,ge,qe),re=j.c,ve=j.lc),ve-=8;var dt=re>>ve,dt=new Uint8Array([dt])[0];if(it.value+dt>tt)return!1;for(var nt=Xe[it.value-1];dt-- >0;)Xe[it.value++]=nt}else if(it.value<tt)Xe[it.value++]=$;else return!1;D.c=re,D.lc=ve}function Z($){return $&65535}function Q($){var B=Z($);return B>32767?B-65536:B}const se={a:0,b:0};function me($,B){var re=Q($),ve=Q(B),ge=ve,_e=re+(ge&1)+(ge>>1),qe=_e,Xe=_e-ge;se.a=qe,se.b=Xe}function Se($,B){var re=Z($),ve=Z(B),ge=re-(ve>>1)&65535,_e=ve+ge-32768&65535;se.a=_e,se.b=ge}function Ce($,B,re,ve,ge,_e,qe){for(var Xe=qe<16384,it=re>ge?ge:re,tt=1,dt;tt<=it;)tt<<=1;for(tt>>=1,dt=tt,tt>>=1;tt>=1;){for(var nt=0,jt=nt+_e*(ge-dt),It=_e*tt,Ot=_e*dt,rn=ve*tt,sn=ve*dt,mt,ht,an,Zt;nt<=jt;nt+=Ot){for(var Mn=nt,pn=nt+ve*(re-dt);Mn<=pn;Mn+=sn){var xn=Mn+rn,or=Mn+It,Kn=or+rn;Xe?(me($[Mn+B],$[or+B]),mt=se.a,an=se.b,me($[xn+B],$[Kn+B]),ht=se.a,Zt=se.b,me(mt,ht),$[Mn+B]=se.a,$[xn+B]=se.b,me(an,Zt),$[or+B]=se.a,$[Kn+B]=se.b):(Se($[Mn+B],$[or+B]),mt=se.a,an=se.b,Se($[xn+B],$[Kn+B]),ht=se.a,Zt=se.b,Se(mt,ht),$[Mn+B]=se.a,$[xn+B]=se.b,Se(an,Zt),$[or+B]=se.a,$[Kn+B]=se.b)}if(re&tt){var or=Mn+It;Xe?me($[Mn+B],$[or+B]):Se($[Mn+B],$[or+B]),mt=se.a,$[or+B]=se.b,$[Mn+B]=mt}}if(ge&tt)for(var Mn=nt,pn=nt+ve*(re-dt);Mn<=pn;Mn+=sn){var xn=Mn+rn;Xe?me($[Mn+B],$[xn+B]):Se($[Mn+B],$[xn+B]),mt=se.a,$[xn+B]=se.b,$[Mn+B]=mt}dt=tt,tt>>=1}return nt}function $e($,B,re,ve,ge,_e,qe,Xe,it,tt){for(var dt=0,nt=0,jt=Xe,It=Math.trunc(ge.value+(_e+7)/8);ge.value<It;)for(ie(dt,nt,re,ge),dt=j.c,nt=j.lc;nt>=14;){var Ot=dt>>nt-14&16383,rn=B[Ot];if(rn.len)nt-=rn.len,q(rn.lit,qe,dt,nt,re,ve,ge,it,tt,jt),dt=D.c,nt=D.lc;else{if(!rn.p)throw"hufDecode issues";var sn;for(sn=0;sn<rn.lit;sn++){for(var mt=le($[rn.p[sn]]);nt<mt&&ge.value<It;)ie(dt,nt,re,ge),dt=j.c,nt=j.lc;if(nt>=mt&&V($[rn.p[sn]])==(dt>>nt-mt&(1<<mt)-1)){nt-=mt,q(rn.p[sn],qe,dt,nt,re,ve,ge,it,tt,jt),dt=D.c,nt=D.lc;break}}if(sn==rn.lit)throw"hufDecode issues"}}var ht=8-_e&7;for(dt>>=ht,nt-=ht;nt>0;){var rn=B[dt<<14-nt&16383];if(rn.len)nt-=rn.len,q(rn.lit,qe,dt,nt,re,ve,ge,it,tt,jt),dt=D.c,nt=D.lc;else throw"hufDecode issues"}return!0}function ke($,B,re,ve,ge,_e){var qe={value:0},Xe=re.value,it=Dt(B,re),tt=Dt(B,re);re.value+=4;var dt=Dt(B,re);if(re.value+=4,it<0||it>=65537||tt<0||tt>=65537)throw"Something wrong with HUF_ENCSIZE";var nt=new Array(65537),jt=new Array(16384);N(jt);var It=ve-(re.value-Xe);if(ee($,B,re,It,it,tt,nt),dt>8*(ve-(re.value-Xe)))throw"Something wrong with hufUncompress";J(nt,it,tt,jt),$e(nt,jt,$,B,re,dt,tt,_e,ge,qe)}function fe($,B,re){for(var ve=0;ve<re;++ve)B[ve]=$[B[ve]]}function Ie($){for(var B=1;B<$.length;B++){var re=$[B-1]+$[B]-128;$[B]=re}}function Ue($,B){for(var re=0,ve=Math.floor(($.length+1)/2),ge=0,_e=$.length-1;!(ge>_e||(B[ge++]=$[re++],ge>_e));)B[ge++]=$[ve++]}function Te($){for(var B=$.byteLength,re=new Array,ve=0,ge=new DataView($);B>0;){var _e=ge.getInt8(ve++);if(_e<0){var qe=-_e;B-=qe+1;for(var Xe=0;Xe<qe;Xe++)re.push(ge.getUint8(ve++))}else{var qe=_e;B-=2;for(var it=ge.getUint8(ve++),Xe=0;Xe<qe+1;Xe++)re.push(it)}}return re}function ae($,B,re,ve,ge,_e){var xn=new DataView(_e.buffer),qe=re[$.idx[0]].width,Xe=re[$.idx[0]].height,it=3,tt=Math.floor(qe/8),dt=Math.ceil(qe/8),nt=Math.ceil(Xe/8),jt=qe-(dt-1)*8,It=Xe-(nt-1)*8,Ot={value:0},rn=new Array(it),sn=new Array(it),mt=new Array(it),ht=new Array(it),an=new Array(it);for(let fn=0;fn<it;++fn)an[fn]=B[$.idx[fn]],rn[fn]=fn<1?0:rn[fn-1]+dt*nt,sn[fn]=new Float32Array(64),mt[fn]=new Uint16Array(64),ht[fn]=new Uint16Array(dt*64);for(let fn=0;fn<nt;++fn){var Zt=8;fn==nt-1&&(Zt=It);var Mn=8;for(let Pn=0;Pn<dt;++Pn){Pn==dt-1&&(Mn=jt);for(let Vn=0;Vn<it;++Vn)mt[Vn].fill(0),mt[Vn][0]=ge[rn[Vn]++],gt(Ot,ve,mt[Vn]),Ye(mt[Vn],sn[Vn]),Ge(sn[Vn]);et(sn);for(let Vn=0;Vn<it;++Vn)vt(sn[Vn],ht[Vn],Pn*64)}let Er=0;for(let Pn=0;Pn<it;++Pn){const Vn=re[$.idx[Pn]].type;for(let Nr=8*fn;Nr<8*fn+Zt;++Nr){Er=an[Pn][Nr];for(let oa=0;oa<tt;++oa){const Ji=oa*64+(Nr&7)*8;xn.setUint16(Er+0*2*Vn,ht[Pn][Ji+0],!0),xn.setUint16(Er+1*2*Vn,ht[Pn][Ji+1],!0),xn.setUint16(Er+2*2*Vn,ht[Pn][Ji+2],!0),xn.setUint16(Er+3*2*Vn,ht[Pn][Ji+3],!0),xn.setUint16(Er+4*2*Vn,ht[Pn][Ji+4],!0),xn.setUint16(Er+5*2*Vn,ht[Pn][Ji+5],!0),xn.setUint16(Er+6*2*Vn,ht[Pn][Ji+6],!0),xn.setUint16(Er+7*2*Vn,ht[Pn][Ji+7],!0),Er+=8*2*Vn}}if(tt!=dt)for(let Nr=8*fn;Nr<8*fn+Zt;++Nr){const oa=an[Pn][Nr]+8*tt*2*Vn,Ji=tt*64+(Nr&7)*8;for(let Bs=0;Bs<Mn;++Bs)xn.setUint16(oa+Bs*2*Vn,ht[Pn][Ji+Bs],!0)}}}for(var pn=new Uint16Array(qe),xn=new DataView(_e.buffer),or=0;or<it;++or){re[$.idx[or]].decoded=!0;var Kn=re[$.idx[or]].type;if(re[or].type==2)for(var ur=0;ur<Xe;++ur){const fn=an[or][ur];for(var Kr=0;Kr<qe;++Kr)pn[Kr]=xn.getUint16(fn+Kr*2*Kn,!0);for(var Kr=0;Kr<qe;++Kr)xn.setFloat32(fn+Kr*2*Kn,Oe(pn[Kr]),!0)}}}function gt($,B,re){for(var ve,ge=1;ge<64;)ve=B[$.value],ve==65280?ge=64:ve>>8==255?ge+=ve&255:(re[ge]=ve,ge++),$.value++}function Ye($,B){B[0]=Oe($[0]),B[1]=Oe($[1]),B[2]=Oe($[5]),B[3]=Oe($[6]),B[4]=Oe($[14]),B[5]=Oe($[15]),B[6]=Oe($[27]),B[7]=Oe($[28]),B[8]=Oe($[2]),B[9]=Oe($[4]),B[10]=Oe($[7]),B[11]=Oe($[13]),B[12]=Oe($[16]),B[13]=Oe($[26]),B[14]=Oe($[29]),B[15]=Oe($[42]),B[16]=Oe($[3]),B[17]=Oe($[8]),B[18]=Oe($[12]),B[19]=Oe($[17]),B[20]=Oe($[25]),B[21]=Oe($[30]),B[22]=Oe($[41]),B[23]=Oe($[43]),B[24]=Oe($[9]),B[25]=Oe($[11]),B[26]=Oe($[18]),B[27]=Oe($[24]),B[28]=Oe($[31]),B[29]=Oe($[40]),B[30]=Oe($[44]),B[31]=Oe($[53]),B[32]=Oe($[10]),B[33]=Oe($[19]),B[34]=Oe($[23]),B[35]=Oe($[32]),B[36]=Oe($[39]),B[37]=Oe($[45]),B[38]=Oe($[52]),B[39]=Oe($[54]),B[40]=Oe($[20]),B[41]=Oe($[22]),B[42]=Oe($[33]),B[43]=Oe($[38]),B[44]=Oe($[46]),B[45]=Oe($[51]),B[46]=Oe($[55]),B[47]=Oe($[60]),B[48]=Oe($[21]),B[49]=Oe($[34]),B[50]=Oe($[37]),B[51]=Oe($[47]),B[52]=Oe($[50]),B[53]=Oe($[56]),B[54]=Oe($[59]),B[55]=Oe($[61]),B[56]=Oe($[35]),B[57]=Oe($[36]),B[58]=Oe($[48]),B[59]=Oe($[49]),B[60]=Oe($[57]),B[61]=Oe($[58]),B[62]=Oe($[62]),B[63]=Oe($[63])}function Ge($){const B=.5*Math.cos(.7853975),re=.5*Math.cos(3.14159/16),ve=.5*Math.cos(3.14159/8),ge=.5*Math.cos(3*3.14159/16),_e=.5*Math.cos(5*3.14159/16),qe=.5*Math.cos(3*3.14159/8),Xe=.5*Math.cos(7*3.14159/16);for(var it=new Array(4),tt=new Array(4),dt=new Array(4),nt=new Array(4),jt=0;jt<8;++jt){var It=jt*8;it[0]=ve*$[It+2],it[1]=qe*$[It+2],it[2]=ve*$[It+6],it[3]=qe*$[It+6],tt[0]=re*$[It+1]+ge*$[It+3]+_e*$[It+5]+Xe*$[It+7],tt[1]=ge*$[It+1]-Xe*$[It+3]-re*$[It+5]-_e*$[It+7],tt[2]=_e*$[It+1]-re*$[It+3]+Xe*$[It+5]+ge*$[It+7],tt[3]=Xe*$[It+1]-_e*$[It+3]+ge*$[It+5]-re*$[It+7],dt[0]=B*($[It+0]+$[It+4]),dt[3]=B*($[It+0]-$[It+4]),dt[1]=it[0]+it[3],dt[2]=it[1]-it[2],nt[0]=dt[0]+dt[1],nt[1]=dt[3]+dt[2],nt[2]=dt[3]-dt[2],nt[3]=dt[0]-dt[1],$[It+0]=nt[0]+tt[0],$[It+1]=nt[1]+tt[1],$[It+2]=nt[2]+tt[2],$[It+3]=nt[3]+tt[3],$[It+4]=nt[3]-tt[3],$[It+5]=nt[2]-tt[2],$[It+6]=nt[1]-tt[1],$[It+7]=nt[0]-tt[0]}for(var Ot=0;Ot<8;++Ot)it[0]=ve*$[16+Ot],it[1]=qe*$[16+Ot],it[2]=ve*$[48+Ot],it[3]=qe*$[48+Ot],tt[0]=re*$[8+Ot]+ge*$[24+Ot]+_e*$[40+Ot]+Xe*$[56+Ot],tt[1]=ge*$[8+Ot]-Xe*$[24+Ot]-re*$[40+Ot]-_e*$[56+Ot],tt[2]=_e*$[8+Ot]-re*$[24+Ot]+Xe*$[40+Ot]+ge*$[56+Ot],tt[3]=Xe*$[8+Ot]-_e*$[24+Ot]+ge*$[40+Ot]-re*$[56+Ot],dt[0]=B*($[Ot]+$[32+Ot]),dt[3]=B*($[Ot]-$[32+Ot]),dt[1]=it[0]+it[3],dt[2]=it[1]-it[2],nt[0]=dt[0]+dt[1],nt[1]=dt[3]+dt[2],nt[2]=dt[3]-dt[2],nt[3]=dt[0]-dt[1],$[0+Ot]=nt[0]+tt[0],$[8+Ot]=nt[1]+tt[1],$[16+Ot]=nt[2]+tt[2],$[24+Ot]=nt[3]+tt[3],$[32+Ot]=nt[3]-tt[3],$[40+Ot]=nt[2]-tt[2],$[48+Ot]=nt[1]-tt[1],$[56+Ot]=nt[0]-tt[0]}function et($){for(var B=0;B<64;++B){var re=$[0][B],ve=$[1][B],ge=$[2][B];$[0][B]=re+1.5747*ge,$[1][B]=re-.1873*ve-.4682*ge,$[2][B]=re+1.8556*ve}}function vt($,B,re){for(var ve=0;ve<64;++ve)B[re+ve]=wd.toHalfFloat(bt($[ve]))}function bt($){return $<=1?Math.sign($)*Math.pow(Math.abs($),2.2):Math.sign($)*Math.pow(k,Math.abs($)-1)}function pe($){return new DataView($.array.buffer,$.offset.value,$.size)}function te($){var B=$.viewer.buffer.slice($.offset.value,$.offset.value+$.size),re=new Uint8Array(Te(B)),ve=new Uint8Array(re.length);return Ie(re),Ue(re,ve),new DataView(ve.buffer)}function Ne($){var B=$.array.slice($.offset.value,$.offset.value+$.size),re=f2(B),ve=new Uint8Array(re.length);return Ie(re),Ue(re,ve),new DataView(ve.buffer)}function st($){for(var B=$.viewer,re={value:$.offset.value},ve=new Uint16Array($.width*$.scanlineBlockSize*($.channels*$.type)),ge=new Uint8Array(8192),_e=0,qe=new Array($.channels),Xe=0;Xe<$.channels;Xe++)qe[Xe]={},qe[Xe].start=_e,qe[Xe].end=qe[Xe].start,qe[Xe].nx=$.width,qe[Xe].ny=$.lines,qe[Xe].size=$.type,_e+=qe[Xe].nx*qe[Xe].ny*qe[Xe].size;var it=Ve(B,re),tt=Ve(B,re);if(tt>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(it<=tt)for(var Xe=0;Xe<tt-it+1;Xe++)ge[Xe+it]=be(B,re);var dt=new Uint16Array(65536),nt=L(ge,dt),jt=Dt(B,re);ke($.array,B,re,jt,ve,_e);for(var Xe=0;Xe<$.channels;++Xe)for(var It=qe[Xe],Ot=0;Ot<qe[Xe].size;++Ot)Ce(ve,It.start+Ot,It.nx,It.size,It.ny,It.nx*It.size,nt);fe(dt,ve,_e);for(var rn=0,sn=new Uint8Array(ve.buffer.byteLength),mt=0;mt<$.lines;mt++)for(var ht=0;ht<$.channels;ht++){var It=qe[ht],an=It.nx*It.size,Zt=new Uint8Array(ve.buffer,It.end*2,an*2);sn.set(Zt,rn),rn+=an*2,It.end+=an}return new DataView(sn.buffer)}function rt($){var B=$.array.slice($.offset.value,$.offset.value+$.size),re=f2(B);const ve=$.lines*$.channels*$.width,ge=$.type==1?new Uint16Array(ve):new Uint32Array(ve);let _e=0,qe=0;const Xe=new Array(4);for(let it=0;it<$.lines;it++)for(let tt=0;tt<$.channels;tt++){let dt=0;switch($.type){case 1:Xe[0]=_e,Xe[1]=Xe[0]+$.width,_e=Xe[1]+$.width;for(let nt=0;nt<$.width;++nt){const jt=re[Xe[0]++]<<8|re[Xe[1]++];dt+=jt,ge[qe]=dt,qe++}break;case 2:Xe[0]=_e,Xe[1]=Xe[0]+$.width,Xe[2]=Xe[1]+$.width,_e=Xe[2]+$.width;for(let nt=0;nt<$.width;++nt){const jt=re[Xe[0]++]<<24|re[Xe[1]++]<<16|re[Xe[2]++]<<8;dt+=jt,ge[qe]=dt,qe++}break}}return new DataView(ge.buffer)}function pt($){var B=$.viewer,re={value:$.offset.value},ve=new Uint8Array($.width*$.lines*($.channels*$.type*2)),ge={version:Ke(B,re),unknownUncompressedSize:Ke(B,re),unknownCompressedSize:Ke(B,re),acCompressedSize:Ke(B,re),dcCompressedSize:Ke(B,re),rleCompressedSize:Ke(B,re),rleUncompressedSize:Ke(B,re),rleRawSize:Ke(B,re),totalAcUncompressedCount:Ke(B,re),totalDcUncompressedCount:Ke(B,re),acCompression:Ke(B,re)};if(ge.version<2)throw"EXRLoader.parse: "+lr.compression+" version "+ge.version+" is unsupported";for(var _e=new Array,qe=Ve(B,re)-2;qe>0;){var Xe=wt(B.buffer,re),it=be(B,re),tt=it>>2&3,dt=(it>>4)-1,nt=new Int8Array([dt])[0],jt=be(B,re);_e.push({name:Xe,index:nt,type:jt,compression:tt}),qe-=Xe.length+3}for(var It=lr.channels,Ot=new Array($.channels),rn=0;rn<$.channels;++rn){var sn=Ot[rn]={},mt=It[rn];sn.name=mt.name,sn.compression=0,sn.decoded=!1,sn.type=mt.pixelType,sn.pLinear=mt.pLinear,sn.width=$.width,sn.height=$.lines}for(var ht={idx:new Array(3)},an=0;an<$.channels;++an)for(var sn=Ot[an],rn=0;rn<_e.length;++rn){var Zt=_e[rn];sn.name==Zt.name&&(sn.compression=Zt.compression,Zt.index>=0&&(ht.idx[Zt.index]=an),sn.offset=an)}if(ge.acCompressedSize>0)switch(ge.acCompression){case 0:var xn=new Uint16Array(ge.totalAcUncompressedCount);ke($.array,B,re,ge.acCompressedSize,xn,ge.totalAcUncompressedCount);break;case 1:var Mn=$.array.slice(re.value,re.value+ge.totalAcUncompressedCount),pn=f2(Mn),xn=new Uint16Array(pn.buffer);re.value+=ge.totalAcUncompressedCount;break}if(ge.dcCompressedSize>0){var or={array:$.array,offset:re,size:ge.dcCompressedSize},Kn=new Uint16Array(Ne(or).buffer);re.value+=ge.dcCompressedSize}if(ge.rleRawSize>0){var Mn=$.array.slice(re.value,re.value+ge.rleCompressedSize),pn=f2(Mn),ur=Te(pn.buffer);re.value+=ge.rleCompressedSize}for(var Kr=0,fn=new Array(Ot.length),rn=0;rn<fn.length;++rn)fn[rn]=new Array;for(var Er=0;Er<$.lines;++Er)for(var Pn=0;Pn<Ot.length;++Pn)fn[Pn].push(Kr),Kr+=Ot[Pn].width*$.type*2;ae(ht,fn,Ot,xn,Kn,ve);for(var rn=0;rn<Ot.length;++rn){var sn=Ot[rn];if(!sn.decoded)switch(sn.compression){case 2:for(var Vn=0,Nr=0,Er=0;Er<$.lines;++Er){for(var oa=fn[rn][Vn],Ji=0;Ji<sn.width;++Ji){for(var Bs=0;Bs<2*sn.type;++Bs)ve[oa++]=ur[Nr+Bs*sn.width*sn.height];Nr++}Vn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(ve.buffer)}function wt($,B){for(var re=new Uint8Array($),ve=0;re[B.value+ve]!=0;)ve+=1;var ge=new TextDecoder().decode(re.slice(B.value,B.value+ve));return B.value=B.value+ve+1,ge}function ut($,B,re){var ve=new TextDecoder().decode(new Uint8Array($).slice(B.value,B.value+re));return B.value=B.value+re,ve}function Pe($,B){var re=Pt($,B),ve=Dt($,B);return[re,ve]}function Ht($,B){var re=Dt($,B),ve=Dt($,B);return[re,ve]}function Pt($,B){var re=$.getInt32(B.value,!0);return B.value=B.value+4,re}function Dt($,B){var re=$.getUint32(B.value,!0);return B.value=B.value+4,re}function Tt($,B){var re=$[B.value];return B.value=B.value+1,re}function be($,B){var re=$.getUint8(B.value);return B.value=B.value+1,re}const Ke=function($,B){let re;return"getBigInt64"in DataView.prototype?re=Number($.getBigInt64(B.value,!0)):re=$.getUint32(B.value+4,!0)+Number($.getUint32(B.value,!0)<<32),B.value+=8,re};function ct($,B){var re=$.getFloat32(B.value,!0);return B.value+=4,re}function Ae($,B){return wd.toHalfFloat(ct($,B))}function Oe($){var B=($&31744)>>10,re=$&1023;return($>>15?-1:1)*(B?B===31?re?NaN:1/0:Math.pow(2,B-15)*(1+re/1024):6103515625e-14*(re/1024))}function Ve($,B){var re=$.getUint16(B.value,!0);return B.value+=2,re}function At($,B){return Oe(Ve($,B))}function Ct($,B,re,ve){for(var ge=re.value,_e=[];re.value<ge+ve-1;){var qe=wt(B,re),Xe=Pt($,re),it=be($,re);re.value+=3;var tt=Pt($,re),dt=Pt($,re);_e.push({name:qe,pixelType:Xe,pLinear:it,xSampling:tt,ySampling:dt})}return re.value+=1,_e}function Nt($,B){var re=ct($,B),ve=ct($,B),ge=ct($,B),_e=ct($,B),qe=ct($,B),Xe=ct($,B),it=ct($,B),tt=ct($,B);return{redX:re,redY:ve,greenX:ge,greenY:_e,blueX:qe,blueY:Xe,whiteX:it,whiteY:tt}}function Xt($,B){var re=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],ve=be($,B);return re[ve]}function kn($,B){var re=Dt($,B),ve=Dt($,B),ge=Dt($,B),_e=Dt($,B);return{xMin:re,yMin:ve,xMax:ge,yMax:_e}}function Yn($,B){var re=["INCREASING_Y"],ve=be($,B);return re[ve]}function wn($,B){var re=ct($,B),ve=ct($,B);return[re,ve]}function ir($,B){var re=ct($,B),ve=ct($,B),ge=ct($,B);return[re,ve,ge]}function Wt($,B,re,ve,ge){if(ve==="string"||ve==="stringvector"||ve==="iccProfile")return ut(B,re,ge);if(ve==="chlist")return Ct($,B,re,ge);if(ve==="chromaticities")return Nt($,re);if(ve==="compression")return Xt($,re);if(ve==="box2i")return kn($,re);if(ve==="lineOrder")return Yn($,re);if(ve==="float")return ct($,re);if(ve==="v2f")return wn($,re);if(ve==="v3f")return ir($,re);if(ve==="int")return Pt($,re);if(ve==="rational")return Pe($,re);if(ve==="timecode")return Ht($,re);if(ve==="preview")return re.value+=ge,"skipped";re.value+=ge}function Yi($,B,re){const ve={};if($.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";ve.version=$.getUint8(4);const ge=$.getUint8(5);ve.spec={singleTile:!!(ge&2),longName:!!(ge&4),deepFormat:!!(ge&8),multiPart:!!(ge&16)},re.value=8;for(var _e=!0;_e;){var qe=wt(B,re);if(qe==0)_e=!1;else{var Xe=wt(B,re),it=Dt($,re),tt=Wt($,B,re,Xe,it);tt===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Xe}'.`):ve[qe]=tt}}if(ge&-5)throw console.error("EXRHeader:",ve),"THREE.EXRLoader: provided file is currently unsupported.";return ve}function Zi($,B,re,ve,ge){const _e={size:0,viewer:B,array:re,offset:ve,width:$.dataWindow.xMax-$.dataWindow.xMin+1,height:$.dataWindow.yMax-$.dataWindow.yMin+1,channels:$.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:$.channels[0].pixelType,uncompress:null,getter:null,format:null,[v0?"colorSpace":"encoding"]:null};switch($.compression){case"NO_COMPRESSION":_e.lines=1,_e.uncompress=pe;break;case"RLE_COMPRESSION":_e.lines=1,_e.uncompress=te;break;case"ZIPS_COMPRESSION":_e.lines=1,_e.uncompress=Ne;break;case"ZIP_COMPRESSION":_e.lines=16,_e.uncompress=Ne;break;case"PIZ_COMPRESSION":_e.lines=32,_e.uncompress=st;break;case"PXR24_COMPRESSION":_e.lines=16,_e.uncompress=rt;break;case"DWAA_COMPRESSION":_e.lines=32,_e.uncompress=pt;break;case"DWAB_COMPRESSION":_e.lines=256,_e.uncompress=pt;break;default:throw"EXRLoader.parse: "+$.compression+" is unsupported"}if(_e.scanlineBlockSize=_e.lines,_e.type==1)switch(ge){case vs:_e.getter=At,_e.inputSize=2;break;case Ls:_e.getter=Ve,_e.inputSize=2;break}else if(_e.type==2)switch(ge){case vs:_e.getter=ct,_e.inputSize=4;break;case Ls:_e.getter=Ae,_e.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+_e.type+" for "+$.compression+".";_e.blockCount=($.dataWindow.yMax+1)/_e.scanlineBlockSize;for(var qe=0;qe<_e.blockCount;qe++)Ke(B,ve);_e.outputChannels=_e.channels==3?4:_e.channels;const Xe=_e.width*_e.height*_e.outputChannels;switch(ge){case vs:_e.byteArray=new Float32Array(Xe),_e.channels<_e.outputChannels&&_e.byteArray.fill(1,0,Xe);break;case Ls:_e.byteArray=new Uint16Array(Xe),_e.channels<_e.outputChannels&&_e.byteArray.fill(15360,0,Xe);break;default:console.error("THREE.EXRLoader: unsupported type: ",ge);break}return _e.bytesPerLine=_e.width*_e.inputSize*_e.channels,_e.outputChannels==4?_e.format=Rs:_e.format=k3,v0?_e.colorSpace="srgb-linear":_e.encoding=3e3,_e}const Ir=new DataView(e),ar=new Uint8Array(e),dr={value:0},lr=Yi(Ir,e,dr),yn=Zi(lr,Ir,ar,dr,this.type),Ki={value:0},Bi={R:0,G:1,B:2,A:3,Y:0};for(let $=0;$<yn.height/yn.scanlineBlockSize;$++){const B=Dt(Ir,dr);yn.size=Dt(Ir,dr),yn.lines=B+yn.scanlineBlockSize>yn.height?yn.height-B:yn.scanlineBlockSize;const ve=yn.size<yn.lines*yn.bytesPerLine?yn.uncompress(yn):pe(yn);dr.value+=yn.size;for(let ge=0;ge<yn.scanlineBlockSize;ge++){const _e=ge+$*yn.scanlineBlockSize;if(_e>=yn.height)break;for(let qe=0;qe<yn.channels;qe++){const Xe=Bi[lr.channels[qe].name];for(let it=0;it<yn.width;it++){Ki.value=(ge*(yn.channels*yn.width)+qe*yn.width+it)*yn.inputSize;const tt=(yn.height-1-_e)*(yn.width*yn.outputChannels)+it*yn.outputChannels+Xe;yn.byteArray[tt]=yn.getter(ve,Ki)}}}}return{header:lr,width:yn.width,height:yn.height,data:yn.byteArray,format:yn.format,[v0?"colorSpace":"encoding"]:yn[v0?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function o(s,a){v0?s.colorSpace=a.colorSpace:s.encoding=a.encoding,s.minFilter=ri,s.magFilter=ri,s.generateMipmaps=!1,s.flipY=!1,t&&t(s,a)}return super.load(e,o,r,i)}}const U6=de.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:o=!1,onChange:s,onStart:a,onEnd:l,...u},c)=>{const h=fs(I=>I.invalidate),f=fs(I=>I.camera),d=fs(I=>I.gl),v=fs(I=>I.events),y=fs(I=>I.setEvents),x=fs(I=>I.set),g=fs(I=>I.get),S=fs(I=>I.performance),_=e||f,E=r||v.connected||d.domElement,C=de.useMemo(()=>new JX(_),[_]);return M6(()=>{C.enabled&&C.update()},-1),de.useEffect(()=>(o&&C.connect(o===!0?E:o),C.connect(E),()=>void C.dispose()),[o,E,t,C,h]),de.useEffect(()=>{const I=k=>{h(),t&&S.regress(),s&&s(k)},F=k=>{a&&a(k)},R=k=>{l&&l(k)};return C.addEventListener("change",I),C.addEventListener("start",F),C.addEventListener("end",R),()=>{C.removeEventListener("start",F),C.removeEventListener("end",R),C.removeEventListener("change",I)}},[s,a,l,C,h,y]),de.useEffect(()=>{if(n){const I=g().controls;return x({controls:C}),()=>x({controls:I})}},[n,C]),de.createElement("primitive",lg({ref:c,object:C,enableDamping:i},u))}),ab={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},tY="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",_R=n=>Array.isArray(n);function z6({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:r=void 0,extensions:i}={}){var o;let s=null,a=!1,l;if(t){if(!(t in ab))throw new Error("Preset must be one of: "+Object.keys(ab).join(", "));n=ab[t],e=tY}if(a=_R(n),l=_R(n)?"cube":n.startsWith("data:application/exr")?"exr":n.startsWith("data:application/hdr")?"hdr":(o=n.split(".").pop())==null||(o=o.split("?"))==null||(o=o.shift())==null?void 0:o.toLowerCase(),s=a?JF:l==="hdr"?QX:l==="exr"?eY:null,!s)throw new Error("useEnvironment: Unrecognized file extension: "+n);const u=_A(s,a?[n]:n,d=>{d.setPath==null||d.setPath(e),i&&i(d)}),c=a?u[0]:u;c.mapping=a?Du:ng;const h=3001,f=3e3;return"colorSpace"in c?c.colorSpace=r??a?"srgb":"srgb-linear":c.encoding=r??a?h:f,c}const nY=n=>n.current&&n.current.isScene,rY=n=>nY(n)?n.current:n;function MA(n,e,t,r,i=0){const o=rY(e||t),s=o.background,a=o.environment,l=o.backgroundBlurriness||0;return n!=="only"&&(o.environment=r),n&&(o.background=r),n&&o.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=i),()=>{n!=="only"&&(o.environment=a),n&&(o.background=s),n&&o.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=l)}}function EA({scene:n,background:e=!1,blur:t,map:r}){const i=fs(o=>o.scene);return de.useLayoutEffect(()=>{if(r)return MA(e,n,i,r,t)},[i,n,r,e,t]),null}function H6({background:n=!1,scene:e,blur:t,...r}){const i=z6(r),o=fs(s=>s.scene);return de.useLayoutEffect(()=>MA(n,e,o,i,t),[i,n,e,o,t]),null}function iY({children:n,near:e=1,far:t=1e3,resolution:r=256,frames:i=1,map:o,background:s=!1,blur:a,scene:l,files:u,path:c,preset:h=void 0,extensions:f}){const d=fs(_=>_.gl),v=fs(_=>_.scene),y=de.useRef(null),[x]=de.useState(()=>new og),g=de.useMemo(()=>{const _=new W3(r);return _.texture.type=Ls,_},[r]);de.useLayoutEffect(()=>(i===1&&y.current.update(d,x),MA(s,l,v,g.texture,a)),[n,x,g.texture,l,v,s,i,d]);let S=1;return M6(()=>{(i===1/0||S<i)&&(y.current.update(d,x),S++)}),de.createElement(de.Fragment,null,fX(de.createElement(de.Fragment,null,n,de.createElement("cubeCamera",{ref:y,args:[e,t,g]}),u||h?de.createElement(H6,{background:!0,files:u,preset:h,path:c,extensions:f}):o?de.createElement(EA,{background:!0,map:o,extensions:f}):null),x))}function oY(n){var e,t,r,i;const o=z6(n),s=n.map||o;de.useMemo(()=>d6({GroundProjectedEnvImpl:WX}),[]);const a=de.useMemo(()=>[s],[s]),l=(e=n.ground)==null?void 0:e.height,u=(t=n.ground)==null?void 0:t.radius,c=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return de.createElement(de.Fragment,null,de.createElement(EA,lg({},n,{map:s})),de.createElement("groundProjectedEnvImpl",{args:a,scale:c,height:l,radius:u}))}function sY(n){return n.ground?de.createElement(oY,n):n.map?de.createElement(EA,n):n.children?de.createElement(iY,n):de.createElement(H6,n)}fr.DEFAULT_UP.set(0,0,1);function aY(){const{camera:n,set:e}=fs();return de.useEffect(()=>{if(n instanceof ku)console.log("Camera is already orthographic"),n.position.set(0,-400,200),n.lookAt(0,0,0),n.updateProjectionMatrix();else{console.log("Converting to orthographic camera");const t=window.innerWidth/window.innerHeight,r=1e3,i=new ku(r*t/-2,r*t/2,r/2,r/-2,.01,1e4);i.position.set(0,-400,200),i.lookAt(0,0,0),i.updateProjectionMatrix(),e({camera:i})}},[n,e]),null}function lY(){return Je(Xm,{children:[ce("axesHelper",{args:[200]}),ce("gridHelper",{args:[400,40,8947848,4473924],rotation:[Math.PI/2,0,0]})]})}function uY({children:n}){const e=Math.min(window.devicePixelRatio,2);return ce(de.Suspense,{fallback:null,children:Je(L6,{style:{width:"100%",height:"100%",backgroundColor:"#f5f5f5",touchAction:"none"},dpr:e,frameloop:"demand",orthographic:!0,camera:{position:[0,-400,200],zoom:1,far:1e4,near:.01},children:[ce(aY,{}),ce(U6,{enableRotate:!0,enablePan:!0,enableZoom:!0,mouseButtons:{LEFT:wu.ROTATE,MIDDLE:wu.DOLLY,RIGHT:wu.PAN},touches:{ONE:gc.ROTATE,TWO:gc.DOLLY_PAN},zoomToCursor:!0,rotateSpeed:.7,panSpeed:.5,zoomSpeed:1.2}),ce("ambientLight",{intensity:4}),ce("pointLight",{position:[100,100,100]}),ce(lY,{}),n]})})}function bR(n,e,t){if(n.clearGroups(),delete n.userData.faceGroups,n.setIndex(e.triangles),n.setAttribute("position",new nn(e.vertices,3)),e.faceGroups){let r=new Set;t&&(r=new Set(t)),n.userData.faceGroups=e.faceGroups,e.faceGroups.forEach(({start:i,count:o,faceId:s})=>{n.addGroup(i,o,r.has(s)?1:0)})}else n.addGroup(0,e.triangles.length,0);e.normals&&e.normals.length?n.setAttribute("normal",new nn(e.normals,3)):n.computeVertexNormals(),n.computeBoundingBox()}function MR(n,e,t){if(n.clearGroups(),delete n.userData.edgeGroups,n.setAttribute("position",new nn(e.lines,3)),!!e)if(e.edgeGroups){let r=new Set;t&&(r=new Set(t)),n.userData.edgeGroups=e.edgeGroups,e.edgeGroups.forEach(({start:i,count:o,edgeId:s})=>{n.addGroup(i,o,r.has(s)?1:0)})}else n.addGroup(0,e.lines.length/3,0)}function ER(n,e){n.clearGroups(),delete n.userData.edgeGroups,n.copy(new rA(e,2))}const cY=D4.memo(function({faces:e,edges:t,helperSpaces:r=[],highQuality:i=!1}){const{invalidate:o}=fs(),[s,a]=de.useState([]),l=de.useRef(new Rn),u=de.useRef(new Rn);de.useEffect(()=>{s.forEach(d=>{d.body.dispose(),d.lines.dispose()});const f=r.map(()=>({body:new Rn,lines:new Rn}));a(f)},[r.length]),de.useLayoutEffect(()=>{if(e)try{console.time("[PERF] syncFaces"),bR(l.current,e),console.timeEnd("[PERF] syncFaces")}catch(f){console.error("[ERROR] Error in syncFaces:",f)}if(t)try{console.time("[PERF] syncLines"),MR(u.current,t),console.timeEnd("[PERF] syncLines")}catch(f){console.error("[ERROR] Error in syncLines:",f)}else if(e)try{console.time("[PERF] syncLinesFromFaces"),ER(u.current,l.current),console.timeEnd("[PERF] syncLinesFromFaces")}catch(f){console.error("[ERROR] Error in syncLinesFromFaces:",f)}s.length===r.length&&r.forEach((f,d)=>{f.faces&&bR(s[d].body,f.faces),f.edges?MR(s[d].lines,f.edges):f.faces&&ER(s[d].lines,s[d].body)}),o()},[e,t,r,s,o]),de.useEffect(()=>()=>{l.current.dispose(),u.current.dispose(),s.forEach(f=>{f.body.dispose(),f.lines.dispose()})},[s]);const c=i?{color:"#6a92a6",metalness:.4,roughness:.3,envMapIntensity:.8,flatShading:!1,polygonOffset:!0,polygonOffsetFactor:2,polygonOffsetUnits:1,castShadow:!0,receiveShadow:!0}:{color:"#5a8296",polygonOffset:!0,polygonOffsetFactor:2,polygonOffsetUnits:1},h=i?{color:"#304352",linewidth:1.5}:{color:"#3c5a6e"};return Je("group",{children:[ce("mesh",{geometry:l.current,castShadow:!0,receiveShadow:!0,children:i?ce("meshStandardMaterial",{...c}):ce("meshStandardMaterial",{...c})}),ce("lineSegments",{geometry:u.current,children:ce("lineBasicMaterial",{...h})}),s.length===r.length&&s.map((f,d)=>Je("group",{children:[ce("mesh",{geometry:f.body,castShadow:!0,children:ce("meshStandardMaterial",{color:"#ff0000",transparent:!0,opacity:.3,depthWrite:!1,polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:1,roughness:.7,metalness:0})}),ce("lineSegments",{geometry:f.lines,children:ce("lineBasicMaterial",{color:"#ff3333"})})]},`helper-${d}`))]})});function hY({path:n,stroke:e,strokeWidth:t,strokeDasharray:r,onPathClick:i,viewInstanceId:o,partName:s,partIndex:a}){if(!n)return null;const l=de.useCallback(d=>{d.stopPropagation(),i&&i(n.id,n,s,a,o)},[i,n,s,a,o]),u=n.data||(typeof n=="string"?n:String(n)),c=n.id,h=typeof t=="number"&&!isNaN(t)?t:1,f=Math.max(5,h*5);return Je("g",{children:[ce("path",{d:u,stroke:e,strokeWidth:t,fill:"none",strokeDasharray:r,style:{vectorEffect:"non-scaling-stroke",pointerEvents:"none"}}),ce("path",{id:c,d:u,stroke:"transparent",strokeWidth:f,fill:"none",style:{vectorEffect:"non-scaling-stroke",cursor:"pointer"},onClick:l})]})}const hd={sub:(n,e)=>[n[0]-e[0],n[1]-e[1]],add:(n,e)=>[n[0]+e[0],n[1]+e[1]],scale:(n,e)=>[n[0]*e,n[1]*e],len:n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),normalize:n=>{const e=hd.len(n);return e>1e-9?hd.scale(n,1/e):[0,0]},perp:n=>[-n[1],n[0]],dot:(n,e)=>n[0]*e[0]+n[1]*e[1]};function fY({measurementData:n,innerSvgRef:e,onUpdatePosition:t}){const{pathId:r,type:i,geometry:o,textPosition:s}=n,a="#222222",l=.15,u=2.2,c=1.2,h=1.2,f=.8,d=1.2;let v=null;if(i==="line"&&o.endpoints){const[y,x]=o.endpoints,S=(o.length||0).toFixed(2),_=x[0]-y[0],E=x[1]-y[1],C=(y[0]+x[0])/2,I=(y[1]+x[1])/2,F=Math.sqrt(_*_+E*E),R=F>1e-6?_/F:1,k=F>1e-6?E/F:0,L=-k,N=R,z=s.x-C,H=s.y-I,G=z*L+H*N,K=Math.abs(G)<h?Math.sign(G||1)*h:G,ee=[y[0]+L*K,y[1]+N*K],le=[x[0]+L*K,x[1]+N*K],V=[y[0]+L*Math.sign(K)*f,y[1]+N*Math.sign(K)*f],J=[x[0]+L*Math.sign(K)*f,x[1]+N*Math.sign(K)*f],j=[ee[0]+L*Math.sign(K)*d,ee[1]+N*Math.sign(K)*d],ie=[le[0]+L*Math.sign(K)*d,le[1]+N*Math.sign(K)*d],D=F,q=R,Z=k,Q=`M ${ee[0]} ${ee[1]} 
                    l ${q*c} ${Z*c} 
                    l ${-Z*c*.35} ${q*c*.35} 
                    l ${-q*c*.65} ${-Z*c*.65} 
                    z`,se=`M ${le[0]} ${le[1]} 
                    l ${-q*c} ${-Z*c} 
                    l ${Z*c*.35} ${-q*c*.35} 
                    l ${q*c*.65} ${Z*c*.65} 
                    z`,Ce=(S.length*u*.65+h*2)/2,$e=(s.x-ee[0])*q+(s.y-ee[1])*Z,ke=Math.max(c,$e-Ce),fe=Math.min(D-c,$e+Ce),Ie=[ee[0]+q*ke,ee[1]+Z*ke],Ue=[ee[0]+q*fe,ee[1]+Z*fe],Te=ke>c+1e-6,ae=fe<D-c-1e-6;v=Je("g",{id:r,className:"measurement-group",children:[ce("line",{x1:V[0],y1:V[1],x2:j[0],y2:j[1],stroke:a,strokeWidth:l,style:{vectorEffect:"non-scaling-stroke"}}),ce("line",{x1:J[0],y1:J[1],x2:ie[0],y2:ie[1],stroke:a,strokeWidth:l,style:{vectorEffect:"non-scaling-stroke"}}),Te&&ce("line",{x1:ee[0],y1:ee[1],x2:Ie[0],y2:Ie[1],stroke:a,strokeWidth:l,style:{vectorEffect:"non-scaling-stroke"}}),ae&&ce("line",{x1:Ue[0],y1:Ue[1],x2:le[0],y2:le[1],stroke:a,strokeWidth:l,style:{vectorEffect:"non-scaling-stroke"}}),ce("path",{d:Q,fill:a,stroke:"none",style:{vectorEffect:"non-scaling-stroke"}}),ce("path",{d:se,fill:a,stroke:"none",style:{vectorEffect:"non-scaling-stroke"}}),Je("g",{children:[ce("rect",{x:s.x-S.length*u*.3,y:s.y-u*.7,width:S.length*u*.6,height:u*1.4,fill:"white",fillOpacity:"0.8",rx:u*.2,ry:u*.2,style:{vectorEffect:"non-scaling-stroke"}}),Je("text",{x:s.x,y:s.y,fontSize:u,fill:a,stroke:"none",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"Arial, sans-serif",style:{userSelect:"none",vectorEffect:"non-scaling-stroke"},children:[S," // Display only"]})]})]})}else if(i==="circle"&&o.center&&o.diameter!=null){const[y,x]=o.center,g=o.diameter,S=o.radius||g/2,_=`${g.toFixed(2)}`,E=_.length*u*.65,C=S*2<E*1.5,I=s.x-y,F=s.y-x,R=I*I+F*F,k=Math.sqrt(R);let L;R<1e-9?L=0:L=Math.atan2(F,I);const N=Math.cos(L),z=Math.sin(L);if(C){const H=S+h*3;let G=Math.max(k,H);k<H&&(G=H);const K=[y,x],ee=[y+N*G*.9,x+z*G*.9],le={x:y+N*G,y:x+z*G},V=Math.min(S*.5,1);v=Je("g",{id:r,className:"measurement-group",children:[ce("line",{x1:y-V,y1:x,x2:y+V,y2:x,stroke:a,strokeWidth:l,style:{vectorEffect:"non-scaling-stroke"}}),ce("line",{x1:y,y1:x-V,x2:y,y2:x+V,stroke:a,strokeWidth:l,style:{vectorEffect:"non-scaling-stroke"}}),ce("line",{x1:K[0],y1:K[1],x2:ee[0],y2:ee[1],stroke:a,strokeWidth:l,style:{vectorEffect:"non-scaling-stroke"}}),Je("g",{transform:`translate(${le.x-s.x}, ${le.y-s.y})`,children:[ce("rect",{x:s.x-_.length*u*.3,y:s.y-u*.7,width:_.length*u*.6,height:u*1.4,fill:"white",fillOpacity:"0.9",rx:u*.2,ry:u*.2,style:{vectorEffect:"non-scaling-stroke"}}),Je("text",{x:s.x,y:s.y,fontSize:u,fill:a,stroke:"none",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"Arial, sans-serif",style:{userSelect:"none",vectorEffect:"non-scaling-stroke"},children:[_," // Display only"]})]})]})}else{const H=[y-N*S,x-z*S],G=[y+N*S,x+z*S],K=`M ${H[0]} ${H[1]} 
                      l ${N*c} ${z*c} 
                      l ${-z*c*.35} ${N*c*.35} 
                      l ${-N*c*.65} ${-z*c*.65} 
                      z`,ee=`M ${G[0]} ${G[1]} 
                      l ${-N*c} ${-z*c} 
                      l ${z*c*.35} ${-N*c*.35} 
                      l ${N*c*.65} ${z*c*.65} 
                      z`,V=(E+h*2)/2,J=hd.dot([I,F],[N,z]),j=-S+c,ie=S-c,D=Math.max(j,Math.min(ie,J-V)),q=Math.max(j,Math.min(ie,J+V)),Z=[y+N*D,x+z*D],Q=[y+N*q,x+z*q],se=hd.len(hd.sub(Z,H))>1e-6,me=hd.len(hd.sub(G,Q))>1e-6;v=Je("g",{id:r,className:"measurement-group",children:[se&&ce("line",{x1:H[0],y1:H[1],x2:Z[0],y2:Z[1],stroke:a,strokeWidth:l,style:{vectorEffect:"non-scaling-stroke"}}),me&&ce("line",{x1:Q[0],y1:Q[1],x2:G[0],y2:G[1],stroke:a,strokeWidth:l,style:{vectorEffect:"non-scaling-stroke"}}),ce("path",{d:K,fill:a,stroke:"none",style:{vectorEffect:"non-scaling-stroke"}}),ce("path",{d:ee,fill:a,stroke:"none",style:{vectorEffect:"non-scaling-stroke"}}),Je("g",{children:[ce("rect",{x:s.x-_.length*u*.3,y:s.y-u*.7,width:_.length*u*.6,height:u*1.4,fill:"white",fillOpacity:"0.9",rx:u*.2,ry:u*.2,style:{vectorEffect:"non-scaling-stroke"}}),Je("text",{x:s.x,y:s.y,fontSize:u,fill:a,stroke:"none",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"Arial, sans-serif",style:{userSelect:"none",vectorEffect:"non-scaling-stroke"},children:[_," // Display only"]})]})]})}}return v}function dY({viewItemData:n,onPathClick:e,measurements:t}){const{id:r,viewType:i,svgData:o}=n,s=de.useRef(null);if(!o||!o.paths||!o.viewBox)return Je("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",color:"#ccc",fontSize:"10px",border:"1px dashed #eee"},children:["Generating ",i,"..."]});const{paths:a,viewBox:l}=o;return ce("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden"},children:ce("svg",{ref:s,width:"100%",height:"100%",viewBox:l,preserveAspectRatio:"xMidYMid meet",style:{display:"block"},children:Je("g",{stroke:"#333",strokeWidth:"0.5",fill:"none",children:[" ",a.map(c=>ce(hY,{path:c,onPathClick:e,viewInstanceId:r},c.id)),t&&t.map(c=>ce(fY,{measurementData:c,innerSvgRef:s},c.pathId))]})})})}const pY=n=>{if(!n||!n.includes("x"))return[1,1];const[e,t]=n.split("x").map(Number);return[isNaN(e)?1:e,isNaN(t)?1:t]};function mY({viewboxData:n,selectedTarget:e,onCellSelection:t,onTitleBlockChange:r,onPathClick:i,measurements:o,zoomLevel:s}){const{id:a,layout:l,titleBlock:u,items:c}=n,[h,f]=pY(l),d=(S,_)=>{r&&r(a,S,_)},v={border:"1px solid #ccc",backgroundColor:"white",padding:"10px",marginBottom:"20px",minWidth:"300px",minHeight:"200px",position:"relative",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",display:"flex",flexDirection:"column"},y={borderTop:"1px solid #eee",marginTop:"auto",paddingTop:"5px",fontSize:"10px",color:"#555"};console.log(`[INFO] Rendering Viewbox: ${a}, Layout: ${l} (${h}x${f}), Items: ${c.length}`);const x={flexGrow:1,display:"grid",gridTemplateRows:`repeat(${h}, 1fr)`,gridTemplateColumns:`repeat(${f}, 1fr)`,gap:"5px",border:"1px dashed #ccc",padding:"5px",marginBottom:"5px",minHeight:"100px"},g={border:"1px solid #eee",backgroundColor:"#f9f9f9",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",color:"#aaa",cursor:"pointer",transition:"border-color 0.2s ease-in-out"};return Je("div",{style:v,"data-viewbox-id":a,children:[ce("div",{style:x,children:Array.from({length:h*f}).map((S,_)=>{const E=c&&c[_],C=e&&e.viewboxId===a&&e.cellIndex===_,I={...g,borderColor:C?"#2196F3":"#eee",borderWidth:C?"2px":"1px"};return ce("div",{style:I,onClick:F=>{F.target.closest("svg")||t(a,_)},children:E?ce(dY,{viewItemData:E,onPathClick:i,measurements:o.filter(F=>F.viewInstanceId===E.id),zoomLevel:s}):`Cell ${_+1} (Empty)`},_)})}),Je("div",{style:y,children:[Je("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"3px"},children:[Je("span",{style:{display:"flex",alignItems:"center",flexBasis:"50%",marginRight:"5px"},children:[ce("label",{htmlFor:`project-${a}`,style:{marginRight:"3px",whiteSpace:"nowrap"},children:"Project:"}),ce("input",{type:"text",id:`project-${a}`,value:u.project||"",onChange:S=>d("project",S.target.value),style:{fontSize:"10px",padding:"1px 3px",border:"1px solid #ccc",width:"100%"}})]}),Je("span",{style:{display:"flex",alignItems:"center",flexBasis:"50%"},children:[ce("label",{htmlFor:`partName-${a}`,style:{marginRight:"3px",whiteSpace:"nowrap"},children:"Part Name:"}),ce("input",{type:"text",id:`partName-${a}`,value:u.partName||"",onChange:S=>d("partName",S.target.value),style:{fontSize:"10px",padding:"1px 3px",border:"1px solid #ccc",width:"100%"}})]})]}),Je("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"3px"},children:[Je("span",{style:{display:"flex",alignItems:"center",flexBasis:"50%",marginRight:"5px"},children:[ce("label",{htmlFor:`scale-${a}`,style:{marginRight:"3px"},children:"Scale:"}),ce("input",{type:"text",id:`scale-${a}`,value:u.scale||"",onChange:S=>d("scale",S.target.value),style:{fontSize:"10px",padding:"1px 3px",border:"1px solid #ccc",width:"100%"}})]}),Je("span",{style:{display:"flex",alignItems:"center",flexBasis:"50%"},children:[ce("label",{htmlFor:`material-${a}`,style:{marginRight:"3px"},children:"Material:"}),ce("input",{type:"text",id:`material-${a}`,value:u.material||"",onChange:S=>d("material",S.target.value),style:{fontSize:"10px",padding:"1px 3px",border:"1px solid #ccc",width:"100%"}})]})]}),Je("div",{style:{display:"flex",justifyContent:"space-between"},children:[Je("span",{style:{display:"flex",alignItems:"center",flexBasis:"50%",marginRight:"5px"},children:[ce("label",{htmlFor:`drawnBy-${a}`,style:{marginRight:"3px",whiteSpace:"nowrap"},children:"Drawn By:"}),ce("input",{type:"text",id:`drawnBy-${a}`,value:u.drawnBy||"",onChange:S=>d("drawnBy",S.target.value),style:{fontSize:"10px",padding:"1px 3px",border:"1px solid #ccc",width:"100%"}})]}),Je("span",{style:{display:"flex",alignItems:"center",flexBasis:"50%"},children:[ce("label",{htmlFor:`date-${a}`,style:{marginRight:"3px"},children:"Date:"}),ce("input",{type:"text",id:`date-${a}`,value:u.date||"",onChange:S=>d("date",S.target.value),style:{fontSize:"10px",padding:"1px 3px",border:"1px solid #ccc",width:"100%"}})]})]})]})]})}const zt=()=>{throw new Error("oppencascade has not been loaded")};globalThis.FinalizationRegistry||(console.log("Garbage collection will not work"),globalThis.FinalizationRegistry=()=>({register:()=>null,unregister:()=>null}));const I0=new globalThis.FinalizationRegistry(n=>{try{n.delete()}catch(e){console.error(e)}});class cl{constructor(e){this.oc=zt(),e&&I0.register(this,e,e),this._wrapped=e}get wrapped(){if(this._wrapped===null)throw new Error("This object has been deleted");return this._wrapped}set wrapped(e){this._wrapped&&(I0.unregister(this._wrapped),this._wrapped.delete()),I0.register(this,e,e),this._wrapped=e}delete(){var e;I0.unregister(this.wrapped),(e=this.wrapped)==null||e.delete(),this._wrapped=null}}const ii=()=>{function n(e){return I0.register(n,e),e}return n},so=n=>{const e=new Set;return[t=>(e.add(t),t),()=>{[...e.values()].forEach(t=>t.delete()),e.clear()},n?e:void 0]},G6=2147483647,zl=Math.PI/180,Q0=180/Math.PI,lb=n=>Math.round(n*1e3)/1e3,Xv=(n,e,t)=>{const r=zt(),i=al(n),o=ug(e);let s;if(t){const a=ug(t);s=new r.gp_Ax3_3(i,o,a),a.delete()}else s=new r.gp_Ax3_4(i,o);return i.delete(),o.delete(),s},fS=(n,e,t)=>{const r=zt(),i=al(n),o=ug(e);let s;if(t){const a=ug(t);s=new r.gp_Ax2_2(i,o,a),a.delete()}else s=new r.gp_Ax2_3(i,o);return i.delete(),o.delete(),s},ev=(n,e)=>{const t=zt(),r=al(n),i=ug(e),o=new t.gp_Ax1_2(r,i);return r.delete(),i.delete(),o},gY=(n=[0,0,0])=>{const e=zt();if(Array.isArray(n)){if(n.length===3)return new e.gp_Vec_4(...n);if(n.length===2)return new e.gp_Vec_4(...n,0)}else{if(n instanceof Rt)return new e.gp_Vec_3(n.wrapped.XYZ());if(n.XYZ)return new e.gp_Vec_3(n.XYZ())}return new e.gp_Vec_4(0,0,0)};class Rt extends cl{constructor(e=[0,0,0]){super(gY(e))}get repr(){return`x: ${lb(this.x)}, y: ${lb(this.y)}, z: ${lb(this.z)}`}get x(){return this.wrapped.X()}get y(){return this.wrapped.Y()}get z(){return this.wrapped.Z()}get Length(){return this.wrapped.Magnitude()}toTuple(){return[this.x,this.y,this.z]}cross(e){return new Rt(this.wrapped.Crossed(e.wrapped))}dot(e){return this.wrapped.Dot(e.wrapped)}sub(e){return new Rt(this.wrapped.Subtracted(e.wrapped))}add(e){return new Rt(this.wrapped.Added(e.wrapped))}multiply(e){return new Rt(this.wrapped.Multiplied(e))}normalized(){return new Rt(this.wrapped.Normalized())}normalize(){return this.wrapped.Normalize(),this}getCenter(){return this}getAngle(e){return this.wrapped.Angle(e.wrapped)*Q0}projectToPlane(e){const t=e.origin,r=e.zDir,i=this.sub(t),o=r.multiply(i.dot(r)/r.Length**2),s=this.sub(o);return i.delete(),o.delete(),s}equals(e){return this.wrapped.IsEqual(e.wrapped,1e-5,1e-5)}toPnt(){return new this.oc.gp_Pnt_2(this.wrapped.XYZ())}toDir(){return new this.oc.gp_Dir_3(this.wrapped.XYZ())}rotate(e,t=[0,0,0],r=[0,0,1]){const i=ev(t,r);return this.wrapped.Rotate(i,e*zl),i.delete(),this}}const vY={X:[1,0,0],Y:[0,1,0],Z:[0,0,1]};function yY(n){return n==="X"||n==="Y"||n==="Z"?vY[n]:n}function al(n){const e=new Rt(n),t=e.toPnt();return e.delete(),t}function ug(n){const e=new Rt(n),t=e.toDir();return e.delete(),t}class Hd extends cl{constructor(e){const t=zt();super(e||new t.gp_Trsf_1)}translate(e,t=0,r=0){const i=new Rt(typeof e=="number"?[e,t,r]:e);return this.wrapped.SetTranslation_1(i.wrapped),this}rotate(e,t=[0,0,0],r=[0,0,1]){const i=ug(r),o=al(t),s=new this.oc.gp_Ax1_2(o,i);return this.wrapped.SetRotation_1(s,e*zl),s.delete(),i.delete(),o.delete(),this}mirror(e="YZ",t){const r=ii();let i,o;if(typeof e=="string"){const a=r(V6(e,t));i=a.origin,o=a.zDir}else e instanceof Fs?(i=t||e.origin,o=e.zDir):(i=t||[0,0,0],o=e);const s=r(fS(i,o));return this.wrapped.SetMirror_3(s),this}scale(e,t){const r=al(e);return this.wrapped.SetScale(r,t),r.delete(),this}coordSystemChange(e,t){const r=ii(),i=r(e==="reference"?new this.oc.gp_Ax3_1:Xv(e.origin,e.zDir,e.xDir)),o=r(t==="reference"?new this.oc.gp_Ax3_1:Xv(t.origin,t.zDir,t.xDir));return this.wrapped.SetTransformation_1(i,o),this}transformPoint(e){const t=al(e),r=t.Transformed(this.wrapped);return t.delete(),r}transform(e){return new this.oc.BRepBuilderAPI_Transform_2(e,this.wrapped,!0).ModifiedShape(e)}}class Fs{constructor(e,t=null,r=[0,0,1]){this.oc=zt();const i=new Rt(r);if(i.Length===0)throw new Error("normal should be non null");this.zDir=i.normalize();let o;if(t)o=new Rt(t);else{const s=Xv(e,i);o=new Rt(s.XDirection()),s.delete()}if(o.Length===0)throw new Error("xDir should be non null");this.xDir=o.normalize(),this.yDir=this.zDir.cross(this.xDir).normalize(),this.origin=new Rt(e)}delete(){this.localToGlobal.delete(),this.xDir.delete(),this.yDir.delete(),this.zDir.delete(),this._origin.delete()}clone(){return new Fs(this.origin,this.xDir,this.zDir)}get origin(){return this._origin}set origin(e){this._origin=e,this._calcTransforms()}translateTo(e){const t=this.clone();return t.origin=new Rt(e),t}translate(e,t=0,r=0){const i=new Rt(typeof e=="number"?[e,t,r]:e);return this.translateTo(this.origin.add(i))}translateX(e){return this.translate(e,0,0)}translateY(e){return this.translate(0,e,0)}translateZ(e){return this.translate(0,0,e)}pivot(e,t=[1,0,0]){const r=yY(t),i=new Rt(this.zDir).rotate(e,[0,0,0],r),o=new Rt(this.xDir).rotate(e,[0,0,0],r);return new Fs(this.origin,o,i)}rotate2DAxes(e){const t=new Rt(this.xDir).rotate(e,[0,0,0],this.zDir);return new Fs(this.origin,t,this.zDir)}_calcTransforms(){const e=new this.oc.gp_Ax3_1,t=Xv(this.origin,this.zDir,this.xDir);new this.oc.gp_Trsf_1().SetTransformation_1(e,t),this.globalToLocal=new Hd,this.globalToLocal.coordSystemChange("reference",{origin:this.origin,zDir:this.zDir,xDir:this.xDir}),this.localToGlobal=new Hd,this.localToGlobal.coordSystemChange({origin:this.origin,zDir:this.zDir,xDir:this.xDir},"reference")}setOrigin2d(e,t){this.origin=this.toWorldCoords([e,t])}toLocalCoords(e){const t=this.globalToLocal.transformPoint(e),r=new Rt(t);return t.delete(),r}toWorldCoords(e){const t=this.localToGlobal.transformPoint(e),r=new Rt(t);return t.delete(),r}}const xY={XY:{xDir:[1,0,0],normal:[0,0,1]},YZ:{xDir:[0,1,0],normal:[1,0,0]},ZX:{xDir:[0,0,1],normal:[0,1,0]},XZ:{xDir:[1,0,0],normal:[0,-1,0]},YX:{xDir:[0,1,0],normal:[0,0,-1]},ZY:{xDir:[0,0,1],normal:[-1,0,0]},front:{xDir:[1,0,0],normal:[0,0,1]},back:{xDir:[-1,0,0],normal:[0,0,-1]},left:{xDir:[0,0,1],normal:[-1,0,0]},right:{xDir:[0,0,-1],normal:[1,0,0]},top:{xDir:[1,0,0],normal:[0,1,0]},bottom:{xDir:[1,0,0],normal:[0,-1,0]}},V6=(n,e=[0,0,0])=>{const t=xY[n];if(!t)throw new Error(`Could not find plane ${n}`);let r;return typeof e=="number"?r=t.normal.map(i=>i*e):r=e,new Fs(r,t.xDir,t.normal)};let wY=class extends cl{constructor(e){const t=zt();let r=e;r||(r=new t.Bnd_Box_1),super(r)}get repr(){const[e,t]=this.bounds;return`${new Rt(e).repr} - ${new Rt(t).repr}`}get bounds(){const e={current:0},t={current:0},r={current:0},i={current:0},o={current:0},s={current:0};return this.wrapped.Get(e,t,r,i,o,s),[[e.current,t.current,r.current],[i.current,o.current,s.current]]}get center(){const[[e,t,r],[i,o,s]]=this.bounds;return[e+(i-e)/2,t+(o-t)/2,r+(s-r)/2]}get width(){const[[e],[t]]=this.bounds;return Math.abs(t-e)}get height(){const[[,e],[,t]]=this.bounds;return Math.abs(t-e)}get depth(){const[[,,e],[,,t]]=this.bounds;return Math.abs(t-e)}add(e){this.wrapped.Add_1(e.wrapped)}isOut(e){return this.wrapped.IsOut_4(e.wrapped)}};function ff(n="XY",e=[0,0,0]){return n instanceof Fs?n.clone():V6(n,e)}function SY(n,e,t=[0,0,0],r=[0,0,1]){const i=new Hd;i.rotate(e,t,r);const o=i.transform(n);return i.delete(),o}function _Y(n,e){const t=new Hd;t.translate(e);const r=t.transform(n);return t.delete(),r}function bY(n,e,t){const r=new Hd;r.mirror(e,t);const i=r.transform(n);return r.delete(),i}function MY(n,e,t){const r=new Hd;r.scale(e,t);const i=r.transform(n);return r.delete(),i}function $x(n){return Array.isArray(n)&&n.length===2}let p2=null;const AR=n=>{if(p2&&!n)return p2;const t=zt().GeomAbs_CurveType;return p2=new Map([[t.GeomAbs_Line,"LINE"],[t.GeomAbs_Circle,"CIRCLE"],[t.GeomAbs_Ellipse,"ELLIPSE"],[t.GeomAbs_Hyperbola,"HYPERBOLA"],[t.GeomAbs_Parabola,"PARABOLA"],[t.GeomAbs_BezierCurve,"BEZIER_CURVE"],[t.GeomAbs_BSplineCurve,"BSPLINE_CURVE"],[t.GeomAbs_OffsetCurve,"OFFSET_CURVE"],[t.GeomAbs_OtherCurve,"OTHER_CURVE"]]),p2},E1=n=>{let e=AR().get(n);if(e||(e=AR(!0).get(n)),!e)throw new Error("unknown type");return e};function EY(n,e){const t=Math.pow(10,e),r=e<0?n:.01/t+n;return Math.round(r*t)/t}function AY(n){return Array.from(Array(n).keys())}function Um(n){const e=Math.min(...n.map(t=>t.length));return AY(e).map(t=>n.map(r=>r[t]))}function Xx(n){return Math.round(n*100)/100}const tv=([n,e])=>`(${Xx(n)},${Xx(e)})`,TR=(n,e=1e-9)=>{let t=n;return Math.abs(n)<e&&(t=0),t.toFixed(-Math.log10(e))},W6=(n,e=1e-9)=>Array.from(new Map(n.map(([t,r])=>[`[${TR(t,e)},${TR(r,e)}]`,[t,r]])).values()),Yo=([n,e])=>{const t=zt();return new t.gp_Pnt2d_3(n,e)},TY=([n,e])=>{const t=zt();return new t.gp_Dir2d_4(n,e)},j6=([n,e])=>{const t=zt();return new t.gp_Vec2d_4(n,e)},cg=(n,e)=>{const t=zt(),[r,i]=so(),o=new t.gp_Ax2d_2(r(Yo(n)),r(TY(e)));return i(),o};class A1 extends cl{constructor(e){const t=zt();let r=e;r||(r=new t.Bnd_Box2d),super(r)}get repr(){const[e,t]=this.bounds;return`${tv(e)} - ${tv(t)}`}get bounds(){const e={current:0},t={current:0},r={current:0},i={current:0};return this.wrapped.Get(e,t,r,i),[[e.current,t.current],[r.current,i.current]]}get center(){const[[e,t],[r,i]]=this.bounds;return[e+(r-e)/2,t+(i-t)/2]}get width(){const[[e],[t]]=this.bounds;return Math.abs(t-e)}get height(){const[[,e],[,t]]=this.bounds;return Math.abs(t-e)}outsidePoint(e=1){const[t,r]=this.bounds,i=r[0]-t[0],o=r[1]-t[1];return[r[0]+i/100*e,r[1]+o/100*e*.9]}add(e){this.wrapped.Add_1(e.wrapped)}isOut(e){return this.wrapped.IsOut_4(e.wrapped)}containsPoint(e){const r=ii()(Yo(e));return!this.wrapped.IsOut_1(r)}}const ws=([n,e],[t,r],i=1e-6)=>Math.abs(n-t)<=i&&Math.abs(e-r)<=i,hg=([n,e],[t,r])=>[n+t,e+r],AA=([n,e],[t,r])=>[n-t,e-r],UM=([n,e],t)=>[n*t,e*t],Mu=([n,e],[t,r]=[0,0])=>Math.sqrt((n-t)**2+(e-r)**2),CY=([n,e],[t,r]=[0,0])=>(n-t)**2+(e-r)**2;function PY([n,e],[t,r]){return n*r-e*t}const RY=([n,e],[t,r]=[0,0])=>Math.atan2(r*n-e*t,n*t+e*r),LY=([n,e],[t,r]=[0,0])=>Math.atan2(r-e,t-n),Gh=([n,e])=>{const t=Mu([n,e]);return[n/t,e/t]},kY=(n,e,t=[0,0])=>{const[r,i]=n,[o,s]=t,a=r-o,l=i-s,u=Math.sin(e),c=Math.cos(e),h=a*c-l*u,f=a*u+l*c;return[h+o,f+s]},Cm=(n,e)=>{const t=Math.cos(e)*n,r=Math.sin(e)*n;return[t,r]},IY=([n,e])=>{const t=Mu([n,e]),r=Math.atan2(e,n);return[t,r]};class Fi extends cl{constructor(e){const t=zt(),r=e.get();super(new t.Handle_Geom2d_Curve_2(r)),this._boundingBox=null}get boundingBox(){if(this._boundingBox)return this._boundingBox;const e=zt(),t=new e.Bnd_Box2d;return e.BndLib_Add2dCurve.Add_3(this.wrapped,1e-6,t),this._boundingBox=new A1(t),this._boundingBox}get repr(){return`${this.geomType} ${tv(this.firstPoint)} - ${tv(this.lastPoint)}`}get innerCurve(){return this.wrapped.get()}value(e){const t=this.innerCurve.Value(e),r=[t.X(),t.Y()];return t.delete(),r}get firstPoint(){return this.value(this.firstParameter)}get lastPoint(){return this.value(this.lastParameter)}get firstParameter(){return this.innerCurve.FirstParameter()}get lastParameter(){return this.innerCurve.LastParameter()}adaptor(){const e=zt();return new e.Geom2dAdaptor_Curve_2(this.wrapped)}get geomType(){const e=this.adaptor(),t=E1(e.GetType());return e.delete(),t}clone(){return new Fi(this.innerCurve.Copy())}reverse(){this.innerCurve.Reverse()}distanceFromPoint(e){const t=zt(),r=ii(),i=r(new t.Geom2dAPI_ProjectPointOnCurve_2(r(Yo(e)),this.wrapped));let o=1/0;try{o=i.LowerDistance()}catch{o=1/0}return Math.min(o,Mu(e,this.firstPoint),Mu(e,this.lastPoint))}distanceFromCurve(e){const t=zt(),r=ii();let i=1/0;const o=r(new t.Geom2dAPI_ExtremaCurveCurve(this.wrapped,e.wrapped,this.firstParameter,this.lastParameter,e.firstParameter,e.lastParameter));try{i=o.LowerDistance()}catch{i=1/0}return Math.min(i,this.distanceFromPoint(e.firstPoint),this.distanceFromPoint(e.lastPoint),e.distanceFromPoint(this.firstPoint),e.distanceFromPoint(this.lastPoint))}distanceFrom(e){return $x(e)?this.distanceFromPoint(e):this.distanceFromCurve(e)}isOnCurve(e){return this.distanceFromPoint(e)<1e-9}parameter(e,t=1e-9){const r=zt(),i=ii();let o,s;try{const a=i(new r.Geom2dAPI_ProjectPointOnCurve_2(i(Yo(e)),this.wrapped));o=a.LowerDistance(),s=a.LowerDistanceParameter()}catch{if(ws(e,this.firstPoint,t))return this.firstParameter;if(ws(e,this.lastPoint,t))return this.lastParameter;throw new Error("Failed to find parameter")}if(o>t)throw new Error(`Point ${tv(e)} not on curve ${this.repr}, ${o.toFixed(9)}`);return s}tangentAt(e){const t=zt(),[r,i]=so();let o;Array.isArray(e)?o=this.parameter(e):o=(this.innerCurve.LastParameter()-this.innerCurve.FirstParameter())*e+this.innerCurve.FirstParameter();const s=r(new t.gp_Pnt2d_1),a=r(new t.gp_Vec2d_1);this.innerCurve.D1(o,s,a);const l=[a.X(),a.Y()];return i(),l}splitAt(e,t=1e-9){const r=zt(),i=ii();let o=e.map(l=>$x(l)?this.parameter(l,t):l);o=Array.from(new Map(o.map(l=>[EY(l,-Math.log10(t)),l])).values()).sort((l,u)=>l-u);const s=this.firstParameter,a=this.lastParameter;return s>a&&o.reverse(),Math.abs(o[0]-s)<t*100&&(o=o.slice(1)),o.length?(Math.abs(o[o.length-1]-a)<t*100&&(o=o.slice(0,-1)),o.length?Um([[s,...o],[...o,a]]).map(([l,u])=>{try{if(this.geomType==="BEZIER_CURVE"){const h=new r.Geom2d_BezierCurve_1(i(this.adaptor()).Bezier().get().Poles_2());return h.Segment(l,u),new Fi(new r.Handle_Geom2d_Curve_2(h))}if(this.geomType==="BSPLINE_CURVE"){const h=i(this.adaptor()).BSpline().get(),f=new r.Geom2d_BSplineCurve_1(h.Poles_2(),h.Knots_2(),h.Multiplicities_2(),h.Degree(),h.IsPeriodic());return f.Segment(l,u,t),new Fi(new r.Handle_Geom2d_Curve_2(f))}const c=new r.Geom2d_TrimmedCurve(this.wrapped,l,u,!0,!0);return new Fi(new r.Handle_Geom2d_Curve_2(c))}catch{throw new Error("Failed to split the curve")}}):[this]):[this]}}const q6=(n,e=1e-4,t="C0",r=200)=>{const i=zt(),o=ii(),s={C0:i.GeomAbs_Shape.GeomAbs_C0,C1:i.GeomAbs_Shape.GeomAbs_C1,C2:i.GeomAbs_Shape.GeomAbs_C2,C3:i.GeomAbs_Shape.GeomAbs_C3},a=o(new i.Geom2dConvert_ApproxCurve_2(n.ShallowCopy(),e,s[t],r,3));return new Fi(a.Curve())},CR=n=>{if(E1(n.GetType())!=="BSPLINE_CURVE")throw new Error("You can only convert a Bspline");const e=n.BSpline(),t=zt(),r=new t.Geom2dConvert_BSplineCurveToBezierCurve_1(e);function*i(){const s=r.NbArcs();if(s)for(let a=1;a<=s;a++){const l=r.Arc(a);yield new Fi(l)}}const o=Array.from(i());return r.delete(),o};function Yx(n,e={tolerance:1e-4,continuity:"C0",maxSegments:300}){const t=ii();return n.flatMap(r=>{const i=t(r.adaptor()),o=E1(i.GetType());if(o==="ELLIPSE"||o==="CIRCLE"&&ws(r.firstPoint,r.lastPoint))return r.splitAt([.5]);if(["LINE","ELLIPSE","CIRCLE"].includes(o))return r;if(o==="BEZIER_CURVE"){const l=i.Bezier().get().Degree();if([1,2,3].includes(l))return r}if(o==="BSPLINE_CURVE"){const a=CR(i);return Yx(a,e)}const s=q6(i,e.tolerance,e.continuity,e.maxSegments);return Yx(CR(t(s.adaptor())),e)})}function*$6(n){const e=n.NbPoints();if(e)for(let t=1;t<=e;t++){const r=n.Point(t);yield[r.X(),r.Y()]}}function*NY(n){const e=n.NbSegments();if(!e)return;const t=zt();for(let r=1;r<=e;r++){const i=new t.Handle_Geom2d_Curve_1,o=new t.Handle_Geom2d_Curve_1;try{n.Segment(r,i,o)}catch{continue}yield new Fi(i),o.delete()}}const T1=(n,e,t=1e-9)=>{if(n.boundingBox.isOut(e.boundingBox))return{intersections:[],commonSegments:[],commonSegmentsPoints:[]};const r=zt(),i=new r.Geom2dAPI_InterCurveCurve_1;let o,s;try{i.Init_1(n.wrapped,e.wrapped,t),o=Array.from($6(i)),s=Array.from(NY(i))}catch(u){throw console.error(n,e,u),new Error("Intersections failed between curves")}finally{i.delete()}const a=s.filter(u=>ws(u.firstPoint,u.lastPoint,t)).map(u=>u.firstPoint);a.length&&(o.push(...a),s=s.filter(u=>!ws(u.firstPoint,u.lastPoint,t)));const l=s.flatMap(u=>[u.firstPoint,u.lastPoint]);return{intersections:o,commonSegments:s,commonSegmentsPoints:l}},FY=(n,e=1e-9)=>{const t=zt(),r=new t.Geom2dAPI_InterCurveCurve_1;let i;try{r.Init_1(n.wrapped,n.wrapped,e),i=Array.from($6(r))}catch{throw new Error("Self intersection failed")}finally{r.delete()}return i},C1=(n,e)=>{const t=zt(),[r,i]=so(),o=r(new t.GCE2d_MakeSegment_1(r(Yo(n)),r(Yo(e)))).Value(),s=new Fi(o);return ws(s.firstPoint,n)||s.reverse(),i(),s},zM=(n,e,t)=>{const r=zt(),[i,o]=so(),s=i(new r.GCE2d_MakeArcOfCircle_4(i(Yo(n)),i(Yo(e)),i(Yo(t)))).Value();o();const a=new Fi(s);return ws(a.firstPoint,n)||a.wrapped.get().SetTrim(a.lastParameter,a.firstParameter,!0,!0),a},DY=(n,e,t)=>{const r=zt(),[i,o]=so(),s=i(new r.GCE2d_MakeArcOfCircle_5(i(Yo(n)),i(j6(e)),i(Yo(t)))).Value();o();const a=new Fi(s);return ws(a.firstPoint,n)||a.wrapped.get().SetTrim(a.lastParameter,a.firstParameter,!0,!0),a},OY=(n,e,t,r,i=[0,0],o,s=!0)=>{const a=zt(),[l,u]=so(),c=l(new a.gp_Elips2d_2(l(cg(i,o)),n,e,!0)),h=l(new a.GCE2d_MakeArcOfEllipse_1(c,t,r,s)).Value();return u(),new Fi(h)},BY=(n,e,t)=>{const r=zt(),[i,o]=so(),s=i(new r.TColgp_Array1OfPnt2d_2(1,e.length+2));s.SetValue(1,i(Yo(n))),e.forEach((l,u)=>{s.SetValue(u+2,i(Yo(l)))}),s.SetValue(e.length+2,i(Yo(t)));const a=new r.Geom2d_BezierCurve_1(s);return o(),new Fi(new r.Handle_Geom2d_Curve_2(a))},X6=(n,e,t)=>{const r=UM(hg(n,e),.5),i=Mu(t,n),o=Gh(AA(r,t));return zM(n,hg(UM(o,i),t),e)},UY=(n,e,t)=>{const r=Gh(AA(e,n)),i=[r[1],-r[0]],o=[i[0]*t,i[1]*t];return{firstPoint:hg(n,o),lastPoint:hg(e,o)}},HM=(n,e)=>{const t=ii(),r=n.geomType;if(r==="CIRCLE"){const l=t(t(n.adaptor()).Circle()),u=l.Radius(),c=l.IsDirect()?1:-1,h=e*c,f=u+h;if(f<1e-10){const g=t(l.Location()),S=[g.X(),g.Y()],_=E=>{const[C,I]=Gh(AA(E,S));return hg(E,[h*C,h*I])};return{collapsed:!0,firstPoint:_(n.firstPoint),lastPoint:_(n.lastPoint)}}const d=zt(),v=new d.gp_Circ2d_3(l.Axis(),f),y=new d.Geom2d_Circle_1(v),x=new d.Geom2d_TrimmedCurve(new d.Handle_Geom2d_Curve_2(y),n.firstParameter,n.lastParameter,!0,!0);return new Fi(new d.Handle_Geom2d_Curve_2(x))}if(r==="LINE"){const{firstPoint:l,lastPoint:u}=UY(n.firstPoint,n.lastPoint,e);return C1(l,u)}const i=zt(),o=new Fi(new i.Handle_Geom2d_Curve_2(new i.Geom2d_OffsetCurve(n.wrapped,e,!0))),s=q6(o.adaptor());return FY(s).length?{collapsed:!0,firstPoint:s.firstPoint,lastPoint:s.lastPoint}:s};function Y6(n,e,t){const r=PY(n.tangentAt(1),e.tangentAt(0));if(Math.abs(r)<1e-10)return null;const i=r>0?-1:1,o=Math.abs(t)*i,s=HM(n,o),a=HM(e,o);if(!(s instanceof Fi)||!(a instanceof Fi))return null;let l;try{const{intersections:d}=T1(s,a,1e-9);l=d.at(-1)}catch{return null}if(!$x(l))return null;const u=l,c=(d,v)=>{const[y,x]=v.tangentAt(u),g=Gh([-x,y]),S=hg(u,UM(g,o)),_=d.parameter(S,1e-6);return d.splitAt([_])},[h]=c(n,s),[,f]=c(e,a);return{first:h,second:f,center:u}}function GM(n,e,t){const r=Y6(n,e,t);if(!r)return console.warn("Cannot fillet between curves",n.repr,e.repr),[n,e];const{first:i,second:o,center:s}=r;return[i,X6(i.lastPoint,o.firstPoint,s),o]}function VM(n,e,t){const r=Y6(n,e,t);if(!r)return console.warn("Cannot chamfer between curves",n.repr,e.repr),[n,e];const{first:i,second:o}=r;return[i,C1(i.lastPoint,o.firstPoint),o]}class zY{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(e,t){let r=this.length++;for(;r>0;){const i=r-1>>1,o=this.values[i];if(t>=o)break;this.ids[r]=this.ids[i],this.values[r]=o,r=i}this.ids[r]=e,this.values[r]=t}pop(){if(this.length===0)return;const e=this.ids[0];if(this.length--,this.length>0){const t=this.ids[0]=this.ids[this.length],r=this.values[0]=this.values[this.length],i=this.length>>1;let o=0;for(;o<i;){let s=(o<<1)+1;const a=s+1;let l=this.ids[s],u=this.values[s];const c=this.values[a];if(a<this.length&&c<u&&(s=a,l=this.ids[a],u=c),u>=r)break;this.ids[o]=l,this.values[o]=u,o=s}this.ids[o]=t,this.values[o]=r}return e}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}const PR=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],ub=3;class TA{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,r]=new Uint8Array(e,0,2);if(t!==251)throw new Error("Data does not appear to be in a Flatbush format.");if(r>>4!==ub)throw new Error(`Got v${r>>4} data when expected v${ub}.`);const[i]=new Uint16Array(e,2,1),[o]=new Uint32Array(e,4,1);return new TA(o,i,PR[r&15],e)}constructor(e,t=16,r=Float64Array,i){if(e===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(e)||e<=0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535);let o=e,s=o;this._levelBounds=[o*4];do o=Math.ceil(o/this.nodeSize),s+=o,this._levelBounds.push(s*4);while(o!==1);this.ArrayType=r||Float64Array,this.IndexArrayType=s<16384?Uint16Array:Uint32Array;const a=PR.indexOf(this.ArrayType),l=s*4*this.ArrayType.BYTES_PER_ELEMENT;if(a<0)throw new Error(`Unexpected typed array class: ${r}.`);i&&i instanceof ArrayBuffer?(this.data=i,this._boxes=new this.ArrayType(this.data,8,s*4),this._indices=new this.IndexArrayType(this.data,8+l,s),this._pos=s*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1]):(this.data=new ArrayBuffer(8+l+s*this.IndexArrayType.BYTES_PER_ELEMENT),this._boxes=new this.ArrayType(this.data,8,s*4),this._indices=new this.IndexArrayType(this.data,8+l,s),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(this.data,0,2).set([251,(ub<<4)+a]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e),this._queue=new zY}add(e,t,r,i){const o=this._pos>>2;return this._indices[o]=o,this._boxes[this._pos++]=e,this._boxes[this._pos++]=t,this._boxes[this._pos++]=r,this._boxes[this._pos++]=i,e<this.minX&&(this.minX=e),t<this.minY&&(this.minY=t),r>this.maxX&&(this.maxX=r),i>this.maxY&&(this.maxY=i),o}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);if(this.numItems<=this.nodeSize){this._boxes[this._pos++]=this.minX,this._boxes[this._pos++]=this.minY,this._boxes[this._pos++]=this.maxX,this._boxes[this._pos++]=this.maxY;return}const e=this.maxX-this.minX||1,t=this.maxY-this.minY||1,r=new Uint32Array(this.numItems),i=(1<<16)-1;for(let o=0;o<this.numItems;o++){let s=4*o;const a=this._boxes[s++],l=this._boxes[s++],u=this._boxes[s++],c=this._boxes[s++],h=Math.floor(i*((a+u)/2-this.minX)/e),f=Math.floor(i*((l+c)/2-this.minY)/t);r[o]=GY(h,f)}WM(r,this._boxes,this._indices,0,this.numItems-1,this.nodeSize);for(let o=0,s=0;o<this._levelBounds.length-1;o++){const a=this._levelBounds[o];for(;s<a;){const l=s;let u=1/0,c=1/0,h=-1/0,f=-1/0;for(let d=0;d<this.nodeSize&&s<a;d++)u=Math.min(u,this._boxes[s++]),c=Math.min(c,this._boxes[s++]),h=Math.max(h,this._boxes[s++]),f=Math.max(f,this._boxes[s++]);this._indices[this._pos>>2]=l,this._boxes[this._pos++]=u,this._boxes[this._pos++]=c,this._boxes[this._pos++]=h,this._boxes[this._pos++]=f}}}search(e,t,r,i,o){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let s=this._boxes.length-4;const a=[],l=[];for(;s!==void 0;){const u=Math.min(s+this.nodeSize*4,LR(s,this._levelBounds));for(let c=s;c<u;c+=4){if(r<this._boxes[c]||i<this._boxes[c+1]||e>this._boxes[c+2]||t>this._boxes[c+3])continue;const h=this._indices[c>>2]|0;s<this.numItems*4?(o===void 0||o(h))&&l.push(h):a.push(h)}s=a.pop()}return l}neighbors(e,t,r=1/0,i=1/0,o){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let s=this._boxes.length-4;const a=this._queue,l=[],u=i*i;for(;s!==void 0;){const c=Math.min(s+this.nodeSize*4,LR(s,this._levelBounds));for(let h=s;h<c;h+=4){const f=this._indices[h>>2]|0,d=RR(e,this._boxes[h],this._boxes[h+2]),v=RR(t,this._boxes[h+1],this._boxes[h+3]),y=d*d+v*v;s<this.numItems*4?(o===void 0||o(f))&&a.push((f<<1)+1,y):a.push(f<<1,y)}for(;a.length&&a.peek()&1;)if(a.peekValue()>u||(l.push(a.pop()>>1),l.length===r))return a.clear(),l;s=a.pop()>>1}return a.clear(),l}}function RR(n,e,t){return n<e?e-n:n<=t?0:n-t}function LR(n,e){let t=0,r=e.length-1;for(;t<r;){const i=t+r>>1;e[i]>n?r=i:t=i+1}return e[t]}function WM(n,e,t,r,i,o){if(Math.floor(r/o)>=Math.floor(i/o))return;const s=n[r+i>>1];let a=r-1,l=i+1;for(;;){do a++;while(n[a]<s);do l--;while(n[l]>s);if(a>=l)break;HY(n,e,t,a,l)}WM(n,e,t,r,l,o),WM(n,e,t,l+1,i,o)}function HY(n,e,t,r,i){const o=n[r];n[r]=n[i],n[i]=o;const s=4*r,a=4*i,l=e[s],u=e[s+1],c=e[s+2],h=e[s+3];e[s]=e[a],e[s+1]=e[a+1],e[s+2]=e[a+2],e[s+3]=e[a+3],e[a]=l,e[a+1]=u,e[a+2]=c,e[a+3]=h;const f=t[r];t[r]=t[i],t[i]=f}function GY(n,e){let t=n^e,r=65535^t,i=65535^(n|e),o=n&(e^65535),s=t|r>>1,a=t>>1^t,l=i>>1^r&o>>1^i,u=t&i>>1^o>>1^o;t=s,r=a,i=l,o=u,s=t&t>>2^r&r>>2,a=t&r>>2^r&(t^r)>>2,l^=t&i>>2^r&o>>2,u^=r&i>>2^(t^r)&o>>2,t=s,r=a,i=l,o=u,s=t&t>>4^r&r>>4,a=t&r>>4^r&(t^r)>>4,l^=t&i>>4^r&o>>4,u^=r&i>>4^(t^r)&o>>4,t=s,r=a,i=l,o=u,l^=t&i>>8^r&o>>8,u^=r&i>>8^(t^r)&o>>8,t=l^l>>1,r=u^u>>1;let c=n^e,h=r|65535^(c|t);return c=(c|c<<8)&16711935,c=(c|c<<4)&252645135,c=(c|c<<2)&858993459,c=(c|c<<1)&1431655765,h=(h|h<<8)&16711935,h=(h|h<<4)&252645135,h=(h|h<<2)&858993459,h=(h|h<<1)&1431655765,(h<<1|c)>>>0}const VY=(n,e=1e-7)=>{const t=new TA(n.length);n.forEach(o=>{const[s,a]=o.firstPoint;t.add(s-e,a-e,s+e,a+e)}),t.finish();const r=[],i=new Set;return n.forEach((o,s)=>{if(i.has(s))return;const a=[o];let l=s;i.add(s);let u=n.length;for(;;){if(u--<0)throw new Error("Infinite loop detected");const c=a[a.length-1].lastPoint,[h,f]=c,d=t.search(h-e,f-e,h+e,f+e),v=S=>Math.abs((l-S)%n.length),y=d.filter(S=>!i.has(S)).map(S=>[n[S],S,v(S)]).sort(([,,S],[,,_])=>v(S)-v(_));if(y.length===0){r.push(a);break}const[x,g]=y[0];a.push(x),i.add(g),l=g}}),r};function Pl(n){return Math.round(n*1e5)/1e5}const cb=n=>`${Xx(n.X())} ${Xx(n.Y())}`,WY=(n,e)=>{const t=zt(),r=E1(n.GetType()),[i,o]=e,s=`${Pl(i)} ${Pl(o)}`;if(r==="LINE")return`L ${s}`;if(r==="BEZIER_CURVE"){const a=n.Bezier().get(),l=a.Degree();if(l===1)return`L ${s}`;if(l===2)return`Q ${cb(a.Pole(2))} ${s}`;if(l===3){const u=cb(a.Pole(2)),c=cb(a.Pole(3));return`C ${u} ${c} ${s}`}}if(r==="CIRCLE"){const a=n.Circle(),l=a.Radius(),u=n.FirstParameter(),h=(n.LastParameter()-u)*Q0,f=h!==360?s:`${Pl(i)} ${Pl(o+1e-4)}`;return`A ${l} ${l} 0 ${Math.abs(h)>180?"1":"0"} ${a.IsDirect()?"1":"0"} ${f}`}if(r==="ELLIPSE"){const a=n.Ellipse(),l=a.MajorRadius(),u=a.MinorRadius(),c=n.FirstParameter(),f=(n.LastParameter()-c)*Q0,d=f!==360?s:`${Pl(i)} ${Pl(o+1e-4)}`,v=new t.gp_Dir2d_1,y=180-a.XAxis().Direction().Angle(v)*Q0;return v.delete(),`A ${Pl(l)} ${Pl(u)} ${Pl(y)} ${Math.abs(f)>180?"1":"0"} ${a.IsDirect()?"1":"0"} ${d}`}throw new Error(`Unsupported curve type: ${r}`)},jY={X:[1,0,0],Y:[0,1,0],Z:[0,0,1]},Zx={YZ:[1,0,0],XZ:[0,1,0],XY:[0,0,1]};class Z6{constructor(){this.filters=[]}delete(){this.filters=[]}and(e){return e.forEach(t=>t(this)),this}not(e){const t=new this.constructor;e(t);const r=({element:i})=>!t.shouldKeep(i);return this.filters.push(r),this}either(e){const t=e.map(i=>{const o=new this.constructor;return i(o),o}),r=({element:i})=>t.some(o=>o.shouldKeep(i));return this.filters.push(r),this}find(e,{unique:t=!1}={}){const r=this.applyFilter(e);if(t){if(r.length!==1)throw console.error(r),new Error("Finder has not found a unique solution");return r[0]}return r}}class qY extends cl{constructor(){const e=zt();super(new e.Message_ProgressRange_1)}}class hb extends cl{constructor(e){const t=zt();super(new t.BRepExtrema_DistShapeShape_1),this.wrapped.LoadS1(e.wrapped)}distanceTo(e){this.wrapped.LoadS2(e.wrapped);const t=new qY;return this.wrapped.Perform(t.wrapped),this.wrapped.Value()}}class K6 extends Z6{when(e){return this.filters.push(e),this}inList(e){const t=({element:r})=>!!e.find(i=>i.isSame(r));return this.filters.push(t),this}atAngleWith(e="Z",t=0){let r;typeof e=="string"?r=new Rt(jY[e]):r=new Rt(e);const i=({normal:o})=>{if(!o)return!1;const s=Math.acos(Math.abs(o.dot(r)));return Math.abs(s-zl*t)<1e-6};return this.filters.push(i),this}atDistance(e,t=[0,0,0]){const r=Qx(t),i=new hb(r),o=({element:s})=>Math.abs(i.distanceTo(s)-e)<1e-6;return this.filters.push(o),this}containsPoint(e){return this.atDistance(0,e)}withinDistance(e,t=[0,0,0]){const r=Qx(t),i=new hb(r),o=({element:s})=>i.distanceTo(s)-e<1e-6;return this.filters.push(o),this}inBox(e,t){const r=pr(e,t);return this.inShape(r)}inShape(e){const t=new hb(e),r=({element:i})=>t.distanceTo(i)<1e-6;return this.filters.push(r),this}}class Kx extends K6{clone(){const e=new Kx;return e.filters=[...this.filters],e}inDirection(e){return this.atAngleWith(e,0)}ofLength(e){const t=({element:r})=>typeof e=="number"?Math.abs(r.length-e)<1e-9:e(r.length);return this.filters.push(t),this}ofCurveType(e){const t=({element:r})=>r.geomType===e;return this.filters.push(t),this}parallelTo(e){if(typeof e=="string"&&Zx[e])return this.atAngleWith(Zx[e],90);if(typeof e!="string"&&e instanceof Fs)return this.atAngleWith(e.zDir,90);if(typeof e!="string"&&e.normalAt){const t=e.normalAt();return this.atAngleWith(t,90),this}return this}inPlane(e,t){const r=e instanceof Fs?ff(e):ff(e,t);this.parallelTo(r);const i=({element:o})=>{const s=o.startPoint,a=s.projectToPlane(r);return s.equals(a)};return this.filters.push(i),this}shouldKeep(e){let t=null;try{t=e.tangentAt().normalized()}catch(r){console.error("failed to compute a normal",r)}return this.filters.every(r=>r({normal:t,element:e}))}applyFilter(e){return e.edges.filter(t=>this.shouldKeep(t))}}class CA extends K6{clone(){const e=new CA;return e.filters=[...this.filters],e}parallelTo(e){if(typeof e=="string"&&Zx[e])return this.atAngleWith(Zx[e]);if(typeof e!="string"&&e instanceof Fs)return this.atAngleWith(e.zDir);if(typeof e!="string"&&e.normalAt){const t=e.normalAt();return this.atAngleWith(t),this}return this}ofSurfaceType(e){const t=({element:r})=>r.geomType===e;return this.filters.push(t),this}inPlane(e,t){const r=e instanceof Fs?ff(e):ff(e,t);this.parallelTo(r);const i=({element:o})=>{const s=o.center,a=s.projectToPlane(r);return s.equals(a)};return this.filters.push(i),this}shouldKeep(e){const t=e.normalAt();return this.filters.every(i=>i({normal:t,element:e}))}applyFilter(e){return e.faces.filter(t=>this.shouldKeep(t))}}const $Y=function(n){return n.curves.map((e,t)=>({firstCurve:e,secondCurve:n.curves[(t+1)%n.curves.length],point:e.lastPoint}))},fb=2*Math.PI,kR=n=>{const e=n%fb,t=e<0?e+fb:e;return t<Math.PI?t:t===Math.PI?0:Math.abs(t-fb)};class Jx extends Z6{clone(){const e=new Jx;return e.filters=[...this.filters],e}inList(e){const t=({element:r})=>!!e.find(i=>ws(i,r.point));return this.filters.push(t),this}atDistance(e,t=[0,0]){function r({element:i}){return Math.abs(Mu(t,i.point)-e)<1e-9}return this.filters.push(r),this}atPoint(e){function t({element:r}){return ws(e,r.point)}return this.filters.push(t),this}inBox(e,t){const[r,i]=e,[o,s]=t,a=Math.min(r,o),l=Math.max(r,o),u=Math.min(i,s),c=Math.max(i,s);function h({element:f}){const[d,v]=f.point;return d>=a&&d<=l&&v>=u&&v<=c}return this.filters.push(h),this}ofAngle(e){function t({element:r}){const i=r.firstCurve.tangentAt(1),o=r.secondCurve.tangentAt(0);return Math.abs(kR(RY(i,o))-kR(zl*e))<1e-9}return this.filters.push(t),this}shouldKeep(e){return this.filters.every(r=>r({normal:null,element:e}))}applyFilter(e){return $Y(e).filter(t=>this.shouldKeep(t))}}const IR=n=>{const e=zt();return{vertex:e.TopAbs_ShapeEnum.TopAbs_VERTEX,wire:e.TopAbs_ShapeEnum.TopAbs_WIRE,face:e.TopAbs_ShapeEnum.TopAbs_FACE,shell:e.TopAbs_ShapeEnum.TopAbs_SHELL,solid:e.TopAbs_ShapeEnum.TopAbs_SOLID,solidCompound:e.TopAbs_ShapeEnum.TopAbs_COMPSOLID,compound:e.TopAbs_ShapeEnum.TopAbs_COMPOUND,edge:e.TopAbs_ShapeEnum.TopAbs_EDGE,shape:e.TopAbs_ShapeEnum.TopAbs_SHAPE}[n]},XY=function*(e,t){const r=zt(),i=new r.TopExp_Explorer_2(e,IR(t),IR("shape")),o=new Map;for(;i.More();){const s=i.Current(),a=s.HashCode(G6);o.get(a)||(o.set(a,!0),yield s),i.Next()}i.delete()},J6=n=>{if(n.IsNull())throw new Error("This shape has not type, it is null");return n.ShapeType()};class dS extends cl{constructor(e){super(e)}clone(){return new this.constructor(Gd(this.wrapped))}get hashCode(){return this.wrapped.HashCode(G6)}get isNull(){return this.wrapped.IsNull()}isSame(e){return this.wrapped.IsSame(e.wrapped)}isEqual(e){return this.wrapped.IsEqual(e.wrapped)}simplify(){const e=zt(),t=new e.ShapeUpgrade_UnifySameDomain_2(this.wrapped,!0,!0,!1);t.Build();const r=di(t.Shape());if(t.delete(),this.constructor!==r.constructor)throw new Error("unexpected types mismatch");return r}translate(e,t=0,r=0){const i=typeof e=="number"?[e,t,r]:e,o=di(_Y(this.wrapped,i));if(this.delete(),this.constructor!==o.constructor)throw new Error("unexpected types mismatch");return o}translateX(e){return this.translate([e,0,0])}translateY(e){return this.translate([0,e,0])}translateZ(e){return this.translate([0,0,e])}rotate(e,t=[0,0,0],r=[0,0,1]){const i=di(SY(this.wrapped,e,t,r));if(this.delete(),this.constructor!==i.constructor)throw new Error("unexpected types mismatch");return i}mirror(e,t){const r=di(bY(this.wrapped,e,t));if(this.delete(),this.constructor!==r.constructor)throw new Error("unexpected types mismatch");return r}scale(e,t=[0,0,0]){const r=di(MY(this.wrapped,t,e));if(this.delete(),this.constructor!==r.constructor)throw new Error("unexpected types mismatch");return r}_iterTopo(e){return XY(this.wrapped,e)}_listTopo(e){return Array.from(this._iterTopo(e)).map(t=>Gd(t))}get edges(){return this._listTopo("edge").map(e=>new Ef(e))}get faces(){return this._listTopo("face").map(e=>new Mg(e))}get wires(){return this._listTopo("wire").map(e=>new zc(e))}get boundingBox(){const e=new wY;return this.oc.BRepBndLib.Add(this.wrapped,e.wrapped,!0),e}_mesh({tolerance:e=.001,angularTolerance:t=.1}={}){new this.oc.BRepMesh_IncrementalMesh_2(this.wrapped,e,!1,t,!1)}mesh({tolerance:e=.001,angularTolerance:t=.1}={}){this._mesh({tolerance:e,angularTolerance:t});let r=[],i=[],o=[];const s=[];for(const a of this.faces){const l=a.triangulation(i.length/3);if(!l)continue;const{trianglesIndexes:u,vertices:c,verticesNormals:h}=l;s.push({start:r.length,count:u.length,faceId:a.hashCode}),r=r.concat(u),i=i.concat(c),o=o.concat(h)}return{triangles:r,vertices:i,normals:o,faceGroups:s}}meshEdges({tolerance:e=.001,angularTolerance:t=.1}={}){var r;const i=ii(),o=new Set,s=[],a=[],l=()=>{const c=s.length;let h=null;return[f=>{h?(s.push(...h),h=[f.X(),f.Y(),f.Z()],s.push(...h)):h=[f.X(),f.Y(),f.Z()]},f=>{a.push({start:c/3,count:(s.length-c)/3,edgeId:f}),o.add(f)}]},u=i(new this.oc.TopLoc_Location_1);for(const c of this.faces){const h=i(this.oc.BRep_Tool.Triangulation(c.wrapped,u,0));if(h.IsNull())continue;const f=h.get();for(const d of c.edges){if(i(d),o.has(d.hashCode))continue;const v=i(new this.oc.TopLoc_Location_1),y=i(this.oc.BRep_Tool.PolygonOnTriangulation_1(d.wrapped,h,v)),x=(r=y==null?void 0:y.get())==null?void 0:r.Nodes();if(!x)continue;i(x);const[g,S]=l();for(let _=x.Lower();_<=x.Upper();_++){const E=i(i(f.Node(x.Value(_))).Transformed(v.Transformation()));g(E)}S(d.hashCode)}}for(const c of this.edges){i(c);const h=c.hashCode;if(o.has(h))continue;const f=i(new this.oc.BRepAdaptor_Curve_2(c.wrapped)),d=i(new this.oc.GCPnts_TangentialDeflection_2(f,e,t,2,1e-9,1e-7)),[v,y]=l();for(let x=0;x<d.NbPoints();x++){const g=i(d.Value(x+1).Transformed(u.Transformation()));v(g)}y(h)}return{lines:s,edgeGroups:a}}blobSTEP(){const e="blob.step",t=new this.oc.STEPControl_Writer_1;this.oc.Interface_Static.SetIVal("write.step.schema",5),t.Model(!0).delete();const r=new this.oc.Message_ProgressRange_1;t.Transfer(this.wrapped,this.oc.STEPControl_StepModelType.STEPControl_AsIs,!0,r);const i=t.Write(e);if(t.delete(),r.delete(),i===this.oc.IFSelect_ReturnStatus.IFSelect_RetDone){const o=this.oc.FS.readFile("/"+e);return this.oc.FS.unlink("/"+e),new Blob([o],{type:"application/STEP"})}else throw new Error("WRITE STEP FILE FAILED.")}blobSTL({tolerance:e=.001,angularTolerance:t=.1,binary:r=!1}={}){this._mesh({tolerance:e,angularTolerance:t});const i="blob.stl";if(this.oc.StlAPI.Write(this.wrapped,i,!r)){const s=this.oc.FS.readFile("/"+i);return this.oc.FS.unlink("/"+i),new Blob([s],{type:"application/sla"})}else throw new Error("WRITE STL FILE FAILED.")}}class Q6 extends dS{}class eD extends dS{get repr(){const{startPoint:e,endPoint:t}=this,r=`start: (${this.startPoint.repr}) end:(${this.endPoint.repr})`;return e.delete(),t.delete(),r}get curve(){return new YY(this._geomAdaptor())}get startPoint(){return this.curve.startPoint}get endPoint(){return this.curve.endPoint}tangentAt(e=0){return this.curve.tangentAt(e)}pointAt(e=0){return this.curve.pointAt(e)}get isClosed(){return this.curve.isClosed}get isPeriodic(){return this.curve.isPeriodic}get period(){return this.curve.period}get geomType(){return this.curve.curveType}get length(){const e=new this.oc.GProp_GProps_1;this.oc.BRepGProp.LinearProperties(this.wrapped,e,!0,!1);const t=e.Mass();return e.delete(),t}get orientation(){return this.wrapped.Orientation_1()===this.oc.TopAbs_Orientation.TopAbs_FORWARD?"forward":"backward"}}class YY extends cl{get repr(){const{startPoint:e,endPoint:t}=this,r=`start: (${this.startPoint.repr}) end:(${this.endPoint.repr}}`;return e.delete(),t.delete(),r}get curveType(){const e=this.wrapped.GetType&&this.wrapped.GetType();return E1(e)}get startPoint(){const e=this.wrapped.Value(this.wrapped.FirstParameter());return new Rt(e)}get endPoint(){const e=this.wrapped.Value(this.wrapped.LastParameter());return new Rt(e)}_mapParameter(e){const t=this.wrapped.FirstParameter(),r=this.wrapped.LastParameter();return t+(r-t)*e}pointAt(e=.5){return new Rt(this.wrapped.Value(this._mapParameter(e)))}tangentAt(e=.5){const t=this._mapParameter(e),r=new this.oc.gp_Pnt_1,i=new this.oc.gp_Vec_1;this.wrapped.D1(t,r,i);const o=new Rt(i);return r.delete(),i.delete(),o}get isClosed(){return this.wrapped.IsClosed()}get isPeriodic(){return this.wrapped.IsPeriodic()}get period(){return this.wrapped.Period()}}class Ef extends eD{_geomAdaptor(){return new this.oc.BRepAdaptor_Curve_2(this.wrapped)}}class zc extends eD{_geomAdaptor(){return new this.oc.BRepAdaptor_CompCurve_2(this.wrapped,!1)}offset2D(e,t="arc"){const r={arc:this.oc.GeomAbs_JoinType.GeomAbs_Arc,intersection:this.oc.GeomAbs_JoinType.GeomAbs_Intersection,tangent:this.oc.GeomAbs_JoinType.GeomAbs_Tangent},i=new this.oc.BRepOffsetAPI_MakeOffset_3(this.wrapped,r[t],!1);i.Perform(e,0);const o=di(i.Shape());if(i.delete(),this.delete(),!(o instanceof zc))throw new Error("Could not offset with a wire");return o}}class ZY extends cl{get surfaceType(){const e=this.oc.GeomAbs_SurfaceType,r=new Map([[e.GeomAbs_Plane,"PLANE"],[e.GeomAbs_Cylinder,"CYLINDRE"],[e.GeomAbs_Cone,"CONE"],[e.GeomAbs_Sphere,"SPHERE"],[e.GeomAbs_Torus,"TORUS"],[e.GeomAbs_BezierSurface,"BEZIER_SURFACE"],[e.GeomAbs_BSplineSurface,"BSPLINE_SURFACE"],[e.GeomAbs_SurfaceOfRevolution,"REVOLUTION_SURFACE"],[e.GeomAbs_SurfaceOfExtrusion,"EXTRUSION_SURFACE"],[e.GeomAbs_OffsetSurface,"OFFSET_SURFACE"],[e.GeomAbs_OtherSurface,"OTHER_SURFACE"]]).get(this.wrapped.GetType());if(!r)throw new Error("surface type not found");return r}}class Mg extends dS{_geomAdaptor(){return new this.oc.BRepAdaptor_Surface_2(this.wrapped,!1)}get surface(){return new ZY(this._geomAdaptor())}get orientation(){return this.wrapped.Orientation_1()===this.oc.TopAbs_Orientation.TopAbs_FORWARD?"forward":"backward"}get geomType(){const e=this.surface,t=e.surfaceType;return e.delete(),t}get UVBounds(){const e={current:0},t={current:0},r={current:0},i={current:0};return this.oc.BRepTools.UVBounds_1(this.wrapped,e,t,r,i),{uMin:e.current,uMax:t.current,vMin:r.current,vMax:i.current}}pointOnSurface(e,t){const{uMin:r,uMax:i,vMin:o,vMax:s}=this.UVBounds,a=this._geomAdaptor(),l=new this.oc.gp_Pnt_1,u=e*(i-r)+r,c=t*(s-o)+o;a.D0(u,c,l);const h=new Rt(l);return a.delete(),l.delete(),h}normalAt(e){let t=0,r=0;const i=ii();if(e){const u=i(this.oc.BRep_Tool.Surface_2(this.wrapped)),c=i(new this.oc.GeomAPI_ProjectPointOnSurf_2(i(al(e)),u,this.oc.Extrema_ExtAlgo.Extrema_ExtAlgo_Grad)),h={current:0},f={current:0};c.LowerDistanceParameters(h,f),t=h.current,r=f.current}else{const{uMin:u,uMax:c,vMin:h,vMax:f}=this.UVBounds;t=.5*(u+c),r=.5*(h+f)}const o=i(new this.oc.gp_Pnt_1),s=i(new this.oc.gp_Vec_1);return i(new this.oc.BRepGProp_Face_2(this.wrapped,!1)).Normal(t,r,o,s),new Rt(s)}get center(){const e=new this.oc.GProp_GProps_1;this.oc.BRepGProp.SurfaceProperties_2(this.wrapped,e,1e-7,!0);const t=new Rt(e.CentreOfMass());return e.delete(),t}outerWire(){const e=new zc(this.oc.BRepTools.OuterWire(this.wrapped));return this.delete(),e}innerWires(){const e=this.clone().outerWire(),t=this.wires.filter(r=>!e.isSame(r));return e.delete(),this.delete(),t}triangulation(e=0){const t=ii(),r=t(new this.oc.TopLoc_Location_1),i=t(this.oc.BRep_Tool.Triangulation(this.wrapped,r,0));if(i.IsNull())return null;const o=t(r.Transformation()),s={vertices:[],trianglesIndexes:[],verticesNormals:[]},a=i.get(),l=a.NbNodes();s.vertices=new Array(l*3);for(let v=1;v<=l;v++){const y=t(t(a.Node(v)).Transformed(o));s.vertices[(v-1)*3+0]=y.X(),s.vertices[(v-1)*3+1]=y.Y(),s.vertices[(v-1)*3+2]=y.Z()}const u=t(new this.oc.TColgp_Array1OfDir_2(1,l)),c=t(new this.oc.Poly_Connect_2(i));this.oc.StdPrs_ToolTriangulatedShape.Normal(this.wrapped,c,u),s.verticesNormals=new Array(u.Length()*3);for(let v=u.Lower();v<=u.Upper();v++){const y=t(t(u.Value(v)).Transformed(o));s.verticesNormals[(v-1)*3+0]=y.X(),s.verticesNormals[(v-1)*3+1]=y.Y(),s.verticesNormals[(v-1)*3+2]=y.Z()}const h=this.orientation,f=a.NbTriangles();s.trianglesIndexes=new Array(f*3);let d=0;for(let v=1;v<=f;v++){const y=t(a.Triangle(v));let x=y.Value(1),g=y.Value(2);const S=y.Value(3);if(h==="backward"){const _=x;x=g,g=_}s.trianglesIndexes[d*3+0]=x-1+e,s.trianglesIndexes[d*3+1]=g-1+e,s.trianglesIndexes[d*3+2]=S-1+e,d++}return s}}class pS extends dS{fuse(e,{optimisation:t="none"}={}){const r=ii(),i=r(new this.oc.Message_ProgressRange_1),o=r(new this.oc.BRepAlgoAPI_Fuse_3(this.wrapped,e.wrapped,i));t==="commonFace"&&o.SetGlue(this.oc.BOPAlgo_GlueEnum.BOPAlgo_GlueShift),t==="sameFace"&&o.SetGlue(this.oc.BOPAlgo_GlueEnum.BOPAlgo_GlueFull),o.Build(i),o.SimplifyResult(!0,!0,.001);const s=di(o.Shape());if(!yc(s))throw new Error("Could not fuse as a 3d shape");return s}cut(e,{optimisation:t="none"}={}){const r=ii(),i=r(new this.oc.Message_ProgressRange_1),o=r(new this.oc.BRepAlgoAPI_Cut_3(this.wrapped,e.wrapped,i));t==="commonFace"&&o.SetGlue(this.oc.BOPAlgo_GlueEnum.BOPAlgo_GlueShift),t==="sameFace"&&o.SetGlue(this.oc.BOPAlgo_GlueEnum.BOPAlgo_GlueFull),o.Build(i),o.SimplifyResult(!0,!0,.001);const s=di(o.Shape());if(!yc(s))throw new Error("Could not cut as a 3d shape");return s}intersect(e){const t=ii(),r=t(new this.oc.Message_ProgressRange_1),i=t(new this.oc.BRepAlgoAPI_Common_3(this.wrapped,e.wrapped,r));i.Build(r),i.SimplifyResult(!0,!0,.001);const o=di(i.Shape());if(!yc(o))throw new Error("Could not intersect as a 3d shape");return o}shell(e,t=null,r=.001){const i=typeof t=="number"?t:r;let o,s;if(typeof e=="number"){s=e;const d=new CA;o=typeof t=="function"?t(d):d}else s=e.thickness,o=e.filter;const a=ii(),l=o.find(this),u=a(new this.oc.TopTools_ListOfShape_1);l.forEach(d=>{u.Append_1(d.wrapped)});const c=a(new this.oc.Message_ProgressRange_1),h=a(new this.oc.BRepOffsetAPI_MakeThickSolid);h.MakeThickSolidByJoin(this.wrapped,u,-s,i,this.oc.BRepOffset_Mode.BRepOffset_Skin,!1,!1,this.oc.GeomAbs_JoinType.GeomAbs_Arc,!1,c);const f=di(h.Shape());if(!yc(f))throw new Error("Could not shell as a 3d shape");return f}_builderIter(e,t){if(typeof e=="number"){let s=0;for(const a of this._iterTopo("edge"))t(e,Gd(a)),s+=1;return s}let r,i=null;typeof e=="function"?r=e:(r=s=>e.filter.shouldKeep(s)?e.radius||1:0,e.filter&&!e.keep&&(i=()=>e.filter.delete()));let o=0;for(const s of this._iterTopo("edge")){const a=Gd(s),l=new Ef(a),u=r(l);u&&(t(u,a),o+=1),l.delete()}return i&&i(),o}fillet(e,t){const i=ii()(new this.oc.BRepFilletAPI_MakeFillet(this.wrapped,this.oc.ChFi3d_FilletShape.ChFi3d_Rational));let o=e;if(typeof e=="number"&&t&&(o={radius:e,filter:t(new Kx)}),!this._builderIter(o,(l,u)=>i.Add_2(l,u)))throw new Error("Could not fillet, no edge was selected");const a=di(i.Shape());if(!yc(a))throw new Error("Could not fillet as a 3d shape");return a}chamfer(e,t){const i=ii()(new this.oc.BRepFilletAPI_MakeChamfer(this.wrapped));let o=e;if(typeof e=="number"&&t&&(o={radius:e,filter:t(new Kx)}),!this._builderIter(o,(l,u)=>i.Add_2(l,u)))throw new Error("Could not chamfer, no edge was selected");const a=di(i.Shape());if(!yc(a))throw new Error("Could not chamfer as a 3d shape");return a}}class tD extends pS{}class tp extends pS{}class nD extends pS{}class rD extends pS{}function yc(n){return n instanceof tD||n instanceof tp||n instanceof nD||n instanceof rD}function NR(n){return n instanceof zc}function Gd(n){const e=zt(),t=e.TopAbs_ShapeEnum,r=new Map([[t.TopAbs_EDGE,e.TopoDS.Edge_1],[t.TopAbs_WIRE,e.TopoDS.Wire_1],[t.TopAbs_FACE,e.TopoDS.Face_1],[t.TopAbs_SHELL,e.TopoDS.Shell_1],[t.TopAbs_SOLID,e.TopoDS.Solid_1],[t.TopAbs_COMPSOLID,e.TopoDS.CompSolid_1],[t.TopAbs_COMPOUND,e.TopoDS.Compound_1]]),i=J6(n),o=r.get(i);if(!o)throw new Error("Could not find a wrapper for this shape type");return o(n)}function di(n){const t=zt().TopAbs_ShapeEnum,i=new Map([[t.TopAbs_VERTEX,Q6],[t.TopAbs_EDGE,Ef],[t.TopAbs_WIRE,zc],[t.TopAbs_FACE,Mg],[t.TopAbs_SHELL,tD],[t.TopAbs_SOLID,tp],[t.TopAbs_COMPSOLID,nD],[t.TopAbs_COMPOUND,rD]]).get(J6(n));if(!i)throw new Error("Could not find a wrapper for this shape type");return new i(Gd(n))}const iD=(n,e)=>{const t=zt();return new Ef(new t.BRepBuilderAPI_MakeEdge_3(al(n),al(e)).Edge())},KY=(n,e=[0,0,0],t=[0,0,1])=>{const r=zt(),[i,o]=so(),s=i(fS(e,t)),a=i(new r.gp_Circ_2(s,n)),l=i(new r.BRepBuilderAPI_MakeEdge_8(a)),u=new Ef(l.Edge());return o(),u},JY=(n,e,t,r=[0,0,0],i=[0,0,1],o=!1)=>{const s=zt(),[a,l]=so();let u=2*Math.PI;o&&(u=-2*Math.PI);const c=a(new s.Geom2d_Line_3(a(new s.gp_Pnt2d_3(0,0)),a(new s.gp_Dir2d_4(u,n)))),h=e/n,f=c.Value(0),d=c.Value(h*Math.sqrt((2*Math.PI)**2+n**2)),v=a(new s.GCE2d_MakeSegment_1(f,d)),y=new s.Geom_CylindricalSurface_1(a(Xv(r,i)),t),x=a(new s.BRepBuilderAPI_MakeEdge_30(a(new s.Handle_Geom2d_Curve_2(v.Value().get())),a(new s.Handle_Geom_Surface_2(y)))).Edge(),g=a(new s.BRepBuilderAPI_MakeWire_2(x)).Wire();return s.BRepLib.BuildCurves3d_2(g),l(),new zc(g)},Yv=n=>{const e=zt(),t=new e.BRepBuilderAPI_MakeWire_1;n.forEach(s=>{s instanceof Ef&&t.Add_1(s.wrapped),s instanceof zc&&t.Add_2(s.wrapped)});const r=new e.Message_ProgressRange_1;t.Build(r);const i=t.Error();if(i!==e.BRepBuilderAPI_WireError.BRepBuilderAPI_WireDone){const s=new Map([[e.BRepBuilderAPI_WireError.BRepBuilderAPI_EmptyWire,"empty wire"],[e.BRepBuilderAPI_WireError.BRepBuilderAPI_NonManifoldWire,"non manifold wire"],[e.BRepBuilderAPI_WireError.BRepBuilderAPI_DisconnectedWire,"disconnected wire"]]);throw new Error(`Failed to build the wire, ${s.get(i)||"unknown error"}`)}const o=new zc(t.Wire());return t.delete(),r.delete(),o},nx=(n,e)=>{const t=zt(),r=new t.BRepBuilderAPI_MakeFace_15(n.wrapped,!1);if(e==null||e.forEach(o=>{r.Add(o.wrapped)}),!r.IsDone())throw r.delete(),new Error("Failed to build the face. Your wire might be non planar.");const i=r.Face();return r.delete(),new Mg(i)},QY=(n,e)=>{const t=zt(),[r,i]=so(),o=r(t.BRep_Tool.Surface_2(n.wrapped)),a=r(new t.BRepBuilderAPI_MakeFace_21(o,e.wrapped,!0)).Face();return i(),new Mg(a)},fd=(n,e,t=[0,0,0],r=[0,0,1])=>{const i=zt(),o=fS(t,r),s=new i.BRepPrimAPI_MakeCylinder_3(o,n,e),a=new tp(s.Shape());return o.delete(),s.delete(),a},eZ=n=>{const e=zt(),t=new e.BRepPrimAPI_MakeSphere_1(n),r=new tp(t.Shape());return t.delete(),r};class tZ extends cl{constructor(e,t,r){const i=zt(),o=ii(),s=Math.sqrt(e*t/r),a=e/s,l=t/s,u=new i.gp_GTrsf_1;u.SetAffinity_1(ev([0,0,0],[0,1,0]),a);const c=o(new i.gp_GTrsf_1);c.SetAffinity_1(ev([0,0,0],[0,0,1]),s);const h=o(new i.gp_GTrsf_1);h.SetAffinity_1(ev([0,0,0],[1,0,0]),l),u.Multiply(c),u.Multiply(h),super(u)}applyToPoint(e){const t=zt(),i=ii()(e.XYZ());return this.wrapped.Transforms_1(i),new t.gp_Pnt_2(i)}}function nZ(n){const e=[];for(let t=n.LowerRow();t<=n.UpperRow();t++){const r=[];e.push(r);for(let i=n.LowerCol();i<=n.UpperCol();i++){const o=n.Value(t,i);r.push(o)}}return e}const rZ=(n,e,t)=>{const r=zt(),i=ii(),o=i(new r.gp_Sphere_1);o.SetRadius(1);const s=i(new r.Geom_SphericalSurface_2(o)),a=r.GeomConvert.SurfaceToBSplineSurface(s.UReversed()).get(),l=nZ(a.Poles_2()),u=new tZ(n,e,t);l.forEach((h,f)=>{h.forEach((d,v)=>{const y=u.applyToPoint(d);a.SetPole_1(f+1,v+1,y)})});const c=di(i(new r.BRepBuilderAPI_MakeShell_2(a.UReversed(),!1)).Shell());return PA([c])},pr=(n,e)=>{const t=zt(),r=new t.BRepPrimAPI_MakeBox_4(al(n),al(e)),i=new tp(r.Solid());return r.delete(),i},Qx=n=>{const e=zt(),t=al(n),r=new e.BRepBuilderAPI_MakeVertex(t),i=r.Vertex();return r.delete(),new Q6(i)},Eu=n=>{const e=zt(),t=new e.TopoDS_Builder,r=new e.TopoDS_Compound;return t.MakeCompound(r),n.forEach(o=>{t.Add(r,o.wrapped),o.delete()}),di(r)},Dr=Eu;function iZ(n){const e=zt(),t=ii(),r=t(new e.BRepBuilderAPI_Sewing(1e-6,!0,!0,!0,!1));return n.forEach(({wrapped:i})=>{r.Add(i)}),r.Perform(t(new e.Message_ProgressRange_1)),di(Gd(r.SewedShape()))}function PA(n){const e=ii(),t=zt(),r=iZ(n),i=di(e(new t.ShapeFix_Solid_1).SolidFromShell(r.wrapped));if(!(i instanceof tp))throw new Error("Could not make a solid of faces and shells");return i}const oD=(n,e)=>{const t=zt(),[r,i]=so(),o=r(new t.BRepBuilderAPI_MakeFace_2(n.wrapped));e.forEach(u=>{o.Add(u.wrapped)});const s=r(o.Face()),a=r(new t.ShapeFix_Face_2(s));a.FixOrientation_1();const l=a.Face();return i(),new Mg(l)},oZ=n=>n==="symmetric"||typeof n=="number"||Array.isArray(n)&&n.length===2,sZ=n=>{let e;n?oZ(n)?e={endTangent:n}:e={endTangent:0,...n}:e={endTangent:[1,0]};const{endTangent:t,startFactor:r=1,endFactor:i=1,startTangent:o}=e;let s;typeof t=="number"?s=Cm(1,t*zl):s=t;let a;return typeof o=="number"?a=Cm(1,o*zl):a=o,{endTangent:s,startFactor:r,endFactor:i,startTangent:a}};function FR(n,e,t,r){const i=n*t+e*r,o=Math.sqrt((n*n+e*e)*(t*t+r*r));let s=Math.acos(i/o);return n*r-e*t<0&&(s=-s),s}function aZ([n,e],[t,r],i,o,s,a,l){const u=Math.PI*2;if(i<0&&(i=-i),o<0&&(o=-o),i==0||o==0)throw Error("rx and ry can not be 0");const c=Math.sin(s),h=Math.cos(s),f=(n-t)/2,d=(e-r)/2,v=(n+t)/2,y=(e+r)/2,x=h*f+c*d,g=h*d-c*f,S=x*x/(i*i)+g*g/(o*o);S>1&&(i=i*Math.sqrt(S),o=o*Math.sqrt(S));const _=i*o,E=i*g,C=o*x,I=E*E+C*C;if(!I)throw Error("start point can not be same as end point");let F=Math.sqrt(Math.abs((_*_-I)/I));a==l&&(F=-F);const R=F*E/o,k=-F*C/i,L=h*R-c*k+v,N=c*R+h*k+y,z=(x-R)/i,H=(x+R)/i,G=(g-k)/o,K=(g+k)/o,ee=FR(1,0,z,G);let le=FR(z,G,-H,-K);for(;le>u;)le-=u;for(;le<0;)le+=u;l||(le-=u);let V=ee+le;for(;V>u;)V-=u;for(;V<0;)V+=u;return{cx:L,cy:N,startAngle:ee,deltaAngle:le,endAngle:V,clockwise:!!l,rx:i,ry:o}}const sD=(n,e)=>{const t=zt(),r=new t.BRepPrimAPI_MakePrism_1(n.wrapped,e.wrapped,!1,!0),i=new tp(Gd(r.Shape()));return r.delete(),i},aD=(n,e=[0,0,0],t=[0,0,1],r=360)=>{const i=zt(),o=ev(e,t),s=new i.BRepPrimAPI_MakeRevol_1(n.wrapped,o,r*zl,!1),a=di(s.Shape());if(o.delete(),s.delete(),!yc(a))throw new Error("Could not revolve to a 3d shape");return a};function Zv(n,e,{frenet:t=!1,auxiliarySpine:r,law:i=null,transitionMode:o="right",withContact:s,support:a,forceProfileSpineOthogonality:l}={},u=!1){const c=zt(),h=o==="round"?!0:!!l,f=new c.BRepOffsetAPI_MakePipeShell(e.wrapped);if(o){const y={transformed:c.BRepBuilderAPI_TransitionMode.BRepBuilderAPI_Transformed,round:c.BRepBuilderAPI_TransitionMode.BRepBuilderAPI_RoundCorner,right:c.BRepBuilderAPI_TransitionMode.BRepBuilderAPI_RightCorner}[o];y&&f.SetTransitionMode(y)}a?f.SetMode_4(a):t&&f.SetMode_1(t),r&&f.SetMode_5(r.wrapped,!1,c.BRepFill_TypeOfContact.BRepFill_NoContact),i?f.SetLaw_1(n.wrapped,i,!!s,h):f.Add_1(n.wrapped,!!s,h);const d=new c.Message_ProgressRange_1;f.Build(d),u||f.MakeSolid();const v=di(f.Shape());if(!yc(v))throw new Error("Could not sweep to a 3d shape");if(u){const y=di(f.FirstShape()),x=di(f.LastShape());if(!NR(y))throw new Error("Could not sweep with one start wire");if(!NR(x))throw new Error("Could not sweep with one end wire");return f.delete(),[v,y,x]}return f.delete(),d.delete(),v}const lD=(n,{profile:e,endFactor:t=1})=>{let r;const i=zt();if(e==="s-curve")r=new i.Law_S,r.Set_1(0,1,n,t);else if(e==="linear")r=new i.Law_Linear,r.Set(0,1,n,t);else throw new Error("Could not generate a law function");return r.Trim(0,n,1e-6)};function uD(n,e,t,r,i=!1){const o=new Rt(e),s=new Rt(t),a=iD(o,o.add(s)),l=Yv([a]),u=r?lD(s.Length,r):null;return i?Zv(n,l,{law:u},i):Zv(n,l,{law:u},i)}function cD(n,e,t,r,i,o=!1){const s=new Rt(t),a=new Rt(r),l=iD(s,s.add(a)),u=Yv([l]),c=360/e*a.Length,h=1,f=JY(c,a.Length,h,t,r),d=i?lD(a.Length,i):null;return o?Zv(n,u,{auxiliarySpine:f,law:d},o):Zv(n,u,{auxiliarySpine:f,law:d},o)}const lZ=(n,{ruled:e=!0,startPoint:t,endPoint:r}={},i=!1)=>{const o=zt(),[s,a]=so(),l=s(new o.BRepOffsetAPI_ThruSections(!i,e,1e-6));t&&l.AddVertex(s(Qx(t)).wrapped),n.forEach(h=>l.AddWire(h.wrapped)),r&&l.AddVertex(s(Qx(r)).wrapped);const u=s(new o.Message_ProgressRange_1);l.Build(u);const c=di(l.Shape());if(a(),!yc(c))throw new Error("Could not loft to a 3d shape");return c};class fg{constructor(e,{defaultOrigin:t=[0,0,0],defaultDirection:r=[0,0,1]}={}){this.wire=e,this.defaultOrigin=t,this.defaultDirection=r,this.baseFace=null}get baseFace(){return this._baseFace}set baseFace(e){e?this._baseFace=e.clone():this._baseFace=e}delete(){this.wire.delete(),this._defaultOrigin.delete(),this._defaultDirection.delete(),this.baseFace&&this.baseFace.delete()}clone(){const e=new fg(this.wire.clone(),{defaultOrigin:this.defaultOrigin,defaultDirection:this.defaultDirection});return this.baseFace&&(e.baseFace=this.baseFace.clone()),e}get defaultOrigin(){return this._defaultOrigin}set defaultOrigin(e){this._defaultOrigin=new Rt(e)}get defaultDirection(){return this._defaultDirection}set defaultDirection(e){this._defaultDirection=new Rt(e)}face(){let e;return this.baseFace?e=QY(this.baseFace,this.wire):e=nx(this.wire),e}wires(){return this.wire.clone()}faces(){return this.face()}revolve(e,{origin:t}={}){const r=nx(this.wire),i=aD(r,t||this.defaultOrigin,e);return r.delete(),this.delete(),i}extrude(e,{extrusionDirection:t,extrusionProfile:r,twistAngle:i,origin:o}={}){const[s,a]=so(),l=s(new Rt(t||this.defaultDirection).normalized().multiply(e));if(r&&!i){const h=uD(this.wire,o||this.defaultOrigin,l,r);return a(),this.delete(),h}if(i){const h=cD(this.wire,i,o||this.defaultOrigin,l,r);return a(),this.delete(),h}const u=nx(this.wire),c=sD(u,l);return a(),this.delete(),c}sweepSketch(e,t={}){const r=this.wire.startPoint,i=this.wire.tangentAt(1e-9).multiply(-1).normalize(),o=i.cross(this.defaultDirection).multiply(-1),s=e(new Fs(r,o,i),r),a={forceProfileSpineOthogonality:!0,...t};this.baseFace&&(a.support=this.baseFace.wrapped);const l=Zv(s.wire,this.wire,a);return this.delete(),l}loftWith(e,t={},r=!1){const i=Array.isArray(e)?[this,...e]:[this,e],o=lZ(i.map(s=>s.wire),t,r);return i.forEach(s=>s.delete()),o}}const uZ=n=>{const e=zt(),t=new e.Bnd_Box2d;return n.forEach(r=>{e.BndLib_Add2dCurve.Add_3(r.wrapped,1e-6,t)}),new A1(t)};function cZ(n,e){const[t,r]=so(),i=t(fS(e.origin,e.zDir,e.xDir)),o=zt(),s=n.map(a=>{const l=o.GeomLib.To3d(i,a.wrapped);return new Ef(new o.BRepBuilderAPI_MakeEdge_24(l).Edge())});return r(),s}const hZ=(n,e)=>{const[t,r]=so(),i=zt(),o=n.map(s=>{const a=t(new i.BRepBuilderAPI_MakeEdge_30(s.wrapped,e));return new Ef(a.Edge())});return r(),o},hD=(n,e)=>{const t=zt();return n.map(i=>e?new Fi(t.GeomLib.GTransform(i.wrapped,e)):i.clone())};class P1 extends cl{transformCurves(e){return hD(e,this.wrapped)}}const fD=(n,e,t=[0,0])=>{const r=zt(),i=cg(t,e),o=new r.gp_GTrsf2d_1;return o.SetAffinity(i,n),i.delete(),new P1(o)},fZ=n=>{const e=zt(),[t,r]=so(),i=new e.gp_Trsf2d_1;i.SetTranslation_1(t(j6(n)));const o=new e.gp_GTrsf2d_2(i);return r(),new P1(o)},dZ=(n,e=[0,0],t="center")=>{const r=zt(),[i,o]=so(),s=new r.gp_Trsf2d_1;t==="center"?s.SetMirror_1(i(Yo(n))):s.SetMirror_2(i(cg(e,n)));const a=new r.gp_GTrsf2d_2(s);return o(),new P1(a)},pZ=(n,e=[0,0])=>{const t=zt(),[r,i]=so(),o=new t.gp_Trsf2d_1;o.SetRotation(r(Yo(e)),n);const s=new t.gp_GTrsf2d_2(o);return i(),new P1(s)},mZ=(n,e=[0,0])=>{const t=zt(),[r,i]=so(),o=new t.gp_Trsf2d_1;o.SetScale(r(Yo(e)),n);const s=new t.gp_GTrsf2d_2(o);return i(),new P1(s)};function gZ(n,e,t="original"){const[r,i]=so(),o=zt();let s=r(o.BRep_Tool.Surface_2(e.wrapped));const a=e.UVBounds;let l=null;const u=r(cg([0,0],[0,1])),c=r(cg([0,0],[1,0]));if(t==="original"&&e.geomType!=="PLANE"){if(e.geomType!=="CYLINDRE")throw new Error("Only planar and cylidrical faces can be unwrapped for sketching");const d=r(s.get().Cylinder());d.Direct()||(s=s.get().UReversed());const v=d.Radius();l=fD(1/v,[0,1]).wrapped}if(t==="bounds"){if(l=r(new o.gp_GTrsf2d_1),l.SetAffinity(u,a.uMax-a.uMin),a.uMin!==0){const v=r(new o.gp_GTrsf2d_1);v.SetTranslationPart(new o.gp_XY_2(0,-a.uMin)),l.Multiply(v)}const d=r(new o.gp_GTrsf2d_1);if(d.SetAffinity(c,a.vMax-a.vMin),l.Multiply(d),a.vMin!==0){const v=r(new o.gp_GTrsf2d_1);v.SetTranslationPart(r(new o.gp_XY_2(0,-a.vMin))),l.Multiply(v)}}const h=hD(n,l),f=hZ(h,s);return i(),f}const mS=(n,e=1)=>{const t=n.bounds[0][0]-e,r=-n.bounds[1][1]-e;return`${t} ${r} ${n.width+2*e} ${n.height+2*e}`},RA=(n,e,t=1)=>`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="${mS(e,t)}" fill="none" stroke="black" stroke-width="0.6%" vector-effect="non-scaling-stroke">
    ${n}
</svg>`;class tr{constructor(e){this.curves=e,this._boundingBox=null,this._orientation=null,this._guessedOrientation=null}delete(){this.curves.forEach(e=>e.delete()),this._boundingBox&&this._boundingBox.delete()}clone(){return new tr(this.curves)}get repr(){return["Blueprint",...this.curves.map(e=>e.repr)].join(`
`)}get boundingBox(){return this._boundingBox||(this._boundingBox=uZ(this.curves)),this._boundingBox}get orientation(){if(this._orientation)return this._orientation;if(this._guessedOrientation)return this._guessedOrientation;const e=this.curves.flatMap(r=>r.geomType!=="LINE"?[r.firstPoint,r.value(.5)]:[r.firstPoint]),t=e.map((r,i)=>{const o=e[(i+1)%e.length];return(o[0]-r[0])*(o[1]+r[1])}).reduce((r,i)=>r+i,0);return this._guessedOrientation=t>0?"clockwise":"counterClockwise",this._guessedOrientation}stretch(e,t,r=[0,0]){const i=fD(e,t,r).transformCurves(this.curves);return new tr(i)}scale(e,t){const r=t||this.boundingBox.center,i=mZ(e,r).transformCurves(this.curves);return new tr(i)}rotate(e,t){const r=pZ(e*zl,t).transformCurves(this.curves);return new tr(r)}translate(e,t=0){const r=$x(e)?e:[e,t],i=fZ(r).transformCurves(this.curves);return new tr(i)}mirror(e,t=[0,0],r="center"){const i=dZ(e,t,r).transformCurves(this.curves);return new tr(i)}sketchOnPlane(e,t){const r=e instanceof Fs?ff(e):ff(e,t),i=cZ(this.curves,r),o=Yv(i);return new fg(o,{defaultOrigin:r.origin,defaultDirection:r.zDir})}sketchOnFace(e,t){const r=zt(),i=gZ(this.curves,e,t),o=Yv(i);r.BRepLib.BuildCurves3d_2(o.wrapped);const s=new r.ShapeFix_Wire_2(o.wrapped,e.wrapped,1e-9);s.FixEdgeCurves(),s.delete();const a=new fg(o);if(o.isClosed){const l=a.clone().face();a.defaultOrigin=l.pointOnSurface(.5,.5),a.defaultDirection=l.normalAt(),l.orientation!==e.orientation&&(a.defaultDirection=a.defaultDirection.multiply(-1)),a.baseFace=e}else{const l=o.startPoint;a.defaultOrigin=l,a.defaultDirection=e.normalAt(l),a.baseFace=e}return a}toSVGPathD(){const e=ii(),t=this.clone().mirror([1,0],[0,0],"plane"),i=Yx(t.curves).flatMap(a=>WY(e(a.adaptor()),a.lastPoint)),[o,s]=t.curves[0].firstPoint;return`M ${Pl(o)} ${Pl(s)} ${i.join(" ")}${t.isClosed()?" Z":""}`}toSVGPath(){return`<path d="${this.toSVGPathD()}" />`}toSVGViewBox(e=1){return mS(this.boundingBox,e)}toSVGPaths(){return[this.toSVGPathD()]}toSVG(e=1){return RA(this.toSVGPath(),this.boundingBox,e)}get firstPoint(){return this.curves[0].firstPoint}get lastPoint(){return this.curves[this.curves.length-1].lastPoint}isInside(e){if(!this.boundingBox.containsPoint(e))return!1;const t=zt(),r=new t.Geom2dAPI_InterCurveCurve_1,i=C1(e,this.boundingBox.outsidePoint());let o=0;return this.curves.find(a=>a.isOnCurve(e))?!1:(this.curves.forEach(a=>{a.boundingBox.isOut(i.boundingBox)||(r.Init_1(i.wrapped,a.wrapped,1e-9),o+=r.NbPoints())}),r.delete(),!!(o%2))}isClosed(){return ws(this.firstPoint,this.lastPoint)}intersects(e){const t=zt(),r=new t.Geom2dAPI_InterCurveCurve_1;if(this.boundingBox.isOut(e.boundingBox))return!1;for(const i of this.curves)for(const o of e.curves)if(!i.boundingBox.isOut(o.boundingBox)&&(r.Init_1(i.wrapped,o.wrapped,1e-9),r.NbPoints()||r.NbSegments()))return!0;return r.delete(),!1}}class vZ{constructor(e=[0,0]){this.pointer=e,this.firstPoint=e,this._nextCorner=null,this.pendingCurves=[]}_convertToUV([e,t]){return[e,t]}_convertFromUV([e,t]){return[e,t]}movePointerTo(e){if(this.pendingCurves.length)throw new Error("You can only move the pointer if there is no curve defined");return this.pointer=e,this.firstPoint=e,this}saveCurve(e){if(!this._nextCorner){this.pendingCurves.push(e);return}const t=this.pendingCurves.pop();if(!t)throw new Error("bug in the custom corner algorithm");const r=this._nextCorner.mode==="chamfer"?VM:GM;this.pendingCurves.push(...r(t,e,this._nextCorner.radius)),this._nextCorner=null}lineTo(e){const t=C1(this._convertToUV(this.pointer),this._convertToUV(e));return this.pointer=e,this.saveCurve(t),this}line(e,t){return this.lineTo([this.pointer[0]+e,this.pointer[1]+t])}vLine(e){return this.line(0,e)}hLine(e){return this.line(e,0)}vLineTo(e){return this.lineTo([this.pointer[0],e])}hLineTo(e){return this.lineTo([e,this.pointer[1]])}polarLineTo([e,t]){const r=t*zl,i=Cm(e,r);return this.lineTo(i)}polarLine(e,t){const r=t*zl,[i,o]=Cm(e,r);return this.line(i,o)}tangentLine(e){const t=this.pendingCurves.length?this.pendingCurves[this.pendingCurves.length-1]:null;if(!t)throw new Error("You need a previous curve to sketch a tangent line");const r=Gh(this._convertFromUV(t.tangentAt(1)));return this.line(r[0]*e,r[1]*e)}threePointsArcTo(e,t){return this.saveCurve(zM(this._convertToUV(this.pointer),this._convertToUV(t),this._convertToUV(e))),this.pointer=e,this}threePointsArc(e,t,r,i){const[o,s]=this.pointer;return this.threePointsArcTo([o+e,s+t],[o+r,s+i])}sagittaArcTo(e,t){const[r,i]=this.pointer,[o,s]=e,a=[(r+o)/2,(i+s)/2],l=[-(s-i),o-r],u=Math.sqrt(l[0]**2+l[1]**2),c=[a[0]+l[0]/u*t,a[1]+l[1]/u*t];return this.saveCurve(zM(this._convertToUV(this.pointer),this._convertToUV(c),this._convertToUV(e))),this.pointer=e,this}sagittaArc(e,t,r){return this.sagittaArcTo([e+this.pointer[0],t+this.pointer[1]],r)}vSagittaArc(e,t){return this.sagittaArc(0,e,t)}hSagittaArc(e,t){return this.sagittaArc(e,0,t)}bulgeArcTo(e,t){if(!t)return this.lineTo(e);const r=Mu(this.pointer,e)/2,i=-t*r;return this.sagittaArcTo(e,i)}bulgeArc(e,t,r){return this.bulgeArcTo([e+this.pointer[0],t+this.pointer[1]],r)}vBulgeArc(e,t){return this.bulgeArc(0,e,t)}hBulgeArc(e,t){return this.bulgeArc(e,0,t)}tangentArcTo(e){const t=this.pendingCurves.length?this.pendingCurves[this.pendingCurves.length-1]:null;if(!t)throw new Error("You need a previous curve to sketch a tangent arc");return this.saveCurve(DY(this._convertToUV(this.pointer),t.tangentAt(1),this._convertToUV(e))),this.pointer=e,this}tangentArc(e,t){const[r,i]=this.pointer;return this.tangentArcTo([e+r,t+i])}ellipseTo(e,t,r,i=0,o=!1,s=!1){let a=i,l=t,u=r;t<r&&(a=i+90,l=r,u=t);const c=a*zl,h=R=>Mu(this._convertToUV(R)),f=h(Cm(l,c)),d=h(Cm(u,c+Math.PI/2)),v=Gh(this._convertToUV(kY([1,0],c))),[,y]=IY(v),{cx:x,cy:g,startAngle:S,endAngle:_,clockwise:E,rx:C,ry:I}=aZ(this._convertToUV(this.pointer),this._convertToUV(e),f,d,y,o,s),F=OY(C,I,E?S:_,E?_:S,[x,g],v);return E||F.reverse(),this.saveCurve(F),this.pointer=e,this}ellipse(e,t,r,i,o=0,s=!1,a=!1){const[l,u]=this.pointer;return this.ellipseTo([e+l,t+u],r,i,o,s,a)}halfEllipseTo(e,t,r=!1){const i=LY(e,this.pointer),o=Mu(e,this.pointer);return this.ellipseTo(e,o/2,t,i*Q0,!0,r)}halfEllipse(e,t,r,i=!1){const[o,s]=this.pointer;return this.halfEllipseTo([o+e,s+t],r,i)}bezierCurveTo(e,t){let r;return t.length===2&&!Array.isArray(t[0])?r=[t]:r=t,this.saveCurve(BY(this._convertToUV(this.pointer),r.map(i=>this._convertToUV(i)),this._convertToUV(e))),this.pointer=e,this}quadraticBezierCurveTo(e,t){return this.bezierCurveTo(e,[t])}cubicBezierCurveTo(e,t,r){return this.bezierCurveTo(e,[t,r])}smoothSplineTo(e,t){const{endTangent:r,startTangent:i,startFactor:o,endFactor:s}=sZ(t),a=this.pendingCurves.length?this.pendingCurves[this.pendingCurves.length-1]:null,l=Mu(this.pointer,e)*.25;let u;i?u=i:a?u=this._convertFromUV(a.tangentAt(1)):u=[1,0],u=Gh(u);const c=[this.pointer[0]+u[0]*o*l,this.pointer[1]+u[1]*o*l];let h;r==="symmetric"?h=[-u[0],-u[1]]:h=r,h=Gh(h);const f=[e[0]-h[0]*s*l,e[1]-h[1]*s*l];return this.cubicBezierCurveTo(e,c,f)}smoothSpline(e,t,r){return this.smoothSplineTo([e+this.pointer[0],t+this.pointer[1]],r)}customCorner(e,t="fillet"){if(!this.pendingCurves.length)throw new Error("You need a curve defined to fillet the angle");return this._nextCorner={mode:t,radius:e},this}_customCornerLastWithFirst(e,t="fillet"){if(!e)return;const r=this.pendingCurves.pop(),i=this.pendingCurves.shift();if(!r||!i)throw new Error("Not enough curves to close and fillet");const o=t==="chamfer"?VM:GM;this.pendingCurves.push(...o(r,i,e))}_closeSketch(){ws(this.pointer,this.firstPoint)||this.lineTo(this.firstPoint)}_closeWithMirror(){if(ws(this.pointer,this.firstPoint))throw new Error("Cannot close with a mirror when the sketch is already closed");const e=[this.pointer[0]-this.firstPoint[0],this.pointer[1]-this.firstPoint[1]],t=cg(this._convertToUV(this.pointer),this._convertToUV(e)),r=this.pendingCurves.map(i=>new Fi(i.innerCurve.Mirrored_2(t)));r.reverse(),r.map(i=>i.reverse()),this.pendingCurves.push(...r),this.pointer=this.firstPoint}}const yZ=n=>{const e=zt(),t=new e.BRepOffsetAPI_MakeFilling(3,15,2,!1,1e-5,1e-4,.01,.1,8,9);n.forEach((o,s)=>{o.edges.forEach(a=>{t.Add_1(a.wrapped,e.GeomAbs_Shape.GeomAbs_C0,s===0)})});const r=new e.Message_ProgressRange_1;t.Build(r),r.delete();const i=di(t.Shape());if(t.delete(),!(i instanceof Mg))throw new Error("Failed to create a face");return i},xZ=(n,e)=>{const t=zt(),r=new t.ShapeFix_Wire_2(n.wrapped,e.wrapped,1e-9);return r.FixEdgeCurves(),r.delete(),n},DR=n=>{let e,t;try{e=nx(n[0]),t=n.slice(1)}catch{e=yZ(n),t=n.slice(1).map(i=>xZ(i,e))}return oD(e,t)},OR=(n,e)=>{const t=[],r=[],i=[];n.forEach(l=>{const[u,c,h]=e(l);t.push(u),r.push(c),i.push(h)});const o=DR(r),s=DR(i);return PA([o,...t,s])};class BR{constructor(e){this.sketches=e}delete(){this.sketches.forEach(e=>e.delete())}get outerSketch(){return this.sketches[0]}get innerSketches(){return this.sketches.slice(1)}get wires(){const e=this.sketches.map(t=>t.wire);return Eu(e)}face(){const e=this.outerSketch.face();return oD(e,this.innerSketches.map(r=>r.wire))}extrude(e,{extrusionDirection:t,extrusionProfile:r,twistAngle:i,origin:o}={}){const s=new Rt(t||this.outerSketch.defaultDirection).normalized().multiply(e);return r&&!i?OR(this.sketches,u=>uD(u.wire,o||this.outerSketch.defaultOrigin,s,r,!0)):i?OR(this.sketches,u=>cD(u.wire,i,o||this.outerSketch.defaultOrigin,s,r,!0)):sD(this.face(),s)}revolve(e,{origin:t}={}){return aD(this.face(),t||this.outerSketch.defaultOrigin,e)}loftWith(e,t){if(this.sketches.length!==e.sketches.length)throw new Error("You need to loft with another compound with the same number of sketches");const r=this.sketches.map((o,s)=>{const a=e.sketches[s];return o.clone().loftWith(a.clone(),{ruled:t.ruled},!0)}),i=this.face().clone();return r.push(i,e.face()),PA(r)}}class Lr{constructor(e){this.blueprints=e,this._boundingBox=null}clone(){return new Lr(this.blueprints)}get boundingBox(){if(!this._boundingBox){const e=new A1;this.blueprints.forEach(t=>e.add(t.boundingBox)),this._boundingBox=e}return this._boundingBox}get repr(){return["Compound Blueprints","-- Outline",this.blueprints[0].repr,"-- Holes",...this.blueprints.slice(1).map(e=>e.repr)].join(`
`)}stretch(e,t,r){return new Lr(this.blueprints.map(i=>i.stretch(e,t,r)))}rotate(e,t){return new Lr(this.blueprints.map(r=>r.rotate(e,t)))}scale(e,t){const r=t||this.boundingBox.center;return new Lr(this.blueprints.map(i=>i.scale(e,r)))}translate(e,t=0){return new Lr(this.blueprints.map(r=>r.translate(e,t)))}mirror(e,t,r){return new Lr(this.blueprints.map(i=>i.mirror(e,t,r)))}sketchOnPlane(e,t){const r=this.blueprints.map(i=>i.sketchOnPlane(e,t));return new BR(r)}sketchOnFace(e,t){const r=this.blueprints.map(i=>i.sketchOnFace(e,t));return new BR(r)}toSVGViewBox(e=1){return mS(this.boundingBox,e)}toSVGPaths(){return this.blueprints.flatMap(e=>e.toSVGPaths())}toSVGGroup(){return`<g>${this.blueprints.map(e=>e.toSVGPath()).join("")}</g>`}toSVG(e=1){return RA(this.toSVGGroup(),this.boundingBox,e)}}class UR{constructor(e){this.sketches=e}wires(){const e=this.sketches.map(t=>t instanceof fg?t.wire:t.wires);return Eu(e)}faces(){const e=this.sketches.map(t=>t.face());return Eu(e)}extrude(e,t={}){const r=this.sketches.map(i=>i.extrude(e,t));return Eu(r)}revolve(e,t){return Eu(this.sketches.map(r=>r.revolve(e,t)))}}class Un{constructor(e){this.blueprints=e,this._boundingBox=null}get repr(){return["Blueprints",...this.blueprints.map(e=>e.repr)].join(`
`)}clone(){return new Un(this.blueprints)}get boundingBox(){if(!this._boundingBox){const e=new A1;this.blueprints.forEach(t=>e.add(t.boundingBox)),this._boundingBox=e}return this._boundingBox}stretch(e,t,r){return new Un(this.blueprints.map(i=>i.stretch(e,t,r)))}rotate(e,t){return new Un(this.blueprints.map(r=>r.rotate(e,t)))}scale(e,t){const r=t||this.boundingBox.center;return new Un(this.blueprints.map(i=>i.scale(e,r)))}translate(e,t=0){return new Un(this.blueprints.map(r=>r.translate(e,t)))}mirror(e,t,r){return new Un(this.blueprints.map(i=>i.mirror(e,t,r)))}sketchOnPlane(e,t){return new UR(this.blueprints.map(r=>r.sketchOnPlane(e,t)))}sketchOnFace(e,t){return new UR(this.blueprints.map(r=>r.sketchOnFace(e,t)))}toSVGViewBox(e=1){return mS(this.boundingBox,e)}toSVGPaths(){return this.blueprints.map(e=>e.toSVGPaths())}toSVG(e=1){const t=this.blueprints.map(r=>r instanceof tr?r.toSVGPath():r.toSVGGroup());return RA(t.join(`
    `),this.boundingBox,e)}}const wZ=n=>{const e=n.map((i,o)=>n.slice(o+1).map((s,a)=>[a+o+1,s]).filter(([,s])=>!i.boundingBox.isOut(s.boundingBox)).map(([s])=>s)),t=[],r=Array(e.length);return e.forEach((i,o)=>{let s=r[o];s||(s=[],t.push(s)),s.push(n[o]),i.length&&i.forEach(a=>{r[a]=s})}),t},dD=n=>n.map((e,t)=>{const r=e.curves[0],i=r.value((r.lastParameter+r.firstParameter)/2),o=n.filter((s,a)=>t===a?!1:s.isInside(i));return{blueprint:e,isIn:o}}),SZ=(n,e)=>n.flatMap(({blueprint:t})=>LA(e.filter(({blueprint:r,isIn:i})=>r===t||i.indexOf(t)!==-1))),_Z=(n,e)=>{const t=e.filter(({isIn:i})=>i.length<=1),r=LA(dD(n.map(({blueprint:i})=>i)));return[t,...r]},LA=n=>{if(!n.length)return[];const e=n.filter(({isIn:r})=>!r.length),t=n.filter(({isIn:r})=>r.length>1);return e.length===1&&t.length===0?[n]:e.length>1?SZ(e,n):_Z(t,n)},R1=n=>{const e=wZ(n).map(dD);return new Un(e.flatMap(LA).map(t=>t.length===1?t[0].blueprint:(t.sort((r,i)=>r.isIn.length-i.isIn.length),new Lr(t.map(({blueprint:r})=>r)))))},rx=1e-9,ms=(n,e)=>ws(n,e,rx),N0=n=>{const e=(n.lastParameter+n.firstParameter)/2;return n.value(e)},zR=(n,e)=>{const t=n.findIndex(o=>ms(e,o.firstPoint)),r=n.slice(0,t);return n.slice(t).concat(r)},HR=(n,e)=>{const t=s=>ms(e.firstPoint,s.firstPoint)&&ms(e.lastPoint,s.lastPoint);let r=n.findIndex(t);if(r===-1&&(n=kA(n),r=n.findIndex(t),r===-1))throw console.error(n.map(s=>s.repr),e.repr),new Error("Failed to rotate to segment start");const i=n.slice(0,r);return n.slice(r).concat(i)};function*GR(n,e,t){const r=s=>!!e.find(a=>ms(a,s.lastPoint)),i=s=>!!t.find(a=>ms(a.firstPoint,s.firstPoint)&&ms(a.lastPoint,s.lastPoint)||ms(a.firstPoint,s.lastPoint)&&ms(a.lastPoint,s.firstPoint));let o=[];for(const s of n)r(s)?(o.push(s),yield o,o=[]):i(s)?(o.length&&(yield o,o=[]),yield[s]):o.push(s);o.length&&(yield o)}const bZ=n=>n[0].firstPoint,db=n=>n[n.length-1].lastPoint,kA=n=>(n.reverse(),n.map(e=>{const t=e.clone();return t.reverse(),t})),MZ=n=>(n.reverse(),n.map(kA));function EZ(n,e,t){return n.filter(r=>{const i=e.filter(a=>ms(a.firstPoint,r)||ms(a.lastPoint,r));if(i.length%2)throw console.error(i,r),new Error("Bug in the intersection algo on non crossing point");const o=i.map(a=>t.isInside(N0(a)));return!(o.every(a=>a)||!o.some(a=>a))})}function AZ(n,e){let t=[];const r=[],i=new Array(n.curves.length).fill(0).map(()=>[]),o=new Array(e.curves.length).fill(0).map(()=>[]);if(n.curves.forEach((f,d)=>{e.curves.forEach((v,y)=>{const{intersections:x,commonSegments:g,commonSegmentsPoints:S}=T1(f,v,rx/100);t.push(...x),i[d].push(...x),o[y].push(...x),r.push(...g),t.push(...S),i[d].push(...S),o[y].push(...S)})}),t=W6(t,rx),!t.length||t.length===1)return null;const s=([f,d])=>d.length?f.splitAt(d,rx/100):[f];let a=Um([n.curves,i]).flatMap(s),l=Um([e.curves,o]).flatMap(s);const u=r.map(f=>[f.firstPoint,f.lastPoint]);if(t=EZ(t,a,e),!t.length&&!r.length)return null;if(r.length){const f=r[0];a=HR(a,f),l=HR(l,f)}else{const f=t[0];a=zR(a,f),l=zR(l,f)}const c=Array.from(GR(a,t,r));let h=Array.from(GR(l,t,r));return(!ms(db(h[0]),db(c[0]))||r.length>0&&h[0].length!==1)&&(h=MZ(h)),Um([c,h]).map(([f,d])=>{const v=bZ(f),y=db(f);return u.find(([x,g])=>ms(x,v)&&ms(g,y)||ms(x,y)&&ms(x,v))?[f,"same"]:[f,d]})}const TZ=n=>{const e=n.map(s=>s.firstPoint);let t=n.map(s=>s.lastPoint);t=t.slice(-1).concat(t.slice(0,-1));const r=Um([e,t]).map(([s,a],l)=>ms(s,a)?null:l).filter(s=>s!==null);if(!r.length)return[n];const i=Um([r.slice(0,-1),r.slice(1)]).map(([s,a])=>n.slice(s,a));let o=n.slice(r[r.length-1]);return r[0]!==0&&(o=o.concat(n.slice(0,r[0]))),i.push(o),i};function IA(n,e,{firstInside:t,secondInside:r}){const i=AZ(n,e);if(!i){const u=N0(n.curves[0]),c=e.isInside(u),h=N0(e.curves[0]),f=n.isInside(h);return{identical:!1,firstCurveInSecond:c,secondCurveInFirst:f}}if(i.every(([,u])=>u==="same"))return{identical:!0};let o=null,s=null;const a=i.flatMap(([u,c])=>{let h=[],f=0;if(c==="same")return s===1?(s=1,[...u]):s===2||s===0?(s=null,[]):s===null?(o?o=[...o,...u]:o=u,[]):(console.error("weird situation"),[]);const d=N0(u[0]),v=e.isInside(d);(t==="keep"&&v||t==="remove"&&!v)&&(f+=1,h.push(...u));const y=N0(c[0]),x=n.isInside(y);if(r==="keep"&&x||r==="remove"&&!x){let g=c;f===1&&(g=kA(c)),f+=1,h.push(...g)}return s===null&&f===1&&o&&(h=[...o,...h]),f===1&&(s=f,o=null),h}),l=TZ(a).filter(u=>u.length).map(u=>new tr(u));return l.length===0?null:l.length===1?l[0]:R1(l)}const gS=(n,e)=>{const t=IA(n,e,{firstInside:"remove",secondInside:"remove"});return t===null||t instanceof tr||t instanceof Un?t:t.identical?n.clone():t.firstCurveInSecond?e.clone():t.secondCurveInFirst?n.clone():new Un([n,e])},Kv=(n,e)=>{const t=IA(n,e,{firstInside:"remove",secondInside:"keep"});return t===null||t instanceof tr||t instanceof Un?t:t.identical||t.firstCurveInSecond?null:t.secondCurveInFirst?new Un([new Lr([n,e])]):n.clone()},NA=(n,e)=>{const t=IA(n,e,{firstInside:"keep",secondInside:"keep"});return t===null||t instanceof tr||t instanceof Un?t:t.identical||t.firstCurveInSecond?n.clone():t.secondCurveInFirst?e.clone():null},jM=(n,e)=>{if(n instanceof tr&&e instanceof tr){let t=[];return n.curves.forEach(r=>{e.curves.forEach(i=>{const{intersections:o,commonSegmentsPoints:s}=T1(r,i);t.push(...o),t.push(...s)})}),t=W6(t),t.length>1}if(n instanceof Lr||n instanceof Un)return n.blueprints.some(t=>jM(t,e));if(e instanceof Lr||e instanceof Un)return e.blueprints.some(t=>jM(n,t));throw new Error("Bug in the generic intersects algorithm")},CZ=(n,e)=>{if(n instanceof Lr){if(e instanceof tr)return ew(e,n);if(e instanceof Lr)return tw(n,e)}if(e instanceof Lr){if(n instanceof tr)return ew(n,e);if(n instanceof Lr)return tw(n,e)}if(n instanceof tr&&e instanceof tr)return gS(n,e);throw new Error("Bug in the generic fuse algorithm")},VR=n=>{const e=new Map,t=[];return n.forEach((r,i)=>{let o;e.has(i)?o=e.get(i):(o={current:r,fusedWith:new Set([i])},t.push(o)),n.slice(i+1).forEach((s,a)=>{const l=o.current,u=i+a+1;if(o.fusedWith.has(u))return;let c=s,h=!1;if(e.has(u)&&(c=e.get(u).current,h=!0),l.boundingBox.isOut(c.boundingBox)||!jM(l,c))return;let f;if(l instanceof Un||c instanceof Un?f=Ec(l,c):f=CZ(l,c),!(f instanceof tr||f instanceof Lr)){if(f instanceof Un&&f.blueprints.length===2)return;if(f instanceof Un&&f.blueprints.length===1)f=f.blueprints[0];else if(!(f instanceof Un))throw console.error(f),new Error("Bug in blueprint fusing algorigthm")}o.fusedWith.add(u),o.current=f,h||e.set(u,o)})}),R1(t.map(({current:r})=>r).filter(r=>r).flatMap(r=>Mc(r)))},Mc=n=>n instanceof tr?[n]:n instanceof Lr?n.blueprints:n instanceof Un?n.blueprints.flatMap(e=>Mc(e)):[],ew=(n,e)=>{const t=gS(n,e.blueprints[0]),r=e.blueprints.slice(1).map(i=>Kv(i,n));return R1([...Mc(t),...r.flatMap(i=>Mc(i))])};function PZ(n,e){const t=[];for(const r of n)for(const i of e)t.push([r,i]);return t}const tw=(n,e)=>{const t=gS(n.blueprints[0],e.blueprints[0]),r=e.blueprints.slice(1).map(s=>Kv(s,n.blueprints[0])),i=n.blueprints.slice(1).map(s=>Kv(s,e.blueprints[0])),o=PZ(n.blueprints.slice(1),e.blueprints.slice(1)).flatMap(([s,a])=>Mc(NA(s,a)));return R1([...Mc(t),...r.flatMap(s=>Mc(s)),...i.flatMap(s=>Mc(s)),...o])},Ec=(n,e)=>{if(n===null)return e&&e.clone();if(e===null)return n&&n.clone();if(!(n instanceof Un)&&e instanceof Un)return VR([n,...e.blueprints]);if(!(e instanceof Un)&&n instanceof Un)return VR([e,...n.blueprints]);if(n instanceof Un&&e instanceof Un){let t=Ec(n.blueprints[0],e);return n.blueprints.slice(1).forEach(r=>{t=Ec(r,t)}),t}if(n instanceof Lr){if(e instanceof Un)return Ec(e,n);if(e instanceof tr)return ew(e,n);if(e instanceof Lr)return tw(n,e)}if(e instanceof Lr){if(n instanceof Un)return Ec(n,e);if(n instanceof tr)return ew(n,e);if(n instanceof Lr)return tw(n,e)}return n instanceof tr&&e instanceof tr?gS(n,e):null},nw=n=>{const e=n.flatMap(t=>t===null?[]:t instanceof Un?t.blueprints:t);return e.length===1?e[0]:new Un(e)},Vh=(n,e)=>{if(n===null)return null;if(e===null)return n.clone();if(n instanceof Un)return nw(n.blueprints.map(r=>Vh(r,e)));if(n instanceof Lr){const r=n.blueprints[0];if(e instanceof tr&&!e.intersects(r)){if(!r.isInside(e.firstPoint))return null;const i=Ec(e,new Un(n.blueprints.slice(1)));return R1([r,...Mc(i)])}else{let i=Vh(n.blueprints[0],e);return n.blueprints.slice(1).forEach(o=>{i=Vh(i,o)}),i}}if(e instanceof Un)return nw(e.blueprints.map(r=>Vh(n,r)));if(e instanceof Lr){let r=Kv(n,e.blueprints[0]);return e.blueprints.slice(1).forEach(i=>{r=Ec(r,NA(i,n))}),r}return Kv(n,e)};function F0(n,e){if(n===null||e===null)return null;if(n instanceof tr&&e instanceof tr)return NA(n,e);if(n instanceof Un)return nw(n.blueprints.map(t=>F0(t,e)));if(n instanceof Lr){const t=n.blueprints[0],r=n.blueprints[1];return Vh(F0(t,e),r)}if(e instanceof Un)return nw(e.blueprints.map(t=>F0(n,t)));if(e instanceof Lr){const t=e.blueprints[0],r=e.blueprints[1];return Vh(F0(t,n),r)}throw new Error("intersct 2D algorithm error")}const WR=(n,e={})=>{const t=e.plane instanceof Fs?ff(e.plane):ff(e.plane,e.origin),r=Yv([KY(n,t.origin,t.zDir)]),i=new fg(r,{defaultOrigin:t.origin,defaultDirection:t.zDir});return t.delete(),i};/*! https://mths.be/codepointat v0.2.0 by @mathias */String.prototype.codePointAt||function(){var n=function(){try{var t={},r=Object.defineProperty,i=r(t,t,t)&&r}catch{}return i}(),e=function(t){if(this==null)throw TypeError();var r=String(this),i=r.length,o=t?Number(t):0;if(o!=o&&(o=0),!(o<0||o>=i)){var s=r.charCodeAt(o),a;return s>=55296&&s<=56319&&i>o+1&&(a=r.charCodeAt(o+1),a>=56320&&a<=57343)?(s-55296)*1024+a-56320+65536:s}};n?n(String.prototype,"codePointAt",{value:e,configurable:!0,writable:!0}):String.prototype.codePointAt=e}();function pD(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}var RZ=new pD,LZ=new pD,mD=new Uint8Array(30),gD=new Uint16Array(30),kZ=new Uint8Array(30),IZ=new Uint16Array(30);function vD(n,e,t,r){var i,o;for(i=0;i<t;++i)n[i]=0;for(i=0;i<30-t;++i)n[i+t]=i/t|0;for(o=r,i=0;i<30;++i)e[i]=o,o+=1<<n[i]}function NZ(n,e){var t;for(t=0;t<7;++t)n.table[t]=0;for(n.table[7]=24,n.table[8]=152,n.table[9]=112,t=0;t<24;++t)n.trans[t]=256+t;for(t=0;t<144;++t)n.trans[24+t]=t;for(t=0;t<8;++t)n.trans[24+144+t]=280+t;for(t=0;t<112;++t)n.trans[24+144+8+t]=144+t;for(t=0;t<5;++t)e.table[t]=0;for(e.table[5]=32,t=0;t<32;++t)e.trans[t]=t}NZ(RZ,LZ);vD(mD,gD,4,3);vD(kZ,IZ,2,1);mD[28]=0;gD[28]=258;function em(n,e,t,r,i){return Math.pow(1-i,3)*n+3*Math.pow(1-i,2)*i*e+3*(1-i)*Math.pow(i,2)*t+Math.pow(i,3)*r}function Af(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}Af.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};Af.prototype.addPoint=function(n,e){typeof n=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=n,this.x2=n),n<this.x1&&(this.x1=n),n>this.x2&&(this.x2=n)),typeof e=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))};Af.prototype.addX=function(n){this.addPoint(n,null)};Af.prototype.addY=function(n){this.addPoint(null,n)};Af.prototype.addBezier=function(n,e,t,r,i,o,s,a){var l=[n,e],u=[t,r],c=[i,o],h=[s,a];this.addPoint(n,e),this.addPoint(s,a);for(var f=0;f<=1;f++){var d=6*l[f]-12*u[f]+6*c[f],v=-3*l[f]+9*u[f]-9*c[f]+3*h[f],y=3*u[f]-3*l[f];if(v===0){if(d===0)continue;var x=-y/d;0<x&&x<1&&(f===0&&this.addX(em(l[f],u[f],c[f],h[f],x)),f===1&&this.addY(em(l[f],u[f],c[f],h[f],x)));continue}var g=Math.pow(d,2)-4*y*v;if(!(g<0)){var S=(-d+Math.sqrt(g))/(2*v);0<S&&S<1&&(f===0&&this.addX(em(l[f],u[f],c[f],h[f],S)),f===1&&this.addY(em(l[f],u[f],c[f],h[f],S)));var _=(-d-Math.sqrt(g))/(2*v);0<_&&_<1&&(f===0&&this.addX(em(l[f],u[f],c[f],h[f],_)),f===1&&this.addY(em(l[f],u[f],c[f],h[f],_)))}}};Af.prototype.addQuad=function(n,e,t,r,i,o){var s=n+.6666666666666666*(t-n),a=e+2/3*(r-e),l=s+1/3*(i-n),u=a+1/3*(o-e);this.addBezier(n,e,s,a,l,u,i,o)};function _o(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}_o.prototype.moveTo=function(n,e){this.commands.push({type:"M",x:n,y:e})};_o.prototype.lineTo=function(n,e){this.commands.push({type:"L",x:n,y:e})};_o.prototype.curveTo=_o.prototype.bezierCurveTo=function(n,e,t,r,i,o){this.commands.push({type:"C",x1:n,y1:e,x2:t,y2:r,x:i,y:o})};_o.prototype.quadTo=_o.prototype.quadraticCurveTo=function(n,e,t,r){this.commands.push({type:"Q",x1:n,y1:e,x:t,y:r})};_o.prototype.close=_o.prototype.closePath=function(){this.commands.push({type:"Z"})};_o.prototype.extend=function(n){if(n.commands)n=n.commands;else if(n instanceof Af){var e=n;this.moveTo(e.x1,e.y1),this.lineTo(e.x2,e.y1),this.lineTo(e.x2,e.y2),this.lineTo(e.x1,e.y2),this.close();return}Array.prototype.push.apply(this.commands,n)};_o.prototype.getBoundingBox=function(){for(var n=new Af,e=0,t=0,r=0,i=0,o=0;o<this.commands.length;o++){var s=this.commands[o];switch(s.type){case"M":n.addPoint(s.x,s.y),e=r=s.x,t=i=s.y;break;case"L":n.addPoint(s.x,s.y),r=s.x,i=s.y;break;case"Q":n.addQuad(r,i,s.x1,s.y1,s.x,s.y),r=s.x,i=s.y;break;case"C":n.addBezier(r,i,s.x1,s.y1,s.x2,s.y2,s.x,s.y),r=s.x,i=s.y;break;case"Z":r=e,i=t;break;default:throw new Error("Unexpected path command "+s.type)}}return n.isEmpty()&&n.addPoint(0,0),n};_o.prototype.draw=function(n){n.beginPath();for(var e=0;e<this.commands.length;e+=1){var t=this.commands[e];t.type==="M"?n.moveTo(t.x,t.y):t.type==="L"?n.lineTo(t.x,t.y):t.type==="C"?n.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y):t.type==="Q"?n.quadraticCurveTo(t.x1,t.y1,t.x,t.y):t.type==="Z"&&n.closePath()}this.fill&&(n.fillStyle=this.fill,n.fill()),this.stroke&&(n.strokeStyle=this.stroke,n.lineWidth=this.strokeWidth,n.stroke())};_o.prototype.toPathData=function(n){n=n!==void 0?n:2;function e(s){return Math.round(s)===s?""+Math.round(s):s.toFixed(n)}function t(){for(var s=arguments,a="",l=0;l<arguments.length;l+=1){var u=s[l];u>=0&&l>0&&(a+=" "),a+=e(u)}return a}for(var r="",i=0;i<this.commands.length;i+=1){var o=this.commands[i];o.type==="M"?r+="M"+t(o.x,o.y):o.type==="L"?r+="L"+t(o.x,o.y):o.type==="C"?r+="C"+t(o.x1,o.y1,o.x2,o.y2,o.x,o.y):o.type==="Q"?r+="Q"+t(o.x1,o.y1,o.x,o.y):o.type==="Z"&&(r+="Z")}return r};_o.prototype.toSVG=function(n){var e='<path d="';return e+=this.toPathData(n),e+='"',this.fill&&this.fill!=="black"&&(this.fill===null?e+=' fill="none"':e+=' fill="'+this.fill+'"'),this.stroke&&(e+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),e+="/>",e};_o.prototype.toDOMElement=function(n){var e=this.toPathData(n),t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",e),t};function yD(n){throw new Error(n)}function jR(n,e){n||yD(e)}var Fn={fail:yD,argument:jR,assert:jR},qR=32768,$R=2147483648,dg={},qt={},Cn={};function eu(n){return function(){return n}}qt.BYTE=function(n){return Fn.argument(n>=0&&n<=255,"Byte value should be between 0 and 255."),[n]};Cn.BYTE=eu(1);qt.CHAR=function(n){return[n.charCodeAt(0)]};Cn.CHAR=eu(1);qt.CHARARRAY=function(n){typeof n>"u"&&(n="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var e=[],t=0;t<n.length;t+=1)e[t]=n.charCodeAt(t);return e};Cn.CHARARRAY=function(n){return typeof n>"u"?0:n.length};qt.USHORT=function(n){return[n>>8&255,n&255]};Cn.USHORT=eu(2);qt.SHORT=function(n){return n>=qR&&(n=-(2*qR-n)),[n>>8&255,n&255]};Cn.SHORT=eu(2);qt.UINT24=function(n){return[n>>16&255,n>>8&255,n&255]};Cn.UINT24=eu(3);qt.ULONG=function(n){return[n>>24&255,n>>16&255,n>>8&255,n&255]};Cn.ULONG=eu(4);qt.LONG=function(n){return n>=$R&&(n=-(2*$R-n)),[n>>24&255,n>>16&255,n>>8&255,n&255]};Cn.LONG=eu(4);qt.FIXED=qt.ULONG;Cn.FIXED=Cn.ULONG;qt.FWORD=qt.SHORT;Cn.FWORD=Cn.SHORT;qt.UFWORD=qt.USHORT;Cn.UFWORD=Cn.USHORT;qt.LONGDATETIME=function(n){return[0,0,0,0,n>>24&255,n>>16&255,n>>8&255,n&255]};Cn.LONGDATETIME=eu(8);qt.TAG=function(n){return Fn.argument(n.length===4,"Tag should be exactly 4 ASCII characters."),[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3)]};Cn.TAG=eu(4);qt.Card8=qt.BYTE;Cn.Card8=Cn.BYTE;qt.Card16=qt.USHORT;Cn.Card16=Cn.USHORT;qt.OffSize=qt.BYTE;Cn.OffSize=Cn.BYTE;qt.SID=qt.USHORT;Cn.SID=Cn.USHORT;qt.NUMBER=function(n){return n>=-107&&n<=107?[n+139]:n>=108&&n<=1131?(n=n-108,[(n>>8)+247,n&255]):n>=-1131&&n<=-108?(n=-n-108,[(n>>8)+251,n&255]):n>=-32768&&n<=32767?qt.NUMBER16(n):qt.NUMBER32(n)};Cn.NUMBER=function(n){return qt.NUMBER(n).length};qt.NUMBER16=function(n){return[28,n>>8&255,n&255]};Cn.NUMBER16=eu(3);qt.NUMBER32=function(n){return[29,n>>24&255,n>>16&255,n>>8&255,n&255]};Cn.NUMBER32=eu(5);qt.REAL=function(n){var e=n.toString(),t=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(e);if(t){var r=parseFloat("1e"+((t[2]?+t[2]:0)+t[1].length));e=(Math.round(n*r)/r).toString()}for(var i="",o=0,s=e.length;o<s;o+=1){var a=e[o];a==="e"?i+=e[++o]==="-"?"c":"b":a==="."?i+="a":a==="-"?i+="e":i+=a}i+=i.length&1?"f":"ff";for(var l=[30],u=0,c=i.length;u<c;u+=2)l.push(parseInt(i.substr(u,2),16));return l};Cn.REAL=function(n){return qt.REAL(n).length};qt.NAME=qt.CHARARRAY;Cn.NAME=Cn.CHARARRAY;qt.STRING=qt.CHARARRAY;Cn.STRING=Cn.CHARARRAY;dg.UTF8=function(n,e,t){for(var r=[],i=t,o=0;o<i;o++,e+=1)r[o]=n.getUint8(e);return String.fromCharCode.apply(null,r)};dg.UTF16=function(n,e,t){for(var r=[],i=t/2,o=0;o<i;o++,e+=2)r[o]=n.getUint16(e);return String.fromCharCode.apply(null,r)};qt.UTF16=function(n){for(var e=[],t=0;t<n.length;t+=1){var r=n.charCodeAt(t);e[e.length]=r>>8&255,e[e.length]=r&255}return e};Cn.UTF16=function(n){return n.length*2};var qM={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};dg.MACSTRING=function(n,e,t,r){var i=qM[r];if(i!==void 0){for(var o="",s=0;s<t;s++){var a=n.getUint8(e+s);a<=127?o+=String.fromCharCode(a):o+=i[a&127]}return o}};var m2=typeof WeakMap=="function"&&new WeakMap,g2,FZ=function(n){if(!g2){g2={};for(var e in qM)g2[e]=new String(e)}var t=g2[n];if(t!==void 0){if(m2){var r=m2.get(t);if(r!==void 0)return r}var i=qM[n];if(i!==void 0){for(var o={},s=0;s<i.length;s++)o[i.charCodeAt(s)]=s+128;return m2&&m2.set(t,o),o}}};qt.MACSTRING=function(n,e){var t=FZ(e);if(t!==void 0){for(var r=[],i=0;i<n.length;i++){var o=n.charCodeAt(i);if(o>=128&&(o=t[o],o===void 0))return;r[i]=o}return r}};Cn.MACSTRING=function(n,e){var t=qt.MACSTRING(n,e);return t!==void 0?t.length:0};function $M(n){return n>=-128&&n<=127}function DZ(n,e,t){for(var r=0,i=n.length;e<i&&r<64&&n[e]===0;)++e,++r;return t.push(128|r-1),e}function OZ(n,e,t){for(var r=0,i=n.length,o=e;o<i&&r<64;){var s=n[o];if(!$M(s)||s===0&&o+1<i&&n[o+1]===0)break;++o,++r}t.push(r-1);for(var a=e;a<o;++a)t.push(n[a]+256&255);return o}function BZ(n,e,t){for(var r=0,i=n.length,o=e;o<i&&r<64;){var s=n[o];if(s===0||$M(s)&&o+1<i&&$M(n[o+1]))break;++o,++r}t.push(64|r-1);for(var a=e;a<o;++a){var l=n[a];t.push(l+65536>>8&255,l+256&255)}return o}qt.VARDELTAS=function(n){for(var e=0,t=[];e<n.length;){var r=n[e];r===0?e=DZ(n,e,t):r>=-128&&r<=127?e=OZ(n,e,t):e=BZ(n,e,t)}return t};qt.INDEX=function(n){for(var e=1,t=[e],r=[],i=0;i<n.length;i+=1){var o=qt.OBJECT(n[i]);Array.prototype.push.apply(r,o),e+=o.length,t.push(e)}if(r.length===0)return[0,0];for(var s=[],a=1+Math.floor(Math.log(e)/Math.log(2))/8|0,l=[void 0,qt.BYTE,qt.USHORT,qt.UINT24,qt.ULONG][a],u=0;u<t.length;u+=1){var c=l(t[u]);Array.prototype.push.apply(s,c)}return Array.prototype.concat(qt.Card16(n.length),qt.OffSize(a),s,r)};Cn.INDEX=function(n){return qt.INDEX(n).length};qt.DICT=function(n){for(var e=[],t=Object.keys(n),r=t.length,i=0;i<r;i+=1){var o=parseInt(t[i],0),s=n[o];e=e.concat(qt.OPERAND(s.value,s.type)),e=e.concat(qt.OPERATOR(o))}return e};Cn.DICT=function(n){return qt.DICT(n).length};qt.OPERATOR=function(n){return n<1200?[n]:[12,n-1200]};qt.OPERAND=function(n,e){var t=[];if(Array.isArray(e))for(var r=0;r<e.length;r+=1)Fn.argument(n.length===e.length,"Not enough arguments given for type"+e),t=t.concat(qt.OPERAND(n[r],e[r]));else if(e==="SID")t=t.concat(qt.NUMBER(n));else if(e==="offset")t=t.concat(qt.NUMBER32(n));else if(e==="number")t=t.concat(qt.NUMBER(n));else if(e==="real")t=t.concat(qt.REAL(n));else throw new Error("Unknown operand type "+e);return t};qt.OP=qt.BYTE;Cn.OP=Cn.BYTE;var v2=typeof WeakMap=="function"&&new WeakMap;qt.CHARSTRING=function(n){if(v2){var e=v2.get(n);if(e!==void 0)return e}for(var t=[],r=n.length,i=0;i<r;i+=1){var o=n[i];t=t.concat(qt[o.type](o.value))}return v2&&v2.set(n,t),t};Cn.CHARSTRING=function(n){return qt.CHARSTRING(n).length};qt.OBJECT=function(n){var e=qt[n.type];return Fn.argument(e!==void 0,"No encoding function for type "+n.type),e(n.value)};Cn.OBJECT=function(n){var e=Cn[n.type];return Fn.argument(e!==void 0,"No sizeOf function for type "+n.type),e(n.value)};qt.TABLE=function(n){for(var e=[],t=n.fields.length,r=[],i=[],o=0;o<t;o+=1){var s=n.fields[o],a=qt[s.type];Fn.argument(a!==void 0,"No encoding function for field type "+s.type+" ("+s.name+")");var l=n[s.name];l===void 0&&(l=s.value);var u=a(l);s.type==="TABLE"?(i.push(e.length),e=e.concat([0,0]),r.push(u)):e=e.concat(u)}for(var c=0;c<r.length;c+=1){var h=i[c],f=e.length;Fn.argument(f<65536,"Table "+n.tableName+" too big."),e[h]=f>>8,e[h+1]=f&255,e=e.concat(r[c])}return e};Cn.TABLE=function(n){for(var e=0,t=n.fields.length,r=0;r<t;r+=1){var i=n.fields[r],o=Cn[i.type];Fn.argument(o!==void 0,"No sizeOf function for field type "+i.type+" ("+i.name+")");var s=n[i.name];s===void 0&&(s=i.value),e+=o(s),i.type==="TABLE"&&(e+=2)}return e};qt.RECORD=qt.TABLE;Cn.RECORD=Cn.TABLE;qt.LITERAL=function(n){return n};Cn.LITERAL=function(n){return n.length};function Bo(n,e,t){if(e.length&&(e[0].name!=="coverageFormat"||e[0].value===1))for(var r=0;r<e.length;r+=1){var i=e[r];this[i.name]=i.value}if(this.tableName=n,this.fields=e,t)for(var o=Object.keys(t),s=0;s<o.length;s+=1){var a=o[s],l=t[a];this[a]!==void 0&&(this[a]=l)}}Bo.prototype.encode=function(){return qt.TABLE(this)};Bo.prototype.sizeOf=function(){return Cn.TABLE(this)};function Jv(n,e,t){t===void 0&&(t=e.length);var r=new Array(e.length+1);r[0]={name:n+"Count",type:"USHORT",value:t};for(var i=0;i<e.length;i++)r[i+1]={name:n+i,type:"USHORT",value:e[i]};return r}function XM(n,e,t){var r=e.length,i=new Array(r+1);i[0]={name:n+"Count",type:"USHORT",value:r};for(var o=0;o<r;o++)i[o+1]={name:n+o,type:"TABLE",value:t(e[o],o)};return i}function Qv(n,e,t){var r=e.length,i=[];i[0]={name:n+"Count",type:"USHORT",value:r};for(var o=0;o<r;o++)i=i.concat(t(e[o],o));return i}function rw(n){n.format===1?Bo.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(Jv("glyph",n.glyphs))):n.format===2?Bo.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(Qv("rangeRecord",n.ranges,function(e){return[{name:"startGlyphID",type:"USHORT",value:e.start},{name:"endGlyphID",type:"USHORT",value:e.end},{name:"startCoverageIndex",type:"USHORT",value:e.index}]}))):Fn.assert(!1,"Coverage format must be 1 or 2.")}rw.prototype=Object.create(Bo.prototype);rw.prototype.constructor=rw;function iw(n){Bo.call(this,"scriptListTable",Qv("scriptRecord",n,function(e,t){var r=e.script,i=r.defaultLangSys;return Fn.assert(!!i,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new Bo("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new Bo("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:i.reqFeatureIndex}].concat(Jv("featureIndex",i.featureIndexes)))}].concat(Qv("langSys",r.langSysRecords,function(o,s){var a=o.langSys;return[{name:"langSysTag"+s,type:"TAG",value:o.tag},{name:"langSys"+s,type:"TABLE",value:new Bo("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:a.reqFeatureIndex}].concat(Jv("featureIndex",a.featureIndexes)))}]})))}]}))}iw.prototype=Object.create(Bo.prototype);iw.prototype.constructor=iw;function ow(n){Bo.call(this,"featureListTable",Qv("featureRecord",n,function(e,t){var r=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new Bo("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(Jv("lookupListIndex",r.lookupListIndexes)))}]}))}ow.prototype=Object.create(Bo.prototype);ow.prototype.constructor=ow;function sw(n,e){Bo.call(this,"lookupListTable",XM("lookup",n,function(t){var r=e[t.lookupType];return Fn.assert(!!r,"Unable to write GSUB lookup type "+t.lookupType+" tables."),new Bo("lookupTable",[{name:"lookupType",type:"USHORT",value:t.lookupType},{name:"lookupFlag",type:"USHORT",value:t.lookupFlag}].concat(XM("subtable",t.subtables,r)))}))}sw.prototype=Object.create(Bo.prototype);sw.prototype.constructor=sw;var on={Table:Bo,Record:Bo,Coverage:rw,ScriptList:iw,FeatureList:ow,LookupList:sw,ushortList:Jv,tableList:XM,recordList:Qv};function XR(n,e){return n.getUint8(e)}function aw(n,e){return n.getUint16(e,!1)}function UZ(n,e){return n.getInt16(e,!1)}function FA(n,e){return n.getUint32(e,!1)}function xD(n,e){var t=n.getInt16(e,!1),r=n.getUint16(e+2,!1);return t+r/65535}function zZ(n,e){for(var t="",r=e;r<e+4;r+=1)t+=String.fromCharCode(n.getInt8(r));return t}function HZ(n,e,t){for(var r=0,i=0;i<t;i+=1)r<<=8,r+=n.getUint8(e+i);return r}function GZ(n,e,t){for(var r=[],i=e;i<t;i+=1)r.push(n.getUint8(i));return r}function VZ(n){for(var e="",t=0;t<n.length;t+=1)e+=String.fromCharCode(n[t]);return e}var WZ={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function lt(n,e){this.data=n,this.offset=e,this.relativeOffset=0}lt.prototype.parseByte=function(){var n=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,n};lt.prototype.parseChar=function(){var n=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,n};lt.prototype.parseCard8=lt.prototype.parseByte;lt.prototype.parseUShort=function(){var n=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,n};lt.prototype.parseCard16=lt.prototype.parseUShort;lt.prototype.parseSID=lt.prototype.parseUShort;lt.prototype.parseOffset16=lt.prototype.parseUShort;lt.prototype.parseShort=function(){var n=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,n};lt.prototype.parseF2Dot14=function(){var n=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,n};lt.prototype.parseULong=function(){var n=FA(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,n};lt.prototype.parseOffset32=lt.prototype.parseULong;lt.prototype.parseFixed=function(){var n=xD(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,n};lt.prototype.parseString=function(n){var e=this.data,t=this.offset+this.relativeOffset,r="";this.relativeOffset+=n;for(var i=0;i<n;i++)r+=String.fromCharCode(e.getUint8(t+i));return r};lt.prototype.parseTag=function(){return this.parseString(4)};lt.prototype.parseLongDateTime=function(){var n=FA(this.data,this.offset+this.relativeOffset+4);return n-=2082844800,this.relativeOffset+=8,n};lt.prototype.parseVersion=function(n){var e=aw(this.data,this.offset+this.relativeOffset),t=aw(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,n===void 0&&(n=4096),e+t/n/10};lt.prototype.skip=function(n,e){e===void 0&&(e=1),this.relativeOffset+=WZ[n]*e};lt.prototype.parseULongList=function(n){n===void 0&&(n=this.parseULong());for(var e=new Array(n),t=this.data,r=this.offset+this.relativeOffset,i=0;i<n;i++)e[i]=t.getUint32(r),r+=4;return this.relativeOffset+=n*4,e};lt.prototype.parseOffset16List=lt.prototype.parseUShortList=function(n){n===void 0&&(n=this.parseUShort());for(var e=new Array(n),t=this.data,r=this.offset+this.relativeOffset,i=0;i<n;i++)e[i]=t.getUint16(r),r+=2;return this.relativeOffset+=n*2,e};lt.prototype.parseShortList=function(n){for(var e=new Array(n),t=this.data,r=this.offset+this.relativeOffset,i=0;i<n;i++)e[i]=t.getInt16(r),r+=2;return this.relativeOffset+=n*2,e};lt.prototype.parseByteList=function(n){for(var e=new Array(n),t=this.data,r=this.offset+this.relativeOffset,i=0;i<n;i++)e[i]=t.getUint8(r++);return this.relativeOffset+=n,e};lt.prototype.parseList=function(n,e){e||(e=n,n=this.parseUShort());for(var t=new Array(n),r=0;r<n;r++)t[r]=e.call(this);return t};lt.prototype.parseList32=function(n,e){e||(e=n,n=this.parseULong());for(var t=new Array(n),r=0;r<n;r++)t[r]=e.call(this);return t};lt.prototype.parseRecordList=function(n,e){e||(e=n,n=this.parseUShort());for(var t=new Array(n),r=Object.keys(e),i=0;i<n;i++){for(var o={},s=0;s<r.length;s++){var a=r[s],l=e[a];o[a]=l.call(this)}t[i]=o}return t};lt.prototype.parseRecordList32=function(n,e){e||(e=n,n=this.parseULong());for(var t=new Array(n),r=Object.keys(e),i=0;i<n;i++){for(var o={},s=0;s<r.length;s++){var a=r[s],l=e[a];o[a]=l.call(this)}t[i]=o}return t};lt.prototype.parseStruct=function(n){if(typeof n=="function")return n.call(this);for(var e=Object.keys(n),t={},r=0;r<e.length;r++){var i=e[r],o=n[i];t[i]=o.call(this)}return t};lt.prototype.parseValueRecord=function(n){if(n===void 0&&(n=this.parseUShort()),n!==0){var e={};return n&1&&(e.xPlacement=this.parseShort()),n&2&&(e.yPlacement=this.parseShort()),n&4&&(e.xAdvance=this.parseShort()),n&8&&(e.yAdvance=this.parseShort()),n&16&&(e.xPlaDevice=void 0,this.parseShort()),n&32&&(e.yPlaDevice=void 0,this.parseShort()),n&64&&(e.xAdvDevice=void 0,this.parseShort()),n&128&&(e.yAdvDevice=void 0,this.parseShort()),e}};lt.prototype.parseValueRecordList=function(){for(var n=this.parseUShort(),e=this.parseUShort(),t=new Array(e),r=0;r<e;r++)t[r]=this.parseValueRecord(n);return t};lt.prototype.parsePointer=function(n){var e=this.parseOffset16();if(e>0)return new lt(this.data,this.offset+e).parseStruct(n)};lt.prototype.parsePointer32=function(n){var e=this.parseOffset32();if(e>0)return new lt(this.data,this.offset+e).parseStruct(n)};lt.prototype.parseListOfLists=function(n){for(var e=this.parseOffset16List(),t=e.length,r=this.relativeOffset,i=new Array(t),o=0;o<t;o++){var s=e[o];if(s===0){i[o]=void 0;continue}if(this.relativeOffset=s,n){for(var a=this.parseOffset16List(),l=new Array(a.length),u=0;u<a.length;u++)this.relativeOffset=s+a[u],l[u]=n.call(this);i[o]=l}else i[o]=this.parseUShortList()}return this.relativeOffset=r,i};lt.prototype.parseCoverage=function(){var n=this.offset+this.relativeOffset,e=this.parseUShort(),t=this.parseUShort();if(e===1)return{format:1,glyphs:this.parseUShortList(t)};if(e===2){for(var r=new Array(t),i=0;i<t;i++)r[i]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}}throw new Error("0x"+n.toString(16)+": Coverage format must be 1 or 2.")};lt.prototype.parseClassDef=function(){var n=this.offset+this.relativeOffset,e=this.parseUShort();if(e===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(e===2)return{format:2,ranges:this.parseRecordList({start:lt.uShort,end:lt.uShort,classId:lt.uShort})};throw new Error("0x"+n.toString(16)+": ClassDef format must be 1 or 2.")};lt.list=function(n,e){return function(){return this.parseList(n,e)}};lt.list32=function(n,e){return function(){return this.parseList32(n,e)}};lt.recordList=function(n,e){return function(){return this.parseRecordList(n,e)}};lt.recordList32=function(n,e){return function(){return this.parseRecordList32(n,e)}};lt.pointer=function(n){return function(){return this.parsePointer(n)}};lt.pointer32=function(n){return function(){return this.parsePointer32(n)}};lt.tag=lt.prototype.parseTag;lt.byte=lt.prototype.parseByte;lt.uShort=lt.offset16=lt.prototype.parseUShort;lt.uShortList=lt.prototype.parseUShortList;lt.uLong=lt.offset32=lt.prototype.parseULong;lt.uLongList=lt.prototype.parseULongList;lt.struct=lt.prototype.parseStruct;lt.coverage=lt.prototype.parseCoverage;lt.classDef=lt.prototype.parseClassDef;var YR={reserved:lt.uShort,reqFeatureIndex:lt.uShort,featureIndexes:lt.uShortList};lt.prototype.parseScriptList=function(){return this.parsePointer(lt.recordList({tag:lt.tag,script:lt.pointer({defaultLangSys:lt.pointer(YR),langSysRecords:lt.recordList({tag:lt.tag,langSys:lt.pointer(YR)})})}))||[]};lt.prototype.parseFeatureList=function(){return this.parsePointer(lt.recordList({tag:lt.tag,feature:lt.pointer({featureParams:lt.offset16,lookupListIndexes:lt.uShortList})}))||[]};lt.prototype.parseLookupList=function(n){return this.parsePointer(lt.list(lt.pointer(function(){var e=this.parseUShort();Fn.argument(1<=e&&e<=9,"GPOS/GSUB lookup type "+e+" unknown.");var t=this.parseUShort(),r=t&16;return{lookupType:e,lookupFlag:t,subtables:this.parseList(lt.pointer(n[e])),markFilteringSet:r?this.parseUShort():void 0}})))||[]};lt.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var n=this.parseUShort(),e=this.parseUShort();Fn.argument(n===1&&e<1,"GPOS/GSUB feature variations table unknown.");var t=this.parseRecordList32({conditionSetOffset:lt.offset32,featureTableSubstitutionOffset:lt.offset32});return t})||[]};var Gn={getByte:XR,getCard8:XR,getUShort:aw,getCard16:aw,getShort:UZ,getULong:FA,getFixed:xD,getTag:zZ,getOffset:HZ,getBytes:GZ,bytesToString:VZ,Parser:lt};function jZ(n,e){e.parseUShort(),n.length=e.parseULong(),n.language=e.parseULong();var t;n.groupCount=t=e.parseULong(),n.glyphIndexMap={};for(var r=0;r<t;r+=1)for(var i=e.parseULong(),o=e.parseULong(),s=e.parseULong(),a=i;a<=o;a+=1)n.glyphIndexMap[a]=s,s++}function qZ(n,e,t,r,i){n.length=e.parseUShort(),n.language=e.parseUShort();var o;n.segCount=o=e.parseUShort()>>1,e.skip("uShort",3),n.glyphIndexMap={};for(var s=new Gn.Parser(t,r+i+14),a=new Gn.Parser(t,r+i+16+o*2),l=new Gn.Parser(t,r+i+16+o*4),u=new Gn.Parser(t,r+i+16+o*6),c=r+i+16+o*8,h=0;h<o-1;h+=1)for(var f=void 0,d=s.parseUShort(),v=a.parseUShort(),y=l.parseShort(),x=u.parseUShort(),g=v;g<=d;g+=1)x!==0?(c=u.offset+u.relativeOffset-2,c+=x,c+=(g-v)*2,f=Gn.getUShort(t,c),f!==0&&(f=f+y&65535)):f=g+y&65535,n.glyphIndexMap[g]=f}function $Z(n,e){var t={};t.version=Gn.getUShort(n,e),Fn.argument(t.version===0,"cmap table version should be 0."),t.numTables=Gn.getUShort(n,e+2);for(var r=-1,i=t.numTables-1;i>=0;i-=1){var o=Gn.getUShort(n,e+4+i*8),s=Gn.getUShort(n,e+4+i*8+2);if(o===3&&(s===0||s===1||s===10)||o===0&&(s===0||s===1||s===2||s===3||s===4)){r=Gn.getULong(n,e+4+i*8+4);break}}if(r===-1)throw new Error("No valid cmap sub-tables found.");var a=new Gn.Parser(n,e+r);if(t.format=a.parseUShort(),t.format===12)jZ(t,a);else if(t.format===4)qZ(t,a,n,e,r);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+t.format+").");return t}function XZ(n,e,t){n.segments.push({end:e,start:e,delta:-(e-t),offset:0,glyphIndex:t})}function YZ(n){n.segments.push({end:65535,start:65535,delta:1,offset:0})}function ZZ(n){var e=!0,t;for(t=n.length-1;t>0;t-=1){var r=n.get(t);if(r.unicode>65535){console.log("Adding CMAP format 12 (needed!)"),e=!1;break}}var i=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:e?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:e?12:12+8}];e||(i=i.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),i=i.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var o=new on.Table("cmap",i);for(o.segments=[],t=0;t<n.length;t+=1){for(var s=n.get(t),a=0;a<s.unicodes.length;a+=1)XZ(o,s.unicodes[a],t);o.segments=o.segments.sort(function(S,_){return S.start-_.start})}YZ(o);var l=o.segments.length,u=0,c=[],h=[],f=[],d=[],v=[],y=[];for(t=0;t<l;t+=1){var x=o.segments[t];x.end<=65535&&x.start<=65535?(c=c.concat({name:"end_"+t,type:"USHORT",value:x.end}),h=h.concat({name:"start_"+t,type:"USHORT",value:x.start}),f=f.concat({name:"idDelta_"+t,type:"SHORT",value:x.delta}),d=d.concat({name:"idRangeOffset_"+t,type:"USHORT",value:x.offset}),x.glyphId!==void 0&&(v=v.concat({name:"glyph_"+t,type:"USHORT",value:x.glyphId}))):u+=1,!e&&x.glyphIndex!==void 0&&(y=y.concat({name:"cmap12Start_"+t,type:"ULONG",value:x.start}),y=y.concat({name:"cmap12End_"+t,type:"ULONG",value:x.end}),y=y.concat({name:"cmap12Glyph_"+t,type:"ULONG",value:x.glyphIndex}))}if(o.segCountX2=(l-u)*2,o.searchRange=Math.pow(2,Math.floor(Math.log(l-u)/Math.log(2)))*2,o.entrySelector=Math.log(o.searchRange/2)/Math.log(2),o.rangeShift=o.segCountX2-o.searchRange,o.fields=o.fields.concat(c),o.fields.push({name:"reservedPad",type:"USHORT",value:0}),o.fields=o.fields.concat(h),o.fields=o.fields.concat(f),o.fields=o.fields.concat(d),o.fields=o.fields.concat(v),o.cmap4Length=14+c.length*2+2+h.length*2+f.length*2+d.length*2+v.length*2,!e){var g=16+y.length*4;o.cmap12Offset=12+2*2+4+o.cmap4Length,o.fields=o.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:g},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:y.length/3}]),o.fields=o.fields.concat(y)}return o}var KZ={parse:$Z,make:ZZ},ix=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],JZ=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],QZ=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],ZR=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function wD(n){this.font=n}wD.prototype.charToGlyphIndex=function(n){var e=n.codePointAt(0),t=this.font.glyphs;if(t){for(var r=0;r<t.length;r+=1)for(var i=t.get(r),o=0;o<i.unicodes.length;o+=1)if(i.unicodes[o]===e)return r}return null};function lw(n,e){this.encoding=n,this.charset=e}lw.prototype.charToGlyphIndex=function(n){var e=n.codePointAt(0),t=this.encoding[e];return this.charset.indexOf(t)};function eK(n,e,t,r,i){n.beginPath(),n.moveTo(e,t),n.lineTo(r,i),n.stroke()}var td={line:eK};function tK(n,e){var t=e||new _o;return{configurable:!0,get:function(){return typeof t=="function"&&(t=t()),t},set:function(r){t=r}}}function hl(n){this.bindConstructorValues(n)}hl.prototype.bindConstructorValues=function(n){this.index=n.index||0,this.name=n.name||null,this.unicode=n.unicode||void 0,this.unicodes=n.unicodes||n.unicode!==void 0?[n.unicode]:[],"xMin"in n&&(this.xMin=n.xMin),"yMin"in n&&(this.yMin=n.yMin),"xMax"in n&&(this.xMax=n.xMax),"yMax"in n&&(this.yMax=n.yMax),"advanceWidth"in n&&(this.advanceWidth=n.advanceWidth),Object.defineProperty(this,"path",tK(this,n.path))};hl.prototype.addUnicode=function(n){this.unicodes.length===0&&(this.unicode=n),this.unicodes.push(n)};hl.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};hl.prototype.getPath=function(n,e,t,r,i){n=n!==void 0?n:0,e=e!==void 0?e:0,t=t!==void 0?t:72;var o,s;r||(r={});var a=r.xScale,l=r.yScale;if(r.hinting&&i&&i.hinting&&(s=this.path&&i.hinting.exec(this,t)),s)o=i.hinting.getCommands(s),n=Math.round(n),e=Math.round(e),a=l=1;else{o=this.path.commands;var u=1/(this.path.unitsPerEm||1e3)*t;a===void 0&&(a=u),l===void 0&&(l=u)}for(var c=new _o,h=0;h<o.length;h+=1){var f=o[h];f.type==="M"?c.moveTo(n+f.x*a,e+-f.y*l):f.type==="L"?c.lineTo(n+f.x*a,e+-f.y*l):f.type==="Q"?c.quadraticCurveTo(n+f.x1*a,e+-f.y1*l,n+f.x*a,e+-f.y*l):f.type==="C"?c.curveTo(n+f.x1*a,e+-f.y1*l,n+f.x2*a,e+-f.y2*l,n+f.x*a,e+-f.y*l):f.type==="Z"&&c.closePath()}return c};hl.prototype.getContours=function(){if(this.points===void 0)return[];for(var n=[],e=[],t=0;t<this.points.length;t+=1){var r=this.points[t];e.push(r),r.lastPointOfContour&&(n.push(e),e=[])}return Fn.argument(e.length===0,"There are still points left in the current contour."),n};hl.prototype.getMetrics=function(){for(var n=this.path.commands,e=[],t=[],r=0;r<n.length;r+=1){var i=n[r];i.type!=="Z"&&(e.push(i.x),t.push(i.y)),(i.type==="Q"||i.type==="C")&&(e.push(i.x1),t.push(i.y1)),i.type==="C"&&(e.push(i.x2),t.push(i.y2))}var o={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,t),xMax:Math.max.apply(null,e),yMax:Math.max.apply(null,t),leftSideBearing:this.leftSideBearing};return isFinite(o.xMin)||(o.xMin=0),isFinite(o.xMax)||(o.xMax=this.advanceWidth),isFinite(o.yMin)||(o.yMin=0),isFinite(o.yMax)||(o.yMax=0),o.rightSideBearing=this.advanceWidth-o.leftSideBearing-(o.xMax-o.xMin),o};hl.prototype.draw=function(n,e,t,r,i){this.getPath(e,t,r,i).draw(n)};hl.prototype.drawPoints=function(n,e,t,r){function i(h,f,d,v){n.beginPath();for(var y=0;y<h.length;y+=1)n.moveTo(f+h[y].x*v,d+h[y].y*v),n.arc(f+h[y].x*v,d+h[y].y*v,2,0,Math.PI*2,!1);n.closePath(),n.fill()}e=e!==void 0?e:0,t=t!==void 0?t:0,r=r!==void 0?r:24;for(var o=1/this.path.unitsPerEm*r,s=[],a=[],l=this.path,u=0;u<l.commands.length;u+=1){var c=l.commands[u];c.x!==void 0&&s.push({x:c.x,y:-c.y}),c.x1!==void 0&&a.push({x:c.x1,y:-c.y1}),c.x2!==void 0&&a.push({x:c.x2,y:-c.y2})}n.fillStyle="blue",i(s,e,t,o),n.fillStyle="red",i(a,e,t,o)};hl.prototype.drawMetrics=function(n,e,t,r){var i;e=e!==void 0?e:0,t=t!==void 0?t:0,r=r!==void 0?r:24,i=1/this.path.unitsPerEm*r,n.lineWidth=1,n.strokeStyle="black",td.line(n,e,-1e4,e,1e4),td.line(n,-1e4,t,1e4,t);var o=this.xMin||0,s=this.yMin||0,a=this.xMax||0,l=this.yMax||0,u=this.advanceWidth||0;n.strokeStyle="blue",td.line(n,e+o*i,-1e4,e+o*i,1e4),td.line(n,e+a*i,-1e4,e+a*i,1e4),td.line(n,-1e4,t+-s*i,1e4,t+-s*i),td.line(n,-1e4,t+-l*i,1e4,t+-l*i),n.strokeStyle="green",td.line(n,e+u*i,-1e4,e+u*i,1e4)};function y2(n,e,t){Object.defineProperty(n,e,{get:function(){return n.path,n[t]},set:function(r){n[t]=r},enumerable:!0,configurable:!0})}function DA(n,e){if(this.font=n,this.glyphs={},Array.isArray(e))for(var t=0;t<e.length;t++){var r=e[t];r.path.unitsPerEm=n.unitsPerEm,this.glyphs[t]=r}this.length=e&&e.length||0}DA.prototype.get=function(n){if(this.glyphs[n]===void 0){this.font._push(n),typeof this.glyphs[n]=="function"&&(this.glyphs[n]=this.glyphs[n]());var e=this.glyphs[n],t=this.font._IndexToUnicodeMap[n];if(t)for(var r=0;r<t.unicodes.length;r++)e.addUnicode(t.unicodes[r]);this.font.cffEncoding?this.font.isCIDFont?e.name="gid"+n:e.name=this.font.cffEncoding.charset[n]:this.font.glyphNames.names&&(e.name=this.font.glyphNames.glyphIndexToName(n)),this.glyphs[n].advanceWidth=this.font._hmtxTableData[n].advanceWidth,this.glyphs[n].leftSideBearing=this.font._hmtxTableData[n].leftSideBearing}else typeof this.glyphs[n]=="function"&&(this.glyphs[n]=this.glyphs[n]());return this.glyphs[n]};DA.prototype.push=function(n,e){this.glyphs[n]=e,this.length++};function nK(n,e){return new hl({index:e,font:n})}function rK(n,e,t,r,i,o){return function(){var s=new hl({index:e,font:n});return s.path=function(){t(s,r,i);var a=o(n.glyphs,s);return a.unitsPerEm=n.unitsPerEm,a},y2(s,"xMin","_xMin"),y2(s,"xMax","_xMax"),y2(s,"yMin","_yMin"),y2(s,"yMax","_yMax"),s}}function iK(n,e,t,r){return function(){var i=new hl({index:e,font:n});return i.path=function(){var o=t(n,i,r);return o.unitsPerEm=n.unitsPerEm,o},i}}var Nu={GlyphSet:DA,glyphLoader:nK,ttfGlyphLoader:rK,cffGlyphLoader:iK};function SD(n,e){if(n===e)return!0;if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t+=1)if(!SD(n[t],e[t]))return!1;return!0}else return!1}function YM(n){var e;return n.length<1240?e=107:n.length<33900?e=1131:e=32768,e}function Rh(n,e,t){var r=[],i=[],o=Gn.getCard16(n,e),s,a;if(o!==0){var l=Gn.getByte(n,e+2);s=e+(o+1)*l+2;for(var u=e+3,c=0;c<o+1;c+=1)r.push(Gn.getOffset(n,u,l)),u+=l;a=s+r[o]}else a=e+2;for(var h=0;h<r.length-1;h+=1){var f=Gn.getBytes(n,s+r[h],s+r[h+1]);t&&(f=t(f)),i.push(f)}return{objects:i,startOffset:e,endOffset:a}}function oK(n,e){var t=[],r=Gn.getCard16(n,e),i,o;if(r!==0){var s=Gn.getByte(n,e+2);i=e+(r+1)*s+2;for(var a=e+3,l=0;l<r+1;l+=1)t.push(Gn.getOffset(n,a,s)),a+=s;o=i+t[r]}else o=e+2;return{offsets:t,startOffset:e,endOffset:o}}function sK(n,e,t,r,i){var o=Gn.getCard16(t,r),s=0;if(o!==0){var a=Gn.getByte(t,r+2);s=r+(o+1)*a+2}var l=Gn.getBytes(t,s+e[n],s+e[n+1]);return i&&(l=i(l)),l}function aK(n){for(var e="",t=15,r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var i=n.parseByte(),o=i>>4,s=i&15;if(o===t||(e+=r[o],s===t))break;e+=r[s]}return parseFloat(e)}function lK(n,e){var t,r,i,o;if(e===28)return t=n.parseByte(),r=n.parseByte(),t<<8|r;if(e===29)return t=n.parseByte(),r=n.parseByte(),i=n.parseByte(),o=n.parseByte(),t<<24|r<<16|i<<8|o;if(e===30)return aK(n);if(e>=32&&e<=246)return e-139;if(e>=247&&e<=250)return t=n.parseByte(),(e-247)*256+t+108;if(e>=251&&e<=254)return t=n.parseByte(),-(e-251)*256-t-108;throw new Error("Invalid b0 "+e)}function uK(n){for(var e={},t=0;t<n.length;t+=1){var r=n[t][0],i=n[t][1],o=void 0;if(i.length===1?o=i[0]:o=i,e.hasOwnProperty(r)&&!isNaN(e[r]))throw new Error("Object "+e+" already has key "+r);e[r]=o}return e}function _D(n,e,t){e=e!==void 0?e:0;var r=new Gn.Parser(n,e),i=[],o=[];for(t=t!==void 0?t:n.length;r.relativeOffset<t;){var s=r.parseByte();s<=21?(s===12&&(s=1200+r.parseByte()),i.push([s,o]),o=[]):o.push(lK(r,s))}return uK(i)}function nv(n,e){return e<=390?e=ix[e]:e=n[e-391],e}function bD(n,e,t){for(var r={},i,o=0;o<e.length;o+=1){var s=e[o];if(Array.isArray(s.type)){var a=[];a.length=s.type.length;for(var l=0;l<s.type.length;l++)i=n[s.op]!==void 0?n[s.op][l]:void 0,i===void 0&&(i=s.value!==void 0&&s.value[l]!==void 0?s.value[l]:null),s.type[l]==="SID"&&(i=nv(t,i)),a[l]=i;r[s.name]=a}else i=n[s.op],i===void 0&&(i=s.value!==void 0?s.value:null),s.type==="SID"&&(i=nv(t,i)),r[s.name]=i}return r}function cK(n,e){var t={};return t.formatMajor=Gn.getCard8(n,e),t.formatMinor=Gn.getCard8(n,e+1),t.size=Gn.getCard8(n,e+2),t.offsetSize=Gn.getCard8(n,e+3),t.startOffset=e,t.endOffset=e+4,t}var MD=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],ED=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function hK(n,e){var t=_D(n,0,n.byteLength);return bD(t,MD,e)}function AD(n,e,t,r){var i=_D(n,e,t);return bD(i,ED,r)}function KR(n,e,t,r){for(var i=[],o=0;o<t.length;o+=1){var s=new DataView(new Uint8Array(t[o]).buffer),a=hK(s,r);a._subrs=[],a._subrsBias=0,a._defaultWidthX=0,a._nominalWidthX=0;var l=a.private[0],u=a.private[1];if(l!==0&&u!==0){var c=AD(n,u+e,l,r);if(a._defaultWidthX=c.defaultWidthX,a._nominalWidthX=c.nominalWidthX,c.subrs!==0){var h=u+c.subrs,f=Rh(n,h+e);a._subrs=f.objects,a._subrsBias=YM(a._subrs)}a._privateDict=c}i.push(a)}return i}function fK(n,e,t,r){var i,o,s=new Gn.Parser(n,e);t-=1;var a=[".notdef"],l=s.parseCard8();if(l===0)for(var u=0;u<t;u+=1)i=s.parseSID(),a.push(nv(r,i));else if(l===1)for(;a.length<=t;){i=s.parseSID(),o=s.parseCard8();for(var c=0;c<=o;c+=1)a.push(nv(r,i)),i+=1}else if(l===2)for(;a.length<=t;){i=s.parseSID(),o=s.parseCard16();for(var h=0;h<=o;h+=1)a.push(nv(r,i)),i+=1}else throw new Error("Unknown charset format "+l);return a}function dK(n,e,t){var r,i={},o=new Gn.Parser(n,e),s=o.parseCard8();if(s===0)for(var a=o.parseCard8(),l=0;l<a;l+=1)r=o.parseCard8(),i[r]=l;else if(s===1){var u=o.parseCard8();r=1;for(var c=0;c<u;c+=1)for(var h=o.parseCard8(),f=o.parseCard8(),d=h;d<=h+f;d+=1)i[d]=r,r+=1}else throw new Error("Unknown encoding format "+s);return new lw(i,t)}function JR(n,e,t){var r,i,o,s,a=new _o,l=[],u=0,c=!1,h=!1,f=0,d=0,v,y,x,g;if(n.isCIDFont){var S=n.tables.cff.topDict._fdSelect[e.index],_=n.tables.cff.topDict._fdArray[S];v=_._subrs,y=_._subrsBias,x=_._defaultWidthX,g=_._nominalWidthX}else v=n.tables.cff.topDict._subrs,y=n.tables.cff.topDict._subrsBias,x=n.tables.cff.topDict._defaultWidthX,g=n.tables.cff.topDict._nominalWidthX;var E=x;function C(R,k){h&&a.closePath(),a.moveTo(R,k),h=!0}function I(){var R;R=l.length%2!==0,R&&!c&&(E=l.shift()+g),u+=l.length>>1,l.length=0,c=!0}function F(R){for(var k,L,N,z,H,G,K,ee,le,V,J,j,ie=0;ie<R.length;){var D=R[ie];switch(ie+=1,D){case 1:I();break;case 3:I();break;case 4:l.length>1&&!c&&(E=l.shift()+g,c=!0),d+=l.pop(),C(f,d);break;case 5:for(;l.length>0;)f+=l.shift(),d+=l.shift(),a.lineTo(f,d);break;case 6:for(;l.length>0&&(f+=l.shift(),a.lineTo(f,d),l.length!==0);)d+=l.shift(),a.lineTo(f,d);break;case 7:for(;l.length>0&&(d+=l.shift(),a.lineTo(f,d),l.length!==0);)f+=l.shift(),a.lineTo(f,d);break;case 8:for(;l.length>0;)r=f+l.shift(),i=d+l.shift(),o=r+l.shift(),s=i+l.shift(),f=o+l.shift(),d=s+l.shift(),a.curveTo(r,i,o,s,f,d);break;case 10:H=l.pop()+y,G=v[H],G&&F(G);break;case 11:return;case 12:switch(D=R[ie],ie+=1,D){case 35:r=f+l.shift(),i=d+l.shift(),o=r+l.shift(),s=i+l.shift(),K=o+l.shift(),ee=s+l.shift(),le=K+l.shift(),V=ee+l.shift(),J=le+l.shift(),j=V+l.shift(),f=J+l.shift(),d=j+l.shift(),l.shift(),a.curveTo(r,i,o,s,K,ee),a.curveTo(le,V,J,j,f,d);break;case 34:r=f+l.shift(),i=d,o=r+l.shift(),s=i+l.shift(),K=o+l.shift(),ee=s,le=K+l.shift(),V=s,J=le+l.shift(),j=d,f=J+l.shift(),a.curveTo(r,i,o,s,K,ee),a.curveTo(le,V,J,j,f,d);break;case 36:r=f+l.shift(),i=d+l.shift(),o=r+l.shift(),s=i+l.shift(),K=o+l.shift(),ee=s,le=K+l.shift(),V=s,J=le+l.shift(),j=V+l.shift(),f=J+l.shift(),a.curveTo(r,i,o,s,K,ee),a.curveTo(le,V,J,j,f,d);break;case 37:r=f+l.shift(),i=d+l.shift(),o=r+l.shift(),s=i+l.shift(),K=o+l.shift(),ee=s+l.shift(),le=K+l.shift(),V=ee+l.shift(),J=le+l.shift(),j=V+l.shift(),Math.abs(J-f)>Math.abs(j-d)?f=J+l.shift():d=j+l.shift(),a.curveTo(r,i,o,s,K,ee),a.curveTo(le,V,J,j,f,d);break;default:console.log("Glyph "+e.index+": unknown operator "+1200+D),l.length=0}break;case 14:l.length>0&&!c&&(E=l.shift()+g,c=!0),h&&(a.closePath(),h=!1);break;case 18:I();break;case 19:case 20:I(),ie+=u+7>>3;break;case 21:l.length>2&&!c&&(E=l.shift()+g,c=!0),d+=l.pop(),f+=l.pop(),C(f,d);break;case 22:l.length>1&&!c&&(E=l.shift()+g,c=!0),f+=l.pop(),C(f,d);break;case 23:I();break;case 24:for(;l.length>2;)r=f+l.shift(),i=d+l.shift(),o=r+l.shift(),s=i+l.shift(),f=o+l.shift(),d=s+l.shift(),a.curveTo(r,i,o,s,f,d);f+=l.shift(),d+=l.shift(),a.lineTo(f,d);break;case 25:for(;l.length>6;)f+=l.shift(),d+=l.shift(),a.lineTo(f,d);r=f+l.shift(),i=d+l.shift(),o=r+l.shift(),s=i+l.shift(),f=o+l.shift(),d=s+l.shift(),a.curveTo(r,i,o,s,f,d);break;case 26:for(l.length%2&&(f+=l.shift());l.length>0;)r=f,i=d+l.shift(),o=r+l.shift(),s=i+l.shift(),f=o,d=s+l.shift(),a.curveTo(r,i,o,s,f,d);break;case 27:for(l.length%2&&(d+=l.shift());l.length>0;)r=f+l.shift(),i=d,o=r+l.shift(),s=i+l.shift(),f=o+l.shift(),d=s,a.curveTo(r,i,o,s,f,d);break;case 28:k=R[ie],L=R[ie+1],l.push((k<<24|L<<16)>>16),ie+=2;break;case 29:H=l.pop()+n.gsubrsBias,G=n.gsubrs[H],G&&F(G);break;case 30:for(;l.length>0&&(r=f,i=d+l.shift(),o=r+l.shift(),s=i+l.shift(),f=o+l.shift(),d=s+(l.length===1?l.shift():0),a.curveTo(r,i,o,s,f,d),l.length!==0);)r=f+l.shift(),i=d,o=r+l.shift(),s=i+l.shift(),d=s+l.shift(),f=o+(l.length===1?l.shift():0),a.curveTo(r,i,o,s,f,d);break;case 31:for(;l.length>0&&(r=f+l.shift(),i=d,o=r+l.shift(),s=i+l.shift(),d=s+l.shift(),f=o+(l.length===1?l.shift():0),a.curveTo(r,i,o,s,f,d),l.length!==0);)r=f,i=d+l.shift(),o=r+l.shift(),s=i+l.shift(),f=o+l.shift(),d=s+(l.length===1?l.shift():0),a.curveTo(r,i,o,s,f,d);break;default:D<32?console.log("Glyph "+e.index+": unknown operator "+D):D<247?l.push(D-139):D<251?(k=R[ie],ie+=1,l.push((D-247)*256+k+108)):D<255?(k=R[ie],ie+=1,l.push(-(D-251)*256-k-108)):(k=R[ie],L=R[ie+1],N=R[ie+2],z=R[ie+3],ie+=4,l.push((k<<24|L<<16|N<<8|z)/65536))}}}return F(t),e.advanceWidth=E,a}function pK(n,e,t,r){var i=[],o,s=new Gn.Parser(n,e),a=s.parseCard8();if(a===0)for(var l=0;l<t;l++){if(o=s.parseCard8(),o>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+o+" (FD count "+r+")");i.push(o)}else if(a===3){var u=s.parseCard16(),c=s.parseCard16();if(c!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+c);for(var h,f=0;f<u;f++){if(o=s.parseCard8(),h=s.parseCard16(),o>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+o+" (FD count "+r+")");if(h>t)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+h);for(;c<h;c++)i.push(o);c=h}if(h!==t)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+h)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+a);return i}function mK(n,e,t,r){t.tables.cff={};var i=cK(n,e),o=Rh(n,i.endOffset,Gn.bytesToString),s=Rh(n,o.endOffset),a=Rh(n,s.endOffset,Gn.bytesToString),l=Rh(n,a.endOffset);t.gsubrs=l.objects,t.gsubrsBias=YM(t.gsubrs);var u=KR(n,e,s.objects,a.objects);if(u.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+u.length);var c=u[0];if(t.tables.cff.topDict=c,c._privateDict&&(t.defaultWidthX=c._privateDict.defaultWidthX,t.nominalWidthX=c._privateDict.nominalWidthX),c.ros[0]!==void 0&&c.ros[1]!==void 0&&(t.isCIDFont=!0),t.isCIDFont){var h=c.fdArray,f=c.fdSelect;if(h===0||f===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");h+=e;var d=Rh(n,h),v=KR(n,e,d.objects,a.objects);c._fdArray=v,f+=e,c._fdSelect=pK(n,f,t.numGlyphs,v.length)}var y=e+c.private[1],x=AD(n,y,c.private[0],a.objects);if(t.defaultWidthX=x.defaultWidthX,t.nominalWidthX=x.nominalWidthX,x.subrs!==0){var g=y+x.subrs,S=Rh(n,g);t.subrs=S.objects,t.subrsBias=YM(t.subrs)}else t.subrs=[],t.subrsBias=0;var _;r.lowMemory?(_=oK(n,e+c.charStrings),t.nGlyphs=_.offsets.length):(_=Rh(n,e+c.charStrings),t.nGlyphs=_.objects.length);var E=fK(n,e+c.charset,t.nGlyphs,a.objects);if(c.encoding===0?t.cffEncoding=new lw(JZ,E):c.encoding===1?t.cffEncoding=new lw(QZ,E):t.cffEncoding=dK(n,e+c.encoding,E),t.encoding=t.encoding||t.cffEncoding,t.glyphs=new Nu.GlyphSet(t),r.lowMemory)t._push=function(F){var R=sK(F,_.offsets,n,e+c.charStrings);t.glyphs.push(F,Nu.cffGlyphLoader(t,F,JR,R))};else for(var C=0;C<t.nGlyphs;C+=1){var I=_.objects[C];t.glyphs.push(C,Nu.cffGlyphLoader(t,C,JR,I))}}function TD(n,e){var t,r=ix.indexOf(n);return r>=0&&(t=r),r=e.indexOf(n),r>=0?t=r+ix.length:(t=ix.length+e.length,e.push(n)),t}function gK(){return new on.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function vK(n){var e=new on.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);e.names=[];for(var t=0;t<n.length;t+=1)e.names.push({name:"name_"+t,type:"NAME",value:n[t]});return e}function CD(n,e,t){for(var r={},i=0;i<n.length;i+=1){var o=n[i],s=e[o.name];s!==void 0&&!SD(s,o.value)&&(o.type==="SID"&&(s=TD(s,t)),r[o.op]={name:o.name,type:o.type,value:s})}return r}function QR(n,e){var t=new on.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return t.dict=CD(MD,n,e),t}function eL(n){var e=new on.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return e.topDicts=[{name:"topDict_0",type:"TABLE",value:n}],e}function yK(n){var e=new on.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);e.strings=[];for(var t=0;t<n.length;t+=1)e.strings.push({name:"string_"+t,type:"STRING",value:n[t]});return e}function xK(){return new on.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function wK(n,e){for(var t=new on.Record("Charsets",[{name:"format",type:"Card8",value:0}]),r=0;r<n.length;r+=1){var i=n[r],o=TD(i,e);t.fields.push({name:"glyph_"+r,type:"SID",value:o})}return t}function SK(n){var e=[],t=n.path;e.push({name:"width",type:"NUMBER",value:n.advanceWidth});for(var r=0,i=0,o=0;o<t.commands.length;o+=1){var s=void 0,a=void 0,l=t.commands[o];if(l.type==="Q"){var u=.3333333333333333,c=2/3;l={type:"C",x:l.x,y:l.y,x1:Math.round(u*r+c*l.x1),y1:Math.round(u*i+c*l.y1),x2:Math.round(u*l.x+c*l.x1),y2:Math.round(u*l.y+c*l.y1)}}if(l.type==="M")s=Math.round(l.x-r),a=Math.round(l.y-i),e.push({name:"dx",type:"NUMBER",value:s}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(l.x),i=Math.round(l.y);else if(l.type==="L")s=Math.round(l.x-r),a=Math.round(l.y-i),e.push({name:"dx",type:"NUMBER",value:s}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rlineto",type:"OP",value:5}),r=Math.round(l.x),i=Math.round(l.y);else if(l.type==="C"){var h=Math.round(l.x1-r),f=Math.round(l.y1-i),d=Math.round(l.x2-l.x1),v=Math.round(l.y2-l.y1);s=Math.round(l.x-l.x2),a=Math.round(l.y-l.y2),e.push({name:"dx1",type:"NUMBER",value:h}),e.push({name:"dy1",type:"NUMBER",value:f}),e.push({name:"dx2",type:"NUMBER",value:d}),e.push({name:"dy2",type:"NUMBER",value:v}),e.push({name:"dx",type:"NUMBER",value:s}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(l.x),i=Math.round(l.y)}}return e.push({name:"endchar",type:"OP",value:14}),e}function _K(n){for(var e=new on.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),t=0;t<n.length;t+=1){var r=n.get(t),i=SK(r);e.charStrings.push({name:r.name,type:"CHARSTRING",value:i})}return e}function bK(n,e){var t=new on.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return t.dict=CD(ED,n,e),t}function MK(n,e){for(var t=new on.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),r=1/e.unitsPerEm,i={version:e.version,fullName:e.fullName,familyName:e.familyName,weight:e.weightName,fontBBox:e.fontBBox||[0,0,0,0],fontMatrix:[r,0,0,r,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},o={},s=[],a,l=1;l<n.length;l+=1)a=n.get(l),s.push(a.name);var u=[];t.header=gK(),t.nameIndex=vK([e.postScriptName]);var c=QR(i,u);t.topDictIndex=eL(c),t.globalSubrIndex=xK(),t.charsets=wK(s,u),t.charStringsIndex=_K(n),t.privateDict=bK(o,u),t.stringIndex=yK(u);var h=t.header.sizeOf()+t.nameIndex.sizeOf()+t.topDictIndex.sizeOf()+t.stringIndex.sizeOf()+t.globalSubrIndex.sizeOf();return i.charset=h,i.encoding=0,i.charStrings=i.charset+t.charsets.sizeOf(),i.private[1]=i.charStrings+t.charStringsIndex.sizeOf(),c=QR(i,u),t.topDictIndex=eL(c),t}var EK={parse:mK,make:MK};function AK(n,e){var t={},r=new Gn.Parser(n,e);return t.version=r.parseVersion(),t.fontRevision=Math.round(r.parseFixed()*1e3)/1e3,t.checkSumAdjustment=r.parseULong(),t.magicNumber=r.parseULong(),Fn.argument(t.magicNumber===1594834165,"Font header has wrong magic number."),t.flags=r.parseUShort(),t.unitsPerEm=r.parseUShort(),t.created=r.parseLongDateTime(),t.modified=r.parseLongDateTime(),t.xMin=r.parseShort(),t.yMin=r.parseShort(),t.xMax=r.parseShort(),t.yMax=r.parseShort(),t.macStyle=r.parseUShort(),t.lowestRecPPEM=r.parseUShort(),t.fontDirectionHint=r.parseShort(),t.indexToLocFormat=r.parseShort(),t.glyphDataFormat=r.parseShort(),t}function TK(n){var e=Math.round(new Date().getTime()/1e3)+2082844800,t=e;return n.createdTimestamp&&(t=n.createdTimestamp+2082844800),new on.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:t},{name:"modified",type:"LONGDATETIME",value:e},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],n)}var CK={parse:AK,make:TK};function PK(n,e){var t={},r=new Gn.Parser(n,e);return t.version=r.parseVersion(),t.ascender=r.parseShort(),t.descender=r.parseShort(),t.lineGap=r.parseShort(),t.advanceWidthMax=r.parseUShort(),t.minLeftSideBearing=r.parseShort(),t.minRightSideBearing=r.parseShort(),t.xMaxExtent=r.parseShort(),t.caretSlopeRise=r.parseShort(),t.caretSlopeRun=r.parseShort(),t.caretOffset=r.parseShort(),r.relativeOffset+=8,t.metricDataFormat=r.parseShort(),t.numberOfHMetrics=r.parseUShort(),t}function RK(n){return new on.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],n)}var LK={parse:PK,make:RK};function kK(n,e,t,r,i){for(var o,s,a=new Gn.Parser(n,e),l=0;l<r;l+=1){l<t&&(o=a.parseUShort(),s=a.parseShort());var u=i.get(l);u.advanceWidth=o,u.leftSideBearing=s}}function IK(n,e,t,r,i){n._hmtxTableData={};for(var o,s,a=new Gn.Parser(e,t),l=0;l<i;l+=1)l<r&&(o=a.parseUShort(),s=a.parseShort()),n._hmtxTableData[l]={advanceWidth:o,leftSideBearing:s}}function NK(n,e,t,r,i,o,s){s.lowMemory?IK(n,e,t,r,i):kK(e,t,r,i,o)}function FK(n){for(var e=new on.Table("hmtx",[]),t=0;t<n.length;t+=1){var r=n.get(t),i=r.advanceWidth||0,o=r.leftSideBearing||0;e.fields.push({name:"advanceWidth_"+t,type:"USHORT",value:i}),e.fields.push({name:"leftSideBearing_"+t,type:"SHORT",value:o})}return e}var DK={parse:NK,make:FK};function OK(n){for(var e=new on.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:n.length}]),t="",r=12+n.length*4,i=0;i<n.length;++i){var o=t.indexOf(n[i]);o<0&&(o=t.length,t+=n[i]),e.fields.push({name:"offset "+i,type:"USHORT",value:r+o}),e.fields.push({name:"length "+i,type:"USHORT",value:n[i].length})}return e.fields.push({name:"stringPool",type:"CHARARRAY",value:t}),e}function BK(n,e){var t=new Gn.Parser(n,e),r=t.parseULong();Fn.argument(r===1,"Unsupported ltag table version."),t.skip("uLong",1);for(var i=t.parseULong(),o=[],s=0;s<i;s++){for(var a="",l=e+t.parseUShort(),u=t.parseUShort(),c=l;c<l+u;++c)a+=String.fromCharCode(n.getInt8(c));o.push(a)}return o}var UK={make:OK,parse:BK};function zK(n,e){var t={},r=new Gn.Parser(n,e);return t.version=r.parseVersion(),t.numGlyphs=r.parseUShort(),t.version===1&&(t.maxPoints=r.parseUShort(),t.maxContours=r.parseUShort(),t.maxCompositePoints=r.parseUShort(),t.maxCompositeContours=r.parseUShort(),t.maxZones=r.parseUShort(),t.maxTwilightPoints=r.parseUShort(),t.maxStorage=r.parseUShort(),t.maxFunctionDefs=r.parseUShort(),t.maxInstructionDefs=r.parseUShort(),t.maxStackElements=r.parseUShort(),t.maxSizeOfInstructions=r.parseUShort(),t.maxComponentElements=r.parseUShort(),t.maxComponentDepth=r.parseUShort()),t}function HK(n){return new on.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:n}])}var GK={parse:zK,make:HK},PD=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],RD={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},VK={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},LD={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function WK(n,e,t){switch(n){case 0:if(e===65535)return"und";if(t)return t[e];break;case 1:return RD[e];case 3:return LD[e]}}var ZM="utf-16",jK={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},qK={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function kD(n,e,t){switch(n){case 0:return ZM;case 1:return qK[t]||jK[e];case 3:if(e===1||e===10)return ZM;break}}function $K(n,e,t){for(var r={},i=new Gn.Parser(n,e),o=i.parseUShort(),s=i.parseUShort(),a=i.offset+i.parseUShort(),l=0;l<s;l++){var u=i.parseUShort(),c=i.parseUShort(),h=i.parseUShort(),f=i.parseUShort(),d=PD[f]||f,v=i.parseUShort(),y=i.parseUShort(),x=WK(u,h,t),g=kD(u,c,h);if(g!==void 0&&x!==void 0){var S=void 0;if(g===ZM?S=dg.UTF16(n,a+y,v):S=dg.MACSTRING(n,a+y,v,g),S){var _=r[d];_===void 0&&(_=r[d]={}),_[x]=S}}}return o===1&&i.parseUShort(),r}function pb(n){var e={};for(var t in n)e[n[t]]=parseInt(t);return e}function tL(n,e,t,r,i,o){return new on.Record("NameRecord",[{name:"platformID",type:"USHORT",value:n},{name:"encodingID",type:"USHORT",value:e},{name:"languageID",type:"USHORT",value:t},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:o}])}function XK(n,e){var t=n.length,r=e.length-t+1;e:for(var i=0;i<r;i++)for(;i<r;i++){for(var o=0;o<t;o++)if(e[i+o]!==n[o])continue e;return i}return-1}function nL(n,e){var t=XK(n,e);if(t<0){t=e.length;for(var r=0,i=n.length;r<i;++r)e.push(n[r])}return t}function YK(n,e){var t,r=[],i={},o=pb(PD);for(var s in n){var a=o[s];if(a===void 0&&(a=s),t=parseInt(a),isNaN(t))throw new Error('Name table entry "'+s+'" does not exist, see nameTableNames for complete list.');i[t]=n[s],r.push(t)}for(var l=pb(RD),u=pb(LD),c=[],h=[],f=0;f<r.length;f++){t=r[f];var d=i[t];for(var v in d){var y=d[v],x=1,g=l[v],S=VK[g],_=kD(x,S,g),E=qt.MACSTRING(y,_);E===void 0&&(x=0,g=e.indexOf(v),g<0&&(g=e.length,e.push(v)),S=4,E=qt.UTF16(y));var C=nL(E,h);c.push(tL(x,S,g,t,E.length,C));var I=u[v];if(I!==void 0){var F=qt.UTF16(y),R=nL(F,h);c.push(tL(3,1,I,t,F.length,R))}}}c.sort(function(N,z){return N.platformID-z.platformID||N.encodingID-z.encodingID||N.languageID-z.languageID||N.nameID-z.nameID});for(var k=new on.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:c.length},{name:"stringOffset",type:"USHORT",value:6+c.length*12}]),L=0;L<c.length;L++)k.fields.push({name:"record_"+L,type:"RECORD",value:c[L]});return k.fields.push({name:"strings",type:"LITERAL",value:h}),k}var ZK={parse:$K,make:YK},KM=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function KK(n){for(var e=0;e<KM.length;e+=1){var t=KM[e];if(n>=t.begin&&n<t.end)return e}return-1}function JK(n,e){var t={},r=new Gn.Parser(n,e);t.version=r.parseUShort(),t.xAvgCharWidth=r.parseShort(),t.usWeightClass=r.parseUShort(),t.usWidthClass=r.parseUShort(),t.fsType=r.parseUShort(),t.ySubscriptXSize=r.parseShort(),t.ySubscriptYSize=r.parseShort(),t.ySubscriptXOffset=r.parseShort(),t.ySubscriptYOffset=r.parseShort(),t.ySuperscriptXSize=r.parseShort(),t.ySuperscriptYSize=r.parseShort(),t.ySuperscriptXOffset=r.parseShort(),t.ySuperscriptYOffset=r.parseShort(),t.yStrikeoutSize=r.parseShort(),t.yStrikeoutPosition=r.parseShort(),t.sFamilyClass=r.parseShort(),t.panose=[];for(var i=0;i<10;i++)t.panose[i]=r.parseByte();return t.ulUnicodeRange1=r.parseULong(),t.ulUnicodeRange2=r.parseULong(),t.ulUnicodeRange3=r.parseULong(),t.ulUnicodeRange4=r.parseULong(),t.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),t.fsSelection=r.parseUShort(),t.usFirstCharIndex=r.parseUShort(),t.usLastCharIndex=r.parseUShort(),t.sTypoAscender=r.parseShort(),t.sTypoDescender=r.parseShort(),t.sTypoLineGap=r.parseShort(),t.usWinAscent=r.parseUShort(),t.usWinDescent=r.parseUShort(),t.version>=1&&(t.ulCodePageRange1=r.parseULong(),t.ulCodePageRange2=r.parseULong()),t.version>=2&&(t.sxHeight=r.parseShort(),t.sCapHeight=r.parseShort(),t.usDefaultChar=r.parseUShort(),t.usBreakChar=r.parseUShort(),t.usMaxContent=r.parseUShort()),t}function QK(n){return new on.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],n)}var rL={parse:JK,make:QK,unicodeRanges:KM,getUnicodeRange:KK};function eJ(n,e){var t={},r=new Gn.Parser(n,e);switch(t.version=r.parseVersion(),t.italicAngle=r.parseFixed(),t.underlinePosition=r.parseShort(),t.underlineThickness=r.parseShort(),t.isFixedPitch=r.parseULong(),t.minMemType42=r.parseULong(),t.maxMemType42=r.parseULong(),t.minMemType1=r.parseULong(),t.maxMemType1=r.parseULong(),t.version){case 1:t.names=ZR.slice();break;case 2:t.numberOfGlyphs=r.parseUShort(),t.glyphNameIndex=new Array(t.numberOfGlyphs);for(var i=0;i<t.numberOfGlyphs;i++)t.glyphNameIndex[i]=r.parseUShort();t.names=[];for(var o=0;o<t.numberOfGlyphs;o++)if(t.glyphNameIndex[o]>=ZR.length){var s=r.parseChar();t.names.push(r.parseString(s))}break;case 2.5:t.numberOfGlyphs=r.parseUShort(),t.offset=new Array(t.numberOfGlyphs);for(var a=0;a<t.numberOfGlyphs;a++)t.offset[a]=r.parseChar();break}return t}function tJ(){return new on.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var nJ={parse:eJ,make:tJ},$l=new Array(9);$l[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{substFormat:1,coverage:this.parsePointer(lt.coverage),deltaGlyphId:this.parseUShort()};if(t===2)return{substFormat:2,coverage:this.parsePointer(lt.coverage),substitute:this.parseOffset16List()};Fn.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")};$l[2]=function(){var e=this.parseUShort();return Fn.argument(e===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(lt.coverage),sequences:this.parseListOfLists()}};$l[3]=function(){var e=this.parseUShort();return Fn.argument(e===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(lt.coverage),alternateSets:this.parseListOfLists()}};$l[4]=function(){var e=this.parseUShort();return Fn.argument(e===1,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(lt.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var zm={sequenceIndex:lt.uShort,lookupListIndex:lt.uShort};$l[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{substFormat:t,coverage:this.parsePointer(lt.coverage),ruleSets:this.parseListOfLists(function(){var o=this.parseUShort(),s=this.parseUShort();return{input:this.parseUShortList(o-1),lookupRecords:this.parseRecordList(s,zm)}})};if(t===2)return{substFormat:t,coverage:this.parsePointer(lt.coverage),classDef:this.parsePointer(lt.classDef),classSets:this.parseListOfLists(function(){var o=this.parseUShort(),s=this.parseUShort();return{classes:this.parseUShortList(o-1),lookupRecords:this.parseRecordList(s,zm)}})};if(t===3){var r=this.parseUShort(),i=this.parseUShort();return{substFormat:t,coverages:this.parseList(r,lt.pointer(lt.coverage)),lookupRecords:this.parseRecordList(i,zm)}}Fn.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};$l[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{substFormat:1,coverage:this.parsePointer(lt.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(zm)}})};if(t===2)return{substFormat:2,coverage:this.parsePointer(lt.coverage),backtrackClassDef:this.parsePointer(lt.classDef),inputClassDef:this.parsePointer(lt.classDef),lookaheadClassDef:this.parsePointer(lt.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(zm)}})};if(t===3)return{substFormat:3,backtrackCoverage:this.parseList(lt.pointer(lt.coverage)),inputCoverage:this.parseList(lt.pointer(lt.coverage)),lookaheadCoverage:this.parseList(lt.pointer(lt.coverage)),lookupRecords:this.parseRecordList(zm)};Fn.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};$l[7]=function(){var e=this.parseUShort();Fn.argument(e===1,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),r=new lt(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:$l[t].call(r)}};$l[8]=function(){var e=this.parseUShort();return Fn.argument(e===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(lt.coverage),backtrackCoverage:this.parseList(lt.pointer(lt.coverage)),lookaheadCoverage:this.parseList(lt.pointer(lt.coverage)),substitutes:this.parseUShortList()}};function rJ(n,e){e=e||0;var t=new lt(n,e),r=t.parseVersion(1);return Fn.argument(r===1||r===1.1,"Unsupported GSUB table version."),r===1?{version:r,scripts:t.parseScriptList(),features:t.parseFeatureList(),lookups:t.parseLookupList($l)}:{version:r,scripts:t.parseScriptList(),features:t.parseFeatureList(),lookups:t.parseLookupList($l),variations:t.parseFeatureVariationsList()}}var Eg=new Array(9);Eg[1]=function(e){return e.substFormat===1?new on.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new on.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new on.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new on.Coverage(e.coverage)}].concat(on.ushortList("substitute",e.substitute)))};Eg[2]=function(e){return Fn.assert(e.substFormat===1,"Lookup type 2 substFormat must be 1."),new on.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new on.Coverage(e.coverage)}].concat(on.tableList("seqSet",e.sequences,function(t){return new on.Table("sequenceSetTable",on.ushortList("sequence",t))})))};Eg[3]=function(e){return Fn.assert(e.substFormat===1,"Lookup type 3 substFormat must be 1."),new on.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new on.Coverage(e.coverage)}].concat(on.tableList("altSet",e.alternateSets,function(t){return new on.Table("alternateSetTable",on.ushortList("alternate",t))})))};Eg[4]=function(e){return Fn.assert(e.substFormat===1,"Lookup type 4 substFormat must be 1."),new on.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new on.Coverage(e.coverage)}].concat(on.tableList("ligSet",e.ligatureSets,function(t){return new on.Table("ligatureSetTable",on.tableList("ligature",t,function(r){return new on.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:r.ligGlyph}].concat(on.ushortList("component",r.components,r.components.length+1)))}))})))};Eg[6]=function(e){if(e.substFormat===1){var t=new on.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:e.substFormat},{name:"coverage",type:"TABLE",value:new on.Coverage(e.coverage)}].concat(on.tableList("chainRuleSet",e.chainRuleSets,function(o){return new on.Table("chainRuleSetTable",on.tableList("chainRule",o,function(s){var a=on.ushortList("backtrackGlyph",s.backtrack,s.backtrack.length).concat(on.ushortList("inputGlyph",s.input,s.input.length+1)).concat(on.ushortList("lookaheadGlyph",s.lookahead,s.lookahead.length)).concat(on.ushortList("substitution",[],s.lookupRecords.length));return s.lookupRecords.forEach(function(l,u){a=a.concat({name:"sequenceIndex"+u,type:"USHORT",value:l.sequenceIndex}).concat({name:"lookupListIndex"+u,type:"USHORT",value:l.lookupListIndex})}),new on.Table("chainRuleTable",a)}))})));return t}else if(e.substFormat===2)Fn.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(e.substFormat===3){var r=[{name:"substFormat",type:"USHORT",value:e.substFormat}];r.push({name:"backtrackGlyphCount",type:"USHORT",value:e.backtrackCoverage.length}),e.backtrackCoverage.forEach(function(o,s){r.push({name:"backtrackCoverage"+s,type:"TABLE",value:new on.Coverage(o)})}),r.push({name:"inputGlyphCount",type:"USHORT",value:e.inputCoverage.length}),e.inputCoverage.forEach(function(o,s){r.push({name:"inputCoverage"+s,type:"TABLE",value:new on.Coverage(o)})}),r.push({name:"lookaheadGlyphCount",type:"USHORT",value:e.lookaheadCoverage.length}),e.lookaheadCoverage.forEach(function(o,s){r.push({name:"lookaheadCoverage"+s,type:"TABLE",value:new on.Coverage(o)})}),r.push({name:"substitutionCount",type:"USHORT",value:e.lookupRecords.length}),e.lookupRecords.forEach(function(o,s){r=r.concat({name:"sequenceIndex"+s,type:"USHORT",value:o.sequenceIndex}).concat({name:"lookupListIndex"+s,type:"USHORT",value:o.lookupListIndex})});var i=new on.Table("chainContextTable",r);return i}Fn.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};function iJ(n){return new on.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new on.ScriptList(n.scripts)},{name:"features",type:"TABLE",value:new on.FeatureList(n.features)},{name:"lookups",type:"TABLE",value:new on.LookupList(n.lookups,Eg)}])}var oJ={parse:rJ,make:iJ};function sJ(n,e){var t=new Gn.Parser(n,e),r=t.parseULong();Fn.argument(r===1,"Unsupported META table version."),t.parseULong(),t.parseULong();for(var i=t.parseULong(),o={},s=0;s<i;s++){var a=t.parseTag(),l=t.parseULong(),u=t.parseULong(),c=dg.UTF8(n,e+l,u);o[a]=c}return o}function aJ(n){var e=Object.keys(n).length,t="",r=16+e*12,i=new on.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:r},{name:"numTags",type:"ULONG",value:e}]);for(var o in n){var s=t.length;t+=n[o],i.fields.push({name:"tag "+o,type:"TAG",value:o}),i.fields.push({name:"offset "+o,type:"ULONG",value:r+s}),i.fields.push({name:"length "+o,type:"ULONG",value:n[o].length})}return i.fields.push({name:"stringPool",type:"CHARARRAY",value:t}),i}var lJ={parse:sJ,make:aJ};function iL(n){return Math.log(n)/Math.log(2)|0}function OA(n){for(;n.length%4!==0;)n.push(0);for(var e=0,t=0;t<n.length;t+=4)e+=(n[t]<<24)+(n[t+1]<<16)+(n[t+2]<<8)+n[t+3];return e%=Math.pow(2,32),e}function oL(n,e,t,r){return new on.Record("Table Record",[{name:"tag",type:"TAG",value:n!==void 0?n:""},{name:"checkSum",type:"ULONG",value:e!==void 0?e:0},{name:"offset",type:"ULONG",value:t!==void 0?t:0},{name:"length",type:"ULONG",value:r!==void 0?r:0}])}function ID(n){var e=new on.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);e.tables=n,e.numTables=n.length;var t=Math.pow(2,iL(e.numTables));e.searchRange=16*t,e.entrySelector=iL(t),e.rangeShift=e.numTables*16-e.searchRange;for(var r=[],i=[],o=e.sizeOf()+oL().sizeOf()*e.numTables;o%4!==0;)o+=1,i.push({name:"padding",type:"BYTE",value:0});for(var s=0;s<n.length;s+=1){var a=n[s];Fn.argument(a.tableName.length===4,"Table name"+a.tableName+" is invalid.");var l=a.sizeOf(),u=oL(a.tableName,OA(a.encode()),o,l);for(r.push({name:u.tag+" Table Record",type:"RECORD",value:u}),i.push({name:a.tableName+" table",type:"RECORD",value:a}),o+=l,Fn.argument(!isNaN(o),"Something went wrong calculating the offset.");o%4!==0;)o+=1,i.push({name:"padding",type:"BYTE",value:0})}return r.sort(function(c,h){return c.value.tag>h.value.tag?1:-1}),e.fields=e.fields.concat(r),e.fields=e.fields.concat(i),e}function sL(n,e,t){for(var r=0;r<e.length;r+=1){var i=n.charToGlyphIndex(e[r]);if(i>0){var o=n.glyphs.get(i);return o.getMetrics()}}return t}function uJ(n){for(var e=0,t=0;t<n.length;t+=1)e+=n[t];return e/n.length}function cJ(n){for(var e=[],t=[],r=[],i=[],o=[],s=[],a=[],l,u=0,c=0,h=0,f=0,d=0,v=0;v<n.glyphs.length;v+=1){var y=n.glyphs.get(v),x=y.unicode|0;if(isNaN(y.advanceWidth))throw new Error("Glyph "+y.name+" ("+v+"): advanceWidth is not a number.");(l>x||l===void 0)&&x>0&&(l=x),u<x&&(u=x);var g=rL.getUnicodeRange(x);if(g<32)c|=1<<g;else if(g<64)h|=1<<g-32;else if(g<96)f|=1<<g-64;else if(g<123)d|=1<<g-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if(y.name!==".notdef"){var S=y.getMetrics();e.push(S.xMin),t.push(S.yMin),r.push(S.xMax),i.push(S.yMax),s.push(S.leftSideBearing),a.push(S.rightSideBearing),o.push(y.advanceWidth)}}var _={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,t),xMax:Math.max.apply(null,r),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,o),advanceWidthAvg:uJ(o),minLeftSideBearing:Math.min.apply(null,s),maxLeftSideBearing:Math.max.apply(null,s),minRightSideBearing:Math.min.apply(null,a)};_.ascender=n.ascender,_.descender=n.descender;var E=CK.make({flags:3,unitsPerEm:n.unitsPerEm,xMin:_.xMin,yMin:_.yMin,xMax:_.xMax,yMax:_.yMax,lowestRecPPEM:3,createdTimestamp:n.createdTimestamp}),C=LK.make({ascender:_.ascender,descender:_.descender,advanceWidthMax:_.advanceWidthMax,minLeftSideBearing:_.minLeftSideBearing,minRightSideBearing:_.minRightSideBearing,xMaxExtent:_.maxLeftSideBearing+(_.xMax-_.xMin),numberOfHMetrics:n.glyphs.length}),I=GK.make(n.glyphs.length),F=rL.make(Object.assign({xAvgCharWidth:Math.round(_.advanceWidthAvg),usFirstCharIndex:l,usLastCharIndex:u,ulUnicodeRange1:c,ulUnicodeRange2:h,ulUnicodeRange3:f,ulUnicodeRange4:d,sTypoAscender:_.ascender,sTypoDescender:_.descender,sTypoLineGap:0,usWinAscent:_.yMax,usWinDescent:Math.abs(_.yMin),ulCodePageRange1:1,sxHeight:sL(n,"xyvw",{yMax:Math.round(_.ascender/2)}).yMax,sCapHeight:sL(n,"HIKLEFJMNTZBDPRAGOQSUVWXY",_).yMax,usDefaultChar:n.hasChar(" ")?32:0,usBreakChar:n.hasChar(" ")?32:0},n.tables.os2)),R=DK.make(n.glyphs),k=KZ.make(n.glyphs),L=n.getEnglishName("fontFamily"),N=n.getEnglishName("fontSubfamily"),z=L+" "+N,H=n.getEnglishName("postScriptName");H||(H=L.replace(/\s/g,"")+"-"+N);var G={};for(var K in n.names)G[K]=n.names[K];G.uniqueID||(G.uniqueID={en:n.getEnglishName("manufacturer")+":"+z}),G.postScriptName||(G.postScriptName={en:H}),G.preferredFamily||(G.preferredFamily=n.names.fontFamily),G.preferredSubfamily||(G.preferredSubfamily=n.names.fontSubfamily);var ee=[],le=ZK.make(G,ee),V=ee.length>0?UK.make(ee):void 0,J=nJ.make(),j=EK.make(n.glyphs,{version:n.getEnglishName("version"),fullName:z,familyName:L,weightName:N,postScriptName:H,unitsPerEm:n.unitsPerEm,fontBBox:[0,_.yMin,_.ascender,_.advanceWidthMax]}),ie=n.metas&&Object.keys(n.metas).length>0?lJ.make(n.metas):void 0,D=[E,C,I,F,le,k,J,j,R];V&&D.push(V),n.tables.gsub&&D.push(oJ.make(n.tables.gsub)),ie&&D.push(ie);for(var q=ID(D),Z=q.encode(),Q=OA(Z),se=q.fields,me=!1,Se=0;Se<se.length;Se+=1)if(se[Se].name==="head table"){se[Se].value.checkSumAdjustment=2981146554-Q,me=!0;break}if(!me)throw new Error("Could not find head table with checkSum to adjust.");return q}var hJ={make:ID,fontToTable:cJ,computeCheckSum:OA};function mb(n,e){for(var t=0,r=n.length-1;t<=r;){var i=t+r>>>1,o=n[i].tag;if(o===e)return i;o<e?t=i+1:r=i-1}return-t-1}function aL(n,e){for(var t=0,r=n.length-1;t<=r;){var i=t+r>>>1,o=n[i];if(o===e)return i;o<e?t=i+1:r=i-1}return-t-1}function lL(n,e){for(var t,r=0,i=n.length-1;r<=i;){var o=r+i>>>1;t=n[o];var s=t.start;if(s===e)return t;s<e?r=o+1:i=o-1}if(r>0)return t=n[r-1],e>t.end?0:t}function L1(n,e){this.font=n,this.tableName=e}L1.prototype={searchTag:mb,binSearch:aL,getTable:function(n){var e=this.font.tables[this.tableName];return!e&&n&&(e=this.font.tables[this.tableName]=this.createDefaultTable()),e},getScriptNames:function(){var n=this.getTable();return n?n.scripts.map(function(e){return e.tag}):[]},getDefaultScriptName:function(){var n=this.getTable();if(n){for(var e=!1,t=0;t<n.scripts.length;t++){var r=n.scripts[t].tag;if(r==="DFLT")return r;r==="latn"&&(e=!0)}if(e)return"latn"}},getScriptTable:function(n,e){var t=this.getTable(e);if(t){n=n||"DFLT";var r=t.scripts,i=mb(t.scripts,n);if(i>=0)return r[i].script;if(e){var o={tag:n,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return r.splice(-1-i,0,o),o.script}}},getLangSysTable:function(n,e,t){var r=this.getScriptTable(n,t);if(r){if(!e||e==="dflt"||e==="DFLT")return r.defaultLangSys;var i=mb(r.langSysRecords,e);if(i>=0)return r.langSysRecords[i].langSys;if(t){var o={tag:e,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return r.langSysRecords.splice(-1-i,0,o),o.langSys}}},getFeatureTable:function(n,e,t,r){var i=this.getLangSysTable(n,e,r);if(i){for(var o,s=i.featureIndexes,a=this.font.tables[this.tableName].features,l=0;l<s.length;l++)if(o=a[s[l]],o.tag===t)return o.feature;if(r){var u=a.length;return Fn.assert(u===0||t>=a[u-1].tag,"Features must be added in alphabetical order."),o={tag:t,feature:{params:0,lookupListIndexes:[]}},a.push(o),s.push(u),o.feature}}},getLookupTables:function(n,e,t,r,i){var o=this.getFeatureTable(n,e,t,i),s=[];if(o){for(var a,l=o.lookupListIndexes,u=this.font.tables[this.tableName].lookups,c=0;c<l.length;c++)a=u[l[c]],a.lookupType===r&&s.push(a);if(s.length===0&&i){a={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0};var h=u.length;return u.push(a),l.push(h),[a]}}return s},getGlyphClass:function(n,e){switch(n.format){case 1:return n.startGlyph<=e&&e<n.startGlyph+n.classes.length?n.classes[e-n.startGlyph]:0;case 2:var t=lL(n.ranges,e);return t?t.classId:0}},getCoverageIndex:function(n,e){switch(n.format){case 1:var t=aL(n.glyphs,e);return t>=0?t:-1;case 2:var r=lL(n.ranges,e);return r?r.index+e-r.start:-1}},expandCoverage:function(n){if(n.format===1)return n.glyphs;for(var e=[],t=n.ranges,r=0;r<t.length;r++)for(var i=t[r],o=i.start,s=i.end,a=o;a<=s;a++)e.push(a);return e}};function k1(n){L1.call(this,n,"gpos")}k1.prototype=L1.prototype;k1.prototype.init=function(){var n=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(n)};k1.prototype.getKerningValue=function(n,e,t){for(var r=0;r<n.length;r++)for(var i=n[r].subtables,o=0;o<i.length;o++){var s=i[o],a=this.getCoverageIndex(s.coverage,e);if(!(a<0))switch(s.posFormat){case 1:for(var l=s.pairSets[a],u=0;u<l.length;u++){var c=l[u];if(c.secondGlyph===t)return c.value1&&c.value1.xAdvance||0}break;case 2:var h=this.getGlyphClass(s.classDef1,e),f=this.getGlyphClass(s.classDef2,t),d=s.classRecords[h][f];return d.value1&&d.value1.xAdvance||0}}return 0};k1.prototype.getKerningTables=function(n,e){if(this.font.tables.gpos)return this.getLookupTables(n,e,"kern",2)};function Ca(n){L1.call(this,n,"gsub")}function fJ(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function BA(n,e,t){for(var r=n.subtables,i=0;i<r.length;i++){var o=r[i];if(o.substFormat===e)return o}if(t)return r.push(t),t}Ca.prototype=L1.prototype;Ca.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};Ca.prototype.getSingle=function(n,e,t){for(var r=[],i=this.getLookupTables(e,t,n,1),o=0;o<i.length;o++)for(var s=i[o].subtables,a=0;a<s.length;a++){var l=s[a],u=this.expandCoverage(l.coverage),c=void 0;if(l.substFormat===1){var h=l.deltaGlyphId;for(c=0;c<u.length;c++){var f=u[c];r.push({sub:f,by:f+h})}}else{var d=l.substitute;for(c=0;c<u.length;c++)r.push({sub:u[c],by:d[c]})}}return r};Ca.prototype.getMultiple=function(n,e,t){for(var r=[],i=this.getLookupTables(e,t,n,2),o=0;o<i.length;o++)for(var s=i[o].subtables,a=0;a<s.length;a++){var l=s[a],u=this.expandCoverage(l.coverage),c=void 0;for(c=0;c<u.length;c++){var h=u[c],f=l.sequences[c];r.push({sub:h,by:f})}}return r};Ca.prototype.getAlternates=function(n,e,t){for(var r=[],i=this.getLookupTables(e,t,n,3),o=0;o<i.length;o++)for(var s=i[o].subtables,a=0;a<s.length;a++)for(var l=s[a],u=this.expandCoverage(l.coverage),c=l.alternateSets,h=0;h<u.length;h++)r.push({sub:u[h],by:c[h]});return r};Ca.prototype.getLigatures=function(n,e,t){for(var r=[],i=this.getLookupTables(e,t,n,4),o=0;o<i.length;o++)for(var s=i[o].subtables,a=0;a<s.length;a++)for(var l=s[a],u=this.expandCoverage(l.coverage),c=l.ligatureSets,h=0;h<u.length;h++)for(var f=u[h],d=c[h],v=0;v<d.length;v++){var y=d[v];r.push({sub:[f].concat(y.components),by:y.ligGlyph})}return r};Ca.prototype.addSingle=function(n,e,t,r){var i=this.getLookupTables(t,r,n,1,!0)[0],o=BA(i,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});Fn.assert(o.coverage.format===1,"Single: unable to modify coverage table format "+o.coverage.format);var s=e.sub,a=this.binSearch(o.coverage.glyphs,s);a<0&&(a=-1-a,o.coverage.glyphs.splice(a,0,s),o.substitute.splice(a,0,0)),o.substitute[a]=e.by};Ca.prototype.addMultiple=function(n,e,t,r){Fn.assert(e.by instanceof Array&&e.by.length>1,'Multiple: "by" must be an array of two or more ids');var i=this.getLookupTables(t,r,n,2,!0)[0],o=BA(i,1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});Fn.assert(o.coverage.format===1,"Multiple: unable to modify coverage table format "+o.coverage.format);var s=e.sub,a=this.binSearch(o.coverage.glyphs,s);a<0&&(a=-1-a,o.coverage.glyphs.splice(a,0,s),o.sequences.splice(a,0,0)),o.sequences[a]=e.by};Ca.prototype.addAlternate=function(n,e,t,r){var i=this.getLookupTables(t,r,n,3,!0)[0],o=BA(i,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});Fn.assert(o.coverage.format===1,"Alternate: unable to modify coverage table format "+o.coverage.format);var s=e.sub,a=this.binSearch(o.coverage.glyphs,s);a<0&&(a=-1-a,o.coverage.glyphs.splice(a,0,s),o.alternateSets.splice(a,0,0)),o.alternateSets[a]=e.by};Ca.prototype.addLigature=function(n,e,t,r){var i=this.getLookupTables(t,r,n,4,!0)[0],o=i.subtables[0];o||(o={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},i.subtables[0]=o),Fn.assert(o.coverage.format===1,"Ligature: unable to modify coverage table format "+o.coverage.format);var s=e.sub[0],a=e.sub.slice(1),l={ligGlyph:e.by,components:a},u=this.binSearch(o.coverage.glyphs,s);if(u>=0){for(var c=o.ligatureSets[u],h=0;h<c.length;h++)if(fJ(c[h].components,a))return;c.push(l)}else u=-1-u,o.coverage.glyphs.splice(u,0,s),o.ligatureSets.splice(u,0,[l])};Ca.prototype.getFeature=function(n,e,t){if(/ss\d\d/.test(n))return this.getSingle(n,e,t);switch(n){case"aalt":case"salt":return this.getSingle(n,e,t).concat(this.getAlternates(n,e,t));case"dlig":case"liga":case"rlig":return this.getLigatures(n,e,t);case"ccmp":return this.getMultiple(n,e,t).concat(this.getLigatures(n,e,t));case"stch":return this.getMultiple(n,e,t)}};Ca.prototype.add=function(n,e,t,r){if(/ss\d\d/.test(n))return this.addSingle(n,e,t,r);switch(n){case"aalt":case"salt":return typeof e.by=="number"?this.addSingle(n,e,t,r):this.addAlternate(n,e,t,r);case"dlig":case"liga":case"rlig":return this.addLigature(n,e,t,r);case"ccmp":return e.by instanceof Array?this.addMultiple(n,e,t,r):this.addLigature(n,e,t,r)}};function dJ(){return typeof window<"u"}function pJ(n){for(var e=new Buffer(n.byteLength),t=new Uint8Array(n),r=0;r<e.length;++r)e[r]=t[r];return e}function y0(n,e){if(!n)throw e}function uL(n,e,t,r,i){var o;return(e&r)>0?(o=n.parseByte(),e&i||(o=-o),o=t+o):(e&i)>0?o=t:o=t+n.parseShort(),o}function ND(n,e,t){var r=new Gn.Parser(e,t);n.numberOfContours=r.parseShort(),n._xMin=r.parseShort(),n._yMin=r.parseShort(),n._xMax=r.parseShort(),n._yMax=r.parseShort();var i,o;if(n.numberOfContours>0){for(var s=n.endPointIndices=[],a=0;a<n.numberOfContours;a+=1)s.push(r.parseUShort());n.instructionLength=r.parseUShort(),n.instructions=[];for(var l=0;l<n.instructionLength;l+=1)n.instructions.push(r.parseByte());var u=s[s.length-1]+1;i=[];for(var c=0;c<u;c+=1)if(o=r.parseByte(),i.push(o),(o&8)>0)for(var h=r.parseByte(),f=0;f<h;f+=1)i.push(o),c+=1;if(Fn.argument(i.length===u,"Bad flags."),s.length>0){var d=[],v;if(u>0){for(var y=0;y<u;y+=1)o=i[y],v={},v.onCurve=!!(o&1),v.lastPointOfContour=s.indexOf(y)>=0,d.push(v);for(var x=0,g=0;g<u;g+=1)o=i[g],v=d[g],v.x=uL(r,o,x,2,16),x=v.x;for(var S=0,_=0;_<u;_+=1)o=i[_],v=d[_],v.y=uL(r,o,S,4,32),S=v.y}n.points=d}else n.points=[]}else if(n.numberOfContours===0)n.points=[];else{n.isComposite=!0,n.points=[],n.components=[];for(var E=!0;E;){i=r.parseUShort();var C={glyphIndex:r.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(i&1)>0?(i&2)>0?(C.dx=r.parseShort(),C.dy=r.parseShort()):C.matchedPoints=[r.parseUShort(),r.parseUShort()]:(i&2)>0?(C.dx=r.parseChar(),C.dy=r.parseChar()):C.matchedPoints=[r.parseByte(),r.parseByte()],(i&8)>0?C.xScale=C.yScale=r.parseF2Dot14():(i&64)>0?(C.xScale=r.parseF2Dot14(),C.yScale=r.parseF2Dot14()):(i&128)>0&&(C.xScale=r.parseF2Dot14(),C.scale01=r.parseF2Dot14(),C.scale10=r.parseF2Dot14(),C.yScale=r.parseF2Dot14()),n.components.push(C),E=!!(i&32)}if(i&256){n.instructionLength=r.parseUShort(),n.instructions=[];for(var I=0;I<n.instructionLength;I+=1)n.instructions.push(r.parseByte())}}}function gb(n,e){for(var t=[],r=0;r<n.length;r+=1){var i=n[r],o={x:e.xScale*i.x+e.scale01*i.y+e.dx,y:e.scale10*i.x+e.yScale*i.y+e.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};t.push(o)}return t}function mJ(n){for(var e=[],t=[],r=0;r<n.length;r+=1){var i=n[r];t.push(i),i.lastPointOfContour&&(e.push(t),t=[])}return Fn.argument(t.length===0,"There are still points left in the current contour."),e}function FD(n){var e=new _o;if(!n)return e;for(var t=mJ(n),r=0;r<t.length;++r){var i=t[r],o=null,s=i[i.length-1],a=i[0];if(s.onCurve)e.moveTo(s.x,s.y);else if(a.onCurve)e.moveTo(a.x,a.y);else{var l={x:(s.x+a.x)*.5,y:(s.y+a.y)*.5};e.moveTo(l.x,l.y)}for(var u=0;u<i.length;++u)if(o=s,s=a,a=i[(u+1)%i.length],s.onCurve)e.lineTo(s.x,s.y);else{var c=a;o.onCurve||((s.x+o.x)*.5,(s.y+o.y)*.5),a.onCurve||(c={x:(s.x+a.x)*.5,y:(s.y+a.y)*.5}),e.quadraticCurveTo(s.x,s.y,c.x,c.y)}e.closePath()}return e}function DD(n,e){if(e.isComposite)for(var t=0;t<e.components.length;t+=1){var r=e.components[t],i=n.get(r.glyphIndex);if(i.getPath(),i.points){var o=void 0;if(r.matchedPoints===void 0)o=gb(i.points,r);else{if(r.matchedPoints[0]>e.points.length-1||r.matchedPoints[1]>i.points.length-1)throw Error("Matched points out of range in "+e.name);var s=e.points[r.matchedPoints[0]],a=i.points[r.matchedPoints[1]],l={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0};a=gb([a],l)[0],l.dx=s.x-a.x,l.dy=s.y-a.y,o=gb(i.points,l)}e.points=e.points.concat(o)}}return FD(e.points)}function gJ(n,e,t,r){for(var i=new Nu.GlyphSet(r),o=0;o<t.length-1;o+=1){var s=t[o],a=t[o+1];s!==a?i.push(o,Nu.ttfGlyphLoader(r,o,ND,n,e+s,DD)):i.push(o,Nu.glyphLoader(r,o))}return i}function vJ(n,e,t,r){var i=new Nu.GlyphSet(r);return r._push=function(o){var s=t[o],a=t[o+1];s!==a?i.push(o,Nu.ttfGlyphLoader(r,o,ND,n,e+s,DD)):i.push(o,Nu.glyphLoader(r,o))},i}function yJ(n,e,t,r,i){return i.lowMemory?vJ(n,e,t,r):gJ(n,e,t,r)}var xJ={getPath:FD,parse:yJ},OD,Vd,BD,JM;function UD(n){this.font=n,this.getCommands=function(e){return xJ.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function wJ(n){return n}function zD(n){return Math.sign(n)*Math.round(Math.abs(n))}function SJ(n){return Math.sign(n)*Math.round(Math.abs(n*2))/2}function _J(n){return Math.sign(n)*(Math.round(Math.abs(n)+.5)-.5)}function bJ(n){return Math.sign(n)*Math.ceil(Math.abs(n))}function MJ(n){return Math.sign(n)*Math.floor(Math.abs(n))}var HD=function(n){var e=this.srPeriod,t=this.srPhase,r=this.srThreshold,i=1;return n<0&&(n=-n,i=-1),n+=r-t,n=Math.trunc(n/e)*e,n+=t,n<0?t*i:n*i},Au={x:1,y:0,axis:"x",distance:function(n,e,t,r){return(t?n.xo:n.x)-(r?e.xo:e.x)},interpolate:function(n,e,t,r){var i,o,s,a,l,u,c;if(!r||r===this){if(i=n.xo-e.xo,o=n.xo-t.xo,l=e.x-e.xo,u=t.x-t.xo,s=Math.abs(i),a=Math.abs(o),c=s+a,c===0){n.x=n.xo+(l+u)/2;return}n.x=n.xo+(l*a+u*s)/c;return}if(i=r.distance(n,e,!0,!0),o=r.distance(n,t,!0,!0),l=r.distance(e,e,!1,!0),u=r.distance(t,t,!1,!0),s=Math.abs(i),a=Math.abs(o),c=s+a,c===0){Au.setRelative(n,n,(l+u)/2,r,!0);return}Au.setRelative(n,n,(l*a+u*s)/c,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(n,e,t,r,i){if(!r||r===this){n.x=(i?e.xo:e.x)+t;return}var o=i?e.xo:e.x,s=i?e.yo:e.y,a=o+t*r.x,l=s+t*r.y;n.x=a+(n.y-l)/r.normalSlope},slope:0,touch:function(n){n.xTouched=!0},touched:function(n){return n.xTouched},untouch:function(n){n.xTouched=!1}},Ac={x:0,y:1,axis:"y",distance:function(n,e,t,r){return(t?n.yo:n.y)-(r?e.yo:e.y)},interpolate:function(n,e,t,r){var i,o,s,a,l,u,c;if(!r||r===this){if(i=n.yo-e.yo,o=n.yo-t.yo,l=e.y-e.yo,u=t.y-t.yo,s=Math.abs(i),a=Math.abs(o),c=s+a,c===0){n.y=n.yo+(l+u)/2;return}n.y=n.yo+(l*a+u*s)/c;return}if(i=r.distance(n,e,!0,!0),o=r.distance(n,t,!0,!0),l=r.distance(e,e,!1,!0),u=r.distance(t,t,!1,!0),s=Math.abs(i),a=Math.abs(o),c=s+a,c===0){Ac.setRelative(n,n,(l+u)/2,r,!0);return}Ac.setRelative(n,n,(l*a+u*s)/c,r,!0)},normalSlope:0,setRelative:function(n,e,t,r,i){if(!r||r===this){n.y=(i?e.yo:e.y)+t;return}var o=i?e.xo:e.x,s=i?e.yo:e.y,a=o+t*r.x,l=s+t*r.y;n.y=l+r.normalSlope*(n.x-a)},slope:Number.POSITIVE_INFINITY,touch:function(n){n.yTouched=!0},touched:function(n){return n.yTouched},untouch:function(n){n.yTouched=!1}};Object.freeze(Au);Object.freeze(Ac);function I1(n,e){this.x=n,this.y=e,this.axis=void 0,this.slope=e/n,this.normalSlope=-n/e,Object.freeze(this)}I1.prototype.distance=function(n,e,t,r){return this.x*Au.distance(n,e,t,r)+this.y*Ac.distance(n,e,t,r)};I1.prototype.interpolate=function(n,e,t,r){var i,o,s,a,l,u,c;if(s=r.distance(n,e,!0,!0),a=r.distance(n,t,!0,!0),i=r.distance(e,e,!1,!0),o=r.distance(t,t,!1,!0),l=Math.abs(s),u=Math.abs(a),c=l+u,c===0){this.setRelative(n,n,(i+o)/2,r,!0);return}this.setRelative(n,n,(i*u+o*l)/c,r,!0)};I1.prototype.setRelative=function(n,e,t,r,i){r=r||this;var o=i?e.xo:e.x,s=i?e.yo:e.y,a=o+t*r.x,l=s+t*r.y,u=r.normalSlope,c=this.slope,h=n.x,f=n.y;n.x=(c*h-u*a+l-f)/(c-u),n.y=c*(n.x-h)+f};I1.prototype.touch=function(n){n.xTouched=!0,n.yTouched=!0};function N1(n,e){var t=Math.sqrt(n*n+e*e);return n/=t,e/=t,n===1&&e===0?Au:n===0&&e===1?Ac:new I1(n,e)}function kc(n,e,t,r){this.x=this.xo=Math.round(n*64)/64,this.y=this.yo=Math.round(e*64)/64,this.lastPointOfContour=t,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}kc.prototype.nextTouched=function(n){for(var e=this.nextPointOnContour;!n.touched(e)&&e!==this;)e=e.nextPointOnContour;return e};kc.prototype.prevTouched=function(n){for(var e=this.prevPointOnContour;!n.touched(e)&&e!==this;)e=e.prevPointOnContour;return e};var e1=Object.freeze(new kc(0,0)),EJ={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Wh(n,e){switch(this.env=n,this.stack=[],this.prog=e,n){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Au,this.round=zD}}UD.prototype.exec=function(n,e){if(typeof e!="number")throw new Error("Point size is not a number!");if(!(this._errorState>2)){var t=this.font,r=this._prepState;if(!r||r.ppem!==e){var i=this._fpgmState;if(!i){Wh.prototype=EJ,i=this._fpgmState=new Wh("fpgm",t.tables.fpgm),i.funcs=[],i.font=t,exports.DEBUG&&(console.log("---EXEC FPGM---"),i.step=-1);try{Vd(i)}catch(u){console.log("Hinting error in FPGM:"+u),this._errorState=3;return}}Wh.prototype=i,r=this._prepState=new Wh("prep",t.tables.prep),r.ppem=e;var o=t.tables.cvt;if(o)for(var s=r.cvt=new Array(o.length),a=e/t.unitsPerEm,l=0;l<o.length;l++)s[l]=o[l]*a;else r.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),r.step=-1);try{Vd(r)}catch(u){this._errorState<2&&console.log("Hinting error in PREP:"+u),this._errorState=2}}if(!(this._errorState>1))try{return BD(n,r)}catch(u){this._errorState<1&&(console.log("Hinting error:"+u),console.log("Note: further hinting errors are silenced")),this._errorState=1;return}}};BD=function(n,e){var t=e.ppem/e.font.unitsPerEm,r=t,i=n.components,o,s,a;if(Wh.prototype=e,!i)a=new Wh("glyf",n.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),a.step=-1),JM(n,a,t,r),s=a.gZone;else{var l=e.font;s=[],o=[];for(var u=0;u<i.length;u++){var c=i[u],h=l.glyphs.get(c.glyphIndex);a=new Wh("glyf",h.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+u+"---"),a.step=-1),JM(h,a,t,r);for(var f=Math.round(c.dx*t),d=Math.round(c.dy*r),v=a.gZone,y=a.contours,x=0;x<v.length;x++){var g=v[x];g.xTouched=g.yTouched=!1,g.xo=g.x=g.x+f,g.yo=g.y=g.y+d}var S=s.length;s.push.apply(s,v);for(var _=0;_<y.length;_++)o.push(y[_]+S)}n.instructions&&!a.inhibitGridFit&&(a=new Wh("glyf",n.instructions),a.gZone=a.z0=a.z1=a.z2=s,a.contours=o,s.push(new kc(0,0),new kc(Math.round(n.advanceWidth*t),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),a.step=-1),Vd(a),s.length-=2)}return s};JM=function(n,e,t,r){for(var i=n.points||[],o=i.length,s=e.gZone=e.z0=e.z1=e.z2=[],a=e.contours=[],l,u=0;u<o;u++)l=i[u],s[u]=new kc(l.x*t,l.y*r,l.lastPointOfContour,l.onCurve);for(var c,h,f=0;f<o;f++)l=s[f],c||(c=l,a.push(f)),l.lastPointOfContour?(l.nextPointOnContour=c,c.prevPointOnContour=l,c=void 0):(h=s[f+1],l.nextPointOnContour=h,h.prevPointOnContour=l);if(!e.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",e.stack);for(var d=0;d<o;d++)console.log(d,s[d].x,s[d].y)}if(s.push(new kc(0,0),new kc(Math.round(n.advanceWidth*t),0)),Vd(e),s.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",e.stack);for(var v=0;v<o;v++)console.log(v,s[v].x,s[v].y)}}};Vd=function(n){var e=n.prog;if(e){var t=e.length,r;for(n.ip=0;n.ip<t;n.ip++){if(exports.DEBUG&&n.step++,r=OD[e[n.ip]],!r)throw new Error("unknown instruction: 0x"+Number(e[n.ip]).toString(16));r(n)}}};function vS(n){for(var e=n.tZone=new Array(n.gZone.length),t=0;t<e.length;t++)e[t]=new kc(0,0)}function GD(n,e){var t=n.prog,r=n.ip,i=1,o;do if(o=t[++r],o===88)i++;else if(o===89)i--;else if(o===64)r+=t[r+1]+1;else if(o===65)r+=2*t[r+1]+1;else if(o>=176&&o<=183)r+=o-176+1;else if(o>=184&&o<=191)r+=(o-184+1)*2;else if(e&&i===1&&o===27)break;while(i>0);n.ip=r}function cL(n,e){exports.DEBUG&&console.log(e.step,"SVTCA["+n.axis+"]"),e.fv=e.pv=e.dpv=n}function hL(n,e){exports.DEBUG&&console.log(e.step,"SPVTCA["+n.axis+"]"),e.pv=e.dpv=n}function fL(n,e){exports.DEBUG&&console.log(e.step,"SFVTCA["+n.axis+"]"),e.fv=n}function dL(n,e){var t=e.stack,r=t.pop(),i=t.pop(),o=e.z2[r],s=e.z1[i];exports.DEBUG&&console.log("SPVTL["+n+"]",r,i);var a,l;n?(a=o.y-s.y,l=s.x-o.x):(a=s.x-o.x,l=s.y-o.y),e.pv=e.dpv=N1(a,l)}function pL(n,e){var t=e.stack,r=t.pop(),i=t.pop(),o=e.z2[r],s=e.z1[i];exports.DEBUG&&console.log("SFVTL["+n+"]",r,i);var a,l;n?(a=o.y-s.y,l=s.x-o.x):(a=s.x-o.x,l=s.y-o.y),e.fv=N1(a,l)}function AJ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"SPVFS[]",t,r),n.pv=n.dpv=N1(r,t)}function TJ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"SPVFS[]",t,r),n.fv=N1(r,t)}function CJ(n){var e=n.stack,t=n.pv;exports.DEBUG&&console.log(n.step,"GPV[]"),e.push(t.x*16384),e.push(t.y*16384)}function PJ(n){var e=n.stack,t=n.fv;exports.DEBUG&&console.log(n.step,"GFV[]"),e.push(t.x*16384),e.push(t.y*16384)}function RJ(n){n.fv=n.pv,exports.DEBUG&&console.log(n.step,"SFVTPV[]")}function LJ(n){var e=n.stack,t=e.pop(),r=e.pop(),i=e.pop(),o=e.pop(),s=e.pop(),a=n.z0,l=n.z1,u=a[t],c=a[r],h=l[i],f=l[o],d=n.z2[s];exports.DEBUG&&console.log("ISECT[], ",t,r,i,o,s);var v=u.x,y=u.y,x=c.x,g=c.y,S=h.x,_=h.y,E=f.x,C=f.y,I=(v-x)*(_-C)-(y-g)*(S-E),F=v*g-y*x,R=S*C-_*E;d.x=(F*(S-E)-R*(v-x))/I,d.y=(F*(_-C)-R*(y-g))/I}function kJ(n){n.rp0=n.stack.pop(),exports.DEBUG&&console.log(n.step,"SRP0[]",n.rp0)}function IJ(n){n.rp1=n.stack.pop(),exports.DEBUG&&console.log(n.step,"SRP1[]",n.rp1)}function NJ(n){n.rp2=n.stack.pop(),exports.DEBUG&&console.log(n.step,"SRP2[]",n.rp2)}function FJ(n){var e=n.stack.pop();switch(exports.DEBUG&&console.log(n.step,"SZP0[]",e),n.zp0=e,e){case 0:n.tZone||vS(n),n.z0=n.tZone;break;case 1:n.z0=n.gZone;break;default:throw new Error("Invalid zone pointer")}}function DJ(n){var e=n.stack.pop();switch(exports.DEBUG&&console.log(n.step,"SZP1[]",e),n.zp1=e,e){case 0:n.tZone||vS(n),n.z1=n.tZone;break;case 1:n.z1=n.gZone;break;default:throw new Error("Invalid zone pointer")}}function OJ(n){var e=n.stack.pop();switch(exports.DEBUG&&console.log(n.step,"SZP2[]",e),n.zp2=e,e){case 0:n.tZone||vS(n),n.z2=n.tZone;break;case 1:n.z2=n.gZone;break;default:throw new Error("Invalid zone pointer")}}function BJ(n){var e=n.stack.pop();switch(exports.DEBUG&&console.log(n.step,"SZPS[]",e),n.zp0=n.zp1=n.zp2=e,e){case 0:n.tZone||vS(n),n.z0=n.z1=n.z2=n.tZone;break;case 1:n.z0=n.z1=n.z2=n.gZone;break;default:throw new Error("Invalid zone pointer")}}function UJ(n){n.loop=n.stack.pop(),exports.DEBUG&&console.log(n.step,"SLOOP[]",n.loop)}function zJ(n){exports.DEBUG&&console.log(n.step,"RTG[]"),n.round=zD}function HJ(n){exports.DEBUG&&console.log(n.step,"RTHG[]"),n.round=_J}function GJ(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"SMD[]",e),n.minDis=e/64}function VJ(n){exports.DEBUG&&console.log(n.step,"ELSE[]"),GD(n,!1)}function WJ(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"JMPR[]",e),n.ip+=e-1}function jJ(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"SCVTCI[]",e),n.cvCutIn=e/64}function qJ(n){var e=n.stack;exports.DEBUG&&console.log(n.step,"DUP[]"),e.push(e[e.length-1])}function vb(n){exports.DEBUG&&console.log(n.step,"POP[]"),n.stack.pop()}function $J(n){exports.DEBUG&&console.log(n.step,"CLEAR[]"),n.stack.length=0}function XJ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"SWAP[]"),e.push(t),e.push(r)}function YJ(n){var e=n.stack;exports.DEBUG&&console.log(n.step,"DEPTH[]"),e.push(e.length)}function ZJ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"LOOPCALL[]",t,r);var i=n.ip,o=n.prog;n.prog=n.funcs[t];for(var s=0;s<r;s++)Vd(n),exports.DEBUG&&console.log(++n.step,s+1<r?"next loopcall":"done loopcall",s);n.ip=i,n.prog=o}function KJ(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"CALL[]",e);var t=n.ip,r=n.prog;n.prog=n.funcs[e],Vd(n),n.ip=t,n.prog=r,exports.DEBUG&&console.log(++n.step,"returning from",e)}function JJ(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"CINDEX[]",t),e.push(e[e.length-t])}function QJ(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"MINDEX[]",t),e.push(e.splice(e.length-t,1)[0])}function eQ(n){if(n.env!=="fpgm")throw new Error("FDEF not allowed here");var e=n.stack,t=n.prog,r=n.ip,i=e.pop(),o=r;for(exports.DEBUG&&console.log(n.step,"FDEF[]",i);t[++r]!==45;);n.ip=r,n.funcs[i]=t.slice(o+1,r)}function mL(n,e){var t=e.stack.pop(),r=e.z0[t],i=e.fv,o=e.pv;exports.DEBUG&&console.log(e.step,"MDAP["+n+"]",t);var s=o.distance(r,e1);n&&(s=e.round(s)),i.setRelative(r,e1,s,o),i.touch(r),e.rp0=e.rp1=t}function gL(n,e){var t=e.z2,r=t.length-2,i,o,s;exports.DEBUG&&console.log(e.step,"IUP["+n.axis+"]");for(var a=0;a<r;a++)i=t[a],!n.touched(i)&&(o=i.prevTouched(n),o!==i&&(s=i.nextTouched(n),o===s&&n.setRelative(i,i,n.distance(o,o,!1,!0),n,!0),n.interpolate(i,o,s,n)))}function vL(n,e){for(var t=e.stack,r=n?e.rp1:e.rp2,i=(n?e.z0:e.z1)[r],o=e.fv,s=e.pv,a=e.loop,l=e.z2;a--;){var u=t.pop(),c=l[u],h=s.distance(i,i,!1,!0);o.setRelative(c,c,h,s),o.touch(c),exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-a)+": ":"")+"SHP["+(n?"rp1":"rp2")+"]",u)}e.loop=1}function yL(n,e){var t=e.stack,r=n?e.rp1:e.rp2,i=(n?e.z0:e.z1)[r],o=e.fv,s=e.pv,a=t.pop(),l=e.z2[e.contours[a]],u=l;exports.DEBUG&&console.log(e.step,"SHC["+n+"]",a);var c=s.distance(i,i,!1,!0);do u!==i&&o.setRelative(u,u,c,s),u=u.nextPointOnContour;while(u!==l)}function xL(n,e){var t=e.stack,r=n?e.rp1:e.rp2,i=(n?e.z0:e.z1)[r],o=e.fv,s=e.pv,a=t.pop();exports.DEBUG&&console.log(e.step,"SHZ["+n+"]",a);var l;switch(a){case 0:l=e.tZone;break;case 1:l=e.gZone;break;default:throw new Error("Invalid zone")}for(var u,c=s.distance(i,i,!1,!0),h=l.length-2,f=0;f<h;f++)u=l[f],o.setRelative(u,u,c,s)}function tQ(n){for(var e=n.stack,t=n.loop,r=n.fv,i=e.pop()/64,o=n.z2;t--;){var s=e.pop(),a=o[s];exports.DEBUG&&console.log(n.step,(n.loop>1?"loop "+(n.loop-t)+": ":"")+"SHPIX[]",s,i),r.setRelative(a,a,i),r.touch(a)}n.loop=1}function nQ(n){for(var e=n.stack,t=n.rp1,r=n.rp2,i=n.loop,o=n.z0[t],s=n.z1[r],a=n.fv,l=n.dpv,u=n.z2;i--;){var c=e.pop(),h=u[c];exports.DEBUG&&console.log(n.step,(n.loop>1?"loop "+(n.loop-i)+": ":"")+"IP[]",c,t,"<->",r),a.interpolate(h,o,s,l),a.touch(h)}n.loop=1}function wL(n,e){var t=e.stack,r=t.pop()/64,i=t.pop(),o=e.z1[i],s=e.z0[e.rp0],a=e.fv,l=e.pv;a.setRelative(o,s,r,l),a.touch(o),exports.DEBUG&&console.log(e.step,"MSIRP["+n+"]",r,i),e.rp1=e.rp0,e.rp2=i,n&&(e.rp0=i)}function rQ(n){for(var e=n.stack,t=n.rp0,r=n.z0[t],i=n.loop,o=n.fv,s=n.pv,a=n.z1;i--;){var l=e.pop(),u=a[l];exports.DEBUG&&console.log(n.step,(n.loop>1?"loop "+(n.loop-i)+": ":"")+"ALIGNRP[]",l),o.setRelative(u,r,0,s),o.touch(u)}n.loop=1}function iQ(n){exports.DEBUG&&console.log(n.step,"RTDG[]"),n.round=SJ}function SL(n,e){var t=e.stack,r=t.pop(),i=t.pop(),o=e.z0[i],s=e.fv,a=e.pv,l=e.cvt[r];exports.DEBUG&&console.log(e.step,"MIAP["+n+"]",r,"(",l,")",i);var u=a.distance(o,e1);n&&(Math.abs(u-l)<e.cvCutIn&&(u=l),u=e.round(u)),s.setRelative(o,e1,u,a),e.zp0===0&&(o.xo=o.x,o.yo=o.y),s.touch(o),e.rp0=e.rp1=i}function oQ(n){var e=n.prog,t=n.ip,r=n.stack,i=e[++t];exports.DEBUG&&console.log(n.step,"NPUSHB[]",i);for(var o=0;o<i;o++)r.push(e[++t]);n.ip=t}function sQ(n){var e=n.ip,t=n.prog,r=n.stack,i=t[++e];exports.DEBUG&&console.log(n.step,"NPUSHW[]",i);for(var o=0;o<i;o++){var s=t[++e]<<8|t[++e];s&32768&&(s=-((s^65535)+1)),r.push(s)}n.ip=e}function aQ(n){var e=n.stack,t=n.store;t||(t=n.store=[]);var r=e.pop(),i=e.pop();exports.DEBUG&&console.log(n.step,"WS",r,i),t[i]=r}function lQ(n){var e=n.stack,t=n.store,r=e.pop();exports.DEBUG&&console.log(n.step,"RS",r);var i=t&&t[r]||0;e.push(i)}function uQ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"WCVTP",t,r),n.cvt[r]=t/64}function cQ(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"RCVT",t),e.push(n.cvt[t]*64)}function _L(n,e){var t=e.stack,r=t.pop(),i=e.z2[r];exports.DEBUG&&console.log(e.step,"GC["+n+"]",r),t.push(e.dpv.distance(i,e1,n,!1)*64)}function bL(n,e){var t=e.stack,r=t.pop(),i=t.pop(),o=e.z1[r],s=e.z0[i],a=e.dpv.distance(s,o,n,n);exports.DEBUG&&console.log(e.step,"MD["+n+"]",r,i,"->",a),e.stack.push(Math.round(a*64))}function hQ(n){exports.DEBUG&&console.log(n.step,"MPPEM[]"),n.stack.push(n.ppem)}function fQ(n){exports.DEBUG&&console.log(n.step,"FLIPON[]"),n.autoFlip=!0}function dQ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"LT[]",t,r),e.push(r<t?1:0)}function pQ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"LTEQ[]",t,r),e.push(r<=t?1:0)}function mQ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"GT[]",t,r),e.push(r>t?1:0)}function gQ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"GTEQ[]",t,r),e.push(r>=t?1:0)}function vQ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"EQ[]",t,r),e.push(t===r?1:0)}function yQ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"NEQ[]",t,r),e.push(t!==r?1:0)}function xQ(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"ODD[]",t),e.push(Math.trunc(t)%2?1:0)}function wQ(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"EVEN[]",t),e.push(Math.trunc(t)%2?0:1)}function SQ(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"IF[]",e),e||(GD(n,!0),exports.DEBUG&&console.log(n.step,"EIF[]"))}function _Q(n){exports.DEBUG&&console.log(n.step,"EIF[]")}function bQ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"AND[]",t,r),e.push(t&&r?1:0)}function MQ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"OR[]",t,r),e.push(t||r?1:0)}function EQ(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"NOT[]",t),e.push(t?0:1)}function yb(n,e){var t=e.stack,r=t.pop(),i=e.fv,o=e.pv,s=e.ppem,a=e.deltaBase+(n-1)*16,l=e.deltaShift,u=e.z0;exports.DEBUG&&console.log(e.step,"DELTAP["+n+"]",r,t);for(var c=0;c<r;c++){var h=t.pop(),f=t.pop(),d=a+((f&240)>>4);if(d===s){var v=(f&15)-8;v>=0&&v++,exports.DEBUG&&console.log(e.step,"DELTAPFIX",h,"by",v*l);var y=u[h];i.setRelative(y,y,v*l,o)}}}function AQ(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"SDB[]",t),n.deltaBase=t}function TQ(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"SDS[]",t),n.deltaShift=Math.pow(.5,t)}function CQ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"ADD[]",t,r),e.push(r+t)}function PQ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"SUB[]",t,r),e.push(r-t)}function RQ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"DIV[]",t,r),e.push(r*64/t)}function LQ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"MUL[]",t,r),e.push(r*t/64)}function kQ(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"ABS[]",t),e.push(Math.abs(t))}function IQ(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"NEG[]",t),e.push(-t)}function NQ(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"FLOOR[]",t),e.push(Math.floor(t/64)*64)}function FQ(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"CEILING[]",t),e.push(Math.ceil(t/64)*64)}function x2(n,e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"ROUND[]"),t.push(e.round(r/64)*64)}function DQ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"WCVTF[]",t,r),n.cvt[r]=t*n.ppem/n.font.unitsPerEm}function xb(n,e){var t=e.stack,r=t.pop(),i=e.ppem,o=e.deltaBase+(n-1)*16,s=e.deltaShift;exports.DEBUG&&console.log(e.step,"DELTAC["+n+"]",r,t);for(var a=0;a<r;a++){var l=t.pop(),u=t.pop(),c=o+((u&240)>>4);if(c===i){var h=(u&15)-8;h>=0&&h++;var f=h*s;exports.DEBUG&&console.log(e.step,"DELTACFIX",l,"by",f),e.cvt[l]+=f}}}function OQ(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"SROUND[]",e),n.round=HD;var t;switch(e&192){case 0:t=.5;break;case 64:t=1;break;case 128:t=2;break;default:throw new Error("invalid SROUND value")}switch(n.srPeriod=t,e&48){case 0:n.srPhase=0;break;case 16:n.srPhase=.25*t;break;case 32:n.srPhase=.5*t;break;case 48:n.srPhase=.75*t;break;default:throw new Error("invalid SROUND value")}e&=15,e===0?n.srThreshold=0:n.srThreshold=(e/8-.5)*t}function BQ(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"S45ROUND[]",e),n.round=HD;var t;switch(e&192){case 0:t=Math.sqrt(2)/2;break;case 64:t=Math.sqrt(2);break;case 128:t=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(n.srPeriod=t,e&48){case 0:n.srPhase=0;break;case 16:n.srPhase=.25*t;break;case 32:n.srPhase=.5*t;break;case 48:n.srPhase=.75*t;break;default:throw new Error("invalid S45ROUND value")}e&=15,e===0?n.srThreshold=0:n.srThreshold=(e/8-.5)*t}function UQ(n){exports.DEBUG&&console.log(n.step,"ROFF[]"),n.round=wJ}function zQ(n){exports.DEBUG&&console.log(n.step,"RUTG[]"),n.round=bJ}function HQ(n){exports.DEBUG&&console.log(n.step,"RDTG[]"),n.round=MJ}function GQ(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"SCANCTRL[]",e)}function ML(n,e){var t=e.stack,r=t.pop(),i=t.pop(),o=e.z2[r],s=e.z1[i];exports.DEBUG&&console.log(e.step,"SDPVTL["+n+"]",r,i);var a,l;n?(a=o.y-s.y,l=s.x-o.x):(a=s.x-o.x,l=s.y-o.y),e.dpv=N1(a,l)}function VQ(n){var e=n.stack,t=e.pop(),r=0;exports.DEBUG&&console.log(n.step,"GETINFO[]",t),t&1&&(r=35),t&32&&(r|=4096),e.push(r)}function WQ(n){var e=n.stack,t=e.pop(),r=e.pop(),i=e.pop();exports.DEBUG&&console.log(n.step,"ROLL[]"),e.push(r),e.push(t),e.push(i)}function jQ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"MAX[]",t,r),e.push(Math.max(r,t))}function qQ(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"MIN[]",t,r),e.push(Math.min(r,t))}function $Q(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"SCANTYPE[]",e)}function XQ(n){var e=n.stack.pop(),t=n.stack.pop();switch(exports.DEBUG&&console.log(n.step,"INSTCTRL[]",e,t),e){case 1:n.inhibitGridFit=!!t;return;case 2:n.ignoreCvt=!!t;return;default:throw new Error("invalid INSTCTRL[] selector")}}function Eh(n,e){var t=e.stack,r=e.prog,i=e.ip;exports.DEBUG&&console.log(e.step,"PUSHB["+n+"]");for(var o=0;o<n;o++)t.push(r[++i]);e.ip=i}function Ah(n,e){var t=e.ip,r=e.prog,i=e.stack;exports.DEBUG&&console.log(e.ip,"PUSHW["+n+"]");for(var o=0;o<n;o++){var s=r[++t]<<8|r[++t];s&32768&&(s=-((s^65535)+1)),i.push(s)}e.ip=t}function en(n,e,t,r,i,o){var s=o.stack,a=n&&s.pop(),l=s.pop(),u=o.rp0,c=o.z0[u],h=o.z1[l],f=o.minDis,d=o.fv,v=o.dpv,y,x,g,S;x=y=v.distance(h,c,!0,!0),g=x>=0?1:-1,x=Math.abs(x),n&&(S=o.cvt[a],r&&Math.abs(x-S)<o.cvCutIn&&(x=S)),t&&x<f&&(x=f),r&&(x=o.round(x)),d.setRelative(h,c,g*x,v),d.touch(h),exports.DEBUG&&console.log(o.step,(n?"MIRP[":"MDRP[")+(e?"M":"m")+(t?">":"_")+(r?"R":"_")+(i===0?"Gr":i===1?"Bl":i===2?"Wh":"")+"]",n?a+"("+o.cvt[a]+","+S+")":"",l,"(d =",y,"->",g*x,")"),o.rp1=o.rp0,o.rp2=l,e&&(o.rp0=l)}OD=[cL.bind(void 0,Ac),cL.bind(void 0,Au),hL.bind(void 0,Ac),hL.bind(void 0,Au),fL.bind(void 0,Ac),fL.bind(void 0,Au),dL.bind(void 0,0),dL.bind(void 0,1),pL.bind(void 0,0),pL.bind(void 0,1),AJ,TJ,CJ,PJ,RJ,LJ,kJ,IJ,NJ,FJ,DJ,OJ,BJ,UJ,zJ,HJ,GJ,VJ,WJ,jJ,void 0,void 0,qJ,vb,$J,XJ,YJ,JJ,QJ,void 0,void 0,void 0,ZJ,KJ,eQ,void 0,mL.bind(void 0,0),mL.bind(void 0,1),gL.bind(void 0,Ac),gL.bind(void 0,Au),vL.bind(void 0,0),vL.bind(void 0,1),yL.bind(void 0,0),yL.bind(void 0,1),xL.bind(void 0,0),xL.bind(void 0,1),tQ,nQ,wL.bind(void 0,0),wL.bind(void 0,1),rQ,iQ,SL.bind(void 0,0),SL.bind(void 0,1),oQ,sQ,aQ,lQ,uQ,cQ,_L.bind(void 0,0),_L.bind(void 0,1),void 0,bL.bind(void 0,0),bL.bind(void 0,1),hQ,void 0,fQ,void 0,void 0,dQ,pQ,mQ,gQ,vQ,yQ,xQ,wQ,SQ,_Q,bQ,MQ,EQ,yb.bind(void 0,1),AQ,TQ,CQ,PQ,RQ,LQ,kQ,IQ,NQ,FQ,x2.bind(void 0,0),x2.bind(void 0,1),x2.bind(void 0,2),x2.bind(void 0,3),void 0,void 0,void 0,void 0,DQ,yb.bind(void 0,2),yb.bind(void 0,3),xb.bind(void 0,1),xb.bind(void 0,2),xb.bind(void 0,3),OQ,BQ,void 0,void 0,UQ,void 0,zQ,HQ,vb,vb,void 0,void 0,void 0,void 0,void 0,GQ,ML.bind(void 0,0),ML.bind(void 0,1),VQ,void 0,WQ,jQ,qQ,$Q,XQ,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Eh.bind(void 0,1),Eh.bind(void 0,2),Eh.bind(void 0,3),Eh.bind(void 0,4),Eh.bind(void 0,5),Eh.bind(void 0,6),Eh.bind(void 0,7),Eh.bind(void 0,8),Ah.bind(void 0,1),Ah.bind(void 0,2),Ah.bind(void 0,3),Ah.bind(void 0,4),Ah.bind(void 0,5),Ah.bind(void 0,6),Ah.bind(void 0,7),Ah.bind(void 0,8),en.bind(void 0,0,0,0,0,0),en.bind(void 0,0,0,0,0,1),en.bind(void 0,0,0,0,0,2),en.bind(void 0,0,0,0,0,3),en.bind(void 0,0,0,0,1,0),en.bind(void 0,0,0,0,1,1),en.bind(void 0,0,0,0,1,2),en.bind(void 0,0,0,0,1,3),en.bind(void 0,0,0,1,0,0),en.bind(void 0,0,0,1,0,1),en.bind(void 0,0,0,1,0,2),en.bind(void 0,0,0,1,0,3),en.bind(void 0,0,0,1,1,0),en.bind(void 0,0,0,1,1,1),en.bind(void 0,0,0,1,1,2),en.bind(void 0,0,0,1,1,3),en.bind(void 0,0,1,0,0,0),en.bind(void 0,0,1,0,0,1),en.bind(void 0,0,1,0,0,2),en.bind(void 0,0,1,0,0,3),en.bind(void 0,0,1,0,1,0),en.bind(void 0,0,1,0,1,1),en.bind(void 0,0,1,0,1,2),en.bind(void 0,0,1,0,1,3),en.bind(void 0,0,1,1,0,0),en.bind(void 0,0,1,1,0,1),en.bind(void 0,0,1,1,0,2),en.bind(void 0,0,1,1,0,3),en.bind(void 0,0,1,1,1,0),en.bind(void 0,0,1,1,1,1),en.bind(void 0,0,1,1,1,2),en.bind(void 0,0,1,1,1,3),en.bind(void 0,1,0,0,0,0),en.bind(void 0,1,0,0,0,1),en.bind(void 0,1,0,0,0,2),en.bind(void 0,1,0,0,0,3),en.bind(void 0,1,0,0,1,0),en.bind(void 0,1,0,0,1,1),en.bind(void 0,1,0,0,1,2),en.bind(void 0,1,0,0,1,3),en.bind(void 0,1,0,1,0,0),en.bind(void 0,1,0,1,0,1),en.bind(void 0,1,0,1,0,2),en.bind(void 0,1,0,1,0,3),en.bind(void 0,1,0,1,1,0),en.bind(void 0,1,0,1,1,1),en.bind(void 0,1,0,1,1,2),en.bind(void 0,1,0,1,1,3),en.bind(void 0,1,1,0,0,0),en.bind(void 0,1,1,0,0,1),en.bind(void 0,1,1,0,0,2),en.bind(void 0,1,1,0,0,3),en.bind(void 0,1,1,0,1,0),en.bind(void 0,1,1,0,1,1),en.bind(void 0,1,1,0,1,2),en.bind(void 0,1,1,0,1,3),en.bind(void 0,1,1,1,0,0),en.bind(void 0,1,1,1,0,1),en.bind(void 0,1,1,1,0,2),en.bind(void 0,1,1,1,0,3),en.bind(void 0,1,1,1,1,0),en.bind(void 0,1,1,1,1,1),en.bind(void 0,1,1,1,1,2),en.bind(void 0,1,1,1,1,3)];function Ag(n){this.char=n,this.state={},this.activeState=null}function UA(n,e,t){this.contextName=t,this.startIndex=n,this.endOffset=e}function YQ(n,e,t){this.contextName=n,this.openRange=null,this.ranges=[],this.checkStart=e,this.checkEnd=t}function Xl(n,e){this.context=n,this.index=e,this.length=n.length,this.current=n[e],this.backtrack=n.slice(0,e),this.lookahead=n.slice(e+1)}function yS(n){this.eventId=n,this.subscribers=[]}function ZQ(n){var e=this,t=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];t.forEach(function(i){Object.defineProperty(e.events,i,{value:new yS(i)})}),n&&t.forEach(function(i){var o=n[i];typeof o=="function"&&e.events[i].subscribe(o)});var r=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];r.forEach(function(i){e.events[i].subscribe(e.updateContextsRanges)})}function Oi(n){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],ZQ.call(this,n)}Ag.prototype.setState=function(n,e){return this.state[n]=e,this.activeState={key:n,value:this.state[n]},this.activeState};Ag.prototype.getState=function(n){return this.state[n]||null};Oi.prototype.inboundIndex=function(n){return n>=0&&n<this.tokens.length};Oi.prototype.composeRUD=function(n){var e=this,t=!0,r=n.map(function(o){return e[o[0]].apply(e,o.slice(1).concat(t))}),i=function(o){return typeof o=="object"&&o.hasOwnProperty("FAIL")};if(r.every(i))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:r.filter(i)};this.dispatch("composeRUD",[r.filter(function(o){return!i(o)})])};Oi.prototype.replaceRange=function(n,e,t,r){e=e!==null?e:this.tokens.length;var i=t.every(function(s){return s instanceof Ag});if(!isNaN(n)&&this.inboundIndex(n)&&i){var o=this.tokens.splice.apply(this.tokens,[n,e].concat(t));return r||this.dispatch("replaceToken",[n,e,t]),[o,t]}else return{FAIL:"replaceRange: invalid tokens or startIndex."}};Oi.prototype.replaceToken=function(n,e,t){if(!isNaN(n)&&this.inboundIndex(n)&&e instanceof Ag){var r=this.tokens.splice(n,1,e);return t||this.dispatch("replaceToken",[n,e]),[r[0],e]}else return{FAIL:"replaceToken: invalid token or index."}};Oi.prototype.removeRange=function(n,e,t){e=isNaN(e)?this.tokens.length:e;var r=this.tokens.splice(n,e);return t||this.dispatch("removeRange",[r,n,e]),r};Oi.prototype.removeToken=function(n,e){if(!isNaN(n)&&this.inboundIndex(n)){var t=this.tokens.splice(n,1);return e||this.dispatch("removeToken",[t,n]),t}else return{FAIL:"removeToken: invalid token index."}};Oi.prototype.insertToken=function(n,e,t){var r=n.every(function(i){return i instanceof Ag});return r?(this.tokens.splice.apply(this.tokens,[e,0].concat(n)),t||this.dispatch("insertToken",[n,e]),n):{FAIL:"insertToken: invalid token(s)."}};Oi.prototype.registerModifier=function(n,e,t){this.events.newToken.subscribe(function(r,i){var o=[r,i],s=e===null||e.apply(this,o)===!0,a=[r,i];if(s){var l=t.apply(this,a);r.setState(n,l)}}),this.registeredModifiers.push(n)};yS.prototype.subscribe=function(n){return typeof n=="function"?this.subscribers.push(n)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}};yS.prototype.unsubscribe=function(n){this.subscribers.splice(n,1)};Xl.prototype.setCurrentIndex=function(n){this.index=n,this.current=this.context[n],this.backtrack=this.context.slice(0,n),this.lookahead=this.context.slice(n+1)};Xl.prototype.get=function(n){switch(!0){case n===0:return this.current;case(n<0&&Math.abs(n)<=this.backtrack.length):return this.backtrack.slice(n)[0];case(n>0&&n<=this.lookahead.length):return this.lookahead[n-1];default:return null}};Oi.prototype.rangeToText=function(n){if(n instanceof UA)return this.getRangeTokens(n).map(function(e){return e.char}).join("")};Oi.prototype.getText=function(){return this.tokens.map(function(n){return n.char}).join("")};Oi.prototype.getContext=function(n){var e=this.registeredContexts[n];return e||null};Oi.prototype.on=function(n,e){var t=this.events[n];return t?t.subscribe(e):null};Oi.prototype.dispatch=function(n,e){var t=this,r=this.events[n];r instanceof yS&&r.subscribers.forEach(function(i){i.apply(t,e||[])})};Oi.prototype.registerContextChecker=function(n,e,t){if(this.getContext(n))return{FAIL:"context name '"+n+"' is already registered."};if(typeof e!="function")return{FAIL:"missing context start check."};if(typeof t!="function")return{FAIL:"missing context end check."};var r=new YQ(n,e,t);return this.registeredContexts[n]=r,this.contextCheckers.push(r),r};Oi.prototype.getRangeTokens=function(n){var e=n.startIndex+n.endOffset;return[].concat(this.tokens.slice(n.startIndex,e))};Oi.prototype.getContextRanges=function(n){var e=this.getContext(n);return e?e.ranges:{FAIL:"context checker '"+n+"' is not registered."}};Oi.prototype.resetContextsRanges=function(){var n=this.registeredContexts;for(var e in n)if(n.hasOwnProperty(e)){var t=n[e];t.ranges=[]}};Oi.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var n=this.tokens.map(function(r){return r.char}),e=0;e<n.length;e++){var t=new Xl(n,e);this.runContextCheck(t)}this.dispatch("updateContextsRanges",[this.registeredContexts])};Oi.prototype.setEndOffset=function(n,e){var t=this.getContext(e).openRange.startIndex,r=new UA(t,n,e),i=this.getContext(e).ranges;return r.rangeId=e+"."+i.length,i.push(r),this.getContext(e).openRange=null,r};Oi.prototype.runContextCheck=function(n){var e=this,t=n.index;this.contextCheckers.forEach(function(r){var i=r.contextName,o=e.getContext(i).openRange;if(!o&&r.checkStart(n)&&(o=new UA(t,null,i),e.getContext(i).openRange=o,e.dispatch("contextStart",[i,t])),o&&r.checkEnd(n)){var s=t-o.startIndex+1,a=e.setEndOffset(s,i);e.dispatch("contextEnd",[i,a])}})};Oi.prototype.tokenize=function(n){this.tokens=[],this.resetContextsRanges();var e=Array.from(n);this.dispatch("start");for(var t=0;t<e.length;t++){var r=e[t],i=new Xl(e,t);this.dispatch("next",[i]),this.runContextCheck(i);var o=new Ag(r);this.tokens.push(o),this.dispatch("newToken",[o,i])}return this.dispatch("end",[this.tokens]),this.tokens};function sf(n){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(n)}function VD(n){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(n)}function df(n){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(n)}function ox(n){return/[A-z]/.test(n)}function KQ(n){return/\s/.test(n)}function Pa(n){this.font=n,this.features={}}function dd(n){this.id=n.id,this.tag=n.tag,this.substitution=n.substitution}function F1(n,e){if(!n)return-1;switch(e.format){case 1:return e.glyphs.indexOf(n);case 2:for(var t=e.ranges,r=0;r<t.length;r++){var i=t[r];if(n>=i.start&&n<=i.end){var o=n-i.start;return i.index+o}}break;default:return-1}return-1}function JQ(n,e){var t=F1(n,e.coverage);return t===-1?null:n+e.deltaGlyphId}function QQ(n,e){var t=F1(n,e.coverage);return t===-1?null:e.substitute[t]}function wb(n,e){for(var t=[],r=0;r<n.length;r++){var i=n[r],o=e.current;o=Array.isArray(o)?o[0]:o;var s=F1(o,i);s!==-1&&t.push(s)}return t.length!==n.length?-1:t}function eee(n,e){var t=e.inputCoverage.length+e.lookaheadCoverage.length+e.backtrackCoverage.length;if(n.context.length<t)return[];var r=wb(e.inputCoverage,n);if(r===-1)return[];var i=e.inputCoverage.length-1;if(n.lookahead.length<e.lookaheadCoverage.length)return[];for(var o=n.lookahead.slice(i);o.length&&df(o[0].char);)o.shift();var s=new Xl(o,0),a=wb(e.lookaheadCoverage,s),l=[].concat(n.backtrack);for(l.reverse();l.length&&df(l[0].char);)l.shift();if(l.length<e.backtrackCoverage.length)return[];var u=new Xl(l,0),c=wb(e.backtrackCoverage,u),h=r.length===e.inputCoverage.length&&a.length===e.lookaheadCoverage.length&&c.length===e.backtrackCoverage.length,f=[];if(h)for(var d=0;d<e.lookupRecords.length;d++)for(var v=e.lookupRecords[d],y=v.lookupListIndex,x=this.getLookupByIndex(y),g=0;g<x.subtables.length;g++){var S=x.subtables[g],_=this.getLookupMethod(x,S),E=this.getSubstitutionType(x,S);if(E==="12")for(var C=0;C<r.length;C++){var I=n.get(C),F=_(I);F&&f.push(F)}}return f}function tee(n,e){var t=n.current,r=F1(t,e.coverage);if(r===-1)return null;for(var i,o=e.ligatureSets[r],s=0;s<o.length;s++){i=o[s];for(var a=0;a<i.components.length;a++){var l=n.lookahead[a],u=i.components[a];if(l!==u)break;if(a===i.components.length-1)return i}}return null}function nee(n,e){var t=F1(n,e.coverage);return t===-1?null:e.sequences[t]}Pa.prototype.getDefaultScriptFeaturesIndexes=function(){for(var n=this.font.tables.gsub.scripts,e=0;e<n.length;e++){var t=n[e];if(t.tag==="DFLT")return t.script.defaultLangSys.featureIndexes}return[]};Pa.prototype.getScriptFeaturesIndexes=function(n){var e=this.font.tables;if(!e.gsub)return[];if(!n)return this.getDefaultScriptFeaturesIndexes();for(var t=this.font.tables.gsub.scripts,r=0;r<t.length;r++){var i=t[r];if(i.tag===n&&i.script.defaultLangSys)return i.script.defaultLangSys.featureIndexes;var o=i.langSysRecords;if(o)for(var s=0;s<o.length;s++){var a=o[s];if(a.tag===n){var l=a.langSys;return l.featureIndexes}}}return this.getDefaultScriptFeaturesIndexes()};Pa.prototype.mapTagsToFeatures=function(n,e){for(var t={},r=0;r<n.length;r++){var i=n[r].tag,o=n[r].feature;t[i]=o}this.features[e].tags=t};Pa.prototype.getScriptFeatures=function(n){var e=this.features[n];if(this.features.hasOwnProperty(n))return e;var t=this.getScriptFeaturesIndexes(n);if(!t)return null;var r=this.font.tables.gsub;return e=t.map(function(i){return r.features[i]}),this.features[n]=e,this.mapTagsToFeatures(e,n),e};Pa.prototype.getSubstitutionType=function(n,e){var t=n.lookupType.toString(),r=e.substFormat.toString();return t+r};Pa.prototype.getLookupMethod=function(n,e){var t=this,r=this.getSubstitutionType(n,e);switch(r){case"11":return function(i){return JQ.apply(t,[i,e])};case"12":return function(i){return QQ.apply(t,[i,e])};case"63":return function(i){return eee.apply(t,[i,e])};case"41":return function(i){return tee.apply(t,[i,e])};case"21":return function(i){return nee.apply(t,[i,e])};default:throw new Error("lookupType: "+n.lookupType+" - substFormat: "+e.substFormat+" is not yet supported")}};Pa.prototype.lookupFeature=function(n){var e=n.contextParams,t=e.index,r=this.getFeature({tag:n.tag,script:n.script});if(!r)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+n.tag+"' for script '"+n.script+"'.");for(var i=this.getFeatureLookups(r),o=[].concat(e.context),s=0;s<i.length;s++)for(var a=i[s],l=this.getLookupSubtables(a),u=0;u<l.length;u++){var c=l[u],h=this.getSubstitutionType(a,c),f=this.getLookupMethod(a,c),d=void 0;switch(h){case"11":d=f(e.current),d&&o.splice(t,1,new dd({id:11,tag:n.tag,substitution:d}));break;case"12":d=f(e.current),d&&o.splice(t,1,new dd({id:12,tag:n.tag,substitution:d}));break;case"63":d=f(e),Array.isArray(d)&&d.length&&o.splice(t,1,new dd({id:63,tag:n.tag,substitution:d}));break;case"41":d=f(e),d&&o.splice(t,1,new dd({id:41,tag:n.tag,substitution:d}));break;case"21":d=f(e.current),d&&o.splice(t,1,new dd({id:21,tag:n.tag,substitution:d}));break}e=new Xl(o,t),!(Array.isArray(d)&&!d.length)&&(d=null)}return o.length?o:null};Pa.prototype.supports=function(n){if(!n.script)return!1;this.getScriptFeatures(n.script);var e=this.features.hasOwnProperty(n.script);if(!n.tag)return e;var t=this.features[n.script].some(function(r){return r.tag===n.tag});return e&&t};Pa.prototype.getLookupSubtables=function(n){return n.subtables||null};Pa.prototype.getLookupByIndex=function(n){var e=this.font.tables.gsub.lookups;return e[n]||null};Pa.prototype.getFeatureLookups=function(n){return n.lookupListIndexes.map(this.getLookupByIndex.bind(this))};Pa.prototype.getFeature=function(e){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(e.script)||this.getScriptFeatures(e.script);var t=this.features[e.script];return t?t.tags[e.tag]?this.features[e.script].tags[e.tag]:null:{FAIL:"No feature for script "+e.script}};function ree(n){var e=n.current,t=n.get(-1);return t===null&&sf(e)||!sf(t)&&sf(e)}function iee(n){var e=n.get(1);return e===null||!sf(e)}var oee={startCheck:ree,endCheck:iee};function see(n){var e=n.current,t=n.get(-1);return(sf(e)||df(e))&&!sf(t)}function aee(n){var e=n.get(1);switch(!0){case e===null:return!0;case(!sf(e)&&!df(e)):var t=KQ(e);if(!t)return!0;if(t){var r=!1;if(r=n.lookahead.some(function(i){return sf(i)||df(i)}),!r)return!0}break;default:return!1}}var lee={startCheck:see,endCheck:aee};function uee(n,e,t){e[t].setState(n.tag,n.substitution)}function cee(n,e,t){e[t].setState(n.tag,n.substitution)}function hee(n,e,t){n.substitution.forEach(function(r,i){var o=e[t+i];o.setState(n.tag,r)})}function fee(n,e,t){var r=e[t];r.setState(n.tag,n.substitution.ligGlyph);for(var i=n.substitution.components.length,o=0;o<i;o++)r=e[t+o+1],r.setState("deleted",!0)}var EL={11:uee,12:cee,63:hee,41:fee};function zA(n,e,t){n instanceof dd&&EL[n.id]&&EL[n.id](n,e,t)}function dee(n){for(var e=[].concat(n.backtrack),t=e.length-1;t>=0;t--){var r=e[t],i=VD(r),o=df(r);if(!i&&!o)return!0;if(i)return!1}return!1}function pee(n){if(VD(n.current))return!1;for(var e=0;e<n.lookahead.length;e++){var t=n.lookahead[e],r=df(t);if(!r)return!0}return!1}function mee(n){var e=this,t="arab",r=this.featuresTags[t],i=this.tokenizer.getRangeTokens(n);if(i.length!==1){var o=new Xl(i.map(function(a){return a.getState("glyphIndex")}),0),s=new Xl(i.map(function(a){return a.char}),0);i.forEach(function(a,l){if(!df(a.char)){o.setCurrentIndex(l),s.setCurrentIndex(l);var u=0;dee(s)&&(u|=1),pee(s)&&(u|=2);var c;switch(u){case 1:c="fina";break;case 2:c="init";break;case 3:c="medi";break}if(r.indexOf(c)!==-1){var h=e.query.lookupFeature({tag:c,script:t,contextParams:o});if(h instanceof Error)return console.info(h.message);h.forEach(function(f,d){f instanceof dd&&(zA(f,i,d),o.context[d]=f.substitution)})}}})}}function AL(n,e){var t=n.map(function(r){return r.activeState.value});return new Xl(t,e||0)}function gee(n){var e=this,t="arab",r=this.tokenizer.getRangeTokens(n),i=AL(r);i.context.forEach(function(o,s){i.setCurrentIndex(s);var a=e.query.lookupFeature({tag:"rlig",script:t,contextParams:i});a.length&&(a.forEach(function(l){return zA(l,r,s)}),i=AL(r))})}function vee(n){var e=n.current,t=n.get(-1);return t===null&&ox(e)||!ox(t)&&ox(e)}function yee(n){var e=n.get(1);return e===null||!ox(e)}var xee={startCheck:vee,endCheck:yee};function TL(n,e){var t=n.map(function(r){return r.activeState.value});return new Xl(t,e||0)}function wee(n){var e=this,t="latn",r=this.tokenizer.getRangeTokens(n),i=TL(r);i.context.forEach(function(o,s){i.setCurrentIndex(s);var a=e.query.lookupFeature({tag:"liga",script:t,contextParams:i});a.length&&(a.forEach(function(l){return zA(l,r,s)}),i=TL(r))})}function tu(n){this.baseDir=n||"ltr",this.tokenizer=new Oi,this.featuresTags={}}tu.prototype.setText=function(n){this.text=n};tu.prototype.contextChecks={latinWordCheck:xee,arabicWordCheck:oee,arabicSentenceCheck:lee};function Sb(n){var e=this.contextChecks[n+"Check"];return this.tokenizer.registerContextChecker(n,e.startCheck,e.endCheck)}function See(){return Sb.call(this,"latinWord"),Sb.call(this,"arabicWord"),Sb.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function _ee(){var n=this,e=this.tokenizer.getContextRanges("arabicSentence");e.forEach(function(t){var r=n.tokenizer.getRangeTokens(t);n.tokenizer.replaceRange(t.startIndex,t.endOffset,r.reverse())})}tu.prototype.registerFeatures=function(n,e){var t=this,r=e.filter(function(i){return t.query.supports({script:n,tag:i})});this.featuresTags.hasOwnProperty(n)?this.featuresTags[n]=this.featuresTags[n].concat(r):this.featuresTags[n]=r};tu.prototype.applyFeatures=function(n,e){if(!n)throw new Error("No valid font was provided to apply features");this.query||(this.query=new Pa(n));for(var t=0;t<e.length;t++){var r=e[t];this.query.supports({script:r.script})&&this.registerFeatures(r.script,r.tags)}};tu.prototype.registerModifier=function(n,e,t){this.tokenizer.registerModifier(n,e,t)};function HA(){if(this.tokenizer.registeredModifiers.indexOf("glyphIndex")===-1)throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function bee(){var n=this,e="arab";if(this.featuresTags.hasOwnProperty(e)){HA.call(this);var t=this.tokenizer.getContextRanges("arabicWord");t.forEach(function(r){mee.call(n,r)})}}function Mee(){var n=this,e="arab";if(this.featuresTags.hasOwnProperty(e)){var t=this.featuresTags[e];if(t.indexOf("rlig")!==-1){HA.call(this);var r=this.tokenizer.getContextRanges("arabicWord");r.forEach(function(i){gee.call(n,i)})}}}function Eee(){var n=this,e="latn";if(this.featuresTags.hasOwnProperty(e)){var t=this.featuresTags[e];if(t.indexOf("liga")!==-1){HA.call(this);var r=this.tokenizer.getContextRanges("latinWord");r.forEach(function(i){wee.call(n,i)})}}}tu.prototype.checkContextReady=function(n){return!!this.tokenizer.getContext(n)};tu.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(bee.call(this),Mee.call(this)),this.checkContextReady("latinWord")&&Eee.call(this),this.checkContextReady("arabicSentence")&&_ee.call(this)};tu.prototype.processText=function(n){(!this.text||this.text!==n)&&(this.setText(n),See.call(this),this.applyFeaturesToContexts())};tu.prototype.getBidiText=function(n){return this.processText(n),this.tokenizer.getText()};tu.prototype.getTextGlyphs=function(n){this.processText(n);for(var e=[],t=0;t<this.tokenizer.tokens.length;t++){var r=this.tokenizer.tokens[t];if(!r.state.deleted){var i=r.activeState.value;e.push(Array.isArray(i)?i[0]:i)}}return e};function Zr(n){n=n||{},n.tables=n.tables||{},n.empty||(y0(n.familyName,"When creating a new Font object, familyName is required."),y0(n.styleName,"When creating a new Font object, styleName is required."),y0(n.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),y0(n.ascender,"When creating a new Font object, ascender is required."),y0(n.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:n.familyName||" "},fontSubfamily:{en:n.styleName||" "},fullName:{en:n.fullName||n.familyName+" "+n.styleName},postScriptName:{en:n.postScriptName||(n.familyName+n.styleName).replace(/\s/g,"")},designer:{en:n.designer||" "},designerURL:{en:n.designerURL||" "},manufacturer:{en:n.manufacturer||" "},manufacturerURL:{en:n.manufacturerURL||" "},license:{en:n.license||" "},licenseURL:{en:n.licenseURL||" "},version:{en:n.version||"Version 0.1"},description:{en:n.description||" "},copyright:{en:n.copyright||" "},trademark:{en:n.trademark||" "}},this.unitsPerEm=n.unitsPerEm||1e3,this.ascender=n.ascender,this.descender=n.descender,this.createdTimestamp=n.createdTimestamp,this.tables=Object.assign(n.tables,{os2:Object.assign({usWeightClass:n.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:n.widthClass||this.usWidthClasses.MEDIUM,fsSelection:n.fsSelection||this.fsSelectionValues.REGULAR},n.tables.os2)})),this.supported=!0,this.glyphs=new Nu.GlyphSet(this,n.glyphs||[]),this.encoding=new wD(this),this.position=new k1(this),this.substitution=new Ca(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new UD(this)}})}Zr.prototype.hasChar=function(n){return this.encoding.charToGlyphIndex(n)!==null};Zr.prototype.charToGlyphIndex=function(n){return this.encoding.charToGlyphIndex(n)};Zr.prototype.charToGlyph=function(n){var e=this.charToGlyphIndex(n),t=this.glyphs.get(e);return t||(t=this.glyphs.get(0)),t};Zr.prototype.updateFeatures=function(n){return this.defaultRenderOptions.features.map(function(e){return e.script==="latn"?{script:"latn",tags:e.tags.filter(function(t){return n[t]})}:e})};Zr.prototype.stringToGlyphs=function(n,e){var t=this,r=new tu,i=function(h){return t.charToGlyphIndex(h.char)};r.registerModifier("glyphIndex",null,i);var o=e?this.updateFeatures(e.features):this.defaultRenderOptions.features;r.applyFeatures(this,o);for(var s=r.getTextGlyphs(n),a=s.length,l=new Array(a),u=this.glyphs.get(0),c=0;c<a;c+=1)l[c]=this.glyphs.get(s[c])||u;return l};Zr.prototype.nameToGlyphIndex=function(n){return this.glyphNames.nameToGlyphIndex(n)};Zr.prototype.nameToGlyph=function(n){var e=this.nameToGlyphIndex(n),t=this.glyphs.get(e);return t||(t=this.glyphs.get(0)),t};Zr.prototype.glyphIndexToName=function(n){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(n):""};Zr.prototype.getKerningValue=function(n,e){n=n.index||n,e=e.index||e;var t=this.position.defaultKerningTables;return t?this.position.getKerningValue(t,n,e):this.kerningPairs[n+","+e]||0};Zr.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]};Zr.prototype.forEachGlyph=function(n,e,t,r,i,o){e=e!==void 0?e:0,t=t!==void 0?t:0,r=r!==void 0?r:72,i=Object.assign({},this.defaultRenderOptions,i);var s=1/this.unitsPerEm*r,a=this.stringToGlyphs(n,i),l;if(i.kerning){var u=i.script||this.position.getDefaultScriptName();l=this.position.getKerningTables(u,i.language)}for(var c=0;c<a.length;c+=1){var h=a[c];if(o.call(this,h,e,t,r,i),h.advanceWidth&&(e+=h.advanceWidth*s),i.kerning&&c<a.length-1){var f=l?this.position.getKerningValue(l,h.index,a[c+1].index):this.getKerningValue(h,a[c+1]);e+=f*s}i.letterSpacing?e+=i.letterSpacing*r:i.tracking&&(e+=i.tracking/1e3*r)}return e};Zr.prototype.getPath=function(n,e,t,r,i){var o=new _o;return this.forEachGlyph(n,e,t,r,i,function(s,a,l,u){var c=s.getPath(a,l,u,i,this);o.extend(c)}),o};Zr.prototype.getPaths=function(n,e,t,r,i){var o=[];return this.forEachGlyph(n,e,t,r,i,function(s,a,l,u){var c=s.getPath(a,l,u,i,this);o.push(c)}),o};Zr.prototype.getAdvanceWidth=function(n,e,t){return this.forEachGlyph(n,0,0,e,t,function(){})};Zr.prototype.draw=function(n,e,t,r,i,o){this.getPath(e,t,r,i,o).draw(n)};Zr.prototype.drawPoints=function(n,e,t,r,i,o){this.forEachGlyph(e,t,r,i,o,function(s,a,l,u){s.drawPoints(n,a,l,u)})};Zr.prototype.drawMetrics=function(n,e,t,r,i,o){this.forEachGlyph(e,t,r,i,o,function(s,a,l,u){s.drawMetrics(n,a,l,u)})};Zr.prototype.getEnglishName=function(n){var e=this.names[n];if(e)return e.en};Zr.prototype.validate=function(){var n=this;function e(r,i){}function t(r){var i=n.getEnglishName(r);i&&i.trim().length>0}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm>0};Zr.prototype.toTables=function(){return hJ.fontToTable(this)};Zr.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()};Zr.prototype.toArrayBuffer=function(){for(var n=this.toTables(),e=n.encode(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),i=0;i<e.length;i++)r[i]=e[i];return t};Zr.prototype.download=function(n){var e=this.getEnglishName("fontFamily"),t=this.getEnglishName("fontSubfamily");n=n||e.replace(/\s/g,"")+"-"+t+".otf";var r=this.toArrayBuffer();if(dJ())if(window.URL=window.URL||window.webkitURL,window.URL){var i=new DataView(r),o=new Blob([i],{type:"font/opentype"}),s=document.createElement("a");s.href=window.URL.createObjectURL(o),s.download=n;var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!1),s.dispatchEvent(a)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var l=require("fs"),u=pJ(r);l.writeFileSync(n,u)}};Zr.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};Zr.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};Zr.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var Wc=new Array(10);Wc[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{posFormat:1,coverage:this.parsePointer(lt.coverage),value:this.parseValueRecord()};if(t===2)return{posFormat:2,coverage:this.parsePointer(lt.coverage),values:this.parseValueRecordList()};Fn.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")};Wc[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();Fn.assert(t===1||t===2,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var r=this.parsePointer(lt.coverage),i=this.parseUShort(),o=this.parseUShort();if(t===1)return{posFormat:t,coverage:r,valueFormat1:i,valueFormat2:o,pairSets:this.parseList(lt.pointer(lt.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(i),value2:this.parseValueRecord(o)}})))};if(t===2){var s=this.parsePointer(lt.classDef),a=this.parsePointer(lt.classDef),l=this.parseUShort(),u=this.parseUShort();return{posFormat:t,coverage:r,valueFormat1:i,valueFormat2:o,classDef1:s,classDef2:a,class1Count:l,class2Count:u,classRecords:this.parseList(l,lt.list(u,function(){return{value1:this.parseValueRecord(i),value2:this.parseValueRecord(o)}}))}}};Wc[3]=function(){return{error:"GPOS Lookup 3 not supported"}};Wc[4]=function(){return{error:"GPOS Lookup 4 not supported"}};Wc[5]=function(){return{error:"GPOS Lookup 5 not supported"}};Wc[6]=function(){return{error:"GPOS Lookup 6 not supported"}};Wc[7]=function(){return{error:"GPOS Lookup 7 not supported"}};Wc[8]=function(){return{error:"GPOS Lookup 8 not supported"}};Wc[9]=function(){return{error:"GPOS Lookup 9 not supported"}};new Array(10);const Rd=1e-8,Pm=(n,e)=>ws(n,e,Rd*10);function Aee(n,e){const t=n.orientation==="clockwise"?-e:e,r=n.curves.map(u=>({offset:HM(u,t),original:u})),i=[];let o=null,s=r.at(-1);if(!s)return[];if(i.length===1)return i;const a=u=>{o?u.offset instanceof Fi?i.push(u.offset):Pm(u.offset.firstPoint,u.offset.lastPoint)||i.push(C1(u.offset.firstPoint,u.offset.lastPoint)):o=u},l=function*(){for(const u of r.slice(0,-1))yield u;if(!o)throw new Error("Bug in the offset algorithm");yield o};for(const u of l()){const c=s.offset.lastPoint,h=u.offset.firstPoint;if(Pm(c,h)){a(s),s=u;continue}let f=[];if(s.offset instanceof Fi&&u.offset instanceof Fi){const{intersections:v,commonSegmentsPoints:y}=T1(s.offset,u.offset,Rd/100);f=[...v,...y]}if(f.length>0){let v=f[0];if(f.length>1){const g=s==null?void 0:s.original.lastPoint,S=f.map(_=>CY(_,g));v=f[S.indexOf(Math.min(...S))]}const y=s.offset.splitAt([v],Rd)[0],x=u.offset.splitAt([v],Rd).at(-1);if(!x)throw new Error("Bug in the splitting algo in offset");a({offset:y,original:s.original}),s={offset:x,original:u.original};continue}const d=X6(c,h,s.original.lastPoint);a(s),i.push(d),s=u}return a(s),i}function Tee(n,e){const t=Aee(n,e);if(t.length<2)return null;const r=new Map,i=(u,c)=>{const h=r.get(u)||[];r.set(u,[...h,...c])};if(t.forEach((u,c)=>{t.slice(c+1).forEach((h,f)=>{const{intersections:d,commonSegmentsPoints:v}=T1(u,h,Rd),y=[...d,...v].filter(x=>{const g=Pm(x,u.firstPoint)||Pm(x,u.lastPoint),S=Pm(x,h.firstPoint)||Pm(x,h.lastPoint);return!(g&&S)});y.length&&(i(c,y),i(f+c+1,y))})}),!r.size){const u=new tr(t);return n.intersects(u)?null:u}const s=t.flatMap((u,c)=>{if(!r.has(c))return u;const h=r.get(c)||[];return u.splitAt(h,Rd*100)}).filter(u=>!n.curves.find(h=>h.distanceFrom(u)<Math.abs(e)-Rd));if(!s.length)return null;const l=VY(s).filter(u=>u.length>1).map(u=>new tr(u)).filter(u=>u.isClosed());return l.length?l.length===1?l[0]:new Un(l):null}const CL=n=>{let e=n[0];for(let t=1;t<n.length;t++)e=Ec(e,n[t]);return e};function sx(n,e){if(n instanceof tr)return Tee(n,e);if(n instanceof Un)return CL(n.blueprints.map(t=>sx(t,e)));if(n instanceof Lr){const t=CL(n.blueprints.slice(1).map(r=>sx(r,e)));return Vh(sx(n.blueprints[0],e),t)}return null}function PL(n,e,t,r){let i=()=>!0;r&&(i=r.shouldKeep.bind(r));const o=[e.curves[0]],s=(l,u)=>{i({firstCurve:l,secondCurve:u,point:l.lastPoint})?o.push(...n(l,u,t)):o.push(l,u)};e.curves.slice(1).forEach(l=>{const u=o.pop();if(!u)throw new Error("Bug in the blueprint filletting algo");s(u,l)});const a=o.at(-1);if(!a)throw new Error("Bug in the blueprint corner algo");if(ws(o[0].firstPoint,a.lastPoint)&&o.length>1){const l=o.pop(),u=o.shift();if(!l||!u)throw new Error("Bug in the blueprint filletting algo");s(l,u)}return new tr(o)}function GA(n,e,t,r){if(e instanceof tr)return PL(n,e,t,r);if(e instanceof Lr)return new Lr(e.blueprints.map(i=>PL(n,i,t,r)));if(e instanceof Un){const i=e.blueprints.map(o=>GA(n,o,t,r)).filter(o=>o!==null);return new Un(i)}return null}function Cee(n,e,t){return GA(GM,n,e,t)}function Pee(n,e,t){return GA(VM,n,e,t)}function QM(n,e){return n instanceof tr?new tr(Yx(n.curves,e)):n instanceof Lr?new Lr(n.blueprints.map(t=>QM(t,e))):n instanceof Un?new Un(n.blueprints.map(t=>QM(t,e))):n}class io{constructor(e=null){this.innerShape=e}clone(){var e;return new io(((e=this.innerShape)==null?void 0:e.clone())||null)}get boundingBox(){return this.innerShape?this.innerShape.boundingBox:new A1}stretch(e,t,r){return this.innerShape?new io(this.innerShape.stretch(e,t,r)):new io}get repr(){return this.innerShape===null?"=== empty shape":this.innerShape.repr}rotate(e,t){return this.innerShape?new io(this.innerShape.rotate(e,t)):new io}translate(e,t=0){return this.innerShape?new io(this.innerShape.translate(e,t)):new io}scale(e,t){return this.innerShape?new io(this.innerShape.scale(e,t)):new io}mirror(e,t,r){return this.innerShape?new io(this.innerShape.mirror(e,t,r)):new io}cut(e){return new io(Vh(this.innerShape,e.innerShape))}fuse(e){return new io(Ec(this.innerShape,e.innerShape))}intersect(e){return new io(F0(this.innerShape,e.innerShape))}fillet(e,t){const r=t&&t(new Jx);return new io(Cee(this.innerShape,e,r))}chamfer(e,t){const r=t&&t(new Jx);return new io(Pee(this.innerShape,e,r))}sketchOnPlane(e,t){if(!this.innerShape)throw new Error("Trying to sketch an empty drawing");return this.innerShape.sketchOnPlane(e,t)}sketchOnFace(e,t){if(!this.innerShape)throw new Error("Trying to sketch an empty drawing");return this.innerShape.sketchOnFace(e,t)}toSVG(e){var t;return((t=this.innerShape)==null?void 0:t.toSVG(e))||""}toSVGViewBox(e=1){var t;return((t=this.innerShape)==null?void 0:t.toSVGViewBox(e))||""}toSVGPaths(){var e;return((e=this.innerShape)==null?void 0:e.toSVGPaths())||[]}offset(e){return new io(sx(this.innerShape,e))}approximate(e,t={}){if(e!=="svg")throw new Error("Only 'svg' is supported for now");return new io(QM(this.innerShape,t))}get blueprint(){if(!(this.innerShape instanceof tr)){if(this.innerShape instanceof Un&&this.innerShape.blueprints.length===1&&this.innerShape.blueprints[0]instanceof tr)return this.innerShape.blueprints[0];throw new Error("This drawing is not a blueprint")}return this.innerShape}}class Ree extends vZ{constructor(e=[0,0]){super(),this.pointer=e,this.firstPoint=e,this.pendingCurves=[]}done(){return new io(new tr(this.pendingCurves))}close(){return this._closeSketch(),this.done()}closeWithMirror(){return this._closeWithMirror(),this.close()}closeWithCustomCorner(e,t="fillet"){return this._closeSketch(),this._customCornerLastWithFirst(e,t),this.done()}}function Lee(n){const e=new Ree;return n&&e.movePointerTo(n),e}function WD(n,e){return typeof n!="number"||isNaN(n)?{valid:!1,message:`Parameter '${e}' must be a number`}:{valid:!0}}function kee(n,e){return n<=0?{valid:!1,message:`Parameter '${e}' must be positive`}:{valid:!0}}function Iee(n,e,t){return n>=e?{valid:!1,message:`${t} (${n}) must be less than ${e}`}:{valid:!0}}function nu(n,e){const t=WD(n,e);return t.valid?kee(n,e):t}function Nee(n,e,t){const r=WD(n,t);return r.valid?Iee(n,e,t):r}function ru(n,e){return t=>{const r=[];for(const i of e){const o=n(t[i],i);o.valid||r.push(o.message)}return{valid:r.length===0,errors:r}}}function RL(n,e){return t=>{const r=t[n],i=t[e],o=Nee(r,i,n);return o.valid?{valid:!0,errors:[]}:{valid:!1,errors:[o.message]}}}function Hm({width:n=100,depth:e=100,height:t=100}){if(n===0&&e===0&&t===0)return pr([0,0,0],[1e-7,1e-7,1e-7]);const r=n/2,i=e/2;return pr([-r,-i,0],[r,i,t])}const Fee={name:"Cuboid",create:Hm,params:[{name:"width",defaultValue:100},{name:"depth",defaultValue:100},{name:"height",defaultValue:100}],validators:[ru(nu,["width","depth","height"])],hasExplosion:!1};function Dee({radius:n=50}){return eZ(n)}const Oee={name:"Sphere",create:Dee,params:[{name:"radius",defaultValue:50}],validators:[ru(nu,["radius"])],hasExplosion:!1};function jD({radius:n=50,height:e=100}){return fd(n,e,[0,0,0],[0,0,-1])}const Bee={name:"Cylinder",create:jD,params:[{name:"radius",defaultValue:50},{name:"height",defaultValue:100}],validators:[ru(nu,["radius","height"])],hasExplosion:!1};function Uee({aLength:n=80,bLength:e=50,cLength:t=30}){return rZ(n,e,t)}const zee={name:"Ellipsoid",create:Uee,params:[{name:"aLength",defaultValue:80},{name:"bLength",defaultValue:50},{name:"cLength",defaultValue:30}],validators:[ru(nu,["aLength","bLength","cLength"])],hasExplosion:!1},qD=n=>n.boundingBox.center;function $D(n,e,t){return t.map(({position:r,direction:i,orientation:o})=>{const s=n(),a=e(s);let l=s.translate([r[0]-a[0],r[1]-a[1],r[2]-a[2]]);const u=[0,0,1],c=new Rt(o||i);if(c.Length>0){const h=new Rt(u).cross(c);if(h.Length>1e-10){const f=new Rt(u).getAngle(c);l=l.rotate(f,r,h)}else c.dot(new Rt(u))<0&&(l=l.rotate(180,r,[1,0,0]))}return l})}function XD(n,e,t,r,i,o=0,s=0,a=1){const l=new Rt([o,s,a]).normalized();return Array.from({length:e*t},(u,c)=>{const h=Math.floor(c/t),d=c%t*r,v=h*i,x=new Fs(new Rt(n.origin),new Rt(n.xDirection).normalized(),new Rt(n.normal).normalized()).toWorldCoords([d,v,0]);return{position:[x.x,x.y,x.z],direction:[n.normal[0],n.normal[1],n.normal[2]],orientation:[l.x,l.y,l.z]}})}function Hee(n,e,t,r=0,i=0,o=1){return XD({origin:n,xDirection:e,normal:(()=>{const s=new Rt(e),a=new Rt([0,0,1]),l=Math.abs(s.normalized().dot(a))>.99?new Rt([1,0,0]):s.cross(a).normalized();return[l.x,l.y,l.z]})()},1,t,t>1?new Rt(e).Length/(t-1):0,0,r,i,o)}function Gee({count:n=5,vectorX:e=0,vectorY:t=50,vectorZ:r=50,originX:i=0,originY:o=0,originZ:s=0,boxWidth:a=10,boxDepth:l=10,boxHeight:u=10,orientationX:c=0,orientationY:h=0,orientationZ:f=1}){return Eu($D(()=>Hm({width:a,depth:l,height:u}),qD,Hee([i,o,s],[e,t,r],n,c,h,f)))}const Vee={name:"DiagonalCuboidPattern",create:Gee,params:[{name:"count",defaultValue:5},{name:"vectorX",defaultValue:0},{name:"vectorY",defaultValue:50},{name:"vectorZ",defaultValue:50},{name:"originX",defaultValue:0},{name:"originY",defaultValue:0},{name:"originZ",defaultValue:0},{name:"boxWidth",defaultValue:10},{name:"boxDepth",defaultValue:10},{name:"boxHeight",defaultValue:10},{name:"orientationX",defaultValue:0},{name:"orientationY",defaultValue:0},{name:"orientationZ",defaultValue:1}],validators:[ru(nu,["count","boxWidth","boxDepth","boxHeight"])],hasExplosion:!1};function Wee({originX:n=0,originY:e=0,originZ:t=0,directionX:r=1,directionY:i=0,directionZ:o=0,normalX:s=0,normalY:a=0,normalZ:l=1,rowCount:u=3,colCount:c=3,xSpacing:h=30,ySpacing:f=30,boxWidth:d=10,boxDepth:v=10,boxHeight:y=10,orientationX:x=0,orientationY:g=0,orientationZ:S=1}){return Eu($D(()=>Hm({width:d,depth:v,height:y}),qD,XD({origin:[n,e,t],xDirection:[r,i,o],normal:[s,a,l]},u,c,h,f,x,g,S)))}const jee={name:"RectangularCuboidGrid",create:Wee,params:[{name:"originX",defaultValue:0},{name:"originY",defaultValue:0},{name:"originZ",defaultValue:0},{name:"directionX",defaultValue:1},{name:"directionY",defaultValue:0},{name:"directionZ",defaultValue:0},{name:"normalX",defaultValue:0},{name:"normalY",defaultValue:0},{name:"normalZ",defaultValue:1},{name:"rowCount",defaultValue:3},{name:"colCount",defaultValue:3},{name:"xSpacing",defaultValue:30},{name:"ySpacing",defaultValue:30},{name:"boxWidth",defaultValue:10},{name:"boxDepth",defaultValue:10},{name:"boxHeight",defaultValue:10},{name:"orientationX",defaultValue:0},{name:"orientationY",defaultValue:0},{name:"orientationZ",defaultValue:1}],validators:[ru(nu,["rowCount","colCount","xSpacing","ySpacing","boxWidth","boxDepth","boxHeight"])],hasExplosion:!1};function YD({depth:n=100,flangeXLenght:e=50,flangeYLenght:t=50,thickness:r=5}){const i=pr([0,-n/2,0],[e,n/2,r]),o=pr([0,-n/2,0],[r,n/2,t]);return i.fuse(o)}const qee={name:"LProfile",create:YD,params:[{name:"depth",defaultValue:100},{name:"flangeXLenght",defaultValue:50},{name:"flangeYLenght",defaultValue:50},{name:"thickness",defaultValue:5}],validators:[ru(nu,["depth","flangeXLenght","flangeYLenght","thickness"]),RL("thickness","flangeXLenght"),RL("thickness","flangeYLenght")],hasExplosion:!1};function ZD({bottomRadius:n=50,topRadius:e=25,height:t=100}){return WR(n,{plane:"XY",origin:[0,0,0]}).loftWith(WR(e,{plane:"XY",origin:[0,0,-t]}),{ruled:!0})}const $ee={name:"Frustum",create:ZD,params:[{name:"bottomRadius",defaultValue:50},{name:"topRadius",defaultValue:25},{name:"height",defaultValue:100}],validators:[ru(nu,["bottomRadius","topRadius","height"])],hasExplosion:!1};function KD({bottomRadius:n=50,topRadius:e=25,frustumHeight:t=80,cylinderHeight:r=40}){return ZD({bottomRadius:n,topRadius:e,height:t}).fuse(fd(e,r,[0,0,-t],[0,0,-1]))}const Xee={name:"Drill",create:KD,params:[{name:"bottomRadius",defaultValue:50},{name:"topRadius",defaultValue:25},{name:"frustumHeight",defaultValue:80},{name:"cylinderHeight",defaultValue:40}],validators:[ru(nu,["bottomRadius","topRadius","frustumHeight","cylinderHeight"])],hasExplosion:!1};function Yee(n,e){return{main:n,helperSpaces:e}}const Zn={FRONT:"front",BACK:"back",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom"},er={FRONT_LEFT:"front_left",FRONT_RIGHT:"front_right",FRONT_TOP:"front_top",FRONT_BOTTOM:"front_bottom",BACK_LEFT:"back_left",BACK_RIGHT:"back_right",BACK_TOP:"back_top",BACK_BOTTOM:"back_bottom",LEFT_TOP:"left_top",LEFT_BOTTOM:"left_bottom",RIGHT_TOP:"right_top",RIGHT_BOTTOM:"right_bottom"};function w2(n){let e;switch(n){case Zn.FRONT:e=new Rt([0,-1,0]);break;case Zn.BACK:e=new Rt([0,1,0]);break;case Zn.LEFT:e=new Rt([-1,0,0]);break;case Zn.RIGHT:e=new Rt([1,0,0]);break;case Zn.TOP:e=new Rt([0,0,1]);break;case Zn.BOTTOM:e=new Rt([0,0,-1]);break;default:throw new Error(`Unknown face identifier: ${n}`)}return e}function JD(n,e){const[[t,r,i],[o,s,a]]=n.bounds;let l;switch(e){case er.FRONT_TOP:l=new Rt([t,r,a]);break;case er.FRONT_BOTTOM:l=new Rt([t,r,i]);break;case er.BACK_TOP:l=new Rt([t,s,a]);break;case er.BACK_BOTTOM:l=new Rt([t,s,i]);break;case er.LEFT_TOP:l=new Rt([t,r,a]);break;case er.LEFT_BOTTOM:l=new Rt([t,r,i]);break;case er.RIGHT_TOP:l=new Rt([o,r,a]);break;case er.RIGHT_BOTTOM:l=new Rt([o,r,i]);break;case er.FRONT_LEFT:l=new Rt([t,r,i]);break;case er.FRONT_RIGHT:l=new Rt([o,r,i]);break;case er.BACK_LEFT:l=new Rt([t,s,i]);break;case er.BACK_RIGHT:l=new Rt([o,s,i]);break;default:throw new Error(`Unknown edge identifier: ${e}`)}return l}function QD(n,e){const[[t,r,i],[o,s,a]]=n.bounds;let l;switch(e){case er.FRONT_TOP:l=new Rt([o,r,a]);break;case er.FRONT_BOTTOM:l=new Rt([o,r,i]);break;case er.BACK_TOP:l=new Rt([o,s,a]);break;case er.BACK_BOTTOM:l=new Rt([o,s,i]);break;case er.LEFT_TOP:l=new Rt([t,s,a]);break;case er.LEFT_BOTTOM:l=new Rt([t,s,i]);break;case er.RIGHT_TOP:l=new Rt([o,s,a]);break;case er.RIGHT_BOTTOM:l=new Rt([o,s,i]);break;case er.FRONT_LEFT:l=new Rt([t,r,a]);break;case er.FRONT_RIGHT:l=new Rt([o,r,a]);break;case er.BACK_LEFT:l=new Rt([t,s,a]);break;case er.BACK_RIGHT:l=new Rt([o,s,a]);break;default:throw new Error(`Unknown edge identifier: ${e}`)}return l}function Zee(n){switch(n){case er.FRONT_LEFT:return[Zn.FRONT,Zn.LEFT];case er.FRONT_RIGHT:return[Zn.FRONT,Zn.RIGHT];case er.FRONT_TOP:return[Zn.FRONT,Zn.TOP];case er.FRONT_BOTTOM:return[Zn.FRONT,Zn.BOTTOM];case er.BACK_LEFT:return[Zn.BACK,Zn.LEFT];case er.BACK_RIGHT:return[Zn.BACK,Zn.RIGHT];case er.BACK_TOP:return[Zn.BACK,Zn.TOP];case er.BACK_BOTTOM:return[Zn.BACK,Zn.BOTTOM];case er.LEFT_TOP:return[Zn.LEFT,Zn.TOP];case er.LEFT_BOTTOM:return[Zn.LEFT,Zn.BOTTOM];case er.RIGHT_TOP:return[Zn.RIGHT,Zn.TOP];case er.RIGHT_BOTTOM:return[Zn.RIGHT,Zn.BOTTOM];default:throw new Error(`Unknown edge identifier: ${n}`)}}function Kee(n,e,t=.5,r=.5){const[[i,o,s],[a,l,u]]=n.bounds,c=Math.max(0,Math.min(1,t)),h=Math.max(0,Math.min(1,r));let f;switch(e){case Zn.FRONT:f=new Rt([i+(a-i)*c,o,s+(u-s)*h]);break;case Zn.BACK:f=new Rt([i+(a-i)*c,l,s+(u-s)*h]);break;case Zn.LEFT:f=new Rt([i,o+(l-o)*c,s+(u-s)*h]);break;case Zn.RIGHT:f=new Rt([a,o+(l-o)*c,s+(u-s)*h]);break;case Zn.TOP:f=new Rt([i+(a-i)*c,o+(l-o)*h,u]);break;case Zn.BOTTOM:f=new Rt([i+(a-i)*c,o+(l-o)*h,s]);break;default:throw new Error(`Unknown face identifier: ${e}`)}return f}function Jee(n,e,t=.5){const r=Math.max(0,Math.min(1,t)),i=JD(n,e),o=QD(n,e);return new Rt([i.x+(o.x-i.x)*r,i.y+(o.y-i.y)*r,i.z+(o.z-i.z)*r])}function Qee(n,e){const{type:t,element:r,params:i={}}=e;switch(t){case"face":return Kee(n,r,i.u,i.v);case"edge":return Jee(n,r,i.t);case"corner":if(r.includes("START")){const o=r.replace("_START","");return JD(n,o)}else if(r.includes("END")){const o=r.replace("_END","");return QD(n,o)}else throw new Error(`Invalid corner identifier: ${r}`);case"center":return new Rt(n.center);default:throw new Error(`Unknown position type: ${t}`)}}function ete(n){const e=n.normalized(),t=Math.abs(e.x),r=Math.abs(e.y),i=Math.abs(e.z);let o;return t<=r&&t<=i?o=new Rt([0,e.z,-e.y]):r<=t&&r<=i?o=new Rt([e.z,0,-e.x]):o=new Rt([e.y,-e.x,0]),o.normalized()}function S2(n,e,t,r={}){const i=Qee(n.boundingBox,e);let o;r.normal?o=new Rt(r.normal):o=tte(n,e,r);let s;r.xDir?s=new Rt(r.xDir):s=ete(o);const a=new Hd;a.coordSystemChange({origin:i.toTuple(),zDir:o.toTuple(),xDir:s.toTuple()},"reference");const l=di(a.transform(t.wrapped));return a.delete(),o.delete(),s.delete(),i.delete(),l}function tte(n,e,t={}){const{type:r,element:i}=e;switch(r){case"face":return w2(i);case"edge":if(t.faceForEdge)return w2(t.faceForEdge);{const o=Zee(i);return w2(o[0])}case"corner":return t.faceForCorner?w2(t.faceForCorner):new Rt([0,0,1]);case"center":default:return new Rt([0,0,1])}}function nd(n,e,t,r=!1){return r?di(n.wrapped).mirror(e,t):n.mirror(e,t)}const eO=[{id:"ST001",name:"Stringer"},{id:"LP001",name:"L-Profile"},{id:"SS001",name:"Side Stringer"}];function nte({width:n=50,depth:e=100,height:t=200,showHelper:r=!0,explosionFactor:i=0}){const o=Hm({width:n,depth:e,height:t}),s=Math.round(t/17.5)-1;if(s<=0)return Yee(Eu([]),r?[o]:[]);const a=t/(s+1),l=s>1?(e-28)/(s-1):0,u=Hm({width:n-1,depth:20,height:.5}),c=u.boundingBox.center,h=S2(u,{type:"face",element:Zn.TOP,params:{u:1.5/(n-1),v:2.25/20}},KD({bottomRadius:1.2,topRadius:.8,frustumHeight:.5*.8,cylinderHeight:.5*.2})),f=u.cut(h).cut(nd(h,"XZ",c,!0)).cut(nd(h,"YZ",c,!0)).cut(nd(nd(h,"XZ",c,!0),"YZ",c,!0)),d=f.clone(),v=YD({depth:20,flangeXLenght:4.5,flangeYLenght:4.5,thickness:.5}),y=v.boundingBox.center,x=S2(v,{type:"face",element:Zn.BOTTOM,params:{u:1.5/4.5,v:2.25/20}},jD({radius:.800001,height:.5})),g=v.cut(x).cut(nd(x,"XZ",y,!0)),S=g.clone(),_=S2(f,{type:"edge",element:er.LEFT_BOTTOM,params:{t:.5}},g,{normal:[0,0,-1],xDir:[1,0,0]}),E=nd(_,"YZ",c,!0),C=[];let I=0,F=-e/2+14,R=a-(f.boundingBox.bounds[1][2]-f.boundingBox.bounds[0][2]);for(let Z=0;Z<s;Z++){const Q=i*15;C.push(f.clone().translate([I,F,R])),C.push(_.clone().translate([I-Q,F,R])),C.push(E.clone().translate([I+Q,F,R])),F+=l,R+=a}const k=Hm({width:600,depth:20,height:.5}),L=l,N=a,z=Math.sqrt(L*L+N*N),H=z>.001?[0,L/z,N/z]:[1,0,0],K=S2(o,{type:"face",element:Zn.RIGHT},k,{normal:[-1,0,0],xDir:H}).intersect(o),ee=K.clone(),le=o.boundingBox.center,V=nd(K,"YZ",le,!0),J=i*30,j=i*30;C.push(K.translate([J,0,0])),C.push(V.translate([-j,0,0]));const ie=Eu(C),D=eO.map(Z=>{let Q=0,se="Variable";return Z.id==="ST001"?(Q=s,se=`${n-1}200.5cm`):Z.id==="LP001"?(Q=s*2,se="4.54.520cm"):Z.id==="SS001"&&(Q=2),{...Z,quantity:Q,dimensions:se,material:"Steel"}});return{main:ie,helperSpaces:r?[o]:[],componentData:D,technicalDrawingModels:{ST001:d,LP001:S,SS001:ee}}}const rte={name:"Staircase",create:nte,params:[{name:"width",defaultValue:50},{name:"depth",defaultValue:100},{name:"height",defaultValue:200},{name:"showHelper",defaultValue:!0},{name:"explosionFactor",defaultValue:0}],validators:[ru(nu,["width","depth","height"])],hasExplosion:!0,hasTechnicalDrawingParts:!0,componentDataStructure:eO},ite=[{id:"SB001",name:"Side Board + Tape"},{id:"BD001",name:"Bottom Divider + Tape"},{id:"HB1001",name:"Horizontal Board 1 + Tape"},{id:"HB2001",name:"Horizontal Board 2 + Tape"},{id:"VB001",name:"Vertical Board + Tape"},{id:"SS001",name:"Small Shelf + Tape"},{id:"SSTDH001",name:"Small Shelf (Top Div Holes) + Tape"},{id:"SSBDH001",name:"Small Shelf (Both Div Holes) + Tape"},{id:"SSWDH001",name:"Small Shelf (Bottom Div Holes) + Tape"},{id:"SSD001",name:"Small Shelf Divider + Tape"},{id:"BS001",name:"Big Shelf + Tape"},{id:"HB3001",name:"Horizontal Board 3 + Tape"},{id:"MD001",name:"Middle Door + Tapes"},{id:"SDL001",name:"Side Door Left + Tapes"},{id:"SDR001",name:"Side Door Right + Tapes"}];function ote({width:n,depth:e,board_thickness:t}){let r=[];const i={},a=Math.floor(e/10),l=Math.floor((e-t)/10),u=Math.floor(e/15),c=(e-a*5)/(a+1),h=(e-t-l*5)/(l+1),f=(2*e/3-u*5)/(u+1),d=Lee([-2.4,.25]).bulgeArcTo([2.4,.25],-.3).tangentArcTo([2.4,-.25]).bulgeArcTo([-2.4,-.25],-.3).tangentArcTo([-2.4,.25]).close().sketchOnPlane("XZ",-.15).extrude(.3),v=[];for(let mt=0;mt<a;mt++){const ht=d.clone().translate(c+2.5+mt*(5+c),-n/2+t/2,50);v.push(ht),r.push(ht.clone()),r.push(ht.clone().mirror("XZ"))}const y=Dr(v),x=[];for(let mt=0;mt<l;mt++){const ht=d.clone().rotate(90,[0,0,0],[1,0,0]).translate(h+2.5+mt*(5+h),-n/2+t,3*t/2);x.push(ht),r.push(ht.clone()),r.push(ht.clone().mirror("XZ"))}const g=Dr(x),S=pr([0,-n/2,0],[e,-n/2+t,50]).cut(y).cut(g),_=pr([e,-n/2,0],[e+.2,-n/2+t,50]),E=S.clone(),C=_.clone();i.SB001=Dr([E,C]),r.push(S),r.push(S.clone().mirror("XZ")),r.push(_),r.push(_.clone().mirror("XZ"));const I=[];for(let mt=0;mt<l;mt++){const ht=d.clone().translate(h+2.5+mt*(5+h),n/6,2*t);I.push(ht),r.push(ht.clone()),r.push(ht.clone().mirror("XZ"))}const F=Dr(I),R=pr([0,-n/2+t,t],[e-t-.2,n/2-t,2*t]).cut(g).cut(g).cut(g.mirror("XZ")).cut(F).cut(F.clone().mirror("XZ")),k=pr([e-t-.2,-n/2+t,t],[e-t,n/2-t,2*t]),L=R.clone(),N=k.clone();i.HB1001=Dr([L,N]),r.push(R),r.push(k);const z=[];for(let mt=0;mt<l;mt++){const ht=d.clone().translate(h+2.5+mt*(5+h),n/6,50);z.push(ht),r.push(ht.clone()),r.push(ht.clone().mirror("XZ"))}const H=Dr(z),G=pr([0,n/6-t/2,2*t],[e-t-.2,n/6+t/2,50]).cut(F).cut(H),K=pr([e-t-.2,n/6-t/2,2*t],[e-t,n/6+t/2,50]),ee=G.clone(),le=K.clone();i.BD001=Dr([ee,le]),r.push(G),r.push(G.clone().mirror("XZ")),r.push(K),r.push(K.clone().mirror("XZ"));const V=[];for(let mt=0;mt<u;mt++){const ht=d.clone().translate(f+2.5+mt*(5+f),n/4,50+t);V.push(ht),r.push(ht.clone()),r.push(ht.clone().mirror("XZ"))}const J=Dr(V),j=pr([0,-n/2,50],[e,n/2,50+t]).cut(y).cut(y.mirror("XZ")).cut(H).cut(H.mirror("XZ")).cut(J).cut(J.clone().mirror("XZ")),ie=pr([e,-n/2,50],[e+.2,n/2,50+t]),D=j.clone(),q=ie.clone();i.HB2001=Dr([D,q]),r.push(j),r.push(ie);const Z=[];for(let mt=0;mt<u;mt++){const ht=d.clone().translate(f+2.5+mt*(5+f),n/4,50+6*(t+30));Z.push(ht),r.push(ht.clone()),r.push(ht.clone().mirror("XZ"))}const Q=Dr(Z),se=[];for(let mt=0;mt<4;mt++)for(let ht=0;ht<u;ht++){const an=d.clone().rotate(90,[0,0,0],[1,0,0]).translate(f+2.5+ht*(5+f),n/4-t/2,50+2.5*t+60+mt*(30+t));se.push(an),r.push(an.clone()),r.push(an.clone().mirror("XZ"))}const me=Dr(se),Se=fd(.4,3,[f/2,-n/4,50+30+1.5*t],[0,-1,0]),Ce=[];for(let mt=0;mt<5;mt++)for(let ht=0;ht<u+1;ht++){const an=Se.clone().translate(ht*(f+5),0,mt*(30+t));Ce.push(an),r.push(an.clone()),r.push(an.clone().mirror("XZ"))}const $e=Dr(Ce),ke=pr([0,n/4-t/2,50+t],[2*e/3,n/4+t/2,50+6*(t+30)]).cut(J).cut(Q).cut(me).cut($e),fe=pr([2*e/3,n/4-t/2,50+t],[2*e/3+.2,n/4+t/2,50+6*(t+30)]),Ie=ke.clone(),Ue=fe.clone();i.VB001=Dr([Ie,Ue]),r.push(ke),r.push(ke.clone().mirror("XZ")),r.push(fe),r.push(fe.clone().mirror("XZ"));const Te=[];for(let mt=0;mt<u+1;mt++){const ht=Se.clone().translateX(mt*(f+5));Te.push(ht)}const ae=Dr(Te),gt=pr([0,n/4+t/2,50+t+30],[2*e/3,n/2,50+2*t+30]).cut(ae),Ye=pr([2*e/3,n/4+t/2,50+t+30],[2*e/3+.2,n/2,50+2*t+30]),Ge=gt.clone(),et=Ye.clone();i.SS001=Dr([Ge,et]),r.push(gt),r.push(gt.clone().mirror("XZ")),r.push(gt.clone().translateZ(30+t)),r.push(gt.clone().translateZ(30+t).mirror("XZ"));const vt=[];for(let mt=0;mt<u;mt++){const ht=d.clone().translate(f+2.5+mt*(f+5),3*n/8-t/4,140+4*t);vt.push(ht),r.push(ht.clone()),r.push(ht.clone().mirror("XZ"))}const bt=Dr(vt),pe=[];for(let mt=0;mt<u;mt++){const ht=d.clone().translate(f+2.5+mt*(f+5),3*n/8-t/4,50+4*(30+t));pe.push(ht),r.push(ht.clone()),r.push(ht.clone().mirror("XZ"))}const te=Dr(pe),Ne=[];for(let mt=0;mt<u;mt++){const ht=d.clone().translate(f+2.5+mt*(f+5),3*n/8-t/4,170+5*t);Ne.push(ht),r.push(ht.clone()),r.push(ht.clone().mirror("XZ"))}const st=Dr(Ne),rt=[];for(let mt=0;mt<u;mt++){const ht=d.clone().translate(f+2.5+mt*(f+5),3*n/8-t/4,50+5*(30+t));rt.push(ht),r.push(ht.clone()),r.push(ht.clone().mirror("XZ"))}const pt=Dr(rt),wt=gt.clone().translateZ(2*(30+t)).cut(bt),ut=wt.clone(),Pe=Ye.clone().translateZ(2*(30+t));i.SSTDH001=Dr([ut,Pe]),r.push(wt),r.push(wt.clone().mirror("XZ"));const Ht=gt.clone().translateZ(3*(30+t)).cut(te).cut(st),Pt=Ht.clone(),Dt=Ye.clone().translateZ(3*(30+t));i.SSBDH001=Dr([Pt,Dt]),r.push(Ht),r.push(Ht.clone().mirror("XZ"));const Tt=gt.clone().translateZ(4*(30+t)).cut(pt),be=Tt.clone(),Ke=Ye.clone().translateZ(4*(30+t));i.SSWDH001=Dr([be,Ke]),r.push(Tt),r.push(Tt.clone().mirror("XZ"));for(let mt=0;mt<5;mt++)r.push(Ye.clone().translateZ(mt*(t+30))),r.push(Ye.clone().translateZ(mt*(t+30)).mirror("XZ"));const ct=pr([0,3*n/8-3*t/4,50+3*30+4*t],[2*e/3,3*n/8+t/4,50+4*(30+t)]).cut(bt).cut(te);r.push(ct),r.push(ct.clone().mirror("XZ")),r.push(ct.clone().translateZ(30+t)),r.push(ct.clone().translateZ(30+t).mirror("XZ"));const Ae=pr([2*e/3,3*n/8-3*t/4,50+3*30+4*t],[2*e/3+.2,3*n/8+t/4,50+4*(30+t)]),Oe=ct.clone(),Ve=Ae.clone();i.SSD001=Dr([Oe,Ve]),r.push(Ae),r.push(Ae.clone().mirror("XZ")),r.push(Ae.clone().translateZ(t+30)),r.push(Ae.clone().translateZ(t+30).mirror("XZ"));const At=[];for(let mt=0;mt<u;mt++){const ht=d.clone().rotate(90,[0,0,0],[1,0,0]).translate(f+2.5+mt*(5+f),n/4-t/2,50+2.5*t+60);At.push(ht)}const Ct=Dr(At),Nt=pr([0,-n/4+t/2,50+2*(30+t)],[2*e/3,n/4-t/2,50+2*30+3*t]).cut(Ct),Xt=pr([2*e/3,-n/4+t/2,50+2*(30+t)],[2*e/3+.2,n/4-t/2,50+2*30+3*t]),kn=Nt.clone(),Yn=Xt.clone();i.BS001=Dr([kn,Yn]);for(let mt=0;mt<4;mt++)r.push(Nt.clone().translateZ(mt*(30+t))),r.push(Xt.clone().translateZ(mt*(30+t)));const wn=pr([0,-n/2,50+6*(t+30)],[e,n/2,50+7*t+6*30]).cut(Q).cut(Q.mirror("XZ")),ir=pr([e,-n/2,50+6*(t+30)],[e+.2,n/2,50+7*t+6*30]),Wt=wn.clone(),Yi=ir.clone();i.HB3001=Dr([Wt,Yi]),r.push(wn),r.push(ir);const Zi=fd(.3,t,[e,-n/6-t,50-t],[-1,0,0]),Ir=fd(1.5,t/2,[e-t,-n/2+2*t,50-2*t],[1,0,0]),ar=pr([e-t,-n/2+t+.4,t],[e,-n/6-.3,50-.4]).cut(Zi).cut(Ir).cut(Ir.clone().translateZ(-50+6*t));r.push(ar);const dr=ar.clone().mirror("XZ"),lr=pr([e-t,-n/6-.3,t],[e,-n/6-.1,50-.4]),yn=pr([e-t,-n/2+t+.2,t],[e,-n/2+t+.4,50-.4]),Ki=pr([e-t,-n/2+t+.4,50-.4],[e,-n/6-.3,50-.2]),Bi=pr([e-t,-n/2+t+.4,t],[e,-n/6-.3,t+.2]),$=ar.clone(),B=lr.clone(),re=yn.clone(),ve=Ki.clone(),ge=Bi.clone(),_e=Dr([$,B,re,ve,ge]);i.SDL001=_e,i.SDR001=_e.clone().mirror("XZ"),r.push(dr);const qe=pr([e-t,-n/6+.3,t],[e,n/6-.3,50-.4]).cut(Zi.clone().translateY(2*t).mirror("XZ")).cut(Ir.clone().translateY(n/3)).cut(Ir.clone().translate(0,n/3,-50+6*t)),Xe=pr([e-t,-n/6+.1,t],[e,-n/6+.3,50-.4]),it=pr([e-t,n/6-.3,t],[e,n/6-.1,50-.4]),tt=pr([e-t,-n/6+.3,50-.4],[e,n/6-.3,50-.2]),dt=pr([e-t,-n/6+.3,t],[e,n/6-.3,t+.2]),nt=qe.clone(),jt=Xe.clone(),It=it.clone(),Ot=tt.clone(),rn=dt.clone();i.MD001=Dr([nt,jt,It,Ot,rn]),r.push(qe),r.push(Xe),r.push(it),r.push(tt),r.push(dt),r.push(lr),r.push(yn),r.push(Ki),r.push(Bi),r.push(lr.clone().mirror("XZ")),r.push(yn.clone().mirror("XZ")),r.push(Ki.clone().mirror("XZ")),r.push(Bi.clone().mirror("XZ"));const sn=fd(.5,2,[e,n/6+t,50-t],[1,0,0]).fuse(fd(1,1,[e+2,n/6+t,50-t],[1,0,0]));return r.push(sn),r.push(sn.clone().mirror("XZ")),r.push(sn.clone().translateY(-2*t)),{main:Dr(r),technicalDrawingModels:i}}const ste={name:"Closet",create:ote,params:[{name:"width",defaultValue:200,description:"Overall width of the closet"},{name:"depth",defaultValue:50,description:"Overall depth of the closet"},{name:"board_thickness",defaultValue:3,description:"Thickness of the boards used"}],validators:[ru(nu,["width","depth","board_thickness"])],hasExplosion:!1,hasBoM:!0,hasTechnicalDrawingParts:!0,componentDataStructure:ite},Ys={Cuboid:Fee,Sphere:Oee,Cylinder:Bee,Ellipsoid:zee,DiagonalCuboidPattern:Vee,RectangularCuboidGrid:jee,LProfile:qee,Frustum:$ee,Drill:Xee,Closet:ste,Staircase:{...rte,hasBoM:!0}};function eE(n){return n.params.reduce((e,t)=>(e[t.name]=t.defaultValue,e),{})}function ate({selectedModelName:n,isMobile:e,zoomLevel:t,scale:r,containerSize:i,panOffset:o,onZoomChange:s,onPanChange:a,onScaleChange:l,onResetView:u,onExportPDF:c,onAddViewbox:h,selectedLayout:f,onLayoutChange:d,selectedViewToAdd:v,onViewSelectionChange:y,includeHiddenLines:x,onHiddenLinesToggle:g,onAddViewToCell:S}){const _=["1x1","1x2","2x1","2x2"],E=de.useMemo(()=>{const I=["Front","Right","Bottom","Top","Left","Back","Isometric"].map(N=>({value:N,label:N})),F=Ys[n];let R=[];const k=F==null?void 0:F.hasTechnicalDrawingParts,L=F==null?void 0:F.componentDataStructure;return k&&Array.isArray(L)&&L.forEach(N=>{const z=N.id,H=N.name||z;z?I.forEach(G=>{R.push({value:`${z} - ${G.value}`,label:`${H} - ${G.label}`})}):console.warn("[WARN] Part info missing ID in componentDataStructure:",N)}),[...I,...R]},[n]),C=I=>{const F=Math.max(.1,Math.min(10,t+I*t)),R=i.width/2,k=i.height/2,L=(R-o.x)/t,N=(k-o.y)/t,z=R-L*F,H=k-N*F;s(F),a({x:z,y:H})};return Je("div",{style:{position:"absolute",top:e?"8px":"10px",right:e?"8px":"10px",zIndex:100,backgroundColor:"rgba(255,255,255,0.8)",padding:e?"8px":"5px 10px",borderRadius:"4px",display:"flex",flexDirection:"column",gap:e?"8px":"5px"},children:[Je("div",{style:{display:"flex",alignItems:"center"},children:[ce("button",{title:"Zoom Out",style:{margin:"0 2px",padding:e?"5px 10px":"2px 6px",cursor:"pointer",fontSize:e?"16px":"inherit"},onClick:()=>C(-.1),children:""}),Je("span",{style:{margin:"0 5px",fontSize:e?"14px":"12px",minWidth:"35px",textAlign:"center"},children:[Math.round(t*100),"%"]}),ce("button",{title:"Zoom In",style:{margin:"0 2px",padding:e?"5px 10px":"2px 6px",cursor:"pointer",fontSize:e?"16px":"inherit"},onClick:()=>C(.1),children:"+"}),ce("button",{title:"Reset View",style:{margin:"0 0 0 10px",padding:e?"5px 10px":"2px 8px",cursor:"pointer",fontSize:e?"14px":"inherit"},onClick:u,children:"Reset"})]}),Je("div",{style:{display:"flex",alignItems:"center"},children:[ce("label",{htmlFor:"scaleSlider",style:{fontSize:e?"12px":"10px",marginRight:"5px"},children:"Scale:"}),ce("input",{type:"range",id:"scaleSlider",min:"1",max:"100",step:"1",value:r,onChange:I=>l(Number(I.target.value)),style:{cursor:"pointer",width:"80px"},title:`Scale: ${r} px/cm`}),Je("span",{style:{margin:"0 5px",fontSize:e?"12px":"10px",minWidth:"45px",textAlign:"right"},children:[r," px/cm"]})]}),Je("div",{style:{display:"flex",alignItems:"center",marginTop:"5px"},children:[ce("label",{htmlFor:"layoutSelect",style:{fontSize:e?"12px":"10px",marginRight:"5px"},children:"Layout:"}),ce("select",{id:"layoutSelect",defaultValue:f,onChange:I=>{d(I.target.value)},style:{padding:e?"4px 8px":"2px 4px",fontSize:e?"13px":"11px",cursor:"pointer",flexGrow:1},title:"Select Viewbox Layout",children:_.map(I=>ce("option",{value:I,children:I},I))})]}),Je("div",{style:{borderTop:"1px solid #ccc",marginTop:"10px",paddingTop:"10px"},children:[ce("div",{style:{fontSize:"11px",fontWeight:"bold",marginBottom:"5px",color:"#555"},children:"Add View to Cell:"}),Je("div",{style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[ce("label",{htmlFor:"viewTypeSelect",style:{fontSize:e?"12px":"10px",marginRight:"5px",minWidth:"35px"},children:"View:"}),ce("select",{id:"viewTypeSelect",defaultValue:v,onChange:I=>y(I.target.value),style:{padding:e?"4px 8px":"2px 4px",fontSize:e?"13px":"11px",cursor:"pointer",flexGrow:1},title:"Select View Type",children:E.map(I=>Je("option",{value:I.value,children:[I.label," "]},I.value))})]}),Je("div",{style:{display:"flex",alignItems:"center",marginBottom:"5px"},children:[ce("input",{type:"checkbox",id:"hiddenLinesCheckbox",checked:x,onChange:I=>g(I.target.checked),style:{marginRight:"5px",cursor:"pointer"}}),ce("label",{htmlFor:"hiddenLinesCheckbox",style:{fontSize:e?"12px":"10px",cursor:"pointer"},children:"Include Hidden Lines"})]}),ce("button",{title:`Add ${v} view ${x?"with":"without"} hidden lines`,style:{width:"100%",marginTop:"5px",padding:e?"5px 10px":"2px 8px",cursor:"pointer",fontSize:e?"14px":"inherit",backgroundColor:"#2196F3",color:"white",border:"none",borderRadius:"3px"},onClick:S,children:"Add View"})]}),ce("button",{title:`Add Viewbox with ${f} layout`,style:{marginTop:"5px",padding:e?"5px 10px":"2px 8px",cursor:"pointer",fontSize:e?"14px":"inherit",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"3px"},onClick:h,children:"Add Viewbox"}),ce("button",{title:"Export as PDF",style:{marginTop:"5px",padding:e?"5px 10px":"2px 8px",cursor:"pointer",fontSize:e?"14px":"inherit"},onClick:c,children:"Export PDF"})]})}function lte(n){if(!n||typeof n!="string")return null;const e=n.split(/[\s,]+/).map(parseFloat);if(e.length!==4||e.some(isNaN))return console.warn("Could not parse viewBox string:",n),null;const t=Math.max(0,e[2]),r=Math.max(0,e[3]);return{x:e[0],y:e[1],width:t,height:r}}function Br(n){return Br=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Br(n)}var gs=Uint8Array,Sa=Uint16Array,VA=Int32Array,xS=new gs([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wS=new gs([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),tE=new gs([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),tO=function(n,e){for(var t=new Sa(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new VA(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return{b:t,r:i}},nO=tO(xS,2),rO=nO.b,nE=nO.r;rO[28]=258,nE[258]=28;var iO=tO(wS,0),ute=iO.b,LL=iO.r,rE=new Sa(32768);for(var si=0;si<32768;++si){var Th=(si&43690)>>1|(si&21845)<<1;Th=(Th&52428)>>2|(Th&13107)<<2,Th=(Th&61680)>>4|(Th&3855)<<4,rE[si]=((Th&65280)>>8|(Th&255)<<8)>>1}var Fu=function(n,e,t){for(var r=n.length,i=0,o=new Sa(e);i<r;++i)n[i]&&++o[n[i]-1];var s=new Sa(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(t){a=new Sa(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],c=e-n[i],h=s[n[i]-1]++<<c,f=h|(1<<c)-1;h<=f;++h)a[rE[h]>>l]=u}else for(a=new Sa(r),i=0;i<r;++i)n[i]&&(a[i]=rE[s[n[i]-1]++]>>15-n[i]);return a},pf=new gs(288);for(var si=0;si<144;++si)pf[si]=8;for(var si=144;si<256;++si)pf[si]=9;for(var si=256;si<280;++si)pf[si]=7;for(var si=280;si<288;++si)pf[si]=8;var t1=new gs(32);for(var si=0;si<32;++si)t1[si]=5;var cte=Fu(pf,9,0),hte=Fu(pf,9,1),fte=Fu(t1,5,0),dte=Fu(t1,5,1),_b=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Tl=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},bb=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},WA=function(n){return(n+7)/8|0},oO=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new gs(n.subarray(e,t))},pte=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],kl=function(n,e,t){var r=new Error(e||pte[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,kl),!t)throw r;return r},mte=function(n,e,t,r){var i=n.length,o=r?r.length:0;if(!i||e.f&&!e.l)return t||new gs(0);var s=!t,a=s||e.i!=2,l=e.i;s&&(t=new gs(i*3));var u=function(ke){var fe=t.length;if(ke>fe){var Ie=new gs(Math.max(fe*2,ke));Ie.set(t),t=Ie}},c=e.f||0,h=e.p||0,f=e.b||0,d=e.l,v=e.d,y=e.m,x=e.n,g=i*8;do{if(!d){c=Tl(n,h,1);var S=Tl(n,h+1,3);if(h+=3,S)if(S==1)d=hte,v=dte,y=9,x=5;else if(S==2){var I=Tl(n,h,31)+257,F=Tl(n,h+10,15)+4,R=I+Tl(n,h+5,31)+1;h+=14;for(var k=new gs(R),L=new gs(19),N=0;N<F;++N)L[tE[N]]=Tl(n,h+N*3,7);h+=F*3;for(var z=_b(L),H=(1<<z)-1,G=Fu(L,z,1),N=0;N<R;){var K=G[Tl(n,h,H)];h+=K&15;var _=K>>4;if(_<16)k[N++]=_;else{var ee=0,le=0;for(_==16?(le=3+Tl(n,h,3),h+=2,ee=k[N-1]):_==17?(le=3+Tl(n,h,7),h+=3):_==18&&(le=11+Tl(n,h,127),h+=7);le--;)k[N++]=ee}}var V=k.subarray(0,I),J=k.subarray(I);y=_b(V),x=_b(J),d=Fu(V,y,1),v=Fu(J,x,1)}else kl(1);else{var _=WA(h)+4,E=n[_-4]|n[_-3]<<8,C=_+E;if(C>i){l&&kl(0);break}a&&u(f+E),t.set(n.subarray(_,C),f),e.b=f+=E,e.p=h=C*8,e.f=c;continue}if(h>g){l&&kl(0);break}}a&&u(f+131072);for(var j=(1<<y)-1,ie=(1<<x)-1,D=h;;D=h){var ee=d[bb(n,h)&j],q=ee>>4;if(h+=ee&15,h>g){l&&kl(0);break}if(ee||kl(2),q<256)t[f++]=q;else if(q==256){D=h,d=null;break}else{var Z=q-254;if(q>264){var N=q-257,Q=xS[N];Z=Tl(n,h,(1<<Q)-1)+rO[N],h+=Q}var se=v[bb(n,h)&ie],me=se>>4;se||kl(3),h+=se&15;var J=ute[me];if(me>3){var Q=wS[me];J+=bb(n,h)&(1<<Q)-1,h+=Q}if(h>g){l&&kl(0);break}a&&u(f+131072);var Se=f+Z;if(f<J){var Ce=o-J,$e=Math.min(J,Se);for(Ce+f<0&&kl(3);f<$e;++f)t[f]=r[Ce+f]}for(;f<Se;++f)t[f]=t[f-J]}}e.l=d,e.p=D,e.b=f,e.f=c,d&&(c=1,e.m=y,e.d=v,e.n=x)}while(!c);return f!=t.length&&s?oO(t,0,f):t.subarray(0,f)},fc=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},x0=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},Mb=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,o=t.slice();if(!i)return{t:aO,l:0};if(i==1){var s=new gs(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(C,I){return C.f-I.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],u=0,c=1,h=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=i-1;)a=t[t[u].f<t[h].f?u++:h++],l=t[u!=c&&t[u].f<t[h].f?u++:h++],t[c++]={s:-1,f:a.f+l.f,l:a,r:l};for(var f=o[0].s,r=1;r<i;++r)o[r].s>f&&(f=o[r].s);var d=new Sa(f+1),v=iE(t[c-1],d,0);if(v>e){var r=0,y=0,x=v-e,g=1<<x;for(o.sort(function(I,F){return d[F.s]-d[I.s]||I.f-F.f});r<i;++r){var S=o[r].s;if(d[S]>e)y+=g-(1<<v-d[S]),d[S]=e;else break}for(y>>=x;y>0;){var _=o[r].s;d[_]<e?y-=1<<e-d[_]++-1:++r}for(;r>=0&&y;--r){var E=o[r].s;d[E]==e&&(--d[E],++y)}v=e}return{t:new gs(d),l:v}},iE=function(n,e,t){return n.s==-1?Math.max(iE(n.l,e,t+1),iE(n.r,e,t+1)):e[n.s]=t},kL=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Sa(++e),r=0,i=n[0],o=1,s=function(l){t[r++]=l},a=1;a<=e;++a)if(n[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=n[a]}return{c:t.subarray(0,r),n:e}},w0=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},sO=function(n,e,t){var r=t.length,i=WA(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var o=0;o<r;++o)n[i+o+4]=t[o];return(i+4+r)*8},IL=function(n,e,t,r,i,o,s,a,l,u,c){fc(e,c++,t),++i[256];for(var h=Mb(i,15),f=h.t,d=h.l,v=Mb(o,15),y=v.t,x=v.l,g=kL(f),S=g.c,_=g.n,E=kL(y),C=E.c,I=E.n,F=new Sa(19),R=0;R<S.length;++R)++F[S[R]&31];for(var R=0;R<C.length;++R)++F[C[R]&31];for(var k=Mb(F,7),L=k.t,N=k.l,z=19;z>4&&!L[tE[z-1]];--z);var H=u+5<<3,G=w0(i,pf)+w0(o,t1)+s,K=w0(i,f)+w0(o,y)+s+14+3*z+w0(F,L)+2*F[16]+3*F[17]+7*F[18];if(l>=0&&H<=G&&H<=K)return sO(e,c,n.subarray(l,l+u));var ee,le,V,J;if(fc(e,c,1+(K<G)),c+=2,K<G){ee=Fu(f,d,0),le=f,V=Fu(y,x,0),J=y;var j=Fu(L,N,0);fc(e,c,_-257),fc(e,c+5,I-1),fc(e,c+10,z-4),c+=14;for(var R=0;R<z;++R)fc(e,c+3*R,L[tE[R]]);c+=3*z;for(var ie=[S,C],D=0;D<2;++D)for(var q=ie[D],R=0;R<q.length;++R){var Z=q[R]&31;fc(e,c,j[Z]),c+=L[Z],Z>15&&(fc(e,c,q[R]>>5&127),c+=q[R]>>12)}}else ee=cte,le=pf,V=fte,J=t1;for(var R=0;R<a;++R){var Q=r[R];if(Q>255){var Z=Q>>18&31;x0(e,c,ee[Z+257]),c+=le[Z+257],Z>7&&(fc(e,c,Q>>23&31),c+=xS[Z]);var se=Q&31;x0(e,c,V[se]),c+=J[se],se>3&&(x0(e,c,Q>>5&8191),c+=wS[se])}else x0(e,c,ee[Q]),c+=le[Q]}return x0(e,c,ee[256]),c+le[256]},gte=new VA([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),aO=new gs(0),vte=function(n,e,t,r,i,o){var s=o.z||n.length,a=new gs(r+s+5*(1+Math.ceil(s/7e3))+i),l=a.subarray(r,a.length-i),u=o.l,c=(o.r||0)&7;if(e){c&&(l[0]=o.r>>3);for(var h=gte[e-1],f=h>>13,d=h&8191,v=(1<<t)-1,y=o.p||new Sa(32768),x=o.h||new Sa(v+1),g=Math.ceil(t/3),S=2*g,_=function(Ue){return(n[Ue]^n[Ue+1]<<g^n[Ue+2]<<S)&v},E=new VA(25e3),C=new Sa(288),I=new Sa(32),F=0,R=0,k=o.i||0,L=0,N=o.w||0,z=0;k+2<s;++k){var H=_(k),G=k&32767,K=x[H];if(y[G]=K,x[H]=G,N<=k){var ee=s-k;if((F>7e3||L>24576)&&(ee>423||!u)){c=IL(n,l,0,E,C,I,R,L,z,k-z,c),L=F=R=0,z=k;for(var le=0;le<286;++le)C[le]=0;for(var le=0;le<30;++le)I[le]=0}var V=2,J=0,j=d,ie=G-K&32767;if(ee>2&&H==_(k-ie))for(var D=Math.min(f,ee)-1,q=Math.min(32767,k),Z=Math.min(258,ee);ie<=q&&--j&&G!=K;){if(n[k+V]==n[k+V-ie]){for(var Q=0;Q<Z&&n[k+Q]==n[k+Q-ie];++Q);if(Q>V){if(V=Q,J=ie,Q>D)break;for(var se=Math.min(ie,Q-2),me=0,le=0;le<se;++le){var Se=k-ie+le&32767,Ce=y[Se],$e=Se-Ce&32767;$e>me&&(me=$e,K=Se)}}}G=K,K=y[G],ie+=G-K&32767}if(J){E[L++]=268435456|nE[V]<<18|LL[J];var ke=nE[V]&31,fe=LL[J]&31;R+=xS[ke]+wS[fe],++C[257+ke],++I[fe],N=k+V,++F}else E[L++]=n[k],++C[n[k]]}}for(k=Math.max(k,N);k<s;++k)E[L++]=n[k],++C[n[k]];c=IL(n,l,u,E,C,I,R,L,z,k-z,c),u||(o.r=c&7|l[c/8|0]<<3,c-=7,o.h=x,o.p=y,o.i=k,o.w=N)}else{for(var k=o.w||0;k<s+u;k+=65535){var Ie=k+65535;Ie>=s&&(l[c/8|0]=u,Ie=s),c=sO(l,c+1,n.subarray(k,Ie))}o.i=s}return oO(a,0,r+WA(c)+i)},lO=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,o=t.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=t[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},yte=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new gs(o.length+n.length);s.set(o),s.set(n,o.length),n=s,i.w=o.length}return vte(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},uO=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},xte=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=lO();i.p(e.dictionary),uO(n,2,i.d())}},wte=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&kl(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&kl(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function oE(n,e){e||(e={});var t=lO();t.p(n);var r=yte(n,e,e.dictionary?6:2,4);return xte(r,e),uO(r,r.length-4,t.d()),r}function Ste(n,e){return mte(n.subarray(wte(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var _te=typeof TextDecoder<"u"&&new TextDecoder,bte=0;try{_te.decode(aO,{stream:!0}),bte=1}catch{}var _n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function Eb(){_n.console&&typeof _n.console.log=="function"&&_n.console.log.apply(_n.console,arguments)}var Wr={log:Eb,warn:function(n){_n.console&&(typeof _n.console.warn=="function"?_n.console.warn.apply(_n.console,arguments):Eb.call(null,arguments))},error:function(n){_n.console&&(typeof _n.console.error=="function"?_n.console.error.apply(_n.console,arguments):Eb(n))}};function Ab(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){sd(r.response,e,t)},r.onerror=function(){Wr.error("could not download file")},r.send()}function NL(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function _2(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var rv,sE,sd=_n.saveAs||((typeof window>"u"?"undefined":Br(window))!=="object"||window!==_n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=_n.URL||_n.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?NL(i.href)?Ab(n,e,t):_2(i,i.target="_blank"):_2(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){_2(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(NL(n))Ab(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){_2(r)})}else navigator.msSaveOrOpenBlob(function(i,o){return o===void 0?o={autoBom:!1}:Br(o)!=="object"&&(Wr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return Ab(n,e,t);var i=n.type==="application/octet-stream",o=/constructor/i.test(_n.HTMLElement)||_n.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":Br(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var c=a.result;c=s?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},a.readAsDataURL(n)}else{var l=_n.URL||_n.webkitURL,u=l.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function cO(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,o=t[r].process,s=i.exec(n);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Tb(n,e){var t=n[0],r=n[1],i=n[2],o=n[3];t=as(t,r,i,o,e[0],7,-680876936),o=as(o,t,r,i,e[1],12,-389564586),i=as(i,o,t,r,e[2],17,606105819),r=as(r,i,o,t,e[3],22,-1044525330),t=as(t,r,i,o,e[4],7,-176418897),o=as(o,t,r,i,e[5],12,1200080426),i=as(i,o,t,r,e[6],17,-1473231341),r=as(r,i,o,t,e[7],22,-45705983),t=as(t,r,i,o,e[8],7,1770035416),o=as(o,t,r,i,e[9],12,-1958414417),i=as(i,o,t,r,e[10],17,-42063),r=as(r,i,o,t,e[11],22,-1990404162),t=as(t,r,i,o,e[12],7,1804603682),o=as(o,t,r,i,e[13],12,-40341101),i=as(i,o,t,r,e[14],17,-1502002290),t=ls(t,r=as(r,i,o,t,e[15],22,1236535329),i,o,e[1],5,-165796510),o=ls(o,t,r,i,e[6],9,-1069501632),i=ls(i,o,t,r,e[11],14,643717713),r=ls(r,i,o,t,e[0],20,-373897302),t=ls(t,r,i,o,e[5],5,-701558691),o=ls(o,t,r,i,e[10],9,38016083),i=ls(i,o,t,r,e[15],14,-660478335),r=ls(r,i,o,t,e[4],20,-405537848),t=ls(t,r,i,o,e[9],5,568446438),o=ls(o,t,r,i,e[14],9,-1019803690),i=ls(i,o,t,r,e[3],14,-187363961),r=ls(r,i,o,t,e[8],20,1163531501),t=ls(t,r,i,o,e[13],5,-1444681467),o=ls(o,t,r,i,e[2],9,-51403784),i=ls(i,o,t,r,e[7],14,1735328473),t=us(t,r=ls(r,i,o,t,e[12],20,-1926607734),i,o,e[5],4,-378558),o=us(o,t,r,i,e[8],11,-2022574463),i=us(i,o,t,r,e[11],16,1839030562),r=us(r,i,o,t,e[14],23,-35309556),t=us(t,r,i,o,e[1],4,-1530992060),o=us(o,t,r,i,e[4],11,1272893353),i=us(i,o,t,r,e[7],16,-155497632),r=us(r,i,o,t,e[10],23,-1094730640),t=us(t,r,i,o,e[13],4,681279174),o=us(o,t,r,i,e[0],11,-358537222),i=us(i,o,t,r,e[3],16,-722521979),r=us(r,i,o,t,e[6],23,76029189),t=us(t,r,i,o,e[9],4,-640364487),o=us(o,t,r,i,e[12],11,-421815835),i=us(i,o,t,r,e[15],16,530742520),t=cs(t,r=us(r,i,o,t,e[2],23,-995338651),i,o,e[0],6,-198630844),o=cs(o,t,r,i,e[7],10,1126891415),i=cs(i,o,t,r,e[14],15,-1416354905),r=cs(r,i,o,t,e[5],21,-57434055),t=cs(t,r,i,o,e[12],6,1700485571),o=cs(o,t,r,i,e[3],10,-1894986606),i=cs(i,o,t,r,e[10],15,-1051523),r=cs(r,i,o,t,e[1],21,-2054922799),t=cs(t,r,i,o,e[8],6,1873313359),o=cs(o,t,r,i,e[15],10,-30611744),i=cs(i,o,t,r,e[6],15,-1560198380),r=cs(r,i,o,t,e[13],21,1309151649),t=cs(t,r,i,o,e[4],6,-145523070),o=cs(o,t,r,i,e[11],10,-1120210379),i=cs(i,o,t,r,e[2],15,718787259),r=cs(r,i,o,t,e[9],21,-343485551),n[0]=jh(t,n[0]),n[1]=jh(r,n[1]),n[2]=jh(i,n[2]),n[3]=jh(o,n[3])}function SS(n,e,t,r,i,o){return e=jh(jh(e,n),jh(r,o)),jh(e<<i|e>>>32-i,t)}function as(n,e,t,r,i,o,s){return SS(e&t|~e&r,n,e,i,o,s)}function ls(n,e,t,r,i,o,s){return SS(e&r|t&~r,n,e,i,o,s)}function us(n,e,t,r,i,o,s){return SS(e^t^r,n,e,i,o,s)}function cs(n,e,t,r,i,o,s){return SS(t^(e|~r),n,e,i,o,s)}function hO(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Tb(r,Mte(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(Tb(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,Tb(r,i),r}function Mte(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}rv=_n.atob.bind(_n),sE=_n.btoa.bind(_n);var FL="0123456789abcdef".split("");function Ete(n){for(var e="",t=0;t<4;t++)e+=FL[n>>8*t+4&15]+FL[n>>8*t&15];return e}function Ate(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function aE(n){return hO(n).map(Ate).join("")}var Tte=function(n){for(var e=0;e<n.length;e++)n[e]=Ete(n[e]);return n.join("")}(hO("hello"))!="5d41402abc4b2a76b9719d911017c592";function jh(n,e){if(Tte){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function lE(n,e){var t,r,i,o;if(n!==t){for(var s=(i=n,o=1+(256/n.length>>0),new Array(o+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var c=a[l];u=(u+c+s.charCodeAt(l))%256,a[l]=a[u],a[u]=c}t=n,r=a}else a=r;var h=e.length,f=0,d=0,v="";for(l=0;l<h;l++)d=(d+(c=a[f=(f+1)%256]))%256,a[f]=a[d],a[d]=c,s=a[(a[f]+a[d])%256],v+=String.fromCharCode(e.charCodeAt(l)^s);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var DL={print:4,modify:8,copy:16,"annot-forms":32};function cm(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(DL.perm!==void 0)throw new Error("Invalid permission: "+a);i+=DL[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var o=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=aE(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=lE(this.encryptionKey,this.padding)}function hm(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function OL(n){if(Br(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[r,!!i],o},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[t]){var s=e[t][o];try{s[0].apply(n,r)}catch(a){_n.console&&Wr.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Wd(n){if(!(this instanceof Wd))return new Wd(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function fO(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Dh(n,e,t,r,i){if(!(this instanceof Dh))return new Dh(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,fO.call(this,r,i)}function bd(n,e,t,r,i){if(!(this instanceof bd))return new bd(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,fO.call(this,r,i)}function vn(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,l=16,u="S",c=null;Br(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,o=n.compress||n.compressPdf||o,(c=n.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),u=n.defaultPathOperation||"S"),s=n.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",t=(""+(t||"P")).toLowerCase();var h=n.putOnlyUsedFonts||!1,f={},d={internal:{},__private__:{}};d.__private__.PubSub=OL;var v="1.3",y=d.__private__.getPdfVersion=function(){return v};d.__private__.setPdfVersion=function(T){v=T};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};d.__private__.getPageFormats=function(){return x};var g=d.__private__.getPageFormat=function(T){return x[T]};i=i||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},_=S.COMPAT;function E(){this.saveGraphicsState(),ae(new Wt(Pe,0,0,-Pe,0,ml()*Pe).toString()+" cm"),this.setFontSize(this.getFontSize()/Pe),u="n",_=S.ADVANCED}function C(){this.restoreGraphicsState(),u="S",_=S.COMPAT}var I=d.__private__.combineFontStyleAndFontWeight=function(T,Y){if(T=="bold"&&Y=="normal"||T=="bold"&&Y==400||T=="normal"&&Y=="italic"||T=="bold"&&Y=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Y&&(T=Y==400||Y==="normal"?T==="italic"?"italic":"normal":Y!=700&&Y!=="bold"||T!=="normal"?(Y==700?"bold":Y)+""+T:"bold"),T};d.advancedAPI=function(T){var Y=_===S.COMPAT;return Y&&E.call(this),typeof T!="function"||(T(this),Y&&C.call(this)),this},d.compatAPI=function(T){var Y=_===S.ADVANCED;return Y&&C.call(this),typeof T!="function"||(T(this),Y&&E.call(this)),this},d.isAdvancedAPI=function(){return _===S.ADVANCED};var F,R=function(T){if(_!==S.ADVANCED)throw new Error(T+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},k=d.roundToPrecision=d.__private__.roundToPrecision=function(T,Y){var Me=e||Y;if(isNaN(T)||isNaN(Me))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return T.toFixed(Me).replace(/0+$/,"")};F=d.hpf=d.__private__.hpf=typeof l=="number"?function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return k(T,l)}:l==="smart"?function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return k(T,T>-1&&T<1?16:5)}:function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return k(T,16)};var L=d.f2=d.__private__.f2=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.f2");return k(T,2)},N=d.__private__.f3=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.f3");return k(T,3)},z=d.scale=d.__private__.scale=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.scale");return _===S.COMPAT?T*Pe:_===S.ADVANCED?T:void 0},H=function(T){return _===S.COMPAT?ml()-T:_===S.ADVANCED?T:void 0},G=function(T){return z(H(T))};d.__private__.setPrecision=d.setPrecision=function(T){typeof parseInt(T,10)=="number"&&(e=parseInt(T,10))};var K,ee="00000000000000000000000000000000",le=d.__private__.getFileId=function(){return ee},V=d.__private__.setFileId=function(T){return ee=T!==void 0&&/^[a-fA-F0-9]{32}$/.test(T)?T.toUpperCase():ee.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(Qi=new cm(c.userPermissions,c.userPassword,c.ownerPassword,ee)),ee};d.setFileId=function(T){return V(T),this},d.getFileId=function(){return le()};var J=d.__private__.convertDateToPDFDate=function(T){var Y=T.getTimezoneOffset(),Me=Y<0?"+":"-",Re=Math.floor(Math.abs(Y/60)),He=Math.abs(Y%60),at=[Me,Z(Re),"'",Z(He),"'"].join("");return["D:",T.getFullYear(),Z(T.getMonth()+1),Z(T.getDate()),Z(T.getHours()),Z(T.getMinutes()),Z(T.getSeconds()),at].join("")},j=d.__private__.convertPDFDateToDate=function(T){var Y=parseInt(T.substr(2,4),10),Me=parseInt(T.substr(6,2),10)-1,Re=parseInt(T.substr(8,2),10),He=parseInt(T.substr(10,2),10),at=parseInt(T.substr(12,2),10),Et=parseInt(T.substr(14,2),10);return new Date(Y,Me,Re,He,at,Et,0)},ie=d.__private__.setCreationDate=function(T){var Y;if(T===void 0&&(T=new Date),T instanceof Date)Y=J(T);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(T))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Y=T}return K=Y},D=d.__private__.getCreationDate=function(T){var Y=K;return T==="jsDate"&&(Y=j(K)),Y};d.setCreationDate=function(T){return ie(T),this},d.getCreationDate=function(T){return D(T)};var q,Z=d.__private__.padd2=function(T){return("0"+parseInt(T)).slice(-2)},Q=d.__private__.padd2Hex=function(T){return("00"+(T=T.toString())).substr(T.length)},se=0,me=[],Se=[],Ce=0,$e=[],ke=[],fe=!1,Ie=Se,Ue=function(){se=0,Ce=0,Se=[],me=[],$e=[],Ki=dr(),Bi=dr()};d.__private__.setCustomOutputDestination=function(T){fe=!0,Ie=T};var Te=function(T){fe||(Ie=T)};d.__private__.resetCustomOutputDestination=function(){fe=!1,Ie=Se};var ae=d.__private__.out=function(T){return T=T.toString(),Ce+=T.length+1,Ie.push(T),Ie},gt=d.__private__.write=function(T){return ae(arguments.length===1?T.toString():Array.prototype.join.call(arguments," "))},Ye=d.__private__.getArrayBuffer=function(T){for(var Y=T.length,Me=new ArrayBuffer(Y),Re=new Uint8Array(Me);Y--;)Re[Y]=T.charCodeAt(Y);return Me},Ge=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];d.__private__.getStandardFonts=function(){return Ge};var et=n.fontSize||16;d.__private__.setFontSize=d.setFontSize=function(T){return et=_===S.ADVANCED?T/Pe:T,this};var vt,bt=d.__private__.getFontSize=d.getFontSize=function(){return _===S.COMPAT?et:et*Pe},pe=n.R2L||!1;d.__private__.setR2L=d.setR2L=function(T){return pe=T,this},d.__private__.getR2L=d.getR2L=function(){return pe};var te,Ne=d.__private__.setZoomMode=function(T){var Y=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(T))vt=T;else if(isNaN(T)){if(Y.indexOf(T)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+T+'" is not recognized.');vt=T}else vt=parseInt(T,10)};d.__private__.getZoomMode=function(){return vt};var st,rt=d.__private__.setPageMode=function(T){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(T)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+T+'" is not recognized.');te=T};d.__private__.getPageMode=function(){return te};var pt=d.__private__.setLayoutMode=function(T){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(T)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+T+'" is not recognized.');st=T};d.__private__.getLayoutMode=function(){return st},d.__private__.setDisplayMode=d.setDisplayMode=function(T,Y,Me){return Ne(T),pt(Y),rt(Me),this};var wt={title:"",subject:"",author:"",keywords:"",creator:""};d.__private__.getDocumentProperty=function(T){if(Object.keys(wt).indexOf(T)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return wt[T]},d.__private__.getDocumentProperties=function(){return wt},d.__private__.setDocumentProperties=d.setProperties=d.setDocumentProperties=function(T){for(var Y in wt)wt.hasOwnProperty(Y)&&T[Y]&&(wt[Y]=T[Y]);return this},d.__private__.setDocumentProperty=function(T,Y){if(Object.keys(wt).indexOf(T)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return wt[T]=Y};var ut,Pe,Ht,Pt,Dt,Tt={},be={},Ke=[],ct={},Ae={},Oe={},Ve={},At=null,Ct=0,Nt=[],Xt=new OL(d),kn=n.hotfixes||[],Yn={},wn={},ir=[],Wt=function T(Y,Me,Re,He,at,Et){if(!(this instanceof T))return new T(Y,Me,Re,He,at,Et);isNaN(Y)&&(Y=1),isNaN(Me)&&(Me=0),isNaN(Re)&&(Re=0),isNaN(He)&&(He=1),isNaN(at)&&(at=0),isNaN(Et)&&(Et=0),this._matrix=[Y,Me,Re,He,at,Et]};Object.defineProperty(Wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(T){this._matrix[0]=T}}),Object.defineProperty(Wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(T){this._matrix[1]=T}}),Object.defineProperty(Wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(T){this._matrix[2]=T}}),Object.defineProperty(Wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(T){this._matrix[3]=T}}),Object.defineProperty(Wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(T){this._matrix[4]=T}}),Object.defineProperty(Wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(T){this._matrix[5]=T}}),Object.defineProperty(Wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(T){this._matrix[0]=T}}),Object.defineProperty(Wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(T){this._matrix[1]=T}}),Object.defineProperty(Wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(T){this._matrix[2]=T}}),Object.defineProperty(Wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(T){this._matrix[3]=T}}),Object.defineProperty(Wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(T){this._matrix[4]=T}}),Object.defineProperty(Wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(T){this._matrix[5]=T}}),Object.defineProperty(Wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Wt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Wt.prototype.join=function(T){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(F).join(T)},Wt.prototype.multiply=function(T){var Y=T.sx*this.sx+T.shy*this.shx,Me=T.sx*this.shy+T.shy*this.sy,Re=T.shx*this.sx+T.sy*this.shx,He=T.shx*this.shy+T.sy*this.sy,at=T.tx*this.sx+T.ty*this.shx+this.tx,Et=T.tx*this.shy+T.ty*this.sy+this.ty;return new Wt(Y,Me,Re,He,at,Et)},Wt.prototype.decompose=function(){var T=this.sx,Y=this.shy,Me=this.shx,Re=this.sy,He=this.tx,at=this.ty,Et=Math.sqrt(T*T+Y*Y),Gt=(T/=Et)*Me+(Y/=Et)*Re;Me-=T*Gt,Re-=Y*Gt;var ln=Math.sqrt(Me*Me+Re*Re);return Gt/=ln,T*(Re/=ln)<Y*(Me/=ln)&&(T=-T,Y=-Y,Gt=-Gt,Et=-Et),{scale:new Wt(Et,0,0,ln,0,0),translate:new Wt(1,0,0,1,He,at),rotate:new Wt(T,Y,-Y,T,0,0),skew:new Wt(1,0,Gt,1,0,0)}},Wt.prototype.toString=function(T){return this.join(" ")},Wt.prototype.inversed=function(){var T=this.sx,Y=this.shy,Me=this.shx,Re=this.sy,He=this.tx,at=this.ty,Et=1/(T*Re-Y*Me),Gt=Re*Et,ln=-Y*Et,bn=-Me*Et,cn=T*Et;return new Wt(Gt,ln,bn,cn,-Gt*He-bn*at,-ln*He-cn*at)},Wt.prototype.applyToPoint=function(T){var Y=T.x*this.sx+T.y*this.shx+this.tx,Me=T.x*this.shy+T.y*this.sy+this.ty;return new Ms(Y,Me)},Wt.prototype.applyToRectangle=function(T){var Y=this.applyToPoint(T),Me=this.applyToPoint(new Ms(T.x+T.w,T.y+T.h));return new Xu(Y.x,Y.y,Me.x-Y.x,Me.y-Y.y)},Wt.prototype.clone=function(){var T=this.sx,Y=this.shy,Me=this.shx,Re=this.sy,He=this.tx,at=this.ty;return new Wt(T,Y,Me,Re,He,at)},d.Matrix=Wt;var Yi=d.matrixMult=function(T,Y){return Y.multiply(T)},Zi=new Wt(1,0,0,1,0,0);d.unitMatrix=d.identityMatrix=Zi;var Ir=function(T,Y){if(!Ae[T]){var Me=(Y instanceof Dh?"Sh":"P")+(Object.keys(ct).length+1).toString(10);Y.id=Me,Ae[T]=Me,ct[Me]=Y,Xt.publish("addPattern",Y)}};d.ShadingPattern=Dh,d.TilingPattern=bd,d.addShadingPattern=function(T,Y){return R("addShadingPattern()"),Ir(T,Y),this},d.beginTilingPattern=function(T){R("beginTilingPattern()"),zs(T.boundingBox[0],T.boundingBox[1],T.boundingBox[2]-T.boundingBox[0],T.boundingBox[3]-T.boundingBox[1],T.matrix)},d.endTilingPattern=function(T,Y){R("endTilingPattern()"),Y.stream=ke[q].join(`
`),Ir(T,Y),Xt.publish("endTilingPattern",Y),ir.pop().restore()};var ar=d.__private__.newObject=function(){var T=dr();return lr(T,!0),T},dr=d.__private__.newObjectDeferred=function(){return se++,me[se]=function(){return Ce},se},lr=function(T,Y){return Y=typeof Y=="boolean"&&Y,me[T]=Ce,Y&&ae(T+" 0 obj"),T},yn=d.__private__.newAdditionalObject=function(){var T={objId:dr(),content:""};return $e.push(T),T},Ki=dr(),Bi=dr(),$=d.__private__.decodeColorString=function(T){var Y=T.split(" ");if(Y.length!==2||Y[1]!=="g"&&Y[1]!=="G")Y.length===5&&(Y[4]==="k"||Y[4]==="K")&&(Y=[(1-Y[0])*(1-Y[3]),(1-Y[1])*(1-Y[3]),(1-Y[2])*(1-Y[3]),"r"]);else{var Me=parseFloat(Y[0]);Y=[Me,Me,Me,"r"]}for(var Re="#",He=0;He<3;He++)Re+=("0"+Math.floor(255*parseFloat(Y[He])).toString(16)).slice(-2);return Re},B=d.__private__.encodeColorString=function(T){var Y;typeof T=="string"&&(T={ch1:T});var Me=T.ch1,Re=T.ch2,He=T.ch3,at=T.ch4,Et=T.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Me=="string"&&Me.charAt(0)!=="#"){var Gt=new cO(Me);if(Gt.ok)Me=Gt.toHex();else if(!/^\d*\.?\d*$/.test(Me))throw new Error('Invalid color "'+Me+'" passed to jsPDF.encodeColorString.')}if(typeof Me=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Me)&&(Me="#"+Me[1]+Me[1]+Me[2]+Me[2]+Me[3]+Me[3]),typeof Me=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Me)){var ln=parseInt(Me.substr(1),16);Me=ln>>16&255,Re=ln>>8&255,He=255&ln}if(Re===void 0||at===void 0&&Me===Re&&Re===He)if(typeof Me=="string")Y=Me+" "+Et[0];else switch(T.precision){case 2:Y=L(Me/255)+" "+Et[0];break;case 3:default:Y=N(Me/255)+" "+Et[0]}else if(at===void 0||Br(at)==="object"){if(at&&!isNaN(at.a)&&at.a===0)return Y=["1.","1.","1.",Et[1]].join(" ");if(typeof Me=="string")Y=[Me,Re,He,Et[1]].join(" ");else switch(T.precision){case 2:Y=[L(Me/255),L(Re/255),L(He/255),Et[1]].join(" ");break;default:case 3:Y=[N(Me/255),N(Re/255),N(He/255),Et[1]].join(" ")}}else if(typeof Me=="string")Y=[Me,Re,He,at,Et[2]].join(" ");else switch(T.precision){case 2:Y=[L(Me),L(Re),L(He),L(at),Et[2]].join(" ");break;case 3:default:Y=[N(Me),N(Re),N(He),N(at),Et[2]].join(" ")}return Y},re=d.__private__.getFilters=function(){return s},ve=d.__private__.putStream=function(T){var Y=(T=T||{}).data||"",Me=T.filters||re(),Re=T.alreadyAppliedFilters||[],He=T.addLength1||!1,at=Y.length,Et=T.objectId,Gt=function(li){return li};if(c!==null&&Et===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(Gt=Qi.encryptor(Et,0));var ln={};Me===!0&&(Me=["FlateEncode"]);var bn=T.additionalKeyValues||[],cn=(ln=vn.API.processDataByFilters!==void 0?vn.API.processDataByFilters(Y,Me):{data:Y,reverseChain:[]}).reverseChain+(Array.isArray(Re)?Re.join(" "):Re.toString());if(ln.data.length!==0&&(bn.push({key:"Length",value:ln.data.length}),He===!0&&bn.push({key:"Length1",value:at})),cn.length!=0)if(cn.split("/").length-1==1)bn.push({key:"Filter",value:cn});else{bn.push({key:"Filter",value:"["+cn+"]"});for(var En=0;En<bn.length;En+=1)if(bn[En].key==="DecodeParms"){for(var _r=[],vr=0;vr<ln.reverseChain.split("/").length-1;vr+=1)_r.push("null");_r.push(bn[En].value),bn[En].value="["+_r.join(" ")+"]"}}ae("<<");for(var Ar=0;Ar<bn.length;Ar++)ae("/"+bn[Ar].key+" "+bn[Ar].value);ae(">>"),ln.data.length!==0&&(ae("stream"),ae(Gt(ln.data)),ae("endstream"))},ge=d.__private__.putPage=function(T){var Y=T.number,Me=T.data,Re=T.objId,He=T.contentsObjId;lr(Re,!0),ae("<</Type /Page"),ae("/Parent "+T.rootDictionaryObjId+" 0 R"),ae("/Resources "+T.resourceDictionaryObjId+" 0 R"),ae("/MediaBox ["+parseFloat(F(T.mediaBox.bottomLeftX))+" "+parseFloat(F(T.mediaBox.bottomLeftY))+" "+F(T.mediaBox.topRightX)+" "+F(T.mediaBox.topRightY)+"]"),T.cropBox!==null&&ae("/CropBox ["+F(T.cropBox.bottomLeftX)+" "+F(T.cropBox.bottomLeftY)+" "+F(T.cropBox.topRightX)+" "+F(T.cropBox.topRightY)+"]"),T.bleedBox!==null&&ae("/BleedBox ["+F(T.bleedBox.bottomLeftX)+" "+F(T.bleedBox.bottomLeftY)+" "+F(T.bleedBox.topRightX)+" "+F(T.bleedBox.topRightY)+"]"),T.trimBox!==null&&ae("/TrimBox ["+F(T.trimBox.bottomLeftX)+" "+F(T.trimBox.bottomLeftY)+" "+F(T.trimBox.topRightX)+" "+F(T.trimBox.topRightY)+"]"),T.artBox!==null&&ae("/ArtBox ["+F(T.artBox.bottomLeftX)+" "+F(T.artBox.bottomLeftY)+" "+F(T.artBox.topRightX)+" "+F(T.artBox.topRightY)+"]"),typeof T.userUnit=="number"&&T.userUnit!==1&&ae("/UserUnit "+T.userUnit),Xt.publish("putPage",{objId:Re,pageContext:Nt[Y],pageNumber:Y,page:Me}),ae("/Contents "+He+" 0 R"),ae(">>"),ae("endobj");var at=Me.join(`
`);return _===S.ADVANCED&&(at+=`
Q`),lr(He,!0),ve({data:at,filters:re(),objectId:He}),ae("endobj"),Re},_e=d.__private__.putPages=function(){var T,Y,Me=[];for(T=1;T<=Ct;T++)Nt[T].objId=dr(),Nt[T].contentsObjId=dr();for(T=1;T<=Ct;T++)Me.push(ge({number:T,data:ke[T],objId:Nt[T].objId,contentsObjId:Nt[T].contentsObjId,mediaBox:Nt[T].mediaBox,cropBox:Nt[T].cropBox,bleedBox:Nt[T].bleedBox,trimBox:Nt[T].trimBox,artBox:Nt[T].artBox,userUnit:Nt[T].userUnit,rootDictionaryObjId:Ki,resourceDictionaryObjId:Bi}));lr(Ki,!0),ae("<</Type /Pages");var Re="/Kids [";for(Y=0;Y<Ct;Y++)Re+=Me[Y]+" 0 R ";ae(Re+"]"),ae("/Count "+Ct),ae(">>"),ae("endobj"),Xt.publish("postPutPages")},qe=function(T){Xt.publish("putFont",{font:T,out:ae,newObject:ar,putStream:ve}),T.isAlreadyPutted!==!0&&(T.objectNumber=ar(),ae("<<"),ae("/Type /Font"),ae("/BaseFont /"+hm(T.postScriptName)),ae("/Subtype /Type1"),typeof T.encoding=="string"&&ae("/Encoding /"+T.encoding),ae("/FirstChar 32"),ae("/LastChar 255"),ae(">>"),ae("endobj"))},Xe=function(){for(var T in Tt)Tt.hasOwnProperty(T)&&(h===!1||h===!0&&f.hasOwnProperty(T))&&qe(Tt[T])},it=function(T){T.objectNumber=ar();var Y=[];Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Form"}),Y.push({key:"BBox",value:"["+[F(T.x),F(T.y),F(T.x+T.width),F(T.y+T.height)].join(" ")+"]"}),Y.push({key:"Matrix",value:"["+T.matrix.toString()+"]"});var Me=T.pages[1].join(`
`);ve({data:Me,additionalKeyValues:Y,objectId:T.objectNumber}),ae("endobj")},tt=function(){for(var T in Yn)Yn.hasOwnProperty(T)&&it(Yn[T])},dt=function(T,Y){var Me,Re=[],He=1/(Y-1);for(Me=0;Me<1;Me+=He)Re.push(Me);if(Re.push(1),T[0].offset!=0){var at={offset:0,color:T[0].color};T.unshift(at)}if(T[T.length-1].offset!=1){var Et={offset:1,color:T[T.length-1].color};T.push(Et)}for(var Gt="",ln=0,bn=0;bn<Re.length;bn++){for(Me=Re[bn];Me>T[ln+1].offset;)ln++;var cn=T[ln].offset,En=(Me-cn)/(T[ln+1].offset-cn),_r=T[ln].color,vr=T[ln+1].color;Gt+=Q(Math.round((1-En)*_r[0]+En*vr[0]).toString(16))+Q(Math.round((1-En)*_r[1]+En*vr[1]).toString(16))+Q(Math.round((1-En)*_r[2]+En*vr[2]).toString(16))}return Gt.trim()},nt=function(T,Y){Y||(Y=21);var Me=ar(),Re=dt(T.colors,Y),He=[];He.push({key:"FunctionType",value:"0"}),He.push({key:"Domain",value:"[0.0 1.0]"}),He.push({key:"Size",value:"["+Y+"]"}),He.push({key:"BitsPerSample",value:"8"}),He.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),He.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ve({data:Re,additionalKeyValues:He,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Me}),ae("endobj"),T.objectNumber=ar(),ae("<< /ShadingType "+T.type),ae("/ColorSpace /DeviceRGB");var at="/Coords ["+F(parseFloat(T.coords[0]))+" "+F(parseFloat(T.coords[1]))+" ";T.type===2?at+=F(parseFloat(T.coords[2]))+" "+F(parseFloat(T.coords[3])):at+=F(parseFloat(T.coords[2]))+" "+F(parseFloat(T.coords[3]))+" "+F(parseFloat(T.coords[4]))+" "+F(parseFloat(T.coords[5])),ae(at+="]"),T.matrix&&ae("/Matrix ["+T.matrix.toString()+"]"),ae("/Function "+Me+" 0 R"),ae("/Extend [true true]"),ae(">>"),ae("endobj")},jt=function(T,Y){var Me=dr(),Re=ar();Y.push({resourcesOid:Me,objectOid:Re}),T.objectNumber=Re;var He=[];He.push({key:"Type",value:"/Pattern"}),He.push({key:"PatternType",value:"1"}),He.push({key:"PaintType",value:"1"}),He.push({key:"TilingType",value:"1"}),He.push({key:"BBox",value:"["+T.boundingBox.map(F).join(" ")+"]"}),He.push({key:"XStep",value:F(T.xStep)}),He.push({key:"YStep",value:F(T.yStep)}),He.push({key:"Resources",value:Me+" 0 R"}),T.matrix&&He.push({key:"Matrix",value:"["+T.matrix.toString()+"]"}),ve({data:T.stream,additionalKeyValues:He,objectId:T.objectNumber}),ae("endobj")},It=function(T){var Y;for(Y in ct)ct.hasOwnProperty(Y)&&(ct[Y]instanceof Dh?nt(ct[Y]):ct[Y]instanceof bd&&jt(ct[Y],T))},Ot=function(T){for(var Y in T.objectNumber=ar(),ae("<<"),T)switch(Y){case"opacity":ae("/ca "+L(T[Y]));break;case"stroke-opacity":ae("/CA "+L(T[Y]))}ae(">>"),ae("endobj")},rn=function(){var T;for(T in Oe)Oe.hasOwnProperty(T)&&Ot(Oe[T])},sn=function(){for(var T in ae("/XObject <<"),Yn)Yn.hasOwnProperty(T)&&Yn[T].objectNumber>=0&&ae("/"+T+" "+Yn[T].objectNumber+" 0 R");Xt.publish("putXobjectDict"),ae(">>")},mt=function(){Qi.oid=ar(),ae("<<"),ae("/Filter /Standard"),ae("/V "+Qi.v),ae("/R "+Qi.r),ae("/U <"+Qi.toHexString(Qi.U)+">"),ae("/O <"+Qi.toHexString(Qi.O)+">"),ae("/P "+Qi.P),ae(">>"),ae("endobj")},ht=function(){for(var T in ae("/Font <<"),Tt)Tt.hasOwnProperty(T)&&(h===!1||h===!0&&f.hasOwnProperty(T))&&ae("/"+T+" "+Tt[T].objectNumber+" 0 R");ae(">>")},an=function(){if(Object.keys(ct).length>0){for(var T in ae("/Shading <<"),ct)ct.hasOwnProperty(T)&&ct[T]instanceof Dh&&ct[T].objectNumber>=0&&ae("/"+T+" "+ct[T].objectNumber+" 0 R");Xt.publish("putShadingPatternDict"),ae(">>")}},Zt=function(T){if(Object.keys(ct).length>0){for(var Y in ae("/Pattern <<"),ct)ct.hasOwnProperty(Y)&&ct[Y]instanceof d.TilingPattern&&ct[Y].objectNumber>=0&&ct[Y].objectNumber<T&&ae("/"+Y+" "+ct[Y].objectNumber+" 0 R");Xt.publish("putTilingPatternDict"),ae(">>")}},Mn=function(){if(Object.keys(Oe).length>0){var T;for(T in ae("/ExtGState <<"),Oe)Oe.hasOwnProperty(T)&&Oe[T].objectNumber>=0&&ae("/"+T+" "+Oe[T].objectNumber+" 0 R");Xt.publish("putGStateDict"),ae(">>")}},pn=function(T){lr(T.resourcesOid,!0),ae("<<"),ae("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),ht(),an(),Zt(T.objectOid),Mn(),sn(),ae(">>"),ae("endobj")},xn=function(){var T=[];Xe(),rn(),tt(),It(T),Xt.publish("putResources"),T.forEach(pn),pn({resourcesOid:Bi,objectOid:Number.MAX_SAFE_INTEGER}),Xt.publish("postPutResources")},or=function(){Xt.publish("putAdditionalObjects");for(var T=0;T<$e.length;T++){var Y=$e[T];lr(Y.objId,!0),ae(Y.content),ae("endobj")}Xt.publish("postPutAdditionalObjects")},Kn=function(T){be[T.fontName]=be[T.fontName]||{},be[T.fontName][T.fontStyle]=T.id},ur=function(T,Y,Me,Re,He){var at={id:"F"+(Object.keys(Tt).length+1).toString(10),postScriptName:T,fontName:Y,fontStyle:Me,encoding:Re,isStandardFont:He||!1,metadata:{}};return Xt.publish("addFont",{font:at,instance:this}),Tt[at.id]=at,Kn(at),at.id},Kr=function(T){for(var Y=0,Me=Ge.length;Y<Me;Y++){var Re=ur.call(this,T[Y][0],T[Y][1],T[Y][2],Ge[Y][3],!0);h===!1&&(f[Re]=!0);var He=T[Y][0].split("-");Kn({id:Re,fontName:He[0],fontStyle:He[1]||""})}Xt.publish("addFonts",{fonts:Tt,dictionary:be})},fn=function(T){return T.foo=function(){try{return T.apply(this,arguments)}catch(Re){var Y=Re.stack||"";~Y.indexOf(" at ")&&(Y=Y.split(" at ")[1]);var Me="Error in function "+Y.split(`
`)[0].split("<")[0]+": "+Re.message;if(!_n.console)throw new Error(Me);_n.console.error(Me,Re),_n.alert&&alert(Me)}},T.foo.bar=T,T.foo},Er=function(T,Y){var Me,Re,He,at,Et,Gt,ln,bn,cn;if(He=(Y=Y||{}).sourceEncoding||"Unicode",Et=Y.outputEncoding,(Y.autoencode||Et)&&Tt[ut].metadata&&Tt[ut].metadata[He]&&Tt[ut].metadata[He].encoding&&(at=Tt[ut].metadata[He].encoding,!Et&&Tt[ut].encoding&&(Et=Tt[ut].encoding),!Et&&at.codePages&&(Et=at.codePages[0]),typeof Et=="string"&&(Et=at[Et]),Et)){for(ln=!1,Gt=[],Me=0,Re=T.length;Me<Re;Me++)(bn=Et[T.charCodeAt(Me)])?Gt.push(String.fromCharCode(bn)):Gt.push(T[Me]),Gt[Me].charCodeAt(0)>>8&&(ln=!0);T=Gt.join("")}for(Me=T.length;ln===void 0&&Me!==0;)T.charCodeAt(Me-1)>>8&&(ln=!0),Me--;if(!ln)return T;for(Gt=Y.noBOM?[]:[254,255],Me=0,Re=T.length;Me<Re;Me++){if((cn=(bn=T.charCodeAt(Me))>>8)>>8)throw new Error("Character at position "+Me+" of string '"+T+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Gt.push(cn),Gt.push(bn-(cn<<8))}return String.fromCharCode.apply(void 0,Gt)},Pn=d.__private__.pdfEscape=d.pdfEscape=function(T,Y){return Er(T,Y).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vn=d.__private__.beginPage=function(T){ke[++Ct]=[],Nt[Ct]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(T[0]),topRightY:Number(T[1])}},Ji(Ct),Te(ke[q])},Nr=function(T,Y){var Me,Re,He;switch(t=Y||t,typeof T=="string"&&(Me=g(T.toLowerCase()),Array.isArray(Me)&&(Re=Me[0],He=Me[1])),Array.isArray(T)&&(Re=T[0]*Pe,He=T[1]*Pe),isNaN(Re)&&(Re=i[0],He=i[1]),(Re>14400||He>14400)&&(Wr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Re=Math.min(14400,Re),He=Math.min(14400,He)),i=[Re,He],t.substr(0,1)){case"l":He>Re&&(i=[He,Re]);break;case"p":Re>He&&(i=[He,Re])}Vn(i),sp(Wu),ae(bo),Na!==0&&ae(Na+" J"),Mo!==0&&ae(Mo+" j"),Xt.publish("addPage",{pageNumber:Ct})},oa=function(T){T>0&&T<=Ct&&(ke.splice(T,1),Nt.splice(T,1),Ct--,q>Ct&&(q=Ct),this.setPage(q))},Ji=function(T){T>0&&T<=Ct&&(q=T)},Bs=d.__private__.getNumberOfPages=d.getNumberOfPages=function(){return ke.length-1},Hu=function(T,Y,Me){var Re,He=void 0;return Me=Me||{},T=T!==void 0?T:Tt[ut].fontName,Y=Y!==void 0?Y:Tt[ut].fontStyle,Re=T.toLowerCase(),be[Re]!==void 0&&be[Re][Y]!==void 0?He=be[Re][Y]:be[T]!==void 0&&be[T][Y]!==void 0?He=be[T][Y]:Me.disableWarning===!1&&Wr.warn("Unable to look up font label for font '"+T+"', '"+Y+"'. Refer to getFontList() for available fonts."),He||Me.noFallback||(He=be.times[Y])==null&&(He=be.times.normal),He},qc=d.__private__.putInfo=function(){var T=ar(),Y=function(Re){return Re};for(var Me in c!==null&&(Y=Qi.encryptor(T,0)),ae("<<"),ae("/Producer ("+Pn(Y("jsPDF "+vn.version))+")"),wt)wt.hasOwnProperty(Me)&&wt[Me]&&ae("/"+Me.substr(0,1).toUpperCase()+Me.substr(1)+" ("+Pn(Y(wt[Me]))+")");ae("/CreationDate ("+Pn(Y(K))+")"),ae(">>"),ae("endobj")},fl=d.__private__.putCatalog=function(T){var Y=(T=T||{}).rootDictionaryObjId||Ki;switch(ar(),ae("<<"),ae("/Type /Catalog"),ae("/Pages "+Y+" 0 R"),vt||(vt="fullwidth"),vt){case"fullwidth":ae("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ae("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ae("/OpenAction [3 0 R /Fit]");break;case"original":ae("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Me=""+vt;Me.substr(Me.length-1)==="%"&&(vt=parseInt(vt)/100),typeof vt=="number"&&ae("/OpenAction [3 0 R /XYZ null null "+L(vt)+"]")}switch(st||(st="continuous"),st){case"continuous":ae("/PageLayout /OneColumn");break;case"single":ae("/PageLayout /SinglePage");break;case"two":case"twoleft":ae("/PageLayout /TwoColumnLeft");break;case"tworight":ae("/PageLayout /TwoColumnRight")}te&&ae("/PageMode /"+te),Xt.publish("putCatalog"),ae(">>"),ae("endobj")},$c=d.__private__.putTrailer=function(){ae("trailer"),ae("<<"),ae("/Size "+(se+1)),ae("/Root "+se+" 0 R"),ae("/Info "+(se-1)+" 0 R"),c!==null&&ae("/Encrypt "+Qi.oid+" 0 R"),ae("/ID [ <"+ee+"> <"+ee+"> ]"),ae(">>")},Tg=d.__private__.putHeader=function(){ae("%PDF-"+v),ae("%")},Cg=d.__private__.putXRef=function(){var T="0000000000";ae("xref"),ae("0 "+(se+1)),ae("0000000000 65535 f ");for(var Y=1;Y<=se;Y++)typeof me[Y]=="function"?ae((T+me[Y]()).slice(-10)+" 00000 n "):me[Y]!==void 0?ae((T+me[Y]).slice(-10)+" 00000 n "):ae("0000000000 00000 n ")},sa=d.__private__.buildDocument=function(){Ue(),Te(Se),Xt.publish("buildDocument"),Tg(),_e(),or(),xn(),c!==null&&mt(),qc(),fl();var T=Ce;return Cg(),$c(),ae("startxref"),ae(""+T),ae("%%EOF"),Te(ke[q]),Se.join(`
`)},su=d.__private__.getBlob=function(T){return new Blob([Ye(T)],{type:"application/pdf"})},Ra=d.output=d.__private__.output=fn(function(T,Y){switch(typeof(Y=Y||{})=="string"?Y={filename:Y}:Y.filename=Y.filename||"generated.pdf",T){case void 0:return sa();case"save":d.save(Y.filename);break;case"arraybuffer":return Ye(sa());case"blob":return su(sa());case"bloburi":case"bloburl":if(_n.URL!==void 0&&typeof _n.URL.createObjectURL=="function")return _n.URL&&_n.URL.createObjectURL(su(sa()))||void 0;Wr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Me="",Re=sa();try{Me=sE(Re)}catch{Me=sE(unescape(encodeURIComponent(Re)))}return"data:application/pdf;filename="+Y.filename+";base64,"+Me;case"pdfobjectnewwindow":if(Object.prototype.toString.call(_n)==="[object Window]"){var He="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",at=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Y.pdfObjectUrl&&(He=Y.pdfObjectUrl,at="");var Et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+He+'"'+at+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Y)+");<\/script></body></html>",Gt=_n.open();return Gt!==null&&Gt.document.write(Et),Gt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(_n)==="[object Window]"){var ln='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Y.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Y.filename+'" width="500px" height="400px" /></body></html>',bn=_n.open();if(bn!==null){bn.document.write(ln);var cn=this;bn.document.documentElement.querySelector("#pdfViewer").onload=function(){bn.document.title=Y.filename,bn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(cn.output("bloburl"))}}return bn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(_n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var En='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Y)+'"></iframe></body></html>',_r=_n.open();if(_r!==null&&(_r.document.write(En),_r.document.title=Y.filename),_r||typeof safari>"u")return _r;break;case"datauri":case"dataurl":return _n.document.location.href=this.output("datauristring",Y);default:return null}}),ip=function(T){return Array.isArray(kn)===!0&&kn.indexOf(T)>-1};switch(r){case"pt":Pe=1;break;case"mm":Pe=72/25.4;break;case"cm":Pe=72/2.54;break;case"in":Pe=72;break;case"px":Pe=ip("px_scaling")==1?.75:96/72;break;case"pc":case"em":Pe=12;break;case"ex":Pe=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Pe=r}var Qi=null;ie(),V();var nr=function(T){return c!==null?Qi.encryptor(T,0):function(Y){return Y}},Rf=d.__private__.getPageInfo=d.getPageInfo=function(T){if(isNaN(T)||T%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Nt[T].objId,pageNumber:T,pageContext:Nt[T]}},Sn=d.__private__.getPageInfoByObjId=function(T){if(isNaN(T)||T%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Y in Nt)if(Nt[Y].objId===T)break;return Rf(Y)},op=d.__private__.getCurrentPageInfo=d.getCurrentPageInfo=function(){return{objId:Nt[q].objId,pageNumber:q,pageContext:Nt[q]}};d.addPage=function(){return Nr.apply(this,arguments),this},d.setPage=function(){return Ji.apply(this,arguments),Te.call(this,ke[q]),this},d.insertPage=function(T){return this.addPage(),this.movePage(q,T),this},d.movePage=function(T,Y){var Me,Re;if(T>Y){Me=ke[T],Re=Nt[T];for(var He=T;He>Y;He--)ke[He]=ke[He-1],Nt[He]=Nt[He-1];ke[Y]=Me,Nt[Y]=Re,this.setPage(Y)}else if(T<Y){Me=ke[T],Re=Nt[T];for(var at=T;at<Y;at++)ke[at]=ke[at+1],Nt[at]=Nt[at+1];ke[Y]=Me,Nt[Y]=Re,this.setPage(Y)}return this},d.deletePage=function(){return oa.apply(this,arguments),this},d.__private__.text=d.text=function(T,Y,Me,Re,He){var at,Et,Gt,ln,bn,cn,En,_r,vr,Ar=(Re=Re||{}).scope||this;if(typeof T=="number"&&typeof Y=="number"&&(typeof Me=="string"||Array.isArray(Me))){var li=Me;Me=Y,Y=T,T=li}if(arguments[3]instanceof Wt?(R("The transform parameter of text() with a Matrix value"),vr=He):(Gt=arguments[4],ln=arguments[5],Br(En=arguments[3])==="object"&&En!==null||(typeof Gt=="string"&&(ln=Gt,Gt=null),typeof En=="string"&&(ln=En,En=null),typeof En=="number"&&(Gt=En,En=null),Re={flags:En,angle:Gt,align:ln})),isNaN(Y)||isNaN(Me)||T==null)throw new Error("Invalid arguments passed to jsPDF.text");if(T.length===0)return Ar;var zi="",Es=!1,zo=typeof Re.lineHeightFactor=="number"?Re.lineHeightFactor:ka,ui=Ar.internal.scaleFactor;function Eo(Jn){return Jn=Jn.split("	").join(Array(Re.TabLen||9).join(" ")),Pn(Jn,En)}function Tr(Jn){for(var cr,Xr=Jn.concat(),hi=[],za=Xr.length;za--;)typeof(cr=Xr.shift())=="string"?hi.push(cr):Array.isArray(Jn)&&(cr.length===1||cr[1]===void 0&&cr[2]===void 0)?hi.push(cr[0]):hi.push([cr[0],cr[1],cr[2]]);return hi}function gl(Jn,cr){var Xr;if(typeof Jn=="string")Xr=cr(Jn)[0];else if(Array.isArray(Jn)){for(var hi,za,oh=Jn.concat(),ec=[],Nf=oh.length;Nf--;)typeof(hi=oh.shift())=="string"?ec.push(cr(hi)[0]):Array.isArray(hi)&&typeof hi[0]=="string"&&(za=cr(hi[0],hi[1],hi[2]),ec.push([za[0],za[1],za[2]]));Xr=ec}return Xr}var Ao=!1,eh=!0;if(typeof T=="string")Ao=!0;else if(Array.isArray(T)){var th=T.concat();Et=[];for(var cu,Hi=th.length;Hi--;)(typeof(cu=th.shift())!="string"||Array.isArray(cu)&&typeof cu[0]!="string")&&(eh=!1);Ao=eh}if(Ao===!1)throw new Error('Type of text must be string or Array. "'+T+'" is not recognized.');typeof T=="string"&&(T=T.match(/[\r?\n]/)?T.split(/\r\n|\r|\n/g):[T]);var Yu=et/Ar.internal.scaleFactor,Da=Yu*(zo-1);switch(Re.baseline){case"bottom":Me-=Da;break;case"top":Me+=Yu-Da;break;case"hanging":Me+=Yu-2*Da;break;case"middle":Me+=Yu/2-Da}if((cn=Re.maxWidth||0)>0&&(typeof T=="string"?T=Ar.splitTextToSize(T,cn):Object.prototype.toString.call(T)==="[object Array]"&&(T=T.reduce(function(Jn,cr){return Jn.concat(Ar.splitTextToSize(cr,cn))},[]))),at={text:T,x:Y,y:Me,options:Re,mutex:{pdfEscape:Pn,activeFontKey:ut,fonts:Tt,activeFontSize:et}},Xt.publish("preProcessText",at),T=at.text,Gt=(Re=at.options).angle,!(vr instanceof Wt)&&Gt&&typeof Gt=="number"){Gt*=Math.PI/180,Re.rotationDirection===0&&(Gt=-Gt),_===S.ADVANCED&&(Gt=-Gt);var ua=Math.cos(Gt),Zu=Math.sin(Gt);vr=new Wt(ua,Zu,-Zu,ua,0,0)}else Gt&&Gt instanceof Wt&&(vr=Gt);_!==S.ADVANCED||vr||(vr=Zi),(bn=Re.charSpace||au)!==void 0&&(zi+=F(z(bn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(_r=Re.horizontalScale)!==void 0&&(zi+=F(100*_r)+` Tz
`),Re.lang;var eo=-1,nh=Re.renderingMode!==void 0?Re.renderingMode:Re.stroke,rh=Ar.internal.getCurrentPageInfo().pageContext;switch(nh){case 0:case!1:case"fill":eo=0;break;case 1:case!0:case"stroke":eo=1;break;case 2:case"fillThenStroke":eo=2;break;case 3:case"invisible":eo=3;break;case 4:case"fillAndAddForClipping":eo=4;break;case 5:case"strokeAndAddPathForClipping":eo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":eo=6;break;case 7:case"addToPathForClipping":eo=7}var If=rh.usedRenderingMode!==void 0?rh.usedRenderingMode:-1;eo!==-1?zi+=eo+` Tr
`:If!==-1&&(zi+=`0 Tr
`),eo!==-1&&(rh.usedRenderingMode=eo),ln=Re.align||"left";var lo,Ku=et*zo,hu=Ar.internal.pageSize.getWidth(),Ho=Tt[ut];bn=Re.charSpace||au,cn=Re.maxWidth||0,En=Object.assign({autoencode:!0,noBOM:!0},Re.flags);var Hs=[],Gs=function(Jn){return Ar.getStringUnitWidth(Jn,{font:Ho,charSpace:bn,fontSize:et,doKerning:!1})*et/ui};if(Object.prototype.toString.call(T)==="[object Array]"){var Jr;Et=Tr(T),ln!=="left"&&(lo=Et.map(Gs));var uo,As=0;if(ln==="right"){Y-=lo[0],T=[],Hi=Et.length;for(var Oa=0;Oa<Hi;Oa++)Oa===0?(uo=Ia(Y),Jr=Ui(Me)):(uo=z(As-lo[Oa]),Jr=-Ku),T.push([Et[Oa],uo,Jr]),As=lo[Oa]}else if(ln==="center"){Y-=lo[0]/2,T=[],Hi=Et.length;for(var ca=0;ca<Hi;ca++)ca===0?(uo=Ia(Y),Jr=Ui(Me)):(uo=z((As-lo[ca])/2),Jr=-Ku),T.push([Et[ca],uo,Jr]),As=lo[ca]}else if(ln==="left"){T=[],Hi=Et.length;for(var Cr=0;Cr<Hi;Cr++)T.push(Et[Cr])}else if(ln==="justify"&&Ho.encoding==="Identity-H"){T=[],Hi=Et.length,cn=cn!==0?cn:hu;for(var Vs=0,Qr=0;Qr<Hi;Qr++)if(Jr=Qr===0?Ui(Me):-Ku,uo=Qr===0?Ia(Y):Vs,Qr<Hi-1){var Ju=z((cn-lo[Qr])/(Et[Qr].split(" ").length-1)),to=Et[Qr].split(" ");T.push([to[0]+" ",uo,Jr]),Vs=0;for(var ei=1;ei<to.length;ei++){var ha=(Gs(to[ei-1]+" "+to[ei])-Gs(to[ei]))*ui+Ju;ei==to.length-1?T.push([to[ei],ha,0]):T.push([to[ei]+" ",ha,0]),Vs-=ha}}else T.push([Et[Qr],uo,Jr]);T.push(["",Vs,0])}else{if(ln!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(T=[],Hi=Et.length,cn=cn!==0?cn:hu,Qr=0;Qr<Hi;Qr++)Jr=Qr===0?Ui(Me):-Ku,uo=Qr===0?Ia(Y):0,Qr<Hi-1?Hs.push(F(z((cn-lo[Qr])/(Et[Qr].split(" ").length-1)))):Hs.push(0),T.push([Et[Qr],uo,Jr])}}var Hr=typeof Re.R2L=="boolean"?Re.R2L:pe;Hr===!0&&(T=gl(T,function(Jn,cr,Xr){return[Jn.split("").reverse().join(""),cr,Xr]})),at={text:T,x:Y,y:Me,options:Re,mutex:{pdfEscape:Pn,activeFontKey:ut,fonts:Tt,activeFontSize:et}},Xt.publish("postProcessText",at),T=at.text,Es=at.mutex.isHex||!1;var Ci=Tt[ut].encoding;Ci!=="WinAnsiEncoding"&&Ci!=="StandardEncoding"||(T=gl(T,function(Jn,cr,Xr){return[Eo(Jn),cr,Xr]})),Et=Tr(T),T=[];for(var $r,Ba,Ws,fa=0,ih=1,ci=Array.isArray(Et[0])?ih:fa,Ua="",Qu=function(Jn,cr,Xr){var hi="";return Xr instanceof Wt?(Xr=typeof Re.angle=="number"?Yi(Xr,new Wt(1,0,0,1,Jn,cr)):Yi(new Wt(1,0,0,1,Jn,cr),Xr),_===S.ADVANCED&&(Xr=Yi(new Wt(1,0,0,-1,0,0),Xr)),hi=Xr.join(" ")+` Tm
`):hi=F(Jn)+" "+F(cr)+` Td
`,hi},Jo=0;Jo<Et.length;Jo++){switch(Ua="",ci){case ih:Ws=(Es?"<":"(")+Et[Jo][0]+(Es?">":")"),$r=parseFloat(Et[Jo][1]),Ba=parseFloat(Et[Jo][2]);break;case fa:Ws=(Es?"<":"(")+Et[Jo]+(Es?">":")"),$r=Ia(Y),Ba=Ui(Me)}Hs!==void 0&&Hs[Jo]!==void 0&&(Ua=Hs[Jo]+` Tw
`),Jo===0?T.push(Ua+Qu($r,Ba,vr)+Ws):ci===fa?T.push(Ua+Ws):ci===ih&&T.push(Ua+Qu($r,Ba,vr)+Ws)}T=ci===fa?T.join(` Tj
T* `):T.join(` Tj
`),T+=` Tj
`;var Pi=`BT
/`;return Pi+=ut+" "+et+` Tf
`,Pi+=F(et*zo)+` TL
`,Pi+=dl+`
`,Pi+=zi,Pi+=T,ae(Pi+="ET"),f[ut]=!0,Ar};var Pg=d.__private__.clip=d.clip=function(T){return ae(T==="evenodd"?"W*":"W"),this};d.clipEvenOdd=function(){return Pg("evenodd")},d.__private__.discardPath=d.discardPath=function(){return ae("n"),this};var La=d.__private__.isValidStyle=function(T){var Y=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(T)!==-1&&(Y=!0),Y};d.__private__.setDefaultPathOperation=d.setDefaultPathOperation=function(T){return La(T)&&(u=T),this};var pi=d.__private__.getStyle=d.getStyle=function(T){var Y=u;switch(T){case"D":case"S":Y="S";break;case"F":Y="f";break;case"FD":case"DF":Y="B";break;case"f":case"f*":case"B":case"B*":Y=T}return Y},Xc=d.close=function(){return ae("h"),this};d.stroke=function(){return ae("S"),this},d.fill=function(T){return Yc("f",T),this},d.fillEvenOdd=function(T){return Yc("f*",T),this},d.fillStroke=function(T){return Yc("B",T),this},d.fillStrokeEvenOdd=function(T){return Yc("B*",T),this};var Yc=function(T,Y){Br(Y)==="object"?Zc(Y,T):ae(T)},Gu=function(T){T===null||_===S.ADVANCED&&T===void 0||(T=pi(T),ae(T))};function Rg(T,Y,Me,Re,He){var at=new bd(Y||this.boundingBox,Me||this.xStep,Re||this.yStep,this.gState,He||this.matrix);at.stream=this.stream;var Et=T+"$$"+this.cloneIndex+++"$$";return Ir(Et,at),at}var Zc=function(T,Y){var Me=Ae[T.key],Re=ct[Me];if(Re instanceof Dh)ae("q"),ae(Us(Y)),Re.gState&&d.setGState(Re.gState),ae(T.matrix.toString()+" cm"),ae("/"+Me+" sh"),ae("Q");else if(Re instanceof bd){var He=new Wt(1,0,0,-1,0,ml());T.matrix&&(He=He.multiply(T.matrix||Zi),Me=Rg.call(Re,T.key,T.boundingBox,T.xStep,T.yStep,He).id),ae("q"),ae("/Pattern cs"),ae("/"+Me+" scn"),Re.gState&&d.setGState(Re.gState),ae(Y),ae("Q")}},Us=function(T){switch(T){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Lf=d.moveTo=function(T,Y){return ae(F(z(T))+" "+F(G(Y))+" m"),this},Vu=d.lineTo=function(T,Y){return ae(F(z(T))+" "+F(G(Y))+" l"),this},ao=d.curveTo=function(T,Y,Me,Re,He,at){return ae([F(z(T)),F(G(Y)),F(z(Me)),F(G(Re)),F(z(He)),F(G(at)),"c"].join(" ")),this};d.__private__.line=d.line=function(T,Y,Me,Re,He){if(isNaN(T)||isNaN(Y)||isNaN(Me)||isNaN(Re)||!La(He))throw new Error("Invalid arguments passed to jsPDF.line");return _===S.COMPAT?this.lines([[Me-T,Re-Y]],T,Y,[1,1],He||"S"):this.lines([[Me-T,Re-Y]],T,Y,[1,1]).stroke()},d.__private__.lines=d.lines=function(T,Y,Me,Re,He,at){var Et,Gt,ln,bn,cn,En,_r,vr,Ar,li,zi,Es;if(typeof T=="number"&&(Es=Me,Me=Y,Y=T,T=Es),Re=Re||[1,1],at=at||!1,isNaN(Y)||isNaN(Me)||!Array.isArray(T)||!Array.isArray(Re)||!La(He)||typeof at!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Lf(Y,Me),Et=Re[0],Gt=Re[1],bn=T.length,li=Y,zi=Me,ln=0;ln<bn;ln++)(cn=T[ln]).length===2?(li=cn[0]*Et+li,zi=cn[1]*Gt+zi,Vu(li,zi)):(En=cn[0]*Et+li,_r=cn[1]*Gt+zi,vr=cn[2]*Et+li,Ar=cn[3]*Gt+zi,li=cn[4]*Et+li,zi=cn[5]*Gt+zi,ao(En,_r,vr,Ar,li,zi));return at&&Xc(),Gu(He),this},d.path=function(T){for(var Y=0;Y<T.length;Y++){var Me=T[Y],Re=Me.c;switch(Me.op){case"m":Lf(Re[0],Re[1]);break;case"l":Vu(Re[0],Re[1]);break;case"c":ao.apply(this,Re);break;case"h":Xc()}}return this},d.__private__.rect=d.rect=function(T,Y,Me,Re,He){if(isNaN(T)||isNaN(Y)||isNaN(Me)||isNaN(Re)||!La(He))throw new Error("Invalid arguments passed to jsPDF.rect");return _===S.COMPAT&&(Re=-Re),ae([F(z(T)),F(G(Y)),F(z(Me)),F(z(Re)),"re"].join(" ")),Gu(He),this},d.__private__.triangle=d.triangle=function(T,Y,Me,Re,He,at,Et){if(isNaN(T)||isNaN(Y)||isNaN(Me)||isNaN(Re)||isNaN(He)||isNaN(at)||!La(Et))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Me-T,Re-Y],[He-Me,at-Re],[T-He,Y-at]],T,Y,[1,1],Et,!0),this},d.__private__.roundedRect=d.roundedRect=function(T,Y,Me,Re,He,at,Et){if(isNaN(T)||isNaN(Y)||isNaN(Me)||isNaN(Re)||isNaN(He)||isNaN(at)||!La(Et))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Gt=4/3*(Math.SQRT2-1);return He=Math.min(He,.5*Me),at=Math.min(at,.5*Re),this.lines([[Me-2*He,0],[He*Gt,0,He,at-at*Gt,He,at],[0,Re-2*at],[0,at*Gt,-He*Gt,at,-He,at],[2*He-Me,0],[-He*Gt,0,-He,-at*Gt,-He,-at],[0,2*at-Re],[0,-at*Gt,He*Gt,-at,He,-at]],T+He,Y,[1,1],Et,!0),this},d.__private__.ellipse=d.ellipse=function(T,Y,Me,Re,He){if(isNaN(T)||isNaN(Y)||isNaN(Me)||isNaN(Re)||!La(He))throw new Error("Invalid arguments passed to jsPDF.ellipse");var at=4/3*(Math.SQRT2-1)*Me,Et=4/3*(Math.SQRT2-1)*Re;return Lf(T+Me,Y),ao(T+Me,Y-Et,T+at,Y-Re,T,Y-Re),ao(T-at,Y-Re,T-Me,Y-Et,T-Me,Y),ao(T-Me,Y+Et,T-at,Y+Re,T,Y+Re),ao(T+at,Y+Re,T+Me,Y+Et,T+Me,Y),Gu(He),this},d.__private__.circle=d.circle=function(T,Y,Me,Re){if(isNaN(T)||isNaN(Y)||isNaN(Me)||!La(Re))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(T,Y,Me,Me,Re)},d.setFont=function(T,Y,Me){return Me&&(Y=I(Y,Me)),ut=Hu(T,Y,{disableWarning:!1}),this};var aa=d.__private__.getFont=d.getFont=function(){return Tt[Hu.apply(d,arguments)]};d.__private__.getFontList=d.getFontList=function(){var T,Y,Me={};for(T in be)if(be.hasOwnProperty(T))for(Y in Me[T]=[],be[T])be[T].hasOwnProperty(Y)&&Me[T].push(Y);return Me},d.addFont=function(T,Y,Me,Re,He){var at=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&at.indexOf(arguments[3])!==-1?He=arguments[3]:arguments[3]&&at.indexOf(arguments[3])==-1&&(Me=I(Me,Re)),He=He||"Identity-H",ur.call(this,T,Y,Me,He)};var ka,Wu=n.lineWidth||.200025,ju=d.__private__.getLineWidth=d.getLineWidth=function(){return Wu},sp=d.__private__.setLineWidth=d.setLineWidth=function(T){return Wu=T,ae(F(z(T))+" w"),this};d.__private__.setLineDash=vn.API.setLineDash=vn.API.setLineDashPattern=function(T,Y){if(T=T||[],Y=Y||0,isNaN(Y)||!Array.isArray(T))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return T=T.map(function(Me){return F(z(Me))}).join(" "),Y=F(z(Y)),ae("["+T+"] "+Y+" d"),this};var _s=d.__private__.getLineHeight=d.getLineHeight=function(){return et*ka};d.__private__.getLineHeight=d.getLineHeight=function(){return et*ka};var ap=d.__private__.setLineHeightFactor=d.setLineHeightFactor=function(T){return typeof(T=T||1.15)=="number"&&(ka=T),this},qu=d.__private__.getLineHeightFactor=d.getLineHeightFactor=function(){return ka};ap(n.lineHeight);var Ia=d.__private__.getHorizontalCoordinate=function(T){return z(T)},Ui=d.__private__.getVerticalCoordinate=function(T){return _===S.ADVANCED?T:Nt[q].mediaBox.topRightY-Nt[q].mediaBox.bottomLeftY-z(T)},Kc=d.__private__.getHorizontalCoordinateString=d.getHorizontalCoordinateString=function(T){return F(Ia(T))},la=d.__private__.getVerticalCoordinateString=d.getVerticalCoordinateString=function(T){return F(Ui(T))},bo=n.strokeColor||"0 G";d.__private__.getStrokeColor=d.getDrawColor=function(){return $(bo)},d.__private__.setStrokeColor=d.setDrawColor=function(T,Y,Me,Re){return bo=B({ch1:T,ch2:Y,ch3:Me,ch4:Re,pdfColorType:"draw",precision:2}),ae(bo),this};var $u=n.fillColor||"0 g";d.__private__.getFillColor=d.getFillColor=function(){return $($u)},d.__private__.setFillColor=d.setFillColor=function(T,Y,Me,Re){return $u=B({ch1:T,ch2:Y,ch3:Me,ch4:Re,pdfColorType:"fill",precision:2}),ae($u),this};var dl=n.textColor||"0 g",lp=d.__private__.getTextColor=d.getTextColor=function(){return $(dl)};d.__private__.setTextColor=d.setTextColor=function(T,Y,Me,Re){return dl=B({ch1:T,ch2:Y,ch3:Me,ch4:Re,pdfColorType:"text",precision:3}),this};var au=n.charSpace,kf=d.__private__.getCharSpace=d.getCharSpace=function(){return parseFloat(au||0)};d.__private__.setCharSpace=d.setCharSpace=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return au=T,this};var Na=0;d.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},d.__private__.setLineCap=d.setLineCap=function(T){var Y=d.CapJoinStyles[T];if(Y===void 0)throw new Error("Line cap style of '"+T+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Na=Y,ae(Y+" J"),this};var Mo=0;d.__private__.setLineJoin=d.setLineJoin=function(T){var Y=d.CapJoinStyles[T];if(Y===void 0)throw new Error("Line join style of '"+T+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Mo=Y,ae(Y+" j"),this},d.__private__.setLineMiterLimit=d.__private__.setMiterLimit=d.setLineMiterLimit=d.setMiterLimit=function(T){if(T=T||0,isNaN(T))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ae(F(z(T))+" M"),this},d.GState=Wd,d.setGState=function(T){(T=typeof T=="string"?Oe[Ve[T]]:bs(null,T)).equals(At)||(ae("/"+T.id+" gs"),At=T)};var bs=function(T,Y){if(!T||!Ve[T]){var Me=!1;for(var Re in Oe)if(Oe.hasOwnProperty(Re)&&Oe[Re].equals(Y)){Me=!0;break}if(Me)Y=Oe[Re];else{var He="GS"+(Object.keys(Oe).length+1).toString(10);Oe[He]=Y,Y.id=He}return T&&(Ve[T]=Y.id),Xt.publish("addGState",Y),Y}};d.addGState=function(T,Y){return bs(T,Y),this},d.saveGraphicsState=function(){return ae("q"),Ke.push({key:ut,size:et,color:dl}),this},d.restoreGraphicsState=function(){ae("Q");var T=Ke.pop();return ut=T.key,et=T.size,dl=T.color,At=null,this},d.setCurrentTransformationMatrix=function(T){return ae(T.toString()+" cm"),this},d.comment=function(T){return ae("#"+T),this};var Ms=function(T,Y){var Me=T||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Me},set:function(at){isNaN(at)||(Me=parseFloat(at))}});var Re=Y||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Re},set:function(at){isNaN(at)||(Re=parseFloat(at))}});var He="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return He},set:function(at){He=at.toString()}}),this},Xu=function(T,Y,Me,Re){Ms.call(this,T,Y),this.type="rect";var He=Me||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return He},set:function(Et){isNaN(Et)||(He=parseFloat(Et))}});var at=Re||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return at},set:function(Et){isNaN(Et)||(at=parseFloat(Et))}}),this},Jc=function(){this.page=Ct,this.currentPage=q,this.pages=ke.slice(0),this.pagesContext=Nt.slice(0),this.x=Ht,this.y=Pt,this.matrix=Dt,this.width=lu(q),this.height=ml(q),this.outputDestination=Ie,this.id="",this.objectNumber=-1};Jc.prototype.restore=function(){Ct=this.page,q=this.currentPage,Nt=this.pagesContext,ke=this.pages,Ht=this.x,Pt=this.y,Dt=this.matrix,uu(q,this.width),Qc(q,this.height),Ie=this.outputDestination};var zs=function(T,Y,Me,Re,He){ir.push(new Jc),Ct=q=0,ke=[],Ht=T,Pt=Y,Dt=He,Vn([Me,Re])},Fa=function(T){if(wn[T])ir.pop().restore();else{var Y=new Jc,Me="Xo"+(Object.keys(Yn).length+1).toString(10);Y.id=Me,wn[T]=Me,Yn[Me]=Y,Xt.publish("addFormObject",Y),ir.pop().restore()}};for(var pl in d.beginFormObject=function(T,Y,Me,Re,He){return zs(T,Y,Me,Re,He),this},d.endFormObject=function(T){return Fa(T),this},d.doFormObject=function(T,Y){var Me=Yn[wn[T]];return ae("q"),ae(Y.toString()+" cm"),ae("/"+Me.id+" Do"),ae("Q"),this},d.getFormObject=function(T){var Y=Yn[wn[T]];return{x:Y.x,y:Y.y,width:Y.width,height:Y.height,matrix:Y.matrix}},d.save=function(T,Y){return T=T||"generated.pdf",(Y=Y||{}).returnPromise=Y.returnPromise||!1,Y.returnPromise===!1?(sd(su(sa()),T),typeof sd.unload=="function"&&_n.setTimeout&&setTimeout(sd.unload,911),this):new Promise(function(Me,Re){try{var He=sd(su(sa()),T);typeof sd.unload=="function"&&_n.setTimeout&&setTimeout(sd.unload,911),Me(He)}catch(at){Re(at.message)}})},vn.API)vn.API.hasOwnProperty(pl)&&(pl==="events"&&vn.API.events.length?function(T,Y){var Me,Re,He;for(He=Y.length-1;He!==-1;He--)Me=Y[He][0],Re=Y[He][1],T.subscribe.apply(T,[Me].concat(typeof Re=="function"?[Re]:Re))}(Xt,vn.API.events):d[pl]=vn.API[pl]);var lu=d.getPageWidth=function(T){return(Nt[T=T||q].mediaBox.topRightX-Nt[T].mediaBox.bottomLeftX)/Pe},uu=d.setPageWidth=function(T,Y){Nt[T].mediaBox.topRightX=Y*Pe+Nt[T].mediaBox.bottomLeftX},ml=d.getPageHeight=function(T){return(Nt[T=T||q].mediaBox.topRightY-Nt[T].mediaBox.bottomLeftY)/Pe},Qc=d.setPageHeight=function(T,Y){Nt[T].mediaBox.topRightY=Y*Pe+Nt[T].mediaBox.bottomLeftY};return d.internal={pdfEscape:Pn,getStyle:pi,getFont:aa,getFontSize:bt,getCharSpace:kf,getTextColor:lp,getLineHeight:_s,getLineHeightFactor:qu,getLineWidth:ju,write:gt,getHorizontalCoordinate:Ia,getVerticalCoordinate:Ui,getCoordinateString:Kc,getVerticalCoordinateString:la,collections:{},newObject:ar,newAdditionalObject:yn,newObjectDeferred:dr,newObjectDeferredBegin:lr,getFilters:re,putStream:ve,events:Xt,scaleFactor:Pe,pageSize:{getWidth:function(){return lu(q)},setWidth:function(T){uu(q,T)},getHeight:function(){return ml(q)},setHeight:function(T){Qc(q,T)}},encryptionOptions:c,encryption:Qi,getEncryptor:nr,output:Ra,getNumberOfPages:Bs,pages:ke,out:ae,f2:L,f3:N,getPageInfo:Rf,getPageInfoByObjId:Sn,getCurrentPageInfo:op,getPDFVersion:y,Point:Ms,Rectangle:Xu,Matrix:Wt,hasHotfix:ip},Object.defineProperty(d.internal.pageSize,"width",{get:function(){return lu(q)},set:function(T){uu(q,T)},enumerable:!0,configurable:!0}),Object.defineProperty(d.internal.pageSize,"height",{get:function(){return ml(q)},set:function(T){Qc(q,T)},enumerable:!0,configurable:!0}),Kr.call(d,Ge),ut="F1",Nr(i,t),Xt.publish("initialized"),d}cm.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},cm.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},cm.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},cm.prototype.processOwnerPassword=function(n,e){return lE(aE(e).substr(0,5),n)},cm.prototype.encryptor=function(n,e){var t=aE(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return lE(t,r)}},Wd.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Br(n)!==Br(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},vn.API={events:[]},vn.version="3.0.1";var ki=vn.API,jA=1,np=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},tm=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Nn=function(n){return n.toFixed(2)},Ch=function(n){return n.toFixed(5)};ki.__acroform__={};var ia=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},BL=function(n){return n*jA},vu=function(n){var e=new pO,t=tn.internal.getHeight(n)||0,r=tn.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Nn(r)),Number(Nn(t))],e},Cte=ki.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},Pte=ki.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},Rte=ki.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},qi=ki.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Rte(n,e-1)},$i=ki.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Cte(n,e-1)},Xi=ki.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Pte(n,e-1)},Lte=ki.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],o=n[1],s=n[2],a=n[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=r(o+a)||0,l.upperRight_X=t(i+s)||0,l.upperRight_Y=r(o)||0,[Number(Nn(l.lowerLeft_X)),Number(Nn(l.lowerLeft_Y)),Number(Nn(l.upperRight_X)),Number(Nn(l.upperRight_Y))]},kte=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=uE(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+Nn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=vu(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},uE=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(N){return N.split(`
`)}):i.map(function(N){return[N]});var o=t,s=tn.internal.getHeight(n)||0;s=s<0?-s:s;var a=tn.internal.getWidth(n)||0;a=a<0?-a:a;var l=function(N,z,H){if(N+1<i.length){var G=z+" "+i[N+1][0];return b2(G,n,H).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var u,c,h=b2("3",n,o).height,f=n.multiline?s-o:(s-h)/2,d=f+=2,v=0,y=0,x=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+b2(e,n,o=12).width+", FieldWidth:"+a+`
`;break}for(var g="",S=0,_=0;_<i.length;_++)if(i.hasOwnProperty(_)){var E=!1;if(i[_].length!==1&&x!==i[_].length-1){if((h+2)*(S+2)+2>s)continue e;g+=i[_][x],E=!0,y=_,_--}else{g=(g+=i[_][x]+" ").substr(g.length-1)==" "?g.substr(0,g.length-1):g;var C=parseInt(_),I=l(C,g,o),F=_>=i.length-1;if(I&&!F){g+=" ",x=0;continue}if(I||F){if(F)y=C;else if(n.multiline&&(h+2)*(S+2)+2>s)continue e}else{if(!n.multiline||(h+2)*(S+2)+2>s)continue e;y=C}}for(var R="",k=v;k<=y;k++){var L=i[k];if(n.multiline){if(k===y){R+=L[x]+" ",x=(x+1)%L.length;continue}if(k===v){R+=L[L.length-1]+" ";continue}}R+=L[0]+" "}switch(R=R.substr(R.length-1)==" "?R.substr(0,R.length-1):R,c=b2(R,n,o).width,n.textAlign){case"right":u=a-c-2;break;case"center":u=(a-c)/2;break;case"left":default:u=2}e+=Nn(u)+" "+Nn(d)+` Td
`,e+="("+np(R)+`) Tj
`,e+=-Nn(u)+` 0 Td
`,d=-(o+2),c=0,v=E?y:y+1,S++,g=""}break}return r.text=e,r.fontSize=o,r},b2=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},Ite={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Nte=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},Fte=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),Br(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},Dte=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(iu.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(Ite)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");jA=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new mO,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&Nte(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var a=r[s],l=[],u=a.Rect;if(a.Rect&&(a.Rect=Lte(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=tn.createDefaultAppearanceStream(a),Br(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var c=kte(a);l.push({key:"AP",value:"<</N "+c+">>"}),i.internal.acroformPlugin.xForms.push(c)}if(a.appearanceStreamContent){var h="";for(var f in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(f)){var d=a.appearanceStreamContent[f];if(h+="/"+f+" ",h+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var s in d)if(d.hasOwnProperty(s)){var v=d[s];typeof v=="function"&&(v=v.call(i,a)),h+="/"+s+" "+v+" ",i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v)}}else typeof(v=d)=="function"&&(v=v.call(i,a)),h+="/"+s+" "+v,i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}o&&Fte(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},dO=ki.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(s){return s};if(Array.isArray(n)){for(var i="[",o=0;o<n.length;o++)switch(o!==0&&(i+=" "),Br(n[o])){case"boolean":case"number":case"object":i+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+np(r(n[o].toString()))+")"):i+=n[o].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Cb=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+np(r(n))+")"},Tu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Tu.prototype.toString=function(){return this.objId+" 0 R"},Tu.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Tu.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:dO(i,this.objId,this.scope)}):i instanceof Tu?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var pO=function(){Tu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};ia(pO,Tu);var mO=function(){Tu.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+np(t(n))+")"}},set:function(t){n=t}})};ia(mO,Tu);var iu=function n(){Tu.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute F supplied.');e=g}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(e,3))},set:function(g){Boolean(g)===!0?this.F=$i(e,3):this.F=Xi(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute Ff supplied.');t=g}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(g){r=g!==void 0?g:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(g){r[0]=g}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(g){r[1]=g}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(g){r[2]=g}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(g){r[3]=g}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(g){switch(g){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=g;break;default:throw new Error('Invalid value "'+g+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof uw)return;o="FieldObject"+n.FieldNum++}var g=function(S){return S};return this.scope&&(g=this.scope.internal.getEncryptor(this.objId)),"("+np(g(o))+")"},set:function(g){o=g.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(g){o=g}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(g){s=g}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(g){a=g}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(g){l=g}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/jA:u},set:function(g){u=g}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(g){c=g}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof uw||this instanceof Ld))return Cb(h,this.objId,this.scope)},set:function(g){g=g.toString(),h=g}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Oo?f:Cb(f,this.objId,this.scope)},set:function(g){g=g.toString(),f=this instanceof Oo?g:g.substr(0,1)==="("?tm(g.substr(1,g.length-2)):tm(g)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Oo?tm(f.substr(1,f.length-1)):f},set:function(g){g=g.toString(),f=this instanceof Oo?"/"+g:g}});var d=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(d)return d},set:function(g){this.V=g}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof Oo?d:Cb(d,this.objId,this.scope)},set:function(g){g=g.toString(),d=this instanceof Oo?g:g.substr(0,1)==="("?tm(g.substr(1,g.length-2)):tm(g)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Oo?tm(d.substr(1,d.length-1)):d},set:function(g){g=g.toString(),d=this instanceof Oo?"/"+g:g}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(g){g=Boolean(g),y=g}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(g){v=g}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,1))},set:function(g){Boolean(g)===!0?this.Ff=$i(this.Ff,1):this.Ff=Xi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,2))},set:function(g){Boolean(g)===!0?this.Ff=$i(this.Ff,2):this.Ff=Xi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,3))},set:function(g){Boolean(g)===!0?this.Ff=$i(this.Ff,3):this.Ff=Xi(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(g){if([0,1,2].indexOf(g)===-1)throw new Error('Invalid value "'+g+'" for attribute Q supplied.');x=g}}),Object.defineProperty(this,"textAlign",{get:function(){var g;switch(x){case 0:default:g="left";break;case 1:g="center";break;case 2:g="right"}return g},configurable:!0,enumerable:!0,set:function(g){switch(g){case"right":case 2:x=2;break;case"center":case 1:x=1;break;case"left":case 0:default:x=0}}})};ia(iu,Tu);var Gm=function(){iu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return dO(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(o,s,a){a||(a=1);for(var l,u=[];l=s.exec(o);)u.push(l[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,18))},set:function(t){Boolean(t)===!0?this.Ff=$i(this.Ff,18):this.Ff=Xi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,19))},set:function(t){this.combo===!0&&(Boolean(t)===!0?this.Ff=$i(this.Ff,19):this.Ff=Xi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,20))},set:function(t){Boolean(t)===!0?(this.Ff=$i(this.Ff,20),e.sort()):this.Ff=Xi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,22))},set:function(t){Boolean(t)===!0?this.Ff=$i(this.Ff,22):this.Ff=Xi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,23))},set:function(t){Boolean(t)===!0?this.Ff=$i(this.Ff,23):this.Ff=Xi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,27))},set:function(t){Boolean(t)===!0?this.Ff=$i(this.Ff,27):this.Ff=Xi(this.Ff,27)}}),this.hasAppearanceStream=!1};ia(Gm,iu);var Vm=function(){Gm.call(this),this.fontName="helvetica",this.combo=!1};ia(Vm,Gm);var Wm=function(){Vm.call(this),this.combo=!0};ia(Wm,Vm);var ax=function(){Wm.call(this),this.edit=!0};ia(ax,Wm);var Oo=function(){iu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,15))},set:function(t){Boolean(t)===!0?this.Ff=$i(this.Ff,15):this.Ff=Xi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,16))},set:function(t){Boolean(t)===!0?this.Ff=$i(this.Ff,16):this.Ff=Xi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,17))},set:function(t){Boolean(t)===!0?this.Ff=$i(this.Ff,17):this.Ff=Xi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,26))},set:function(t){Boolean(t)===!0?this.Ff=$i(this.Ff,26):this.Ff=Xi(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+np(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Br(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};ia(Oo,iu);var lx=function(){Oo.call(this),this.pushButton=!0};ia(lx,Oo);var jm=function(){Oo.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};ia(jm,Oo);var uw=function(){var n,e;iu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+np(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Br(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=tn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ia(uw,iu),jm.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},jm.prototype.createOption=function(n){var e=new uw;return e.Parent=this,e.optionName=n,this.Kids.push(e),Ote.call(this.scope,e),e};var ux=function(){Oo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=tn.CheckBox.createAppearanceStream()};ia(ux,Oo);var Ld=function(){iu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,13))},set:function(e){Boolean(e)===!0?this.Ff=$i(this.Ff,13):this.Ff=Xi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,21))},set:function(e){Boolean(e)===!0?this.Ff=$i(this.Ff,21):this.Ff=Xi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,23))},set:function(e){Boolean(e)===!0?this.Ff=$i(this.Ff,23):this.Ff=Xi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,24))},set:function(e){Boolean(e)===!0?this.Ff=$i(this.Ff,24):this.Ff=Xi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,25))},set:function(e){Boolean(e)===!0?this.Ff=$i(this.Ff,25):this.Ff=Xi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,26))},set:function(e){Boolean(e)===!0?this.Ff=$i(this.Ff,26):this.Ff=Xi(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ia(Ld,iu);var cx=function(){Ld.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(qi(this.Ff,14))},set:function(n){Boolean(n)===!0?this.Ff=$i(this.Ff,14):this.Ff=Xi(this.Ff,14)}}),this.password=!0};ia(cx,Ld);var tn={CheckBox:{createAppearanceStream:function(){return{N:{On:tn.CheckBox.YesNormal},D:{On:tn.CheckBox.YesPushDown,Off:tn.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=vu(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),o=uE(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Nn(tn.internal.getWidth(n))+" "+Nn(tn.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Nn(o.fontSize)+" Tf "+i),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=vu(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],o=tn.internal.getHeight(n),s=tn.internal.getWidth(n),a=uE(n,n.caption);return i.push("1 g"),i.push("0 0 "+Nn(s)+" "+Nn(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Nn(s-1)+" "+Nn(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Nn(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=vu(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Nn(tn.internal.getWidth(n))+" "+Nn(tn.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:tn.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=tn.RadioButton.Circle.YesNormal,e.D[n]=tn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=vu(n);e.scope=n.scope;var t=[],r=tn.internal.getWidth(n)<=tn.internal.getHeight(n)?tn.internal.getWidth(n)/4:tn.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=tn.internal.Bezier_C,o=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Ch(tn.internal.getWidth(n)/2)+" "+Ch(tn.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=vu(n);e.scope=n.scope;var t=[],r=tn.internal.getWidth(n)<=tn.internal.getHeight(n)?tn.internal.getWidth(n)/4:tn.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*tn.internal.Bezier_C).toFixed(5)),s=Number((r*tn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ch(tn.internal.getWidth(n)/2)+" "+Ch(tn.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Ch(tn.internal.getWidth(n)/2)+" "+Ch(tn.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=vu(n);e.scope=n.scope;var t=[],r=tn.internal.getWidth(n)<=tn.internal.getHeight(n)?tn.internal.getWidth(n)/4:tn.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*tn.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ch(tn.internal.getWidth(n)/2)+" "+Ch(tn.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:tn.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=tn.RadioButton.Cross.YesNormal,e.D[n]=tn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=vu(n);e.scope=n.scope;var t=[],r=tn.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Nn(tn.internal.getWidth(n)-2)+" "+Nn(tn.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Nn(r.x1.x)+" "+Nn(r.x1.y)+" m"),t.push(Nn(r.x2.x)+" "+Nn(r.x2.y)+" l"),t.push(Nn(r.x4.x)+" "+Nn(r.x4.y)+" m"),t.push(Nn(r.x3.x)+" "+Nn(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=vu(n);e.scope=n.scope;var t=tn.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Nn(tn.internal.getWidth(n))+" "+Nn(tn.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Nn(tn.internal.getWidth(n)-2)+" "+Nn(tn.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Nn(t.x1.x)+" "+Nn(t.x1.y)+" m"),r.push(Nn(t.x2.x)+" "+Nn(t.x2.y)+" l"),r.push(Nn(t.x4.x)+" "+Nn(t.x4.y)+" m"),r.push(Nn(t.x3.x)+" "+Nn(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=vu(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Nn(tn.internal.getWidth(n))+" "+Nn(tn.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};tn.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=tn.internal.getWidth(n),t=tn.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},tn.internal.getWidth=function(n){var e=0;return Br(n)==="object"&&(e=BL(n.Rect[2])),e},tn.internal.getHeight=function(n){var e=0;return Br(n)==="object"&&(e=BL(n.Rect[3])),e};var Ote=ki.addField=function(n){if(Dte(this,n),!(n instanceof iu))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};ki.AcroFormChoiceField=Gm,ki.AcroFormListBox=Vm,ki.AcroFormComboBox=Wm,ki.AcroFormEditBox=ax,ki.AcroFormButton=Oo,ki.AcroFormPushButton=lx,ki.AcroFormRadioButton=jm,ki.AcroFormCheckBox=ux,ki.AcroFormTextField=Ld,ki.AcroFormPasswordField=cx,ki.AcroFormAppearance=tn,ki.AcroForm={ChoiceField:Gm,ListBox:Vm,ComboBox:Wm,EditBox:ax,Button:Oo,PushButton:lx,RadioButton:jm,CheckBox:ux,TextField:Ld,PasswordField:cx,Appearance:tn},vn.AcroForm={ChoiceField:Gm,ListBox:Vm,ComboBox:Wm,EditBox:ax,Button:Oo,PushButton:lx,RadioButton:jm,CheckBox:ux,TextField:Ld,PasswordField:cx,Appearance:tn};function gO(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(N,z){var H,G,K,ee,le,V=e;if((z=z||e)==="RGBA"||N.data!==void 0&&N.data instanceof Uint8ClampedArray&&"height"in N&&"width"in N)return"RGBA";if(I(N))for(le in t)for(K=t[le],H=0;H<K.length;H+=1){for(ee=!0,G=0;G<K[H].length;G+=1)if(K[H][G]!==void 0&&K[H][G]!==N[G]){ee=!1;break}if(ee===!0){V=le;break}}else for(le in t)for(K=t[le],H=0;H<K.length;H+=1){for(ee=!0,G=0;G<K[H].length;G+=1)if(K[H][G]!==void 0&&K[H][G]!==N.charCodeAt(G)){ee=!1;break}if(ee===!0){V=le;break}}return V===e&&z!==e&&(V=z),V},i=function N(z){for(var H=this.internal.write,G=this.internal.putStream,K=(0,this.internal.getFilters)();K.indexOf("FlateEncode")!==-1;)K.splice(K.indexOf("FlateEncode"),1);z.objectId=this.internal.newObject();var ee=[];if(ee.push({key:"Type",value:"/XObject"}),ee.push({key:"Subtype",value:"/Image"}),ee.push({key:"Width",value:z.width}),ee.push({key:"Height",value:z.height}),z.colorSpace===x.INDEXED?ee.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(z.palette.length/3-1)+" "+("sMask"in z&&z.sMask!==void 0?z.objectId+2:z.objectId+1)+" 0 R]"}):(ee.push({key:"ColorSpace",value:"/"+z.colorSpace}),z.colorSpace===x.DEVICE_CMYK&&ee.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ee.push({key:"BitsPerComponent",value:z.bitsPerComponent}),"decodeParameters"in z&&z.decodeParameters!==void 0&&ee.push({key:"DecodeParms",value:"<<"+z.decodeParameters+">>"}),"transparency"in z&&Array.isArray(z.transparency)){for(var le="",V=0,J=z.transparency.length;V<J;V++)le+=z.transparency[V]+" "+z.transparency[V]+" ";ee.push({key:"Mask",value:"["+le+"]"})}z.sMask!==void 0&&ee.push({key:"SMask",value:z.objectId+1+" 0 R"});var j=z.filter!==void 0?["/"+z.filter]:void 0;if(G({data:z.data,additionalKeyValues:ee,alreadyAppliedFilters:j,objectId:z.objectId}),H("endobj"),"sMask"in z&&z.sMask!==void 0){var ie="/Predictor "+z.predictor+" /Colors 1 /BitsPerComponent "+z.bitsPerComponent+" /Columns "+z.width,D={width:z.width,height:z.height,colorSpace:"DeviceGray",bitsPerComponent:z.bitsPerComponent,decodeParameters:ie,data:z.sMask};"filter"in z&&(D.filter=z.filter),N.call(this,D)}if(z.colorSpace===x.INDEXED){var q=this.internal.newObject();G({data:R(new Uint8Array(z.palette)),objectId:q}),H("endobj")}},o=function(){var N=this.internal.collections.addImage_images;for(var z in N)i.call(this,N[z])},s=function(){var N,z=this.internal.collections.addImage_images,H=this.internal.write;for(var G in z)H("/I"+(N=z[G]).index,N.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var N=this.internal.collections.addImage_images;return a.call(this),N},u=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(N){return typeof n["process"+N.toUpperCase()]=="function"},h=function(N){return Br(N)==="object"&&N.nodeType===1},f=function(N,z){if(N.nodeName==="IMG"&&N.hasAttribute("src")){var H=""+N.getAttribute("src");if(H.indexOf("data:image/")===0)return rv(unescape(H).split("base64,").pop());var G=n.loadFile(H,!0);if(G!==void 0)return G}if(N.nodeName==="CANVAS"){if(N.width===0||N.height===0)throw new Error("Given canvas must have data. Canvas width: "+N.width+", height: "+N.height);var K;switch(z){case"PNG":K="image/png";break;case"WEBP":K="image/webp";break;case"JPEG":case"JPG":default:K="image/jpeg"}return rv(N.toDataURL(K,1).split("base64,").pop())}},d=function(N){var z=this.internal.collections.addImage_images;if(z){for(var H in z)if(N===z[H].alias)return z[H]}},v=function(N,z,H){return N||z||(N=-96,z=-96),N<0&&(N=-1*H.width*72/N/this.internal.scaleFactor),z<0&&(z=-1*H.height*72/z/this.internal.scaleFactor),N===0&&(N=z*H.width/H.height),z===0&&(z=N*H.height/H.width),[N,z]},y=function(N,z,H,G,K,ee){var le=v.call(this,H,G,K),V=this.internal.getCoordinateString,J=this.internal.getVerticalCoordinateString,j=l.call(this);if(H=le[0],G=le[1],j[K.index]=K,ee){ee*=Math.PI/180;var ie=Math.cos(ee),D=Math.sin(ee),q=function(Q){return Q.toFixed(4)},Z=[q(ie),q(D),q(-1*D),q(ie),0,0,"cm"]}this.internal.write("q"),ee?(this.internal.write([1,"0","0",1,V(N),J(z+G),"cm"].join(" ")),this.internal.write(Z.join(" ")),this.internal.write([V(H),"0","0",V(G),"0","0","cm"].join(" "))):this.internal.write([V(H),"0","0",V(G),V(N),J(z+G),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+K.index+" Do"),this.internal.write("Q")},x=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var g=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=n.__addimage__.sHashCode=function(N){var z,H,G=0;if(typeof N=="string")for(H=N.length,z=0;z<H;z++)G=(G<<5)-G+N.charCodeAt(z),G|=0;else if(I(N))for(H=N.byteLength/2,z=0;z<H;z++)G=(G<<5)-G+N[z],G|=0;return G},_=n.__addimage__.validateStringAsBase64=function(N){(N=N||"").toString().trim();var z=!0;return N.length===0&&(z=!1),N.length%4!=0&&(z=!1),/^[A-Za-z0-9+/]+$/.test(N.substr(0,N.length-2))===!1&&(z=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(N.substr(-2))===!1&&(z=!1),z},E=n.__addimage__.extractImageFromDataUrl=function(N){if(N==null||!(N=N.trim()).startsWith("data:"))return null;var z=N.indexOf(",");return z<0?null:N.substring(0,z).trim().endsWith("base64")?N.substring(z+1):null},C=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(N){return C()&&N instanceof ArrayBuffer};var I=n.__addimage__.isArrayBufferView=function(N){return C()&&typeof Uint32Array<"u"&&(N instanceof Int8Array||N instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array)},F=n.__addimage__.binaryStringToUint8Array=function(N){for(var z=N.length,H=new Uint8Array(z),G=0;G<z;G++)H[G]=N.charCodeAt(G);return H},R=n.__addimage__.arrayBufferToBinaryString=function(N){for(var z="",H=I(N)?N:new Uint8Array(N),G=0;G<H.length;G+=8192)z+=String.fromCharCode.apply(null,H.subarray(G,G+8192));return z};n.addImage=function(){var N,z,H,G,K,ee,le,V,J;if(typeof arguments[1]=="number"?(z=e,H=arguments[1],G=arguments[2],K=arguments[3],ee=arguments[4],le=arguments[5],V=arguments[6],J=arguments[7]):(z=arguments[1],H=arguments[2],G=arguments[3],K=arguments[4],ee=arguments[5],le=arguments[6],V=arguments[7],J=arguments[8]),Br(N=arguments[0])==="object"&&!h(N)&&"imageData"in N){var j=N;N=j.imageData,z=j.format||z||e,H=j.x||H||0,G=j.y||G||0,K=j.w||j.width||K,ee=j.h||j.height||ee,le=j.alias||le,V=j.compression||V,J=j.rotation||j.angle||J}var ie=this.internal.getFilters();if(V===void 0&&ie.indexOf("FlateEncode")!==-1&&(V="SLOW"),isNaN(H)||isNaN(G))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var D=k.call(this,N,z,le,V);return y.call(this,H,G,K,ee,D,J),this};var k=function(N,z,H,G){var K,ee,le;if(typeof N=="string"&&r(N)===e){N=unescape(N);var V=L(N,!1);(V!==""||(V=n.loadFile(N,!0))!==void 0)&&(N=V)}if(h(N)&&(N=f(N,z)),z=r(N,z),!c(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(((le=H)==null||le.length===0)&&(H=function(J){return typeof J=="string"||I(J)?S(J):I(J.data)?S(J.data):null}(N)),(K=d.call(this,H))||(C()&&(N instanceof Uint8Array||z==="RGBA"||(ee=N,N=F(N))),K=this["process"+z.toUpperCase()](N,u.call(this),H,function(J){return J&&typeof J=="string"&&(J=J.toUpperCase()),J in n.image_compression?J:g.NONE}(G),ee)),!K)throw new Error("An unknown error occurred whilst processing the image.");return K},L=n.__addimage__.convertBase64ToBinaryString=function(N,z){z=typeof z!="boolean"||z;var H,G="";if(typeof N=="string"){var K;H=(K=E(N))!==null&&K!==void 0?K:N;try{G=rv(H)}catch(ee){if(z)throw _(H)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ee.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return G};n.getImageProperties=function(N){var z,H,G="";if(h(N)&&(N=f(N)),typeof N=="string"&&r(N)===e&&((G=L(N,!1))===""&&(G=n.loadFile(N)||""),N=G),H=r(N),!c(H))throw new Error("addImage does not support files of type '"+H+"', please ensure that a plugin for '"+H+"' support is added.");if(!C()||N instanceof Uint8Array||(N=F(N)),!(z=this["process"+H.toUpperCase()](N)))throw new Error("An unknown error occurred whilst processing the image");return z.fileType=H,z}})(vn.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};vn.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,c=!1,h=0;h<u.length&&!c;h++)switch((r=u[h]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var f=0;f<u.length;f++){r=u[f];var d=this.internal.pdfEscape,v=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(y.objId),S=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+d(g(r.contents))+")",o+=" /Popup "+x.objId+" 0 R",o+=" /P "+l.objId+" 0 R",o+=" /T ("+d(g(S))+") >>",y.content=o;var _=y.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+_,r.open&&(o+=" /Open true"),o+=" >>",x.content=o,this.internal.write(y.objId,"0 R",x.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var E=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+d(v(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+E+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var C=this.annotations._nameMap[r.options.name];r.options.pageNumber=C.page,r.options.top=C.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+d(v(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var I=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+I+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,o,s){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(t),y:u(r),w:l(t+i),h:u(r+o)},options:s,type:"link"})},n.textWithLink=function(t,r,i,o){var s,a,l=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var c=this.splitTextToSize(t,a).length;s=Math.ceil(u*c)}else a=l,s=u;return this.text(t,r,i,o),i+=.2*u,o.align==="center"&&(r-=l/2),o.align==="right"&&(r-=l),this.link(r,i-u,a,s,o),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(vn.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},s=n.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},a=n.__arabicParser__.isArabicEndLetter=function(y){return s(y)&&o(y)&&e[y.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(y){return s(y)&&i.indexOf(y.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return s(y)&&o(y)&&e[y.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(y){return s(y)&&o(y)&&e[y.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(y){return s(y)&&o(y)&&e[y.charCodeAt(0)].length>=3};var c=n.__arabicParser__.arabicLetterHasMedialForm=function(y){return s(y)&&o(y)&&e[y.charCodeAt(0)].length==4},h=n.__arabicParser__.resolveLigatures=function(y){var x=0,g=t,S="",_=0;for(x=0;x<y.length;x+=1)g[y.charCodeAt(x)]!==void 0?(_++,typeof(g=g[y.charCodeAt(x)])=="number"&&(S+=String.fromCharCode(g),g=t,_=0),x===y.length-1&&(g=t,S+=y.charAt(x-(_-1)),x-=_-1,_=0)):(g=t,S+=y.charAt(x-_),x-=_,_=0);return S};n.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&r[y.charCodeAt(0)]!==void 0};var f=n.__arabicParser__.getCorrectForm=function(y,x,g){return s(y)?o(y)===!1?-1:!u(y)||!s(x)&&!s(g)||!s(g)&&a(x)||a(y)&&!s(x)||a(y)&&l(x)||a(y)&&a(x)?0:c(y)&&s(x)&&!a(x)&&s(g)&&u(g)?3:a(y)||!s(g)?1:2:-1},d=function(y){var x=0,g=0,S=0,_="",E="",C="",I=(y=y||"").split("\\s+"),F=[];for(x=0;x<I.length;x+=1){for(F.push(""),g=0;g<I[x].length;g+=1)_=I[x][g],E=I[x][g-1],C=I[x][g+1],s(_)?(S=f(_,E,C),F[x]+=S!==-1?String.fromCharCode(e[_.charCodeAt(0)][S]):_):F[x]+=_;F[x]=h(F[x])}return F.join(" ")},v=n.__arabicParser__.processArabic=n.processArabic=function(){var y,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,g=[];if(Array.isArray(x)){var S=0;for(g=[],S=0;S<x.length;S+=1)Array.isArray(x[S])?g.push([d(x[S][0]),x[S][1],x[S][2]]):g.push([d(x[S])]);y=g}else y=d(x);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};n.events.push(["preProcessText",v])}(vn.API),vn.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(vn.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var d=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(y){v=y}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,u){r.call(this);var c=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),f=u.scaleFactor||this.internal.scaleFactor,d=0,v=0,y=0,x=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var g=u.maxWidth;g>0?typeof l=="string"?l=this.splitTextToSize(l,g):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(_,E){return _.concat(x.splitTextToSize(E,g))},[])):l=Array.isArray(l)?l:[l];for(var S=0;S<l.length;S++)d<(y=this.getStringUnitWidth(l[S],{font:h})*c)&&(d=y);return d!==0&&(v=l.length),{w:d/=f,h:Math.max((v*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/f,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=n.cell=function(){var l;l=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,f=this.internal.__cell__.tableHeaderRow,d=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,d&&f&&(this.printHeaderRow(l.lineNumber,!0),l.y+=f[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-c,l.y+c,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+c,{align:"center",baseline:"top",maxWidth:l.width-c-c}):this.text(l.text,l.x+c,l.y+c,{align:"left",baseline:"top",maxWidth:l.width-c-c})),this.internal.__cell__.lastCell=l,this};n.table=function(l,u,c,h,f){if(r.call(this),!c)throw new Error("No data for PDF table.");var d,v,y,x,g=[],S=[],_=[],E={},C={},I=[],F=[],R=(f=f||{}).autoSize||!1,k=f.printHeaders!==!1,L=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,N=f.margins||Object.assign({width:this.getPageWidth()},e),z=typeof f.padding=="number"?f.padding:3,H=f.headerBackgroundColor||"#c8c8c8",G=f.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=N,this.internal.__cell__.table_font_size=L,this.internal.__cell__.padding=z,this.internal.__cell__.headerBackgroundColor=H,this.internal.__cell__.headerTextColor=G,this.setFontSize(L),h==null)S=g=Object.keys(c[0]),_=g.map(function(){return"left"});else if(Array.isArray(h)&&Br(h[0])==="object")for(g=h.map(function(j){return j.name}),S=h.map(function(j){return j.prompt||j.name||""}),_=h.map(function(j){return j.align||"left"}),d=0;d<h.length;d+=1)C[h[d].name]=h[d].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(S=g=h,_=g.map(function(){return"left"}));if(R||Array.isArray(h)&&typeof h[0]=="string")for(d=0;d<g.length;d+=1){for(E[x=g[d]]=c.map(function(j){return j[x]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(S[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=E[x],this.setFont(void 0,"normal"),y=0;y<v.length;y+=1)I.push(this.getTextDimensions(v[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);C[x]=Math.max.apply(null,I)+z+z,I=[]}if(k){var K={};for(d=0;d<g.length;d+=1)K[g[d]]={},K[g[d]].text=S[d],K[g[d]].align=_[d];var ee=a.call(this,K,C);F=g.map(function(j){return new o(l,u,C[j],ee,K[j].text,void 0,K[j].align)}),this.setTableHeaderRow(F),this.printHeaderRow(1,!1)}var le=h.reduce(function(j,ie){return j[ie.name]=ie.align,j},{});for(d=0;d<c.length;d+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:d,data:c[d]},this);var V=a.call(this,c[d],C);for(y=0;y<g.length;y+=1){var J=c[d][g[y]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:d,col:y,data:J},this),s.call(this,new o(l,u,C[g[y]],V,J,d+2,le[g[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var c=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(l).map(function(d){var v=l[d];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,u[d]-c-c)},this).map(function(d){return this.getLineHeightFactor()*d.length*h/f+c+c},this).reduce(function(d,v){return Math.max(d,v)},0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],d=0;d<this.internal.__cell__.tableHeaderRow.length;d+=1){c=this.internal.__cell__.tableHeaderRow[d].clone(),u&&(c.y=this.internal.__cell__.margins.top||0,f.push(c)),c.lineNumber=l;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,c),this.setTextColor(v)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),t=!1}}(vn.API);var vO={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},yO=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],cE=gO(yO),xO=[100,200,300,400,500,600,700,800,900],Bte=gO(xO);function hE(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(o){return vO[o=o||"normal"]?o:"normal"}(n.style),r=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(o){return typeof cE[o=o||"normal"]=="number"?o:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function UL(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var Ute={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},zL={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function HL(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function zte(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},Ute,t.genericFontFamilies||{}),o=null,s=null,a=0;a<e.length;++a)if(i[(o=hE(e[a])).family]&&(o.family=i[o.family]),n.hasOwnProperty(o.family)){s=n[o.family];break}if(!(s=s||n[r]))throw new Error("Could not find a font-family for the rule '"+HL(o)+"' and default family '"+r+"'.");if(s=function(l,u){if(u[l])return u[l];var c=cE[l],h=c<=cE.normal?-1:1,f=UL(u,yO,c,h);if(!f)throw new Error("Could not find a matching font-stretch value for "+l);return f}(o.stretch,s),s=function(l,u){if(u[l])return u[l];for(var c=vO[l],h=0;h<c.length;++h)if(u[c[h]])return u[c[h]];throw new Error("Could not find a matching font-style for "+l)}(o.style,s),!(s=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var c=Bte[l],h=UL(u,xO,c,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(o.weight,s)))throw new Error("Failed to resolve a font for the rule '"+HL(o)+"'.");return s}function GL(n){return n.trimLeft()}function Hte(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function Gte(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var M2,VL,WL,Pb=["times"];(function(n){var e,t,r,i,o,s,a,l,u,c=function(D){return D=D||{},this.isStrokeTransparent=D.isStrokeTransparent||!1,this.strokeOpacity=D.strokeOpacity||1,this.strokeStyle=D.strokeStyle||"#000000",this.fillStyle=D.fillStyle||"#000000",this.isFillTransparent=D.isFillTransparent||!1,this.fillOpacity=D.fillOpacity||1,this.font=D.font||"10px sans-serif",this.textBaseline=D.textBaseline||"alphabetic",this.textAlign=D.textAlign||"left",this.lineWidth=D.lineWidth||1,this.lineJoin=D.lineJoin||"miter",this.lineCap=D.lineCap||"butt",this.path=D.path||[],this.transform=D.transform!==void 0?D.transform.clone():new l,this.globalCompositeOperation=D.globalCompositeOperation||"normal",this.globalAlpha=D.globalAlpha||1,this.clip_path=D.clip_path||[],this.currentPoint=D.currentPoint||new s,this.miterLimit=D.miterLimit||10,this.lastPoint=D.lastPoint||new s,this.lineDashOffset=D.lineDashOffset||0,this.lineDash=D.lineDash||[],this.margin=D.margin||[0,0,0,0],this.prevPageLastElemOffset=D.prevPageLastElemOffset||0,this.ignoreClearRect=typeof D.ignoreClearRect!="boolean"||D.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new c}]);var h=function(D){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=D;Object.defineProperty(this,"pdf",{get:function(){return q}});var Z=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Z},set:function(Te){Z=Boolean(Te)}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(Te){Q=Boolean(Te)}});var se=0;Object.defineProperty(this,"posX",{get:function(){return se},set:function(Te){isNaN(Te)||(se=Te)}});var me=0;Object.defineProperty(this,"posY",{get:function(){return me},set:function(Te){isNaN(Te)||(me=Te)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Te){var ae;typeof Te=="number"?ae=[Te,Te,Te,Te]:((ae=new Array(4))[0]=Te[0],ae[1]=Te.length>=2?Te[1]:ae[0],ae[2]=Te.length>=3?Te[2]:ae[0],ae[3]=Te.length>=4?Te[3]:ae[1]),u.margin=ae}});var Se=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Se},set:function(Te){Se=Te}});var Ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ce},set:function(Te){Ce=Te}});var $e=[];Object.defineProperty(this,"pageBreaks",{get:function(){return $e},set:function(Te){$e=Te}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Te){Te instanceof c&&(u=Te)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Te){u.path=Te}});var ke=[];Object.defineProperty(this,"ctxStack",{get:function(){return ke},set:function(Te){ke=Te}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Te){var ae;ae=f(Te),this.ctx.fillStyle=ae.style,this.ctx.isFillTransparent=ae.a===0,this.ctx.fillOpacity=ae.a,this.pdf.setFillColor(ae.r,ae.g,ae.b,{a:ae.a}),this.pdf.setTextColor(ae.r,ae.g,ae.b,{a:ae.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Te){var ae=f(Te);this.ctx.strokeStyle=ae.style,this.ctx.isStrokeTransparent=ae.a===0,this.ctx.strokeOpacity=ae.a,ae.a===0?this.pdf.setDrawColor(255,255,255):(ae.a,this.pdf.setDrawColor(ae.r,ae.g,ae.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Te){["butt","round","square"].indexOf(Te)!==-1&&(this.ctx.lineCap=Te,this.pdf.setLineCap(Te))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Te){isNaN(Te)||(this.ctx.lineWidth=Te,this.pdf.setLineWidth(Te))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Te){["bevel","round","miter"].indexOf(Te)!==-1&&(this.ctx.lineJoin=Te,this.pdf.setLineJoin(Te))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Te){isNaN(Te)||(this.ctx.miterLimit=Te,this.pdf.setMiterLimit(Te))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Te){this.ctx.textBaseline=Te}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Te){["right","end","center","left","start"].indexOf(Te)!==-1&&(this.ctx.textAlign=Te)}});var fe=null;function Ie(Te,ae){if(fe===null){var gt=function(Ye){var Ge=[];return Object.keys(Ye).forEach(function(et){Ye[et].forEach(function(vt){var bt=null;switch(vt){case"bold":bt={family:et,weight:"bold"};break;case"italic":bt={family:et,style:"italic"};break;case"bolditalic":bt={family:et,weight:"bold",style:"italic"};break;case"":case"normal":bt={family:et}}bt!==null&&(bt.ref={name:et,style:vt},Ge.push(bt))})}),Ge}(Te.getFontList());fe=function(Ye){for(var Ge={},et=0;et<Ye.length;++et){var vt=hE(Ye[et]),bt=vt.family,pe=vt.stretch,te=vt.style,Ne=vt.weight;Ge[bt]=Ge[bt]||{},Ge[bt][pe]=Ge[bt][pe]||{},Ge[bt][pe][te]=Ge[bt][pe][te]||{},Ge[bt][pe][te][Ne]=vt}return Ge}(gt.concat(ae))}return fe}var Ue=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ue},set:function(Te){fe=null,Ue=Te}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Te){var ae;if(this.ctx.font=Te,(ae=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Te))!==null){var gt=ae[1];ae[2];var Ye=ae[3],Ge=ae[4];ae[5];var et=ae[6],vt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ge)[2];Ge=Math.floor(vt==="px"?parseFloat(Ge)*this.pdf.internal.scaleFactor:vt==="em"?parseFloat(Ge)*this.pdf.getFontSize():parseFloat(Ge)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ge);var bt=function(wt){var ut,Pe,Ht=[],Pt=wt.trim();if(Pt==="")return Pb;if(Pt in zL)return[zL[Pt]];for(;Pt!=="";){switch(Pe=null,ut=(Pt=GL(Pt)).charAt(0)){case'"':case"'":Pe=Hte(Pt.substring(1),ut);break;default:Pe=Gte(Pt)}if(Pe===null||(Ht.push(Pe[0]),(Pt=GL(Pe[1]))!==""&&Pt.charAt(0)!==","))return Pb;Pt=Pt.replace(/^,/,"")}return Ht}(et);if(this.fontFaces){var pe=zte(Ie(this.pdf,this.fontFaces),bt.map(function(wt){return{family:wt,stretch:"normal",weight:Ye,style:gt}}));this.pdf.setFont(pe.ref.name,pe.ref.style)}else{var te="";(Ye==="bold"||parseInt(Ye,10)>=700||gt==="bold")&&(te="bold"),gt==="italic"&&(te+="italic"),te.length===0&&(te="normal");for(var Ne="",st={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},rt=0;rt<bt.length;rt++){if(this.pdf.internal.getFont(bt[rt],te,{noFallback:!0,disableWarning:!0})!==void 0){Ne=bt[rt];break}if(te==="bolditalic"&&this.pdf.internal.getFont(bt[rt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ne=bt[rt],te="bold";else if(this.pdf.internal.getFont(bt[rt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ne=bt[rt],te="normal";break}}if(Ne===""){for(var pt=0;pt<bt.length;pt++)if(st[bt[pt]]){Ne=st[bt[pt]];break}}Ne=Ne===""?"Times":Ne,this.pdf.setFont(Ne,te)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Te){this.ctx.globalCompositeOperation=Te}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Te){this.ctx.globalAlpha=Te}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Te){this.ctx.lineDashOffset=Te,ie.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Te){this.ctx.lineDash=Te,ie.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Te){this.ctx.ignoreClearRect=Boolean(Te)}})};h.prototype.setLineDash=function(D){this.lineDash=D},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){E.call(this,"fill",!1)},h.prototype.stroke=function(){E.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(D,q){if(isNaN(D)||isNaN(q))throw Wr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Z=this.ctx.transform.applyToPoint(new s(D,q));this.path.push({type:"mt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new s(D,q)},h.prototype.closePath=function(){var D=new s(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Br(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){D=new s(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(D.x,D.y)},h.prototype.lineTo=function(D,q){if(isNaN(D)||isNaN(q))throw Wr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Z=this.ctx.transform.applyToPoint(new s(D,q));this.path.push({type:"lt",x:Z.x,y:Z.y}),this.ctx.lastPoint=new s(Z.x,Z.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),E.call(this,null,!0)},h.prototype.quadraticCurveTo=function(D,q,Z,Q){if(isNaN(Z)||isNaN(Q)||isNaN(D)||isNaN(q))throw Wr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var se=this.ctx.transform.applyToPoint(new s(Z,Q)),me=this.ctx.transform.applyToPoint(new s(D,q));this.path.push({type:"qct",x1:me.x,y1:me.y,x:se.x,y:se.y}),this.ctx.lastPoint=new s(se.x,se.y)},h.prototype.bezierCurveTo=function(D,q,Z,Q,se,me){if(isNaN(se)||isNaN(me)||isNaN(D)||isNaN(q)||isNaN(Z)||isNaN(Q))throw Wr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Se=this.ctx.transform.applyToPoint(new s(se,me)),Ce=this.ctx.transform.applyToPoint(new s(D,q)),$e=this.ctx.transform.applyToPoint(new s(Z,Q));this.path.push({type:"bct",x1:Ce.x,y1:Ce.y,x2:$e.x,y2:$e.y,x:Se.x,y:Se.y}),this.ctx.lastPoint=new s(Se.x,Se.y)},h.prototype.arc=function(D,q,Z,Q,se,me){if(isNaN(D)||isNaN(q)||isNaN(Z)||isNaN(Q)||isNaN(se))throw Wr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(me=Boolean(me),!this.ctx.transform.isIdentity){var Se=this.ctx.transform.applyToPoint(new s(D,q));D=Se.x,q=Se.y;var Ce=this.ctx.transform.applyToPoint(new s(0,Z)),$e=this.ctx.transform.applyToPoint(new s(0,0));Z=Math.sqrt(Math.pow(Ce.x-$e.x,2)+Math.pow(Ce.y-$e.y,2))}Math.abs(se-Q)>=2*Math.PI&&(Q=0,se=2*Math.PI),this.path.push({type:"arc",x:D,y:q,radius:Z,startAngle:Q,endAngle:se,counterclockwise:me})},h.prototype.arcTo=function(D,q,Z,Q,se){throw new Error("arcTo not implemented.")},h.prototype.rect=function(D,q,Z,Q){if(isNaN(D)||isNaN(q)||isNaN(Z)||isNaN(Q))throw Wr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(D,q),this.lineTo(D+Z,q),this.lineTo(D+Z,q+Q),this.lineTo(D,q+Q),this.lineTo(D,q),this.lineTo(D+Z,q),this.lineTo(D,q)},h.prototype.fillRect=function(D,q,Z,Q){if(isNaN(D)||isNaN(q)||isNaN(Z)||isNaN(Q))throw Wr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!d.call(this)){var se={};this.lineCap!=="butt"&&(se.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(se.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(D,q,Z,Q),this.fill(),se.hasOwnProperty("lineCap")&&(this.lineCap=se.lineCap),se.hasOwnProperty("lineJoin")&&(this.lineJoin=se.lineJoin)}},h.prototype.strokeRect=function(D,q,Z,Q){if(isNaN(D)||isNaN(q)||isNaN(Z)||isNaN(Q))throw Wr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(D,q,Z,Q),this.stroke())},h.prototype.clearRect=function(D,q,Z,Q){if(isNaN(D)||isNaN(q)||isNaN(Z)||isNaN(Q))throw Wr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(D,q,Z,Q))},h.prototype.save=function(D){D=typeof D!="boolean"||D;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),D){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},h.prototype.restore=function(D){D=typeof D!="boolean"||D;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,Z=0;Z<this.pdf.internal.getNumberOfPages();Z++)this.pdf.setPage(Z+1),this.pdf.internal.out("Q");this.pdf.setPage(q),D&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(D){var q,Z,Q,se;if(D.isCanvasGradient===!0&&(D=D.getColor()),!D)return{r:0,g:0,b:0,a:0,style:D};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(D))q=0,Z=0,Q=0,se=0;else{var me=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(D);if(me!==null)q=parseInt(me[1]),Z=parseInt(me[2]),Q=parseInt(me[3]),se=1;else if((me=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(D))!==null)q=parseInt(me[1]),Z=parseInt(me[2]),Q=parseInt(me[3]),se=parseFloat(me[4]);else{if(se=1,typeof D=="string"&&D.charAt(0)!=="#"){var Se=new cO(D);D=Se.ok?Se.toHex():"#000000"}D.length===4?(q=D.substring(1,2),q+=q,Z=D.substring(2,3),Z+=Z,Q=D.substring(3,4),Q+=Q):(q=D.substring(1,3),Z=D.substring(3,5),Q=D.substring(5,7)),q=parseInt(q,16),Z=parseInt(Z,16),Q=parseInt(Q,16)}}return{r:q,g:Z,b:Q,a:se,style:D}},d=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(D,q,Z,Q){if(isNaN(q)||isNaN(Z)||typeof D!="string")throw Wr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!d.call(this)){var se=V(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;z.call(this,{text:D,x:q,y:Z,scale:me,angle:se,align:this.textAlign,maxWidth:Q})}},h.prototype.strokeText=function(D,q,Z,Q){if(isNaN(q)||isNaN(Z)||typeof D!="string")throw Wr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){Q=isNaN(Q)?void 0:Q;var se=V(this.ctx.transform.rotation),me=this.ctx.transform.scaleX;z.call(this,{text:D,x:q,y:Z,scale:me,renderingMode:"stroke",angle:se,align:this.textAlign,maxWidth:Q})}},h.prototype.measureText=function(D){if(typeof D!="string")throw Wr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,Z=this.pdf.internal.scaleFactor,Q=q.internal.getFontSize(),se=q.getStringUnitWidth(D)*Q/q.internal.scaleFactor,me=function(Se){var Ce=(Se=Se||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ce}}),this};return new me({width:se*=Math.round(96*Z/72*1e4)/1e4})},h.prototype.scale=function(D,q){if(isNaN(D)||isNaN(q))throw Wr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Z=new l(D,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.rotate=function(D){if(isNaN(D))throw Wr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new l(Math.cos(D),Math.sin(D),-Math.sin(D),Math.cos(D),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},h.prototype.translate=function(D,q){if(isNaN(D)||isNaN(q))throw Wr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Z=new l(1,0,0,1,D,q);this.ctx.transform=this.ctx.transform.multiply(Z)},h.prototype.transform=function(D,q,Z,Q,se,me){if(isNaN(D)||isNaN(q)||isNaN(Z)||isNaN(Q)||isNaN(se)||isNaN(me))throw Wr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Se=new l(D,q,Z,Q,se,me);this.ctx.transform=this.ctx.transform.multiply(Se)},h.prototype.setTransform=function(D,q,Z,Q,se,me){D=isNaN(D)?1:D,q=isNaN(q)?0:q,Z=isNaN(Z)?0:Z,Q=isNaN(Q)?1:Q,se=isNaN(se)?0:se,me=isNaN(me)?0:me,this.ctx.transform=new l(D,q,Z,Q,se,me)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(D,q,Z,Q,se,me,Se,Ce,$e){var ke=this.pdf.getImageProperties(D),fe=1,Ie=1,Ue=1,Te=1;Q!==void 0&&Ce!==void 0&&(Ue=Ce/Q,Te=$e/se,fe=ke.width/Q*Ce/Q,Ie=ke.height/se*$e/se),me===void 0&&(me=q,Se=Z,q=0,Z=0),Q!==void 0&&Ce===void 0&&(Ce=Q,$e=se),Q===void 0&&Ce===void 0&&(Ce=ke.width,$e=ke.height);for(var ae,gt=this.ctx.transform.decompose(),Ye=V(gt.rotate.shx),Ge=new l,et=(Ge=(Ge=(Ge=Ge.multiply(gt.translate)).multiply(gt.skew)).multiply(gt.scale)).applyToRectangle(new a(me-q*Ue,Se-Z*Te,Q*fe,se*Ie)),vt=x.call(this,et),bt=[],pe=0;pe<vt.length;pe+=1)bt.indexOf(vt[pe])===-1&&bt.push(vt[pe]);if(_(bt),this.autoPaging)for(var te=bt[0],Ne=bt[bt.length-1],st=te;st<Ne+1;st++){this.pdf.setPage(st);var rt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pt=st===1?this.posY+this.margin[0]:this.margin[0],wt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Pe=st===1?0:wt+(st-2)*ut;if(this.ctx.clip_path.length!==0){var Ht=this.path;ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(ae,this.posX+this.margin[3],-Pe+pt+this.ctx.prevPageLastElemOffset),C.call(this,"fill",!0),this.path=Ht}var Pt=JSON.parse(JSON.stringify(et));Pt=S([Pt],this.posX+this.margin[3],-Pe+pt+this.ctx.prevPageLastElemOffset)[0];var Dt=(st>te||st<Ne)&&y.call(this);Dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],rt,ut,null).clip().discardPath()),this.pdf.addImage(D,"JPEG",Pt.x,Pt.y,Pt.w,Pt.h,null,null,Ye),Dt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(D,"JPEG",et.x,et.y,et.w,et.h,null,null,Ye)};var x=function(D,q,Z){var Q=[];q=q||this.pdf.internal.pageSize.width,Z=Z||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var se=this.posY+this.ctx.prevPageLastElemOffset;switch(D.type){default:case"mt":case"lt":Q.push(Math.floor((D.y+se)/Z)+1);break;case"arc":Q.push(Math.floor((D.y+se-D.radius)/Z)+1),Q.push(Math.floor((D.y+se+D.radius)/Z)+1);break;case"qct":var me=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x,D.y);Q.push(Math.floor((me.y+se)/Z)+1),Q.push(Math.floor((me.y+me.h+se)/Z)+1);break;case"bct":var Se=j(this.ctx.lastPoint.x,this.ctx.lastPoint.y,D.x1,D.y1,D.x2,D.y2,D.x,D.y);Q.push(Math.floor((Se.y+se)/Z)+1),Q.push(Math.floor((Se.y+Se.h+se)/Z)+1);break;case"rect":Q.push(Math.floor((D.y+se)/Z)+1),Q.push(Math.floor((D.y+D.h+se)/Z)+1)}for(var Ce=0;Ce<Q.length;Ce+=1)for(;this.pdf.internal.getNumberOfPages()<Q[Ce];)g.call(this);return Q},g=function(){var D=this.fillStyle,q=this.strokeStyle,Z=this.font,Q=this.lineCap,se=this.lineWidth,me=this.lineJoin;this.pdf.addPage(),this.fillStyle=D,this.strokeStyle=q,this.font=Z,this.lineCap=Q,this.lineWidth=se,this.lineJoin=me},S=function(D,q,Z){for(var Q=0;Q<D.length;Q++)switch(D[Q].type){case"bct":D[Q].x2+=q,D[Q].y2+=Z;case"qct":D[Q].x1+=q,D[Q].y1+=Z;case"mt":case"lt":case"arc":default:D[Q].x+=q,D[Q].y+=Z}return D},_=function(D){return D.sort(function(q,Z){return q-Z})},E=function(D,q){for(var Z,Q,se=this.fillStyle,me=this.strokeStyle,Se=this.lineCap,Ce=this.lineWidth,$e=Math.abs(Ce*this.ctx.transform.scaleX),ke=this.lineJoin,fe=JSON.parse(JSON.stringify(this.path)),Ie=JSON.parse(JSON.stringify(this.path)),Ue=[],Te=0;Te<Ie.length;Te++)if(Ie[Te].x!==void 0)for(var ae=x.call(this,Ie[Te]),gt=0;gt<ae.length;gt+=1)Ue.indexOf(ae[gt])===-1&&Ue.push(ae[gt]);for(var Ye=0;Ye<Ue.length;Ye++)for(;this.pdf.internal.getNumberOfPages()<Ue[Ye];)g.call(this);if(_(Ue),this.autoPaging)for(var Ge=Ue[0],et=Ue[Ue.length-1],vt=Ge;vt<et+1;vt++){this.pdf.setPage(vt),this.fillStyle=se,this.strokeStyle=me,this.lineCap=Se,this.lineWidth=$e,this.lineJoin=ke;var bt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],pe=vt===1?this.posY+this.margin[0]:this.margin[0],te=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ne=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],st=vt===1?0:te+(vt-2)*Ne;if(this.ctx.clip_path.length!==0){var rt=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(Z,this.posX+this.margin[3],-st+pe+this.ctx.prevPageLastElemOffset),C.call(this,D,!0),this.path=rt}if(Q=JSON.parse(JSON.stringify(fe)),this.path=S(Q,this.posX+this.margin[3],-st+pe+this.ctx.prevPageLastElemOffset),q===!1||vt===0){var pt=(vt>Ge||vt<et)&&y.call(this);pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],bt,Ne,null).clip().discardPath()),C.call(this,D,q),pt&&this.pdf.restoreGraphicsState()}this.lineWidth=Ce}else this.lineWidth=$e,C.call(this,D,q),this.lineWidth=Ce;this.path=fe},C=function(D,q){if((D!=="stroke"||q||!v.call(this))&&(D==="stroke"||q||!d.call(this))){for(var Z,Q,se=[],me=this.path,Se=0;Se<me.length;Se++){var Ce=me[Se];switch(Ce.type){case"begin":se.push({begin:!0});break;case"close":se.push({close:!0});break;case"mt":se.push({start:Ce,deltas:[],abs:[]});break;case"lt":var $e=se.length;if(me[Se-1]&&!isNaN(me[Se-1].x)&&(Z=[Ce.x-me[Se-1].x,Ce.y-me[Se-1].y],$e>0)){for(;$e>=0;$e--)if(se[$e-1].close!==!0&&se[$e-1].begin!==!0){se[$e-1].deltas.push(Z),se[$e-1].abs.push(Ce);break}}break;case"bct":Z=[Ce.x1-me[Se-1].x,Ce.y1-me[Se-1].y,Ce.x2-me[Se-1].x,Ce.y2-me[Se-1].y,Ce.x-me[Se-1].x,Ce.y-me[Se-1].y],se[se.length-1].deltas.push(Z);break;case"qct":var ke=me[Se-1].x+2/3*(Ce.x1-me[Se-1].x),fe=me[Se-1].y+2/3*(Ce.y1-me[Se-1].y),Ie=Ce.x+2/3*(Ce.x1-Ce.x),Ue=Ce.y+2/3*(Ce.y1-Ce.y),Te=Ce.x,ae=Ce.y;Z=[ke-me[Se-1].x,fe-me[Se-1].y,Ie-me[Se-1].x,Ue-me[Se-1].y,Te-me[Se-1].x,ae-me[Se-1].y],se[se.length-1].deltas.push(Z);break;case"arc":se.push({deltas:[],abs:[],arc:!0}),Array.isArray(se[se.length-1].abs)&&se[se.length-1].abs.push(Ce)}}Q=q?null:D==="stroke"?"stroke":"fill";for(var gt=!1,Ye=0;Ye<se.length;Ye++)if(se[Ye].arc)for(var Ge=se[Ye].abs,et=0;et<Ge.length;et++){var vt=Ge[et];vt.type==="arc"?R.call(this,vt.x,vt.y,vt.radius,vt.startAngle,vt.endAngle,vt.counterclockwise,void 0,q,!gt):H.call(this,vt.x,vt.y),gt=!0}else if(se[Ye].close===!0)this.pdf.internal.out("h"),gt=!1;else if(se[Ye].begin!==!0){var bt=se[Ye].start.x,pe=se[Ye].start.y;G.call(this,se[Ye].deltas,bt,pe),gt=!0}Q&&k.call(this,Q),q&&L.call(this)}},I=function(D){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Z=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return D-Z;case"top":return D+q-Z;case"hanging":return D+q-2*Z;case"middle":return D+q/2-Z;case"ideographic":return D;case"alphabetic":default:return D}},F=function(D){return D+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var D=function(){};return D.colorStops=[],D.addColorStop=function(q,Z){this.colorStops.push([q,Z])},D.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},D.isCanvasGradient=!0,D},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var R=function(D,q,Z,Q,se,me,Se,Ce,$e){for(var ke=ee.call(this,Z,Q,se,me),fe=0;fe<ke.length;fe++){var Ie=ke[fe];fe===0&&($e?N.call(this,Ie.x1+D,Ie.y1+q):H.call(this,Ie.x1+D,Ie.y1+q)),K.call(this,D,q,Ie.x2,Ie.y2,Ie.x3,Ie.y3,Ie.x4,Ie.y4)}Ce?L.call(this):k.call(this,Se)},k=function(D){switch(D){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},N=function(D,q){this.pdf.internal.out(t(D)+" "+r(q)+" m")},z=function(D){var q;switch(D.align){case"right":case"end":q="right";break;case"center":q="center";break;case"left":case"start":default:q="left"}var Z=this.pdf.getTextDimensions(D.text),Q=I.call(this,D.y),se=F.call(this,Q)-Z.h,me=this.ctx.transform.applyToPoint(new s(D.x,Q)),Se=this.ctx.transform.decompose(),Ce=new l;Ce=(Ce=(Ce=Ce.multiply(Se.translate)).multiply(Se.skew)).multiply(Se.scale);for(var $e,ke,fe,Ie=this.ctx.transform.applyToRectangle(new a(D.x,Q,Z.w,Z.h)),Ue=Ce.applyToRectangle(new a(D.x,se,Z.w,Z.h)),Te=x.call(this,Ue),ae=[],gt=0;gt<Te.length;gt+=1)ae.indexOf(Te[gt])===-1&&ae.push(Te[gt]);if(_(ae),this.autoPaging)for(var Ye=ae[0],Ge=ae[ae.length-1],et=Ye;et<Ge+1;et++){this.pdf.setPage(et);var vt=et===1?this.posY+this.margin[0]:this.margin[0],bt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],pe=this.pdf.internal.pageSize.height-this.margin[2],te=pe-this.margin[0],Ne=this.pdf.internal.pageSize.width-this.margin[1],st=Ne-this.margin[3],rt=et===1?0:bt+(et-2)*te;if(this.ctx.clip_path.length!==0){var pt=this.path;$e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S($e,this.posX+this.margin[3],-1*rt+vt),C.call(this,"fill",!0),this.path=pt}var wt=S([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-rt+vt+this.ctx.prevPageLastElemOffset)[0];D.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*D.scale),fe=this.lineWidth,this.lineWidth=fe*D.scale);var ut=this.autoPaging!=="text";if(ut||wt.y+wt.h<=pe){if(ut||wt.y>=vt&&wt.x<=Ne){var Pe=ut?D.text:this.pdf.splitTextToSize(D.text,D.maxWidth||Ne-wt.x)[0],Ht=S([JSON.parse(JSON.stringify(Ie))],this.posX+this.margin[3],-rt+vt+this.ctx.prevPageLastElemOffset)[0],Pt=ut&&(et>Ye||et<Ge)&&y.call(this);Pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],st,te,null).clip().discardPath()),this.pdf.text(Pe,Ht.x,Ht.y,{angle:D.angle,align:q,renderingMode:D.renderingMode}),Pt&&this.pdf.restoreGraphicsState()}}else wt.y<pe&&(this.ctx.prevPageLastElemOffset+=pe-wt.y);D.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=fe)}else D.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*D.scale),fe=this.lineWidth,this.lineWidth=fe*D.scale),this.pdf.text(D.text,me.x+this.posX,me.y+this.posY,{angle:D.angle,align:q,renderingMode:D.renderingMode,maxWidth:D.maxWidth}),D.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=fe)},H=function(D,q,Z,Q){Z=Z||0,Q=Q||0,this.pdf.internal.out(t(D+Z)+" "+r(q+Q)+" l")},G=function(D,q,Z){return this.pdf.lines(D,q,Z,null,null)},K=function(D,q,Z,Q,se,me,Se,Ce){this.pdf.internal.out([e(i(Z+D)),e(o(Q+q)),e(i(se+D)),e(o(me+q)),e(i(Se+D)),e(o(Ce+q)),"c"].join(" "))},ee=function(D,q,Z,Q){for(var se=2*Math.PI,me=Math.PI/2;q>Z;)q-=se;var Se=Math.abs(Z-q);Se<se&&Q&&(Se=se-Se);for(var Ce=[],$e=Q?-1:1,ke=q;Se>1e-5;){var fe=ke+$e*Math.min(Se,me);Ce.push(le.call(this,D,ke,fe)),Se-=Math.abs(fe-ke),ke=fe}return Ce},le=function(D,q,Z){var Q=(Z-q)/2,se=D*Math.cos(Q),me=D*Math.sin(Q),Se=se,Ce=-me,$e=Se*Se+Ce*Ce,ke=$e+Se*se+Ce*me,fe=4/3*(Math.sqrt(2*$e*ke)-ke)/(Se*me-Ce*se),Ie=Se-fe*Ce,Ue=Ce+fe*Se,Te=Ie,ae=-Ue,gt=Q+q,Ye=Math.cos(gt),Ge=Math.sin(gt);return{x1:D*Math.cos(q),y1:D*Math.sin(q),x2:Ie*Ye-Ue*Ge,y2:Ie*Ge+Ue*Ye,x3:Te*Ye-ae*Ge,y3:Te*Ge+ae*Ye,x4:D*Math.cos(Z),y4:D*Math.sin(Z)}},V=function(D){return 180*D/Math.PI},J=function(D,q,Z,Q,se,me){var Se=D+.5*(Z-D),Ce=q+.5*(Q-q),$e=se+.5*(Z-se),ke=me+.5*(Q-me),fe=Math.min(D,se,Se,$e),Ie=Math.max(D,se,Se,$e),Ue=Math.min(q,me,Ce,ke),Te=Math.max(q,me,Ce,ke);return new a(fe,Ue,Ie-fe,Te-Ue)},j=function(D,q,Z,Q,se,me,Se,Ce){var $e,ke,fe,Ie,Ue,Te,ae,gt,Ye,Ge,et,vt,bt,pe,te=Z-D,Ne=Q-q,st=se-Z,rt=me-Q,pt=Se-se,wt=Ce-me;for(ke=0;ke<41;ke++)Ye=(ae=(fe=D+($e=ke/40)*te)+$e*((Ue=Z+$e*st)-fe))+$e*(Ue+$e*(se+$e*pt-Ue)-ae),Ge=(gt=(Ie=q+$e*Ne)+$e*((Te=Q+$e*rt)-Ie))+$e*(Te+$e*(me+$e*wt-Te)-gt),ke==0?(et=Ye,vt=Ge,bt=Ye,pe=Ge):(et=Math.min(et,Ye),vt=Math.min(vt,Ge),bt=Math.max(bt,Ye),pe=Math.max(pe,Ge));return new a(Math.round(et),Math.round(vt),Math.round(bt-et),Math.round(pe-vt))},ie=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var D,q,Z=(D=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:D,lineDashOffset:q}));this.prevLineDash!==Z&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Z)}}})(vn.API),function(n){var e=function(o){var s,a,l,u,c,h,f,d,v,y;for(a=[],l=0,u=(o+=s="\0\0\0\0".slice(o.length%4||4)).length;u>l;l+=4)(c=(o.charCodeAt(l)<<24)+(o.charCodeAt(l+1)<<16)+(o.charCodeAt(l+2)<<8)+o.charCodeAt(l+3))!==0?(h=(c=((c=((c=((c=(c-(y=c%85))/85)-(v=c%85))/85)-(d=c%85))/85)-(f=c%85))/85)%85,a.push(h+33,f+33,d+33,v+33,y+33)):a.push(122);return function(x,g){for(var S=g;S>0;S--)x.pop()}(a,s.length),String.fromCharCode.apply(String,a)+"~>"},t=function(o){var s,a,l,u,c,h=String,f="length",d=255,v="charCodeAt",y="slice",x="replace";for(o[y](-2),o=o[y](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),l=[],u=0,c=(o+=s="uuuuu"[y](o[f]%5||5))[f];c>u;u+=5)a=52200625*(o[v](u)-33)+614125*(o[v](u+1)-33)+7225*(o[v](u+2)-33)+85*(o[v](u+3)-33)+(o[v](u+4)-33),l.push(d&a>>24,d&a>>16,d&a>>8,d&a);return function(g,S){for(var _=S;_>0;_--)g.pop()}(l,s[f]),h.fromCharCode.apply(h,l)},r=function(o){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),s.test(o)===!1)return"";for(var a="",l=0;l<o.length;l+=2)a+=String.fromCharCode("0x"+(o[l]+o[l+1]));return a},i=function(o){for(var s=new Uint8Array(o.length),a=o.length;a--;)s[a]=o.charCodeAt(a);return o=(s=oE(s)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(o,s){var a=0,l=o||"",u=[];for(typeof(s=s||[])=="string"&&(s=[s]),a=0;a<s.length;a+=1)switch(s[a]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[a]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(vn.API),function(n){n.loadFile=function(e,t,r){return function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=function(l,u,c){var h=new XMLHttpRequest,f=0,d=function(v){var y=v.length,x=[],g=String.fromCharCode;for(f=0;f<y;f+=1)x.push(g(255&v.charCodeAt(f)));return x.join("")};if(h.open("GET",l,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?c(d(this.responseText)):c(void 0)}),h.send(null),u&&h.status===200)return d(h.responseText)}(i,o,s)}catch{}return a}(e,t,r)},n.loadImageFile=n.loadFile}(vn.API),function(n){function e(){return(_n.html2canvas?Promise.resolve(_n.html2canvas):Ox(()=>import("./html2canvas.esm-0a33ed42.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function t(){return(_n.DOMPurify?Promise.resolve(_n.DOMPurify):Ox(()=>import("./purify.es-7857af48.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var r=function(s){var a=Br(s);return a==="undefined"?"undefined":a==="string"||s instanceof String?"string":a==="number"||s instanceof Number?"number":a==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(s,a){var l=document.createElement(s);for(var u in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[u]=a.style[u];return l},o=function s(a){var l=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),u=s.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,s,1,[s])).set(a)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(s,a){return s.__proto__=a||o.prototype,s},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(s,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:s,dompurify:l})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},o.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(u,c){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),f=u.firstChild;f;f=f.nextSibling)c!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||h.appendChild(l(f,c));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(a){var l=this.opt.jsPDF,u=this.opt.fontFaces,c=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:c,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var d=u[f],v=d.src.find(function(y){return y.format==="truetype"});v&&l.addFont(v.url,d.ref.name,d.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),a(this.prop.container,h)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(s,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(s,a):this.outputPdf(s,a)},o.prototype.outputPdf=function(s,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,a)})},o.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},o.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(s){if(r(s)!=="object")return this;var a=Object.keys(s||{}).map(function(l){if(l in o.template.prop)return function(){this.prop[l]=s[l]};switch(l){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[l]=s[l]}}},this);return this.then(function(){return this.thenList(a)})},o.prototype.get=function(s,a){return this.then(function(){var l=s in o.template.prop?this.prop[s]:this.opt[s];return a?a(l):l})},o.prototype.setMargin=function(s){return this.then(function(){switch(r(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},o.prototype.setPageSize=function(s){function a(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(s=s||vn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:a(s.inner.width,s.k),height:a(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},o.prototype.setProgress=function(s,a,l,u){return s!=null&&(this.progress.val=s),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(s,a,l,u){return this.setProgress(s?this.progress.val+s:null,a||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(s,a){var l=this;return this.thenCore(s,a,function(u,c){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,u),h}).then(u,c).then(function(h){return l.updateProgress(1),h})})},o.prototype.thenCore=function(s,a,l){l=l||Promise.prototype.then,s&&(s=s.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),c=l.call(u,s,a);return o.convert(c,this.__proto__)},o.prototype.thenExternal=function(s,a){return Promise.prototype.then.call(this,s,a)},o.prototype.thenList=function(s){var a=this;return s.forEach(function(l){a=a.thenCore(l)}),a},o.prototype.catch=function(s){s&&(s=s.bind(this));var a=Promise.prototype.catch.call(this,s);return o.convert(a,this)},o.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},o.prototype.error=function(s){return this.then(function(){throw new Error(s)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,vn.getPageSize=function(s,a,l){if(Br(s)==="object"){var u=s;s=u.orientation,a=u.unit||a,l=u.format||l}a=a||"mm",l=l||"a4",s=(""+(s||"P")).toLowerCase();var c,h=(""+l).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":c=1;break;case"mm":c=72/25.4;break;case"cm":c=72/2.54;break;case"in":c=72;break;case"px":c=.75;break;case"pc":case"em":c=12;break;case"ex":c=6;break;default:throw"Invalid unit: "+a}var d,v=0,y=0;if(f.hasOwnProperty(h))v=f[h][1]/c,y=f[h][0]/c;else try{v=l[1],y=l[0]}catch{throw new Error("Invalid format: "+l)}if(s==="p"||s==="portrait")s="p",y>v&&(d=y,y=v,v=d);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",v>y&&(d=y,y=v,v=d)}return{width:y,height:v,unit:a,k:c,orientation:s}},n.html=function(s,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(hE):null;var l=new o(a);return a.worker?l:l.from(s).doCallback()}}(vn.API),vn.API.addJS=function(n){return WL=n,this.internal.events.subscribe("postPutResources",function(){M2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(M2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),VL=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+WL+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){M2!==void 0&&VL!==void 0&&this.internal.out("/Names <</JavaScript "+M2+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=r.exec(s);if(a!=null){var l=a[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,c=[];for(o=0;o<u;o++){var h=t.internal.newObject();c.push(h);var f=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var d=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<c.length;o++)t.internal.write("(page_"+(o+1)+")"+c[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+d+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var l=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])}(vn.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,o,s,a){var l,u=this.decode.DCT_DECODE,c=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(h){for(var f,d=256*h.charCodeAt(4)+h.charCodeAt(5),v=h.length,y={width:0,height:0,numcomponents:1},x=4;x<v;x+=2){if(x+=d,e.indexOf(h.charCodeAt(x+1))!==-1){f=256*h.charCodeAt(x+5)+h.charCodeAt(x+6),y={width:256*h.charCodeAt(x+7)+h.charCodeAt(x+8),height:f,numcomponents:h.charCodeAt(x+9)};break}d=256*h.charCodeAt(x+2)+h.charCodeAt(x+3)}return y}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:t,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return c}}(vn.API);var nm,E2,jL,qL,$L,Vte=function(){var n,e,t;function r(o){var s,a,l,u,c,h,f,d,v,y,x,g,S,_;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(s=this.readUInt32(),v=function(){var E,C;for(C=[],E=0;E<4;++E)C.push(String.fromCharCode(this.data[this.pos++]));return C}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},c=this.readUInt16(),u=this.readUInt16()||100,h.delay=1e3*c/u,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,s-=4),o=(h!=null?h.data:void 0)||this.imgData,g=0;0<=s?g<s:g>s;0<=s?++g:--g)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((y=l-this.transparency.indexed.length)>0)for(S=0;0<=y?S<y:S>y;0<=y?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":f=(x=this.read(s)).indexOf(0),d=String.fromCharCode.apply(String,x.slice(0,f)),this.text[d]=String.fromCharCode.apply(String,x.slice(f+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(o){var s,a;for(a=[],s=0;0<=o?s<o:s>o;0<=o?++s:--s)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(o){var s=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*s),l=0,u=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function c(h,f,d,v){var y,x,g,S,_,E,C,I,F,R,k,L,N,z,H,G,K,ee,le,V,J,j=Math.ceil((u.width-h)/d),ie=Math.ceil((u.height-f)/v),D=u.width==j&&u.height==ie;for(z=s*j,L=D?a:new Uint8Array(z*ie),E=o.length,N=0,x=0;N<ie&&l<E;){switch(o[l++]){case 0:for(S=K=0;K<z;S=K+=1)L[x++]=o[l++];break;case 1:for(S=ee=0;ee<z;S=ee+=1)y=o[l++],_=S<s?0:L[x-s],L[x++]=(y+_)%256;break;case 2:for(S=le=0;le<z;S=le+=1)y=o[l++],g=(S-S%s)/s,H=N&&L[(N-1)*z+g*s+S%s],L[x++]=(H+y)%256;break;case 3:for(S=V=0;V<z;S=V+=1)y=o[l++],g=(S-S%s)/s,_=S<s?0:L[x-s],H=N&&L[(N-1)*z+g*s+S%s],L[x++]=(y+Math.floor((_+H)/2))%256;break;case 4:for(S=J=0;J<z;S=J+=1)y=o[l++],g=(S-S%s)/s,_=S<s?0:L[x-s],N===0?H=G=0:(H=L[(N-1)*z+g*s+S%s],G=g&&L[(N-1)*z+(g-1)*s+S%s]),C=_+H-G,I=Math.abs(C-_),R=Math.abs(C-H),k=Math.abs(C-G),F=I<=R&&I<=k?_:R<=k?H:G,L[x++]=(y+F)%256;break;default:throw new Error("Invalid filter algorithm: "+o[l-1])}if(!D){var q=((f+N*v)*u.width+h)*s,Z=N*z;for(S=0;S<j;S+=1){for(var Q=0;Q<s;Q+=1)a[q++]=L[Z++];q+=(d-1)*s}}N++}}return o=Ste(o),u.interlaceMethod==1?(c(0,0,8,8),c(4,0,8,8),c(0,4,4,8),c(2,0,4,4),c(0,2,2,4),c(1,0,2,2),c(0,1,1,2)):c(0,0,1,1),a},r.prototype.decodePalette=function(){var o,s,a,l,u,c,h,f,d;for(a=this.palette,c=this.transparency.indexed||[],u=new Uint8Array((c.length||0)+a.length),l=0,o=0,s=h=0,f=a.length;h<f;s=h+=3)u[l++]=a[s],u[l++]=a[s+1],u[l++]=a[s+2],u[l++]=(d=c[o++])!=null?d:255;return u},r.prototype.copyToImageData=function(o,s){var a,l,u,c,h,f,d,v,y,x,g;if(l=this.colors,y=null,a=this.hasAlphaChannel,this.palette.length&&(y=(g=this._decodedPalette)!=null?g:this._decodedPalette=this.decodePalette(),l=4,a=!0),v=(u=o.data||o).length,h=y||s,c=f=0,l===1)for(;c<v;)d=y?4*s[c/4]:f,x=h[d++],u[c++]=x,u[c++]=x,u[c++]=x,u[c++]=a?h[d++]:255,f=d;else for(;c<v;)d=y?4*s[c/4]:f,u[c++]=h[d++],u[c++]=h[d++],u[c++]=h[d++],u[c++]=a?h[d++]:255,f=d},r.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var i=function(){if(Object.prototype.toString.call(_n)==="[object Window]"){try{e=_n.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(o){var s;if(i()===!0)return t.width=o.width,t.height=o.height,t.clearRect(0,0,o.width,o.height),t.putImageData(o,0,0),(s=new Image).src=e.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(o){var s,a,l,u,c,h,f,d;if(this.animation){for(d=[],a=c=0,h=(f=this.animation.frames).length;c<h;a=++c)s=f[a],l=o.createImageData(s.width,s.height),u=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(l,u),s.imageData=l,d.push(s.image=n(l));return d}},r.prototype.renderFrame=function(o,s){var a,l,u;return a=(l=this.animation.frames)[s],u=l[s-1],s===0&&o.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?o.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&o.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&o.clearRect(a.xOffset,a.yOffset,a.width,a.height),o.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(o){var s,a,l,u,c,h,f=this;return a=0,h=this.animation,u=h.numFrames,l=h.frames,c=h.numPlays,(s=function(){var d,v;if(d=a++%u,v=l[d],f.renderFrame(o,d),u>1&&a/u<c)return f.animation._timeout=setTimeout(s,v.delay)})()},r.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},r.prototype.render=function(o){var s,a;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,s=o.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(a=s.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),s.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Wte(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],o=i>>7,s=1<<(7&i)+1;n[e++],n[e++];var a=null,l=null;o&&(a=e,l=s,e+=3*s);var u=!0,c=[],h=0,f=null,d=0,v=null;for(this.width=t,this.height=r;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,v=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((N=n[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=n[e++];h=n[e++]|n[e++]<<8,f=n[e++],!(1&y)&&(f=null),d=y>>2&7,e++;break;case 254:for(;;){if(!((N=n[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var x=n[e++]|n[e++]<<8,g=n[e++]|n[e++]<<8,S=n[e++]|n[e++]<<8,_=n[e++]|n[e++]<<8,E=n[e++],C=E>>6&1,I=1<<(7&E)+1,F=a,R=l,k=!1;E>>7&&(k=!0,F=e,R=I,e+=3*I);var L=e;for(e++;;){var N;if(!((N=n[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}c.push({x,y:g,width:S,height:_,has_local_palette:k,palette_offset:F,palette_size:R,data_offset:L,data_length:e-L,transparent_index:f,interlaced:!!C,delay:h,disposal:d});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return v},this.frameInfo=function(z){if(z<0||z>=c.length)throw new Error("Frame index out of range.");return c[z]},this.decodeAndBlitFrameBGRA=function(z,H){var G=this.frameInfo(z),K=G.width*G.height,ee=new Uint8Array(K);XL(n,G.data_offset,ee,K);var le=G.palette_offset,V=G.transparent_index;V===null&&(V=256);var J=G.width,j=t-J,ie=J,D=4*(G.y*t+G.x),q=4*((G.y+G.height)*t+G.x),Z=D,Q=4*j;G.interlaced===!0&&(Q+=4*t*7);for(var se=8,me=0,Se=ee.length;me<Se;++me){var Ce=ee[me];if(ie===0&&(ie=J,(Z+=Q)>=q&&(Q=4*j+4*t*(se-1),Z=D+(J+j)*(se<<1),se>>=1)),Ce===V)Z+=4;else{var $e=n[le+3*Ce],ke=n[le+3*Ce+1],fe=n[le+3*Ce+2];H[Z++]=fe,H[Z++]=ke,H[Z++]=$e,H[Z++]=255}--ie}},this.decodeAndBlitFrameRGBA=function(z,H){var G=this.frameInfo(z),K=G.width*G.height,ee=new Uint8Array(K);XL(n,G.data_offset,ee,K);var le=G.palette_offset,V=G.transparent_index;V===null&&(V=256);var J=G.width,j=t-J,ie=J,D=4*(G.y*t+G.x),q=4*((G.y+G.height)*t+G.x),Z=D,Q=4*j;G.interlaced===!0&&(Q+=4*t*7);for(var se=8,me=0,Se=ee.length;me<Se;++me){var Ce=ee[me];if(ie===0&&(ie=J,(Z+=Q)>=q&&(Q=4*j+4*t*(se-1),Z=D+(J+j)*(se<<1),se>>=1)),Ce===V)Z+=4;else{var $e=n[le+3*Ce],ke=n[le+3*Ce+1],fe=n[le+3*Ce+2];H[Z++]=$e,H[Z++]=ke,H[Z++]=fe,H[Z++]=255}--ie}}}function XL(n,e,t,r){for(var i=n[e++],o=1<<i,s=o+1,a=s+1,l=i+1,u=(1<<l)-1,c=0,h=0,f=0,d=n[e++],v=new Int32Array(4096),y=null;;){for(;c<16&&d!==0;)h|=n[e++]<<c,c+=8,d===1?d=n[e++]:--d;if(c<l)break;var x=h&u;if(h>>=l,c-=l,x!==o){if(x===s)break;for(var g=x<a?x:y,S=0,_=g;_>o;)_=v[_]>>8,++S;var E=_;if(f+S+(g!==x?1:0)>r)return void Wr.log("Warning, gif stream longer than expected.");t[f++]=E;var C=f+=S;for(g!==x&&(t[f++]=E),_=g;S--;)_=v[_],t[--C]=255&_,_>>=8;y!==null&&a<4096&&(v[a++]=y<<8|E,a>=u+1&&l<12&&(++l,u=u<<1|1)),y=x}else a=s+1,u=(1<<(l=i+1))-1,y=null}return f!==r&&Wr.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Rb(n){var e,t,r,i,o,s=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),h=new Array(65535),f=new Array(65535),d=new Array(64),v=new Array(64),y=[],x=0,g=7,S=new Array(64),_=new Array(64),E=new Array(64),C=new Array(256),I=new Array(2048),F=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],R=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],L=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],z=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],H=[0,1,2,3,4,5,6,7,8,9,10,11],G=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],K=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ee(D,q){for(var Z=0,Q=0,se=new Array,me=1;me<=16;me++){for(var Se=1;Se<=D[me];Se++)se[q[Q]]=[],se[q[Q]][0]=Z,se[q[Q]][1]=me,Q++,Z++;Z*=2}return se}function le(D){for(var q=D[0],Z=D[1]-1;Z>=0;)q&1<<Z&&(x|=1<<g),Z--,--g<0&&(x==255?(V(255),V(0)):V(x),g=7,x=0)}function V(D){y.push(D)}function J(D){V(D>>8&255),V(255&D)}function j(D,q,Z,Q,se){for(var me,Se=se[0],Ce=se[240],$e=function(Ge,et){var vt,bt,pe,te,Ne,st,rt,pt,wt,ut,Pe=0;for(wt=0;wt<8;++wt){vt=Ge[Pe],bt=Ge[Pe+1],pe=Ge[Pe+2],te=Ge[Pe+3],Ne=Ge[Pe+4],st=Ge[Pe+5],rt=Ge[Pe+6];var Ht=vt+(pt=Ge[Pe+7]),Pt=vt-pt,Dt=bt+rt,Tt=bt-rt,be=pe+st,Ke=pe-st,ct=te+Ne,Ae=te-Ne,Oe=Ht+ct,Ve=Ht-ct,At=Dt+be,Ct=Dt-be;Ge[Pe]=Oe+At,Ge[Pe+4]=Oe-At;var Nt=.707106781*(Ct+Ve);Ge[Pe+2]=Ve+Nt,Ge[Pe+6]=Ve-Nt;var Xt=.382683433*((Oe=Ae+Ke)-(Ct=Tt+Pt)),kn=.5411961*Oe+Xt,Yn=1.306562965*Ct+Xt,wn=.707106781*(At=Ke+Tt),ir=Pt+wn,Wt=Pt-wn;Ge[Pe+5]=Wt+kn,Ge[Pe+3]=Wt-kn,Ge[Pe+1]=ir+Yn,Ge[Pe+7]=ir-Yn,Pe+=8}for(Pe=0,wt=0;wt<8;++wt){vt=Ge[Pe],bt=Ge[Pe+8],pe=Ge[Pe+16],te=Ge[Pe+24],Ne=Ge[Pe+32],st=Ge[Pe+40],rt=Ge[Pe+48];var Yi=vt+(pt=Ge[Pe+56]),Zi=vt-pt,Ir=bt+rt,ar=bt-rt,dr=pe+st,lr=pe-st,yn=te+Ne,Ki=te-Ne,Bi=Yi+yn,$=Yi-yn,B=Ir+dr,re=Ir-dr;Ge[Pe]=Bi+B,Ge[Pe+32]=Bi-B;var ve=.707106781*(re+$);Ge[Pe+16]=$+ve,Ge[Pe+48]=$-ve;var ge=.382683433*((Bi=Ki+lr)-(re=ar+Zi)),_e=.5411961*Bi+ge,qe=1.306562965*re+ge,Xe=.707106781*(B=lr+ar),it=Zi+Xe,tt=Zi-Xe;Ge[Pe+40]=tt+_e,Ge[Pe+24]=tt-_e,Ge[Pe+8]=it+qe,Ge[Pe+56]=it-qe,Pe++}for(wt=0;wt<64;++wt)ut=Ge[wt]*et[wt],d[wt]=ut>0?ut+.5|0:ut-.5|0;return d}(D,q),ke=0;ke<64;++ke)v[F[ke]]=$e[ke];var fe=v[0]-Z;Z=v[0],fe==0?le(Q[0]):(le(Q[f[me=32767+fe]]),le(h[me]));for(var Ie=63;Ie>0&&v[Ie]==0;)Ie--;if(Ie==0)return le(Se),Z;for(var Ue,Te=1;Te<=Ie;){for(var ae=Te;v[Te]==0&&Te<=Ie;)++Te;var gt=Te-ae;if(gt>=16){Ue=gt>>4;for(var Ye=1;Ye<=Ue;++Ye)le(Ce);gt&=15}me=32767+v[Te],le(se[(gt<<4)+f[me]]),le(h[me]),Te++}return Ie!=63&&le(Se),Z}function ie(D){D=Math.min(Math.max(D,1),100),o!=D&&(function(q){for(var Z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var se=s((Z[Q]*q+50)/100);se=Math.min(Math.max(se,1),255),a[F[Q]]=se}for(var me=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Se=0;Se<64;Se++){var Ce=s((me[Se]*q+50)/100);Ce=Math.min(Math.max(Ce,1),255),l[F[Se]]=Ce}for(var $e=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ke=0,fe=0;fe<8;fe++)for(var Ie=0;Ie<8;Ie++)u[ke]=1/(a[F[ke]]*$e[fe]*$e[Ie]*8),c[ke]=1/(l[F[ke]]*$e[fe]*$e[Ie]*8),ke++}(D<50?Math.floor(5e3/D):Math.floor(200-2*D)),o=D)}this.encode=function(D,q){q&&ie(q),y=new Array,x=0,g=7,J(65496),J(65504),J(16),V(74),V(70),V(73),V(70),V(0),V(1),V(1),V(0),J(1),J(1),V(0),V(0),function(){J(65499),J(132),V(0);for(var bt=0;bt<64;bt++)V(a[bt]);V(1);for(var pe=0;pe<64;pe++)V(l[pe])}(),function(bt,pe){J(65472),J(17),V(8),J(pe),J(bt),V(3),V(1),V(17),V(0),V(2),V(17),V(1),V(3),V(17),V(1)}(D.width,D.height),function(){J(65476),J(418),V(0);for(var bt=0;bt<16;bt++)V(R[bt+1]);for(var pe=0;pe<=11;pe++)V(k[pe]);V(16);for(var te=0;te<16;te++)V(L[te+1]);for(var Ne=0;Ne<=161;Ne++)V(N[Ne]);V(1);for(var st=0;st<16;st++)V(z[st+1]);for(var rt=0;rt<=11;rt++)V(H[rt]);V(17);for(var pt=0;pt<16;pt++)V(G[pt+1]);for(var wt=0;wt<=161;wt++)V(K[wt])}(),J(65498),J(12),V(3),V(1),V(0),V(2),V(17),V(3),V(17),V(0),V(63),V(0);var Z=0,Q=0,se=0;x=0,g=7,this.encode.displayName="_encode_";for(var me,Se,Ce,$e,ke,fe,Ie,Ue,Te,ae=D.data,gt=D.width,Ye=D.height,Ge=4*gt,et=0;et<Ye;){for(me=0;me<Ge;){for(ke=Ge*et+me,Ie=-1,Ue=0,Te=0;Te<64;Te++)fe=ke+(Ue=Te>>3)*Ge+(Ie=4*(7&Te)),et+Ue>=Ye&&(fe-=Ge*(et+1+Ue-Ye)),me+Ie>=Ge&&(fe-=me+Ie-Ge+4),Se=ae[fe++],Ce=ae[fe++],$e=ae[fe++],S[Te]=(I[Se]+I[Ce+256>>0]+I[$e+512>>0]>>16)-128,_[Te]=(I[Se+768>>0]+I[Ce+1024>>0]+I[$e+1280>>0]>>16)-128,E[Te]=(I[Se+1280>>0]+I[Ce+1536>>0]+I[$e+1792>>0]>>16)-128;Z=j(S,u,Z,e,r),Q=j(_,c,Q,t,i),se=j(E,c,se,t,i),me+=32}et+=8}if(g>=0){var vt=[];vt[1]=g+1,vt[0]=(1<<g+1)-1,le(vt)}return J(65497),new Uint8Array(y)},n=n||50,function(){for(var D=String.fromCharCode,q=0;q<256;q++)C[q]=D(q)}(),e=ee(R,k),t=ee(z,H),r=ee(L,N),i=ee(G,K),function(){for(var D=1,q=2,Z=1;Z<=15;Z++){for(var Q=D;Q<q;Q++)f[32767+Q]=Z,h[32767+Q]=[],h[32767+Q][1]=Z,h[32767+Q][0]=Q;for(var se=-(q-1);se<=-D;se++)f[32767+se]=Z,h[32767+se]=[],h[32767+se][1]=Z,h[32767+se][0]=q-1+se;D<<=1,q<<=1}}(),function(){for(var D=0;D<256;D++)I[D]=19595*D,I[D+256>>0]=38470*D,I[D+512>>0]=7471*D+32768,I[D+768>>0]=-11059*D,I[D+1024>>0]=-21709*D,I[D+1280>>0]=32768*D+8421375,I[D+1536>>0]=-27439*D,I[D+1792>>0]=-5329*D}(),ie(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Cl(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function YL(n){function e(R){if(!R)throw Error("assert :P")}function t(R,k,L){for(var N=0;4>N;N++)if(R[k+N]!=L.charCodeAt(N))return!0;return!1}function r(R,k,L,N,z){for(var H=0;H<z;H++)R[k+H]=L[N+H]}function i(R,k,L,N){for(var z=0;z<N;z++)R[k+z]=L}function o(R){return new Int32Array(R)}function s(R,k){for(var L=[],N=0;N<R;N++)L.push(new k);return L}function a(R,k){var L=[];return function N(z,H,G){for(var K=G[H],ee=0;ee<K&&(z.push(G.length>H+1?[]:new k),!(G.length<H+1));ee++)N(z[ee],H+1,G)}(L,0,R),L}var l=function(){var R=this;function k(w,M){for(var P=1<<M-1>>>0;w&P;)P>>>=1;return P?(w&P-1)+P:w}function L(w,M,P,U,X){e(!(U%P));do w[M+(U-=P)]=X;while(0<U)}function N(w,M,P,U,X){if(e(2328>=X),512>=X)var ne=o(512);else if((ne=o(X))==null)return 0;return function(oe,ue,he,xe,we,We){var je,Be,_t=ue,Qe=1<<he,Le=o(16),Fe=o(16);for(e(we!=0),e(xe!=null),e(oe!=null),e(0<he),Be=0;Be<we;++Be){if(15<xe[Be])return 0;++Le[xe[Be]]}if(Le[0]==we)return 0;for(Fe[1]=0,je=1;15>je;++je){if(Le[je]>1<<je)return 0;Fe[je+1]=Fe[je]+Le[je]}for(Be=0;Be<we;++Be)je=xe[Be],0<xe[Be]&&(We[Fe[je]++]=Be);if(Fe[15]==1)return(xe=new z).g=0,xe.value=We[0],L(oe,_t,1,Qe,xe),Qe;var yt,Mt=-1,St=Qe-1,$t=0,Bt=1,dn=1,Ut=1<<he;for(Be=0,je=1,we=2;je<=he;++je,we<<=1){if(Bt+=dn<<=1,0>(dn-=Le[je]))return 0;for(;0<Le[je];--Le[je])(xe=new z).g=je,xe.value=We[Be++],L(oe,_t+$t,we,Ut,xe),$t=k($t,je)}for(je=he+1,we=2;15>=je;++je,we<<=1){if(Bt+=dn<<=1,0>(dn-=Le[je]))return 0;for(;0<Le[je];--Le[je]){if(xe=new z,($t&St)!=Mt){for(_t+=Ut,yt=1<<(Mt=je)-he;15>Mt&&!(0>=(yt-=Le[Mt]));)++Mt,yt<<=1;Qe+=Ut=1<<(yt=Mt-he),oe[ue+(Mt=$t&St)].g=yt+he,oe[ue+Mt].value=_t-ue-Mt}xe.g=je-he,xe.value=We[Be++],L(oe,_t+($t>>he),we,Ut,xe),$t=k($t,je)}}return Bt!=2*Fe[15]-1?0:Qe}(w,M,P,U,X,ne)}function z(){this.value=this.g=0}function H(){this.value=this.g=0}function G(){this.G=s(5,z),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Hi,H)}function K(w,M,P,U){e(w!=null),e(M!=null),e(2147483648>U),w.Ca=254,w.I=0,w.b=-8,w.Ka=0,w.oa=M,w.pa=P,w.Jd=M,w.Yc=P+U,w.Zc=4<=U?P+U-4+1:P,me(w)}function ee(w,M){for(var P=0;0<M--;)P|=Ce(w,128)<<M;return P}function le(w,M){var P=ee(w,M);return Se(w)?-P:P}function V(w,M,P,U){var X,ne=0;for(e(w!=null),e(M!=null),e(4294967288>U),w.Sb=U,w.Ra=0,w.u=0,w.h=0,4<U&&(U=4),X=0;X<U;++X)ne+=M[P+X]<<8*X;w.Ra=ne,w.bb=U,w.oa=M,w.pa=P}function J(w){for(;8<=w.u&&w.bb<w.Sb;)w.Ra>>>=8,w.Ra+=w.oa[w.pa+w.bb]<<ua-8>>>0,++w.bb,w.u-=8;Z(w)&&(w.h=1,w.u=0)}function j(w,M){if(e(0<=M),!w.h&&M<=Da){var P=q(w)&Yu[M];return w.u+=M,J(w),P}return w.h=1,w.u=0}function ie(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function D(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(w){return w.Ra>>>(w.u&ua-1)>>>0}function Z(w){return e(w.bb<=w.Sb),w.h||w.bb==w.Sb&&w.u>ua}function Q(w,M){w.u=M,w.h=Z(w)}function se(w){w.u>=Zu&&(e(w.u>=Zu),J(w))}function me(w){e(w!=null&&w.oa!=null),w.pa<w.Zc?(w.I=(w.oa[w.pa++]|w.I<<8)>>>0,w.b+=8):(e(w!=null&&w.oa!=null),w.pa<w.Yc?(w.b+=8,w.I=w.oa[w.pa++]|w.I<<8):w.Ka?w.b=0:(w.I<<=8,w.b+=8,w.Ka=1))}function Se(w){return ee(w,1)}function Ce(w,M){var P=w.Ca;0>w.b&&me(w);var U=w.b,X=P*M>>>8,ne=(w.I>>>U>X)+0;for(ne?(P-=X,w.I-=X+1<<U>>>0):P=X+1,U=P,X=0;256<=U;)X+=8,U>>=8;return U=7^X+eo[U],w.b-=U,w.Ca=(P<<U)-1,ne}function $e(w,M,P){w[M+0]=P>>24&255,w[M+1]=P>>16&255,w[M+2]=P>>8&255,w[M+3]=P>>0&255}function ke(w,M){return w[M+0]<<0|w[M+1]<<8}function fe(w,M){return ke(w,M)|w[M+2]<<16}function Ie(w,M){return ke(w,M)|ke(w,M+2)<<16}function Ue(w,M){var P=1<<M;return e(w!=null),e(0<M),w.X=o(P),w.X==null?0:(w.Mb=32-M,w.Xa=M,1)}function Te(w,M){e(w!=null),e(M!=null),e(w.Xa==M.Xa),r(M.X,0,w.X,0,1<<M.Xa)}function ae(){this.X=[],this.Xa=this.Mb=0}function gt(w,M,P,U){e(P!=null),e(U!=null);var X=P[0],ne=U[0];return X==0&&(X=(w*ne+M/2)/M),ne==0&&(ne=(M*X+w/2)/w),0>=X||0>=ne?0:(P[0]=X,U[0]=ne,1)}function Ye(w,M){return w+(1<<M)-1>>>M}function Ge(w,M){return((4278255360&w)+(4278255360&M)>>>0&4278255360)+((16711935&w)+(16711935&M)>>>0&16711935)>>>0}function et(w,M){R[M]=function(P,U,X,ne,oe,ue,he){var xe;for(xe=0;xe<oe;++xe){var we=R[w](ue[he+xe-1],X,ne+xe);ue[he+xe]=Ge(P[U+xe],we)}}}function vt(){this.ud=this.hd=this.jd=0}function bt(w,M){return((4278124286&(w^M))>>>1)+(w&M)>>>0}function pe(w){return 0<=w&&256>w?w:0>w?0:255<w?255:void 0}function te(w,M){return pe(w+(w-M+.5>>1))}function Ne(w,M,P){return Math.abs(M-P)-Math.abs(w-P)}function st(w,M,P,U,X,ne,oe){for(U=ne[oe-1],P=0;P<X;++P)ne[oe+P]=U=Ge(w[M+P],U)}function rt(w,M,P,U,X){var ne;for(ne=0;ne<P;++ne){var oe=w[M+ne],ue=oe>>8&255,he=16711935&(he=(he=16711935&oe)+((ue<<16)+ue));U[X+ne]=(4278255360&oe)+he>>>0}}function pt(w,M){M.jd=w>>0&255,M.hd=w>>8&255,M.ud=w>>16&255}function wt(w,M,P,U,X,ne){var oe;for(oe=0;oe<U;++oe){var ue=M[P+oe],he=ue>>>8,xe=ue,we=255&(we=(we=ue>>>16)+((w.jd<<24>>24)*(he<<24>>24)>>>5));xe=255&(xe=(xe=xe+((w.hd<<24>>24)*(he<<24>>24)>>>5))+((w.ud<<24>>24)*(we<<24>>24)>>>5)),X[ne+oe]=(4278255360&ue)+(we<<16)+xe}}function ut(w,M,P,U,X){R[M]=function(ne,oe,ue,he,xe,we,We,je,Be){for(he=We;he<je;++he)for(We=0;We<Be;++We)xe[we++]=X(ue[U(ne[oe++])])},R[w]=function(ne,oe,ue,he,xe,we,We){var je=8>>ne.b,Be=ne.Ea,_t=ne.K[0],Qe=ne.w;if(8>je)for(ne=(1<<ne.b)-1,Qe=(1<<je)-1;oe<ue;++oe){var Le,Fe=0;for(Le=0;Le<Be;++Le)Le&ne||(Fe=U(he[xe++])),we[We++]=X(_t[Fe&Qe]),Fe>>=je}else R["VP8LMapColor"+P](he,xe,_t,Qe,we,We,oe,ue,Be)}}function Pe(w,M,P,U,X){for(P=M+P;M<P;){var ne=w[M++];U[X++]=ne>>16&255,U[X++]=ne>>8&255,U[X++]=ne>>0&255}}function Ht(w,M,P,U,X){for(P=M+P;M<P;){var ne=w[M++];U[X++]=ne>>16&255,U[X++]=ne>>8&255,U[X++]=ne>>0&255,U[X++]=ne>>24&255}}function Pt(w,M,P,U,X){for(P=M+P;M<P;){var ne=(oe=w[M++])>>16&240|oe>>12&15,oe=oe>>0&240|oe>>28&15;U[X++]=ne,U[X++]=oe}}function Dt(w,M,P,U,X){for(P=M+P;M<P;){var ne=(oe=w[M++])>>16&248|oe>>13&7,oe=oe>>5&224|oe>>3&31;U[X++]=ne,U[X++]=oe}}function Tt(w,M,P,U,X){for(P=M+P;M<P;){var ne=w[M++];U[X++]=ne>>0&255,U[X++]=ne>>8&255,U[X++]=ne>>16&255}}function be(w,M,P,U,X,ne){if(ne==0)for(P=M+P;M<P;)$e(U,((ne=w[M++])[0]>>24|ne[1]>>8&65280|ne[2]<<8&16711680|ne[3]<<24)>>>0),X+=32;else r(U,X,w,M,P)}function Ke(w,M){R[M][0]=R[w+"0"],R[M][1]=R[w+"1"],R[M][2]=R[w+"2"],R[M][3]=R[w+"3"],R[M][4]=R[w+"4"],R[M][5]=R[w+"5"],R[M][6]=R[w+"6"],R[M][7]=R[w+"7"],R[M][8]=R[w+"8"],R[M][9]=R[w+"9"],R[M][10]=R[w+"10"],R[M][11]=R[w+"11"],R[M][12]=R[w+"12"],R[M][13]=R[w+"13"],R[M][14]=R[w+"0"],R[M][15]=R[w+"0"]}function ct(w){return w==hp||w==fp||w==ah||w==dp}function Ae(){this.eb=[],this.size=this.A=this.fb=0}function Oe(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ve(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ae,this.f.kb=new Oe,this.sd=null}function At(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ct(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Nt(w){return alert("todo:WebPSamplerProcessPlane"),w.T}function Xt(w,M){var P=w.T,U=M.ba.f.RGBA,X=U.eb,ne=U.fb+w.ka*U.A,oe=Co[M.ba.S],ue=w.y,he=w.O,xe=w.f,we=w.N,We=w.ea,je=w.W,Be=M.cc,_t=M.dc,Qe=M.Mc,Le=M.Nc,Fe=w.ka,yt=w.ka+w.T,Mt=w.U,St=Mt+1>>1;for(Fe==0?oe(ue,he,null,null,xe,we,We,je,xe,we,We,je,X,ne,null,null,Mt):(oe(M.ec,M.fc,ue,he,Be,_t,Qe,Le,xe,we,We,je,X,ne-U.A,X,ne,Mt),++P);Fe+2<yt;Fe+=2)Be=xe,_t=we,Qe=We,Le=je,we+=w.Rc,je+=w.Rc,ne+=2*U.A,oe(ue,(he+=2*w.fa)-w.fa,ue,he,Be,_t,Qe,Le,xe,we,We,je,X,ne-U.A,X,ne,Mt);return he+=w.fa,w.j+yt<w.o?(r(M.ec,M.fc,ue,he,Mt),r(M.cc,M.dc,xe,we,St),r(M.Mc,M.Nc,We,je,St),P--):1&yt||oe(ue,he,null,null,xe,we,We,je,xe,we,We,je,X,ne+U.A,null,null,Mt),P}function kn(w,M,P){var U=w.F,X=[w.J];if(U!=null){var ne=w.U,oe=M.ba.S,ue=oe==fu||oe==ah;M=M.ba.f.RGBA;var he=[0],xe=w.ka;he[0]=w.T,w.Kb&&(xe==0?--he[0]:(--xe,X[0]-=w.width),w.j+w.ka+w.T==w.o&&(he[0]=w.o-w.j-xe));var we=M.eb;xe=M.fb+xe*M.A,w=cr(U,X[0],w.width,ne,he,we,xe+(ue?0:3),M.A),e(P==he),w&&ct(oe)&&Pi(we,xe,ue,ne,he,M.A)}return 0}function Yn(w){var M=w.ma,P=M.ba.S,U=11>P,X=P==tc||P==sh||P==fu||P==cp||P==12||ct(P);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!eh(M.Oa,w,X?11:12))return 0;if(X&&ct(P)&&Et(),w.da)alert("todo:use_scaling");else{if(U){if(M.Ib=Nt,w.Kb){if(P=w.U+1>>1,M.memory=o(w.U+2*P),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+w.U,M.Mc=M.cc,M.Nc=M.dc+P,M.Ib=Xt,Et()}}else alert("todo:EmitYUV");X&&(M.Jb=kn,U&&He())}if(U&&!Og){for(w=0;256>w;++w)Bg[w]=89858*(w-128)+no>>Po,Z1[w]=-22014*(w-128)+no,Ug[w]=-45773*(w-128),Y1[w]=113618*(w-128)+no>>Po;for(w=ch;w<yp;++w)M=76283*(w-16)+no>>Po,K1[w-ch]=zo(M,255),xp[w-ch]=zo(M+8>>4,15);Og=1}return 1}function wn(w){var M=w.ma,P=w.U,U=w.T;return e(!(1&w.ka)),0>=P||0>=U?0:(P=M.Ib(w,M),M.Jb!=null&&M.Jb(w,M,P),M.Dc+=P,1)}function ir(w){w.ma.memory=null}function Wt(w,M,P,U){return j(w,8)!=47?0:(M[0]=j(w,14)+1,P[0]=j(w,14)+1,U[0]=j(w,1),j(w,3)!=0?0:!w.h)}function Yi(w,M){if(4>w)return w+1;var P=w-2>>1;return(2+(1&w)<<P)+j(M,P)+1}function Zi(w,M){return 120<M?M-120:1<=(P=((P=G1[M-1])>>4)*w+(8-(15&P)))?P:1;var P}function Ir(w,M,P){var U=q(P),X=w[M+=255&U].g-8;return 0<X&&(Q(P,P.u+8),U=q(P),M+=w[M].value,M+=U&(1<<X)-1),Q(P,P.u+w[M].g),w[M].value}function ar(w,M,P){return P.g+=w.g,P.value+=w.value<<M>>>0,e(8>=P.g),w.g}function dr(w,M,P){var U=w.xc;return e((M=U==0?0:w.vc[w.md*(P>>U)+(M>>U)])<w.Wb),w.Ya[M]}function lr(w,M,P,U){var X=w.ab,ne=w.c*M,oe=w.C;M=oe+M;var ue=P,he=U;for(U=w.Ta,P=w.Ua;0<X--;){var xe=w.gc[X],we=oe,We=M,je=ue,Be=he,_t=(he=U,ue=P,xe.Ea);switch(e(we<We),e(We<=xe.nc),xe.hc){case 2:If(je,Be,(We-we)*_t,he,ue);break;case 0:var Qe=we,Le=We,Fe=he,yt=ue,Mt=(Ut=xe).Ea;Qe==0&&(nh(je,Be,null,null,1,Fe,yt),st(je,Be+1,0,0,Mt-1,Fe,yt+1),Be+=Mt,yt+=Mt,++Qe);for(var St=1<<Ut.b,$t=St-1,Bt=Ye(Mt,Ut.b),dn=Ut.K,Ut=Ut.w+(Qe>>Ut.b)*Bt;Qe<Le;){var sr=dn,yr=Ut,Qn=1;for(rh(je,Be,Fe,yt-Mt,1,Fe,yt);Qn<Mt;){var Wn=(Qn&~$t)+St;Wn>Mt&&(Wn=Mt),(0,Hs[sr[yr++]>>8&15])(je,Be+ +Qn,Fe,yt+Qn-Mt,Wn-Qn,Fe,yt+Qn),Qn=Wn}Be+=Mt,yt+=Mt,++Qe&$t||(Ut+=Bt)}We!=xe.nc&&r(he,ue-_t,he,ue+(We-we-1)*_t,_t);break;case 1:for(_t=je,Le=Be,Mt=(je=xe.Ea)-(yt=je&~(Fe=(Be=1<<xe.b)-1)),Qe=Ye(je,xe.b),St=xe.K,xe=xe.w+(we>>xe.b)*Qe;we<We;){for($t=St,Bt=xe,dn=new vt,Ut=Le+yt,sr=Le+je;Le<Ut;)pt($t[Bt++],dn),Gs(dn,_t,Le,Be,he,ue),Le+=Be,ue+=Be;Le<sr&&(pt($t[Bt++],dn),Gs(dn,_t,Le,Mt,he,ue),Le+=Mt,ue+=Mt),++we&Fe||(xe+=Qe)}break;case 3:if(je==he&&Be==ue&&0<xe.b){for(Le=he,je=_t=ue+(We-we)*_t-(yt=(We-we)*Ye(xe.Ea,xe.b)),Be=he,Fe=ue,Qe=[],yt=(Mt=yt)-1;0<=yt;--yt)Qe[yt]=Be[Fe+yt];for(yt=Mt-1;0<=yt;--yt)Le[je+yt]=Qe[yt];lo(xe,we,We,he,_t,he,ue)}else lo(xe,we,We,je,Be,he,ue)}ue=U,he=P}he!=P&&r(U,P,ue,he,ne)}function yn(w,M){var P=w.V,U=w.Ba+w.c*w.C,X=M-w.C;if(e(M<=w.l.o),e(16>=X),0<X){var ne=w.l,oe=w.Ta,ue=w.Ua,he=ne.width;if(lr(w,X,P,U),X=ue=[ue],e((P=w.C)<(U=M)),e(ne.v<ne.va),U>ne.o&&(U=ne.o),P<ne.j){var xe=ne.j-P;P=ne.j,X[0]+=xe*he}if(P>=U?P=0:(X[0]+=4*ne.v,ne.ka=P-ne.j,ne.U=ne.va-ne.v,ne.T=U-P,P=1),P){if(ue=ue[0],11>(P=w.ca).S){var we=P.f.RGBA,We=(U=P.S,X=ne.U,ne=ne.T,xe=we.eb,we.A),je=ne;for(we=we.fb+w.Ma*we.A;0<je--;){var Be=oe,_t=ue,Qe=X,Le=xe,Fe=we;switch(U){case Df:Jr(Be,_t,Qe,Le,Fe);break;case tc:uo(Be,_t,Qe,Le,Fe);break;case hp:uo(Be,_t,Qe,Le,Fe),Pi(Le,Fe,0,Qe,1,0);break;case Of:ca(Be,_t,Qe,Le,Fe);break;case sh:be(Be,_t,Qe,Le,Fe,1);break;case fp:be(Be,_t,Qe,Le,Fe,1),Pi(Le,Fe,0,Qe,1,0);break;case fu:be(Be,_t,Qe,Le,Fe,0);break;case ah:be(Be,_t,Qe,Le,Fe,0),Pi(Le,Fe,1,Qe,1,0);break;case cp:As(Be,_t,Qe,Le,Fe);break;case dp:As(Be,_t,Qe,Le,Fe),Jn(Le,Fe,Qe,1,0);break;case Lg:Oa(Be,_t,Qe,Le,Fe);break;default:e(0)}ue+=he,we+=We}w.Ma+=ne}else alert("todo:EmitRescaledRowsYUVA");e(w.Ma<=P.height)}}w.C=M,e(w.C<=w.i)}function Ki(w){var M;if(0<w.ua)return 0;for(M=0;M<w.Wb;++M){var P=w.Ya[M].G,U=w.Ya[M].H;if(0<P[1][U[1]+0].g||0<P[2][U[2]+0].g||0<P[3][U[3]+0].g)return 0}return 1}function Bi(w,M,P,U,X,ne){if(w.Z!=0){var oe=w.qd,ue=w.rd;for(e(qs[w.Z]!=null);M<P;++M)qs[w.Z](oe,ue,U,X,U,X,ne),oe=U,ue=X,X+=ne;w.qd=oe,w.rd=ue}}function $(w,M){var P=w.l.ma,U=P.Z==0||P.Z==1?w.l.j:w.C;if(U=w.C<U?U:w.C,e(M<=w.l.o),M>U){var X=w.l.width,ne=P.ca,oe=P.tb+X*U,ue=w.V,he=w.Ba+w.c*U,xe=w.gc;e(w.ab==1),e(xe[0].hc==3),hu(xe[0],U,M,ue,he,ne,oe),Bi(P,U,M,ne,oe,X)}w.C=w.Ma=M}function B(w,M,P,U,X,ne,oe){var ue=w.$/U,he=w.$%U,xe=w.m,we=w.s,We=P+w.$,je=We;X=P+U*X;var Be=P+U*ne,_t=280+we.ua,Qe=w.Pb?ue:16777216,Le=0<we.ua?we.Wa:null,Fe=we.wc,yt=We<Be?dr(we,he,ue):null;e(w.C<ne),e(Be<=X);var Mt=!1;e:for(;;){for(;Mt||We<Be;){var St=0;if(ue>=Qe){var $t=We-P;e((Qe=w).Pb),Qe.wd=Qe.m,Qe.xd=$t,0<Qe.s.ua&&Te(Qe.s.Wa,Qe.s.vb),Qe=ue+W1}if(he&Fe||(yt=dr(we,he,ue)),e(yt!=null),yt.Qb&&(M[We]=yt.qb,Mt=!0),!Mt)if(se(xe),yt.jc){St=xe,$t=M;var Bt=We,dn=yt.pd[q(St)&Hi-1];e(yt.jc),256>dn.g?(Q(St,St.u+dn.g),$t[Bt]=dn.value,St=0):(Q(St,St.u+dn.g-256),e(256<=dn.value),St=dn.value),St==0&&(Mt=!0)}else St=Ir(yt.G[0],yt.H[0],xe);if(xe.h)break;if(Mt||256>St){if(!Mt)if(yt.nd)M[We]=(yt.qb|St<<8)>>>0;else{if(se(xe),Mt=Ir(yt.G[1],yt.H[1],xe),se(xe),$t=Ir(yt.G[2],yt.H[2],xe),Bt=Ir(yt.G[3],yt.H[3],xe),xe.h)break;M[We]=(Bt<<24|Mt<<16|St<<8|$t)>>>0}if(Mt=!1,++We,++he>=U&&(he=0,++ue,oe!=null&&ue<=ne&&!(ue%16)&&oe(w,ue),Le!=null))for(;je<We;)St=M[je++],Le.X[(506832829*St&4294967295)>>>Le.Mb]=St}else if(280>St){if(St=Yi(St-256,xe),$t=Ir(yt.G[4],yt.H[4],xe),se(xe),$t=Zi(U,$t=Yi($t,xe)),xe.h)break;if(We-P<$t||X-We<St)break e;for(Bt=0;Bt<St;++Bt)M[We+Bt]=M[We+Bt-$t];for(We+=St,he+=St;he>=U;)he-=U,++ue,oe!=null&&ue<=ne&&!(ue%16)&&oe(w,ue);if(e(We<=X),he&Fe&&(yt=dr(we,he,ue)),Le!=null)for(;je<We;)St=M[je++],Le.X[(506832829*St&4294967295)>>>Le.Mb]=St}else{if(!(St<_t))break e;for(Mt=St-280,e(Le!=null);je<We;)St=M[je++],Le.X[(506832829*St&4294967295)>>>Le.Mb]=St;St=We,e(!(Mt>>>($t=Le).Xa)),M[St]=$t.X[Mt],Mt=!0}Mt||e(xe.h==Z(xe))}if(w.Pb&&xe.h&&We<X)e(w.m.h),w.a=5,w.m=w.wd,w.$=w.xd,0<w.s.ua&&Te(w.s.vb,w.s.Wa);else{if(xe.h)break e;oe!=null&&oe(w,ue>ne?ne:ue),w.a=0,w.$=We-P}return 1}return w.a=3,0}function re(w){e(w!=null),w.vc=null,w.yc=null,w.Ya=null;var M=w.Wa;M!=null&&(M.X=null),w.vb=null,e(w!=null)}function ve(){var w=new Fa;return w==null?null:(w.a=0,w.xb=Ng,Ke("Predictor","VP8LPredictors"),Ke("Predictor","VP8LPredictors_C"),Ke("PredictorAdd","VP8LPredictorsAdd"),Ke("PredictorAdd","VP8LPredictorsAdd_C"),If=rt,Gs=wt,Jr=Pe,uo=Ht,As=Pt,Oa=Dt,ca=Tt,R.VP8LMapColor32b=Ku,R.VP8LMapColor8b=Ho,w)}function ge(w,M,P,U,X){var ne=1,oe=[w],ue=[M],he=U.m,xe=U.s,we=null,We=0;e:for(;;){if(P)for(;ne&&j(he,1);){var je=oe,Be=ue,_t=U,Qe=1,Le=_t.m,Fe=_t.gc[_t.ab],yt=j(Le,2);if(_t.Oc&1<<yt)ne=0;else{switch(_t.Oc|=1<<yt,Fe.hc=yt,Fe.Ea=je[0],Fe.nc=Be[0],Fe.K=[null],++_t.ab,e(4>=_t.ab),yt){case 0:case 1:Fe.b=j(Le,3)+2,Qe=ge(Ye(Fe.Ea,Fe.b),Ye(Fe.nc,Fe.b),0,_t,Fe.K),Fe.K=Fe.K[0];break;case 3:var Mt,St=j(Le,8)+1,$t=16<St?0:4<St?1:2<St?2:3;if(je[0]=Ye(Fe.Ea,$t),Fe.b=$t,Mt=Qe=ge(St,1,0,_t,Fe.K)){var Bt,dn=St,Ut=Fe,sr=1<<(8>>Ut.b),yr=o(sr);if(yr==null)Mt=0;else{var Qn=Ut.K[0],Wn=Ut.w;for(yr[0]=Ut.K[0][0],Bt=1;Bt<1*dn;++Bt)yr[Bt]=Ge(Qn[Wn+Bt],yr[Bt-1]);for(;Bt<4*sr;++Bt)yr[Bt]=0;Ut.K[0]=null,Ut.K[0]=yr,Mt=1}}Qe=Mt;break;case 2:break;default:e(0)}ne=Qe}}if(oe=oe[0],ue=ue[0],ne&&j(he,1)&&!(ne=1<=(We=j(he,4))&&11>=We)){U.a=3;break e}var Fr;if(Fr=ne)t:{var Pr,Ln,mi,Vo=U,gi=oe,ho=ue,hr=We,Ro=P,Lo=Vo.m,vi=Vo.s,yi=[null],fo=1,Qo=0,$s=V1[hr];n:for(;;){if(Ro&&j(Lo,1)){var Gi=j(Lo,3)+2,da=Ye(gi,Gi),nc=Ye(ho,Gi),yl=da*nc;if(!ge(da,nc,0,Vo,yi))break n;for(yi=yi[0],vi.xc=Gi,Pr=0;Pr<yl;++Pr){var Va=yi[Pr]>>8&65535;yi[Pr]=Va,Va>=fo&&(fo=Va+1)}}if(Lo.h)break n;for(Ln=0;5>Ln;++Ln){var In=kg[Ln];!Ln&&0<hr&&(In+=1<<hr),Qo<In&&(Qo=In)}var Dn=s(fo*$s,z),xi=fo,wi=s(xi,G);if(wi==null)var Ri=null;else e(65536>=xi),Ri=wi;var po=o(Qo);if(Ri==null||po==null||Dn==null){Vo.a=1;break n}var xl=Dn;for(Pr=mi=0;Pr<fo;++Pr){var br=Ri[Pr],Wa=br.G,pa=br.H,Hf=0,hh=1,fh=0;for(Ln=0;5>Ln;++Ln){In=kg[Ln],Wa[Ln]=xl,pa[Ln]=mi,!Ln&&0<hr&&(In+=1<<hr);i:{var mo,Gf=In,dh=Vo,ja=po,wp=xl,Gg=mi,qa=0,ma=dh.m,du=j(ma,1);if(i(ja,0,0,Gf),du){var Sp=j(ma,1)+1,Vf=j(ma,1),_p=j(ma,Vf==0?1:8);ja[_p]=1,Sp==2&&(ja[_p=j(ma,8)]=1);var rc=1}else{var Wf=o(19),ko=j(ma,4)+4;if(19<ko){dh.a=3;var ga=0;break i}for(mo=0;mo<ko;++mo)Wf[LS[mo]]=j(ma,3);var es=void 0,pu=void 0,Wo=dh,Q1=Wf,ph=Gf,bp=ja,Vg=0,jo=Wo.m,Wg=8,jg=s(128,z);r:for(;N(jg,0,7,Q1,19);){if(j(jo,1)){var qg=2+2*j(jo,3);if((es=2+j(jo,qg))>ph)break r}else es=ph;for(pu=0;pu<ph&&es--;){se(jo);var mu=jg[0+(127&q(jo))];Q(jo,jo.u+mu.g);var ic=mu.value;if(16>ic)bp[pu++]=ic,ic!=0&&(Wg=ic);else{var ey=ic==16,Mp=ic-16,Ep=PS[Mp],ty=j(jo,H1[Mp])+Ep;if(pu+ty>ph)break r;for(var DS=ey?Wg:0;0<ty--;)bp[pu++]=DS}}Vg=1;break r}Vg||(Wo.a=3),rc=Vg}(rc=rc&&!ma.h)&&(qa=N(wp,Gg,8,ja,Gf)),rc&&qa!=0?ga=qa:(dh.a=3,ga=0)}if(ga==0)break n;if(hh&&RS[Ln]==1&&(hh=xl[mi].g==0),Hf+=xl[mi].g,mi+=ga,3>=Ln){var mh,Ap=po[0];for(mh=1;mh<In;++mh)po[mh]>Ap&&(Ap=po[mh]);fh+=Ap}}if(br.nd=hh,br.Qb=0,hh&&(br.qb=(Wa[3][pa[3]+0].value<<24|Wa[1][pa[1]+0].value<<16|Wa[2][pa[2]+0].value)>>>0,Hf==0&&256>Wa[0][pa[0]+0].value&&(br.Qb=1,br.qb+=Wa[0][pa[0]+0].value<<8)),br.jc=!br.Qb&&6>fh,br.jc){var $a,wl=br;for($a=0;$a<Hi;++$a){var ts=$a,Sl=wl.pd[ts],go=wl.G[0][wl.H[0]+ts];256<=go.value?(Sl.g=go.g+256,Sl.value=go.value):(Sl.g=0,Sl.value=0,ts>>=ar(go,8,Sl),ts>>=ar(wl.G[1][wl.H[1]+ts],16,Sl),ts>>=ar(wl.G[2][wl.H[2]+ts],0,Sl),ar(wl.G[3][wl.H[3]+ts],24,Sl))}}}vi.vc=yi,vi.Wb=fo,vi.Ya=Ri,vi.yc=Dn,Fr=1;break t}Fr=0}if(!(ne=Fr)){U.a=3;break e}if(0<We){if(xe.ua=1<<We,!Ue(xe.Wa,We)){U.a=1,ne=0;break e}}else xe.ua=0;var $g=U,Xg=oe,OS=ue,Yg=$g.s,Tp=Yg.xc;if($g.c=Xg,$g.i=OS,Yg.md=Ye(Xg,Tp),Yg.wc=Tp==0?-1:(1<<Tp)-1,P){U.xb=Ga;break e}if((we=o(oe*ue))==null){U.a=1,ne=0;break e}ne=(ne=B(U,we,0,oe,ue,ue,null))&&!he.h;break e}return ne?(X!=null?X[0]=we:(e(we==null),e(P)),U.$=0,P||re(xe)):re(xe),ne}function _e(w,M){var P=w.c*w.i,U=P+M+16*M;return e(w.c<=M),w.V=o(U),w.V==null?(w.Ta=null,w.Ua=0,w.a=1,0):(w.Ta=w.V,w.Ua=w.Ba+P+M,1)}function qe(w,M){var P=w.C,U=M-P,X=w.V,ne=w.Ba+w.c*P;for(e(M<=w.l.o);0<U;){var oe=16<U?16:U,ue=w.l.ma,he=w.l.width,xe=he*oe,we=ue.ca,We=ue.tb+he*P,je=w.Ta,Be=w.Ua;lr(w,oe,X,ne),Xr(je,Be,we,We,xe),Bi(ue,P,P+oe,we,We,he),U-=oe,X+=oe*w.c,P+=oe}e(P==M),w.C=w.Ma=M}function Xe(){this.ub=this.yd=this.td=this.Rb=0}function it(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function tt(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function dt(){this.Yb=function(){var w=[];return function M(P,U,X){for(var ne=X[U],oe=0;oe<ne&&(P.push(X.length>U+1?[]:0),!(X.length<U+1));oe++)M(P[oe],U+1,X)}(w,0,[3,11]),w}()}function nt(){this.jb=o(3),this.Wc=a([4,8],dt),this.Xc=a([4,17],dt)}function jt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function It(){this.ld=this.La=this.dd=this.tc=0}function Ot(){this.Na=this.la=0}function rn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function sn(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function mt(){this.uc=this.M=this.Nb=0,this.wa=Array(new It),this.Y=0,this.ya=Array(new sn),this.aa=0,this.l=new Zt}function ht(){this.y=o(16),this.f=o(8),this.ea=o(8)}function an(){this.cb=this.a=0,this.sc="",this.m=new ie,this.Od=new Xe,this.Kc=new it,this.ed=new jt,this.Qa=new tt,this.Ic=this.$c=this.Aa=0,this.D=new mt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,ie),this.ia=0,this.pb=s(4,rn),this.Pa=new nt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new ht),this.Hd=0,this.rb=Array(new Ot),this.sb=0,this.wa=Array(new It),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new sn),this.L=this.aa=0,this.gd=a([4,2],It),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Zt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Mn(){var w=new an;return w!=null&&(w.a=0,w.sc="OK",w.cb=0,w.Xb=0,Bf||(Bf=Kn)),w}function pn(w,M,P){return w.a==0&&(w.a=M,w.sc=P,w.cb=0),0}function xn(w,M,P){return 3<=P&&w[M+0]==157&&w[M+1]==1&&w[M+2]==42}function or(w,M){if(w==null)return 0;if(w.a=0,w.sc="OK",M==null)return pn(w,2,"null VP8Io passed to VP8GetHeaders()");var P=M.data,U=M.w,X=M.ha;if(4>X)return pn(w,7,"Truncated header.");var ne=P[U+0]|P[U+1]<<8|P[U+2]<<16,oe=w.Od;if(oe.Rb=!(1&ne),oe.td=ne>>1&7,oe.yd=ne>>4&1,oe.ub=ne>>5,3<oe.td)return pn(w,3,"Incorrect keyframe parameters.");if(!oe.yd)return pn(w,4,"Frame not displayable.");U+=3,X-=3;var ue=w.Kc;if(oe.Rb){if(7>X)return pn(w,7,"cannot parse picture header");if(!xn(P,U,X))return pn(w,3,"Bad code word");ue.c=16383&(P[U+4]<<8|P[U+3]),ue.Td=P[U+4]>>6,ue.i=16383&(P[U+6]<<8|P[U+5]),ue.Ud=P[U+6]>>6,U+=7,X-=7,w.za=ue.c+15>>4,w.Ub=ue.i+15>>4,M.width=ue.c,M.height=ue.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,i((ne=w.Pa).jb,0,255,ne.jb.length),e((ne=w.Qa)!=null),ne.Cb=0,ne.Bb=0,ne.Fb=1,i(ne.Zb,0,0,ne.Zb.length),i(ne.Lb,0,0,ne.Lb)}if(oe.ub>X)return pn(w,7,"bad partition length");K(ne=w.m,P,U,oe.ub),U+=oe.ub,X-=oe.ub,oe.Rb&&(ue.Ld=Se(ne),ue.Kd=Se(ne)),ue=w.Qa;var he,xe=w.Pa;if(e(ne!=null),e(ue!=null),ue.Cb=Se(ne),ue.Cb){if(ue.Bb=Se(ne),Se(ne)){for(ue.Fb=Se(ne),he=0;4>he;++he)ue.Zb[he]=Se(ne)?le(ne,7):0;for(he=0;4>he;++he)ue.Lb[he]=Se(ne)?le(ne,6):0}if(ue.Bb)for(he=0;3>he;++he)xe.jb[he]=Se(ne)?ee(ne,8):255}else ue.Bb=0;if(ne.Ka)return pn(w,3,"cannot parse segment header");if((ue=w.ed).zd=Se(ne),ue.Tb=ee(ne,6),ue.wb=ee(ne,3),ue.Pc=Se(ne),ue.Pc&&Se(ne)){for(xe=0;4>xe;++xe)Se(ne)&&(ue.vd[xe]=le(ne,6));for(xe=0;4>xe;++xe)Se(ne)&&(ue.od[xe]=le(ne,6))}if(w.L=ue.Tb==0?0:ue.zd?1:2,ne.Ka)return pn(w,3,"cannot parse filter header");var we=X;if(X=he=U,U=he+we,ue=we,w.Xb=(1<<ee(w.m,2))-1,we<3*(xe=w.Xb))P=7;else{for(he+=3*xe,ue-=3*xe,we=0;we<xe;++we){var We=P[X+0]|P[X+1]<<8|P[X+2]<<16;We>ue&&(We=ue),K(w.Jc[+we],P,he,We),he+=We,ue-=We,X+=3}K(w.Jc[+xe],P,he,ue),P=he<U?0:5}if(P!=0)return pn(w,P,"cannot parse partitions");for(P=ee(he=w.m,7),X=Se(he)?le(he,4):0,U=Se(he)?le(he,4):0,ue=Se(he)?le(he,4):0,xe=Se(he)?le(he,4):0,he=Se(he)?le(he,4):0,we=w.Qa,We=0;4>We;++We){if(we.Cb){var je=we.Zb[We];we.Fb||(je+=P)}else{if(0<We){w.pb[We]=w.pb[0];continue}je=P}var Be=w.pb[We];Be.Sc[0]=pp[zo(je+X,127)],Be.Sc[1]=lh[zo(je+0,127)],Be.Eb[0]=2*pp[zo(je+U,127)],Be.Eb[1]=101581*lh[zo(je+ue,127)]>>16,8>Be.Eb[1]&&(Be.Eb[1]=8),Be.Qc[0]=pp[zo(je+xe,117)],Be.Qc[1]=lh[zo(je+he,127)],Be.lc=je+he}if(!oe.Rb)return pn(w,4,"Not a key frame.");for(Se(ne),oe=w.Pa,P=0;4>P;++P){for(X=0;8>X;++X)for(U=0;3>U;++U)for(ue=0;11>ue;++ue)xe=Ce(ne,j1[P][X][U][ue])?ee(ne,8):Ig[P][X][U][ue],oe.Wc[P][X].Yb[U][ue]=xe;for(X=0;17>X;++X)oe.Xc[P][X]=oe.Wc[P][q1[X]]}return w.kc=Se(ne),w.kc&&(w.Bd=ee(ne,8)),w.cb=1}function Kn(w,M,P,U,X,ne,oe){var ue=M[X].Yb[P];for(P=0;16>X;++X){if(!Ce(w,ue[P+0]))return X;for(;!Ce(w,ue[P+1]);)if(ue=M[++X].Yb[0],P=0,X==16)return 16;var he=M[X+1].Yb;if(Ce(w,ue[P+2])){var xe=w,we=0;if(Ce(xe,(je=ue)[(We=P)+3]))if(Ce(xe,je[We+6])){for(ue=0,We=2*(we=Ce(xe,je[We+8]))+(je=Ce(xe,je[We+9+we])),we=0,je=kS[We];je[ue];++ue)we+=we+Ce(xe,je[ue]);we+=3+(8<<We)}else Ce(xe,je[We+7])?(we=7+2*Ce(xe,165),we+=Ce(xe,145)):we=5+Ce(xe,159);else we=Ce(xe,je[We+4])?3+Ce(xe,je[We+5]):2;ue=he[2]}else we=1,ue=he[1];he=oe+IS[X],0>(xe=w).b&&me(xe);var We,je=xe.b,Be=(We=xe.Ca>>1)-(xe.I>>je)>>31;--xe.b,xe.Ca+=Be,xe.Ca|=1,xe.I-=(We+1&Be)<<je,ne[he]=((we^Be)-Be)*U[(0<X)+0]}return 16}function ur(w){var M=w.rb[w.sb-1];M.la=0,M.Na=0,i(w.zc,0,0,w.zc.length),w.ja=0}function Kr(w,M){if(w==null)return 0;if(M==null)return pn(w,2,"NULL VP8Io parameter in VP8Decode().");if(!w.cb&&!or(w,M))return 0;if(e(w.cb),M.ac==null||M.ac(M)){M.ob&&(w.L=0);var P=zf[w.L];if(w.L==2?(w.yb=0,w.zb=0):(w.yb=M.v-P>>4,w.zb=M.j-P>>4,0>w.yb&&(w.yb=0),0>w.zb&&(w.zb=0)),w.Va=M.o+15+P>>4,w.Hb=M.va+15+P>>4,w.Hb>w.za&&(w.Hb=w.za),w.Va>w.Ub&&(w.Va=w.Ub),0<w.L){var U=w.ed;for(P=0;4>P;++P){var X;if(w.Qa.Cb){var ne=w.Qa.Lb[P];w.Qa.Fb||(ne+=U.Tb)}else ne=U.Tb;for(X=0;1>=X;++X){var oe=w.gd[P][X],ue=ne;if(U.Pc&&(ue+=U.vd[0],X&&(ue+=U.od[0])),0<(ue=0>ue?0:63<ue?63:ue)){var he=ue;0<U.wb&&(he=4<U.wb?he>>2:he>>1)>9-U.wb&&(he=9-U.wb),1>he&&(he=1),oe.dd=he,oe.tc=2*ue+he,oe.ld=40<=ue?2:15<=ue?1:0}else oe.tc=0;oe.La=X}}}P=0}else pn(w,6,"Frame setup failed"),P=w.a;if(P=P==0){if(P){w.$c=0,0<w.Aa||(w.Ic=J1);e:{P=w.Ic,U=4*(he=w.za);var xe=32*he,we=he+1,We=0<w.L?he*(0<w.Aa?2:1):0,je=(w.Aa==2?2:1)*he;if((oe=U+832+(X=3*(16*P+zf[w.L])/2*xe)+(ne=w.Fa!=null&&0<w.Fa.length?w.Kc.c*w.Kc.i:0))!=oe)P=0;else{if(oe>w.Vb){if(w.Vb=0,w.Ec=o(oe),w.Fc=0,w.Ec==null){P=pn(w,1,"no memory during frame initialization.");break e}w.Vb=oe}oe=w.Ec,ue=w.Fc,w.Ac=oe,w.Bc=ue,ue+=U,w.Gd=s(xe,ht),w.Hd=0,w.rb=s(we+1,Ot),w.sb=1,w.wa=We?s(We,It):null,w.Y=0,w.D.Nb=0,w.D.wa=w.wa,w.D.Y=w.Y,0<w.Aa&&(w.D.Y+=he),e(!0),w.oc=oe,w.pc=ue,ue+=832,w.ya=s(je,sn),w.aa=0,w.D.ya=w.ya,w.D.aa=w.aa,w.Aa==2&&(w.D.aa+=he),w.R=16*he,w.B=8*he,he=(xe=zf[w.L])*w.R,xe=xe/2*w.B,w.sa=oe,w.ta=ue+he,w.qa=w.sa,w.ra=w.ta+16*P*w.R+xe,w.Ha=w.qa,w.Ia=w.ra+8*P*w.B+xe,w.$c=0,ue+=X,w.mb=ne?oe:null,w.nb=ne?ue:null,e(ue+ne<=w.Fc+w.Vb),ur(w),i(w.Ac,w.Bc,0,U),P=1}}if(P){if(M.ka=0,M.y=w.sa,M.O=w.ta,M.f=w.qa,M.N=w.ra,M.ea=w.Ha,M.Vd=w.Ia,M.fa=w.R,M.Rc=w.B,M.F=null,M.J=0,!Nf){for(P=-255;255>=P;++P)hi[255+P]=0>P?-P:P;for(P=-1020;1020>=P;++P)za[1020+P]=-128>P?-128:127<P?127:P;for(P=-112;112>=P;++P)oh[112+P]=-16>P?-16:15<P?15:P;for(P=-255;510>=P;++P)ec[255+P]=0>P?0:255<P?255:P;Nf=1}Cr=qc,Vs=oa,Ju=Ji,to=Bs,ei=Hu,Qr=Nr,ha=$u,Hr=dl,Ci=kf,$r=Na,Ba=lp,Ws=au,fa=Mo,ih=bs,ci=qu,Ua=Ia,Qu=Ui,Jo=Kc,js[0]=La,js[1]=$c,js[2]=op,js[3]=Pg,js[4]=pi,js[5]=Yc,js[6]=Xc,js[7]=Gu,js[8]=Zc,js[9]=Rg,vl[0]=ip,vl[1]=Cg,vl[2]=sa,vl[3]=su,vl[4]=Qi,vl[5]=nr,vl[6]=Rf,Ha[0]=ao,Ha[1]=Tg,Ha[2]=Us,Ha[3]=Lf,Ha[4]=ka,Ha[5]=aa,Ha[6]=Wu,P=1}else P=0}P&&(P=function(Be,_t){for(Be.M=0;Be.M<Be.Va;++Be.M){var Qe,Le=Be.Jc[Be.M&Be.Xb],Fe=Be.m,yt=Be;for(Qe=0;Qe<yt.za;++Qe){var Mt=Fe,St=yt,$t=St.Ac,Bt=St.Bc+4*Qe,dn=St.zc,Ut=St.ya[St.aa+Qe];if(St.Qa.Bb?Ut.$b=Ce(Mt,St.Pa.jb[0])?2+Ce(Mt,St.Pa.jb[2]):Ce(Mt,St.Pa.jb[1]):Ut.$b=0,St.kc&&(Ut.Ad=Ce(Mt,St.Bd)),Ut.Za=!Ce(Mt,145)+0,Ut.Za){var sr=Ut.Ob,yr=0;for(St=0;4>St;++St){var Qn,Wn=dn[0+St];for(Qn=0;4>Qn;++Qn){Wn=NS[$t[Bt+Qn]][Wn];for(var Fr=mp[Ce(Mt,Wn[0])];0<Fr;)Fr=mp[2*Fr+Ce(Mt,Wn[Fr])];Wn=-Fr,$t[Bt+Qn]=Wn}r(sr,yr,$t,Bt,4),yr+=4,dn[0+St]=Wn}}else Wn=Ce(Mt,156)?Ce(Mt,128)?1:3:Ce(Mt,163)?2:0,Ut.Ob[0]=Wn,i($t,Bt,Wn,4),i(dn,0,Wn,4);Ut.Dd=Ce(Mt,142)?Ce(Mt,114)?Ce(Mt,183)?1:3:2:0}if(yt.m.Ka)return pn(Be,7,"Premature end-of-partition0 encountered.");for(;Be.ja<Be.za;++Be.ja){if(yt=Le,Mt=(Fe=Be).rb[Fe.sb-1],$t=Fe.rb[Fe.sb+Fe.ja],Qe=Fe.ya[Fe.aa+Fe.ja],Bt=Fe.kc?Qe.Ad:0)Mt.la=$t.la=0,Qe.Za||(Mt.Na=$t.Na=0),Qe.Hc=0,Qe.Gc=0,Qe.ia=0;else{var Pr,Ln;if(Mt=$t,$t=yt,Bt=Fe.Pa.Xc,dn=Fe.ya[Fe.aa+Fe.ja],Ut=Fe.pb[dn.$b],St=dn.ad,sr=0,yr=Fe.rb[Fe.sb-1],Wn=Qn=0,i(St,sr,0,384),dn.Za)var mi=0,Vo=Bt[3];else{Fr=o(16);var gi=Mt.Na+yr.Na;if(gi=Bf($t,Bt[1],gi,Ut.Eb,0,Fr,0),Mt.Na=yr.Na=(0<gi)+0,1<gi)Cr(Fr,0,St,sr);else{var ho=Fr[0]+3>>3;for(Fr=0;256>Fr;Fr+=16)St[sr+Fr]=ho}mi=1,Vo=Bt[0]}var hr=15&Mt.la,Ro=15&yr.la;for(Fr=0;4>Fr;++Fr){var Lo=1&Ro;for(ho=Ln=0;4>ho;++ho)hr=hr>>1|(Lo=(gi=Bf($t,Vo,gi=Lo+(1&hr),Ut.Sc,mi,St,sr))>mi)<<7,Ln=Ln<<2|(3<gi?3:1<gi?2:St[sr+0]!=0),sr+=16;hr>>=4,Ro=Ro>>1|Lo<<7,Qn=(Qn<<8|Ln)>>>0}for(Vo=hr,mi=Ro>>4,Pr=0;4>Pr;Pr+=2){for(Ln=0,hr=Mt.la>>4+Pr,Ro=yr.la>>4+Pr,Fr=0;2>Fr;++Fr){for(Lo=1&Ro,ho=0;2>ho;++ho)gi=Lo+(1&hr),hr=hr>>1|(Lo=0<(gi=Bf($t,Bt[2],gi,Ut.Qc,0,St,sr)))<<3,Ln=Ln<<2|(3<gi?3:1<gi?2:St[sr+0]!=0),sr+=16;hr>>=2,Ro=Ro>>1|Lo<<5}Wn|=Ln<<4*Pr,Vo|=hr<<4<<Pr,mi|=(240&Ro)<<Pr}Mt.la=Vo,yr.la=mi,dn.Hc=Qn,dn.Gc=Wn,dn.ia=43690&Wn?0:Ut.ia,Bt=!(Qn|Wn)}if(0<Fe.L&&(Fe.wa[Fe.Y+Fe.ja]=Fe.gd[Qe.$b][Qe.Za],Fe.wa[Fe.Y+Fe.ja].La|=!Bt),yt.Ka)return pn(Be,7,"Premature end-of-file encountered.")}if(ur(Be),Fe=_t,yt=1,Qe=(Le=Be).D,Mt=0<Le.L&&Le.M>=Le.zb&&Le.M<=Le.Va,Le.Aa==0)e:{if(Qe.M=Le.M,Qe.uc=Mt,gl(Le,Qe),yt=1,Qe=(Ln=Le.D).Nb,Mt=(Wn=zf[Le.L])*Le.R,$t=Wn/2*Le.B,Fr=16*Qe*Le.R,ho=8*Qe*Le.B,Bt=Le.sa,dn=Le.ta-Mt+Fr,Ut=Le.qa,St=Le.ra-$t+ho,sr=Le.Ha,yr=Le.Ia-$t+ho,Ro=(hr=Ln.M)==0,Qn=hr>=Le.Va-1,Le.Aa==2&&gl(Le,Ln),Ln.uc)for(Lo=(gi=Le).D.M,e(gi.D.uc),Ln=gi.yb;Ln<gi.Hb;++Ln){mi=Ln,Vo=Lo;var vi=(yi=(In=gi).D).Nb;Pr=In.R;var yi=yi.wa[yi.Y+mi],fo=In.sa,Qo=In.ta+16*vi*Pr+16*mi,$s=yi.dd,Gi=yi.tc;if(Gi!=0)if(e(3<=Gi),In.L==1)0<mi&&Ua(fo,Qo,Pr,Gi+4),yi.La&&Jo(fo,Qo,Pr,Gi),0<Vo&&ci(fo,Qo,Pr,Gi+4),yi.La&&Qu(fo,Qo,Pr,Gi);else{var da=In.B,nc=In.qa,yl=In.ra+8*vi*da+8*mi,Va=In.Ha,In=In.Ia+8*vi*da+8*mi;vi=yi.ld,0<mi&&(Hr(fo,Qo,Pr,Gi+4,$s,vi),$r(nc,yl,Va,In,da,Gi+4,$s,vi)),yi.La&&(Ws(fo,Qo,Pr,Gi,$s,vi),ih(nc,yl,Va,In,da,Gi,$s,vi)),0<Vo&&(ha(fo,Qo,Pr,Gi+4,$s,vi),Ci(nc,yl,Va,In,da,Gi+4,$s,vi)),yi.La&&(Ba(fo,Qo,Pr,Gi,$s,vi),fa(nc,yl,Va,In,da,Gi,$s,vi))}}if(Le.ia&&alert("todo:DitherRow"),Fe.put!=null){if(Ln=16*hr,hr=16*(hr+1),Ro?(Fe.y=Le.sa,Fe.O=Le.ta+Fr,Fe.f=Le.qa,Fe.N=Le.ra+ho,Fe.ea=Le.Ha,Fe.W=Le.Ia+ho):(Ln-=Wn,Fe.y=Bt,Fe.O=dn,Fe.f=Ut,Fe.N=St,Fe.ea=sr,Fe.W=yr),Qn||(hr-=Wn),hr>Fe.o&&(hr=Fe.o),Fe.F=null,Fe.J=null,Le.Fa!=null&&0<Le.Fa.length&&Ln<hr&&(Fe.J=Qc(Le,Fe,Ln,hr-Ln),Fe.F=Le.mb,Fe.F==null&&Fe.F.length==0)){yt=pn(Le,3,"Could not decode alpha data.");break e}Ln<Fe.j&&(Wn=Fe.j-Ln,Ln=Fe.j,e(!(1&Wn)),Fe.O+=Le.R*Wn,Fe.N+=Le.B*(Wn>>1),Fe.W+=Le.B*(Wn>>1),Fe.F!=null&&(Fe.J+=Fe.width*Wn)),Ln<hr&&(Fe.O+=Fe.v,Fe.N+=Fe.v>>1,Fe.W+=Fe.v>>1,Fe.F!=null&&(Fe.J+=Fe.v),Fe.ka=Ln-Fe.j,Fe.U=Fe.va-Fe.v,Fe.T=hr-Ln,yt=Fe.put(Fe))}Qe+1!=Le.Ic||Qn||(r(Le.sa,Le.ta-Mt,Bt,dn+16*Le.R,Mt),r(Le.qa,Le.ra-$t,Ut,St+8*Le.B,$t),r(Le.Ha,Le.Ia-$t,sr,yr+8*Le.B,$t))}if(!yt)return pn(Be,6,"Output aborted.")}return 1}(w,M)),M.bc!=null&&M.bc(M),P&=1}return P?(w.cb=0,P):0}function fn(w,M,P,U,X){X=w[M+P+32*U]+(X>>3),w[M+P+32*U]=-256&X?0>X?0:255:X}function Er(w,M,P,U,X,ne){fn(w,M,0,P,U+X),fn(w,M,1,P,U+ne),fn(w,M,2,P,U-ne),fn(w,M,3,P,U-X)}function Pn(w){return(20091*w>>16)+w}function Vn(w,M,P,U){var X,ne=0,oe=o(16);for(X=0;4>X;++X){var ue=w[M+0]+w[M+8],he=w[M+0]-w[M+8],xe=(35468*w[M+4]>>16)-Pn(w[M+12]),we=Pn(w[M+4])+(35468*w[M+12]>>16);oe[ne+0]=ue+we,oe[ne+1]=he+xe,oe[ne+2]=he-xe,oe[ne+3]=ue-we,ne+=4,M++}for(X=ne=0;4>X;++X)ue=(w=oe[ne+0]+4)+oe[ne+8],he=w-oe[ne+8],xe=(35468*oe[ne+4]>>16)-Pn(oe[ne+12]),fn(P,U,0,0,ue+(we=Pn(oe[ne+4])+(35468*oe[ne+12]>>16))),fn(P,U,1,0,he+xe),fn(P,U,2,0,he-xe),fn(P,U,3,0,ue-we),ne++,U+=32}function Nr(w,M,P,U){var X=w[M+0]+4,ne=35468*w[M+4]>>16,oe=Pn(w[M+4]),ue=35468*w[M+1]>>16;Er(P,U,0,X+oe,w=Pn(w[M+1]),ue),Er(P,U,1,X+ne,w,ue),Er(P,U,2,X-ne,w,ue),Er(P,U,3,X-oe,w,ue)}function oa(w,M,P,U,X){Vn(w,M,P,U),X&&Vn(w,M+16,P,U+4)}function Ji(w,M,P,U){Vs(w,M+0,P,U,1),Vs(w,M+32,P,U+128,1)}function Bs(w,M,P,U){var X;for(w=w[M+0]+4,X=0;4>X;++X)for(M=0;4>M;++M)fn(P,U,M,X,w)}function Hu(w,M,P,U){w[M+0]&&to(w,M+0,P,U),w[M+16]&&to(w,M+16,P,U+4),w[M+32]&&to(w,M+32,P,U+128),w[M+48]&&to(w,M+48,P,U+128+4)}function qc(w,M,P,U){var X,ne=o(16);for(X=0;4>X;++X){var oe=w[M+0+X]+w[M+12+X],ue=w[M+4+X]+w[M+8+X],he=w[M+4+X]-w[M+8+X],xe=w[M+0+X]-w[M+12+X];ne[0+X]=oe+ue,ne[8+X]=oe-ue,ne[4+X]=xe+he,ne[12+X]=xe-he}for(X=0;4>X;++X)oe=(w=ne[0+4*X]+3)+ne[3+4*X],ue=ne[1+4*X]+ne[2+4*X],he=ne[1+4*X]-ne[2+4*X],xe=w-ne[3+4*X],P[U+0]=oe+ue>>3,P[U+16]=xe+he>>3,P[U+32]=oe-ue>>3,P[U+48]=xe-he>>3,U+=64}function fl(w,M,P){var U,X=M-32,ne=Go,oe=255-w[X-1];for(U=0;U<P;++U){var ue,he=ne,xe=oe+w[M-1];for(ue=0;ue<P;++ue)w[M+ue]=he[xe+w[X+ue]];M+=32}}function $c(w,M){fl(w,M,4)}function Tg(w,M){fl(w,M,8)}function Cg(w,M){fl(w,M,16)}function sa(w,M){var P;for(P=0;16>P;++P)r(w,M+32*P,w,M-32,16)}function su(w,M){var P;for(P=16;0<P;--P)i(w,M,w[M-1],16),M+=32}function Ra(w,M,P){var U;for(U=0;16>U;++U)i(M,P+32*U,w,16)}function ip(w,M){var P,U=16;for(P=0;16>P;++P)U+=w[M-1+32*P]+w[M+P-32];Ra(U>>5,w,M)}function Qi(w,M){var P,U=8;for(P=0;16>P;++P)U+=w[M-1+32*P];Ra(U>>4,w,M)}function nr(w,M){var P,U=8;for(P=0;16>P;++P)U+=w[M+P-32];Ra(U>>4,w,M)}function Rf(w,M){Ra(128,w,M)}function Sn(w,M,P){return w+2*M+P+2>>2}function op(w,M){var P,U=M-32;for(U=new Uint8Array([Sn(w[U-1],w[U+0],w[U+1]),Sn(w[U+0],w[U+1],w[U+2]),Sn(w[U+1],w[U+2],w[U+3]),Sn(w[U+2],w[U+3],w[U+4])]),P=0;4>P;++P)r(w,M+32*P,U,0,U.length)}function Pg(w,M){var P=w[M-1],U=w[M-1+32],X=w[M-1+64],ne=w[M-1+96];$e(w,M+0,16843009*Sn(w[M-1-32],P,U)),$e(w,M+32,16843009*Sn(P,U,X)),$e(w,M+64,16843009*Sn(U,X,ne)),$e(w,M+96,16843009*Sn(X,ne,ne))}function La(w,M){var P,U=4;for(P=0;4>P;++P)U+=w[M+P-32]+w[M-1+32*P];for(U>>=3,P=0;4>P;++P)i(w,M+32*P,U,4)}function pi(w,M){var P=w[M-1+0],U=w[M-1+32],X=w[M-1+64],ne=w[M-1-32],oe=w[M+0-32],ue=w[M+1-32],he=w[M+2-32],xe=w[M+3-32];w[M+0+96]=Sn(U,X,w[M-1+96]),w[M+1+96]=w[M+0+64]=Sn(P,U,X),w[M+2+96]=w[M+1+64]=w[M+0+32]=Sn(ne,P,U),w[M+3+96]=w[M+2+64]=w[M+1+32]=w[M+0+0]=Sn(oe,ne,P),w[M+3+64]=w[M+2+32]=w[M+1+0]=Sn(ue,oe,ne),w[M+3+32]=w[M+2+0]=Sn(he,ue,oe),w[M+3+0]=Sn(xe,he,ue)}function Xc(w,M){var P=w[M+1-32],U=w[M+2-32],X=w[M+3-32],ne=w[M+4-32],oe=w[M+5-32],ue=w[M+6-32],he=w[M+7-32];w[M+0+0]=Sn(w[M+0-32],P,U),w[M+1+0]=w[M+0+32]=Sn(P,U,X),w[M+2+0]=w[M+1+32]=w[M+0+64]=Sn(U,X,ne),w[M+3+0]=w[M+2+32]=w[M+1+64]=w[M+0+96]=Sn(X,ne,oe),w[M+3+32]=w[M+2+64]=w[M+1+96]=Sn(ne,oe,ue),w[M+3+64]=w[M+2+96]=Sn(oe,ue,he),w[M+3+96]=Sn(ue,he,he)}function Yc(w,M){var P=w[M-1+0],U=w[M-1+32],X=w[M-1+64],ne=w[M-1-32],oe=w[M+0-32],ue=w[M+1-32],he=w[M+2-32],xe=w[M+3-32];w[M+0+0]=w[M+1+64]=ne+oe+1>>1,w[M+1+0]=w[M+2+64]=oe+ue+1>>1,w[M+2+0]=w[M+3+64]=ue+he+1>>1,w[M+3+0]=he+xe+1>>1,w[M+0+96]=Sn(X,U,P),w[M+0+64]=Sn(U,P,ne),w[M+0+32]=w[M+1+96]=Sn(P,ne,oe),w[M+1+32]=w[M+2+96]=Sn(ne,oe,ue),w[M+2+32]=w[M+3+96]=Sn(oe,ue,he),w[M+3+32]=Sn(ue,he,xe)}function Gu(w,M){var P=w[M+0-32],U=w[M+1-32],X=w[M+2-32],ne=w[M+3-32],oe=w[M+4-32],ue=w[M+5-32],he=w[M+6-32],xe=w[M+7-32];w[M+0+0]=P+U+1>>1,w[M+1+0]=w[M+0+64]=U+X+1>>1,w[M+2+0]=w[M+1+64]=X+ne+1>>1,w[M+3+0]=w[M+2+64]=ne+oe+1>>1,w[M+0+32]=Sn(P,U,X),w[M+1+32]=w[M+0+96]=Sn(U,X,ne),w[M+2+32]=w[M+1+96]=Sn(X,ne,oe),w[M+3+32]=w[M+2+96]=Sn(ne,oe,ue),w[M+3+64]=Sn(oe,ue,he),w[M+3+96]=Sn(ue,he,xe)}function Rg(w,M){var P=w[M-1+0],U=w[M-1+32],X=w[M-1+64],ne=w[M-1+96];w[M+0+0]=P+U+1>>1,w[M+2+0]=w[M+0+32]=U+X+1>>1,w[M+2+32]=w[M+0+64]=X+ne+1>>1,w[M+1+0]=Sn(P,U,X),w[M+3+0]=w[M+1+32]=Sn(U,X,ne),w[M+3+32]=w[M+1+64]=Sn(X,ne,ne),w[M+3+64]=w[M+2+64]=w[M+0+96]=w[M+1+96]=w[M+2+96]=w[M+3+96]=ne}function Zc(w,M){var P=w[M-1+0],U=w[M-1+32],X=w[M-1+64],ne=w[M-1+96],oe=w[M-1-32],ue=w[M+0-32],he=w[M+1-32],xe=w[M+2-32];w[M+0+0]=w[M+2+32]=P+oe+1>>1,w[M+0+32]=w[M+2+64]=U+P+1>>1,w[M+0+64]=w[M+2+96]=X+U+1>>1,w[M+0+96]=ne+X+1>>1,w[M+3+0]=Sn(ue,he,xe),w[M+2+0]=Sn(oe,ue,he),w[M+1+0]=w[M+3+32]=Sn(P,oe,ue),w[M+1+32]=w[M+3+64]=Sn(U,P,oe),w[M+1+64]=w[M+3+96]=Sn(X,U,P),w[M+1+96]=Sn(ne,X,U)}function Us(w,M){var P;for(P=0;8>P;++P)r(w,M+32*P,w,M-32,8)}function Lf(w,M){var P;for(P=0;8>P;++P)i(w,M,w[M-1],8),M+=32}function Vu(w,M,P){var U;for(U=0;8>U;++U)i(M,P+32*U,w,8)}function ao(w,M){var P,U=8;for(P=0;8>P;++P)U+=w[M+P-32]+w[M-1+32*P];Vu(U>>4,w,M)}function aa(w,M){var P,U=4;for(P=0;8>P;++P)U+=w[M+P-32];Vu(U>>3,w,M)}function ka(w,M){var P,U=4;for(P=0;8>P;++P)U+=w[M-1+32*P];Vu(U>>3,w,M)}function Wu(w,M){Vu(128,w,M)}function ju(w,M,P){var U=w[M-P],X=w[M+0],ne=3*(X-U)+up[1020+w[M-2*P]-w[M+P]],oe=Ff[112+(ne+4>>3)];w[M-P]=Go[255+U+Ff[112+(ne+3>>3)]],w[M+0]=Go[255+X-oe]}function sp(w,M,P,U){var X=w[M+0],ne=w[M+P];return To[255+w[M-2*P]-w[M-P]]>U||To[255+ne-X]>U}function _s(w,M,P,U){return 4*To[255+w[M-P]-w[M+0]]+To[255+w[M-2*P]-w[M+P]]<=U}function ap(w,M,P,U,X){var ne=w[M-3*P],oe=w[M-2*P],ue=w[M-P],he=w[M+0],xe=w[M+P],we=w[M+2*P],We=w[M+3*P];return 4*To[255+ue-he]+To[255+oe-xe]>U?0:To[255+w[M-4*P]-ne]<=X&&To[255+ne-oe]<=X&&To[255+oe-ue]<=X&&To[255+We-we]<=X&&To[255+we-xe]<=X&&To[255+xe-he]<=X}function qu(w,M,P,U){var X=2*U+1;for(U=0;16>U;++U)_s(w,M+U,P,X)&&ju(w,M+U,P)}function Ia(w,M,P,U){var X=2*U+1;for(U=0;16>U;++U)_s(w,M+U*P,1,X)&&ju(w,M+U*P,1)}function Ui(w,M,P,U){var X;for(X=3;0<X;--X)qu(w,M+=4*P,P,U)}function Kc(w,M,P,U){var X;for(X=3;0<X;--X)Ia(w,M+=4,P,U)}function la(w,M,P,U,X,ne,oe,ue){for(ne=2*ne+1;0<X--;){if(ap(w,M,P,ne,oe))if(sp(w,M,P,ue))ju(w,M,P);else{var he=w,xe=M,we=P,We=he[xe-2*we],je=he[xe-we],Be=he[xe+0],_t=he[xe+we],Qe=he[xe+2*we],Le=27*(yt=up[1020+3*(Be-je)+up[1020+We-_t]])+63>>7,Fe=18*yt+63>>7,yt=9*yt+63>>7;he[xe-3*we]=Go[255+he[xe-3*we]+yt],he[xe-2*we]=Go[255+We+Fe],he[xe-we]=Go[255+je+Le],he[xe+0]=Go[255+Be-Le],he[xe+we]=Go[255+_t-Fe],he[xe+2*we]=Go[255+Qe-yt]}M+=U}}function bo(w,M,P,U,X,ne,oe,ue){for(ne=2*ne+1;0<X--;){if(ap(w,M,P,ne,oe))if(sp(w,M,P,ue))ju(w,M,P);else{var he=w,xe=M,we=P,We=he[xe-we],je=he[xe+0],Be=he[xe+we],_t=Ff[112+((Qe=3*(je-We))+4>>3)],Qe=Ff[112+(Qe+3>>3)],Le=_t+1>>1;he[xe-2*we]=Go[255+he[xe-2*we]+Le],he[xe-we]=Go[255+We+Qe],he[xe+0]=Go[255+je-_t],he[xe+we]=Go[255+Be-Le]}M+=U}}function $u(w,M,P,U,X,ne){la(w,M,P,1,16,U,X,ne)}function dl(w,M,P,U,X,ne){la(w,M,1,P,16,U,X,ne)}function lp(w,M,P,U,X,ne){var oe;for(oe=3;0<oe;--oe)bo(w,M+=4*P,P,1,16,U,X,ne)}function au(w,M,P,U,X,ne){var oe;for(oe=3;0<oe;--oe)bo(w,M+=4,1,P,16,U,X,ne)}function kf(w,M,P,U,X,ne,oe,ue){la(w,M,X,1,8,ne,oe,ue),la(P,U,X,1,8,ne,oe,ue)}function Na(w,M,P,U,X,ne,oe,ue){la(w,M,1,X,8,ne,oe,ue),la(P,U,1,X,8,ne,oe,ue)}function Mo(w,M,P,U,X,ne,oe,ue){bo(w,M+4*X,X,1,8,ne,oe,ue),bo(P,U+4*X,X,1,8,ne,oe,ue)}function bs(w,M,P,U,X,ne,oe,ue){bo(w,M+4,1,X,8,ne,oe,ue),bo(P,U+4,1,X,8,ne,oe,ue)}function Ms(){this.ba=new Ve,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ct,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Xu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Jc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function zs(){this.ua=0,this.Wa=new ae,this.vb=new ae,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new G,this.yc=new z}function Fa(){this.xb=this.a=0,this.l=new Zt,this.ca=new Ve,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new D,this.Pb=0,this.wd=new D,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new zs,this.ab=0,this.gc=s(4,Jc),this.Oc=0}function pl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Zt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function lu(w,M,P,U,X,ne,oe){for(w=w==null?0:w[M+0],M=0;M<oe;++M)X[ne+M]=w+P[U+M]&255,w=X[ne+M]}function uu(w,M,P,U,X,ne,oe){var ue;if(w==null)lu(null,null,P,U,X,ne,oe);else for(ue=0;ue<oe;++ue)X[ne+ue]=w[M+ue]+P[U+ue]&255}function ml(w,M,P,U,X,ne,oe){if(w==null)lu(null,null,P,U,X,ne,oe);else{var ue,he=w[M+0],xe=he,we=he;for(ue=0;ue<oe;++ue)xe=we+(he=w[M+ue])-xe,we=P[U+ue]+(-256&xe?0>xe?0:255:xe)&255,xe=he,X[ne+ue]=we}}function Qc(w,M,P,U){var X=M.width,ne=M.o;if(e(w!=null&&M!=null),0>P||0>=U||P+U>ne)return null;if(!w.Cc){if(w.ga==null){var oe;if(w.ga=new pl,(oe=w.ga==null)||(oe=M.width*M.o,e(w.Gb.length==0),w.Gb=o(oe),w.Uc=0,w.Gb==null?oe=0:(w.mb=w.Gb,w.nb=w.Uc,w.rc=null,oe=1),oe=!oe),!oe){oe=w.ga;var ue=w.Fa,he=w.P,xe=w.qc,we=w.mb,We=w.nb,je=he+1,Be=xe-1,_t=oe.l;if(e(ue!=null&&we!=null&&M!=null),qs[0]=null,qs[1]=lu,qs[2]=uu,qs[3]=ml,oe.ca=we,oe.tb=We,oe.c=M.width,oe.i=M.height,e(0<oe.c&&0<oe.i),1>=xe)M=0;else if(oe.$a=ue[he+0]>>0&3,oe.Z=ue[he+0]>>2&3,oe.Lc=ue[he+0]>>4&3,he=ue[he+0]>>6&3,0>oe.$a||1<oe.$a||4<=oe.Z||1<oe.Lc||he)M=0;else if(_t.put=wn,_t.ac=Yn,_t.bc=ir,_t.ma=oe,_t.width=M.width,_t.height=M.height,_t.Da=M.Da,_t.v=M.v,_t.va=M.va,_t.j=M.j,_t.o=M.o,oe.$a)e:{e(oe.$a==1),M=ve();t:for(;;){if(M==null){M=0;break e}if(e(oe!=null),oe.mc=M,M.c=oe.c,M.i=oe.i,M.l=oe.l,M.l.ma=oe,M.l.width=oe.c,M.l.height=oe.i,M.a=0,V(M.m,ue,je,Be),!ge(oe.c,oe.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&Ki(M.s)?(oe.ic=1,ue=M.c*M.i,M.Ta=null,M.Ua=0,M.V=o(ue),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(oe.ic=0,M=_e(M,oe.c)),!M))break t;M=1;break e}oe.mc=null,M=0}else M=Be>=oe.c*oe.i;oe=!M}if(oe)return null;w.ga.Lc!=1?w.Ga=0:U=ne-P}e(w.ga!=null),e(P+U<=ne);e:{if(M=(ue=w.ga).c,ne=ue.l.o,ue.$a==0){if(je=w.rc,Be=w.Vc,_t=w.Fa,he=w.P+1+P*M,xe=w.mb,we=w.nb+P*M,e(he<=w.P+w.qc),ue.Z!=0)for(e(qs[ue.Z]!=null),oe=0;oe<U;++oe)qs[ue.Z](je,Be,_t,he,xe,we,M),je=xe,Be=we,we+=M,he+=M;else for(oe=0;oe<U;++oe)r(xe,we,_t,he,M),je=xe,Be=we,we+=M,he+=M;w.rc=je,w.Vc=Be}else{if(e(ue.mc!=null),M=P+U,e((oe=ue.mc)!=null),e(M<=oe.i),oe.C>=M)M=1;else if(ue.ic||He(),ue.ic){ue=oe.V,je=oe.Ba,Be=oe.c;var Qe=oe.i,Le=(_t=1,he=oe.$/Be,xe=oe.$%Be,we=oe.m,We=oe.s,oe.$),Fe=Be*Qe,yt=Be*M,Mt=We.wc,St=Le<yt?dr(We,xe,he):null;e(Le<=Fe),e(M<=Qe),e(Ki(We));t:for(;;){for(;!we.h&&Le<yt;){if(xe&Mt||(St=dr(We,xe,he)),e(St!=null),se(we),256>(Qe=Ir(St.G[0],St.H[0],we)))ue[je+Le]=Qe,++Le,++xe>=Be&&(xe=0,++he<=M&&!(he%16)&&$(oe,he));else{if(!(280>Qe)){_t=0;break t}Qe=Yi(Qe-256,we);var $t,Bt=Ir(St.G[4],St.H[4],we);if(se(we),!(Le>=(Bt=Zi(Be,Bt=Yi(Bt,we)))&&Fe-Le>=Qe)){_t=0;break t}for($t=0;$t<Qe;++$t)ue[je+Le+$t]=ue[je+Le+$t-Bt];for(Le+=Qe,xe+=Qe;xe>=Be;)xe-=Be,++he<=M&&!(he%16)&&$(oe,he);Le<yt&&xe&Mt&&(St=dr(We,xe,he))}e(we.h==Z(we))}$(oe,he>M?M:he);break t}!_t||we.h&&Le<Fe?(_t=0,oe.a=we.h?5:3):oe.$=Le,M=_t}else M=B(oe,oe.V,oe.Ba,oe.c,oe.i,M,qe);if(!M){U=0;break e}}P+U>=ne&&(w.Cc=1),U=1}if(!U)return null;if(w.Cc&&((U=w.ga)!=null&&(U.mc=null),w.ga=null,0<w.Ga))return alert("todo:WebPDequantizeLevels"),null}return w.nb+P*X}function T(w,M,P,U,X,ne){for(;0<X--;){var oe,ue=w,he=M+(P?1:0),xe=w,we=M+(P?0:3);for(oe=0;oe<U;++oe){var We=xe[we+4*oe];We!=255&&(We*=32897,ue[he+4*oe+0]=ue[he+4*oe+0]*We>>23,ue[he+4*oe+1]=ue[he+4*oe+1]*We>>23,ue[he+4*oe+2]=ue[he+4*oe+2]*We>>23)}M+=ne}}function Y(w,M,P,U,X){for(;0<U--;){var ne;for(ne=0;ne<P;++ne){var oe=w[M+2*ne+0],ue=15&(xe=w[M+2*ne+1]),he=4369*ue,xe=(240&xe|xe>>4)*he>>16;w[M+2*ne+0]=(240&oe|oe>>4)*he>>16&240|(15&oe|oe<<4)*he>>16>>4&15,w[M+2*ne+1]=240&xe|ue}M+=X}}function Me(w,M,P,U,X,ne,oe,ue){var he,xe,we=255;for(xe=0;xe<X;++xe){for(he=0;he<U;++he){var We=w[M+he];ne[oe+4*he]=We,we&=We}M+=P,oe+=ue}return we!=255}function Re(w,M,P,U,X){var ne;for(ne=0;ne<X;++ne)P[U+ne]=w[M+ne]>>8}function He(){Pi=T,Jn=Y,cr=Me,Xr=Re}function at(w,M,P){R[w]=function(U,X,ne,oe,ue,he,xe,we,We,je,Be,_t,Qe,Le,Fe,yt,Mt){var St,$t=Mt-1>>1,Bt=ue[he+0]|xe[we+0]<<16,dn=We[je+0]|Be[_t+0]<<16;e(U!=null);var Ut=3*Bt+dn+131074>>2;for(M(U[X+0],255&Ut,Ut>>16,Qe,Le),ne!=null&&(Ut=3*dn+Bt+131074>>2,M(ne[oe+0],255&Ut,Ut>>16,Fe,yt)),St=1;St<=$t;++St){var sr=ue[he+St]|xe[we+St]<<16,yr=We[je+St]|Be[_t+St]<<16,Qn=Bt+sr+dn+yr+524296,Wn=Qn+2*(sr+dn)>>3;Ut=Wn+Bt>>1,Bt=(Qn=Qn+2*(Bt+yr)>>3)+sr>>1,M(U[X+2*St-1],255&Ut,Ut>>16,Qe,Le+(2*St-1)*P),M(U[X+2*St-0],255&Bt,Bt>>16,Qe,Le+(2*St-0)*P),ne!=null&&(Ut=Qn+dn>>1,Bt=Wn+yr>>1,M(ne[oe+2*St-1],255&Ut,Ut>>16,Fe,yt+(2*St-1)*P),M(ne[oe+2*St+0],255&Bt,Bt>>16,Fe,yt+(2*St+0)*P)),Bt=sr,dn=yr}1&Mt||(Ut=3*Bt+dn+131074>>2,M(U[X+Mt-1],255&Ut,Ut>>16,Qe,Le+(Mt-1)*P),ne!=null&&(Ut=3*dn+Bt+131074>>2,M(ne[oe+Mt-1],255&Ut,Ut>>16,Fe,yt+(Mt-1)*P)))}}function Et(){Co[Df]=gp,Co[tc]=Fg,Co[Of]=vp,Co[sh]=uh,Co[fu]=co,Co[cp]=$1,Co[Lg]=FS,Co[hp]=Fg,Co[fp]=uh,Co[ah]=co,Co[dp]=$1}function Gt(w){return w&~X1?0>w?0:255:w>>Dg}function ln(w,M){return Gt((19077*w>>8)+(26149*M>>8)-14234)}function bn(w,M,P){return Gt((19077*w>>8)-(6419*M>>8)-(13320*P>>8)+8708)}function cn(w,M){return Gt((19077*w>>8)+(33050*M>>8)-17685)}function En(w,M,P,U,X){U[X+0]=ln(w,P),U[X+1]=bn(w,M,P),U[X+2]=cn(w,M)}function _r(w,M,P,U,X){U[X+0]=cn(w,M),U[X+1]=bn(w,M,P),U[X+2]=ln(w,P)}function vr(w,M,P,U,X){var ne=bn(w,M,P);M=ne<<3&224|cn(w,M)>>3,U[X+0]=248&ln(w,P)|ne>>5,U[X+1]=M}function Ar(w,M,P,U,X){var ne=240&cn(w,M)|15;U[X+0]=240&ln(w,P)|bn(w,M,P)>>4,U[X+1]=ne}function li(w,M,P,U,X){U[X+0]=255,En(w,M,P,U,X+1)}function zi(w,M,P,U,X){_r(w,M,P,U,X),U[X+3]=255}function Es(w,M,P,U,X){En(w,M,P,U,X),U[X+3]=255}function zo(w,M){return 0>w?0:w>M?M:w}function ui(w,M,P){R[w]=function(U,X,ne,oe,ue,he,xe,we,We){for(var je=we+(-2&We)*P;we!=je;)M(U[X+0],ne[oe+0],ue[he+0],xe,we),M(U[X+1],ne[oe+0],ue[he+0],xe,we+P),X+=2,++oe,++he,we+=2*P;1&We&&M(U[X+0],ne[oe+0],ue[he+0],xe,we)}}function Eo(w,M,P){return P==0?w==0?M==0?6:5:M==0?4:0:P}function Tr(w,M,P,U,X){switch(w>>>30){case 3:Vs(M,P,U,X,0);break;case 2:Qr(M,P,U,X);break;case 1:to(M,P,U,X)}}function gl(w,M){var P,U,X=M.M,ne=M.Nb,oe=w.oc,ue=w.pc+40,he=w.oc,xe=w.pc+584,we=w.oc,We=w.pc+600;for(P=0;16>P;++P)oe[ue+32*P-1]=129;for(P=0;8>P;++P)he[xe+32*P-1]=129,we[We+32*P-1]=129;for(0<X?oe[ue-1-32]=he[xe-1-32]=we[We-1-32]=129:(i(oe,ue-32-1,127,21),i(he,xe-32-1,127,9),i(we,We-32-1,127,9)),U=0;U<w.za;++U){var je=M.ya[M.aa+U];if(0<U){for(P=-1;16>P;++P)r(oe,ue+32*P-4,oe,ue+32*P+12,4);for(P=-1;8>P;++P)r(he,xe+32*P-4,he,xe+32*P+4,4),r(we,We+32*P-4,we,We+32*P+4,4)}var Be=w.Gd,_t=w.Hd+U,Qe=je.ad,Le=je.Hc;if(0<X&&(r(oe,ue-32,Be[_t].y,0,16),r(he,xe-32,Be[_t].f,0,8),r(we,We-32,Be[_t].ea,0,8)),je.Za){var Fe=oe,yt=ue-32+16;for(0<X&&(U>=w.za-1?i(Fe,yt,Be[_t].y[15],4):r(Fe,yt,Be[_t+1].y,0,4)),P=0;4>P;P++)Fe[yt+128+P]=Fe[yt+256+P]=Fe[yt+384+P]=Fe[yt+0+P];for(P=0;16>P;++P,Le<<=2)Fe=oe,yt=ue+Uf[P],js[je.Ob[P]](Fe,yt),Tr(Le,Qe,16*+P,Fe,yt)}else if(Fe=Eo(U,X,je.Ob[0]),vl[Fe](oe,ue),Le!=0)for(P=0;16>P;++P,Le<<=2)Tr(Le,Qe,16*+P,oe,ue+Uf[P]);for(P=je.Gc,Fe=Eo(U,X,je.Dd),Ha[Fe](he,xe),Ha[Fe](we,We),Le=Qe,Fe=he,yt=xe,255&(je=P>>0)&&(170&je?Ju(Le,256,Fe,yt):ei(Le,256,Fe,yt)),je=we,Le=We,255&(P>>=8)&&(170&P?Ju(Qe,320,je,Le):ei(Qe,320,je,Le)),X<w.Ub-1&&(r(Be[_t].y,0,oe,ue+480,16),r(Be[_t].f,0,he,xe+224,8),r(Be[_t].ea,0,we,We+224,8)),P=8*ne*w.B,Be=w.sa,_t=w.ta+16*U+16*ne*w.R,Qe=w.qa,je=w.ra+8*U+P,Le=w.Ha,Fe=w.Ia+8*U+P,P=0;16>P;++P)r(Be,_t+P*w.R,oe,ue+32*P,16);for(P=0;8>P;++P)r(Qe,je+P*w.B,he,xe+32*P,8),r(Le,Fe+P*w.B,we,We+32*P,8)}}function Ao(w,M,P,U,X,ne,oe,ue,he){var xe=[0],we=[0],We=0,je=he!=null?he.kd:0,Be=he??new Xu;if(w==null||12>P)return 7;Be.data=w,Be.w=M,Be.ha=P,M=[M],P=[P],Be.gb=[Be.gb];e:{var _t=M,Qe=P,Le=Be.gb;if(e(w!=null),e(Qe!=null),e(Le!=null),Le[0]=0,12<=Qe[0]&&!t(w,_t[0],"RIFF")){if(t(w,_t[0]+8,"WEBP")){Le=3;break e}var Fe=Ie(w,_t[0]+4);if(12>Fe||4294967286<Fe){Le=3;break e}if(je&&Fe>Qe[0]-8){Le=7;break e}Le[0]=Fe,_t[0]+=12,Qe[0]-=12}Le=0}if(Le!=0)return Le;for(Fe=0<Be.gb[0],P=P[0];;){e:{var yt=w;Qe=M,Le=P;var Mt=xe,St=we,$t=_t=[0];if((Ut=We=[We])[0]=0,8>Le[0])Le=7;else{if(!t(yt,Qe[0],"VP8X")){if(Ie(yt,Qe[0]+4)!=10){Le=3;break e}if(18>Le[0]){Le=7;break e}var Bt=Ie(yt,Qe[0]+8),dn=1+fe(yt,Qe[0]+12);if(2147483648<=dn*(yt=1+fe(yt,Qe[0]+15))){Le=3;break e}$t!=null&&($t[0]=Bt),Mt!=null&&(Mt[0]=dn),St!=null&&(St[0]=yt),Qe[0]+=18,Le[0]-=18,Ut[0]=1}Le=0}}if(We=We[0],_t=_t[0],Le!=0)return Le;if(Qe=!!(2&_t),!Fe&&We)return 3;if(ne!=null&&(ne[0]=!!(16&_t)),oe!=null&&(oe[0]=Qe),ue!=null&&(ue[0]=0),oe=xe[0],_t=we[0],We&&Qe&&he==null){Le=0;break}if(4>P){Le=7;break}if(Fe&&We||!Fe&&!We&&!t(w,M[0],"ALPH")){P=[P],Be.na=[Be.na],Be.P=[Be.P],Be.Sa=[Be.Sa];e:{Bt=w,Le=M,Fe=P;var Ut=Be.gb;Mt=Be.na,St=Be.P,$t=Be.Sa,dn=22,e(Bt!=null),e(Fe!=null),yt=Le[0];var sr=Fe[0];for(e(Mt!=null),e($t!=null),Mt[0]=null,St[0]=null,$t[0]=0;;){if(Le[0]=yt,Fe[0]=sr,8>sr){Le=7;break e}var yr=Ie(Bt,yt+4);if(4294967286<yr){Le=3;break e}var Qn=8+yr+1&-2;if(dn+=Qn,0<Ut&&dn>Ut){Le=3;break e}if(!t(Bt,yt,"VP8 ")||!t(Bt,yt,"VP8L")){Le=0;break e}if(sr[0]<Qn){Le=7;break e}t(Bt,yt,"ALPH")||(Mt[0]=Bt,St[0]=yt+8,$t[0]=yr),yt+=Qn,sr-=Qn}}if(P=P[0],Be.na=Be.na[0],Be.P=Be.P[0],Be.Sa=Be.Sa[0],Le!=0)break}P=[P],Be.Ja=[Be.Ja],Be.xa=[Be.xa];e:if(Ut=w,Le=M,Fe=P,Mt=Be.gb[0],St=Be.Ja,$t=Be.xa,Bt=Le[0],yt=!t(Ut,Bt,"VP8 "),dn=!t(Ut,Bt,"VP8L"),e(Ut!=null),e(Fe!=null),e(St!=null),e($t!=null),8>Fe[0])Le=7;else{if(yt||dn){if(Ut=Ie(Ut,Bt+4),12<=Mt&&Ut>Mt-12){Le=3;break e}if(je&&Ut>Fe[0]-8){Le=7;break e}St[0]=Ut,Le[0]+=8,Fe[0]-=8,$t[0]=dn}else $t[0]=5<=Fe[0]&&Ut[Bt+0]==47&&!(Ut[Bt+4]>>5),St[0]=Fe[0];Le=0}if(P=P[0],Be.Ja=Be.Ja[0],Be.xa=Be.xa[0],M=M[0],Le!=0)break;if(4294967286<Be.Ja)return 3;if(ue==null||Qe||(ue[0]=Be.xa?2:1),oe=[oe],_t=[_t],Be.xa){if(5>P){Le=7;break}ue=oe,je=_t,Qe=ne,w==null||5>P?w=0:5<=P&&w[M+0]==47&&!(w[M+4]>>5)?(Fe=[0],Ut=[0],Mt=[0],V(St=new D,w,M,P),Wt(St,Fe,Ut,Mt)?(ue!=null&&(ue[0]=Fe[0]),je!=null&&(je[0]=Ut[0]),Qe!=null&&(Qe[0]=Mt[0]),w=1):w=0):w=0}else{if(10>P){Le=7;break}ue=_t,w==null||10>P||!xn(w,M+3,P-3)?w=0:(je=w[M+0]|w[M+1]<<8|w[M+2]<<16,Qe=16383&(w[M+7]<<8|w[M+6]),w=16383&(w[M+9]<<8|w[M+8]),1&je||3<(je>>1&7)||!(je>>4&1)||je>>5>=Be.Ja||!Qe||!w?w=0:(oe&&(oe[0]=Qe),ue&&(ue[0]=w),w=1))}if(!w||(oe=oe[0],_t=_t[0],We&&(xe[0]!=oe||we[0]!=_t)))return 3;he!=null&&(he[0]=Be,he.offset=M-he.w,e(4294967286>M-he.w),e(he.offset==he.ha-P));break}return Le==0||Le==7&&We&&he==null?(ne!=null&&(ne[0]|=Be.na!=null&&0<Be.na.length),U!=null&&(U[0]=oe),X!=null&&(X[0]=_t),0):Le}function eh(w,M,P){var U=M.width,X=M.height,ne=0,oe=0,ue=U,he=X;if(M.Da=w!=null&&0<w.Da,M.Da&&(ue=w.cd,he=w.bd,ne=w.v,oe=w.j,11>P||(ne&=-2,oe&=-2),0>ne||0>oe||0>=ue||0>=he||ne+ue>U||oe+he>X))return 0;if(M.v=ne,M.j=oe,M.va=ne+ue,M.o=oe+he,M.U=ue,M.T=he,M.da=w!=null&&0<w.da,M.da){if(!gt(ue,he,P=[w.ib],ne=[w.hb]))return 0;M.ib=P[0],M.hb=ne[0]}return M.ob=w!=null&&w.ob,M.Kb=w==null||!w.Sd,M.da&&(M.ob=M.ib<3*U/4&&M.hb<3*X/4,M.Kb=0),1}function th(w){if(w==null)return 2;if(11>w.S){var M=w.f.RGBA;M.fb+=(w.height-1)*M.A,M.A=-M.A}else M=w.f.kb,w=w.height,M.O+=(w-1)*M.fa,M.fa=-M.fa,M.N+=(w-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(w-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(w-1)*M.lb,M.lb=-M.lb);return 0}function cu(w,M,P,U){if(U==null||0>=w||0>=M)return 2;if(P!=null){if(P.Da){var X=P.cd,ne=P.bd,oe=-2&P.v,ue=-2&P.j;if(0>oe||0>ue||0>=X||0>=ne||oe+X>w||ue+ne>M)return 2;w=X,M=ne}if(P.da){if(!gt(w,M,X=[P.ib],ne=[P.hb]))return 2;w=X[0],M=ne[0]}}U.width=w,U.height=M;e:{var he=U.width,xe=U.height;if(w=U.S,0>=he||0>=xe||!(w>=Df&&13>w))w=2;else{if(0>=U.Rd&&U.sd==null){oe=ne=X=M=0;var we=(ue=he*Hg[w])*xe;if(11>w||(ne=(xe+1)/2*(M=(he+1)/2),w==12&&(oe=(X=he)*xe)),(xe=o(we+2*ne+oe))==null){w=1;break e}U.sd=xe,11>w?((he=U.f.RGBA).eb=xe,he.fb=0,he.A=ue,he.size=we):((he=U.f.kb).y=xe,he.O=0,he.fa=ue,he.Fd=we,he.f=xe,he.N=0+we,he.Ab=M,he.Cd=ne,he.ea=xe,he.W=0+we+ne,he.Db=M,he.Ed=ne,w==12&&(he.F=xe,he.J=0+we+2*ne),he.Tc=oe,he.lb=X)}if(M=1,X=U.S,ne=U.width,oe=U.height,X>=Df&&13>X)if(11>X)w=U.f.RGBA,M&=(ue=Math.abs(w.A))*(oe-1)+ne<=w.size,M&=ue>=ne*Hg[X],M&=w.eb!=null;else{w=U.f.kb,ue=(ne+1)/2,we=(oe+1)/2,he=Math.abs(w.fa),xe=Math.abs(w.Ab);var We=Math.abs(w.Db),je=Math.abs(w.lb),Be=je*(oe-1)+ne;M&=he*(oe-1)+ne<=w.Fd,M&=xe*(we-1)+ue<=w.Cd,M=(M&=We*(we-1)+ue<=w.Ed)&he>=ne&xe>=ue&We>=ue,M&=w.y!=null,M&=w.f!=null,M&=w.ea!=null,X==12&&(M&=je>=ne,M&=Be<=w.Tc,M&=w.F!=null)}else M=0;w=M?0:2}}return w!=0||P!=null&&P.fd&&(w=th(U)),w}var Hi=64,Yu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Da=24,ua=32,Zu=8,eo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];et("Predictor0","PredictorAdd0"),R.Predictor0=function(){return 4278190080},R.Predictor1=function(w){return w},R.Predictor2=function(w,M,P){return M[P+0]},R.Predictor3=function(w,M,P){return M[P+1]},R.Predictor4=function(w,M,P){return M[P-1]},R.Predictor5=function(w,M,P){return bt(bt(w,M[P+1]),M[P+0])},R.Predictor6=function(w,M,P){return bt(w,M[P-1])},R.Predictor7=function(w,M,P){return bt(w,M[P+0])},R.Predictor8=function(w,M,P){return bt(M[P-1],M[P+0])},R.Predictor9=function(w,M,P){return bt(M[P+0],M[P+1])},R.Predictor10=function(w,M,P){return bt(bt(w,M[P-1]),bt(M[P+0],M[P+1]))},R.Predictor11=function(w,M,P){var U=M[P+0];return 0>=Ne(U>>24&255,w>>24&255,(M=M[P-1])>>24&255)+Ne(U>>16&255,w>>16&255,M>>16&255)+Ne(U>>8&255,w>>8&255,M>>8&255)+Ne(255&U,255&w,255&M)?U:w},R.Predictor12=function(w,M,P){var U=M[P+0];return(pe((w>>24&255)+(U>>24&255)-((M=M[P-1])>>24&255))<<24|pe((w>>16&255)+(U>>16&255)-(M>>16&255))<<16|pe((w>>8&255)+(U>>8&255)-(M>>8&255))<<8|pe((255&w)+(255&U)-(255&M)))>>>0},R.Predictor13=function(w,M,P){var U=M[P-1];return(te((w=bt(w,M[P+0]))>>24&255,U>>24&255)<<24|te(w>>16&255,U>>16&255)<<16|te(w>>8&255,U>>8&255)<<8|te(w>>0&255,U>>0&255))>>>0};var nh=R.PredictorAdd0;R.PredictorAdd1=st,et("Predictor2","PredictorAdd2"),et("Predictor3","PredictorAdd3"),et("Predictor4","PredictorAdd4"),et("Predictor5","PredictorAdd5"),et("Predictor6","PredictorAdd6"),et("Predictor7","PredictorAdd7"),et("Predictor8","PredictorAdd8"),et("Predictor9","PredictorAdd9"),et("Predictor10","PredictorAdd10"),et("Predictor11","PredictorAdd11"),et("Predictor12","PredictorAdd12"),et("Predictor13","PredictorAdd13");var rh=R.PredictorAdd2;ut("ColorIndexInverseTransform","MapARGB","32b",function(w){return w>>8&255},function(w){return w}),ut("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(w){return w},function(w){return w>>8&255});var If,lo=R.ColorIndexInverseTransform,Ku=R.MapARGB,hu=R.VP8LColorIndexInverseTransformAlpha,Ho=R.MapAlpha,Hs=R.VP8LPredictorsAdd=[];Hs.length=16,(R.VP8LPredictors=[]).length=16,(R.VP8LPredictorsAdd_C=[]).length=16,(R.VP8LPredictors_C=[]).length=16;var Gs,Jr,uo,As,Oa,ca,Cr,Vs,Qr,Ju,to,ei,ha,Hr,Ci,$r,Ba,Ws,fa,ih,ci,Ua,Qu,Jo,Pi,Jn,cr,Xr,hi=o(511),za=o(2041),oh=o(225),ec=o(767),Nf=0,up=za,Ff=oh,Go=ec,To=hi,Df=0,tc=1,Of=2,sh=3,fu=4,cp=5,Lg=6,hp=7,fp=8,ah=9,dp=10,H1=[2,3,7],PS=[3,3,11],kg=[280,256,256,256,40],RS=[0,1,1,1,0],LS=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],G1=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],V1=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],W1=8,pp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],lh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Bf=null,kS=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],IS=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],mp=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ig=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],NS=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],j1=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],q1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],vl=[],js=[],Ha=[],Ga=1,Ng=2,qs=[],Co=[];at("UpsampleRgbLinePair",En,3),at("UpsampleBgrLinePair",_r,3),at("UpsampleRgbaLinePair",Es,4),at("UpsampleBgraLinePair",zi,4),at("UpsampleArgbLinePair",li,4),at("UpsampleRgba4444LinePair",Ar,2),at("UpsampleRgb565LinePair",vr,2);var gp=R.UpsampleRgbLinePair,vp=R.UpsampleBgrLinePair,Fg=R.UpsampleRgbaLinePair,uh=R.UpsampleBgraLinePair,co=R.UpsampleArgbLinePair,$1=R.UpsampleRgba4444LinePair,FS=R.UpsampleRgb565LinePair,Po=16,no=1<<Po-1,ch=-227,yp=482,Dg=6,X1=(256<<Dg)-1,Og=0,Bg=o(256),Y1=o(256),Ug=o(256),Z1=o(256),K1=o(yp-ch),xp=o(yp-ch);ui("YuvToRgbRow",En,3),ui("YuvToBgrRow",_r,3),ui("YuvToRgbaRow",Es,4),ui("YuvToBgraRow",zi,4),ui("YuvToArgbRow",li,4),ui("YuvToRgba4444Row",Ar,2),ui("YuvToRgb565Row",vr,2);var Uf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],zf=[0,2,8],zg=[8,7,6,4,4,2,2,2,1,1,1,1],J1=1;this.WebPDecodeRGBA=function(w,M,P,U,X){var ne=tc,oe=new Ms,ue=new Ve;oe.ba=ue,ue.S=ne,ue.width=[ue.width],ue.height=[ue.height];var he=ue.width,xe=ue.height,we=new At;if(we==null||w==null)var We=2;else e(we!=null),We=Ao(w,M,P,we.width,we.height,we.Pd,we.Qd,we.format,null);if(We!=0?he=0:(he!=null&&(he[0]=we.width[0]),xe!=null&&(xe[0]=we.height[0]),he=1),he){ue.width=ue.width[0],ue.height=ue.height[0],U!=null&&(U[0]=ue.width),X!=null&&(X[0]=ue.height);e:{if(U=new Zt,(X=new Xu).data=w,X.w=M,X.ha=P,X.kd=1,M=[0],e(X!=null),((w=Ao(X.data,X.w,X.ha,null,null,null,M,null,X))==0||w==7)&&M[0]&&(w=4),(M=w)==0){if(e(oe!=null),U.data=X.data,U.w=X.w+X.offset,U.ha=X.ha-X.offset,U.put=wn,U.ac=Yn,U.bc=ir,U.ma=oe,X.xa){if((w=ve())==null){oe=1;break e}if(function(je,Be){var _t=[0],Qe=[0],Le=[0];t:for(;;){if(je==null)return 0;if(Be==null)return je.a=2,0;if(je.l=Be,je.a=0,V(je.m,Be.data,Be.w,Be.ha),!Wt(je.m,_t,Qe,Le)){je.a=3;break t}if(je.xb=Ng,Be.width=_t[0],Be.height=Qe[0],!ge(_t[0],Qe[0],1,je,null))break t;return 1}return e(je.a!=0),0}(w,U)){if(U=(M=cu(U.width,U.height,oe.Oa,oe.ba))==0){t:{U=w;n:for(;;){if(U==null){U=0;break t}if(e(U.s.yc!=null),e(U.s.Ya!=null),e(0<U.s.Wb),e((P=U.l)!=null),e((X=P.ma)!=null),U.xb!=0){if(U.ca=X.ba,U.tb=X.tb,e(U.ca!=null),!eh(X.Oa,P,sh)){U.a=2;break n}if(!_e(U,P.width)||P.da)break n;if((P.da||ct(U.ca.S))&&He(),11>U.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),U.ca.f.kb.F!=null&&He()),U.Pb&&0<U.s.ua&&U.s.vb.X==null&&!Ue(U.s.vb,U.s.Wa.Xa)){U.a=1;break n}U.xb=0}if(!B(U,U.V,U.Ba,U.c,U.i,P.o,yn))break n;X.Dc=U.Ma,U=1;break t}e(U.a!=0),U=0}U=!U}U&&(M=w.a)}else M=w.a}else{if((w=new Mn)==null){oe=1;break e}if(w.Fa=X.na,w.P=X.P,w.qc=X.Sa,or(w,U)){if((M=cu(U.width,U.height,oe.Oa,oe.ba))==0){if(w.Aa=0,P=oe.Oa,e((X=w)!=null),P!=null){if(0<(he=0>(he=P.Md)?0:100<he?255:255*he/100)){for(xe=we=0;4>xe;++xe)12>(We=X.pb[xe]).lc&&(We.ia=he*zg[0>We.lc?0:We.lc]>>3),we|=We.ia;we&&(alert("todo:VP8InitRandom"),X.ia=1)}X.Ga=P.Id,100<X.Ga?X.Ga=100:0>X.Ga&&(X.Ga=0)}Kr(w,U)||(M=w.a)}}else M=w.a}M==0&&oe.Oa!=null&&oe.Oa.fd&&(M=th(oe.ba))}oe=M}ne=oe!=0?null:11>ne?ue.f.RGBA.eb:ue.f.kb.y}else ne=null;return ne};var Hg=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(R,k){for(var L="",N=0;N<4;N++)L+=String.fromCharCode(R[k++]);return L}function c(R,k){return(R[k+0]<<0|R[k+1]<<8|R[k+2]<<16)>>>0}function h(R,k){return(R[k+0]<<0|R[k+1]<<8|R[k+2]<<16|R[k+3]<<24)>>>0}new l;var f=[0],d=[0],v=[],y=new l,x=n,g=function(R,k){var L={},N=0,z=!1,H=0,G=0;if(L.frames=[],!function(q,Z,Q,se){for(var me=0;me<se;me++)if(q[Z+me]!=Q.charCodeAt(me))return!0;return!1}(R,k,"RIFF",4)){for(h(R,k+=4),k+=8;k<R.length;){var K=u(R,k),ee=h(R,k+=4);k+=4;var le=ee+(1&ee);switch(K){case"VP8 ":case"VP8L":L.frames[N]===void 0&&(L.frames[N]={}),(j=L.frames[N]).src_off=z?G:k-8,j.src_size=H+ee+8,N++,z&&(z=!1,H=0,G=0);break;case"VP8X":(j=L.header={}).feature_flags=R[k];var V=k+4;j.canvas_width=1+c(R,V),V+=3,j.canvas_height=1+c(R,V),V+=3;break;case"ALPH":z=!0,H=le+8,G=k-8;break;case"ANIM":(j=L.header).bgcolor=h(R,k),V=k+4,j.loop_count=(ie=R)[(D=V)+0]<<0|ie[D+1]<<8,V+=2;break;case"ANMF":var J,j;(j=L.frames[N]={}).offset_x=2*c(R,k),k+=3,j.offset_y=2*c(R,k),k+=3,j.width=1+c(R,k),k+=3,j.height=1+c(R,k),k+=3,j.duration=c(R,k),k+=3,J=R[k++],j.dispose=1&J,j.blend=J>>1&1}K!="ANMF"&&(k+=le)}var ie,D;return L}}(x,0);g.response=x,g.rgbaoutput=!0,g.dataurl=!1;var S=g.header?g.header:null,_=g.frames?g.frames:null;if(S){S.loop_counter=S.loop_count,f=[S.canvas_height],d=[S.canvas_width];for(var E=0;E<_.length&&_[E].blend!=0;E++);}var C=_[0],I=y.WebPDecodeRGBA(x,C.src_off,C.src_size,d,f);C.rgba=I,C.imgwidth=d[0],C.imgheight=f[0];for(var F=0;F<d[0]*f[0]*4;F++)v[F]=I[F];return this.width=d,this.height=f,this.data=v,this}(function(n){var e=function(){return typeof oE=="function"},t=function(f,d,v,y){var x=4,g=s;switch(y){case n.image_compression.FAST:x=1,g=o;break;case n.image_compression.MEDIUM:x=6,g=a;break;case n.image_compression.SLOW:x=9,g=l}f=r(f,d,v,g);var S=oE(f,{level:x});return n.__addimage__.arrayBufferToBinaryString(S)},r=function(f,d,v,y){for(var x,g,S,_=f.length/d,E=new Uint8Array(f.length+_),C=c(),I=0;I<_;I+=1){if(S=I*d,x=f.subarray(S,S+d),y)E.set(y(x,v,g),S+I);else{for(var F,R=C.length,k=[];F<R;F+=1)k[F]=C[F](x,v,g);var L=h(k.concat());E.set(k[L],S+I)}g=x}return E},i=function(f){var d=Array.apply([],f);return d.unshift(0),d},o=function(f,d){var v,y=[],x=f.length;y[0]=1;for(var g=0;g<x;g+=1)v=f[g-d]||0,y[g+1]=f[g]-v+256&255;return y},s=function(f,d,v){var y,x=[],g=f.length;x[0]=2;for(var S=0;S<g;S+=1)y=v&&v[S]||0,x[S+1]=f[S]-y+256&255;return x},a=function(f,d,v){var y,x,g=[],S=f.length;g[0]=3;for(var _=0;_<S;_+=1)y=f[_-d]||0,x=v&&v[_]||0,g[_+1]=f[_]+256-(y+x>>>1)&255;return g},l=function(f,d,v){var y,x,g,S,_=[],E=f.length;_[0]=4;for(var C=0;C<E;C+=1)y=f[C-d]||0,x=v&&v[C]||0,g=v&&v[C-d]||0,S=u(y,x,g),_[C+1]=f[C]-S+256&255;return _},u=function(f,d,v){if(f===d&&d===v)return f;var y=Math.abs(d-v),x=Math.abs(f-v),g=Math.abs(f+d-v-v);return y<=x&&y<=g?f:x<=g?d:v},c=function(){return[i,o,s,a,l]},h=function(f){var d=f.map(function(v){return v.reduce(function(y,x){return y+Math.abs(x)},0)});return d.indexOf(Math.min.apply(null,d))};n.processPNG=function(f,d,v,y){var x,g,S,_,E,C,I,F,R,k,L,N,z,H,G,K=this.decode.FLATE_DECODE,ee="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(S=new Vte(f)).imgData,g=S.bits,x=S.colorSpace,E=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){R=(F=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,L=new Uint8Array(R*S.colors),k=new Uint8Array(R);var le,V=S.pixelBitlength-S.bits;for(H=0,G=0;H<R;H++){for(z=F[H],le=0;le<V;)L[G++]=z>>>le&255,le+=S.bits;k[H]=z>>>le&255}}if(S.bits===16){R=(F=new Uint32Array(S.decodePixels().buffer)).length,L=new Uint8Array(R*(32/S.pixelBitlength)*S.colors),k=new Uint8Array(R*(32/S.pixelBitlength)),N=S.colors>1,H=0,G=0;for(var J=0;H<R;)z=F[H++],L[G++]=z>>>0&255,N&&(L[G++]=z>>>16&255,z=F[H++],L[G++]=z>>>0&255),k[J++]=z>>>16&255;g=8}y!==n.image_compression.NONE&&e()?(f=t(L,S.width*S.colors,S.colors,y),I=t(k,S.width,1,y)):(f=L,I=k,K=void 0)}if(S.colorType===3&&(x=this.color_spaces.INDEXED,C=S.palette,S.transparency.indexed)){var j=S.transparency.indexed,ie=0;for(H=0,R=j.length;H<R;++H)ie+=j[H];if((ie/=255)===R-1&&j.indexOf(0)!==-1)_=[j.indexOf(0)];else if(ie!==R){for(F=S.decodePixels(),k=new Uint8Array(F.length),H=0,R=F.length;H<R;H++)k[H]=j[F[H]];I=t(k,S.width,1)}}var D=function(q){var Z;switch(q){case n.image_compression.FAST:Z=11;break;case n.image_compression.MEDIUM:Z=13;break;case n.image_compression.SLOW:Z=14;break;default:Z=12}return Z}(y);return K===this.decode.FLATE_DECODE&&(ee="/Predictor "+D+" "),ee+="/Colors "+E+" /BitsPerComponent "+g+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(I&&this.__addimage__.isArrayBuffer(I)||this.__addimage__.isArrayBufferView(I))&&(I=this.__addimage__.arrayBufferToBinaryString(I)),{alias:v,data:f,index:d,filter:K,decodeParameters:ee,transparency:_,palette:C,sMask:I,predictor:D,width:S.width,height:S.height,bitsPerComponent:g,colorSpace:x}}}})(vn.API),function(n){n.processGIF89A=function(e,t,r,i){var o=new Wte(e),s=o.width,a=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:s,height:a},c=new Rb(100).encode(u,100);return n.processJPEG.call(this,c,t,r,i)},n.processGIF87A=n.processGIF89A}(vn.API),Cl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Cl.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Wr.log("bit decode error:"+t)}},Cl.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[o>>7-a&1];this.data[s+4*a]=l.blue,this.data[s+4*a+1]=l.green,this.data[s+4*a+2]=l.red,this.data[s+4*a+3]=255}t!==0&&(this.pos+=4-t)}},Cl.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,l=15&o,u=this.palette[a];if(this.data[s]=u.blue,this.data[s+1]=u.green,this.data[s+2]=u.red,this.data[s+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[s+4]=u.blue,this.data[s+4+1]=u.green,this.data[s+4+2]=u.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},Cl.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},Cl.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,l=(o>>10&e)/e*255|0,u=o>>15?255:0,c=r*this.width*4+4*i;this.data[c]=l,this.data[c+1]=a,this.data[c+2]=s,this.data[c+3]=u}this.pos+=n}},Cl.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,l=(s>>5&t)/t*255|0,u=(s>>11)/e*255|0,c=i*this.width*4+4*o;this.data[c]=u,this.data[c+1]=l,this.data[c+2]=a,this.data[c+3]=255}this.pos+=n}},Cl.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},Cl.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},Cl.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var o=new Cl(e,!1),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},u=new Rb(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}}(vn.API),YL.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var o=new YL(e),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},u=new Rb(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}}(vn.API),vn.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,l=0,u=0;u<i;u+=4){var c=r[u],h=r[u+1],f=r[u+2],d=r[u+3];o[a++]=c,o[a++]=h,o[a++]=f,s[l++]=d}var v=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:v,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},vn.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},nm=vn.API,E2=nm.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,c=u.fof?u.fof:1,h=e.doKerning!==!1,f=0,d=n.length,v=0,y=a[0]||l,x=[];for(t=0;t<d;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?x.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(f=h&&Br(u[r])==="object"&&!isNaN(parseInt(u[r][v],10))?u[r][v]/c:0,x.push((a[r]||y)/l+f)),v=r;return x},jL=nm.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return nm.processArabic&&(n=nm.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:E2.apply(this,arguments).reduce(function(o,s){return o+s},0)},qL=function(n,e,t,r){for(var i=[],o=0,s=n.length,a=0;o!==s&&a+e[o]<t;)a+=e[o],o++;i.push(n.slice(0,o));var l=o;for(a=0;o!==s;)a+e[o]>r&&(i.push(n.slice(l,o)),a=0,l=o),a+=e[o],o++;return l!==o&&i.push(n.slice(l,o)),i},$L=function(n,e,t){t||(t={});var r,i,o,s,a,l,u,c=[],h=[c],f=t.textIndent||0,d=0,v=0,y=n.split(" "),x=E2.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?y[0].length+2:t.lineIndent||0){var g=Array(l).join(" "),S=[];y.map(function(E){(E=E.split(/\s*\n/)).length>1?S=S.concat(E.map(function(C,I){return(I&&C.length?`
`:"")+C})):S.push(E[0])}),y=S,l=jL.apply(this,[g,t])}for(o=0,s=y.length;o<s;o++){var _=0;if(r=y[o],l&&r[0]==`
`&&(r=r.substr(1),_=1),f+d+(v=(i=E2.apply(this,[r,t])).reduce(function(E,C){return E+C},0))>e||_){if(v>e){for(a=qL.apply(this,[r,i,e-(f+d),e]),c.push(a.shift()),c=[a.pop()];a.length;)h.push([a.shift()]);v=i.slice(r.length-(c[0]?c[0].length:0)).reduce(function(E,C){return E+C},0)}else c=[r];h.push(c),f=v+l,d=x}else c.push(r),f+=d+v,d=x}return u=l?function(E,C){return(C?g:"")+E.join(" ")}:function(E){return E.join(" ")},h.map(u)},nm.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),o=function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var h=this.internal.getFont(c.fontName,c.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=t.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat($L.apply(this,[r[a],s,o]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var o=function(h){return"0x"+parseInt(h,10).toString(16)},s=n.__fontmetrics__.compress=function(h){var f,d,v,y,x=["{"];for(var g in h){if(f=h[g],isNaN(parseInt(g,10))?d="'"+g+"'":(g=parseInt(g,10),d=(d=o(g).slice(2)).slice(0,-1)+r[d.slice(-1)]),typeof f=="number")f<0?(v=o(f).slice(3),y="-"):(v=o(f).slice(2),y=""),v=y+v.slice(0,-1)+r[v.slice(-1)];else{if(Br(f)!=="object")throw new Error("Don't know what to do with value type "+Br(f)+".");v=s(f)}x.push(d+v)}return x.push("}"),x.join("")},a=n.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,d,v,y,x={},g=1,S=x,_=[],E="",C="",I=h.length-1,F=1;F<I;F+=1)(y=h[F])=="'"?f?(v=f.join(""),f=void 0):f=[]:f?f.push(y):y=="{"?(_.push([S,v]),S={},v=void 0):y=="}"?((d=_.pop())[0][d[1]]=S,v=void 0,S=d[0]):y=="-"?g=-1:v===void 0?t.hasOwnProperty(y)?(E+=t[y],v=parseInt(E,16)*g,g=1,E=""):E+=y:t.hasOwnProperty(y)?(C+=t[y],S[v]=parseInt(C,16)*g,g=1,v=void 0,C=""):C+=y;return x},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},c={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(h){var f=h.font,d=c.Unicode[f.postScriptName];d&&(f.metadata.Unicode={},f.metadata.Unicode.widths=d.widths,f.metadata.Unicode.kerning=d.kerning);var v=u.Unicode[f.postScriptName];v&&(f.metadata.Unicode.encoding=v,f.encoding=v.codePages[0])}])}(vn.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=t.charCodeAt(o);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,o=t.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(rv(a)),s.metadata=n.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])}(vn),function(n){function e(){return(_n.canvg?Promise.resolve(_n.canvg):Ox(()=>import("./index.es-53acfb84.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}vn.API.addSvgAsImage=function(t,r,i,o,s,a,l,u){if(isNaN(r)||isNaN(i))throw Wr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(s))throw Wr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=o,c.height=s;var h=c.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,c.width,c.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return e().then(function(v){return v.fromString(h,t,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(f)}).then(function(){d.addImage(c.toDataURL("image/jpeg",1),r,i,o,s,l,u)})}}(),vn.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},vn.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),l=[],u=0,c=0,h=0;function f(v,y){var x,g=!1;for(x=0;x<v.length;x+=1)v[x]===y&&(g=!0);return g}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var d=a.length;for(h=0;h<d;h+=1)t[a[h]].value=t[a[h]].defaultValue,t[a[h]].explicitSet=!1}if(Br(n)==="object"){for(i in n)if(o=n[i],f(a,i)&&o!==void 0){if(t[i].type==="boolean"&&typeof o=="boolean")t[i].value=o;else if(t[i].type==="name"&&f(t[i].valueSet,o))t[i].value=o;else if(t[i].type==="integer"&&Number.isInteger(o))t[i].value=o;else if(t[i].type==="array"){for(u=0;u<o.length;u+=1)if(r=!0,o[u].length===1&&typeof o[u][0]=="number")l.push(String(o[u]-1));else if(o[u].length>1){for(c=0;c<o[u].length;c+=1)typeof o[u][c]!="number"&&(r=!1);r===!0&&l.push([o[u][0]-1,o[u][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,y=[];for(v in t)t[v].explicitSet===!0&&(t[v].type==="name"?y.push("/"+v+" /"+t[v].value):y.push("/"+v+" "+t[v].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=o.length+s.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(vn.API),function(n){var e=n.API,t=e.pdfEscape16=function(o,s){for(var a,l=s.metadata.Unicode.widths,u=["","0","00","000","0000"],c=[""],h=0,f=o.length;h<f;++h){if(a=s.metadata.characterToGlyph(o.charCodeAt(h)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(h),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return c.join("");a=a.toString(16),c.push(u[4-a.length],a)}return c.join("")},r=function(o){var s,a,l,u,c,h,f;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,f=(a=Object.keys(o).sort(function(d,v){return d-v})).length;h<f;h++)s=a[h],l.length>=100&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(u=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+u+">"));return l.length&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),c+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,u=s.newObject,c=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var h=a.metadata.Unicode.widths,f=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),d="",v=0;v<f.length;v++)d+=String.fromCharCode(f[v]);var y=u();c({data:d,addLength1:!0,objectId:y}),l("endobj");var x=u();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var g=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+hm(a.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var S=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+hm(a.fontName)),l("/FontDescriptor "+g+" 0 R"),l("/W "+n.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+x+" 0 R"),l("/BaseFont /"+hm(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+S+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,u=s.newObject,c=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var h=a.metadata.rawData,f="",d=0;d<h.length;d++)f+=String.fromCharCode(h[d]);var v=u();c({data:f,addLength1:!0,objectId:v}),l("endobj");var y=u();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var x=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+v+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+hm(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var g=0;g<a.metadata.hmtx.widths.length;g++)a.metadata.hmtx.widths[g]=parseInt(a.metadata.hmtx.widths[g]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+hm(a.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",l=o.x,u=o.y,c=o.options||{},h=o.mutex||{},f=h.pdfEscape,d=h.activeFontKey,v=h.fonts,y=d,x="",g=0,S="",_=v[y].encoding;if(v[y].encoding!=="Identity-H")return{text:a,x:l,y:u,options:c,mutex:h};for(S=a,y=d,Array.isArray(a)&&(S=a[0]),g=0;g<S.length;g+=1)v[y].metadata.hasOwnProperty("cmap")&&(s=v[y].metadata.cmap.unicode.codeMap[S[g].charCodeAt(0)]),s||S[g].charCodeAt(0)<256&&v[y].metadata.hasOwnProperty("Unicode")?x+=S[g]:x+="";var E="";return parseInt(y.slice(1))<14||_==="WinAnsiEncoding"?E=f(x,y).split("").map(function(C){return C.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(E=t(x,v[y])),h.isHex=!0,{text:E,x:l,y:u,options:c,mutex:h}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],l={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var u=0;for(u=0;u<s.length;u+=1)Array.isArray(s[u])&&s[u].length===3?a.push([i(Object.assign({},l,{text:s[u][0]})).text,s[u][1],s[u][2]]):a.push(i(Object.assign({},l,{text:s[u]})).text);o.text=a}else o.text=i(Object.assign({},l,{text:s})).text}])}(vn),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(vn.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,o,s,a,l,u,c,h=e,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,_=0;this.__bidiEngine__={};var E=function(N){var z=N.charCodeAt(),H=z>>8,G=y[H];return G!==void 0?h[256*G+(255&z)]:H===252||H===253?"AL":g.test(H)?"L":H===8?"R":"N"},C=function(N){for(var z,H=0;H<N.length;H++){if((z=E(N.charAt(H)))==="L")return!1;if(z==="R")return!0}return!1},I=function(N,z,H,G){var K,ee,le,V,J=z[G];switch(J){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(J="AN");break;case"AL":S=!0,J="R";break;case"WS":J="N";break;case"CS":G<1||G+1>=z.length||(K=H[G-1])!=="EN"&&K!=="AN"||(ee=z[G+1])!=="EN"&&ee!=="AN"?J="N":S&&(ee="AN"),J=ee===K?ee:"N";break;case"ES":J=(K=G>0?H[G-1]:"B")==="EN"&&G+1<z.length&&z[G+1]==="EN"?"EN":"N";break;case"ET":if(G>0&&H[G-1]==="EN"){J="EN";break}if(S){J="N";break}for(le=G+1,V=z.length;le<V&&z[le]==="ET";)le++;J=le<V&&z[le]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(V=z.length,le=G+1;le<V&&z[le]==="NSM";)le++;if(le<V){var j=N[G],ie=j>=1425&&j<=2303||j===64286;if(K=z[le],ie&&(K==="R"||K==="AL")){J="R";break}}}J=G<1||(K=z[G-1])==="B"?"N":H[G-1];break;case"B":S=!1,i=!0,J=_;break;case"S":o=!0,J="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":J="N"}return J},F=function(N,z,H){var G=N.split("");return H&&R(G,H,{hiLevel:_}),G.reverse(),z&&z.reverse(),G.join("")},R=function(N,z,H){var G,K,ee,le,V,J=-1,j=N.length,ie=0,D=[],q=_?d:f,Z=[];for(S=!1,i=!1,o=!1,K=0;K<j;K++)Z[K]=E(N[K]);for(ee=0;ee<j;ee++){if(V=ie,D[ee]=I(N,Z,D,ee),G=240&(ie=q[V][v[D[ee]]]),ie&=15,z[ee]=le=q[ie][5],G>0)if(G===16){for(K=J;K<ee;K++)z[K]=1;J=-1}else J=-1;if(q[ie][6])J===-1&&(J=ee);else if(J>-1){for(K=J;K<ee;K++)z[K]=le;J=-1}Z[ee]==="B"&&(z[ee]=0),H.hiLevel|=le}o&&function(Q,se,me){for(var Se=0;Se<me;Se++)if(Q[Se]==="S"){se[Se]=_;for(var Ce=Se-1;Ce>=0&&Q[Ce]==="WS";Ce--)se[Ce]=_}}(Z,z,j)},k=function(N,z,H,G,K){if(!(K.hiLevel<N)){if(N===1&&_===1&&!i)return z.reverse(),void(H&&H.reverse());for(var ee,le,V,J,j=z.length,ie=0;ie<j;){if(G[ie]>=N){for(V=ie+1;V<j&&G[V]>=N;)V++;for(J=ie,le=V-1;J<le;J++,le--)ee=z[J],z[J]=z[le],z[le]=ee,H&&(ee=H[J],H[J]=H[le],H[le]=ee);ie=V}ie++}}},L=function(N,z,H){var G=N.split(""),K={hiLevel:_};return H||(H=[]),R(G,H,K),function(ee,le,V){if(V.hiLevel!==0&&c)for(var J,j=0;j<ee.length;j++)le[j]===1&&(J=x.indexOf(ee[j]))>=0&&(ee[j]=x[J+1])}(G,H,K),k(2,G,z,H,K),k(1,G,z,H,K),G.join("")};return this.__bidiEngine__.doBidiReorder=function(N,z,H){if(function(K,ee){if(ee)for(var le=0;le<K.length;le++)ee[le]=le;a===void 0&&(a=C(K)),u===void 0&&(u=C(K))}(N,z),s||!l||u)if(s&&l&&a^u)_=a?1:0,N=F(N,z,H);else if(!s&&l&&u)_=a?1:0,N=L(N,z,H),N=F(N,z);else if(!s||a||l||u){if(s&&!l&&a^u)N=F(N,z),a?(_=0,N=L(N,z,H)):(_=1,N=L(N,z,H),N=F(N,z));else if(s&&a&&!l&&u)_=1,N=L(N,z,H),N=F(N,z);else if(!s&&!l&&a^u){var G=c;a?(_=1,N=L(N,z,H),_=0,c=!1,N=L(N,z,H),c=G):(_=0,N=L(N,z,H),N=F(N,z),_=1,c=!1,N=L(N,z,H),c=G,N=F(N,z))}}else _=0,N=L(N,z,H);else _=a?1:0,N=L(N,z,H);return N},this.__bidiEngine__.setOptions=function(N){N&&(s=N.isInputVisual,l=N.isOutputVisual,a=N.isInputRtl,u=N.isOutputRtl,c=N.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var s=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([t.doBidiReorder(i[a])]);r.text=s}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(vn),vn.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new mf(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new one(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new jte(this.contents),this.head=new $te(this),this.name=new Jte(this),this.cmap=new wO(this),this.toUnicode={},this.hhea=new Xte(this),this.maxp=new Qte(this),this.hmtx=new ene(this),this.post=new Zte(this),this.os2=new Yte(this),this.loca=new ine(this),this.glyf=new tne(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var s,a,l,u;for(u=[],s=0,a=(l=this.bbox).length;s<a;s++)e=l[s],u.push(Math.round(e*this.scaleFactor));return u}.call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return s*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var ou,mf=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,o,s,a,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*o+65536*s+256*a+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)t=e[r],o.push(this.writeByte(t));return o},n}(),jte=function(){var n;function e(t){var r,i,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,o,s,a,l,u,c,h,f,d,v,y;for(y in d=Object.keys(t).length,l=Math.log(2),h=16*Math.floor(Math.log(d)/l),s=Math.floor(h/l),c=16*d-h,(i=new mf).writeInt(this.scalarType),i.writeShort(d),i.writeShort(h),i.writeShort(s),i.writeShort(c),o=16*d,u=i.pos+o,a=null,v=[],t)for(f=t[y],i.writeString(y),i.writeInt(n(f)),i.writeInt(u),i.writeInt(f.length),v=v.concat(f),y==="head"&&(a=u),u+=f.length;u%4;)v.push(0),u++;return i.write(v),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,o,s;for(t=SO.call(t);t.length%4;)t.push(0);for(o=new mf(t),i=0,r=0,s=t.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},e}(),qte={}.hasOwnProperty,zu=function(n,e){for(var t in e)qte.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};ou=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var $te=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return zu(e,ou),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new mf).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),ZL=function(){function n(e,t){var r,i,o,s,a,l,u,c,h,f,d,v,y,x,g,S,_;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(d=e.readUInt16(),f=d/2,e.pos+=6,o=function(){var E,C;for(C=[],l=E=0;0<=f?E<f:E>f;l=0<=f?++E:--E)C.push(e.readUInt16());return C}(),e.pos+=2,y=function(){var E,C;for(C=[],l=E=0;0<=f?E<f:E>f;l=0<=f?++E:--E)C.push(e.readUInt16());return C}(),u=function(){var E,C;for(C=[],l=E=0;0<=f?E<f:E>f;l=0<=f?++E:--E)C.push(e.readUInt16());return C}(),c=function(){var E,C;for(C=[],l=E=0;0<=f?E<f:E>f;l=0<=f?++E:--E)C.push(e.readUInt16());return C}(),i=(this.length-e.pos+this.offset)/2,a=function(){var E,C;for(C=[],l=E=0;0<=i?E<i:E>i;l=0<=i?++E:--E)C.push(e.readUInt16());return C}(),l=g=0,_=o.length;g<_;l=++g)for(x=o[l],r=S=v=y[l];v<=x?S<=x:S>=x;r=v<=x?++S:--S)c[l]===0?s=r+u[l]:(s=a[c[l]/2+(r-v)-(f-l)]||0)!==0&&(s+=u[l]),this.codeMap[r]=65535&s}e.pos=h}return n.encode=function(e,t){var r,i,o,s,a,l,u,c,h,f,d,v,y,x,g,S,_,E,C,I,F,R,k,L,N,z,H,G,K,ee,le,V,J,j,ie,D,q,Z,Q,se,me,Se,Ce,$e,ke,fe;switch(G=new mf,s=Object.keys(e).sort(function(Ie,Ue){return Ie-Ue}),t){case"macroman":for(y=0,x=function(){var Ie=[];for(v=0;v<256;++v)Ie.push(0);return Ie}(),S={0:0},o={},K=0,J=s.length;K<J;K++)S[Ce=e[i=s[K]]]==null&&(S[Ce]=++y),o[i]={old:e[i],new:S[e[i]]},x[i]=S[e[i]];return G.writeUInt16(1),G.writeUInt16(0),G.writeUInt32(12),G.writeUInt16(0),G.writeUInt16(262),G.writeUInt16(0),G.write(x),{charMap:o,subtable:G.data,maxGlyphID:y+1};case"unicode":for(z=[],h=[],_=0,S={},r={},g=u=null,ee=0,j=s.length;ee<j;ee++)S[C=e[i=s[ee]]]==null&&(S[C]=++_),r[i]={old:C,new:S[C]},a=S[C]-i,g!=null&&a===u||(g&&h.push(g),z.push(i),u=a),g=i;for(g&&h.push(g),h.push(65535),z.push(65535),L=2*(k=z.length),R=2*Math.pow(Math.log(k)/Math.LN2,2),f=Math.log(R/2)/Math.LN2,F=2*k-R,l=[],I=[],d=[],v=le=0,ie=z.length;le<ie;v=++le){if(N=z[v],c=h[v],N===65535){l.push(0),I.push(0);break}if(N-(H=r[N].new)>=32768)for(l.push(0),I.push(2*(d.length+k-v)),i=V=N;N<=c?V<=c:V>=c;i=N<=c?++V:--V)d.push(r[i].new);else l.push(H-N),I.push(0)}for(G.writeUInt16(3),G.writeUInt16(1),G.writeUInt32(12),G.writeUInt16(4),G.writeUInt16(16+8*k+2*d.length),G.writeUInt16(0),G.writeUInt16(L),G.writeUInt16(R),G.writeUInt16(f),G.writeUInt16(F),me=0,D=h.length;me<D;me++)i=h[me],G.writeUInt16(i);for(G.writeUInt16(0),Se=0,q=z.length;Se<q;Se++)i=z[Se],G.writeUInt16(i);for($e=0,Z=l.length;$e<Z;$e++)a=l[$e],G.writeUInt16(a);for(ke=0,Q=I.length;ke<Q;ke++)E=I[ke],G.writeUInt16(E);for(fe=0,se=d.length;fe<se;fe++)y=d[fe],G.writeUInt16(y);return{charMap:r,subtable:G.data,maxGlyphID:_+1}}},n}(),wO=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return zu(e,ou),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,o;for(t.pos=this.offset,this.version=t.readUInt16(),o=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)r=new ZL(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,o;return r==null&&(r="macroman"),i=ZL.encode(t,r),(o=new mf).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},e}(),Xte=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return zu(e,ou),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),Yte=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return zu(e,ou),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),Zte=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return zu(e,ou),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,o;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var s;for(i=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],o=[];t.pos<this.offset+this.length;)r=t.readByte(),o.push(this.names.push(t.readString(r)));return o;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=function(){var a,l,u;for(u=[],s=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;s=0<=l?++a:--a)u.push(t.readUInt32());return u}.call(this)}},e}(),Kte=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},Jte=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return zu(e,ou),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,o,s,a,l,u,c,h,f,d;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),i=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(u={},s=h=0,f=i.length;h<f;s=++h)o=i[s],t.pos=o.offset,c=t.readString(o.length),a=new Kte(c,o),u[d=o.nameID]==null&&(u[d]=[]),u[o.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),Qte=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return zu(e,ou),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),ene=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return zu(e,ou),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,o,s,a,l,u;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,h;for(h=[],r=c=0;0<=o?c<o:c>o;r=0<=o?++c:--c)h.push(t.readInt16());return h}(),this.widths=function(){var c,h,f,d;for(d=[],c=0,h=(f=this.metrics).length;c<h;c++)s=f[c],d.push(s.advance);return d}.call(this),i=this.widths[this.widths.length-1],u=[],r=a=0;0<=o?a<o:a>o;r=0<=o?++a:--a)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),SO=[].slice,tne=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return zu(e,ou),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,o,s,a,l,u,c,h,f;return t in this.cache?this.cache[t]:(s=this.file.loca,r=this.file.contents,i=s.indexOf(t),(o=s.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,a=(l=new mf(r.read(o))).readShort(),c=l.readShort(),f=l.readShort(),u=l.readShort(),h=l.readShort(),this.cache[t]=a===-1?new rne(l,c,f,u,h):new nne(l,a,c,f,u,h),this.cache[t]))},e.prototype.encode=function(t,r,i){var o,s,a,l,u;for(a=[],s=[],l=0,u=r.length;l<u;l++)o=t[r[l]],s.push(a.length),o&&(a=a.concat(o.encode(i)));return s.push(a.length),{table:a,offsets:s}},e}(),nne=function(){function n(e,t,r,i,o,s){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),rne=function(){function n(e,t,r,i,o){var s,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new mf(SO.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),ine=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return zu(e,ou),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=2)s.push(2*t.readUInt16());return s}.call(this):function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=4)s.push(t.readUInt32());return s}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),o=0,s=0,a=0;a<i.length;++a)if(i[a]=o,s<r.length&&r[s]==a){++s,i[a]=o;var l=this.offsets[a],u=this.offsets[a+1]-l;u>0&&(o+=u)}for(var c=new Array(4*i.length),h=0;h<i.length;++h)c[4*h+3]=255&i[h],c[4*h+2]=(65280&i[h])>>8,c[4*h+1]=(16711680&i[h])>>16,c[4*h]=(4278190080&i[h])>>24;return c},e}(),one=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,o;for(t in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,o,s,a,l;for(i={},s=0,a=e.length;s<a;s++)i[o=e[s]]=this.font.glyf.glyphFor(o);for(o in t=[],i)(r=i[o])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(o in l=this.glyphsFor(t))r=l[o],i[o]=r;return i},n.prototype.encode=function(e,t){var r,i,o,s,a,l,u,c,h,f,d,v,y,x,g;for(i in r=wO.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),d={0:0},g=r.charMap)d[(l=g[i]).old]=l.new;for(v in f=r.maxGlyphID,s)v in d||(d[v]=f++);return c=function(S){var _,E;for(_ in E={},S)E[S[_]]=_;return E}(d),h=Object.keys(c).sort(function(S,_){return S-_}),y=function(){var S,_,E;for(E=[],S=0,_=h.length;S<_;S++)a=h[S],E.push(c[a]);return E}(),o=this.font.glyf.encode(s,y,d),u=this.font.loca.encode(o.offsets,y),x={cmap:this.font.cmap.raw(),glyf:o.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},n}();vn.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,o,s;if(Array.isArray(t))return"["+function(){var a,l,u;for(u=[],a=0,l=t.length;a<l;a++)r=t[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in o=["<<"],t)s=t[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+t},e}();/*! https://mths.be/cssesc v3.0.0 by @mathias */var sne={},ane=sne.hasOwnProperty,lne=function(e,t){if(!e)return t;var r={};for(var i in t)r[i]=ane.call(e,i)?e[i]:t[i];return r},une=/[ -,\.\/:-@\[-\^`\{-~]/,cne=/[ -,\.\/:-@\[\]\^`\{-~]/,hne=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,qA=function n(e,t){t=lne(t,n.options),t.quotes!="single"&&t.quotes!="double"&&(t.quotes="single");for(var r=t.quotes=="double"?'"':"'",i=t.isIdentifier,o=e.charAt(0),s="",a=0,l=e.length;a<l;){var u=e.charAt(a++),c=u.charCodeAt(),h=void 0;if(c<32||c>126){if(c>=55296&&c<=56319&&a<l){var f=e.charCodeAt(a++);(f&64512)==56320?c=((c&1023)<<10)+(f&1023)+65536:a--}h="\\"+c.toString(16).toUpperCase()+" "}else t.escapeEverything?une.test(u)?h="\\"+u:h="\\"+c.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(u)?h="\\"+c.toString(16).toUpperCase()+" ":u=="\\"||!i&&(u=='"'&&r==u||u=="'"&&r==u)||i&&cne.test(u)?h="\\"+u:h=u;s+=h}return i&&(/^-[-\d]/.test(s)?s="\\-"+s.slice(1):/\d/.test(o)&&(s="\\3"+o+" "+s.slice(1))),s=s.replace(hne,function(d,v,y){return v&&v.length%2?d:(v||"")+y}),!i&&t.wrap?r+s+r:s};qA.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1};qA.version="3.0.0";var _O=qA,S0=0,Lb=1,KL=2,A2=3,JL=4,QL=5,e4=6,kb=/[a-z0-9_-]/i,T2=/[\s\t]/,fne=function(n){for(var e=!0,t=S0,r="",i=0,o,s,a=[];;){if(s=n[i],t===S0){if(!s&&e)break;if(!s&&!e)throw new Error("Parse error");if(s==='"'||s==="'")o=s,t=Lb,e=!1;else if(!T2.test(s))if(kb.test(s))t=A2,e=!1,i--;else throw new Error("Parse error")}else if(t===Lb)if(s)s==="\\"?t=KL:s===o?(a.push(r),r="",t=JL):r+=s;else throw new Error("Parse Error");else if(t===KL)if(s===o||s==="\\")r+=s,t=Lb;else throw new Error("Parse error");else if(t===A2)if(s)kb.test(s)?r+=s:s===","?(a.push(r),r="",t=S0):T2.test(s)?t=QL:s==="\\"&&(t=e4);else{a.push(r);break}else if(t===e4){if(/[0-9a-f]/i.test(s))throw new Error("Parse error");r+=s,t=A2}else if(t===QL)if(s){if(kb.test(s))r+=" "+s,t=A2;else if(s===",")a.push(r),r="",t=S0;else if(!T2.test(s))throw new Error("Parse error")}else{a.push(r);break}else if(t===JL)if(s){if(s===",")t=S0;else if(!T2.test(s))throw new Error("Parse error")}else break;i++}return a},dne=/[^a-z0-9_-]/i,pne=function(n,e){var t=e&&e.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Quote must be `'` or `\"`");for(var r=new RegExp(t,"g"),i=[],o=0;o<n.length;++o){var s=n[o];dne.test(s)&&(s=s.replace(/\\/g,"\\\\").replace(r,"\\"+t),s=t+s+t),i.push(s)}return i.join(", ")},mne={parse:fne,stringify:pne},fE={},gne={get exports(){return fE},set exports(n){fE=n}},hx={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},vne=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function yne(n){return n===10||n===13||n===8232||n===8233||n===32||n===9||n===11||n===12||n===160||n>=5760&&vne.indexOf(n)>=0}function xne(n){switch(n|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function wne(n){return(n|32)===97}function rm(n){return n>=48&&n<=57}function Sne(n){return n>=48&&n<=57||n===43||n===45||n===46}function _ne(n){this.index=0,this.path=n,this.max=n.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function fx(n){for(;n.index<n.max&&yne(n.path.charCodeAt(n.index));)n.index++}function bne(n){var e=n.path.charCodeAt(n.index);if(e===48){n.param=0,n.index++;return}if(e===49){n.param=1,n.index++;return}n.err="SvgPath: arc flag can be 0 or 1 only (at pos "+n.index+")"}function Mne(n){var e=n.index,t=e,r=n.max,i=!1,o=!1,s=!1,a=!1,l;if(t>=r){n.err="SvgPath: missed param (at pos "+t+")";return}if(l=n.path.charCodeAt(t),(l===43||l===45)&&(t++,l=t<r?n.path.charCodeAt(t):0),!rm(l)&&l!==46){n.err="SvgPath: param should start with 0..9 or `.` (at pos "+t+")";return}if(l!==46){if(i=l===48,t++,l=t<r?n.path.charCodeAt(t):0,i&&t<r&&l&&rm(l)){n.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+e+")";return}for(;t<r&&rm(n.path.charCodeAt(t));)t++,o=!0;l=t<r?n.path.charCodeAt(t):0}if(l===46){for(a=!0,t++;rm(n.path.charCodeAt(t));)t++,s=!0;l=t<r?n.path.charCodeAt(t):0}if(l===101||l===69){if(a&&!o&&!s){n.err="SvgPath: invalid float exponent (at pos "+t+")";return}if(t++,l=t<r?n.path.charCodeAt(t):0,(l===43||l===45)&&t++,t<r&&rm(n.path.charCodeAt(t)))for(;t<r&&rm(n.path.charCodeAt(t));)t++;else{n.err="SvgPath: invalid float exponent (at pos "+t+")";return}}n.index=t,n.param=parseFloat(n.path.slice(e,t))+0}function Ib(n){var e,t;e=n.path[n.segmentStart],t=e.toLowerCase();var r=n.data;if(t==="m"&&r.length>2&&(n.result.push([e,r[0],r[1]]),r=r.slice(2),t="l",e=e==="m"?"l":"L"),t==="r")n.result.push([e].concat(r));else for(;r.length>=hx[t]&&(n.result.push([e].concat(r.splice(0,hx[t]))),!!hx[t]););}function Ene(n){var e=n.max,t,r,i,o,s;if(n.segmentStart=n.index,t=n.path.charCodeAt(n.index),r=wne(t),!xne(t)){n.err="SvgPath: bad command "+n.path[n.index]+" (at pos "+n.index+")";return}if(o=hx[n.path[n.index].toLowerCase()],n.index++,fx(n),n.data=[],!o){Ib(n);return}for(i=!1;;){for(s=o;s>0;s--){if(r&&(s===3||s===4)?bne(n):Mne(n),n.err.length){Ib(n);return}n.data.push(n.param),fx(n),i=!1,n.index<e&&n.path.charCodeAt(n.index)===44&&(n.index++,fx(n),i=!0)}if(!i&&(n.index>=n.max||!Sne(n.path.charCodeAt(n.index))))break}Ib(n)}var Ane=function(e){var t=new _ne(e),r=t.max;for(fx(t);t.index<r&&!t.err.length;)Ene(t);return t.result.length&&("mM".indexOf(t.result[0][0])<0?(t.err="SvgPath: string should start with `M` or `m`",t.result=[]):t.result[0][0]="M"),{err:t.err,segments:t.result}};function Tne(n,e){return[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],n[0]*e[4]+n[2]*e[5]+n[4],n[1]*e[4]+n[3]*e[5]+n[5]]}function Yl(){if(!(this instanceof Yl))return new Yl;this.queue=[],this.cache=null}Yl.prototype.matrix=function(n){return n[0]===1&&n[1]===0&&n[2]===0&&n[3]===1&&n[4]===0&&n[5]===0?this:(this.cache=null,this.queue.push(n),this)};Yl.prototype.translate=function(n,e){return(n!==0||e!==0)&&(this.cache=null,this.queue.push([1,0,0,1,n,e])),this};Yl.prototype.scale=function(n,e){return(n!==1||e!==1)&&(this.cache=null,this.queue.push([n,0,0,e,0,0])),this};Yl.prototype.rotate=function(n,e,t){var r,i,o;return n!==0&&(this.translate(e,t),r=n*Math.PI/180,i=Math.cos(r),o=Math.sin(r),this.queue.push([i,o,-o,i,0,0]),this.cache=null,this.translate(-e,-t)),this};Yl.prototype.skewX=function(n){return n!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(n*Math.PI/180),1,0,0])),this};Yl.prototype.skewY=function(n){return n!==0&&(this.cache=null,this.queue.push([1,Math.tan(n*Math.PI/180),0,1,0,0])),this};Yl.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var n=1;n<this.queue.length;n++)this.cache=Tne(this.cache,this.queue[n]);return this.cache};Yl.prototype.calc=function(n,e,t){var r;return this.queue.length?(this.cache||(this.cache=this.toArray()),r=this.cache,[n*r[0]+e*r[2]+(t?0:r[4]),n*r[1]+e*r[3]+(t?0:r[5])]):[n,e]};var bO=Yl,Cne=bO,Pne={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},Rne=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,Lne=/[\s,]+/,kne=function(e){var t=new Cne,r,i;return e.split(Rne).forEach(function(o){if(o.length){if(typeof Pne[o]<"u"){r=o;return}switch(i=o.split(Lne).map(function(s){return+s||0}),r){case"matrix":i.length===6&&t.matrix(i);return;case"scale":i.length===1?t.scale(i[0],i[0]):i.length===2&&t.scale(i[0],i[1]);return;case"rotate":i.length===1?t.rotate(i[0],0,0):i.length===3&&t.rotate(i[0],i[1],i[2]);return;case"translate":i.length===1?t.translate(i[0],0):i.length===2&&t.translate(i[0],i[1]);return;case"skewX":i.length===1&&t.skewX(i[0]);return;case"skewY":i.length===1&&t.skewY(i[0]);return}}}),t},iv=Math.PI*2;function t4(n,e,t,r){var i=n*r-e*t<0?-1:1,o=n*t+e*r;return o>1&&(o=1),o<-1&&(o=-1),i*Math.acos(o)}function Ine(n,e,t,r,i,o,s,a,l,u){var c=u*(n-t)/2+l*(e-r)/2,h=-l*(n-t)/2+u*(e-r)/2,f=s*s,d=a*a,v=c*c,y=h*h,x=f*d-f*y-d*v;x<0&&(x=0),x/=f*y+d*v,x=Math.sqrt(x)*(i===o?-1:1);var g=x*s/a*h,S=x*-a/s*c,_=u*g-l*S+(n+t)/2,E=l*g+u*S+(e+r)/2,C=(c-g)/s,I=(h-S)/a,F=(-c-g)/s,R=(-h-S)/a,k=t4(1,0,C,I),L=t4(C,I,F,R);return o===0&&L>0&&(L-=iv),o===1&&L<0&&(L+=iv),[_,E,k,L]}function Nne(n,e){var t=1.3333333333333333*Math.tan(e/4),r=Math.cos(n),i=Math.sin(n),o=Math.cos(n+e),s=Math.sin(n+e);return[r,i,r-i*t,i+r*t,o+s*t,s-o*t,o,s]}var Fne=function(e,t,r,i,o,s,a,l,u){var c=Math.sin(u*iv/360),h=Math.cos(u*iv/360),f=h*(e-r)/2+c*(t-i)/2,d=-c*(e-r)/2+h*(t-i)/2;if(f===0&&d===0)return[];if(a===0||l===0)return[];a=Math.abs(a),l=Math.abs(l);var v=f*f/(a*a)+d*d/(l*l);v>1&&(a*=Math.sqrt(v),l*=Math.sqrt(v));var y=Ine(e,t,r,i,o,s,a,l,c,h),x=[],g=y[2],S=y[3],_=Math.max(Math.ceil(Math.abs(S)/(iv/4)),1);S/=_;for(var E=0;E<_;E++)x.push(Nne(g,S)),g+=S;return x.map(function(C){for(var I=0;I<C.length;I+=2){var F=C[I+0],R=C[I+1];F*=a,R*=l;var k=h*F-c*R,L=c*F+h*R;C[I+0]=k+y[0],C[I+1]=L+y[1]}return C})},ov=1e-10,n4=Math.PI/180;function n1(n,e,t){if(!(this instanceof n1))return new n1(n,e,t);this.rx=n,this.ry=e,this.ax=t}n1.prototype.transform=function(n){var e=Math.cos(this.ax*n4),t=Math.sin(this.ax*n4),r=[this.rx*(n[0]*e+n[2]*t),this.rx*(n[1]*e+n[3]*t),this.ry*(-n[0]*t+n[2]*e),this.ry*(-n[1]*t+n[3]*e)],i=r[0]*r[0]+r[2]*r[2],o=r[1]*r[1]+r[3]*r[3],s=((r[0]-r[3])*(r[0]-r[3])+(r[2]+r[1])*(r[2]+r[1]))*((r[0]+r[3])*(r[0]+r[3])+(r[2]-r[1])*(r[2]-r[1])),a=(i+o)/2;if(s<ov*a)return this.rx=this.ry=Math.sqrt(a),this.ax=0,this;var l=r[0]*r[1]+r[2]*r[3];s=Math.sqrt(s);var u=a+s/2,c=a-s/2;return this.ax=Math.abs(l)<ov&&Math.abs(u-o)<ov?90:Math.atan(Math.abs(l)>Math.abs(u-o)?(u-i)/l:l/(u-o))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(u),this.ry=Math.sqrt(c)):(this.ax+=90,this.rx=Math.sqrt(c),this.ry=Math.sqrt(u)),this};n1.prototype.isDegenerate=function(){return this.rx<ov*this.ry||this.ry<ov*this.rx};var Dne=n1,One=Ane,Bne=kne,Tf=bO,Une=Fne,zne=Dne;function Mi(n){if(!(this instanceof Mi))return new Mi(n);var e=One(n);this.segments=e.segments,this.err=e.err,this.__stack=[]}Mi.from=function(n){if(typeof n=="string")return new Mi(n);if(n instanceof Mi){var e=new Mi("");return e.err=n.err,e.segments=n.segments.map(function(t){return t.slice()}),e.__stack=n.__stack.map(function(t){return Tf().matrix(t.toArray())}),e}throw new Error("SvgPath.from: invalid param type "+n)};Mi.prototype.__matrix=function(n){var e=this,t;n.queue.length&&this.iterate(function(r,i,o,s){var a,l,u,c;switch(r[0]){case"v":a=n.calc(0,r[1],!0),l=a[0]===0?["v",a[1]]:["l",a[0],a[1]];break;case"V":a=n.calc(o,r[1],!1),l=a[0]===n.calc(o,s,!1)[0]?["V",a[1]]:["L",a[0],a[1]];break;case"h":a=n.calc(r[1],0,!0),l=a[1]===0?["h",a[0]]:["l",a[0],a[1]];break;case"H":a=n.calc(r[1],s,!1),l=a[1]===n.calc(o,s,!1)[1]?["H",a[0]]:["L",a[0],a[1]];break;case"a":case"A":var h=n.toArray(),f=zne(r[1],r[2],r[3]).transform(h);if(h[0]*h[3]-h[1]*h[2]<0&&(r[5]=r[5]?"0":"1"),a=n.calc(r[6],r[7],r[0]==="a"),r[0]==="A"&&r[6]===o&&r[7]===s||r[0]==="a"&&r[6]===0&&r[7]===0){l=[r[0]==="a"?"l":"L",a[0],a[1]];break}f.isDegenerate()?l=[r[0]==="a"?"l":"L",a[0],a[1]]:l=[r[0],f.rx,f.ry,f.ax,r[4],r[5],a[0],a[1]];break;case"m":c=i>0,a=n.calc(r[1],r[2],c),l=["m",a[0],a[1]];break;default:for(u=r[0],l=[u],c=u.toLowerCase()===u,t=1;t<r.length;t+=2)a=n.calc(r[t],r[t+1],c),l.push(a[0],a[1])}e.segments[i]=l},!0)};Mi.prototype.__evaluateStack=function(){var n,e;if(this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(n=Tf(),e=this.__stack.length;--e>=0;)n.matrix(this.__stack[e].toArray());this.__matrix(n),this.__stack=[]}};Mi.prototype.toString=function(){var n="",e="",t=!1;this.__evaluateStack();for(var r=0,i=this.segments.length;r<i;r++){var o=this.segments[r],s=o[0];s!==e||s==="m"||s==="M"?(s==="m"&&e==="z"&&(n+=" "),n+=s,t=!1):t=!0;for(var a=1;a<o.length;a++){var l=o[a];a===1?t&&l>=0&&(n+=" "):l>=0&&(n+=" "),n+=l}e=s}return n};Mi.prototype.translate=function(n,e){return this.__stack.push(Tf().translate(n,e||0)),this};Mi.prototype.scale=function(n,e){return this.__stack.push(Tf().scale(n,!e&&e!==0?n:e)),this};Mi.prototype.rotate=function(n,e,t){return this.__stack.push(Tf().rotate(n,e||0,t||0)),this};Mi.prototype.skewX=function(n){return this.__stack.push(Tf().skewX(n)),this};Mi.prototype.skewY=function(n){return this.__stack.push(Tf().skewY(n)),this};Mi.prototype.matrix=function(n){return this.__stack.push(Tf().matrix(n)),this};Mi.prototype.transform=function(n){return n.trim()?(this.__stack.push(Bne(n)),this):this};Mi.prototype.round=function(n){var e=0,t=0,r=0,i=0,o;return n=n||0,this.__evaluateStack(),this.segments.forEach(function(s){var a=s[0].toLowerCase()===s[0];switch(s[0]){case"H":case"h":a&&(s[1]+=r),r=s[1]-s[1].toFixed(n),s[1]=+s[1].toFixed(n);return;case"V":case"v":a&&(s[1]+=i),i=s[1]-s[1].toFixed(n),s[1]=+s[1].toFixed(n);return;case"Z":case"z":r=e,i=t;return;case"M":case"m":a&&(s[1]+=r,s[2]+=i),r=s[1]-s[1].toFixed(n),i=s[2]-s[2].toFixed(n),e=r,t=i,s[1]=+s[1].toFixed(n),s[2]=+s[2].toFixed(n);return;case"A":case"a":a&&(s[6]+=r,s[7]+=i),r=s[6]-s[6].toFixed(n),i=s[7]-s[7].toFixed(n),s[1]=+s[1].toFixed(n),s[2]=+s[2].toFixed(n),s[3]=+s[3].toFixed(n+2),s[6]=+s[6].toFixed(n),s[7]=+s[7].toFixed(n);return;default:o=s.length,a&&(s[o-2]+=r,s[o-1]+=i),r=s[o-2]-s[o-2].toFixed(n),i=s[o-1]-s[o-1].toFixed(n),s.forEach(function(l,u){u&&(s[u]=+s[u].toFixed(n))});return}}),this};Mi.prototype.iterate=function(n,e){var t=this.segments,r={},i=!1,o=0,s=0,a=0,l=0,u,c,h;if(e||this.__evaluateStack(),t.forEach(function(f,d){var v=n(f,d,o,s);Array.isArray(v)&&(r[d]=v,i=!0);var y=f[0]===f[0].toLowerCase();switch(f[0]){case"m":case"M":o=f[1]+(y?o:0),s=f[2]+(y?s:0),a=o,l=s;return;case"h":case"H":o=f[1]+(y?o:0);return;case"v":case"V":s=f[1]+(y?s:0);return;case"z":case"Z":o=a,s=l;return;default:o=f[f.length-2]+(y?o:0),s=f[f.length-1]+(y?s:0)}}),!i)return this;for(h=[],u=0;u<t.length;u++)if(typeof r[u]<"u")for(c=0;c<r[u].length;c++)h.push(r[u][c]);else h.push(t[u]);return this.segments=h,this};Mi.prototype.abs=function(){return this.iterate(function(n,e,t,r){var i=n[0],o=i.toUpperCase(),s;if(i!==o)switch(n[0]=o,i){case"v":n[1]+=r;return;case"a":n[6]+=t,n[7]+=r;return;default:for(s=1;s<n.length;s++)n[s]+=s%2?t:r}},!0),this};Mi.prototype.rel=function(){return this.iterate(function(n,e,t,r){var i=n[0],o=i.toLowerCase(),s;if(i!==o&&!(e===0&&i==="M"))switch(n[0]=o,i){case"V":n[1]-=r;return;case"A":n[6]-=t,n[7]-=r;return;default:for(s=1;s<n.length;s++)n[s]-=s%2?t:r}},!0),this};Mi.prototype.unarc=function(){return this.iterate(function(n,e,t,r){var i,o,s,a=[],l=n[0];return l!=="A"&&l!=="a"?null:(l==="a"?(o=t+n[6],s=r+n[7]):(o=n[6],s=n[7]),i=Une(t,r,o,s,n[4],n[5],n[1],n[2],n[3]),i.length===0?[[n[0]==="a"?"l":"L",n[6],n[7]]]:(i.forEach(function(u){a.push(["C",u[2],u[3],u[4],u[5],u[6],u[7]])}),a))}),this};Mi.prototype.unshort=function(){var n=this.segments,e,t,r,i,o;return this.iterate(function(s,a,l,u){var c=s[0],h=c.toUpperCase(),f;a&&(h==="T"?(f=c==="t",r=n[a-1],r[0]==="Q"?(e=r[1]-l,t=r[2]-u):r[0]==="q"?(e=r[1]-r[3],t=r[2]-r[4]):(e=0,t=0),i=-e,o=-t,f||(i+=l,o+=u),n[a]=[f?"q":"Q",i,o,s[1],s[2]]):h==="S"&&(f=c==="s",r=n[a-1],r[0]==="C"?(e=r[3]-l,t=r[4]-u):r[0]==="c"?(e=r[3]-r[5],t=r[4]-r[6]):(e=0,t=0),i=-e,o=-t,f||(i+=l,o+=u),n[a]=[f?"c":"C",i,o,s[1],s[2],s[3],s[4]]))}),this};var Hne=Mi;(function(n){n.exports=Hne})(gne);const Gne=gw(fE);var r4=function(n){var e=n,t,r={a:0,b:0,c:0},i=[],o=/(\[[^\]]+\])/g,s=/(#[^\#\s\+>~\.\[:\)]+)/g,a=/(\.[^\s\+>~\.\[:\)]+)/g,l=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,u=/(:(?!not|global|local)[\w-]+\([^\)]*\))/gi,c=/(:(?!not|global|local)[^\s\+>~\.\[:]+)/g,h=/([^\s\+>~\.\[:]+)/g;return t=function(f,d){var v,y,x,g,S,_;if(f.test(e))for(v=e.match(f),y=0,x=v.length;y<x;y+=1)r[d]+=1,g=v[y],S=e.indexOf(g),_=g.length,i.push({selector:n.substr(S,_),type:d,index:S,length:_}),e=e.replace(g,Array(_+1).join(" "))},function(){var f=function(x){var g,S,_,E;if(x.test(e))for(g=e.match(x),S=0,_=g.length;S<_;S+=1)E=g[S],e=e.replace(E,Array(E.length+1).join("A"))},d=/\\[0-9A-Fa-f]{6}\s?/g,v=/\\[0-9A-Fa-f]{1,5}\s/g,y=/\\./g;f(d),f(v),f(y)}(),function(){var f=/{[^]*/gm,d,v,y,x;if(f.test(e))for(d=e.match(f),v=0,y=d.length;v<y;v+=1)x=d[v],e=e.replace(x,Array(x.length+1).join(" "))}(),t(o,"b"),t(s,"a"),t(a,"b"),t(l,"c"),t(u,"b"),t(c,"b"),e=e.replace(/[\*\s\+>~]/g," "),e=e.replace(/[#\.]/g," "),e=e.replace(/:not/g,"    "),e=e.replace(/:local/g,"      "),e=e.replace(/:global/g,"       "),e=e.replace(/[\(\)]/g," "),t(h,"c"),i.sort(function(f,d){return f.index-d.index}),{selector:n,specificity:"0,"+r.a.toString()+","+r.b.toString()+","+r.c.toString(),specificityArray:[0,r.a,r.b,r.c],parts:i}},Vne=function(n,e){var t,r,i;if(typeof n=="string"){if(n.indexOf(",")!==-1)throw"Invalid CSS selector";t=r4(n).specificityArray}else if(Array.isArray(n)){if(n.filter(function(o){return typeof o=="number"}).length!==4)throw"Invalid specificity array";t=n}else throw"Invalid CSS selector or specificity array";if(typeof e=="string"){if(e.indexOf(",")!==-1)throw"Invalid CSS selector";r=r4(e).specificityArray}else if(Array.isArray(e)){if(e.filter(function(o){return typeof o=="number"}).length!==4)throw"Invalid specificity array";r=e}else throw"Invalid CSS selector or specificity array";for(i=0;i<4;i+=1){if(t[i]<r[i])return-1;if(t[i]>r[i])return 1}return 0},dE=function(n,e){return dE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},dE(n,e)};function zr(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=n}dE(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var cw=function(){return cw=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},cw.apply(this,arguments)};function jr(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(u){try{l(r.next(u))}catch(c){o(c)}}function a(u){try{l(r.throw(u))}catch(c){o(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof t?c:new t(function(h){h(c)})).then(s,a)}l((r=r.apply(n,e||[])).next())})}function qr(n,e){var t,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,r=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=i.length>0&&i[i.length-1])||c[0]!==6&&c[0]!==2)){s=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(c[0]===6&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(n,s)}catch(h){c=[6,h],r=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}var Dl=function(){function n(e){if(this.a=void 0,this.r=0,this.g=0,this.b=0,this.simpleColors={},this.colorDefs=[],this.ok=!1,e){for(var t in e.charAt(0)=="#"&&(e=e.substr(1,6)),e=(e=e.replace(/ /g,"")).toLowerCase(),this.simpleColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},this.simpleColors)e==t&&(e=this.simpleColors[t]);this.colorDefs=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^rgb\(([0-9.]+)%,\s*([0-9.]+)%,\s*([0-9.]+)%\)$/,example:["rgb(50.5%, 25.75%, 75.5%)","rgb(100%,0%,0%)"],process:function(l){return[Math.round(2.55*parseFloat(l[1])),Math.round(2.55*parseFloat(l[2])),Math.round(2.55*parseFloat(l[3]))]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}];for(var r=0;r<this.colorDefs.length;r++){var i=this.colorDefs[r].re,o=this.colorDefs[r].process,s=i.exec(e);if(s){var a=o(s);this.r=a[0],this.g=a[1],this.b=a[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b}}return n.prototype.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},n.prototype.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+(this.a||"1")+")"},n.prototype.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return e.length==1&&(e="0"+e),t.length==1&&(t="0"+t),r.length==1&&(r="0"+r),"#"+e+t+r},n.prototype.getHelpXML=function(){for(var e=[],t=0;t<this.colorDefs.length;t++)for(var r=this.colorDefs[t].example,i=0;i<r.length;i++)e[e.length]=r[i];for(var o in this.simpleColors)e[e.length]=o;var s=document.createElement("ul");for(s.setAttribute("id","rgbcolor-examples"),t=0;t<e.length;t++)try{var a=document.createElement("li"),l=new n(e[t]),u=document.createElement("div");u.style.cssText="margin: 3px; border: 1px solid black; background:"+l.toHex()+"; color:"+l.toHex(),u.appendChild(document.createTextNode("test"));var c=document.createTextNode(" "+e[t]+" -> "+l.toRGB()+" -> "+l.toHex());a.appendChild(u),a.appendChild(c),s.appendChild(a)}catch{}return s},n}(),$o=function(){function n(e){this.color=e}return n.prototype.getFillData=function(e,t){return jr(this,void 0,void 0,function(){return qr(this,function(r){return[2,void 0]})})},n}(),pg=function(){function n(){this.xmlSpace="",this.fill=null,this.fillOpacity=1,this.fontFamily="",this.fontSize=16,this.fontStyle="",this.fontWeight="",this.opacity=1,this.stroke=null,this.strokeDasharray=null,this.strokeDashoffset=0,this.strokeLinecap="",this.strokeLinejoin="",this.strokeMiterlimit=4,this.strokeOpacity=1,this.strokeWidth=1,this.alignmentBaseline="",this.textAnchor="",this.visibility="",this.color=null,this.contextFill=null,this.contextStroke=null,this.fillRule=null}return n.prototype.clone=function(){var e=new n;return e.xmlSpace=this.xmlSpace,e.fill=this.fill,e.fillOpacity=this.fillOpacity,e.fontFamily=this.fontFamily,e.fontSize=this.fontSize,e.fontStyle=this.fontStyle,e.fontWeight=this.fontWeight,e.opacity=this.opacity,e.stroke=this.stroke,e.strokeDasharray=this.strokeDasharray,e.strokeDashoffset=this.strokeDashoffset,e.strokeLinecap=this.strokeLinecap,e.strokeLinejoin=this.strokeLinejoin,e.strokeMiterlimit=this.strokeMiterlimit,e.strokeOpacity=this.strokeOpacity,e.strokeWidth=this.strokeWidth,e.textAnchor=this.textAnchor,e.alignmentBaseline=this.alignmentBaseline,e.visibility=this.visibility,e.color=this.color,e.fillRule=this.fillRule,e.contextFill=this.contextFill,e.contextStroke=this.contextStroke,e},n.default=function(){var e=new n;return e.xmlSpace="default",e.fill=new $o(new Dl("rgb(0, 0, 0)")),e.fillOpacity=1,e.fontFamily="times",e.fontSize=16,e.fontStyle="normal",e.fontWeight="normal",e.opacity=1,e.stroke=null,e.strokeDasharray=null,e.strokeDashoffset=0,e.strokeLinecap="butt",e.strokeLinejoin="miter",e.strokeMiterlimit=4,e.strokeOpacity=1,e.strokeWidth=1,e.alignmentBaseline="baseline",e.textAnchor="start",e.visibility="visible",e.color=new Dl("rgb(0, 0, 0)"),e.fillRule="nonzero",e.contextFill=null,e.contextStroke=null,e},n.getContextColors=function(e,t){t===void 0&&(t=!1);var r={};return e.attributeState.contextFill&&(r.contextFill=e.attributeState.contextFill),e.attributeState.contextStroke&&(r.contextStroke=e.attributeState.contextStroke),t&&e.attributeState.color&&(r.color=e.attributeState.color),r},n}(),Cf=function(){function n(e,t){var r,i,o;this.pdf=e,this.svg2pdfParameters=t.svg2pdfParameters,this.attributeState=t.attributeState?t.attributeState.clone():pg.default(),this.viewport=t.viewport,this.refsHandler=t.refsHandler,this.styleSheets=t.styleSheets,this.textMeasure=t.textMeasure,this.transform=(r=t.transform)!==null&&r!==void 0?r:this.pdf.unitMatrix,this.withinClipPath=(i=t.withinClipPath)!==null&&i!==void 0&&i,this.withinUse=(o=t.withinUse)!==null&&o!==void 0&&o}return n.prototype.clone=function(e){var t,r,i,o;return e===void 0&&(e={}),new n(this.pdf,{svg2pdfParameters:this.svg2pdfParameters,attributeState:e.attributeState?e.attributeState.clone():this.attributeState.clone(),viewport:(t=e.viewport)!==null&&t!==void 0?t:this.viewport,refsHandler:this.refsHandler,styleSheets:this.styleSheets,textMeasure:this.textMeasure,transform:(r=e.transform)!==null&&r!==void 0?r:this.transform,withinClipPath:(i=e.withinClipPath)!==null&&i!==void 0?i:this.withinClipPath,withinUse:(o=e.withinUse)!==null&&o!==void 0?o:this.withinUse})},n}(),MO=function(){function n(e){this.renderedElements={},this.idMap=e,this.idPrefix=String(n.instanceCounter++)}return n.prototype.getRendered=function(e,t,r){return jr(this,void 0,void 0,function(){var i,o;return qr(this,function(s){switch(s.label){case 0:return i=this.generateKey(e,t),this.renderedElements.hasOwnProperty(i)?[2,this.renderedElements[e]]:(o=this.get(e),this.renderedElements[i]=o,[4,r(o)]);case 1:return s.sent(),[2,o]}})})},n.prototype.get=function(e){return this.idMap[_O(e,{isIdentifier:!0})]},n.prototype.generateKey=function(e,t){var r="";return t&&(r=["color","contextFill","contextStroke"].map(function(i){var o,s;return(s=(o=t[i])===null||o===void 0?void 0:o.toRGBA())!==null&&s!==void 0?s:""}).join("|")),this.idPrefix+"|"+e+"|"+r},n.instanceCounter=0,n}();function i4(n,e){return Math.atan2(e[1]-n[1],e[0]-n[0])}var o4=2/3;function s4(n,e){return[o4*(e[0]-n[0])+n[0],o4*(e[1]-n[1])+n[1]]}function D0(n){var e=Math.sqrt(n[0]*n[0]+n[1]*n[1]);return[n[0]/e,n[1]/e]}function im(n,e){return D0([e[0]-n[0],e[1]-n[1]])}function C2(n,e){return[n[0]+e[0],n[1]+e[1]]}function Nb(n,e){var t=n[0],r=n[1];return[e.a*t+e.c*r+e.e,e.b*t+e.d*r+e.f]}var mg=function(){function n(){this.segments=[]}return n.prototype.moveTo=function(e,t){return this.segments.push(new Fo(e,t)),this},n.prototype.lineTo=function(e,t){return this.segments.push(new Oh(e,t)),this},n.prototype.curveTo=function(e,t,r,i,o,s){return this.segments.push(new Su(e,t,r,i,o,s)),this},n.prototype.close=function(){return this.segments.push(new pE),this},n.prototype.transform=function(e){this.segments.forEach(function(t){if(t instanceof Fo||t instanceof Oh||t instanceof Su){var r=Nb([t.x,t.y],e);t.x=r[0],t.y=r[1]}if(t instanceof Su){var i=Nb([t.x1,t.y1],e),o=Nb([t.x2,t.y2],e);t.x1=i[0],t.y1=i[1],t.x2=o[0],t.y2=o[1]}})},n.prototype.draw=function(e){var t=e.pdf;this.segments.forEach(function(r){r instanceof Fo?t.moveTo(r.x,r.y):r instanceof Oh?t.lineTo(r.x,r.y):r instanceof Su?t.curveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):t.close()})},n}(),Fo=function(n,e){this.x=n,this.y=e},Oh=function(n,e){this.x=n,this.y=e},Su=function(n,e,t,r,i,o){this.x1=n,this.y1=e,this.x2=t,this.y2=r,this.x=i,this.y=o},pE=function(){};function gf(n,e){return e.split(",").indexOf((n.nodeName||n.tagName).toLowerCase())>=0}function Lt(n,e,t,r){var i;r===void 0&&(r=t);var o=(i=n.style)===null||i===void 0?void 0:i.getPropertyValue(r);if(o)return o;var s=e.getPropertyValue(n,r);return s||n.hasAttribute(t)&&n.getAttribute(t)||void 0}function jc(n,e,t){if(Lt(n.element,t.styleSheets,"display")==="none")return!1;var r=e,i=Lt(n.element,t.styleSheets,"visibility");return i&&(r=i!=="hidden"),r}function Pf(n,e,t){var r=jc(n,e,t);return n.element.childNodes.length!==0&&(n.children.forEach(function(i){i.isVisible(r,t)&&(r=!0)}),r)}var Wne=function(){function n(){this.markers=[]}return n.prototype.addMarker=function(e){this.markers.push(e)},n.prototype.draw=function(e){return jr(this,void 0,void 0,function(){var t,r,i,o,s,a,l,u;return qr(this,function(c){switch(c.label){case 0:t=0,c.label=1;case 1:return t<this.markers.length?(r=this.markers[t],i=void 0,o=r.angle,s=r.anchor,a=Math.cos(o),l=Math.sin(o),i=e.pdf.Matrix(a,l,-l,a,s[0],s[1]),i=e.pdf.matrixMult(e.pdf.Matrix(e.attributeState.strokeWidth,0,0,e.attributeState.strokeWidth,0,0),i),i=e.pdf.matrixMult(i,e.transform),e.pdf.saveGraphicsState(),u=pg.getContextColors(e),[4,e.refsHandler.getRendered(r.id,u,function(h){return h.apply(e)})]):[3,4];case 2:c.sent(),e.pdf.doFormObject(e.refsHandler.generateKey(r.id,u),i),e.pdf.restoreGraphicsState(),c.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},n}(),Ph=function(n,e,t,r){r===void 0&&(r=!1),this.id=n,this.anchor=e,this.angle=t,this.isStartMarker=r},$A=/url\(["']?#([^"']+)["']?\)/,jne={bottom:"bottom","text-bottom":"bottom",top:"top","text-top":"top",hanging:"hanging",middle:"middle",central:"middle",center:"middle",mathematical:"middle",ideographic:"ideographic",alphabetic:"alphabetic",baseline:"alphabetic"},a4="http://www.w3.org/2000/svg";function xc(n,e){var t;return(t=n&&n.toString().match(/^([\-0-9.]+)em$/))?parseFloat(t[1])*e:(t=n&&n.toString().match(/^([\-0-9.]+)(px|)$/))?parseFloat(t[1]):0}function EO(n){return jne[n]||"alphabetic"}function rl(n){for(var e,t=[],r=/[+-]?(?:(?:\d+\.?\d*)|(?:\d*\.?\d+))(?:[eE][+-]?\d+)?/g;e=r.exec(n);)t.push(parseFloat(e[0]));return t}function qm(n,e){if(n==="transparent"){var t=new Dl("rgb(0,0,0)");return t.a=0,t}if(e&&n.toLowerCase()==="currentcolor")return e.color||new Dl("rgb(0,0,0)");if(e&&n.toLowerCase()==="context-stroke")return e.contextStroke||new Dl("rgb(0,0,0)");if(e&&n.toLowerCase()==="context-fill")return e.contextFill||new Dl("rgb(0,0,0)");var r=/\s*rgba\(((?:[^,\)]*,){3}[^,\)]*)\)\s*/.exec(n);if(r){var i=rl(r[1]),o=new Dl("rgb("+i.slice(0,3).join(",")+")");return o.a=i[3],o}return new Dl(n)}var Tc={"sans-serif":"helvetica",verdana:"helvetica",arial:"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",serif:"times",cursive:"times",fantasy:"times"},Fb,qne=(Fb=vn.version.split("."),parseFloat(Fb[0])===2&&parseFloat(Fb[1])===3);function AO(n,e){return qne?e==400?n=="italic"?"italic":"normal":e==700&&n!=="italic"?"bold":n+""+e:e==400||e==="normal"?n==="italic"?"italic":"normal":e!=700&&e!=="bold"||n!=="normal"?(e==700?"bold":e)+""+n:"bold"}function XA(n,e){if(Lt(e.element,n.styleSheets,"display")==="none")return[0,0,0,0];var t=[];return e.children.forEach(function(r){var i=r.getBoundingBox(n);if(i[0]!==0||i[1]!==0||i[2]!==0||i[3]!==0){var o=r.computeNodeTransform(n);i[0]=i[0]*o.sx+o.tx,i[1]=i[1]*o.sy+o.ty,i[2]=i[2]*o.sx,i[3]=i[3]*o.sy,t=t.length===0?i:[Math.min(t[0],i[0]),Math.min(t[1],i[1]),Math.max(t[0]+t[2],i[0]+i[2])-Math.min(t[0],i[0]),Math.max(t[1]+t[3],i[1]+i[3])-Math.min(t[1],i[1])]}}),t.length===0?[0,0,0,0]:t}function D1(n,e){var t=parseFloat,r=t(n.getAttribute("x1"))||t(Lt(n,e.styleSheets,"x"))||t(Lt(n,e.styleSheets,"cx"))-t(Lt(n,e.styleSheets,"r"))||0,i=t(n.getAttribute("x2"))||r+t(Lt(n,e.styleSheets,"width"))||t(Lt(n,e.styleSheets,"cx"))+t(Lt(n,e.styleSheets,"r"))||0,o=t(n.getAttribute("y1"))||t(Lt(n,e.styleSheets,"y"))||t(Lt(n,e.styleSheets,"cy"))-t(Lt(n,e.styleSheets,"r"))||0,s=t(n.getAttribute("y2"))||o+t(Lt(n,e.styleSheets,"height"))||t(Lt(n,e.styleSheets,"cy"))+t(Lt(n,e.styleSheets,"r"))||0;return[Math.min(r,i),Math.min(o,s),Math.max(r,i)-Math.min(r,i),Math.max(o,s)-Math.min(o,s)]}function O1(n,e,t,r,i,o,s,a){a===void 0&&(a=!1);var l,u,c=e[0],h=e[1],f=e[2],d=e[3],v=i/f,y=o/d,x=n.getAttribute("preserveAspectRatio");if(x){var g=x.split(" ");g[0]==="defer"&&(g=g.slice(1)),l=g[0],u=g[1]||"meet"}else l="xMidYMid",u="meet";if(l!=="none"&&(u==="meet"?v=y=Math.min(v,y):u==="slice"&&(v=y=Math.max(v,y))),a)return s.pdf.Matrix(v,0,0,y,0,0);var S=t-c*v,_=r-h*y;l.indexOf("xMid")>=0?S+=(i-f*v)/2:l.indexOf("xMax")>=0&&(S+=i-f*v),l.indexOf("YMid")>=0?_+=(o-d*y)/2:l.indexOf("YMax")>=0&&(_+=o-d*y);var E=s.pdf.Matrix(1,0,0,1,S,_),C=s.pdf.Matrix(v,0,0,y,0,0);return s.pdf.matrixMult(C,E)}function _S(n,e){if(!n||n==="none")return e.pdf.unitMatrix;for(var t,r,i=/^[\s,]*matrix\(([^)]+)\)\s*/,o=/^[\s,]*translate\(([^)]+)\)\s*/,s=/^[\s,]*rotate\(([^)]+)\)\s*/,a=/^[\s,]*scale\(([^)]+)\)\s*/,l=/^[\s,]*skewX\(([^)]+)\)\s*/,u=/^[\s,]*skewY\(([^)]+)\)\s*/,c=e.pdf.unitMatrix;n.length>0&&n.length!==r;){r=n.length;var h=i.exec(n);if(h&&(t=rl(h[1]),c=e.pdf.matrixMult(e.pdf.Matrix(t[0],t[1],t[2],t[3],t[4],t[5]),c),n=n.substr(h[0].length)),h=s.exec(n)){t=rl(h[1]);var f=Math.PI*t[0]/180;if(c=e.pdf.matrixMult(e.pdf.Matrix(Math.cos(f),Math.sin(f),-Math.sin(f),Math.cos(f),0,0),c),t[1]||t[2]){var d=e.pdf.Matrix(1,0,0,1,t[1],t[2]),v=e.pdf.Matrix(1,0,0,1,-t[1],-t[2]);c=e.pdf.matrixMult(v,e.pdf.matrixMult(c,d))}n=n.substr(h[0].length)}(h=o.exec(n))&&(t=rl(h[1]),c=e.pdf.matrixMult(e.pdf.Matrix(1,0,0,1,t[0],t[1]||0),c),n=n.substr(h[0].length)),(h=a.exec(n))&&((t=rl(h[1]))[1]||(t[1]=t[0]),c=e.pdf.matrixMult(e.pdf.Matrix(t[0],0,0,t[1],0,0),c),n=n.substr(h[0].length)),(h=l.exec(n))&&(t=parseFloat(h[1]),t*=Math.PI/180,c=e.pdf.matrixMult(e.pdf.Matrix(1,0,Math.tan(t),1,0,0),c),n=n.substr(h[0].length)),(h=u.exec(n))&&(t=parseFloat(h[1]),t*=Math.PI/180,c=e.pdf.matrixMult(e.pdf.Matrix(1,Math.tan(t),0,1,0,0),c),n=n.substr(h[0].length))}return c}var YA=function(){function n(e,t){this.element=e,this.children=t,this.parent=null}return n.prototype.setParent=function(e){this.parent=e},n.prototype.getParent=function(){return this.parent},n.prototype.getBoundingBox=function(e){return Lt(this.element,e.styleSheets,"display")==="none"?[0,0,0,0]:this.getBoundingBoxCore(e)},n.prototype.computeNodeTransform=function(e){var t=this.computeNodeTransformCore(e),r=Lt(this.element,e.styleSheets,"transform");return r?e.pdf.matrixMult(t,_S(r,e)):t},n}(),B1=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return zr(e,n),e.prototype.render=function(t){return Promise.resolve()},e.prototype.getBoundingBoxCore=function(t){return[]},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(YA),TO=function(n){function e(t,r,i){var o=n.call(this,r,i)||this;return o.pdfGradientType=t,o.contextColor=void 0,o}return zr(e,n),e.prototype.apply=function(t){return jr(this,void 0,void 0,function(){var r,i,o,s,a,l;return qr(this,function(u){return(r=this.element.getAttribute("id"))?(i=this.getStops(t.styleSheets),o=0,s=!1,i.forEach(function(c){var h=c.opacity;h&&h!==1&&(o+=h,s=!0)}),s&&(a=new Wd({opacity:o/i.length})),l=new Dh(this.pdfGradientType,this.getCoordinates(),i,a),t.pdf.addShadingPattern(r,l),[2]):[2]})})},e.prototype.getStops=function(t){var r=this;if(this.stops)return this.stops;if(this.contextColor===void 0){this.contextColor=null;for(var i=this;i;){var o=Lt(i.element,t,"color");if(o){this.contextColor=qm(o,null);break}i=i.getParent()}}var s=[];return this.children.forEach(function(a){if(a.element.tagName.toLowerCase()==="stop"){var l=Lt(a.element,t,"color"),u=qm(Lt(a.element,t,"stop-color")||"",l?{color:qm(l,null)}:{color:r.contextColor}),c=parseFloat(Lt(a.element,t,"stop-opacity")||"1");s.push({offset:e.parseGradientOffset(a.element.getAttribute("offset")||"0"),color:[u.r,u.g,u.b],opacity:c})}}),this.stops=s},e.prototype.getBoundingBoxCore=function(t){return D1(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return Pf(this,t,r)},e.parseGradientOffset=function(t){var r=parseFloat(t);return!isNaN(r)&&t.indexOf("%")>=0?r/100:r},e}(B1),CO=function(n){function e(t,r){return n.call(this,"axial",t,r)||this}return zr(e,n),e.prototype.getCoordinates=function(){return[parseFloat(this.element.getAttribute("x1")||"0"),parseFloat(this.element.getAttribute("y1")||"0"),parseFloat(this.element.getAttribute("x2")||"1"),parseFloat(this.element.getAttribute("y2")||"0")]},e}(TO),PO=function(n){function e(t,r){return n.call(this,"radial",t,r)||this}return zr(e,n),e.prototype.getCoordinates=function(){var t=this.element.getAttribute("cx"),r=this.element.getAttribute("cy"),i=this.element.getAttribute("fx"),o=this.element.getAttribute("fy");return[parseFloat(i||t||"0.5"),parseFloat(o||r||"0.5"),0,parseFloat(t||"0.5"),parseFloat(r||"0.5"),parseFloat(this.element.getAttribute("r")||"0.5")]},e}(TO),$ne=function(){function n(e,t){this.key=e,this.gradient=t}return n.prototype.getFillData=function(e,t){return jr(this,void 0,void 0,function(){var r,i,o;return qr(this,function(s){switch(s.label){case 0:return[4,t.refsHandler.getRendered(this.key,null,function(a){return a.apply(new Cf(t.pdf,{refsHandler:t.refsHandler,textMeasure:t.textMeasure,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters}))})];case 1:return s.sent(),this.gradient.element.hasAttribute("gradientUnits")&&this.gradient.element.getAttribute("gradientUnits").toLowerCase()!=="objectboundingbox"?r=t.pdf.unitMatrix:(i=e.getBoundingBox(t),r=t.pdf.Matrix(i[2],0,0,i[3],i[0],i[1])),o=_S(Lt(this.gradient.element,t.styleSheets,"gradientTransform","transform"),t),[2,{key:this.key,matrix:t.pdf.matrixMult(o,r)}]}})})},n}(),RO=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return zr(e,n),e.prototype.apply=function(t){return jr(this,void 0,void 0,function(){var r,i,o,s,a;return qr(this,function(l){switch(l.label){case 0:if(!(r=this.element.getAttribute("id")))return[2];i=this.getBoundingBox(t),o=new bd([i[0],i[1],i[0]+i[2],i[1]+i[3]],i[2],i[3]),t.pdf.beginTilingPattern(o),s=0,a=this.children,l.label=1;case 1:return s<a.length?[4,a[s].render(new Cf(t.pdf,{attributeState:t.attributeState,refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]:[3,4];case 2:l.sent(),l.label=3;case 3:return s++,[3,1];case 4:return t.pdf.endTilingPattern(r,o),[2]}})})},e.prototype.getBoundingBoxCore=function(t){return D1(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return Pf(this,t,r)},e}(B1),Xne=function(){function n(e,t){this.key=e,this.pattern=t}return n.prototype.getFillData=function(e,t){return jr(this,void 0,void 0,function(){var r,i,o,s,a,l,u,c,h,f,d,v;return qr(this,function(y){switch(y.label){case 0:return[4,t.refsHandler.getRendered(this.key,null,function(x){return x.apply(new Cf(t.pdf,{refsHandler:t.refsHandler,textMeasure:t.textMeasure,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters}))})];case 1:return y.sent(),r={key:this.key,boundingBox:void 0,xStep:0,yStep:0,matrix:void 0},o=t.pdf.unitMatrix,this.pattern.element.hasAttribute("patternUnits")&&this.pattern.element.getAttribute("patternUnits").toLowerCase()!=="objectboundingbox"||(i=e.getBoundingBox(t),o=t.pdf.Matrix(1,0,0,1,i[0],i[1]),a=this.pattern.getBoundingBox(t),l=a[0]*i[0]||0,u=a[1]*i[1]||0,c=a[2]*i[2]||0,h=a[3]*i[3]||0,r.boundingBox=[l,u,l+c,u+h],r.xStep=c,r.yStep=h),s=t.pdf.unitMatrix,this.pattern.element.hasAttribute("patternContentUnits")&&this.pattern.element.getAttribute("patternContentUnits").toLowerCase()==="objectboundingbox"&&(i||(i=e.getBoundingBox(t)),s=t.pdf.Matrix(i[2],0,0,i[3],0,0),a=r.boundingBox||this.pattern.getBoundingBox(t),l=a[0]/i[0]||0,u=a[1]/i[1]||0,c=a[2]/i[2]||0,h=a[3]/i[3]||0,r.boundingBox=[l,u,l+c,u+h],r.xStep=c,r.yStep=h),f=t.pdf.unitMatrix,(d=Lt(this.pattern.element,t.styleSheets,"patternTransform","transform"))&&(f=_S(d,t)),v=s,v=t.pdf.matrixMult(v,o),v=t.pdf.matrixMult(v,f),v=t.pdf.matrixMult(v,t.transform),r.matrix=v,[2,r]}})})},n}();function Yne(n,e){var t=$A.exec(n);if(t){var r=t[1],i=e.refsHandler.get(r);return i&&(i instanceof CO||i instanceof PO)?function(s,a,l){var u=a.getStops(l.styleSheets);if(u.length===0)return null;if(u.length===1){var c=u[0].color,h=new Dl;return h.ok=!0,h.r=c[0],h.g=c[1],h.b=c[2],h.a=u[0].opacity,new $o(h)}return new $ne(s,a)}(r,i,e):i&&i instanceof RO?new Xne(r,i):new $o(new Dl("rgb(0, 0, 0)"))}var o=qm(n,e.attributeState);return o.ok?new $o(o):null}function ZA(n,e,t){var r=t||e.element,i=Lt(r,n.styleSheets,"color");if(i){var o=qm(i,n.attributeState);o.ok?n.attributeState.color=o:n.attributeState.color=new Dl("rgb(0,0,0)")}var s=Lt(r,n.styleSheets,"visibility");s&&(n.attributeState.visibility=s);var a=Lt(r,n.styleSheets,"fill");a&&(n.attributeState.fill=Yne(a,n));var l=Lt(r,n.styleSheets,"fill-opacity");l&&(n.attributeState.fillOpacity=parseFloat(l));var u=Lt(r,n.styleSheets,"stroke-opacity");u&&(n.attributeState.strokeOpacity=parseFloat(u));var c=Lt(r,n.styleSheets,"opacity");c&&(n.attributeState.opacity=parseFloat(c));var h=Lt(r,n.styleSheets,"stroke-width");h!==void 0&&h!==""&&(n.attributeState.strokeWidth=Math.abs(parseFloat(h)));var f=Lt(r,n.styleSheets,"stroke");if(f)if(f==="none")n.attributeState.stroke=null;else{var d=qm(f,n.attributeState);d.ok&&(n.attributeState.stroke=new $o(d))}f&&n.attributeState.stroke instanceof $o&&(n.attributeState.contextStroke=n.attributeState.stroke.color),a&&n.attributeState.fill instanceof $o&&(n.attributeState.contextFill=n.attributeState.fill.color);var v=Lt(r,n.styleSheets,"stroke-linecap");v&&(n.attributeState.strokeLinecap=v);var y=Lt(r,n.styleSheets,"stroke-linejoin");y&&(n.attributeState.strokeLinejoin=y);var x=Lt(r,n.styleSheets,"stroke-dasharray");if(x){var g=parseInt(Lt(r,n.styleSheets,"stroke-dashoffset")||"0");n.attributeState.strokeDasharray=rl(x),n.attributeState.strokeDashoffset=g}var S=Lt(r,n.styleSheets,"stroke-miterlimit");S!==void 0&&S!==""&&(n.attributeState.strokeMiterlimit=parseFloat(S));var _=r.getAttribute("xml:space");_&&(n.attributeState.xmlSpace=_);var E=Lt(r,n.styleSheets,"font-weight");E&&(n.attributeState.fontWeight=E);var C=Lt(r,n.styleSheets,"font-style");C&&(n.attributeState.fontStyle=C);var I=Lt(r,n.styleSheets,"font-family");if(I){var F=mne.parse(I);n.attributeState.fontFamily=function(G,K,ee){var le=AO(G.fontStyle,G.fontWeight),V=ee.pdf.getFontList(),J="";return K.some(function(j){var ie=V[j];return ie&&ie.indexOf(le)>=0?(J=j,!0):(j=j.toLowerCase(),!!Tc.hasOwnProperty(j)&&(J=j,!0))})||(J="times"),J}(n.attributeState,F,n)}var R=Lt(r,n.styleSheets,"font-size");if(R){var k=n.pdf.getFontSize();n.attributeState.fontSize=xc(R,k)}var L=Lt(r,n.styleSheets,"vertical-align")||Lt(r,n.styleSheets,"alignment-baseline");if(L){var N=L.match(/(baseline|text-bottom|alphabetic|ideographic|middle|central|mathematical|text-top|bottom|center|top|hanging)/);N&&(n.attributeState.alignmentBaseline=N[0])}var z=Lt(r,n.styleSheets,"text-anchor");z&&(n.attributeState.textAnchor=z);var H=Lt(r,n.styleSheets,"fill-rule");H&&(n.attributeState.fillRule=H)}function KA(n,e,t){var r=1,i=1;r*=n.attributeState.fillOpacity,r*=n.attributeState.opacity,n.attributeState.fill instanceof $o&&n.attributeState.fill.color.a!==void 0&&(r*=n.attributeState.fill.color.a),i*=n.attributeState.strokeOpacity,i*=n.attributeState.opacity,n.attributeState.stroke instanceof $o&&n.attributeState.stroke.color.a!==void 0&&(i*=n.attributeState.stroke.color.a);var o,s,a=r<1,l=i<1;if(gf(t,"use")?(a=!0,l=!0,r*=n.attributeState.fill?1:0,i*=n.attributeState.stroke?1:0):n.withinUse&&(n.attributeState.fill!==e.attributeState.fill?(a=!0,r*=n.attributeState.fill?1:0):a&&!n.attributeState.fill&&(r=0),n.attributeState.stroke!==e.attributeState.stroke?(l=!0,i*=n.attributeState.stroke?1:0):l&&!n.attributeState.stroke&&(i=0)),a||l){var u={};a&&(u.opacity=r),l&&(u["stroke-opacity"]=i),n.pdf.setGState(new Wd(u))}if(n.attributeState.fill&&n.attributeState.fill!==e.attributeState.fill&&n.attributeState.fill instanceof $o&&n.attributeState.fill.color.ok&&!gf(t,"text")&&n.pdf.setFillColor(n.attributeState.fill.color.r,n.attributeState.fill.color.g,n.attributeState.fill.color.b),n.attributeState.strokeWidth!==e.attributeState.strokeWidth&&n.pdf.setLineWidth(n.attributeState.strokeWidth),n.attributeState.stroke!==e.attributeState.stroke&&n.attributeState.stroke instanceof $o&&n.pdf.setDrawColor(n.attributeState.stroke.color.r,n.attributeState.stroke.color.g,n.attributeState.stroke.color.b),n.attributeState.strokeLinecap!==e.attributeState.strokeLinecap&&n.pdf.setLineCap(n.attributeState.strokeLinecap),n.attributeState.strokeLinejoin!==e.attributeState.strokeLinejoin&&n.pdf.setLineJoin(n.attributeState.strokeLinejoin),n.attributeState.strokeDasharray===e.attributeState.strokeDasharray&&n.attributeState.strokeDashoffset===e.attributeState.strokeDashoffset||!n.attributeState.strokeDasharray||n.pdf.setLineDashPattern(n.attributeState.strokeDasharray,n.attributeState.strokeDashoffset),n.attributeState.strokeMiterlimit!==e.attributeState.strokeMiterlimit&&n.pdf.setLineMiterLimit(n.attributeState.strokeMiterlimit),n.attributeState.fontFamily!==e.attributeState.fontFamily&&(o=Tc.hasOwnProperty(n.attributeState.fontFamily)?Tc[n.attributeState.fontFamily]:n.attributeState.fontFamily),n.attributeState.fill&&n.attributeState.fill!==e.attributeState.fill&&n.attributeState.fill instanceof $o&&n.attributeState.fill.color.ok){var c=n.attributeState.fill.color;n.pdf.setTextColor(c.r,c.g,c.b)}n.attributeState.fontWeight===e.attributeState.fontWeight&&n.attributeState.fontStyle===e.attributeState.fontStyle||(s=AO(n.attributeState.fontStyle,n.attributeState.fontWeight)),o===void 0&&s===void 0||(o===void 0&&(o=Tc.hasOwnProperty(n.attributeState.fontFamily)?Tc[n.attributeState.fontFamily]:n.attributeState.fontFamily),n.pdf.setFont(o,s)),n.attributeState.fontSize!==e.attributeState.fontSize&&n.pdf.setFontSize(n.attributeState.fontSize*n.pdf.internal.scaleFactor)}function LO(n,e,t){var r=$A.exec(n);if(r){var i=r[1];return t.refsHandler.get(i)||void 0}}function kO(n,e,t){return jr(this,void 0,void 0,function(){var r,i;return qr(this,function(o){switch(o.label){case 0:return r=t.clone(),e.element.hasAttribute("clipPathUnits")&&e.element.getAttribute("clipPathUnits").toLowerCase()==="objectboundingbox"&&(i=n.getBoundingBox(t),r.transform=t.pdf.matrixMult(t.pdf.Matrix(i[2],0,0,i[3],i[0],i[1]),t.transform)),[4,e.apply(r)];case 1:return o.sent(),[2]}})})}var IO=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return zr(e,n),e.prototype.render=function(t){return jr(this,void 0,void 0,function(){var r,i,o,s;return qr(this,function(a){switch(a.label){case 0:return this.isVisible(t.attributeState.visibility!=="hidden",t)?((r=t.clone()).transform=r.pdf.matrixMult(this.computeNodeTransform(r),t.transform),ZA(r,this),i=Lt(this.element,r.styleSheets,"clip-path"),(o=i&&i!=="none")?(s=LO(i,0,r))?s.isVisible(!0,r)?(r.pdf.saveGraphicsState(),[4,kO(this,s,r)]):[3,2]:[3,4]:[3,5]):[2];case 1:return a.sent(),[3,3];case 2:return[2];case 3:return[3,5];case 4:o=!1,a.label=5;case 5:return r.withinClipPath||r.pdf.saveGraphicsState(),KA(r,t,this.element),[4,this.renderCore(r)];case 6:return a.sent(),r.withinClipPath||r.pdf.restoreGraphicsState(),o&&r.pdf.restoreGraphicsState(),[2]}})})},e}(YA),bS=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return zr(e,n),e}(IO),U1=function(n){function e(t,r,i){var o=n.call(this,r,i)||this;return o.cachedPath=null,o.hasMarkers=t,o}return zr(e,n),e.prototype.renderCore=function(t){return jr(this,void 0,void 0,function(){var r;return qr(this,function(i){switch(i.label){case 0:return(r=this.getCachedPath(t))===null||r.segments.length===0?[2]:(t.withinClipPath?r.transform(t.transform):t.pdf.setCurrentTransformationMatrix(t.transform),r.draw(t),[4,this.fillOrStroke(t)]);case 1:return i.sent(),this.hasMarkers?[4,this.drawMarkers(t,r)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},e.prototype.getCachedPath=function(t){return this.cachedPath||(this.cachedPath=this.getPath(t))},e.prototype.drawMarkers=function(t,r){return jr(this,void 0,void 0,function(){return qr(this,function(i){switch(i.label){case 0:return[4,this.getMarkers(r,t).draw(t.clone({transform:t.pdf.unitMatrix}))];case 1:return i.sent(),[2]}})})},e.prototype.fillOrStroke=function(t){return jr(this,void 0,void 0,function(){var r,i,o,s,a;return qr(this,function(l){switch(l.label){case 0:return t.withinClipPath?[2]:(r=t.attributeState.fill,i=t.attributeState.stroke&&t.attributeState.strokeWidth!==0,r?[4,r.getFillData(this,t)]:[3,2]);case 1:return s=l.sent(),[3,3];case 2:s=void 0,l.label=3;case 3:return o=s,a=t.attributeState.fillRule==="evenodd",r&&i||t.withinUse?a?t.pdf.fillStrokeEvenOdd(o):t.pdf.fillStroke(o):r?a?t.pdf.fillEvenOdd(o):t.pdf.fill(o):i?t.pdf.stroke():t.pdf.discardPath(),[2]}})})},e.prototype.getBoundingBoxCore=function(t){var r=this.getCachedPath(t);if(!r||!r.segments.length)return[0,0,0,0];for(var i=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=0,u=0,c=0;c<r.segments.length;c++){var h=r.segments[c];(h instanceof Fo||h instanceof Oh||h instanceof Su)&&(l=h.x,u=h.y),h instanceof Su?(i=Math.min(i,l,h.x1,h.x2,h.x),s=Math.max(s,l,h.x1,h.x2,h.x),o=Math.min(o,u,h.y1,h.y2,h.y),a=Math.max(a,u,h.y1,h.y2,h.y)):(i=Math.min(i,l),s=Math.max(s,l),o=Math.min(o,u),a=Math.max(a,u))}return[i,o,s-i,a-o]},e.prototype.getMarkers=function(t,r){var i=Lt(this.element,r.styleSheets,"marker-start"),o=Lt(this.element,r.styleSheets,"marker-mid"),s=Lt(this.element,r.styleSheets,"marker-end"),a=new Wne;if(i||o||s){s&&(s=Db(s)),i&&(i=Db(i)),o&&(o=Db(o));for(var l=t.segments,u=[1,0],c=void 0,h=!1,f=[1,0],d=!1,v=function(x){var g=l[x],S=i&&(x===1||!(l[x]instanceof Fo)&&l[x-1]instanceof Fo);S&&l.forEach(function(R,k){if(!d&&R instanceof pE&&k>x){var L=l[k-1];d=(L instanceof Fo||L instanceof Oh||L instanceof Su)&&L}});var _=s&&(x===l.length-1||!(l[x]instanceof Fo)&&l[x+1]instanceof Fo),E=o&&x>0&&!(x===1&&l[x-1]instanceof Fo),C=l[x-1]||null;if(C instanceof Fo||C instanceof Oh||C instanceof Su)if(g instanceof Su)S&&a.addMarker(new Ph(i,[C.x,C.y],i4(d?[d.x,d.y]:[C.x,C.y],[g.x1,g.y1]),!0)),_&&a.addMarker(new Ph(s,[g.x,g.y],i4([g.x2,g.y2],[g.x,g.y]))),E&&(c=im([C.x,C.y],[g.x1,g.y1]),c=C instanceof Fo?c:D0(C2(u,c)),a.addMarker(new Ph(o,[C.x,C.y],Math.atan2(c[1],c[0])))),u=im([g.x2,g.y2],[g.x,g.y]);else if(g instanceof Fo||g instanceof Oh){if(c=im([C.x,C.y],[g.x,g.y]),S){var I=d?im([d.x,d.y],[g.x,g.y]):c;a.addMarker(new Ph(i,[C.x,C.y],Math.atan2(I[1],I[0]),!0))}_&&a.addMarker(new Ph(s,[g.x,g.y],Math.atan2(c[1],c[0]))),E&&(I=g instanceof Fo?u:C instanceof Fo?c:D0(C2(u,c)),a.addMarker(new Ph(o,[C.x,C.y],Math.atan2(I[1],I[0])))),u=c}else g instanceof pE&&(c=im([C.x,C.y],[h.x,h.y]),E&&(I=C instanceof Fo?c:D0(C2(u,c)),a.addMarker(new Ph(o,[C.x,C.y],Math.atan2(I[1],I[0])))),_&&(I=D0(C2(c,f)),a.addMarker(new Ph(s,[h.x,h.y],Math.atan2(I[1],I[0])))),u=c);else{h=g instanceof Fo&&g;var F=l[x+1];(F instanceof Fo||F instanceof Oh||F instanceof Su)&&(f=im([h.x,h.y],[F.x,F.y]))}},y=0;y<l.length;y++)v(y)}return a.markers.forEach(function(x){var g=r.refsHandler.get(x.id);if(g){var S=Lt(g.element,r.styleSheets,"orient");S!=null&&(x.isStartMarker&&S==="auto-start-reverse"&&(x.angle+=Math.PI),isNaN(Number(S))||(x.angle=parseFloat(S)/180*Math.PI))}}),a},e}(bS);function Db(n){var e=$A.exec(n);return e&&e[1]||void 0}var Zne=function(n){function e(t,r){return n.call(this,!0,t,r)||this}return zr(e,n),e.prototype.getPath=function(t){if(t.withinClipPath||t.attributeState.stroke===null)return null;var r=parseFloat(this.element.getAttribute("x1")||"0"),i=parseFloat(this.element.getAttribute("y1")||"0"),o=parseFloat(this.element.getAttribute("x2")||"0"),s=parseFloat(this.element.getAttribute("y2")||"0");return r||o||i||s?new mg().moveTo(r,i).lineTo(o,s):null},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return jc(this,t,r)},e.prototype.fillOrStroke=function(t){return jr(this,void 0,void 0,function(){return qr(this,function(r){switch(r.label){case 0:return t.attributeState.fill=null,[4,n.prototype.fillOrStroke.call(this,t)];case 1:return r.sent(),[2]}})})},e}(U1),NO=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return zr(e,n),e.prototype.apply=function(t){return jr(this,void 0,void 0,function(){var r,i,o,s,a;return qr(this,function(l){switch(l.label){case 0:return this.isVisible(t.attributeState.visibility!=="hidden",t)?((r=t.clone()).transform=r.pdf.unitMatrix,ZA(r,this),i=Lt(this.element,r.styleSheets,"clip-path"),i&&i!=="none"&&(o=LO(i,0,r))?o.isVisible(!0,r)?[4,kO(this,o,r)]:[3,2]:[3,3]):[2];case 1:return l.sent(),[3,3];case 2:return[2];case 3:KA(r,t,this.element),s=0,a=this.children,l.label=4;case 4:return s<a.length?[4,a[s].render(r)]:[3,7];case 5:l.sent(),l.label=6;case 6:return s++,[3,4];case 7:return[2]}})})},e.prototype.getBoundingBoxCore=function(t){return XA(t,this)},e.prototype.isVisible=function(t,r){return Pf(this,t,r)},e.prototype.computeNodeTransformCore=function(t){var r=parseFloat(Lt(this.element,t.styleSheets,"x")||"0"),i=parseFloat(Lt(this.element,t.styleSheets,"y")||"0"),o=this.element.getAttribute("viewBox");if(o){var s=rl(o),a=parseFloat(Lt(this.element,t.styleSheets,"width")||Lt(this.element.ownerSVGElement,t.styleSheets,"width")||o[2]),l=parseFloat(Lt(this.element,t.styleSheets,"height")||Lt(this.element.ownerSVGElement,t.styleSheets,"height")||o[3]);return O1(this.element,s,r,i,a,l,t)}return t.pdf.Matrix(1,0,0,1,r,i)},e}(B1),MS=function(n,e){this.width=n,this.height=e},Kne=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return zr(e,n),e.prototype.renderCore=function(t){return jr(this,void 0,void 0,function(){var r,i,o,s,a,l,u,c,h,f,d,v,y;return qr(this,function(x){switch(x.label){case 0:return r=parseFloat,(i=this.element.getAttribute("href")||this.element.getAttribute("xlink:href"))?(o=i.substring(1),s=t.refsHandler.get(o),a=gf(s.element,"symbol,svg")&&s.element.hasAttribute("viewBox"),l=r(Lt(this.element,t.styleSheets,"x")||"0"),u=r(Lt(this.element,t.styleSheets,"y")||"0"),c=void 0,h=void 0,a?(c=r(Lt(this.element,t.styleSheets,"width")||Lt(s.element,t.styleSheets,"width")||"0"),h=r(Lt(this.element,t.styleSheets,"height")||Lt(s.element,t.styleSheets,"height")||"0"),l+=r(Lt(s.element,t.styleSheets,"x")||"0"),u+=r(Lt(s.element,t.styleSheets,"y")||"0"),d=rl(s.element.getAttribute("viewBox")),f=O1(s.element,d,l,u,c,h,t)):f=t.pdf.Matrix(1,0,0,1,l,u),v=pg.getContextColors(t,!0),y=new Cf(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,withinUse:!0,viewport:a?new MS(c,h):t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure,attributeState:Object.assign(pg.default(),v)}),[4,t.refsHandler.getRendered(o,v,function(g){return e.renderReferencedNode(g,o,y)})]):[2];case 1:return x.sent(),t.pdf.saveGraphicsState(),t.pdf.setCurrentTransformationMatrix(t.transform),a&&Lt(s.element,t.styleSheets,"overflow")!=="visible"&&(t.pdf.rect(l,u,c,h),t.pdf.clip().discardPath()),t.pdf.doFormObject(t.refsHandler.generateKey(o,v),f),t.pdf.restoreGraphicsState(),[2]}})})},e.renderReferencedNode=function(t,r,i){return jr(this,void 0,void 0,function(){var o;return qr(this,function(s){switch(s.label){case 0:return o=[(o=t.getBoundingBox(i))[0]-.5*o[2],o[1]-.5*o[3],2*o[2],2*o[3]],i.pdf.beginFormObject(o[0],o[1],o[2],o[3],i.pdf.unitMatrix),t instanceof NO?[4,t.apply(i)]:[3,2];case 1:return s.sent(),[3,4];case 2:return[4,t.render(i)];case 3:s.sent(),s.label=4;case 4:return i.pdf.endFormObject(i.refsHandler.generateKey(r,i.attributeState)),[2]}})})},e.prototype.getBoundingBoxCore=function(t){return D1(this.element,t)},e.prototype.isVisible=function(t,r){return jc(this,t,r)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(bS),Jne=function(n){function e(t,r){return n.call(this,!1,t,r)||this}return zr(e,n),e.prototype.getPath=function(t){var r=parseFloat(Lt(this.element,t.styleSheets,"width")||"0"),i=parseFloat(Lt(this.element,t.styleSheets,"height")||"0");if(!isFinite(r)||r<=0||!isFinite(i)||i<=0)return null;var o=Lt(this.element,t.styleSheets,"rx"),s=Lt(this.element,t.styleSheets,"ry"),a=Math.min(parseFloat(o||s||"0"),.5*r),l=Math.min(parseFloat(s||o||"0"),.5*i),u=parseFloat(Lt(this.element,t.styleSheets,"x")||"0"),c=parseFloat(Lt(this.element,t.styleSheets,"y")||"0"),h=4/3*(Math.SQRT2-1);return a===0&&l===0?new mg().moveTo(u,c).lineTo(u+r,c).lineTo(u+r,c+i).lineTo(u,c+i).close():new mg().moveTo(u+=a,c).lineTo(u+=r-2*a,c).curveTo(u+a*h,c,u+a,c+(l-l*h),u+=a,c+=l).lineTo(u,c+=i-2*l).curveTo(u,c+l*h,u-a*h,c+l,u-=a,c+=l).lineTo(u+=2*a-r,c).curveTo(u-a*h,c,u-a,c-l*h,u-=a,c-=l).lineTo(u,c+=2*l-i).curveTo(u,c-l*h,u+a*h,c-l,u+=a,c-=l).close()},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return jc(this,t,r)},e}(U1),FO=function(n){function e(t,r){return n.call(this,!1,t,r)||this}return zr(e,n),e.prototype.getPath=function(t){var r=this.getRx(t),i=this.getRy(t);if(!isFinite(r)||i<=0||!isFinite(i)||i<=0)return null;var o=parseFloat(Lt(this.element,t.styleSheets,"cx")||"0"),s=parseFloat(Lt(this.element,t.styleSheets,"cy")||"0"),a=4/3*(Math.SQRT2-1)*r,l=4/3*(Math.SQRT2-1)*i;return new mg().moveTo(o+r,s).curveTo(o+r,s-l,o+a,s-i,o,s-i).curveTo(o-a,s-i,o-r,s-l,o-r,s).curveTo(o-r,s+l,o-a,s+i,o,s+i).curveTo(o+a,s+i,o+r,s+l,o+r,s)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return jc(this,t,r)},e}(U1),Qne=function(n){function e(t,r){return n.call(this,t,r)||this}return zr(e,n),e.prototype.getRx=function(t){return parseFloat(Lt(this.element,t.styleSheets,"rx")||"0")},e.prototype.getRy=function(t){return parseFloat(Lt(this.element,t.styleSheets,"ry")||"0")},e}(FO);function DO(n){var e="invisible",t=n.stroke&&n.strokeWidth!==0,r=n.fill;return r&&t?e="fillThenStroke":r?e="fill":t&&(e="stroke"),e}function l4(n){return n.replace(/[\n\r]/g,"")}function u4(n){return n.replace(/[\t]/g," ")}function c4(n){return n.replace(/ +/g," ")}function h4(n,e,t){switch(Lt(n,t.styleSheets,"text-transform")){case"uppercase":return e.toUpperCase();case"lowercase":return e.toLowerCase();default:return e}}var Ob=function(){function n(e,t,r,i){this.textNode=e,this.texts=[],this.textNodes=[],this.contexts=[],this.textAnchor=t,this.originX=r,this.originY=i,this.textMeasures=[]}return n.prototype.setX=function(e){this.originX=e},n.prototype.setY=function(e){this.originY=e},n.prototype.add=function(e,t,r){this.texts.push(t),this.textNodes.push(e),this.contexts.push(r)},n.prototype.rightTrimText=function(){for(var e=this.texts.length-1;e>=0;e--)if(this.contexts[e].attributeState.xmlSpace==="default"&&(this.texts[e]=this.texts[e].replace(/\s+$/,"")),this.texts[e].match(/[^\s]/))return!1;return!0},n.prototype.measureText=function(e){for(var t=0;t<this.texts.length;t++)this.textMeasures.push({width:e.textMeasure.measureTextWidth(this.texts[t],this.contexts[t].attributeState),length:this.texts[t].length})},n.prototype.put=function(e,t){var r,i,o,s,a=[],l=[],u=[],c=this.originX,h=this.originY,f=c,d=c;for(r=0;r<this.textNodes.length;r++){i=this.textNodes[r],o=this.contexts[r],s=this.textMeasures[r]||{width:e.textMeasure.measureTextWidth(this.texts[r],this.contexts[r].attributeState),length:this.texts[r].length};var v=c,y=h;if(i.nodeName!=="#text"&&!a.includes(i)){a.push(i);var x=n.resolveRelativePositionAttribute(i,"dx");x!==null&&(v+=xc(x,o.attributeState.fontSize));var g=n.resolveRelativePositionAttribute(i,"dy");g!==null&&(y+=xc(g,o.attributeState.fontSize))}l[r]=v,u[r]=y,c=v+s.width+s.length*t,h=y,f=Math.min(f,v),d=Math.max(d,c)}var S=0;switch(this.textAnchor){case"start":S=0;break;case"middle":S=(d-f)/2;break;case"end":S=d-f}for(r=0;r<this.textNodes.length;r++)if(i=this.textNodes[r],o=this.contexts[r],i.nodeName==="#text"||o.attributeState.visibility!=="hidden"){e.pdf.saveGraphicsState(),KA(o,e,i);var _=o.attributeState.alignmentBaseline,E=DO(o.attributeState);e.pdf.text(this.texts[r],l[r]-S,u[r],{baseline:EO(_),angle:e.transform,renderingMode:E==="fill"?void 0:E,charSpace:t===0?void 0:t}),e.pdf.restoreGraphicsState()}return[c,h]},n.resolveRelativePositionAttribute=function(e,t){for(var r,i=e;i&&gf(i,"tspan");){if(i.hasAttribute(t))return i.getAttribute(t);if(((r=e.parentElement)===null||r===void 0?void 0:r.firstChild)!==e)break;i=i.parentElement}return null},n}(),ere=function(n){function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.boundingBox=[],t}return zr(e,n),e.prototype.processTSpans=function(t,r,i,o,s,a){for(var l=i.pdf.getFontSize(),u=i.attributeState.xmlSpace,c=!0,h=!1,f=0;f<r.childNodes.length;f++){var d=r.childNodes[f];if(d.textContent){var v=d.textContent;if(d.nodeName==="#text"){var y=l4(v);y=u4(y),u==="default"&&(y=c4(y),c&&y.match(/^\s/)&&(h=!0),y.match(/[^\s]/)&&(c=!1),a.prevText.match(/\s$/)&&(y=y.replace(/^\s+/,"")));var x=h4(r,y,i);s.add(r,x,i),a.prevText=v,a.prevContext=i}else if(!gf(d,"title")){if(gf(d,"tspan")){var g=d,S=g.getAttribute("x");if(S!==null){var _=xc(S,l);s=new Ob(this,Lt(g,i.styleSheets,"text-anchor")||i.attributeState.textAnchor,_,0),o.push({type:"y",chunk:s})}var E=g.getAttribute("y");if(E!==null){var C=xc(E,l);s=new Ob(this,Lt(g,i.styleSheets,"text-anchor")||i.attributeState.textAnchor,0,C),o.push({type:"x",chunk:s})}var I=i.clone();ZA(I,t,g),this.processTSpans(t,g,I,o,s,a)}}}}return h},e.prototype.renderCore=function(t){return jr(this,void 0,void 0,function(){var r,i,o,s,a,l,u,c,h,f,d,v,y,x,g,S,_,E,C,I,F,R,k;return qr(this,function(L){if(t.pdf.saveGraphicsState(),r=0,i=0,o=1,s=t.pdf.getFontSize(),a=xc(this.element.getAttribute("x"),s),l=xc(this.element.getAttribute("y"),s),u=xc(this.element.getAttribute("dx"),s),c=xc(this.element.getAttribute("dy"),s),h=parseFloat(this.element.getAttribute("textLength")||"0"),f=t.attributeState.visibility,this.element.childElementCount===0)d=this.element.textContent||"",v=function(N,z){return N=u4(N=l4(N)),z.xmlSpace==="default"&&(N=c4(N=N.trim())),N}(d,t.attributeState),y=h4(this.element,v,t),r=t.textMeasure.getTextOffset(y,t.attributeState),h>0&&(x=t.textMeasure.measureTextWidth(y,t.attributeState),t.attributeState.xmlSpace==="default"&&d.match(/^\s/)&&(o=0),i=(h-x)/(y.length-o)||0),f==="visible"&&(g=t.attributeState.alignmentBaseline,S=DO(t.attributeState),t.pdf.text(y,a+u-r,l+c,{baseline:EO(g),angle:t.transform,renderingMode:S==="fill"?void 0:S,charSpace:i===0?void 0:i}),this.boundingBox=[a+u-r,l+c+.1*s,t.textMeasure.measureTextWidth(y,t.attributeState),s]);else{for(_=[],E=new Ob(this,t.attributeState.textAnchor,a+u,l+c),_.push({type:"",chunk:E}),C=this.processTSpans(this,this.element,t,_,E,{prevText:" ",prevContext:t}),o=C?0:1,I=!0,F=_.length-1;F>=0;F--)I&&(I=_[F].chunk.rightTrimText());h>0&&(R=0,k=0,_.forEach(function(N){var z=N.chunk;z.measureText(t),z.textMeasures.forEach(function(H){var G=H.width,K=H.length;R+=G,k+=K})}),i=(h-R)/(k-o)),_.reduce(function(N,z){var H=z.type,G=z.chunk;return H==="x"?G.setX(N[0]):H==="y"&&G.setY(N[1]),G.put(t,i)},[0,0])}return t.pdf.restoreGraphicsState(),[2]})})},e.prototype.isVisible=function(t,r){return Pf(this,t,r)},e.prototype.getBoundingBoxCore=function(t){return this.boundingBox.length>0?this.boundingBox:D1(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(bS),tre=function(n){function e(t,r){return n.call(this,!0,t,r)||this}return zr(e,n),e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return jc(this,t,r)},e.prototype.getPath=function(t){var r,i,o=new Gne(Lt(this.element,t.styleSheets,"d")||"").unshort().unarc().abs(),s=new mg;return o.iterate(function(a){switch(a[0]){case"M":s.moveTo(a[1],a[2]);break;case"L":s.lineTo(a[1],a[2]);break;case"H":s.lineTo(a[1],i);break;case"V":s.lineTo(r,a[1]);break;case"C":s.curveTo(a[1],a[2],a[3],a[4],a[5],a[6]);break;case"Q":var l=s4([r,i],[a[1],a[2]]),u=s4([a[3],a[4]],[a[1],a[2]]);s.curveTo(l[0],l[1],u[0],u[1],a[3],a[4]);break;case"Z":s.close()}switch(a[0]){case"M":case"L":r=a[1],i=a[2];break;case"H":r=a[1];break;case"V":i=a[1];break;case"C":r=a[5],i=a[6];break;case"Q":r=a[3],i=a[4]}}),s},e}(U1),nre=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,((?:.|\s)*)$/i,rre=function(n){function e(t,r){var i=n.call(this,t,r)||this;return i.imageLoadingPromise=null,i.imageUrl=i.element.getAttribute("xlink:href")||i.element.getAttribute("href"),i.imageUrl&&(i.imageLoadingPromise=e.fetchImageData(i.imageUrl)),i}return zr(e,n),e.prototype.renderCore=function(t){return jr(this,void 0,void 0,function(){var r,i,o,s,a,l,u,c,h,f,d,v,y,x,g,S,_,E;return qr(this,function(C){switch(C.label){case 0:return this.imageLoadingPromise?(t.pdf.setCurrentTransformationMatrix(t.transform),r=parseFloat(Lt(this.element,t.styleSheets,"width")||"0"),i=parseFloat(Lt(this.element,t.styleSheets,"height")||"0"),o=parseFloat(Lt(this.element,t.styleSheets,"x")||"0"),s=parseFloat(Lt(this.element,t.styleSheets,"y")||"0"),!isFinite(r)||r<=0||!isFinite(i)||i<=0?[2]:[4,this.imageLoadingPromise]):[2];case 1:return a=C.sent(),l=a.data,(u=a.format).indexOf("svg")!==0?[3,3]:(c=new DOMParser,h=c.parseFromString(l,"image/svg+xml").firstElementChild,(!(f=this.element.getAttribute("preserveAspectRatio"))||f.indexOf("defer")<0||!h.getAttribute("preserveAspectRatio"))&&h.setAttribute("preserveAspectRatio",f||""),h.setAttribute("x",String(o)),h.setAttribute("y",String(s)),h.setAttribute("width",String(r)),h.setAttribute("height",String(i)),[4,JA(h,d={}).render(new Cf(t.pdf,{refsHandler:new MO(d),styleSheets:t.styleSheets,viewport:new MS(r,i),svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]);case 2:return C.sent(),[2];case 3:v="data:image/".concat(u,";base64,").concat(btoa(l)),C.label=4;case 4:return C.trys.push([4,6,,7]),[4,e.getImageDimensions(v)];case 5:return y=C.sent(),x=y[0],g=y[1],S=[0,0,x,g],_=O1(this.element,S,o,s,r,i,t),t.pdf.setCurrentTransformationMatrix(_),t.pdf.addImage(v,"",0,0,x,g),[3,7];case 6:return E=C.sent(),typeof console=="object"&&console.warn&&console.warn("Could not load image ".concat(this.imageUrl,`. 
`).concat(E)),[3,7];case 7:return[2]}})})},e.prototype.getBoundingBoxCore=function(t){return D1(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return jc(this,t,r)},e.fetchImageData=function(t){return jr(this,void 0,void 0,function(){var r,i,o,s,a;return qr(this,function(l){switch(l.label){case 0:if(!(o=t.match(nre)))return[3,1];if(s=o[2],(a=s.split("/"))[0]!=="image")throw new Error("Unsupported image URL: ".concat(t));return i=a[1],r=o[5],o[4]==="base64"?(r=r.replace(/\s/g,""),r=atob(r)):r=decodeURIComponent(r),[3,3];case 1:return[4,e.fetchImage(t)];case 2:r=l.sent(),i=t.substring(t.lastIndexOf(".")+1),l.label=3;case 3:return[2,{data:r,format:i}]}})})},e.fetchImage=function(t){return new Promise(function(r,i){var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer",o.onload=function(){if(o.status!==200)throw new Error("Error ".concat(o.status,": Failed to load image '").concat(t,"'"));for(var s=new Uint8Array(o.response),a="",l=0;l<s.length;l++)a+=String.fromCharCode(s[l]);r(a)},o.onerror=i,o.onabort=i,o.send(null)})},e.getMimeType=function(t){switch(t=t.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";default:return"image/".concat(t)}},e.getImageDimensions=function(t){return new Promise(function(r,i){var o=new Image;o.onload=function(){r([o.width,o.height])},o.onerror=i,o.src=t})},e}(bS),OO=function(n){function e(t,r,i){var o=n.call(this,!0,r,i)||this;return o.closed=t,o}return zr(e,n),e.prototype.getPath=function(t){if(!this.element.hasAttribute("points")||this.element.getAttribute("points")==="")return null;var r=e.parsePointsString(this.element.getAttribute("points")),i=new mg;if(r.length<1)return i;i.moveTo(r[0][0],r[0][1]);for(var o=1;o<r.length;o++)i.lineTo(r[o][0],r[o][1]);return this.closed&&i.close(),i},e.prototype.isVisible=function(t,r){return jc(this,t,r)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.parsePointsString=function(t){for(var r=rl(t),i=[],o=0;o<r.length-1;o+=2){var s=r[o],a=r[o+1];i.push([s,a])}return i},e}(U1),ire=function(n){function e(t,r){return n.call(this,!0,t,r)||this}return zr(e,n),e}(OO),ore=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return zr(e,n),e.prototype.render=function(t){return Promise.resolve()},e.prototype.getBoundingBoxCore=function(t){return[0,0,0,0]},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return jc(this,t,r)},e}(YA),sre=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return zr(e,n),e.prototype.apply=function(t){return jr(this,void 0,void 0,function(){var r,i,o,s,a,l;return qr(this,function(u){switch(u.label){case 0:r=this.computeNodeTransform(t),i=this.getBoundingBox(t),t.pdf.beginFormObject(i[0],i[1],i[2],i[3],r),o=pg.getContextColors(t),function(c){var h=c.attributeState,f=c.pdf,d=1,v=1;d*=h.fillOpacity,d*=h.opacity,h.fill instanceof $o&&h.fill.color.a!==void 0&&(d*=h.fill.color.a),v*=h.strokeOpacity,v*=h.opacity,h.stroke instanceof $o&&h.stroke.color.a!==void 0&&(v*=h.stroke.color.a);var y,x={};if(x.opacity=d,x["stroke-opacity"]=v,f.setGState(new Wd(x)),h.fill&&h.fill instanceof $o&&h.fill.color.ok?f.setFillColor(h.fill.color.r,h.fill.color.g,h.fill.color.b):f.setFillColor(0,0,0),f.setLineWidth(h.strokeWidth),h.stroke instanceof $o?f.setDrawColor(h.stroke.color.r,h.stroke.color.g,h.stroke.color.b):f.setDrawColor(0,0,0),f.setLineCap(h.strokeLinecap),f.setLineJoin(h.strokeLinejoin),h.strokeDasharray?f.setLineDashPattern(h.strokeDasharray,h.strokeDashoffset):f.setLineDashPattern([],0),f.setLineMiterLimit(h.strokeMiterlimit),y=Tc.hasOwnProperty(h.fontFamily)?Tc[h.fontFamily]:h.fontFamily,h.fill&&h.fill instanceof $o&&h.fill.color.ok){var g=h.fill.color;f.setTextColor(g.r,g.g,g.b)}else f.setTextColor(0,0,0);var S="";h.fontWeight==="bold"&&(S="bold"),h.fontStyle==="italic"&&(S+="italic"),S===""&&(S="normal"),y!==void 0||S!==void 0?(y===void 0&&(y=Tc.hasOwnProperty(h.fontFamily)?Tc[h.fontFamily]:h.fontFamily),f.setFont(y,S)):f.setFont("helvetica",S),f.setFontSize(h.fontSize*f.internal.scaleFactor)}(s=new Cf(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure,attributeState:Object.assign(pg.default(),o)})),a=0,l=this.children,u.label=1;case 1:return a<l.length?[4,l[a].render(s)]:[3,4];case 2:u.sent(),u.label=3;case 3:return a++,[3,1];case 4:return t.pdf.endFormObject(s.refsHandler.generateKey(this.element.getAttribute("id"),o)),[2]}})})},e.prototype.getBoundingBoxCore=function(t){var r,i=this.element.getAttribute("viewBox");return i&&(r=rl(i)),[r&&r[0]||0,r&&r[1]||0,r&&r[2]||parseFloat(this.element.getAttribute("markerWidth")||"3"),r&&r[3]||parseFloat(this.element.getAttribute("markerHeight")||"3")]},e.prototype.computeNodeTransformCore=function(t){var r,i=parseFloat(this.element.getAttribute("refX")||"0"),o=parseFloat(this.element.getAttribute("refY")||"0"),s=this.element.getAttribute("viewBox");if(s){var a=rl(s);r=O1(this.element,a,0,0,parseFloat(this.element.getAttribute("markerWidth")||"3"),parseFloat(this.element.getAttribute("markerHeight")||"3"),t,!0),r=t.pdf.matrixMult(t.pdf.Matrix(1,0,0,1,-i,-o),r)}else r=t.pdf.Matrix(1,0,0,1,-i,-o);return r},e.prototype.isVisible=function(t,r){return Pf(this,t,r)},e}(B1),are=function(n){function e(t,r){return n.call(this,t,r)||this}return zr(e,n),e.prototype.getR=function(t){var r;return(r=this.r)!==null&&r!==void 0?r:this.r=parseFloat(Lt(this.element,t.styleSheets,"r")||"0")},e.prototype.getRx=function(t){return this.getR(t)},e.prototype.getRy=function(t){return this.getR(t)},e}(FO),lre=function(n){function e(t,r){return n.call(this,!1,t,r)||this}return zr(e,n),e}(OO),BO=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return zr(e,n),e.prototype.renderCore=function(t){return jr(this,void 0,void 0,function(){var r,i;return qr(this,function(o){switch(o.label){case 0:r=0,i=this.children,o.label=1;case 1:return r<i.length?[4,i[r].render(t)]:[3,4];case 2:o.sent(),o.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.getBoundingBoxCore=function(t){return XA(t,this)},e}(IO),ure=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return zr(e,n),e.prototype.isVisible=function(t,r){return Pf(this,t,r)},e.prototype.render=function(t){return jr(this,void 0,void 0,function(){var r,i,o,s,a;return qr(this,function(l){switch(l.label){case 0:return this.isVisible(t.attributeState.visibility!=="hidden",t)?(r=this.getX(t),i=this.getY(t),o=this.getWidth(t),s=this.getHeight(t),t.pdf.saveGraphicsState(),a=t.transform,this.element.hasAttribute("transform")&&(a=t.pdf.matrixMult(_S(this.element.getAttribute("transform"),t),a)),t.pdf.setCurrentTransformationMatrix(a),t.withinUse||Lt(this.element,t.styleSheets,"overflow")==="visible"||t.pdf.rect(r,i,o,s).clip().discardPath(),[4,n.prototype.render.call(this,t.clone({transform:t.pdf.unitMatrix,viewport:t.withinUse?t.viewport:new MS(o,s)}))]):[2];case 1:return l.sent(),t.pdf.restoreGraphicsState(),[2]}})})},e.prototype.computeNodeTransform=function(t){return this.computeNodeTransformCore(t)},e.prototype.computeNodeTransformCore=function(t){if(t.withinUse)return t.pdf.unitMatrix;var r,i=this.getX(t),o=this.getY(t),s=this.getViewBox();if(s){var a=this.getWidth(t),l=this.getHeight(t);r=O1(this.element,s,i,o,a,l,t)}else r=t.pdf.Matrix(1,0,0,1,i,o);return r},e.prototype.getWidth=function(t){if(this.width!==void 0)return this.width;var r,i,o=t.svg2pdfParameters;if(this.isOutermostSvg(t))if(o.width!=null)r=o.width;else if(i=Lt(this.element,t.styleSheets,"width"))r=parseFloat(i);else{var s=this.getViewBox();if(s&&(o.height!=null||Lt(this.element,t.styleSheets,"height"))){var a=s[2]/s[3];r=this.getHeight(t)*a}else r=Math.min(300,t.viewport.width,2*t.viewport.height)}else r=(i=Lt(this.element,t.styleSheets,"width"))?parseFloat(i):t.viewport.width;return this.width=r},e.prototype.getHeight=function(t){if(this.height!==void 0)return this.height;var r,i,o=t.svg2pdfParameters;if(this.isOutermostSvg(t))if(o.height!=null)r=o.height;else if(i=Lt(this.element,t.styleSheets,"height"))r=parseFloat(i);else{var s=this.getViewBox();if(s){var a=s[2]/s[3];r=this.getWidth(t)/a}else r=Math.min(150,t.viewport.width/2,t.viewport.height)}else r=(i=Lt(this.element,t.styleSheets,"height"))?parseFloat(i):t.viewport.height;return this.height=r},e.prototype.getX=function(t){if(this.x!==void 0)return this.x;if(this.isOutermostSvg(t))return this.x=0;var r=Lt(this.element,t.styleSheets,"x");return this.x=r?parseFloat(r):0},e.prototype.getY=function(t){if(this.y!==void 0)return this.y;if(this.isOutermostSvg(t))return this.y=0;var r=Lt(this.element,t.styleSheets,"y");return this.y=r?parseFloat(r):0},e.prototype.getViewBox=function(){if(this.viewBox!==void 0)return this.viewBox;var t=this.element.getAttribute("viewBox");return this.viewBox=t?rl(t):void 0},e.prototype.isOutermostSvg=function(t){return t.svg2pdfParameters.element===this.element},e}(BO),UO=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return zr(e,n),e.prototype.isVisible=function(t,r){return Pf(this,t,r)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(BO),cre=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return zr(e,n),e.prototype.renderCore=function(t){return jr(this,void 0,void 0,function(){var r,i,o,s;return qr(this,function(a){switch(a.label){case 0:return[4,n.prototype.renderCore.call(this,t)];case 1:return a.sent(),(r=Lt(this.element,t.styleSheets,"href"))&&(i=this.getBoundingBox(t),o=t.pdf.internal.scaleFactor,s=t.pdf.internal.pageSize.getHeight(),t.pdf.link(o*(i[0]*t.transform.sx+t.transform.tx),s-o*(i[1]*t.transform.sy+t.transform.ty),o*i[2],o*i[3],{url:r})),[2]}})})},e}(UO),hre=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return zr(e,n),e.prototype.apply=function(t){return jr(this,void 0,void 0,function(){var r,i,o,s,a;return qr(this,function(l){switch(l.label){case 0:if(!this.isVisible(!0,t))return[2];r=t.pdf.matrixMult(this.computeNodeTransform(t),t.transform),t.pdf.setCurrentTransformationMatrix(r),i=0,o=this.children,l.label=1;case 1:return i<o.length?[4,o[i].render(new Cf(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,withinClipPath:!0,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]:[3,4];case 2:l.sent(),l.label=3;case 3:return i++,[3,1];case 4:return s=this.children.length>0&&!!Lt(this.children[0].element,t.styleSheets,"clip-rule"),a=s?this.getClipRuleAttr(this.children[0].element,t.styleSheets):this.getClipRuleAttr(this.element,t.styleSheets),t.pdf.clip(a).discardPath(),t.pdf.setCurrentTransformationMatrix(r.inversed()),[2]}})})},e.prototype.getBoundingBoxCore=function(t){return XA(t,this)},e.prototype.isVisible=function(t,r){return Pf(this,t,r)},e.prototype.getClipRuleAttr=function(t,r){return Lt(t,r,"clip-rule")==="evenodd"?"evenodd":void 0},e}(B1);function JA(n,e){var t,r=[];switch(function(o,s){for(var a=[],l=0;l<o.childNodes.length;l++){var u=o.childNodes[l];u.nodeName.charAt(0)!=="#"&&a.push(u)}for(l=0;l<a.length;l++)s(l,a[l])}(n,function(o,s){return r.push(JA(s,e))}),n.tagName.toLowerCase()){case"a":t=new cre(n,r);break;case"g":t=new UO(n,r);break;case"circle":t=new are(n,r);break;case"clippath":t=new hre(n,r);break;case"ellipse":t=new Qne(n,r);break;case"lineargradient":t=new CO(n,r);break;case"image":t=new rre(n,r);break;case"line":t=new Zne(n,r);break;case"marker":t=new sre(n,r);break;case"path":t=new tre(n,r);break;case"pattern":t=new RO(n,r);break;case"polygon":t=new ire(n,r);break;case"polyline":t=new lre(n,r);break;case"radialgradient":t=new PO(n,r);break;case"rect":t=new Jne(n,r);break;case"svg":t=new ure(n,r);break;case"symbol":t=new NO(n,r);break;case"text":t=new ere(n,r);break;case"use":t=new Kne(n,r);break;default:t=new ore(n,r)}if(e!=null&&t.element.hasAttribute("id")){var i=_O(t.element.id,{isIdentifier:!0});e[i]=e[i]||t}return t.children.forEach(function(o){return o.setParent(t)}),t}var fre=function(){function n(e,t){this.rootSvg=e,this.loadExternalSheets=t,this.styleSheets=[]}return n.prototype.load=function(){return jr(this,void 0,void 0,function(){var e;return qr(this,function(t){switch(t.label){case 0:return[4,this.collectStyleSheetTexts()];case 1:return e=t.sent(),this.parseCssSheets(e),[2]}})})},n.prototype.collectStyleSheetTexts=function(){return jr(this,void 0,void 0,function(){var e,t,r,i,o;return qr(this,function(s){switch(s.label){case 0:if(e=[],this.loadExternalSheets&&this.rootSvg.ownerDocument)for(i=0;i<this.rootSvg.ownerDocument.childNodes.length;i++)(t=this.rootSvg.ownerDocument.childNodes[i]).nodeName==="xml-stylesheet"&&typeof t.data=="string"&&e.push(n.loadSheet(t.data.match(/href=["'].*?["']/)[0].split("=")[1].slice(1,-1)));for(r=this.rootSvg.querySelectorAll("style,link"),i=0;i<r.length;i++)gf(o=r[i],"style")?e.push(o.textContent):this.loadExternalSheets&&gf(o,"link")&&o.getAttribute("rel")==="stylesheet"&&o.hasAttribute("href")&&e.push(n.loadSheet(o.getAttribute("href")));return[4,Promise.all(e)];case 1:return[2,s.sent().filter(function(a){return a!==null})]}})})},n.prototype.parseCssSheets=function(e){for(var t=document.implementation.createHTMLDocument(""),r=0,i=e;r<i.length;r++){var o=i[r],s=t.createElement("style");s.textContent=o,t.body.appendChild(s);var a=s.sheet;if(a instanceof CSSStyleSheet){for(var l=a.cssRules.length-1;l>=0;l--){var u=a.cssRules[l];if(u instanceof CSSStyleRule){var c=u;if(c.selectorText.indexOf(",")>=0){a.deleteRule(l);for(var h=c.cssText.substring(c.selectorText.length),f=n.splitSelectorAtCommas(c.selectorText),d=0;d<f.length;d++)a.insertRule(f[d]+h,l+d)}}else a.deleteRule(l)}this.styleSheets.push(a)}}},n.splitSelectorAtCommas=function(e){for(var t,r=/,|["']/g,i=/[^\\]["]/g,o=/[^\\][']/g,s=[],a="initial",l=-1,u=i,c=0;c<e.length;)switch(a){case"initial":r.lastIndex=c,(t=r.exec(e))?(t[0]===","?(s.push(e.substring(l+1,r.lastIndex-1).trim()),l=r.lastIndex-1):(a="withinQuotes",u=t[0]==='"'?i:o),c=r.lastIndex):(s.push(e.substring(l+1).trim()),c=e.length);break;case"withinQuotes":u.lastIndex=c,(t=u.exec(e))&&(c=u.lastIndex,a="initial")}return s},n.loadSheet=function(e){return new Promise(function(t,r){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="text",i.onload=function(){i.status!==200&&r(new Error("Error ".concat(i.status,": Failed to load '").concat(e,"'"))),t(i.responseText)},i.onerror=r,i.onabort=r,i.send(null)}).catch(function(){return null})},n.prototype.getPropertyValue=function(e,t){for(var r=[],i=0,o=this.styleSheets;i<o.length;i++)for(var s=o[i],a=0;a<s.cssRules.length;a++){var l=s.cssRules[a];l.style.getPropertyValue(t)&&e.matches(l.selectorText)&&r.push(l)}if(r.length!==0)return r.reduce(function(u,c){return f=c,((d=(h=u).style.getPropertyPriority(t))!==f.style.getPropertyPriority(t)?d==="important"?1:-1:Vne(h.selectorText,f.selectorText))===1?u:c;var h,f,d}).style.getPropertyValue(t)||void 0},n}(),dre=function(){function n(){this.measureMethods={}}return n.prototype.getTextOffset=function(e,t){var r=t.textAnchor;if(r==="start")return 0;var i=this.measureTextWidth(e,t),o=0;switch(r){case"end":o=i;break;case"middle":o=i/2}return o},n.prototype.measureTextWidth=function(e,t){if(e.length===0)return 0;var r=t.fontFamily;return this.getMeasureFunction(r).call(this,e,t.fontFamily,t.fontSize+"px",t.fontStyle,t.fontWeight)},n.prototype.getMeasurementTextNode=function(){if(!this.textMeasuringTextElement){this.textMeasuringTextElement=document.createElementNS(a4,"text");var e=document.createElementNS(a4,"svg");e.appendChild(this.textMeasuringTextElement),e.style.setProperty("position","absolute"),e.style.setProperty("visibility","hidden"),document.body.appendChild(e)}return this.textMeasuringTextElement},n.prototype.canvasTextMeasure=function(e,t,r,i,o){var s=document.createElement("canvas").getContext("2d");return s!=null?(s.font=[i,o,r,t].join(" "),s.measureText(e).width):0},n.prototype.svgTextMeasure=function(e,t,r,i,o,s){s===void 0&&(s=this.getMeasurementTextNode());var a=s;return a.setAttribute("font-family",t),a.setAttribute("font-size",r),a.setAttribute("font-style",i),a.setAttribute("font-weight",o),a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),a.textContent=e,a.getBBox().width},n.prototype.getMeasureFunction=function(e){var t=this.measureMethods[e];if(!t){var r="16px",i="normal",o="normal",s=this.canvasTextMeasure(n.testString,e,r,i,o),a=this.svgTextMeasure(n.testString,e,r,i,o);t=Math.abs(s-a)<n.epsilon?this.canvasTextMeasure:this.svgTextMeasure,this.measureMethods[e]=t}return t},n.prototype.cleanupTextMeasuring=function(){if(this.textMeasuringTextElement){var e=this.textMeasuringTextElement.parentNode;e&&document.body.removeChild(e),this.textMeasuringTextElement=void 0}},n.testString=`abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789!"$%&/()=?'\\+*-_.:,;^}][{#~|<>`,n.epsilon=.1,n}();function pre(n,e){return jr(this,arguments,void 0,function(t,r,i){var o,s,a,l,u,c,h,f,d,v,y,x,g,S;return i===void 0&&(i={}),qr(this,function(_){switch(_.label){case 0:return o=(x=i.x)!==null&&x!==void 0?x:0,s=(g=i.y)!==null&&g!==void 0?g:0,a=(S=i.loadExternalStyleSheets)!==null&&S!==void 0&&S,u=new MO(l={}),[4,(c=new fre(t,a)).load()];case 1:return _.sent(),h=new MS(r.internal.pageSize.getWidth(),r.internal.pageSize.getHeight()),f=cw(cw({},i),{element:t}),d=new dre,v=new Cf(r,{refsHandler:u,styleSheets:c,viewport:h,svg2pdfParameters:f,textMeasure:d}),r.advancedAPI(),r.saveGraphicsState(),r.setCurrentTransformationMatrix(r.Matrix(1,0,0,1,o,s)),r.setLineWidth(v.attributeState.strokeWidth),y=v.attributeState.fill.color,r.setFillColor(y.r,y.g,y.b),r.setFont(v.attributeState.fontFamily),r.setFontSize(v.attributeState.fontSize*r.internal.scaleFactor),[4,JA(t,l).render(v)];case 2:return _.sent(),r.restoreGraphicsState(),r.compatAPI(),v.textMeasure.cleanupTextMeasuring(),[2,r]}})})}vn.API.svg=function(n,e){return e===void 0&&(e={}),pre(n,this,e)};const Rr="[PDF Export]",mre=n=>{if(!n||!n.includes("x"))return[1,1];const[e,t]=n.split("x").map(Number);return[isNaN(e)?1:e,isNaN(t)?1:t]},mE={a4:{width:210,height:297},letter:{width:215.9,height:279.4}},Rm="a4",zO=20,gre=20,ad=10,f4=5,vre=(n,e,t=Rm)=>{const r=mE[t]||mE.a4,i={width:r.width,height:r.height},o={width:r.height,height:r.width},s=zO,a=ad,l=ad,u=ad,c=i.width-s-l,h=i.height-a-u,f=ad,d=gre,v=ad,y=ad,x=o.width-f-v,g=o.height-d-y,S=Math.min(c/n,h/e);return Math.min(x/n,g/e)>S?{orientation:"l",width:o.width,height:o.height,marginLeft:f,marginTop:d,marginRight:v,marginBottom:y,printableX:f,printableY:d,printableWidth:x,printableHeight:g}:{orientation:"p",width:i.width,height:i.height,marginLeft:s,marginTop:a,marginRight:l,marginBottom:u,printableX:s,printableY:a,printableWidth:c,printableHeight:h}},yre=(n,e,t=1)=>{const{pathId:r,type:i,textPosition:o}=n,s=document.createElementNS("http://www.w3.org/2000/svg","g"),a=.08,l=2.2,u=1.2,c=1.2,h=.8,f=1.2,d="#222222",v=t>1e-6?a/t:a,y=t>1e-6?l/t:l,x=t>1e-6?u/t:u,g=t>1e-6?c/t:c,S=t>1e-6?h/t:h,_=t>1e-6?f/t:f,E=(C,I)=>{const F=document.createElementNS("http://www.w3.org/2000/svg",C);for(const R in I)F.setAttribute(R,I[R]);return F};if(i==="line"&&(e!=null&&e.endpoints)){const[C,I]=e.endpoints,R=(e.length||0).toFixed(2),k=I[0]-C[0],L=I[1]-C[1],N=(C[0]+I[0])/2,z=(C[1]+I[1])/2,H=Math.sqrt(k*k+L*L),G=H>1e-6?k/H:1,K=H>1e-6?L/H:0,ee=-K,le=G,V=o.x,J=o.y,j=V-N,ie=J-z,D=j*ee+ie*le,q=Math.abs(D)<g?Math.sign(D||1)*g:D,Z=[C[0]+ee*q,C[1]+le*q],Q=[I[0]+ee*q,I[1]+le*q],se=[C[0]+ee*Math.sign(q)*S,C[1]+le*Math.sign(q)*S],me=[I[0]+ee*Math.sign(q)*S,I[1]+le*Math.sign(q)*S],Se=[Z[0]+ee*Math.sign(q)*_,Z[1]+le*Math.sign(q)*_],Ce=[Q[0]+ee*Math.sign(q)*_,Q[1]+le*Math.sign(q)*_],$e=G,ke=K,fe=`M ${Z[0]} ${Z[1]} l ${$e*x} ${ke*x} l ${-ke*x*.35} ${$e*x*.35} l ${-$e*x*.65} ${-ke*x*.65} z`,Ie=`M ${Q[0]} ${Q[1]} l ${-$e*x} ${-ke*x} l ${ke*x*.35} ${-$e*x*.35} l ${$e*x*.65} ${ke*x*.65} z`,ae=(R.length*y*.65+g*2)/2,gt=(V-Z[0])*$e+(J-Z[1])*ke,Ye=Math.max(x,gt-ae),Ge=Math.min(H-x,gt+ae),et=[Z[0]+$e*Ye,Z[1]+ke*Ye],vt=[Z[0]+$e*Ge,Z[1]+ke*Ge],bt=Ye>x+1e-6,pe=Ge<H-x-1e-6;s.appendChild(E("line",{x1:se[0],y1:se[1],x2:Se[0],y2:Se[1],stroke:d,"stroke-width":v,"stroke-linecap":"round","stroke-linejoin":"round"})),s.appendChild(E("line",{x1:me[0],y1:me[1],x2:Ce[0],y2:Ce[1],stroke:d,"stroke-width":v,"stroke-linecap":"round","stroke-linejoin":"round"})),bt&&s.appendChild(E("line",{x1:Z[0],y1:Z[1],x2:et[0],y2:et[1],stroke:d,"stroke-width":v,"stroke-linecap":"round","stroke-linejoin":"round"})),pe&&s.appendChild(E("line",{x1:vt[0],y1:vt[1],x2:Q[0],y2:Q[1],stroke:d,"stroke-width":v,"stroke-linecap":"round","stroke-linejoin":"round"})),s.appendChild(E("path",{d:fe,fill:d,stroke:"none"})),s.appendChild(E("path",{d:Ie,fill:d,stroke:"none"}));const te=E("text",{x:V,y:J,"font-size":y,fill:d,stroke:"none","text-anchor":"middle","dominant-baseline":"middle","font-family":"Arial, sans-serif"});te.textContent=R,s.appendChild(te)}else if(i==="circle"&&(e!=null&&e.center)&&e.diameter!=null){const[C,I]=e.center,F=e.diameter,R=e.radius||F/2,k=`${F.toFixed(2)}`,L=o.x,N=o.y,z=L-C,H=N-I;let K=z*z+H*H<1e-9?0:Math.atan2(H,z);const ee=Math.cos(K),le=Math.sin(K),V=[C+ee*R,I+le*R],J=[L-ee*g,N-le*g];s.appendChild(E("line",{x1:V[0],y1:V[1],x2:J[0],y2:J[1],stroke:d,"stroke-width":v,"stroke-linecap":"round","stroke-linejoin":"round"}));const j=E("text",{x:L,y:N,"font-size":y,fill:d,stroke:"none","text-anchor":"middle","dominant-baseline":"middle","font-family":"Arial, sans-serif"});j.textContent=k,s.appendChild(j)}return s};function xre(n,e){return{exportPdf:de.useCallback(async()=>{if(console.log(`${Rr} Starting PDF Export...`),console.log(`${Rr} Input Viewboxes:`,n),console.log(`${Rr} Input Measurements:`,e),!n||n.length===0){console.error(`${Rr} No viewboxes available for PDF export.`),alert("No viewboxes created yet to export.");return}let r,i="technical-drawing-viewboxes.pdf",o=!0;try{for(const[s,a]of n.entries()){if(console.log(`${Rr} Processing Viewbox ${s+1}/${n.length}: ID=${a.id}, Layout=${a.layout}`),a.items.filter(Q=>Q&&Q.svgData&&Q.svgData.viewBox).length===0){console.warn(`${Rr}   Viewbox ${a.id} has no items with valid data. Skipping.`);continue}const[u,c]=mre(a.layout),h=Array(c).fill(0),f=Array(u).fill(0),d=[];for(let Q=0;Q<u*c;Q++){const se=a.items[Q];if(!se||!se.svgData||!se.svgData.viewBox){d[Q]=null;continue}const me=lte(se.svgData.viewBox);if(!me||me.width<=0||me.height<=0){d[Q]=null;continue}d[Q]={item:se,itemVB:me};const Se=Q%c,Ce=Math.floor(Q/c);h[Se]=Math.max(h[Se],me.width),f[Ce]=Math.max(f[Ce],me.height)}const v=[0];for(let Q=0;Q<c-1;Q++)v.push(v[Q]+h[Q]+f4);const y=[0];for(let Q=0;Q<u-1;Q++)y.push(y[Q]+f[Q]+f4);const x=v[c-1]+h[c-1],g=y[u-1]+f[u-1],S={x:0,y:0,width:x,height:g};if(console.log(`${Rr}   Grid Dimensions: ${u}x${c}`),console.log(`${Rr}   Max Col Widths: [${h.map(Q=>Q.toFixed(2)).join(", ")}]`),console.log(`${Rr}   Max Row Heights: [${f.map(Q=>Q.toFixed(2)).join(", ")}]`),console.log(`${Rr}   Calculated Combined Unscaled Bounds: W=${x.toFixed(2)}, H=${g.toFixed(2)}`),x<=1e-6||g<=1e-6){console.warn(`${Rr}   Skipping Viewbox ${a.id} due to zero or negative combined dimensions.`);continue}const _=vre(x,g),E={width:_.printableWidth,height:_.printableHeight},C=[_.printableX,_.printableY],I=E.width/x,F=E.height/g,R=Math.min(I,F);console.log(`${Rr}   Page Layout: size=${Rm}, orientation=${_.orientation}, W=${_.width}mm, H=${_.height}mm`),console.log(`${Rr}   Printable Area: W=${E.width}mm, H=${E.height}mm`),console.log(`${Rr}   Single Viewbox Scale: ${R.toFixed(4)}`),o?(r=new vn({orientation:_.orientation,unit:"mm",format:Rm}),o=!1):r.addPage(Rm,_.orientation);const k=r.internal.getNumberOfPages();r.setPage(k);const L=document.createElementNS("http://www.w3.org/2000/svg","svg");L.setAttribute("xmlns","http://www.w3.org/2000/svg"),L.setAttribute("width",_.width),L.setAttribute("height",_.height),L.setAttribute("viewBox",`0 0 ${_.width} ${_.height}`);const N=document.createElementNS("http://www.w3.org/2000/svg","g");L.appendChild(N);const z=x*R,H=g*R,G=C[0]+(E.width-z)/2,K=C[1]+(E.height-H)/2;console.log(`${Rr}   Scaled Content Size: ${z.toFixed(2)}x${H.toFixed(2)}mm`),console.log(`${Rr}   Overall Translation: dX=${G.toFixed(2)}, dY=${K.toFixed(2)}`);const ee=document.createElementNS("http://www.w3.org/2000/svg","g");ee.setAttribute("transform",`translate(${G}, ${K}) scale(${R})`),N.appendChild(ee);const le=.15,V=.1,J=R>1e-6?le/R:le,j=R>1e-6?V/R:V,ie=R>1e-6?1/R:1;console.log(`${Rr}   Effective Stroke Widths (Viewbox): Vis=${J.toFixed(4)}, Hid=${j.toFixed(4)}, DashScale=${ie.toFixed(3)}`);for(let Q=0;Q<u*c;Q++){const se=d[Q];if(!se)continue;const{item:me,itemVB:Se}=se,Ce=Q%c,$e=Math.floor(Q/c),ke=v[Ce],fe=y[$e];console.log(`${Rr}     Rendering Item ${me.id} in Cell[${$e},${Ce}] at unscaled origin [${ke.toFixed(2)}, ${fe.toFixed(2)}]`);const Ie=document.createElementNS("http://www.w3.org/2000/svg","g"),Ue=`translate(${ke-Se.x}, ${fe-Se.y})`;Ie.setAttribute("transform",Ue),ee.appendChild(Ie),me.svgData.paths.forEach(Te=>{var Ge;const ae=document.createElementNS("http://www.w3.org/2000/svg","path");ae.setAttribute("d",Te.data);const gt=Te.type==="hidden"||((Ge=Te.id)==null?void 0:Ge.includes("_hidden"));ae.setAttribute("stroke",gt?"#777777":"#000000"),ae.setAttribute("stroke-width",gt?j:J),ae.setAttribute("stroke-linecap","round"),ae.setAttribute("stroke-linejoin","round"),gt&&ae.setAttribute("stroke-dasharray",`${2*ie},${1*ie}`),ae.setAttribute("fill","none"),ae.setAttribute("vector-effect","non-scaling-stroke"),Ie.appendChild(ae);const Ye=e[Te.id];if(Ye&&Ye.viewInstanceId===me.id&&Te.geometry){console.log(`${Rr}       Rendering measurement for path ${Te.id} in item ${me.id} using scale ${R.toFixed(4)}`);const et=yre(Ye,Te.geometry,R);et?Ie.appendChild(et):console.warn(`${Rr}       renderMeasurementToSvg returned null for ${Ye.pathId}`)}})}const D=document.createElementNS("http://www.w3.org/2000/svg","rect");D.setAttribute("x",C[0]),D.setAttribute("y",C[1]),D.setAttribute("width",E.width),D.setAttribute("height",E.height),D.setAttribute("fill","none"),D.setAttribute("stroke","#000000"),D.setAttribute("stroke-width",.2),N.appendChild(D),console.log(`${Rr}     Adding SVG element for page ${k} (Viewbox ${a.id}) to PDF...`),await r.svg(L,{x:0,y:0,width:_.width,height:_.height}),console.log(`${Rr}     Finished adding SVG for page ${k}`),console.log(`${Rr}       Calculating and drawing title block for viewbox ${a.id}...`);const q=wre(_.width,_.height,_.marginLeft,_.marginTop,_.marginRight,_.marginBottom,_.orientation,mE,Rm),Z={...a.titleBlock,scale:`1 : ${(1/R).toFixed(1)}`};Sre(r,q,Z)}r?(console.log(`${Rr} Saving PDF as "${i}"...`),r.save(i),console.log(`${Rr} PDF Export Successful: ${i}`)):(console.warn(`${Rr} PDF object was not initialized (likely no valid viewboxes to export). No export occurred.`),alert("Could not generate PDF: No valid viewboxes found."))}catch(s){console.error(`${Rr} Error during PDF generation:`,s),alert(`Failed to export PDF: ${s.message}. See console for details.`)}},[n,e])}}function wre(n,e,t,r,i,o,s,a,l=Rm){const u=`${Rr} TitleBlockLayout`,c=a[l]||a.a4,h=Math.min(c.width,c.height),f=Math.max(c.width,c.height),d=zO,v=ad,y=h-d-v,x=y/2,S=f*.25*(2/3);console.log(`${u} Base Calc (Portrait ${h}x${f}): PrintableW=${y.toFixed(2)}, TB W=${x.toFixed(2)}, TB H=${S.toFixed(2)}`);const _=3,E=2,C=[1,2],I=C.reduce((K,ee)=>K+ee,0),F=2.5,R=1.2,k=.5,L=n-i-x,N=e-o-S;if(console.log(`${u} Final Position (Current Page ${n}x${e}, Orientation: ${s}): Margins(R/B)=${i}/${o}, TB X=${L.toFixed(2)}, TB Y=${N.toFixed(2)}`),x<=1e-6||S<=1e-6||L<-1e-6||N<-1e-6)return console.error(`${u} Calculated invalid title block dimensions or position.`,{titleBlockX:L,titleBlockY:N,titleBlockWidth:x,titleBlockHeight:S,pageWidth:n,pageHeight:e,marginRight:i,marginBottom:o}),null;const z={x:L,y:N,width:x,height:S},H=S/_,G=[];for(let K=0;K<_;K++){const ee=[],le=N+K*H;let V=L;for(let J=0;J<E;J++){const j=x*(C[J]/I);ee.push({x:V,y:le,width:j,height:H,textX:V+k,textY:le+H/2,maxWidth:j-2*k}),V+=j}G.push(ee)}return console.log(`${u} Calculated Layout:`,{outerBox:z,cells:G}),{outerBox:z,cells:G,fontSize:F,lineHeight:F*R}}function Sre(n,e,t={}){if(!n||!e){console.warn(`${Rr} DrawTitleBlock: Missing pdf instance or layout data.`);return}const r=`${Rr} DrawTitleBlock`;console.log(`${r} Drawing title block... Data:`,t);const{outerBox:i,cells:o,fontSize:s}=e,a=[[{label:"Project:",value:t.project||"CAD-OS Demo"},{label:"Part Name:",value:t.partName||"N/A"}],[{label:"Scale:",value:t.scale||"1:1"},{label:"Material:",value:t.material||"Steel"}],[{label:"Drawn By:",value:t.drawnBy||"Cline"},{label:"Date:",value:t.date||new Date().toLocaleDateString()}]],l=.15;n.saveGraphicsState(),n.setLineWidth(l),n.setDrawColor(0),n.setTextColor(0),n.rect(i.x,i.y,i.width,i.height,"S");let u=i.x;for(let h=0;h<o[0].length-1;h++)u+=o[0][h].width,n.line(u,i.y,u,i.y+i.height);let c=i.y;for(let h=0;h<o.length-1;h++)c+=o[h][0].height,n.line(i.x,c,i.x+i.width,c);for(let h=0;h<o.length;h++)for(let f=0;f<o[h].length;f++){const d=o[h][f],v=a[h]&&a[h][f];if(v){const y=v.label||"",x=v.value||"",g=11,S=10,_=d.textY-g*.15,E=d.textY+S*.35;n.setFont("helvetica","bold"),n.setFontSize(g),n.text(y,d.textX,_,{align:"left",baseline:"middle",maxWidth:d.maxWidth}),n.setFont("helvetica","normal"),n.setFontSize(S),n.text(x,d.textX,E,{align:"left",baseline:"middle",maxWidth:d.maxWidth})}else console.warn(`${r} Missing data for cell [${h}][${f}]`)}n.restoreGraphicsState(),console.log(`${r} Finished drawing title block.`)}function _re(n,e){const[t,r]=de.useState(1),[i,o]=de.useState({x:0,y:0}),[s,a]=de.useState(!1),[l,u]=de.useState({x:0,y:0}),[c,h]=de.useState({x:0,y:0}),[f,d]=de.useState(null),[v,y]=de.useState({x:0,y:0}),[x,g]=de.useState({x:0,y:0}),S=de.useRef(null),_=de.useRef(null),E=de.useRef({move:null,end:null,cancel:null,target:null,type:null,options:null}),C=de.useRef(()=>{}),I=de.useRef(()=>{}),F=de.useCallback(H=>{_.current=H},[]),R=de.useCallback(H=>{S.current=H},[]),k=de.useCallback(H=>{if(H.preventDefault(),!n.current)return;const G=n.current.getBoundingClientRect(),K=H.clientX-G.left,ee=H.clientY-G.top,le=(K-i.x)/t,V=(ee-i.y)/t,J=-Math.sign(H.deltaY)*.1,j=Math.max(.1,Math.min(10,t+J*t)),ie=K-le*j,D=ee-V*j;r(j),o({x:ie,y:D})},[n,i,t]);de.useEffect(()=>{C.current=H=>{var ee;const G=E.current.type==="touch",K=G?H.touches[0]:H;if(K){if(f){G&&H.cancelable&&H.preventDefault();const le=K.clientX-v.x,V=K.clientY-v.y,J=S.current;if(!J)return;const j=(ee=J.getScreenCTM())==null?void 0:ee.inverse();if(!j)return;const ie=le*j.a+V*j.c,D=le*j.b+V*j.d,q={x:x.x+ie,y:x.y+D};_.current&&_.current(f,q)}else if(s){G&&H.cancelable&&H.preventDefault();const le=K.clientX-l.x,V=K.clientY-l.y;o({x:c.x+le,y:c.y+V})}}},I.current=H=>{const{move:G,end:K,cancel:ee,target:le,type:V,options:J}=E.current;if(le&&G&&K){const j=V==="touch"?"touchmove":"mousemove",ie=V==="touch"?"touchend":"mouseup",D="touchcancel";le.removeEventListener(j,G,J),le.removeEventListener(ie,K,J),V==="touch"&&ee&&le.removeEventListener(D,ee,J),le===n.current&&V==="mouse"&&le.removeEventListener("mouseleave",K,J),E.current={move:null,end:null,cancel:null,target:null,type:null,options:null}}f?(d(null),S.current&&(S.current=null)):s&&a(!1)}},[s,f,l,c,v,x,_,S,n,o,d,a]);const L=de.useCallback(H=>{var se,me;E.current.target&&(console.warn("Interaction start called while listeners were still active. Cleaning up."),I.current(H));const G=H.type.startsWith("touch");if(G&&H.touches.length>1)return;const K=G?H.touches[0]:H;if(!K)return;const ee=H.target,le=ee.closest("svg");S.current=le;const V=ee.closest(".measurement-group");if(ee.closest('button, input[type="range"], .drawing-controls'))return;const j=Se=>C.current(Se),ie=Se=>I.current(Se),D=Se=>I.current(Se);let q=null,Z=null,Q=null;if(V&&V.id&&S.current){const Se=V.id,$e=(e?e():{})[Se];if(!$e||typeof((se=$e.textPosition)==null?void 0:se.x)!="number"||typeof((me=$e.textPosition)==null?void 0:me.y)!="number"){console.warn(`[Interaction] Measurement ${Se} not found or invalid textPosition. Aborting drag start.`,$e);return}try{const ke=S.current.getScreenCTM();if(!ke||!ke.inverse()){console.error("[Interaction] Drag Start Error: Invalid CTM for SVG:",S.current);return}}catch(ke){console.error("[Interaction] Drag Start Error: Exception getting/inverting CTM for SVG:",S.current,ke);return}H.preventDefault&&H.preventDefault(),d(Se),y({x:K.clientX,y:K.clientY}),g($e.textPosition),q=window,Z=G?"touch":"mouse",Q=G?{passive:!1}:void 0,window.addEventListener(Z==="touch"?"touchmove":"mousemove",j,Q),window.addEventListener(Z==="touch"?"touchend":"mouseup",ie),Z==="touch"&&window.addEventListener("touchcancel",D)}else(!G&&H.button===0||G&&H.touches.length===1)&&(G&&H.preventDefault&&H.preventDefault(),a(!0),u({x:K.clientX,y:K.clientY}),h({...i}),n.current&&(q=n.current,Z=G?"touch":"mouse",Q={capture:!0,passive:!G},q.addEventListener(Z==="touch"?"touchmove":"mousemove",j,Q),q.addEventListener(Z==="touch"?"touchend":"mouseup",ie,!0),Z==="touch"&&q.addEventListener("touchcancel",D,!0),Z==="mouse"&&q.addEventListener("mouseleave",ie,!0)));q&&(E.current={move:j,end:ie,cancel:Z==="touch"?D:null,target:q,type:Z,options:Q})},[i,n,e,d,y,g,a,u,h,S]);de.useEffect(()=>()=>{I.current()},[]);const N=de.useCallback(()=>{r(1),o({x:0,y:0}),E.current.target?I.current():(f&&d(null),s&&a(!1))},[f,s]);return{zoomLevel:t,panOffset:i,isPanning:s,draggingMeasurementId:f,interactionHandlers:{onWheel:k,onMouseDown:L,onTouchStart:L},resetInteraction:N,setZoomLevel:r,setPanOffset:o,setOnMeasurementDrag:F,setInteractionSvgRef:R}}function bre({selectedModelName:n,viewboxes:e,isMobile:t,onAddViewbox:r,selectedLayout:i,onLayoutChange:o,selectedViewToAdd:s,onViewSelectionChange:a,includeHiddenLines:l,onHiddenLinesToggle:u,onAddViewToCell:c,selectedTarget:h,onCellSelection:f,onTitleBlockChange:d}){const v=de.useRef(null),y=de.useRef(null),[x,g]=de.useState({width:800,height:600}),[S,_]=de.useState(10),[E,C]=de.useState({}),I=de.useCallback(()=>E,[E]),{exportPdf:F}=xre(e,E),{zoomLevel:R,panOffset:k,isPanning:L,interactionHandlers:N,resetInteraction:z,setZoomLevel:H,setPanOffset:G,setOnMeasurementDrag:K}=_re(v,I),ee=de.useCallback((j,ie)=>{C(D=>({...D,[j]:{...D[j],textPosition:ie}}))},[]);de.useEffect(()=>{K&&K(ee)},[K,ee]);const le=de.useCallback((j,ie,D,q,Z)=>{var Q;if(!ie.geometry||ie.geometry.type!=="line"&&ie.geometry.type!=="circle"){console.log(`[Canvas] Clicked non-measurable path: ${j}, Type: ${(Q=ie.geometry)==null?void 0:Q.type}`);return}C(se=>{const me={...se};if(me[j])delete me[j],console.log(`Removed Measurement: ${j}`);else{const Se={x:0,y:0};if(ie.geometry.type==="line"&&ie.geometry.endpoints){const[ke,fe]=ie.geometry.endpoints[0],[Ie,Ue]=ie.geometry.endpoints[1];Se.x=(ke+Ie)/2,Se.y=(fe+Ue)/2-5}else ie.geometry.type==="circle"&&ie.geometry.center&&(Se.x=ie.geometry.center[0],Se.y=ie.geometry.center[1]);let Ce;const $e=j.split("_");j.startsWith("standard_")?(Ce="standard_layout",console.log(`[INFO] Clicked path ${j} belongs to Standard Layout: ${Ce}`)):$e.length>=4?(Ce=$e.slice(0,$e.length-3).join("_"),console.log(`[INFO] Clicked path ${j} belongs to Part View: ${Ce}`)):(Ce=j,console.warn(`[WARN] Could not reliably extract viewId from pathId: ${j}. Using full ID.`)),me[j]={pathId:j,type:ie.geometry.type,textPosition:Se,viewInstanceId:Z,geometry:ie.geometry},console.log("--- Added Measurement ---"),console.log(`  Path ID: ${j}`),console.log(`  Type: ${ie.geometry.type}`),console.log("  Initial Text Pos:",Se),console.log(`  Stored View Instance ID: ${Z}`),console.log("------------------------")}return me})},[]);de.useEffect(()=>{const j=()=>{v.current&&g({width:v.current.clientWidth,height:v.current.clientHeight})};return j(),window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]);const V=de.useCallback(()=>{z(),C({})},[z]),J=e&&e.length>0;return Je("div",{ref:v,style:{width:"100%",height:"100%",position:"relative",backgroundColor:"#e0e0e0",overflow:"hidden",cursor:L?"grabbing":"grab",touchAction:"none"},...N,children:[ce("div",{className:"drawing-controls",style:{position:"absolute",top:0,right:0,zIndex:10,pointerEvents:"auto"},children:ce(ate,{selectedModelName:n,isMobile:t,zoomLevel:R,scale:S,containerSize:x,panOffset:k,onZoomChange:H,onPanChange:G,onScaleChange:_,onResetView:V,onExportPDF:F,onAddViewbox:r,selectedLayout:i,onLayoutChange:o,selectedViewToAdd:s,onViewSelectionChange:a,includeHiddenLines:l,onHiddenLinesToggle:u,onAddViewToCell:c})}),ce("div",{ref:y,style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",transform:`translate(${k.x}px, ${k.y}px) scale(${R})`,transformOrigin:"0 0"},children:J?e.map((j,ie)=>ce(mY,{viewboxData:j,selectedTarget:h,onCellSelection:f,onTitleBlockChange:d,onPathClick:le,measurements:Object.values(E),zoomLevel:R},j.id)):Je("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#666",fontSize:"16px",textAlign:"center"},children:["No viewboxes created yet.",ce("br",{}),"Use controls to add a viewbox."]})})]})}const Mre=async(n,e,t,r="png")=>{if(console.log("generate3DModelImageDataUrl called with format:",r),!n||!n.faces||!n.faces.vertices)throw new Error("Invalid or missing high detail mesh data.");if(!e)throw new Error("Captured camera state is required.");if(!t)throw new Error("Main camera reference is required.");let i=null,o=null,s=null,a=null,l=null,u=null,c=null,h=null,f=null,d=null;try{const v=t.aspect,y=4096,x=Math.round(y*v);i=document.createElement("canvas"),i.width=x,i.height=y,o=new Vw({canvas:i,antialias:!0,preserveDrawingBuffer:!0,alpha:!1,precision:"highp"}),o.setSize(x,y),o.setClearColor(new Kt("#121212")),o.shadowMap.enabled=!0,s=new og,s.add(new fA(16777215,1.5));const g=new qx(16777215,3);g.position.set(10,10,10),g.castShadow=!0,s.add(g);const S=new qx(16777215,1);S.position.set(-10,-10,5),s.add(S),s.add(new cA(16777215,5592405,1)),n.faces&&n.faces.vertices&&n.faces.normals&&n.faces.triangles&&(l=new Rn,l.setAttribute("position",new Mr(new Float32Array(n.faces.vertices),3)),l.setAttribute("normal",new Mr(new Float32Array(n.faces.normals),3)),l.setIndex(new Mr(new Uint32Array(n.faces.triangles),1)),c=new uS({color:"#6a92a6",metalness:.4,roughness:.3,envMapIntensity:.8,flatShading:!1}),f=new xo(l,c),f.castShadow=!0,f.receiveShadow=!0,s.add(f)),n.edges&&n.edges.vertices&&(u=new Rn,u.setAttribute("position",new Mr(new Float32Array(n.edges.vertices),3)),h=new Ss({color:"#304352",linewidth:1}),d=new Kl(u,h),s.add(d)),a=new _i(e.fov,x/y,t.near,t.far),a.position.copy(e.position),a.quaternion.copy(e.quaternion),a.updateProjectionMatrix(),o.render(s,a);const _=`image/${r}`,E=r==="jpeg"?.95:void 0;return o.domElement.toDataURL(_,E)}catch(v){throw console.error("Error generating 3D model image data URL:",v),v}finally{o&&o.dispose(),l&&l.dispose(),u&&u.dispose(),c&&c.dispose(),h&&h.dispose(),i=null,o=null,s=null,a=null,l=null,u=null,c=null,h=null,f=null,d=null}};fr.DEFAULT_UP.set(0,0,1);function Ere({target:n=[0,0,0],modelSize:e=100,controlsRef:t}){const{camera:r}=fs(),i=de.useRef(!1);return de.useEffect(()=>{if(!i.current){const o=e*2.5;r.position.set(o*Math.sin(Math.PI/4),-o*Math.cos(Math.PI/4),o*.7),r.lookAt(n[0],n[1],n[2]),r.updateProjectionMatrix(),i.current=!0}},[r,e,n]),de.useEffect(()=>{t.current&&(t.current.target.set(n[0],n[1],n[2]),t.current.update())},[t,n]),ce(U6,{ref:t,enableRotate:!0,enablePan:!1,enableZoom:!0,autoRotate:!1,maxPolarAngle:Math.PI*.75,minPolarAngle:Math.PI*.25,makeDefault:!0})}function Are(){return Je(Xm,{children:[ce("ambientLight",{intensity:1.5}),ce("directionalLight",{position:[10,10,10],intensity:3,castShadow:!0}),ce("directionalLight",{position:[-10,-10,5],intensity:1}),ce("hemisphereLight",{groundColor:"#555",intensity:1})]})}function Tre({modelSize:n=100}){const e=Math.max(n*5,500),t=Math.floor(e/20);return ce("group",{position:[0,0,-.01],children:ce("gridHelper",{args:[e,t,8947848,4473924],rotation:[Math.PI/2,0,0]})})}function Cre({mesh:n,highQuality:e,modelId:t}){return!n||!n.faces?null:Je("group",{children:[n.faces&&n.faces.vertices&&n.faces.normals&&n.faces.triangles&&Je("mesh",{children:[Je("bufferGeometry",{children:[ce("bufferAttribute",{attach:"attributes-position",count:n.faces.vertices.length/3,array:new Float32Array(n.faces.vertices),itemSize:3}),ce("bufferAttribute",{attach:"attributes-normal",count:n.faces.normals.length/3,array:new Float32Array(n.faces.normals),itemSize:3}),ce("bufferAttribute",{attach:"index",count:n.faces.triangles.length,array:new Uint32Array(n.faces.triangles),itemSize:1})]}),ce("meshStandardMaterial",{color:e?"#6a92a6":"#5a8296",metalness:e?.4:0,roughness:e?.3:.5,envMapIntensity:e?.8:.2,flatShading:!1})]}),n.edges&&n.edges.vertices&&Je("lineSegments",{children:[ce("bufferGeometry",{children:ce("bufferAttribute",{attach:"attributes-position",count:n.edges.vertices.length/3,array:new Float32Array(n.edges.vertices),itemSize:3})}),ce("lineBasicMaterial",{color:e?"#304352":"#3c5a6e",linewidth:1})]})]},`model-${t}`)}function Pre({mesh:n,modelSize:e,showFloor:t,highQuality:r,modelId:i,controlsRef:o}){return Je(Xm,{children:[ce(Ere,{modelSize:e,controlsRef:o}),ce(Are,{}),t&&ce(Tre,{modelSize:e}),ce(Cre,{mesh:n,highQuality:r,modelId:i}),r&&ce(sY,{preset:"studio"})]})}const Rre=de.forwardRef(({requestHighDetailMesh:n,setIsExporting:e},t)=>{const{camera:r}=fs();return de.useImperativeHandle(t,()=>({handleExportImage:async(i="png",o)=>{if(!n){console.error("High detail mesh request function not available."),alert("Export function not properly configured.");return}if(!o){console.error("Captured camera state not provided for export."),alert("Failed to capture camera state for export.");return}if(!r){console.error("Main camera reference not available for export.");return}e(!0);try{console.log("Requesting high detail mesh for export...");const s=await n();if(!s||!s.faces||!s.faces.vertices){console.error("Failed to retrieve high detail mesh or mesh is invalid."),alert("Failed to generate high-detail model for export."),e(!1);return}console.log("High detail mesh received."),console.log("Calling image generation service...");const a=await Mre(s,o,r,i);console.log("Image generation service returned data URL.");const l=document.createElement("a");l.download=`cad-render-high-quality.${i}`,l.href=a,document.body.appendChild(l),l.click(),document.body.removeChild(l),console.log(`High quality image exported as ${i}`)}catch(s){console.error("Error during handleExportImage:",s),alert(`Failed to export high quality image as ${i}. See console for details.`)}finally{e(!1),console.log("Export process finished.")}}})),null});function Lre({mesh:n,isMobile:e,requestHighDetailMesh:t,selectedModel:r,params:i}){const[o,s]=de.useState(100),[a,l]=de.useState(!0),[u,c]=de.useState(!e),[h,f]=de.useState(Date.now()),[d,v]=de.useState(!1),y=de.useRef(),x=de.useRef(),g=de.useRef(),S=de.useCallback(E=>{var F;const C=y.current;if(!C||!C.object){console.error("OrbitControls or camera not available for state capture."),alert("Cannot capture camera state for export.");return}C.update();const I={position:C.object.position.clone(),quaternion:C.object.quaternion.clone(),fov:C.object.fov};(F=x.current)==null||F.handleExportImage(E,I)},[]);de.useEffect(()=>{f(Date.now())},[n]),de.useEffect(()=>{if(n&&n.faces&&n.faces.vertices)try{const E=n.faces.vertices;if(E&&E.length>0){const C=[],I=[],F=[];for(let R=0;R<E.length;R+=3)C.push(E[R]),I.push(E[R+1]),F.push(E[R+2]);if(C.length>0&&I.length>0&&F.length>0){const R=Math.max(...C)-Math.min(...C),k=Math.max(...I)-Math.min(...I),L=Math.max(...F)-Math.min(...F),N=Math.max(R,k,L);s(N>0?N:100)}}}catch(E){console.error("Error calculating model size:",E),s(100)}},[n]);const _=u?Math.min(window.devicePixelRatio,2):1;return Je("div",{style:{width:"100%",height:"100%",position:"relative"},children:[ce(L6,{style:{width:"100%",height:"100%",backgroundColor:"#121212",touchAction:"none"},ref:g,dpr:_,gl:{preserveDrawingBuffer:!0,antialias:u,logarithmicDepthBuffer:!0,alpha:!1,precision:u?"highp":"mediump"},shadows:u,camera:{fov:45,near:.1,far:2e3,position:[0,-300,200]},children:Je(de.Suspense,{fallback:null,children:[ce(Pre,{mesh:n,modelSize:o,showFloor:a,highQuality:u,modelId:h,controlsRef:y}),ce(Rre,{ref:x,requestHighDetailMesh:t,setIsExporting:v})]})},`canvas-${h}`),d&&ce("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",color:"white",fontSize:"1.5em",zIndex:10},children:"Generating High Quality Export..."}),Je("div",{style:{position:"absolute",bottom:e?"10px":"20px",left:"0",right:"0",display:"flex",justifyContent:"center",gap:e?"8px":"15px",background:"rgba(0,0,0,0.5)",padding:e?"8px":"10px",borderRadius:"8px",margin:"0 auto",width:e?"95%":"auto",maxWidth:"500px"},children:[ce("button",{onClick:()=>l(!a),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:e?"8px 12px":"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:e?"14px":"12px"},children:a?"Hide Grid":"Show Grid"}),!e&&ce("button",{onClick:()=>c(!u),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:u?"Standard Quality":"High Quality"}),ce("button",{onClick:()=>S("jpeg"),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:e?"8px 12px":"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:e?"14px":"12px"},disabled:d,children:d?"Exporting...":"Export JPG"}),ce("button",{onClick:()=>S("png"),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:e?"8px 12px":"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:e?"14px":"12px"},disabled:d,children:d?"Exporting...":"Export PNG"})]})]})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function qh(n,e){return typeof n=="function"?n(e):n}function Ea(n,e){return t=>{e.setState(r=>({...r,[n]:qh(t,r[n])}))}}function ES(n){return n instanceof Function}function kre(n){return Array.isArray(n)&&n.every(e=>typeof e=="number")}function Ire(n,e){const t=[],r=i=>{i.forEach(o=>{t.push(o);const s=e(o);s!=null&&s.length&&r(s)})};return r(n),t}function An(n,e,t){let r=[],i;return o=>{let s;t.key&&t.debug&&(s=Date.now());const a=n(o);if(!(a.length!==r.length||a.some((c,h)=>r[h]!==c)))return i;r=a;let u;if(t.key&&t.debug&&(u=Date.now()),i=e(...a),t==null||t.onChange==null||t.onChange(i),t.key&&t.debug&&t!=null&&t.debug()){const c=Math.round((Date.now()-s)*100)/100,h=Math.round((Date.now()-u)*100)/100,f=h/16,d=(v,y)=>{for(v=String(v);v.length<y;)v=" "+v;return v};console.info(`%c ${d(h,5)} /${d(c,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,t==null?void 0:t.key)}return i}}function Tn(n,e,t,r){return{debug:()=>{var i;return(i=n==null?void 0:n.debugAll)!=null?i:n[e]},key:!1,onChange:r}}function Nre(n,e,t,r){const i=()=>{var s;return(s=o.getValue())!=null?s:n.options.renderFallbackValue},o={id:`${e.id}_${t.id}`,row:e,column:t,getValue:()=>e.getValue(r),renderValue:i,getContext:An(()=>[n,t,e,o],(s,a,l,u)=>({table:s,column:a,row:l,cell:u,getValue:u.getValue,renderValue:u.renderValue}),Tn(n.options,"debugCells"))};return n._features.forEach(s=>{s.createCell==null||s.createCell(o,t,e,n)},{}),o}function Fre(n,e,t,r){var i,o;const a={...n._getDefaultColumnDef(),...e},l=a.accessorKey;let u=(i=(o=a.id)!=null?o:l?typeof String.prototype.replaceAll=="function"?l.replaceAll(".","_"):l.replace(/\./g,"_"):void 0)!=null?i:typeof a.header=="string"?a.header:void 0,c;if(a.accessorFn?c=a.accessorFn:l&&(l.includes(".")?c=f=>{let d=f;for(const y of l.split(".")){var v;d=(v=d)==null?void 0:v[y]}return d}:c=f=>f[a.accessorKey]),!u)throw new Error;let h={id:`${String(u)}`,accessorFn:c,parent:r,depth:t,columnDef:a,columns:[],getFlatColumns:An(()=>[!0],()=>{var f;return[h,...(f=h.columns)==null?void 0:f.flatMap(d=>d.getFlatColumns())]},Tn(n.options,"debugColumns")),getLeafColumns:An(()=>[n._getOrderColumnsFn()],f=>{var d;if((d=h.columns)!=null&&d.length){let v=h.columns.flatMap(y=>y.getLeafColumns());return f(v)}return[h]},Tn(n.options,"debugColumns"))};for(const f of n._features)f.createColumn==null||f.createColumn(h,n);return h}const hs="debugHeaders";function d4(n,e,t){var r;let o={id:(r=t.id)!=null?r:e.id,column:e,index:t.index,isPlaceholder:!!t.isPlaceholder,placeholderId:t.placeholderId,depth:t.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const s=[],a=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(a),s.push(l)};return a(o),s},getContext:()=>({table:n,header:o,column:e})};return n._features.forEach(s=>{s.createHeader==null||s.createHeader(o,n)}),o}const Dre={createTable:n=>{n.getHeaderGroups=An(()=>[n.getAllColumns(),n.getVisibleLeafColumns(),n.getState().columnPinning.left,n.getState().columnPinning.right],(e,t,r,i)=>{var o,s;const a=(o=r==null?void 0:r.map(h=>t.find(f=>f.id===h)).filter(Boolean))!=null?o:[],l=(s=i==null?void 0:i.map(h=>t.find(f=>f.id===h)).filter(Boolean))!=null?s:[],u=t.filter(h=>!(r!=null&&r.includes(h.id))&&!(i!=null&&i.includes(h.id)));return P2(e,[...a,...u,...l],n)},Tn(n.options,hs)),n.getCenterHeaderGroups=An(()=>[n.getAllColumns(),n.getVisibleLeafColumns(),n.getState().columnPinning.left,n.getState().columnPinning.right],(e,t,r,i)=>(t=t.filter(o=>!(r!=null&&r.includes(o.id))&&!(i!=null&&i.includes(o.id))),P2(e,t,n,"center")),Tn(n.options,hs)),n.getLeftHeaderGroups=An(()=>[n.getAllColumns(),n.getVisibleLeafColumns(),n.getState().columnPinning.left],(e,t,r)=>{var i;const o=(i=r==null?void 0:r.map(s=>t.find(a=>a.id===s)).filter(Boolean))!=null?i:[];return P2(e,o,n,"left")},Tn(n.options,hs)),n.getRightHeaderGroups=An(()=>[n.getAllColumns(),n.getVisibleLeafColumns(),n.getState().columnPinning.right],(e,t,r)=>{var i;const o=(i=r==null?void 0:r.map(s=>t.find(a=>a.id===s)).filter(Boolean))!=null?i:[];return P2(e,o,n,"right")},Tn(n.options,hs)),n.getFooterGroups=An(()=>[n.getHeaderGroups()],e=>[...e].reverse(),Tn(n.options,hs)),n.getLeftFooterGroups=An(()=>[n.getLeftHeaderGroups()],e=>[...e].reverse(),Tn(n.options,hs)),n.getCenterFooterGroups=An(()=>[n.getCenterHeaderGroups()],e=>[...e].reverse(),Tn(n.options,hs)),n.getRightFooterGroups=An(()=>[n.getRightHeaderGroups()],e=>[...e].reverse(),Tn(n.options,hs)),n.getFlatHeaders=An(()=>[n.getHeaderGroups()],e=>e.map(t=>t.headers).flat(),Tn(n.options,hs)),n.getLeftFlatHeaders=An(()=>[n.getLeftHeaderGroups()],e=>e.map(t=>t.headers).flat(),Tn(n.options,hs)),n.getCenterFlatHeaders=An(()=>[n.getCenterHeaderGroups()],e=>e.map(t=>t.headers).flat(),Tn(n.options,hs)),n.getRightFlatHeaders=An(()=>[n.getRightHeaderGroups()],e=>e.map(t=>t.headers).flat(),Tn(n.options,hs)),n.getCenterLeafHeaders=An(()=>[n.getCenterFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),Tn(n.options,hs)),n.getLeftLeafHeaders=An(()=>[n.getLeftFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),Tn(n.options,hs)),n.getRightLeafHeaders=An(()=>[n.getRightFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),Tn(n.options,hs)),n.getLeafHeaders=An(()=>[n.getLeftHeaderGroups(),n.getCenterHeaderGroups(),n.getRightHeaderGroups()],(e,t,r)=>{var i,o,s,a,l,u;return[...(i=(o=e[0])==null?void 0:o.headers)!=null?i:[],...(s=(a=t[0])==null?void 0:a.headers)!=null?s:[],...(l=(u=r[0])==null?void 0:u.headers)!=null?l:[]].map(c=>c.getLeafHeaders()).flat()},Tn(n.options,hs))}};function P2(n,e,t,r){var i,o;let s=0;const a=function(f,d){d===void 0&&(d=1),s=Math.max(s,d),f.filter(v=>v.getIsVisible()).forEach(v=>{var y;(y=v.columns)!=null&&y.length&&a(v.columns,d+1)},0)};a(n);let l=[];const u=(f,d)=>{const v={depth:d,id:[r,`${d}`].filter(Boolean).join("_"),headers:[]},y=[];f.forEach(x=>{const g=[...y].reverse()[0],S=x.column.depth===v.depth;let _,E=!1;if(S&&x.column.parent?_=x.column.parent:(_=x.column,E=!0),g&&(g==null?void 0:g.column)===_)g.subHeaders.push(x);else{const C=d4(t,_,{id:[r,d,_.id,x==null?void 0:x.id].filter(Boolean).join("_"),isPlaceholder:E,placeholderId:E?`${y.filter(I=>I.column===_).length}`:void 0,depth:d,index:y.length});C.subHeaders.push(x),y.push(C)}v.headers.push(x),x.headerGroup=v}),l.push(v),d>0&&u(y,d-1)},c=e.map((f,d)=>d4(t,f,{depth:s,index:d}));u(c,s-1),l.reverse();const h=f=>f.filter(v=>v.column.getIsVisible()).map(v=>{let y=0,x=0,g=[0];v.subHeaders&&v.subHeaders.length?(g=[],h(v.subHeaders).forEach(_=>{let{colSpan:E,rowSpan:C}=_;y+=E,g.push(C)})):y=1;const S=Math.min(...g);return x=x+S,v.colSpan=y,v.rowSpan=x,{colSpan:y,rowSpan:x}});return h((i=(o=l[0])==null?void 0:o.headers)!=null?i:[]),l}const Ore=(n,e,t,r,i,o,s)=>{let a={id:e,index:r,original:t,depth:i,parentId:s,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(a._valuesCache.hasOwnProperty(l))return a._valuesCache[l];const u=n.getColumn(l);if(u!=null&&u.accessorFn)return a._valuesCache[l]=u.accessorFn(a.original,r),a._valuesCache[l]},getUniqueValues:l=>{if(a._uniqueValuesCache.hasOwnProperty(l))return a._uniqueValuesCache[l];const u=n.getColumn(l);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(a._uniqueValuesCache[l]=u.columnDef.getUniqueValues(a.original,r),a._uniqueValuesCache[l]):(a._uniqueValuesCache[l]=[a.getValue(l)],a._uniqueValuesCache[l])},renderValue:l=>{var u;return(u=a.getValue(l))!=null?u:n.options.renderFallbackValue},subRows:o??[],getLeafRows:()=>Ire(a.subRows,l=>l.subRows),getParentRow:()=>a.parentId?n.getRow(a.parentId,!0):void 0,getParentRows:()=>{let l=[],u=a;for(;;){const c=u.getParentRow();if(!c)break;l.push(c),u=c}return l.reverse()},getAllCells:An(()=>[n.getAllLeafColumns()],l=>l.map(u=>Nre(n,a,u,u.id)),Tn(n.options,"debugRows")),_getAllCellsByColumnId:An(()=>[a.getAllCells()],l=>l.reduce((u,c)=>(u[c.column.id]=c,u),{}),Tn(n.options,"debugRows"))};for(let l=0;l<n._features.length;l++){const u=n._features[l];u==null||u.createRow==null||u.createRow(a,n)}return a},Bre={createColumn:(n,e)=>{n._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,n.id),n.getFacetedRowModel=()=>n._getFacetedRowModel?n._getFacetedRowModel():e.getPreFilteredRowModel(),n._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,n.id),n.getFacetedUniqueValues=()=>n._getFacetedUniqueValues?n._getFacetedUniqueValues():new Map,n._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,n.id),n.getFacetedMinMaxValues=()=>{if(n._getFacetedMinMaxValues)return n._getFacetedMinMaxValues()}}},HO=(n,e,t)=>{var r,i;const o=t==null||(r=t.toString())==null?void 0:r.toLowerCase();return Boolean((i=n.getValue(e))==null||(i=i.toString())==null||(i=i.toLowerCase())==null?void 0:i.includes(o))};HO.autoRemove=n=>Hl(n);const GO=(n,e,t)=>{var r;return Boolean((r=n.getValue(e))==null||(r=r.toString())==null?void 0:r.includes(t))};GO.autoRemove=n=>Hl(n);const VO=(n,e,t)=>{var r;return((r=n.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(t==null?void 0:t.toLowerCase())};VO.autoRemove=n=>Hl(n);const WO=(n,e,t)=>{var r;return(r=n.getValue(e))==null?void 0:r.includes(t)};WO.autoRemove=n=>Hl(n);const jO=(n,e,t)=>!t.some(r=>{var i;return!((i=n.getValue(e))!=null&&i.includes(r))});jO.autoRemove=n=>Hl(n)||!(n!=null&&n.length);const qO=(n,e,t)=>t.some(r=>{var i;return(i=n.getValue(e))==null?void 0:i.includes(r)});qO.autoRemove=n=>Hl(n)||!(n!=null&&n.length);const $O=(n,e,t)=>n.getValue(e)===t;$O.autoRemove=n=>Hl(n);const XO=(n,e,t)=>n.getValue(e)==t;XO.autoRemove=n=>Hl(n);const QA=(n,e,t)=>{let[r,i]=t;const o=n.getValue(e);return o>=r&&o<=i};QA.resolveFilterValue=n=>{let[e,t]=n,r=typeof e!="number"?parseFloat(e):e,i=typeof t!="number"?parseFloat(t):t,o=e===null||Number.isNaN(r)?-1/0:r,s=t===null||Number.isNaN(i)?1/0:i;if(o>s){const a=o;o=s,s=a}return[o,s]};QA.autoRemove=n=>Hl(n)||Hl(n[0])&&Hl(n[1]);const pc={includesString:HO,includesStringSensitive:GO,equalsString:VO,arrIncludes:WO,arrIncludesAll:jO,arrIncludesSome:qO,equals:$O,weakEquals:XO,inNumberRange:QA};function Hl(n){return n==null||n===""}const Ure={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:n=>({columnFilters:[],...n}),getDefaultOptions:n=>({onColumnFiltersChange:Ea("columnFilters",n),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(n,e)=>{n.getAutoFilterFn=()=>{const t=e.getCoreRowModel().flatRows[0],r=t==null?void 0:t.getValue(n.id);return typeof r=="string"?pc.includesString:typeof r=="number"?pc.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?pc.equals:Array.isArray(r)?pc.arrIncludes:pc.weakEquals},n.getFilterFn=()=>{var t,r;return ES(n.columnDef.filterFn)?n.columnDef.filterFn:n.columnDef.filterFn==="auto"?n.getAutoFilterFn():(t=(r=e.options.filterFns)==null?void 0:r[n.columnDef.filterFn])!=null?t:pc[n.columnDef.filterFn]},n.getCanFilter=()=>{var t,r,i;return((t=n.columnDef.enableColumnFilter)!=null?t:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&!!n.accessorFn},n.getIsFiltered=()=>n.getFilterIndex()>-1,n.getFilterValue=()=>{var t;return(t=e.getState().columnFilters)==null||(t=t.find(r=>r.id===n.id))==null?void 0:t.value},n.getFilterIndex=()=>{var t,r;return(t=(r=e.getState().columnFilters)==null?void 0:r.findIndex(i=>i.id===n.id))!=null?t:-1},n.setFilterValue=t=>{e.setColumnFilters(r=>{const i=n.getFilterFn(),o=r==null?void 0:r.find(c=>c.id===n.id),s=qh(t,o?o.value:void 0);if(p4(i,s,n)){var a;return(a=r==null?void 0:r.filter(c=>c.id!==n.id))!=null?a:[]}const l={id:n.id,value:s};if(o){var u;return(u=r==null?void 0:r.map(c=>c.id===n.id?l:c))!=null?u:[]}return r!=null&&r.length?[...r,l]:[l]})}},createRow:(n,e)=>{n.columnFilters={},n.columnFiltersMeta={}},createTable:n=>{n.setColumnFilters=e=>{const t=n.getAllLeafColumns(),r=i=>{var o;return(o=qh(e,i))==null?void 0:o.filter(s=>{const a=t.find(l=>l.id===s.id);if(a){const l=a.getFilterFn();if(p4(l,s.value,a))return!1}return!0})};n.options.onColumnFiltersChange==null||n.options.onColumnFiltersChange(r)},n.resetColumnFilters=e=>{var t,r;n.setColumnFilters(e?[]:(t=(r=n.initialState)==null?void 0:r.columnFilters)!=null?t:[])},n.getPreFilteredRowModel=()=>n.getCoreRowModel(),n.getFilteredRowModel=()=>(!n._getFilteredRowModel&&n.options.getFilteredRowModel&&(n._getFilteredRowModel=n.options.getFilteredRowModel(n)),n.options.manualFiltering||!n._getFilteredRowModel?n.getPreFilteredRowModel():n._getFilteredRowModel())}};function p4(n,e,t){return(n&&n.autoRemove?n.autoRemove(e,t):!1)||typeof e>"u"||typeof e=="string"&&!e}const zre=(n,e,t)=>t.reduce((r,i)=>{const o=i.getValue(n);return r+(typeof o=="number"?o:0)},0),Hre=(n,e,t)=>{let r;return t.forEach(i=>{const o=i.getValue(n);o!=null&&(r>o||r===void 0&&o>=o)&&(r=o)}),r},Gre=(n,e,t)=>{let r;return t.forEach(i=>{const o=i.getValue(n);o!=null&&(r<o||r===void 0&&o>=o)&&(r=o)}),r},Vre=(n,e,t)=>{let r,i;return t.forEach(o=>{const s=o.getValue(n);s!=null&&(r===void 0?s>=s&&(r=i=s):(r>s&&(r=s),i<s&&(i=s)))}),[r,i]},Wre=(n,e)=>{let t=0,r=0;if(e.forEach(i=>{let o=i.getValue(n);o!=null&&(o=+o)>=o&&(++t,r+=o)}),t)return r/t},jre=(n,e)=>{if(!e.length)return;const t=e.map(o=>o.getValue(n));if(!kre(t))return;if(t.length===1)return t[0];const r=Math.floor(t.length/2),i=t.sort((o,s)=>o-s);return t.length%2!==0?i[r]:(i[r-1]+i[r])/2},qre=(n,e)=>Array.from(new Set(e.map(t=>t.getValue(n))).values()),$re=(n,e)=>new Set(e.map(t=>t.getValue(n))).size,Xre=(n,e)=>e.length,Bb={sum:zre,min:Hre,max:Gre,extent:Vre,mean:Wre,median:jre,unique:qre,uniqueCount:$re,count:Xre},Yre={getDefaultColumnDef:()=>({aggregatedCell:n=>{var e,t;return(e=(t=n.getValue())==null||t.toString==null?void 0:t.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:n=>({grouping:[],...n}),getDefaultOptions:n=>({onGroupingChange:Ea("grouping",n),groupedColumnMode:"reorder"}),createColumn:(n,e)=>{n.toggleGrouping=()=>{e.setGrouping(t=>t!=null&&t.includes(n.id)?t.filter(r=>r!==n.id):[...t??[],n.id])},n.getCanGroup=()=>{var t,r;return((t=n.columnDef.enableGrouping)!=null?t:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!n.accessorFn||!!n.columnDef.getGroupingValue)},n.getIsGrouped=()=>{var t;return(t=e.getState().grouping)==null?void 0:t.includes(n.id)},n.getGroupedIndex=()=>{var t;return(t=e.getState().grouping)==null?void 0:t.indexOf(n.id)},n.getToggleGroupingHandler=()=>{const t=n.getCanGroup();return()=>{t&&n.toggleGrouping()}},n.getAutoAggregationFn=()=>{const t=e.getCoreRowModel().flatRows[0],r=t==null?void 0:t.getValue(n.id);if(typeof r=="number")return Bb.sum;if(Object.prototype.toString.call(r)==="[object Date]")return Bb.extent},n.getAggregationFn=()=>{var t,r;if(!n)throw new Error;return ES(n.columnDef.aggregationFn)?n.columnDef.aggregationFn:n.columnDef.aggregationFn==="auto"?n.getAutoAggregationFn():(t=(r=e.options.aggregationFns)==null?void 0:r[n.columnDef.aggregationFn])!=null?t:Bb[n.columnDef.aggregationFn]}},createTable:n=>{n.setGrouping=e=>n.options.onGroupingChange==null?void 0:n.options.onGroupingChange(e),n.resetGrouping=e=>{var t,r;n.setGrouping(e?[]:(t=(r=n.initialState)==null?void 0:r.grouping)!=null?t:[])},n.getPreGroupedRowModel=()=>n.getFilteredRowModel(),n.getGroupedRowModel=()=>(!n._getGroupedRowModel&&n.options.getGroupedRowModel&&(n._getGroupedRowModel=n.options.getGroupedRowModel(n)),n.options.manualGrouping||!n._getGroupedRowModel?n.getPreGroupedRowModel():n._getGroupedRowModel())},createRow:(n,e)=>{n.getIsGrouped=()=>!!n.groupingColumnId,n.getGroupingValue=t=>{if(n._groupingValuesCache.hasOwnProperty(t))return n._groupingValuesCache[t];const r=e.getColumn(t);return r!=null&&r.columnDef.getGroupingValue?(n._groupingValuesCache[t]=r.columnDef.getGroupingValue(n.original),n._groupingValuesCache[t]):n.getValue(t)},n._groupingValuesCache={}},createCell:(n,e,t,r)=>{n.getIsGrouped=()=>e.getIsGrouped()&&e.id===t.groupingColumnId,n.getIsPlaceholder=()=>!n.getIsGrouped()&&e.getIsGrouped(),n.getIsAggregated=()=>{var i;return!n.getIsGrouped()&&!n.getIsPlaceholder()&&!!((i=t.subRows)!=null&&i.length)}}};function Zre(n,e,t){if(!(e!=null&&e.length)||!t)return n;const r=n.filter(o=>!e.includes(o.id));return t==="remove"?r:[...e.map(o=>n.find(s=>s.id===o)).filter(Boolean),...r]}const Kre={getInitialState:n=>({columnOrder:[],...n}),getDefaultOptions:n=>({onColumnOrderChange:Ea("columnOrder",n)}),createColumn:(n,e)=>{n.getIndex=An(t=>[sv(e,t)],t=>t.findIndex(r=>r.id===n.id),Tn(e.options,"debugColumns")),n.getIsFirstColumn=t=>{var r;return((r=sv(e,t)[0])==null?void 0:r.id)===n.id},n.getIsLastColumn=t=>{var r;const i=sv(e,t);return((r=i[i.length-1])==null?void 0:r.id)===n.id}},createTable:n=>{n.setColumnOrder=e=>n.options.onColumnOrderChange==null?void 0:n.options.onColumnOrderChange(e),n.resetColumnOrder=e=>{var t;n.setColumnOrder(e?[]:(t=n.initialState.columnOrder)!=null?t:[])},n._getOrderColumnsFn=An(()=>[n.getState().columnOrder,n.getState().grouping,n.options.groupedColumnMode],(e,t,r)=>i=>{let o=[];if(!(e!=null&&e.length))o=i;else{const s=[...e],a=[...i];for(;a.length&&s.length;){const l=s.shift(),u=a.findIndex(c=>c.id===l);u>-1&&o.push(a.splice(u,1)[0])}o=[...o,...a]}return Zre(o,t,r)},Tn(n.options,"debugTable"))}},Ub=()=>({left:[],right:[]}),Jre={getInitialState:n=>({columnPinning:Ub(),...n}),getDefaultOptions:n=>({onColumnPinningChange:Ea("columnPinning",n)}),createColumn:(n,e)=>{n.pin=t=>{const r=n.getLeafColumns().map(i=>i.id).filter(Boolean);e.setColumnPinning(i=>{var o,s;if(t==="right"){var a,l;return{left:((a=i==null?void 0:i.left)!=null?a:[]).filter(h=>!(r!=null&&r.includes(h))),right:[...((l=i==null?void 0:i.right)!=null?l:[]).filter(h=>!(r!=null&&r.includes(h))),...r]}}if(t==="left"){var u,c;return{left:[...((u=i==null?void 0:i.left)!=null?u:[]).filter(h=>!(r!=null&&r.includes(h))),...r],right:((c=i==null?void 0:i.right)!=null?c:[]).filter(h=>!(r!=null&&r.includes(h)))}}return{left:((o=i==null?void 0:i.left)!=null?o:[]).filter(h=>!(r!=null&&r.includes(h))),right:((s=i==null?void 0:i.right)!=null?s:[]).filter(h=>!(r!=null&&r.includes(h)))}})},n.getCanPin=()=>n.getLeafColumns().some(r=>{var i,o,s;return((i=r.columnDef.enablePinning)!=null?i:!0)&&((o=(s=e.options.enableColumnPinning)!=null?s:e.options.enablePinning)!=null?o:!0)}),n.getIsPinned=()=>{const t=n.getLeafColumns().map(a=>a.id),{left:r,right:i}=e.getState().columnPinning,o=t.some(a=>r==null?void 0:r.includes(a)),s=t.some(a=>i==null?void 0:i.includes(a));return o?"left":s?"right":!1},n.getPinnedIndex=()=>{var t,r;const i=n.getIsPinned();return i?(t=(r=e.getState().columnPinning)==null||(r=r[i])==null?void 0:r.indexOf(n.id))!=null?t:-1:0}},createRow:(n,e)=>{n.getCenterVisibleCells=An(()=>[n._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,r,i)=>{const o=[...r??[],...i??[]];return t.filter(s=>!o.includes(s.column.id))},Tn(e.options,"debugRows")),n.getLeftVisibleCells=An(()=>[n._getAllVisibleCells(),e.getState().columnPinning.left],(t,r)=>(r??[]).map(o=>t.find(s=>s.column.id===o)).filter(Boolean).map(o=>({...o,position:"left"})),Tn(e.options,"debugRows")),n.getRightVisibleCells=An(()=>[n._getAllVisibleCells(),e.getState().columnPinning.right],(t,r)=>(r??[]).map(o=>t.find(s=>s.column.id===o)).filter(Boolean).map(o=>({...o,position:"right"})),Tn(e.options,"debugRows"))},createTable:n=>{n.setColumnPinning=e=>n.options.onColumnPinningChange==null?void 0:n.options.onColumnPinningChange(e),n.resetColumnPinning=e=>{var t,r;return n.setColumnPinning(e?Ub():(t=(r=n.initialState)==null?void 0:r.columnPinning)!=null?t:Ub())},n.getIsSomeColumnsPinned=e=>{var t;const r=n.getState().columnPinning;if(!e){var i,o;return Boolean(((i=r.left)==null?void 0:i.length)||((o=r.right)==null?void 0:o.length))}return Boolean((t=r[e])==null?void 0:t.length)},n.getLeftLeafColumns=An(()=>[n.getAllLeafColumns(),n.getState().columnPinning.left],(e,t)=>(t??[]).map(r=>e.find(i=>i.id===r)).filter(Boolean),Tn(n.options,"debugColumns")),n.getRightLeafColumns=An(()=>[n.getAllLeafColumns(),n.getState().columnPinning.right],(e,t)=>(t??[]).map(r=>e.find(i=>i.id===r)).filter(Boolean),Tn(n.options,"debugColumns")),n.getCenterLeafColumns=An(()=>[n.getAllLeafColumns(),n.getState().columnPinning.left,n.getState().columnPinning.right],(e,t,r)=>{const i=[...t??[],...r??[]];return e.filter(o=>!i.includes(o.id))},Tn(n.options,"debugColumns"))}},R2={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},zb=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),Qre={getDefaultColumnDef:()=>R2,getInitialState:n=>({columnSizing:{},columnSizingInfo:zb(),...n}),getDefaultOptions:n=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Ea("columnSizing",n),onColumnSizingInfoChange:Ea("columnSizingInfo",n)}),createColumn:(n,e)=>{n.getSize=()=>{var t,r,i;const o=e.getState().columnSizing[n.id];return Math.min(Math.max((t=n.columnDef.minSize)!=null?t:R2.minSize,(r=o??n.columnDef.size)!=null?r:R2.size),(i=n.columnDef.maxSize)!=null?i:R2.maxSize)},n.getStart=An(t=>[t,sv(e,t),e.getState().columnSizing],(t,r)=>r.slice(0,n.getIndex(t)).reduce((i,o)=>i+o.getSize(),0),Tn(e.options,"debugColumns")),n.getAfter=An(t=>[t,sv(e,t),e.getState().columnSizing],(t,r)=>r.slice(n.getIndex(t)+1).reduce((i,o)=>i+o.getSize(),0),Tn(e.options,"debugColumns")),n.resetSize=()=>{e.setColumnSizing(t=>{let{[n.id]:r,...i}=t;return i})},n.getCanResize=()=>{var t,r;return((t=n.columnDef.enableResizing)!=null?t:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},n.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===n.id},createHeader:(n,e)=>{n.getSize=()=>{let t=0;const r=i=>{if(i.subHeaders.length)i.subHeaders.forEach(r);else{var o;t+=(o=i.column.getSize())!=null?o:0}};return r(n),t},n.getStart=()=>{if(n.index>0){const t=n.headerGroup.headers[n.index-1];return t.getStart()+t.getSize()}return 0},n.getResizeHandler=t=>{const r=e.getColumn(n.column.id),i=r==null?void 0:r.getCanResize();return o=>{if(!r||!i||(o.persist==null||o.persist(),Hb(o)&&o.touches&&o.touches.length>1))return;const s=n.getSize(),a=n?n.getLeafHeaders().map(g=>[g.column.id,g.column.getSize()]):[[r.id,r.getSize()]],l=Hb(o)?Math.round(o.touches[0].clientX):o.clientX,u={},c=(g,S)=>{typeof S=="number"&&(e.setColumnSizingInfo(_=>{var E,C;const I=e.options.columnResizeDirection==="rtl"?-1:1,F=(S-((E=_==null?void 0:_.startOffset)!=null?E:0))*I,R=Math.max(F/((C=_==null?void 0:_.startSize)!=null?C:0),-.999999);return _.columnSizingStart.forEach(k=>{let[L,N]=k;u[L]=Math.round(Math.max(N+N*R,0)*100)/100}),{..._,deltaOffset:F,deltaPercentage:R}}),(e.options.columnResizeMode==="onChange"||g==="end")&&e.setColumnSizing(_=>({..._,...u})))},h=g=>c("move",g),f=g=>{c("end",g),e.setColumnSizingInfo(S=>({...S,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},d=t||typeof document<"u"?document:null,v={moveHandler:g=>h(g.clientX),upHandler:g=>{d==null||d.removeEventListener("mousemove",v.moveHandler),d==null||d.removeEventListener("mouseup",v.upHandler),f(g.clientX)}},y={moveHandler:g=>(g.cancelable&&(g.preventDefault(),g.stopPropagation()),h(g.touches[0].clientX),!1),upHandler:g=>{var S;d==null||d.removeEventListener("touchmove",y.moveHandler),d==null||d.removeEventListener("touchend",y.upHandler),g.cancelable&&(g.preventDefault(),g.stopPropagation()),f((S=g.touches[0])==null?void 0:S.clientX)}},x=eie()?{passive:!1}:!1;Hb(o)?(d==null||d.addEventListener("touchmove",y.moveHandler,x),d==null||d.addEventListener("touchend",y.upHandler,x)):(d==null||d.addEventListener("mousemove",v.moveHandler,x),d==null||d.addEventListener("mouseup",v.upHandler,x)),e.setColumnSizingInfo(g=>({...g,startOffset:l,startSize:s,deltaOffset:0,deltaPercentage:0,columnSizingStart:a,isResizingColumn:r.id}))}}},createTable:n=>{n.setColumnSizing=e=>n.options.onColumnSizingChange==null?void 0:n.options.onColumnSizingChange(e),n.setColumnSizingInfo=e=>n.options.onColumnSizingInfoChange==null?void 0:n.options.onColumnSizingInfoChange(e),n.resetColumnSizing=e=>{var t;n.setColumnSizing(e?{}:(t=n.initialState.columnSizing)!=null?t:{})},n.resetHeaderSizeInfo=e=>{var t;n.setColumnSizingInfo(e?zb():(t=n.initialState.columnSizingInfo)!=null?t:zb())},n.getTotalSize=()=>{var e,t;return(e=(t=n.getHeaderGroups()[0])==null?void 0:t.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},n.getLeftTotalSize=()=>{var e,t;return(e=(t=n.getLeftHeaderGroups()[0])==null?void 0:t.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},n.getCenterTotalSize=()=>{var e,t;return(e=(t=n.getCenterHeaderGroups()[0])==null?void 0:t.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},n.getRightTotalSize=()=>{var e,t;return(e=(t=n.getRightHeaderGroups()[0])==null?void 0:t.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0}}};let L2=null;function eie(){if(typeof L2=="boolean")return L2;let n=!1;try{const e={get passive(){return n=!0,!1}},t=()=>{};window.addEventListener("test",t,e),window.removeEventListener("test",t)}catch{n=!1}return L2=n,L2}function Hb(n){return n.type==="touchstart"}const tie={getInitialState:n=>({columnVisibility:{},...n}),getDefaultOptions:n=>({onColumnVisibilityChange:Ea("columnVisibility",n)}),createColumn:(n,e)=>{n.toggleVisibility=t=>{n.getCanHide()&&e.setColumnVisibility(r=>({...r,[n.id]:t??!n.getIsVisible()}))},n.getIsVisible=()=>{var t,r;const i=n.columns;return(t=i.length?i.some(o=>o.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[n.id])!=null?t:!0},n.getCanHide=()=>{var t,r;return((t=n.columnDef.enableHiding)!=null?t:!0)&&((r=e.options.enableHiding)!=null?r:!0)},n.getToggleVisibilityHandler=()=>t=>{n.toggleVisibility==null||n.toggleVisibility(t.target.checked)}},createRow:(n,e)=>{n._getAllVisibleCells=An(()=>[n.getAllCells(),e.getState().columnVisibility],t=>t.filter(r=>r.column.getIsVisible()),Tn(e.options,"debugRows")),n.getVisibleCells=An(()=>[n.getLeftVisibleCells(),n.getCenterVisibleCells(),n.getRightVisibleCells()],(t,r,i)=>[...t,...r,...i],Tn(e.options,"debugRows"))},createTable:n=>{const e=(t,r)=>An(()=>[r(),r().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(o=>o.getIsVisible==null?void 0:o.getIsVisible()),Tn(n.options,"debugColumns"));n.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>n.getAllFlatColumns()),n.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>n.getAllLeafColumns()),n.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>n.getLeftLeafColumns()),n.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>n.getRightLeafColumns()),n.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>n.getCenterLeafColumns()),n.setColumnVisibility=t=>n.options.onColumnVisibilityChange==null?void 0:n.options.onColumnVisibilityChange(t),n.resetColumnVisibility=t=>{var r;n.setColumnVisibility(t?{}:(r=n.initialState.columnVisibility)!=null?r:{})},n.toggleAllColumnsVisible=t=>{var r;t=(r=t)!=null?r:!n.getIsAllColumnsVisible(),n.setColumnVisibility(n.getAllLeafColumns().reduce((i,o)=>({...i,[o.id]:t||!(o.getCanHide!=null&&o.getCanHide())}),{}))},n.getIsAllColumnsVisible=()=>!n.getAllLeafColumns().some(t=>!(t.getIsVisible!=null&&t.getIsVisible())),n.getIsSomeColumnsVisible=()=>n.getAllLeafColumns().some(t=>t.getIsVisible==null?void 0:t.getIsVisible()),n.getToggleAllColumnsVisibilityHandler=()=>t=>{var r;n.toggleAllColumnsVisible((r=t.target)==null?void 0:r.checked)}}};function sv(n,e){return e?e==="center"?n.getCenterVisibleLeafColumns():e==="left"?n.getLeftVisibleLeafColumns():n.getRightVisibleLeafColumns():n.getVisibleLeafColumns()}const nie={createTable:n=>{n._getGlobalFacetedRowModel=n.options.getFacetedRowModel&&n.options.getFacetedRowModel(n,"__global__"),n.getGlobalFacetedRowModel=()=>n.options.manualFiltering||!n._getGlobalFacetedRowModel?n.getPreFilteredRowModel():n._getGlobalFacetedRowModel(),n._getGlobalFacetedUniqueValues=n.options.getFacetedUniqueValues&&n.options.getFacetedUniqueValues(n,"__global__"),n.getGlobalFacetedUniqueValues=()=>n._getGlobalFacetedUniqueValues?n._getGlobalFacetedUniqueValues():new Map,n._getGlobalFacetedMinMaxValues=n.options.getFacetedMinMaxValues&&n.options.getFacetedMinMaxValues(n,"__global__"),n.getGlobalFacetedMinMaxValues=()=>{if(n._getGlobalFacetedMinMaxValues)return n._getGlobalFacetedMinMaxValues()}}},rie={getInitialState:n=>({globalFilter:void 0,...n}),getDefaultOptions:n=>({onGlobalFilterChange:Ea("globalFilter",n),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var t;const r=(t=n.getCoreRowModel().flatRows[0])==null||(t=t._getAllCellsByColumnId()[e.id])==null?void 0:t.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(n,e)=>{n.getCanGlobalFilter=()=>{var t,r,i,o;return((t=n.columnDef.enableGlobalFilter)!=null?t:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&((o=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(n))!=null?o:!0)&&!!n.accessorFn}},createTable:n=>{n.getGlobalAutoFilterFn=()=>pc.includesString,n.getGlobalFilterFn=()=>{var e,t;const{globalFilterFn:r}=n.options;return ES(r)?r:r==="auto"?n.getGlobalAutoFilterFn():(e=(t=n.options.filterFns)==null?void 0:t[r])!=null?e:pc[r]},n.setGlobalFilter=e=>{n.options.onGlobalFilterChange==null||n.options.onGlobalFilterChange(e)},n.resetGlobalFilter=e=>{n.setGlobalFilter(e?void 0:n.initialState.globalFilter)}}},iie={getInitialState:n=>({expanded:{},...n}),getDefaultOptions:n=>({onExpandedChange:Ea("expanded",n),paginateExpandedRows:!0}),createTable:n=>{let e=!1,t=!1;n._autoResetExpanded=()=>{var r,i;if(!e){n._queue(()=>{e=!0});return}if((r=(i=n.options.autoResetAll)!=null?i:n.options.autoResetExpanded)!=null?r:!n.options.manualExpanding){if(t)return;t=!0,n._queue(()=>{n.resetExpanded(),t=!1})}},n.setExpanded=r=>n.options.onExpandedChange==null?void 0:n.options.onExpandedChange(r),n.toggleAllRowsExpanded=r=>{r??!n.getIsAllRowsExpanded()?n.setExpanded(!0):n.setExpanded({})},n.resetExpanded=r=>{var i,o;n.setExpanded(r?{}:(i=(o=n.initialState)==null?void 0:o.expanded)!=null?i:{})},n.getCanSomeRowsExpand=()=>n.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),n.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),n.toggleAllRowsExpanded()},n.getIsSomeRowsExpanded=()=>{const r=n.getState().expanded;return r===!0||Object.values(r).some(Boolean)},n.getIsAllRowsExpanded=()=>{const r=n.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||n.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},n.getExpandedDepth=()=>{let r=0;return(n.getState().expanded===!0?Object.keys(n.getRowModel().rowsById):Object.keys(n.getState().expanded)).forEach(o=>{const s=o.split(".");r=Math.max(r,s.length)}),r},n.getPreExpandedRowModel=()=>n.getSortedRowModel(),n.getExpandedRowModel=()=>(!n._getExpandedRowModel&&n.options.getExpandedRowModel&&(n._getExpandedRowModel=n.options.getExpandedRowModel(n)),n.options.manualExpanding||!n._getExpandedRowModel?n.getPreExpandedRowModel():n._getExpandedRowModel())},createRow:(n,e)=>{n.toggleExpanded=t=>{e.setExpanded(r=>{var i;const o=r===!0?!0:!!(r!=null&&r[n.id]);let s={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(a=>{s[a]=!0}):s=r,t=(i=t)!=null?i:!o,!o&&t)return{...s,[n.id]:!0};if(o&&!t){const{[n.id]:a,...l}=s;return l}return r})},n.getIsExpanded=()=>{var t;const r=e.getState().expanded;return!!((t=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(n))!=null?t:r===!0||r!=null&&r[n.id])},n.getCanExpand=()=>{var t,r,i;return(t=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(n))!=null?t:((r=e.options.enableExpanding)!=null?r:!0)&&!!((i=n.subRows)!=null&&i.length)},n.getIsAllParentsExpanded=()=>{let t=!0,r=n;for(;t&&r.parentId;)r=e.getRow(r.parentId,!0),t=r.getIsExpanded();return t},n.getToggleExpandedHandler=()=>{const t=n.getCanExpand();return()=>{t&&n.toggleExpanded()}}}},gE=0,vE=10,Gb=()=>({pageIndex:gE,pageSize:vE}),oie={getInitialState:n=>({...n,pagination:{...Gb(),...n==null?void 0:n.pagination}}),getDefaultOptions:n=>({onPaginationChange:Ea("pagination",n)}),createTable:n=>{let e=!1,t=!1;n._autoResetPageIndex=()=>{var r,i;if(!e){n._queue(()=>{e=!0});return}if((r=(i=n.options.autoResetAll)!=null?i:n.options.autoResetPageIndex)!=null?r:!n.options.manualPagination){if(t)return;t=!0,n._queue(()=>{n.resetPageIndex(),t=!1})}},n.setPagination=r=>{const i=o=>qh(r,o);return n.options.onPaginationChange==null?void 0:n.options.onPaginationChange(i)},n.resetPagination=r=>{var i;n.setPagination(r?Gb():(i=n.initialState.pagination)!=null?i:Gb())},n.setPageIndex=r=>{n.setPagination(i=>{let o=qh(r,i.pageIndex);const s=typeof n.options.pageCount>"u"||n.options.pageCount===-1?Number.MAX_SAFE_INTEGER:n.options.pageCount-1;return o=Math.max(0,Math.min(o,s)),{...i,pageIndex:o}})},n.resetPageIndex=r=>{var i,o;n.setPageIndex(r?gE:(i=(o=n.initialState)==null||(o=o.pagination)==null?void 0:o.pageIndex)!=null?i:gE)},n.resetPageSize=r=>{var i,o;n.setPageSize(r?vE:(i=(o=n.initialState)==null||(o=o.pagination)==null?void 0:o.pageSize)!=null?i:vE)},n.setPageSize=r=>{n.setPagination(i=>{const o=Math.max(1,qh(r,i.pageSize)),s=i.pageSize*i.pageIndex,a=Math.floor(s/o);return{...i,pageIndex:a,pageSize:o}})},n.setPageCount=r=>n.setPagination(i=>{var o;let s=qh(r,(o=n.options.pageCount)!=null?o:-1);return typeof s=="number"&&(s=Math.max(-1,s)),{...i,pageCount:s}}),n.getPageOptions=An(()=>[n.getPageCount()],r=>{let i=[];return r&&r>0&&(i=[...new Array(r)].fill(null).map((o,s)=>s)),i},Tn(n.options,"debugTable")),n.getCanPreviousPage=()=>n.getState().pagination.pageIndex>0,n.getCanNextPage=()=>{const{pageIndex:r}=n.getState().pagination,i=n.getPageCount();return i===-1?!0:i===0?!1:r<i-1},n.previousPage=()=>n.setPageIndex(r=>r-1),n.nextPage=()=>n.setPageIndex(r=>r+1),n.firstPage=()=>n.setPageIndex(0),n.lastPage=()=>n.setPageIndex(n.getPageCount()-1),n.getPrePaginationRowModel=()=>n.getExpandedRowModel(),n.getPaginationRowModel=()=>(!n._getPaginationRowModel&&n.options.getPaginationRowModel&&(n._getPaginationRowModel=n.options.getPaginationRowModel(n)),n.options.manualPagination||!n._getPaginationRowModel?n.getPrePaginationRowModel():n._getPaginationRowModel()),n.getPageCount=()=>{var r;return(r=n.options.pageCount)!=null?r:Math.ceil(n.getRowCount()/n.getState().pagination.pageSize)},n.getRowCount=()=>{var r;return(r=n.options.rowCount)!=null?r:n.getPrePaginationRowModel().rows.length}}},Vb=()=>({top:[],bottom:[]}),sie={getInitialState:n=>({rowPinning:Vb(),...n}),getDefaultOptions:n=>({onRowPinningChange:Ea("rowPinning",n)}),createRow:(n,e)=>{n.pin=(t,r,i)=>{const o=r?n.getLeafRows().map(l=>{let{id:u}=l;return u}):[],s=i?n.getParentRows().map(l=>{let{id:u}=l;return u}):[],a=new Set([...s,n.id,...o]);e.setRowPinning(l=>{var u,c;if(t==="bottom"){var h,f;return{top:((h=l==null?void 0:l.top)!=null?h:[]).filter(y=>!(a!=null&&a.has(y))),bottom:[...((f=l==null?void 0:l.bottom)!=null?f:[]).filter(y=>!(a!=null&&a.has(y))),...Array.from(a)]}}if(t==="top"){var d,v;return{top:[...((d=l==null?void 0:l.top)!=null?d:[]).filter(y=>!(a!=null&&a.has(y))),...Array.from(a)],bottom:((v=l==null?void 0:l.bottom)!=null?v:[]).filter(y=>!(a!=null&&a.has(y)))}}return{top:((u=l==null?void 0:l.top)!=null?u:[]).filter(y=>!(a!=null&&a.has(y))),bottom:((c=l==null?void 0:l.bottom)!=null?c:[]).filter(y=>!(a!=null&&a.has(y)))}})},n.getCanPin=()=>{var t;const{enableRowPinning:r,enablePinning:i}=e.options;return typeof r=="function"?r(n):(t=r??i)!=null?t:!0},n.getIsPinned=()=>{const t=[n.id],{top:r,bottom:i}=e.getState().rowPinning,o=t.some(a=>r==null?void 0:r.includes(a)),s=t.some(a=>i==null?void 0:i.includes(a));return o?"top":s?"bottom":!1},n.getPinnedIndex=()=>{var t,r;const i=n.getIsPinned();if(!i)return-1;const o=(t=i==="top"?e.getTopRows():e.getBottomRows())==null?void 0:t.map(s=>{let{id:a}=s;return a});return(r=o==null?void 0:o.indexOf(n.id))!=null?r:-1}},createTable:n=>{n.setRowPinning=e=>n.options.onRowPinningChange==null?void 0:n.options.onRowPinningChange(e),n.resetRowPinning=e=>{var t,r;return n.setRowPinning(e?Vb():(t=(r=n.initialState)==null?void 0:r.rowPinning)!=null?t:Vb())},n.getIsSomeRowsPinned=e=>{var t;const r=n.getState().rowPinning;if(!e){var i,o;return Boolean(((i=r.top)==null?void 0:i.length)||((o=r.bottom)==null?void 0:o.length))}return Boolean((t=r[e])==null?void 0:t.length)},n._getPinnedRows=(e,t,r)=>{var i;return((i=n.options.keepPinnedRows)==null||i?(t??[]).map(s=>{const a=n.getRow(s,!0);return a.getIsAllParentsExpanded()?a:null}):(t??[]).map(s=>e.find(a=>a.id===s))).filter(Boolean).map(s=>({...s,position:r}))},n.getTopRows=An(()=>[n.getRowModel().rows,n.getState().rowPinning.top],(e,t)=>n._getPinnedRows(e,t,"top"),Tn(n.options,"debugRows")),n.getBottomRows=An(()=>[n.getRowModel().rows,n.getState().rowPinning.bottom],(e,t)=>n._getPinnedRows(e,t,"bottom"),Tn(n.options,"debugRows")),n.getCenterRows=An(()=>[n.getRowModel().rows,n.getState().rowPinning.top,n.getState().rowPinning.bottom],(e,t,r)=>{const i=new Set([...t??[],...r??[]]);return e.filter(o=>!i.has(o.id))},Tn(n.options,"debugRows"))}},aie={getInitialState:n=>({rowSelection:{},...n}),getDefaultOptions:n=>({onRowSelectionChange:Ea("rowSelection",n),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:n=>{n.setRowSelection=e=>n.options.onRowSelectionChange==null?void 0:n.options.onRowSelectionChange(e),n.resetRowSelection=e=>{var t;return n.setRowSelection(e?{}:(t=n.initialState.rowSelection)!=null?t:{})},n.toggleAllRowsSelected=e=>{n.setRowSelection(t=>{e=typeof e<"u"?e:!n.getIsAllRowsSelected();const r={...t},i=n.getPreGroupedRowModel().flatRows;return e?i.forEach(o=>{o.getCanSelect()&&(r[o.id]=!0)}):i.forEach(o=>{delete r[o.id]}),r})},n.toggleAllPageRowsSelected=e=>n.setRowSelection(t=>{const r=typeof e<"u"?e:!n.getIsAllPageRowsSelected(),i={...t};return n.getRowModel().rows.forEach(o=>{yE(i,o.id,r,!0,n)}),i}),n.getPreSelectedRowModel=()=>n.getCoreRowModel(),n.getSelectedRowModel=An(()=>[n.getState().rowSelection,n.getCoreRowModel()],(e,t)=>Object.keys(e).length?Wb(n,t):{rows:[],flatRows:[],rowsById:{}},Tn(n.options,"debugTable")),n.getFilteredSelectedRowModel=An(()=>[n.getState().rowSelection,n.getFilteredRowModel()],(e,t)=>Object.keys(e).length?Wb(n,t):{rows:[],flatRows:[],rowsById:{}},Tn(n.options,"debugTable")),n.getGroupedSelectedRowModel=An(()=>[n.getState().rowSelection,n.getSortedRowModel()],(e,t)=>Object.keys(e).length?Wb(n,t):{rows:[],flatRows:[],rowsById:{}},Tn(n.options,"debugTable")),n.getIsAllRowsSelected=()=>{const e=n.getFilteredRowModel().flatRows,{rowSelection:t}=n.getState();let r=Boolean(e.length&&Object.keys(t).length);return r&&e.some(i=>i.getCanSelect()&&!t[i.id])&&(r=!1),r},n.getIsAllPageRowsSelected=()=>{const e=n.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:t}=n.getState();let r=!!e.length;return r&&e.some(i=>!t[i.id])&&(r=!1),r},n.getIsSomeRowsSelected=()=>{var e;const t=Object.keys((e=n.getState().rowSelection)!=null?e:{}).length;return t>0&&t<n.getFilteredRowModel().flatRows.length},n.getIsSomePageRowsSelected=()=>{const e=n.getPaginationRowModel().flatRows;return n.getIsAllPageRowsSelected()?!1:e.filter(t=>t.getCanSelect()).some(t=>t.getIsSelected()||t.getIsSomeSelected())},n.getToggleAllRowsSelectedHandler=()=>e=>{n.toggleAllRowsSelected(e.target.checked)},n.getToggleAllPageRowsSelectedHandler=()=>e=>{n.toggleAllPageRowsSelected(e.target.checked)}},createRow:(n,e)=>{n.toggleSelected=(t,r)=>{const i=n.getIsSelected();e.setRowSelection(o=>{var s;if(t=typeof t<"u"?t:!i,n.getCanSelect()&&i===t)return o;const a={...o};return yE(a,n.id,t,(s=r==null?void 0:r.selectChildren)!=null?s:!0,e),a})},n.getIsSelected=()=>{const{rowSelection:t}=e.getState();return eT(n,t)},n.getIsSomeSelected=()=>{const{rowSelection:t}=e.getState();return xE(n,t)==="some"},n.getIsAllSubRowsSelected=()=>{const{rowSelection:t}=e.getState();return xE(n,t)==="all"},n.getCanSelect=()=>{var t;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(n):(t=e.options.enableRowSelection)!=null?t:!0},n.getCanSelectSubRows=()=>{var t;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(n):(t=e.options.enableSubRowSelection)!=null?t:!0},n.getCanMultiSelect=()=>{var t;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(n):(t=e.options.enableMultiRowSelection)!=null?t:!0},n.getToggleSelectedHandler=()=>{const t=n.getCanSelect();return r=>{var i;t&&n.toggleSelected((i=r.target)==null?void 0:i.checked)}}}},yE=(n,e,t,r,i)=>{var o;const s=i.getRow(e,!0);t?(s.getCanMultiSelect()||Object.keys(n).forEach(a=>delete n[a]),s.getCanSelect()&&(n[e]=!0)):delete n[e],r&&(o=s.subRows)!=null&&o.length&&s.getCanSelectSubRows()&&s.subRows.forEach(a=>yE(n,a.id,t,r,i))};function Wb(n,e){const t=n.getState().rowSelection,r=[],i={},o=function(s,a){return s.map(l=>{var u;const c=eT(l,t);if(c&&(r.push(l),i[l.id]=l),(u=l.subRows)!=null&&u.length&&(l={...l,subRows:o(l.subRows)}),c)return l}).filter(Boolean)};return{rows:o(e.rows),flatRows:r,rowsById:i}}function eT(n,e){var t;return(t=e[n.id])!=null?t:!1}function xE(n,e,t){var r;if(!((r=n.subRows)!=null&&r.length))return!1;let i=!0,o=!1;return n.subRows.forEach(s=>{if(!(o&&!i)&&(s.getCanSelect()&&(eT(s,e)?o=!0:i=!1),s.subRows&&s.subRows.length)){const a=xE(s,e);a==="all"?o=!0:(a==="some"&&(o=!0),i=!1)}}),i?"all":o?"some":!1}const wE=/([0-9]+)/gm,lie=(n,e,t)=>YO(vf(n.getValue(t)).toLowerCase(),vf(e.getValue(t)).toLowerCase()),uie=(n,e,t)=>YO(vf(n.getValue(t)),vf(e.getValue(t))),cie=(n,e,t)=>tT(vf(n.getValue(t)).toLowerCase(),vf(e.getValue(t)).toLowerCase()),hie=(n,e,t)=>tT(vf(n.getValue(t)),vf(e.getValue(t))),fie=(n,e,t)=>{const r=n.getValue(t),i=e.getValue(t);return r>i?1:r<i?-1:0},die=(n,e,t)=>tT(n.getValue(t),e.getValue(t));function tT(n,e){return n===e?0:n>e?1:-1}function vf(n){return typeof n=="number"?isNaN(n)||n===1/0||n===-1/0?"":String(n):typeof n=="string"?n:""}function YO(n,e){const t=n.split(wE).filter(Boolean),r=e.split(wE).filter(Boolean);for(;t.length&&r.length;){const i=t.shift(),o=r.shift(),s=parseInt(i,10),a=parseInt(o,10),l=[s,a].sort();if(isNaN(l[0])){if(i>o)return 1;if(o>i)return-1;continue}if(isNaN(l[1]))return isNaN(s)?-1:1;if(s>a)return 1;if(a>s)return-1}return t.length-r.length}const _0={alphanumeric:lie,alphanumericCaseSensitive:uie,text:cie,textCaseSensitive:hie,datetime:fie,basic:die},pie={getInitialState:n=>({sorting:[],...n}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:n=>({onSortingChange:Ea("sorting",n),isMultiSortEvent:e=>e.shiftKey}),createColumn:(n,e)=>{n.getAutoSortingFn=()=>{const t=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const i of t){const o=i==null?void 0:i.getValue(n.id);if(Object.prototype.toString.call(o)==="[object Date]")return _0.datetime;if(typeof o=="string"&&(r=!0,o.split(wE).length>1))return _0.alphanumeric}return r?_0.text:_0.basic},n.getAutoSortDir=()=>{const t=e.getFilteredRowModel().flatRows[0];return typeof(t==null?void 0:t.getValue(n.id))=="string"?"asc":"desc"},n.getSortingFn=()=>{var t,r;if(!n)throw new Error;return ES(n.columnDef.sortingFn)?n.columnDef.sortingFn:n.columnDef.sortingFn==="auto"?n.getAutoSortingFn():(t=(r=e.options.sortingFns)==null?void 0:r[n.columnDef.sortingFn])!=null?t:_0[n.columnDef.sortingFn]},n.toggleSorting=(t,r)=>{const i=n.getNextSortingOrder(),o=typeof t<"u"&&t!==null;e.setSorting(s=>{const a=s==null?void 0:s.find(d=>d.id===n.id),l=s==null?void 0:s.findIndex(d=>d.id===n.id);let u=[],c,h=o?t:i==="desc";if(s!=null&&s.length&&n.getCanMultiSort()&&r?a?c="toggle":c="add":s!=null&&s.length&&l!==s.length-1?c="replace":a?c="toggle":c="replace",c==="toggle"&&(o||i||(c="remove")),c==="add"){var f;u=[...s,{id:n.id,desc:h}],u.splice(0,u.length-((f=e.options.maxMultiSortColCount)!=null?f:Number.MAX_SAFE_INTEGER))}else c==="toggle"?u=s.map(d=>d.id===n.id?{...d,desc:h}:d):c==="remove"?u=s.filter(d=>d.id!==n.id):u=[{id:n.id,desc:h}];return u})},n.getFirstSortDir=()=>{var t,r;return((t=(r=n.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?t:n.getAutoSortDir()==="desc")?"desc":"asc"},n.getNextSortingOrder=t=>{var r,i;const o=n.getFirstSortDir(),s=n.getIsSorted();return s?s!==o&&((r=e.options.enableSortingRemoval)==null||r)&&(!(t&&(i=e.options.enableMultiRemove)!=null)||i)?!1:s==="desc"?"asc":"desc":o},n.getCanSort=()=>{var t,r;return((t=n.columnDef.enableSorting)!=null?t:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!n.accessorFn},n.getCanMultiSort=()=>{var t,r;return(t=(r=n.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?t:!!n.accessorFn},n.getIsSorted=()=>{var t;const r=(t=e.getState().sorting)==null?void 0:t.find(i=>i.id===n.id);return r?r.desc?"desc":"asc":!1},n.getSortIndex=()=>{var t,r;return(t=(r=e.getState().sorting)==null?void 0:r.findIndex(i=>i.id===n.id))!=null?t:-1},n.clearSorting=()=>{e.setSorting(t=>t!=null&&t.length?t.filter(r=>r.id!==n.id):[])},n.getToggleSortingHandler=()=>{const t=n.getCanSort();return r=>{t&&(r.persist==null||r.persist(),n.toggleSorting==null||n.toggleSorting(void 0,n.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:n=>{n.setSorting=e=>n.options.onSortingChange==null?void 0:n.options.onSortingChange(e),n.resetSorting=e=>{var t,r;n.setSorting(e?[]:(t=(r=n.initialState)==null?void 0:r.sorting)!=null?t:[])},n.getPreSortedRowModel=()=>n.getGroupedRowModel(),n.getSortedRowModel=()=>(!n._getSortedRowModel&&n.options.getSortedRowModel&&(n._getSortedRowModel=n.options.getSortedRowModel(n)),n.options.manualSorting||!n._getSortedRowModel?n.getPreSortedRowModel():n._getSortedRowModel())}},mie=[Dre,tie,Kre,Jre,Bre,Ure,nie,rie,pie,Yre,iie,oie,sie,aie,Qre];function gie(n){var e,t;const r=[...mie,...(e=n._features)!=null?e:[]];let i={_features:r};const o=i._features.reduce((f,d)=>Object.assign(f,d.getDefaultOptions==null?void 0:d.getDefaultOptions(i)),{}),s=f=>i.options.mergeOptions?i.options.mergeOptions(o,f):{...o,...f};let l={...{},...(t=n.initialState)!=null?t:{}};i._features.forEach(f=>{var d;l=(d=f.getInitialState==null?void 0:f.getInitialState(l))!=null?d:l});const u=[];let c=!1;const h={_features:r,options:{...o,...n},initialState:l,_queue:f=>{u.push(f),c||(c=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();c=!1}).catch(d=>setTimeout(()=>{throw d})))},reset:()=>{i.setState(i.initialState)},setOptions:f=>{const d=qh(f,i.options);i.options=s(d)},getState:()=>i.options.state,setState:f=>{i.options.onStateChange==null||i.options.onStateChange(f)},_getRowId:(f,d,v)=>{var y;return(y=i.options.getRowId==null?void 0:i.options.getRowId(f,d,v))!=null?y:`${v?[v.id,d].join("."):d}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(f,d)=>{let v=(d?i.getPrePaginationRowModel():i.getRowModel()).rowsById[f];if(!v&&(v=i.getCoreRowModel().rowsById[f],!v))throw new Error;return v},_getDefaultColumnDef:An(()=>[i.options.defaultColumn],f=>{var d;return f=(d=f)!=null?d:{},{header:v=>{const y=v.header.column.columnDef;return y.accessorKey?y.accessorKey:y.accessorFn?y.id:null},cell:v=>{var y,x;return(y=(x=v.renderValue())==null||x.toString==null?void 0:x.toString())!=null?y:null},...i._features.reduce((v,y)=>Object.assign(v,y.getDefaultColumnDef==null?void 0:y.getDefaultColumnDef()),{}),...f}},Tn(n,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:An(()=>[i._getColumnDefs()],f=>{const d=function(v,y,x){return x===void 0&&(x=0),v.map(g=>{const S=Fre(i,g,x,y),_=g;return S.columns=_.columns?d(_.columns,S,x+1):[],S})};return d(f)},Tn(n,"debugColumns")),getAllFlatColumns:An(()=>[i.getAllColumns()],f=>f.flatMap(d=>d.getFlatColumns()),Tn(n,"debugColumns")),_getAllFlatColumnsById:An(()=>[i.getAllFlatColumns()],f=>f.reduce((d,v)=>(d[v.id]=v,d),{}),Tn(n,"debugColumns")),getAllLeafColumns:An(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(f,d)=>{let v=f.flatMap(y=>y.getLeafColumns());return d(v)},Tn(n,"debugColumns")),getColumn:f=>i._getAllFlatColumnsById()[f]};Object.assign(i,h);for(let f=0;f<i._features.length;f++){const d=i._features[f];d==null||d.createTable==null||d.createTable(i)}return i}function vie(){return n=>An(()=>[n.options.data],e=>{const t={rows:[],flatRows:[],rowsById:{}},r=function(i,o,s){o===void 0&&(o=0);const a=[];for(let u=0;u<i.length;u++){const c=Ore(n,n._getRowId(i[u],u,s),i[u],u,o,void 0,s==null?void 0:s.id);if(t.flatRows.push(c),t.rowsById[c.id]=c,a.push(c),n.options.getSubRows){var l;c.originalSubRows=n.options.getSubRows(i[u],u),(l=c.originalSubRows)!=null&&l.length&&(c.subRows=r(c.originalSubRows,o+1,c))}}return a};return t.rows=r(e),t},Tn(n.options,"debugTable","getRowModel",()=>n._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function m4(n,e){return n?yie(n)?de.createElement(n,e):n:null}function yie(n){return xie(n)||typeof n=="function"||wie(n)}function xie(n){return typeof n=="function"&&(()=>{const e=Object.getPrototypeOf(n);return e.prototype&&e.prototype.isReactComponent})()}function wie(n){return typeof n=="object"&&typeof n.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(n.$$typeof.description)}function Sie(n){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...n},[t]=de.useState(()=>({current:gie(e)})),[r,i]=de.useState(()=>t.current.initialState);return t.current.setOptions(o=>({...o,...n,state:{...r,...n.state},onStateChange:s=>{i(s),n.onStateChange==null||n.onStateChange(s)}})),t.current}function ZO(n,e,t,r,i){r=r||{};var o=1.15,s=i.internal.scaleFactor,a=i.internal.getFontSize()/s,l=i.getLineHeightFactor?i.getLineHeightFactor():o,u=a*l,c=/\r\n|\r|\n/g,h="",f=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(h=typeof n=="string"?n.split(c):n,f=h.length||1),t+=a*(2-o),r.valign==="middle"?t-=f/2*u:r.valign==="bottom"&&(t-=f*u),r.halign==="center"||r.halign==="right"){var d=a;if(r.halign==="center"&&(d*=.5),h&&f>=1){for(var v=0;v<h.length;v++)i.text(h[v],e-i.getStringUnitWidth(h[v])*d,t),t+=u;return i}e-=i.getStringUnitWidth(n)*d}return r.halign==="justify"?i.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var g4={},$m=function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:g4=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,i,o;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var s=this.jsPDFDocument.internal.getFont(),a=s.fontStyle,l=s.fontName;if(e.font&&(l=e.font),e.fontStyle){a=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(a)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),a=u[0])}if(this.jsPDFDocument.setFont(l,a),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var c=n.unifyColor(e.fillColor);c&&(r=this.jsPDFDocument).setFillColor.apply(r,c),c=n.unifyColor(e.textColor),c&&(i=this.jsPDFDocument).setTextColor.apply(i,c),c=n.unifyColor(e.lineColor),c&&(o=this.jsPDFDocument).setDrawColor.apply(o,c),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,i,o){return this.jsPDFDocument.rect(e,t,r,i,o)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return g4||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n}(),SE=function(n,e){return SE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},SE(n,e)};function KO(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");SE(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var JO=function(n){KO(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e}(Array);function _ie(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function bie(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function hw(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],i=r.map(function(o){return t.getTextWidth(o)}).reduce(function(o,s){return Math.max(o,s)},0);return i}function QO(n,e,t,r){var i=e.settings.tableLineWidth,o=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:o});var s=eB(i,!1);s&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,s)}function eB(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function AS(n,e){var t,r,i,o;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(o=n.bottom)!==null&&o!==void 0?o:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function tB(n,e){var t=AS(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function Mie(n,e,t,r,i){var o={},s=1.3333333333333333,a=jb(e,function(_){return i.getComputedStyle(_).backgroundColor});a!=null&&(o.fillColor=a);var l=jb(e,function(_){return i.getComputedStyle(_).color});l!=null&&(o.textColor=l);var u=Aie(r,t);u&&(o.cellPadding=u);var c="borderTopColor",h=s*t,f=r.borderTopWidth;if(r.borderBottomWidth===f&&r.borderRightWidth===f&&r.borderLeftWidth===f){var d=(parseFloat(f)||0)/h;d&&(o.lineWidth=d)}else o.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/h,right:(parseFloat(r.borderRightWidth)||0)/h,bottom:(parseFloat(r.borderBottomWidth)||0)/h,left:(parseFloat(r.borderLeftWidth)||0)/h},o.lineWidth.top||(o.lineWidth.right?c="borderRightColor":o.lineWidth.bottom?c="borderBottomColor":o.lineWidth.left&&(c="borderLeftColor"));var v=jb(e,function(_){return i.getComputedStyle(_)[c]});v!=null&&(o.lineColor=v);var y=["left","right","center","justify"];y.indexOf(r.textAlign)!==-1&&(o.halign=r.textAlign),y=["middle","bottom","top"],y.indexOf(r.verticalAlign)!==-1&&(o.valign=r.verticalAlign);var x=parseInt(r.fontSize||"");isNaN(x)||(o.fontSize=x/s);var g=Eie(r);g&&(o.fontStyle=g);var S=(r.fontFamily||"").toLowerCase();return n.indexOf(S)!==-1&&(o.font=S),o}function Eie(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function jb(n,e){var t=nB(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],o=parseInt(r[4]);return o===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function nB(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:nB(n.parentElement,e):t}function Aie(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,o=t.map(function(a){return parseInt(a||"0")/r}),s=AS(o,0);return i>s.top&&(s.top=i),i>s.bottom&&(s.bottom=i),s}function rB(n,e,t,r,i){var o,s;r===void 0&&(r=!1),i===void 0&&(i=!1);var a;typeof e=="string"?a=t.document.querySelector(e):a=e;var l=Object.keys(n.getFontList()),u=n.scaleFactor(),c=[],h=[],f=[];if(!a)return console.error("Html table could not be found with input: ",e),{head:c,body:h,foot:f};for(var d=0;d<a.rows.length;d++){var v=a.rows[d],y=(s=(o=v==null?void 0:v.parentElement)===null||o===void 0?void 0:o.tagName)===null||s===void 0?void 0:s.toLowerCase(),x=Tie(l,u,t,v,r,i);x&&(y==="thead"?c.push(x):y==="tfoot"?f.push(x):h.push(x))}return{head:c,body:h,foot:f}}function Tie(n,e,t,r,i,o){for(var s=new JO(r),a=0;a<r.cells.length;a++){var l=r.cells[a],u=t.getComputedStyle(l);if(i||u.display!=="none"){var c=void 0;o&&(c=Mie(n,l,e,u,t)),s.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:c,_element:l,content:Cie(l)})}}var h=t.getComputedStyle(r);if(s.length>0&&(i||h.display!=="none"))return s}function Cie(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function Pie(n,e,t){for(var r=0,i=[n,e,t];r<i.length;r++){var o=i[r];o&&typeof o!="object"&&console.error("The options parameter should be of type object, is: "+typeof o),o.startY&&typeof o.startY!="number"&&(console.error("Invalid value for startY option",o.startY),delete o.startY)}}function Cc(n,e,t,r,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(n),s=1;s<arguments.length;s++){var a=arguments[s];if(a!=null)for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(o[l]=a[l])}return o}function iB(n,e){var t=new $m(n),r=t.getDocumentOptions(),i=t.getGlobalOptions();Pie(i,r,e);var o=Cc({},i,r,e),s;typeof window<"u"&&(s=window);var a=Rie(i,r,e),l=Lie(i,r,e),u=kie(t,o),c=Nie(t,o,s);return{id:e.tableId,content:c,hooks:l,styles:a,settings:u}}function Rie(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var u=n[l],c=e[l],h=t[l];r.columnStyles=Cc({},u,c,h)}else{var f=[n,e,t],d=f.map(function(v){return v[l]||{}});r[l]=Cc({},d[0],d[1],d[2])}},o=0,s=Object.keys(r);o<s.length;o++){var a=s[o];i(a)}return r}function Lie(n,e,t){for(var r=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},o=0,s=r;o<s.length;o++){var a=s[o];a.didParseCell&&i.didParseCell.push(a.didParseCell),a.willDrawCell&&i.willDrawCell.push(a.willDrawCell),a.didDrawCell&&i.didDrawCell.push(a.didDrawCell),a.willDrawPage&&i.willDrawPage.push(a.willDrawPage),a.didDrawPage&&i.didDrawPage.push(a.didDrawPage)}return i}function kie(n,e){var t,r,i,o,s,a,l,u,c,h,f,d,v=AS(e.margin,40/n.scaleFactor()),y=(t=Iie(n,e.startY))!==null&&t!==void 0?t:v.top,x;e.showFoot===!0?x="everyPage":e.showFoot===!1?x="never":x=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var g;e.showHead===!0?g="everyPage":e.showHead===!1?g="never":g=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var S=(o=e.useCss)!==null&&o!==void 0?o:!1,_=e.theme||(S?"plain":"striped"),E=!!e.horizontalPageBreak,C=(s=e.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(a=e.includeHiddenHtml)!==null&&a!==void 0?a:!1,useCss:S,theme:_,startY:y,margin:v,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(c=e.tableWidth)!==null&&c!==void 0?c:"auto",showHead:g,showFoot:x,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(f=e.tableLineColor)!==null&&f!==void 0?f:200,horizontalPageBreak:E,horizontalPageBreakRepeat:C,horizontalPageBreakBehaviour:(d=e.horizontalPageBreakBehaviour)!==null&&d!==void 0?d:"afterAllRows"}}function Iie(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),i=n.pageNumber(),o=!1;if(t&&t.startPageNumber){var s=t.startPageNumber+t.pageNumber-1;o=s===i}return typeof e=="number"?e:(e==null||e===!1)&&o&&(t==null?void 0:t.finalY)!=null?t.finalY+20/r:null}function Nie(n,e,t){var r=e.head||[],i=e.body||[],o=e.foot||[];if(e.html){var s=e.includeHiddenHtml;if(t){var a=rB(n,e.html,t,s,e.useCss)||{};r=a.head||r,i=a.body||r,o=a.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||Fie(r,i,o);return{columns:l,head:r,body:i,foot:o}}function Fie(n,e,t){var r=n[0]||e[0]||t[0]||[],i=[];return Object.keys(r).filter(function(o){return o!=="_element"}).forEach(function(o){var s=1,a;Array.isArray(r)?a=r[parseInt(o)]:a=r[o],typeof a=="object"&&!Array.isArray(a)&&(s=(a==null?void 0:a.colSpan)||1);for(var l=0;l<s;l++){var u=void 0;Array.isArray(r)?u=i.length:u=o+(l>0?"_".concat(l):"");var c={dataKey:u};i.push(c)}}),i}var _E=function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n}(),Die=function(n){KO(e,n);function e(t,r,i,o,s,a){var l=n.call(this,t,r,a)||this;return l.cell=i,l.row=o,l.column=s,l.section=o.section,l}return e}(_E),Oie=function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,i,o,s){for(var a=0,l=t;a<l.length;a++){var u=l[a],c=new Die(e,this,r,i,o,s),h=u(c)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],h)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var o=i[r];o(new _E(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var o=i[r];o(new _E(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,o){return i+o.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n}(),oB=function(){function n(e,t,r,i,o){o===void 0&&(o=!1),this.height=0,this.raw=e,e instanceof JO&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=i,this.spansMultiplePages=o}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,i){var o;return Math.max(r,((o=t.cells[i.index])===null||o===void 0?void 0:o.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var i=t.cells[r.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(i,o){var s=r.cells[o.index];if(!s)return 0;var a=t.getLineHeight(s.styles.fontSize),l=s.padding("vertical"),u=l+a;return u>i?u:i},0)},n}(),sB=function(){function n(e,t,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var o=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,o=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var s=o!=null?""+o:"",a=/\r\n|\r|\n/g;this.text=s.split(a)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,o=r*i+this.padding("vertical");return Math.max(o,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=AS(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n}(),Bie=function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,i=e.allRows();r<i.length;r++){var o=i[r],s=o.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(t=Math.max(t,s.styles.cellWidth))}return t},n}();function Uie(n,e){zie(n,e);var t=[],r=0;e.columns.forEach(function(o){var s=o.getMaxCustomCellWidth(e);s?o.width=s:(o.width=o.wrappedWidth,t.push(o)),r+=o.width});var i=e.getWidth(n.pageSize().width)-r;i&&(i=bE(t,i,function(o){return Math.max(o.minReadableWidth,o.minWidth)})),i&&(i=bE(t,i,function(o){return o.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),Gie(e),Vie(e,n),Hie(e)}function zie(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,i=tB(n,e);e.allRows().forEach(function(o){for(var s=0,a=e.columns;s<a.length;s++){var l=a[s],u=o.cells[l.index];if(u){var c=e.hooks.didParseCell;e.callCellHooks(n,c,u,o,l,null);var h=u.padding("horizontal");u.contentWidth=hw(u.text,u.styles,n)+h;var f=hw(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,n);if(u.minReadableWidth=f+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||r===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var d=10/t;u.minWidth=u.styles.minCellWidth||d,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(o){for(var s=0,a=e.columns;s<a.length;s++){var l=a[s],u=o.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var c=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},h=c.cellWidth||c.minCellWidth;h&&typeof h=="number"&&(l.minWidth=h,l.wrappedWidth=h)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function bE(n,e,t){for(var r=e,i=n.reduce(function(d,v){return d+v.wrappedWidth},0),o=0;o<n.length;o++){var s=n[o],a=s.wrappedWidth/i,l=r*a,u=s.width+l,c=t(s),h=u<c?c:u;e-=h-s.width,s.width=h}if(e=Math.round(e*1e10)/1e10,e){var f=n.filter(function(d){return e<0?d.width>t(d):!0});f.length&&(e=bE(f,e,t))}return e}function Hie(n){for(var e={},t=1,r=n.allRows(),i=0;i<r.length;i++)for(var o=r[i],s=0,a=n.columns;s<a.length;s++){var l=a[s],u=e[l.index];if(t>1)t--,delete o.cells[l.index];else if(u)u.cell.height+=o.height,t=u.cell.colSpan,delete o.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var c=o.cells[l.index];if(!c)continue;if(c.height=o.height,c.rowSpan>1){var h=r.length-i,f=c.rowSpan>h?h:c.rowSpan;e[l.index]={cell:c,left:f,row:o}}}}}function Gie(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],i=null,o=0,s=0,a=0;a<n.columns.length;a++){var l=n.columns[a];if(s-=1,s>1&&n.columns[a+1])o+=l.width,delete r.cells[l.index];else if(i){var u=i;delete r.cells[l.index],i=null,u.width=l.width+o}else{var u=r.cells[l.index];if(!u)continue;if(s=u.colSpan,o=0,u.colSpan>1){i=u,o+=l.width;continue}u.width=l.width+o}}}function Vie(n,e){for(var t={count:0,height:0},r=0,i=n.allRows();r<i.length;r++){for(var o=i[r],s=0,a=n.columns;s<a.length;s++){var l=a[s],u=o.cells[l.index];if(u){e.applyStyles(u.styles,!0);var c=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,c+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=v4(u.text,c,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=v4(u.text,c,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var h=u.styles.overflow(u.text,c);typeof h=="string"?u.text=[h]:u.text=h}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var f=u.contentHeight/u.rowSpan;u.rowSpan>1&&t.count*t.height<f*u.rowSpan?t={height:f,count:u.rowSpan}:t&&t.count>0&&t.height>f&&(f=t.height),f>o.height&&(o.height=f)}}t.count--}}function v4(n,e,t,r,i){return n.map(function(o){return Wie(o,e,t,r,i)})}function Wie(n,e,t,r,i){var o=1e4*r.scaleFactor();if(e=Math.ceil(e*o)/o,e>=hw(n,t,r))return n;for(;e<hw(n+i,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function aB(n,e){var t=new $m(n),r=jie(e,t.scaleFactor()),i=new Oie(e,r);return Uie(t,i),t.applyStyles(t.userStyles),i}function jie(n,e){var t=n.content,r=$ie(t.columns);if(t.head.length===0){var i=y4(r,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=y4(r,"foot");i&&t.foot.push(i)}var o=n.settings.theme,s=n.styles;return{columns:r,head:qb("head",t.head,r,s,o,e),body:qb("body",t.body,r,s,o,e),foot:qb("foot",t.foot,r,s,o,e)}}function qb(n,e,t,r,i,o){var s={},a=e.map(function(l,u){for(var c=0,h={},f=0,d=0,v=0,y=t;v<y.length;v++){var x=y[v];if(s[x.index]==null||s[x.index].left===0)if(d===0){var g=void 0;Array.isArray(l)?g=l[x.index-f-c]:g=l[x.dataKey];var S={};typeof g=="object"&&!Array.isArray(g)&&(S=(g==null?void 0:g.styles)||{});var _=Xie(n,x,u,i,r,o,S),E=new sB(g,_,n);h[x.dataKey]=E,h[x.index]=E,d=E.colSpan-1,s[x.index]={left:E.rowSpan-1,times:d}}else d--,f++;else s[x.index].left--,d=s[x.index].times,c++}return new oB(l,u,n,h)});return a}function y4(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var i=qie(e,r.raw);i!=null&&(t[r.dataKey]=i)}}),Object.keys(t).length>0?t:null}function qie(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function $ie(n){return n.map(function(e,t){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:t:i=t,new Bie(i,e,t)})}function Xie(n,e,t,r,i,o,s){var a=bie(r),l;n==="head"?l=i.headStyles:n==="body"?l=i.bodyStyles:n==="foot"&&(l=i.footStyles);var u=Cc({},a.table,a[n],i.styles,l),c=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},h=n==="body"?c:{},f=n==="body"&&t%2===0?Cc({},a.alternateRow,i.alternateRowStyles):{},d=_ie(o),v=Cc({},d,u,f,h);return Cc(v,s)}function Yie(n,e,t){var r;t===void 0&&(t={});var i=tB(n,e),o=new Map,s=[],a=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(f){var d=e.columns.find(function(v){return v.dataKey===f||v.index===f});d&&!o.has(d.index)&&(o.set(d.index,!0),s.push(d.index),a.push(e.columns[d.index]),i-=d.wrappedWidth)});for(var u=!0,c=(r=t==null?void 0:t.start)!==null&&r!==void 0?r:0;c<e.columns.length;){if(o.has(c)){c++;continue}var h=e.columns[c].wrappedWidth;if(u||i>=h)u=!1,s.push(c),a.push(e.columns[c]),i-=h;else break;c++}return{colIndexes:s,columns:a,lastIndex:c-1}}function Zie(n,e){for(var t=[],r=0;r<e.columns.length;r++){var i=Yie(n,e,{start:r});i.columns.length&&(t.push(i),r=i.lastIndex)}return t}function lB(n,e){var t=e.settings,r=t.startY,i=t.margin,o={x:i.left,y:r},s=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),a=r+i.bottom+s;if(t.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(f,d){return f+d.height},0);a+=u}var c=new $m(n);(t.pageBreak==="always"||t.startY!=null&&a>c.pageSize().height)&&(cB(c),o.y=i.top),e.callWillDrawPageHooks(c,o);var h=Cc({},o);e.startPageNumber=c.pageNumber(),t.horizontalPageBreak?Kie(c,e,h,o):(c.applyStyles(c.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(f){return Hc(c,e,f,o,e.columns)}),c.applyStyles(c.userStyles),e.body.forEach(function(f,d){var v=d===e.body.length-1;fw(c,e,f,v,h,o,e.columns)}),c.applyStyles(c.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(f){return Hc(c,e,f,o,e.columns)})),QO(c,e,h,o),e.callEndPageHooks(c,o),e.finalY=o.y,n.lastAutoTable=e,c.applyStyles(c.userStyles)}function Kie(n,e,t,r){var i=Zie(n,e),o=e.settings;if(o.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,c){n.applyStyles(n.userStyles),c>0?av(n,e,t,r,u.columns,!0):x4(n,e,r,u.columns),Jie(n,e,t,r,u.columns),$b(n,e,r,u.columns)});else for(var s=-1,a=i[0],l=function(){var u=s;if(a){n.applyStyles(n.userStyles);var c=a.columns;s>=0?av(n,e,t,r,c,!0):x4(n,e,r,c),u=w4(n,e,s+1,r,c),$b(n,e,r,c)}var h=u-s;i.slice(1).forEach(function(f){n.applyStyles(n.userStyles),av(n,e,t,r,f.columns,!0),w4(n,e,s+1,r,f.columns,h),$b(n,e,r,f.columns)}),s=u};s<e.body.length-1;)l()}function x4(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(o){return Hc(n,e,o,t,r)})}function Jie(n,e,t,r,i){n.applyStyles(n.userStyles),e.body.forEach(function(o,s){var a=s===e.body.length-1;fw(n,e,o,a,t,r,i)})}function w4(n,e,t,r,i,o){n.applyStyles(n.userStyles),o=o??e.body.length;var s=Math.min(t+o,e.body.length),a=-1;return e.body.slice(t,s).forEach(function(l,u){var c=t+u===e.body.length-1,h=uB(n,e,c,r);l.canEntireRowFit(h,i)&&(Hc(n,e,l,r,i),a=t+u)}),a}function $b(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(o){return Hc(n,e,o,t,r)})}function Qie(n,e,t){var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),o=Math.floor((e-i)/r);return Math.max(0,o)}function eoe(n,e,t,r){var i={};n.spansMultiplePages=!0,n.height=0;for(var o=0,s=0,a=t.columns;s<a.length;s++){var l=a[s],u=n.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var c=new sB(u.raw,u.styles,u.section);c=Cc(c,u),c.text=[];var h=Qie(u,e,r);u.text.length>h&&(c.text=u.text.splice(h,u.text.length));var f=r.scaleFactor(),d=r.getLineHeightFactor();u.contentHeight=u.getContentHeight(f,d),u.contentHeight>=e&&(u.contentHeight=e,c.styles.minCellHeight-=e),u.contentHeight>n.height&&(n.height=u.contentHeight),c.contentHeight=c.getContentHeight(f,d),c.contentHeight>o&&(o=c.contentHeight),i[l.index]=c}}var v=new oB(n.raw,-1,n.section,i,!0);v.height=o;for(var y=0,x=t.columns;y<x.length;y++){var l=x[y],c=v.cells[l.index];c&&(c.height=v.height);var u=n.cells[l.index];u&&(u.height=n.height)}return v}function toe(n,e,t,r){var i=n.pageSize().height,o=r.settings.margin,s=o.top+o.bottom,a=i-s;e.section==="body"&&(a-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,n),u=l<t;if(l>a)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var c=e.hasRowSpan(r.columns),h=e.getMaxCellHeight(r.columns)>a;return h?(c&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(c||r.settings.rowPageBreak==="avoid")}function fw(n,e,t,r,i,o,s){var a=uB(n,e,r,o);if(t.canEntireRowFit(a,s))Hc(n,e,t,o,s);else if(toe(n,t,a,e)){var l=eoe(t,a,e,n);Hc(n,e,t,o,s),av(n,e,i,o,s),fw(n,e,l,r,i,o,s)}else av(n,e,i,o,s),fw(n,e,t,r,i,o,s)}function Hc(n,e,t,r,i){r.x=e.settings.margin.left;for(var o=0,s=i;o<s.length;o++){var a=s[o],l=t.cells[a.index];if(!l){r.x+=a.width;continue}n.applyStyles(l.styles),l.x=r.x,l.y=r.y;var u=e.callCellHooks(n,e.hooks.willDrawCell,l,t,a,r);if(u===!1){r.x+=a.width;continue}noe(n,l,r);var c=l.getTextPos();ZO(l.text,c.x,c.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,l,t,a,r),r.x+=a.width}r.y+=t.height}function noe(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=eB(r.lineWidth,r.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),roe(n,e,t,r.lineWidth))}function roe(n,e,t,r){var i,o,s,a;r.top&&(i=t.x,o=t.y,s=t.x+e.width,a=t.y,r.right&&(s+=.5*r.right),r.left&&(i-=.5*r.left),l(r.top,i,o,s,a)),r.bottom&&(i=t.x,o=t.y+e.height,s=t.x+e.width,a=t.y+e.height,r.right&&(s+=.5*r.right),r.left&&(i-=.5*r.left),l(r.bottom,i,o,s,a)),r.left&&(i=t.x,o=t.y,s=t.x,a=t.y+e.height,r.top&&(o-=.5*r.top),r.bottom&&(a+=.5*r.bottom),l(r.left,i,o,s,a)),r.right&&(i=t.x+e.width,o=t.y,s=t.x+e.width,a=t.y+e.height,r.top&&(o-=.5*r.top),r.bottom&&(a+=.5*r.bottom),l(r.right,i,o,s,a));function l(u,c,h,f,d){n.getDocument().setLineWidth(u),n.getDocument().line(c,h,f,d,"S")}}function uB(n,e,t,r){var i=e.settings.margin.bottom,o=e.settings.showFoot;return(o==="everyPage"||o==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-i}function av(n,e,t,r,i,o){i===void 0&&(i=[]),o===void 0&&(o=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!o&&e.foot.forEach(function(a){return Hc(n,e,a,r,i)}),e.callEndPageHooks(n,r);var s=e.settings.margin;QO(n,e,t,r),cB(n),e.pageNumber++,r.x=s.left,r.y=s.top,t.y=s.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(a){return Hc(n,e,a,r,i)}),n.applyStyles(n.userStyles))}function cB(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function ioe(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=iB(this,r),o=aB(this,i);return lB(this,o),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,i){ZO(e,t,r,i,this)},n.API.autoTableSetDefaults=function(e){return $m.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){$m.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new $m(this),o=rB(i,e,window,t,!1),s=o.head,a=o.body,l=((r=s[0])===null||r===void 0?void 0:r.map(function(u){return u.content}))||[];return{columns:l,rows:a,data:a}}}var Xb;function ooe(n,e){var t=iB(n,e),r=aB(n,t);lB(n,r)}try{if(typeof window<"u"&&window){var S4=window,_4=S4.jsPDF||((Xb=S4.jspdf)===null||Xb===void 0?void 0:Xb.jsPDF);_4&&ioe(_4)}}catch(n){console.error("Could not apply autoTable plugin",n)}const soe=({data:n=[],modelName:e="Model"})=>{const t=de.useMemo(()=>[{accessorKey:"id",header:"ID",cell:o=>o.getValue()},{accessorKey:"name",header:"Name",cell:o=>o.getValue()},{accessorKey:"quantity",header:"Quantity",cell:o=>o.getValue()},{accessorKey:"dimensions",header:"Dimensions",cell:o=>o.getValue()},{accessorKey:"material",header:"Material",cell:o=>o.getValue()}],[]),r=Sie({data:n,columns:t,getCoreRowModel:vie()}),i=()=>{const o=new vn;o.text(`Bill of Materials - ${e}`,14,16),ooe(o,{startY:20,head:[t.map(s=>s.header)],body:n.map(s=>t.map(a=>s[a.accessorKey]))}),o.save(`${e}_BoM.pdf`)};return!n||n.length===0?ce("div",{style:{padding:"20px",textAlign:"center",color:"#888"},children:"No Bill of Materials data available for this model."}):Je("div",{style:{padding:"15px",height:"100%",overflowY:"auto",boxSizing:"border-box"},children:[Je("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[ce("h2",{style:{margin:0,fontSize:"1.4em"},children:"Bill of Materials"}),ce("button",{onClick:i,style:{padding:"8px 15px",fontSize:"1em",cursor:"pointer",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px"},children:"Export PDF"})]}),Je("table",{style:{width:"100%",borderCollapse:"collapse"},children:[ce("thead",{children:r.getHeaderGroups().map(o=>ce("tr",{children:o.headers.map(s=>ce("th",{style:{border:"1px solid #ddd",padding:"10px",textAlign:"left",backgroundColor:"#f2f2f2"},children:s.isPlaceholder?null:m4(s.column.columnDef.header,s.getContext())},s.id))},o.id))}),ce("tbody",{children:r.getRowModel().rows.map(o=>ce("tr",{children:o.getVisibleCells().map(s=>ce("td",{style:{border:"1px solid #ddd",padding:"10px"},children:m4(s.column.columnDef.cell,s.getContext())},s.id))},o.id))})]})]})};function aoe(){return new Worker("/cad-os/assets/worker-f3a55e12.js",{type:"module"})}function loe(){return new Worker("/cad-os/assets/technicalDrawing.worker-016b07dc.js",{type:"module"})}const Yb=Fw(new aoe),uoe=Fw(new loe);function coe(){var Q;const[n,e]=de.useState(Object.keys(Ys)[0]),[t,r]=de.useState(eE(Ys[n])),[i,o]=de.useState(0),[s,a]=de.useState(null),[l,u]=de.useState([]),[c,h]=de.useState(null),[f,d]=de.useState([]),[v,y]=de.useState("3d"),[x,g]=de.useState("1x1"),[S,_]=de.useState("Front"),[E,C]=de.useState(!1),[I,F]=de.useState(null),[R,k]=de.useState(!0),[L,N]=de.useState(!1);de.useEffect(()=>{const se=()=>{N(window.innerWidth<768),window.innerWidth<768?k(!1):k(!0)};return se(),window.addEventListener("resize",se),()=>window.removeEventListener("resize",se)},[]);const z=de.useCallback(async()=>{console.time(`[PERF] worker call for ${n}`),console.log(`[INFO] Creating ${n} with params:`,t);const se={...t};Ys[n].hasExplosion&&(se.explosionFactor=i);try{d([]);const me=await Yb.createMesh(n,se);console.timeEnd(`[PERF] worker call for ${n}`),me.error&&me.validationErrors?(d(me.validationErrors),a(null),h(null)):(a(me),h(me.componentData||null))}catch(me){console.error("Error creating model:",me),d(["An error occurred while generating the model."]),a(null),h(null),console.timeEnd(`[PERF] worker call for ${n}`)}},[n,t,i,v]);de.useEffect(()=>{z()},[z]);const H=de.useCallback(async()=>{console.log(`[INFO] Requesting high-detail mesh for ${n}`),console.time(`[PERF] worker call for ${n} (high detail)`);try{const se={...t};Ys[n].hasExplosion&&(se.explosionFactor=i);const me=await Yb.createMesh(n,se,"high");return console.timeEnd(`[PERF] worker call for ${n} (high detail)`),me.error?(console.error("Error generating high-detail mesh:",me.validationErrors),d(me.validationErrors||["Error generating high-detail mesh."]),null):me}catch(se){return console.error("Error requesting high-detail mesh:",se),d(["An error occurred while generating the high-detail model."]),console.timeEnd(`[PERF] worker call for ${n} (high detail)`),null}},[n,t,i,Yb]),G=de.useCallback(()=>{const se={id:`vb-${Date.now()}-${Math.random().toString(16).slice(2)}`,layout:x,titleBlock:{project:"Project Name",partName:"Part Name",scale:"NTS",material:"Steel",drawnBy:"Cline",date:new Date().toLocaleDateString()},items:[]};console.log("[DEBUG] handleAddViewbox - Before setViewboxes. Current viewboxes:",l),u(me=>{const Se=[...me,se];return console.log("[DEBUG] handleAddViewbox - Inside setViewboxes callback. Updated viewboxes:",Se),Se}),console.log(`[INFO] Added new viewbox with layout ${x}:`,se)},[x,l]),K=se=>{g(se),console.log(`[INFO] Selected layout changed to: ${se}`)},ee=se=>{_(se),console.log(`[INFO] Selected view to add changed to: ${se}`)},le=se=>{C(se),console.log(`[INFO] Include hidden lines toggled to: ${se}`)},V=de.useCallback((se,me)=>{F({viewboxId:se,cellIndex:me}),console.log(`[INFO] Selected target cell: Viewbox ${se}, Cell ${me}`)},[]),J=de.useCallback((se,me,Se)=>{u(Ce=>Ce.map($e=>$e.id===se?{...$e,titleBlock:{...$e.titleBlock,[me]:Se}}:$e)),console.log(`[INFO] Updated title block for Viewbox ${se}: Field=${me}, Value=${Se}`)},[]),j=async()=>{if(!I){console.warn("[WARN] No target cell selected to add view."),alert("Please click on a cell in a viewbox first to select where to add the view.");return}const{viewboxId:se,cellIndex:me}=I;let Se=S,Ce=null;const $e=" - ";if(S.includes($e)){const fe=S.split($e);fe.length===2?(Ce=fe[0].trim(),Se=fe[1].trim(),console.log(`[INFO] Parsed part view: Part ID='${Ce}', View='${Se}'`)):(console.warn(`[WARN] Unexpected format for part view selection: ${S}. Treating as whole model view.`),Se=S,Ce=null)}else console.log(`[INFO] Adding whole model view: ${Se}`),Ce=null;console.log(`[ACTION] Attempting to add view to Viewbox ${se}, Cell ${me}: View='${Se}', Part ID='${Ce||"Whole Model"}', Hidden: ${E}, Params:`,t);let ke;try{if(console.log(`[INFO] Calling techDrawWorker.generateSingleProjection for ${n} (Part ID: ${Ce||"N/A"})...`),ke=await uoe.generateSingleProjection(n,{...t},Se,E,Ce),console.log("[INFO] Received projection result from worker:",ke),!ke||ke.error){console.error("[ERROR] Worker failed to generate single projection:",(ke==null?void 0:ke.message)||"Unknown worker error");return}}catch(fe){console.error("[ERROR] Error calling techDrawWorker.generateSingleProjection:",fe);return}u(fe=>{const Ie=fe.findIndex(Ye=>Ye.id===se);if(Ie===-1)return console.warn(`[WARN] Target viewbox ${se} not found in current state.`),fe;const Ue=me,Te=JSON.parse(JSON.stringify(fe)),ae=Te[Ie];ae.items||(ae.items=[]);const gt={id:`view-${Date.now()}-${Math.random().toString(16).slice(2)}`,type:"projection",viewType:Se,partName:Ce,includeHiddenLines:E,params:{...t},svgData:{paths:ke.paths,viewBox:ke.viewBox}};for(console.log("[INFO] Adding generated view item:",gt);ae.items.length<=Ue;)ae.items.push(null);return ae.items[Ue]=gt,console.log(`[INFO] View added to Viewbox ${se}, Cell ${Ue}. Final state:`,Te),Te})},ie=se=>{var Se;const me=se.target.value;e(me),r(eE(Ys[me])),o(0),u([]),h(null),v==="bom"&&!((Se=Ys[me])!=null&&Se.hasBoM)&&y("3d")},D=(se,me)=>{r(Se=>({...Se,[se]:me}))},q=se=>{o(parseFloat(se.target.value))},Z=()=>{k(!R)};return Je(Xm,{children:[Je("div",{style:{padding:L?"8px":"10px",borderBottom:"1px solid #eee",backgroundColor:"#f8f8f8",fontSize:L?"11px":"12px",margin:0,flexShrink:0},children:[Je("div",{style:{display:"flex",flexDirection:L?"column":"row",alignItems:L?"flex-start":"center",marginBottom:"10px",gap:L?"8px":"0"},children:[Je("div",{style:{display:"flex",alignItems:"center",width:L?"100%":"auto"},children:[ce("span",{style:{marginRight:"5px",fontWeight:"bold"},children:"Model:"}),ce("select",{value:n,onChange:ie,style:{marginRight:"10px",height:L?"30px":"24px",fontSize:L?"14px":"12px",flex:L?"1":"auto"},children:Object.keys(Ys).map(se=>ce("option",{value:se,children:se},se))})]}),Je("div",{style:{display:"flex",marginLeft:L?"0":"20px",borderRadius:"4px",overflow:"hidden",border:"1px solid #ccc",width:L?"100%":"auto"},children:[ce("button",{onClick:()=>y("3d"),style:{padding:L?"8px 12px":"4px 12px",border:"none",background:v==="3d"?"#4a90e2":"#f0f0f0",color:v==="3d"?"white":"#333",cursor:"pointer",fontWeight:v==="3d"?"bold":"normal",flex:L?"1":"auto",fontSize:L?"14px":"inherit"},children:"3D View"}),ce("button",{onClick:()=>y("technical"),style:{padding:L?"8px 12px":"4px 12px",border:"none",background:v==="technical"?"#4a90e2":"#f0f0f0",color:v==="technical"?"white":"#333",cursor:"pointer",fontWeight:v==="technical"?"bold":"normal",flex:L?"1":"auto",fontSize:L?"14px":"inherit"},children:"Technical Drawing"}),ce("button",{onClick:()=>y("rendering"),style:{padding:L?"8px 12px":"4px 12px",border:"none",background:v==="rendering"?"#4a90e2":"#f0f0f0",color:v==="rendering"?"white":"#333",cursor:"pointer",fontWeight:v==="rendering"?"bold":"normal",flex:L?"1":"auto",fontSize:L?"14px":"inherit"},children:"360 Rendering"}),((Q=Ys[n])==null?void 0:Q.hasBoM)&&ce("button",{onClick:()=>y("bom"),style:{padding:L?"8px 12px":"4px 12px",border:"none",background:v==="bom"?"#4a90e2":"#f0f0f0",color:v==="bom"?"white":"#333",cursor:"pointer",fontWeight:v==="bom"?"bold":"normal",flex:L?"1":"auto",fontSize:L?"14px":"inherit"},children:"Bill of Materials"})]}),L&&ce("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:"4px"},children:ce("button",{onClick:Z,style:{padding:"8px 16px",background:"#eee",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px",cursor:"pointer",width:"100%"},children:R?"Hide Parameters ":"Show Parameters "})}),v==="3d"&&Ys[n].hasExplosion&&Je("div",{style:{display:"flex",alignItems:"center",marginLeft:L?"0":"15px",backgroundColor:"#e6f7ff",padding:"5px 10px",borderRadius:"4px",width:L?"100%":"auto",marginTop:L?"4px":"0"},children:[ce("span",{style:{marginRight:"8px",fontWeight:"bold"},children:"Explosion:"}),ce("input",{type:"range",min:"0",max:"1",step:"0.01",value:i,onChange:q,style:{width:L?"calc(100% - 100px)":"150px",height:L?"24px":"auto"}}),Je("span",{style:{marginLeft:"5px",minWidth:"40px"},children:[Math.round(i*100),"%"]})]})]}),ce("div",{style:{display:R?"flex":"none",flexWrap:"wrap",gap:"10px",margin:0,padding:0},children:Ys[n].params.map(se=>{const{name:me,defaultValue:Se}=se;if(me==="explosionFactor")return null;const Ce=t[me];return Je("div",{style:{display:"flex",alignItems:"center",backgroundColor:"#fff",border:"1px solid #ccc",padding:L?"8px":"5px 8px",borderRadius:"4px",width:L?"calc(50% - 5px)":"auto"},children:[Je("span",{style:{marginRight:"8px",fontWeight:"bold",color:"#333",fontSize:L?"13px":"inherit"},children:[me,":"]}),typeof Se=="boolean"?ce("input",{id:`param-${me}`,type:"checkbox",checked:Ce,onChange:ke=>D(me,ke.target.checked),style:{width:L?"20px":"auto",height:L?"20px":"auto"}}):ce("input",{id:`param-${me}`,type:"number",value:Ce,onChange:ke=>D(me,parseFloat(ke.target.value)),style:{width:L?"calc(100% - 50px)":"60px",height:L?"30px":"20px",fontSize:L?"14px":"12px",flex:L?"1":"none"}})]},me)})}),f.length>0&&Je("div",{style:{marginTop:"10px",padding:"8px 12px",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",fontSize:L?"13px":"12px"},children:[ce("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Invalid parameters:"}),ce("ul",{style:{margin:"0",paddingLeft:"20px"},children:f.map((se,me)=>ce("li",{children:se},me))})]})]}),ce("div",{style:{flex:1,position:"relative",overflow:"hidden",display:"flex",margin:0,padding:0},children:f.length>0?ce("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:L?"14px":"12px",color:"#999",padding:"0 20px",textAlign:"center"},children:"Fix parameters to see model"}):Je(Xm,{children:[v==="3d"&&s?ce(uY,{children:ce(cY,{edges:s.edges,faces:s.faces,helperSpaces:s.helperSpaces||[]})}):null,v==="technical"?ce(bre,{selectedModelName:n,viewboxes:l,isMobile:L,onAddViewbox:G,selectedLayout:x,onLayoutChange:K,selectedViewToAdd:S,onViewSelectionChange:ee,includeHiddenLines:E,onHiddenLinesToggle:le,onAddViewToCell:j,selectedTarget:I,onCellSelection:V,onTitleBlockChange:J}):null,v==="rendering"?s?ce(Lre,{mesh:s,isMobile:L,requestHighDetailMesh:H,selectedModel:n,params:t}):ce("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:L?"14px":"12px",color:"#999"},children:"Loading 360 rendering..."}):null,v==="bom"?c?ce(soe,{data:c,modelName:n}):ce("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:L?"14px":"12px",color:"#999"},children:"Loading Bill of Materials..."}):null]})})]})}function hoe(){const[n,e]=de.useState(window.innerWidth<480);return de.useEffect(()=>{const r=()=>e(window.innerWidth<480);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),de.useEffect(()=>{if(document.getElementById("calendly-css"))return;const r=document.createElement("link");r.id="calendly-css",r.href="https://assets.calendly.com/assets/external/widget.css",r.rel="stylesheet",document.head.appendChild(r);const i=document.createElement("script");return i.id="calendly-js",i.src="https://assets.calendly.com/assets/external/widget.js",i.async=!0,i.onload=()=>{window.Calendly&&window.Calendly.initBadgeWidget({url:"https://calendly.com/damjanbab/30min",text:"Schedule a FREE consultation meeting",color:"#0069ff",textColor:"#ffffff"})},document.body.appendChild(i),()=>{var l;const o=document.getElementById("calendly-css"),s=document.getElementById("calendly-js"),a=document.querySelector(".calendly-badge-widget");o&&document.head.removeChild(o),s&&document.body.removeChild(s),a&&((l=a.parentElement)==null||l.removeChild(a))}},[]),Je("div",{style:{maxWidth:"1200px",margin:"0 auto",paddingTop:n?"1rem":"2rem",paddingBottom:n?"1rem":"2rem",color:"#1E293B"},children:[Je("div",{style:{marginBottom:"4rem"},className:"section-content",children:[Je("div",{style:{display:"flex",alignItems:"center",marginBottom:"2rem",gap:"1rem"},children:[ce("div",{style:{width:"4px",height:"2rem",backgroundColor:"#2563EB",borderRadius:"2px"}}),ce("h1",{style:{fontSize:n?"1.75rem":"2.25rem",fontWeight:"800",margin:0},className:"section-title",children:"About CAD-OS"})]}),ce("style",{children:`
    .profile-container, .founder-container {
      display: flex;
      flex-direction: row; /* Default: row for desktop */
      align-items: flex-start;
      gap: 2rem;
      margin-bottom: 2rem;
    }
    .profile-container .image-container, .founder-container .image-container {
      flex-shrink: 0;
    }
    .profile-container .text-container, .founder-container .text-container {
      flex: 1;
      min-width: 0;
      text-align: left; /* Default: left align text */
    }

    @media (max-width: 768px) {
      .profile-container, .founder-container {
        flex-direction: column; /* Stack on mobile */
        align-items: center; /* Center items when stacked */
      }
      .profile-container .image-container, .founder-container .image-container {
         margin-bottom: 1.5rem; /* Add space below image when stacked */
      }
       .profile-container .text-container, .founder-container .text-container {
         text-align: center; /* Center text on mobile */
         max-width: 800px; /* Keep text readable */
         flex: none; /* Reset flex properties */
         min-width: auto;
      }
    }
    
    /* Additional mobile styles for very small screens */
    @media (max-width: 480px) {
      .value-card-grid, .expertise-card-grid, .tech-item-grid {
        grid-template-columns: 1fr !important; /* Force single column on very small screens */
      }
      
      .contact-card {
        width: 100% !important; /* Full width cards */
      }
      
      .section-title {
        font-size: 1.5rem !important; /* Smaller headings */
      }
      
      .section-content {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
    }
  `}),Je("div",{className:"profile-container",children:[ce("div",{className:"image-container",style:{width:n?"120px":"180px",height:n?"120px":"180px",borderRadius:"50%",overflow:"hidden",border:"4px solid #E2E8F0",boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},children:ce("img",{src:"https://raw.githubusercontent.com/damjanbab/cad-os/main/assets/company.jpg",alt:"CAD-OS Logo",style:{width:"100%",height:"100%",objectFit:"cover"},onError:r=>{const i=["./assets/company.jpg","/cad-os/assets/company.jpg","https://raw.githubusercontent.com/haloedDepth/cad-os/main/assets/company.jpg"],o=r.target.src,s=i.find(a=>a!==o);s?r.target.src=s:r.target.src="https://via.placeholder.com/180x180?text=CAD-OS"}})}),Je("div",{className:"text-container",children:[ce("p",{style:{fontSize:n?"1rem":"1.125rem",lineHeight:"1.7",color:"#475569",marginBottom:"1rem"},children:"Founded in January 2025, CAD-OS is a specialized engineering firm dedicated to delivering innovative parametric CAD solutions. Our team combines deep technical expertise in 3D modeling with cutting-edge programming capabilities to revolutionize how engineering models are created, shared, and implemented."}),ce("p",{style:{fontSize:n?"1rem":"1.125rem",lineHeight:"1.7",color:"#475569",marginBottom:"1rem"},children:"We've built our services on a foundation of transparency, quality, and exceptional communication. By leveraging open-source technologies alongside proprietary development techniques, we deliver professional engineering solutions that dramatically reduce development time while maintaining precision and adaptability."}),ce("p",{style:{fontSize:n?"1rem":"1.125rem",lineHeight:"1.7",color:"#475569"},children:"Our platform embodies our commitment to client empowerment, providing real-time collaboration tools, instant feedback mechanisms, and comprehensive self-service capabilities that set a new standard for CAD service delivery."})]})]})]}),Je("div",{style:{marginBottom:"4rem"},className:"section-content",children:[Je("div",{style:{display:"flex",alignItems:"center",marginBottom:"2rem",gap:"1rem"},children:[ce("div",{style:{width:"4px",height:"2rem",backgroundColor:"#2563EB",borderRadius:"2px"}}),ce("h2",{style:{fontSize:n?"1.5rem":"1.75rem",fontWeight:"700",margin:0},className:"section-title",children:"Our Founder"})]}),Je("div",{className:"founder-container",children:[ce("div",{className:"image-container",style:{width:n?"120px":"150px",height:n?"120px":"150px",borderRadius:"50%",overflow:"hidden",border:"4px solid #E2E8F0",boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},children:ce("img",{src:"https://raw.githubusercontent.com/damjanbab/cad-os/main/assets/profile.jpg",alt:"Damjan Babic",style:{width:"100%",height:"100%",objectFit:"cover"},onError:r=>{const i=["./assets/profile.jpg","/cad-os/assets/profile.jpg","https://raw.githubusercontent.com/haloedDepth/cad-os/main/assets/profile.jpg"],o=r.target.src,s=i.find(a=>a!==o);s?r.target.src=s:r.target.src="https://via.placeholder.com/150x150?text=Profile"}})}),Je("div",{className:"text-container",children:[ce("h3",{style:{fontSize:n?"1.125rem":"1.25rem",fontWeight:"700",marginBottom:"0.75rem",color:"#1E293B"},children:"Damjan Babic"}),ce("p",{style:{fontSize:n?"1rem":"1.125rem",lineHeight:"1.7",color:"#475569",marginBottom:"1rem"},children:"Damjan Babic founded CAD-OS with a background in Marine Engineering and over a decade of experience in 3D modeling using commercial software. His expertise in parametric and programmatic CAD solutions ensures clients receive precise, adaptable models for engineering and manufacturing applications."}),ce("p",{style:{fontSize:n?"1rem":"1.125rem",lineHeight:"1.7",color:"#475569"},children:"Through self-study, Damjan has developed strong programming skills in JavaScript, Python, Clojure, and various frontend technologies, allowing him to create custom solutions that merge engineering precision with modern web technologies. This unique combination enables CAD-OS to offer innovative, cost-effective services that traditional CAD approaches can't match."})]})]})]}),Je("div",{style:{marginBottom:"4rem"},className:"section-content",children:[ce("h2",{style:{fontSize:n?"1.5rem":"1.75rem",fontWeight:"700",marginBottom:"2rem"},className:"section-title",children:"Our Core Values"}),Je("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem"},className:"value-card-grid",children:[ce(b0,{icon:Je("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ce("path",{d:"M18 8h1a4 4 0 1 1 0 8h-1"}),ce("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),ce("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),ce("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),ce("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),title:"Transparency",description:"We believe in complete openness throughout the development process, giving clients full visibility into their projects at every stage.",isMobile:n}),ce(b0,{icon:Je("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ce("circle",{cx:"12",cy:"8",r:"7"}),ce("polyline",{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"})]}),title:"Quality",description:"Engineering precision and technical excellence guide all our work, ensuring every model meets rigorous standards and real-world functionality requirements.",isMobile:n}),ce(b0,{icon:ce("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:ce("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),title:"Communication",description:"Clear, responsive communication forms the backbone of our client relationships, ensuring alignment and satisfaction at every project milestone.",isMobile:n}),ce(b0,{icon:Je("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ce("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),ce("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),title:"Continuous Innovation",description:"We constantly explore new techniques and technologies to enhance our service offerings and deliver progressively better solutions to our clients.",isMobile:n}),ce(b0,{icon:Je("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ce("circle",{cx:"12",cy:"12",r:"10"}),ce("polyline",{points:"12 6 12 12 16 14"})]}),title:"Rapid Prototyping",description:"We specialize in quickly turning concepts into functional prototypes, significantly accelerating the product development cycle for our clients.",isMobile:n})]})]}),Je("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem",marginBottom:"4rem"},className:"expertise-card-grid section-content",children:[ce(Zb,{icon:ce("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:ce("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),title:"Engineering Expertise",description:"Our team brings extensive engineering knowledge to every project, ensuring models meet rigorous technical standards and real-world functionality requirements across various industries.",isMobile:n}),ce(Zb,{icon:Je("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ce("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),ce("polyline",{points:"2 17 12 22 22 17"}),ce("polyline",{points:"2 12 12 17 22 12"})]}),title:"Advanced 3D Modeling",description:"With over a decade of experience in commercial 3D modeling software, our specialists excel in creating complex parametric models that allow for rapid iterations and modifications.",isMobile:n}),ce(Zb,{icon:Je("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ce("path",{d:"M18 10h-4V4h-4v6H6l6 6 6-6z"}),ce("path",{d:"M8 18h8"})]}),title:"Software Development",description:"Our programming capabilities in JavaScript, Python, Clojure, and frontend technologies enable us to create custom parametric solutions bridging traditional CAD and modern web applications.",isMobile:n})]}),Je("div",{style:{backgroundColor:"#F8FAFC",padding:n?"1.5rem":"3rem",borderRadius:"0.5rem",marginBottom:"4rem"},className:"section-content",children:[ce("h2",{style:{fontSize:n?"1.5rem":"1.75rem",fontWeight:"700",marginBottom:"2rem",textAlign:"center"},className:"section-title",children:"Our Technology Stack"}),Je("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem"},className:"tech-item-grid",children:[ce(om,{name:"Replicad",description:"JavaScript CAD framework based on OpenCascade geometry kernel, enabling powerful programmatic 3D modeling",link:"https://replicad.xyz/",isMobile:n}),ce(om,{name:"Three.js",description:"3D graphics library for rendering complex geometry in the browser with high performance",link:"https://threejs.org/",isMobile:n}),ce(om,{name:"React Three Fiber",description:"React renderer for Three.js, making 3D graphics declarative and easier to work with",link:"https://docs.pmnd.rs/react-three-fiber",isMobile:n}),ce(om,{name:"Web-Based Production",description:"Client-side rendering and processing for secure, real-time collaboration and feedback",link:"#",isMobile:n}),ce(om,{name:"Parametric Design",description:"Custom parametric approach allowing for instant model updates based on changing parameters",link:"#",isMobile:n}),ce(om,{name:"Open Source Core",description:"Built on open-source technologies to provide cost-effective solutions without compromising quality",link:"#",isMobile:n})]})]}),Je("div",{style:{marginBottom:"4rem"},className:"section-content",children:[ce("h2",{style:{fontSize:n?"1.5rem":"1.75rem",fontWeight:"700",marginBottom:"2rem"},className:"section-title",children:"Our Service Process"}),ce("div",{style:{display:"flex",flexDirection:"column",gap:"2rem"},children:ce("div",{style:{width:"100%",maxWidth:"100%"},children:Je("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[ce("div",{style:{fontSize:n?"1.5rem":"2rem",fontWeight:"800",color:"#2563EB",lineHeight:"1",flexShrink:0},children:"01"}),Je("div",{style:{flex:1,minWidth:0},children:[ce("h3",{style:{fontSize:n?"1.125rem":"1.25rem",fontWeight:"700",marginBottom:"0.5rem"},children:"Client Consultation"}),ce("p",{style:{color:"#475569",fontSize:n?"0.9rem":"1rem",lineHeight:"1.6"},children:"We begin with a detailed discussion about your project needs, including technical requirements, use cases, and design parameters. This consultation ensures we fully understand your vision."})]})]})})})]}),Je("div",{id:"contact",style:{padding:n?"1.5rem":"3rem",backgroundColor:"#1E293B",color:"white",borderRadius:"0.5rem",marginBottom:"4rem"},className:"section-content",children:[ce("h2",{style:{fontSize:n?"1.5rem":"1.75rem",fontWeight:"700",marginBottom:"1.5rem",textAlign:"center"},className:"section-title",children:"Let's Work Together"}),ce("p",{style:{textAlign:"center",maxWidth:"700px",margin:"0 auto",marginBottom:"2.5rem",color:"#CBD5E1",fontSize:n?"0.9rem":"1rem"},children:"Have a project in mind or need a custom 3D modeling solution? We'd love to hear about your requirements and discuss how our services can bring your ideas to reality."}),ce("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",maxWidth:"700px",margin:"0 auto"},children:ce("a",{href:"mailto:damjanbab@icloud.com",style:{textDecoration:"none"},className:"contact-card",children:Je("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"1.5rem",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"0.5rem",transition:"background-color 0.2s",cursor:"pointer"},onMouseOver:r=>{r.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseOut:r=>{r.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},children:[ce("div",{style:{marginBottom:"1rem",color:"#60A5FA"},children:Je("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ce("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),ce("polyline",{points:"22,6 12,13 2,6"})]})}),ce("h3",{style:{fontSize:n?"1rem":"1.125rem",fontWeight:"600",marginBottom:"0.5rem",color:"white"},children:"Email"}),ce("p",{style:{color:"#E2E8F0",fontSize:n?"0.8rem":"0.875rem",textAlign:"center"},children:"damjanbab@icloud.com"})]})})})]}),Je("footer",{style:{textAlign:"center",padding:"2rem 0",color:"#64748B",borderTop:"1px solid #E2E8F0"},children:[Je("p",{style:{marginBottom:"0.5rem"},children:[" ",new Date().getFullYear()," CAD-OS. All rights reserved."]}),ce("p",{style:{fontSize:"0.875rem"},children:"Built with React, Three.js, and Replicad."})]})]})}function b0({icon:n,title:e,description:t,isMobile:r}){return Je("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:r?"1.25rem":"1.5rem",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",border:"1px solid #E2E8F0",height:"100%",display:"flex",flexDirection:"column"},children:[ce("div",{style:{color:"#2563EB",marginBottom:"1rem",display:"inline-flex",padding:"0.75rem",backgroundColor:"#EFF6FF",borderRadius:"0.5rem"},children:n}),ce("h3",{style:{fontSize:r?"1.125rem":"1.25rem",fontWeight:"700",marginBottom:"0.75rem"},children:e}),ce("p",{style:{color:"#475569",lineHeight:"1.5",flex:"1",fontSize:r?"0.9rem":"1rem"},children:t})]})}function Zb({icon:n,title:e,description:t,isMobile:r}){return Je("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:r?"1.25rem":"1.5rem",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",border:"1px solid #E2E8F0"},children:[ce("div",{style:{color:"#2563EB",marginBottom:"1rem",display:"inline-flex",padding:"0.75rem",backgroundColor:"#EFF6FF",borderRadius:"0.5rem"},children:n}),ce("h3",{style:{fontSize:r?"1.125rem":"1.25rem",fontWeight:"700",marginBottom:"0.75rem"},children:e}),ce("p",{style:{color:"#475569",lineHeight:"1.5",fontSize:r?"0.9rem":"1rem"},children:t})]})}function om({name:n,description:e,link:t,isMobile:r}){return Je("div",{style:{display:"flex",flexDirection:"column",padding:r?"1.25rem":"1.5rem",backgroundColor:"white",borderRadius:"0.375rem",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)",border:"1px solid #E2E8F0",height:"100%"},children:[ce("h3",{style:{fontSize:r?"1rem":"1.125rem",fontWeight:"700",marginBottom:"0.625rem",color:"#1E293B"},children:n}),ce("p",{style:{color:"#64748B",fontSize:r?"0.8rem":"0.875rem",marginBottom:"1rem",flex:"1"},children:e}),t!=="#"&&Je("a",{href:t,target:"_blank",rel:"noopener noreferrer",style:{color:"#2563EB",textDecoration:"none",fontWeight:"600",fontSize:r?"0.8rem":"0.875rem",display:"inline-flex",alignItems:"center",marginTop:"auto"},children:["Learn more",Je("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginLeft:"0.25rem"},children:[ce("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),ce("polyline",{points:"12 5 19 12 12 19"})]})]})]})}function foe(){return new Worker("/cad-os/assets/videoFrame.worker-08f20496.js",{type:"module"})}const b4=n=>new Promise(e=>setTimeout(e,n));function doe(){const[n,e]=de.useState(Object.keys(Ys)[0]||""),[t,r]=de.useState(!1),[i,o]=de.useState(0),[s,a]=de.useState(""),[l,u]=de.useState(null),c=de.useRef(null);de.useEffect(()=>{const f=new foe;return c.current=Fw(f),console.log("[VideoTool] Video Frame Worker API wrapped with Comlink."),()=>{var d,v;console.log("[VideoTool] Terminating Video Frame worker."),(v=(d=c.current)==null?void 0:d.cleanupOffscreenRenderer)==null||v.call(d),f.terminate(),c.current=null}},[]);const h=de.useCallback(async()=>{var N,z;if(!c.current){alert("Video generation worker is not available.");return}if(!n){alert("Please select a model.");return}r(!0),o(0),a("Starting video generation..."),u(null);const f=Ys[n];if(!f){alert(`Model definition for "${n}" not found.`),r(!1);return}const d=30,y=d*5,x=1280,g=720,S=1,_=eE(f),E=[],C=new ye(0,-300,150),I=new ye(0,0,0),F=C.distanceTo(I),R=C.y,k=Math.PI*2/y,L={fov:45,near:.1,far:2e3};try{a(`Generating ${y} frames for ${n}...`);for(let j=0;j<y;j++){const ie=j/(y-1);console.log(`[VideoTool] Starting frame ${j+1}/${y}`);const D=j*k,q=I.x+F*Math.cos(D),Z=I.z+F*Math.sin(D),Q=new ye(q,R,Z),se=new _i;se.position.copy(Q),se.lookAt(I);const me=se.quaternion,Se={position:{x:Q.x,y:Q.y,z:Q.z},quaternion:{_x:me.x,_y:me.y,_z:me.z,_w:me.w}};let Ce={..._};if(f.hasExplosion){const Ie=Math.sin(ie*Math.PI)*.2;Ce.explosionFactor=Ie}const $e={type:n,params:Ce};let ke=null;try{console.log(`[VideoTool] Calling worker.generateVideoFrame for frame ${j+1}`),ke=await c.current.generateVideoFrame($e.type,$e.params,Se,"standard",x,g,S,L),console.log(`[VideoTool] Received frameBitmap for frame ${j+1}`)}catch(Ie){throw console.error(`[VideoTool] Error generating frame ${j+1} in worker:`,Ie),alert(`Error generating frame ${j+1}. See console for details.`),Ie}E.push(ke);const fe=Math.round((j+1)/y*50);o(fe),a(`Generated frame ${j+1}/${y}`),j%10===0&&await b4(1)}console.log("[VideoTool] Off-screen frame generation complete."),a("Assembling video..."),o(51);const H=document.createElement("canvas");H.width=x,H.height=g;const G=H.getContext("2d");if(!G)throw new Error("Could not get 2D context for assembly canvas");let K="video/webm;codecs=vp9";if(!MediaRecorder.isTypeSupported(K)&&(console.warn(`${K} not supported, trying video/webm...`),K="video/webm",!MediaRecorder.isTypeSupported(K)))throw new Error("No supported video/webm MIME type found for MediaRecorder.");const ee=H.captureStream(d),le=new MediaRecorder(ee,{mimeType:K}),V=[];le.ondataavailable=j=>{j.data.size>0&&V.push(j.data)};const J=new Promise((j,ie)=>{le.onstop=()=>{console.log("[VideoTool] Recording stopped.");try{const D=new Blob(V,{type:K}),q=URL.createObjectURL(D);u(q),j()}catch(D){ie(D)}},le.onerror=D=>{console.error("[VideoTool] MediaRecorder error:",D.error),ie(D.error||new Error("MediaRecorder encountered an error."))}});le.start(),console.log("[VideoTool] MediaRecorder started."),console.log("[VideoTool] Starting to draw frames onto assembly canvas...");for(let j=0;j<E.length;j++){const ie=E[j];ie?(G.drawImage(ie,0,0,H.width,H.height),ie.close()):console.warn(`[VideoTool] Frame ${j+1} was null or undefined. Skipping draw.`);const D=51+Math.round((j+1)/E.length*49);o(D),a(`Assembling frame ${j+1}/${y}`),await b4(1e3/d)}console.log("[VideoTool] Finished drawing frames to assembly canvas."),le.stop(),await J,console.log("[VideoTool] Video assembly complete."),a("Video generation complete.")}catch(H){console.error("[VideoTool] Error during video export:",H),alert(`Failed to export video: ${H.message}`),u(null),a(`Error: ${H.message}`)}finally{console.log("[VideoTool] Cleaning up worker renderer..."),await((z=(N=c.current)==null?void 0:N.cleanupOffscreenRenderer)==null?void 0:z.call(N)),console.log("[VideoTool] Worker renderer cleanup attempted."),r(!1)}},[n]);return Je("div",{children:[ce("h2",{children:"360 Animated Video Generator"}),Je("div",{style:{marginBottom:"15px"},children:[ce("label",{htmlFor:"model-select",style:{marginRight:"10px"},children:"Select Model:"}),ce("select",{id:"model-select",value:n,onChange:f=>e(f.target.value),disabled:t,children:Object.keys(Ys).map(f=>ce("option",{value:f,children:f},f))})]}),ce("button",{onClick:h,disabled:t,children:t?`Generating... (${i}%)`:"Generate 360 Video"}),t&&Je("div",{style:{marginTop:"15px"},children:[ce("progress",{value:i,max:"100",style:{width:"100%"}}),ce("p",{children:s})]}),l&&!t&&Je("div",{style:{marginTop:"15px",background:"#e0ffe0",padding:"10px",borderRadius:"5px"},children:[ce("p",{children:"Video ready!"}),ce("a",{href:l,download:`${n}-360-video.webm`,onClick:()=>u(null),children:"Download Video (WEBM)"}),ce("button",{onClick:()=>u(null),style:{marginLeft:"10px"},children:"Close"})]})]})}const poe=n=>({padding:"8px 16px",border:"none",borderBottom:n?"3px solid #2563EB":"3px solid transparent",background:"none",color:n?"#2563EB":"#333",cursor:"pointer",fontWeight:n?"600":"400",fontSize:"1rem",marginRight:"10px",transition:"border-color 0.2s, color 0.2s"});function moe(){const[n,e]=de.useState("video");return Je("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[ce("div",{style:{padding:"10px 20px",borderBottom:"1px solid #e0e0e0",backgroundColor:"#f9f9f9",flexShrink:0},children:ce("button",{onClick:()=>e("video"),style:poe(n==="video"),children:"Video Generation"})}),ce("div",{style:{flex:1,overflow:"auto",padding:"20px"},children:n==="video"&&ce(doe,{})})]})}function goe({articles:n}){return ce("div",{style:{display:"flex",flexDirection:"column",gap:"2rem"},children:n.map(e=>ce(h1,{to:`/blog/${e.id}`,style:{textDecoration:"none",color:"inherit"},children:Je("div",{style:{padding:"1.5rem",border:"1px solid #E2E8F0",borderRadius:"0.5rem",backgroundColor:"white",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:t=>{t.currentTarget.style.transform="translateY(-4px)",t.currentTarget.style.boxShadow="0 10px 15px rgba(0, 0, 0, 0.05)"},onMouseOut:t=>{t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.1)"},children:[ce("h2",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"0.5rem",color:"#1E293B"},children:e.title}),ce("p",{style:{fontSize:"0.875rem",color:"#64748B",marginBottom:"1rem"},children:e.date}),ce("p",{style:{fontSize:"1rem",lineHeight:"1.6",color:"#475569",marginBottom:"1.25rem"},children:e.excerpt}),Je("div",{style:{display:"inline-flex",alignItems:"center",color:"#2563EB",fontWeight:"600",fontSize:"0.875rem"},children:["Read more",Je("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginLeft:"0.25rem"},children:[ce("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),ce("polyline",{points:"12 5 19 12 12 19"})]})]})]})},e.id))})}function nT(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let rp=nT();function hB(n){rp=n}const lv={exec:()=>null};function kr(n,e=""){let t=typeof n=="string"?n:n.source;const r={replace:(i,o)=>{let s=typeof o=="string"?o:o.source;return s=s.replace(ks.caret,"$1"),t=t.replace(i,s),r},getRegex:()=>new RegExp(t,e)};return r}const ks={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},voe=/^(?:[ \t]*(?:\n|$))+/,yoe=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,xoe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,z1=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,woe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,rT=/(?:[*+-]|\d{1,9}[.)])/,fB=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,dB=kr(fB).replace(/bull/g,rT).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),Soe=kr(fB).replace(/bull/g,rT).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),iT=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,_oe=/^[^\n]+/,oT=/(?!\s*\])(?:\\.|[^\[\]\\])+/,boe=kr(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",oT).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Moe=kr(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,rT).getRegex(),TS="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",sT=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Eoe=kr("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",sT).replace("tag",TS).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),pB=kr(iT).replace("hr",z1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",TS).getRegex(),Aoe=kr(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",pB).getRegex(),aT={blockquote:Aoe,code:yoe,def:boe,fences:xoe,heading:woe,hr:z1,html:Eoe,lheading:dB,list:Moe,newline:voe,paragraph:pB,table:lv,text:_oe},M4=kr("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",z1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",TS).getRegex(),Toe={...aT,lheading:Soe,table:M4,paragraph:kr(iT).replace("hr",z1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",M4).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",TS).getRegex()},Coe={...aT,html:kr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",sT).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:lv,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:kr(iT).replace("hr",z1).replace("heading",` *#{1,6} *[^
]`).replace("lheading",dB).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Poe=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Roe=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,mB=/^( {2,}|\\)\n(?!\s*$)/,Loe=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,CS=/[\p{P}\p{S}]/u,lT=/[\s\p{P}\p{S}]/u,gB=/[^\s\p{P}\p{S}]/u,koe=kr(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,lT).getRegex(),vB=/(?!~)[\p{P}\p{S}]/u,Ioe=/(?!~)[\s\p{P}\p{S}]/u,Noe=/(?:[^\s\p{P}\p{S}]|~)/u,Foe=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,yB=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Doe=kr(yB,"u").replace(/punct/g,CS).getRegex(),Ooe=kr(yB,"u").replace(/punct/g,vB).getRegex(),xB="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Boe=kr(xB,"gu").replace(/notPunctSpace/g,gB).replace(/punctSpace/g,lT).replace(/punct/g,CS).getRegex(),Uoe=kr(xB,"gu").replace(/notPunctSpace/g,Noe).replace(/punctSpace/g,Ioe).replace(/punct/g,vB).getRegex(),zoe=kr("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,gB).replace(/punctSpace/g,lT).replace(/punct/g,CS).getRegex(),Hoe=kr(/\\(punct)/,"gu").replace(/punct/g,CS).getRegex(),Goe=kr(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Voe=kr(sT).replace("(?:-->|$)","-->").getRegex(),Woe=kr("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Voe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),dw=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,joe=kr(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",dw).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),wB=kr(/^!?\[(label)\]\[(ref)\]/).replace("label",dw).replace("ref",oT).getRegex(),SB=kr(/^!?\[(ref)\](?:\[\])?/).replace("ref",oT).getRegex(),qoe=kr("reflink|nolink(?!\\()","g").replace("reflink",wB).replace("nolink",SB).getRegex(),uT={_backpedal:lv,anyPunctuation:Hoe,autolink:Goe,blockSkip:Foe,br:mB,code:Roe,del:lv,emStrongLDelim:Doe,emStrongRDelimAst:Boe,emStrongRDelimUnd:zoe,escape:Poe,link:joe,nolink:SB,punctuation:koe,reflink:wB,reflinkSearch:qoe,tag:Woe,text:Loe,url:lv},$oe={...uT,link:kr(/^!?\[(label)\]\((.*?)\)/).replace("label",dw).getRegex(),reflink:kr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",dw).getRegex()},ME={...uT,emStrongRDelimAst:Uoe,emStrongLDelim:Ooe,url:kr(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Xoe={...ME,br:kr(mB).replace("{2,}","*").getRegex(),text:kr(ME.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},k2={normal:aT,gfm:Toe,pedantic:Coe},M0={normal:uT,gfm:ME,breaks:Xoe,pedantic:$oe},Yoe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},E4=n=>Yoe[n];function yu(n,e){if(e){if(ks.escapeTest.test(n))return n.replace(ks.escapeReplace,E4)}else if(ks.escapeTestNoEncode.test(n))return n.replace(ks.escapeReplaceNoEncode,E4);return n}function A4(n){try{n=encodeURI(n).replace(ks.percentDecode,"%")}catch{return null}return n}function T4(n,e){var o;const t=n.replace(ks.findPipe,(s,a,l)=>{let u=!1,c=a;for(;--c>=0&&l[c]==="\\";)u=!u;return u?"|":" |"}),r=t.split(ks.splitPipe);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!((o=r.at(-1))!=null&&o.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(ks.slashPipe,"|");return r}function E0(n,e,t){const r=n.length;if(r===0)return"";let i=0;for(;i<r&&n.charAt(r-i-1)===e;)i++;return n.slice(0,r-i)}function Zoe(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return-1}function C4(n,e,t,r,i){const o=e.href,s=e.title||null,a=n[1].replace(i.other.outputLinkReplace,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;const l={type:"link",raw:t,href:o,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}return{type:"image",raw:t,href:o,title:s,text:a}}function Koe(n,e,t){const r=n.match(t.other.indentCodeCompensation);if(r===null)return e;const i=r[1];return e.split(`
`).map(o=>{const s=o.match(t.other.beginningSpace);if(s===null)return o;const[a]=s;return a.length>=i.length?o.slice(i.length):o}).join(`
`)}class pw{constructor(e){Vr(this,"options");Vr(this,"rules");Vr(this,"lexer");this.options=e||rp}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:E0(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=Koe(r,t[3]||"",this.rules);return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(this.rules.other.endingHash.test(r)){const i=E0(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:E0(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let r=E0(t[0],`
`).split(`
`),i="",o="";const s=[];for(;r.length>0;){let a=!1;const l=[];let u;for(u=0;u<r.length;u++)if(this.rules.other.blockquoteStart.test(r[u]))l.push(r[u]),a=!0;else if(!a)l.push(r[u]);else break;r=r.slice(u);const c=l.join(`
`),h=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${c}`:c,o=o?`${o}
${h}`:h;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,s,!0),this.lexer.state.top=f,r.length===0)break;const d=s.at(-1);if((d==null?void 0:d.type)==="code")break;if((d==null?void 0:d.type)==="blockquote"){const v=d,y=v.raw+`
`+r.join(`
`),x=this.blockquote(y);s[s.length-1]=x,i=i.substring(0,i.length-v.raw.length)+x.raw,o=o.substring(0,o.length-v.text.length)+x.text;break}else if((d==null?void 0:d.type)==="list"){const v=d,y=v.raw+`
`+r.join(`
`),x=this.list(y);s[s.length-1]=x,i=i.substring(0,i.length-d.raw.length)+x.raw,o=o.substring(0,o.length-v.raw.length)+x.raw,r=y.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:s,text:o}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim();const i=r.length>1,o={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const s=this.rules.other.listItemRegex(r);let a=!1;for(;e;){let u=!1,c="",h="";if(!(t=s.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let f=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,S=>" ".repeat(3*S.length)),d=e.split(`
`,1)[0],v=!f.trim(),y=0;if(this.options.pedantic?(y=2,h=f.trimStart()):v?y=t[1].length+1:(y=t[2].search(this.rules.other.nonSpaceChar),y=y>4?1:y,h=f.slice(y),y+=t[1].length),v&&this.rules.other.blankLine.test(d)&&(c+=d+`
`,e=e.substring(d.length+1),u=!0),!u){const S=this.rules.other.nextBulletRegex(y),_=this.rules.other.hrRegex(y),E=this.rules.other.fencesBeginRegex(y),C=this.rules.other.headingBeginRegex(y),I=this.rules.other.htmlBeginRegex(y);for(;e;){const F=e.split(`
`,1)[0];let R;if(d=F,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,"  "),R=d):R=d.replace(this.rules.other.tabCharGlobal,"    "),E.test(d)||C.test(d)||I.test(d)||S.test(d)||_.test(d))break;if(R.search(this.rules.other.nonSpaceChar)>=y||!d.trim())h+=`
`+R.slice(y);else{if(v||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||E.test(f)||C.test(f)||_.test(f))break;h+=`
`+d}!v&&!d.trim()&&(v=!0),c+=F+`
`,e=e.substring(F.length+1),f=R.slice(y)}}o.loose||(a?o.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(a=!0));let x=null,g;this.options.gfm&&(x=this.rules.other.listIsTask.exec(h),x&&(g=x[0]!=="[ ] ",h=h.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:c,task:!!x,checked:g,loose:!1,text:h,tokens:[]}),o.raw+=c}const l=o.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let u=0;u<o.items.length;u++)if(this.lexer.state.top=!1,o.items[u].tokens=this.lexer.blockTokens(o.items[u].text,[]),!o.loose){const c=o.items[u].tokens.filter(f=>f.type==="space"),h=c.length>0&&c.some(f=>this.rules.other.anyLine.test(f.raw));o.loose=h}if(o.loose)for(let u=0;u<o.items.length;u++)o.items[u].loose=!0;return o}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:o}}}table(e){var a;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const r=T4(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=(a=t[3])!=null&&a.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const l of i)this.rules.other.tableAlignRight.test(l)?s.align.push("right"):this.rules.other.tableAlignCenter.test(l)?s.align.push("center"):this.rules.other.tableAlignLeft.test(l)?s.align.push("left"):s.align.push(null);for(let l=0;l<r.length;l++)s.header.push({text:r[l],tokens:this.lexer.inline(r[l]),header:!0,align:s.align[l]});for(const l of o)s.rows.push(T4(l,s.header.length).map((u,c)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:s.align[c]})));return s}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;const s=E0(r.slice(0,-1),"\\");if((r.length-s.length)%2===0)return}else{const s=Zoe(t[2],"()");if(s>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let i=t[2],o="";if(this.options.pedantic){const s=this.rules.other.pedanticHrefTitle.exec(i);s&&(i=s[1],o=s[3])}else o=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),C4(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=t[i.toLowerCase()];if(!o){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return C4(r,o,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const s=[...i[0]].length-1;let a,l,u=s,c=0;const h=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+s);(i=h.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=[...a].length,i[3]||i[4]){u+=l;continue}else if((i[5]||i[6])&&s%3&&!((s+l)%3)){c+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+c);const f=[...i[0]][0].length,d=e.slice(0,s+i.index+f+l);if(Math.min(s,l)%2){const y=d.slice(1,-1);return{type:"em",raw:d,text:y,tokens:this.lexer.inlineTokens(y)}}const v=d.slice(2,-2);return{type:"strong",raw:d,text:v,tokens:this.lexer.inlineTokens(v)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(r),o=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&o&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=t[1],i="mailto:"+r):(r=t[1],i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r;let t;if(t=this.rules.inline.url.exec(e)){let i,o;if(t[2]==="@")i=t[0],o="mailto:"+i;else{let s;do s=t[0],t[0]=((r=this.rules.inline._backpedal.exec(t[0]))==null?void 0:r[0])??"";while(s!==t[0]);i=t[0],t[1]==="www."?o="http://"+t[0]:o=t[0]}return{type:"link",raw:t[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const r=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:r}}}}class il{constructor(e){Vr(this,"tokens");Vr(this,"options");Vr(this,"state");Vr(this,"tokenizer");Vr(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||rp,this.options.tokenizer=this.options.tokenizer||new pw,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:ks,block:k2.normal,inline:M0.normal};this.options.pedantic?(t.block=k2.pedantic,t.inline=M0.pedantic):this.options.gfm&&(t.block=k2.gfm,this.options.breaks?t.inline=M0.breaks:t.inline=M0.gfm),this.tokenizer.rules=t}static get rules(){return{block:k2,inline:M0}}static lex(e,t){return new il(t).lex(e)}static lexInline(e,t){return new il(t).inlineTokens(e)}lex(e){e=e.replace(ks.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){var i,o,s;for(this.options.pedantic&&(e=e.replace(ks.tabCharGlobal,"    ").replace(ks.spaceLine,""));e;){let a;if((o=(i=this.options.extensions)==null?void 0:i.block)!=null&&o.some(u=>(a=u.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const u=t.at(-1);a.raw.length===1&&u!==void 0?u.raw+=`
`:t.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const u=t.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.at(-1).src=u.text):t.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const u=t.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.raw,this.inlineQueue.at(-1).src=u.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),t.push(a);continue}let l=e;if((s=this.options.extensions)!=null&&s.startBlock){let u=1/0;const c=e.slice(1);let h;this.options.extensions.startBlock.forEach(f=>{h=f.call({lexer:this},c),typeof h=="number"&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(l=e.substring(0,u+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){const u=t.at(-1);r&&(u==null?void 0:u.type)==="paragraph"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):t.push(a),r=l.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const u=t.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):t.push(a);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var a,l,u;let r=e,i=null;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)c.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let o=!1,s="";for(;e;){o||(s=""),o=!1;let c;if((l=(a=this.options.extensions)==null?void 0:a.inline)!=null&&l.some(f=>(c=f.call({lexer:this},e,t))?(e=e.substring(c.raw.length),t.push(c),!0):!1))continue;if(c=this.tokenizer.escape(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.tag(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.link(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(c.raw.length);const f=t.at(-1);c.type==="text"&&(f==null?void 0:f.type)==="text"?(f.raw+=c.raw,f.text+=c.text):t.push(c);continue}if(c=this.tokenizer.emStrong(e,r,s)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.codespan(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.br(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.del(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.autolink(e)){e=e.substring(c.raw.length),t.push(c);continue}if(!this.state.inLink&&(c=this.tokenizer.url(e))){e=e.substring(c.raw.length),t.push(c);continue}let h=e;if((u=this.options.extensions)!=null&&u.startInline){let f=1/0;const d=e.slice(1);let v;this.options.extensions.startInline.forEach(y=>{v=y.call({lexer:this},d),typeof v=="number"&&v>=0&&(f=Math.min(f,v))}),f<1/0&&f>=0&&(h=e.substring(0,f+1))}if(c=this.tokenizer.inlineText(h)){e=e.substring(c.raw.length),c.raw.slice(-1)!=="_"&&(s=c.raw.slice(-1)),o=!0;const f=t.at(-1);(f==null?void 0:f.type)==="text"?(f.raw+=c.raw,f.text+=c.text):t.push(c);continue}if(e){const f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return t}}class mw{constructor(e){Vr(this,"options");Vr(this,"parser");this.options=e||rp}space(e){return""}code({text:e,lang:t,escaped:r}){var s;const i=(s=(t||"").match(ks.notSpaceStart))==null?void 0:s[0],o=e.replace(ks.endingNewline,"")+`
`;return i?'<pre><code class="language-'+yu(i)+'">'+(r?o:yu(o,!0))+`</code></pre>
`:"<pre><code>"+(r?o:yu(o,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,r=e.start;let i="";for(let a=0;a<e.items.length;a++){const l=e.items[a];i+=this.listitem(l)}const o=t?"ol":"ul",s=t&&r!==1?' start="'+r+'"':"";return"<"+o+s+`>
`+i+"</"+o+`>
`}listitem(e){var r;let t="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?((r=e.tokens[0])==null?void 0:r.type)==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+yu(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let o=0;o<e.header.length;o++)r+=this.tablecell(e.header[o]);t+=this.tablerow({text:r});let i="";for(let o=0;o<e.rows.length;o++){const s=e.rows[o];r="";for(let a=0;a<s.length;a++)r+=this.tablecell(s[a]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${yu(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){const i=this.parser.parseInline(r),o=A4(e);if(o===null)return i;e=o;let s='<a href="'+e+'"';return t&&(s+=' title="'+yu(t)+'"'),s+=">"+i+"</a>",s}image({href:e,title:t,text:r}){const i=A4(e);if(i===null)return yu(r);e=i;let o=`<img src="${e}" alt="${r}"`;return t&&(o+=` title="${yu(t)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:yu(e.text)}}class cT{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class ol{constructor(e){Vr(this,"options");Vr(this,"renderer");Vr(this,"textRenderer");this.options=e||rp,this.options.renderer=this.options.renderer||new mw,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new cT}static parse(e,t){return new ol(t).parse(e)}static parseInline(e,t){return new ol(t).parseInline(e)}parse(e,t=!0){var i,o;let r="";for(let s=0;s<e.length;s++){const a=e[s];if((o=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&o[a.type]){const u=a,c=this.options.extensions.renderers[u.type].call({parser:this},u);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type)){r+=c||"";continue}}const l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let u=l,c=this.renderer.text(u);for(;s+1<e.length&&e[s+1].type==="text";)u=e[++s],c+=`
`+this.renderer.text(u);t?r+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):r+=c;continue}default:{const u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}parseInline(e,t=this.renderer){var i,o;let r="";for(let s=0;s<e.length;s++){const a=e[s];if((o=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&o[a.type]){const u=this.options.extensions.renderers[a.type].call({parser:this},a);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=u||"";continue}}const l=a;switch(l.type){case"escape":{r+=t.text(l);break}case"html":{r+=t.html(l);break}case"link":{r+=t.link(l);break}case"image":{r+=t.image(l);break}case"strong":{r+=t.strong(l);break}case"em":{r+=t.em(l);break}case"codespan":{r+=t.codespan(l);break}case"br":{r+=t.br(l);break}case"del":{r+=t.del(l);break}case"text":{r+=t.text(l);break}default:{const u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}}class uv{constructor(e){Vr(this,"options");Vr(this,"block");this.options=e||rp}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?il.lex:il.lexInline}provideParser(){return this.block?ol.parse:ol.parseInline}}Vr(uv,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class Joe{constructor(...e){Vr(this,"defaults",nT());Vr(this,"options",this.setOptions);Vr(this,"parse",this.parseMarkdown(!0));Vr(this,"parseInline",this.parseMarkdown(!1));Vr(this,"Parser",ol);Vr(this,"Renderer",mw);Vr(this,"TextRenderer",cT);Vr(this,"Lexer",il);Vr(this,"Tokenizer",pw);Vr(this,"Hooks",uv);this.use(...e)}walkTokens(e,t){var i,o;let r=[];for(const s of e)switch(r=r.concat(t.call(this,s)),s.type){case"table":{const a=s;for(const l of a.header)r=r.concat(this.walkTokens(l.tokens,t));for(const l of a.rows)for(const u of l)r=r.concat(this.walkTokens(u.tokens,t));break}case"list":{const a=s;r=r.concat(this.walkTokens(a.items,t));break}default:{const a=s;(o=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&o[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{const u=a[l].flat(1/0);r=r.concat(this.walkTokens(u,t))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,t)))}}return r}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){const s=t.renderers[o.name];s?t.renderers[o.name]=function(...a){let l=o.renderer.apply(this,a);return l===!1&&(l=s.apply(this,a)),l}:t.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=t[o.level];s?s.unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&(o.level==="block"?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:o.level==="inline"&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(t.childTokens[o.name]=o.childTokens)}),i.extensions=t),r.renderer){const o=this.defaults.renderer||new mw(this.defaults);for(const s in r.renderer){if(!(s in o))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;const a=s,l=r.renderer[a],u=o[a];o[a]=(...c)=>{let h=l.apply(o,c);return h===!1&&(h=u.apply(o,c)),h||""}}i.renderer=o}if(r.tokenizer){const o=this.defaults.tokenizer||new pw(this.defaults);for(const s in r.tokenizer){if(!(s in o))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const a=s,l=r.tokenizer[a],u=o[a];o[a]=(...c)=>{let h=l.apply(o,c);return h===!1&&(h=u.apply(o,c)),h}}i.tokenizer=o}if(r.hooks){const o=this.defaults.hooks||new uv;for(const s in r.hooks){if(!(s in o))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;const a=s,l=r.hooks[a],u=o[a];uv.passThroughHooks.has(s)?o[a]=c=>{if(this.defaults.async)return Promise.resolve(l.call(o,c)).then(f=>u.call(o,f));const h=l.call(o,c);return u.call(o,h)}:o[a]=(...c)=>{let h=l.apply(o,c);return h===!1&&(h=u.apply(o,c)),h}}i.hooks=o}if(r.walkTokens){const o=this.defaults.walkTokens,s=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(s.call(this,a)),o&&(l=l.concat(o.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return il.lex(e,t??this.defaults)}parser(e,t){return ol.parse(e,t??this.defaults)}parseMarkdown(e){return(r,i)=>{const o={...i},s={...this.defaults,...o},a=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&o.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);const l=s.hooks?s.hooks.provideLexer():e?il.lex:il.lexInline,u=s.hooks?s.hooks.provideParser():e?ol.parse:ol.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(r):r).then(c=>l(c,s)).then(c=>s.hooks?s.hooks.processAllTokens(c):c).then(c=>s.walkTokens?Promise.all(this.walkTokens(c,s.walkTokens)).then(()=>c):c).then(c=>u(c,s)).then(c=>s.hooks?s.hooks.postprocess(c):c).catch(a);try{s.hooks&&(r=s.hooks.preprocess(r));let c=l(r,s);s.hooks&&(c=s.hooks.processAllTokens(c)),s.walkTokens&&this.walkTokens(c,s.walkTokens);let h=u(c,s);return s.hooks&&(h=s.hooks.postprocess(h)),h}catch(c){return a(c)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+yu(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}}const jd=new Joe;function Sr(n,e){return jd.parse(n,e)}Sr.options=Sr.setOptions=function(n){return jd.setOptions(n),Sr.defaults=jd.defaults,hB(Sr.defaults),Sr};Sr.getDefaults=nT;Sr.defaults=rp;Sr.use=function(...n){return jd.use(...n),Sr.defaults=jd.defaults,hB(Sr.defaults),Sr};Sr.walkTokens=function(n,e){return jd.walkTokens(n,e)};Sr.parseInline=jd.parseInline;Sr.Parser=ol;Sr.parser=ol.parse;Sr.Renderer=mw;Sr.TextRenderer=cT;Sr.Lexer=il;Sr.lexer=il.lex;Sr.Tokenizer=pw;Sr.Hooks=uv;Sr.parse=Sr;Sr.options;Sr.setOptions;Sr.use;Sr.walkTokens;Sr.parseInline;ol.parse;il.lex;function Qoe({article:n}){const[e,t]=de.useState(""),[r,i]=de.useState(!0),[o,s]=de.useState(null);de.useEffect(()=>{Sr.setOptions({breaks:!0,gfm:!0})},[]),de.useEffect(()=>{async function u(){try{const c=await fetch(`/assets/blog/${n.filename}`);if(c.ok){const d=await c.text(),v=Sr.parse(d);t(v),i(!1);return}console.log(`Primary path failed, trying fallbacks for: ${n.filename}`);const h=await fetch(`/cad-os/assets/blog/${n.filename}`);if(h.ok){const d=await h.text(),v=Sr.parse(d);t(v),i(!1);return}const f=await fetch(`https://raw.githubusercontent.com/haloedDepth/cad-os/main/assets/blog/${n.filename}`);if(f.ok){const d=await f.text(),v=Sr.parse(d);t(v),i(!1);return}throw new Error(`Could not load article from any source: ${n.filename}`)}catch(c){console.error("Error fetching article content:",c),s("Failed to load article content. Please try again later."),i(!1)}}u()},[n]);const a={container:{maxWidth:"min(900px, calc(100% - 4rem))",margin:"0 auto",padding:0,overflow:"hidden"},backButton:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"transparent",color:"#2563EB",border:"none",padding:"0.75rem 0",marginBottom:"2rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"color 0.2s"},header:{marginBottom:"2.5rem",borderBottom:"1px solid #E2E8F0",paddingBottom:"1.5rem"},title:{fontSize:"2.5rem",fontWeight:"800",marginBottom:"1rem",color:"#1E293B",lineHeight:"1.2"},date:{fontSize:"0.95rem",color:"#64748B",fontWeight:"500"},content:{lineHeight:"1.8",color:"#334155",fontSize:"1.1rem",wordWrap:"break-word",overflowWrap:"break-word"}},l=`
    .blog-content {
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
    
    .blog-content h1 {
      font-size: 2.25rem;
      font-weight: 800;
      margin-top: 2.5rem;
      margin-bottom: 1.5rem;
      color: #1E293B;
      line-height: 1.3;
    }
    
    .blog-content h2 {
      font-size: 1.875rem;
      font-weight: 700;
      margin-top: 2.25rem;
      margin-bottom: 1.25rem;
      color: #1E293B;
      line-height: 1.3;
    }
    
    .blog-content h3 {
      font-size: 1.5rem;
      font-weight: 700;
      margin-top: 2rem;
      margin-bottom: 1rem;
      color: #1E293B;
      line-height: 1.4;
    }
    
    .blog-content h4, .blog-content h5, .blog-content h6 {
      font-size: 1.25rem;
      font-weight: 600;
      margin-top: 1.75rem;
      margin-bottom: 0.75rem;
      color: #1E293B;
      line-height: 1.4;
    }
    
    .blog-content p {
      margin-bottom: 1.5rem;
      line-height: 1.8;
    }
    
    .blog-content ul, .blog-content ol {
      margin: 1.5rem 0 2rem;
      padding-left: 2rem;
    }
    
    .blog-content li {
      margin-bottom: 0.5rem;
    }
    
    .blog-content blockquote {
      border-left: 4px solid #3B82F6;
      padding-left: 1.5rem;
      margin-left: 0;
      margin-right: 0;
      margin-bottom: 1.5rem;
      font-style: italic;
      color: #4B5563;
    }
    
    .blog-content code {
      font-family: monospace;
      background-color: #EFF6FF;
      color: #2563EB;
      padding: 0.2rem 0.4rem;
      border-radius: 4px;
      font-size: 0.9em;
    }
    
    .blog-content pre {
      background-color: #1E293B;
      color: #F8FAFC;
      padding: 1.5rem;
      border-radius: 8px;
      overflow-x: auto;
      margin: 1.5rem 0 2rem;
      white-space: pre-wrap;    /* Added for wrapping */
      overflow-wrap: break-word; /* Added for wrapping */
    }
    
    .blog-content pre code {
      background-color: transparent;
      color: inherit;
      padding: 0;
      font-size: 0.9rem;
      line-height: 1.6;
    }
    
    .blog-content a {
      color: #2563EB;
      text-decoration: none;
      border-bottom: 1px solid currentColor;
      padding-bottom: 1px;
      transition: opacity 0.2s;
    }
    
    .blog-content a:hover {
      opacity: 0.8;
    }
    
    .blog-content hr {
      border: none;
      border-top: 1px solid #E2E8F0;
      margin: 2.5rem 0;
    }

    .blog-content img { /* Added Rule */
      max-width: 100%;
      height: auto;
      display: block; 
    }
    
    .blog-content table { /* Modified Rule */
      display: block; 
      overflow-x: auto; 
      width: 100%;
      border-collapse: collapse;
      margin: 2rem 0;
    }
    
    .blog-content th, .blog-content td {
      border: 1px solid #E2E8F0;
      padding: 0.75rem 1rem;
      text-align: left;
    }
    
    .blog-content th {
      background-color: #F8FAFC;
      font-weight: 600;
    }
    
    .blog-content tr:nth-child(even) {
      background-color: #F8FAFC;
    }
  `;return r?ce("div",{style:{display:"flex",justifyContent:"center",padding:"2rem"},children:ce("p",{children:"Loading article..."})}):o?ce("div",{style:{display:"flex",justifyContent:"center",padding:"2rem",color:"#e53e3e"},children:ce("p",{children:o})}):Je("div",{style:a.container,children:[ce("style",{children:l}),Je(h1,{to:"/blog",style:{...a.backButton,textDecoration:"none"},children:[Je("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ce("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),ce("polyline",{points:"12 19 5 12 12 5"})]}),"Back to Articles"]}),Je("div",{style:a.header,children:[ce("h1",{style:a.title,children:n.title}),ce("p",{style:a.date,children:n.date})]}),ce("div",{className:"blog-content",style:a.content,dangerouslySetInnerHTML:{__html:e}})]})}function ese({articles:n}){const{slug:e}=Wz(),t=n.find(r=>r.id===e);return t?ce(Qoe,{article:t}):Je("div",{style:{padding:"2rem",textAlign:"center"},children:[ce("h2",{children:"Article Not Found"}),ce("p",{children:"The blog post you're looking for doesn't seem to exist."}),ce(h1,{to:"/blog",style:{display:"inline-block",marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"#2563EB",color:"white",textDecoration:"none",borderRadius:"0.25rem"},children:"Back to Blog List"})]})}function tse(){const[n,e]=de.useState([]),[t,r]=de.useState(!0),[i,o]=de.useState(null);return de.useEffect(()=>{async function s(){try{e([{id:"parametric-modeling-foundations",title:"The Synergy Between Parametric Modeling and Rapid Prototyping",date:"April 11, 2025",excerpt:"Discover how the powerful combination of parametric modeling and rapid prototyping accelerates product development, enables complex designs, and delivers customized solutions across industries.",filename:"parametric-modeling-and-rapid-prototyping.md"}]),r(!1)}catch(a){console.error("Error fetching blog articles:",a),o("Failed to load blog articles"),r(!1)}}s()},[]),t?ce("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:ce("p",{children:"Loading articles..."})}):i?ce("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",color:"#e53e3e"},children:ce("p",{children:i})}):ce("div",{style:{maxWidth:"1200px",margin:"0 auto",paddingTop:"2rem",paddingBottom:"2rem",color:"#1E293B"},children:Je(ZI,{children:[ce(Fh,{index:!0,element:Je(Xm,{children:[Je("div",{style:{display:"flex",alignItems:"center",marginBottom:"2rem",gap:"1rem"},children:[ce("div",{style:{width:"4px",height:"2rem",backgroundColor:"#2563EB",borderRadius:"2px"}}),ce("h1",{style:{fontSize:"2.25rem",fontWeight:"800",margin:0},children:"Blog"})]}),ce("p",{style:{fontSize:"1.125rem",lineHeight:"1.7",color:"#475569",marginBottom:"2rem"},children:"Explore our latest articles on parametric modeling, CAD techniques, and engineering insights."}),ce(goe,{articles:n})]})}),ce(Fh,{path:":slug",element:ce(ese,{articles:n})})]})})}const A0=({isActive:n})=>{const e=window.innerWidth<480;return{backgroundColor:n?"#2563EB":"transparent",color:"white",border:"none",padding:e?"0.4rem 0.6rem":"0.5rem 1rem",borderRadius:"0.25rem",cursor:"pointer",fontWeight:n?"600":"400",transition:"background-color 0.2s",textDecoration:"none",fontSize:e?"0.85rem":"inherit",whiteSpace:"nowrap"}};function nse(){const[n,e]=de.useState(window.innerWidth<480);return de.useEffect(()=>{const t=()=>e(window.innerWidth<480);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),Je("div",{style:{height:"100vh",display:"flex",flexDirection:"column",overflow:"hidden",margin:0,padding:0},children:[Je("nav",{style:{backgroundColor:"#1E293B",color:"white",padding:"0.75rem 1rem",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",margin:0,flexShrink:0,flexWrap:n?"wrap":"nowrap"},children:[Je("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:n?"0.5rem":0,flex:n?"1 0 100%":"0 1 auto"},children:[ce("h1",{style:{margin:0,fontSize:n?"1.25rem":"1.5rem",fontWeight:"600",color:"#F8FAFC"},children:"CAD-OS"}),ce("span",{style:{fontSize:"0.8rem",backgroundColor:"#0EA5E9",padding:"0.2rem 0.5rem",borderRadius:"0.25rem",color:"white"},children:"v0.18.1"})]}),Je("div",{style:{display:"flex",gap:"0.25rem",overflowX:"auto",justifyContent:n?"space-between":"flex-end",width:n?"100%":"auto"},children:[ce(sm,{to:"/",style:A0,children:"Home"}),ce(sm,{to:"/app",style:A0,children:"App"}),ce(sm,{to:"/blog",style:A0,children:"Blog"}),ce(sm,{to:"/about",style:A0,children:"About"}),ce(sm,{to:"/tools",style:A0,children:"Tools"})]})]}),ce("div",{style:{flex:1,overflowY:"scroll",overflowX:"hidden",paddingLeft:window.innerWidth<768?"1rem":"2rem",paddingRight:window.innerWidth<768?"1rem":"2rem"},children:Je(ZI,{children:[ce(Fh,{path:"/",element:ce(O7,{})}),ce(Fh,{path:"/app",element:ce(coe,{})}),ce(Fh,{path:"/blog/*",element:ce(tse,{})})," ",ce(Fh,{path:"/about",element:ce(hoe,{})}),ce(Fh,{path:"/tools",element:ce(moe,{})})]})})]})}function rse(){return ce(nse,{})}rz.render(ce(D4.StrictMode,{children:ce(C7,{children:ce(rse,{})})}),document.getElementById("root"));export{Br as _,ose as c};
