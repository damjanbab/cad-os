var FB=Object.defineProperty;var DB=(n,e,t)=>e in n?FB(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var zr=(n,e,t)=>(DB(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}})();var rse=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function bw(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var pv={},OB={get exports(){return pv},set exports(n){pv=n}},Mw={},pe={},BB={get exports(){return pe},set exports(n){pe=n}},ir={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a1=Symbol.for("react.element"),UB=Symbol.for("react.portal"),zB=Symbol.for("react.fragment"),HB=Symbol.for("react.strict_mode"),GB=Symbol.for("react.profiler"),VB=Symbol.for("react.provider"),WB=Symbol.for("react.context"),jB=Symbol.for("react.forward_ref"),$B=Symbol.for("react.suspense"),qB=Symbol.for("react.memo"),XB=Symbol.for("react.lazy"),bT=Symbol.iterator;function YB(n){return n===null||typeof n!="object"?null:(n=bT&&n[bT]||n["@@iterator"],typeof n=="function"?n:null)}var O4={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B4=Object.assign,U4={};function yg(n,e,t){this.props=n,this.context=e,this.refs=U4,this.updater=t||O4}yg.prototype.isReactComponent={};yg.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};yg.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function z4(){}z4.prototype=yg.prototype;function RE(n,e,t){this.props=n,this.context=e,this.refs=U4,this.updater=t||O4}var kE=RE.prototype=new z4;kE.constructor=RE;B4(kE,yg.prototype);kE.isPureReactComponent=!0;var MT=Array.isArray,H4=Object.prototype.hasOwnProperty,IE={current:null},G4={key:!0,ref:!0,__self:!0,__source:!0};function V4(n,e,t){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)H4.call(e,r)&&!G4.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:a1,type:n,key:o,ref:s,props:i,_owner:IE.current}}function ZB(n,e){return{$$typeof:a1,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function NE(n){return typeof n=="object"&&n!==null&&n.$$typeof===a1}function KB(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var ET=/\/+/g;function XS(n,e){return typeof n=="object"&&n!==null&&n.key!=null?KB(""+n.key):e.toString(36)}function B2(n,e,t,r,i){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var s=!1;if(n===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(n.$$typeof){case a1:case UB:s=!0}}if(s)return s=n,i=i(s),n=r===""?"."+XS(s,0):r,MT(i)?(t="",n!=null&&(t=n.replace(ET,"$&/")+"/"),B2(i,e,t,"",function(u){return u})):i!=null&&(NE(i)&&(i=ZB(i,t+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(ET,"$&/")+"/")+n)),e.push(i)),1;if(s=0,r=r===""?".":r+":",MT(n))for(var a=0;a<n.length;a++){o=n[a];var l=r+XS(o,a);s+=B2(o,e,t,l,i)}else if(l=YB(n),typeof l=="function")for(n=l.call(n),a=0;!(o=n.next()).done;)o=o.value,l=r+XS(o,a++),s+=B2(o,e,t,l,i);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function ly(n,e,t){if(n==null)return n;var r=[],i=0;return B2(n,r,"","",function(o){return e.call(t,o,i++)}),r}function JB(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Ds={current:null},U2={transition:null},QB={ReactCurrentDispatcher:Ds,ReactCurrentBatchConfig:U2,ReactCurrentOwner:IE};ir.Children={map:ly,forEach:function(n,e,t){ly(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return ly(n,function(){e++}),e},toArray:function(n){return ly(n,function(e){return e})||[]},only:function(n){if(!NE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ir.Component=yg;ir.Fragment=zB;ir.Profiler=GB;ir.PureComponent=RE;ir.StrictMode=HB;ir.Suspense=$B;ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QB;ir.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=B4({},n.props),i=n.key,o=n.ref,s=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=IE.current),e.key!==void 0&&(i=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)H4.call(e,l)&&!G4.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:a1,type:n.type,key:i,ref:o,props:r,_owner:s}};ir.createContext=function(n){return n={$$typeof:WB,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:VB,_context:n},n.Consumer=n};ir.createElement=V4;ir.createFactory=function(n){var e=V4.bind(null,n);return e.type=n,e};ir.createRef=function(){return{current:null}};ir.forwardRef=function(n){return{$$typeof:jB,render:n}};ir.isValidElement=NE;ir.lazy=function(n){return{$$typeof:XB,_payload:{_status:-1,_result:n},_init:JB}};ir.memo=function(n,e){return{$$typeof:qB,type:n,compare:e===void 0?null:e}};ir.startTransition=function(n){var e=U2.transition;U2.transition={};try{n()}finally{U2.transition=e}};ir.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ir.useCallback=function(n,e){return Ds.current.useCallback(n,e)};ir.useContext=function(n){return Ds.current.useContext(n)};ir.useDebugValue=function(){};ir.useDeferredValue=function(n){return Ds.current.useDeferredValue(n)};ir.useEffect=function(n,e){return Ds.current.useEffect(n,e)};ir.useId=function(){return Ds.current.useId()};ir.useImperativeHandle=function(n,e,t){return Ds.current.useImperativeHandle(n,e,t)};ir.useInsertionEffect=function(n,e){return Ds.current.useInsertionEffect(n,e)};ir.useLayoutEffect=function(n,e){return Ds.current.useLayoutEffect(n,e)};ir.useMemo=function(n,e){return Ds.current.useMemo(n,e)};ir.useReducer=function(n,e,t){return Ds.current.useReducer(n,e,t)};ir.useRef=function(n){return Ds.current.useRef(n)};ir.useState=function(n){return Ds.current.useState(n)};ir.useSyncExternalStore=function(n,e,t){return Ds.current.useSyncExternalStore(n,e,t)};ir.useTransition=function(){return Ds.current.useTransition()};ir.version="18.2.0";(function(n){n.exports=ir})(BB);const W4=bw(pe);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var eU=pe,tU=Symbol.for("react.element"),nU=Symbol.for("react.fragment"),rU=Object.prototype.hasOwnProperty,iU=eU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oU={key:!0,ref:!0,__self:!0,__source:!0};function j4(n,e,t){var r,i={},o=null,s=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)rU.call(e,r)&&!oU.hasOwnProperty(r)&&(i[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:tU,type:n,key:o,ref:s,props:i,_owner:iU.current}}Mw.Fragment=nU;Mw.jsx=j4;Mw.jsxs=j4;(function(n){n.exports=Mw})(OB);const Zm=pv.Fragment,ue=pv.jsx,ut=pv.jsxs;var i5={},sU={get exports(){return i5},set exports(n){i5=n}},Aa={},o5={},aU={get exports(){return o5},set exports(n){o5=n}},$4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(H,q){var Z=H.length;H.push(q);e:for(;0<Z;){var oe=Z-1>>>1,F=H[oe];if(0<i(F,q))H[oe]=q,H[Z]=F,Z=oe;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var q=H[0],Z=H.pop();if(Z!==q){H[0]=Z;e:for(var oe=0,F=H.length,j=F>>>1;oe<j;){var Q=2*(oe+1)-1,se=H[Q],fe=Q+1,we=H[fe];if(0>i(se,Z))fe<F&&0>i(we,se)?(H[oe]=we,H[fe]=Z,oe=fe):(H[oe]=se,H[Q]=Z,oe=Q);else if(fe<F&&0>i(we,Z))H[oe]=we,H[fe]=Z,oe=fe;else break e}}return q}function i(H,q){var Z=H.sortIndex-q.sortIndex;return Z!==0?Z:H.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,h=null,f=3,d=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(H){for(var q=t(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=H)r(u),q.sortIndex=q.expirationTime,e(l,q);else break;q=t(u)}}function E(H){if(y=!1,_(H),!v)if(t(l)!==null)v=!0,J(C);else{var q=t(u);q!==null&&le(E,q.startTime-H)}}function C(H,q){v=!1,y&&(y=!1,g(L),L=-1),d=!0;var Z=f;try{for(_(q),h=t(l);h!==null&&(!(h.expirationTime>q)||H&&!N());){var oe=h.callback;if(typeof oe=="function"){h.callback=null,f=h.priorityLevel;var F=oe(h.expirationTime<=q);q=n.unstable_now(),typeof F=="function"?h.callback=F:h===t(l)&&r(l),_(q)}else r(l);h=t(l)}if(h!==null)var j=!0;else{var Q=t(u);Q!==null&&le(E,Q.startTime-q),j=!1}return j}finally{h=null,f=Z,d=!1}}var I=!1,R=null,L=-1,k=5,D=-1;function N(){return!(n.unstable_now()-D<k)}function B(){if(R!==null){var H=n.unstable_now();D=H;var q=!0;try{q=R(!0,H)}finally{q?G():(I=!1,R=null)}}else I=!1}var G;if(typeof x=="function")G=function(){x(B)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,$=V.port2;V.port1.onmessage=B,G=function(){$.postMessage(null)}}else G=function(){w(B,0)};function J(H){R=H,I||(I=!0,G())}function le(H,q){L=w(function(){H(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){v||d||(v=!0,J(C))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(H){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var Z=f;f=q;try{return H()}finally{f=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Z=f;f=H;try{return q()}finally{f=Z}},n.unstable_scheduleCallback=function(H,q,Z){var oe=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?oe+Z:oe):Z=oe,H){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=Z+F,H={id:c++,callback:q,priorityLevel:H,startTime:Z,expirationTime:F,sortIndex:-1},Z>oe?(H.sortIndex=Z,e(u,H),t(l)===null&&H===t(u)&&(y?(g(L),L=-1):y=!0,le(E,Z-oe))):(H.sortIndex=F,e(l,H),v||d||(v=!0,J(C))),H},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(H){var q=f;return function(){var Z=f;f=q;try{return H.apply(this,arguments)}finally{f=Z}}}})($4);(function(n){n.exports=$4})(aU);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var q4=pe,Ma=o5;function Lt(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var X4=new Set,mv={};function Yd(n,e){Km(n,e),Km(n+"Capture",e)}function Km(n,e){for(mv[n]=e,n=0;n<e.length;n++)X4.add(e[n])}var Nc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),s5=Object.prototype.hasOwnProperty,lU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,AT={},TT={};function uU(n){return s5.call(TT,n)?!0:s5.call(AT,n)?!1:lU.test(n)?TT[n]=!0:(AT[n]=!0,!1)}function cU(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function hU(n,e,t,r){if(e===null||typeof e>"u"||cU(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Os(n,e,t,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Yo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Yo[n]=new Os(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Yo[e]=new Os(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Yo[n]=new Os(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Yo[n]=new Os(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Yo[n]=new Os(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Yo[n]=new Os(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Yo[n]=new Os(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Yo[n]=new Os(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Yo[n]=new Os(n,5,!1,n.toLowerCase(),null,!1,!1)});var FE=/[\-:]([a-z])/g;function DE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(FE,DE);Yo[e]=new Os(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(FE,DE);Yo[e]=new Os(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(FE,DE);Yo[e]=new Os(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Yo[n]=new Os(n,1,!1,n.toLowerCase(),null,!1,!1)});Yo.xlinkHref=new Os("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Yo[n]=new Os(n,1,!1,n.toLowerCase(),null,!0,!0)});function OE(n,e,t,r){var i=Yo.hasOwnProperty(e)?Yo[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hU(e,t,i,r)&&(t=null),r||i===null?uU(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):i.mustUseProperty?n[i.propertyName]=t===null?i.type===3?!1:"":t:(e=i.attributeName,r=i.attributeNamespace,t===null?n.removeAttribute(e):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Vc=q4.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uy=Symbol.for("react.element"),mm=Symbol.for("react.portal"),gm=Symbol.for("react.fragment"),BE=Symbol.for("react.strict_mode"),a5=Symbol.for("react.profiler"),Y4=Symbol.for("react.provider"),Z4=Symbol.for("react.context"),UE=Symbol.for("react.forward_ref"),l5=Symbol.for("react.suspense"),u5=Symbol.for("react.suspense_list"),zE=Symbol.for("react.memo"),Nh=Symbol.for("react.lazy"),K4=Symbol.for("react.offscreen"),CT=Symbol.iterator;function Jg(n){return n===null||typeof n!="object"?null:(n=CT&&n[CT]||n["@@iterator"],typeof n=="function"?n:null)}var Ai=Object.assign,YS;function L0(n){if(YS===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);YS=e&&e[1]||""}return`
`+YS+n}var ZS=!1;function KS(n,e){if(!n||ZS)return"";ZS=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){r=u}n.call(e.prototype)}else{try{throw Error()}catch(u){r=u}n()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var l=`
`+i[s].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=s&&0<=a);break}}}finally{ZS=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?L0(n):""}function fU(n){switch(n.tag){case 5:return L0(n.type);case 16:return L0("Lazy");case 13:return L0("Suspense");case 19:return L0("SuspenseList");case 0:case 2:case 15:return n=KS(n.type,!1),n;case 11:return n=KS(n.type.render,!1),n;case 1:return n=KS(n.type,!0),n;default:return""}}function c5(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case gm:return"Fragment";case mm:return"Portal";case a5:return"Profiler";case BE:return"StrictMode";case l5:return"Suspense";case u5:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case Z4:return(n.displayName||"Context")+".Consumer";case Y4:return(n._context.displayName||"Context")+".Provider";case UE:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case zE:return e=n.displayName||null,e!==null?e:c5(n.type)||"Memo";case Nh:e=n._payload,n=n._init;try{return c5(n(e))}catch{}}return null}function dU(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return c5(e);case 8:return e===BE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function hf(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function J4(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function pU(n){var e=J4(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function cy(n){n._valueTracker||(n._valueTracker=pU(n))}function Q4(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=J4(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function xx(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function h5(n,e){var t=e.checked;return Ai({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function PT(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=hf(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ek(n,e){e=e.checked,e!=null&&OE(n,"checked",e,!1)}function f5(n,e){ek(n,e);var t=hf(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?d5(n,e.type,t):e.hasOwnProperty("defaultValue")&&d5(n,e.type,hf(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function LT(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function d5(n,e,t){(e!=="number"||xx(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var R0=Array.isArray;function Im(n,e,t,r){if(n=n.options,e){e={};for(var i=0;i<t.length;i++)e["$"+t[i]]=!0;for(t=0;t<n.length;t++)i=e.hasOwnProperty("$"+n[t].value),n[t].selected!==i&&(n[t].selected=i),i&&r&&(n[t].defaultSelected=!0)}else{for(t=""+hf(t),e=null,i=0;i<n.length;i++){if(n[i].value===t){n[i].selected=!0,r&&(n[i].defaultSelected=!0);return}e!==null||n[i].disabled||(e=n[i])}e!==null&&(e.selected=!0)}}function p5(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Lt(91));return Ai({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function RT(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Lt(92));if(R0(t)){if(1<t.length)throw Error(Lt(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:hf(t)}}function tk(n,e){var t=hf(e.value),r=hf(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function kT(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function nk(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function m5(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?nk(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var hy,rk=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,i)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(hy=hy||document.createElement("div"),hy.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hy.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function gv(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var z0={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},mU=["Webkit","ms","Moz","O"];Object.keys(z0).forEach(function(n){mU.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),z0[e]=z0[n]})});function ik(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||z0.hasOwnProperty(n)&&z0[n]?(""+e).trim():e+"px"}function ok(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=ik(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,i):n[t]=i}}var gU=Ai({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function g5(n,e){if(e){if(gU[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Lt(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Lt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Lt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Lt(62))}}function v5(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var y5=null;function HE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var x5=null,Nm=null,Fm=null;function IT(n){if(n=c1(n)){if(typeof x5!="function")throw Error(Lt(280));var e=n.stateNode;e&&(e=Pw(e),x5(n.stateNode,n.type,e))}}function sk(n){Nm?Fm?Fm.push(n):Fm=[n]:Nm=n}function ak(){if(Nm){var n=Nm,e=Fm;if(Fm=Nm=null,IT(n),e)for(n=0;n<e.length;n++)IT(e[n])}}function lk(n,e){return n(e)}function uk(){}var JS=!1;function ck(n,e,t){if(JS)return n(e,t);JS=!0;try{return lk(n,e,t)}finally{JS=!1,(Nm!==null||Fm!==null)&&(uk(),ak())}}function vv(n,e){var t=n.stateNode;if(t===null)return null;var r=Pw(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Lt(231,e,typeof t));return t}var w5=!1;if(Nc)try{var Qg={};Object.defineProperty(Qg,"passive",{get:function(){w5=!0}}),window.addEventListener("test",Qg,Qg),window.removeEventListener("test",Qg,Qg)}catch{w5=!1}function vU(n,e,t,r,i,o,s,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var H0=!1,wx=null,Sx=!1,S5=null,yU={onError:function(n){H0=!0,wx=n}};function xU(n,e,t,r,i,o,s,a,l){H0=!1,wx=null,vU.apply(yU,arguments)}function wU(n,e,t,r,i,o,s,a,l){if(xU.apply(this,arguments),H0){if(H0){var u=wx;H0=!1,wx=null}else throw Error(Lt(198));Sx||(Sx=!0,S5=u)}}function Zd(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function hk(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function NT(n){if(Zd(n)!==n)throw Error(Lt(188))}function SU(n){var e=n.alternate;if(!e){if(e=Zd(n),e===null)throw Error(Lt(188));return e!==n?null:n}for(var t=n,r=e;;){var i=t.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===t)return NT(i),n;if(o===r)return NT(i),e;o=o.sibling}throw Error(Lt(188))}if(t.return!==r.return)t=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===t){s=!0,t=i,r=o;break}if(a===r){s=!0,r=i,t=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===t){s=!0,t=o,r=i;break}if(a===r){s=!0,r=o,t=i;break}a=a.sibling}if(!s)throw Error(Lt(189))}}if(t.alternate!==r)throw Error(Lt(190))}if(t.tag!==3)throw Error(Lt(188));return t.stateNode.current===t?n:e}function fk(n){return n=SU(n),n!==null?dk(n):null}function dk(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=dk(n);if(e!==null)return e;n=n.sibling}return null}var pk=Ma.unstable_scheduleCallback,FT=Ma.unstable_cancelCallback,_U=Ma.unstable_shouldYield,bU=Ma.unstable_requestPaint,Vi=Ma.unstable_now,MU=Ma.unstable_getCurrentPriorityLevel,GE=Ma.unstable_ImmediatePriority,mk=Ma.unstable_UserBlockingPriority,_x=Ma.unstable_NormalPriority,EU=Ma.unstable_LowPriority,gk=Ma.unstable_IdlePriority,Ew=null,Pu=null;function AU(n){if(Pu&&typeof Pu.onCommitFiberRoot=="function")try{Pu.onCommitFiberRoot(Ew,n,void 0,(n.current.flags&128)===128)}catch{}}var Bl=Math.clz32?Math.clz32:PU,TU=Math.log,CU=Math.LN2;function PU(n){return n>>>=0,n===0?32:31-(TU(n)/CU|0)|0}var fy=64,dy=4194304;function k0(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function bx(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,i=n.suspendedLanes,o=n.pingedLanes,s=t&268435455;if(s!==0){var a=s&~i;a!==0?r=k0(a):(o&=s,o!==0&&(r=k0(o)))}else s=t&~i,s!==0?r=k0(s):o!==0&&(r=k0(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-Bl(e),i=1<<t,r|=n[t],e&=~i;return r}function LU(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RU(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,i=n.expirationTimes,o=n.pendingLanes;0<o;){var s=31-Bl(o),a=1<<s,l=i[s];l===-1?(!(a&t)||a&r)&&(i[s]=LU(a,e)):l<=e&&(n.expiredLanes|=a),o&=~a}}function _5(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function vk(){var n=fy;return fy<<=1,!(fy&4194240)&&(fy=64),n}function QS(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function l1(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Bl(e),n[e]=t}function kU(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var i=31-Bl(t),o=1<<i;e[i]=0,r[i]=-1,n[i]=-1,t&=~o}}function VE(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-Bl(t),i=1<<r;i&e|n[r]&e&&(n[r]|=e),t&=~i}}var Dr=0;function yk(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var xk,WE,wk,Sk,_k,b5=!1,py=[],Kh=null,Jh=null,Qh=null,yv=new Map,xv=new Map,Oh=[],IU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function DT(n,e){switch(n){case"focusin":case"focusout":Kh=null;break;case"dragenter":case"dragleave":Jh=null;break;case"mouseover":case"mouseout":Qh=null;break;case"pointerover":case"pointerout":yv.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xv.delete(e.pointerId)}}function e0(n,e,t,r,i,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=c1(e),e!==null&&WE(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),n)}function NU(n,e,t,r,i){switch(e){case"focusin":return Kh=e0(Kh,n,e,t,r,i),!0;case"dragenter":return Jh=e0(Jh,n,e,t,r,i),!0;case"mouseover":return Qh=e0(Qh,n,e,t,r,i),!0;case"pointerover":var o=i.pointerId;return yv.set(o,e0(yv.get(o)||null,n,e,t,r,i)),!0;case"gotpointercapture":return o=i.pointerId,xv.set(o,e0(xv.get(o)||null,n,e,t,r,i)),!0}return!1}function bk(n){var e=vd(n.target);if(e!==null){var t=Zd(e);if(t!==null){if(e=t.tag,e===13){if(e=hk(t),e!==null){n.blockedOn=e,_k(n.priority,function(){wk(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function z2(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=M5(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);y5=r,t.target.dispatchEvent(r),y5=null}else return e=c1(t),e!==null&&WE(e),n.blockedOn=t,!1;e.shift()}return!0}function OT(n,e,t){z2(n)&&t.delete(e)}function FU(){b5=!1,Kh!==null&&z2(Kh)&&(Kh=null),Jh!==null&&z2(Jh)&&(Jh=null),Qh!==null&&z2(Qh)&&(Qh=null),yv.forEach(OT),xv.forEach(OT)}function t0(n,e){n.blockedOn===e&&(n.blockedOn=null,b5||(b5=!0,Ma.unstable_scheduleCallback(Ma.unstable_NormalPriority,FU)))}function wv(n){function e(i){return t0(i,n)}if(0<py.length){t0(py[0],n);for(var t=1;t<py.length;t++){var r=py[t];r.blockedOn===n&&(r.blockedOn=null)}}for(Kh!==null&&t0(Kh,n),Jh!==null&&t0(Jh,n),Qh!==null&&t0(Qh,n),yv.forEach(e),xv.forEach(e),t=0;t<Oh.length;t++)r=Oh[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Oh.length&&(t=Oh[0],t.blockedOn===null);)bk(t),t.blockedOn===null&&Oh.shift()}var Dm=Vc.ReactCurrentBatchConfig,Mx=!0;function DU(n,e,t,r){var i=Dr,o=Dm.transition;Dm.transition=null;try{Dr=1,jE(n,e,t,r)}finally{Dr=i,Dm.transition=o}}function OU(n,e,t,r){var i=Dr,o=Dm.transition;Dm.transition=null;try{Dr=4,jE(n,e,t,r)}finally{Dr=i,Dm.transition=o}}function jE(n,e,t,r){if(Mx){var i=M5(n,e,t,r);if(i===null)u_(n,e,r,Ex,t),DT(n,r);else if(NU(i,n,e,t,r))r.stopPropagation();else if(DT(n,r),e&4&&-1<IU.indexOf(n)){for(;i!==null;){var o=c1(i);if(o!==null&&xk(o),o=M5(n,e,t,r),o===null&&u_(n,e,r,Ex,t),o===i)break;i=o}i!==null&&r.stopPropagation()}else u_(n,e,r,null,t)}}var Ex=null;function M5(n,e,t,r){if(Ex=null,n=HE(r),n=vd(n),n!==null)if(e=Zd(n),e===null)n=null;else if(t=e.tag,t===13){if(n=hk(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Ex=n,null}function Mk(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MU()){case GE:return 1;case mk:return 4;case _x:case EU:return 16;case gk:return 536870912;default:return 16}default:return 16}}var Gh=null,$E=null,H2=null;function Ek(){if(H2)return H2;var n,e=$E,t=e.length,r,i="value"in Gh?Gh.value:Gh.textContent,o=i.length;for(n=0;n<t&&e[n]===i[n];n++);var s=t-n;for(r=1;r<=s&&e[t-r]===i[o-r];r++);return H2=i.slice(n,1<r?1-r:void 0)}function G2(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function my(){return!0}function BT(){return!1}function Ta(n){function e(t,r,i,o,s){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?my:BT,this.isPropagationStopped=BT,this}return Ai(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=my)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=my)},persist:function(){},isPersistent:my}),e}var xg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qE=Ta(xg),u1=Ai({},xg,{view:0,detail:0}),BU=Ta(u1),e_,t_,n0,Aw=Ai({},u1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:XE,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==n0&&(n0&&n.type==="mousemove"?(e_=n.screenX-n0.screenX,t_=n.screenY-n0.screenY):t_=e_=0,n0=n),e_)},movementY:function(n){return"movementY"in n?n.movementY:t_}}),UT=Ta(Aw),UU=Ai({},Aw,{dataTransfer:0}),zU=Ta(UU),HU=Ai({},u1,{relatedTarget:0}),n_=Ta(HU),GU=Ai({},xg,{animationName:0,elapsedTime:0,pseudoElement:0}),VU=Ta(GU),WU=Ai({},xg,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),jU=Ta(WU),$U=Ai({},xg,{data:0}),zT=Ta($U),qU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZU(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=YU[n])?!!e[n]:!1}function XE(){return ZU}var KU=Ai({},u1,{key:function(n){if(n.key){var e=qU[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=G2(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?XU[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:XE,charCode:function(n){return n.type==="keypress"?G2(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?G2(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),JU=Ta(KU),QU=Ai({},Aw,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),HT=Ta(QU),e8=Ai({},u1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:XE}),t8=Ta(e8),n8=Ai({},xg,{propertyName:0,elapsedTime:0,pseudoElement:0}),r8=Ta(n8),i8=Ai({},Aw,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),o8=Ta(i8),s8=[9,13,27,32],YE=Nc&&"CompositionEvent"in window,G0=null;Nc&&"documentMode"in document&&(G0=document.documentMode);var a8=Nc&&"TextEvent"in window&&!G0,Ak=Nc&&(!YE||G0&&8<G0&&11>=G0),GT=String.fromCharCode(32),VT=!1;function Tk(n,e){switch(n){case"keyup":return s8.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ck(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var vm=!1;function l8(n,e){switch(n){case"compositionend":return Ck(e);case"keypress":return e.which!==32?null:(VT=!0,GT);case"textInput":return n=e.data,n===GT&&VT?null:n;default:return null}}function u8(n,e){if(vm)return n==="compositionend"||!YE&&Tk(n,e)?(n=Ek(),H2=$E=Gh=null,vm=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Ak&&e.locale!=="ko"?null:e.data;default:return null}}var c8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function WT(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!c8[n.type]:e==="textarea"}function Pk(n,e,t,r){sk(r),e=Ax(e,"onChange"),0<e.length&&(t=new qE("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var V0=null,Sv=null;function h8(n){zk(n,0)}function Tw(n){var e=wm(n);if(Q4(e))return n}function f8(n,e){if(n==="change")return e}var Lk=!1;if(Nc){var r_;if(Nc){var i_="oninput"in document;if(!i_){var jT=document.createElement("div");jT.setAttribute("oninput","return;"),i_=typeof jT.oninput=="function"}r_=i_}else r_=!1;Lk=r_&&(!document.documentMode||9<document.documentMode)}function $T(){V0&&(V0.detachEvent("onpropertychange",Rk),Sv=V0=null)}function Rk(n){if(n.propertyName==="value"&&Tw(Sv)){var e=[];Pk(e,Sv,n,HE(n)),ck(h8,e)}}function d8(n,e,t){n==="focusin"?($T(),V0=e,Sv=t,V0.attachEvent("onpropertychange",Rk)):n==="focusout"&&$T()}function p8(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Tw(Sv)}function m8(n,e){if(n==="click")return Tw(e)}function g8(n,e){if(n==="input"||n==="change")return Tw(e)}function v8(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Gl=typeof Object.is=="function"?Object.is:v8;function _v(n,e){if(Gl(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!s5.call(e,i)||!Gl(n[i],e[i]))return!1}return!0}function qT(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function XT(n,e){var t=qT(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=qT(t)}}function kk(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?kk(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function Ik(){for(var n=window,e=xx();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=xx(n.document)}return e}function ZE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function y8(n){var e=Ik(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&kk(t.ownerDocument.documentElement,t)){if(r!==null&&ZE(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var i=t.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!n.extend&&o>r&&(i=r,r=o,o=i),i=XT(t,o);var s=XT(t,r);i&&s&&(n.rangeCount!==1||n.anchorNode!==i.node||n.anchorOffset!==i.offset||n.focusNode!==s.node||n.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),n.removeAllRanges(),o>r?(n.addRange(e),n.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var x8=Nc&&"documentMode"in document&&11>=document.documentMode,ym=null,E5=null,W0=null,A5=!1;function YT(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;A5||ym==null||ym!==xx(r)||(r=ym,"selectionStart"in r&&ZE(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),W0&&_v(W0,r)||(W0=r,r=Ax(E5,"onSelect"),0<r.length&&(e=new qE("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=ym)))}function gy(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var xm={animationend:gy("Animation","AnimationEnd"),animationiteration:gy("Animation","AnimationIteration"),animationstart:gy("Animation","AnimationStart"),transitionend:gy("Transition","TransitionEnd")},o_={},Nk={};Nc&&(Nk=document.createElement("div").style,"AnimationEvent"in window||(delete xm.animationend.animation,delete xm.animationiteration.animation,delete xm.animationstart.animation),"TransitionEvent"in window||delete xm.transitionend.transition);function Cw(n){if(o_[n])return o_[n];if(!xm[n])return n;var e=xm[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Nk)return o_[n]=e[t];return n}var Fk=Cw("animationend"),Dk=Cw("animationiteration"),Ok=Cw("animationstart"),Bk=Cw("transitionend"),Uk=new Map,ZT="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _f(n,e){Uk.set(n,e),Yd(e,[n])}for(var s_=0;s_<ZT.length;s_++){var a_=ZT[s_],w8=a_.toLowerCase(),S8=a_[0].toUpperCase()+a_.slice(1);_f(w8,"on"+S8)}_f(Fk,"onAnimationEnd");_f(Dk,"onAnimationIteration");_f(Ok,"onAnimationStart");_f("dblclick","onDoubleClick");_f("focusin","onFocus");_f("focusout","onBlur");_f(Bk,"onTransitionEnd");Km("onMouseEnter",["mouseout","mouseover"]);Km("onMouseLeave",["mouseout","mouseover"]);Km("onPointerEnter",["pointerout","pointerover"]);Km("onPointerLeave",["pointerout","pointerover"]);Yd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Yd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Yd("onBeforeInput",["compositionend","keypress","textInput","paste"]);Yd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Yd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Yd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var I0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_8=new Set("cancel close invalid load scroll toggle".split(" ").concat(I0));function KT(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,wU(r,e,void 0,n),n.currentTarget=null}function zk(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==o&&i.isPropagationStopped())break e;KT(i,a,u),o=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,u=a.currentTarget,a=a.listener,l!==o&&i.isPropagationStopped())break e;KT(i,a,u),o=l}}}if(Sx)throw n=S5,Sx=!1,S5=null,n}function Qr(n,e){var t=e[R5];t===void 0&&(t=e[R5]=new Set);var r=n+"__bubble";t.has(r)||(Hk(e,n,2,!1),t.add(r))}function l_(n,e,t){var r=0;e&&(r|=4),Hk(t,n,r,e)}var vy="_reactListening"+Math.random().toString(36).slice(2);function bv(n){if(!n[vy]){n[vy]=!0,X4.forEach(function(t){t!=="selectionchange"&&(_8.has(t)||l_(t,!1,n),l_(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[vy]||(e[vy]=!0,l_("selectionchange",!1,e))}}function Hk(n,e,t,r){switch(Mk(e)){case 1:var i=DU;break;case 4:i=OU;break;default:i=jE}t=i.bind(null,e,t,n),i=void 0,!w5||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?n.addEventListener(e,t,{capture:!0,passive:i}):n.addEventListener(e,t,!0):i!==void 0?n.addEventListener(e,t,{passive:i}):n.addEventListener(e,t,!1)}function u_(n,e,t,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;a!==null;){if(s=vd(a),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}a=a.parentNode}}r=r.return}ck(function(){var u=o,c=HE(t),h=[];e:{var f=Uk.get(n);if(f!==void 0){var d=qE,v=n;switch(n){case"keypress":if(G2(t)===0)break e;case"keydown":case"keyup":d=JU;break;case"focusin":v="focus",d=n_;break;case"focusout":v="blur",d=n_;break;case"beforeblur":case"afterblur":d=n_;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=UT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=zU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=t8;break;case Fk:case Dk:case Ok:d=VU;break;case Bk:d=r8;break;case"scroll":d=BU;break;case"wheel":d=o8;break;case"copy":case"cut":case"paste":d=jU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=HT}var y=(e&4)!==0,w=!y&&n==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var x=u,_;x!==null;){_=x;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,g!==null&&(E=vv(x,g),E!=null&&y.push(Mv(x,E,_)))),w)break;x=x.return}0<y.length&&(f=new d(f,v,null,t,c),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=n==="mouseover"||n==="pointerover",d=n==="mouseout"||n==="pointerout",f&&t!==y5&&(v=t.relatedTarget||t.fromElement)&&(vd(v)||v[Fc]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(v=t.relatedTarget||t.toElement,d=u,v=v?vd(v):null,v!==null&&(w=Zd(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(d=null,v=u),d!==v)){if(y=UT,E="onMouseLeave",g="onMouseEnter",x="mouse",(n==="pointerout"||n==="pointerover")&&(y=HT,E="onPointerLeave",g="onPointerEnter",x="pointer"),w=d==null?f:wm(d),_=v==null?f:wm(v),f=new y(E,x+"leave",d,t,c),f.target=w,f.relatedTarget=_,E=null,vd(c)===u&&(y=new y(g,x+"enter",v,t,c),y.target=_,y.relatedTarget=w,E=y),w=E,d&&v)t:{for(y=d,g=v,x=0,_=y;_;_=Rp(_))x++;for(_=0,E=g;E;E=Rp(E))_++;for(;0<x-_;)y=Rp(y),x--;for(;0<_-x;)g=Rp(g),_--;for(;x--;){if(y===g||g!==null&&y===g.alternate)break t;y=Rp(y),g=Rp(g)}y=null}else y=null;d!==null&&JT(h,f,d,y,!1),v!==null&&w!==null&&JT(h,w,v,y,!0)}}e:{if(f=u?wm(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var C=f8;else if(WT(f))if(Lk)C=g8;else{C=p8;var I=d8}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=m8);if(C&&(C=C(n,u))){Pk(h,C,t,c);break e}I&&I(n,f,u),n==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&d5(f,"number",f.value)}switch(I=u?wm(u):window,n){case"focusin":(WT(I)||I.contentEditable==="true")&&(ym=I,E5=u,W0=null);break;case"focusout":W0=E5=ym=null;break;case"mousedown":A5=!0;break;case"contextmenu":case"mouseup":case"dragend":A5=!1,YT(h,t,c);break;case"selectionchange":if(x8)break;case"keydown":case"keyup":YT(h,t,c)}var R;if(YE)e:{switch(n){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else vm?Tk(n,t)&&(L="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(L="onCompositionStart");L&&(Ak&&t.locale!=="ko"&&(vm||L!=="onCompositionStart"?L==="onCompositionEnd"&&vm&&(R=Ek()):(Gh=c,$E="value"in Gh?Gh.value:Gh.textContent,vm=!0)),I=Ax(u,L),0<I.length&&(L=new zT(L,n,null,t,c),h.push({event:L,listeners:I}),R?L.data=R:(R=Ck(t),R!==null&&(L.data=R)))),(R=a8?l8(n,t):u8(n,t))&&(u=Ax(u,"onBeforeInput"),0<u.length&&(c=new zT("onBeforeInput","beforeinput",null,t,c),h.push({event:c,listeners:u}),c.data=R))}zk(h,e)})}function Mv(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Ax(n,e){for(var t=e+"Capture",r=[];n!==null;){var i=n,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=vv(n,t),o!=null&&r.unshift(Mv(n,o,i)),o=vv(n,e),o!=null&&r.push(Mv(n,o,i))),n=n.return}return r}function Rp(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function JT(n,e,t,r,i){for(var o=e._reactName,s=[];t!==null&&t!==r;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=vv(t,o),l!=null&&s.unshift(Mv(t,l,a))):i||(l=vv(t,o),l!=null&&s.push(Mv(t,l,a)))),t=t.return}s.length!==0&&n.push({event:e,listeners:s})}var b8=/\r\n?/g,M8=/\u0000|\uFFFD/g;function QT(n){return(typeof n=="string"?n:""+n).replace(b8,`
`).replace(M8,"")}function yy(n,e,t){if(e=QT(e),QT(n)!==e&&t)throw Error(Lt(425))}function Tx(){}var T5=null,C5=null;function P5(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var L5=typeof setTimeout=="function"?setTimeout:void 0,E8=typeof clearTimeout=="function"?clearTimeout:void 0,eC=typeof Promise=="function"?Promise:void 0,A8=typeof queueMicrotask=="function"?queueMicrotask:typeof eC<"u"?function(n){return eC.resolve(null).then(n).catch(T8)}:L5;function T8(n){setTimeout(function(){throw n})}function c_(n,e){var t=e,r=0;do{var i=t.nextSibling;if(n.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){n.removeChild(i),wv(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);wv(e)}function ef(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function tC(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var wg=Math.random().toString(36).slice(2),_u="__reactFiber$"+wg,Ev="__reactProps$"+wg,Fc="__reactContainer$"+wg,R5="__reactEvents$"+wg,C8="__reactListeners$"+wg,P8="__reactHandles$"+wg;function vd(n){var e=n[_u];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Fc]||t[_u]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=tC(n);n!==null;){if(t=n[_u])return t;n=tC(n)}return e}n=t,t=n.parentNode}return null}function c1(n){return n=n[_u]||n[Fc],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function wm(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Lt(33))}function Pw(n){return n[Ev]||null}var k5=[],Sm=-1;function bf(n){return{current:n}}function oi(n){0>Sm||(n.current=k5[Sm],k5[Sm]=null,Sm--)}function qr(n,e){Sm++,k5[Sm]=n.current,n.current=e}var ff={},xs=bf(ff),ea=bf(!1),Fd=ff;function Jm(n,e){var t=n.type.contextTypes;if(!t)return ff;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in t)i[o]=e[o];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=i),i}function ta(n){return n=n.childContextTypes,n!=null}function Cx(){oi(ea),oi(xs)}function nC(n,e,t){if(xs.current!==ff)throw Error(Lt(168));qr(xs,e),qr(ea,t)}function Gk(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Lt(108,dU(n)||"Unknown",i));return Ai({},t,r)}function Px(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||ff,Fd=xs.current,qr(xs,n),qr(ea,ea.current),!0}function rC(n,e,t){var r=n.stateNode;if(!r)throw Error(Lt(169));t?(n=Gk(n,e,Fd),r.__reactInternalMemoizedMergedChildContext=n,oi(ea),oi(xs),qr(xs,n)):oi(ea),qr(ea,t)}var gc=null,Lw=!1,h_=!1;function Vk(n){gc===null?gc=[n]:gc.push(n)}function L8(n){Lw=!0,Vk(n)}function Mf(){if(!h_&&gc!==null){h_=!0;var n=0,e=Dr;try{var t=gc;for(Dr=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}gc=null,Lw=!1}catch(i){throw gc!==null&&(gc=gc.slice(n+1)),pk(GE,Mf),i}finally{Dr=e,h_=!1}}return null}var _m=[],bm=0,Lx=null,Rx=0,Qa=[],el=0,Dd=null,_c=1,bc="";function ad(n,e){_m[bm++]=Rx,_m[bm++]=Lx,Lx=n,Rx=e}function Wk(n,e,t){Qa[el++]=_c,Qa[el++]=bc,Qa[el++]=Dd,Dd=n;var r=_c;n=bc;var i=32-Bl(r)-1;r&=~(1<<i),t+=1;var o=32-Bl(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,_c=1<<32-Bl(e)+i|t<<i|r,bc=o+n}else _c=1<<o|t<<i|r,bc=n}function KE(n){n.return!==null&&(ad(n,1),Wk(n,1,0))}function JE(n){for(;n===Lx;)Lx=_m[--bm],_m[bm]=null,Rx=_m[--bm],_m[bm]=null;for(;n===Dd;)Dd=Qa[--el],Qa[el]=null,bc=Qa[--el],Qa[el]=null,_c=Qa[--el],Qa[el]=null}var _a=null,wa=null,hi=!1,Nl=null;function jk(n,e){var t=nl(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function iC(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,_a=n,wa=ef(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,_a=n,wa=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Dd!==null?{id:_c,overflow:bc}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=nl(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,_a=n,wa=null,!0):!1;default:return!1}}function I5(n){return(n.mode&1)!==0&&(n.flags&128)===0}function N5(n){if(hi){var e=wa;if(e){var t=e;if(!iC(n,e)){if(I5(n))throw Error(Lt(418));e=ef(t.nextSibling);var r=_a;e&&iC(n,e)?jk(r,t):(n.flags=n.flags&-4097|2,hi=!1,_a=n)}}else{if(I5(n))throw Error(Lt(418));n.flags=n.flags&-4097|2,hi=!1,_a=n}}}function oC(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;_a=n}function xy(n){if(n!==_a)return!1;if(!hi)return oC(n),hi=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!P5(n.type,n.memoizedProps)),e&&(e=wa)){if(I5(n))throw $k(),Error(Lt(418));for(;e;)jk(n,e),e=ef(e.nextSibling)}if(oC(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Lt(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){wa=ef(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}wa=null}}else wa=_a?ef(n.stateNode.nextSibling):null;return!0}function $k(){for(var n=wa;n;)n=ef(n.nextSibling)}function Qm(){wa=_a=null,hi=!1}function QE(n){Nl===null?Nl=[n]:Nl.push(n)}var R8=Vc.ReactCurrentBatchConfig;function Ll(n,e){if(n&&n.defaultProps){e=Ai({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var kx=bf(null),Ix=null,Mm=null,e3=null;function t3(){e3=Mm=Ix=null}function n3(n){var e=kx.current;oi(kx),n._currentValue=e}function F5(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Om(n,e){Ix=n,e3=Mm=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Qs=!0),n.firstContext=null)}function ll(n){var e=n._currentValue;if(e3!==n)if(n={context:n,memoizedValue:e,next:null},Mm===null){if(Ix===null)throw Error(Lt(308));Mm=n,Ix.dependencies={lanes:0,firstContext:n}}else Mm=Mm.next=n;return e}var yd=null;function r3(n){yd===null?yd=[n]:yd.push(n)}function qk(n,e,t,r){var i=e.interleaved;return i===null?(t.next=t,r3(e)):(t.next=i.next,i.next=t),e.interleaved=t,Dc(n,r)}function Dc(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Fh=!1;function i3(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xk(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Lc(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function tf(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,fr&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Dc(n,t)}return i=r.interleaved,i===null?(e.next=e,r3(r)):(e.next=i.next,i.next=e),r.interleaved=e,Dc(n,t)}function V2(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,VE(n,t)}}function sC(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?i=o=s:o=o.next=s,t=t.next}while(t!==null);o===null?i=o=e:o=o.next=e}else i=o=e;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Nx(n,e,t,r){var i=n.updateQueue;Fh=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,s===null?o=u:s.next=u,s=l;var c=n.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(o!==null){var h=i.baseState;s=0,c=u=l=null,a=o;do{var f=a.lane,d=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,y=a;switch(f=e,d=t,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(d,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(d,h,f):v,f==null)break e;h=Ai({},h,f);break e;case 2:Fh=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=d,l=h):c=c.next=d,s|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);Bd|=s,n.lanes=s,n.memoizedState=h}}function aC(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Lt(191,i));i.call(r)}}}var Yk=new q4.Component().refs;function D5(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Ai({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Rw={isMounted:function(n){return(n=n._reactInternals)?Zd(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Is(),i=rf(n),o=Lc(r,i);o.payload=e,t!=null&&(o.callback=t),e=tf(n,o,i),e!==null&&(Ul(e,n,i,r),V2(e,n,i))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Is(),i=rf(n),o=Lc(r,i);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=tf(n,o,i),e!==null&&(Ul(e,n,i,r),V2(e,n,i))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Is(),r=rf(n),i=Lc(t,r);i.tag=2,e!=null&&(i.callback=e),e=tf(n,i,r),e!==null&&(Ul(e,n,r,t),V2(e,n,r))}};function lC(n,e,t,r,i,o,s){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!_v(t,r)||!_v(i,o):!0}function Zk(n,e,t){var r=!1,i=ff,o=e.contextType;return typeof o=="object"&&o!==null?o=ll(o):(i=ta(e)?Fd:xs.current,r=e.contextTypes,o=(r=r!=null)?Jm(n,i):ff),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Rw,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=i,n.__reactInternalMemoizedMaskedChildContext=o),e}function uC(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Rw.enqueueReplaceState(e,e.state,null)}function O5(n,e,t,r){var i=n.stateNode;i.props=t,i.state=n.memoizedState,i.refs=Yk,i3(n);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ll(o):(o=ta(e)?Fd:xs.current,i.context=Jm(n,o)),i.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(D5(n,e,o,t),i.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Rw.enqueueReplaceState(i,i.state,null),Nx(n,t,i,r),i.state=n.memoizedState),typeof i.componentDidMount=="function"&&(n.flags|=4194308)}function r0(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Lt(309));var r=t.stateNode}if(!r)throw Error(Lt(147,n));var i=r,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;a===Yk&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof n!="string")throw Error(Lt(284));if(!t._owner)throw Error(Lt(290,n))}return n}function wy(n,e){throw n=Object.prototype.toString.call(e),Error(Lt(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function cC(n){var e=n._init;return e(n._payload)}function Kk(n){function e(g,x){if(n){var _=g.deletions;_===null?(g.deletions=[x],g.flags|=16):_.push(x)}}function t(g,x){if(!n)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function r(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function i(g,x){return g=of(g,x),g.index=0,g.sibling=null,g}function o(g,x,_){return g.index=_,n?(_=g.alternate,_!==null?(_=_.index,_<x?(g.flags|=2,x):_):(g.flags|=2,x)):(g.flags|=1048576,x)}function s(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,x,_,E){return x===null||x.tag!==6?(x=y_(_,g.mode,E),x.return=g,x):(x=i(x,_),x.return=g,x)}function l(g,x,_,E){var C=_.type;return C===gm?c(g,x,_.props.children,E,_.key):x!==null&&(x.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Nh&&cC(C)===x.type)?(E=i(x,_.props),E.ref=r0(g,x,_),E.return=g,E):(E=Y2(_.type,_.key,_.props,null,g.mode,E),E.ref=r0(g,x,_),E.return=g,E)}function u(g,x,_,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==_.containerInfo||x.stateNode.implementation!==_.implementation?(x=x_(_,g.mode,E),x.return=g,x):(x=i(x,_.children||[]),x.return=g,x)}function c(g,x,_,E,C){return x===null||x.tag!==7?(x=Cd(_,g.mode,E,C),x.return=g,x):(x=i(x,_),x.return=g,x)}function h(g,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return x=y_(""+x,g.mode,_),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case uy:return _=Y2(x.type,x.key,x.props,null,g.mode,_),_.ref=r0(g,null,x),_.return=g,_;case mm:return x=x_(x,g.mode,_),x.return=g,x;case Nh:var E=x._init;return h(g,E(x._payload),_)}if(R0(x)||Jg(x))return x=Cd(x,g.mode,_,null),x.return=g,x;wy(g,x)}return null}function f(g,x,_,E){var C=x!==null?x.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return C!==null?null:a(g,x,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case uy:return _.key===C?l(g,x,_,E):null;case mm:return _.key===C?u(g,x,_,E):null;case Nh:return C=_._init,f(g,x,C(_._payload),E)}if(R0(_)||Jg(_))return C!==null?null:c(g,x,_,E,null);wy(g,_)}return null}function d(g,x,_,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return g=g.get(_)||null,a(x,g,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case uy:return g=g.get(E.key===null?_:E.key)||null,l(x,g,E,C);case mm:return g=g.get(E.key===null?_:E.key)||null,u(x,g,E,C);case Nh:var I=E._init;return d(g,x,_,I(E._payload),C)}if(R0(E)||Jg(E))return g=g.get(_)||null,c(x,g,E,C,null);wy(x,E)}return null}function v(g,x,_,E){for(var C=null,I=null,R=x,L=x=0,k=null;R!==null&&L<_.length;L++){R.index>L?(k=R,R=null):k=R.sibling;var D=f(g,R,_[L],E);if(D===null){R===null&&(R=k);break}n&&R&&D.alternate===null&&e(g,R),x=o(D,x,L),I===null?C=D:I.sibling=D,I=D,R=k}if(L===_.length)return t(g,R),hi&&ad(g,L),C;if(R===null){for(;L<_.length;L++)R=h(g,_[L],E),R!==null&&(x=o(R,x,L),I===null?C=R:I.sibling=R,I=R);return hi&&ad(g,L),C}for(R=r(g,R);L<_.length;L++)k=d(R,g,L,_[L],E),k!==null&&(n&&k.alternate!==null&&R.delete(k.key===null?L:k.key),x=o(k,x,L),I===null?C=k:I.sibling=k,I=k);return n&&R.forEach(function(N){return e(g,N)}),hi&&ad(g,L),C}function y(g,x,_,E){var C=Jg(_);if(typeof C!="function")throw Error(Lt(150));if(_=C.call(_),_==null)throw Error(Lt(151));for(var I=C=null,R=x,L=x=0,k=null,D=_.next();R!==null&&!D.done;L++,D=_.next()){R.index>L?(k=R,R=null):k=R.sibling;var N=f(g,R,D.value,E);if(N===null){R===null&&(R=k);break}n&&R&&N.alternate===null&&e(g,R),x=o(N,x,L),I===null?C=N:I.sibling=N,I=N,R=k}if(D.done)return t(g,R),hi&&ad(g,L),C;if(R===null){for(;!D.done;L++,D=_.next())D=h(g,D.value,E),D!==null&&(x=o(D,x,L),I===null?C=D:I.sibling=D,I=D);return hi&&ad(g,L),C}for(R=r(g,R);!D.done;L++,D=_.next())D=d(R,g,L,D.value,E),D!==null&&(n&&D.alternate!==null&&R.delete(D.key===null?L:D.key),x=o(D,x,L),I===null?C=D:I.sibling=D,I=D);return n&&R.forEach(function(B){return e(g,B)}),hi&&ad(g,L),C}function w(g,x,_,E){if(typeof _=="object"&&_!==null&&_.type===gm&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case uy:e:{for(var C=_.key,I=x;I!==null;){if(I.key===C){if(C=_.type,C===gm){if(I.tag===7){t(g,I.sibling),x=i(I,_.props.children),x.return=g,g=x;break e}}else if(I.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Nh&&cC(C)===I.type){t(g,I.sibling),x=i(I,_.props),x.ref=r0(g,I,_),x.return=g,g=x;break e}t(g,I);break}else e(g,I);I=I.sibling}_.type===gm?(x=Cd(_.props.children,g.mode,E,_.key),x.return=g,g=x):(E=Y2(_.type,_.key,_.props,null,g.mode,E),E.ref=r0(g,x,_),E.return=g,g=E)}return s(g);case mm:e:{for(I=_.key;x!==null;){if(x.key===I)if(x.tag===4&&x.stateNode.containerInfo===_.containerInfo&&x.stateNode.implementation===_.implementation){t(g,x.sibling),x=i(x,_.children||[]),x.return=g,g=x;break e}else{t(g,x);break}else e(g,x);x=x.sibling}x=x_(_,g.mode,E),x.return=g,g=x}return s(g);case Nh:return I=_._init,w(g,x,I(_._payload),E)}if(R0(_))return v(g,x,_,E);if(Jg(_))return y(g,x,_,E);wy(g,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,x!==null&&x.tag===6?(t(g,x.sibling),x=i(x,_),x.return=g,g=x):(t(g,x),x=y_(_,g.mode,E),x.return=g,g=x),s(g)):t(g,x)}return w}var eg=Kk(!0),Jk=Kk(!1),h1={},Lu=bf(h1),Av=bf(h1),Tv=bf(h1);function xd(n){if(n===h1)throw Error(Lt(174));return n}function o3(n,e){switch(qr(Tv,e),qr(Av,n),qr(Lu,h1),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:m5(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=m5(e,n)}oi(Lu),qr(Lu,e)}function tg(){oi(Lu),oi(Av),oi(Tv)}function Qk(n){xd(Tv.current);var e=xd(Lu.current),t=m5(e,n.type);e!==t&&(qr(Av,n),qr(Lu,t))}function s3(n){Av.current===n&&(oi(Lu),oi(Av))}var wi=bf(0);function Fx(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var f_=[];function a3(){for(var n=0;n<f_.length;n++)f_[n]._workInProgressVersionPrimary=null;f_.length=0}var W2=Vc.ReactCurrentDispatcher,d_=Vc.ReactCurrentBatchConfig,Od=0,Mi=null,ho=null,ko=null,Dx=!1,j0=!1,Cv=0,k8=0;function rs(){throw Error(Lt(321))}function l3(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Gl(n[t],e[t]))return!1;return!0}function u3(n,e,t,r,i,o){if(Od=o,Mi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,W2.current=n===null||n.memoizedState===null?D8:O8,n=t(r,i),j0){o=0;do{if(j0=!1,Cv=0,25<=o)throw Error(Lt(301));o+=1,ko=ho=null,e.updateQueue=null,W2.current=B8,n=t(r,i)}while(j0)}if(W2.current=Ox,e=ho!==null&&ho.next!==null,Od=0,ko=ho=Mi=null,Dx=!1,e)throw Error(Lt(300));return n}function c3(){var n=Cv!==0;return Cv=0,n}function xu(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ko===null?Mi.memoizedState=ko=n:ko=ko.next=n,ko}function ul(){if(ho===null){var n=Mi.alternate;n=n!==null?n.memoizedState:null}else n=ho.next;var e=ko===null?Mi.memoizedState:ko.next;if(e!==null)ko=e,ho=n;else{if(n===null)throw Error(Lt(310));ho=n,n={memoizedState:ho.memoizedState,baseState:ho.baseState,baseQueue:ho.baseQueue,queue:ho.queue,next:null},ko===null?Mi.memoizedState=ko=n:ko=ko.next=n}return ko}function Pv(n,e){return typeof e=="function"?e(n):e}function p_(n){var e=ul(),t=e.queue;if(t===null)throw Error(Lt(311));t.lastRenderedReducer=n;var r=ho,i=r.baseQueue,o=t.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,t.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,l=null,u=o;do{var c=u.lane;if((Od&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:n(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,s=r):l=l.next=h,Mi.lanes|=c,Bd|=c}u=u.next}while(u!==null&&u!==o);l===null?s=r:l.next=a,Gl(r,e.memoizedState)||(Qs=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){i=n;do o=i.lane,Mi.lanes|=o,Bd|=o,i=i.next;while(i!==n)}else i===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function m_(n){var e=ul(),t=e.queue;if(t===null)throw Error(Lt(311));t.lastRenderedReducer=n;var r=t.dispatch,i=t.pending,o=e.memoizedState;if(i!==null){t.pending=null;var s=i=i.next;do o=n(o,s.action),s=s.next;while(s!==i);Gl(o,e.memoizedState)||(Qs=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,r]}function eI(){}function tI(n,e){var t=Mi,r=ul(),i=e(),o=!Gl(r.memoizedState,i);if(o&&(r.memoizedState=i,Qs=!0),r=r.queue,h3(iI.bind(null,t,r,n),[n]),r.getSnapshot!==e||o||ko!==null&&ko.memoizedState.tag&1){if(t.flags|=2048,Lv(9,rI.bind(null,t,r,i,e),void 0,null),Fo===null)throw Error(Lt(349));Od&30||nI(t,e,i)}return i}function nI(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Mi.updateQueue,e===null?(e={lastEffect:null,stores:null},Mi.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function rI(n,e,t,r){e.value=t,e.getSnapshot=r,oI(e)&&sI(n)}function iI(n,e,t){return t(function(){oI(e)&&sI(n)})}function oI(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Gl(n,t)}catch{return!0}}function sI(n){var e=Dc(n,1);e!==null&&Ul(e,n,1,-1)}function hC(n){var e=xu();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pv,lastRenderedState:n},e.queue=n,n=n.dispatch=F8.bind(null,Mi,n),[e.memoizedState,n]}function Lv(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=Mi.updateQueue,e===null?(e={lastEffect:null,stores:null},Mi.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function aI(){return ul().memoizedState}function j2(n,e,t,r){var i=xu();Mi.flags|=n,i.memoizedState=Lv(1|e,t,void 0,r===void 0?null:r)}function kw(n,e,t,r){var i=ul();r=r===void 0?null:r;var o=void 0;if(ho!==null){var s=ho.memoizedState;if(o=s.destroy,r!==null&&l3(r,s.deps)){i.memoizedState=Lv(e,t,o,r);return}}Mi.flags|=n,i.memoizedState=Lv(1|e,t,o,r)}function fC(n,e){return j2(8390656,8,n,e)}function h3(n,e){return kw(2048,8,n,e)}function lI(n,e){return kw(4,2,n,e)}function uI(n,e){return kw(4,4,n,e)}function cI(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function hI(n,e,t){return t=t!=null?t.concat([n]):null,kw(4,4,cI.bind(null,e,n),t)}function f3(){}function fI(n,e){var t=ul();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&l3(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function dI(n,e){var t=ul();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&l3(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function pI(n,e,t){return Od&21?(Gl(t,e)||(t=vk(),Mi.lanes|=t,Bd|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Qs=!0),n.memoizedState=t)}function I8(n,e){var t=Dr;Dr=t!==0&&4>t?t:4,n(!0);var r=d_.transition;d_.transition={};try{n(!1),e()}finally{Dr=t,d_.transition=r}}function mI(){return ul().memoizedState}function N8(n,e,t){var r=rf(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},gI(n))vI(e,t);else if(t=qk(n,e,t,r),t!==null){var i=Is();Ul(t,n,r,i),yI(t,e,r)}}function F8(n,e,t){var r=rf(n),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(gI(n))vI(e,i);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,t);if(i.hasEagerState=!0,i.eagerState=a,Gl(a,s)){var l=e.interleaved;l===null?(i.next=i,r3(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}t=qk(n,e,i,r),t!==null&&(i=Is(),Ul(t,n,r,i),yI(t,e,r))}}function gI(n){var e=n.alternate;return n===Mi||e!==null&&e===Mi}function vI(n,e){j0=Dx=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function yI(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,VE(n,t)}}var Ox={readContext:ll,useCallback:rs,useContext:rs,useEffect:rs,useImperativeHandle:rs,useInsertionEffect:rs,useLayoutEffect:rs,useMemo:rs,useReducer:rs,useRef:rs,useState:rs,useDebugValue:rs,useDeferredValue:rs,useTransition:rs,useMutableSource:rs,useSyncExternalStore:rs,useId:rs,unstable_isNewReconciler:!1},D8={readContext:ll,useCallback:function(n,e){return xu().memoizedState=[n,e===void 0?null:e],n},useContext:ll,useEffect:fC,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,j2(4194308,4,cI.bind(null,e,n),t)},useLayoutEffect:function(n,e){return j2(4194308,4,n,e)},useInsertionEffect:function(n,e){return j2(4,2,n,e)},useMemo:function(n,e){var t=xu();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=xu();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=N8.bind(null,Mi,n),[r.memoizedState,n]},useRef:function(n){var e=xu();return n={current:n},e.memoizedState=n},useState:hC,useDebugValue:f3,useDeferredValue:function(n){return xu().memoizedState=n},useTransition:function(){var n=hC(!1),e=n[0];return n=I8.bind(null,n[1]),xu().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=Mi,i=xu();if(hi){if(t===void 0)throw Error(Lt(407));t=t()}else{if(t=e(),Fo===null)throw Error(Lt(349));Od&30||nI(r,e,t)}i.memoizedState=t;var o={value:t,getSnapshot:e};return i.queue=o,fC(iI.bind(null,r,o,n),[n]),r.flags|=2048,Lv(9,rI.bind(null,r,o,t,e),void 0,null),t},useId:function(){var n=xu(),e=Fo.identifierPrefix;if(hi){var t=bc,r=_c;t=(r&~(1<<32-Bl(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Cv++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=k8++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},O8={readContext:ll,useCallback:fI,useContext:ll,useEffect:h3,useImperativeHandle:hI,useInsertionEffect:lI,useLayoutEffect:uI,useMemo:dI,useReducer:p_,useRef:aI,useState:function(){return p_(Pv)},useDebugValue:f3,useDeferredValue:function(n){var e=ul();return pI(e,ho.memoizedState,n)},useTransition:function(){var n=p_(Pv)[0],e=ul().memoizedState;return[n,e]},useMutableSource:eI,useSyncExternalStore:tI,useId:mI,unstable_isNewReconciler:!1},B8={readContext:ll,useCallback:fI,useContext:ll,useEffect:h3,useImperativeHandle:hI,useInsertionEffect:lI,useLayoutEffect:uI,useMemo:dI,useReducer:m_,useRef:aI,useState:function(){return m_(Pv)},useDebugValue:f3,useDeferredValue:function(n){var e=ul();return ho===null?e.memoizedState=n:pI(e,ho.memoizedState,n)},useTransition:function(){var n=m_(Pv)[0],e=ul().memoizedState;return[n,e]},useMutableSource:eI,useSyncExternalStore:tI,useId:mI,unstable_isNewReconciler:!1};function ng(n,e){try{var t="",r=e;do t+=fU(r),r=r.return;while(r);var i=t}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:i,digest:null}}function g_(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function B5(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var U8=typeof WeakMap=="function"?WeakMap:Map;function xI(n,e,t){t=Lc(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Ux||(Ux=!0,X5=r),B5(n,e)},t}function wI(n,e,t){t=Lc(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;t.payload=function(){return r(i)},t.callback=function(){B5(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){B5(n,e),typeof r!="function"&&(nf===null?nf=new Set([this]):nf.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),t}function dC(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new U8;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(t)||(i.add(t),n=Q8.bind(null,n,e,t),e.then(n,n))}function pC(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function mC(n,e,t,r,i){return n.mode&1?(n.flags|=65536,n.lanes=i,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Lc(-1,1),e.tag=2,tf(t,e,1))),t.lanes|=1),n)}var z8=Vc.ReactCurrentOwner,Qs=!1;function Ps(n,e,t,r){e.child=n===null?Jk(e,null,t,r):eg(e,n.child,t,r)}function gC(n,e,t,r,i){t=t.render;var o=e.ref;return Om(e,i),r=u3(n,e,t,r,o,i),t=c3(),n!==null&&!Qs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Oc(n,e,i)):(hi&&t&&KE(e),e.flags|=1,Ps(n,e,r,i),e.child)}function vC(n,e,t,r,i){if(n===null){var o=t.type;return typeof o=="function"&&!w3(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,SI(n,e,o,r,i)):(n=Y2(t.type,null,r,e,e.mode,i),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,!(n.lanes&i)){var s=o.memoizedProps;if(t=t.compare,t=t!==null?t:_v,t(s,r)&&n.ref===e.ref)return Oc(n,e,i)}return e.flags|=1,n=of(o,r),n.ref=e.ref,n.return=e,e.child=n}function SI(n,e,t,r,i){if(n!==null){var o=n.memoizedProps;if(_v(o,r)&&n.ref===e.ref)if(Qs=!1,e.pendingProps=r=o,(n.lanes&i)!==0)n.flags&131072&&(Qs=!0);else return e.lanes=n.lanes,Oc(n,e,i)}return U5(n,e,t,r,i)}function _I(n,e,t){var r=e.pendingProps,i=r.children,o=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},qr(Am,xa),xa|=t;else{if(!(t&1073741824))return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,qr(Am,xa),xa|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:t,qr(Am,xa),xa|=r}else o!==null?(r=o.baseLanes|t,e.memoizedState=null):r=t,qr(Am,xa),xa|=r;return Ps(n,e,i,t),e.child}function bI(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function U5(n,e,t,r,i){var o=ta(t)?Fd:xs.current;return o=Jm(e,o),Om(e,i),t=u3(n,e,t,r,o,i),r=c3(),n!==null&&!Qs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~i,Oc(n,e,i)):(hi&&r&&KE(e),e.flags|=1,Ps(n,e,t,i),e.child)}function yC(n,e,t,r,i){if(ta(t)){var o=!0;Px(e)}else o=!1;if(Om(e,i),e.stateNode===null)$2(n,e),Zk(e,t,r),O5(e,t,r,i),r=!0;else if(n===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,u=t.contextType;typeof u=="object"&&u!==null?u=ll(u):(u=ta(t)?Fd:xs.current,u=Jm(e,u));var c=t.getDerivedStateFromProps,h=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==u)&&uC(e,s,r,u),Fh=!1;var f=e.memoizedState;s.state=f,Nx(e,r,s,i),l=e.memoizedState,a!==r||f!==l||ea.current||Fh?(typeof c=="function"&&(D5(e,t,c,r),l=e.memoizedState),(a=Fh||lC(e,t,a,r,f,l,u))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=u,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,Xk(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ll(e.type,a),s.props=u,h=e.pendingProps,f=s.context,l=t.contextType,typeof l=="object"&&l!==null?l=ll(l):(l=ta(t)?Fd:xs.current,l=Jm(e,l));var d=t.getDerivedStateFromProps;(c=typeof d=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==h||f!==l)&&uC(e,s,r,l),Fh=!1,f=e.memoizedState,s.state=f,Nx(e,r,s,i);var v=e.memoizedState;a!==h||f!==v||ea.current||Fh?(typeof d=="function"&&(D5(e,t,d,r),v=e.memoizedState),(u=Fh||lC(e,t,u,r,f,v,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,v,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,v,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),s.props=r,s.state=v,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&f===n.memoizedState||(e.flags|=1024),r=!1)}return z5(n,e,t,r,o,i)}function z5(n,e,t,r,i,o){bI(n,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&rC(e,t,!1),Oc(n,e,o);r=e.stateNode,z8.current=e;var a=s&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&s?(e.child=eg(e,n.child,null,o),e.child=eg(e,null,a,o)):Ps(n,e,a,o),e.memoizedState=r.state,i&&rC(e,t,!0),e.child}function MI(n){var e=n.stateNode;e.pendingContext?nC(n,e.pendingContext,e.pendingContext!==e.context):e.context&&nC(n,e.context,!1),o3(n,e.containerInfo)}function xC(n,e,t,r,i){return Qm(),QE(i),e.flags|=256,Ps(n,e,t,r),e.child}var H5={dehydrated:null,treeContext:null,retryLane:0};function G5(n){return{baseLanes:n,cachePool:null,transitions:null}}function EI(n,e,t){var r=e.pendingProps,i=wi.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=n!==null&&n.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(i|=1),qr(wi,i&1),n===null)return N5(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,n=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Fw(s,r,0,null),n=Cd(n,r,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=G5(t),e.memoizedState=H5,n):d3(e,s));if(i=n.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return H8(n,e,s,r,a,i,t);if(o){o=r.fallback,s=e.mode,i=n.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=of(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=of(a,o):(o=Cd(o,s,t,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=n.child.memoizedState,s=s===null?G5(t):{baseLanes:s.baseLanes|t,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=n.childLanes&~t,e.memoizedState=H5,r}return o=n.child,n=o.sibling,r=of(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function d3(n,e){return e=Fw({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Sy(n,e,t,r){return r!==null&&QE(r),eg(e,n.child,null,t),n=d3(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function H8(n,e,t,r,i,o,s){if(t)return e.flags&256?(e.flags&=-257,r=g_(Error(Lt(422))),Sy(n,e,s,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Fw({mode:"visible",children:r.children},i,0,null),o=Cd(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&eg(e,n.child,null,s),e.child.memoizedState=G5(s),e.memoizedState=H5,o);if(!(e.mode&1))return Sy(n,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(Lt(419)),r=g_(o,r,void 0),Sy(n,e,s,r)}if(a=(s&n.childLanes)!==0,Qs||a){if(r=Fo,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Dc(n,i),Ul(r,n,i,-1))}return x3(),r=g_(Error(Lt(421))),Sy(n,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=n.child,e=ez.bind(null,n),i._reactRetry=e,null):(n=o.treeContext,wa=ef(i.nextSibling),_a=e,hi=!0,Nl=null,n!==null&&(Qa[el++]=_c,Qa[el++]=bc,Qa[el++]=Dd,_c=n.id,bc=n.overflow,Dd=e),e=d3(e,r.children),e.flags|=4096,e)}function wC(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),F5(n.return,e,t)}function v_(n,e,t,r,i){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=t,o.tailMode=i)}function AI(n,e,t){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Ps(n,e,r.children,t),r=wi.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&wC(n,t,e);else if(n.tag===19)wC(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(qr(wi,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(t=e.child,i=null;t!==null;)n=t.alternate,n!==null&&Fx(n)===null&&(i=t),t=t.sibling;t=i,t===null?(i=e.child,e.child=null):(i=t.sibling,t.sibling=null),v_(e,!1,i,t,o);break;case"backwards":for(t=null,i=e.child,e.child=null;i!==null;){if(n=i.alternate,n!==null&&Fx(n)===null){e.child=i;break}n=i.sibling,i.sibling=t,t=i,i=n}v_(e,!0,t,null,o);break;case"together":v_(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $2(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Oc(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Bd|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Lt(153));if(e.child!==null){for(n=e.child,t=of(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=of(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function G8(n,e,t){switch(e.tag){case 3:MI(e),Qm();break;case 5:Qk(e);break;case 1:ta(e.type)&&Px(e);break;case 4:o3(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;qr(kx,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(qr(wi,wi.current&1),e.flags|=128,null):t&e.child.childLanes?EI(n,e,t):(qr(wi,wi.current&1),n=Oc(n,e,t),n!==null?n.sibling:null);qr(wi,wi.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return AI(n,e,t);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),qr(wi,wi.current),r)break;return null;case 22:case 23:return e.lanes=0,_I(n,e,t)}return Oc(n,e,t)}var TI,V5,CI,PI;TI=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};V5=function(){};CI=function(n,e,t,r){var i=n.memoizedProps;if(i!==r){n=e.stateNode,xd(Lu.current);var o=null;switch(t){case"input":i=h5(n,i),r=h5(n,r),o=[];break;case"select":i=Ai({},i,{value:void 0}),r=Ai({},r,{value:void 0}),o=[];break;case"textarea":i=p5(n,i),r=p5(n,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=Tx)}g5(t,r);var s;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(s in a)a.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(mv.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(t||(t={}),t[s]=l[s])}else t||(o||(o=[]),o.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(o=o||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(mv.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Qr("scroll",n),o||a===l||(o=[])):(o=o||[]).push(u,l))}t&&(o=o||[]).push("style",t);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};PI=function(n,e,t,r){t!==r&&(e.flags|=4)};function i0(n,e){if(!hi)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function is(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=n,i=i.sibling;else for(i=n.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=n,i=i.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function V8(n,e,t){var r=e.pendingProps;switch(JE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return is(e),null;case 1:return ta(e.type)&&Cx(),is(e),null;case 3:return r=e.stateNode,tg(),oi(ea),oi(xs),a3(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(xy(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nl!==null&&(K5(Nl),Nl=null))),V5(n,e),is(e),null;case 5:s3(e);var i=xd(Tv.current);if(t=e.type,n!==null&&e.stateNode!=null)CI(n,e,t,r,i),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Lt(166));return is(e),null}if(n=xd(Lu.current),xy(e)){r=e.stateNode,t=e.type;var o=e.memoizedProps;switch(r[_u]=e,r[Ev]=o,n=(e.mode&1)!==0,t){case"dialog":Qr("cancel",r),Qr("close",r);break;case"iframe":case"object":case"embed":Qr("load",r);break;case"video":case"audio":for(i=0;i<I0.length;i++)Qr(I0[i],r);break;case"source":Qr("error",r);break;case"img":case"image":case"link":Qr("error",r),Qr("load",r);break;case"details":Qr("toggle",r);break;case"input":PT(r,o),Qr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Qr("invalid",r);break;case"textarea":RT(r,o),Qr("invalid",r)}g5(t,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&yy(r.textContent,a,n),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&yy(r.textContent,a,n),i=["children",""+a]):mv.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Qr("scroll",r)}switch(t){case"input":cy(r),LT(r,o,!0);break;case"textarea":cy(r),kT(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=Tx)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=nk(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=s.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=s.createElement(t,{is:r.is}):(n=s.createElement(t),t==="select"&&(s=n,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):n=s.createElementNS(n,t),n[_u]=e,n[Ev]=r,TI(n,e,!1,!1),e.stateNode=n;e:{switch(s=v5(t,r),t){case"dialog":Qr("cancel",n),Qr("close",n),i=r;break;case"iframe":case"object":case"embed":Qr("load",n),i=r;break;case"video":case"audio":for(i=0;i<I0.length;i++)Qr(I0[i],n);i=r;break;case"source":Qr("error",n),i=r;break;case"img":case"image":case"link":Qr("error",n),Qr("load",n),i=r;break;case"details":Qr("toggle",n),i=r;break;case"input":PT(n,r),i=h5(n,r),Qr("invalid",n);break;case"option":i=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},i=Ai({},r,{value:void 0}),Qr("invalid",n);break;case"textarea":RT(n,r),i=p5(n,r),Qr("invalid",n);break;default:i=r}g5(t,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="style"?ok(n,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&rk(n,l)):o==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&gv(n,l):typeof l=="number"&&gv(n,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(mv.hasOwnProperty(o)?l!=null&&o==="onScroll"&&Qr("scroll",n):l!=null&&OE(n,o,l,s))}switch(t){case"input":cy(n),LT(n,r,!1);break;case"textarea":cy(n),kT(n);break;case"option":r.value!=null&&n.setAttribute("value",""+hf(r.value));break;case"select":n.multiple=!!r.multiple,o=r.value,o!=null?Im(n,!!r.multiple,o,!1):r.defaultValue!=null&&Im(n,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(n.onclick=Tx)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return is(e),null;case 6:if(n&&e.stateNode!=null)PI(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Lt(166));if(t=xd(Tv.current),xd(Lu.current),xy(e)){if(r=e.stateNode,t=e.memoizedProps,r[_u]=e,(o=r.nodeValue!==t)&&(n=_a,n!==null))switch(n.tag){case 3:yy(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&yy(r.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[_u]=e,e.stateNode=r}return is(e),null;case 13:if(oi(wi),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(hi&&wa!==null&&e.mode&1&&!(e.flags&128))$k(),Qm(),e.flags|=98560,o=!1;else if(o=xy(e),r!==null&&r.dehydrated!==null){if(n===null){if(!o)throw Error(Lt(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Lt(317));o[_u]=e}else Qm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;is(e),o=!1}else Nl!==null&&(K5(Nl),Nl=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||wi.current&1?fo===0&&(fo=3):x3())),e.updateQueue!==null&&(e.flags|=4),is(e),null);case 4:return tg(),V5(n,e),n===null&&bv(e.stateNode.containerInfo),is(e),null;case 10:return n3(e.type._context),is(e),null;case 17:return ta(e.type)&&Cx(),is(e),null;case 19:if(oi(wi),o=e.memoizedState,o===null)return is(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)i0(o,!1);else{if(fo!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(s=Fx(n),s!==null){for(e.flags|=128,i0(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)o=t,n=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,n=s.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return qr(wi,wi.current&1|2),e.child}n=n.sibling}o.tail!==null&&Vi()>rg&&(e.flags|=128,r=!0,i0(o,!1),e.lanes=4194304)}else{if(!r)if(n=Fx(s),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),i0(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!hi)return is(e),null}else 2*Vi()-o.renderingStartTime>rg&&t!==1073741824&&(e.flags|=128,r=!0,i0(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(t=o.last,t!==null?t.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Vi(),e.sibling=null,t=wi.current,qr(wi,r?t&1|2:t&1),e):(is(e),null);case 22:case 23:return y3(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?xa&1073741824&&(is(e),e.subtreeFlags&6&&(e.flags|=8192)):is(e),null;case 24:return null;case 25:return null}throw Error(Lt(156,e.tag))}function W8(n,e){switch(JE(e),e.tag){case 1:return ta(e.type)&&Cx(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return tg(),oi(ea),oi(xs),a3(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return s3(e),null;case 13:if(oi(wi),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Lt(340));Qm()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return oi(wi),null;case 4:return tg(),null;case 10:return n3(e.type._context),null;case 22:case 23:return y3(),null;case 24:return null;default:return null}}var _y=!1,ds=!1,j8=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function Em(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){ki(n,e,r)}else t.current=null}function W5(n,e,t){try{t()}catch(r){ki(n,e,r)}}var SC=!1;function $8(n,e){if(T5=Mx,n=Ik(),ZE(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var s=0,a=-1,l=-1,u=0,c=0,h=n,f=null;t:for(;;){for(var d;h!==t||i!==0&&h.nodeType!==3||(a=s+i),h!==o||r!==0&&h.nodeType!==3||(l=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===n)break t;if(f===t&&++u===i&&(a=s),f===o&&++c===r&&(l=s),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(C5={focusedElem:n,selectionRange:t},Mx=!1,Kt=e;Kt!==null;)if(e=Kt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,Kt=n;else for(;Kt!==null;){e=Kt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,w=v.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:Ll(e.type,y),w);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Lt(163))}}catch(E){ki(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,Kt=n;break}Kt=e.return}return v=SC,SC=!1,v}function $0(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&n)===n){var o=i.destroy;i.destroy=void 0,o!==void 0&&W5(e,t,o)}i=i.next}while(i!==r)}}function Iw(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function j5(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function LI(n){var e=n.alternate;e!==null&&(n.alternate=null,LI(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[_u],delete e[Ev],delete e[R5],delete e[C8],delete e[P8])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function RI(n){return n.tag===5||n.tag===3||n.tag===4}function _C(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||RI(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function $5(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Tx));else if(r!==4&&(n=n.child,n!==null))for($5(n,e,t),n=n.sibling;n!==null;)$5(n,e,t),n=n.sibling}function q5(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(q5(n,e,t),n=n.sibling;n!==null;)q5(n,e,t),n=n.sibling}var jo=null,Il=!1;function xh(n,e,t){for(t=t.child;t!==null;)kI(n,e,t),t=t.sibling}function kI(n,e,t){if(Pu&&typeof Pu.onCommitFiberUnmount=="function")try{Pu.onCommitFiberUnmount(Ew,t)}catch{}switch(t.tag){case 5:ds||Em(t,e);case 6:var r=jo,i=Il;jo=null,xh(n,e,t),jo=r,Il=i,jo!==null&&(Il?(n=jo,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):jo.removeChild(t.stateNode));break;case 18:jo!==null&&(Il?(n=jo,t=t.stateNode,n.nodeType===8?c_(n.parentNode,t):n.nodeType===1&&c_(n,t),wv(n)):c_(jo,t.stateNode));break;case 4:r=jo,i=Il,jo=t.stateNode.containerInfo,Il=!0,xh(n,e,t),jo=r,Il=i;break;case 0:case 11:case 14:case 15:if(!ds&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&W5(t,e,s),i=i.next}while(i!==r)}xh(n,e,t);break;case 1:if(!ds&&(Em(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){ki(t,e,a)}xh(n,e,t);break;case 21:xh(n,e,t);break;case 22:t.mode&1?(ds=(r=ds)||t.memoizedState!==null,xh(n,e,t),ds=r):xh(n,e,t);break;default:xh(n,e,t)}}function bC(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new j8),e.forEach(function(r){var i=tz.bind(null,n,r);t.has(r)||(t.add(r),r.then(i,i))})}}function _l(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var o=n,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:jo=a.stateNode,Il=!1;break e;case 3:jo=a.stateNode.containerInfo,Il=!0;break e;case 4:jo=a.stateNode.containerInfo,Il=!0;break e}a=a.return}if(jo===null)throw Error(Lt(160));kI(o,s,i),jo=null,Il=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ki(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)II(e,n),e=e.sibling}function II(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(_l(e,n),gu(n),r&4){try{$0(3,n,n.return),Iw(3,n)}catch(y){ki(n,n.return,y)}try{$0(5,n,n.return)}catch(y){ki(n,n.return,y)}}break;case 1:_l(e,n),gu(n),r&512&&t!==null&&Em(t,t.return);break;case 5:if(_l(e,n),gu(n),r&512&&t!==null&&Em(t,t.return),n.flags&32){var i=n.stateNode;try{gv(i,"")}catch(y){ki(n,n.return,y)}}if(r&4&&(i=n.stateNode,i!=null)){var o=n.memoizedProps,s=t!==null?t.memoizedProps:o,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&ek(i,o),v5(a,s);var u=v5(a,o);for(s=0;s<l.length;s+=2){var c=l[s],h=l[s+1];c==="style"?ok(i,h):c==="dangerouslySetInnerHTML"?rk(i,h):c==="children"?gv(i,h):OE(i,c,h,u)}switch(a){case"input":f5(i,o);break;case"textarea":tk(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var d=o.value;d!=null?Im(i,!!o.multiple,d,!1):f!==!!o.multiple&&(o.defaultValue!=null?Im(i,!!o.multiple,o.defaultValue,!0):Im(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ev]=o}catch(y){ki(n,n.return,y)}}break;case 6:if(_l(e,n),gu(n),r&4){if(n.stateNode===null)throw Error(Lt(162));i=n.stateNode,o=n.memoizedProps;try{i.nodeValue=o}catch(y){ki(n,n.return,y)}}break;case 3:if(_l(e,n),gu(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{wv(e.containerInfo)}catch(y){ki(n,n.return,y)}break;case 4:_l(e,n),gu(n);break;case 13:_l(e,n),gu(n),i=n.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(g3=Vi())),r&4&&bC(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(ds=(u=ds)||c,_l(e,n),ds=u):_l(e,n),gu(n),r&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!c&&n.mode&1)for(Kt=n,c=n.child;c!==null;){for(h=Kt=c;Kt!==null;){switch(f=Kt,d=f.child,f.tag){case 0:case 11:case 14:case 15:$0(4,f,f.return);break;case 1:Em(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,t=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){ki(r,t,y)}}break;case 5:Em(f,f.return);break;case 22:if(f.memoizedState!==null){EC(h);continue}}d!==null?(d.return=f,Kt=d):EC(h)}c=c.sibling}e:for(c=null,h=n;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=h.stateNode,l=h.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ik("display",s))}catch(y){ki(n,n.return,y)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(y){ki(n,n.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===n)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===n)break e;for(;h.sibling===null;){if(h.return===null||h.return===n)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:_l(e,n),gu(n),r&4&&bC(n);break;case 21:break;default:_l(e,n),gu(n)}}function gu(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(RI(t)){var r=t;break e}t=t.return}throw Error(Lt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(gv(i,""),r.flags&=-33);var o=_C(n);q5(n,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=_C(n);$5(n,a,s);break;default:throw Error(Lt(161))}}catch(l){ki(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function q8(n,e,t){Kt=n,NI(n)}function NI(n,e,t){for(var r=(n.mode&1)!==0;Kt!==null;){var i=Kt,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||_y;if(!s){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ds;a=_y;var u=ds;if(_y=s,(ds=l)&&!u)for(Kt=i;Kt!==null;)s=Kt,l=s.child,s.tag===22&&s.memoizedState!==null?AC(i):l!==null?(l.return=s,Kt=l):AC(i);for(;o!==null;)Kt=o,NI(o),o=o.sibling;Kt=i,_y=a,ds=u}MC(n)}else i.subtreeFlags&8772&&o!==null?(o.return=i,Kt=o):MC(n)}}function MC(n){for(;Kt!==null;){var e=Kt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ds||Iw(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ds)if(t===null)r.componentDidMount();else{var i=e.elementType===e.type?t.memoizedProps:Ll(e.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&aC(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}aC(e,s,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&wv(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Lt(163))}ds||e.flags&512&&j5(e)}catch(f){ki(e,e.return,f)}}if(e===n){Kt=null;break}if(t=e.sibling,t!==null){t.return=e.return,Kt=t;break}Kt=e.return}}function EC(n){for(;Kt!==null;){var e=Kt;if(e===n){Kt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,Kt=t;break}Kt=e.return}}function AC(n){for(;Kt!==null;){var e=Kt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Iw(4,e)}catch(l){ki(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){ki(e,i,l)}}var o=e.return;try{j5(e)}catch(l){ki(e,o,l)}break;case 5:var s=e.return;try{j5(e)}catch(l){ki(e,s,l)}}}catch(l){ki(e,e.return,l)}if(e===n){Kt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Kt=a;break}Kt=e.return}}var X8=Math.ceil,Bx=Vc.ReactCurrentDispatcher,p3=Vc.ReactCurrentOwner,sl=Vc.ReactCurrentBatchConfig,fr=0,Fo=null,eo=null,qo=0,xa=0,Am=bf(0),fo=0,Rv=null,Bd=0,Nw=0,m3=0,q0=null,Zs=null,g3=0,rg=1/0,pc=null,Ux=!1,X5=null,nf=null,by=!1,Vh=null,zx=0,X0=0,Y5=null,q2=-1,X2=0;function Is(){return fr&6?Vi():q2!==-1?q2:q2=Vi()}function rf(n){return n.mode&1?fr&2&&qo!==0?qo&-qo:R8.transition!==null?(X2===0&&(X2=vk()),X2):(n=Dr,n!==0||(n=window.event,n=n===void 0?16:Mk(n.type)),n):1}function Ul(n,e,t,r){if(50<X0)throw X0=0,Y5=null,Error(Lt(185));l1(n,t,r),(!(fr&2)||n!==Fo)&&(n===Fo&&(!(fr&2)&&(Nw|=t),fo===4&&Bh(n,qo)),na(n,r),t===1&&fr===0&&!(e.mode&1)&&(rg=Vi()+500,Lw&&Mf()))}function na(n,e){var t=n.callbackNode;RU(n,e);var r=bx(n,n===Fo?qo:0);if(r===0)t!==null&&FT(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&FT(t),e===1)n.tag===0?L8(TC.bind(null,n)):Vk(TC.bind(null,n)),A8(function(){!(fr&6)&&Mf()}),t=null;else{switch(yk(r)){case 1:t=GE;break;case 4:t=mk;break;case 16:t=_x;break;case 536870912:t=gk;break;default:t=_x}t=GI(t,FI.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function FI(n,e){if(q2=-1,X2=0,fr&6)throw Error(Lt(327));var t=n.callbackNode;if(Bm()&&n.callbackNode!==t)return null;var r=bx(n,n===Fo?qo:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=Hx(n,r);else{e=r;var i=fr;fr|=2;var o=OI();(Fo!==n||qo!==e)&&(pc=null,rg=Vi()+500,Td(n,e));do try{K8();break}catch(a){DI(n,a)}while(1);t3(),Bx.current=o,fr=i,eo!==null?e=0:(Fo=null,qo=0,e=fo)}if(e!==0){if(e===2&&(i=_5(n),i!==0&&(r=i,e=Z5(n,i))),e===1)throw t=Rv,Td(n,0),Bh(n,r),na(n,Vi()),t;if(e===6)Bh(n,r);else{if(i=n.current.alternate,!(r&30)&&!Y8(i)&&(e=Hx(n,r),e===2&&(o=_5(n),o!==0&&(r=o,e=Z5(n,o))),e===1))throw t=Rv,Td(n,0),Bh(n,r),na(n,Vi()),t;switch(n.finishedWork=i,n.finishedLanes=r,e){case 0:case 1:throw Error(Lt(345));case 2:ld(n,Zs,pc);break;case 3:if(Bh(n,r),(r&130023424)===r&&(e=g3+500-Vi(),10<e)){if(bx(n,0)!==0)break;if(i=n.suspendedLanes,(i&r)!==r){Is(),n.pingedLanes|=n.suspendedLanes&i;break}n.timeoutHandle=L5(ld.bind(null,n,Zs,pc),e);break}ld(n,Zs,pc);break;case 4:if(Bh(n,r),(r&4194240)===r)break;for(e=n.eventTimes,i=-1;0<r;){var s=31-Bl(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Vi()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*X8(r/1960))-r,10<r){n.timeoutHandle=L5(ld.bind(null,n,Zs,pc),r);break}ld(n,Zs,pc);break;case 5:ld(n,Zs,pc);break;default:throw Error(Lt(329))}}}return na(n,Vi()),n.callbackNode===t?FI.bind(null,n):null}function Z5(n,e){var t=q0;return n.current.memoizedState.isDehydrated&&(Td(n,e).flags|=256),n=Hx(n,e),n!==2&&(e=Zs,Zs=t,e!==null&&K5(e)),n}function K5(n){Zs===null?Zs=n:Zs.push.apply(Zs,n)}function Y8(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],o=i.getSnapshot;i=i.value;try{if(!Gl(o(),i))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bh(n,e){for(e&=~m3,e&=~Nw,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Bl(e),r=1<<t;n[t]=-1,e&=~r}}function TC(n){if(fr&6)throw Error(Lt(327));Bm();var e=bx(n,0);if(!(e&1))return na(n,Vi()),null;var t=Hx(n,e);if(n.tag!==0&&t===2){var r=_5(n);r!==0&&(e=r,t=Z5(n,r))}if(t===1)throw t=Rv,Td(n,0),Bh(n,e),na(n,Vi()),t;if(t===6)throw Error(Lt(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,ld(n,Zs,pc),na(n,Vi()),null}function v3(n,e){var t=fr;fr|=1;try{return n(e)}finally{fr=t,fr===0&&(rg=Vi()+500,Lw&&Mf())}}function Ud(n){Vh!==null&&Vh.tag===0&&!(fr&6)&&Bm();var e=fr;fr|=1;var t=sl.transition,r=Dr;try{if(sl.transition=null,Dr=1,n)return n()}finally{Dr=r,sl.transition=t,fr=e,!(fr&6)&&Mf()}}function y3(){xa=Am.current,oi(Am)}function Td(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,E8(t)),eo!==null)for(t=eo.return;t!==null;){var r=t;switch(JE(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cx();break;case 3:tg(),oi(ea),oi(xs),a3();break;case 5:s3(r);break;case 4:tg();break;case 13:oi(wi);break;case 19:oi(wi);break;case 10:n3(r.type._context);break;case 22:case 23:y3()}t=t.return}if(Fo=n,eo=n=of(n.current,null),qo=xa=e,fo=0,Rv=null,m3=Nw=Bd=0,Zs=q0=null,yd!==null){for(e=0;e<yd.length;e++)if(t=yd[e],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,o=t.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}t.pending=r}yd=null}return n}function DI(n,e){do{var t=eo;try{if(t3(),W2.current=Ox,Dx){for(var r=Mi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Dx=!1}if(Od=0,ko=ho=Mi=null,j0=!1,Cv=0,p3.current=null,t===null||t.return===null){fo=1,Rv=e,eo=null;break}e:{var o=n,s=t.return,a=t,l=e;if(e=qo,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=pC(s);if(d!==null){d.flags&=-257,mC(d,s,a,o,e),d.mode&1&&dC(o,u,e),e=d,l=u;var v=e.updateQueue;if(v===null){var y=new Set;y.add(l),e.updateQueue=y}else v.add(l);break e}else{if(!(e&1)){dC(o,u,e),x3();break e}l=Error(Lt(426))}}else if(hi&&a.mode&1){var w=pC(s);if(w!==null){!(w.flags&65536)&&(w.flags|=256),mC(w,s,a,o,e),QE(ng(l,a));break e}}o=l=ng(l,a),fo!==4&&(fo=2),q0===null?q0=[o]:q0.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=xI(o,l,e);sC(o,g);break e;case 1:a=l;var x=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(nf===null||!nf.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=wI(o,a,e);sC(o,E);break e}}o=o.return}while(o!==null)}UI(t)}catch(C){e=C,eo===t&&t!==null&&(eo=t=t.return);continue}break}while(1)}function OI(){var n=Bx.current;return Bx.current=Ox,n===null?Ox:n}function x3(){(fo===0||fo===3||fo===2)&&(fo=4),Fo===null||!(Bd&268435455)&&!(Nw&268435455)||Bh(Fo,qo)}function Hx(n,e){var t=fr;fr|=2;var r=OI();(Fo!==n||qo!==e)&&(pc=null,Td(n,e));do try{Z8();break}catch(i){DI(n,i)}while(1);if(t3(),fr=t,Bx.current=r,eo!==null)throw Error(Lt(261));return Fo=null,qo=0,fo}function Z8(){for(;eo!==null;)BI(eo)}function K8(){for(;eo!==null&&!_U();)BI(eo)}function BI(n){var e=HI(n.alternate,n,xa);n.memoizedProps=n.pendingProps,e===null?UI(n):eo=e,p3.current=null}function UI(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=W8(t,e),t!==null){t.flags&=32767,eo=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{fo=6,eo=null;return}}else if(t=V8(t,e,xa),t!==null){eo=t;return}if(e=e.sibling,e!==null){eo=e;return}eo=e=n}while(e!==null);fo===0&&(fo=5)}function ld(n,e,t){var r=Dr,i=sl.transition;try{sl.transition=null,Dr=1,J8(n,e,t,r)}finally{sl.transition=i,Dr=r}return null}function J8(n,e,t,r){do Bm();while(Vh!==null);if(fr&6)throw Error(Lt(327));t=n.finishedWork;var i=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Lt(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(kU(n,o),n===Fo&&(eo=Fo=null,qo=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||by||(by=!0,GI(_x,function(){return Bm(),null})),o=(t.flags&15990)!==0,t.subtreeFlags&15990||o){o=sl.transition,sl.transition=null;var s=Dr;Dr=1;var a=fr;fr|=4,p3.current=null,$8(n,t),II(t,n),y8(C5),Mx=!!T5,C5=T5=null,n.current=t,q8(t),bU(),fr=a,Dr=s,sl.transition=o}else n.current=t;if(by&&(by=!1,Vh=n,zx=i),o=n.pendingLanes,o===0&&(nf=null),AU(t.stateNode),na(n,Vi()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)i=e[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ux)throw Ux=!1,n=X5,X5=null,n;return zx&1&&n.tag!==0&&Bm(),o=n.pendingLanes,o&1?n===Y5?X0++:(X0=0,Y5=n):X0=0,Mf(),null}function Bm(){if(Vh!==null){var n=yk(zx),e=sl.transition,t=Dr;try{if(sl.transition=null,Dr=16>n?16:n,Vh===null)var r=!1;else{if(n=Vh,Vh=null,zx=0,fr&6)throw Error(Lt(331));var i=fr;for(fr|=4,Kt=n.current;Kt!==null;){var o=Kt,s=o.child;if(Kt.flags&16){var a=o.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Kt=u;Kt!==null;){var c=Kt;switch(c.tag){case 0:case 11:case 15:$0(8,c,o)}var h=c.child;if(h!==null)h.return=c,Kt=h;else for(;Kt!==null;){c=Kt;var f=c.sibling,d=c.return;if(LI(c),c===u){Kt=null;break}if(f!==null){f.return=d,Kt=f;break}Kt=d}}}var v=o.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}Kt=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,Kt=s;else e:for(;Kt!==null;){if(o=Kt,o.flags&2048)switch(o.tag){case 0:case 11:case 15:$0(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,Kt=g;break e}Kt=o.return}}var x=n.current;for(Kt=x;Kt!==null;){s=Kt;var _=s.child;if(s.subtreeFlags&2064&&_!==null)_.return=s,Kt=_;else e:for(s=x;Kt!==null;){if(a=Kt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Iw(9,a)}}catch(C){ki(a,a.return,C)}if(a===s){Kt=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,Kt=E;break e}Kt=a.return}}if(fr=i,Mf(),Pu&&typeof Pu.onPostCommitFiberRoot=="function")try{Pu.onPostCommitFiberRoot(Ew,n)}catch{}r=!0}return r}finally{Dr=t,sl.transition=e}}return!1}function CC(n,e,t){e=ng(t,e),e=xI(n,e,1),n=tf(n,e,1),e=Is(),n!==null&&(l1(n,1,e),na(n,e))}function ki(n,e,t){if(n.tag===3)CC(n,n,t);else for(;e!==null;){if(e.tag===3){CC(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(nf===null||!nf.has(r))){n=ng(t,n),n=wI(e,n,1),e=tf(e,n,1),n=Is(),e!==null&&(l1(e,1,n),na(e,n));break}}e=e.return}}function Q8(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Is(),n.pingedLanes|=n.suspendedLanes&t,Fo===n&&(qo&t)===t&&(fo===4||fo===3&&(qo&130023424)===qo&&500>Vi()-g3?Td(n,0):m3|=t),na(n,e)}function zI(n,e){e===0&&(n.mode&1?(e=dy,dy<<=1,!(dy&130023424)&&(dy=4194304)):e=1);var t=Is();n=Dc(n,e),n!==null&&(l1(n,e,t),na(n,t))}function ez(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),zI(n,t)}function tz(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,i=n.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(Lt(314))}r!==null&&r.delete(e),zI(n,t)}var HI;HI=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ea.current)Qs=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Qs=!1,G8(n,e,t);Qs=!!(n.flags&131072)}else Qs=!1,hi&&e.flags&1048576&&Wk(e,Rx,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;$2(n,e),n=e.pendingProps;var i=Jm(e,xs.current);Om(e,t),i=u3(null,e,r,n,i,t);var o=c3();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ta(r)?(o=!0,Px(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i3(e),i.updater=Rw,e.stateNode=i,i._reactInternals=e,O5(e,r,n,t),e=z5(null,e,r,!0,o,t)):(e.tag=0,hi&&o&&KE(e),Ps(null,e,i,t),e=e.child),e;case 16:r=e.elementType;e:{switch($2(n,e),n=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=rz(r),n=Ll(r,n),i){case 0:e=U5(null,e,r,n,t);break e;case 1:e=yC(null,e,r,n,t);break e;case 11:e=gC(null,e,r,n,t);break e;case 14:e=vC(null,e,r,Ll(r.type,n),t);break e}throw Error(Lt(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ll(r,i),U5(n,e,r,i,t);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ll(r,i),yC(n,e,r,i,t);case 3:e:{if(MI(e),n===null)throw Error(Lt(387));r=e.pendingProps,o=e.memoizedState,i=o.element,Xk(n,e),Nx(e,r,null,t);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ng(Error(Lt(423)),e),e=xC(n,e,r,t,i);break e}else if(r!==i){i=ng(Error(Lt(424)),e),e=xC(n,e,r,t,i);break e}else for(wa=ef(e.stateNode.containerInfo.firstChild),_a=e,hi=!0,Nl=null,t=Jk(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Qm(),r===i){e=Oc(n,e,t);break e}Ps(n,e,r,t)}e=e.child}return e;case 5:return Qk(e),n===null&&N5(e),r=e.type,i=e.pendingProps,o=n!==null?n.memoizedProps:null,s=i.children,P5(r,i)?s=null:o!==null&&P5(r,o)&&(e.flags|=32),bI(n,e),Ps(n,e,s,t),e.child;case 6:return n===null&&N5(e),null;case 13:return EI(n,e,t);case 4:return o3(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=eg(e,null,r,t):Ps(n,e,r,t),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ll(r,i),gC(n,e,r,i,t);case 7:return Ps(n,e,e.pendingProps,t),e.child;case 8:return Ps(n,e,e.pendingProps.children,t),e.child;case 12:return Ps(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,qr(kx,r._currentValue),r._currentValue=s,o!==null)if(Gl(o.value,s)){if(o.children===i.children&&!ea.current){e=Oc(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Lc(-1,t&-t),l.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=t,l=o.alternate,l!==null&&(l.lanes|=t),F5(o.return,t,e),a.lanes|=t;break}l=l.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Lt(341));s.lanes|=t,a=s.alternate,a!==null&&(a.lanes|=t),F5(s,t,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Ps(n,e,i.children,t),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Om(e,t),i=ll(i),r=r(i),e.flags|=1,Ps(n,e,r,t),e.child;case 14:return r=e.type,i=Ll(r,e.pendingProps),i=Ll(r.type,i),vC(n,e,r,i,t);case 15:return SI(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ll(r,i),$2(n,e),e.tag=1,ta(r)?(n=!0,Px(e)):n=!1,Om(e,t),Zk(e,r,i),O5(e,r,i,t),z5(null,e,r,!0,n,t);case 19:return AI(n,e,t);case 22:return _I(n,e,t)}throw Error(Lt(156,e.tag))};function GI(n,e){return pk(n,e)}function nz(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function nl(n,e,t,r){return new nz(n,e,t,r)}function w3(n){return n=n.prototype,!(!n||!n.isReactComponent)}function rz(n){if(typeof n=="function")return w3(n)?1:0;if(n!=null){if(n=n.$$typeof,n===UE)return 11;if(n===zE)return 14}return 2}function of(n,e){var t=n.alternate;return t===null?(t=nl(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Y2(n,e,t,r,i,o){var s=2;if(r=n,typeof n=="function")w3(n)&&(s=1);else if(typeof n=="string")s=5;else e:switch(n){case gm:return Cd(t.children,i,o,e);case BE:s=8,i|=8;break;case a5:return n=nl(12,t,e,i|2),n.elementType=a5,n.lanes=o,n;case l5:return n=nl(13,t,e,i),n.elementType=l5,n.lanes=o,n;case u5:return n=nl(19,t,e,i),n.elementType=u5,n.lanes=o,n;case K4:return Fw(t,i,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case Y4:s=10;break e;case Z4:s=9;break e;case UE:s=11;break e;case zE:s=14;break e;case Nh:s=16,r=null;break e}throw Error(Lt(130,n==null?n:typeof n,""))}return e=nl(s,t,e,i),e.elementType=n,e.type=r,e.lanes=o,e}function Cd(n,e,t,r){return n=nl(7,n,r,e),n.lanes=t,n}function Fw(n,e,t,r){return n=nl(22,n,r,e),n.elementType=K4,n.lanes=t,n.stateNode={isHidden:!1},n}function y_(n,e,t){return n=nl(6,n,null,e),n.lanes=t,n}function x_(n,e,t){return e=nl(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function iz(n,e,t,r,i){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=QS(0),this.expirationTimes=QS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=QS(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function S3(n,e,t,r,i,o,s,a,l){return n=new iz(n,e,t,a,l),e===1?(e=1,o===!0&&(e|=8)):e=0,o=nl(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},i3(o),n}function oz(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mm,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function VI(n){if(!n)return ff;n=n._reactInternals;e:{if(Zd(n)!==n||n.tag!==1)throw Error(Lt(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ta(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Lt(171))}if(n.tag===1){var t=n.type;if(ta(t))return Gk(n,t,e)}return e}function WI(n,e,t,r,i,o,s,a,l){return n=S3(t,r,!0,n,i,o,s,a,l),n.context=VI(null),t=n.current,r=Is(),i=rf(t),o=Lc(r,i),o.callback=e??null,tf(t,o,i),n.current.lanes=i,l1(n,i,r),na(n,r),n}function Dw(n,e,t,r){var i=e.current,o=Is(),s=rf(i);return t=VI(t),e.context===null?e.context=t:e.pendingContext=t,e=Lc(o,s),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=tf(i,e,s),n!==null&&(Ul(n,i,s,o),V2(n,i,s)),s}function Gx(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function PC(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function _3(n,e){PC(n,e),(n=n.alternate)&&PC(n,e)}function sz(){return null}var jI=typeof reportError=="function"?reportError:function(n){console.error(n)};function b3(n){this._internalRoot=n}Ow.prototype.render=b3.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Lt(409));Dw(n,e,null,null)};Ow.prototype.unmount=b3.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Ud(function(){Dw(null,n,null,null)}),e[Fc]=null}};function Ow(n){this._internalRoot=n}Ow.prototype.unstable_scheduleHydration=function(n){if(n){var e=Sk();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Oh.length&&e!==0&&e<Oh[t].priority;t++);Oh.splice(t,0,n),t===0&&bk(n)}};function M3(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Bw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function LC(){}function az(n,e,t,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var u=Gx(s);o.call(u)}}var s=WI(e,r,n,0,null,!1,!1,"",LC);return n._reactRootContainer=s,n[Fc]=s.current,bv(n.nodeType===8?n.parentNode:n),Ud(),s}for(;i=n.lastChild;)n.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=Gx(l);a.call(u)}}var l=S3(n,0,!1,null,null,!1,!1,"",LC);return n._reactRootContainer=l,n[Fc]=l.current,bv(n.nodeType===8?n.parentNode:n),Ud(function(){Dw(e,l,t,r)}),l}function Uw(n,e,t,r,i){var o=t._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var l=Gx(s);a.call(l)}}Dw(e,s,n,i)}else s=az(t,e,n,i,r);return Gx(s)}xk=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=k0(e.pendingLanes);t!==0&&(VE(e,t|1),na(e,Vi()),!(fr&6)&&(rg=Vi()+500,Mf()))}break;case 13:Ud(function(){var r=Dc(n,1);if(r!==null){var i=Is();Ul(r,n,1,i)}}),_3(n,1)}};WE=function(n){if(n.tag===13){var e=Dc(n,134217728);if(e!==null){var t=Is();Ul(e,n,134217728,t)}_3(n,134217728)}};wk=function(n){if(n.tag===13){var e=rf(n),t=Dc(n,e);if(t!==null){var r=Is();Ul(t,n,e,r)}_3(n,e)}};Sk=function(){return Dr};_k=function(n,e){var t=Dr;try{return Dr=n,e()}finally{Dr=t}};x5=function(n,e,t){switch(e){case"input":if(f5(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var i=Pw(r);if(!i)throw Error(Lt(90));Q4(r),f5(r,i)}}}break;case"textarea":tk(n,t);break;case"select":e=t.value,e!=null&&Im(n,!!t.multiple,e,!1)}};lk=v3;uk=Ud;var lz={usingClientEntryPoint:!1,Events:[c1,wm,Pw,sk,ak,v3]},o0={findFiberByHostInstance:vd,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},uz={bundleType:o0.bundleType,version:o0.version,rendererPackageName:o0.rendererPackageName,rendererConfig:o0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vc.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=fk(n),n===null?null:n.stateNode},findFiberByHostInstance:o0.findFiberByHostInstance||sz,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var My=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!My.isDisabled&&My.supportsFiber)try{Ew=My.inject(uz),Pu=My}catch{}}Aa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=lz;Aa.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!M3(e))throw Error(Lt(200));return oz(n,e,null,t)};Aa.createRoot=function(n,e){if(!M3(n))throw Error(Lt(299));var t=!1,r="",i=jI;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=S3(n,1,!1,null,null,t,!1,r,i),n[Fc]=e.current,bv(n.nodeType===8?n.parentNode:n),new b3(e)};Aa.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Lt(188)):(n=Object.keys(n).join(","),Error(Lt(268,n)));return n=fk(e),n=n===null?null:n.stateNode,n};Aa.flushSync=function(n){return Ud(n)};Aa.hydrate=function(n,e,t){if(!Bw(e))throw Error(Lt(200));return Uw(null,n,e,!0,t)};Aa.hydrateRoot=function(n,e,t){if(!M3(n))throw Error(Lt(405));var r=t!=null&&t.hydratedSources||null,i=!1,o="",s=jI;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),e=WI(e,null,n,1,t??null,i,!1,o,s),n[Fc]=e.current,bv(n),r)for(n=0;n<r.length;n++)t=r[n],i=t._getVersion,i=i(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,i]:e.mutableSourceEagerHydrationData.push(t,i);return new Ow(e)};Aa.render=function(n,e,t){if(!Bw(e))throw Error(Lt(200));return Uw(null,n,e,!1,t)};Aa.unmountComponentAtNode=function(n){if(!Bw(n))throw Error(Lt(40));return n._reactRootContainer?(Ud(function(){Uw(null,null,n,!1,function(){n._reactRootContainer=null,n[Fc]=null})}),!0):!1};Aa.unstable_batchedUpdates=v3;Aa.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Bw(t))throw Error(Lt(200));if(n==null||n._reactInternals===void 0)throw Error(Lt(38));return Uw(n,e,t,!1,r)};Aa.version="18.2.0-next-9e3b772b8-20220608";(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=Aa})(sU);const cz=bw(i5),hz="modulepreload",fz=function(n){return"/cad-os/"+n},RC={},Vx=function(e,t,r){if(!t||t.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(t.map(o=>{if(o=fz(o),o in RC)return;RC[o]=!0;const s=o.endsWith(".css"),a=s?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const h=i[c];if(h.href===o&&(!s||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${a}`))return;const u=document.createElement("link");if(u.rel=s?"stylesheet":hz,s||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),s)return new Promise((c,h)=>{u.addEventListener("load",c),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>e())};var E3={};Object.defineProperty(E3,"__esModule",{value:!0});E3.parse=xz;E3.serialize=wz;const dz=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,pz=/^[\u0021-\u003A\u003C-\u007E]*$/,mz=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,gz=/^[\u0020-\u003A\u003D-\u007E]*$/,vz=Object.prototype.toString,yz=(()=>{const n=function(){};return n.prototype=Object.create(null),n})();function xz(n,e){const t=new yz,r=n.length;if(r<2)return t;const i=(e==null?void 0:e.decode)||Sz;let o=0;do{const s=n.indexOf("=",o);if(s===-1)break;const a=n.indexOf(";",o),l=a===-1?r:a;if(s>l){o=n.lastIndexOf(";",s-1)+1;continue}const u=kC(n,o,s),c=IC(n,s,u),h=n.slice(u,c);if(t[h]===void 0){let f=kC(n,s+1,l),d=IC(n,l,f);const v=i(n.slice(f,d));t[h]=v}o=l+1}while(o<r);return t}function kC(n,e,t){do{const r=n.charCodeAt(e);if(r!==32&&r!==9)return e}while(++e<t);return t}function IC(n,e,t){for(;e>t;){const r=n.charCodeAt(--e);if(r!==32&&r!==9)return e+1}return t}function wz(n,e,t){const r=(t==null?void 0:t.encode)||encodeURIComponent;if(!dz.test(n))throw new TypeError(`argument name is invalid: ${n}`);const i=r(e);if(!pz.test(i))throw new TypeError(`argument val is invalid: ${e}`);let o=n+"="+i;if(!t)return o;if(t.maxAge!==void 0){if(!Number.isInteger(t.maxAge))throw new TypeError(`option maxAge is invalid: ${t.maxAge}`);o+="; Max-Age="+t.maxAge}if(t.domain){if(!mz.test(t.domain))throw new TypeError(`option domain is invalid: ${t.domain}`);o+="; Domain="+t.domain}if(t.path){if(!gz.test(t.path))throw new TypeError(`option path is invalid: ${t.path}`);o+="; Path="+t.path}if(t.expires){if(!_z(t.expires)||!Number.isFinite(t.expires.valueOf()))throw new TypeError(`option expires is invalid: ${t.expires}`);o+="; Expires="+t.expires.toUTCString()}if(t.httpOnly&&(o+="; HttpOnly"),t.secure&&(o+="; Secure"),t.partitioned&&(o+="; Partitioned"),t.priority)switch(typeof t.priority=="string"?t.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${t.priority}`)}if(t.sameSite)switch(typeof t.sameSite=="string"?t.sameSite.toLowerCase():t.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${t.sameSite}`)}return o}function Sz(n){if(n.indexOf("%")===-1)return n;try{return decodeURIComponent(n)}catch{return n}}function _z(n){return vz.call(n)==="[object Date]"}var NC="popstate";function bz(n={}){function e(i,o){let{pathname:s="/",search:a="",hash:l=""}=Kd(i.location.hash.substring(1));return!s.startsWith("/")&&!s.startsWith(".")&&(s="/"+s),J5("",{pathname:s,search:a,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(i,o){let s=i.document.querySelector("base"),a="";if(s&&s.getAttribute("href")){let l=i.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof o=="string"?o:kv(o))}function r(i,o){Vl(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return Ez(e,t,r,n)}function Ei(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Vl(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Mz(){return Math.random().toString(36).substring(2,10)}function FC(n,e){return{usr:n.state,key:n.key,idx:e}}function J5(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Kd(e):e,state:t,key:e&&e.key||r||Mz()}}function kv({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Kd(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function Ez(n,e,t,r={}){let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,a="POP",l=null,u=c();u==null&&(u=0,s.replaceState({...s.state,idx:u},""));function c(){return(s.state||{idx:null}).idx}function h(){a="POP";let w=c(),g=w==null?null:w-u;u=w,l&&l({action:a,location:y.location,delta:g})}function f(w,g){a="PUSH";let x=J5(y.location,w,g);t&&t(x,w),u=c()+1;let _=FC(x,u),E=y.createHref(x);try{s.pushState(_,"",E)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(E)}o&&l&&l({action:a,location:y.location,delta:1})}function d(w,g){a="REPLACE";let x=J5(y.location,w,g);t&&t(x,w),u=c();let _=FC(x,u),E=y.createHref(x);s.replaceState(_,"",E),o&&l&&l({action:a,location:y.location,delta:0})}function v(w){let g=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof w=="string"?w:kv(w);return x=x.replace(/ $/,"%20"),Ei(g,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,g)}let y={get action(){return a},get location(){return n(i,s)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(NC,h),l=w,()=>{i.removeEventListener(NC,h),l=null}},createHref(w){return e(i,w)},createURL:v,encodeLocation(w){let g=v(w);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:d,go(w){return s.go(w)}};return y}function $I(n,e,t="/"){return Az(n,e,t,!1)}function Az(n,e,t,r){let i=typeof e=="string"?Kd(e):e,o=Bc(i.pathname||"/",t);if(o==null)return null;let s=qI(n);Tz(s);let a=null;for(let l=0;a==null&&l<s.length;++l){let u=Bz(o);a=Dz(s[l],u,r)}return a}function qI(n,e=[],t=[],r=""){let i=(o,s,a)=>{let l={relativePath:a===void 0?o.path||"":a,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};l.relativePath.startsWith("/")&&(Ei(l.relativePath.startsWith(r),`Absolute route path "${l.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(r.length));let u=Rc([r,l.relativePath]),c=t.concat(l);o.children&&o.children.length>0&&(Ei(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${u}".`),qI(o.children,e,c,u)),!(o.path==null&&!o.index)&&e.push({path:u,score:Nz(u,o.index),routesMeta:c})};return n.forEach((o,s)=>{var a;if(o.path===""||!((a=o.path)!=null&&a.includes("?")))i(o,s);else for(let l of XI(o.path))i(o,s,l)}),e}function XI(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,i=t.endsWith("?"),o=t.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=XI(r.join("/")),a=[];return a.push(...s.map(l=>l===""?o:[o,l].join("/"))),i&&a.push(...s),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function Tz(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:Fz(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var Cz=/^:[\w-]+$/,Pz=3,Lz=2,Rz=1,kz=10,Iz=-2,DC=n=>n==="*";function Nz(n,e){let t=n.split("/"),r=t.length;return t.some(DC)&&(r+=Iz),e&&(r+=Lz),t.filter(i=>!DC(i)).reduce((i,o)=>i+(Cz.test(o)?Pz:o===""?Rz:kz),r)}function Fz(n,e){return n.length===e.length&&n.slice(0,-1).every((r,i)=>r===e[i])?n[n.length-1]-e[e.length-1]:0}function Dz(n,e,t=!1){let{routesMeta:r}=n,i={},o="/",s=[];for(let a=0;a<r.length;++a){let l=r[a],u=a===r.length-1,c=o==="/"?e:e.slice(o.length)||"/",h=Wx({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!h&&u&&t&&!r[r.length-1].route.index&&(h=Wx({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!h)return null;Object.assign(i,h.params),s.push({params:i,pathname:Rc([o,h.pathname]),pathnameBase:Gz(Rc([o,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(o=Rc([o,h.pathnameBase]))}return s}function Wx(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=Oz(n.path,n.caseSensitive,n.end),i=e.match(t);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((u,{paramName:c,isOptional:h},f)=>{if(c==="*"){let v=a[f]||"";s=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const d=a[f];return h&&!d?u[c]=void 0:u[c]=(d||"").replace(/%2F/g,"/"),u},{}),pathname:o,pathnameBase:s,pattern:n}}function Oz(n,e=!1,t=!0){Vl(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],i="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(s,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),i+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?i+="\\/*$":n!==""&&n!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function Bz(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Vl(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Bc(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function Uz(n,e="/"){let{pathname:t,search:r="",hash:i=""}=typeof n=="string"?Kd(n):n;return{pathname:t?t.startsWith("/")?t:zz(t,e):e,search:Vz(r),hash:Wz(i)}}function zz(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(i=>{i===".."?t.length>1&&t.pop():i!=="."&&t.push(i)}),t.length>1?t.join("/"):"/"}function w_(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Hz(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function YI(n){let e=Hz(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function ZI(n,e,t,r=!1){let i;typeof n=="string"?i=Kd(n):(i={...n},Ei(!i.pathname||!i.pathname.includes("?"),w_("?","pathname","search",i)),Ei(!i.pathname||!i.pathname.includes("#"),w_("#","pathname","hash",i)),Ei(!i.search||!i.search.includes("#"),w_("#","search","hash",i)));let o=n===""||i.pathname==="",s=o?"/":i.pathname,a;if(s==null)a=t;else{let h=e.length-1;if(!r&&s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),h-=1;i.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=Uz(i,a),u=s&&s!=="/"&&s.endsWith("/"),c=(o||s===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}var Rc=n=>n.join("/").replace(/\/\/+/g,"/"),Gz=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),Vz=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,Wz=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function jz(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var KI=["POST","PUT","PATCH","DELETE"];new Set(KI);var $z=["GET",...KI];new Set($z);var Sg=pe.createContext(null);Sg.displayName="DataRouter";var zw=pe.createContext(null);zw.displayName="DataRouterState";var JI=pe.createContext({isTransitioning:!1});JI.displayName="ViewTransition";var qz=pe.createContext(new Map);qz.displayName="Fetchers";var Xz=pe.createContext(null);Xz.displayName="Await";var Bu=pe.createContext(null);Bu.displayName="Navigation";var f1=pe.createContext(null);f1.displayName="Location";var Uu=pe.createContext({outlet:null,matches:[],isDataRoute:!1});Uu.displayName="Route";var A3=pe.createContext(null);A3.displayName="RouteError";function Yz(n,{relative:e}={}){Ei(d1(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=pe.useContext(Bu),{hash:i,pathname:o,search:s}=p1(n,{relative:e}),a=o;return t!=="/"&&(a=o==="/"?t:Rc([t,o])),r.createHref({pathname:a,search:s,hash:i})}function d1(){return pe.useContext(f1)!=null}function Jd(){return Ei(d1(),"useLocation() may be used only in the context of a <Router> component."),pe.useContext(f1).location}var QI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function eN(n){pe.useContext(Bu).static||pe.useLayoutEffect(n)}function tN(){let{isDataRoute:n}=pe.useContext(Uu);return n?u7():Zz()}function Zz(){Ei(d1(),"useNavigate() may be used only in the context of a <Router> component.");let n=pe.useContext(Sg),{basename:e,navigator:t}=pe.useContext(Bu),{matches:r}=pe.useContext(Uu),{pathname:i}=Jd(),o=JSON.stringify(YI(r)),s=pe.useRef(!1);return eN(()=>{s.current=!0}),pe.useCallback((l,u={})=>{if(Vl(s.current,QI),!s.current)return;if(typeof l=="number"){t.go(l);return}let c=ZI(l,JSON.parse(o),i,u.relative==="path");n==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Rc([e,c.pathname])),(u.replace?t.replace:t.push)(c,u.state,u)},[e,t,o,i,n])}pe.createContext(null);function Kz(){let{matches:n}=pe.useContext(Uu),e=n[n.length-1];return e?e.params:{}}function p1(n,{relative:e}={}){let{matches:t}=pe.useContext(Uu),{pathname:r}=Jd(),i=JSON.stringify(YI(t));return pe.useMemo(()=>ZI(n,JSON.parse(i),r,e==="path"),[n,i,r,e])}function Jz(n,e){return nN(n,e)}function nN(n,e,t,r){var x;Ei(d1(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i,static:o}=pe.useContext(Bu),{matches:s}=pe.useContext(Uu),a=s[s.length-1],l=a?a.params:{},u=a?a.pathname:"/",c=a?a.pathnameBase:"/",h=a&&a.route;{let _=h&&h.path||"";rN(u,!h||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let f=Jd(),d;if(e){let _=typeof e=="string"?Kd(e):e;Ei(c==="/"||((x=_.pathname)==null?void 0:x.startsWith(c)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${_.pathname}" was given in the \`location\` prop.`),d=_}else d=f;let v=d.pathname||"/",y=v;if(c!=="/"){let _=c.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(_.length).join("/")}let w=!o&&t&&t.matches&&t.matches.length>0?t.matches:$I(n,{pathname:y});Vl(h||w!=null,`No routes matched location "${d.pathname}${d.search}${d.hash}" `),Vl(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${d.pathname}${d.search}${d.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=r7(w&&w.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Rc([c,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?c:Rc([c,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,t,r);return e&&g?pe.createElement(f1.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...d},navigationType:"POP"}},g):g}function Qz(){let n=l7(),e=jz(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},o={padding:"2px 4px",backgroundColor:r},s=null;return console.error("Error handled by React Router default ErrorBoundary:",n),s=pe.createElement(pe.Fragment,null,pe.createElement("p",null,"💿 Hey developer 👋"),pe.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",pe.createElement("code",{style:o},"ErrorBoundary")," or"," ",pe.createElement("code",{style:o},"errorElement")," prop on your route.")),pe.createElement(pe.Fragment,null,pe.createElement("h2",null,"Unexpected Application Error!"),pe.createElement("h3",{style:{fontStyle:"italic"}},e),t?pe.createElement("pre",{style:i},t):null,s)}var e7=pe.createElement(Qz,null),t7=class extends pe.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?pe.createElement(Uu.Provider,{value:this.props.routeContext},pe.createElement(A3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function n7({routeContext:n,match:e,children:t}){let r=pe.useContext(Sg);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),pe.createElement(Uu.Provider,{value:n},t)}function r7(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let i=n,o=t==null?void 0:t.errors;if(o!=null){let l=i.findIndex(u=>u.route.id&&(o==null?void 0:o[u.route.id])!==void 0);Ei(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let s=!1,a=-1;if(t)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(a=l),u.route.id){let{loaderData:c,errors:h}=t,f=u.route.loader&&!c.hasOwnProperty(u.route.id)&&(!h||h[u.route.id]===void 0);if(u.route.lazy||f){s=!0,a>=0?i=i.slice(0,a+1):i=[i[0]];break}}}return i.reduceRight((l,u,c)=>{let h,f=!1,d=null,v=null;t&&(h=o&&u.route.id?o[u.route.id]:void 0,d=u.route.errorElement||e7,s&&(a<0&&c===0?(rN("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,v=null):a===c&&(f=!0,v=u.route.hydrateFallbackElement||null)));let y=e.concat(i.slice(0,c+1)),w=()=>{let g;return h?g=d:f?g=v:u.route.Component?g=pe.createElement(u.route.Component,null):u.route.element?g=u.route.element:g=l,pe.createElement(n7,{match:u,routeContext:{outlet:l,matches:y,isDataRoute:t!=null},children:g})};return t&&(u.route.ErrorBoundary||u.route.errorElement||c===0)?pe.createElement(t7,{location:t.location,revalidation:t.revalidation,component:d,error:h,children:w(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):w()},null)}function T3(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function i7(n){let e=pe.useContext(Sg);return Ei(e,T3(n)),e}function o7(n){let e=pe.useContext(zw);return Ei(e,T3(n)),e}function s7(n){let e=pe.useContext(Uu);return Ei(e,T3(n)),e}function C3(n){let e=s7(n),t=e.matches[e.matches.length-1];return Ei(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function a7(){return C3("useRouteId")}function l7(){var r;let n=pe.useContext(A3),e=o7("useRouteError"),t=C3("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function u7(){let{router:n}=i7("useNavigate"),e=C3("useNavigate"),t=pe.useRef(!1);return eN(()=>{t.current=!0}),pe.useCallback(async(i,o={})=>{Vl(t.current,QI),t.current&&(typeof i=="number"?n.navigate(i):await n.navigate(i,{fromRouteId:e,...o}))},[n,e])}var OC={};function rN(n,e,t){!e&&!OC[n]&&(OC[n]=!0,Vl(!1,t))}pe.memo(c7);function c7({routes:n,future:e,state:t}){return nN(n,void 0,t,e)}function Uh(n){Ei(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function h7({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:i,static:o=!1}){Ei(!d1(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let s=n.replace(/^\/*/,"/"),a=pe.useMemo(()=>({basename:s,navigator:i,static:o,future:{}}),[s,i,o]);typeof t=="string"&&(t=Kd(t));let{pathname:l="/",search:u="",hash:c="",state:h=null,key:f="default"}=t,d=pe.useMemo(()=>{let v=Bc(l,s);return v==null?null:{location:{pathname:v,search:u,hash:c,state:h,key:f},navigationType:r}},[s,l,u,c,h,f,r]);return Vl(d!=null,`<Router basename="${s}"> is not able to match the URL "${l}${u}${c}" because it does not start with the basename, so the <Router> won't render anything.`),d==null?null:pe.createElement(Bu.Provider,{value:a},pe.createElement(f1.Provider,{children:e,value:d}))}function iN({children:n,location:e}){return Jz(Q5(n),e)}function Q5(n,e=[]){let t=[];return pe.Children.forEach(n,(r,i)=>{if(!pe.isValidElement(r))return;let o=[...e,i];if(r.type===pe.Fragment){t.push.apply(t,Q5(r.props.children,o));return}Ei(r.type===Uh,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ei(!r.props.index||!r.props.children,"An index route cannot have child routes.");let s={id:r.props.id||o.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(s.children=Q5(r.props.children,o)),t.push(s)}),t}var Z2="get",K2="application/x-www-form-urlencoded";function Hw(n){return n!=null&&typeof n.tagName=="string"}function f7(n){return Hw(n)&&n.tagName.toLowerCase()==="button"}function d7(n){return Hw(n)&&n.tagName.toLowerCase()==="form"}function p7(n){return Hw(n)&&n.tagName.toLowerCase()==="input"}function m7(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function g7(n,e){return n.button===0&&(!e||e==="_self")&&!m7(n)}var Ey=null;function v7(){if(Ey===null)try{new FormData(document.createElement("form"),0),Ey=!1}catch{Ey=!0}return Ey}var y7=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function S_(n){return n!=null&&!y7.has(n)?(Vl(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${K2}"`),null):n}function x7(n,e){let t,r,i,o,s;if(d7(n)){let a=n.getAttribute("action");r=a?Bc(a,e):null,t=n.getAttribute("method")||Z2,i=S_(n.getAttribute("enctype"))||K2,o=new FormData(n)}else if(f7(n)||p7(n)&&(n.type==="submit"||n.type==="image")){let a=n.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=n.getAttribute("formaction")||a.getAttribute("action");if(r=l?Bc(l,e):null,t=n.getAttribute("formmethod")||a.getAttribute("method")||Z2,i=S_(n.getAttribute("formenctype"))||S_(a.getAttribute("enctype"))||K2,o=new FormData(a,n),!v7()){let{name:u,type:c,value:h}=n;if(c==="image"){let f=u?`${u}.`:"";o.append(`${f}x`,"0"),o.append(`${f}y`,"0")}else u&&o.append(u,h)}}else{if(Hw(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Z2,r=null,i=K2,s=n}return o&&i==="text/plain"&&(s=o,o=void 0),{action:r,method:t.toLowerCase(),encType:i,formData:o,body:s}}function P3(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function w7(n,e){if(n.id in e)return e[n.id];try{let t=await Vx(()=>import(n.module),[]);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function S7(n){return n!=null&&typeof n.page=="string"}function _7(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function b7(n,e,t){let r=await Promise.all(n.map(async i=>{let o=e.routes[i.route.id];if(o){let s=await w7(o,t);return s.links?s.links():[]}return[]}));return T7(r.flat(1).filter(_7).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function BC(n,e,t,r,i,o){let s=(l,u)=>t[u]?l.route.id!==t[u].route.id:!0,a=(l,u)=>{var c;return t[u].pathname!==l.pathname||((c=t[u].route.path)==null?void 0:c.endsWith("*"))&&t[u].params["*"]!==l.params["*"]};return o==="assets"?e.filter((l,u)=>s(l,u)||a(l,u)):o==="data"?e.filter((l,u)=>{var h;let c=r.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(s(l,u)||a(l,u))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((h=t[0])==null?void 0:h.params)||{},nextUrl:new URL(n,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function M7(n,e,{includeHydrateFallback:t}={}){return E7(n.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let o=[i.module];return i.clientActionModule&&(o=o.concat(i.clientActionModule)),i.clientLoaderModule&&(o=o.concat(i.clientLoaderModule)),t&&i.hydrateFallbackModule&&(o=o.concat(i.hydrateFallbackModule)),i.imports&&(o=o.concat(i.imports)),o}).flat(1))}function E7(n){return[...new Set(n)]}function A7(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function T7(n,e){let t=new Set,r=new Set(e);return n.reduce((i,o)=>{if(e&&!S7(o)&&o.as==="script"&&o.href&&r.has(o.href))return i;let a=JSON.stringify(A7(o));return t.has(a)||(t.add(a),i.push({key:a,link:o})),i},[])}function C7(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&Bc(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function oN(){let n=pe.useContext(Sg);return P3(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function P7(){let n=pe.useContext(zw);return P3(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var L3=pe.createContext(void 0);L3.displayName="FrameworkContext";function sN(){let n=pe.useContext(L3);return P3(n,"You must render this element inside a <HydratedRouter> element"),n}function L7(n,e){let t=pe.useContext(L3),[r,i]=pe.useState(!1),[o,s]=pe.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:u,onMouseLeave:c,onTouchStart:h}=e,f=pe.useRef(null);pe.useEffect(()=>{if(n==="render"&&s(!0),n==="viewport"){let y=g=>{g.forEach(x=>{s(x.isIntersecting)})},w=new IntersectionObserver(y,{threshold:.5});return f.current&&w.observe(f.current),()=>{w.disconnect()}}},[n]),pe.useEffect(()=>{if(r){let y=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(y)}}},[r]);let d=()=>{i(!0)},v=()=>{i(!1),s(!1)};return t?n!=="intent"?[o,f,{}]:[o,f,{onFocus:s0(a,d),onBlur:s0(l,v),onMouseEnter:s0(u,d),onMouseLeave:s0(c,v),onTouchStart:s0(h,d)}]:[!1,f,{}]}function s0(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function R7({page:n,...e}){let{router:t}=oN(),r=pe.useMemo(()=>$I(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?pe.createElement(I7,{page:n,matches:r,...e}):null}function k7(n){let{manifest:e,routeModules:t}=sN(),[r,i]=pe.useState([]);return pe.useEffect(()=>{let o=!1;return b7(n,e,t).then(s=>{o||i(s)}),()=>{o=!0}},[n,e,t]),r}function I7({page:n,matches:e,...t}){let r=Jd(),{manifest:i,routeModules:o}=sN(),{basename:s}=oN(),{loaderData:a,matches:l}=P7(),u=pe.useMemo(()=>BC(n,e,l,i,r,"data"),[n,e,l,i,r]),c=pe.useMemo(()=>BC(n,e,l,i,r,"assets"),[n,e,l,i,r]),h=pe.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let v=new Set,y=!1;if(e.forEach(g=>{var _;let x=i.routes[g.route.id];!x||!x.hasLoader||(!u.some(E=>E.route.id===g.route.id)&&g.route.id in a&&((_=o[g.route.id])!=null&&_.shouldRevalidate)||x.hasClientLoader?y=!0:v.add(g.route.id))}),v.size===0)return[];let w=C7(n,s);return y&&v.size>0&&w.searchParams.set("_routes",e.filter(g=>v.has(g.route.id)).map(g=>g.route.id).join(",")),[w.pathname+w.search]},[s,a,r,i,u,e,n,o]),f=pe.useMemo(()=>M7(c,i),[c,i]),d=k7(c);return pe.createElement(pe.Fragment,null,h.map(v=>pe.createElement("link",{key:v,rel:"prefetch",as:"fetch",href:v,...t})),f.map(v=>pe.createElement("link",{key:v,rel:"modulepreload",href:v,...t})),d.map(({key:v,link:y})=>pe.createElement("link",{key:v,...y})))}function N7(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var aN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{aN&&(window.__reactRouterVersion="7.5.0")}catch{}function F7({basename:n,children:e,window:t}){let r=pe.useRef();r.current==null&&(r.current=bz({window:t,v5Compat:!0}));let i=r.current,[o,s]=pe.useState({action:i.action,location:i.location}),a=pe.useCallback(l=>{pe.startTransition(()=>s(l))},[s]);return pe.useLayoutEffect(()=>i.listen(a),[i,a]),pe.createElement(h7,{basename:n,children:e,location:o.location,navigationType:o.action,navigator:i})}var lN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,m1=pe.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:i,reloadDocument:o,replace:s,state:a,target:l,to:u,preventScrollReset:c,viewTransition:h,...f},d){let{basename:v}=pe.useContext(Bu),y=typeof u=="string"&&lN.test(u),w,g=!1;if(typeof u=="string"&&y&&(w=u,aN))try{let k=new URL(window.location.href),D=u.startsWith("//")?new URL(k.protocol+u):new URL(u),N=Bc(D.pathname,v);D.origin===k.origin&&N!=null?u=N+D.search+D.hash:g=!0}catch{Vl(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=Yz(u,{relative:i}),[_,E,C]=L7(r,f),I=B7(u,{replace:s,state:a,target:l,preventScrollReset:c,relative:i,viewTransition:h});function R(k){e&&e(k),k.defaultPrevented||I(k)}let L=pe.createElement("a",{...f,...C,href:w||x,onClick:g||o?e:R,ref:N7(d,E),target:l,"data-discover":!y&&t==="render"?"true":void 0});return _&&!y?pe.createElement(pe.Fragment,null,L,pe.createElement(R7,{page:x})):L});m1.displayName="Link";var um=pe.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:i=!1,style:o,to:s,viewTransition:a,children:l,...u},c){let h=p1(s,{relative:u.relative}),f=Jd(),d=pe.useContext(zw),{navigator:v,basename:y}=pe.useContext(Bu),w=d!=null&&V7(h)&&a===!0,g=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,x=f.pathname,_=d&&d.navigation&&d.navigation.location?d.navigation.location.pathname:null;t||(x=x.toLowerCase(),_=_?_.toLowerCase():null,g=g.toLowerCase()),_&&y&&(_=Bc(_,y)||_);const E=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let C=x===g||!i&&x.startsWith(g)&&x.charAt(E)==="/",I=_!=null&&(_===g||!i&&_.startsWith(g)&&_.charAt(g.length)==="/"),R={isActive:C,isPending:I,isTransitioning:w},L=C?e:void 0,k;typeof r=="function"?k=r(R):k=[r,C?"active":null,I?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let D=typeof o=="function"?o(R):o;return pe.createElement(m1,{...u,"aria-current":L,className:k,ref:c,style:D,to:s,viewTransition:a},typeof l=="function"?l(R):l)});um.displayName="NavLink";var D7=pe.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:i,state:o,method:s=Z2,action:a,onSubmit:l,relative:u,preventScrollReset:c,viewTransition:h,...f},d)=>{let v=H7(),y=G7(a,{relative:u}),w=s.toLowerCase()==="get"?"get":"post",g=typeof a=="string"&&lN.test(a),x=_=>{if(l&&l(_),_.defaultPrevented)return;_.preventDefault();let E=_.nativeEvent.submitter,C=(E==null?void 0:E.getAttribute("formmethod"))||s;v(E||_.currentTarget,{fetcherKey:e,method:C,navigate:t,replace:i,state:o,relative:u,preventScrollReset:c,viewTransition:h})};return pe.createElement("form",{ref:d,method:w,action:y,onSubmit:r?l:x,...f,"data-discover":!g&&n==="render"?"true":void 0})});D7.displayName="Form";function O7(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function uN(n){let e=pe.useContext(Sg);return Ei(e,O7(n)),e}function B7(n,{target:e,replace:t,state:r,preventScrollReset:i,relative:o,viewTransition:s}={}){let a=tN(),l=Jd(),u=p1(n,{relative:o});return pe.useCallback(c=>{if(g7(c,e)){c.preventDefault();let h=t!==void 0?t:kv(l)===kv(u);a(n,{replace:h,state:r,preventScrollReset:i,relative:o,viewTransition:s})}},[l,a,u,t,r,e,n,i,o,s])}var U7=0,z7=()=>`__${String(++U7)}__`;function H7(){let{router:n}=uN("useSubmit"),{basename:e}=pe.useContext(Bu),t=a7();return pe.useCallback(async(r,i={})=>{let{action:o,method:s,encType:a,formData:l,body:u}=x7(r,e);if(i.navigate===!1){let c=i.fetcherKey||z7();await n.fetch(c,t,i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,flushSync:i.flushSync})}else await n.navigate(i.action||o,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||s,formEncType:i.encType||a,replace:i.replace,state:i.state,fromRouteId:t,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,e,t])}function G7(n,{relative:e}={}){let{basename:t}=pe.useContext(Bu),r=pe.useContext(Uu);Ei(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),o={...p1(n||".",{relative:e})},s=Jd();if(n==null){o.search=s.search;let a=new URLSearchParams(o.search),l=a.getAll("index");if(l.some(c=>c==="")){a.delete("index"),l.filter(h=>h).forEach(h=>a.append("index",h));let c=a.toString();o.search=c?`?${c}`:""}}return(!n||n===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(o.pathname=o.pathname==="/"?t:Rc([t,o.pathname])),kv(o)}function V7(n,e={}){let t=pe.useContext(JI);Ei(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=uN("useViewTransitionState"),i=p1(n,{relative:e.relative});if(!t.isTransitioning)return!1;let o=Bc(t.currentLocation.pathname,r)||t.currentLocation.pathname,s=Bc(t.nextLocation.pathname,r)||t.nextLocation.pathname;return Wx(i.pathname,s)!=null||Wx(i.pathname,o)!=null}new TextEncoder;function W7(){const n=tN();return pe.useEffect(()=>{if(document.getElementById("calendly-css"))return;const e=document.createElement("link");e.id="calendly-css",e.href="https://assets.calendly.com/assets/external/widget.css",e.rel="stylesheet",document.head.appendChild(e);const t=document.createElement("script");return t.id="calendly-js",t.src="https://assets.calendly.com/assets/external/widget.js",t.async=!0,t.onload=()=>{window.Calendly&&window.Calendly.initBadgeWidget({url:"https://calendly.com/damjanbab/30min",text:"Schedule a FREE consultation meeting",color:"#0069ff",textColor:"#ffffff"})},document.body.appendChild(t),()=>{var s;const r=document.getElementById("calendly-css"),i=document.getElementById("calendly-js"),o=document.querySelector(".calendly-badge-widget");r&&document.head.removeChild(r),i&&document.body.removeChild(i),o&&((s=o.parentElement)==null||s.removeChild(o))}},[]),ut("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:window.innerWidth<480?"1rem 0":"2rem 0",color:"#1E293B"},children:[ut("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"4rem",textAlign:"center"},children:[ue("h1",{style:{fontSize:"3rem",fontWeight:"800",marginBottom:"1rem",background:"linear-gradient(90deg, #2563EB, #0EA5E9)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent"},children:"Parametric CAD Services"}),ue("p",{style:{fontSize:"1.25rem",maxWidth:"800px",lineHeight:"1.7",color:"#475569"},children:"Professional 3D modeling, technical drawings, and high-quality rendering services for engineering and manufacturing needs."}),ut("div",{style:{marginTop:"2rem",display:"flex",gap:"1rem"},children:[ut("button",{onClick:()=>n("/app"),style:{backgroundColor:"#1E293B",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",transition:"background-color 0.2s"},children:[ut("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ue("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),ue("circle",{cx:"12",cy:"12",r:"3"})]}),"View Demo Models"]}),ue("button",{onClick:()=>window.location.href="mailto:damjanbab@icloud.com",style:{backgroundColor:"white",color:"#1E293B",border:"1px solid #CBD5E1",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",transition:"background-color 0.2s"},children:"Contact Me"})]})]}),ut("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem",marginBottom:"4rem"},children:[ue(__,{icon:ue("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:ue("path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z"})}),title:"Parametric 3D Modeling",description:"Custom 3D models created with a parametric approach, allowing for quick adjustments based on changing requirements. Real-time updates and development monitoring available."}),ue(__,{icon:ut("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ue("path",{d:"M3 3v18h18"}),ue("path",{d:"m3 9 4-4 5 5 4-4 5 5"})]}),title:"Technical Drawings",description:"Automated generation of manufacturing-ready technical drawings in any format you need. Includes orthographic projections, dimensions, and manufacturing specifications."}),ue(__,{icon:ut("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ue("circle",{cx:"12",cy:"12",r:"10"}),ue("path",{d:"M12 16a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"}),ue("path",{d:"M12 2v2"}),ue("path",{d:"M12 20v2"}),ue("path",{d:"m4.93 4.93 1.41 1.41"}),ue("path",{d:"m17.66 17.66 1.41 1.41"}),ue("path",{d:"M2 12h2"}),ue("path",{d:"M20 12h2"}),ue("path",{d:"m6.34 17.66-1.41 1.41"}),ue("path",{d:"m19.07 4.93-1.41 1.41"})]}),title:"High-Quality Rendering",description:"Professional visualizations of your models through high-quality images and videos with customizable camera angles, lighting, and environments."})]}),ut("div",{style:{backgroundColor:"#F1F5F9",padding:"2rem",borderRadius:"0.5rem",marginBottom:"4rem"},children:[ue("h2",{style:{marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"700"},children:"How It Works"}),ut("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[ut("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[ue("div",{style:{backgroundColor:"#2563EB",color:"white",width:"2rem",height:"2rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"1"}),ut("div",{children:[ue("h3",{style:{marginBottom:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:"Define Requirements"}),ue("p",{style:{color:"#475569"},children:"We'll discuss your project needs, including dimensions, functionality, and aesthetic preferences to establish clear parameters for your model."})]})]}),ut("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[ue("div",{style:{backgroundColor:"#2563EB",color:"white",width:"2rem",height:"2rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"2"}),ut("div",{children:[ue("h3",{style:{marginBottom:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:"Real-Time Development"}),ue("p",{style:{color:"#475569"},children:"Access a password-protected workspace where you can monitor progress and provide feedback as your model is being developed."})]})]}),ut("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[ue("div",{style:{backgroundColor:"#2563EB",color:"white",width:"2rem",height:"2rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"3"}),ut("div",{children:[ue("h3",{style:{marginBottom:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:"Parameter Refinement"}),ue("p",{style:{color:"#475569"},children:"Request adjustments to your model parameters at any time. Thanks to the parametric approach, most changes can be implemented instantly."})]})]}),ut("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[ue("div",{style:{backgroundColor:"#2563EB",color:"white",width:"2rem",height:"2rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"4"}),ut("div",{children:[ue("h3",{style:{marginBottom:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:"Final Delivery"}),ue("p",{style:{color:"#475569"},children:"Receive your completed 3D models, technical drawings, and renderings in the formats you need for manufacturing or presentation."})]})]})]})]}),ut("div",{style:{marginBottom:"4rem"},children:[ue("h2",{style:{marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"700"},children:"Technical Capabilities"}),ut("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem"},children:[ue(kp,{title:"Assembly Constructions",description:"Automated assembly constructions with options for exploded views or step-by-step assembly instructions with labeled components."}),ue(kp,{title:"Parametric Design",description:"Dynamic models that update instantly when dimensions or parameters change, allowing for rapid iteration and refinement."}),ue(kp,{title:"Engineering Specifications",description:"Detailed technical drawings with precise measurements, tolerances, and manufacturing notes for production."}),ue(kp,{title:"Real-Time Collaboration",description:"Secure access to your model's development progress, allowing for immediate feedback and adjustments."}),ue(kp,{title:"Custom Rendering",description:"Photorealistic visualizations with adjustable lighting, materials, camera angles, and environments."}),ue(kp,{title:"Cost-Effective Solutions",description:"Built with open-source technologies to offer professional services at competitive rates."})]})]}),ut("div",{style:{textAlign:"center",marginBottom:"2rem",padding:"3rem",backgroundColor:"#1E293B",borderRadius:"0.5rem",color:"white"},children:[ue("h2",{style:{fontSize:"1.875rem",fontWeight:"700",marginBottom:"1rem"},children:"Ready to bring your design to life?"}),ue("p",{style:{color:"#CBD5E1",marginBottom:"2rem",maxWidth:"800px",margin:"0 auto 2rem"},children:"Explore the demo models to see the capabilities, then get in touch to discuss your specific project needs and requirements."}),ut("div",{style:{display:"flex",flexWrap:"wrap",gap:"1.5rem",justifyContent:"center",marginBottom:"2rem"},children:[ut("a",{href:"mailto:damjanbab@icloud.com",style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"#2563EB",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",textDecoration:"none",boxShadow:"0 4px 6px rgba(37, 99, 235, 0.25)",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 8px rgba(37, 99, 235, 0.3)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 6px rgba(37, 99, 235, 0.25)"},children:[ut("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ue("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),ue("polyline",{points:"22,6 12,13 2,6"})]}),"Email Me"]}),ut("a",{href:"https://github.com/damjanbab",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"transparent",color:"white",border:"1px solid #CBD5E1",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",textDecoration:"none",transition:"background-color 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[ue("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:ue("path",{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"})}),"GitHub"]}),ut("a",{href:"https://www.linkedin.com/in/damjanbabic/",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"transparent",color:"white",border:"1px solid #CBD5E1",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",textDecoration:"none",transition:"background-color 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[ut("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ue("path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"}),ue("rect",{x:"2",y:"9",width:"4",height:"12"}),ue("circle",{cx:"4",cy:"4",r:"2"})]}),"LinkedIn"]})]}),ue("button",{onClick:()=>n("/app"),style:{backgroundColor:"#0EA5E9",color:"white",border:"none",padding:"0.75rem 2rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 4px 6px rgba(14, 165, 233, 0.25)",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 6px 8px rgba(14, 165, 233, 0.3)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 6px rgba(14, 165, 233, 0.25)"},children:"Try Demo Models"})]})]})}function __({icon:n,title:e,description:t}){return ut("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",border:"1px solid #E2E8F0",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:r=>{r.currentTarget.style.transform="translateY(-4px)",r.currentTarget.style.boxShadow="0 10px 15px rgba(0, 0, 0, 0.05)"},onMouseOut:r=>{r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.1)"},children:[ue("div",{style:{color:"#2563EB",marginBottom:"1rem",display:"inline-flex",padding:"0.75rem",backgroundColor:"#EFF6FF",borderRadius:"0.5rem"},children:n}),ue("h3",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.75rem"},children:e}),ue("p",{style:{color:"#475569",lineHeight:"1.5"},children:t})]})}function kp({title:n,description:e}){return ut("div",{style:{padding:"1.25rem",borderRadius:"0.5rem",backgroundColor:"#F8FAFC",border:"1px solid #E2E8F0"},children:[ue("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"0.75rem",color:"#1E293B"},children:n}),ue("p",{style:{color:"#475569",fontSize:"0.9375rem",lineHeight:"1.5"},children:e})]})}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const cN=Symbol("Comlink.proxy"),j7=Symbol("Comlink.endpoint"),$7=Symbol("Comlink.releaseProxy"),b_=Symbol("Comlink.finalizer"),J2=Symbol("Comlink.thrown"),hN=n=>typeof n=="object"&&n!==null||typeof n=="function",q7={canHandle:n=>hN(n)&&n[cN],serialize(n){const{port1:e,port2:t}=new MessageChannel;return dN(n,e),[t,[t]]},deserialize(n){return n.start(),R3(n)}},X7={canHandle:n=>hN(n)&&J2 in n,serialize({value:n}){let e;return n instanceof Error?e={isError:!0,value:{message:n.message,name:n.name,stack:n.stack}}:e={isError:!1,value:n},[e,[]]},deserialize(n){throw n.isError?Object.assign(new Error(n.value.message),n.value):n.value}},fN=new Map([["proxy",q7],["throw",X7]]);function Y7(n,e){for(const t of n)if(e===t||t==="*"||t instanceof RegExp&&t.test(e))return!0;return!1}function dN(n,e=globalThis,t=["*"]){e.addEventListener("message",function r(i){if(!i||!i.data)return;if(!Y7(t,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:o,type:s,path:a}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(fd);let u;try{const c=a.slice(0,-1).reduce((f,d)=>f[d],n),h=a.reduce((f,d)=>f[d],n);switch(s){case"GET":u=h;break;case"SET":c[a.slice(-1)[0]]=fd(i.data.value),u=!0;break;case"APPLY":u=h.apply(c,l);break;case"CONSTRUCT":{const f=new h(...l);u=tH(f)}break;case"ENDPOINT":{const{port1:f,port2:d}=new MessageChannel;dN(n,d),u=eH(f,[f])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[J2]:0}}Promise.resolve(u).catch(c=>({value:c,[J2]:0})).then(c=>{const[h,f]=qx(c);e.postMessage(Object.assign(Object.assign({},h),{id:o}),f),s==="RELEASE"&&(e.removeEventListener("message",r),pN(e),b_ in n&&typeof n[b_]=="function"&&n[b_]())}).catch(c=>{const[h,f]=qx({value:new TypeError("Unserializable return value"),[J2]:0});e.postMessage(Object.assign(Object.assign({},h),{id:o}),f)})}),e.start&&e.start()}function Z7(n){return n.constructor.name==="MessagePort"}function pN(n){Z7(n)&&n.close()}function R3(n,e){const t=new Map;return n.addEventListener("message",function(i){const{data:o}=i;if(!o||!o.id)return;const s=t.get(o.id);if(s)try{s(o)}finally{t.delete(o.id)}}),eM(n,t,[],e)}function Ay(n){if(n)throw new Error("Proxy has been released and is not useable")}function mN(n){return cm(n,new Map,{type:"RELEASE"}).then(()=>{pN(n)})}const jx=new WeakMap,$x="FinalizationRegistry"in globalThis&&new FinalizationRegistry(n=>{const e=(jx.get(n)||0)-1;jx.set(n,e),e===0&&mN(n)});function K7(n,e){const t=(jx.get(e)||0)+1;jx.set(e,t),$x&&$x.register(n,e,n)}function J7(n){$x&&$x.unregister(n)}function eM(n,e,t=[],r=function(){}){let i=!1;const o=new Proxy(r,{get(s,a){if(Ay(i),a===$7)return()=>{J7(o),mN(n),e.clear(),i=!0};if(a==="then"){if(t.length===0)return{then:()=>o};const l=cm(n,e,{type:"GET",path:t.map(u=>u.toString())}).then(fd);return l.then.bind(l)}return eM(n,e,[...t,a])},set(s,a,l){Ay(i);const[u,c]=qx(l);return cm(n,e,{type:"SET",path:[...t,a].map(h=>h.toString()),value:u},c).then(fd)},apply(s,a,l){Ay(i);const u=t[t.length-1];if(u===j7)return cm(n,e,{type:"ENDPOINT"}).then(fd);if(u==="bind")return eM(n,e,t.slice(0,-1));const[c,h]=UC(l);return cm(n,e,{type:"APPLY",path:t.map(f=>f.toString()),argumentList:c},h).then(fd)},construct(s,a){Ay(i);const[l,u]=UC(a);return cm(n,e,{type:"CONSTRUCT",path:t.map(c=>c.toString()),argumentList:l},u).then(fd)}});return K7(o,n),o}function Q7(n){return Array.prototype.concat.apply([],n)}function UC(n){const e=n.map(qx);return[e.map(t=>t[0]),Q7(e.map(t=>t[1]))]}const gN=new WeakMap;function eH(n,e){return gN.set(n,e),n}function tH(n){return Object.assign(n,{[cN]:!0})}function qx(n){for(const[e,t]of fN)if(t.canHandle(n)){const[r,i]=t.serialize(n);return[{type:"HANDLER",name:e,value:r},i]}return[{type:"RAW",value:n},gN.get(n)||[]]}function fd(n){switch(n.type){case"HANDLER":return fN.get(n.name).deserialize(n.value);case"RAW":return n.value}}function cm(n,e,t,r){return new Promise(i=>{const o=nH();e.set(o,i),n.start&&n.start(),n.postMessage(Object.assign({id:o},t),r)})}function nH(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const g1="155",wu={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},vc={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},vN=0,tM=1,yN=2,rH=3,xN=0,Gw=1,Y0=2,Rl=3,Uc=0,Ns=1,Ol=2,iH=2,kc=0,Pd=1,nM=2,rM=3,iM=4,wN=5,dd=100,SN=101,_N=102,oM=103,sM=104,bN=200,MN=201,EN=202,AN=203,k3=204,I3=205,TN=206,CN=207,PN=208,LN=209,RN=210,kN=0,IN=1,NN=2,Xx=3,FN=4,DN=5,ON=6,BN=7,v1=0,UN=1,zN=2,Ru=0,HN=1,GN=2,VN=3,N3=4,WN=5,Vw=300,Ou=301,df=302,ig=303,Iv=304,_g=306,Nv=1e3,ps=1001,Fv=1002,Gi=1003,Yx=1004,oH=1004,Z0=1005,sH=1005,ti=1006,F3=1007,aH=1007,pf=1008,lH=1008,ku=1009,jN=1010,$N=1011,Ww=1012,D3=1013,Mc=1014,vs=1015,Rs=1016,O3=1017,B3=1018,sf=1020,qN=1021,Ls=1023,XN=1024,YN=1025,af=1026,zd=1027,U3=1028,z3=1029,ZN=1030,H3=1031,G3=1033,Q2=33776,ex=33777,tx=33778,nx=33779,aM=35840,lM=35841,uM=35842,cM=35843,KN=36196,hM=37492,fM=37496,dM=37808,pM=37809,mM=37810,gM=37811,vM=37812,yM=37813,xM=37814,wM=37815,SM=37816,_M=37817,bM=37818,MM=37819,EM=37820,AM=37821,rx=36492,JN=36283,TM=36284,CM=36285,PM=36286,QN=2200,eF=2201,tF=2202,Dv=2300,Ov=2301,ix=2302,wd=2400,Sd=2401,Bv=2402,jw=2500,V3=2501,uH=0,cH=1,hH=2,W3=3e3,lf=3001,nF=3200,rF=3201,Ef=0,iF=1,uf="",Gn="srgb",Wl="srgb-linear",j3="display-p3",fH=0,ox=7680,dH=7681,pH=7682,mH=7683,gH=34055,vH=34056,yH=5386,xH=512,wH=513,SH=514,_H=515,bH=516,MH=517,EH=518,oF=519,sF=512,aF=513,lF=514,uF=515,cF=516,hF=517,fF=518,dF=519,Uv=35044,AH=35048,TH=35040,CH=35045,PH=35049,LH=35041,RH=35046,kH=35050,IH=35042,NH="100",LM="300 es",Zx=1035,Mu=2e3,zv=2001;let Wc=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(t);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,e);e.target=null}}};const os=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let zC=1234567;const Ld=Math.PI/180,og=180/Math.PI;function ba(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(os[n&255]+os[n>>8&255]+os[n>>16&255]+os[n>>24&255]+"-"+os[e&255]+os[e>>8&255]+"-"+os[e>>16&15|64]+os[e>>24&255]+"-"+os[t&63|128]+os[t>>8&255]+"-"+os[t>>16&255]+os[t>>24&255]+os[r&255]+os[r>>8&255]+os[r>>16&255]+os[r>>24&255]).toLowerCase()}function Ii(n,e,t){return Math.max(e,Math.min(t,n))}function $3(n,e){return(n%e+e)%e}function FH(n,e,t,r,i){return r+(n-e)*(i-r)/(t-e)}function DH(n,e,t){return n!==e?(t-n)/(e-n):0}function K0(n,e,t){return(1-t)*n+t*e}function OH(n,e,t,r){return K0(n,e,1-Math.exp(-t*r))}function BH(n,e=1){return e-Math.abs($3(n,e*2)-e)}function UH(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function zH(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function HH(n,e){return n+Math.floor(Math.random()*(e-n+1))}function GH(n,e){return n+Math.random()*(e-n)}function VH(n){return n*(.5-Math.random())}function WH(n){n!==void 0&&(zC=n);let e=zC+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function jH(n){return n*Ld}function $H(n){return n*og}function RM(n){return(n&n-1)===0&&n!==0}function pF(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function Kx(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function qH(n,e,t,r,i){const o=Math.cos,s=Math.sin,a=o(t/2),l=s(t/2),u=o((e+r)/2),c=s((e+r)/2),h=o((e-r)/2),f=s((e-r)/2),d=o((r-e)/2),v=s((r-e)/2);switch(i){case"XYX":n.set(a*c,l*h,l*f,a*u);break;case"YZY":n.set(l*f,a*c,l*h,a*u);break;case"ZXZ":n.set(l*h,l*f,a*c,a*u);break;case"XZX":n.set(a*c,l*v,l*d,a*u);break;case"YXY":n.set(l*d,a*c,l*v,a*u);break;case"ZYZ":n.set(l*v,l*d,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function Js(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function qn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const XH={DEG2RAD:Ld,RAD2DEG:og,generateUUID:ba,clamp:Ii,euclideanModulo:$3,mapLinear:FH,inverseLerp:DH,lerp:K0,damp:OH,pingpong:BH,smoothstep:UH,smootherstep:zH,randInt:HH,randFloat:GH,randFloatSpread:VH,seededRandom:WH,degToRad:jH,radToDeg:$H,isPowerOfTwo:RM,ceilPowerOfTwo:pF,floorPowerOfTwo:Kx,setQuaternionFromProperEuler:qH,normalize:qn,denormalize:Js};class gt{constructor(e=0,t=0){gt.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,r=this.y,i=e.elements;return this.x=i[0]*t+i[3]*r+i[6],this.y=i[1]*t+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Ii(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y;return t*t+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const r=Math.cos(t),i=Math.sin(t),o=this.x-e.x,s=this.y-e.y;return this.x=o*r-s*i+e.x,this.y=o*i+s*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Yn{constructor(e,t,r,i,o,s,a,l,u){Yn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,r,i,o,s,a,l,u)}set(e,t,r,i,o,s,a,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=o,c[5]=l,c[6]=r,c[7]=s,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],this}extractBasis(e,t,r){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,o=this.elements,s=r[0],a=r[3],l=r[6],u=r[1],c=r[4],h=r[7],f=r[2],d=r[5],v=r[8],y=i[0],w=i[3],g=i[6],x=i[1],_=i[4],E=i[7],C=i[2],I=i[5],R=i[8];return o[0]=s*y+a*x+l*C,o[3]=s*w+a*_+l*I,o[6]=s*g+a*E+l*R,o[1]=u*y+c*x+h*C,o[4]=u*w+c*_+h*I,o[7]=u*g+c*E+h*R,o[2]=f*y+d*x+v*C,o[5]=f*w+d*_+v*I,o[8]=f*g+d*E+v*R,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t*s*c-t*a*u-r*o*c+r*a*l+i*o*u-i*s*l}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=c*s-a*u,f=a*l-c*o,d=u*o-s*l,v=t*h+r*f+i*d;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/v;return e[0]=h*y,e[1]=(i*u-c*r)*y,e[2]=(a*r-i*s)*y,e[3]=f*y,e[4]=(c*t-i*l)*y,e[5]=(i*o-a*t)*y,e[6]=d*y,e[7]=(r*l-u*t)*y,e[8]=(s*t-r*o)*y,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,r,i,o,s,a){const l=Math.cos(o),u=Math.sin(o);return this.set(r*l,r*u,-r*(l*s+u*a)+s+e,-i*u,i*l,-i*(-u*s+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(M_.makeScale(e,t)),this}rotate(e){return this.premultiply(M_.makeRotation(-e)),this}translate(e,t){return this.premultiply(M_.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,r,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<9;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<9;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const M_=new Yn;function mF(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const YH={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Tm(n,e){return new YH[n](e)}function Hv(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const HC={};function J0(n){n in HC||(HC[n]=!0,console.warn(n))}function Um(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function E_(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const ZH=new Yn().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),KH=new Yn().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function JH(n){return n.convertSRGBToLinear().applyMatrix3(KH)}function QH(n){return n.applyMatrix3(ZH).convertLinearToSRGB()}const e9={[Wl]:n=>n,[Gn]:n=>n.convertSRGBToLinear(),[j3]:JH},t9={[Wl]:n=>n,[Gn]:n=>n.convertLinearToSRGB(),[j3]:QH},Ka={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return Wl},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const r=e9[e],i=t9[t];if(r===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return i(r(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let Ip;class q3{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Ip===void 0&&(Ip=Hv("canvas")),Ip.width=e.width,Ip.height=e.height;const r=Ip.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),t=Ip}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=Hv("canvas");t.width=e.width,t.height=e.height;const r=t.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),o=i.data;for(let s=0;s<o.length;s++)o[s]=Um(o[s]/255)*255;return r.putImageData(i,0,0),t}else if(e.data){const t=e.data.slice(0);for(let r=0;r<t.length;r++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[r]=Math.floor(Um(t[r]/255)*255):t[r]=Um(t[r]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let n9=0;class _d{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:n9++}),this.uuid=ba(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let o;if(Array.isArray(i)){o=[];for(let s=0,a=i.length;s<a;s++)i[s].isDataTexture?o.push(A_(i[s].image)):o.push(A_(i[s]))}else o=A_(i);r.url=o}return t||(e.images[this.uuid]=r),r}}function A_(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?q3.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let r9=0;class Fi extends Wc{constructor(e=Fi.DEFAULT_IMAGE,t=Fi.DEFAULT_MAPPING,r=ps,i=ps,o=ti,s=pf,a=Ls,l=ku,u=Fi.DEFAULT_ANISOTROPY,c=uf){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:r9++}),this.uuid=ba(),this.name="",this.source=new _d(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=o,this.minFilter=s,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new gt(0,0),this.repeat=new gt(1,1),this.center=new gt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Yn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof c=="string"?this.colorSpace=c:(J0("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===lf?Gn:uf),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),t||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Vw)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Nv:e.x=e.x-Math.floor(e.x);break;case ps:e.x=e.x<0?0:1;break;case Fv:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Nv:e.y=e.y-Math.floor(e.y);break;case ps:e.y=e.y<0?0:1;break;case Fv:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return J0("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Gn?lf:W3}set encoding(e){J0("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===lf?Gn:uf}}Fi.DEFAULT_IMAGE=null;Fi.DEFAULT_MAPPING=Vw;Fi.DEFAULT_ANISOTROPY=1;class Nr{constructor(e=0,t=0,r=0,i=1){Nr.prototype.isVector4=!0,this.x=e,this.y=t,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,r,i){return this.x=e,this.y=t,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,o=this.w,s=e.elements;return this.x=s[0]*t+s[4]*r+s[8]*i+s[12]*o,this.y=s[1]*t+s[5]*r+s[9]*i+s[13]*o,this.z=s[2]*t+s[6]*r+s[10]*i+s[14]*o,this.w=s[3]*t+s[7]*r+s[11]*i+s[15]*o,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,r,i,o;const l=e.elements,u=l[0],c=l[4],h=l[8],f=l[1],d=l[5],v=l[9],y=l[2],w=l[6],g=l[10];if(Math.abs(c-f)<.01&&Math.abs(h-y)<.01&&Math.abs(v-w)<.01){if(Math.abs(c+f)<.1&&Math.abs(h+y)<.1&&Math.abs(v+w)<.1&&Math.abs(u+d+g-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const _=(u+1)/2,E=(d+1)/2,C=(g+1)/2,I=(c+f)/4,R=(h+y)/4,L=(v+w)/4;return _>E&&_>C?_<.01?(r=0,i=.707106781,o=.707106781):(r=Math.sqrt(_),i=I/r,o=R/r):E>C?E<.01?(r=.707106781,i=0,o=.707106781):(i=Math.sqrt(E),r=I/i,o=L/i):C<.01?(r=.707106781,i=.707106781,o=0):(o=Math.sqrt(C),r=R/o,i=L/o),this.set(r,i,o,t),this}let x=Math.sqrt((w-v)*(w-v)+(h-y)*(h-y)+(f-c)*(f-c));return Math.abs(x)<.001&&(x=1),this.x=(w-v)/x,this.y=(h-y)/x,this.z=(f-c)/x,this.w=Math.acos((u+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this.w=e.w+(t.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class gF extends Wc{constructor(e=1,t=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Nr(0,0,e,t),this.scissorTest=!1,this.viewport=new Nr(0,0,e,t);const i={width:e,height:t,depth:1};r.encoding!==void 0&&(J0("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===lf?Gn:uf),this.texture=new Fi(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:ti,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,t,r=1){(this.width!==e||this.height!==t||this.depth!==r)&&(this.width=e,this.height=t,this.depth=r,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new _d(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class jl extends gF{constructor(e=1,t=1,r={}){super(e,t,r),this.isWebGLRenderTarget=!0}}class $w extends Fi{constructor(e=null,t=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Gi,this.minFilter=Gi,this.wrapR=ps,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class i9 extends jl{constructor(e=1,t=1,r=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new $w(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class X3 extends Fi{constructor(e=null,t=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:r,depth:i},this.magFilter=Gi,this.minFilter=Gi,this.wrapR=ps,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class o9 extends jl{constructor(e=1,t=1,r=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new X3(null,e,t,r),this.texture.isRenderTargetTexture=!0}}class s9 extends jl{constructor(e=1,t=1,r=1,i={}){super(e,t,i),this.isWebGLMultipleRenderTargets=!0;const o=this.texture;this.texture=[];for(let s=0;s<r;s++)this.texture[s]=o.clone(),this.texture[s].isRenderTargetTexture=!0}setSize(e,t,r=1){if(this.width!==e||this.height!==t||this.depth!==r){this.width=e,this.height=t,this.depth=r;for(let i=0,o=this.texture.length;i<o;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,r=e.texture.length;t<r;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class ys{constructor(e=0,t=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=r,this._w=i}static slerpFlat(e,t,r,i,o,s,a){let l=r[i+0],u=r[i+1],c=r[i+2],h=r[i+3];const f=o[s+0],d=o[s+1],v=o[s+2],y=o[s+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h;return}if(a===1){e[t+0]=f,e[t+1]=d,e[t+2]=v,e[t+3]=y;return}if(h!==y||l!==f||u!==d||c!==v){let w=1-a;const g=l*f+u*d+c*v+h*y,x=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){const C=Math.sqrt(_),I=Math.atan2(C,g*x);w=Math.sin(w*I)/C,a=Math.sin(a*I)/C}const E=a*x;if(l=l*w+f*E,u=u*w+d*E,c=c*w+v*E,h=h*w+y*E,w===1-a){const C=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=C,u*=C,c*=C,h*=C}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=h}static multiplyQuaternionsFlat(e,t,r,i,o,s){const a=r[i],l=r[i+1],u=r[i+2],c=r[i+3],h=o[s],f=o[s+1],d=o[s+2],v=o[s+3];return e[t]=a*v+c*h+l*d-u*f,e[t+1]=l*v+c*f+u*h-a*d,e[t+2]=u*v+c*d+a*f-l*h,e[t+3]=c*v-a*h-l*f-u*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,r,i){return this._x=e,this._y=t,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const r=e._x,i=e._y,o=e._z,s=e._order,a=Math.cos,l=Math.sin,u=a(r/2),c=a(i/2),h=a(o/2),f=l(r/2),d=l(i/2),v=l(o/2);switch(s){case"XYZ":this._x=f*c*h+u*d*v,this._y=u*d*h-f*c*v,this._z=u*c*v+f*d*h,this._w=u*c*h-f*d*v;break;case"YXZ":this._x=f*c*h+u*d*v,this._y=u*d*h-f*c*v,this._z=u*c*v-f*d*h,this._w=u*c*h+f*d*v;break;case"ZXY":this._x=f*c*h-u*d*v,this._y=u*d*h+f*c*v,this._z=u*c*v+f*d*h,this._w=u*c*h-f*d*v;break;case"ZYX":this._x=f*c*h-u*d*v,this._y=u*d*h+f*c*v,this._z=u*c*v-f*d*h,this._w=u*c*h+f*d*v;break;case"YZX":this._x=f*c*h+u*d*v,this._y=u*d*h+f*c*v,this._z=u*c*v-f*d*h,this._w=u*c*h-f*d*v;break;case"XZY":this._x=f*c*h-u*d*v,this._y=u*d*h-f*c*v,this._z=u*c*v+f*d*h,this._w=u*c*h+f*d*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const r=t/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,r=t[0],i=t[4],o=t[8],s=t[1],a=t[5],l=t[9],u=t[2],c=t[6],h=t[10],f=r+a+h;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(c-l)*d,this._y=(o-u)*d,this._z=(s-i)*d}else if(r>a&&r>h){const d=2*Math.sqrt(1+r-a-h);this._w=(c-l)/d,this._x=.25*d,this._y=(i+s)/d,this._z=(o+u)/d}else if(a>h){const d=2*Math.sqrt(1+a-r-h);this._w=(o-u)/d,this._x=(i+s)/d,this._y=.25*d,this._z=(l+c)/d}else{const d=2*Math.sqrt(1+h-r-a);this._w=(s-i)/d,this._x=(o+u)/d,this._y=(l+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let r=e.dot(t)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ii(this.dot(e),-1,1)))}rotateTowards(e,t){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,t/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const r=e._x,i=e._y,o=e._z,s=e._w,a=t._x,l=t._y,u=t._z,c=t._w;return this._x=r*c+s*a+i*u-o*l,this._y=i*c+s*l+o*a-r*u,this._z=o*c+s*u+r*l-i*a,this._w=s*c-r*a-i*l-o*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const r=this._x,i=this._y,o=this._z,s=this._w;let a=s*e._w+r*e._x+i*e._y+o*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=r,this._y=i,this._z=o,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-t;return this._w=d*s+t*this._w,this._x=d*r+t*this._x,this._y=d*i+t*this._y,this._z=d*o+t*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),h=Math.sin((1-t)*c)/u,f=Math.sin(t*c)/u;return this._w=s*h+this._w*f,this._x=r*h+this._x*f,this._y=i*h+this._y*f,this._z=o*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,t,r){return this.copy(e).slerp(t,r)}random(){const e=Math.random(),t=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(t*Math.cos(i),r*Math.sin(o),r*Math.cos(o),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ge{constructor(e=0,t=0,r=0){ge.prototype.isVector3=!0,this.x=e,this.y=t,this.z=r}set(e,t,r){return r===void 0&&(r=this.z),this.x=e,this.y=t,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(GC.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(GC.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[3]*r+o[6]*i,this.y=o[1]*t+o[4]*r+o[7]*i,this.z=o[2]*t+o[5]*r+o[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,r=this.y,i=this.z,o=e.elements,s=1/(o[3]*t+o[7]*r+o[11]*i+o[15]);return this.x=(o[0]*t+o[4]*r+o[8]*i+o[12])*s,this.y=(o[1]*t+o[5]*r+o[9]*i+o[13])*s,this.z=(o[2]*t+o[6]*r+o[10]*i+o[14])*s,this}applyQuaternion(e){const t=this.x,r=this.y,i=this.z,o=e.x,s=e.y,a=e.z,l=e.w,u=l*t+s*i-a*r,c=l*r+a*t-o*i,h=l*i+o*r-s*t,f=-o*t-s*r-a*i;return this.x=u*l+f*-o+c*-a-h*-s,this.y=c*l+f*-s+h*-o-u*-a,this.z=h*l+f*-a+u*-s-c*-o,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,r=this.y,i=this.z,o=e.elements;return this.x=o[0]*t+o[4]*r+o[8]*i,this.y=o[1]*t+o[5]*r+o[9]*i,this.z=o[2]*t+o[6]*r+o[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(t,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,r){return this.x=e.x+(t.x-e.x)*r,this.y=e.y+(t.y-e.y)*r,this.z=e.z+(t.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const r=e.x,i=e.y,o=e.z,s=t.x,a=t.y,l=t.z;return this.x=i*l-o*a,this.y=o*s-r*l,this.z=r*a-i*s,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const r=e.dot(this)/t;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return T_.copy(this).projectOnVector(e),this.sub(T_)}reflect(e){return this.sub(T_.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const r=this.dot(e)/t;return Math.acos(Ii(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return t*t+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,r){const i=Math.sin(t)*e;return this.x=i*Math.sin(r),this.y=Math.cos(t)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,r){return this.x=e*Math.sin(t),this.y=r,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=r,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(t),this.y=r*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const T_=new ge,GC=new ys;class zu{constructor(e=new ge(1/0,1/0,1/0),t=new ge(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t+=3)this.expandByPoint(ac.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,r=e.count;t<r;t++)this.expandByPoint(ac.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=ac.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Np.copy(e.boundingBox),Np.applyMatrix4(e.matrixWorld),this.union(Np);else{const i=e.geometry;if(i!==void 0)if(t&&i.attributes!==void 0&&i.attributes.position!==void 0){const o=i.attributes.position;for(let s=0,a=o.count;s<a;s++)ac.fromBufferAttribute(o,s).applyMatrix4(e.matrixWorld),this.expandByPoint(ac)}else i.boundingBox===null&&i.computeBoundingBox(),Np.copy(i.boundingBox),Np.applyMatrix4(e.matrixWorld),this.union(Np)}const r=e.children;for(let i=0,o=r.length;i<o;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,ac),ac.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,r;return e.normal.x>0?(t=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),t<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(a0),Ty.subVectors(this.max,a0),Fp.subVectors(e.a,a0),Dp.subVectors(e.b,a0),Op.subVectors(e.c,a0),wh.subVectors(Dp,Fp),Sh.subVectors(Op,Dp),Zf.subVectors(Fp,Op);let t=[0,-wh.z,wh.y,0,-Sh.z,Sh.y,0,-Zf.z,Zf.y,wh.z,0,-wh.x,Sh.z,0,-Sh.x,Zf.z,0,-Zf.x,-wh.y,wh.x,0,-Sh.y,Sh.x,0,-Zf.y,Zf.x,0];return!C_(t,Fp,Dp,Op,Ty)||(t=[1,0,0,0,1,0,0,0,1],!C_(t,Fp,Dp,Op,Ty))?!1:(Cy.crossVectors(wh,Sh),t=[Cy.x,Cy.y,Cy.z],C_(t,Fp,Dp,Op,Ty))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ac).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(ac).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(sc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),sc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),sc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),sc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),sc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),sc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),sc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),sc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(sc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const sc=[new ge,new ge,new ge,new ge,new ge,new ge,new ge,new ge],ac=new ge,Np=new zu,Fp=new ge,Dp=new ge,Op=new ge,wh=new ge,Sh=new ge,Zf=new ge,a0=new ge,Ty=new ge,Cy=new ge,Kf=new ge;function C_(n,e,t,r,i){for(let o=0,s=n.length-3;o<=s;o+=3){Kf.fromArray(n,o);const a=i.x*Math.abs(Kf.x)+i.y*Math.abs(Kf.y)+i.z*Math.abs(Kf.z),l=e.dot(Kf),u=t.dot(Kf),c=r.dot(Kf);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const a9=new zu,l0=new ge,P_=new ge;class Zl{constructor(e=new ge,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const r=this.center;t!==void 0?r.copy(t):a9.setFromPoints(e).getCenter(r);let i=0;for(let o=0,s=e.length;o<s;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const r=this.center.distanceToSquared(e);return t.copy(e),r>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;l0.subVectors(e,this.center);const t=l0.lengthSq();if(t>this.radius*this.radius){const r=Math.sqrt(t),i=(r-this.radius)*.5;this.center.addScaledVector(l0,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(P_.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(l0.copy(e.center).add(P_)),this.expandByPoint(l0.copy(e.center).sub(P_))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const lc=new ge,L_=new ge,Py=new ge,_h=new ge,R_=new ge,Ly=new ge,k_=new ge;class Qd{constructor(e=new ge,t=new ge(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,lc)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const r=t.dot(this.direction);return r<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=lc.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(lc.copy(this.origin).addScaledVector(this.direction,t),lc.distanceToSquared(e))}distanceSqToSegment(e,t,r,i){L_.copy(e).add(t).multiplyScalar(.5),Py.copy(t).sub(e).normalize(),_h.copy(this.origin).sub(L_);const o=e.distanceTo(t)*.5,s=-this.direction.dot(Py),a=_h.dot(this.direction),l=-_h.dot(Py),u=_h.lengthSq(),c=Math.abs(1-s*s);let h,f,d,v;if(c>0)if(h=s*l-a,f=s*a-l,v=o*c,h>=0)if(f>=-v)if(f<=v){const y=1/c;h*=y,f*=y,d=h*(h+s*f+2*a)+f*(s*h+f+2*l)+u}else f=o,h=Math.max(0,-(s*f+a)),d=-h*h+f*(f+2*l)+u;else f=-o,h=Math.max(0,-(s*f+a)),d=-h*h+f*(f+2*l)+u;else f<=-v?(h=Math.max(0,-(-s*o+a)),f=h>0?-o:Math.min(Math.max(-o,-l),o),d=-h*h+f*(f+2*l)+u):f<=v?(h=0,f=Math.min(Math.max(-o,-l),o),d=f*(f+2*l)+u):(h=Math.max(0,-(s*o+a)),f=h>0?o:Math.min(Math.max(-o,-l),o),d=-h*h+f*(f+2*l)+u);else f=s>0?-o:o,h=Math.max(0,-(s*f+a)),d=-h*h+f*(f+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(L_).addScaledVector(Py,f),d}intersectSphere(e,t){lc.subVectors(e.center,this.origin);const r=lc.dot(this.direction),i=lc.dot(lc)-r*r,o=e.radius*e.radius;if(i>o)return null;const s=Math.sqrt(o-i),a=r-s,l=r+s;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/t;return r>=0?r:null}intersectPlane(e,t){const r=this.distanceToPlane(e);return r===null?null:this.at(r,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let r,i,o,s,a,l;const u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,f=this.origin;return u>=0?(r=(e.min.x-f.x)*u,i=(e.max.x-f.x)*u):(r=(e.max.x-f.x)*u,i=(e.min.x-f.x)*u),c>=0?(o=(e.min.y-f.y)*c,s=(e.max.y-f.y)*c):(o=(e.max.y-f.y)*c,s=(e.min.y-f.y)*c),r>s||o>i||((o>r||isNaN(r))&&(r=o),(s<i||isNaN(i))&&(i=s),h>=0?(a=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(a=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,t)}intersectsBox(e){return this.intersectBox(e,lc)!==null}intersectTriangle(e,t,r,i,o){R_.subVectors(t,e),Ly.subVectors(r,e),k_.crossVectors(R_,Ly);let s=this.direction.dot(k_),a;if(s>0){if(i)return null;a=1}else if(s<0)a=-1,s=-s;else return null;_h.subVectors(this.origin,e);const l=a*this.direction.dot(Ly.crossVectors(_h,Ly));if(l<0)return null;const u=a*this.direction.dot(R_.cross(_h));if(u<0||l+u>s)return null;const c=-a*_h.dot(k_);return c<0?null:this.at(c/s,o)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class zn{constructor(e,t,r,i,o,s,a,l,u,c,h,f,d,v,y,w){zn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,r,i,o,s,a,l,u,c,h,f,d,v,y,w)}set(e,t,r,i,o,s,a,l,u,c,h,f,d,v,y,w){const g=this.elements;return g[0]=e,g[4]=t,g[8]=r,g[12]=i,g[1]=o,g[5]=s,g[9]=a,g[13]=l,g[2]=u,g[6]=c,g[10]=h,g[14]=f,g[3]=d,g[7]=v,g[11]=y,g[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new zn().fromArray(this.elements)}copy(e){const t=this.elements,r=e.elements;return t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t[4]=r[4],t[5]=r[5],t[6]=r[6],t[7]=r[7],t[8]=r[8],t[9]=r[9],t[10]=r[10],t[11]=r[11],t[12]=r[12],t[13]=r[13],t[14]=r[14],t[15]=r[15],this}copyPosition(e){const t=this.elements,r=e.elements;return t[12]=r[12],t[13]=r[13],t[14]=r[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,r){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,t,r){return this.set(e.x,t.x,r.x,0,e.y,t.y,r.y,0,e.z,t.z,r.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,r=e.elements,i=1/Bp.setFromMatrixColumn(e,0).length(),o=1/Bp.setFromMatrixColumn(e,1).length(),s=1/Bp.setFromMatrixColumn(e,2).length();return t[0]=r[0]*i,t[1]=r[1]*i,t[2]=r[2]*i,t[3]=0,t[4]=r[4]*o,t[5]=r[5]*o,t[6]=r[6]*o,t[7]=0,t[8]=r[8]*s,t[9]=r[9]*s,t[10]=r[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,r=e.x,i=e.y,o=e.z,s=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(o),h=Math.sin(o);if(e.order==="XYZ"){const f=s*c,d=s*h,v=a*c,y=a*h;t[0]=l*c,t[4]=-l*h,t[8]=u,t[1]=d+v*u,t[5]=f-y*u,t[9]=-a*l,t[2]=y-f*u,t[6]=v+d*u,t[10]=s*l}else if(e.order==="YXZ"){const f=l*c,d=l*h,v=u*c,y=u*h;t[0]=f+y*a,t[4]=v*a-d,t[8]=s*u,t[1]=s*h,t[5]=s*c,t[9]=-a,t[2]=d*a-v,t[6]=y+f*a,t[10]=s*l}else if(e.order==="ZXY"){const f=l*c,d=l*h,v=u*c,y=u*h;t[0]=f-y*a,t[4]=-s*h,t[8]=v+d*a,t[1]=d+v*a,t[5]=s*c,t[9]=y-f*a,t[2]=-s*u,t[6]=a,t[10]=s*l}else if(e.order==="ZYX"){const f=s*c,d=s*h,v=a*c,y=a*h;t[0]=l*c,t[4]=v*u-d,t[8]=f*u+y,t[1]=l*h,t[5]=y*u+f,t[9]=d*u-v,t[2]=-u,t[6]=a*l,t[10]=s*l}else if(e.order==="YZX"){const f=s*l,d=s*u,v=a*l,y=a*u;t[0]=l*c,t[4]=y-f*h,t[8]=v*h+d,t[1]=h,t[5]=s*c,t[9]=-a*c,t[2]=-u*c,t[6]=d*h+v,t[10]=f-y*h}else if(e.order==="XZY"){const f=s*l,d=s*u,v=a*l,y=a*u;t[0]=l*c,t[4]=-h,t[8]=u*c,t[1]=f*h+y,t[5]=s*c,t[9]=d*h-v,t[2]=v*h-d,t[6]=a*c,t[10]=y*h+f}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(l9,e,u9)}lookAt(e,t,r){const i=this.elements;return va.subVectors(e,t),va.lengthSq()===0&&(va.z=1),va.normalize(),bh.crossVectors(r,va),bh.lengthSq()===0&&(Math.abs(r.z)===1?va.x+=1e-4:va.z+=1e-4,va.normalize(),bh.crossVectors(r,va)),bh.normalize(),Ry.crossVectors(va,bh),i[0]=bh.x,i[4]=Ry.x,i[8]=va.x,i[1]=bh.y,i[5]=Ry.y,i[9]=va.y,i[2]=bh.z,i[6]=Ry.z,i[10]=va.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const r=e.elements,i=t.elements,o=this.elements,s=r[0],a=r[4],l=r[8],u=r[12],c=r[1],h=r[5],f=r[9],d=r[13],v=r[2],y=r[6],w=r[10],g=r[14],x=r[3],_=r[7],E=r[11],C=r[15],I=i[0],R=i[4],L=i[8],k=i[12],D=i[1],N=i[5],B=i[9],G=i[13],V=i[2],$=i[6],J=i[10],le=i[14],H=i[3],q=i[7],Z=i[11],oe=i[15];return o[0]=s*I+a*D+l*V+u*H,o[4]=s*R+a*N+l*$+u*q,o[8]=s*L+a*B+l*J+u*Z,o[12]=s*k+a*G+l*le+u*oe,o[1]=c*I+h*D+f*V+d*H,o[5]=c*R+h*N+f*$+d*q,o[9]=c*L+h*B+f*J+d*Z,o[13]=c*k+h*G+f*le+d*oe,o[2]=v*I+y*D+w*V+g*H,o[6]=v*R+y*N+w*$+g*q,o[10]=v*L+y*B+w*J+g*Z,o[14]=v*k+y*G+w*le+g*oe,o[3]=x*I+_*D+E*V+C*H,o[7]=x*R+_*N+E*$+C*q,o[11]=x*L+_*B+E*J+C*Z,o[15]=x*k+_*G+E*le+C*oe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],r=e[4],i=e[8],o=e[12],s=e[1],a=e[5],l=e[9],u=e[13],c=e[2],h=e[6],f=e[10],d=e[14],v=e[3],y=e[7],w=e[11],g=e[15];return v*(+o*l*h-i*u*h-o*a*f+r*u*f+i*a*d-r*l*d)+y*(+t*l*d-t*u*f+o*s*f-i*s*d+i*u*c-o*l*c)+w*(+t*u*h-t*a*d-o*s*h+r*s*d+o*a*c-r*u*c)+g*(-i*a*c-t*l*h+t*a*f+i*s*h-r*s*f+r*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=r),this}invert(){const e=this.elements,t=e[0],r=e[1],i=e[2],o=e[3],s=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],d=e[11],v=e[12],y=e[13],w=e[14],g=e[15],x=h*w*u-y*f*u+y*l*d-a*w*d-h*l*g+a*f*g,_=v*f*u-c*w*u-v*l*d+s*w*d+c*l*g-s*f*g,E=c*y*u-v*h*u+v*a*d-s*y*d-c*a*g+s*h*g,C=v*h*l-c*y*l-v*a*f+s*y*f+c*a*w-s*h*w,I=t*x+r*_+i*E+o*C;if(I===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/I;return e[0]=x*R,e[1]=(y*f*o-h*w*o-y*i*d+r*w*d+h*i*g-r*f*g)*R,e[2]=(a*w*o-y*l*o+y*i*u-r*w*u-a*i*g+r*l*g)*R,e[3]=(h*l*o-a*f*o-h*i*u+r*f*u+a*i*d-r*l*d)*R,e[4]=_*R,e[5]=(c*w*o-v*f*o+v*i*d-t*w*d-c*i*g+t*f*g)*R,e[6]=(v*l*o-s*w*o-v*i*u+t*w*u+s*i*g-t*l*g)*R,e[7]=(s*f*o-c*l*o+c*i*u-t*f*u-s*i*d+t*l*d)*R,e[8]=E*R,e[9]=(v*h*o-c*y*o-v*r*d+t*y*d+c*r*g-t*h*g)*R,e[10]=(s*y*o-v*a*o+v*r*u-t*y*u-s*r*g+t*a*g)*R,e[11]=(c*a*o-s*h*o-c*r*u+t*h*u+s*r*d-t*a*d)*R,e[12]=C*R,e[13]=(c*y*i-v*h*i+v*r*f-t*y*f-c*r*w+t*h*w)*R,e[14]=(v*a*i-s*y*i-v*r*l+t*y*l+s*r*w-t*a*w)*R,e[15]=(s*h*i-c*a*i+c*r*l-t*h*l-s*r*f+t*a*f)*R,this}scale(e){const t=this.elements,r=e.x,i=e.y,o=e.z;return t[0]*=r,t[4]*=i,t[8]*=o,t[1]*=r,t[5]*=i,t[9]*=o,t[2]*=r,t[6]*=i,t[10]*=o,t[3]*=r,t[7]*=i,t[11]*=o,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,r,i))}makeTranslation(e,t,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,r,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,t,-r,0,0,r,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,0,r,0,0,1,0,0,-r,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),r=Math.sin(e);return this.set(t,-r,0,0,r,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const r=Math.cos(t),i=Math.sin(t),o=1-r,s=e.x,a=e.y,l=e.z,u=o*s,c=o*a;return this.set(u*s+r,u*a-i*l,u*l+i*a,0,u*a+i*l,c*a+r,c*l-i*s,0,u*l-i*a,c*l+i*s,o*l*l+r,0,0,0,0,1),this}makeScale(e,t,r){return this.set(e,0,0,0,0,t,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,t,r,i,o,s){return this.set(1,r,o,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,r){const i=this.elements,o=t._x,s=t._y,a=t._z,l=t._w,u=o+o,c=s+s,h=a+a,f=o*u,d=o*c,v=o*h,y=s*c,w=s*h,g=a*h,x=l*u,_=l*c,E=l*h,C=r.x,I=r.y,R=r.z;return i[0]=(1-(y+g))*C,i[1]=(d+E)*C,i[2]=(v-_)*C,i[3]=0,i[4]=(d-E)*I,i[5]=(1-(f+g))*I,i[6]=(w+x)*I,i[7]=0,i[8]=(v+_)*R,i[9]=(w-x)*R,i[10]=(1-(f+y))*R,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,r){const i=this.elements;let o=Bp.set(i[0],i[1],i[2]).length();const s=Bp.set(i[4],i[5],i[6]).length(),a=Bp.set(i[8],i[9],i[10]).length();this.determinant()<0&&(o=-o),e.x=i[12],e.y=i[13],e.z=i[14],bl.copy(this);const u=1/o,c=1/s,h=1/a;return bl.elements[0]*=u,bl.elements[1]*=u,bl.elements[2]*=u,bl.elements[4]*=c,bl.elements[5]*=c,bl.elements[6]*=c,bl.elements[8]*=h,bl.elements[9]*=h,bl.elements[10]*=h,t.setFromRotationMatrix(bl),r.x=o,r.y=s,r.z=a,this}makePerspective(e,t,r,i,o,s,a=Mu){const l=this.elements,u=2*o/(t-e),c=2*o/(r-i),h=(t+e)/(t-e),f=(r+i)/(r-i);let d,v;if(a===Mu)d=-(s+o)/(s-o),v=-2*s*o/(s-o);else if(a===zv)d=-s/(s-o),v=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=c,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,r,i,o,s,a=Mu){const l=this.elements,u=1/(t-e),c=1/(r-i),h=1/(s-o),f=(t+e)*u,d=(r+i)*c;let v,y;if(a===Mu)v=(s+o)*h,y=-2*h;else if(a===zv)v=o*h,y=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=y,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,r=e.elements;for(let i=0;i<16;i++)if(t[i]!==r[i])return!1;return!0}fromArray(e,t=0){for(let r=0;r<16;r++)this.elements[r]=e[r+t];return this}toArray(e=[],t=0){const r=this.elements;return e[t]=r[0],e[t+1]=r[1],e[t+2]=r[2],e[t+3]=r[3],e[t+4]=r[4],e[t+5]=r[5],e[t+6]=r[6],e[t+7]=r[7],e[t+8]=r[8],e[t+9]=r[9],e[t+10]=r[10],e[t+11]=r[11],e[t+12]=r[12],e[t+13]=r[13],e[t+14]=r[14],e[t+15]=r[15],e}}const Bp=new ge,bl=new zn,l9=new ge(0,0,0),u9=new ge(1,1,1),bh=new ge,Ry=new ge,va=new ge,VC=new zn,WC=new ys;class y1{constructor(e=0,t=0,r=0,i=y1.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,r,i=this._order){return this._x=e,this._y=t,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,r=!0){const i=e.elements,o=i[0],s=i[4],a=i[8],l=i[1],u=i[5],c=i[9],h=i[2],f=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(Ii(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Ii(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(Ii(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-s,u)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-Ii(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-s,u));break;case"YZX":this._z=Math.asin(Ii(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Ii(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(a,o)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,r){return VC.makeRotationFromQuaternion(e),this.setFromRotationMatrix(VC,t,r)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return WC.setFromEuler(this),this.setFromQuaternion(WC,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}y1.DEFAULT_ORDER="XYZ";class Rd{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let c9=0;const jC=new ge,Up=new ys,uc=new zn,ky=new ge,u0=new ge,h9=new ge,f9=new ys,$C=new ge(1,0,0),qC=new ge(0,1,0),XC=new ge(0,0,1),d9={type:"added"},YC={type:"removed"};class cr extends Wc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:c9++}),this.uuid=ba(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=cr.DEFAULT_UP.clone();const e=new ge,t=new y1,r=new ys,i=new ge(1,1,1);function o(){r.setFromEuler(t,!1)}function s(){t.setFromQuaternion(r,void 0,!1)}t._onChange(o),r._onChange(s),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new zn},normalMatrix:{value:new Yn}}),this.matrix=new zn,this.matrixWorld=new zn,this.matrixAutoUpdate=cr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Rd,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Up.setFromAxisAngle(e,t),this.quaternion.multiply(Up),this}rotateOnWorldAxis(e,t){return Up.setFromAxisAngle(e,t),this.quaternion.premultiply(Up),this}rotateX(e){return this.rotateOnAxis($C,e)}rotateY(e){return this.rotateOnAxis(qC,e)}rotateZ(e){return this.rotateOnAxis(XC,e)}translateOnAxis(e,t){return jC.copy(e).applyQuaternion(this.quaternion),this.position.add(jC.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis($C,e)}translateY(e){return this.translateOnAxis(qC,e)}translateZ(e){return this.translateOnAxis(XC,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(uc.copy(this.matrixWorld).invert())}lookAt(e,t,r){e.isVector3?ky.copy(e):ky.set(e,t,r);const i=this.parent;this.updateWorldMatrix(!0,!1),u0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?uc.lookAt(u0,ky,this.up):uc.lookAt(ky,u0,this.up),this.quaternion.setFromRotationMatrix(uc),i&&(uc.extractRotation(i.matrixWorld),Up.setFromRotationMatrix(uc),this.quaternion.premultiply(Up.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(d9)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(YC)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(YC)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),uc.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),uc.multiply(e.parent.matrixWorld)),e.applyMatrix4(uc),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let r=0,i=this.children.length;r<i;r++){const s=this.children[r].getObjectByProperty(e,t);if(s!==void 0)return s}}getObjectsByProperty(e,t){let r=[];this[e]===t&&r.push(this);for(let i=0,o=this.children.length;i<o;i++){const s=this.children[i].getObjectsByProperty(e,t);s.length>0&&(r=r.concat(s))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(u0,e,h9),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(u0,f9,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let r=0,i=t.length;r<i;r++)t[r].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let r=0,i=t.length;r<i;r++){const o=t[r];(o.matrixWorldAutoUpdate===!0||e===!0)&&o.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const i=this.children;for(let o=0,s=i.length;o<s;o++){const a=i[o];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",r={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function o(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=o(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const h=l[u];o(e.shapes,h)}else o(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(o(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(o(e.materials,this.material[l]));i.material=a}else i.material=o(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(o(e.animations,l))}}if(t){const a=s(e.geometries),l=s(e.materials),u=s(e.textures),c=s(e.images),h=s(e.shapes),f=s(e.skeletons),d=s(e.animations),v=s(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),d.length>0&&(r.animations=d),v.length>0&&(r.nodes=v)}return r.object=i,r;function s(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}cr.DEFAULT_UP=new ge(0,1,0);cr.DEFAULT_MATRIX_AUTO_UPDATE=!0;cr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ml=new ge,cc=new ge,I_=new ge,hc=new ge,zp=new ge,Hp=new ge,ZC=new ge,N_=new ge,F_=new ge,D_=new ge;let Iy=!1;class Ks{constructor(e=new ge,t=new ge,r=new ge){this.a=e,this.b=t,this.c=r}static getNormal(e,t,r,i){i.subVectors(r,t),Ml.subVectors(e,t),i.cross(Ml);const o=i.lengthSq();return o>0?i.multiplyScalar(1/Math.sqrt(o)):i.set(0,0,0)}static getBarycoord(e,t,r,i,o){Ml.subVectors(i,t),cc.subVectors(r,t),I_.subVectors(e,t);const s=Ml.dot(Ml),a=Ml.dot(cc),l=Ml.dot(I_),u=cc.dot(cc),c=cc.dot(I_),h=s*u-a*a;if(h===0)return o.set(-2,-1,-1);const f=1/h,d=(u*l-a*c)*f,v=(s*c-a*l)*f;return o.set(1-d-v,v,d)}static containsPoint(e,t,r,i){return this.getBarycoord(e,t,r,i,hc),hc.x>=0&&hc.y>=0&&hc.x+hc.y<=1}static getUV(e,t,r,i,o,s,a,l){return Iy===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Iy=!0),this.getInterpolation(e,t,r,i,o,s,a,l)}static getInterpolation(e,t,r,i,o,s,a,l){return this.getBarycoord(e,t,r,i,hc),l.setScalar(0),l.addScaledVector(o,hc.x),l.addScaledVector(s,hc.y),l.addScaledVector(a,hc.z),l}static isFrontFacing(e,t,r,i){return Ml.subVectors(r,t),cc.subVectors(e,t),Ml.cross(cc).dot(i)<0}set(e,t,r){return this.a.copy(e),this.b.copy(t),this.c.copy(r),this}setFromPointsAndIndices(e,t,r,i){return this.a.copy(e[t]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,r,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ml.subVectors(this.c,this.b),cc.subVectors(this.a,this.b),Ml.cross(cc).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ks.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Ks.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,r,i,o){return Iy===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Iy=!0),Ks.getInterpolation(e,this.a,this.b,this.c,t,r,i,o)}getInterpolation(e,t,r,i,o){return Ks.getInterpolation(e,this.a,this.b,this.c,t,r,i,o)}containsPoint(e){return Ks.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ks.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const r=this.a,i=this.b,o=this.c;let s,a;zp.subVectors(i,r),Hp.subVectors(o,r),N_.subVectors(e,r);const l=zp.dot(N_),u=Hp.dot(N_);if(l<=0&&u<=0)return t.copy(r);F_.subVectors(e,i);const c=zp.dot(F_),h=Hp.dot(F_);if(c>=0&&h<=c)return t.copy(i);const f=l*h-c*u;if(f<=0&&l>=0&&c<=0)return s=l/(l-c),t.copy(r).addScaledVector(zp,s);D_.subVectors(e,o);const d=zp.dot(D_),v=Hp.dot(D_);if(v>=0&&d<=v)return t.copy(o);const y=d*u-l*v;if(y<=0&&u>=0&&v<=0)return a=u/(u-v),t.copy(r).addScaledVector(Hp,a);const w=c*v-d*h;if(w<=0&&h-c>=0&&d-v>=0)return ZC.subVectors(o,i),a=(h-c)/(h-c+(d-v)),t.copy(i).addScaledVector(ZC,a);const g=1/(w+y+f);return s=y*g,a=f*g,t.copy(r).addScaledVector(zp,s).addScaledVector(Hp,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let p9=0;class Zo extends Wc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:p9++}),this.uuid=ba(),this.name="",this.type="Material",this.blending=Pd,this.side=Uc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=k3,this.blendDst=I3,this.blendEquation=dd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Xx,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=oF,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ox,this.stencilZFail=ox,this.stencilZPass=ox,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const r=e[t];if(r===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const i=this[t];if(i===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[t]=r}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Pd&&(r.blending=this.blending),this.side!==Uc&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(o){const s=[];for(const a in o){const l=o[a];delete l.metadata,s.push(l)}return s}if(t){const o=i(e.textures),s=i(e.images);o.length>0&&(r.textures=o),s.length>0&&(r.images=s)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let r=null;if(t!==null){const i=t.length;r=new Array(i);for(let o=0;o!==i;++o)r[o]=t[o].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const vF={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},El={h:0,s:0,l:0},Ny={h:0,s:0,l:0};function O_(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Yt{constructor(e,t,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,r)}set(e,t,r){if(t===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,t,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Gn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Ka.toWorkingColorSpace(this,t),this}setRGB(e,t,r,i=Ka.workingColorSpace){return this.r=e,this.g=t,this.b=r,Ka.toWorkingColorSpace(this,i),this}setHSL(e,t,r,i=Ka.workingColorSpace){if(e=$3(e,1),t=Ii(t,0,1),r=Ii(r,0,1),t===0)this.r=this.g=this.b=r;else{const o=r<=.5?r*(1+t):r+t-r*t,s=2*r-o;this.r=O_(s,o,e+1/3),this.g=O_(s,o,e),this.b=O_(s,o,e-1/3)}return Ka.toWorkingColorSpace(this,i),this}setStyle(e,t=Gn){function r(o){o!==void 0&&parseFloat(o)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let o;const s=i[1],a=i[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,t);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,t);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const o=i[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,t);if(s===6)return this.setHex(parseInt(o,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Gn){const r=vF[e.toLowerCase()];return r!==void 0?this.setHex(r,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Um(e.r),this.g=Um(e.g),this.b=Um(e.b),this}copyLinearToSRGB(e){return this.r=E_(e.r),this.g=E_(e.g),this.b=E_(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Gn){return Ka.fromWorkingColorSpace(ss.copy(this),e),Math.round(Ii(ss.r*255,0,255))*65536+Math.round(Ii(ss.g*255,0,255))*256+Math.round(Ii(ss.b*255,0,255))}getHexString(e=Gn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Ka.workingColorSpace){Ka.fromWorkingColorSpace(ss.copy(this),t);const r=ss.r,i=ss.g,o=ss.b,s=Math.max(r,i,o),a=Math.min(r,i,o);let l,u;const c=(a+s)/2;if(a===s)l=0,u=0;else{const h=s-a;switch(u=c<=.5?h/(s+a):h/(2-s-a),s){case r:l=(i-o)/h+(i<o?6:0);break;case i:l=(o-r)/h+2;break;case o:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Ka.workingColorSpace){return Ka.fromWorkingColorSpace(ss.copy(this),t),e.r=ss.r,e.g=ss.g,e.b=ss.b,e}getStyle(e=Gn){Ka.fromWorkingColorSpace(ss.copy(this),e);const t=ss.r,r=ss.g,i=ss.b;return e!==Gn?`color(${e} ${t.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,t,r){return this.getHSL(El),El.h+=e,El.s+=t,El.l+=r,this.setHSL(El.h,El.s,El.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,r){return this.r=e.r+(t.r-e.r)*r,this.g=e.g+(t.g-e.g)*r,this.b=e.b+(t.b-e.b)*r,this}lerpHSL(e,t){this.getHSL(El),e.getHSL(Ny);const r=K0(El.h,Ny.h,t),i=K0(El.s,Ny.s,t),o=K0(El.l,Ny.l,t);return this.setHSL(r,i,o),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,r=this.g,i=this.b,o=e.elements;return this.r=o[0]*t+o[3]*r+o[6]*i,this.g=o[1]*t+o[4]*r+o[7]*i,this.b=o[2]*t+o[5]*r+o[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ss=new Yt;Yt.NAMES=vF;class Af extends Zo{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Yt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=v1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Sc=m9();function m9(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const o=new Uint32Array(2048),s=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,o[l]=u|c}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)s[l]=l<<23;s[31]=1199570944,s[32]=2147483648;for(let l=33;l<63;++l)s[l]=2147483648+(l-32<<23);s[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:r,shiftTable:i,mantissaTable:o,exponentTable:s,offsetTable:a}}function Xs(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Ii(n,-65504,65504),Sc.floatView[0]=n;const e=Sc.uint32View[0],t=e>>23&511;return Sc.baseTable[t]+((e&8388607)>>Sc.shiftTable[t])}function N0(n){const e=n>>10;return Sc.uint32View[0]=Sc.mantissaTable[Sc.offsetTable[e]+(n&1023)]+Sc.exponentTable[e],Sc.floatView[0]}const bd={toHalfFloat:Xs,fromHalfFloat:N0},Ji=new ge,Fy=new gt;class _r{constructor(e,t,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=r,this.usage=Uv,this.updateRange={offset:0,count:-1},this.gpuType=vs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,r){e*=this.itemSize,r*=t.itemSize;for(let i=0,o=this.itemSize;i<o;i++)this.array[e+i]=t.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,r=this.count;t<r;t++)Fy.fromBufferAttribute(this,t),Fy.applyMatrix3(e),this.setXY(t,Fy.x,Fy.y);else if(this.itemSize===3)for(let t=0,r=this.count;t<r;t++)Ji.fromBufferAttribute(this,t),Ji.applyMatrix3(e),this.setXYZ(t,Ji.x,Ji.y,Ji.z);return this}applyMatrix4(e){for(let t=0,r=this.count;t<r;t++)Ji.fromBufferAttribute(this,t),Ji.applyMatrix4(e),this.setXYZ(t,Ji.x,Ji.y,Ji.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ji.fromBufferAttribute(this,t),Ji.applyNormalMatrix(e),this.setXYZ(t,Ji.x,Ji.y,Ji.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ji.fromBufferAttribute(this,t),Ji.transformDirection(e),this.setXYZ(t,Ji.x,Ji.y,Ji.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let r=this.array[e*this.itemSize+t];return this.normalized&&(r=Js(r,this.array)),r}setComponent(e,t,r){return this.normalized&&(r=qn(r,this.array)),this.array[e*this.itemSize+t]=r,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Js(t,this.array)),t}setX(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Js(t,this.array)),t}setY(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Js(t,this.array)),t}setZ(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Js(t,this.array)),t}setW(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=qn(t,this.array),r=qn(r,this.array)),this.array[e+0]=t,this.array[e+1]=r,this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=qn(t,this.array),r=qn(r,this.array),i=qn(i,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,t,r,i,o){return e*=this.itemSize,this.normalized&&(t=qn(t,this.array),r=qn(r,this.array),i=qn(i,this.array),o=qn(o,this.array)),this.array[e+0]=t,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=o,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Uv&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class g9 extends _r{constructor(e,t,r){super(new Int8Array(e),t,r)}}class v9 extends _r{constructor(e,t,r){super(new Uint8Array(e),t,r)}}class y9 extends _r{constructor(e,t,r){super(new Uint8ClampedArray(e),t,r)}}class x9 extends _r{constructor(e,t,r){super(new Int16Array(e),t,r)}}class Y3 extends _r{constructor(e,t,r){super(new Uint16Array(e),t,r)}}class w9 extends _r{constructor(e,t,r){super(new Int32Array(e),t,r)}}class Z3 extends _r{constructor(e,t,r){super(new Uint32Array(e),t,r)}}class S9 extends _r{constructor(e,t,r){super(new Uint16Array(e),t,r),this.isFloat16BufferAttribute=!0}getX(e){let t=N0(this.array[e*this.itemSize]);return this.normalized&&(t=Js(t,this.array)),t}setX(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize]=Xs(t),this}getY(e){let t=N0(this.array[e*this.itemSize+1]);return this.normalized&&(t=Js(t,this.array)),t}setY(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize+1]=Xs(t),this}getZ(e){let t=N0(this.array[e*this.itemSize+2]);return this.normalized&&(t=Js(t,this.array)),t}setZ(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize+2]=Xs(t),this}getW(e){let t=N0(this.array[e*this.itemSize+3]);return this.normalized&&(t=Js(t,this.array)),t}setW(e,t){return this.normalized&&(t=qn(t,this.array)),this.array[e*this.itemSize+3]=Xs(t),this}setXY(e,t,r){return e*=this.itemSize,this.normalized&&(t=qn(t,this.array),r=qn(r,this.array)),this.array[e+0]=Xs(t),this.array[e+1]=Xs(r),this}setXYZ(e,t,r,i){return e*=this.itemSize,this.normalized&&(t=qn(t,this.array),r=qn(r,this.array),i=qn(i,this.array)),this.array[e+0]=Xs(t),this.array[e+1]=Xs(r),this.array[e+2]=Xs(i),this}setXYZW(e,t,r,i,o){return e*=this.itemSize,this.normalized&&(t=qn(t,this.array),r=qn(r,this.array),i=qn(i,this.array),o=qn(o,this.array)),this.array[e+0]=Xs(t),this.array[e+1]=Xs(r),this.array[e+2]=Xs(i),this.array[e+3]=Xs(o),this}}class tn extends _r{constructor(e,t,r){super(new Float32Array(e),t,r)}}class _9 extends _r{constructor(e,t,r){super(new Float64Array(e),t,r)}}let b9=0;const Za=new zn,B_=new cr,Gp=new ge,ya=new zu,c0=new zu,Lo=new ge;class Rn extends Wc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:b9++}),this.uuid=ba(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(mF(e)?Z3:Y3)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,r=0){this.groups.push({start:e,count:t,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const o=new Yn().getNormalMatrix(e);r.applyNormalMatrix(o),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Za.makeRotationFromQuaternion(e),this.applyMatrix4(Za),this}rotateX(e){return Za.makeRotationX(e),this.applyMatrix4(Za),this}rotateY(e){return Za.makeRotationY(e),this.applyMatrix4(Za),this}rotateZ(e){return Za.makeRotationZ(e),this.applyMatrix4(Za),this}translate(e,t,r){return Za.makeTranslation(e,t,r),this.applyMatrix4(Za),this}scale(e,t,r){return Za.makeScale(e,t,r),this.applyMatrix4(Za),this}lookAt(e){return B_.lookAt(e),B_.updateMatrix(),this.applyMatrix4(B_.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Gp).negate(),this.translate(Gp.x,Gp.y,Gp.z),this}setFromPoints(e){const t=[];for(let r=0,i=e.length;r<i;r++){const o=e[r];t.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new tn(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new zu);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ge(-1/0,-1/0,-1/0),new ge(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let r=0,i=t.length;r<i;r++){const o=t[r];ya.setFromBufferAttribute(o),this.morphTargetsRelative?(Lo.addVectors(this.boundingBox.min,ya.min),this.boundingBox.expandByPoint(Lo),Lo.addVectors(this.boundingBox.max,ya.max),this.boundingBox.expandByPoint(Lo)):(this.boundingBox.expandByPoint(ya.min),this.boundingBox.expandByPoint(ya.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Zl);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ge,1/0);return}if(e){const r=this.boundingSphere.center;if(ya.setFromBufferAttribute(e),t)for(let o=0,s=t.length;o<s;o++){const a=t[o];c0.setFromBufferAttribute(a),this.morphTargetsRelative?(Lo.addVectors(ya.min,c0.min),ya.expandByPoint(Lo),Lo.addVectors(ya.max,c0.max),ya.expandByPoint(Lo)):(ya.expandByPoint(c0.min),ya.expandByPoint(c0.max))}ya.getCenter(r);let i=0;for(let o=0,s=e.count;o<s;o++)Lo.fromBufferAttribute(e,o),i=Math.max(i,r.distanceToSquared(Lo));if(t)for(let o=0,s=t.length;o<s;o++){const a=t[o],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)Lo.fromBufferAttribute(a,u),l&&(Gp.fromBufferAttribute(e,u),Lo.add(Gp)),i=Math.max(i,r.distanceToSquared(Lo))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=t.position.array,o=t.normal.array,s=t.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new _r(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let D=0;D<a;D++)u[D]=new ge,c[D]=new ge;const h=new ge,f=new ge,d=new ge,v=new gt,y=new gt,w=new gt,g=new ge,x=new ge;function _(D,N,B){h.fromArray(i,D*3),f.fromArray(i,N*3),d.fromArray(i,B*3),v.fromArray(s,D*2),y.fromArray(s,N*2),w.fromArray(s,B*2),f.sub(h),d.sub(h),y.sub(v),w.sub(v);const G=1/(y.x*w.y-w.x*y.y);isFinite(G)&&(g.copy(f).multiplyScalar(w.y).addScaledVector(d,-y.y).multiplyScalar(G),x.copy(d).multiplyScalar(y.x).addScaledVector(f,-w.x).multiplyScalar(G),u[D].add(g),u[N].add(g),u[B].add(g),c[D].add(x),c[N].add(x),c[B].add(x))}let E=this.groups;E.length===0&&(E=[{start:0,count:r.length}]);for(let D=0,N=E.length;D<N;++D){const B=E[D],G=B.start,V=B.count;for(let $=G,J=G+V;$<J;$+=3)_(r[$+0],r[$+1],r[$+2])}const C=new ge,I=new ge,R=new ge,L=new ge;function k(D){R.fromArray(o,D*3),L.copy(R);const N=u[D];C.copy(N),C.sub(R.multiplyScalar(R.dot(N))).normalize(),I.crossVectors(L,N);const G=I.dot(c[D])<0?-1:1;l[D*4]=C.x,l[D*4+1]=C.y,l[D*4+2]=C.z,l[D*4+3]=G}for(let D=0,N=E.length;D<N;++D){const B=E[D],G=B.start,V=B.count;for(let $=G,J=G+V;$<J;$+=3)k(r[$+0]),k(r[$+1]),k(r[$+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new _r(new Float32Array(t.count*3),3),this.setAttribute("normal",r);else for(let f=0,d=r.count;f<d;f++)r.setXYZ(f,0,0,0);const i=new ge,o=new ge,s=new ge,a=new ge,l=new ge,u=new ge,c=new ge,h=new ge;if(e)for(let f=0,d=e.count;f<d;f+=3){const v=e.getX(f+0),y=e.getX(f+1),w=e.getX(f+2);i.fromBufferAttribute(t,v),o.fromBufferAttribute(t,y),s.fromBufferAttribute(t,w),c.subVectors(s,o),h.subVectors(i,o),c.cross(h),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,y),u.fromBufferAttribute(r,w),a.add(c),l.add(c),u.add(c),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(y,l.x,l.y,l.z),r.setXYZ(w,u.x,u.y,u.z)}else for(let f=0,d=t.count;f<d;f+=3)i.fromBufferAttribute(t,f+0),o.fromBufferAttribute(t,f+1),s.fromBufferAttribute(t,f+2),c.subVectors(s,o),h.subVectors(i,o),c.cross(h),r.setXYZ(f+0,c.x,c.y,c.z),r.setXYZ(f+1,c.x,c.y,c.z),r.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,r=e.count;t<r;t++)Lo.fromBufferAttribute(e,t),Lo.normalize(),e.setXYZ(t,Lo.x,Lo.y,Lo.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,h=a.normalized,f=new u.constructor(l.length*c);let d=0,v=0;for(let y=0,w=l.length;y<w;y++){a.isInterleavedBufferAttribute?d=l[y]*a.data.stride+a.offset:d=l[y]*c;for(let g=0;g<c;g++)f[v++]=u[d++]}return new _r(f,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Rn,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);t.setAttribute(a,u)}const o=this.morphAttributes;for(const a in o){const l=[],u=o[a];for(let c=0,h=u.length;c<h;c++){const f=u[c],d=e(f,r);l.push(d)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,l=s.length;a<l;a++){const u=s[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let o=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let h=0,f=u.length;h<f;h++){const d=u[h];c.push(d.toJSON(e.data))}c.length>0&&(i[l]=c,o=!0)}o&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(t));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(t))}const o=e.morphAttributes;for(const u in o){const c=[],h=o[u];for(let f=0,d=h.length;f<d;f++)c.push(h[f].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let u=0,c=s.length;u<c;u++){const h=s[u];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const KC=new zn,Jf=new Qd,Dy=new Zl,JC=new ge,Vp=new ge,Wp=new ge,jp=new ge,U_=new ge,Oy=new ge,By=new gt,Uy=new gt,zy=new gt,QC=new ge,eP=new ge,tP=new ge,Hy=new ge,Gy=new ge;class po extends cr{constructor(e=new Rn,t=new Af){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(e,t){const r=this.geometry,i=r.attributes.position,o=r.morphAttributes.position,s=r.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(o&&a){Oy.set(0,0,0);for(let l=0,u=o.length;l<u;l++){const c=a[l],h=o[l];c!==0&&(U_.fromBufferAttribute(h,e),s?Oy.addScaledVector(U_,c):Oy.addScaledVector(U_.sub(t),c))}t.add(Oy)}return t}raycast(e,t){const r=this.geometry,i=this.material,o=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),Dy.copy(r.boundingSphere),Dy.applyMatrix4(o),Jf.copy(e.ray).recast(e.near),!(Dy.containsPoint(Jf.origin)===!1&&(Jf.intersectSphere(Dy,JC)===null||Jf.origin.distanceToSquared(JC)>(e.far-e.near)**2))&&(KC.copy(o).invert(),Jf.copy(e.ray).applyMatrix4(KC),!(r.boundingBox!==null&&Jf.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,t,Jf)))}_computeIntersections(e,t,r){let i;const o=this.geometry,s=this.material,a=o.index,l=o.attributes.position,u=o.attributes.uv,c=o.attributes.uv1,h=o.attributes.normal,f=o.groups,d=o.drawRange;if(a!==null)if(Array.isArray(s))for(let v=0,y=f.length;v<y;v++){const w=f[v],g=s[w.materialIndex],x=Math.max(w.start,d.start),_=Math.min(a.count,Math.min(w.start+w.count,d.start+d.count));for(let E=x,C=_;E<C;E+=3){const I=a.getX(E),R=a.getX(E+1),L=a.getX(E+2);i=Vy(this,g,e,r,u,c,h,I,R,L),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=w.materialIndex,t.push(i))}}else{const v=Math.max(0,d.start),y=Math.min(a.count,d.start+d.count);for(let w=v,g=y;w<g;w+=3){const x=a.getX(w),_=a.getX(w+1),E=a.getX(w+2);i=Vy(this,s,e,r,u,c,h,x,_,E),i&&(i.faceIndex=Math.floor(w/3),t.push(i))}}else if(l!==void 0)if(Array.isArray(s))for(let v=0,y=f.length;v<y;v++){const w=f[v],g=s[w.materialIndex],x=Math.max(w.start,d.start),_=Math.min(l.count,Math.min(w.start+w.count,d.start+d.count));for(let E=x,C=_;E<C;E+=3){const I=E,R=E+1,L=E+2;i=Vy(this,g,e,r,u,c,h,I,R,L),i&&(i.faceIndex=Math.floor(E/3),i.face.materialIndex=w.materialIndex,t.push(i))}}else{const v=Math.max(0,d.start),y=Math.min(l.count,d.start+d.count);for(let w=v,g=y;w<g;w+=3){const x=w,_=w+1,E=w+2;i=Vy(this,s,e,r,u,c,h,x,_,E),i&&(i.faceIndex=Math.floor(w/3),t.push(i))}}}}function M9(n,e,t,r,i,o,s,a){let l;if(e.side===Ns?l=r.intersectTriangle(s,o,i,!0,a):l=r.intersectTriangle(i,o,s,e.side===Uc,a),l===null)return null;Gy.copy(a),Gy.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(Gy);return u<t.near||u>t.far?null:{distance:u,point:Gy.clone(),object:n}}function Vy(n,e,t,r,i,o,s,a,l,u){n.getVertexPosition(a,Vp),n.getVertexPosition(l,Wp),n.getVertexPosition(u,jp);const c=M9(n,e,t,r,Vp,Wp,jp,Hy);if(c){i&&(By.fromBufferAttribute(i,a),Uy.fromBufferAttribute(i,l),zy.fromBufferAttribute(i,u),c.uv=Ks.getInterpolation(Hy,Vp,Wp,jp,By,Uy,zy,new gt)),o&&(By.fromBufferAttribute(o,a),Uy.fromBufferAttribute(o,l),zy.fromBufferAttribute(o,u),c.uv1=Ks.getInterpolation(Hy,Vp,Wp,jp,By,Uy,zy,new gt),c.uv2=c.uv1),s&&(QC.fromBufferAttribute(s,a),eP.fromBufferAttribute(s,l),tP.fromBufferAttribute(s,u),c.normal=Ks.getInterpolation(Hy,Vp,Wp,jp,QC,eP,tP,new ge),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const h={a,b:l,c:u,normal:new ge,materialIndex:0};Ks.getNormal(Vp,Wp,jp,h.normal),c.face=h}return c}class ep extends Rn{constructor(e=1,t=1,r=1,i=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:r,widthSegments:i,heightSegments:o,depthSegments:s};const a=this;i=Math.floor(i),o=Math.floor(o),s=Math.floor(s);const l=[],u=[],c=[],h=[];let f=0,d=0;v("z","y","x",-1,-1,r,t,e,s,o,0),v("z","y","x",1,-1,r,t,-e,s,o,1),v("x","z","y",1,1,e,r,t,i,s,2),v("x","z","y",1,-1,e,r,-t,i,s,3),v("x","y","z",1,-1,e,t,r,i,o,4),v("x","y","z",-1,-1,e,t,-r,i,o,5),this.setIndex(l),this.setAttribute("position",new tn(u,3)),this.setAttribute("normal",new tn(c,3)),this.setAttribute("uv",new tn(h,2));function v(y,w,g,x,_,E,C,I,R,L,k){const D=E/R,N=C/L,B=E/2,G=C/2,V=I/2,$=R+1,J=L+1;let le=0,H=0;const q=new ge;for(let Z=0;Z<J;Z++){const oe=Z*N-G;for(let F=0;F<$;F++){const j=F*D-B;q[y]=j*x,q[w]=oe*_,q[g]=V,u.push(q.x,q.y,q.z),q[y]=0,q[w]=0,q[g]=I>0?1:-1,c.push(q.x,q.y,q.z),h.push(F/R),h.push(1-Z/L),le+=1}}for(let Z=0;Z<L;Z++)for(let oe=0;oe<R;oe++){const F=f+oe+$*Z,j=f+oe+$*(Z+1),Q=f+(oe+1)+$*(Z+1),se=f+(oe+1)+$*Z;l.push(F,j,se),l.push(j,Q,se),H+=6}a.addGroup(d,H,k),d+=H,f+=le}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ep(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function sg(n){const e={};for(const t in n){e[t]={};for(const r in n[t]){const i=n[t][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][r]=null):e[t][r]=i.clone():Array.isArray(i)?e[t][r]=i.slice():e[t][r]=i}}return e}function Cs(n){const e={};for(let t=0;t<n.length;t++){const r=sg(n[t]);for(const i in r)e[i]=r[i]}return e}function E9(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function yF(n){return n.getRenderTarget()===null?n.outputColorSpace:Wl}const xF={clone:sg,merge:Cs};var A9=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,T9=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class $l extends Zo{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=A9,this.fragmentShader=T9,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=sg(e.uniforms),this.uniformsGroups=E9(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const s=this.uniforms[i].value;s&&s.isTexture?t.uniforms[i]={type:"t",value:s.toJSON(e).uuid}:s&&s.isColor?t.uniforms[i]={type:"c",value:s.getHex()}:s&&s.isVector2?t.uniforms[i]={type:"v2",value:s.toArray()}:s&&s.isVector3?t.uniforms[i]={type:"v3",value:s.toArray()}:s&&s.isVector4?t.uniforms[i]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?t.uniforms[i]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?t.uniforms[i]={type:"m4",value:s.toArray()}:t.uniforms[i]={value:s}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(t.extensions=r),t}}class x1 extends cr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new zn,this.projectionMatrix=new zn,this.projectionMatrixInverse=new zn,this.coordinateSystem=Mu}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Si extends x1{constructor(e=50,t=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=og*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ld*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return og*2*Math.atan(Math.tan(Ld*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,r,i,o,s){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Ld*.5*this.fov)/this.zoom,r=2*t,i=this.aspect*r,o=-.5*i;const s=this.view;if(this.view!==null&&this.view.enabled){const l=s.fullWidth,u=s.fullHeight;o+=s.offsetX*i/l,t-=s.offsetY*r/u,i*=s.width/l,r*=s.height/u}const a=this.filmOffset;a!==0&&(o+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+i,t,t-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const $p=-90,qp=1;class wF extends cr{constructor(e,t,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null;const i=new Si($p,qp,e,t);i.layers=this.layers,this.add(i);const o=new Si($p,qp,e,t);o.layers=this.layers,this.add(o);const s=new Si($p,qp,e,t);s.layers=this.layers,this.add(s);const a=new Si($p,qp,e,t);a.layers=this.layers,this.add(a);const l=new Si($p,qp,e,t);l.layers=this.layers,this.add(l);const u=new Si($p,qp,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[r,i,o,s,a,l]=t;for(const u of t)this.remove(u);if(e===Mu)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===zv)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,o,s,a,l,u]=this.children,c=e.getRenderTarget(),h=e.xr.enabled;e.xr.enabled=!1;const f=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(t,i),e.setRenderTarget(r,1),e.render(t,o),e.setRenderTarget(r,2),e.render(t,s),e.setRenderTarget(r,3),e.render(t,a),e.setRenderTarget(r,4),e.render(t,l),r.texture.generateMipmaps=f,e.setRenderTarget(r,5),e.render(t,u),e.setRenderTarget(c),e.xr.enabled=h,r.texture.needsPMREMUpdate=!0}}class w1 extends Fi{constructor(e,t,r,i,o,s,a,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:Ou,super(e,t,r,i,o,s,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class K3 extends jl{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];t.encoding!==void 0&&(J0("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===lf?Gn:uf),this.texture=new w1(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ti}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new ep(5,5,5),o=new $l({name:"CubemapFromEquirect",uniforms:sg(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:Ns,blending:kc});o.uniforms.tEquirect.value=t;const s=new po(i,o),a=t.minFilter;return t.minFilter===pf&&(t.minFilter=ti),new wF(1,10,this).update(e,s),t.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,r,i){const o=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,r,i);e.setRenderTarget(o)}}const z_=new ge,C9=new ge,P9=new Yn;let yc=class{constructor(e=new ge(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,r,i){return this.normal.set(e,t,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,r){const i=z_.subVectors(r,t).cross(C9.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const r=e.delta(z_),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const o=-(e.start.dot(this.normal)+this.constant)/i;return o<0||o>1?null:t.copy(e.start).addScaledVector(r,o)}intersectsLine(e){const t=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return t<0&&r>0||r<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const r=t||P9.getNormalMatrix(e),i=this.coplanarPoint(z_).applyMatrix4(e),o=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(o),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const Qf=new Zl,Wy=new ge;class qw{constructor(e=new yc,t=new yc,r=new yc,i=new yc,o=new yc,s=new yc){this.planes=[e,t,r,i,o,s]}set(e,t,r,i,o,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(r),a[3].copy(i),a[4].copy(o),a[5].copy(s),this}copy(e){const t=this.planes;for(let r=0;r<6;r++)t[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,t=Mu){const r=this.planes,i=e.elements,o=i[0],s=i[1],a=i[2],l=i[3],u=i[4],c=i[5],h=i[6],f=i[7],d=i[8],v=i[9],y=i[10],w=i[11],g=i[12],x=i[13],_=i[14],E=i[15];if(r[0].setComponents(l-o,f-u,w-d,E-g).normalize(),r[1].setComponents(l+o,f+u,w+d,E+g).normalize(),r[2].setComponents(l+s,f+c,w+v,E+x).normalize(),r[3].setComponents(l-s,f-c,w-v,E-x).normalize(),r[4].setComponents(l-a,f-h,w-y,E-_).normalize(),t===Mu)r[5].setComponents(l+a,f+h,w+y,E+_).normalize();else if(t===zv)r[5].setComponents(a,h,y,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Qf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Qf.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Qf)}intersectsSprite(e){return Qf.center.set(0,0,0),Qf.radius=.7071067811865476,Qf.applyMatrix4(e.matrixWorld),this.intersectsSphere(Qf)}intersectsSphere(e){const t=this.planes,r=e.center,i=-e.radius;for(let o=0;o<6;o++)if(t[o].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const t=this.planes;for(let r=0;r<6;r++){const i=t[r];if(Wy.x=i.normal.x>0?e.max.x:e.min.x,Wy.y=i.normal.y>0?e.max.y:e.min.y,Wy.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(Wy)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let r=0;r<6;r++)if(t[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function SF(){let n=null,e=!1,t=null,r=null;function i(o,s){t(o,s),r=n.requestAnimationFrame(i)}return{start:function(){e!==!0&&t!==null&&(r=n.requestAnimationFrame(i),e=!0)},stop:function(){n.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(o){t=o},setContext:function(o){n=o}}}function L9(n,e){const t=e.isWebGL2,r=new WeakMap;function i(u,c){const h=u.array,f=u.usage,d=n.createBuffer();n.bindBuffer(c,d),n.bufferData(c,h,f),u.onUploadCallback();let v;if(h instanceof Float32Array)v=n.FLOAT;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(t)v=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=n.UNSIGNED_SHORT;else if(h instanceof Int16Array)v=n.SHORT;else if(h instanceof Uint32Array)v=n.UNSIGNED_INT;else if(h instanceof Int32Array)v=n.INT;else if(h instanceof Int8Array)v=n.BYTE;else if(h instanceof Uint8Array)v=n.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)v=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:d,type:v,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version}}function o(u,c,h){const f=c.array,d=c.updateRange;n.bindBuffer(h,u),d.count===-1?n.bufferSubData(h,0,f):(t?n.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f,d.offset,d.count):n.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f.subarray(d.offset,d.offset+d.count)),d.count=-1),c.onUploadCallback()}function s(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=r.get(u);c&&(n.deleteBuffer(c.buffer),r.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const f=r.get(u);(!f||f.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=r.get(u);h===void 0?r.set(u,i(u,c)):h.version<u.version&&(o(h.buffer,u,c),h.version=u.version)}return{get:s,remove:a,update:l}}class S1 extends Rn{constructor(e=1,t=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:r,heightSegments:i};const o=e/2,s=t/2,a=Math.floor(r),l=Math.floor(i),u=a+1,c=l+1,h=e/a,f=t/l,d=[],v=[],y=[],w=[];for(let g=0;g<c;g++){const x=g*f-s;for(let _=0;_<u;_++){const E=_*h-o;v.push(E,-x,0),y.push(0,0,1),w.push(_/a),w.push(1-g/l)}}for(let g=0;g<l;g++)for(let x=0;x<a;x++){const _=x+u*g,E=x+u*(g+1),C=x+1+u*(g+1),I=x+1+u*g;d.push(_,E,I),d.push(E,C,I)}this.setIndex(d),this.setAttribute("position",new tn(v,3)),this.setAttribute("normal",new tn(y,3)),this.setAttribute("uv",new tn(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new S1(e.width,e.height,e.widthSegments,e.heightSegments)}}var R9=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,k9=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,I9=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,N9=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,F9=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,D9=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,O9=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,B9=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,U9=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,z9=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,H9=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,G9=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,V9=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,W9=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,j9=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,$9=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,q9=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,X9=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Y9=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Z9=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,K9=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,J9=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Q9=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,eG=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,tG=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,nG=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,rG=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,iG=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,oG="gl_FragColor = linearToOutputTexel( gl_FragColor );",sG=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,aG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,lG=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,uG=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,cG=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,hG=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fG=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,dG=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,pG=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,mG=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gG=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,vG=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,yG=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,xG=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,wG=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,SG=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,_G=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,bG=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,MG=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,EG=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,AG=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,TG=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,CG=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,PG=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,LG=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,RG=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,kG=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,IG=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,NG=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,FG=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,DG=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,OG=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,BG=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,UG=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,zG=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,HG=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,GG=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,VG=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,WG=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,jG=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,$G=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,qG=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,XG=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,YG=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ZG=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,KG=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,JG=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,QG=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,eV=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,tV=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,nV=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,rV=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,iV=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,oV=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,sV=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,aV=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,lV=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,uV=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,cV=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,hV=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,fV=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,dV=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,pV=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,mV=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,gV=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,vV=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,yV=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,xV=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,wV=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,SV=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,_V=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,bV=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,MV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,EV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,AV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,TV=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const CV=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,PV=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,LV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,RV=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,kV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,IV=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,NV=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,FV=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,DV=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,OV=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,BV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,UV=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,zV=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,HV=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,GV=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,VV=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WV=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,jV=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$V=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,qV=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XV=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,YV=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,ZV=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KV=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,JV=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,QV=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eW=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tW=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,nW=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,rW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,iW=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oW=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sW=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,aW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,$n={alphahash_fragment:R9,alphahash_pars_fragment:k9,alphamap_fragment:I9,alphamap_pars_fragment:N9,alphatest_fragment:F9,alphatest_pars_fragment:D9,aomap_fragment:O9,aomap_pars_fragment:B9,begin_vertex:U9,beginnormal_vertex:z9,bsdfs:H9,iridescence_fragment:G9,bumpmap_pars_fragment:V9,clipping_planes_fragment:W9,clipping_planes_pars_fragment:j9,clipping_planes_pars_vertex:$9,clipping_planes_vertex:q9,color_fragment:X9,color_pars_fragment:Y9,color_pars_vertex:Z9,color_vertex:K9,common:J9,cube_uv_reflection_fragment:Q9,defaultnormal_vertex:eG,displacementmap_pars_vertex:tG,displacementmap_vertex:nG,emissivemap_fragment:rG,emissivemap_pars_fragment:iG,colorspace_fragment:oG,colorspace_pars_fragment:sG,envmap_fragment:aG,envmap_common_pars_fragment:lG,envmap_pars_fragment:uG,envmap_pars_vertex:cG,envmap_physical_pars_fragment:_G,envmap_vertex:hG,fog_vertex:fG,fog_pars_vertex:dG,fog_fragment:pG,fog_pars_fragment:mG,gradientmap_pars_fragment:gG,lightmap_fragment:vG,lightmap_pars_fragment:yG,lights_lambert_fragment:xG,lights_lambert_pars_fragment:wG,lights_pars_begin:SG,lights_toon_fragment:bG,lights_toon_pars_fragment:MG,lights_phong_fragment:EG,lights_phong_pars_fragment:AG,lights_physical_fragment:TG,lights_physical_pars_fragment:CG,lights_fragment_begin:PG,lights_fragment_maps:LG,lights_fragment_end:RG,logdepthbuf_fragment:kG,logdepthbuf_pars_fragment:IG,logdepthbuf_pars_vertex:NG,logdepthbuf_vertex:FG,map_fragment:DG,map_pars_fragment:OG,map_particle_fragment:BG,map_particle_pars_fragment:UG,metalnessmap_fragment:zG,metalnessmap_pars_fragment:HG,morphcolor_vertex:GG,morphnormal_vertex:VG,morphtarget_pars_vertex:WG,morphtarget_vertex:jG,normal_fragment_begin:$G,normal_fragment_maps:qG,normal_pars_fragment:XG,normal_pars_vertex:YG,normal_vertex:ZG,normalmap_pars_fragment:KG,clearcoat_normal_fragment_begin:JG,clearcoat_normal_fragment_maps:QG,clearcoat_pars_fragment:eV,iridescence_pars_fragment:tV,opaque_fragment:nV,packing:rV,premultiplied_alpha_fragment:iV,project_vertex:oV,dithering_fragment:sV,dithering_pars_fragment:aV,roughnessmap_fragment:lV,roughnessmap_pars_fragment:uV,shadowmap_pars_fragment:cV,shadowmap_pars_vertex:hV,shadowmap_vertex:fV,shadowmask_pars_fragment:dV,skinbase_vertex:pV,skinning_pars_vertex:mV,skinning_vertex:gV,skinnormal_vertex:vV,specularmap_fragment:yV,specularmap_pars_fragment:xV,tonemapping_fragment:wV,tonemapping_pars_fragment:SV,transmission_fragment:_V,transmission_pars_fragment:bV,uv_pars_fragment:MV,uv_pars_vertex:EV,uv_vertex:AV,worldpos_vertex:TV,background_vert:CV,background_frag:PV,backgroundCube_vert:LV,backgroundCube_frag:RV,cube_vert:kV,cube_frag:IV,depth_vert:NV,depth_frag:FV,distanceRGBA_vert:DV,distanceRGBA_frag:OV,equirect_vert:BV,equirect_frag:UV,linedashed_vert:zV,linedashed_frag:HV,meshbasic_vert:GV,meshbasic_frag:VV,meshlambert_vert:WV,meshlambert_frag:jV,meshmatcap_vert:$V,meshmatcap_frag:qV,meshnormal_vert:XV,meshnormal_frag:YV,meshphong_vert:ZV,meshphong_frag:KV,meshphysical_vert:JV,meshphysical_frag:QV,meshtoon_vert:eW,meshtoon_frag:tW,points_vert:nW,points_frag:rW,shadow_vert:iW,shadow_frag:oW,sprite_vert:sW,sprite_frag:aW},zt={common:{diffuse:{value:new Yt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Yn},alphaMap:{value:null},alphaMapTransform:{value:new Yn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Yn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Yn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Yn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Yn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Yn},normalScale:{value:new gt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Yn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Yn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Yn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Yn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Yt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Yt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Yn},alphaTest:{value:0},uvTransform:{value:new Yn}},sprite:{diffuse:{value:new Yt(16777215)},opacity:{value:1},center:{value:new gt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Yn},alphaMap:{value:null},alphaMapTransform:{value:new Yn},alphaTest:{value:0}}},Fl={basic:{uniforms:Cs([zt.common,zt.specularmap,zt.envmap,zt.aomap,zt.lightmap,zt.fog]),vertexShader:$n.meshbasic_vert,fragmentShader:$n.meshbasic_frag},lambert:{uniforms:Cs([zt.common,zt.specularmap,zt.envmap,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.fog,zt.lights,{emissive:{value:new Yt(0)}}]),vertexShader:$n.meshlambert_vert,fragmentShader:$n.meshlambert_frag},phong:{uniforms:Cs([zt.common,zt.specularmap,zt.envmap,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.fog,zt.lights,{emissive:{value:new Yt(0)},specular:{value:new Yt(1118481)},shininess:{value:30}}]),vertexShader:$n.meshphong_vert,fragmentShader:$n.meshphong_frag},standard:{uniforms:Cs([zt.common,zt.envmap,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.roughnessmap,zt.metalnessmap,zt.fog,zt.lights,{emissive:{value:new Yt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$n.meshphysical_vert,fragmentShader:$n.meshphysical_frag},toon:{uniforms:Cs([zt.common,zt.aomap,zt.lightmap,zt.emissivemap,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.gradientmap,zt.fog,zt.lights,{emissive:{value:new Yt(0)}}]),vertexShader:$n.meshtoon_vert,fragmentShader:$n.meshtoon_frag},matcap:{uniforms:Cs([zt.common,zt.bumpmap,zt.normalmap,zt.displacementmap,zt.fog,{matcap:{value:null}}]),vertexShader:$n.meshmatcap_vert,fragmentShader:$n.meshmatcap_frag},points:{uniforms:Cs([zt.points,zt.fog]),vertexShader:$n.points_vert,fragmentShader:$n.points_frag},dashed:{uniforms:Cs([zt.common,zt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$n.linedashed_vert,fragmentShader:$n.linedashed_frag},depth:{uniforms:Cs([zt.common,zt.displacementmap]),vertexShader:$n.depth_vert,fragmentShader:$n.depth_frag},normal:{uniforms:Cs([zt.common,zt.bumpmap,zt.normalmap,zt.displacementmap,{opacity:{value:1}}]),vertexShader:$n.meshnormal_vert,fragmentShader:$n.meshnormal_frag},sprite:{uniforms:Cs([zt.sprite,zt.fog]),vertexShader:$n.sprite_vert,fragmentShader:$n.sprite_frag},background:{uniforms:{uvTransform:{value:new Yn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:$n.background_vert,fragmentShader:$n.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:$n.backgroundCube_vert,fragmentShader:$n.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:$n.cube_vert,fragmentShader:$n.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:$n.equirect_vert,fragmentShader:$n.equirect_frag},distanceRGBA:{uniforms:Cs([zt.common,zt.displacementmap,{referencePosition:{value:new ge},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:$n.distanceRGBA_vert,fragmentShader:$n.distanceRGBA_frag},shadow:{uniforms:Cs([zt.lights,zt.fog,{color:{value:new Yt(0)},opacity:{value:1}}]),vertexShader:$n.shadow_vert,fragmentShader:$n.shadow_frag}};Fl.physical={uniforms:Cs([Fl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Yn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Yn},clearcoatNormalScale:{value:new gt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Yn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Yn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Yn},sheen:{value:0},sheenColor:{value:new Yt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Yn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Yn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Yn},transmissionSamplerSize:{value:new gt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Yn},attenuationDistance:{value:0},attenuationColor:{value:new Yt(0)},specularColor:{value:new Yt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Yn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Yn},anisotropyVector:{value:new gt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Yn}}]),vertexShader:$n.meshphysical_vert,fragmentShader:$n.meshphysical_frag};const jy={r:0,b:0,g:0};function lW(n,e,t,r,i,o,s){const a=new Yt(0);let l=o===!0?0:1,u,c,h=null,f=0,d=null;function v(w,g){let x=!1,_=g.isScene===!0?g.background:null;switch(_&&_.isTexture&&(_=(g.backgroundBlurriness>0?t:e).get(_)),_===null?y(a,l):_&&_.isColor&&(y(_,1),x=!0),n.xr.getEnvironmentBlendMode()){case"opaque":x=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,s),x=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,s),x=!0;break}(n.autoClear||x)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),_&&(_.isCubeTexture||_.mapping===_g)?(c===void 0&&(c=new po(new ep(1,1,1),new $l({name:"BackgroundCubeMaterial",uniforms:sg(Fl.backgroundCube.uniforms),vertexShader:Fl.backgroundCube.vertexShader,fragmentShader:Fl.backgroundCube.fragmentShader,side:Ns,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(I,R,L){this.matrixWorld.copyPosition(L.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=_,c.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=_.colorSpace!==Gn,(h!==_||f!==_.version||d!==n.toneMapping)&&(c.material.needsUpdate=!0,h=_,f=_.version,d=n.toneMapping),c.layers.enableAll(),w.unshift(c,c.geometry,c.material,0,0,null)):_&&_.isTexture&&(u===void 0&&(u=new po(new S1(2,2),new $l({name:"BackgroundMaterial",uniforms:sg(Fl.background.uniforms),vertexShader:Fl.background.vertexShader,fragmentShader:Fl.background.fragmentShader,side:Uc,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=_,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=_.colorSpace!==Gn,_.matrixAutoUpdate===!0&&_.updateMatrix(),u.material.uniforms.uvTransform.value.copy(_.matrix),(h!==_||f!==_.version||d!==n.toneMapping)&&(u.material.needsUpdate=!0,h=_,f=_.version,d=n.toneMapping),u.layers.enableAll(),w.unshift(u,u.geometry,u.material,0,0,null))}function y(w,g){w.getRGB(jy,yF(n)),r.buffers.color.setClear(jy.r,jy.g,jy.b,g,s)}return{getClearColor:function(){return a},setClearColor:function(w,g=1){a.set(w),l=g,y(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(w){l=w,y(a,l)},render:v}}function uW(n,e,t,r){const i=n.getParameter(n.MAX_VERTEX_ATTRIBS),o=r.isWebGL2?null:e.get("OES_vertex_array_object"),s=r.isWebGL2||o!==null,a={},l=w(null);let u=l,c=!1;function h(V,$,J,le,H){let q=!1;if(s){const Z=y(le,J,$);u!==Z&&(u=Z,d(u.object)),q=g(V,le,J,H),q&&x(V,le,J,H)}else{const Z=$.wireframe===!0;(u.geometry!==le.id||u.program!==J.id||u.wireframe!==Z)&&(u.geometry=le.id,u.program=J.id,u.wireframe=Z,q=!0)}H!==null&&t.update(H,n.ELEMENT_ARRAY_BUFFER),(q||c)&&(c=!1,L(V,$,J,le),H!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(H).buffer))}function f(){return r.isWebGL2?n.createVertexArray():o.createVertexArrayOES()}function d(V){return r.isWebGL2?n.bindVertexArray(V):o.bindVertexArrayOES(V)}function v(V){return r.isWebGL2?n.deleteVertexArray(V):o.deleteVertexArrayOES(V)}function y(V,$,J){const le=J.wireframe===!0;let H=a[V.id];H===void 0&&(H={},a[V.id]=H);let q=H[$.id];q===void 0&&(q={},H[$.id]=q);let Z=q[le];return Z===void 0&&(Z=w(f()),q[le]=Z),Z}function w(V){const $=[],J=[],le=[];for(let H=0;H<i;H++)$[H]=0,J[H]=0,le[H]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:J,attributeDivisors:le,object:V,attributes:{},index:null}}function g(V,$,J,le){const H=u.attributes,q=$.attributes;let Z=0;const oe=J.getAttributes();for(const F in oe)if(oe[F].location>=0){const Q=H[F];let se=q[F];if(se===void 0&&(F==="instanceMatrix"&&V.instanceMatrix&&(se=V.instanceMatrix),F==="instanceColor"&&V.instanceColor&&(se=V.instanceColor)),Q===void 0||Q.attribute!==se||se&&Q.data!==se.data)return!0;Z++}return u.attributesNum!==Z||u.index!==le}function x(V,$,J,le){const H={},q=$.attributes;let Z=0;const oe=J.getAttributes();for(const F in oe)if(oe[F].location>=0){let Q=q[F];Q===void 0&&(F==="instanceMatrix"&&V.instanceMatrix&&(Q=V.instanceMatrix),F==="instanceColor"&&V.instanceColor&&(Q=V.instanceColor));const se={};se.attribute=Q,Q&&Q.data&&(se.data=Q.data),H[F]=se,Z++}u.attributes=H,u.attributesNum=Z,u.index=le}function _(){const V=u.newAttributes;for(let $=0,J=V.length;$<J;$++)V[$]=0}function E(V){C(V,0)}function C(V,$){const J=u.newAttributes,le=u.enabledAttributes,H=u.attributeDivisors;J[V]=1,le[V]===0&&(n.enableVertexAttribArray(V),le[V]=1),H[V]!==$&&((r.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](V,$),H[V]=$)}function I(){const V=u.newAttributes,$=u.enabledAttributes;for(let J=0,le=$.length;J<le;J++)$[J]!==V[J]&&(n.disableVertexAttribArray(J),$[J]=0)}function R(V,$,J,le,H,q,Z){Z===!0?n.vertexAttribIPointer(V,$,J,H,q):n.vertexAttribPointer(V,$,J,le,H,q)}function L(V,$,J,le){if(r.isWebGL2===!1&&(V.isInstancedMesh||le.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const H=le.attributes,q=J.getAttributes(),Z=$.defaultAttributeValues;for(const oe in q){const F=q[oe];if(F.location>=0){let j=H[oe];if(j===void 0&&(oe==="instanceMatrix"&&V.instanceMatrix&&(j=V.instanceMatrix),oe==="instanceColor"&&V.instanceColor&&(j=V.instanceColor)),j!==void 0){const Q=j.normalized,se=j.itemSize,fe=t.get(j);if(fe===void 0)continue;const we=fe.buffer,Ee=fe.type,Ce=fe.bytesPerElement,Ge=r.isWebGL2===!0&&(Ee===n.INT||Ee===n.UNSIGNED_INT||j.gpuType===D3);if(j.isInterleavedBufferAttribute){const Ie=j.data,he=Ie.stride,ke=j.offset;if(Ie.isInstancedInterleavedBuffer){for(let Ne=0;Ne<F.locationSize;Ne++)C(F.location+Ne,Ie.meshPerAttribute);V.isInstancedMesh!==!0&&le._maxInstanceCount===void 0&&(le._maxInstanceCount=Ie.meshPerAttribute*Ie.count)}else for(let Ne=0;Ne<F.locationSize;Ne++)E(F.location+Ne);n.bindBuffer(n.ARRAY_BUFFER,we);for(let Ne=0;Ne<F.locationSize;Ne++)R(F.location+Ne,se/F.locationSize,Ee,Q,he*Ce,(ke+se/F.locationSize*Ne)*Ce,Ge)}else{if(j.isInstancedBufferAttribute){for(let Ie=0;Ie<F.locationSize;Ie++)C(F.location+Ie,j.meshPerAttribute);V.isInstancedMesh!==!0&&le._maxInstanceCount===void 0&&(le._maxInstanceCount=j.meshPerAttribute*j.count)}else for(let Ie=0;Ie<F.locationSize;Ie++)E(F.location+Ie);n.bindBuffer(n.ARRAY_BUFFER,we);for(let Ie=0;Ie<F.locationSize;Ie++)R(F.location+Ie,se/F.locationSize,Ee,Q,se*Ce,se/F.locationSize*Ie*Ce,Ge)}}else if(Z!==void 0){const Q=Z[oe];if(Q!==void 0)switch(Q.length){case 2:n.vertexAttrib2fv(F.location,Q);break;case 3:n.vertexAttrib3fv(F.location,Q);break;case 4:n.vertexAttrib4fv(F.location,Q);break;default:n.vertexAttrib1fv(F.location,Q)}}}}I()}function k(){B();for(const V in a){const $=a[V];for(const J in $){const le=$[J];for(const H in le)v(le[H].object),delete le[H];delete $[J]}delete a[V]}}function D(V){if(a[V.id]===void 0)return;const $=a[V.id];for(const J in $){const le=$[J];for(const H in le)v(le[H].object),delete le[H];delete $[J]}delete a[V.id]}function N(V){for(const $ in a){const J=a[$];if(J[V.id]===void 0)continue;const le=J[V.id];for(const H in le)v(le[H].object),delete le[H];delete J[V.id]}}function B(){G(),c=!0,u!==l&&(u=l,d(u.object))}function G(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:B,resetDefaultState:G,dispose:k,releaseStatesOfGeometry:D,releaseStatesOfProgram:N,initAttributes:_,enableAttribute:E,disableUnusedAttributes:I}}function cW(n,e,t,r){const i=r.isWebGL2;let o;function s(u){o=u}function a(u,c){n.drawArrays(o,u,c),t.update(c,o,1)}function l(u,c,h){if(h===0)return;let f,d;if(i)f=n,d="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[d](o,u,c,h),t.update(c,o,h)}this.setMode=s,this.render=a,this.renderInstances=l}function hW(n,e,t){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(R){if(R==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const s=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let a=t.precision!==void 0?t.precision:"highp";const l=o(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=s||e.has("WEBGL_draw_buffers"),c=t.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),f=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=n.getParameter(n.MAX_TEXTURE_SIZE),v=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),y=n.getParameter(n.MAX_VERTEX_ATTRIBS),w=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),g=n.getParameter(n.MAX_VARYING_VECTORS),x=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),_=f>0,E=s||e.has("OES_texture_float"),C=_&&E,I=s?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:s,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:o,precision:a,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:f,maxTextureSize:d,maxCubemapSize:v,maxAttributes:y,maxVertexUniforms:w,maxVaryings:g,maxFragmentUniforms:x,vertexTextures:_,floatFragmentTextures:E,floatVertexTextures:C,maxSamples:I}}function fW(n){const e=this;let t=null,r=0,i=!1,o=!1;const s=new yc,a=new Yn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f){const d=h.length!==0||f||r!==0||i;return i=f,r=h.length,d},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(h,f){t=c(h,f,0)},this.setState=function(h,f,d){const v=h.clippingPlanes,y=h.clipIntersection,w=h.clipShadows,g=n.get(h);if(!i||v===null||v.length===0||o&&!w)o?c(null):u();else{const x=o?0:r,_=x*4;let E=g.clippingState||null;l.value=E,E=c(v,f,_,d);for(let C=0;C!==_;++C)E[C]=t[C];g.clippingState=E,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=x}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(h,f,d,v){const y=h!==null?h.length:0;let w=null;if(y!==0){if(w=l.value,v!==!0||w===null){const g=d+y*4,x=f.matrixWorldInverse;a.getNormalMatrix(x),(w===null||w.length<g)&&(w=new Float32Array(g));for(let _=0,E=d;_!==y;++_,E+=4)s.copy(h[_]).applyMatrix4(x,a),s.normal.toArray(w,E),w[E+3]=s.constant}l.value=w,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,w}}function dW(n){let e=new WeakMap;function t(s,a){return a===ig?s.mapping=Ou:a===Iv&&(s.mapping=df),s}function r(s){if(s&&s.isTexture&&s.isRenderTargetTexture===!1){const a=s.mapping;if(a===ig||a===Iv)if(e.has(s)){const l=e.get(s).texture;return t(l,s.mapping)}else{const l=s.image;if(l&&l.height>0){const u=new K3(l.height/2);return u.fromEquirectangularTexture(n,s),e.set(s,u),s.addEventListener("dispose",i),t(u.texture,s.mapping)}else return null}}return s}function i(s){const a=s.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function o(){e=new WeakMap}return{get:r,dispose:o}}class Iu extends x1{constructor(e=-1,t=1,r=1,i=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=r,this.bottom=i,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,r,i,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=r,this.view.offsetY=i,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let o=r-e,s=r+e,a=i+t,l=i-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=u*this.view.offsetX,s=o+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Cm=4,nP=[.125,.215,.35,.446,.526,.582],pd=20,H_=new Iu,rP=new Yt;let G_=null;const ud=(1+Math.sqrt(5))/2,Xp=1/ud,iP=[new ge(1,1,1),new ge(-1,1,1),new ge(1,1,-1),new ge(-1,1,-1),new ge(0,ud,Xp),new ge(0,ud,-Xp),new ge(Xp,0,ud),new ge(-Xp,0,ud),new ge(ud,Xp,0),new ge(-ud,Xp,0)];class kM{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,r=.1,i=100){G_=this._renderer.getRenderTarget(),this._setSize(256);const o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(e,r,i,o),t>0&&this._blur(o,0,0,t),this._applyPMREM(o),this._cleanup(o),o}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=aP(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=sP(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(G_),e.scissorTest=!1,$y(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ou||e.mapping===df?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),G_=this._renderer.getRenderTarget();const r=t||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,r={magFilter:ti,minFilter:ti,generateMipmaps:!1,type:Rs,format:Ls,colorSpace:Wl,depthBuffer:!1},i=oP(e,t,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=oP(e,t,r);const{_lodMax:o}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=pW(o)),this._blurMaterial=mW(o,e,t)}return i}_compileMaterial(e){const t=new po(this._lodPlanes[0],e);this._renderer.compile(t,H_)}_sceneToCubeUV(e,t,r,i){const a=new Si(90,1,t,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,h=c.autoClear,f=c.toneMapping;c.getClearColor(rP),c.toneMapping=Ru,c.autoClear=!1;const d=new Af({name:"PMREM.Background",side:Ns,depthWrite:!1,depthTest:!1}),v=new po(new ep,d);let y=!1;const w=e.background;w?w.isColor&&(d.color.copy(w),e.background=null,y=!0):(d.color.copy(rP),y=!0);for(let g=0;g<6;g++){const x=g%3;x===0?(a.up.set(0,l[g],0),a.lookAt(u[g],0,0)):x===1?(a.up.set(0,0,l[g]),a.lookAt(0,u[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,u[g]));const _=this._cubeSize;$y(i,x*_,g>2?_:0,_,_),c.setRenderTarget(i),y&&c.render(v,a),c.render(e,a)}v.geometry.dispose(),v.material.dispose(),c.toneMapping=f,c.autoClear=h,e.background=w}_textureToCubeUV(e,t){const r=this._renderer,i=e.mapping===Ou||e.mapping===df;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=aP()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=sP());const o=i?this._cubemapMaterial:this._equirectMaterial,s=new po(this._lodPlanes[0],o),a=o.uniforms;a.envMap.value=e;const l=this._cubeSize;$y(t,0,0,3*l,2*l),r.setRenderTarget(t),r.render(s,H_)}_applyPMREM(e){const t=this._renderer,r=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const o=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),s=iP[(i-1)%iP.length];this._blur(e,i-1,i,o,s)}t.autoClear=r}_blur(e,t,r,i,o){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,r,i,"latitudinal",o),this._halfBlur(s,e,r,r,i,"longitudinal",o)}_halfBlur(e,t,r,i,o,s,a){const l=this._renderer,u=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,h=new po(this._lodPlanes[i],u),f=u.uniforms,d=this._sizeLods[r]-1,v=isFinite(o)?Math.PI/(2*d):2*Math.PI/(2*pd-1),y=o/v,w=isFinite(o)?1+Math.floor(c*y):pd;w>pd&&console.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${pd}`);const g=[];let x=0;for(let R=0;R<pd;++R){const L=R/y,k=Math.exp(-L*L/2);g.push(k),R===0?x+=k:R<w&&(x+=2*k)}for(let R=0;R<g.length;R++)g[R]=g[R]/x;f.envMap.value=e.texture,f.samples.value=w,f.weights.value=g,f.latitudinal.value=s==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:_}=this;f.dTheta.value=v,f.mipInt.value=_-r;const E=this._sizeLods[i],C=3*E*(i>_-Cm?i-_+Cm:0),I=4*(this._cubeSize-E);$y(t,C,I,3*E,2*E),l.setRenderTarget(t),l.render(h,H_)}}function pW(n){const e=[],t=[],r=[];let i=n;const o=n-Cm+1+nP.length;for(let s=0;s<o;s++){const a=Math.pow(2,i);t.push(a);let l=1/a;s>n-Cm?l=nP[s-n+Cm-1]:s===0&&(l=0),r.push(l);const u=1/(a-2),c=-u,h=1+u,f=[c,c,h,c,h,h,c,c,h,h,c,h],d=6,v=6,y=3,w=2,g=1,x=new Float32Array(y*v*d),_=new Float32Array(w*v*d),E=new Float32Array(g*v*d);for(let I=0;I<d;I++){const R=I%3*2/3-1,L=I>2?0:-1,k=[R,L,0,R+2/3,L,0,R+2/3,L+1,0,R,L,0,R+2/3,L+1,0,R,L+1,0];x.set(k,y*v*I),_.set(f,w*v*I);const D=[I,I,I,I,I,I];E.set(D,g*v*I)}const C=new Rn;C.setAttribute("position",new _r(x,y)),C.setAttribute("uv",new _r(_,w)),C.setAttribute("faceIndex",new _r(E,g)),e.push(C),i>Cm&&i--}return{lodPlanes:e,sizeLods:t,sigmas:r}}function oP(n,e,t){const r=new jl(n,e,t);return r.texture.mapping=_g,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function $y(n,e,t,r,i){n.viewport.set(e,t,r,i),n.scissor.set(e,t,r,i)}function mW(n,e,t){const r=new Float32Array(pd),i=new ge(0,1,0);return new $l({name:"SphericalGaussianBlur",defines:{n:pd,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:J3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:kc,depthTest:!1,depthWrite:!1})}function sP(){return new $l({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:J3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:kc,depthTest:!1,depthWrite:!1})}function aP(){return new $l({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:J3(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:kc,depthTest:!1,depthWrite:!1})}function J3(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function gW(n){let e=new WeakMap,t=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===ig||l===Iv,c=l===Ou||l===df;if(u||c)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return t===null&&(t=new kM(n)),h=u?t.fromEquirectangular(a,h):t.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(u&&h&&h.height>0||c&&h&&i(h)){t===null&&(t=new kM(n));const f=u?t.fromEquirectangular(a):t.fromCubemap(a);return e.set(a,f),a.addEventListener("dispose",o),f.texture}else return null}}}return a}function i(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function o(a){const l=a.target;l.removeEventListener("dispose",o);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function s(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:r,dispose:s}}function vW(n){const e={};function t(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=n.getExtension(r)}return e[r]=i,i}return{has:function(r){return t(r)!==null},init:function(r){r.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(r){const i=t(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function yW(n,e,t,r){const i={},o=new WeakMap;function s(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const v in f.attributes)e.remove(f.attributes[v]);for(const v in f.morphAttributes){const y=f.morphAttributes[v];for(let w=0,g=y.length;w<g;w++)e.remove(y[w])}f.removeEventListener("dispose",s),delete i[f.id];const d=o.get(f);d&&(e.remove(d),o.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,t.memory.geometries--}function a(h,f){return i[f.id]===!0||(f.addEventListener("dispose",s),i[f.id]=!0,t.memory.geometries++),f}function l(h){const f=h.attributes;for(const v in f)e.update(f[v],n.ARRAY_BUFFER);const d=h.morphAttributes;for(const v in d){const y=d[v];for(let w=0,g=y.length;w<g;w++)e.update(y[w],n.ARRAY_BUFFER)}}function u(h){const f=[],d=h.index,v=h.attributes.position;let y=0;if(d!==null){const x=d.array;y=d.version;for(let _=0,E=x.length;_<E;_+=3){const C=x[_+0],I=x[_+1],R=x[_+2];f.push(C,I,I,R,R,C)}}else if(v!==void 0){const x=v.array;y=v.version;for(let _=0,E=x.length/3-1;_<E;_+=3){const C=_+0,I=_+1,R=_+2;f.push(C,I,I,R,R,C)}}else return;const w=new(mF(f)?Z3:Y3)(f,1);w.version=y;const g=o.get(h);g&&e.remove(g),o.set(h,w)}function c(h){const f=o.get(h);if(f){const d=h.index;d!==null&&f.version<d.version&&u(h)}else u(h);return o.get(h)}return{get:a,update:l,getWireframeAttribute:c}}function xW(n,e,t,r){const i=r.isWebGL2;let o;function s(f){o=f}let a,l;function u(f){a=f.type,l=f.bytesPerElement}function c(f,d){n.drawElements(o,d,a,f*l),t.update(d,o,1)}function h(f,d,v){if(v===0)return;let y,w;if(i)y=n,w="drawElementsInstanced";else if(y=e.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",y===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}y[w](o,d,a,f*l,v),t.update(d,o,v)}this.setMode=s,this.setIndex=u,this.render=c,this.renderInstances=h}function wW(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function r(o,s,a){switch(t.calls++,s){case n.TRIANGLES:t.triangles+=a*(o/3);break;case n.LINES:t.lines+=a*(o/2);break;case n.LINE_STRIP:t.lines+=a*(o-1);break;case n.LINE_LOOP:t.lines+=a*o;break;case n.POINTS:t.points+=a*o;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",s);break}}function i(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:i,update:r}}function SW(n,e){return n[0]-e[0]}function _W(n,e){return Math.abs(e[1])-Math.abs(n[1])}function bW(n,e,t){const r={},i=new Float32Array(8),o=new WeakMap,s=new Nr,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,c,h){const f=u.morphTargetInfluences;if(e.isWebGL2===!0){const d=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,v=d!==void 0?d.length:0;let y=o.get(c);if(y===void 0||y.count!==v){let V=function(){B.dispose(),o.delete(c),c.removeEventListener("dispose",V)};y!==void 0&&y.texture.dispose();const x=c.morphAttributes.position!==void 0,_=c.morphAttributes.normal!==void 0,E=c.morphAttributes.color!==void 0,C=c.morphAttributes.position||[],I=c.morphAttributes.normal||[],R=c.morphAttributes.color||[];let L=0;x===!0&&(L=1),_===!0&&(L=2),E===!0&&(L=3);let k=c.attributes.position.count*L,D=1;k>e.maxTextureSize&&(D=Math.ceil(k/e.maxTextureSize),k=e.maxTextureSize);const N=new Float32Array(k*D*4*v),B=new $w(N,k,D,v);B.type=vs,B.needsUpdate=!0;const G=L*4;for(let $=0;$<v;$++){const J=C[$],le=I[$],H=R[$],q=k*D*4*$;for(let Z=0;Z<J.count;Z++){const oe=Z*G;x===!0&&(s.fromBufferAttribute(J,Z),N[q+oe+0]=s.x,N[q+oe+1]=s.y,N[q+oe+2]=s.z,N[q+oe+3]=0),_===!0&&(s.fromBufferAttribute(le,Z),N[q+oe+4]=s.x,N[q+oe+5]=s.y,N[q+oe+6]=s.z,N[q+oe+7]=0),E===!0&&(s.fromBufferAttribute(H,Z),N[q+oe+8]=s.x,N[q+oe+9]=s.y,N[q+oe+10]=s.z,N[q+oe+11]=H.itemSize===4?s.w:1)}}y={count:v,texture:B,size:new gt(k,D)},o.set(c,y),c.addEventListener("dispose",V)}let w=0;for(let x=0;x<f.length;x++)w+=f[x];const g=c.morphTargetsRelative?1:1-w;h.getUniforms().setValue(n,"morphTargetBaseInfluence",g),h.getUniforms().setValue(n,"morphTargetInfluences",f),h.getUniforms().setValue(n,"morphTargetsTexture",y.texture,t),h.getUniforms().setValue(n,"morphTargetsTextureSize",y.size)}else{const d=f===void 0?0:f.length;let v=r[c.id];if(v===void 0||v.length!==d){v=[];for(let _=0;_<d;_++)v[_]=[_,0];r[c.id]=v}for(let _=0;_<d;_++){const E=v[_];E[0]=_,E[1]=f[_]}v.sort(_W);for(let _=0;_<8;_++)_<d&&v[_][1]?(a[_][0]=v[_][0],a[_][1]=v[_][1]):(a[_][0]=Number.MAX_SAFE_INTEGER,a[_][1]=0);a.sort(SW);const y=c.morphAttributes.position,w=c.morphAttributes.normal;let g=0;for(let _=0;_<8;_++){const E=a[_],C=E[0],I=E[1];C!==Number.MAX_SAFE_INTEGER&&I?(y&&c.getAttribute("morphTarget"+_)!==y[C]&&c.setAttribute("morphTarget"+_,y[C]),w&&c.getAttribute("morphNormal"+_)!==w[C]&&c.setAttribute("morphNormal"+_,w[C]),i[_]=I,g+=I):(y&&c.hasAttribute("morphTarget"+_)===!0&&c.deleteAttribute("morphTarget"+_),w&&c.hasAttribute("morphNormal"+_)===!0&&c.deleteAttribute("morphNormal"+_),i[_]=0)}const x=c.morphTargetsRelative?1:1-g;h.getUniforms().setValue(n,"morphTargetBaseInfluence",x),h.getUniforms().setValue(n,"morphTargetInfluences",i)}}return{update:l}}function MW(n,e,t,r){let i=new WeakMap;function o(l){const u=r.render.frame,c=l.geometry,h=e.get(l,c);if(i.get(h)!==u&&(e.update(h),i.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==u&&(f.update(),i.set(f,u))}return h}function s(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:o,dispose:s}}const _F=new Fi,bF=new $w,MF=new X3,EF=new w1,lP=[],uP=[],cP=new Float32Array(16),hP=new Float32Array(9),fP=new Float32Array(4);function bg(n,e,t){const r=n[0];if(r<=0||r>0)return n;const i=e*t;let o=lP[i];if(o===void 0&&(o=new Float32Array(i),lP[i]=o),e!==0){r.toArray(o,0);for(let s=1,a=0;s!==e;++s)a+=t,n[s].toArray(o,a)}return o}function mo(n,e){if(n.length!==e.length)return!1;for(let t=0,r=n.length;t<r;t++)if(n[t]!==e[t])return!1;return!0}function go(n,e){for(let t=0,r=e.length;t<r;t++)n[t]=e[t]}function Xw(n,e){let t=uP[e];t===void 0&&(t=new Int32Array(e),uP[e]=t);for(let r=0;r!==e;++r)t[r]=n.allocateTextureUnit();return t}function EW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function AW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(mo(t,e))return;n.uniform2fv(this.addr,e),go(t,e)}}function TW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(mo(t,e))return;n.uniform3fv(this.addr,e),go(t,e)}}function CW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(mo(t,e))return;n.uniform4fv(this.addr,e),go(t,e)}}function PW(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(mo(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),go(t,e)}else{if(mo(t,r))return;fP.set(r),n.uniformMatrix2fv(this.addr,!1,fP),go(t,r)}}function LW(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(mo(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),go(t,e)}else{if(mo(t,r))return;hP.set(r),n.uniformMatrix3fv(this.addr,!1,hP),go(t,r)}}function RW(n,e){const t=this.cache,r=e.elements;if(r===void 0){if(mo(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),go(t,e)}else{if(mo(t,r))return;cP.set(r),n.uniformMatrix4fv(this.addr,!1,cP),go(t,r)}}function kW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function IW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(mo(t,e))return;n.uniform2iv(this.addr,e),go(t,e)}}function NW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(mo(t,e))return;n.uniform3iv(this.addr,e),go(t,e)}}function FW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(mo(t,e))return;n.uniform4iv(this.addr,e),go(t,e)}}function DW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function OW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(mo(t,e))return;n.uniform2uiv(this.addr,e),go(t,e)}}function BW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(mo(t,e))return;n.uniform3uiv(this.addr,e),go(t,e)}}function UW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(mo(t,e))return;n.uniform4uiv(this.addr,e),go(t,e)}}function zW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2D(e||_F,i)}function HW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture3D(e||MF,i)}function GW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTextureCube(e||EF,i)}function VW(n,e,t){const r=this.cache,i=t.allocateTextureUnit();r[0]!==i&&(n.uniform1i(this.addr,i),r[0]=i),t.setTexture2DArray(e||bF,i)}function WW(n){switch(n){case 5126:return EW;case 35664:return AW;case 35665:return TW;case 35666:return CW;case 35674:return PW;case 35675:return LW;case 35676:return RW;case 5124:case 35670:return kW;case 35667:case 35671:return IW;case 35668:case 35672:return NW;case 35669:case 35673:return FW;case 5125:return DW;case 36294:return OW;case 36295:return BW;case 36296:return UW;case 35678:case 36198:case 36298:case 36306:case 35682:return zW;case 35679:case 36299:case 36307:return HW;case 35680:case 36300:case 36308:case 36293:return GW;case 36289:case 36303:case 36311:case 36292:return VW}}function jW(n,e){n.uniform1fv(this.addr,e)}function $W(n,e){const t=bg(e,this.size,2);n.uniform2fv(this.addr,t)}function qW(n,e){const t=bg(e,this.size,3);n.uniform3fv(this.addr,t)}function XW(n,e){const t=bg(e,this.size,4);n.uniform4fv(this.addr,t)}function YW(n,e){const t=bg(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function ZW(n,e){const t=bg(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function KW(n,e){const t=bg(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function JW(n,e){n.uniform1iv(this.addr,e)}function QW(n,e){n.uniform2iv(this.addr,e)}function ej(n,e){n.uniform3iv(this.addr,e)}function tj(n,e){n.uniform4iv(this.addr,e)}function nj(n,e){n.uniform1uiv(this.addr,e)}function rj(n,e){n.uniform2uiv(this.addr,e)}function ij(n,e){n.uniform3uiv(this.addr,e)}function oj(n,e){n.uniform4uiv(this.addr,e)}function sj(n,e,t){const r=this.cache,i=e.length,o=Xw(t,i);mo(r,o)||(n.uniform1iv(this.addr,o),go(r,o));for(let s=0;s!==i;++s)t.setTexture2D(e[s]||_F,o[s])}function aj(n,e,t){const r=this.cache,i=e.length,o=Xw(t,i);mo(r,o)||(n.uniform1iv(this.addr,o),go(r,o));for(let s=0;s!==i;++s)t.setTexture3D(e[s]||MF,o[s])}function lj(n,e,t){const r=this.cache,i=e.length,o=Xw(t,i);mo(r,o)||(n.uniform1iv(this.addr,o),go(r,o));for(let s=0;s!==i;++s)t.setTextureCube(e[s]||EF,o[s])}function uj(n,e,t){const r=this.cache,i=e.length,o=Xw(t,i);mo(r,o)||(n.uniform1iv(this.addr,o),go(r,o));for(let s=0;s!==i;++s)t.setTexture2DArray(e[s]||bF,o[s])}function cj(n){switch(n){case 5126:return jW;case 35664:return $W;case 35665:return qW;case 35666:return XW;case 35674:return YW;case 35675:return ZW;case 35676:return KW;case 5124:case 35670:return JW;case 35667:case 35671:return QW;case 35668:case 35672:return ej;case 35669:case 35673:return tj;case 5125:return nj;case 36294:return rj;case 36295:return ij;case 36296:return oj;case 35678:case 36198:case 36298:case 36306:case 35682:return sj;case 35679:case 36299:case 36307:return aj;case 35680:case 36300:case 36308:case 36293:return lj;case 36289:case 36303:case 36311:case 36292:return uj}}class hj{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.setValue=WW(t.type)}}class fj{constructor(e,t,r){this.id=e,this.addr=r,this.cache=[],this.size=t.size,this.setValue=cj(t.type)}}class dj{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,r){const i=this.seq;for(let o=0,s=i.length;o!==s;++o){const a=i[o];a.setValue(e,t[a.id],r)}}}const V_=/(\w+)(\])?(\[|\.)?/g;function dP(n,e){n.seq.push(e),n.map[e.id]=e}function pj(n,e,t){const r=n.name,i=r.length;for(V_.lastIndex=0;;){const o=V_.exec(r),s=V_.lastIndex;let a=o[1];const l=o[2]==="]",u=o[3];if(l&&(a=a|0),u===void 0||u==="["&&s+2===i){dP(t,u===void 0?new hj(a,n,e):new fj(a,n,e));break}else{let h=t.map[a];h===void 0&&(h=new dj(a),dP(t,h)),t=h}}}class sx{constructor(e,t){this.seq=[],this.map={};const r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const o=e.getActiveUniform(t,i),s=e.getUniformLocation(t,o.name);pj(o,s,this)}}setValue(e,t,r,i){const o=this.map[t];o!==void 0&&o.setValue(e,r,i)}setOptional(e,t,r){const i=t[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,t,r,i){for(let o=0,s=t.length;o!==s;++o){const a=t[o],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,t){const r=[];for(let i=0,o=e.length;i!==o;++i){const s=e[i];s.id in t&&r.push(s)}return r}}function pP(n,e,t){const r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),r}let mj=0;function gj(n,e){const t=n.split(`
`),r=[],i=Math.max(e-6,0),o=Math.min(e+6,t.length);for(let s=i;s<o;s++){const a=s+1;r.push(`${a===e?">":" "} ${a}: ${t[s]}`)}return r.join(`
`)}function vj(n){switch(n){case Wl:return["Linear","( value )"];case Gn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function mP(n,e,t){const r=n.getShaderParameter(e,n.COMPILE_STATUS),i=n.getShaderInfoLog(e).trim();if(r&&i==="")return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const s=parseInt(o[1]);return t.toUpperCase()+`

`+i+`

`+gj(n.getShaderSource(e),s)}else return i}function yj(n,e){const t=vj(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function xj(n,e){let t;switch(e){case HN:t="Linear";break;case GN:t="Reinhard";break;case VN:t="OptimizedCineon";break;case N3:t="ACESFilmic";break;case WN:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function wj(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(F0).join(`
`)}function Sj(n){const e=[];for(const t in n){const r=n[t];r!==!1&&e.push("#define "+t+" "+r)}return e.join(`
`)}function _j(n,e){const t={},r=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const o=n.getActiveAttrib(e,i),s=o.name;let a=1;o.type===n.FLOAT_MAT2&&(a=2),o.type===n.FLOAT_MAT3&&(a=3),o.type===n.FLOAT_MAT4&&(a=4),t[s]={type:o.type,location:n.getAttribLocation(e,s),locationSize:a}}return t}function F0(n){return n!==""}function gP(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function vP(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const bj=/^[ \t]*#include +<([\w\d./]+)>/gm;function IM(n){return n.replace(bj,Ej)}const Mj=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Ej(n,e){let t=$n[e];if(t===void 0){const r=Mj.get(e);if(r!==void 0)t=$n[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return IM(t)}const Aj=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function yP(n){return n.replace(Aj,Tj)}function Tj(n,e,t,r){let i="";for(let o=parseInt(e);o<parseInt(t);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function xP(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Cj(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Gw?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===Y0?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===Rl&&(e="SHADOWMAP_TYPE_VSM"),e}function Pj(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ou:case df:e="ENVMAP_TYPE_CUBE";break;case _g:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Lj(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case df:e="ENVMAP_MODE_REFRACTION";break}return e}function Rj(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case v1:e="ENVMAP_BLENDING_MULTIPLY";break;case UN:e="ENVMAP_BLENDING_MIX";break;case zN:e="ENVMAP_BLENDING_ADD";break}return e}function kj(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:r,maxMip:t}}function Ij(n,e,t,r){const i=n.getContext(),o=t.defines;let s=t.vertexShader,a=t.fragmentShader;const l=Cj(t),u=Pj(t),c=Lj(t),h=Rj(t),f=kj(t),d=t.isWebGL2?"":wj(t),v=Sj(o),y=i.createProgram();let w,g,x=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(F0).join(`
`),w.length>0&&(w+=`
`),g=[d,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter(F0).join(`
`),g.length>0&&(g+=`
`)):(w=[xP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(F0).join(`
`),g=[d,xP(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Ru?"#define TONE_MAPPING":"",t.toneMapping!==Ru?$n.tonemapping_pars_fragment:"",t.toneMapping!==Ru?xj("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",$n.colorspace_pars_fragment,yj("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(F0).join(`
`)),s=IM(s),s=gP(s,t),s=vP(s,t),a=IM(a),a=gP(a,t),a=vP(a,t),s=yP(s),a=yP(a),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(x=`#version 300 es
`,w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,g=["#define varying in",t.glslVersion===LM?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===LM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const _=x+w+s,E=x+g+a,C=pP(i,i.VERTEX_SHADER,_),I=pP(i,i.FRAGMENT_SHADER,E);if(i.attachShader(y,C),i.attachShader(y,I),t.index0AttributeName!==void 0?i.bindAttribLocation(y,0,t.index0AttributeName):t.morphTargets===!0&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),n.debug.checkShaderErrors){const k=i.getProgramInfoLog(y).trim(),D=i.getShaderInfoLog(C).trim(),N=i.getShaderInfoLog(I).trim();let B=!0,G=!0;if(i.getProgramParameter(y,i.LINK_STATUS)===!1)if(B=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(i,y,C,I);else{const V=mP(i,C,"vertex"),$=mP(i,I,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+`

Program Info Log: `+k+`
`+V+`
`+$)}else k!==""?console.warn("THREE.WebGLProgram: Program Info Log:",k):(D===""||N==="")&&(G=!1);G&&(this.diagnostics={runnable:B,programLog:k,vertexShader:{log:D,prefix:w},fragmentShader:{log:N,prefix:g}})}i.deleteShader(C),i.deleteShader(I);let R;this.getUniforms=function(){return R===void 0&&(R=new sx(i,y)),R};let L;return this.getAttributes=function(){return L===void 0&&(L=_j(i,y)),L},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=mj++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=C,this.fragmentShader=I,this}let Nj=0;class Fj{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(t),o=this._getShaderStage(r),s=this._getShaderCacheForMaterial(e);return s.has(i)===!1&&(s.add(i),i.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const r of t)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let r=t.get(e);return r===void 0&&(r=new Set,t.set(e,r)),r}_getShaderStage(e){const t=this.shaderCache;let r=t.get(e);return r===void 0&&(r=new Dj(e),t.set(e,r)),r}}class Dj{constructor(e){this.id=Nj++,this.code=e,this.usedTimes=0}}function Oj(n,e,t,r,i,o,s){const a=new Rd,l=new Fj,u=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,f=i.vertexTextures;let d=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(k){return k===0?"uv":`uv${k}`}function w(k,D,N,B,G){const V=B.fog,$=G.geometry,J=k.isMeshStandardMaterial?B.environment:null,le=(k.isMeshStandardMaterial?t:e).get(k.envMap||J),H=le&&le.mapping===_g?le.image.height:null,q=v[k.type];k.precision!==null&&(d=i.getMaxPrecision(k.precision),d!==k.precision&&console.warn("THREE.WebGLProgram.getParameters:",k.precision,"not supported, using",d,"instead."));const Z=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,oe=Z!==void 0?Z.length:0;let F=0;$.morphAttributes.position!==void 0&&(F=1),$.morphAttributes.normal!==void 0&&(F=2),$.morphAttributes.color!==void 0&&(F=3);let j,Q,se,fe;if(q){const bn=Fl[q];j=bn.vertexShader,Q=bn.fragmentShader}else j=k.vertexShader,Q=k.fragmentShader,l.update(k),se=l.getVertexShaderID(k),fe=l.getFragmentShaderID(k);const we=n.getRenderTarget(),Ee=G.isInstancedMesh===!0,Ce=!!k.map,Ge=!!k.matcap,Ie=!!le,he=!!k.aoMap,ke=!!k.lightMap,Ne=!!k.bumpMap,Ae=!!k.normalMap,ie=!!k.displacementMap,Ke=!!k.emissiveMap,Ve=!!k.metalnessMap,We=!!k.roughnessMap,nt=k.anisotropy>0,yt=k.clearcoat>0,_t=k.iridescence>0,de=k.sheen>0,ee=k.transmission>0,Fe=nt&&!!k.anisotropyMap,ot=yt&&!!k.clearcoatMap,et=yt&&!!k.clearcoatNormalMap,ft=yt&&!!k.clearcoatRoughnessMap,xt=_t&&!!k.iridescenceMap,ht=_t&&!!k.iridescenceThicknessMap,Pe=de&&!!k.sheenColorMap,Wt=de&&!!k.sheenRoughnessMap,Ct=!!k.specularMap,Nt=!!k.specularColorMap,At=!!k.specularIntensityMap,be=ee&&!!k.transmissionMap,Je=ee&&!!k.thicknessMap,pt=!!k.gradientMap,Te=!!k.alphaMap,Ue=k.alphaTest>0,qe=!!k.alphaHash,Mt=!!k.extensions,Et=!!$.attributes.uv1,It=!!$.attributes.uv2,Zt=!!$.attributes.uv3;let Hn=Ru;return k.toneMapped&&(we===null||we.isXRRenderTarget===!0)&&(Hn=n.toneMapping),{isWebGL2:c,shaderID:q,shaderType:k.type,shaderName:k.name,vertexShader:j,fragmentShader:Q,defines:k.defines,customVertexShaderID:se,customFragmentShaderID:fe,isRawShaderMaterial:k.isRawShaderMaterial===!0,glslVersion:k.glslVersion,precision:d,instancing:Ee,instancingColor:Ee&&G.instanceColor!==null,supportsVertexTextures:f,outputColorSpace:we===null?n.outputColorSpace:we.isXRRenderTarget===!0?we.texture.colorSpace:Wl,map:Ce,matcap:Ge,envMap:Ie,envMapMode:Ie&&le.mapping,envMapCubeUVHeight:H,aoMap:he,lightMap:ke,bumpMap:Ne,normalMap:Ae,displacementMap:f&&ie,emissiveMap:Ke,normalMapObjectSpace:Ae&&k.normalMapType===iF,normalMapTangentSpace:Ae&&k.normalMapType===Ef,metalnessMap:Ve,roughnessMap:We,anisotropy:nt,anisotropyMap:Fe,clearcoat:yt,clearcoatMap:ot,clearcoatNormalMap:et,clearcoatRoughnessMap:ft,iridescence:_t,iridescenceMap:xt,iridescenceThicknessMap:ht,sheen:de,sheenColorMap:Pe,sheenRoughnessMap:Wt,specularMap:Ct,specularColorMap:Nt,specularIntensityMap:At,transmission:ee,transmissionMap:be,thicknessMap:Je,gradientMap:pt,opaque:k.transparent===!1&&k.blending===Pd,alphaMap:Te,alphaTest:Ue,alphaHash:qe,combine:k.combine,mapUv:Ce&&y(k.map.channel),aoMapUv:he&&y(k.aoMap.channel),lightMapUv:ke&&y(k.lightMap.channel),bumpMapUv:Ne&&y(k.bumpMap.channel),normalMapUv:Ae&&y(k.normalMap.channel),displacementMapUv:ie&&y(k.displacementMap.channel),emissiveMapUv:Ke&&y(k.emissiveMap.channel),metalnessMapUv:Ve&&y(k.metalnessMap.channel),roughnessMapUv:We&&y(k.roughnessMap.channel),anisotropyMapUv:Fe&&y(k.anisotropyMap.channel),clearcoatMapUv:ot&&y(k.clearcoatMap.channel),clearcoatNormalMapUv:et&&y(k.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ft&&y(k.clearcoatRoughnessMap.channel),iridescenceMapUv:xt&&y(k.iridescenceMap.channel),iridescenceThicknessMapUv:ht&&y(k.iridescenceThicknessMap.channel),sheenColorMapUv:Pe&&y(k.sheenColorMap.channel),sheenRoughnessMapUv:Wt&&y(k.sheenRoughnessMap.channel),specularMapUv:Ct&&y(k.specularMap.channel),specularColorMapUv:Nt&&y(k.specularColorMap.channel),specularIntensityMapUv:At&&y(k.specularIntensityMap.channel),transmissionMapUv:be&&y(k.transmissionMap.channel),thicknessMapUv:Je&&y(k.thicknessMap.channel),alphaMapUv:Te&&y(k.alphaMap.channel),vertexTangents:!!$.attributes.tangent&&(Ae||nt),vertexColors:k.vertexColors,vertexAlphas:k.vertexColors===!0&&!!$.attributes.color&&$.attributes.color.itemSize===4,vertexUv1s:Et,vertexUv2s:It,vertexUv3s:Zt,pointsUvs:G.isPoints===!0&&!!$.attributes.uv&&(Ce||Te),fog:!!V,useFog:k.fog===!0,fogExp2:V&&V.isFogExp2,flatShading:k.flatShading===!0,sizeAttenuation:k.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:G.isSkinnedMesh===!0,morphTargets:$.morphAttributes.position!==void 0,morphNormals:$.morphAttributes.normal!==void 0,morphColors:$.morphAttributes.color!==void 0,morphTargetsCount:oe,morphTextureStride:F,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:k.dithering,shadowMapEnabled:n.shadowMap.enabled&&N.length>0,shadowMapType:n.shadowMap.type,toneMapping:Hn,useLegacyLights:n._useLegacyLights,premultipliedAlpha:k.premultipliedAlpha,doubleSided:k.side===Ol,flipSided:k.side===Ns,useDepthPacking:k.depthPacking>=0,depthPacking:k.depthPacking||0,index0AttributeName:k.index0AttributeName,extensionDerivatives:Mt&&k.extensions.derivatives===!0,extensionFragDepth:Mt&&k.extensions.fragDepth===!0,extensionDrawBuffers:Mt&&k.extensions.drawBuffers===!0,extensionShaderTextureLOD:Mt&&k.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:k.customProgramCacheKey()}}function g(k){const D=[];if(k.shaderID?D.push(k.shaderID):(D.push(k.customVertexShaderID),D.push(k.customFragmentShaderID)),k.defines!==void 0)for(const N in k.defines)D.push(N),D.push(k.defines[N]);return k.isRawShaderMaterial===!1&&(x(D,k),_(D,k),D.push(n.outputColorSpace)),D.push(k.customProgramCacheKey),D.join()}function x(k,D){k.push(D.precision),k.push(D.outputColorSpace),k.push(D.envMapMode),k.push(D.envMapCubeUVHeight),k.push(D.mapUv),k.push(D.alphaMapUv),k.push(D.lightMapUv),k.push(D.aoMapUv),k.push(D.bumpMapUv),k.push(D.normalMapUv),k.push(D.displacementMapUv),k.push(D.emissiveMapUv),k.push(D.metalnessMapUv),k.push(D.roughnessMapUv),k.push(D.anisotropyMapUv),k.push(D.clearcoatMapUv),k.push(D.clearcoatNormalMapUv),k.push(D.clearcoatRoughnessMapUv),k.push(D.iridescenceMapUv),k.push(D.iridescenceThicknessMapUv),k.push(D.sheenColorMapUv),k.push(D.sheenRoughnessMapUv),k.push(D.specularMapUv),k.push(D.specularColorMapUv),k.push(D.specularIntensityMapUv),k.push(D.transmissionMapUv),k.push(D.thicknessMapUv),k.push(D.combine),k.push(D.fogExp2),k.push(D.sizeAttenuation),k.push(D.morphTargetsCount),k.push(D.morphAttributeCount),k.push(D.numDirLights),k.push(D.numPointLights),k.push(D.numSpotLights),k.push(D.numSpotLightMaps),k.push(D.numHemiLights),k.push(D.numRectAreaLights),k.push(D.numDirLightShadows),k.push(D.numPointLightShadows),k.push(D.numSpotLightShadows),k.push(D.numSpotLightShadowsWithMaps),k.push(D.shadowMapType),k.push(D.toneMapping),k.push(D.numClippingPlanes),k.push(D.numClipIntersection),k.push(D.depthPacking)}function _(k,D){a.disableAll(),D.isWebGL2&&a.enable(0),D.supportsVertexTextures&&a.enable(1),D.instancing&&a.enable(2),D.instancingColor&&a.enable(3),D.matcap&&a.enable(4),D.envMap&&a.enable(5),D.normalMapObjectSpace&&a.enable(6),D.normalMapTangentSpace&&a.enable(7),D.clearcoat&&a.enable(8),D.iridescence&&a.enable(9),D.alphaTest&&a.enable(10),D.vertexColors&&a.enable(11),D.vertexAlphas&&a.enable(12),D.vertexUv1s&&a.enable(13),D.vertexUv2s&&a.enable(14),D.vertexUv3s&&a.enable(15),D.vertexTangents&&a.enable(16),D.anisotropy&&a.enable(17),k.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.skinning&&a.enable(4),D.morphTargets&&a.enable(5),D.morphNormals&&a.enable(6),D.morphColors&&a.enable(7),D.premultipliedAlpha&&a.enable(8),D.shadowMapEnabled&&a.enable(9),D.useLegacyLights&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.transmission&&a.enable(15),D.sheen&&a.enable(16),D.opaque&&a.enable(17),D.pointsUvs&&a.enable(18),k.push(a.mask)}function E(k){const D=v[k.type];let N;if(D){const B=Fl[D];N=xF.clone(B.uniforms)}else N=k.uniforms;return N}function C(k,D){let N;for(let B=0,G=u.length;B<G;B++){const V=u[B];if(V.cacheKey===D){N=V,++N.usedTimes;break}}return N===void 0&&(N=new Ij(n,D,k,o),u.push(N)),N}function I(k){if(--k.usedTimes===0){const D=u.indexOf(k);u[D]=u[u.length-1],u.pop(),k.destroy()}}function R(k){l.remove(k)}function L(){l.dispose()}return{getParameters:w,getProgramCacheKey:g,getUniforms:E,acquireProgram:C,releaseProgram:I,releaseShaderCache:R,programs:u,dispose:L}}function Bj(){let n=new WeakMap;function e(o){let s=n.get(o);return s===void 0&&(s={},n.set(o,s)),s}function t(o){n.delete(o)}function r(o,s,a){n.get(o)[s]=a}function i(){n=new WeakMap}return{get:e,remove:t,update:r,dispose:i}}function Uj(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function wP(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function SP(){const n=[];let e=0;const t=[],r=[],i=[];function o(){e=0,t.length=0,r.length=0,i.length=0}function s(h,f,d,v,y,w){let g=n[e];return g===void 0?(g={id:h.id,object:h,geometry:f,material:d,groupOrder:v,renderOrder:h.renderOrder,z:y,group:w},n[e]=g):(g.id=h.id,g.object=h,g.geometry=f,g.material=d,g.groupOrder=v,g.renderOrder=h.renderOrder,g.z=y,g.group=w),e++,g}function a(h,f,d,v,y,w){const g=s(h,f,d,v,y,w);d.transmission>0?r.push(g):d.transparent===!0?i.push(g):t.push(g)}function l(h,f,d,v,y,w){const g=s(h,f,d,v,y,w);d.transmission>0?r.unshift(g):d.transparent===!0?i.unshift(g):t.unshift(g)}function u(h,f){t.length>1&&t.sort(h||Uj),r.length>1&&r.sort(f||wP),i.length>1&&i.sort(f||wP)}function c(){for(let h=e,f=n.length;h<f;h++){const d=n[h];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:t,transmissive:r,transparent:i,init:o,push:a,unshift:l,finish:c,sort:u}}function zj(){let n=new WeakMap;function e(r,i){const o=n.get(r);let s;return o===void 0?(s=new SP,n.set(r,[s])):i>=o.length?(s=new SP,o.push(s)):s=o[i],s}function t(){n=new WeakMap}return{get:e,dispose:t}}function Hj(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new ge,color:new Yt};break;case"SpotLight":t={position:new ge,direction:new ge,color:new Yt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new ge,color:new Yt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new ge,skyColor:new Yt,groundColor:new Yt};break;case"RectAreaLight":t={color:new Yt,position:new ge,halfWidth:new ge,halfHeight:new ge};break}return n[e.id]=t,t}}}function Gj(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new gt,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Vj=0;function Wj(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function jj(n,e){const t=new Hj,r=Gj(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)i.probe.push(new ge);const o=new ge,s=new zn,a=new zn;function l(c,h){let f=0,d=0,v=0;for(let N=0;N<9;N++)i.probe[N].set(0,0,0);let y=0,w=0,g=0,x=0,_=0,E=0,C=0,I=0,R=0,L=0;c.sort(Wj);const k=h===!0?Math.PI:1;for(let N=0,B=c.length;N<B;N++){const G=c[N],V=G.color,$=G.intensity,J=G.distance,le=G.shadow&&G.shadow.map?G.shadow.map.texture:null;if(G.isAmbientLight)f+=V.r*$*k,d+=V.g*$*k,v+=V.b*$*k;else if(G.isLightProbe)for(let H=0;H<9;H++)i.probe[H].addScaledVector(G.sh.coefficients[H],$);else if(G.isDirectionalLight){const H=t.get(G);if(H.color.copy(G.color).multiplyScalar(G.intensity*k),G.castShadow){const q=G.shadow,Z=r.get(G);Z.shadowBias=q.bias,Z.shadowNormalBias=q.normalBias,Z.shadowRadius=q.radius,Z.shadowMapSize=q.mapSize,i.directionalShadow[y]=Z,i.directionalShadowMap[y]=le,i.directionalShadowMatrix[y]=G.shadow.matrix,E++}i.directional[y]=H,y++}else if(G.isSpotLight){const H=t.get(G);H.position.setFromMatrixPosition(G.matrixWorld),H.color.copy(V).multiplyScalar($*k),H.distance=J,H.coneCos=Math.cos(G.angle),H.penumbraCos=Math.cos(G.angle*(1-G.penumbra)),H.decay=G.decay,i.spot[g]=H;const q=G.shadow;if(G.map&&(i.spotLightMap[R]=G.map,R++,q.updateMatrices(G),G.castShadow&&L++),i.spotLightMatrix[g]=q.matrix,G.castShadow){const Z=r.get(G);Z.shadowBias=q.bias,Z.shadowNormalBias=q.normalBias,Z.shadowRadius=q.radius,Z.shadowMapSize=q.mapSize,i.spotShadow[g]=Z,i.spotShadowMap[g]=le,I++}g++}else if(G.isRectAreaLight){const H=t.get(G);H.color.copy(V).multiplyScalar($),H.halfWidth.set(G.width*.5,0,0),H.halfHeight.set(0,G.height*.5,0),i.rectArea[x]=H,x++}else if(G.isPointLight){const H=t.get(G);if(H.color.copy(G.color).multiplyScalar(G.intensity*k),H.distance=G.distance,H.decay=G.decay,G.castShadow){const q=G.shadow,Z=r.get(G);Z.shadowBias=q.bias,Z.shadowNormalBias=q.normalBias,Z.shadowRadius=q.radius,Z.shadowMapSize=q.mapSize,Z.shadowCameraNear=q.camera.near,Z.shadowCameraFar=q.camera.far,i.pointShadow[w]=Z,i.pointShadowMap[w]=le,i.pointShadowMatrix[w]=G.shadow.matrix,C++}i.point[w]=H,w++}else if(G.isHemisphereLight){const H=t.get(G);H.skyColor.copy(G.color).multiplyScalar($*k),H.groundColor.copy(G.groundColor).multiplyScalar($*k),i.hemi[_]=H,_++}}x>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=zt.LTC_FLOAT_1,i.rectAreaLTC2=zt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=zt.LTC_HALF_1,i.rectAreaLTC2=zt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=f,i.ambient[1]=d,i.ambient[2]=v;const D=i.hash;(D.directionalLength!==y||D.pointLength!==w||D.spotLength!==g||D.rectAreaLength!==x||D.hemiLength!==_||D.numDirectionalShadows!==E||D.numPointShadows!==C||D.numSpotShadows!==I||D.numSpotMaps!==R)&&(i.directional.length=y,i.spot.length=g,i.rectArea.length=x,i.point.length=w,i.hemi.length=_,i.directionalShadow.length=E,i.directionalShadowMap.length=E,i.pointShadow.length=C,i.pointShadowMap.length=C,i.spotShadow.length=I,i.spotShadowMap.length=I,i.directionalShadowMatrix.length=E,i.pointShadowMatrix.length=C,i.spotLightMatrix.length=I+R-L,i.spotLightMap.length=R,i.numSpotLightShadowsWithMaps=L,D.directionalLength=y,D.pointLength=w,D.spotLength=g,D.rectAreaLength=x,D.hemiLength=_,D.numDirectionalShadows=E,D.numPointShadows=C,D.numSpotShadows=I,D.numSpotMaps=R,i.version=Vj++)}function u(c,h){let f=0,d=0,v=0,y=0,w=0;const g=h.matrixWorldInverse;for(let x=0,_=c.length;x<_;x++){const E=c[x];if(E.isDirectionalLight){const C=i.directional[f];C.direction.setFromMatrixPosition(E.matrixWorld),o.setFromMatrixPosition(E.target.matrixWorld),C.direction.sub(o),C.direction.transformDirection(g),f++}else if(E.isSpotLight){const C=i.spot[v];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(g),C.direction.setFromMatrixPosition(E.matrixWorld),o.setFromMatrixPosition(E.target.matrixWorld),C.direction.sub(o),C.direction.transformDirection(g),v++}else if(E.isRectAreaLight){const C=i.rectArea[y];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(g),a.identity(),s.copy(E.matrixWorld),s.premultiply(g),a.extractRotation(s),C.halfWidth.set(E.width*.5,0,0),C.halfHeight.set(0,E.height*.5,0),C.halfWidth.applyMatrix4(a),C.halfHeight.applyMatrix4(a),y++}else if(E.isPointLight){const C=i.point[d];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(g),d++}else if(E.isHemisphereLight){const C=i.hemi[w];C.direction.setFromMatrixPosition(E.matrixWorld),C.direction.transformDirection(g),w++}}}return{setup:l,setupView:u,state:i}}function _P(n,e){const t=new jj(n,e),r=[],i=[];function o(){r.length=0,i.length=0}function s(h){r.push(h)}function a(h){i.push(h)}function l(h){t.setup(r,h)}function u(h){t.setupView(r,h)}return{init:o,state:{lightsArray:r,shadowsArray:i,lights:t},setupLights:l,setupLightsView:u,pushLight:s,pushShadow:a}}function $j(n,e){let t=new WeakMap;function r(o,s=0){const a=t.get(o);let l;return a===void 0?(l=new _P(n,e),t.set(o,[l])):s>=a.length?(l=new _P(n,e),a.push(l)):l=a[s],l}function i(){t=new WeakMap}return{get:r,dispose:i}}class Q3 extends Zo{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=nF,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class eA extends Zo{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const qj=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Xj=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Yj(n,e,t){let r=new qw;const i=new gt,o=new gt,s=new Nr,a=new Q3({depthPacking:rF}),l=new eA,u={},c=t.maxTextureSize,h={[Uc]:Ns,[Ns]:Uc,[Ol]:Ol},f=new $l({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new gt},radius:{value:4}},vertexShader:qj,fragmentShader:Xj}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const v=new Rn;v.setAttribute("position",new _r(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new po(v,f),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Gw;let g=this.type;this.render=function(C,I,R){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||C.length===0)return;const L=n.getRenderTarget(),k=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),N=n.state;N.setBlending(kc),N.buffers.color.setClear(1,1,1,1),N.buffers.depth.setTest(!0),N.setScissorTest(!1);const B=g!==Rl&&this.type===Rl,G=g===Rl&&this.type!==Rl;for(let V=0,$=C.length;V<$;V++){const J=C[V],le=J.shadow;if(le===void 0){console.warn("THREE.WebGLShadowMap:",J,"has no shadow.");continue}if(le.autoUpdate===!1&&le.needsUpdate===!1)continue;i.copy(le.mapSize);const H=le.getFrameExtents();if(i.multiply(H),o.copy(le.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(o.x=Math.floor(c/H.x),i.x=o.x*H.x,le.mapSize.x=o.x),i.y>c&&(o.y=Math.floor(c/H.y),i.y=o.y*H.y,le.mapSize.y=o.y)),le.map===null||B===!0||G===!0){const Z=this.type!==Rl?{minFilter:Gi,magFilter:Gi}:{};le.map!==null&&le.map.dispose(),le.map=new jl(i.x,i.y,Z),le.map.texture.name=J.name+".shadowMap",le.camera.updateProjectionMatrix()}n.setRenderTarget(le.map),n.clear();const q=le.getViewportCount();for(let Z=0;Z<q;Z++){const oe=le.getViewport(Z);s.set(o.x*oe.x,o.y*oe.y,o.x*oe.z,o.y*oe.w),N.viewport(s),le.updateMatrices(J,Z),r=le.getFrustum(),E(I,R,le.camera,J,this.type)}le.isPointLightShadow!==!0&&this.type===Rl&&x(le,R),le.needsUpdate=!1}g=this.type,w.needsUpdate=!1,n.setRenderTarget(L,k,D)};function x(C,I){const R=e.update(y);f.defines.VSM_SAMPLES!==C.blurSamples&&(f.defines.VSM_SAMPLES=C.blurSamples,d.defines.VSM_SAMPLES=C.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),C.mapPass===null&&(C.mapPass=new jl(i.x,i.y)),f.uniforms.shadow_pass.value=C.map.texture,f.uniforms.resolution.value=C.mapSize,f.uniforms.radius.value=C.radius,n.setRenderTarget(C.mapPass),n.clear(),n.renderBufferDirect(I,null,R,f,y,null),d.uniforms.shadow_pass.value=C.mapPass.texture,d.uniforms.resolution.value=C.mapSize,d.uniforms.radius.value=C.radius,n.setRenderTarget(C.map),n.clear(),n.renderBufferDirect(I,null,R,d,y,null)}function _(C,I,R,L){let k=null;const D=R.isPointLight===!0?C.customDistanceMaterial:C.customDepthMaterial;if(D!==void 0)k=D;else if(k=R.isPointLight===!0?l:a,n.localClippingEnabled&&I.clipShadows===!0&&Array.isArray(I.clippingPlanes)&&I.clippingPlanes.length!==0||I.displacementMap&&I.displacementScale!==0||I.alphaMap&&I.alphaTest>0||I.map&&I.alphaTest>0){const N=k.uuid,B=I.uuid;let G=u[N];G===void 0&&(G={},u[N]=G);let V=G[B];V===void 0&&(V=k.clone(),G[B]=V),k=V}if(k.visible=I.visible,k.wireframe=I.wireframe,L===Rl?k.side=I.shadowSide!==null?I.shadowSide:I.side:k.side=I.shadowSide!==null?I.shadowSide:h[I.side],k.alphaMap=I.alphaMap,k.alphaTest=I.alphaTest,k.map=I.map,k.clipShadows=I.clipShadows,k.clippingPlanes=I.clippingPlanes,k.clipIntersection=I.clipIntersection,k.displacementMap=I.displacementMap,k.displacementScale=I.displacementScale,k.displacementBias=I.displacementBias,k.wireframeLinewidth=I.wireframeLinewidth,k.linewidth=I.linewidth,R.isPointLight===!0&&k.isMeshDistanceMaterial===!0){const N=n.properties.get(k);N.light=R}return k}function E(C,I,R,L,k){if(C.visible===!1)return;if(C.layers.test(I.layers)&&(C.isMesh||C.isLine||C.isPoints)&&(C.castShadow||C.receiveShadow&&k===Rl)&&(!C.frustumCulled||r.intersectsObject(C))){C.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,C.matrixWorld);const B=e.update(C),G=C.material;if(Array.isArray(G)){const V=B.groups;for(let $=0,J=V.length;$<J;$++){const le=V[$],H=G[le.materialIndex];if(H&&H.visible){const q=_(C,H,L,k);n.renderBufferDirect(R,null,B,q,C,le)}}}else if(G.visible){const V=_(C,G,L,k);n.renderBufferDirect(R,null,B,V,C,null)}}const N=C.children;for(let B=0,G=N.length;B<G;B++)E(N[B],I,R,L,k)}}function Zj(n,e,t){const r=t.isWebGL2;function i(){let Te=!1;const Ue=new Nr;let qe=null;const Mt=new Nr(0,0,0,0);return{setMask:function(Et){qe!==Et&&!Te&&(n.colorMask(Et,Et,Et,Et),qe=Et)},setLocked:function(Et){Te=Et},setClear:function(Et,It,Zt,Hn,Kn){Kn===!0&&(Et*=Hn,It*=Hn,Zt*=Hn),Ue.set(Et,It,Zt,Hn),Mt.equals(Ue)===!1&&(n.clearColor(Et,It,Zt,Hn),Mt.copy(Ue))},reset:function(){Te=!1,qe=null,Mt.set(-1,0,0,0)}}}function o(){let Te=!1,Ue=null,qe=null,Mt=null;return{setTest:function(Et){Et?we(n.DEPTH_TEST):Ee(n.DEPTH_TEST)},setMask:function(Et){Ue!==Et&&!Te&&(n.depthMask(Et),Ue=Et)},setFunc:function(Et){if(qe!==Et){switch(Et){case kN:n.depthFunc(n.NEVER);break;case IN:n.depthFunc(n.ALWAYS);break;case NN:n.depthFunc(n.LESS);break;case Xx:n.depthFunc(n.LEQUAL);break;case FN:n.depthFunc(n.EQUAL);break;case DN:n.depthFunc(n.GEQUAL);break;case ON:n.depthFunc(n.GREATER);break;case BN:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}qe=Et}},setLocked:function(Et){Te=Et},setClear:function(Et){Mt!==Et&&(n.clearDepth(Et),Mt=Et)},reset:function(){Te=!1,Ue=null,qe=null,Mt=null}}}function s(){let Te=!1,Ue=null,qe=null,Mt=null,Et=null,It=null,Zt=null,Hn=null,Kn=null;return{setTest:function(bn){Te||(bn?we(n.STENCIL_TEST):Ee(n.STENCIL_TEST))},setMask:function(bn){Ue!==bn&&!Te&&(n.stencilMask(bn),Ue=bn)},setFunc:function(bn,dr,Vt){(qe!==bn||Mt!==dr||Et!==Vt)&&(n.stencilFunc(bn,dr,Vt),qe=bn,Mt=dr,Et=Vt)},setOp:function(bn,dr,Vt){(It!==bn||Zt!==dr||Hn!==Vt)&&(n.stencilOp(bn,dr,Vt),It=bn,Zt=dr,Hn=Vt)},setLocked:function(bn){Te=bn},setClear:function(bn){Kn!==bn&&(n.clearStencil(bn),Kn=bn)},reset:function(){Te=!1,Ue=null,qe=null,Mt=null,Et=null,It=null,Zt=null,Hn=null,Kn=null}}}const a=new i,l=new o,u=new s,c=new WeakMap,h=new WeakMap;let f={},d={},v=new WeakMap,y=[],w=null,g=!1,x=null,_=null,E=null,C=null,I=null,R=null,L=null,k=!1,D=null,N=null,B=null,G=null,V=null;const $=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let J=!1,le=0;const H=n.getParameter(n.VERSION);H.indexOf("WebGL")!==-1?(le=parseFloat(/^WebGL (\d)/.exec(H)[1]),J=le>=1):H.indexOf("OpenGL ES")!==-1&&(le=parseFloat(/^OpenGL ES (\d)/.exec(H)[1]),J=le>=2);let q=null,Z={};const oe=n.getParameter(n.SCISSOR_BOX),F=n.getParameter(n.VIEWPORT),j=new Nr().fromArray(oe),Q=new Nr().fromArray(F);function se(Te,Ue,qe,Mt){const Et=new Uint8Array(4),It=n.createTexture();n.bindTexture(Te,It),n.texParameteri(Te,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Te,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Zt=0;Zt<qe;Zt++)r&&(Te===n.TEXTURE_3D||Te===n.TEXTURE_2D_ARRAY)?n.texImage3D(Ue,0,n.RGBA,1,1,Mt,0,n.RGBA,n.UNSIGNED_BYTE,Et):n.texImage2D(Ue+Zt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Et);return It}const fe={};fe[n.TEXTURE_2D]=se(n.TEXTURE_2D,n.TEXTURE_2D,1),fe[n.TEXTURE_CUBE_MAP]=se(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(fe[n.TEXTURE_2D_ARRAY]=se(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),fe[n.TEXTURE_3D]=se(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),we(n.DEPTH_TEST),l.setFunc(Xx),ie(!1),Ke(tM),we(n.CULL_FACE),Ne(kc);function we(Te){f[Te]!==!0&&(n.enable(Te),f[Te]=!0)}function Ee(Te){f[Te]!==!1&&(n.disable(Te),f[Te]=!1)}function Ce(Te,Ue){return d[Te]!==Ue?(n.bindFramebuffer(Te,Ue),d[Te]=Ue,r&&(Te===n.DRAW_FRAMEBUFFER&&(d[n.FRAMEBUFFER]=Ue),Te===n.FRAMEBUFFER&&(d[n.DRAW_FRAMEBUFFER]=Ue)),!0):!1}function Ge(Te,Ue){let qe=y,Mt=!1;if(Te)if(qe=v.get(Ue),qe===void 0&&(qe=[],v.set(Ue,qe)),Te.isWebGLMultipleRenderTargets){const Et=Te.texture;if(qe.length!==Et.length||qe[0]!==n.COLOR_ATTACHMENT0){for(let It=0,Zt=Et.length;It<Zt;It++)qe[It]=n.COLOR_ATTACHMENT0+It;qe.length=Et.length,Mt=!0}}else qe[0]!==n.COLOR_ATTACHMENT0&&(qe[0]=n.COLOR_ATTACHMENT0,Mt=!0);else qe[0]!==n.BACK&&(qe[0]=n.BACK,Mt=!0);Mt&&(t.isWebGL2?n.drawBuffers(qe):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(qe))}function Ie(Te){return w!==Te?(n.useProgram(Te),w=Te,!0):!1}const he={[dd]:n.FUNC_ADD,[SN]:n.FUNC_SUBTRACT,[_N]:n.FUNC_REVERSE_SUBTRACT};if(r)he[oM]=n.MIN,he[sM]=n.MAX;else{const Te=e.get("EXT_blend_minmax");Te!==null&&(he[oM]=Te.MIN_EXT,he[sM]=Te.MAX_EXT)}const ke={[bN]:n.ZERO,[MN]:n.ONE,[EN]:n.SRC_COLOR,[k3]:n.SRC_ALPHA,[RN]:n.SRC_ALPHA_SATURATE,[PN]:n.DST_COLOR,[TN]:n.DST_ALPHA,[AN]:n.ONE_MINUS_SRC_COLOR,[I3]:n.ONE_MINUS_SRC_ALPHA,[LN]:n.ONE_MINUS_DST_COLOR,[CN]:n.ONE_MINUS_DST_ALPHA};function Ne(Te,Ue,qe,Mt,Et,It,Zt,Hn){if(Te===kc){g===!0&&(Ee(n.BLEND),g=!1);return}if(g===!1&&(we(n.BLEND),g=!0),Te!==wN){if(Te!==x||Hn!==k){if((_!==dd||I!==dd)&&(n.blendEquation(n.FUNC_ADD),_=dd,I=dd),Hn)switch(Te){case Pd:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case nM:n.blendFunc(n.ONE,n.ONE);break;case rM:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case iM:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}else switch(Te){case Pd:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case nM:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case rM:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case iM:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Te);break}E=null,C=null,R=null,L=null,x=Te,k=Hn}return}Et=Et||Ue,It=It||qe,Zt=Zt||Mt,(Ue!==_||Et!==I)&&(n.blendEquationSeparate(he[Ue],he[Et]),_=Ue,I=Et),(qe!==E||Mt!==C||It!==R||Zt!==L)&&(n.blendFuncSeparate(ke[qe],ke[Mt],ke[It],ke[Zt]),E=qe,C=Mt,R=It,L=Zt),x=Te,k=!1}function Ae(Te,Ue){Te.side===Ol?Ee(n.CULL_FACE):we(n.CULL_FACE);let qe=Te.side===Ns;Ue&&(qe=!qe),ie(qe),Te.blending===Pd&&Te.transparent===!1?Ne(kc):Ne(Te.blending,Te.blendEquation,Te.blendSrc,Te.blendDst,Te.blendEquationAlpha,Te.blendSrcAlpha,Te.blendDstAlpha,Te.premultipliedAlpha),l.setFunc(Te.depthFunc),l.setTest(Te.depthTest),l.setMask(Te.depthWrite),a.setMask(Te.colorWrite);const Mt=Te.stencilWrite;u.setTest(Mt),Mt&&(u.setMask(Te.stencilWriteMask),u.setFunc(Te.stencilFunc,Te.stencilRef,Te.stencilFuncMask),u.setOp(Te.stencilFail,Te.stencilZFail,Te.stencilZPass)),We(Te.polygonOffset,Te.polygonOffsetFactor,Te.polygonOffsetUnits),Te.alphaToCoverage===!0?we(n.SAMPLE_ALPHA_TO_COVERAGE):Ee(n.SAMPLE_ALPHA_TO_COVERAGE)}function ie(Te){D!==Te&&(Te?n.frontFace(n.CW):n.frontFace(n.CCW),D=Te)}function Ke(Te){Te!==vN?(we(n.CULL_FACE),Te!==N&&(Te===tM?n.cullFace(n.BACK):Te===yN?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):Ee(n.CULL_FACE),N=Te}function Ve(Te){Te!==B&&(J&&n.lineWidth(Te),B=Te)}function We(Te,Ue,qe){Te?(we(n.POLYGON_OFFSET_FILL),(G!==Ue||V!==qe)&&(n.polygonOffset(Ue,qe),G=Ue,V=qe)):Ee(n.POLYGON_OFFSET_FILL)}function nt(Te){Te?we(n.SCISSOR_TEST):Ee(n.SCISSOR_TEST)}function yt(Te){Te===void 0&&(Te=n.TEXTURE0+$-1),q!==Te&&(n.activeTexture(Te),q=Te)}function _t(Te,Ue,qe){qe===void 0&&(q===null?qe=n.TEXTURE0+$-1:qe=q);let Mt=Z[qe];Mt===void 0&&(Mt={type:void 0,texture:void 0},Z[qe]=Mt),(Mt.type!==Te||Mt.texture!==Ue)&&(q!==qe&&(n.activeTexture(qe),q=qe),n.bindTexture(Te,Ue||fe[Te]),Mt.type=Te,Mt.texture=Ue)}function de(){const Te=Z[q];Te!==void 0&&Te.type!==void 0&&(n.bindTexture(Te.type,null),Te.type=void 0,Te.texture=void 0)}function ee(){try{n.compressedTexImage2D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Fe(){try{n.compressedTexImage3D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function ot(){try{n.texSubImage2D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function et(){try{n.texSubImage3D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function ft(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function xt(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function ht(){try{n.texStorage2D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Pe(){try{n.texStorage3D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Wt(){try{n.texImage2D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Ct(){try{n.texImage3D.apply(n,arguments)}catch(Te){console.error("THREE.WebGLState:",Te)}}function Nt(Te){j.equals(Te)===!1&&(n.scissor(Te.x,Te.y,Te.z,Te.w),j.copy(Te))}function At(Te){Q.equals(Te)===!1&&(n.viewport(Te.x,Te.y,Te.z,Te.w),Q.copy(Te))}function be(Te,Ue){let qe=h.get(Ue);qe===void 0&&(qe=new WeakMap,h.set(Ue,qe));let Mt=qe.get(Te);Mt===void 0&&(Mt=n.getUniformBlockIndex(Ue,Te.name),qe.set(Te,Mt))}function Je(Te,Ue){const Mt=h.get(Ue).get(Te);c.get(Ue)!==Mt&&(n.uniformBlockBinding(Ue,Mt,Te.__bindingPointIndex),c.set(Ue,Mt))}function pt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),r===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),f={},q=null,Z={},d={},v=new WeakMap,y=[],w=null,g=!1,x=null,_=null,E=null,C=null,I=null,R=null,L=null,k=!1,D=null,N=null,B=null,G=null,V=null,j.set(0,0,n.canvas.width,n.canvas.height),Q.set(0,0,n.canvas.width,n.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:we,disable:Ee,bindFramebuffer:Ce,drawBuffers:Ge,useProgram:Ie,setBlending:Ne,setMaterial:Ae,setFlipSided:ie,setCullFace:Ke,setLineWidth:Ve,setPolygonOffset:We,setScissorTest:nt,activeTexture:yt,bindTexture:_t,unbindTexture:de,compressedTexImage2D:ee,compressedTexImage3D:Fe,texImage2D:Wt,texImage3D:Ct,updateUBOMapping:be,uniformBlockBinding:Je,texStorage2D:ht,texStorage3D:Pe,texSubImage2D:ot,texSubImage3D:et,compressedTexSubImage2D:ft,compressedTexSubImage3D:xt,scissor:Nt,viewport:At,reset:pt}}function Kj(n,e,t,r,i,o,s){const a=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,h=i.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let y;const w=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(de,ee){return g?new OffscreenCanvas(de,ee):Hv("canvas")}function _(de,ee,Fe,ot){let et=1;if((de.width>ot||de.height>ot)&&(et=ot/Math.max(de.width,de.height)),et<1||ee===!0)if(typeof HTMLImageElement<"u"&&de instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&de instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&de instanceof ImageBitmap){const ft=ee?Kx:Math.floor,xt=ft(et*de.width),ht=ft(et*de.height);y===void 0&&(y=x(xt,ht));const Pe=Fe?x(xt,ht):y;return Pe.width=xt,Pe.height=ht,Pe.getContext("2d").drawImage(de,0,0,xt,ht),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+de.width+"x"+de.height+") to ("+xt+"x"+ht+")."),Pe}else return"data"in de&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+de.width+"x"+de.height+")."),de;return de}function E(de){return RM(de.width)&&RM(de.height)}function C(de){return a?!1:de.wrapS!==ps||de.wrapT!==ps||de.minFilter!==Gi&&de.minFilter!==ti}function I(de,ee){return de.generateMipmaps&&ee&&de.minFilter!==Gi&&de.minFilter!==ti}function R(de){n.generateMipmap(de)}function L(de,ee,Fe,ot,et=!1){if(a===!1)return ee;if(de!==null){if(n[de]!==void 0)return n[de];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+de+"'")}let ft=ee;return ee===n.RED&&(Fe===n.FLOAT&&(ft=n.R32F),Fe===n.HALF_FLOAT&&(ft=n.R16F),Fe===n.UNSIGNED_BYTE&&(ft=n.R8)),ee===n.RED_INTEGER&&(Fe===n.UNSIGNED_BYTE&&(ft=n.R8UI),Fe===n.UNSIGNED_SHORT&&(ft=n.R16UI),Fe===n.UNSIGNED_INT&&(ft=n.R32UI),Fe===n.BYTE&&(ft=n.R8I),Fe===n.SHORT&&(ft=n.R16I),Fe===n.INT&&(ft=n.R32I)),ee===n.RG&&(Fe===n.FLOAT&&(ft=n.RG32F),Fe===n.HALF_FLOAT&&(ft=n.RG16F),Fe===n.UNSIGNED_BYTE&&(ft=n.RG8)),ee===n.RGBA&&(Fe===n.FLOAT&&(ft=n.RGBA32F),Fe===n.HALF_FLOAT&&(ft=n.RGBA16F),Fe===n.UNSIGNED_BYTE&&(ft=ot===Gn&&et===!1?n.SRGB8_ALPHA8:n.RGBA8),Fe===n.UNSIGNED_SHORT_4_4_4_4&&(ft=n.RGBA4),Fe===n.UNSIGNED_SHORT_5_5_5_1&&(ft=n.RGB5_A1)),(ft===n.R16F||ft===n.R32F||ft===n.RG16F||ft===n.RG32F||ft===n.RGBA16F||ft===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ft}function k(de,ee,Fe){return I(de,Fe)===!0||de.isFramebufferTexture&&de.minFilter!==Gi&&de.minFilter!==ti?Math.log2(Math.max(ee.width,ee.height))+1:de.mipmaps!==void 0&&de.mipmaps.length>0?de.mipmaps.length:de.isCompressedTexture&&Array.isArray(de.image)?ee.mipmaps.length:1}function D(de){return de===Gi||de===Yx||de===Z0?n.NEAREST:n.LINEAR}function N(de){const ee=de.target;ee.removeEventListener("dispose",N),G(ee),ee.isVideoTexture&&v.delete(ee)}function B(de){const ee=de.target;ee.removeEventListener("dispose",B),$(ee)}function G(de){const ee=r.get(de);if(ee.__webglInit===void 0)return;const Fe=de.source,ot=w.get(Fe);if(ot){const et=ot[ee.__cacheKey];et.usedTimes--,et.usedTimes===0&&V(de),Object.keys(ot).length===0&&w.delete(Fe)}r.remove(de)}function V(de){const ee=r.get(de);n.deleteTexture(ee.__webglTexture);const Fe=de.source,ot=w.get(Fe);delete ot[ee.__cacheKey],s.memory.textures--}function $(de){const ee=de.texture,Fe=r.get(de),ot=r.get(ee);if(ot.__webglTexture!==void 0&&(n.deleteTexture(ot.__webglTexture),s.memory.textures--),de.depthTexture&&de.depthTexture.dispose(),de.isWebGLCubeRenderTarget)for(let et=0;et<6;et++){if(Array.isArray(Fe.__webglFramebuffer[et]))for(let ft=0;ft<Fe.__webglFramebuffer[et].length;ft++)n.deleteFramebuffer(Fe.__webglFramebuffer[et][ft]);else n.deleteFramebuffer(Fe.__webglFramebuffer[et]);Fe.__webglDepthbuffer&&n.deleteRenderbuffer(Fe.__webglDepthbuffer[et])}else{if(Array.isArray(Fe.__webglFramebuffer))for(let et=0;et<Fe.__webglFramebuffer.length;et++)n.deleteFramebuffer(Fe.__webglFramebuffer[et]);else n.deleteFramebuffer(Fe.__webglFramebuffer);if(Fe.__webglDepthbuffer&&n.deleteRenderbuffer(Fe.__webglDepthbuffer),Fe.__webglMultisampledFramebuffer&&n.deleteFramebuffer(Fe.__webglMultisampledFramebuffer),Fe.__webglColorRenderbuffer)for(let et=0;et<Fe.__webglColorRenderbuffer.length;et++)Fe.__webglColorRenderbuffer[et]&&n.deleteRenderbuffer(Fe.__webglColorRenderbuffer[et]);Fe.__webglDepthRenderbuffer&&n.deleteRenderbuffer(Fe.__webglDepthRenderbuffer)}if(de.isWebGLMultipleRenderTargets)for(let et=0,ft=ee.length;et<ft;et++){const xt=r.get(ee[et]);xt.__webglTexture&&(n.deleteTexture(xt.__webglTexture),s.memory.textures--),r.remove(ee[et])}r.remove(ee),r.remove(de)}let J=0;function le(){J=0}function H(){const de=J;return de>=l&&console.warn("THREE.WebGLTextures: Trying to use "+de+" texture units while this GPU supports only "+l),J+=1,de}function q(de){const ee=[];return ee.push(de.wrapS),ee.push(de.wrapT),ee.push(de.wrapR||0),ee.push(de.magFilter),ee.push(de.minFilter),ee.push(de.anisotropy),ee.push(de.internalFormat),ee.push(de.format),ee.push(de.type),ee.push(de.generateMipmaps),ee.push(de.premultiplyAlpha),ee.push(de.flipY),ee.push(de.unpackAlignment),ee.push(de.colorSpace),ee.join()}function Z(de,ee){const Fe=r.get(de);if(de.isVideoTexture&&yt(de),de.isRenderTargetTexture===!1&&de.version>0&&Fe.__version!==de.version){const ot=de.image;if(ot===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ot.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ce(Fe,de,ee);return}}t.bindTexture(n.TEXTURE_2D,Fe.__webglTexture,n.TEXTURE0+ee)}function oe(de,ee){const Fe=r.get(de);if(de.version>0&&Fe.__version!==de.version){Ce(Fe,de,ee);return}t.bindTexture(n.TEXTURE_2D_ARRAY,Fe.__webglTexture,n.TEXTURE0+ee)}function F(de,ee){const Fe=r.get(de);if(de.version>0&&Fe.__version!==de.version){Ce(Fe,de,ee);return}t.bindTexture(n.TEXTURE_3D,Fe.__webglTexture,n.TEXTURE0+ee)}function j(de,ee){const Fe=r.get(de);if(de.version>0&&Fe.__version!==de.version){Ge(Fe,de,ee);return}t.bindTexture(n.TEXTURE_CUBE_MAP,Fe.__webglTexture,n.TEXTURE0+ee)}const Q={[Nv]:n.REPEAT,[ps]:n.CLAMP_TO_EDGE,[Fv]:n.MIRRORED_REPEAT},se={[Gi]:n.NEAREST,[Yx]:n.NEAREST_MIPMAP_NEAREST,[Z0]:n.NEAREST_MIPMAP_LINEAR,[ti]:n.LINEAR,[F3]:n.LINEAR_MIPMAP_NEAREST,[pf]:n.LINEAR_MIPMAP_LINEAR},fe={[sF]:n.NEVER,[dF]:n.ALWAYS,[aF]:n.LESS,[uF]:n.LEQUAL,[lF]:n.EQUAL,[fF]:n.GEQUAL,[cF]:n.GREATER,[hF]:n.NOTEQUAL};function we(de,ee,Fe){if(Fe?(n.texParameteri(de,n.TEXTURE_WRAP_S,Q[ee.wrapS]),n.texParameteri(de,n.TEXTURE_WRAP_T,Q[ee.wrapT]),(de===n.TEXTURE_3D||de===n.TEXTURE_2D_ARRAY)&&n.texParameteri(de,n.TEXTURE_WRAP_R,Q[ee.wrapR]),n.texParameteri(de,n.TEXTURE_MAG_FILTER,se[ee.magFilter]),n.texParameteri(de,n.TEXTURE_MIN_FILTER,se[ee.minFilter])):(n.texParameteri(de,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(de,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(de===n.TEXTURE_3D||de===n.TEXTURE_2D_ARRAY)&&n.texParameteri(de,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(ee.wrapS!==ps||ee.wrapT!==ps)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(de,n.TEXTURE_MAG_FILTER,D(ee.magFilter)),n.texParameteri(de,n.TEXTURE_MIN_FILTER,D(ee.minFilter)),ee.minFilter!==Gi&&ee.minFilter!==ti&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),ee.compareFunction&&(n.texParameteri(de,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(de,n.TEXTURE_COMPARE_FUNC,fe[ee.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const ot=e.get("EXT_texture_filter_anisotropic");if(ee.magFilter===Gi||ee.minFilter!==Z0&&ee.minFilter!==pf||ee.type===vs&&e.has("OES_texture_float_linear")===!1||a===!1&&ee.type===Rs&&e.has("OES_texture_half_float_linear")===!1)return;(ee.anisotropy>1||r.get(ee).__currentAnisotropy)&&(n.texParameterf(de,ot.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ee.anisotropy,i.getMaxAnisotropy())),r.get(ee).__currentAnisotropy=ee.anisotropy)}}function Ee(de,ee){let Fe=!1;de.__webglInit===void 0&&(de.__webglInit=!0,ee.addEventListener("dispose",N));const ot=ee.source;let et=w.get(ot);et===void 0&&(et={},w.set(ot,et));const ft=q(ee);if(ft!==de.__cacheKey){et[ft]===void 0&&(et[ft]={texture:n.createTexture(),usedTimes:0},s.memory.textures++,Fe=!0),et[ft].usedTimes++;const xt=et[de.__cacheKey];xt!==void 0&&(et[de.__cacheKey].usedTimes--,xt.usedTimes===0&&V(ee)),de.__cacheKey=ft,de.__webglTexture=et[ft].texture}return Fe}function Ce(de,ee,Fe){let ot=n.TEXTURE_2D;(ee.isDataArrayTexture||ee.isCompressedArrayTexture)&&(ot=n.TEXTURE_2D_ARRAY),ee.isData3DTexture&&(ot=n.TEXTURE_3D);const et=Ee(de,ee),ft=ee.source;t.bindTexture(ot,de.__webglTexture,n.TEXTURE0+Fe);const xt=r.get(ft);if(ft.version!==xt.__version||et===!0){t.activeTexture(n.TEXTURE0+Fe),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,ee.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,ee.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const ht=C(ee)&&E(ee.image)===!1;let Pe=_(ee.image,ht,!1,c);Pe=_t(ee,Pe);const Wt=E(Pe)||a,Ct=o.convert(ee.format,ee.colorSpace);let Nt=o.convert(ee.type),At=L(ee.internalFormat,Ct,Nt,ee.colorSpace);we(ot,ee,Wt);let be;const Je=ee.mipmaps,pt=a&&ee.isVideoTexture!==!0,Te=xt.__version===void 0||et===!0,Ue=k(ee,Pe,Wt);if(ee.isDepthTexture)At=n.DEPTH_COMPONENT,a?ee.type===vs?At=n.DEPTH_COMPONENT32F:ee.type===Mc?At=n.DEPTH_COMPONENT24:ee.type===sf?At=n.DEPTH24_STENCIL8:At=n.DEPTH_COMPONENT16:ee.type===vs&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ee.format===af&&At===n.DEPTH_COMPONENT&&ee.type!==Ww&&ee.type!==Mc&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ee.type=Mc,Nt=o.convert(ee.type)),ee.format===zd&&At===n.DEPTH_COMPONENT&&(At=n.DEPTH_STENCIL,ee.type!==sf&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ee.type=sf,Nt=o.convert(ee.type))),Te&&(pt?t.texStorage2D(n.TEXTURE_2D,1,At,Pe.width,Pe.height):t.texImage2D(n.TEXTURE_2D,0,At,Pe.width,Pe.height,0,Ct,Nt,null));else if(ee.isDataTexture)if(Je.length>0&&Wt){pt&&Te&&t.texStorage2D(n.TEXTURE_2D,Ue,At,Je[0].width,Je[0].height);for(let qe=0,Mt=Je.length;qe<Mt;qe++)be=Je[qe],pt?t.texSubImage2D(n.TEXTURE_2D,qe,0,0,be.width,be.height,Ct,Nt,be.data):t.texImage2D(n.TEXTURE_2D,qe,At,be.width,be.height,0,Ct,Nt,be.data);ee.generateMipmaps=!1}else pt?(Te&&t.texStorage2D(n.TEXTURE_2D,Ue,At,Pe.width,Pe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Pe.width,Pe.height,Ct,Nt,Pe.data)):t.texImage2D(n.TEXTURE_2D,0,At,Pe.width,Pe.height,0,Ct,Nt,Pe.data);else if(ee.isCompressedTexture)if(ee.isCompressedArrayTexture){pt&&Te&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ue,At,Je[0].width,Je[0].height,Pe.depth);for(let qe=0,Mt=Je.length;qe<Mt;qe++)be=Je[qe],ee.format!==Ls?Ct!==null?pt?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,qe,0,0,0,be.width,be.height,Pe.depth,Ct,be.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,qe,At,be.width,be.height,Pe.depth,0,be.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pt?t.texSubImage3D(n.TEXTURE_2D_ARRAY,qe,0,0,0,be.width,be.height,Pe.depth,Ct,Nt,be.data):t.texImage3D(n.TEXTURE_2D_ARRAY,qe,At,be.width,be.height,Pe.depth,0,Ct,Nt,be.data)}else{pt&&Te&&t.texStorage2D(n.TEXTURE_2D,Ue,At,Je[0].width,Je[0].height);for(let qe=0,Mt=Je.length;qe<Mt;qe++)be=Je[qe],ee.format!==Ls?Ct!==null?pt?t.compressedTexSubImage2D(n.TEXTURE_2D,qe,0,0,be.width,be.height,Ct,be.data):t.compressedTexImage2D(n.TEXTURE_2D,qe,At,be.width,be.height,0,be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pt?t.texSubImage2D(n.TEXTURE_2D,qe,0,0,be.width,be.height,Ct,Nt,be.data):t.texImage2D(n.TEXTURE_2D,qe,At,be.width,be.height,0,Ct,Nt,be.data)}else if(ee.isDataArrayTexture)pt?(Te&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ue,At,Pe.width,Pe.height,Pe.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Pe.width,Pe.height,Pe.depth,Ct,Nt,Pe.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,At,Pe.width,Pe.height,Pe.depth,0,Ct,Nt,Pe.data);else if(ee.isData3DTexture)pt?(Te&&t.texStorage3D(n.TEXTURE_3D,Ue,At,Pe.width,Pe.height,Pe.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Pe.width,Pe.height,Pe.depth,Ct,Nt,Pe.data)):t.texImage3D(n.TEXTURE_3D,0,At,Pe.width,Pe.height,Pe.depth,0,Ct,Nt,Pe.data);else if(ee.isFramebufferTexture){if(Te)if(pt)t.texStorage2D(n.TEXTURE_2D,Ue,At,Pe.width,Pe.height);else{let qe=Pe.width,Mt=Pe.height;for(let Et=0;Et<Ue;Et++)t.texImage2D(n.TEXTURE_2D,Et,At,qe,Mt,0,Ct,Nt,null),qe>>=1,Mt>>=1}}else if(Je.length>0&&Wt){pt&&Te&&t.texStorage2D(n.TEXTURE_2D,Ue,At,Je[0].width,Je[0].height);for(let qe=0,Mt=Je.length;qe<Mt;qe++)be=Je[qe],pt?t.texSubImage2D(n.TEXTURE_2D,qe,0,0,Ct,Nt,be):t.texImage2D(n.TEXTURE_2D,qe,At,Ct,Nt,be);ee.generateMipmaps=!1}else pt?(Te&&t.texStorage2D(n.TEXTURE_2D,Ue,At,Pe.width,Pe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ct,Nt,Pe)):t.texImage2D(n.TEXTURE_2D,0,At,Ct,Nt,Pe);I(ee,Wt)&&R(ot),xt.__version=ft.version,ee.onUpdate&&ee.onUpdate(ee)}de.__version=ee.version}function Ge(de,ee,Fe){if(ee.image.length!==6)return;const ot=Ee(de,ee),et=ee.source;t.bindTexture(n.TEXTURE_CUBE_MAP,de.__webglTexture,n.TEXTURE0+Fe);const ft=r.get(et);if(et.version!==ft.__version||ot===!0){t.activeTexture(n.TEXTURE0+Fe),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,ee.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,ee.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const xt=ee.isCompressedTexture||ee.image[0].isCompressedTexture,ht=ee.image[0]&&ee.image[0].isDataTexture,Pe=[];for(let qe=0;qe<6;qe++)!xt&&!ht?Pe[qe]=_(ee.image[qe],!1,!0,u):Pe[qe]=ht?ee.image[qe].image:ee.image[qe],Pe[qe]=_t(ee,Pe[qe]);const Wt=Pe[0],Ct=E(Wt)||a,Nt=o.convert(ee.format,ee.colorSpace),At=o.convert(ee.type),be=L(ee.internalFormat,Nt,At,ee.colorSpace),Je=a&&ee.isVideoTexture!==!0,pt=ft.__version===void 0||ot===!0;let Te=k(ee,Wt,Ct);we(n.TEXTURE_CUBE_MAP,ee,Ct);let Ue;if(xt){Je&&pt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Te,be,Wt.width,Wt.height);for(let qe=0;qe<6;qe++){Ue=Pe[qe].mipmaps;for(let Mt=0;Mt<Ue.length;Mt++){const Et=Ue[Mt];ee.format!==Ls?Nt!==null?Je?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Mt,0,0,Et.width,Et.height,Nt,Et.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Mt,be,Et.width,Et.height,0,Et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Je?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Mt,0,0,Et.width,Et.height,Nt,At,Et.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Mt,be,Et.width,Et.height,0,Nt,At,Et.data)}}}else{Ue=ee.mipmaps,Je&&pt&&(Ue.length>0&&Te++,t.texStorage2D(n.TEXTURE_CUBE_MAP,Te,be,Pe[0].width,Pe[0].height));for(let qe=0;qe<6;qe++)if(ht){Je?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,0,0,Pe[qe].width,Pe[qe].height,Nt,At,Pe[qe].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,be,Pe[qe].width,Pe[qe].height,0,Nt,At,Pe[qe].data);for(let Mt=0;Mt<Ue.length;Mt++){const It=Ue[Mt].image[qe].image;Je?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Mt+1,0,0,It.width,It.height,Nt,At,It.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Mt+1,be,It.width,It.height,0,Nt,At,It.data)}}else{Je?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,0,0,Nt,At,Pe[qe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,0,be,Nt,At,Pe[qe]);for(let Mt=0;Mt<Ue.length;Mt++){const Et=Ue[Mt];Je?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Mt+1,0,0,Nt,At,Et.image[qe]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+qe,Mt+1,be,Nt,At,Et.image[qe])}}}I(ee,Ct)&&R(n.TEXTURE_CUBE_MAP),ft.__version=et.version,ee.onUpdate&&ee.onUpdate(ee)}de.__version=ee.version}function Ie(de,ee,Fe,ot,et,ft){const xt=o.convert(Fe.format,Fe.colorSpace),ht=o.convert(Fe.type),Pe=L(Fe.internalFormat,xt,ht,Fe.colorSpace);if(!r.get(ee).__hasExternalTextures){const Ct=Math.max(1,ee.width>>ft),Nt=Math.max(1,ee.height>>ft);et===n.TEXTURE_3D||et===n.TEXTURE_2D_ARRAY?t.texImage3D(et,ft,Pe,Ct,Nt,ee.depth,0,xt,ht,null):t.texImage2D(et,ft,Pe,Ct,Nt,0,xt,ht,null)}t.bindFramebuffer(n.FRAMEBUFFER,de),nt(ee)?f.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,ot,et,r.get(Fe).__webglTexture,0,We(ee)):(et===n.TEXTURE_2D||et>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&et<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,ot,et,r.get(Fe).__webglTexture,ft),t.bindFramebuffer(n.FRAMEBUFFER,null)}function he(de,ee,Fe){if(n.bindRenderbuffer(n.RENDERBUFFER,de),ee.depthBuffer&&!ee.stencilBuffer){let ot=n.DEPTH_COMPONENT16;if(Fe||nt(ee)){const et=ee.depthTexture;et&&et.isDepthTexture&&(et.type===vs?ot=n.DEPTH_COMPONENT32F:et.type===Mc&&(ot=n.DEPTH_COMPONENT24));const ft=We(ee);nt(ee)?f.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ft,ot,ee.width,ee.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,ft,ot,ee.width,ee.height)}else n.renderbufferStorage(n.RENDERBUFFER,ot,ee.width,ee.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,de)}else if(ee.depthBuffer&&ee.stencilBuffer){const ot=We(ee);Fe&&nt(ee)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ot,n.DEPTH24_STENCIL8,ee.width,ee.height):nt(ee)?f.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ot,n.DEPTH24_STENCIL8,ee.width,ee.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,ee.width,ee.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,de)}else{const ot=ee.isWebGLMultipleRenderTargets===!0?ee.texture:[ee.texture];for(let et=0;et<ot.length;et++){const ft=ot[et],xt=o.convert(ft.format,ft.colorSpace),ht=o.convert(ft.type),Pe=L(ft.internalFormat,xt,ht,ft.colorSpace),Wt=We(ee);Fe&&nt(ee)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Wt,Pe,ee.width,ee.height):nt(ee)?f.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Wt,Pe,ee.width,ee.height):n.renderbufferStorage(n.RENDERBUFFER,Pe,ee.width,ee.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ke(de,ee){if(ee&&ee.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,de),!(ee.depthTexture&&ee.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(ee.depthTexture).__webglTexture||ee.depthTexture.image.width!==ee.width||ee.depthTexture.image.height!==ee.height)&&(ee.depthTexture.image.width=ee.width,ee.depthTexture.image.height=ee.height,ee.depthTexture.needsUpdate=!0),Z(ee.depthTexture,0);const ot=r.get(ee.depthTexture).__webglTexture,et=We(ee);if(ee.depthTexture.format===af)nt(ee)?f.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ot,0,et):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,ot,0);else if(ee.depthTexture.format===zd)nt(ee)?f.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ot,0,et):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,ot,0);else throw new Error("Unknown depthTexture format")}function Ne(de){const ee=r.get(de),Fe=de.isWebGLCubeRenderTarget===!0;if(de.depthTexture&&!ee.__autoAllocateDepthBuffer){if(Fe)throw new Error("target.depthTexture not supported in Cube render targets");ke(ee.__webglFramebuffer,de)}else if(Fe){ee.__webglDepthbuffer=[];for(let ot=0;ot<6;ot++)t.bindFramebuffer(n.FRAMEBUFFER,ee.__webglFramebuffer[ot]),ee.__webglDepthbuffer[ot]=n.createRenderbuffer(),he(ee.__webglDepthbuffer[ot],de,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,ee.__webglFramebuffer),ee.__webglDepthbuffer=n.createRenderbuffer(),he(ee.__webglDepthbuffer,de,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ae(de,ee,Fe){const ot=r.get(de);ee!==void 0&&Ie(ot.__webglFramebuffer,de,de.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),Fe!==void 0&&Ne(de)}function ie(de){const ee=de.texture,Fe=r.get(de),ot=r.get(ee);de.addEventListener("dispose",B),de.isWebGLMultipleRenderTargets!==!0&&(ot.__webglTexture===void 0&&(ot.__webglTexture=n.createTexture()),ot.__version=ee.version,s.memory.textures++);const et=de.isWebGLCubeRenderTarget===!0,ft=de.isWebGLMultipleRenderTargets===!0,xt=E(de)||a;if(et){Fe.__webglFramebuffer=[];for(let ht=0;ht<6;ht++)if(a&&ee.mipmaps&&ee.mipmaps.length>0){Fe.__webglFramebuffer[ht]=[];for(let Pe=0;Pe<ee.mipmaps.length;Pe++)Fe.__webglFramebuffer[ht][Pe]=n.createFramebuffer()}else Fe.__webglFramebuffer[ht]=n.createFramebuffer()}else{if(a&&ee.mipmaps&&ee.mipmaps.length>0){Fe.__webglFramebuffer=[];for(let ht=0;ht<ee.mipmaps.length;ht++)Fe.__webglFramebuffer[ht]=n.createFramebuffer()}else Fe.__webglFramebuffer=n.createFramebuffer();if(ft)if(i.drawBuffers){const ht=de.texture;for(let Pe=0,Wt=ht.length;Pe<Wt;Pe++){const Ct=r.get(ht[Pe]);Ct.__webglTexture===void 0&&(Ct.__webglTexture=n.createTexture(),s.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&de.samples>0&&nt(de)===!1){const ht=ft?ee:[ee];Fe.__webglMultisampledFramebuffer=n.createFramebuffer(),Fe.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglMultisampledFramebuffer);for(let Pe=0;Pe<ht.length;Pe++){const Wt=ht[Pe];Fe.__webglColorRenderbuffer[Pe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,Fe.__webglColorRenderbuffer[Pe]);const Ct=o.convert(Wt.format,Wt.colorSpace),Nt=o.convert(Wt.type),At=L(Wt.internalFormat,Ct,Nt,Wt.colorSpace,de.isXRRenderTarget===!0),be=We(de);n.renderbufferStorageMultisample(n.RENDERBUFFER,be,At,de.width,de.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Pe,n.RENDERBUFFER,Fe.__webglColorRenderbuffer[Pe])}n.bindRenderbuffer(n.RENDERBUFFER,null),de.depthBuffer&&(Fe.__webglDepthRenderbuffer=n.createRenderbuffer(),he(Fe.__webglDepthRenderbuffer,de,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(et){t.bindTexture(n.TEXTURE_CUBE_MAP,ot.__webglTexture),we(n.TEXTURE_CUBE_MAP,ee,xt);for(let ht=0;ht<6;ht++)if(a&&ee.mipmaps&&ee.mipmaps.length>0)for(let Pe=0;Pe<ee.mipmaps.length;Pe++)Ie(Fe.__webglFramebuffer[ht][Pe],de,ee,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ht,Pe);else Ie(Fe.__webglFramebuffer[ht],de,ee,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+ht,0);I(ee,xt)&&R(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(ft){const ht=de.texture;for(let Pe=0,Wt=ht.length;Pe<Wt;Pe++){const Ct=ht[Pe],Nt=r.get(Ct);t.bindTexture(n.TEXTURE_2D,Nt.__webglTexture),we(n.TEXTURE_2D,Ct,xt),Ie(Fe.__webglFramebuffer,de,Ct,n.COLOR_ATTACHMENT0+Pe,n.TEXTURE_2D,0),I(Ct,xt)&&R(n.TEXTURE_2D)}t.unbindTexture()}else{let ht=n.TEXTURE_2D;if((de.isWebGL3DRenderTarget||de.isWebGLArrayRenderTarget)&&(a?ht=de.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(ht,ot.__webglTexture),we(ht,ee,xt),a&&ee.mipmaps&&ee.mipmaps.length>0)for(let Pe=0;Pe<ee.mipmaps.length;Pe++)Ie(Fe.__webglFramebuffer[Pe],de,ee,n.COLOR_ATTACHMENT0,ht,Pe);else Ie(Fe.__webglFramebuffer,de,ee,n.COLOR_ATTACHMENT0,ht,0);I(ee,xt)&&R(ht),t.unbindTexture()}de.depthBuffer&&Ne(de)}function Ke(de){const ee=E(de)||a,Fe=de.isWebGLMultipleRenderTargets===!0?de.texture:[de.texture];for(let ot=0,et=Fe.length;ot<et;ot++){const ft=Fe[ot];if(I(ft,ee)){const xt=de.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,ht=r.get(ft).__webglTexture;t.bindTexture(xt,ht),R(xt),t.unbindTexture()}}}function Ve(de){if(a&&de.samples>0&&nt(de)===!1){const ee=de.isWebGLMultipleRenderTargets?de.texture:[de.texture],Fe=de.width,ot=de.height;let et=n.COLOR_BUFFER_BIT;const ft=[],xt=de.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ht=r.get(de),Pe=de.isWebGLMultipleRenderTargets===!0;if(Pe)for(let Wt=0;Wt<ee.length;Wt++)t.bindFramebuffer(n.FRAMEBUFFER,ht.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Wt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,ht.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Wt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,ht.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ht.__webglFramebuffer);for(let Wt=0;Wt<ee.length;Wt++){ft.push(n.COLOR_ATTACHMENT0+Wt),de.depthBuffer&&ft.push(xt);const Ct=ht.__ignoreDepthValues!==void 0?ht.__ignoreDepthValues:!1;if(Ct===!1&&(de.depthBuffer&&(et|=n.DEPTH_BUFFER_BIT),de.stencilBuffer&&(et|=n.STENCIL_BUFFER_BIT)),Pe&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,ht.__webglColorRenderbuffer[Wt]),Ct===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[xt]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[xt])),Pe){const Nt=r.get(ee[Wt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Nt,0)}n.blitFramebuffer(0,0,Fe,ot,0,0,Fe,ot,et,n.NEAREST),d&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,ft)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Pe)for(let Wt=0;Wt<ee.length;Wt++){t.bindFramebuffer(n.FRAMEBUFFER,ht.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Wt,n.RENDERBUFFER,ht.__webglColorRenderbuffer[Wt]);const Ct=r.get(ee[Wt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,ht.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Wt,n.TEXTURE_2D,Ct,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,ht.__webglMultisampledFramebuffer)}}function We(de){return Math.min(h,de.samples)}function nt(de){const ee=r.get(de);return a&&de.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&ee.__useRenderToTexture!==!1}function yt(de){const ee=s.render.frame;v.get(de)!==ee&&(v.set(de,ee),de.update())}function _t(de,ee){const Fe=de.colorSpace,ot=de.format,et=de.type;return de.isCompressedTexture===!0||de.format===Zx||Fe!==Wl&&Fe!==uf&&(Fe===Gn?a===!1?e.has("EXT_sRGB")===!0&&ot===Ls?(de.format=Zx,de.minFilter=ti,de.generateMipmaps=!1):ee=q3.sRGBToLinear(ee):(ot!==Ls||et!==ku)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Fe)),ee}this.allocateTextureUnit=H,this.resetTextureUnits=le,this.setTexture2D=Z,this.setTexture2DArray=oe,this.setTexture3D=F,this.setTextureCube=j,this.rebindTextures=Ae,this.setupRenderTarget=ie,this.updateRenderTargetMipmap=Ke,this.updateMultisampleRenderTarget=Ve,this.setupDepthRenderbuffer=Ne,this.setupFrameBufferTexture=Ie,this.useMultisampledRTT=nt}function AF(n,e,t){const r=t.isWebGL2;function i(o,s=uf){let a;if(o===ku)return n.UNSIGNED_BYTE;if(o===O3)return n.UNSIGNED_SHORT_4_4_4_4;if(o===B3)return n.UNSIGNED_SHORT_5_5_5_1;if(o===jN)return n.BYTE;if(o===$N)return n.SHORT;if(o===Ww)return n.UNSIGNED_SHORT;if(o===D3)return n.INT;if(o===Mc)return n.UNSIGNED_INT;if(o===vs)return n.FLOAT;if(o===Rs)return r?n.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(o===qN)return n.ALPHA;if(o===Ls)return n.RGBA;if(o===XN)return n.LUMINANCE;if(o===YN)return n.LUMINANCE_ALPHA;if(o===af)return n.DEPTH_COMPONENT;if(o===zd)return n.DEPTH_STENCIL;if(o===Zx)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(o===U3)return n.RED;if(o===z3)return n.RED_INTEGER;if(o===ZN)return n.RG;if(o===H3)return n.RG_INTEGER;if(o===G3)return n.RGBA_INTEGER;if(o===Q2||o===ex||o===tx||o===nx)if(s===Gn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(o===Q2)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(o===ex)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(o===tx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(o===nx)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(o===Q2)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===ex)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===tx)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===nx)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(o===aM||o===lM||o===uM||o===cM)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(o===aM)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===lM)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===uM)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===cM)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(o===KN)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(o===hM||o===fM)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(o===hM)return s===Gn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(o===fM)return s===Gn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(o===dM||o===pM||o===mM||o===gM||o===vM||o===yM||o===xM||o===wM||o===SM||o===_M||o===bM||o===MM||o===EM||o===AM)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(o===dM)return s===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(o===pM)return s===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(o===mM)return s===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(o===gM)return s===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(o===vM)return s===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(o===yM)return s===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(o===xM)return s===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(o===wM)return s===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(o===SM)return s===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(o===_M)return s===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(o===bM)return s===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(o===MM)return s===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(o===EM)return s===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(o===AM)return s===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(o===rx)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(o===rx)return s===Gn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(o===JN||o===TM||o===CM||o===PM)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(o===rx)return a.COMPRESSED_RED_RGTC1_EXT;if(o===TM)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(o===CM)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(o===PM)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return o===sf?r?n.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):n[o]!==void 0?n[o]:null}return{convert:i}}class TF extends Si{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Pm extends cr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Jj={type:"move"};class W_{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Pm,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Pm,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ge,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ge),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Pm,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ge,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ge),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const r of e.hand.values())this._getHandJoint(t,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,r){let i=null,o=null,s=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){s=!0;for(const y of e.hand.values()){const w=t.getJointPose(y,r),g=this._getHandJoint(u,y);w!==null&&(g.matrix.fromArray(w.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=w.radius),g.visible=w!==null}const c=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],f=c.position.distanceTo(h.position),d=.02,v=.005;u.inputState.pinching&&f>d+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&f<=d-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(o=t.getPose(e.gripSpace,r),o!==null&&(l.matrix.fromArray(o.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,o.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(o.linearVelocity)):l.hasLinearVelocity=!1,o.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(o.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=t.getPose(e.targetRaySpace,r),i===null&&o!==null&&(i=o),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Jj)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=o!==null),u!==null&&(u.visible=s!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const r=new Pm;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[t.jointName]=r,e.add(r)}return e.joints[t.jointName]}}class CF extends Fi{constructor(e,t,r,i,o,s,a,l,u,c){if(c=c!==void 0?c:af,c!==af&&c!==zd)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===af&&(r=Mc),r===void 0&&c===zd&&(r=sf),super(null,i,o,s,a,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Gi,this.minFilter=l!==void 0?l:Gi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class Qj extends Wc{constructor(e,t){super();const r=this;let i=null,o=1,s=null,a="local-floor",l=1,u=null,c=null,h=null,f=null,d=null,v=null;const y=t.getContextAttributes();let w=null,g=null;const x=[],_=[],E=new Si;E.layers.enable(1),E.viewport=new Nr;const C=new Si;C.layers.enable(2),C.viewport=new Nr;const I=[E,C],R=new TF;R.layers.enable(1),R.layers.enable(2);let L=null,k=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(oe){let F=x[oe];return F===void 0&&(F=new W_,x[oe]=F),F.getTargetRaySpace()},this.getControllerGrip=function(oe){let F=x[oe];return F===void 0&&(F=new W_,x[oe]=F),F.getGripSpace()},this.getHand=function(oe){let F=x[oe];return F===void 0&&(F=new W_,x[oe]=F),F.getHandSpace()};function D(oe){const F=_.indexOf(oe.inputSource);if(F===-1)return;const j=x[F];j!==void 0&&(j.update(oe.inputSource,oe.frame,u||s),j.dispatchEvent({type:oe.type,data:oe.inputSource}))}function N(){i.removeEventListener("select",D),i.removeEventListener("selectstart",D),i.removeEventListener("selectend",D),i.removeEventListener("squeeze",D),i.removeEventListener("squeezestart",D),i.removeEventListener("squeezeend",D),i.removeEventListener("end",N),i.removeEventListener("inputsourceschange",B);for(let oe=0;oe<x.length;oe++){const F=_[oe];F!==null&&(_[oe]=null,x[oe].disconnect(F))}L=null,k=null,e.setRenderTarget(w),d=null,f=null,h=null,i=null,g=null,Z.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(oe){o=oe,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(oe){a=oe,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||s},this.setReferenceSpace=function(oe){u=oe},this.getBaseLayer=function(){return f!==null?f:d},this.getBinding=function(){return h},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(oe){if(i=oe,i!==null){if(w=e.getRenderTarget(),i.addEventListener("select",D),i.addEventListener("selectstart",D),i.addEventListener("selectend",D),i.addEventListener("squeeze",D),i.addEventListener("squeezestart",D),i.addEventListener("squeezeend",D),i.addEventListener("end",N),i.addEventListener("inputsourceschange",B),y.xrCompatible!==!0&&await t.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const F={antialias:i.renderState.layers===void 0?y.antialias:!0,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:o};d=new XRWebGLLayer(i,t,F),i.updateRenderState({baseLayer:d}),g=new jl(d.framebufferWidth,d.framebufferHeight,{format:Ls,type:ku,colorSpace:e.outputColorSpace,stencilBuffer:y.stencil})}else{let F=null,j=null,Q=null;y.depth&&(Q=y.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,F=y.stencil?zd:af,j=y.stencil?sf:Mc);const se={colorFormat:t.RGBA8,depthFormat:Q,scaleFactor:o};h=new XRWebGLBinding(i,t),f=h.createProjectionLayer(se),i.updateRenderState({layers:[f]}),g=new jl(f.textureWidth,f.textureHeight,{format:Ls,type:ku,depthTexture:new CF(f.textureWidth,f.textureHeight,j,void 0,void 0,void 0,void 0,void 0,void 0,F),stencilBuffer:y.stencil,colorSpace:e.outputColorSpace,samples:y.antialias?4:0});const fe=e.properties.get(g);fe.__ignoreDepthValues=f.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),u=null,s=await i.requestReferenceSpace(a),Z.setContext(i),Z.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function B(oe){for(let F=0;F<oe.removed.length;F++){const j=oe.removed[F],Q=_.indexOf(j);Q>=0&&(_[Q]=null,x[Q].disconnect(j))}for(let F=0;F<oe.added.length;F++){const j=oe.added[F];let Q=_.indexOf(j);if(Q===-1){for(let fe=0;fe<x.length;fe++)if(fe>=_.length){_.push(j),Q=fe;break}else if(_[fe]===null){_[fe]=j,Q=fe;break}if(Q===-1)break}const se=x[Q];se&&se.connect(j)}}const G=new ge,V=new ge;function $(oe,F,j){G.setFromMatrixPosition(F.matrixWorld),V.setFromMatrixPosition(j.matrixWorld);const Q=G.distanceTo(V),se=F.projectionMatrix.elements,fe=j.projectionMatrix.elements,we=se[14]/(se[10]-1),Ee=se[14]/(se[10]+1),Ce=(se[9]+1)/se[5],Ge=(se[9]-1)/se[5],Ie=(se[8]-1)/se[0],he=(fe[8]+1)/fe[0],ke=we*Ie,Ne=we*he,Ae=Q/(-Ie+he),ie=Ae*-Ie;F.matrixWorld.decompose(oe.position,oe.quaternion,oe.scale),oe.translateX(ie),oe.translateZ(Ae),oe.matrixWorld.compose(oe.position,oe.quaternion,oe.scale),oe.matrixWorldInverse.copy(oe.matrixWorld).invert();const Ke=we+Ae,Ve=Ee+Ae,We=ke-ie,nt=Ne+(Q-ie),yt=Ce*Ee/Ve*Ke,_t=Ge*Ee/Ve*Ke;oe.projectionMatrix.makePerspective(We,nt,yt,_t,Ke,Ve),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert()}function J(oe,F){F===null?oe.matrixWorld.copy(oe.matrix):oe.matrixWorld.multiplyMatrices(F.matrixWorld,oe.matrix),oe.matrixWorldInverse.copy(oe.matrixWorld).invert()}this.updateCamera=function(oe){if(i===null)return;R.near=C.near=E.near=oe.near,R.far=C.far=E.far=oe.far,(L!==R.near||k!==R.far)&&(i.updateRenderState({depthNear:R.near,depthFar:R.far}),L=R.near,k=R.far);const F=oe.parent,j=R.cameras;J(R,F);for(let Q=0;Q<j.length;Q++)J(j[Q],F);j.length===2?$(R,E,C):R.projectionMatrix.copy(E.projectionMatrix),le(oe,R,F)};function le(oe,F,j){j===null?oe.matrix.copy(F.matrixWorld):(oe.matrix.copy(j.matrixWorld),oe.matrix.invert(),oe.matrix.multiply(F.matrixWorld)),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale),oe.updateMatrixWorld(!0);const Q=oe.children;for(let se=0,fe=Q.length;se<fe;se++)Q[se].updateMatrixWorld(!0);oe.projectionMatrix.copy(F.projectionMatrix),oe.projectionMatrixInverse.copy(F.projectionMatrixInverse),oe.isPerspectiveCamera&&(oe.fov=og*2*Math.atan(1/oe.projectionMatrix.elements[5]),oe.zoom=1)}this.getCamera=function(){return R},this.getFoveation=function(){if(!(f===null&&d===null))return l},this.setFoveation=function(oe){l=oe,f!==null&&(f.fixedFoveation=oe),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=oe)};let H=null;function q(oe,F){if(c=F.getViewerPose(u||s),v=F,c!==null){const j=c.views;d!==null&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let Q=!1;j.length!==R.cameras.length&&(R.cameras.length=0,Q=!0);for(let se=0;se<j.length;se++){const fe=j[se];let we=null;if(d!==null)we=d.getViewport(fe);else{const Ce=h.getViewSubImage(f,fe);we=Ce.viewport,se===0&&(e.setRenderTargetTextures(g,Ce.colorTexture,f.ignoreDepthValues?void 0:Ce.depthStencilTexture),e.setRenderTarget(g))}let Ee=I[se];Ee===void 0&&(Ee=new Si,Ee.layers.enable(se),Ee.viewport=new Nr,I[se]=Ee),Ee.matrix.fromArray(fe.transform.matrix),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.projectionMatrix.fromArray(fe.projectionMatrix),Ee.projectionMatrixInverse.copy(Ee.projectionMatrix).invert(),Ee.viewport.set(we.x,we.y,we.width,we.height),se===0&&(R.matrix.copy(Ee.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),Q===!0&&R.cameras.push(Ee)}}for(let j=0;j<x.length;j++){const Q=_[j],se=x[j];Q!==null&&se!==void 0&&se.update(Q,F,u||s)}H&&H(oe,F),F.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:F}),v=null}const Z=new SF;Z.setAnimationLoop(q),this.setAnimationLoop=function(oe){H=oe},this.dispose=function(){}}}function e$(n,e){function t(w,g){w.matrixAutoUpdate===!0&&w.updateMatrix(),g.value.copy(w.matrix)}function r(w,g){g.color.getRGB(w.fogColor.value,yF(n)),g.isFog?(w.fogNear.value=g.near,w.fogFar.value=g.far):g.isFogExp2&&(w.fogDensity.value=g.density)}function i(w,g,x,_,E){g.isMeshBasicMaterial||g.isMeshLambertMaterial?o(w,g):g.isMeshToonMaterial?(o(w,g),h(w,g)):g.isMeshPhongMaterial?(o(w,g),c(w,g)):g.isMeshStandardMaterial?(o(w,g),f(w,g),g.isMeshPhysicalMaterial&&d(w,g,E)):g.isMeshMatcapMaterial?(o(w,g),v(w,g)):g.isMeshDepthMaterial?o(w,g):g.isMeshDistanceMaterial?(o(w,g),y(w,g)):g.isMeshNormalMaterial?o(w,g):g.isLineBasicMaterial?(s(w,g),g.isLineDashedMaterial&&a(w,g)):g.isPointsMaterial?l(w,g,x,_):g.isSpriteMaterial?u(w,g):g.isShadowMaterial?(w.color.value.copy(g.color),w.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function o(w,g){w.opacity.value=g.opacity,g.color&&w.diffuse.value.copy(g.color),g.emissive&&w.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(w.map.value=g.map,t(g.map,w.mapTransform)),g.alphaMap&&(w.alphaMap.value=g.alphaMap,t(g.alphaMap,w.alphaMapTransform)),g.bumpMap&&(w.bumpMap.value=g.bumpMap,t(g.bumpMap,w.bumpMapTransform),w.bumpScale.value=g.bumpScale,g.side===Ns&&(w.bumpScale.value*=-1)),g.normalMap&&(w.normalMap.value=g.normalMap,t(g.normalMap,w.normalMapTransform),w.normalScale.value.copy(g.normalScale),g.side===Ns&&w.normalScale.value.negate()),g.displacementMap&&(w.displacementMap.value=g.displacementMap,t(g.displacementMap,w.displacementMapTransform),w.displacementScale.value=g.displacementScale,w.displacementBias.value=g.displacementBias),g.emissiveMap&&(w.emissiveMap.value=g.emissiveMap,t(g.emissiveMap,w.emissiveMapTransform)),g.specularMap&&(w.specularMap.value=g.specularMap,t(g.specularMap,w.specularMapTransform)),g.alphaTest>0&&(w.alphaTest.value=g.alphaTest);const x=e.get(g).envMap;if(x&&(w.envMap.value=x,w.flipEnvMap.value=x.isCubeTexture&&x.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=g.reflectivity,w.ior.value=g.ior,w.refractionRatio.value=g.refractionRatio),g.lightMap){w.lightMap.value=g.lightMap;const _=n._useLegacyLights===!0?Math.PI:1;w.lightMapIntensity.value=g.lightMapIntensity*_,t(g.lightMap,w.lightMapTransform)}g.aoMap&&(w.aoMap.value=g.aoMap,w.aoMapIntensity.value=g.aoMapIntensity,t(g.aoMap,w.aoMapTransform))}function s(w,g){w.diffuse.value.copy(g.color),w.opacity.value=g.opacity,g.map&&(w.map.value=g.map,t(g.map,w.mapTransform))}function a(w,g){w.dashSize.value=g.dashSize,w.totalSize.value=g.dashSize+g.gapSize,w.scale.value=g.scale}function l(w,g,x,_){w.diffuse.value.copy(g.color),w.opacity.value=g.opacity,w.size.value=g.size*x,w.scale.value=_*.5,g.map&&(w.map.value=g.map,t(g.map,w.uvTransform)),g.alphaMap&&(w.alphaMap.value=g.alphaMap,t(g.alphaMap,w.alphaMapTransform)),g.alphaTest>0&&(w.alphaTest.value=g.alphaTest)}function u(w,g){w.diffuse.value.copy(g.color),w.opacity.value=g.opacity,w.rotation.value=g.rotation,g.map&&(w.map.value=g.map,t(g.map,w.mapTransform)),g.alphaMap&&(w.alphaMap.value=g.alphaMap,t(g.alphaMap,w.alphaMapTransform)),g.alphaTest>0&&(w.alphaTest.value=g.alphaTest)}function c(w,g){w.specular.value.copy(g.specular),w.shininess.value=Math.max(g.shininess,1e-4)}function h(w,g){g.gradientMap&&(w.gradientMap.value=g.gradientMap)}function f(w,g){w.metalness.value=g.metalness,g.metalnessMap&&(w.metalnessMap.value=g.metalnessMap,t(g.metalnessMap,w.metalnessMapTransform)),w.roughness.value=g.roughness,g.roughnessMap&&(w.roughnessMap.value=g.roughnessMap,t(g.roughnessMap,w.roughnessMapTransform)),e.get(g).envMap&&(w.envMapIntensity.value=g.envMapIntensity)}function d(w,g,x){w.ior.value=g.ior,g.sheen>0&&(w.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),w.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(w.sheenColorMap.value=g.sheenColorMap,t(g.sheenColorMap,w.sheenColorMapTransform)),g.sheenRoughnessMap&&(w.sheenRoughnessMap.value=g.sheenRoughnessMap,t(g.sheenRoughnessMap,w.sheenRoughnessMapTransform))),g.clearcoat>0&&(w.clearcoat.value=g.clearcoat,w.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(w.clearcoatMap.value=g.clearcoatMap,t(g.clearcoatMap,w.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,t(g.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(w.clearcoatNormalMap.value=g.clearcoatNormalMap,t(g.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Ns&&w.clearcoatNormalScale.value.negate())),g.iridescence>0&&(w.iridescence.value=g.iridescence,w.iridescenceIOR.value=g.iridescenceIOR,w.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(w.iridescenceMap.value=g.iridescenceMap,t(g.iridescenceMap,w.iridescenceMapTransform)),g.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=g.iridescenceThicknessMap,t(g.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),g.transmission>0&&(w.transmission.value=g.transmission,w.transmissionSamplerMap.value=x.texture,w.transmissionSamplerSize.value.set(x.width,x.height),g.transmissionMap&&(w.transmissionMap.value=g.transmissionMap,t(g.transmissionMap,w.transmissionMapTransform)),w.thickness.value=g.thickness,g.thicknessMap&&(w.thicknessMap.value=g.thicknessMap,t(g.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=g.attenuationDistance,w.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(w.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(w.anisotropyMap.value=g.anisotropyMap,t(g.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=g.specularIntensity,w.specularColor.value.copy(g.specularColor),g.specularColorMap&&(w.specularColorMap.value=g.specularColorMap,t(g.specularColorMap,w.specularColorMapTransform)),g.specularIntensityMap&&(w.specularIntensityMap.value=g.specularIntensityMap,t(g.specularIntensityMap,w.specularIntensityMapTransform))}function v(w,g){g.matcap&&(w.matcap.value=g.matcap)}function y(w,g){const x=e.get(g).light;w.referencePosition.value.setFromMatrixPosition(x.matrixWorld),w.nearDistance.value=x.shadow.camera.near,w.farDistance.value=x.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function t$(n,e,t,r){let i={},o={},s=[];const a=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(x,_){const E=_.program;r.uniformBlockBinding(x,E)}function u(x,_){let E=i[x.id];E===void 0&&(v(x),E=c(x),i[x.id]=E,x.addEventListener("dispose",w));const C=_.program;r.updateUBOMapping(x,C);const I=e.render.frame;o[x.id]!==I&&(f(x),o[x.id]=I)}function c(x){const _=h();x.__bindingPointIndex=_;const E=n.createBuffer(),C=x.__size,I=x.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,C,I),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,_,E),E}function h(){for(let x=0;x<a;x++)if(s.indexOf(x)===-1)return s.push(x),x;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(x){const _=i[x.id],E=x.uniforms,C=x.__cache;n.bindBuffer(n.UNIFORM_BUFFER,_);for(let I=0,R=E.length;I<R;I++){const L=E[I];if(d(L,I,C)===!0){const k=L.__offset,D=Array.isArray(L.value)?L.value:[L.value];let N=0;for(let B=0;B<D.length;B++){const G=D[B],V=y(G);typeof G=="number"?(L.__data[0]=G,n.bufferSubData(n.UNIFORM_BUFFER,k+N,L.__data)):G.isMatrix3?(L.__data[0]=G.elements[0],L.__data[1]=G.elements[1],L.__data[2]=G.elements[2],L.__data[3]=G.elements[0],L.__data[4]=G.elements[3],L.__data[5]=G.elements[4],L.__data[6]=G.elements[5],L.__data[7]=G.elements[0],L.__data[8]=G.elements[6],L.__data[9]=G.elements[7],L.__data[10]=G.elements[8],L.__data[11]=G.elements[0]):(G.toArray(L.__data,N),N+=V.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,k,L.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function d(x,_,E){const C=x.value;if(E[_]===void 0){if(typeof C=="number")E[_]=C;else{const I=Array.isArray(C)?C:[C],R=[];for(let L=0;L<I.length;L++)R.push(I[L].clone());E[_]=R}return!0}else if(typeof C=="number"){if(E[_]!==C)return E[_]=C,!0}else{const I=Array.isArray(E[_])?E[_]:[E[_]],R=Array.isArray(C)?C:[C];for(let L=0;L<I.length;L++){const k=I[L];if(k.equals(R[L])===!1)return k.copy(R[L]),!0}}return!1}function v(x){const _=x.uniforms;let E=0;const C=16;let I=0;for(let R=0,L=_.length;R<L;R++){const k=_[R],D={boundary:0,storage:0},N=Array.isArray(k.value)?k.value:[k.value];for(let B=0,G=N.length;B<G;B++){const V=N[B],$=y(V);D.boundary+=$.boundary,D.storage+=$.storage}if(k.__data=new Float32Array(D.storage/Float32Array.BYTES_PER_ELEMENT),k.__offset=E,R>0){I=E%C;const B=C-I;I!==0&&B-D.boundary<0&&(E+=C-I,k.__offset=E)}E+=D.storage}return I=E%C,I>0&&(E+=C-I),x.__size=E,x.__cache={},this}function y(x){const _={boundary:0,storage:0};return typeof x=="number"?(_.boundary=4,_.storage=4):x.isVector2?(_.boundary=8,_.storage=8):x.isVector3||x.isColor?(_.boundary=16,_.storage=12):x.isVector4?(_.boundary=16,_.storage=16):x.isMatrix3?(_.boundary=48,_.storage=48):x.isMatrix4?(_.boundary=64,_.storage=64):x.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",x),_}function w(x){const _=x.target;_.removeEventListener("dispose",w);const E=s.indexOf(_.__bindingPointIndex);s.splice(E,1),n.deleteBuffer(i[_.id]),delete i[_.id],delete o[_.id]}function g(){for(const x in i)n.deleteBuffer(i[x]);s=[],i={},o={}}return{bind:l,update:u,dispose:g}}function n$(){const n=Hv("canvas");return n.style.display="block",n}class Yw{constructor(e={}){const{canvas:t=n$(),context:r=null,depth:i=!0,stencil:o=!0,alpha:s=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let f;r!==null?f=r.getContextAttributes().alpha:f=s;const d=new Uint32Array(4),v=new Int32Array(4);let y=null,w=null;const g=[],x=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Gn,this._useLegacyLights=!1,this.toneMapping=Ru,this.toneMappingExposure=1;const _=this;let E=!1,C=0,I=0,R=null,L=-1,k=null;const D=new Nr,N=new Nr;let B=null;const G=new Yt(0);let V=0,$=t.width,J=t.height,le=1,H=null,q=null;const Z=new Nr(0,0,$,J),oe=new Nr(0,0,$,J);let F=!1;const j=new qw;let Q=!1,se=!1,fe=null;const we=new zn,Ee=new gt,Ce=new ge,Ge={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ie(){return R===null?le:1}let he=r;function ke(U,ne){for(let ve=0;ve<U.length;ve++){const me=U[ve],Se=t.getContext(me,ne);if(Se!==null)return Se}return null}try{const U={alpha:!0,depth:i,stencil:o,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${g1}`),t.addEventListener("webglcontextlost",Ue,!1),t.addEventListener("webglcontextrestored",qe,!1),t.addEventListener("webglcontextcreationerror",Mt,!1),he===null){const ne=["webgl2","webgl","experimental-webgl"];if(_.isWebGL1Renderer===!0&&ne.shift(),he=ke(ne,U),he===null)throw ke(ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&he instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),he.getShaderPrecisionFormat===void 0&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let Ne,Ae,ie,Ke,Ve,We,nt,yt,_t,de,ee,Fe,ot,et,ft,xt,ht,Pe,Wt,Ct,Nt,At,be,Je;function pt(){Ne=new vW(he),Ae=new hW(he,Ne,e),Ne.init(Ae),At=new AF(he,Ne,Ae),ie=new Zj(he,Ne,Ae),Ke=new wW(he),Ve=new Bj,We=new Kj(he,Ne,ie,Ve,Ae,At,Ke),nt=new dW(_),yt=new gW(_),_t=new L9(he,Ae),be=new uW(he,Ne,_t,Ae),de=new yW(he,_t,Ke,be),ee=new MW(he,de,_t,Ke),Wt=new bW(he,Ae,We),xt=new fW(Ve),Fe=new Oj(_,nt,yt,Ne,Ae,be,xt),ot=new e$(_,Ve),et=new zj,ft=new $j(Ne,Ae),Pe=new lW(_,nt,yt,ie,ee,f,l),ht=new Yj(_,ee,Ae),Je=new t$(he,Ke,Ae,ie),Ct=new cW(he,Ne,Ke,Ae),Nt=new xW(he,Ne,Ke,Ae),Ke.programs=Fe.programs,_.capabilities=Ae,_.extensions=Ne,_.properties=Ve,_.renderLists=et,_.shadowMap=ht,_.state=ie,_.info=Ke}pt();const Te=new Qj(_,he);this.xr=Te,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){const U=Ne.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=Ne.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return le},this.setPixelRatio=function(U){U!==void 0&&(le=U,this.setSize($,J,!1))},this.getSize=function(U){return U.set($,J)},this.setSize=function(U,ne,ve=!0){if(Te.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}$=U,J=ne,t.width=Math.floor(U*le),t.height=Math.floor(ne*le),ve===!0&&(t.style.width=U+"px",t.style.height=ne+"px"),this.setViewport(0,0,U,ne)},this.getDrawingBufferSize=function(U){return U.set($*le,J*le).floor()},this.setDrawingBufferSize=function(U,ne,ve){$=U,J=ne,le=ve,t.width=Math.floor(U*ve),t.height=Math.floor(ne*ve),this.setViewport(0,0,U,ne)},this.getCurrentViewport=function(U){return U.copy(D)},this.getViewport=function(U){return U.copy(Z)},this.setViewport=function(U,ne,ve,me){U.isVector4?Z.set(U.x,U.y,U.z,U.w):Z.set(U,ne,ve,me),ie.viewport(D.copy(Z).multiplyScalar(le).floor())},this.getScissor=function(U){return U.copy(oe)},this.setScissor=function(U,ne,ve,me){U.isVector4?oe.set(U.x,U.y,U.z,U.w):oe.set(U,ne,ve,me),ie.scissor(N.copy(oe).multiplyScalar(le).floor())},this.getScissorTest=function(){return F},this.setScissorTest=function(U){ie.setScissorTest(F=U)},this.setOpaqueSort=function(U){H=U},this.setTransparentSort=function(U){q=U},this.getClearColor=function(U){return U.copy(Pe.getClearColor())},this.setClearColor=function(){Pe.setClearColor.apply(Pe,arguments)},this.getClearAlpha=function(){return Pe.getClearAlpha()},this.setClearAlpha=function(){Pe.setClearAlpha.apply(Pe,arguments)},this.clear=function(U=!0,ne=!0,ve=!0){let me=0;if(U){let Se=!1;if(R!==null){const Xe=R.texture.format;Se=Xe===G3||Xe===H3||Xe===z3}if(Se){const Xe=R.texture.type,Ye=Xe===ku||Xe===Mc||Xe===Ww||Xe===sf||Xe===O3||Xe===B3,st=Pe.getClearColor(),rt=Pe.getClearAlpha(),dt=st.r,tt=st.g,jt=st.b;Ye?(d[0]=dt,d[1]=tt,d[2]=jt,d[3]=rt,he.clearBufferuiv(he.COLOR,0,d)):(v[0]=dt,v[1]=tt,v[2]=jt,v[3]=rt,he.clearBufferiv(he.COLOR,0,v))}else me|=he.COLOR_BUFFER_BIT}ne&&(me|=he.DEPTH_BUFFER_BIT),ve&&(me|=he.STENCIL_BUFFER_BIT),he.clear(me)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ue,!1),t.removeEventListener("webglcontextrestored",qe,!1),t.removeEventListener("webglcontextcreationerror",Mt,!1),et.dispose(),ft.dispose(),Ve.dispose(),nt.dispose(),yt.dispose(),ee.dispose(),be.dispose(),Je.dispose(),Fe.dispose(),Te.dispose(),Te.removeEventListener("sessionstart",bn),Te.removeEventListener("sessionend",dr),fe&&(fe.dispose(),fe=null),Vt.stop()};function Ue(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function qe(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const U=Ke.autoReset,ne=ht.enabled,ve=ht.autoUpdate,me=ht.needsUpdate,Se=ht.type;pt(),Ke.autoReset=U,ht.enabled=ne,ht.autoUpdate=ve,ht.needsUpdate=me,ht.type=Se}function Mt(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function Et(U){const ne=U.target;ne.removeEventListener("dispose",Et),It(ne)}function It(U){Zt(U),Ve.remove(U)}function Zt(U){const ne=Ve.get(U).programs;ne!==void 0&&(ne.forEach(function(ve){Fe.releaseProgram(ve)}),U.isShaderMaterial&&Fe.releaseShaderCache(U))}this.renderBufferDirect=function(U,ne,ve,me,Se,Xe){ne===null&&(ne=Ge);const Ye=Se.isMesh&&Se.matrixWorld.determinant()<0,st=Ko(U,ne,ve,me,Se);ie.setMaterial(me,Ye);let rt=ve.index,dt=1;if(me.wireframe===!0){if(rt=de.getWireframeAttribute(ve),rt===void 0)return;dt=2}const tt=ve.drawRange,jt=ve.attributes.position;let Rt=tt.start*dt,Ft=(tt.start+tt.count)*dt;Xe!==null&&(Rt=Math.max(Rt,Xe.start*dt),Ft=Math.min(Ft,(Xe.start+Xe.count)*dt)),rt!==null?(Rt=Math.max(Rt,0),Ft=Math.min(Ft,rt.count)):jt!=null&&(Rt=Math.max(Rt,0),Ft=Math.min(Ft,jt.count));const rn=Ft-Rt;if(rn<0||rn===1/0)return;be.setup(Se,me,st,ve,rt);let an,sn=Ct;if(rt!==null&&(an=_t.get(rt),sn=Nt,sn.setIndex(an)),Se.isMesh)me.wireframe===!0?(ie.setLineWidth(me.wireframeLinewidth*Ie()),sn.setMode(he.LINES)):sn.setMode(he.TRIANGLES);else if(Se.isLine){let Ht=me.linewidth;Ht===void 0&&(Ht=1),ie.setLineWidth(Ht*Ie()),Se.isLineSegments?sn.setMode(he.LINES):Se.isLineLoop?sn.setMode(he.LINE_LOOP):sn.setMode(he.LINE_STRIP)}else Se.isPoints?sn.setMode(he.POINTS):Se.isSprite&&sn.setMode(he.TRIANGLES);if(Se.isInstancedMesh)sn.renderInstances(Rt,rn,Se.count);else if(ve.isInstancedBufferGeometry){const Ht=ve._maxInstanceCount!==void 0?ve._maxInstanceCount:1/0,pn=Math.min(ve.instanceCount,Ht);sn.renderInstances(Rt,rn,pn)}else sn.render(Rt,rn)},this.compile=function(U,ne){function ve(me,Se,Xe){me.transparent===!0&&me.side===Ol&&me.forceSinglePass===!1?(me.side=Ns,me.needsUpdate=!0,Mr(me,Se,Xe),me.side=Uc,me.needsUpdate=!0,Mr(me,Se,Xe),me.side=Ol):Mr(me,Se,Xe)}w=ft.get(U),w.init(),x.push(w),U.traverseVisible(function(me){me.isLight&&me.layers.test(ne.layers)&&(w.pushLight(me),me.castShadow&&w.pushShadow(me))}),w.setupLights(_._useLegacyLights),U.traverse(function(me){const Se=me.material;if(Se)if(Array.isArray(Se))for(let Xe=0;Xe<Se.length;Xe++){const Ye=Se[Xe];ve(Ye,U,me)}else ve(Se,U,me)}),x.pop(),w=null};let Hn=null;function Kn(U){Hn&&Hn(U)}function bn(){Vt.stop()}function dr(){Vt.start()}const Vt=new SF;Vt.setAnimationLoop(Kn),typeof self<"u"&&Vt.setContext(self),this.setAnimationLoop=function(U){Hn=U,Te.setAnimationLoop(U),U===null?Vt.stop():Vt.start()},Te.addEventListener("sessionstart",bn),Te.addEventListener("sessionend",dr),this.render=function(U,ne){if(ne!==void 0&&ne.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),ne.parent===null&&ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),Te.enabled===!0&&Te.isPresenting===!0&&(Te.cameraAutoUpdate===!0&&Te.updateCamera(ne),ne=Te.getCamera()),U.isScene===!0&&U.onBeforeRender(_,U,ne,R),w=ft.get(U,x.length),w.init(),x.push(w),we.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),j.setFromProjectionMatrix(we),se=this.localClippingEnabled,Q=xt.init(this.clippingPlanes,se),y=et.get(U,g.length),y.init(),g.push(y),yo(U,ne,0,_.sortObjects),y.finish(),_.sortObjects===!0&&y.sort(H,q),this.info.render.frame++,Q===!0&&xt.beginShadows();const ve=w.state.shadowsArray;if(ht.render(ve,U,ne),Q===!0&&xt.endShadows(),this.info.autoReset===!0&&this.info.reset(),Pe.render(y,U),w.setupLights(_._useLegacyLights),ne.isArrayCamera){const me=ne.cameras;for(let Se=0,Xe=me.length;Se<Xe;Se++){const Ye=me[Se];Do(y,U,Ye,Ye.viewport)}}else Do(y,U,ne);R!==null&&(We.updateMultisampleRenderTarget(R),We.updateRenderTargetMipmap(R)),U.isScene===!0&&U.onAfterRender(_,U,ne),be.resetDefaultState(),L=-1,k=null,x.pop(),x.length>0?w=x[x.length-1]:w=null,g.pop(),g.length>0?y=g[g.length-1]:y=null};function yo(U,ne,ve,me){if(U.visible===!1)return;if(U.layers.test(ne.layers)){if(U.isGroup)ve=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(ne);else if(U.isLight)w.pushLight(U),U.castShadow&&w.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||j.intersectsSprite(U)){me&&Ce.setFromMatrixPosition(U.matrixWorld).applyMatrix4(we);const Ye=ee.update(U),st=U.material;st.visible&&y.push(U,Ye,st,ve,Ce.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(!U.frustumCulled||j.intersectsObject(U))){const Ye=ee.update(U),st=U.material;if(me&&(U.boundingSphere!==void 0?(U.boundingSphere===null&&U.computeBoundingSphere(),Ce.copy(U.boundingSphere.center)):(Ye.boundingSphere===null&&Ye.computeBoundingSphere(),Ce.copy(Ye.boundingSphere.center)),Ce.applyMatrix4(U.matrixWorld).applyMatrix4(we)),Array.isArray(st)){const rt=Ye.groups;for(let dt=0,tt=rt.length;dt<tt;dt++){const jt=rt[dt],Rt=st[jt.materialIndex];Rt&&Rt.visible&&y.push(U,Ye,Rt,ve,Ce.z,jt)}}else st.visible&&y.push(U,Ye,st,ve,Ce.z,null)}}const Xe=U.children;for(let Ye=0,st=Xe.length;Ye<st;Ye++)yo(Xe[Ye],ne,ve,me)}function Do(U,ne,ve,me){const Se=U.opaque,Xe=U.transmissive,Ye=U.transparent;w.setupLightsView(ve),Q===!0&&xt.setGlobalState(_.clippingPlanes,ve),Xe.length>0&&si(Se,Xe,ne,ve),me&&ie.viewport(D.copy(me)),Se.length>0&&br(Se,ne,ve),Xe.length>0&&br(Xe,ne,ve),Ye.length>0&&br(Ye,ne,ve),ie.buffers.depth.setTest(!0),ie.buffers.depth.setMask(!0),ie.buffers.color.setMask(!0),ie.setPolygonOffset(!1)}function si(U,ne,ve,me){const Se=Ae.isWebGL2;fe===null&&(fe=new jl(1,1,{generateMipmaps:!0,type:Ne.has("EXT_color_buffer_half_float")?Rs:ku,minFilter:pf,samples:Se?4:0})),_.getDrawingBufferSize(Ee),Se?fe.setSize(Ee.x,Ee.y):fe.setSize(Kx(Ee.x),Kx(Ee.y));const Xe=_.getRenderTarget();_.setRenderTarget(fe),_.getClearColor(G),V=_.getClearAlpha(),V<1&&_.setClearColor(16777215,.5),_.clear();const Ye=_.toneMapping;_.toneMapping=Ru,br(U,ve,me),We.updateMultisampleRenderTarget(fe),We.updateRenderTargetMipmap(fe);let st=!1;for(let rt=0,dt=ne.length;rt<dt;rt++){const tt=ne[rt],jt=tt.object,Rt=tt.geometry,Ft=tt.material,rn=tt.group;if(Ft.side===Ol&&jt.layers.test(me.layers)){const an=Ft.side;Ft.side=Ns,Ft.needsUpdate=!0,xr(jt,ve,me,Rt,Ft,rn),Ft.side=an,Ft.needsUpdate=!0,st=!0}}st===!0&&(We.updateMultisampleRenderTarget(fe),We.updateRenderTargetMipmap(fe)),_.setRenderTarget(Xe),_.setClearColor(G,V),_.toneMapping=Ye}function br(U,ne,ve){const me=ne.isScene===!0?ne.overrideMaterial:null;for(let Se=0,Xe=U.length;Se<Xe;Se++){const Ye=U[Se],st=Ye.object,rt=Ye.geometry,dt=me===null?Ye.material:me,tt=Ye.group;st.layers.test(ve.layers)&&xr(st,ne,ve,rt,dt,tt)}}function xr(U,ne,ve,me,Se,Xe){U.onBeforeRender(_,ne,ve,me,Se,Xe),U.modelViewMatrix.multiplyMatrices(ve.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),Se.onBeforeRender(_,ne,ve,me,U,Xe),Se.transparent===!0&&Se.side===Ol&&Se.forceSinglePass===!1?(Se.side=Ns,Se.needsUpdate=!0,_.renderBufferDirect(ve,ne,me,Se,U,Xe),Se.side=Uc,Se.needsUpdate=!0,_.renderBufferDirect(ve,ne,me,Se,U,Xe),Se.side=Ol):_.renderBufferDirect(ve,ne,me,Se,U,Xe),U.onAfterRender(_,ne,ve,me,Se,Xe)}function Mr(U,ne,ve){ne.isScene!==!0&&(ne=Ge);const me=Ve.get(U),Se=w.state.lights,Xe=w.state.shadowsArray,Ye=Se.state.version,st=Fe.getParameters(U,Se.state,Xe,ne,ve),rt=Fe.getProgramCacheKey(st);let dt=me.programs;me.environment=U.isMeshStandardMaterial?ne.environment:null,me.fog=ne.fog,me.envMap=(U.isMeshStandardMaterial?yt:nt).get(U.envMap||me.environment),dt===void 0&&(U.addEventListener("dispose",Et),dt=new Map,me.programs=dt);let tt=dt.get(rt);if(tt!==void 0){if(me.currentProgram===tt&&me.lightsStateVersion===Ye)return Mn(U,st),tt}else st.uniforms=Fe.getUniforms(U),U.onBuild(ve,st,_),U.onBeforeCompile(st,_),tt=Fe.acquireProgram(st,rt),dt.set(rt,tt),me.uniforms=st.uniforms;const jt=me.uniforms;(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(jt.clippingPlanes=xt.uniform),Mn(U,st),me.needsLights=Y(U),me.lightsStateVersion=Ye,me.needsLights&&(jt.ambientLightColor.value=Se.state.ambient,jt.lightProbe.value=Se.state.probe,jt.directionalLights.value=Se.state.directional,jt.directionalLightShadows.value=Se.state.directionalShadow,jt.spotLights.value=Se.state.spot,jt.spotLightShadows.value=Se.state.spotShadow,jt.rectAreaLights.value=Se.state.rectArea,jt.ltc_1.value=Se.state.rectAreaLTC1,jt.ltc_2.value=Se.state.rectAreaLTC2,jt.pointLights.value=Se.state.point,jt.pointLightShadows.value=Se.state.pointShadow,jt.hemisphereLights.value=Se.state.hemi,jt.directionalShadowMap.value=Se.state.directionalShadowMap,jt.directionalShadowMatrix.value=Se.state.directionalShadowMatrix,jt.spotShadowMap.value=Se.state.spotShadowMap,jt.spotLightMatrix.value=Se.state.spotLightMatrix,jt.spotLightMap.value=Se.state.spotLightMap,jt.pointShadowMap.value=Se.state.pointShadowMap,jt.pointShadowMatrix.value=Se.state.pointShadowMatrix);const Rt=tt.getUniforms(),Ft=sx.seqWithValue(Rt.seq,jt);return me.currentProgram=tt,me.uniformsList=Ft,tt}function Mn(U,ne){const ve=Ve.get(U);ve.outputColorSpace=ne.outputColorSpace,ve.instancing=ne.instancing,ve.instancingColor=ne.instancingColor,ve.skinning=ne.skinning,ve.morphTargets=ne.morphTargets,ve.morphNormals=ne.morphNormals,ve.morphColors=ne.morphColors,ve.morphTargetsCount=ne.morphTargetsCount,ve.numClippingPlanes=ne.numClippingPlanes,ve.numIntersection=ne.numClipIntersection,ve.vertexAlphas=ne.vertexAlphas,ve.vertexTangents=ne.vertexTangents,ve.toneMapping=ne.toneMapping}function Ko(U,ne,ve,me,Se){ne.isScene!==!0&&(ne=Ge),We.resetTextureUnits();const Xe=ne.fog,Ye=me.isMeshStandardMaterial?ne.environment:null,st=R===null?_.outputColorSpace:R.isXRRenderTarget===!0?R.texture.colorSpace:Wl,rt=(me.isMeshStandardMaterial?yt:nt).get(me.envMap||Ye),dt=me.vertexColors===!0&&!!ve.attributes.color&&ve.attributes.color.itemSize===4,tt=!!ve.attributes.tangent&&(!!me.normalMap||me.anisotropy>0),jt=!!ve.morphAttributes.position,Rt=!!ve.morphAttributes.normal,Ft=!!ve.morphAttributes.color;let rn=Ru;me.toneMapped&&(R===null||R.isXRRenderTarget===!0)&&(rn=_.toneMapping);const an=ve.morphAttributes.position||ve.morphAttributes.normal||ve.morphAttributes.color,sn=an!==void 0?an.length:0,Ht=Ve.get(me),pn=w.state.lights;if(Q===!0&&(se===!0||U!==k)){const hn=U===k&&me.id===L;xt.setState(me,U,hn)}let Xt=!1;me.version===Ht.__version?(Ht.needsLights&&Ht.lightsStateVersion!==pn.state.version||Ht.outputColorSpace!==st||Se.isInstancedMesh&&Ht.instancing===!1||!Se.isInstancedMesh&&Ht.instancing===!0||Se.isSkinnedMesh&&Ht.skinning===!1||!Se.isSkinnedMesh&&Ht.skinning===!0||Se.isInstancedMesh&&Ht.instancingColor===!0&&Se.instanceColor===null||Se.isInstancedMesh&&Ht.instancingColor===!1&&Se.instanceColor!==null||Ht.envMap!==rt||me.fog===!0&&Ht.fog!==Xe||Ht.numClippingPlanes!==void 0&&(Ht.numClippingPlanes!==xt.numPlanes||Ht.numIntersection!==xt.numIntersection)||Ht.vertexAlphas!==dt||Ht.vertexTangents!==tt||Ht.morphTargets!==jt||Ht.morphNormals!==Rt||Ht.morphColors!==Ft||Ht.toneMapping!==rn||Ae.isWebGL2===!0&&Ht.morphTargetsCount!==sn)&&(Xt=!0):(Xt=!0,Ht.__version=me.version);let En=Ht.currentProgram;Xt===!0&&(En=Mr(me,ne,Se));let mn=!1,xn=!1,or=!1;const Jn=En.getUniforms(),ar=Ht.uniforms;if(ie.useProgram(En.program)&&(mn=!0,xn=!0,or=!0),me.id!==L&&(L=me.id,xn=!0),mn||k!==U){if(Jn.setValue(he,"projectionMatrix",U.projectionMatrix),Ae.logarithmicDepthBuffer&&Jn.setValue(he,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),k!==U&&(k=U,xn=!0,or=!0),me.isShaderMaterial||me.isMeshPhongMaterial||me.isMeshToonMaterial||me.isMeshStandardMaterial||me.envMap){const hn=Jn.map.cameraPosition;hn!==void 0&&hn.setValue(he,Ce.setFromMatrixPosition(U.matrixWorld))}(me.isMeshPhongMaterial||me.isMeshToonMaterial||me.isMeshLambertMaterial||me.isMeshBasicMaterial||me.isMeshStandardMaterial||me.isShaderMaterial)&&Jn.setValue(he,"isOrthographic",U.isOrthographicCamera===!0),(me.isMeshPhongMaterial||me.isMeshToonMaterial||me.isMeshLambertMaterial||me.isMeshBasicMaterial||me.isMeshStandardMaterial||me.isShaderMaterial||me.isShadowMaterial||Se.isSkinnedMesh)&&Jn.setValue(he,"viewMatrix",U.matrixWorldInverse)}if(Se.isSkinnedMesh){Jn.setOptional(he,Se,"bindMatrix"),Jn.setOptional(he,Se,"bindMatrixInverse");const hn=Se.skeleton;hn&&(Ae.floatVertexTextures?(hn.boneTexture===null&&hn.computeBoneTexture(),Jn.setValue(he,"boneTexture",hn.boneTexture,We),Jn.setValue(he,"boneTextureSize",hn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const Yr=ve.morphAttributes;if((Yr.position!==void 0||Yr.normal!==void 0||Yr.color!==void 0&&Ae.isWebGL2===!0)&&Wt.update(Se,ve,En),(xn||Ht.receiveShadow!==Se.receiveShadow)&&(Ht.receiveShadow=Se.receiveShadow,Jn.setValue(he,"receiveShadow",Se.receiveShadow)),me.isMeshGouraudMaterial&&me.envMap!==null&&(ar.envMap.value=rt,ar.flipEnvMap.value=rt.isCubeTexture&&rt.isRenderTargetTexture===!1?-1:1),xn&&(Jn.setValue(he,"toneMappingExposure",_.toneMappingExposure),Ht.needsLights&&Oo(ar,or),Xe&&me.fog===!0&&ot.refreshFogUniforms(ar,Xe),ot.refreshMaterialUniforms(ar,me,le,J,fe),sx.upload(he,Ht.uniformsList,ar,We)),me.isShaderMaterial&&me.uniformsNeedUpdate===!0&&(sx.upload(he,Ht.uniformsList,ar,We),me.uniformsNeedUpdate=!1),me.isSpriteMaterial&&Jn.setValue(he,"center",Se.center),Jn.setValue(he,"modelViewMatrix",Se.modelViewMatrix),Jn.setValue(he,"normalMatrix",Se.normalMatrix),Jn.setValue(he,"modelMatrix",Se.matrixWorld),me.isShaderMaterial||me.isRawShaderMaterial){const hn=me.uniformsGroups;for(let Er=0,Ln=hn.length;Er<Ln;Er++)if(Ae.isWebGL2){const Wn=hn[Er];Je.update(Wn,En),Je.bind(Wn,En)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return En}function Oo(U,ne){U.ambientLightColor.needsUpdate=ne,U.lightProbe.needsUpdate=ne,U.directionalLights.needsUpdate=ne,U.directionalLightShadows.needsUpdate=ne,U.pointLights.needsUpdate=ne,U.pointLightShadows.needsUpdate=ne,U.spotLights.needsUpdate=ne,U.spotLightShadows.needsUpdate=ne,U.rectAreaLights.needsUpdate=ne,U.hemisphereLights.needsUpdate=ne}function Y(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return I},this.getRenderTarget=function(){return R},this.setRenderTargetTextures=function(U,ne,ve){Ve.get(U.texture).__webglTexture=ne,Ve.get(U.depthTexture).__webglTexture=ve;const me=Ve.get(U);me.__hasExternalTextures=!0,me.__hasExternalTextures&&(me.__autoAllocateDepthBuffer=ve===void 0,me.__autoAllocateDepthBuffer||Ne.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),me.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(U,ne){const ve=Ve.get(U);ve.__webglFramebuffer=ne,ve.__useDefaultFramebuffer=ne===void 0},this.setRenderTarget=function(U,ne=0,ve=0){R=U,C=ne,I=ve;let me=!0,Se=null,Xe=!1,Ye=!1;if(U){const rt=Ve.get(U);rt.__useDefaultFramebuffer!==void 0?(ie.bindFramebuffer(he.FRAMEBUFFER,null),me=!1):rt.__webglFramebuffer===void 0?We.setupRenderTarget(U):rt.__hasExternalTextures&&We.rebindTextures(U,Ve.get(U.texture).__webglTexture,Ve.get(U.depthTexture).__webglTexture);const dt=U.texture;(dt.isData3DTexture||dt.isDataArrayTexture||dt.isCompressedArrayTexture)&&(Ye=!0);const tt=Ve.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(Array.isArray(tt[ne])?Se=tt[ne][ve]:Se=tt[ne],Xe=!0):Ae.isWebGL2&&U.samples>0&&We.useMultisampledRTT(U)===!1?Se=Ve.get(U).__webglMultisampledFramebuffer:Array.isArray(tt)?Se=tt[ve]:Se=tt,D.copy(U.viewport),N.copy(U.scissor),B=U.scissorTest}else D.copy(Z).multiplyScalar(le).floor(),N.copy(oe).multiplyScalar(le).floor(),B=F;if(ie.bindFramebuffer(he.FRAMEBUFFER,Se)&&Ae.drawBuffers&&me&&ie.drawBuffers(U,Se),ie.viewport(D),ie.scissor(N),ie.setScissorTest(B),Xe){const rt=Ve.get(U.texture);he.framebufferTexture2D(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,he.TEXTURE_CUBE_MAP_POSITIVE_X+ne,rt.__webglTexture,ve)}else if(Ye){const rt=Ve.get(U.texture),dt=ne||0;he.framebufferTextureLayer(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,rt.__webglTexture,ve||0,dt)}L=-1},this.readRenderTargetPixels=function(U,ne,ve,me,Se,Xe,Ye){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let st=Ve.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&Ye!==void 0&&(st=st[Ye]),st){ie.bindFramebuffer(he.FRAMEBUFFER,st);try{const rt=U.texture,dt=rt.format,tt=rt.type;if(dt!==Ls&&At.convert(dt)!==he.getParameter(he.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const jt=tt===Rs&&(Ne.has("EXT_color_buffer_half_float")||Ae.isWebGL2&&Ne.has("EXT_color_buffer_float"));if(tt!==ku&&At.convert(tt)!==he.getParameter(he.IMPLEMENTATION_COLOR_READ_TYPE)&&!(tt===vs&&(Ae.isWebGL2||Ne.has("OES_texture_float")||Ne.has("WEBGL_color_buffer_float")))&&!jt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ne>=0&&ne<=U.width-me&&ve>=0&&ve<=U.height-Se&&he.readPixels(ne,ve,me,Se,At.convert(dt),At.convert(tt),Xe)}finally{const rt=R!==null?Ve.get(R).__webglFramebuffer:null;ie.bindFramebuffer(he.FRAMEBUFFER,rt)}}},this.copyFramebufferToTexture=function(U,ne,ve=0){const me=Math.pow(2,-ve),Se=Math.floor(ne.image.width*me),Xe=Math.floor(ne.image.height*me);We.setTexture2D(ne,0),he.copyTexSubImage2D(he.TEXTURE_2D,ve,0,0,U.x,U.y,Se,Xe),ie.unbindTexture()},this.copyTextureToTexture=function(U,ne,ve,me=0){const Se=ne.image.width,Xe=ne.image.height,Ye=At.convert(ve.format),st=At.convert(ve.type);We.setTexture2D(ve,0),he.pixelStorei(he.UNPACK_FLIP_Y_WEBGL,ve.flipY),he.pixelStorei(he.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ve.premultiplyAlpha),he.pixelStorei(he.UNPACK_ALIGNMENT,ve.unpackAlignment),ne.isDataTexture?he.texSubImage2D(he.TEXTURE_2D,me,U.x,U.y,Se,Xe,Ye,st,ne.image.data):ne.isCompressedTexture?he.compressedTexSubImage2D(he.TEXTURE_2D,me,U.x,U.y,ne.mipmaps[0].width,ne.mipmaps[0].height,Ye,ne.mipmaps[0].data):he.texSubImage2D(he.TEXTURE_2D,me,U.x,U.y,Ye,st,ne.image),me===0&&ve.generateMipmaps&&he.generateMipmap(he.TEXTURE_2D),ie.unbindTexture()},this.copyTextureToTexture3D=function(U,ne,ve,me,Se=0){if(_.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Xe=U.max.x-U.min.x+1,Ye=U.max.y-U.min.y+1,st=U.max.z-U.min.z+1,rt=At.convert(me.format),dt=At.convert(me.type);let tt;if(me.isData3DTexture)We.setTexture3D(me,0),tt=he.TEXTURE_3D;else if(me.isDataArrayTexture)We.setTexture2DArray(me,0),tt=he.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}he.pixelStorei(he.UNPACK_FLIP_Y_WEBGL,me.flipY),he.pixelStorei(he.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),he.pixelStorei(he.UNPACK_ALIGNMENT,me.unpackAlignment);const jt=he.getParameter(he.UNPACK_ROW_LENGTH),Rt=he.getParameter(he.UNPACK_IMAGE_HEIGHT),Ft=he.getParameter(he.UNPACK_SKIP_PIXELS),rn=he.getParameter(he.UNPACK_SKIP_ROWS),an=he.getParameter(he.UNPACK_SKIP_IMAGES),sn=ve.isCompressedTexture?ve.mipmaps[0]:ve.image;he.pixelStorei(he.UNPACK_ROW_LENGTH,sn.width),he.pixelStorei(he.UNPACK_IMAGE_HEIGHT,sn.height),he.pixelStorei(he.UNPACK_SKIP_PIXELS,U.min.x),he.pixelStorei(he.UNPACK_SKIP_ROWS,U.min.y),he.pixelStorei(he.UNPACK_SKIP_IMAGES,U.min.z),ve.isDataTexture||ve.isData3DTexture?he.texSubImage3D(tt,Se,ne.x,ne.y,ne.z,Xe,Ye,st,rt,dt,sn.data):ve.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(tt,Se,ne.x,ne.y,ne.z,Xe,Ye,st,rt,sn.data)):he.texSubImage3D(tt,Se,ne.x,ne.y,ne.z,Xe,Ye,st,rt,dt,sn),he.pixelStorei(he.UNPACK_ROW_LENGTH,jt),he.pixelStorei(he.UNPACK_IMAGE_HEIGHT,Rt),he.pixelStorei(he.UNPACK_SKIP_PIXELS,Ft),he.pixelStorei(he.UNPACK_SKIP_ROWS,rn),he.pixelStorei(he.UNPACK_SKIP_IMAGES,an),Se===0&&me.generateMipmaps&&he.generateMipmap(tt),ie.unbindTexture()},this.initTexture=function(U){U.isCubeTexture?We.setTextureCube(U,0):U.isData3DTexture?We.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?We.setTexture2DArray(U,0):We.setTexture2D(U,0),ie.unbindTexture()},this.resetState=function(){C=0,I=0,R=null,ie.reset(),be.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Mu}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Gn?lf:W3}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===lf?Gn:Wl}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class PF extends Yw{}PF.prototype.isWebGL1Renderer=!0;class Zw{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Yt(e),this.density=t}clone(){return new Zw(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class Kw{constructor(e,t=1,r=1e3){this.isFog=!0,this.name="",this.color=new Yt(e),this.near=t,this.far=r}clone(){return new Kw(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}let ag=class extends cr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}};class Jw{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Uv,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ba()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,r){e*=this.stride,r*=t.stride;for(let i=0,o=this.stride;i<o;i++)this.array[e+i]=t.array[r+i];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ba()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(t,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ba()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ts=new ge;class Hd{constructor(e,t,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,r=this.data.count;t<r;t++)Ts.fromBufferAttribute(this,t),Ts.applyMatrix4(e),this.setXYZ(t,Ts.x,Ts.y,Ts.z);return this}applyNormalMatrix(e){for(let t=0,r=this.count;t<r;t++)Ts.fromBufferAttribute(this,t),Ts.applyNormalMatrix(e),this.setXYZ(t,Ts.x,Ts.y,Ts.z);return this}transformDirection(e){for(let t=0,r=this.count;t<r;t++)Ts.fromBufferAttribute(this,t),Ts.transformDirection(e),this.setXYZ(t,Ts.x,Ts.y,Ts.z);return this}setX(e,t){return this.normalized&&(t=qn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=qn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=qn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=qn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Js(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Js(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Js(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Js(t,this.array)),t}setXY(e,t,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=qn(t,this.array),r=qn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this}setXYZ(e,t,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=qn(t,this.array),r=qn(r,this.array),i=qn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,t,r,i,o){return e=e*this.data.stride+this.offset,this.normalized&&(t=qn(t,this.array),r=qn(r,this.array),i=qn(i,this.array),o=qn(o,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=o,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[i+o])}return new _r(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Hd(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let o=0;o<this.itemSize;o++)t.push(this.data.array[i+o])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class tA extends Zo{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Yt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Yp;const h0=new ge,Zp=new ge,Kp=new ge,Jp=new gt,f0=new gt,LF=new zn,qy=new ge,d0=new ge,Xy=new ge,bP=new gt,j_=new gt,MP=new gt;class RF extends cr{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Yp===void 0){Yp=new Rn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new Jw(t,5);Yp.setIndex([0,1,2,0,2,3]),Yp.setAttribute("position",new Hd(r,3,0,!1)),Yp.setAttribute("uv",new Hd(r,2,3,!1))}this.geometry=Yp,this.material=e!==void 0?e:new tA,this.center=new gt(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Zp.setFromMatrixScale(this.matrixWorld),LF.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Kp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Zp.multiplyScalar(-Kp.z);const r=this.material.rotation;let i,o;r!==0&&(o=Math.cos(r),i=Math.sin(r));const s=this.center;Yy(qy.set(-.5,-.5,0),Kp,s,Zp,i,o),Yy(d0.set(.5,-.5,0),Kp,s,Zp,i,o),Yy(Xy.set(.5,.5,0),Kp,s,Zp,i,o),bP.set(0,0),j_.set(1,0),MP.set(1,1);let a=e.ray.intersectTriangle(qy,d0,Xy,!1,h0);if(a===null&&(Yy(d0.set(-.5,.5,0),Kp,s,Zp,i,o),j_.set(0,1),a=e.ray.intersectTriangle(qy,Xy,d0,!1,h0),a===null))return;const l=e.ray.origin.distanceTo(h0);l<e.near||l>e.far||t.push({distance:l,point:h0.clone(),uv:Ks.getInterpolation(h0,qy,d0,Xy,bP,j_,MP,new gt),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Yy(n,e,t,r,i,o){Jp.subVectors(n,t).addScalar(.5).multiply(r),i!==void 0?(f0.x=o*Jp.x-i*Jp.y,f0.y=i*Jp.x+o*Jp.y):f0.copy(Jp),n.copy(e),n.x+=f0.x,n.y+=f0.y,n.applyMatrix4(LF)}const Zy=new ge,EP=new ge;class kF extends cr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let r=0,i=t.length;r<i;r++){const o=t[r];this.addLevel(o.object.clone(),o.distance,o.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,r=0){t=Math.abs(t);const i=this.levels;let o;for(o=0;o<i.length&&!(t<i[o].distance);o++);return i.splice(o,0,{distance:t,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let r,i;for(r=1,i=t.length;r<i;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),e<o)break}return t[r-1].object}return null}raycast(e,t){if(this.levels.length>0){Zy.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(Zy);this.getObjectForDistance(i).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Zy.setFromMatrixPosition(e.matrixWorld),EP.setFromMatrixPosition(this.matrixWorld);const r=Zy.distanceTo(EP)/e.zoom;t[0].object.visible=!0;let i,o;for(i=1,o=t.length;i<o;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),r>=s)t[i-1].object.visible=!1,t[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<o;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const r=this.levels;for(let i=0,o=r.length;i<o;i++){const s=r[i];t.object.levels.push({object:s.object.uuid,distance:s.distance,hysteresis:s.hysteresis})}return t}}const AP=new ge,TP=new Nr,CP=new Nr,r$=new ge,PP=new zn,Qp=new ge,$_=new Zl,LP=new zn,q_=new Qd;class IF extends po{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new zn,this.bindMatrixInverse=new zn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new zu),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)Qp.fromBufferAttribute(t,r),this.applyBoneTransform(r,Qp),this.boundingBox.expandByPoint(Qp)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Zl),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let r=0;r<t.count;r++)Qp.fromBufferAttribute(t,r),this.applyBoneTransform(r,Qp),this.boundingSphere.expandByPoint(Qp)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),$_.copy(this.boundingSphere),$_.applyMatrix4(i),e.ray.intersectsSphere($_)!==!1&&(LP.copy(i).invert(),q_.copy(e.ray).applyMatrix4(LP),!(this.boundingBox!==null&&q_.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,q_)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Nr,t=this.geometry.attributes.skinWeight;for(let r=0,i=t.count;r<i;r++){e.fromBufferAttribute(t,r);const o=1/e.manhattanLength();o!==1/0?e.multiplyScalar(o):e.set(1,0,0,0),t.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const r=this.skeleton,i=this.geometry;TP.fromBufferAttribute(i.attributes.skinIndex,e),CP.fromBufferAttribute(i.attributes.skinWeight,e),AP.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let o=0;o<4;o++){const s=CP.getComponent(o);if(s!==0){const a=TP.getComponent(o);PP.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),t.addScaledVector(r$.copy(AP).applyMatrix4(PP),s)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class nA extends cr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class zm extends Fi{constructor(e=null,t=1,r=1,i,o,s,a,l,u=Gi,c=Gi,h,f){super(null,s,a,l,u,c,i,o,h,f),this.isDataTexture=!0,this.image={data:e,width:t,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const RP=new zn,i$=new zn;class Qw{constructor(e=[],t=[]){this.uuid=ba(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new zn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const r=new zn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,t=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let o=0,s=e.length;o<s;o++){const a=e[o]?e[o].matrixWorld:i$;RP.multiplyMatrices(a,t[o]),RP.toArray(r,o*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new Qw(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=pF(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const r=new zm(t,e,e,Ls,vs);return r.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,r=this.bones.length;t<r;t++){const i=this.bones[t];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const o=e.bones[r];let s=t[o];s===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",o),s=new nA),this.bones.push(s),this.boneInverses.push(new zn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,r=this.boneInverses;for(let i=0,o=t.length;i<o;i++){const s=t[i];e.bones.push(s.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class lg extends _r{constructor(e,t,r,i=1){super(e,t,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const em=new zn,kP=new zn,Ky=[],IP=new zu,o$=new zn,p0=new po,m0=new Zl;class NF extends po{constructor(e,t,r){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new lg(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,o$)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new zu),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,em),IP.copy(e.boundingBox).applyMatrix4(em),this.boundingBox.union(IP)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Zl),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<t;r++)this.getMatrixAt(r,em),m0.copy(e.boundingSphere).applyMatrix4(em),this.boundingSphere.union(m0)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const r=this.matrixWorld,i=this.count;if(p0.geometry=this.geometry,p0.material=this.material,p0.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),m0.copy(this.boundingSphere),m0.applyMatrix4(r),e.ray.intersectsSphere(m0)!==!1))for(let o=0;o<i;o++){this.getMatrixAt(o,em),kP.multiplyMatrices(r,em),p0.matrixWorld=kP,p0.raycast(e,Ky);for(let s=0,a=Ky.length;s<a;s++){const l=Ky[s];l.instanceId=o,l.object=this,t.push(l)}Ky.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new lg(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ss extends Zo{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Yt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const NP=new ge,FP=new ge,DP=new zn,X_=new Qd,Jy=new Zl;class mf extends cr{constructor(e=new Rn,t=new Ss){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[0];for(let i=1,o=t.count;i<o;i++)NP.fromBufferAttribute(t,i-1),FP.fromBufferAttribute(t,i),r[i]=r[i-1],r[i]+=NP.distanceTo(FP);e.setAttribute("lineDistance",new tn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,o=e.params.Line.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Jy.copy(r.boundingSphere),Jy.applyMatrix4(i),Jy.radius+=o,e.ray.intersectsSphere(Jy)===!1)return;DP.copy(i).invert(),X_.copy(e.ray).applyMatrix4(DP);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new ge,c=new ge,h=new ge,f=new ge,d=this.isLineSegments?2:1,v=r.index,w=r.attributes.position;if(v!==null){const g=Math.max(0,s.start),x=Math.min(v.count,s.start+s.count);for(let _=g,E=x-1;_<E;_+=d){const C=v.getX(_),I=v.getX(_+1);if(u.fromBufferAttribute(w,C),c.fromBufferAttribute(w,I),X_.distanceSqToSegment(u,c,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const L=e.ray.origin.distanceTo(f);L<e.near||L>e.far||t.push({distance:L,point:h.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,s.start),x=Math.min(w.count,s.start+s.count);for(let _=g,E=x-1;_<E;_+=d){if(u.fromBufferAttribute(w,_),c.fromBufferAttribute(w,_+1),X_.distanceSqToSegment(u,c,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const I=e.ray.origin.distanceTo(f);I<e.near||I>e.far||t.push({distance:I,point:h.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}const OP=new ge,BP=new ge;class Kl extends mf{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,r=[];for(let i=0,o=t.count;i<o;i+=2)OP.fromBufferAttribute(t,i),BP.fromBufferAttribute(t,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+OP.distanceTo(BP);e.setAttribute("lineDistance",new tn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class FF extends mf{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class rA extends Zo{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Yt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const UP=new zn,NM=new Qd,Qy=new Zl,e2=new ge;class DF extends cr{constructor(e=new Rn,t=new rA){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const r=this.geometry,i=this.matrixWorld,o=e.params.Points.threshold,s=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),Qy.copy(r.boundingSphere),Qy.applyMatrix4(i),Qy.radius+=o,e.ray.intersectsSphere(Qy)===!1)return;UP.copy(i).invert(),NM.copy(e.ray).applyMatrix4(UP);const a=o/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,h=r.attributes.position;if(u!==null){const f=Math.max(0,s.start),d=Math.min(u.count,s.start+s.count);for(let v=f,y=d;v<y;v++){const w=u.getX(v);e2.fromBufferAttribute(h,w),zP(e2,w,l,i,e,t,this)}}else{const f=Math.max(0,s.start),d=Math.min(h.count,s.start+s.count);for(let v=f,y=d;v<y;v++)e2.fromBufferAttribute(h,v),zP(e2,v,l,i,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,r=Object.keys(t);if(r.length>0){const i=t[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=i.length;o<s;o++){const a=i[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}}function zP(n,e,t,r,i,o,s){const a=NM.distanceSqToPoint(n);if(a<t){const l=new ge;NM.closestPointToPoint(n,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;o.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:s})}}class s$ extends Fi{constructor(e,t,r,i,o,s,a,l,u){super(e,t,r,i,o,s,a,l,u),this.isVideoTexture=!0,this.minFilter=s!==void 0?s:ti,this.magFilter=o!==void 0?o:ti,this.generateMipmaps=!1;const c=this;function h(){c.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class a$ extends Fi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Gi,this.minFilter=Gi,this.generateMipmaps=!1,this.needsUpdate=!0}}class eS extends Fi{constructor(e,t,r,i,o,s,a,l,u,c,h,f){super(null,s,a,l,u,c,i,o,h,f),this.isCompressedTexture=!0,this.image={width:t,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class l$ extends eS{constructor(e,t,r,i,o,s){super(e,t,r,o,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=ps}}class u$ extends eS{constructor(e,t,r){super(void 0,e[0].width,e[0].height,t,r,Ou),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class c$ extends Fi{constructor(e,t,r,i,o,s,a,l,u){super(e,t,r,i,o,s,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}let Jl=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const r=this.getUtoTmapping(e);return this.getPoint(r,t)}getPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return t}getSpacedPoints(e=5){const t=[];for(let r=0;r<=e;r++)t.push(this.getPointAt(r/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let r,i=this.getPoint(0),o=0;t.push(0);for(let s=1;s<=e;s++)r=this.getPoint(s/e),o+=r.distanceTo(i),t.push(o),i=r;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const r=this.getLengths();let i=0;const o=r.length;let s;t?s=t:s=e*r[o-1];let a=0,l=o-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-s,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===s)return i/(o-1);const c=r[i],f=r[i+1]-c,d=(s-c)/f;return(i+d)/(o-1)}getTangent(e,t){let i=e-1e-4,o=e+1e-4;i<0&&(i=0),o>1&&(o=1);const s=this.getPoint(i),a=this.getPoint(o),l=t||(s.isVector2?new gt:new ge);return l.copy(a).sub(s).normalize(),l}getTangentAt(e,t){const r=this.getUtoTmapping(e);return this.getTangent(r,t)}computeFrenetFrames(e,t){const r=new ge,i=[],o=[],s=[],a=new ge,l=new zn;for(let d=0;d<=e;d++){const v=d/e;i[d]=this.getTangentAt(v,new ge)}o[0]=new ge,s[0]=new ge;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),h=Math.abs(i[0].y),f=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),h<=u&&(u=h,r.set(0,1,0)),f<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),o[0].crossVectors(i[0],a),s[0].crossVectors(i[0],o[0]);for(let d=1;d<=e;d++){if(o[d]=o[d-1].clone(),s[d]=s[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Ii(i[d-1].dot(i[d]),-1,1));o[d].applyMatrix4(l.makeRotationAxis(a,v))}s[d].crossVectors(i[d],o[d])}if(t===!0){let d=Math.acos(Ii(o[0].dot(o[e]),-1,1));d/=e,i[0].dot(a.crossVectors(o[0],o[e]))>0&&(d=-d);for(let v=1;v<=e;v++)o[v].applyMatrix4(l.makeRotationAxis(i[v],d*v)),s[v].crossVectors(i[v],o[v])}return{tangents:i,normals:o,binormals:s}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};class tS extends Jl{constructor(e=0,t=0,r=1,i=1,o=0,s=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=r,this.yRadius=i,this.aStartAngle=o,this.aEndAngle=s,this.aClockwise=a,this.aRotation=l}getPoint(e,t){const r=t||new gt,i=Math.PI*2;let o=this.aEndAngle-this.aStartAngle;const s=Math.abs(o)<Number.EPSILON;for(;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(s?o=0:o=i),this.aClockwise===!0&&!s&&(o===i?o=-i:o=o-i);const a=this.aStartAngle+e*o;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=l-this.aX,d=u-this.aY;l=f*c-d*h+this.aX,u=f*h+d*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class OF extends tS{constructor(e,t,r,i,o,s){super(e,t,r,r,i,o,s),this.isArcCurve=!0,this.type="ArcCurve"}}function iA(){let n=0,e=0,t=0,r=0;function i(o,s,a,l){n=o,e=a,t=-3*o+3*s-2*a-l,r=2*o-2*s+a+l}return{initCatmullRom:function(o,s,a,l,u){i(s,a,u*(a-o),u*(l-s))},initNonuniformCatmullRom:function(o,s,a,l,u,c,h){let f=(s-o)/u-(a-o)/(u+c)+(a-s)/c,d=(a-s)/c-(l-s)/(c+h)+(l-a)/h;f*=c,d*=c,i(s,a,f,d)},calc:function(o){const s=o*o,a=s*o;return n+e*o+t*s+r*a}}}const t2=new ge,Y_=new iA,Z_=new iA,K_=new iA;class BF extends Jl{constructor(e=[],t=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=r,this.tension=i}getPoint(e,t=new ge){const r=t,i=this.points,o=i.length,s=(o-(this.closed?0:1))*e;let a=Math.floor(s),l=s-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/o)+1)*o:l===0&&a===o-1&&(a=o-2,l=1);let u,c;this.closed||a>0?u=i[(a-1)%o]:(t2.subVectors(i[0],i[1]).add(i[0]),u=t2);const h=i[a%o],f=i[(a+1)%o];if(this.closed||a+2<o?c=i[(a+2)%o]:(t2.subVectors(i[o-1],i[o-2]).add(i[o-1]),c=t2),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(h),d),y=Math.pow(h.distanceToSquared(f),d),w=Math.pow(f.distanceToSquared(c),d);y<1e-4&&(y=1),v<1e-4&&(v=y),w<1e-4&&(w=y),Y_.initNonuniformCatmullRom(u.x,h.x,f.x,c.x,v,y,w),Z_.initNonuniformCatmullRom(u.y,h.y,f.y,c.y,v,y,w),K_.initNonuniformCatmullRom(u.z,h.z,f.z,c.z,v,y,w)}else this.curveType==="catmullrom"&&(Y_.initCatmullRom(u.x,h.x,f.x,c.x,this.tension),Z_.initCatmullRom(u.y,h.y,f.y,c.y,this.tension),K_.initCatmullRom(u.z,h.z,f.z,c.z,this.tension));return r.set(Y_.calc(l),Z_.calc(l),K_.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new ge().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function HP(n,e,t,r,i){const o=(r-e)*.5,s=(i-t)*.5,a=n*n,l=n*a;return(2*t-2*r+o+s)*l+(-3*t+3*r-2*o-s)*a+o*n+t}function h$(n,e){const t=1-n;return t*t*e}function f$(n,e){return 2*(1-n)*n*e}function d$(n,e){return n*n*e}function Q0(n,e,t,r){return h$(n,e)+f$(n,t)+d$(n,r)}function p$(n,e){const t=1-n;return t*t*t*e}function m$(n,e){const t=1-n;return 3*t*t*n*e}function g$(n,e){return 3*(1-n)*n*n*e}function v$(n,e){return n*n*n*e}function ev(n,e,t,r,i){return p$(n,e)+m$(n,t)+g$(n,r)+v$(n,i)}class oA extends Jl{constructor(e=new gt,t=new gt,r=new gt,i=new gt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new gt){const r=t,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(ev(e,i.x,o.x,s.x,a.x),ev(e,i.y,o.y,s.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class UF extends Jl{constructor(e=new ge,t=new ge,r=new ge,i=new ge){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=r,this.v3=i}getPoint(e,t=new ge){const r=t,i=this.v0,o=this.v1,s=this.v2,a=this.v3;return r.set(ev(e,i.x,o.x,s.x,a.x),ev(e,i.y,o.y,s.y,a.y),ev(e,i.z,o.z,s.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class nS extends Jl{constructor(e=new gt,t=new gt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new gt){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new gt){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zF extends Jl{constructor(e=new ge,t=new ge){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new ge){const r=t;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new ge){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sA extends Jl{constructor(e=new gt,t=new gt,r=new gt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new gt){const r=t,i=this.v0,o=this.v1,s=this.v2;return r.set(Q0(e,i.x,o.x,s.x),Q0(e,i.y,o.y,s.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class aA extends Jl{constructor(e=new ge,t=new ge,r=new ge){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=r}getPoint(e,t=new ge){const r=t,i=this.v0,o=this.v1,s=this.v2;return r.set(Q0(e,i.x,o.x,s.x),Q0(e,i.y,o.y,s.y),Q0(e,i.z,o.z,s.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class lA extends Jl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new gt){const r=t,i=this.points,o=(i.length-1)*e,s=Math.floor(o),a=o-s,l=i[s===0?s:s-1],u=i[s],c=i[s>i.length-2?i.length-1:s+1],h=i[s>i.length-3?i.length-1:s+2];return r.set(HP(a,l.x,u.x,c.x,h.x),HP(a,l.y,u.y,c.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,r=this.points.length;t<r;t++){const i=this.points[t];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,r=e.points.length;t<r;t++){const i=e.points[t];this.points.push(new gt().fromArray(i))}return this}}var uA=Object.freeze({__proto__:null,ArcCurve:OF,CatmullRomCurve3:BF,CubicBezierCurve:oA,CubicBezierCurve3:UF,EllipseCurve:tS,LineCurve:nS,LineCurve3:zF,QuadraticBezierCurve:sA,QuadraticBezierCurve3:aA,SplineCurve:lA});class HF extends Jl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new nS(t,e))}getPoint(e,t){const r=e*this.getLength(),i=this.getCurveLengths();let o=0;for(;o<i.length;){if(i[o]>=r){const s=i[o]-r,a=this.curves[o],l=a.getLength(),u=l===0?0:1-s/l;return a.getPointAt(u,t)}o++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let r=0,i=this.curves.length;r<i;r++)t+=this.curves[r].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let r=0;r<=e;r++)t.push(this.getPoint(r/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let r;for(let i=0,o=this.curves;i<o.length;i++){const s=o[i],a=s.isEllipseCurve?e*2:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,l=s.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(t.push(c),r=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,r=this.curves.length;t<r;t++){const i=this.curves[t];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,r=e.curves.length;t<r;t++){const i=e.curves[t];this.curves.push(new uA[i.type]().fromJSON(i))}return this}}let Gv=class extends HF{constructor(e){super(),this.type="Path",this.currentPoint=new gt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,r=e.length;t<r;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const r=new nS(this.currentPoint.clone(),new gt(e,t));return this.curves.push(r),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,r,i){const o=new sA(this.currentPoint.clone(),new gt(e,t),new gt(r,i));return this.curves.push(o),this.currentPoint.set(r,i),this}bezierCurveTo(e,t,r,i,o,s){const a=new oA(this.currentPoint.clone(),new gt(e,t),new gt(r,i),new gt(o,s));return this.curves.push(a),this.currentPoint.set(o,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),r=new lA(t);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,r,i,o,s){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,r,i,o,s),this}absarc(e,t,r,i,o,s){return this.absellipse(e,t,r,r,i,o,s),this}ellipse(e,t,r,i,o,s,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,r,i,o,s,a,l),this}absellipse(e,t,r,i,o,s,a,l){const u=new tS(e,t,r,i,o,s,a,l);if(this.curves.length>0){const h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class _1 extends Rn{constructor(e=[new gt(0,-.5),new gt(.5,0),new gt(0,.5)],t=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:r,phiLength:i},t=Math.floor(t),i=Ii(i,0,Math.PI*2);const o=[],s=[],a=[],l=[],u=[],c=1/t,h=new ge,f=new gt,d=new ge,v=new ge,y=new ge;let w=0,g=0;for(let x=0;x<=e.length-1;x++)switch(x){case 0:w=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,d.x=g*1,d.y=-w,d.z=g*0,y.copy(d),d.normalize(),l.push(d.x,d.y,d.z);break;case e.length-1:l.push(y.x,y.y,y.z);break;default:w=e[x+1].x-e[x].x,g=e[x+1].y-e[x].y,d.x=g*1,d.y=-w,d.z=g*0,v.copy(d),d.x+=y.x,d.y+=y.y,d.z+=y.z,d.normalize(),l.push(d.x,d.y,d.z),y.copy(v)}for(let x=0;x<=t;x++){const _=r+x*c*i,E=Math.sin(_),C=Math.cos(_);for(let I=0;I<=e.length-1;I++){h.x=e[I].x*E,h.y=e[I].y,h.z=e[I].x*C,s.push(h.x,h.y,h.z),f.x=x/t,f.y=I/(e.length-1),a.push(f.x,f.y);const R=l[3*I+0]*E,L=l[3*I+1],k=l[3*I+0]*C;u.push(R,L,k)}}for(let x=0;x<t;x++)for(let _=0;_<e.length-1;_++){const E=_+x*e.length,C=E,I=E+e.length,R=E+e.length+1,L=E+1;o.push(C,I,L),o.push(R,L,I)}this.setIndex(o),this.setAttribute("position",new tn(s,3)),this.setAttribute("uv",new tn(a,2)),this.setAttribute("normal",new tn(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _1(e.points,e.segments,e.phiStart,e.phiLength)}}class rS extends _1{constructor(e=1,t=1,r=4,i=8){const o=new Gv;o.absarc(0,-t/2,e,Math.PI*1.5,0),o.absarc(0,t/2,e,0,Math.PI*.5),super(o.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:r,radialSegments:i}}static fromJSON(e){return new rS(e.radius,e.length,e.capSegments,e.radialSegments)}}class iS extends Rn{constructor(e=1,t=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:r,thetaLength:i},t=Math.max(3,t);const o=[],s=[],a=[],l=[],u=new ge,c=new gt;s.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,f=3;h<=t;h++,f+=3){const d=r+h/t*i;u.x=e*Math.cos(d),u.y=e*Math.sin(d),s.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(s[f]/e+1)/2,c.y=(s[f+1]/e+1)/2,l.push(c.x,c.y)}for(let h=1;h<=t;h++)o.push(h,h+1,0);this.setIndex(o),this.setAttribute("position",new tn(s,3)),this.setAttribute("normal",new tn(a,3)),this.setAttribute("uv",new tn(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new iS(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Mg extends Rn{constructor(e=1,t=1,r=1,i=32,o=1,s=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:r,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),o=Math.floor(o);const c=[],h=[],f=[],d=[];let v=0;const y=[],w=r/2;let g=0;x(),s===!1&&(e>0&&_(!0),t>0&&_(!1)),this.setIndex(c),this.setAttribute("position",new tn(h,3)),this.setAttribute("normal",new tn(f,3)),this.setAttribute("uv",new tn(d,2));function x(){const E=new ge,C=new ge;let I=0;const R=(t-e)/r;for(let L=0;L<=o;L++){const k=[],D=L/o,N=D*(t-e)+e;for(let B=0;B<=i;B++){const G=B/i,V=G*l+a,$=Math.sin(V),J=Math.cos(V);C.x=N*$,C.y=-D*r+w,C.z=N*J,h.push(C.x,C.y,C.z),E.set($,R,J).normalize(),f.push(E.x,E.y,E.z),d.push(G,1-D),k.push(v++)}y.push(k)}for(let L=0;L<i;L++)for(let k=0;k<o;k++){const D=y[k][L],N=y[k+1][L],B=y[k+1][L+1],G=y[k][L+1];c.push(D,N,G),c.push(N,B,G),I+=6}u.addGroup(g,I,0),g+=I}function _(E){const C=v,I=new gt,R=new ge;let L=0;const k=E===!0?e:t,D=E===!0?1:-1;for(let B=1;B<=i;B++)h.push(0,w*D,0),f.push(0,D,0),d.push(.5,.5),v++;const N=v;for(let B=0;B<=i;B++){const V=B/i*l+a,$=Math.cos(V),J=Math.sin(V);R.x=k*J,R.y=w*D,R.z=k*$,h.push(R.x,R.y,R.z),f.push(0,D,0),I.x=$*.5+.5,I.y=J*.5*D+.5,d.push(I.x,I.y),v++}for(let B=0;B<i;B++){const G=C+B,V=N+B;E===!0?c.push(V,V+1,G):c.push(V+1,V,G),L+=3}u.addGroup(g,L,E===!0?1:2),g+=L}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mg(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class oS extends Mg{constructor(e=1,t=1,r=32,i=1,o=!1,s=0,a=Math.PI*2){super(0,e,t,r,i,o,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:s,thetaLength:a}}static fromJSON(e){return new oS(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Tf extends Rn{constructor(e=[],t=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:r,detail:i};const o=[],s=[];a(i),u(r),c(),this.setAttribute("position",new tn(o,3)),this.setAttribute("normal",new tn(o.slice(),3)),this.setAttribute("uv",new tn(s,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(x){const _=new ge,E=new ge,C=new ge;for(let I=0;I<t.length;I+=3)d(t[I+0],_),d(t[I+1],E),d(t[I+2],C),l(_,E,C,x)}function l(x,_,E,C){const I=C+1,R=[];for(let L=0;L<=I;L++){R[L]=[];const k=x.clone().lerp(E,L/I),D=_.clone().lerp(E,L/I),N=I-L;for(let B=0;B<=N;B++)B===0&&L===I?R[L][B]=k:R[L][B]=k.clone().lerp(D,B/N)}for(let L=0;L<I;L++)for(let k=0;k<2*(I-L)-1;k++){const D=Math.floor(k/2);k%2===0?(f(R[L][D+1]),f(R[L+1][D]),f(R[L][D])):(f(R[L][D+1]),f(R[L+1][D+1]),f(R[L+1][D]))}}function u(x){const _=new ge;for(let E=0;E<o.length;E+=3)_.x=o[E+0],_.y=o[E+1],_.z=o[E+2],_.normalize().multiplyScalar(x),o[E+0]=_.x,o[E+1]=_.y,o[E+2]=_.z}function c(){const x=new ge;for(let _=0;_<o.length;_+=3){x.x=o[_+0],x.y=o[_+1],x.z=o[_+2];const E=w(x)/2/Math.PI+.5,C=g(x)/Math.PI+.5;s.push(E,1-C)}v(),h()}function h(){for(let x=0;x<s.length;x+=6){const _=s[x+0],E=s[x+2],C=s[x+4],I=Math.max(_,E,C),R=Math.min(_,E,C);I>.9&&R<.1&&(_<.2&&(s[x+0]+=1),E<.2&&(s[x+2]+=1),C<.2&&(s[x+4]+=1))}}function f(x){o.push(x.x,x.y,x.z)}function d(x,_){const E=x*3;_.x=e[E+0],_.y=e[E+1],_.z=e[E+2]}function v(){const x=new ge,_=new ge,E=new ge,C=new ge,I=new gt,R=new gt,L=new gt;for(let k=0,D=0;k<o.length;k+=9,D+=6){x.set(o[k+0],o[k+1],o[k+2]),_.set(o[k+3],o[k+4],o[k+5]),E.set(o[k+6],o[k+7],o[k+8]),I.set(s[D+0],s[D+1]),R.set(s[D+2],s[D+3]),L.set(s[D+4],s[D+5]),C.copy(x).add(_).add(E).divideScalar(3);const N=w(C);y(I,D+0,x,N),y(R,D+2,_,N),y(L,D+4,E,N)}}function y(x,_,E,C){C<0&&x.x===1&&(s[_]=x.x-1),E.x===0&&E.z===0&&(s[_]=C/2/Math.PI+.5)}function w(x){return Math.atan2(x.z,-x.x)}function g(x){return Math.atan2(-x.y,Math.sqrt(x.x*x.x+x.z*x.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tf(e.vertices,e.indices,e.radius,e.details)}}class sS extends Tf{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=1/r,o=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],s=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(o,s,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sS(e.radius,e.detail)}}const n2=new ge,r2=new ge,J_=new ge,i2=new Ks;class cA extends Rn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const i=Math.pow(10,4),o=Math.cos(Ld*t),s=e.getIndex(),a=e.getAttribute("position"),l=s?s.count:a.count,u=[0,0,0],c=["a","b","c"],h=new Array(3),f={},d=[];for(let v=0;v<l;v+=3){s?(u[0]=s.getX(v),u[1]=s.getX(v+1),u[2]=s.getX(v+2)):(u[0]=v,u[1]=v+1,u[2]=v+2);const{a:y,b:w,c:g}=i2;if(y.fromBufferAttribute(a,u[0]),w.fromBufferAttribute(a,u[1]),g.fromBufferAttribute(a,u[2]),i2.getNormal(J_),h[0]=`${Math.round(y.x*i)},${Math.round(y.y*i)},${Math.round(y.z*i)}`,h[1]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,h[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let x=0;x<3;x++){const _=(x+1)%3,E=h[x],C=h[_],I=i2[c[x]],R=i2[c[_]],L=`${E}_${C}`,k=`${C}_${E}`;k in f&&f[k]?(J_.dot(f[k].normal)<=o&&(d.push(I.x,I.y,I.z),d.push(R.x,R.y,R.z)),f[k]=null):L in f||(f[L]={index0:u[x],index1:u[_],normal:J_.clone()})}}for(const v in f)if(f[v]){const{index0:y,index1:w}=f[v];n2.fromBufferAttribute(a,y),r2.fromBufferAttribute(a,w),d.push(n2.x,n2.y,n2.z),d.push(r2.x,r2.y,r2.z)}this.setAttribute("position",new tn(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let kd=class extends Gv{constructor(e){super(e),this.uuid=ba(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let r=0,i=this.holes.length;r<i;r++)t[r]=this.holes[r].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,r=this.holes.length;t<r;t++){const i=this.holes[t];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,r=e.holes.length;t<r;t++){const i=e.holes[t];this.holes.push(new Gv().fromJSON(i))}return this}};const y$={triangulate:function(n,e,t=2){const r=e&&e.length,i=r?e[0]*t:n.length;let o=GF(n,0,i,t,!0);const s=[];if(!o||o.next===o.prev)return s;let a,l,u,c,h,f,d;if(r&&(o=b$(n,e,o,t)),n.length>80*t){a=u=n[0],l=c=n[1];for(let v=t;v<i;v+=t)h=n[v],f=n[v+1],h<a&&(a=h),f<l&&(l=f),h>u&&(u=h),f>c&&(c=f);d=Math.max(u-a,c-l),d=d!==0?32767/d:0}return Vv(o,s,t,a,l,d,0),s}};function GF(n,e,t,r,i){let o,s;if(i===N$(n,e,t,r)>0)for(o=e;o<t;o+=r)s=GP(o,n[o],n[o+1],s);else for(o=t-r;o>=e;o-=r)s=GP(o,n[o],n[o+1],s);return s&&aS(s,s.next)&&(jv(s),s=s.next),s}function Gd(n,e){if(!n)return n;e||(e=n);let t=n,r;do if(r=!1,!t.steiner&&(aS(t,t.next)||_i(t.prev,t,t.next)===0)){if(jv(t),t=e=t.prev,t===t.next)break;r=!0}else t=t.next;while(r||t!==e);return e}function Vv(n,e,t,r,i,o,s){if(!n)return;!s&&o&&C$(n,r,i,o);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,o?w$(n,r,i,o):x$(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),jv(n),n=u.next,a=u.next;continue}if(n=u,n===a){s?s===1?(n=S$(Gd(n),e,t),Vv(n,e,t,r,i,o,2)):s===2&&_$(n,e,t,r,i,o):Vv(Gd(n),e,t,r,i,o,1);break}}}function x$(n){const e=n.prev,t=n,r=n.next;if(_i(e,t,r)>=0)return!1;const i=e.x,o=t.x,s=r.x,a=e.y,l=t.y,u=r.y,c=i<o?i<s?i:s:o<s?o:s,h=a<l?a<u?a:u:l<u?l:u,f=i>o?i>s?i:s:o>s?o:s,d=a>l?a>u?a:u:l>u?l:u;let v=r.next;for(;v!==e;){if(v.x>=c&&v.x<=f&&v.y>=h&&v.y<=d&&Lm(i,a,o,l,s,u,v.x,v.y)&&_i(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function w$(n,e,t,r){const i=n.prev,o=n,s=n.next;if(_i(i,o,s)>=0)return!1;const a=i.x,l=o.x,u=s.x,c=i.y,h=o.y,f=s.y,d=a<l?a<u?a:u:l<u?l:u,v=c<h?c<f?c:f:h<f?h:f,y=a>l?a>u?a:u:l>u?l:u,w=c>h?c>f?c:f:h>f?h:f,g=FM(d,v,e,t,r),x=FM(y,w,e,t,r);let _=n.prevZ,E=n.nextZ;for(;_&&_.z>=g&&E&&E.z<=x;){if(_.x>=d&&_.x<=y&&_.y>=v&&_.y<=w&&_!==i&&_!==s&&Lm(a,c,l,h,u,f,_.x,_.y)&&_i(_.prev,_,_.next)>=0||(_=_.prevZ,E.x>=d&&E.x<=y&&E.y>=v&&E.y<=w&&E!==i&&E!==s&&Lm(a,c,l,h,u,f,E.x,E.y)&&_i(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;_&&_.z>=g;){if(_.x>=d&&_.x<=y&&_.y>=v&&_.y<=w&&_!==i&&_!==s&&Lm(a,c,l,h,u,f,_.x,_.y)&&_i(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;E&&E.z<=x;){if(E.x>=d&&E.x<=y&&E.y>=v&&E.y<=w&&E!==i&&E!==s&&Lm(a,c,l,h,u,f,E.x,E.y)&&_i(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function S$(n,e,t){let r=n;do{const i=r.prev,o=r.next.next;!aS(i,o)&&VF(i,r,r.next,o)&&Wv(i,o)&&Wv(o,i)&&(e.push(i.i/t|0),e.push(r.i/t|0),e.push(o.i/t|0),jv(r),jv(r.next),r=n=o),r=r.next}while(r!==n);return Gd(r)}function _$(n,e,t,r,i,o){let s=n;do{let a=s.next.next;for(;a!==s.prev;){if(s.i!==a.i&&R$(s,a)){let l=WF(s,a);s=Gd(s,s.next),l=Gd(l,l.next),Vv(s,e,t,r,i,o,0),Vv(l,e,t,r,i,o,0);return}a=a.next}s=s.next}while(s!==n)}function b$(n,e,t,r){const i=[];let o,s,a,l,u;for(o=0,s=e.length;o<s;o++)a=e[o]*r,l=o<s-1?e[o+1]*r:n.length,u=GF(n,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(L$(u));for(i.sort(M$),o=0;o<i.length;o++)t=E$(i[o],t);return t}function M$(n,e){return n.x-e.x}function E$(n,e){const t=A$(n,e);if(!t)return e;const r=WF(t,n);return Gd(r,r.next),Gd(t,t.next)}function A$(n,e){let t=e,r=-1/0,i;const o=n.x,s=n.y;do{if(s<=t.y&&s>=t.next.y&&t.next.y!==t.y){const f=t.x+(s-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(f<=o&&f>r&&(r=f,i=t.x<t.next.x?t:t.next,f===o))return i}t=t.next}while(t!==e);if(!i)return null;const a=i,l=i.x,u=i.y;let c=1/0,h;t=i;do o>=t.x&&t.x>=l&&o!==t.x&&Lm(s<u?o:r,s,l,u,s<u?r:o,s,t.x,t.y)&&(h=Math.abs(s-t.y)/(o-t.x),Wv(t,n)&&(h<c||h===c&&(t.x>i.x||t.x===i.x&&T$(i,t)))&&(i=t,c=h)),t=t.next;while(t!==a);return i}function T$(n,e){return _i(n.prev,n,e.prev)<0&&_i(e.next,n,n.next)<0}function C$(n,e,t,r){let i=n;do i.z===0&&(i.z=FM(i.x,i.y,e,t,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==n);i.prevZ.nextZ=null,i.prevZ=null,P$(i)}function P$(n){let e,t,r,i,o,s,a,l,u=1;do{for(t=n,n=null,o=null,s=0;t;){for(s++,r=t,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||t.z<=r.z)?(i=t,t=t.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:n=i,i.prevZ=o,o=i;t=r}o.nextZ=null,u*=2}while(s>1);return n}function FM(n,e,t,r,i){return n=(n-t)*i|0,e=(e-r)*i|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function L$(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Lm(n,e,t,r,i,o,s,a){return(i-s)*(e-a)>=(n-s)*(o-a)&&(n-s)*(r-a)>=(t-s)*(e-a)&&(t-s)*(o-a)>=(i-s)*(r-a)}function R$(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!k$(n,e)&&(Wv(n,e)&&Wv(e,n)&&I$(n,e)&&(_i(n.prev,n,e.prev)||_i(n,e.prev,e))||aS(n,e)&&_i(n.prev,n,n.next)>0&&_i(e.prev,e,e.next)>0)}function _i(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function aS(n,e){return n.x===e.x&&n.y===e.y}function VF(n,e,t,r){const i=s2(_i(n,e,t)),o=s2(_i(n,e,r)),s=s2(_i(t,r,n)),a=s2(_i(t,r,e));return!!(i!==o&&s!==a||i===0&&o2(n,t,e)||o===0&&o2(n,r,e)||s===0&&o2(t,n,r)||a===0&&o2(t,e,r))}function o2(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function s2(n){return n>0?1:n<0?-1:0}function k$(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&VF(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Wv(n,e){return _i(n.prev,n,n.next)<0?_i(n,e,n.next)>=0&&_i(n,n.prev,e)>=0:_i(n,e,n.prev)<0||_i(n,n.next,e)<0}function I$(n,e){let t=n,r=!1;const i=(n.x+e.x)/2,o=(n.y+e.y)/2;do t.y>o!=t.next.y>o&&t.next.y!==t.y&&i<(t.next.x-t.x)*(o-t.y)/(t.next.y-t.y)+t.x&&(r=!r),t=t.next;while(t!==n);return r}function WF(n,e){const t=new DM(n.i,n.x,n.y),r=new DM(e.i,e.x,e.y),i=n.next,o=e.prev;return n.next=e,e.prev=n,t.next=i,i.prev=t,r.next=t,t.prev=r,o.next=r,r.prev=o,r}function GP(n,e,t,r){const i=new DM(n,e,t);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function jv(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function DM(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function N$(n,e,t,r){let i=0;for(let o=e,s=t-r;o<t;o+=r)i+=(n[s]-n[o])*(n[o+1]+n[s+1]),s=o;return i}class Nu{static area(e){const t=e.length;let r=0;for(let i=t-1,o=0;o<t;i=o++)r+=e[i].x*e[o].y-e[o].x*e[i].y;return r*.5}static isClockWise(e){return Nu.area(e)<0}static triangulateShape(e,t){const r=[],i=[],o=[];VP(e),WP(r,e);let s=e.length;t.forEach(VP);for(let l=0;l<t.length;l++)i.push(s),s+=t[l].length,WP(r,t[l]);const a=y$.triangulate(r,i);for(let l=0;l<a.length;l+=3)o.push(a.slice(l,l+3));return o}}function VP(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function WP(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class lS extends Rn{constructor(e=new kd([new gt(.5,.5),new gt(-.5,.5),new gt(-.5,-.5),new gt(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const r=this,i=[],o=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];s(u)}this.setAttribute("position",new tn(i,3)),this.setAttribute("uv",new tn(o,2)),this.computeVertexNormals();function s(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,h=t.depth!==void 0?t.depth:1;let f=t.bevelEnabled!==void 0?t.bevelEnabled:!0,d=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:d-.1,y=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const g=t.extrudePath,x=t.UVGenerator!==void 0?t.UVGenerator:F$;let _,E=!1,C,I,R,L;g&&(_=g.getSpacedPoints(c),E=!0,f=!1,C=g.computeFrenetFrames(c,!1),I=new ge,R=new ge,L=new ge),f||(w=0,d=0,v=0,y=0);const k=a.extractPoints(u);let D=k.shape;const N=k.holes;if(!Nu.isClockWise(D)){D=D.reverse();for(let he=0,ke=N.length;he<ke;he++){const Ne=N[he];Nu.isClockWise(Ne)&&(N[he]=Ne.reverse())}}const G=Nu.triangulateShape(D,N),V=D;for(let he=0,ke=N.length;he<ke;he++){const Ne=N[he];D=D.concat(Ne)}function $(he,ke,Ne){return ke||console.error("THREE.ExtrudeGeometry: vec does not exist"),he.clone().addScaledVector(ke,Ne)}const J=D.length,le=G.length;function H(he,ke,Ne){let Ae,ie,Ke;const Ve=he.x-ke.x,We=he.y-ke.y,nt=Ne.x-he.x,yt=Ne.y-he.y,_t=Ve*Ve+We*We,de=Ve*yt-We*nt;if(Math.abs(de)>Number.EPSILON){const ee=Math.sqrt(_t),Fe=Math.sqrt(nt*nt+yt*yt),ot=ke.x-We/ee,et=ke.y+Ve/ee,ft=Ne.x-yt/Fe,xt=Ne.y+nt/Fe,ht=((ft-ot)*yt-(xt-et)*nt)/(Ve*yt-We*nt);Ae=ot+Ve*ht-he.x,ie=et+We*ht-he.y;const Pe=Ae*Ae+ie*ie;if(Pe<=2)return new gt(Ae,ie);Ke=Math.sqrt(Pe/2)}else{let ee=!1;Ve>Number.EPSILON?nt>Number.EPSILON&&(ee=!0):Ve<-Number.EPSILON?nt<-Number.EPSILON&&(ee=!0):Math.sign(We)===Math.sign(yt)&&(ee=!0),ee?(Ae=-We,ie=Ve,Ke=Math.sqrt(_t)):(Ae=Ve,ie=We,Ke=Math.sqrt(_t/2))}return new gt(Ae/Ke,ie/Ke)}const q=[];for(let he=0,ke=V.length,Ne=ke-1,Ae=he+1;he<ke;he++,Ne++,Ae++)Ne===ke&&(Ne=0),Ae===ke&&(Ae=0),q[he]=H(V[he],V[Ne],V[Ae]);const Z=[];let oe,F=q.concat();for(let he=0,ke=N.length;he<ke;he++){const Ne=N[he];oe=[];for(let Ae=0,ie=Ne.length,Ke=ie-1,Ve=Ae+1;Ae<ie;Ae++,Ke++,Ve++)Ke===ie&&(Ke=0),Ve===ie&&(Ve=0),oe[Ae]=H(Ne[Ae],Ne[Ke],Ne[Ve]);Z.push(oe),F=F.concat(oe)}for(let he=0;he<w;he++){const ke=he/w,Ne=d*Math.cos(ke*Math.PI/2),Ae=v*Math.sin(ke*Math.PI/2)+y;for(let ie=0,Ke=V.length;ie<Ke;ie++){const Ve=$(V[ie],q[ie],Ae);we(Ve.x,Ve.y,-Ne)}for(let ie=0,Ke=N.length;ie<Ke;ie++){const Ve=N[ie];oe=Z[ie];for(let We=0,nt=Ve.length;We<nt;We++){const yt=$(Ve[We],oe[We],Ae);we(yt.x,yt.y,-Ne)}}}const j=v+y;for(let he=0;he<J;he++){const ke=f?$(D[he],F[he],j):D[he];E?(R.copy(C.normals[0]).multiplyScalar(ke.x),I.copy(C.binormals[0]).multiplyScalar(ke.y),L.copy(_[0]).add(R).add(I),we(L.x,L.y,L.z)):we(ke.x,ke.y,0)}for(let he=1;he<=c;he++)for(let ke=0;ke<J;ke++){const Ne=f?$(D[ke],F[ke],j):D[ke];E?(R.copy(C.normals[he]).multiplyScalar(Ne.x),I.copy(C.binormals[he]).multiplyScalar(Ne.y),L.copy(_[he]).add(R).add(I),we(L.x,L.y,L.z)):we(Ne.x,Ne.y,h/c*he)}for(let he=w-1;he>=0;he--){const ke=he/w,Ne=d*Math.cos(ke*Math.PI/2),Ae=v*Math.sin(ke*Math.PI/2)+y;for(let ie=0,Ke=V.length;ie<Ke;ie++){const Ve=$(V[ie],q[ie],Ae);we(Ve.x,Ve.y,h+Ne)}for(let ie=0,Ke=N.length;ie<Ke;ie++){const Ve=N[ie];oe=Z[ie];for(let We=0,nt=Ve.length;We<nt;We++){const yt=$(Ve[We],oe[We],Ae);E?we(yt.x,yt.y+_[c-1].y,_[c-1].x+Ne):we(yt.x,yt.y,h+Ne)}}}Q(),se();function Q(){const he=i.length/3;if(f){let ke=0,Ne=J*ke;for(let Ae=0;Ae<le;Ae++){const ie=G[Ae];Ee(ie[2]+Ne,ie[1]+Ne,ie[0]+Ne)}ke=c+w*2,Ne=J*ke;for(let Ae=0;Ae<le;Ae++){const ie=G[Ae];Ee(ie[0]+Ne,ie[1]+Ne,ie[2]+Ne)}}else{for(let ke=0;ke<le;ke++){const Ne=G[ke];Ee(Ne[2],Ne[1],Ne[0])}for(let ke=0;ke<le;ke++){const Ne=G[ke];Ee(Ne[0]+J*c,Ne[1]+J*c,Ne[2]+J*c)}}r.addGroup(he,i.length/3-he,0)}function se(){const he=i.length/3;let ke=0;fe(V,ke),ke+=V.length;for(let Ne=0,Ae=N.length;Ne<Ae;Ne++){const ie=N[Ne];fe(ie,ke),ke+=ie.length}r.addGroup(he,i.length/3-he,1)}function fe(he,ke){let Ne=he.length;for(;--Ne>=0;){const Ae=Ne;let ie=Ne-1;ie<0&&(ie=he.length-1);for(let Ke=0,Ve=c+w*2;Ke<Ve;Ke++){const We=J*Ke,nt=J*(Ke+1),yt=ke+Ae+We,_t=ke+ie+We,de=ke+ie+nt,ee=ke+Ae+nt;Ce(yt,_t,de,ee)}}}function we(he,ke,Ne){l.push(he),l.push(ke),l.push(Ne)}function Ee(he,ke,Ne){Ge(he),Ge(ke),Ge(Ne);const Ae=i.length/3,ie=x.generateTopUV(r,i,Ae-3,Ae-2,Ae-1);Ie(ie[0]),Ie(ie[1]),Ie(ie[2])}function Ce(he,ke,Ne,Ae){Ge(he),Ge(ke),Ge(Ae),Ge(ke),Ge(Ne),Ge(Ae);const ie=i.length/3,Ke=x.generateSideWallUV(r,i,ie-6,ie-3,ie-2,ie-1);Ie(Ke[0]),Ie(Ke[1]),Ie(Ke[3]),Ie(Ke[1]),Ie(Ke[2]),Ie(Ke[3])}function Ge(he){i.push(l[he*3+0]),i.push(l[he*3+1]),i.push(l[he*3+2])}function Ie(he){o.push(he.x),o.push(he.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,r=this.parameters.options;return D$(t,r,e)}static fromJSON(e,t){const r=[];for(let o=0,s=e.shapes.length;o<s;o++){const a=t[e.shapes[o]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new uA[i.type]().fromJSON(i)),new lS(r,e.options)}}const F$={generateTopUV:function(n,e,t,r,i){const o=e[t*3],s=e[t*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new gt(o,s),new gt(a,l),new gt(u,c)]},generateSideWallUV:function(n,e,t,r,i,o){const s=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[r*3],c=e[r*3+1],h=e[r*3+2],f=e[i*3],d=e[i*3+1],v=e[i*3+2],y=e[o*3],w=e[o*3+1],g=e[o*3+2];return Math.abs(a-c)<Math.abs(s-u)?[new gt(s,1-l),new gt(u,1-h),new gt(f,1-v),new gt(y,1-g)]:[new gt(a,1-l),new gt(c,1-h),new gt(d,1-v),new gt(w,1-g)]}};function D$(n,e,t){if(t.shapes=[],Array.isArray(n))for(let r=0,i=n.length;r<i;r++){const o=n[r];t.shapes.push(o.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class b1 extends Tf{constructor(e=1,t=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],o=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,o,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new b1(e.radius,e.detail)}}class M1 extends Tf{constructor(e=1,t=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new M1(e.radius,e.detail)}}class uS extends Rn{constructor(e=.5,t=1,r=32,i=1,o=0,s=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:r,phiSegments:i,thetaStart:o,thetaLength:s},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],c=[];let h=e;const f=(t-e)/i,d=new ge,v=new gt;for(let y=0;y<=i;y++){for(let w=0;w<=r;w++){const g=o+w/r*s;d.x=h*Math.cos(g),d.y=h*Math.sin(g),l.push(d.x,d.y,d.z),u.push(0,0,1),v.x=(d.x/t+1)/2,v.y=(d.y/t+1)/2,c.push(v.x,v.y)}h+=f}for(let y=0;y<i;y++){const w=y*(r+1);for(let g=0;g<r;g++){const x=g+w,_=x,E=x+r+1,C=x+r+2,I=x+1;a.push(_,E,I),a.push(E,C,I)}}this.setIndex(a),this.setAttribute("position",new tn(l,3)),this.setAttribute("normal",new tn(u,3)),this.setAttribute("uv",new tn(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new uS(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class cS extends Rn{constructor(e=new kd([new gt(0,.5),new gt(-.5,-.5),new gt(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const r=[],i=[],o=[],s=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new tn(i,3)),this.setAttribute("normal",new tn(o,3)),this.setAttribute("uv",new tn(s,2));function u(c){const h=i.length/3,f=c.extractPoints(t);let d=f.shape;const v=f.holes;Nu.isClockWise(d)===!1&&(d=d.reverse());for(let w=0,g=v.length;w<g;w++){const x=v[w];Nu.isClockWise(x)===!0&&(v[w]=x.reverse())}const y=Nu.triangulateShape(d,v);for(let w=0,g=v.length;w<g;w++){const x=v[w];d=d.concat(x)}for(let w=0,g=d.length;w<g;w++){const x=d[w];i.push(x.x,x.y,0),o.push(0,0,1),s.push(x.x,x.y)}for(let w=0,g=y.length;w<g;w++){const x=y[w],_=x[0]+h,E=x[1]+h,C=x[2]+h;r.push(_,E,C),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return O$(t,e)}static fromJSON(e,t){const r=[];for(let i=0,o=e.shapes.length;i<o;i++){const s=t[e.shapes[i]];r.push(s)}return new cS(r,e.curveSegments)}}function O$(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const i=n[t];e.shapes.push(i.uuid)}else e.shapes.push(n.uuid);return e}class E1 extends Rn{constructor(e=1,t=32,r=16,i=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:r,phiStart:i,phiLength:o,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),r=Math.max(2,Math.floor(r));const l=Math.min(s+a,Math.PI);let u=0;const c=[],h=new ge,f=new ge,d=[],v=[],y=[],w=[];for(let g=0;g<=r;g++){const x=[],_=g/r;let E=0;g===0&&s===0?E=.5/t:g===r&&l===Math.PI&&(E=-.5/t);for(let C=0;C<=t;C++){const I=C/t;h.x=-e*Math.cos(i+I*o)*Math.sin(s+_*a),h.y=e*Math.cos(s+_*a),h.z=e*Math.sin(i+I*o)*Math.sin(s+_*a),v.push(h.x,h.y,h.z),f.copy(h).normalize(),y.push(f.x,f.y,f.z),w.push(I+E,1-_),x.push(u++)}c.push(x)}for(let g=0;g<r;g++)for(let x=0;x<t;x++){const _=c[g][x+1],E=c[g][x],C=c[g+1][x],I=c[g+1][x+1];(g!==0||s>0)&&d.push(_,E,I),(g!==r-1||l<Math.PI)&&d.push(E,C,I)}this.setIndex(d),this.setAttribute("position",new tn(v,3)),this.setAttribute("normal",new tn(y,3)),this.setAttribute("uv",new tn(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new E1(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class hS extends Tf{constructor(e=1,t=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new hS(e.radius,e.detail)}}class fS extends Rn{constructor(e=1,t=.4,r=12,i=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:r,tubularSegments:i,arc:o},r=Math.floor(r),i=Math.floor(i);const s=[],a=[],l=[],u=[],c=new ge,h=new ge,f=new ge;for(let d=0;d<=r;d++)for(let v=0;v<=i;v++){const y=v/i*o,w=d/r*Math.PI*2;h.x=(e+t*Math.cos(w))*Math.cos(y),h.y=(e+t*Math.cos(w))*Math.sin(y),h.z=t*Math.sin(w),a.push(h.x,h.y,h.z),c.x=e*Math.cos(y),c.y=e*Math.sin(y),f.subVectors(h,c).normalize(),l.push(f.x,f.y,f.z),u.push(v/i),u.push(d/r)}for(let d=1;d<=r;d++)for(let v=1;v<=i;v++){const y=(i+1)*d+v-1,w=(i+1)*(d-1)+v-1,g=(i+1)*(d-1)+v,x=(i+1)*d+v;s.push(y,w,x),s.push(w,g,x)}this.setIndex(s),this.setAttribute("position",new tn(a,3)),this.setAttribute("normal",new tn(l,3)),this.setAttribute("uv",new tn(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fS(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class dS extends Rn{constructor(e=1,t=.4,r=64,i=8,o=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:r,radialSegments:i,p:o,q:s},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],c=[],h=new ge,f=new ge,d=new ge,v=new ge,y=new ge,w=new ge,g=new ge;for(let _=0;_<=r;++_){const E=_/r*o*Math.PI*2;x(E,o,s,e,d),x(E+.01,o,s,e,v),w.subVectors(v,d),g.addVectors(v,d),y.crossVectors(w,g),g.crossVectors(y,w),y.normalize(),g.normalize();for(let C=0;C<=i;++C){const I=C/i*Math.PI*2,R=-t*Math.cos(I),L=t*Math.sin(I);h.x=d.x+(R*g.x+L*y.x),h.y=d.y+(R*g.y+L*y.y),h.z=d.z+(R*g.z+L*y.z),l.push(h.x,h.y,h.z),f.subVectors(h,d).normalize(),u.push(f.x,f.y,f.z),c.push(_/r),c.push(C/i)}}for(let _=1;_<=r;_++)for(let E=1;E<=i;E++){const C=(i+1)*(_-1)+(E-1),I=(i+1)*_+(E-1),R=(i+1)*_+E,L=(i+1)*(_-1)+E;a.push(C,I,L),a.push(I,R,L)}this.setIndex(a),this.setAttribute("position",new tn(l,3)),this.setAttribute("normal",new tn(u,3)),this.setAttribute("uv",new tn(c,2));function x(_,E,C,I,R){const L=Math.cos(_),k=Math.sin(_),D=C/E*_,N=Math.cos(D);R.x=I*(2+N)*.5*L,R.y=I*(2+N)*k*.5,R.z=I*Math.sin(D)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dS(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class pS extends Rn{constructor(e=new aA(new ge(-1,-1,0),new ge(-1,1,0),new ge(1,1,0)),t=64,r=1,i=8,o=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:r,radialSegments:i,closed:o};const s=e.computeFrenetFrames(t,o);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const a=new ge,l=new ge,u=new gt;let c=new ge;const h=[],f=[],d=[],v=[];y(),this.setIndex(v),this.setAttribute("position",new tn(h,3)),this.setAttribute("normal",new tn(f,3)),this.setAttribute("uv",new tn(d,2));function y(){for(let _=0;_<t;_++)w(_);w(o===!1?t:0),x(),g()}function w(_){c=e.getPointAt(_/t,c);const E=s.normals[_],C=s.binormals[_];for(let I=0;I<=i;I++){const R=I/i*Math.PI*2,L=Math.sin(R),k=-Math.cos(R);l.x=k*E.x+L*C.x,l.y=k*E.y+L*C.y,l.z=k*E.z+L*C.z,l.normalize(),f.push(l.x,l.y,l.z),a.x=c.x+r*l.x,a.y=c.y+r*l.y,a.z=c.z+r*l.z,h.push(a.x,a.y,a.z)}}function g(){for(let _=1;_<=t;_++)for(let E=1;E<=i;E++){const C=(i+1)*(_-1)+(E-1),I=(i+1)*_+(E-1),R=(i+1)*_+E,L=(i+1)*(_-1)+E;v.push(C,I,L),v.push(I,R,L)}}function x(){for(let _=0;_<=t;_++)for(let E=0;E<=i;E++)u.x=_/t,u.y=E/i,d.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new pS(new uA[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class jF extends Rn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],r=new Set,i=new ge,o=new ge;if(e.index!==null){const s=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const h=l[u],f=h.start,d=h.count;for(let v=f,y=f+d;v<y;v+=3)for(let w=0;w<3;w++){const g=a.getX(v+w),x=a.getX(v+(w+1)%3);i.fromBufferAttribute(s,g),o.fromBufferAttribute(s,x),jP(i,o,r)===!0&&(t.push(i.x,i.y,i.z),t.push(o.x,o.y,o.z))}}}else{const s=e.attributes.position;for(let a=0,l=s.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,h=3*a+(u+1)%3;i.fromBufferAttribute(s,c),o.fromBufferAttribute(s,h),jP(i,o,r)===!0&&(t.push(i.x,i.y,i.z),t.push(o.x,o.y,o.z))}}this.setAttribute("position",new tn(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function jP(n,e,t){const r=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(r)===!0||t.has(i)===!0?!1:(t.add(r),t.add(i),!0)}var $P=Object.freeze({__proto__:null,BoxGeometry:ep,CapsuleGeometry:rS,CircleGeometry:iS,ConeGeometry:oS,CylinderGeometry:Mg,DodecahedronGeometry:sS,EdgesGeometry:cA,ExtrudeGeometry:lS,IcosahedronGeometry:b1,LatheGeometry:_1,OctahedronGeometry:M1,PlaneGeometry:S1,PolyhedronGeometry:Tf,RingGeometry:uS,ShapeGeometry:cS,SphereGeometry:E1,TetrahedronGeometry:hS,TorusGeometry:fS,TorusKnotGeometry:dS,TubeGeometry:pS,WireframeGeometry:jF});class $F extends Zo{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Yt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class qF extends $l{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class mS extends Zo{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Yt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ef,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class XF extends mS{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new gt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ii(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Yt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Yt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Yt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class YF extends Zo{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Yt(16777215),this.specular=new Yt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ef,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=v1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class ZF extends Zo{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Yt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ef,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class KF extends Zo{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ef,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class JF extends Zo{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Yt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Yt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ef,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=v1,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class QF extends Zo{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Yt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ef,this.normalScale=new gt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class e6 extends Ss{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ja(n,e,t){return hA(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function Md(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function hA(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function t6(n){function e(i,o){return n[i]-n[o]}const t=n.length,r=new Array(t);for(let i=0;i!==t;++i)r[i]=i;return r.sort(e),r}function OM(n,e,t){const r=n.length,i=new n.constructor(r);for(let o=0,s=0;s!==r;++o){const a=t[o]*e;for(let l=0;l!==e;++l)i[s++]=n[a+l]}return i}function fA(n,e,t,r){let i=1,o=n[0];for(;o!==void 0&&o[r]===void 0;)o=n[i++];if(o===void 0)return;let s=o[r];if(s!==void 0)if(Array.isArray(s))do s=o[r],s!==void 0&&(e.push(o.time),t.push.apply(t,s)),o=n[i++];while(o!==void 0);else if(s.toArray!==void 0)do s=o[r],s!==void 0&&(e.push(o.time),s.toArray(t,t.length)),o=n[i++];while(o!==void 0);else do s=o[r],s!==void 0&&(e.push(o.time),t.push(s)),o=n[i++];while(o!==void 0)}function B$(n,e,t,r,i=30){const o=n.clone();o.name=e;const s=[];for(let l=0;l<o.tracks.length;++l){const u=o.tracks[l],c=u.getValueSize(),h=[],f=[];for(let d=0;d<u.times.length;++d){const v=u.times[d]*i;if(!(v<t||v>=r)){h.push(u.times[d]);for(let y=0;y<c;++y)f.push(u.values[d*c+y])}}h.length!==0&&(u.times=Md(h,u.times.constructor),u.values=Md(f,u.values.constructor),s.push(u))}o.tracks=s;let a=1/0;for(let l=0;l<o.tracks.length;++l)a>o.tracks[l].times[0]&&(a=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*a);return o.resetDuration(),o}function U$(n,e=0,t=n,r=30){r<=0&&(r=30);const i=t.tracks.length,o=e/r;for(let s=0;s<i;++s){const a=t.tracks[s],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(u===void 0)continue;let c=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);let f=0;const d=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);const v=a.times.length-1;let y;if(o<=a.times[0]){const g=c,x=h-c;y=Ja(a.values,g,x)}else if(o>=a.times[v]){const g=v*h+c,x=g+h-c;y=Ja(a.values,g,x)}else{const g=a.createInterpolant(),x=c,_=h-c;g.evaluate(o),y=Ja(g.resultBuffer,x,_)}l==="quaternion"&&new ys().fromArray(y).normalize().conjugate().toArray(y);const w=u.times.length;for(let g=0;g<w;++g){const x=g*d+f;if(l==="quaternion")ys.multiplyQuaternionsFlat(u.values,x,y,0,u.values,x);else{const _=d-f*2;for(let E=0;E<_;++E)u.values[x+E]-=y[E]}}}return n.blendMode=V3,n}const z$={arraySlice:Ja,convertArray:Md,isTypedArray:hA,getKeyframeOrder:t6,sortedArray:OM,flattenJSON:fA,subclip:B$,makeClipAdditive:U$};class A1{constructor(e,t,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new t.constructor(r),this.sampleValues=t,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let r=this._cachedIndex,i=t[r],o=t[r-1];e:{t:{let s;n:{i:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<o)break i;return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(o=i,i=t[++r],e<i)break t}s=t.length;break n}if(!(e>=o)){const a=t[1];e<a&&(r=2,o=a);for(let l=r-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=o,o=t[--r-1],e>=o)break t}s=r,r=0;break n}break e}for(;r<s;){const a=r+s>>>1;e<t[a]?s=a:r=a+1}if(i=t[r],o=t[r-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=t.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,o,i)}return this.interpolate_(r,o,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,r=this.sampleValues,i=this.valueSize,o=e*i;for(let s=0;s!==i;++s)t[s]=r[o+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class n6 extends A1{constructor(e,t,r,i){super(e,t,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:wd,endingEnd:wd}}intervalChanged_(e,t,r){const i=this.parameterPositions;let o=e-2,s=e+1,a=i[o],l=i[s];if(a===void 0)switch(this.getSettings_().endingStart){case Sd:o=e,a=2*t-r;break;case Bv:o=i.length-2,a=t+i[o]-i[o+1];break;default:o=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Sd:s=e,l=2*r-t;break;case Bv:s=1,l=r+i[1]-i[0];break;default:s=e-1,l=t}const u=(r-t)*.5,c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-r),this._offsetPrev=o*c,this._offsetNext=s*c}interpolate_(e,t,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,h=this._offsetNext,f=this._weightPrev,d=this._weightNext,v=(r-t)/(i-t),y=v*v,w=y*v,g=-f*w+2*f*y-f*v,x=(1+f)*w+(-1.5-2*f)*y+(-.5+f)*v+1,_=(-1-d)*w+(1.5+d)*y+.5*v,E=d*w-d*y;for(let C=0;C!==a;++C)o[C]=g*s[c+C]+x*s[u+C]+_*s[l+C]+E*s[h+C];return o}}class dA extends A1{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(r-t)/(i-t),h=1-c;for(let f=0;f!==a;++f)o[f]=s[u+f]*h+s[l+f]*c;return o}}class r6 extends A1{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class Ql{constructor(e,t,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Md(t,this.TimeBufferType),this.values=Md(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let r;if(t.toJSON!==this.toJSON)r=t.toJSON(e);else{r={name:e.name,times:Md(e.times,Array),values:Md(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new r6(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new dA(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new n6(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Dv:t=this.InterpolantFactoryMethodDiscrete;break;case Ov:t=this.InterpolantFactoryMethodLinear;break;case ix:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Dv;case this.InterpolantFactoryMethodLinear:return Ov;case this.InterpolantFactoryMethodSmooth:return ix}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let r=0,i=t.length;r!==i;++r)t[r]*=e}return this}trim(e,t){const r=this.times,i=r.length;let o=0,s=i-1;for(;o!==i&&r[o]<e;)++o;for(;s!==-1&&r[s]>t;)--s;if(++s,o!==0||s!==i){o>=s&&(s=Math.max(s,1),o=s-1);const a=this.getValueSize();this.times=Ja(r,o,s),this.values=Ja(this.values,o*a,s*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,o=r.length;o===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==o;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(s!==null&&s>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,s),e=!1;break}s=l}if(i!==void 0&&hA(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=Ja(this.times),t=Ja(this.values),r=this.getValueSize(),i=this.getInterpolation()===ix,o=e.length-1;let s=1;for(let a=1;a<o;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(i)l=!0;else{const h=a*r,f=h-r,d=h+r;for(let v=0;v!==r;++v){const y=t[h+v];if(y!==t[f+v]||y!==t[d+v]){l=!0;break}}}if(l){if(a!==s){e[s]=e[a];const h=a*r,f=s*r;for(let d=0;d!==r;++d)t[f+d]=t[h+d]}++s}}if(o>0){e[s]=e[o];for(let a=o*r,l=s*r,u=0;u!==r;++u)t[l+u]=t[a+u];++s}return s!==e.length?(this.times=Ja(e,0,s),this.values=Ja(t,0,s*r)):(this.times=e,this.values=t),this}clone(){const e=Ja(this.times,0),t=Ja(this.values,0),r=this.constructor,i=new r(this.name,e,t);return i.createInterpolant=this.createInterpolant,i}}Ql.prototype.TimeBufferType=Float32Array;Ql.prototype.ValueBufferType=Float32Array;Ql.prototype.DefaultInterpolation=Ov;class tp extends Ql{}tp.prototype.ValueTypeName="bool";tp.prototype.ValueBufferType=Array;tp.prototype.DefaultInterpolation=Dv;tp.prototype.InterpolantFactoryMethodLinear=void 0;tp.prototype.InterpolantFactoryMethodSmooth=void 0;class pA extends Ql{}pA.prototype.ValueTypeName="color";class $v extends Ql{}$v.prototype.ValueTypeName="number";class i6 extends A1{constructor(e,t,r,i){super(e,t,r,i)}interpolate_(e,t,r,i){const o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,l=(r-t)/(i-t);let u=e*a;for(let c=u+a;u!==c;u+=4)ys.slerpFlat(o,0,s,u-a,s,u,l);return o}}class Eg extends Ql{InterpolantFactoryMethodLinear(e){return new i6(this.times,this.values,this.getValueSize(),e)}}Eg.prototype.ValueTypeName="quaternion";Eg.prototype.DefaultInterpolation=Ov;Eg.prototype.InterpolantFactoryMethodSmooth=void 0;class np extends Ql{}np.prototype.ValueTypeName="string";np.prototype.ValueBufferType=Array;np.prototype.DefaultInterpolation=Dv;np.prototype.InterpolantFactoryMethodLinear=void 0;np.prototype.InterpolantFactoryMethodSmooth=void 0;class qv extends Ql{}qv.prototype.ValueTypeName="vector";class Xv{constructor(e,t=-1,r,i=jw){this.name=e,this.tracks=r,this.duration=t,this.blendMode=i,this.uuid=ba(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],r=e.tracks,i=1/(e.fps||1);for(let s=0,a=r.length;s!==a;++s)t.push(G$(r[s]).scale(i));const o=new this(e.name,e.duration,t,e.blendMode);return o.uuid=e.uuid,o}static toJSON(e){const t=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let o=0,s=r.length;o!==s;++o)t.push(Ql.toJSON(r[o]));return i}static CreateFromMorphTargetSequence(e,t,r,i){const o=t.length,s=[];for(let a=0;a<o;a++){let l=[],u=[];l.push((a+o-1)%o,a,(a+1)%o),u.push(0,1,0);const c=t6(l);l=OM(l,1,c),u=OM(u,1,c),!i&&l[0]===0&&(l.push(o),u.push(u[0])),s.push(new $v(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/r))}return new this(e,-1,s)}static findByName(e,t){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===t)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,t,r){const i={},o=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(o);if(c&&c.length>1){const h=c[1];let f=i[h];f||(i[h]=f=[]),f.push(u)}}const s=[];for(const a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],t,r));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,f,d,v,y){if(d.length!==0){const w=[],g=[];fA(d,w,g,v),w.length!==0&&y.push(new h(f,w,g))}},i=[],o=e.name||"default",s=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const f=u[h].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const d={};let v;for(v=0;v<f.length;v++)if(f[v].morphTargets)for(let y=0;y<f[v].morphTargets.length;y++)d[f[v].morphTargets[y]]=-1;for(const y in d){const w=[],g=[];for(let x=0;x!==f[v].morphTargets.length;++x){const _=f[v];w.push(_.time),g.push(_.morphTarget===y?1:0)}i.push(new $v(".morphTargetInfluence["+y+"]",w,g))}l=d.length*s}else{const d=".bones["+t[h].name+"]";r(qv,d+".position",f,"pos",i),r(Eg,d+".quaternion",f,"rot",i),r(qv,d+".scale",f,"scl",i)}}return i.length===0?null:new this(o,l,i,a)}resetDuration(){const e=this.tracks;let t=0;for(let r=0,i=e.length;r!==i;++r){const o=this.tracks[r];t=Math.max(t,o.times[o.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function H$(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return $v;case"vector":case"vector2":case"vector3":case"vector4":return qv;case"color":return pA;case"quaternion":return Eg;case"bool":case"boolean":return tp;case"string":return np}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function G$(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=H$(n.type);if(n.times===void 0){const t=[],r=[];fA(n.keys,t,r,"value"),n.times=t,n.values=r}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Vd={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class mA{constructor(e,t,r){const i=this;let o=!1,s=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=r,this.itemStart=function(c){a++,o===!1&&i.onStart!==void 0&&i.onStart(c,s,a),o=!0},this.itemEnd=function(c){s++,i.onProgress!==void 0&&i.onProgress(c,s,a),s===a&&(o=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,h){return u.push(c,h),this},this.removeHandler=function(c){const h=u.indexOf(c);return h!==-1&&u.splice(h,2),this},this.getHandler=function(c){for(let h=0,f=u.length;h<f;h+=2){const d=u[h],v=u[h+1];if(d.global&&(d.lastIndex=0),d.test(c))return v}return null}}}const o6=new mA;class ra{constructor(e){this.manager=e!==void 0?e:o6,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const r=this;return new Promise(function(i,o){r.load(e,i,t,o)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}ra.DEFAULT_MATERIAL_NAME="__DEFAULT";const fc={};class V$ extends Error{constructor(e,t){super(e),this.response=t}}class zc extends ra{constructor(e){super(e)}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=Vd.get(e);if(o!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(o),this.manager.itemEnd(e)},0),o;if(fc[e]!==void 0){fc[e].push({onLoad:t,onProgress:r,onError:i});return}fc[e]=[],fc[e].push({onLoad:t,onProgress:r,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(s).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=fc[e],h=u.body.getReader(),f=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),d=f?parseInt(f):0,v=d!==0;let y=0;const w=new ReadableStream({start(g){x();function x(){h.read().then(({done:_,value:E})=>{if(_)g.close();else{y+=E.byteLength;const C=new ProgressEvent("progress",{lengthComputable:v,loaded:y,total:d});for(let I=0,R=c.length;I<R;I++){const L=c[I];L.onProgress&&L.onProgress(C)}g.enqueue(E),x()}})}}});return new Response(w)}else throw new V$(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a===void 0)return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),f=h&&h[1]?h[1].toLowerCase():void 0,d=new TextDecoder(f);return u.arrayBuffer().then(v=>d.decode(v))}}}).then(u=>{Vd.add(e,u);const c=fc[e];delete fc[e];for(let h=0,f=c.length;h<f;h++){const d=c[h];d.onLoad&&d.onLoad(u)}}).catch(u=>{const c=fc[e];if(c===void 0)throw this.manager.itemError(e),u;delete fc[e];for(let h=0,f=c.length;h<f;h++){const d=c[h];d.onError&&d.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class W$ extends ra{constructor(e){super(e)}load(e,t,r,i){const o=this,s=new zc(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(a){try{t(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const t=[];for(let r=0;r<e.length;r++){const i=Xv.parse(e[r]);t.push(i)}return t}}class j$ extends ra{constructor(e){super(e)}load(e,t,r,i){const o=this,s=[],a=new eS,l=new zc(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(o.withCredentials);let u=0;function c(h){l.load(e[h],function(f){const d=o.parse(f,!0);s[h]={width:d.width,height:d.height,format:d.format,mipmaps:d.mipmaps},u+=1,u===6&&(d.mipmapCount===1&&(a.minFilter=ti),a.image=s,a.format=d.format,a.needsUpdate=!0,t&&t(a))},r,i)}if(Array.isArray(e))for(let h=0,f=e.length;h<f;++h)c(h);else l.load(e,function(h){const f=o.parse(h,!0);if(f.isCubemap){const d=f.mipmaps.length/f.mipmapCount;for(let v=0;v<d;v++){s[v]={mipmaps:[]};for(let y=0;y<f.mipmapCount;y++)s[v].mipmaps.push(f.mipmaps[v*f.mipmapCount+y]),s[v].format=f.format,s[v].width=f.width,s[v].height=f.height}a.image=s}else a.image.width=f.width,a.image.height=f.height,a.mipmaps=f.mipmaps;f.mipmapCount===1&&(a.minFilter=ti),a.format=f.format,a.needsUpdate=!0,t&&t(a)},r,i);return a}}class Yv extends ra{constructor(e){super(e)}load(e,t,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=Vd.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const a=Hv("img");function l(){c(),Vd.add(e,this),t&&t(this),o.manager.itemEnd(e)}function u(h){c(),i&&i(h),o.manager.itemError(e),o.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),o.manager.itemStart(e),a.src=e,a}}class s6 extends ra{constructor(e){super(e)}load(e,t,r,i){const o=new w1;o.colorSpace=Gn;const s=new Yv(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function l(u){s.load(e[u],function(c){o.images[u]=c,a++,a===6&&(o.needsUpdate=!0,t&&t(o))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return o}}class gA extends ra{constructor(e){super(e)}load(e,t,r,i){const o=this,s=new zm,a=new zc(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(o.withCredentials),a.load(e,function(l){let u;try{u=o.parse(l)}catch(c){if(i!==void 0)i(c);else{console.error(c);return}}if(!u)return i();u.image!==void 0?s.image=u.image:u.data!==void 0&&(s.image.width=u.width,s.image.height=u.height,s.image.data=u.data),s.wrapS=u.wrapS!==void 0?u.wrapS:ps,s.wrapT=u.wrapT!==void 0?u.wrapT:ps,s.magFilter=u.magFilter!==void 0?u.magFilter:ti,s.minFilter=u.minFilter!==void 0?u.minFilter:ti,s.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?s.colorSpace=u.colorSpace:u.encoding!==void 0&&(s.encoding=u.encoding),u.flipY!==void 0&&(s.flipY=u.flipY),u.format!==void 0&&(s.format=u.format),u.type!==void 0&&(s.type=u.type),u.mipmaps!==void 0&&(s.mipmaps=u.mipmaps,s.minFilter=pf),u.mipmapCount===1&&(s.minFilter=ti),u.generateMipmaps!==void 0&&(s.generateMipmaps=u.generateMipmaps),s.needsUpdate=!0,t&&t(s,u)},r,i),s}}class $$ extends ra{constructor(e){super(e)}load(e,t,r,i){const o=new Fi,s=new Yv(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(a){o.image=a,o.needsUpdate=!0,t!==void 0&&t(o)},r,i),o}}class Cf extends cr{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Yt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class vA extends Cf{constructor(e,t,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(cr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Yt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const Q_=new zn,qP=new ge,XP=new ge;class yA{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new gt(512,512),this.map=null,this.mapPass=null,this.matrix=new zn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new qw,this._frameExtents=new gt(1,1),this._viewportCount=1,this._viewports=[new Nr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,r=this.matrix;qP.setFromMatrixPosition(e.matrixWorld),t.position.copy(qP),XP.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(XP),t.updateMatrixWorld(),Q_.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Q_),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(Q_)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class q$ extends yA{constructor(){super(new Si(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,r=og*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,o=e.distance||t.far;(r!==t.fov||i!==t.aspect||o!==t.far)&&(t.fov=r,t.aspect=i,t.far=o,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class a6 extends Cf{constructor(e,t,r=0,i=Math.PI/3,o=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(cr.DEFAULT_UP),this.updateMatrix(),this.target=new cr,this.distance=r,this.angle=i,this.penumbra=o,this.decay=s,this.map=null,this.shadow=new q$}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const YP=new zn,g0=new ge,eb=new ge;class X$ extends yA{constructor(){super(new Si(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new gt(4,2),this._viewportCount=6,this._viewports=[new Nr(2,1,1,1),new Nr(0,1,1,1),new Nr(3,1,1,1),new Nr(1,1,1,1),new Nr(3,0,1,1),new Nr(1,0,1,1)],this._cubeDirections=[new ge(1,0,0),new ge(-1,0,0),new ge(0,0,1),new ge(0,0,-1),new ge(0,1,0),new ge(0,-1,0)],this._cubeUps=[new ge(0,1,0),new ge(0,1,0),new ge(0,1,0),new ge(0,1,0),new ge(0,0,1),new ge(0,0,-1)]}updateMatrices(e,t=0){const r=this.camera,i=this.matrix,o=e.distance||r.far;o!==r.far&&(r.far=o,r.updateProjectionMatrix()),g0.setFromMatrixPosition(e.matrixWorld),r.position.copy(g0),eb.copy(r.position),eb.add(this._cubeDirections[t]),r.up.copy(this._cubeUps[t]),r.lookAt(eb),r.updateMatrixWorld(),i.makeTranslation(-g0.x,-g0.y,-g0.z),YP.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(YP)}}class l6 extends Cf{constructor(e,t,r=0,i=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new X$}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Y$ extends yA{constructor(){super(new Iu(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Jx extends Cf{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(cr.DEFAULT_UP),this.updateMatrix(),this.target=new cr,this.shadow=new Y$}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class xA extends Cf{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class u6 extends Cf{constructor(e,t,r=10,i=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class c6{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ge)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const r=e.x,i=e.y,o=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*i),t.addScaledVector(s[2],.488603*o),t.addScaledVector(s[3],.488603*r),t.addScaledVector(s[4],1.092548*(r*i)),t.addScaledVector(s[5],1.092548*(i*o)),t.addScaledVector(s[6],.315392*(3*o*o-1)),t.addScaledVector(s[7],1.092548*(r*o)),t.addScaledVector(s[8],.546274*(r*r-i*i)),t}getIrradianceAt(e,t){const r=e.x,i=e.y,o=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],2*.511664*i),t.addScaledVector(s[2],2*.511664*o),t.addScaledVector(s[3],2*.511664*r),t.addScaledVector(s[4],2*.429043*r*i),t.addScaledVector(s[5],2*.429043*i*o),t.addScaledVector(s[6],.743125*o*o-.247708),t.addScaledVector(s[7],2*.429043*r*o),t.addScaledVector(s[8],.429043*(r*r-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,t+i*3);return this}toArray(e=[],t=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,t+i*3);return e}static getBasisAt(e,t){const r=e.x,i=e.y,o=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*o,t[3]=.488603*r,t[4]=1.092548*r*i,t[5]=1.092548*i*o,t[6]=.315392*(3*o*o-1),t[7]=1.092548*r*o,t[8]=.546274*(r*r-i*i)}}class gS extends Cf{constructor(e=new c6,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class vS extends ra{constructor(e){super(e),this.textures={}}load(e,t,r,i){const o=this,s=new zc(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{t(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const t=this.textures;function r(o){return t[o]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",o),t[o]}const i=vS.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Yt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const o in e.uniforms){const s=e.uniforms[o];switch(i.uniforms[o]={},s.type){case"t":i.uniforms[o].value=r(s.value);break;case"c":i.uniforms[o].value=new Yt().setHex(s.value);break;case"v2":i.uniforms[o].value=new gt().fromArray(s.value);break;case"v3":i.uniforms[o].value=new ge().fromArray(s.value);break;case"v4":i.uniforms[o].value=new Nr().fromArray(s.value);break;case"m3":i.uniforms[o].value=new Yn().fromArray(s.value);break;case"m4":i.uniforms[o].value=new zn().fromArray(s.value);break;default:i.uniforms[o].value=s.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const o in e.extensions)i.extensions[o]=e.extensions[o];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let o=e.normalScale;Array.isArray(o)===!1&&(o=[o,o]),i.normalScale=new gt().fromArray(o)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new gt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:$F,SpriteMaterial:tA,RawShaderMaterial:qF,ShaderMaterial:$l,PointsMaterial:rA,MeshPhysicalMaterial:XF,MeshStandardMaterial:mS,MeshPhongMaterial:YF,MeshToonMaterial:ZF,MeshNormalMaterial:KF,MeshLambertMaterial:JF,MeshDepthMaterial:Q3,MeshDistanceMaterial:eA,MeshBasicMaterial:Af,MeshMatcapMaterial:QF,LineDashedMaterial:e6,LineBasicMaterial:Ss,Material:Zo};return new t[e]}}class BM{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let r=0,i=e.length;r<i;r++)t+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class h6 extends Rn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class f6 extends ra{constructor(e){super(e)}load(e,t,r,i){const o=this,s=new zc(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(a){try{t(o.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),o.manager.itemError(e)}},r,i)}parse(e){const t={},r={};function i(d,v){if(t[v]!==void 0)return t[v];const w=d.interleavedBuffers[v],g=o(d,w.buffer),x=Tm(w.type,g),_=new Jw(x,w.stride);return _.uuid=w.uuid,t[v]=_,_}function o(d,v){if(r[v]!==void 0)return r[v];const w=d.arrayBuffers[v],g=new Uint32Array(w).buffer;return r[v]=g,g}const s=e.isInstancedBufferGeometry?new h6:new Rn,a=e.data.index;if(a!==void 0){const d=Tm(a.type,a.array);s.setIndex(new _r(d,1))}const l=e.data.attributes;for(const d in l){const v=l[d];let y;if(v.isInterleavedBufferAttribute){const w=i(e.data,v.data);y=new Hd(w,v.itemSize,v.offset,v.normalized)}else{const w=Tm(v.type,v.array),g=v.isInstancedBufferAttribute?lg:_r;y=new g(w,v.itemSize,v.normalized)}v.name!==void 0&&(y.name=v.name),v.usage!==void 0&&y.setUsage(v.usage),v.updateRange!==void 0&&(y.updateRange.offset=v.updateRange.offset,y.updateRange.count=v.updateRange.count),s.setAttribute(d,y)}const u=e.data.morphAttributes;if(u)for(const d in u){const v=u[d],y=[];for(let w=0,g=v.length;w<g;w++){const x=v[w];let _;if(x.isInterleavedBufferAttribute){const E=i(e.data,x.data);_=new Hd(E,x.itemSize,x.offset,x.normalized)}else{const E=Tm(x.type,x.array);_=new _r(E,x.itemSize,x.normalized)}x.name!==void 0&&(_.name=x.name),y.push(_)}s.morphAttributes[d]=y}e.data.morphTargetsRelative&&(s.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let d=0,v=h.length;d!==v;++d){const y=h[d];s.addGroup(y.start,y.count,y.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const d=new ge;f.center!==void 0&&d.fromArray(f.center),s.boundingSphere=new Zl(d,f.radius)}return e.name&&(s.name=e.name),e.userData&&(s.userData=e.userData),s}}class Z$ extends ra{constructor(e){super(e)}load(e,t,r,i){const o=this,s=this.path===""?BM.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new zc(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(h){i!==void 0&&i(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}o.parse(u,t)},r,i)}async loadAsync(e,t){const r=this,i=this.path===""?BM.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const o=new zc(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials);const s=await o.loadAsync(e,t),a=JSON.parse(s),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,t){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),o=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,o,l,a,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),t!==void 0){let h=!1;for(const f in s)if(s[f].data instanceof HTMLImageElement){h=!0;break}h===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,o),a=this.parseMaterials(e.materials,s),l=this.parseObject(e.object,i,a,s,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const t={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const o=new kd().fromJSON(e[r]);t[o.uuid]=o}return t}parseSkeletons(e,t){const r={},i={};if(t.traverse(function(o){o.isBone&&(i[o.uuid]=o)}),e!==void 0)for(let o=0,s=e.length;o<s;o++){const a=new Qw().fromJSON(e[o],i);r[a.uuid]=a}return r}parseGeometries(e,t){const r={};if(e!==void 0){const i=new f6;for(let o=0,s=e.length;o<s;o++){let a;const l=e[o];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in $P?a=$P[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,t){const r={},i={};if(e!==void 0){const o=new vS;o.setTextures(t);for(let s=0,a=e.length;s<a;s++){const l=e[s];r[l.uuid]===void 0&&(r[l.uuid]=o.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const t={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],o=Xv.parse(i);t[o.uuid]=o}return t}parseImages(e,t){const r=this,i={};let o;function s(l){return r.manager.itemStart(l),o.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return s(c)}else return l.data?{data:Tm(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new mA(t);o=new Yv(l),o.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const h=e[u],f=h.url;if(Array.isArray(f)){const d=[];for(let v=0,y=f.length;v<y;v++){const w=f[v],g=a(w);g!==null&&(g instanceof HTMLImageElement?d.push(g):d.push(new zm(g.data,g.width,g.height)))}i[h.uuid]=new _d(d)}else{const d=a(h.url);i[h.uuid]=new _d(d)}}}return i}async parseImagesAsync(e){const t=this,r={};let i;async function o(s){if(typeof s=="string"){const a=s,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await i.loadAsync(l)}else return s.data?{data:Tm(s.type,s.data),width:s.width,height:s.height}:null}if(e!==void 0&&e.length>0){i=new Yv(this.manager),i.setCrossOrigin(this.crossOrigin);for(let s=0,a=e.length;s<a;s++){const l=e[s],u=l.url;if(Array.isArray(u)){const c=[];for(let h=0,f=u.length;h<f;h++){const d=u[h],v=await o(d);v!==null&&(v instanceof HTMLImageElement?c.push(v):c.push(new zm(v.data,v.width,v.height)))}r[l.uuid]=new _d(c)}else{const c=await o(l.url);r[l.uuid]=new _d(c)}}}return r}parseTextures(e,t){function r(o,s){return typeof o=="number"?o:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",o),s[o])}const i={};if(e!==void 0)for(let o=0,s=e.length;o<s;o++){const a=e[o];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let c;Array.isArray(u)?(c=new w1,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new zm:c=new Fi,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=r(a.mapping,K$)),a.channel!==void 0&&(c.channel=a.channel),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=r(a.wrap[0],ZP),c.wrapT=r(a.wrap[1],ZP)),a.format!==void 0&&(c.format=a.format),a.internalFormat!==void 0&&(c.internalFormat=a.internalFormat),a.type!==void 0&&(c.type=a.type),a.colorSpace!==void 0&&(c.colorSpace=a.colorSpace),a.encoding!==void 0&&(c.encoding=a.encoding),a.minFilter!==void 0&&(c.minFilter=r(a.minFilter,KP)),a.magFilter!==void 0&&(c.magFilter=r(a.magFilter,KP)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.generateMipmaps!==void 0&&(c.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(c.compareFunction=a.compareFunction),a.userData!==void 0&&(c.userData=a.userData),i[a.uuid]=c}return i}parseObject(e,t,r,i,o){let s;function a(f){return t[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),t[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const d=[];for(let v=0,y=f.length;v<y;v++){const w=f[v];r[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),d.push(r[w])}return d}return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),r[f]}}function u(f){return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),i[f]}let c,h;switch(e.type){case"Scene":s=new ag,e.background!==void 0&&(Number.isInteger(e.background)?s.background=new Yt(e.background):s.background=u(e.background)),e.environment!==void 0&&(s.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?s.fog=new Kw(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(s.fog=new Zw(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(s.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":s=new Si(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(s.focus=e.focus),e.zoom!==void 0&&(s.zoom=e.zoom),e.filmGauge!==void 0&&(s.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(s.filmOffset=e.filmOffset),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Iu(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(s.zoom=e.zoom),e.view!==void 0&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new xA(e.color,e.intensity);break;case"DirectionalLight":s=new Jx(e.color,e.intensity);break;case"PointLight":s=new l6(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new u6(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new a6(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new vA(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=new gS().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),h=l(e.material),s=new IF(c,h),e.bindMode!==void 0&&(s.bindMode=e.bindMode),e.bindMatrix!==void 0&&s.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(s.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),h=l(e.material),s=new po(c,h);break;case"InstancedMesh":c=a(e.geometry),h=l(e.material);const f=e.count,d=e.instanceMatrix,v=e.instanceColor;s=new NF(c,h,f),s.instanceMatrix=new lg(new Float32Array(d.array),16),v!==void 0&&(s.instanceColor=new lg(new Float32Array(v.array),v.itemSize));break;case"LOD":s=new kF;break;case"Line":s=new mf(a(e.geometry),l(e.material));break;case"LineLoop":s=new FF(a(e.geometry),l(e.material));break;case"LineSegments":s=new Kl(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new DF(a(e.geometry),l(e.material));break;case"Sprite":s=new RF(l(e.material));break;case"Group":s=new Pm;break;case"Bone":s=new nA;break;default:s=new cr}if(s.uuid=e.uuid,e.name!==void 0&&(s.name=e.name),e.matrix!==void 0?(s.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(e.position!==void 0&&s.position.fromArray(e.position),e.rotation!==void 0&&s.rotation.fromArray(e.rotation),e.quaternion!==void 0&&s.quaternion.fromArray(e.quaternion),e.scale!==void 0&&s.scale.fromArray(e.scale)),e.up!==void 0&&s.up.fromArray(e.up),e.castShadow!==void 0&&(s.castShadow=e.castShadow),e.receiveShadow!==void 0&&(s.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(s.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(s.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(s.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&s.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(s.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(s.visible=e.visible),e.frustumCulled!==void 0&&(s.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(s.renderOrder=e.renderOrder),e.userData!==void 0&&(s.userData=e.userData),e.layers!==void 0&&(s.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let d=0;d<f.length;d++)s.add(this.parseObject(f[d],t,r,i,o))}if(e.animations!==void 0){const f=e.animations;for(let d=0;d<f.length;d++){const v=f[d];s.animations.push(o[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(s.autoUpdate=e.autoUpdate);const f=e.levels;for(let d=0;d<f.length;d++){const v=f[d],y=s.getObjectByProperty("uuid",v.object);y!==void 0&&s.addLevel(y,v.distance,v.hysteresis)}}return s}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=t[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const K$={UVMapping:Vw,CubeReflectionMapping:Ou,CubeRefractionMapping:df,EquirectangularReflectionMapping:ig,EquirectangularRefractionMapping:Iv,CubeUVReflectionMapping:_g},ZP={RepeatWrapping:Nv,ClampToEdgeWrapping:ps,MirroredRepeatWrapping:Fv},KP={NearestFilter:Gi,NearestMipmapNearestFilter:Yx,NearestMipmapLinearFilter:Z0,LinearFilter:ti,LinearMipmapNearestFilter:F3,LinearMipmapLinearFilter:pf};class J$ extends ra{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const o=this,s=Vd.get(e);if(s!==void 0)return o.manager.itemStart(e),setTimeout(function(){t&&t(s),o.manager.itemEnd(e)},0),s;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(o.options,{colorSpaceConversion:"none"}))}).then(function(l){Vd.add(e,l),t&&t(l),o.manager.itemEnd(e)}).catch(function(l){i&&i(l),o.manager.itemError(e),o.manager.itemEnd(e)}),o.manager.itemStart(e)}}let a2;class wA{static getContext(){return a2===void 0&&(a2=new(window.AudioContext||window.webkitAudioContext)),a2}static setContext(e){a2=e}}class Q$ extends ra{constructor(e){super(e)}load(e,t,r,i){const o=this,s=new zc(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(l){try{const u=l.slice(0);wA.getContext().decodeAudioData(u,function(h){t(h)},a)}catch(u){a(u)}},r,i);function a(l){i?i(l):console.error(l),o.manager.itemError(e)}}}class eq extends gS{constructor(e,t,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new Yt().set(e),o=new Yt().set(t),s=new ge(i.r,i.g,i.b),a=new ge(o.r,o.g,o.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(s).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(s).sub(a).multiplyScalar(u)}}class tq extends gS{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const r=new Yt().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const JP=new zn,QP=new zn,ed=new zn;class nq{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Si,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Si,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ed.copy(e.projectionMatrix);const i=t.eyeSep/2,o=i*t.near/t.focus,s=t.near*Math.tan(Ld*t.fov*.5)/t.zoom;let a,l;QP.elements[12]=-i,JP.elements[12]=i,a=-s*t.aspect+o,l=s*t.aspect+o,ed.elements[0]=2*t.near/(l-a),ed.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(ed),a=-s*t.aspect-o,l=s*t.aspect-o,ed.elements[0]=2*t.near/(l-a),ed.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(ed)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(QP),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(JP)}}class SA{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=eL(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=eL();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function eL(){return(typeof performance>"u"?Date:performance).now()}const td=new ge,tL=new ys,rq=new ge,nd=new ge;class iq extends cr{constructor(){super(),this.type="AudioListener",this.context=wA.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new SA}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(td,tL,rq),nd.set(0,0,-1).applyQuaternion(tL),t.positionX){const i=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(td.x,i),t.positionY.linearRampToValueAtTime(td.y,i),t.positionZ.linearRampToValueAtTime(td.z,i),t.forwardX.linearRampToValueAtTime(nd.x,i),t.forwardY.linearRampToValueAtTime(nd.y,i),t.forwardZ.linearRampToValueAtTime(nd.z,i),t.upX.linearRampToValueAtTime(r.x,i),t.upY.linearRampToValueAtTime(r.y,i),t.upZ.linearRampToValueAtTime(r.z,i)}else t.setPosition(td.x,td.y,td.z),t.setOrientation(nd.x,nd.y,nd.z,r.x,r.y,r.z)}}class d6 extends cr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const rd=new ge,nL=new ys,oq=new ge,id=new ge;class sq extends d6{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(rd,nL,oq),id.set(0,0,1).applyQuaternion(nL);const t=this.panner;if(t.positionX){const r=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(rd.x,r),t.positionY.linearRampToValueAtTime(rd.y,r),t.positionZ.linearRampToValueAtTime(rd.z,r),t.orientationX.linearRampToValueAtTime(id.x,r),t.orientationY.linearRampToValueAtTime(id.y,r),t.orientationZ.linearRampToValueAtTime(id.z,r)}else t.setPosition(rd.x,rd.y,rd.z),t.setOrientation(id.x,id.y,id.z)}}class aq{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let r=0;r<t.length;r++)e+=t[r];return e/t.length}}class p6{constructor(e,t,r){this.binding=e,this.valueSize=r;let i,o,s;switch(t){case"quaternion":i=this._slerp,o=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,o=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,o=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=o,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const r=this.buffer,i=this.valueSize,o=e*i+i;let s=this.cumulativeWeight;if(s===0){for(let a=0;a!==i;++a)r[o+a]=r[a];s=t}else{s+=t;const a=t/s;this._mixBufferRegion(r,o,0,a,i)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,r=this.buffer,i=e*t+t,o=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){const l=t*this._origIndex;this._mixBufferRegion(r,i,l,1-o,t)}s>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(r[l]!==r[l+t]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(t,i);for(let o=r,s=i;o!==s;++o)t[o]=t[i+o%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let r=e;r<t;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[t+r]=this.buffer[e+r]}_select(e,t,r,i,o){if(i>=.5)for(let s=0;s!==o;++s)e[t+s]=e[r+s]}_slerp(e,t,r,i){ys.slerpFlat(e,t,e,t,e,r,i)}_slerpAdditive(e,t,r,i,o){const s=this._workIndex*o;ys.multiplyQuaternionsFlat(e,s,e,t,e,r),ys.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,r,i,o){const s=1-i;for(let a=0;a!==o;++a){const l=t+a;e[l]=e[l]*s+e[r+a]*i}}_lerpAdditive(e,t,r,i,o){for(let s=0;s!==o;++s){const a=t+s;e[a]=e[a]+e[r+s]*i}}}const _A="\\[\\]\\.:\\/",lq=new RegExp("["+_A+"]","g"),bA="[^"+_A+"]",uq="[^"+_A.replace("\\.","")+"]",cq=/((?:WC+[\/:])*)/.source.replace("WC",bA),hq=/(WCOD+)?/.source.replace("WCOD",uq),fq=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",bA),dq=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",bA),pq=new RegExp("^"+cq+hq+fq+dq+"$"),mq=["material","materials","bones","map"];class gq{constructor(e,t,r){const i=r||hr.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,t)}setValue(e,t){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,o=r.length;i!==o;++i)r[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,r=e.length;t!==r;++t)e[t].unbind()}}class hr{constructor(e,t,r){this.path=t,this.parsedPath=r||hr.parseTrackName(t),this.node=hr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,r){return e&&e.isAnimationObjectGroup?new hr.Composite(e,t,r):new hr(e,t,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(lq,"")}static parseTrackName(e){const t=pq.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const o=r.nodeName.substring(i+1);mq.indexOf(o)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=o)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(t);if(r!==void 0)return r}if(e.children){const r=function(o){for(let s=0;s<o.length;s++){const a=o[s];if(a.name===t||a.uuid===t)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)e[t++]=r[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const r=this.resolvedProperty;for(let i=0,o=r.length;i!==o;++i)r[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,r=t.objectName,i=t.propertyName;let o=t.propertyIndex;if(e||(e=hr.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=t.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const s=e[i];if(s===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(o!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[o]!==void 0&&(o=e.morphTargetDictionary[o])}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=o}else s.fromArray!==void 0&&s.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}hr.Composite=gq;hr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};hr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};hr.prototype.GetterByBindingType=[hr.prototype._getValue_direct,hr.prototype._getValue_array,hr.prototype._getValue_arrayElement,hr.prototype._getValue_toArray];hr.prototype.SetterByBindingTypeAndVersioning=[[hr.prototype._setValue_direct,hr.prototype._setValue_direct_setNeedsUpdate,hr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[hr.prototype._setValue_array,hr.prototype._setValue_array_setNeedsUpdate,hr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[hr.prototype._setValue_arrayElement,hr.prototype._setValue_arrayElement_setNeedsUpdate,hr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[hr.prototype._setValue_fromArray,hr.prototype._setValue_fromArray_setNeedsUpdate,hr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class vq{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ba(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,r=this._paths,i=this._parsedPaths,o=this._bindings,s=o.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const f=arguments[c],d=f.uuid;let v=t[d];if(v===void 0){v=l++,t[d]=v,e.push(f);for(let y=0,w=s;y!==w;++y)o[y].push(new hr(f,r[y],i[y]))}else if(v<u){a=e[v];const y=--u,w=e[y];t[w.uuid]=v,e[v]=w,t[d]=y,e[y]=f;for(let g=0,x=s;g!==x;++g){const _=o[g],E=_[y];let C=_[v];_[v]=E,C===void 0&&(C=new hr(f,r[g],i[g])),_[y]=C}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const l=arguments[s],u=l.uuid,c=t[u];if(c!==void 0&&c>=o){const h=o++,f=e[h];t[f.uuid]=c,e[c]=f,t[u]=h,e[h]=l;for(let d=0,v=i;d!==v;++d){const y=r[d],w=y[h],g=y[c];y[c]=w,y[h]=g}}}this.nCachedObjects_=o}uncache(){const e=this._objects,t=this._indicesByUUID,r=this._bindings,i=r.length;let o=this.nCachedObjects_,s=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,h=t[c];if(h!==void 0)if(delete t[c],h<o){const f=--o,d=e[f],v=--s,y=e[v];t[d.uuid]=h,e[h]=d,t[y.uuid]=f,e[f]=y,e.pop();for(let w=0,g=i;w!==g;++w){const x=r[w],_=x[f],E=x[v];x[h]=_,x[f]=E,x.pop()}}else{const f=--s,d=e[f];f>0&&(t[d.uuid]=h),e[h]=d,e.pop();for(let v=0,y=i;v!==y;++v){const w=r[v];w[h]=w[f],w.pop()}}}this.nCachedObjects_=o}subscribe_(e,t){const r=this._bindingsIndicesByPath;let i=r[e];const o=this._bindings;if(i!==void 0)return o[i];const s=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,h=new Array(u);i=o.length,r[e]=i,s.push(e),a.push(t),o.push(h);for(let f=c,d=l.length;f!==d;++f){const v=l[f];h[f]=new hr(v,e,t)}return h}unsubscribe_(e){const t=this._bindingsIndicesByPath,r=t[e];if(r!==void 0){const i=this._paths,o=this._parsedPaths,s=this._bindings,a=s.length-1,l=s[a],u=e[a];t[u]=r,s[r]=l,s.pop(),o[r]=o[a],o.pop(),i[r]=i[a],i.pop()}}}class m6{constructor(e,t,r=null,i=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=r,this.blendMode=i;const o=t.tracks,s=o.length,a=new Array(s),l={endingStart:wd,endingEnd:wd};for(let u=0;u!==s;++u){const c=o[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=eF,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,r){if(e.fadeOut(t),this.fadeIn(t),r){const i=this._clip.duration,o=e._clip.duration,s=o/i,a=i/o;e.warp(1,s,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,r){return e.crossFadeFrom(this,t,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,r){const i=this._mixer,o=i.time,s=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=o,l[1]=o+r,u[0]=e/s,u[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,r,i){if(!this.enabled){this._updateWeight(e);return}const o=this._startTime;if(o!==null){const l=(e-o)*r;l<0||r===0?t=0:(this._startTime=null,t=r*l)}t*=this._updateTimeScale(e);const s=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case V3:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(s),u[c].accumulateAdditive(a);break;case jw:default:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(s),u[c].accumulate(i,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];t*=i,e>r.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,r=this.loop;let i=this.time+e,o=this._loopCount;const s=r===tF;if(e===0)return o===-1?i:s&&(o&1)===1?t-i:i;if(r===QN){o===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(o===-1&&(e>=0?(o=0,this._setEndings(!0,this.repetitions===0,s)):this._setEndings(this.repetitions===0,!0,s)),i>=t||i<0){const a=Math.floor(i/t);i-=t*a,o+=Math.abs(a);const l=this.repetitions-o;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,s)}else this._setEndings(!1,!1,s);this._loopCount=o,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(s&&(o&1)===1)return t-i}return i}_setEndings(e,t,r){const i=this._interpolantSettings;r?(i.endingStart=Sd,i.endingEnd=Sd):(e?i.endingStart=this.zeroSlopeAtStart?Sd:wd:i.endingStart=Bv,t?i.endingEnd=this.zeroSlopeAtEnd?Sd:wd:i.endingEnd=Bv)}_scheduleFading(e,t,r){const i=this._mixer,o=i.time;let s=this._weightInterpolant;s===null&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,l=s.sampleValues;return a[0]=o,l[0]=t,a[1]=o+e,l[1]=r,this}}const yq=new Float32Array(1);class xq extends Wc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const r=e._localRoot||this._root,i=e._clip.tracks,o=i.length,s=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let h=0;h!==o;++h){const f=i[h],d=f.name;let v=c[d];if(v!==void 0)++v.referenceCount,s[h]=v;else{if(v=s[h],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,d));continue}const y=t&&t._propertyBindings[h].binding.parsedPath;v=new p6(hr.create(r,d,y),f.ValueTypeName,f.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,d),s[h]=v}a[h].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,o=this._actionsByClip[i];this._bindAction(e,o&&o.knownActions[0]),this._addInactiveAction(e,i,r)}const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const o=t[r];o.useCount++===0&&(this._lendBinding(o),o.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const o=t[r];--o.useCount===0&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,r){const i=this._actions,o=this._actionsByClip;let s=o[t];if(s===void 0)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,o[t]=s;else{const a=s.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[r]=e}_removeInactiveAction(e){const t=this._actions,r=t[t.length-1],i=e._cacheIndex;r._cacheIndex=i,t[i]=r,t.pop(),e._cacheIndex=null;const o=e._clip.uuid,s=this._actionsByClip,a=s[o],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete h[f],l.length===0&&delete s[o],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let r=0,i=t.length;r!==i;++r){const o=t[r];--o.referenceCount===0&&this._removeInactiveBinding(o)}}_lendAction(e){const t=this._actions,r=e._cacheIndex,i=this._nActiveActions++,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_takeBackAction(e){const t=this._actions,r=e._cacheIndex,i=--this._nActiveActions,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_addInactiveBinding(e,t,r){const i=this._bindingsByRootAndName,o=this._bindings;let s=i[t];s===void 0&&(s={},i[t]=s),s[r]=e,e._cacheIndex=o.length,o.push(e)}_removeInactiveBinding(e){const t=this._bindings,r=e.binding,i=r.rootNode.uuid,o=r.path,s=this._bindingsByRootAndName,a=s[i],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[o],Object.keys(a).length===0&&delete s[i]}_lendBinding(e){const t=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_takeBackBinding(e){const t=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,o=t[i];e._cacheIndex=i,t[i]=e,o._cacheIndex=r,t[r]=o}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let r=e[t];return r===void 0&&(r=new dA(new Float32Array(2),new Float32Array(2),1,yq),r.__cacheIndex=t,e[t]=r),r}_takeBackControlInterpolant(e){const t=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,o=t[i];e.__cacheIndex=i,t[i]=e,o.__cacheIndex=r,t[r]=o}clipAction(e,t,r){const i=t||this._root,o=i.uuid;let s=typeof e=="string"?Xv.findByName(i,e):e;const a=s!==null?s.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(s!==null?r=s.blendMode:r=jw),l!==void 0){const h=l.actionByRoot[o];if(h!==void 0&&h.blendMode===r)return h;u=l.knownActions[0],s===null&&(s=u._clip)}if(s===null)return null;const c=new m6(this,s,t,r);return this._bindAction(c,u),this._addInactiveAction(c,a,o),c}existingAction(e,t){const r=t||this._root,i=r.uuid,o=typeof e=="string"?Xv.findByName(r,e):e,s=o?o.uuid:e,a=this._actionsByClip[s];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let r=t-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const t=this._actions,r=this._nActiveActions,i=this.time+=e,o=Math.sign(e),s=this._accuIndex^=1;for(let u=0;u!==r;++u)t[u]._update(i,e,o,s);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,r=e.uuid,i=this._actionsByClip,o=i[r];if(o!==void 0){const s=o.knownActions;for(let a=0,l=s.length;a!==l;++a){const u=s[a];this._deactivateAction(u);const c=u._cacheIndex,h=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=c,t[c]=h,t.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const t=e.uuid,r=this._actionsByClip;for(const s in r){const a=r[s].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,o=i[t];if(o!==void 0)for(const s in o){const a=o[s];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const r=this.existingAction(e,t);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class MA{constructor(e){this.value=e}clone(){return new MA(this.value.clone===void 0?this.value:this.value.clone())}}let wq=0;class Sq extends Wc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:wq++}),this.name="",this.usage=Uv,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let r=0,i=t.length;r<i;r++)this.uniforms.push(t[r].clone());return this}clone(){return new this.constructor().copy(this)}}class _q extends Jw{constructor(e,t,r=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class bq{constructor(e,t,r,i,o){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=r,this.elementSize=i,this.count=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class EA{constructor(e,t,r=0,i=1/0){this.ray=new Qd(e,t),this.near=r,this.far=i,this.camera=null,this.layers=new Rd,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,r=[]){return UM(e,this,r,t),r.sort(rL),r}intersectObjects(e,t=!0,r=[]){for(let i=0,o=e.length;i<o;i++)UM(e[i],this,r,t);return r.sort(rL),r}}function rL(n,e){return n.distance-e.distance}function UM(n,e,t,r){if(n.layers.test(e.layers)&&n.raycast(e,t),r===!0){const i=n.children;for(let o=0,s=i.length;o<s;o++)UM(i[o],e,t,!0)}}class zM{constructor(e=1,t=0,r=0){return this.radius=e,this.phi=t,this.theta=r,this}set(e,t,r){return this.radius=e,this.phi=t,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+t*t+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Ii(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Mq{constructor(e=1,t=0,r=0){return this.radius=e,this.theta=t,this.y=r,this}set(e,t,r){return this.radius=e,this.theta=t,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=t,this}clone(){return new this.constructor().copy(this)}}const iL=new gt;class Eq{constructor(e=new gt(1/0,1/0),t=new gt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,r=e.length;t<r;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const r=iL.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,iL).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const oL=new ge,l2=new ge;class Aq{constructor(e=new ge,t=new ge){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){oL.subVectors(e,this.start),l2.subVectors(this.end,this.start);const r=l2.dot(l2);let o=l2.dot(oL)/r;return t&&(o=Ii(o,0,1)),o}closestPointToPoint(e,t,r){const i=this.closestPointToPointParameter(e,t);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const sL=new ge;class Tq extends cr{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const r=new Rn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,l=32;s<l;s++,a++){const u=s/l*Math.PI*2,c=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new tn(i,3));const o=new Ss({fog:!1,toneMapped:!1});this.cone=new Kl(r,o),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),sL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(sL),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Mh=new ge,u2=new zn,tb=new zn;class Cq extends Kl{constructor(e){const t=g6(e),r=new Rn,i=[],o=[],s=new Yt(0,0,1),a=new Yt(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),o.push(s.r,s.g,s.b),o.push(a.r,a.g,a.b))}r.setAttribute("position",new tn(i,3)),r.setAttribute("color",new tn(o,3));const l=new Ss({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,r=this.geometry,i=r.getAttribute("position");tb.copy(this.root.matrixWorld).invert();for(let o=0,s=0;o<t.length;o++){const a=t[o];a.parent&&a.parent.isBone&&(u2.multiplyMatrices(tb,a.matrixWorld),Mh.setFromMatrixPosition(u2),i.setXYZ(s,Mh.x,Mh.y,Mh.z),u2.multiplyMatrices(tb,a.parent.matrixWorld),Mh.setFromMatrixPosition(u2),i.setXYZ(s+1,Mh.x,Mh.y,Mh.z),s+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function g6(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,g6(n.children[t]));return e}class Pq extends po{constructor(e,t,r){const i=new E1(t,4,2),o=new Af({wireframe:!0,fog:!1,toneMapped:!1});super(i,o),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Lq=new ge,aL=new Yt,lL=new Yt;class Rq extends cr{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new M1(t);i.rotateY(Math.PI*.5),this.material=new Af({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const o=i.getAttribute("position"),s=new Float32Array(o.count*3);i.setAttribute("color",new _r(s,3)),this.add(new po(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");aL.copy(this.light.color),lL.copy(this.light.groundColor);for(let r=0,i=t.count;r<i;r++){const o=r<i/2?aL:lL;t.setXYZ(r,o.r,o.g,o.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Lq.setFromMatrixPosition(this.light.matrixWorld).negate())}}class kq extends Kl{constructor(e=10,t=10,r=4473924,i=8947848){r=new Yt(r),i=new Yt(i);const o=t/2,s=e/t,a=e/2,l=[],u=[];for(let f=0,d=0,v=-a;f<=t;f++,v+=s){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const y=f===o?r:i;y.toArray(u,d),d+=3,y.toArray(u,d),d+=3,y.toArray(u,d),d+=3,y.toArray(u,d),d+=3}const c=new Rn;c.setAttribute("position",new tn(l,3)),c.setAttribute("color",new tn(u,3));const h=new Ss({vertexColors:!0,toneMapped:!1});super(c,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Iq extends Kl{constructor(e=10,t=16,r=8,i=64,o=4473924,s=8947848){o=new Yt(o),s=new Yt(s);const a=[],l=[];if(t>1)for(let h=0;h<t;h++){const f=h/t*(Math.PI*2),d=Math.sin(f)*e,v=Math.cos(f)*e;a.push(0,0,0),a.push(d,0,v);const y=h&1?o:s;l.push(y.r,y.g,y.b),l.push(y.r,y.g,y.b)}for(let h=0;h<r;h++){const f=h&1?o:s,d=e-e/r*h;for(let v=0;v<i;v++){let y=v/i*(Math.PI*2),w=Math.sin(y)*d,g=Math.cos(y)*d;a.push(w,0,g),l.push(f.r,f.g,f.b),y=(v+1)/i*(Math.PI*2),w=Math.sin(y)*d,g=Math.cos(y)*d,a.push(w,0,g),l.push(f.r,f.g,f.b)}}const u=new Rn;u.setAttribute("position",new tn(a,3)),u.setAttribute("color",new tn(l,3));const c=new Ss({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const uL=new ge,c2=new ge,cL=new ge;class Nq extends cr{constructor(e,t,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",t===void 0&&(t=1);let i=new Rn;i.setAttribute("position",new tn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const o=new Ss({fog:!1,toneMapped:!1});this.lightPlane=new mf(i,o),this.add(this.lightPlane),i=new Rn,i.setAttribute("position",new tn([0,0,0,0,0,1],3)),this.targetLine=new mf(i,o),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),uL.setFromMatrixPosition(this.light.matrixWorld),c2.setFromMatrixPosition(this.light.target.matrixWorld),cL.subVectors(c2,uL),this.lightPlane.lookAt(c2),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(c2),this.targetLine.scale.z=cL.length()}}const h2=new ge,Li=new x1;class Fq extends Kl{constructor(e){const t=new Rn,r=new Ss({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],o=[],s={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,y){l(v),l(y)}function l(v){i.push(0,0,0),o.push(0,0,0),s[v]===void 0&&(s[v]=[]),s[v].push(i.length/3-1)}t.setAttribute("position",new tn(i,3)),t.setAttribute("color",new tn(o,3)),super(t,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const u=new Yt(16755200),c=new Yt(16711680),h=new Yt(43775),f=new Yt(16777215),d=new Yt(3355443);this.setColors(u,c,h,f,d)}setColors(e,t,r,i,o){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,o.r,o.g,o.b),a.setXYZ(41,o.r,o.g,o.b),a.setXYZ(42,o.r,o.g,o.b),a.setXYZ(43,o.r,o.g,o.b),a.setXYZ(44,o.r,o.g,o.b),a.setXYZ(45,o.r,o.g,o.b),a.setXYZ(46,o.r,o.g,o.b),a.setXYZ(47,o.r,o.g,o.b),a.setXYZ(48,o.r,o.g,o.b),a.setXYZ(49,o.r,o.g,o.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,r=1,i=1;Li.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Hi("c",t,e,Li,0,0,-1),Hi("t",t,e,Li,0,0,1),Hi("n1",t,e,Li,-r,-i,-1),Hi("n2",t,e,Li,r,-i,-1),Hi("n3",t,e,Li,-r,i,-1),Hi("n4",t,e,Li,r,i,-1),Hi("f1",t,e,Li,-r,-i,1),Hi("f2",t,e,Li,r,-i,1),Hi("f3",t,e,Li,-r,i,1),Hi("f4",t,e,Li,r,i,1),Hi("u1",t,e,Li,r*.7,i*1.1,-1),Hi("u2",t,e,Li,-r*.7,i*1.1,-1),Hi("u3",t,e,Li,0,i*2,-1),Hi("cf1",t,e,Li,-r,0,1),Hi("cf2",t,e,Li,r,0,1),Hi("cf3",t,e,Li,0,-i,1),Hi("cf4",t,e,Li,0,i,1),Hi("cn1",t,e,Li,-r,0,-1),Hi("cn2",t,e,Li,r,0,-1),Hi("cn3",t,e,Li,0,-i,-1),Hi("cn4",t,e,Li,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Hi(n,e,t,r,i,o,s){h2.set(i,o,s).unproject(r);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],h2.x,h2.y,h2.z)}}const f2=new zu;class Dq extends Kl{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),o=new Rn;o.setIndex(new _r(r,1)),o.setAttribute("position",new _r(i,3)),super(o,new Ss({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&f2.setFromObject(this.object),f2.isEmpty())return;const t=f2.min,r=f2.max,i=this.geometry.attributes.position,o=i.array;o[0]=r.x,o[1]=r.y,o[2]=r.z,o[3]=t.x,o[4]=r.y,o[5]=r.z,o[6]=t.x,o[7]=t.y,o[8]=r.z,o[9]=r.x,o[10]=t.y,o[11]=r.z,o[12]=r.x,o[13]=r.y,o[14]=t.z,o[15]=t.x,o[16]=r.y,o[17]=t.z,o[18]=t.x,o[19]=t.y,o[20]=t.z,o[21]=r.x,o[22]=t.y,o[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Oq extends Kl{constructor(e,t=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Rn;o.setIndex(new _r(r,1)),o.setAttribute("position",new tn(i,3)),super(o,new Ss({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Bq extends mf{constructor(e,t=1,r=16776960){const i=r,o=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],s=new Rn;s.setAttribute("position",new tn(o,3)),s.computeBoundingSphere(),super(s,new Ss({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Rn;l.setAttribute("position",new tn(a,3)),l.computeBoundingSphere(),this.add(new po(l,new Af({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const hL=new ge;let d2,nb;class Uq extends cr{constructor(e=new ge(0,0,1),t=new ge(0,0,0),r=1,i=16776960,o=r*.2,s=o*.2){super(),this.type="ArrowHelper",d2===void 0&&(d2=new Rn,d2.setAttribute("position",new tn([0,0,0,0,1,0],3)),nb=new Mg(0,.5,1,5,1),nb.translate(0,-.5,0)),this.position.copy(t),this.line=new mf(d2,new Ss({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new po(nb,new Af({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,o,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{hL.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(hL,t)}}setLength(e,t=e*.2,r=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(r,t,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class zq extends Kl{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Rn;i.setAttribute("position",new tn(t,3)),i.setAttribute("color",new tn(r,3));const o=new Ss({vertexColors:!0,toneMapped:!1});super(i,o),this.type="AxesHelper"}setColors(e,t,r){const i=new Yt,o=this.geometry.attributes.color.array;return i.set(e),i.toArray(o,0),i.toArray(o,3),i.set(t),i.toArray(o,6),i.toArray(o,9),i.set(r),i.toArray(o,12),i.toArray(o,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Hq{constructor(){this.type="ShapePath",this.color=new Yt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Gv,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,r,i){return this.currentPath.quadraticCurveTo(e,t,r,i),this}bezierCurveTo(e,t,r,i,o,s){return this.currentPath.bezierCurveTo(e,t,r,i,o,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(g){const x=[];for(let _=0,E=g.length;_<E;_++){const C=g[_],I=new kd;I.curves=C.curves,x.push(I)}return x}function r(g,x){const _=x.length;let E=!1;for(let C=_-1,I=0;I<_;C=I++){let R=x[C],L=x[I],k=L.x-R.x,D=L.y-R.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(R=x[I],k=-k,L=x[C],D=-D),g.y<R.y||g.y>L.y)continue;if(g.y===R.y){if(g.x===R.x)return!0}else{const N=D*(g.x-R.x)-k*(g.y-R.y);if(N===0)return!0;if(N<0)continue;E=!E}}else{if(g.y!==R.y)continue;if(L.x<=g.x&&g.x<=R.x||R.x<=g.x&&g.x<=L.x)return!0}}return E}const i=Nu.isClockWise,o=this.subPaths;if(o.length===0)return[];let s,a,l;const u=[];if(o.length===1)return a=o[0],l=new kd,l.curves=a.curves,u.push(l),u;let c=!i(o[0].getPoints());c=e?!c:c;const h=[],f=[];let d=[],v=0,y;f[v]=void 0,d[v]=[];for(let g=0,x=o.length;g<x;g++)a=o[g],y=a.getPoints(),s=i(y),s=e?!s:s,s?(!c&&f[v]&&v++,f[v]={s:new kd,p:y},f[v].s.curves=a.curves,c&&v++,d[v]=[]):d[v].push({h:a,p:y[0]});if(!f[0])return t(o);if(f.length>1){let g=!1,x=0;for(let _=0,E=f.length;_<E;_++)h[_]=[];for(let _=0,E=f.length;_<E;_++){const C=d[_];for(let I=0;I<C.length;I++){const R=C[I];let L=!0;for(let k=0;k<f.length;k++)r(R.p,f[k].p)&&(_!==k&&x++,L?(L=!1,h[k].push(R)):g=!0);L&&h[_].push(R)}}x>0&&g===!1&&(d=h)}let w;for(let g=0,x=f.length;g<x;g++){l=f[g].s,u.push(l),w=d[g];for(let _=0,E=w.length;_<E;_++)l.holes.push(w[_].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:g1}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=g1);const Gq=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:N3,AddEquation:dd,AddOperation:zN,AdditiveAnimationBlendMode:V3,AdditiveBlending:nM,AlphaFormat:qN,AlwaysCompare:dF,AlwaysDepth:IN,AlwaysStencilFunc:oF,AmbientLight:xA,AmbientLightProbe:tq,AnimationAction:m6,AnimationClip:Xv,AnimationLoader:W$,AnimationMixer:xq,AnimationObjectGroup:vq,AnimationUtils:z$,ArcCurve:OF,ArrayCamera:TF,ArrowHelper:Uq,Audio:d6,AudioAnalyser:aq,AudioContext:wA,AudioListener:iq,AudioLoader:Q$,AxesHelper:zq,BackSide:Ns,BasicDepthPacking:nF,BasicShadowMap:xN,Bone:nA,BooleanKeyframeTrack:tp,Box2:Eq,Box3:zu,Box3Helper:Oq,BoxGeometry:ep,BoxHelper:Dq,BufferAttribute:_r,BufferGeometry:Rn,BufferGeometryLoader:f6,ByteType:jN,Cache:Vd,Camera:x1,CameraHelper:Fq,CanvasTexture:c$,CapsuleGeometry:rS,CatmullRomCurve3:BF,CineonToneMapping:VN,CircleGeometry:iS,ClampToEdgeWrapping:ps,Clock:SA,Color:Yt,ColorKeyframeTrack:pA,ColorManagement:Ka,CompressedArrayTexture:l$,CompressedCubeTexture:u$,CompressedTexture:eS,CompressedTextureLoader:j$,ConeGeometry:oS,CubeCamera:wF,CubeReflectionMapping:Ou,CubeRefractionMapping:df,CubeTexture:w1,CubeTextureLoader:s6,CubeUVReflectionMapping:_g,CubicBezierCurve:oA,CubicBezierCurve3:UF,CubicInterpolant:n6,CullFaceBack:tM,CullFaceFront:yN,CullFaceFrontBack:rH,CullFaceNone:vN,Curve:Jl,CurvePath:HF,CustomBlending:wN,CustomToneMapping:WN,CylinderGeometry:Mg,Cylindrical:Mq,Data3DTexture:X3,DataArrayTexture:$w,DataTexture:zm,DataTextureLoader:gA,DataUtils:bd,DecrementStencilOp:mH,DecrementWrapStencilOp:vH,DefaultLoadingManager:o6,DepthFormat:af,DepthStencilFormat:zd,DepthTexture:CF,DirectionalLight:Jx,DirectionalLightHelper:Nq,DiscreteInterpolant:r6,DisplayP3ColorSpace:j3,DodecahedronGeometry:sS,DoubleSide:Ol,DstAlphaFactor:TN,DstColorFactor:PN,DynamicCopyUsage:kH,DynamicDrawUsage:AH,DynamicReadUsage:PH,EdgesGeometry:cA,EllipseCurve:tS,EqualCompare:lF,EqualDepth:FN,EqualStencilFunc:SH,EquirectangularReflectionMapping:ig,EquirectangularRefractionMapping:Iv,Euler:y1,EventDispatcher:Wc,ExtrudeGeometry:lS,FileLoader:zc,Float16BufferAttribute:S9,Float32BufferAttribute:tn,Float64BufferAttribute:_9,FloatType:vs,Fog:Kw,FogExp2:Zw,FramebufferTexture:a$,FrontSide:Uc,Frustum:qw,GLBufferAttribute:bq,GLSL1:NH,GLSL3:LM,GreaterCompare:cF,GreaterDepth:ON,GreaterEqualCompare:fF,GreaterEqualDepth:DN,GreaterEqualStencilFunc:EH,GreaterStencilFunc:bH,GridHelper:kq,Group:Pm,HalfFloatType:Rs,HemisphereLight:vA,HemisphereLightHelper:Rq,HemisphereLightProbe:eq,IcosahedronGeometry:b1,ImageBitmapLoader:J$,ImageLoader:Yv,ImageUtils:q3,IncrementStencilOp:pH,IncrementWrapStencilOp:gH,InstancedBufferAttribute:lg,InstancedBufferGeometry:h6,InstancedInterleavedBuffer:_q,InstancedMesh:NF,Int16BufferAttribute:x9,Int32BufferAttribute:w9,Int8BufferAttribute:g9,IntType:D3,InterleavedBuffer:Jw,InterleavedBufferAttribute:Hd,Interpolant:A1,InterpolateDiscrete:Dv,InterpolateLinear:Ov,InterpolateSmooth:ix,InvertStencilOp:yH,KeepStencilOp:ox,KeyframeTrack:Ql,LOD:kF,LatheGeometry:_1,Layers:Rd,LessCompare:aF,LessDepth:NN,LessEqualCompare:uF,LessEqualDepth:Xx,LessEqualStencilFunc:_H,LessStencilFunc:wH,Light:Cf,LightProbe:gS,Line:mf,Line3:Aq,LineBasicMaterial:Ss,LineCurve:nS,LineCurve3:zF,LineDashedMaterial:e6,LineLoop:FF,LineSegments:Kl,LinearEncoding:W3,LinearFilter:ti,LinearInterpolant:dA,LinearMipMapLinearFilter:lH,LinearMipMapNearestFilter:aH,LinearMipmapLinearFilter:pf,LinearMipmapNearestFilter:F3,LinearSRGBColorSpace:Wl,LinearToneMapping:HN,Loader:ra,LoaderUtils:BM,LoadingManager:mA,LoopOnce:QN,LoopPingPong:tF,LoopRepeat:eF,LuminanceAlphaFormat:YN,LuminanceFormat:XN,MOUSE:wu,Material:Zo,MaterialLoader:vS,MathUtils:XH,Matrix3:Yn,Matrix4:zn,MaxEquation:sM,Mesh:po,MeshBasicMaterial:Af,MeshDepthMaterial:Q3,MeshDistanceMaterial:eA,MeshLambertMaterial:JF,MeshMatcapMaterial:QF,MeshNormalMaterial:KF,MeshPhongMaterial:YF,MeshPhysicalMaterial:XF,MeshStandardMaterial:mS,MeshToonMaterial:ZF,MinEquation:oM,MirroredRepeatWrapping:Fv,MixOperation:UN,MultiplyBlending:iM,MultiplyOperation:v1,NearestFilter:Gi,NearestMipMapLinearFilter:sH,NearestMipMapNearestFilter:oH,NearestMipmapLinearFilter:Z0,NearestMipmapNearestFilter:Yx,NeverCompare:sF,NeverDepth:kN,NeverStencilFunc:xH,NoBlending:kc,NoColorSpace:uf,NoToneMapping:Ru,NormalAnimationBlendMode:jw,NormalBlending:Pd,NotEqualCompare:hF,NotEqualDepth:BN,NotEqualStencilFunc:MH,NumberKeyframeTrack:$v,Object3D:cr,ObjectLoader:Z$,ObjectSpaceNormalMap:iF,OctahedronGeometry:M1,OneFactor:MN,OneMinusDstAlphaFactor:CN,OneMinusDstColorFactor:LN,OneMinusSrcAlphaFactor:I3,OneMinusSrcColorFactor:AN,OrthographicCamera:Iu,PCFShadowMap:Gw,PCFSoftShadowMap:Y0,PMREMGenerator:kM,Path:Gv,PerspectiveCamera:Si,Plane:yc,PlaneGeometry:S1,PlaneHelper:Bq,PointLight:l6,PointLightHelper:Pq,Points:DF,PointsMaterial:rA,PolarGridHelper:Iq,PolyhedronGeometry:Tf,PositionalAudio:sq,PropertyBinding:hr,PropertyMixer:p6,QuadraticBezierCurve:sA,QuadraticBezierCurve3:aA,Quaternion:ys,QuaternionKeyframeTrack:Eg,QuaternionLinearInterpolant:i6,RED_GREEN_RGTC2_Format:CM,RED_RGTC1_Format:JN,REVISION:g1,RGBADepthPacking:rF,RGBAFormat:Ls,RGBAIntegerFormat:G3,RGBA_ASTC_10x10_Format:MM,RGBA_ASTC_10x5_Format:SM,RGBA_ASTC_10x6_Format:_M,RGBA_ASTC_10x8_Format:bM,RGBA_ASTC_12x10_Format:EM,RGBA_ASTC_12x12_Format:AM,RGBA_ASTC_4x4_Format:dM,RGBA_ASTC_5x4_Format:pM,RGBA_ASTC_5x5_Format:mM,RGBA_ASTC_6x5_Format:gM,RGBA_ASTC_6x6_Format:vM,RGBA_ASTC_8x5_Format:yM,RGBA_ASTC_8x6_Format:xM,RGBA_ASTC_8x8_Format:wM,RGBA_BPTC_Format:rx,RGBA_ETC2_EAC_Format:fM,RGBA_PVRTC_2BPPV1_Format:cM,RGBA_PVRTC_4BPPV1_Format:uM,RGBA_S3TC_DXT1_Format:ex,RGBA_S3TC_DXT3_Format:tx,RGBA_S3TC_DXT5_Format:nx,RGB_ETC1_Format:KN,RGB_ETC2_Format:hM,RGB_PVRTC_2BPPV1_Format:lM,RGB_PVRTC_4BPPV1_Format:aM,RGB_S3TC_DXT1_Format:Q2,RGFormat:ZN,RGIntegerFormat:H3,RawShaderMaterial:qF,Ray:Qd,Raycaster:EA,RectAreaLight:u6,RedFormat:U3,RedIntegerFormat:z3,ReinhardToneMapping:GN,RenderTarget:gF,RepeatWrapping:Nv,ReplaceStencilOp:dH,ReverseSubtractEquation:_N,RingGeometry:uS,SIGNED_RED_GREEN_RGTC2_Format:PM,SIGNED_RED_RGTC1_Format:TM,SRGBColorSpace:Gn,Scene:ag,ShaderChunk:$n,ShaderLib:Fl,ShaderMaterial:$l,ShadowMaterial:$F,Shape:kd,ShapeGeometry:cS,ShapePath:Hq,ShapeUtils:Nu,ShortType:$N,Skeleton:Qw,SkeletonHelper:Cq,SkinnedMesh:IF,Source:_d,Sphere:Zl,SphereGeometry:E1,Spherical:zM,SphericalHarmonics3:c6,SplineCurve:lA,SpotLight:a6,SpotLightHelper:Tq,Sprite:RF,SpriteMaterial:tA,SrcAlphaFactor:k3,SrcAlphaSaturateFactor:RN,SrcColorFactor:EN,StaticCopyUsage:RH,StaticDrawUsage:Uv,StaticReadUsage:CH,StereoCamera:nq,StreamCopyUsage:IH,StreamDrawUsage:TH,StreamReadUsage:LH,StringKeyframeTrack:np,SubtractEquation:SN,SubtractiveBlending:rM,TOUCH:vc,TangentSpaceNormalMap:Ef,TetrahedronGeometry:hS,Texture:Fi,TextureLoader:$$,TorusGeometry:fS,TorusKnotGeometry:dS,Triangle:Ks,TriangleFanDrawMode:hH,TriangleStripDrawMode:cH,TrianglesDrawMode:uH,TubeGeometry:pS,TwoPassDoubleSide:iH,UVMapping:Vw,Uint16BufferAttribute:Y3,Uint32BufferAttribute:Z3,Uint8BufferAttribute:v9,Uint8ClampedBufferAttribute:y9,Uniform:MA,UniformsGroup:Sq,UniformsLib:zt,UniformsUtils:xF,UnsignedByteType:ku,UnsignedInt248Type:sf,UnsignedIntType:Mc,UnsignedShort4444Type:O3,UnsignedShort5551Type:B3,UnsignedShortType:Ww,VSMShadowMap:Rl,Vector2:gt,Vector3:ge,Vector4:Nr,VectorKeyframeTrack:qv,VideoTexture:s$,WebGL1Renderer:PF,WebGL3DRenderTarget:o9,WebGLArrayRenderTarget:i9,WebGLCoordinateSystem:Mu,WebGLCubeRenderTarget:K3,WebGLMultipleRenderTargets:s9,WebGLRenderTarget:jl,WebGLRenderer:Yw,WebGLUtils:AF,WebGPUCoordinateSystem:zv,WireframeGeometry:jF,WrapAroundEnding:Bv,ZeroCurvatureEnding:wd,ZeroFactor:bN,ZeroSlopeEnding:Sd,ZeroStencilOp:fH,_SRGBAFormat:Zx,sRGBEncoding:lf},Symbol.toStringTag,{value:"Module"}));var Wh={},Vq={get exports(){return Wh},set exports(n){Wh=n}},rp={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */rp.ConcurrentRoot=1;rp.ContinuousEventPriority=4;rp.DefaultEventPriority=16;rp.DiscreteEventPriority=1;rp.IdleEventPriority=536870912;rp.LegacyRoot=0;(function(n){n.exports=rp})(Vq);function Wq(n){let e;const t=new Set,r=(u,c)=>{const h=typeof u=="function"?u(e):u;if(h!==e){const f=e;e=c?h:Object.assign({},e,h),t.forEach(d=>d(e,f))}},i=()=>e,o=(u,c=i,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=c(e);function d(){const v=c(e);if(!h(f,v)){const y=f;u(f=v,y)}}return t.add(d),()=>t.delete(d)},l={setState:r,getState:i,subscribe:(u,c,h)=>c||h?o(u,c,h):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(r,i,l),l}const jq=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),fL=jq?pe.useEffect:pe.useLayoutEffect;function v6(n){const e=typeof n=="function"?Wq(n):n,t=(r=e.getState,i=Object.is)=>{const[,o]=pe.useReducer(w=>w+1,0),s=e.getState(),a=pe.useRef(s),l=pe.useRef(r),u=pe.useRef(i),c=pe.useRef(!1),h=pe.useRef();h.current===void 0&&(h.current=r(s));let f,d=!1;(a.current!==s||l.current!==r||u.current!==i||c.current)&&(f=r(s),d=!i(h.current,f)),fL(()=>{d&&(h.current=f),a.current=s,l.current=r,u.current=i,c.current=!1});const v=pe.useRef(s);fL(()=>{const w=()=>{try{const x=e.getState(),_=l.current(x);u.current(h.current,_)||(a.current=x,h.current=_,o())}catch{c.current=!0,o()}},g=e.subscribe(w);return e.getState()!==v.current&&w(),g},[]);const y=d?f:h.current;return pe.useDebugValue(y),y};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[t,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},t}var HM={},$q={get exports(){return HM},set exports(n){HM=n}},Zv={},qq={get exports(){return Zv},set exports(n){Zv=n}},y6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(H,q){var Z=H.length;H.push(q);e:for(;0<Z;){var oe=Z-1>>>1,F=H[oe];if(0<i(F,q))H[oe]=q,H[Z]=F,Z=oe;else break e}}function t(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var q=H[0],Z=H.pop();if(Z!==q){H[0]=Z;e:for(var oe=0,F=H.length,j=F>>>1;oe<j;){var Q=2*(oe+1)-1,se=H[Q],fe=Q+1,we=H[fe];if(0>i(se,Z))fe<F&&0>i(we,se)?(H[oe]=we,H[fe]=Z,oe=fe):(H[oe]=se,H[Q]=Z,oe=Q);else if(fe<F&&0>i(we,Z))H[oe]=we,H[fe]=Z,oe=fe;else break e}}return q}function i(H,q){var Z=H.sortIndex-q.sortIndex;return Z!==0?Z:H.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var l=[],u=[],c=1,h=null,f=3,d=!1,v=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(H){for(var q=t(u);q!==null;){if(q.callback===null)r(u);else if(q.startTime<=H)r(u),q.sortIndex=q.expirationTime,e(l,q);else break;q=t(u)}}function E(H){if(y=!1,_(H),!v)if(t(l)!==null)v=!0,J(C);else{var q=t(u);q!==null&&le(E,q.startTime-H)}}function C(H,q){v=!1,y&&(y=!1,g(L),L=-1),d=!0;var Z=f;try{for(_(q),h=t(l);h!==null&&(!(h.expirationTime>q)||H&&!N());){var oe=h.callback;if(typeof oe=="function"){h.callback=null,f=h.priorityLevel;var F=oe(h.expirationTime<=q);q=n.unstable_now(),typeof F=="function"?h.callback=F:h===t(l)&&r(l),_(q)}else r(l);h=t(l)}if(h!==null)var j=!0;else{var Q=t(u);Q!==null&&le(E,Q.startTime-q),j=!1}return j}finally{h=null,f=Z,d=!1}}var I=!1,R=null,L=-1,k=5,D=-1;function N(){return!(n.unstable_now()-D<k)}function B(){if(R!==null){var H=n.unstable_now();D=H;var q=!0;try{q=R(!0,H)}finally{q?G():(I=!1,R=null)}}else I=!1}var G;if(typeof x=="function")G=function(){x(B)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,$=V.port2;V.port1.onmessage=B,G=function(){$.postMessage(null)}}else G=function(){w(B,0)};function J(H){R=H,I||(I=!0,G())}function le(H,q){L=w(function(){H(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(H){H.callback=null},n.unstable_continueExecution=function(){v||d||(v=!0,J(C))},n.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<H?Math.floor(1e3/H):5},n.unstable_getCurrentPriorityLevel=function(){return f},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(H){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var Z=f;f=q;try{return H()}finally{f=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(H,q){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Z=f;f=H;try{return q()}finally{f=Z}},n.unstable_scheduleCallback=function(H,q,Z){var oe=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?oe+Z:oe):Z=oe,H){case 1:var F=-1;break;case 2:F=250;break;case 5:F=1073741823;break;case 4:F=1e4;break;default:F=5e3}return F=Z+F,H={id:c++,callback:q,priorityLevel:H,startTime:Z,expirationTime:F,sortIndex:-1},Z>oe?(H.sortIndex=Z,e(u,H),t(l)===null&&H===t(u)&&(y?(g(L),L=-1):y=!0,le(E,Z-oe))):(H.sortIndex=F,e(l,H),v||d||(v=!0,J(C))),H},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(H){var q=f;return function(){var Z=f;f=q;try{return H.apply(this,arguments)}finally{f=Z}}}})(y6);(function(n){n.exports=y6})(qq);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xq=function(e){var t={},r=pe,i=Zv,o=Object.assign;function s(p){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+p,b=1;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),v=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),C=Symbol.iterator;function I(p){return p===null||typeof p!="object"?null:(p=C&&p[C]||p["@@iterator"],typeof p=="function"?p:null)}function R(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case c:return"Fragment";case u:return"Portal";case f:return"Profiler";case h:return"StrictMode";case w:return"Suspense";case g:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case v:return(p.displayName||"Context")+".Consumer";case d:return(p._context.displayName||"Context")+".Provider";case y:var m=p.render;return p=p.displayName,p||(p=m.displayName||m.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case x:return m=p.displayName||null,m!==null?m:R(p.type)||"Memo";case _:m=p._payload,p=p._init;try{return R(p(m))}catch{}}return null}function L(p){var m=p.type;switch(p.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=m.render,p=p.displayName||p.name||"",m.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return R(m);case 8:return m===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function k(p){var m=p,b=p;if(p.alternate)for(;m.return;)m=m.return;else{p=m;do m=p,m.flags&4098&&(b=m.return),p=m.return;while(p)}return m.tag===3?b:null}function D(p){if(k(p)!==p)throw Error(s(188))}function N(p){var m=p.alternate;if(!m){if(m=k(p),m===null)throw Error(s(188));return m!==p?null:p}for(var b=p,A=m;;){var O=b.return;if(O===null)break;var W=O.alternate;if(W===null){if(A=O.return,A!==null){b=A;continue}break}if(O.child===W.child){for(W=O.child;W;){if(W===b)return D(O),p;if(W===A)return D(O),m;W=W.sibling}throw Error(s(188))}if(b.return!==A.return)b=O,A=W;else{for(var Me=!1,Oe=O.child;Oe;){if(Oe===b){Me=!0,b=O,A=W;break}if(Oe===A){Me=!0,A=O,b=W;break}Oe=Oe.sibling}if(!Me){for(Oe=W.child;Oe;){if(Oe===b){Me=!0,b=W,A=O;break}if(Oe===A){Me=!0,A=W,b=O;break}Oe=Oe.sibling}if(!Me)throw Error(s(189))}}if(b.alternate!==A)throw Error(s(190))}if(b.tag!==3)throw Error(s(188));return b.stateNode.current===b?p:m}function B(p){return p=N(p),p!==null?G(p):null}function G(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var m=G(p);if(m!==null)return m;p=p.sibling}return null}function V(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){if(p.tag!==4){var m=V(p);if(m!==null)return m}p=p.sibling}return null}var $=Array.isArray,J=e.getPublicInstance,le=e.getRootHostContext,H=e.getChildHostContext,q=e.prepareForCommit,Z=e.resetAfterCommit,oe=e.createInstance,F=e.appendInitialChild,j=e.finalizeInitialChildren,Q=e.prepareUpdate,se=e.shouldSetTextContent,fe=e.createTextInstance,we=e.scheduleTimeout,Ee=e.cancelTimeout,Ce=e.noTimeout,Ge=e.isPrimaryRenderer,Ie=e.supportsMutation,he=e.supportsPersistence,ke=e.supportsHydration,Ne=e.getInstanceFromNode,Ae=e.preparePortalMount,ie=e.getCurrentEventPriority,Ke=e.detachDeletedInstance,Ve=e.supportsMicrotasks,We=e.scheduleMicrotask,nt=e.supportsTestSelectors,yt=e.findFiberRoot,_t=e.getBoundingRect,de=e.getTextContent,ee=e.isHiddenSubtree,Fe=e.matchAccessibilityRole,ot=e.setFocusIfFocusable,et=e.setupIntersectionObserver,ft=e.appendChild,xt=e.appendChildToContainer,ht=e.commitTextUpdate,Pe=e.commitMount,Wt=e.commitUpdate,Ct=e.insertBefore,Nt=e.insertInContainerBefore,At=e.removeChild,be=e.removeChildFromContainer,Je=e.resetTextContent,pt=e.hideInstance,Te=e.hideTextInstance,Ue=e.unhideInstance,qe=e.unhideTextInstance,Mt=e.clearContainer,Et=e.cloneInstance,It=e.createContainerChildSet,Zt=e.appendChildToContainerChildSet,Hn=e.finalizeContainerChildren,Kn=e.replaceContainerChildren,bn=e.cloneHiddenInstance,dr=e.cloneHiddenTextInstance,Vt=e.canHydrateInstance,yo=e.canHydrateTextInstance,Do=e.canHydrateSuspenseInstance,si=e.isSuspenseInstancePending,br=e.isSuspenseInstanceFallback,xr=e.registerSuspenseInstanceRetry,Mr=e.getNextHydratableSibling,Mn=e.getFirstHydratableChild,Ko=e.getFirstHydratableChildWithinContainer,Oo=e.getFirstHydratableChildWithinSuspenseInstance,Y=e.hydrateInstance,U=e.hydrateTextInstance,ne=e.hydrateSuspenseInstance,ve=e.getNextHydratableInstanceAfterSuspenseInstance,me=e.commitHydratedContainer,Se=e.commitHydratedSuspenseInstance,Xe=e.clearSuspenseBoundary,Ye=e.clearSuspenseBoundaryFromContainer,st=e.shouldDeleteUnhydratedTailInstances,rt=e.didNotMatchHydratedContainerTextInstance,dt=e.didNotMatchHydratedTextInstance,tt;function jt(p){if(tt===void 0)try{throw Error()}catch(b){var m=b.stack.trim().match(/\n( *(at )?)/);tt=m&&m[1]||""}return`
`+tt+p}var Rt=!1;function Ft(p,m){if(!p||Rt)return"";Rt=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(kt){var A=kt}Reflect.construct(p,[],m)}else{try{m.call()}catch(kt){A=kt}p.call(m.prototype)}else{try{throw Error()}catch(kt){A=kt}p()}}catch(kt){if(kt&&A&&typeof kt.stack=="string"){for(var O=kt.stack.split(`
`),W=A.stack.split(`
`),Me=O.length-1,Oe=W.length-1;1<=Me&&0<=Oe&&O[Me]!==W[Oe];)Oe--;for(;1<=Me&&0<=Oe;Me--,Oe--)if(O[Me]!==W[Oe]){if(Me!==1||Oe!==1)do if(Me--,Oe--,0>Oe||O[Me]!==W[Oe]){var ct=`
`+O[Me].replace(" at new "," at ");return p.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",p.displayName)),ct}while(1<=Me&&0<=Oe);break}}}finally{Rt=!1,Error.prepareStackTrace=b}return(p=p?p.displayName||p.name:"")?jt(p):""}var rn=Object.prototype.hasOwnProperty,an=[],sn=-1;function Ht(p){return{current:p}}function pn(p){0>sn||(p.current=an[sn],an[sn]=null,sn--)}function Xt(p,m){sn++,an[sn]=p.current,p.current=m}var En={},mn=Ht(En),xn=Ht(!1),or=En;function Jn(p,m){var b=p.type.contextTypes;if(!b)return En;var A=p.stateNode;if(A&&A.__reactInternalMemoizedUnmaskedChildContext===m)return A.__reactInternalMemoizedMaskedChildContext;var O={},W;for(W in b)O[W]=m[W];return A&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=m,p.__reactInternalMemoizedMaskedChildContext=O),O}function ar(p){return p=p.childContextTypes,p!=null}function Yr(){pn(xn),pn(mn)}function hn(p,m,b){if(mn.current!==En)throw Error(s(168));Xt(mn,m),Xt(xn,b)}function Er(p,m,b){var A=p.stateNode;if(m=m.childContextTypes,typeof A.getChildContext!="function")return b;A=A.getChildContext();for(var O in A)if(!(O in m))throw Error(s(108,L(p)||"Unknown",O));return o({},b,A)}function Ln(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||En,or=mn.current,Xt(mn,p),Xt(xn,xn.current),!0}function Wn(p,m,b){var A=p.stateNode;if(!A)throw Error(s(169));b?(p=Er(p,m,or),A.__reactInternalMemoizedMergedChildContext=p,pn(xn),pn(mn),Xt(mn,p)):pn(xn),Xt(xn,b)}var kr=Math.clz32?Math.clz32:Bs,oa=Math.log,qi=Math.LN2;function Bs(p){return p>>>=0,p===0?32:31-(oa(p)/qi|0)|0}var Gu=64,qc=4194304;function fl(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function Xc(p,m){var b=p.pendingLanes;if(b===0)return 0;var A=0,O=p.suspendedLanes,W=p.pingedLanes,Me=b&268435455;if(Me!==0){var Oe=Me&~O;Oe!==0?A=fl(Oe):(W&=Me,W!==0&&(A=fl(W)))}else Me=b&~O,Me!==0?A=fl(Me):W!==0&&(A=fl(W));if(A===0)return 0;if(m!==0&&m!==A&&!(m&O)&&(O=A&-A,W=m&-m,O>=W||O===16&&(W&4194240)!==0))return m;if(A&4&&(A|=b&16),m=p.entangledLanes,m!==0)for(p=p.entanglements,m&=A;0<m;)b=31-kr(m),O=1<<b,A|=p[b],m&=~O;return A}function Pg(p,m){switch(p){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Lg(p,m){for(var b=p.suspendedLanes,A=p.pingedLanes,O=p.expirationTimes,W=p.pendingLanes;0<W;){var Me=31-kr(W),Oe=1<<Me,ct=O[Me];ct===-1?(!(Oe&b)||Oe&A)&&(O[Me]=Pg(Oe,m)):ct<=m&&(p.expiredLanes|=Oe),W&=~Oe}}function sa(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function su(p){for(var m=[],b=0;31>b;b++)m.push(p);return m}function La(p,m,b){p.pendingLanes|=m,m!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,m=31-kr(m),p[m]=b}function ap(p,m){var b=p.pendingLanes&~m;p.pendingLanes=m,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=m,p.mutableReadLanes&=m,p.entangledLanes&=m,m=p.entanglements;var A=p.eventTimes;for(p=p.expirationTimes;0<b;){var O=31-kr(b),W=1<<O;m[O]=0,A[O]=-1,p[O]=-1,b&=~W}}function Xi(p,m){var b=p.entangledLanes|=m;for(p=p.entanglements;b;){var A=31-kr(b),O=1<<A;O&m|p[A]&m&&(p[A]|=m),b&=~O}}var rr=0;function Nf(p){return p&=-p,1<p?4<p?p&268435455?16:536870912:4:1}var wn=i.unstable_scheduleCallback,lp=i.unstable_cancelCallback,Rg=i.unstable_shouldYield,Ra=i.unstable_requestPaint,di=i.unstable_now,Yc=i.unstable_ImmediatePriority,Zc=i.unstable_UserBlockingPriority,Vu=i.unstable_NormalPriority,kg=i.unstable_IdlePriority,Kc=null,Us=null;function Ff(p){if(Us&&typeof Us.onCommitFiberRoot=="function")try{Us.onCommitFiberRoot(Kc,p,void 0,(p.current.flags&128)===128)}catch{}}function Wu(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var no=typeof Object.is=="function"?Object.is:Wu,aa=null,ka=!1,ju=!1;function $u(p){aa===null?aa=[p]:aa.push(p)}function up(p){ka=!0,$u(p)}function _s(){if(!ju&&aa!==null){ju=!0;var p=0,m=rr;try{var b=aa;for(rr=1;p<b.length;p++){var A=b[p];do A=A(!0);while(A!==null)}aa=null,ka=!1}catch(O){throw aa!==null&&(aa=aa.slice(p+1)),wn(Yc,_s),O}finally{rr=m,ju=!1}}return null}var cp=a.ReactCurrentBatchConfig;function qu(p,m){if(no(p,m))return!0;if(typeof p!="object"||p===null||typeof m!="object"||m===null)return!1;var b=Object.keys(p),A=Object.keys(m);if(b.length!==A.length)return!1;for(A=0;A<b.length;A++){var O=b[A];if(!rn.call(m,O)||!no(p[O],m[O]))return!1}return!0}function Ia(p){switch(p.tag){case 5:return jt(p.type);case 16:return jt("Lazy");case 13:return jt("Suspense");case 19:return jt("SuspenseList");case 0:case 2:case 15:return p=Ft(p.type,!1),p;case 11:return p=Ft(p.type.render,!1),p;case 1:return p=Ft(p.type,!0),p;default:return""}}function Oi(p,m){if(p&&p.defaultProps){m=o({},m),p=p.defaultProps;for(var b in p)m[b]===void 0&&(m[b]=p[b]);return m}return m}var Jc=Ht(null),la=null,xo=null,Xu=null;function dl(){Xu=xo=la=null}function hp(p,m,b){Ge?(Xt(Jc,m._currentValue),m._currentValue=b):(Xt(Jc,m._currentValue2),m._currentValue2=b)}function au(p){var m=Jc.current;pn(Jc),Ge?p._currentValue=m:p._currentValue2=m}function Df(p,m,b){for(;p!==null;){var A=p.alternate;if((p.childLanes&m)!==m?(p.childLanes|=m,A!==null&&(A.childLanes|=m)):A!==null&&(A.childLanes&m)!==m&&(A.childLanes|=m),p===b)break;p=p.return}}function Na(p,m){la=p,Xu=xo=null,p=p.dependencies,p!==null&&p.firstContext!==null&&(p.lanes&m&&(Eo=!0),p.firstContext=null)}function wo(p){var m=Ge?p._currentValue:p._currentValue2;if(Xu!==p)if(p={context:p,memoizedValue:m,next:null},xo===null){if(la===null)throw Error(s(308));xo=p,la.dependencies={lanes:0,firstContext:p}}else xo=xo.next=p;return m}var bs=null,Ms=!1;function Yu(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Qc(p,m){p=p.updateQueue,m.updateQueue===p&&(m.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function zs(p,m){return{eventTime:p,lane:m,tag:0,payload:null,callback:null,next:null}}function Fa(p,m){var b=p.updateQueue;b!==null&&(b=b.shared,yi!==null&&p.mode&1&&!(Dn&2)?(p=b.interleaved,p===null?(m.next=m,bs===null?bs=[b]:bs.push(b)):(m.next=p.next,p.next=m),b.interleaved=m):(p=b.pending,p===null?m.next=m:(m.next=p.next,p.next=m),b.pending=m))}function pl(p,m,b){if(m=m.updateQueue,m!==null&&(m=m.shared,(b&4194240)!==0)){var A=m.lanes;A&=p.pendingLanes,b|=A,m.lanes=b,Xi(p,b)}}function lu(p,m){var b=p.updateQueue,A=p.alternate;if(A!==null&&(A=A.updateQueue,b===A)){var O=null,W=null;if(b=b.firstBaseUpdate,b!==null){do{var Me={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};W===null?O=W=Me:W=W.next=Me,b=b.next}while(b!==null);W===null?O=W=m:W=W.next=m}else O=W=m;b={baseState:A.baseState,firstBaseUpdate:O,lastBaseUpdate:W,shared:A.shared,effects:A.effects},p.updateQueue=b;return}p=b.lastBaseUpdate,p===null?b.firstBaseUpdate=m:p.next=m,b.lastBaseUpdate=m}function uu(p,m,b,A){var O=p.updateQueue;Ms=!1;var W=O.firstBaseUpdate,Me=O.lastBaseUpdate,Oe=O.shared.pending;if(Oe!==null){O.shared.pending=null;var ct=Oe,kt=ct.next;ct.next=null,Me===null?W=kt:Me.next=kt,Me=ct;var Jt=p.alternate;Jt!==null&&(Jt=Jt.updateQueue,Oe=Jt.lastBaseUpdate,Oe!==Me&&(Oe===null?Jt.firstBaseUpdate=kt:Oe.next=kt,Jt.lastBaseUpdate=ct))}if(W!==null){var On=O.baseState;Me=0,Jt=kt=ct=null,Oe=W;do{var gn=Oe.lane,Ur=Oe.eventTime;if((A&gn)===gn){Jt!==null&&(Jt=Jt.next={eventTime:Ur,lane:0,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null});e:{var cn=p,ns=Oe;switch(gn=m,Ur=b,ns.tag){case 1:if(cn=ns.payload,typeof cn=="function"){On=cn.call(Ur,On,gn);break e}On=cn;break e;case 3:cn.flags=cn.flags&-65537|128;case 0:if(cn=ns.payload,gn=typeof cn=="function"?cn.call(Ur,On,gn):cn,gn==null)break e;On=o({},On,gn);break e;case 2:Ms=!0}}Oe.callback!==null&&Oe.lane!==0&&(p.flags|=64,gn=O.effects,gn===null?O.effects=[Oe]:gn.push(Oe))}else Ur={eventTime:Ur,lane:gn,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null},Jt===null?(kt=Jt=Ur,ct=On):Jt=Jt.next=Ur,Me|=gn;if(Oe=Oe.next,Oe===null){if(Oe=O.shared.pending,Oe===null)break;gn=Oe,Oe=gn.next,gn.next=null,O.lastBaseUpdate=gn,O.shared.pending=null}}while(1);if(Jt===null&&(ct=On),O.baseState=ct,O.firstBaseUpdate=kt,O.lastBaseUpdate=Jt,m=O.shared.interleaved,m!==null){O=m;do Me|=O.lane,O=O.next;while(O!==m)}else W===null&&(O.shared.lanes=0);pa|=Me,p.lanes=Me,p.memoizedState=On}}function ml(p,m,b){if(p=m.effects,m.effects=null,p!==null)for(m=0;m<p.length;m++){var A=p[m],O=A.callback;if(O!==null){if(A.callback=null,A=b,typeof O!="function")throw Error(s(191,O));O.call(A)}}}var eh=new r.Component().refs;function T(p,m,b,A){m=p.memoizedState,b=b(A,m),b=b==null?m:o({},m,b),p.memoizedState=b,p.lanes===0&&(p.updateQueue.baseState=b)}var K={isMounted:function(p){return(p=p._reactInternals)?k(p)===p:!1},enqueueSetState:function(p,m,b){p=p._reactInternals;var A=Co(),O=ga(p),W=zs(A,O);W.payload=m,b!=null&&(W.callback=b),Fa(p,W),m=es(p,O,A),m!==null&&pl(m,p,O)},enqueueReplaceState:function(p,m,b){p=p._reactInternals;var A=Co(),O=ga(p),W=zs(A,O);W.tag=1,W.payload=m,b!=null&&(W.callback=b),Fa(p,W),m=es(p,O,A),m!==null&&pl(m,p,O)},enqueueForceUpdate:function(p,m){p=p._reactInternals;var b=Co(),A=ga(p),O=zs(b,A);O.tag=2,m!=null&&(O.callback=m),Fa(p,O),m=es(p,A,b),m!==null&&pl(m,p,A)}};function _e(p,m,b,A,O,W,Me){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(A,W,Me):m.prototype&&m.prototype.isPureReactComponent?!qu(b,A)||!qu(O,W):!0}function Le(p,m,b){var A=!1,O=En,W=m.contextType;return typeof W=="object"&&W!==null?W=wo(W):(O=ar(m)?or:mn.current,A=m.contextTypes,W=(A=A!=null)?Jn(p,O):En),m=new m(b,W),p.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=K,p.stateNode=m,m._reactInternals=p,A&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=O,p.__reactInternalMemoizedMaskedChildContext=W),m}function He(p,m,b,A){p=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(b,A),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(b,A),m.state!==p&&K.enqueueReplaceState(m,m.state,null)}function at(p,m,b,A){var O=p.stateNode;O.props=b,O.state=p.memoizedState,O.refs=eh,Yu(p);var W=m.contextType;typeof W=="object"&&W!==null?O.context=wo(W):(W=ar(m)?or:mn.current,O.context=Jn(p,W)),O.state=p.memoizedState,W=m.getDerivedStateFromProps,typeof W=="function"&&(T(p,m,W,b),O.state=p.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(m=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),m!==O.state&&K.enqueueReplaceState(O,O.state,null),uu(p,b,O,A),O.state=p.memoizedState),typeof O.componentDidMount=="function"&&(p.flags|=4194308)}var bt=[],Ut=0,on=null,_n=0,un=[],An=0,wr=null,pr=1,Ar="";function ai(p,m){bt[Ut++]=_n,bt[Ut++]=on,on=p,_n=m}function Bi(p,m,b){un[An++]=pr,un[An++]=Ar,un[An++]=wr,wr=p;var A=pr;p=Ar;var O=32-kr(A)-1;A&=~(1<<O),b+=1;var W=32-kr(m)+O;if(30<W){var Me=O-O%5;W=(A&(1<<Me)-1).toString(32),A>>=Me,O-=Me,pr=1<<32-kr(m)+O|b<<O|A,Ar=W+p}else pr=1<<W|b<<O|A,Ar=p}function Es(p){p.return!==null&&(ai(p,1),Bi(p,1,0))}function Bo(p){for(;p===on;)on=bt[--Ut],bt[Ut]=null,_n=bt[--Ut],bt[Ut]=null;for(;p===wr;)wr=un[--An],un[An]=null,Ar=un[--An],un[An]=null,pr=un[--An],un[An]=null}var li=null,So=null,Tr=!1,gl=!1,_o=null;function th(p,m){var b=Xa(5,null,null,0);b.elementType="DELETED",b.stateNode=m,b.return=p,m=p.deletions,m===null?(p.deletions=[b],p.flags|=16):m.push(b)}function nh(p,m){switch(p.tag){case 5:return m=Vt(m,p.type,p.pendingProps),m!==null?(p.stateNode=m,li=p,So=Mn(m),!0):!1;case 6:return m=yo(m,p.pendingProps),m!==null?(p.stateNode=m,li=p,So=null,!0):!1;case 13:if(m=Do(m),m!==null){var b=wr!==null?{id:pr,overflow:Ar}:null;return p.memoizedState={dehydrated:m,treeContext:b,retryLane:1073741824},b=Xa(18,null,null,0),b.stateNode=m,b.return=p,p.child=b,li=p,So=null,!0}return!1;default:return!1}}function cu(p){return(p.mode&1)!==0&&(p.flags&128)===0}function Ui(p){if(Tr){var m=So;if(m){var b=m;if(!nh(p,m)){if(cu(p))throw Error(s(418));m=Mr(b);var A=li;m&&nh(p,m)?th(A,b):(p.flags=p.flags&-4097|2,Tr=!1,li=p)}}else{if(cu(p))throw Error(s(418));p.flags=p.flags&-4097|2,Tr=!1,li=p}}}function Zu(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;li=p}function Da(p){if(!ke||p!==li)return!1;if(!Tr)return Zu(p),Tr=!0,!1;if(p.tag!==3&&(p.tag!==5||st(p.type)&&!se(p.type,p.memoizedProps))){var m=So;if(m){if(cu(p)){for(p=So;p;)p=Mr(p);throw Error(s(418))}for(;m;)th(p,m),m=Mr(m)}}if(Zu(p),p.tag===13){if(!ke)throw Error(s(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));So=ve(p)}else So=li?Mr(p.stateNode):null;return!0}function ua(){ke&&(So=li=null,gl=Tr=!1)}function Ku(p){_o===null?_o=[p]:_o.push(p)}function Yi(p,m,b){if(p=b.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(s(309));var A=b.stateNode}if(!A)throw Error(s(147,p));var O=A,W=""+p;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===W?m.ref:(m=function(Me){var Oe=O.refs;Oe===eh&&(Oe=O.refs={}),Me===null?delete Oe[W]:Oe[W]=Me},m._stringRef=W,m)}if(typeof p!="string")throw Error(s(284));if(!b._owner)throw Error(s(290,p))}return p}function rh(p,m){throw p=Object.prototype.toString.call(m),Error(s(31,p==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":p))}function ih(p){var m=p._init;return m(p._payload)}function Of(p){function m(Ze,ze){if(p){var it=Ze.deletions;it===null?(Ze.deletions=[ze],Ze.flags|=16):it.push(ze)}}function b(Ze,ze){if(!p)return null;for(;ze!==null;)m(Ze,ze),ze=ze.sibling;return null}function A(Ze,ze){for(Ze=new Map;ze!==null;)ze.key!==null?Ze.set(ze.key,ze):Ze.set(ze.index,ze),ze=ze.sibling;return Ze}function O(Ze,ze){return Ze=vh(Ze,ze),Ze.index=0,Ze.sibling=null,Ze}function W(Ze,ze,it){return Ze.index=it,p?(it=Ze.alternate,it!==null?(it=it.index,it<ze?(Ze.flags|=2,ze):it):(Ze.flags|=2,ze)):(Ze.flags|=1048576,ze)}function Me(Ze){return p&&Ze.alternate===null&&(Ze.flags|=2),Ze}function Oe(Ze,ze,it,qt){return ze===null||ze.tag!==6?(ze=jS(it,Ze.mode,qt),ze.return=Ze,ze):(ze=O(ze,it),ze.return=Ze,ze)}function ct(Ze,ze,it,qt){var ln=it.type;return ln===c?Jt(Ze,ze,it.props.children,qt,it.key):ze!==null&&(ze.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===_&&ih(ln)===ze.type)?(qt=O(ze,it.props),qt.ref=Yi(Ze,ze,it),qt.return=Ze,qt):(qt=sy(it.type,it.key,it.props,null,Ze.mode,qt),qt.ref=Yi(Ze,ze,it),qt.return=Ze,qt)}function kt(Ze,ze,it,qt){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==it.containerInfo||ze.stateNode.implementation!==it.implementation?(ze=$S(it,Ze.mode,qt),ze.return=Ze,ze):(ze=O(ze,it.children||[]),ze.return=Ze,ze)}function Jt(Ze,ze,it,qt,ln){return ze===null||ze.tag!==7?(ze=Yf(it,Ze.mode,qt,ln),ze.return=Ze,ze):(ze=O(ze,it),ze.return=Ze,ze)}function On(Ze,ze,it){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ze=jS(""+ze,Ze.mode,it),ze.return=Ze,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case l:return it=sy(ze.type,ze.key,ze.props,null,Ze.mode,it),it.ref=Yi(Ze,null,ze),it.return=Ze,it;case u:return ze=$S(ze,Ze.mode,it),ze.return=Ze,ze;case _:var qt=ze._init;return On(Ze,qt(ze._payload),it)}if($(ze)||I(ze))return ze=Yf(ze,Ze.mode,it,null),ze.return=Ze,ze;rh(Ze,ze)}return null}function gn(Ze,ze,it,qt){var ln=ze!==null?ze.key:null;if(typeof it=="string"&&it!==""||typeof it=="number")return ln!==null?null:Oe(Ze,ze,""+it,qt);if(typeof it=="object"&&it!==null){switch(it.$$typeof){case l:return it.key===ln?ct(Ze,ze,it,qt):null;case u:return it.key===ln?kt(Ze,ze,it,qt):null;case _:return ln=it._init,gn(Ze,ze,ln(it._payload),qt)}if($(it)||I(it))return ln!==null?null:Jt(Ze,ze,it,qt,null);rh(Ze,it)}return null}function Ur(Ze,ze,it,qt,ln){if(typeof qt=="string"&&qt!==""||typeof qt=="number")return Ze=Ze.get(it)||null,Oe(ze,Ze,""+qt,ln);if(typeof qt=="object"&&qt!==null){switch(qt.$$typeof){case l:return Ze=Ze.get(qt.key===null?it:qt.key)||null,ct(ze,Ze,qt,ln);case u:return Ze=Ze.get(qt.key===null?it:qt.key)||null,kt(ze,Ze,qt,ln);case _:var Xn=qt._init;return Ur(Ze,ze,it,Xn(qt._payload),ln)}if($(qt)||I(qt))return Ze=Ze.get(it)||null,Jt(ze,Ze,qt,ln,null);rh(ze,qt)}return null}function cn(Ze,ze,it,qt){for(var ln=null,Xn=null,Bn=ze,gr=ze=0,Po=null;Bn!==null&&gr<it.length;gr++){Bn.index>gr?(Po=Bn,Bn=null):Po=Bn.sibling;var vr=gn(Ze,Bn,it[gr],qt);if(vr===null){Bn===null&&(Bn=Po);break}p&&Bn&&vr.alternate===null&&m(Ze,Bn),ze=W(vr,ze,gr),Xn===null?ln=vr:Xn.sibling=vr,Xn=vr,Bn=Po}if(gr===it.length)return b(Ze,Bn),Tr&&ai(Ze,gr),ln;if(Bn===null){for(;gr<it.length;gr++)Bn=On(Ze,it[gr],qt),Bn!==null&&(ze=W(Bn,ze,gr),Xn===null?ln=Bn:Xn.sibling=Bn,Xn=Bn);return Tr&&ai(Ze,gr),ln}for(Bn=A(Ze,Bn);gr<it.length;gr++)Po=Ur(Bn,Ze,gr,it[gr],qt),Po!==null&&(p&&Po.alternate!==null&&Bn.delete(Po.key===null?gr:Po.key),ze=W(Po,ze,gr),Xn===null?ln=Po:Xn.sibling=Po,Xn=Po);return p&&Bn.forEach(function(yh){return m(Ze,yh)}),Tr&&ai(Ze,gr),ln}function ns(Ze,ze,it,qt){var ln=I(it);if(typeof ln!="function")throw Error(s(150));if(it=ln.call(it),it==null)throw Error(s(151));for(var Xn=ln=null,Bn=ze,gr=ze=0,Po=null,vr=it.next();Bn!==null&&!vr.done;gr++,vr=it.next()){Bn.index>gr?(Po=Bn,Bn=null):Po=Bn.sibling;var yh=gn(Ze,Bn,vr.value,qt);if(yh===null){Bn===null&&(Bn=Po);break}p&&Bn&&yh.alternate===null&&m(Ze,Bn),ze=W(yh,ze,gr),Xn===null?ln=yh:Xn.sibling=yh,Xn=yh,Bn=Po}if(vr.done)return b(Ze,Bn),Tr&&ai(Ze,gr),ln;if(Bn===null){for(;!vr.done;gr++,vr=it.next())vr=On(Ze,vr.value,qt),vr!==null&&(ze=W(vr,ze,gr),Xn===null?ln=vr:Xn.sibling=vr,Xn=vr);return Tr&&ai(Ze,gr),ln}for(Bn=A(Ze,Bn);!vr.done;gr++,vr=it.next())vr=Ur(Bn,Ze,gr,vr.value,qt),vr!==null&&(p&&vr.alternate!==null&&Bn.delete(vr.key===null?gr:vr.key),ze=W(vr,ze,gr),Xn===null?ln=vr:Xn.sibling=vr,Xn=vr);return p&&Bn.forEach(function(NB){return m(Ze,NB)}),Tr&&ai(Ze,gr),ln}function Ya(Ze,ze,it,qt){if(typeof it=="object"&&it!==null&&it.type===c&&it.key===null&&(it=it.props.children),typeof it=="object"&&it!==null){switch(it.$$typeof){case l:e:{for(var ln=it.key,Xn=ze;Xn!==null;){if(Xn.key===ln){if(ln=it.type,ln===c){if(Xn.tag===7){b(Ze,Xn.sibling),ze=O(Xn,it.props.children),ze.return=Ze,Ze=ze;break e}}else if(Xn.elementType===ln||typeof ln=="object"&&ln!==null&&ln.$$typeof===_&&ih(ln)===Xn.type){b(Ze,Xn.sibling),ze=O(Xn,it.props),ze.ref=Yi(Ze,Xn,it),ze.return=Ze,Ze=ze;break e}b(Ze,Xn);break}else m(Ze,Xn);Xn=Xn.sibling}it.type===c?(ze=Yf(it.props.children,Ze.mode,qt,it.key),ze.return=Ze,Ze=ze):(qt=sy(it.type,it.key,it.props,null,Ze.mode,qt),qt.ref=Yi(Ze,ze,it),qt.return=Ze,Ze=qt)}return Me(Ze);case u:e:{for(Xn=it.key;ze!==null;){if(ze.key===Xn)if(ze.tag===4&&ze.stateNode.containerInfo===it.containerInfo&&ze.stateNode.implementation===it.implementation){b(Ze,ze.sibling),ze=O(ze,it.children||[]),ze.return=Ze,Ze=ze;break e}else{b(Ze,ze);break}else m(Ze,ze);ze=ze.sibling}ze=$S(it,Ze.mode,qt),ze.return=Ze,Ze=ze}return Me(Ze);case _:return Xn=it._init,Ya(Ze,ze,Xn(it._payload),qt)}if($(it))return cn(Ze,ze,it,qt);if(I(it))return ns(Ze,ze,it,qt);rh(Ze,it)}return typeof it=="string"&&it!==""||typeof it=="number"?(it=""+it,ze!==null&&ze.tag===6?(b(Ze,ze.sibling),ze=O(ze,it),ze.return=Ze,Ze=ze):(b(Ze,ze),ze=jS(it,Ze.mode,qt),ze.return=Ze,Ze=ze),Me(Ze)):b(Ze,ze)}return Ya}var ro=Of(!0),Ju=Of(!1),hu={},Uo=Ht(hu),Hs=Ht(hu),Gs=Ht(hu);function Zr(p){if(p===hu)throw Error(s(174));return p}function io(p,m){Xt(Gs,m),Xt(Hs,p),Xt(Uo,hu),p=le(m),pn(Uo),Xt(Uo,p)}function As(){pn(Uo),pn(Hs),pn(Gs)}function Oa(p){var m=Zr(Gs.current),b=Zr(Uo.current);m=H(b,p.type,m),b!==m&&(Xt(Hs,p),Xt(Uo,m))}function ca(p){Hs.current===p&&(pn(Uo),pn(Hs))}var Cr=Ht(0);function Vs(p){for(var m=p;m!==null;){if(m.tag===13){var b=m.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||si(b)||br(b)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===p)break;for(;m.sibling===null;){if(m.return===null||m.return===p)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var Kr=[];function Qu(){for(var p=0;p<Kr.length;p++){var m=Kr[p];Ge?m._workInProgressVersionPrimary=null:m._workInProgressVersionSecondary=null}Kr.length=0}var Zi=a.ReactCurrentDispatcher,Jr=a.ReactCurrentBatchConfig,ha=0,Br=null,Ti=null,jr=null,Ba=!1,Ws=!1,fa=0,oh=0;function ui(){throw Error(s(321))}function Ua(p,m){if(m===null)return!1;for(var b=0;b<m.length&&b<p.length;b++)if(!no(p[b],m[b]))return!1;return!0}function ec(p,m,b,A,O,W){if(ha=W,Br=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,Zi.current=p===null||p.memoizedState===null?Gf:BS,p=b(A,O),Ws){W=0;do{if(Ws=!1,fa=0,25<=W)throw Error(s(301));W+=1,jr=Ti=null,m.updateQueue=null,Zi.current=US,p=b(A,O)}while(Ws)}if(Zi.current=uh,m=Ti!==null&&Ti.next!==null,ha=0,jr=Ti=Br=null,Ba=!1,m)throw Error(s(300));return p}function Jo(){var p=fa!==0;return fa=0,p}function Ci(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return jr===null?Br.memoizedState=jr=p:jr=jr.next=p,jr}function Qn(){if(Ti===null){var p=Br.alternate;p=p!==null?p.memoizedState:null}else p=Ti.next;var m=jr===null?Br.memoizedState:jr.next;if(m!==null)jr=m,Ti=p;else{if(p===null)throw Error(s(310));Ti=p,p={memoizedState:Ti.memoizedState,baseState:Ti.baseState,baseQueue:Ti.baseQueue,queue:Ti.queue,next:null},jr===null?Br.memoizedState=jr=p:jr=jr.next=p}return jr}function lr(p,m){return typeof m=="function"?m(p):m}function $r(p){var m=Qn(),b=m.queue;if(b===null)throw Error(s(311));b.lastRenderedReducer=p;var A=Ti,O=A.baseQueue,W=b.pending;if(W!==null){if(O!==null){var Me=O.next;O.next=W.next,W.next=Me}A.baseQueue=O=W,b.pending=null}if(O!==null){W=O.next,A=A.baseState;var Oe=Me=null,ct=null,kt=W;do{var Jt=kt.lane;if((ha&Jt)===Jt)ct!==null&&(ct=ct.next={lane:0,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null}),A=kt.hasEagerState?kt.eagerState:p(A,kt.action);else{var On={lane:Jt,action:kt.action,hasEagerState:kt.hasEagerState,eagerState:kt.eagerState,next:null};ct===null?(Oe=ct=On,Me=A):ct=ct.next=On,Br.lanes|=Jt,pa|=Jt}kt=kt.next}while(kt!==null&&kt!==W);ct===null?Me=A:ct.next=Oe,no(A,m.memoizedState)||(Eo=!0),m.memoizedState=A,m.baseState=Me,m.baseQueue=ct,b.lastRenderedState=A}if(p=b.interleaved,p!==null){O=p;do W=O.lane,Br.lanes|=W,pa|=W,O=O.next;while(O!==p)}else O===null&&(b.lanes=0);return[m.memoizedState,b.dispatch]}function ci(p){var m=Qn(),b=m.queue;if(b===null)throw Error(s(311));b.lastRenderedReducer=p;var A=b.dispatch,O=b.pending,W=m.memoizedState;if(O!==null){b.pending=null;var Me=O=O.next;do W=p(W,Me.action),Me=Me.next;while(Me!==O);no(W,m.memoizedState)||(Eo=!0),m.memoizedState=W,m.baseQueue===null&&(m.baseState=W),b.lastRenderedState=W}return[W,A]}function za(){}function sh(p,m){var b=Br,A=Qn(),O=m(),W=!no(A.memoizedState,O);if(W&&(A.memoizedState=O,Eo=!0),A=A.queue,fu(fp.bind(null,b,A,p),[p]),A.getSnapshot!==m||W||jr!==null&&jr.memoizedState.tag&1){if(b.flags|=2048,bo(9,Bf.bind(null,b,A,O,m),void 0,null),yi===null)throw Error(s(349));ha&30||tc(b,m,O)}return O}function tc(p,m,b){p.flags|=16384,p={getSnapshot:m,value:b},m=Br.updateQueue,m===null?(m={lastEffect:null,stores:null},Br.updateQueue=m,m.stores=[p]):(b=m.stores,b===null?m.stores=[p]:b.push(p))}function Bf(p,m,b,A){m.value=b,m.getSnapshot=A,Uf(m)&&es(p,1,-1)}function fp(p,m,b){return b(function(){Uf(m)&&es(p,1,-1)})}function Uf(p){var m=p.getSnapshot;p=p.value;try{var b=m();return!no(p,b)}catch{return!0}}function zo(p){var m=Ci();return typeof p=="function"&&(p=p()),m.memoizedState=m.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lr,lastRenderedState:p},m.queue=p,p=p.dispatch=OS.bind(null,Br,p),[m.memoizedState,p]}function bo(p,m,b,A){return p={tag:p,create:m,destroy:b,deps:A,next:null},m=Br.updateQueue,m===null?(m={lastEffect:null,stores:null},Br.updateQueue=m,m.lastEffect=p.next=p):(b=m.lastEffect,b===null?m.lastEffect=p.next=p:(A=b.next,b.next=p,p.next=A,m.lastEffect=p)),p}function zf(){return Qn().memoizedState}function nc(p,m,b,A){var O=Ci();Br.flags|=p,O.memoizedState=bo(1|m,b,void 0,A===void 0?null:A)}function Hf(p,m,b,A){var O=Qn();A=A===void 0?null:A;var W=void 0;if(Ti!==null){var Me=Ti.memoizedState;if(W=Me.destroy,A!==null&&Ua(A,Me.deps)){O.memoizedState=bo(m,b,W,A);return}}Br.flags|=p,O.memoizedState=bo(1|m,b,W,A)}function ah(p,m){return nc(8390656,8,p,m)}function fu(p,m){return Hf(2048,8,p,m)}function dp(p,m){return Hf(4,2,p,m)}function Ig(p,m){return Hf(4,4,p,m)}function pp(p,m){if(typeof m=="function")return p=p(),m(p),function(){m(null)};if(m!=null)return p=p(),m.current=p,function(){m.current=null}}function mp(p,m,b){return b=b!=null?b.concat([p]):null,Hf(4,4,pp.bind(null,m,p),b)}function lh(){}function gp(p,m){var b=Qn();m=m===void 0?null:m;var A=b.memoizedState;return A!==null&&m!==null&&Ua(m,A[1])?A[0]:(b.memoizedState=[p,m],p)}function j1(p,m){var b=Qn();m=m===void 0?null:m;var A=b.memoizedState;return A!==null&&m!==null&&Ua(m,A[1])?A[0]:(p=p(),b.memoizedState=[p,m],p)}function FS(p,m){var b=rr;rr=b!==0&&4>b?b:4,p(!0);var A=Jr.transition;Jr.transition={};try{p(!1),m()}finally{rr=b,Jr.transition=A}}function Ng(){return Qn().memoizedState}function DS(p,m,b){var A=ga(p);b={lane:A,action:b,hasEagerState:!1,eagerState:null,next:null},$1(p)?q1(m,b):(X1(p,m,b),b=Co(),p=es(p,A,b),p!==null&&vp(p,m,A))}function OS(p,m,b){var A=ga(p),O={lane:A,action:b,hasEagerState:!1,eagerState:null,next:null};if($1(p))q1(m,O);else{X1(p,m,O);var W=p.alternate;if(p.lanes===0&&(W===null||W.lanes===0)&&(W=m.lastRenderedReducer,W!==null))try{var Me=m.lastRenderedState,Oe=W(Me,b);if(O.hasEagerState=!0,O.eagerState=Oe,no(Oe,Me))return}catch{}finally{}b=Co(),p=es(p,A,b),p!==null&&vp(p,m,A)}}function $1(p){var m=p.alternate;return p===Br||m!==null&&m===Br}function q1(p,m){Ws=Ba=!0;var b=p.pending;b===null?m.next=m:(m.next=b.next,b.next=m),p.pending=m}function X1(p,m,b){yi!==null&&p.mode&1&&!(Dn&2)?(p=m.interleaved,p===null?(b.next=b,bs===null?bs=[m]:bs.push(m)):(b.next=p.next,p.next=b),m.interleaved=b):(p=m.pending,p===null?b.next=b:(b.next=p.next,p.next=b),m.pending=b)}function vp(p,m,b){if(b&4194240){var A=m.lanes;A&=p.pendingLanes,b|=A,m.lanes=b,Xi(p,b)}}var uh={readContext:wo,useCallback:ui,useContext:ui,useEffect:ui,useImperativeHandle:ui,useInsertionEffect:ui,useLayoutEffect:ui,useMemo:ui,useReducer:ui,useRef:ui,useState:ui,useDebugValue:ui,useDeferredValue:ui,useTransition:ui,useMutableSource:ui,useSyncExternalStore:ui,useId:ui,unstable_isNewReconciler:!1},Gf={readContext:wo,useCallback:function(p,m){return Ci().memoizedState=[p,m===void 0?null:m],p},useContext:wo,useEffect:ah,useImperativeHandle:function(p,m,b){return b=b!=null?b.concat([p]):null,nc(4194308,4,pp.bind(null,m,p),b)},useLayoutEffect:function(p,m){return nc(4194308,4,p,m)},useInsertionEffect:function(p,m){return nc(4,2,p,m)},useMemo:function(p,m){var b=Ci();return m=m===void 0?null:m,p=p(),b.memoizedState=[p,m],p},useReducer:function(p,m,b){var A=Ci();return m=b!==void 0?b(m):m,A.memoizedState=A.baseState=m,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:m},A.queue=p,p=p.dispatch=DS.bind(null,Br,p),[A.memoizedState,p]},useRef:function(p){var m=Ci();return p={current:p},m.memoizedState=p},useState:zo,useDebugValue:lh,useDeferredValue:function(p){var m=zo(p),b=m[0],A=m[1];return ah(function(){var O=Jr.transition;Jr.transition={};try{A(p)}finally{Jr.transition=O}},[p]),b},useTransition:function(){var p=zo(!1),m=p[0];return p=FS.bind(null,p[1]),Ci().memoizedState=p,[m,p]},useMutableSource:function(){},useSyncExternalStore:function(p,m,b){var A=Br,O=Ci();if(Tr){if(b===void 0)throw Error(s(407));b=b()}else{if(b=m(),yi===null)throw Error(s(349));ha&30||tc(A,m,b)}O.memoizedState=b;var W={value:b,getSnapshot:m};return O.queue=W,ah(fp.bind(null,A,W,p),[p]),A.flags|=2048,bo(9,Bf.bind(null,A,W,b,m),void 0,null),b},useId:function(){var p=Ci(),m=yi.identifierPrefix;if(Tr){var b=Ar,A=pr;b=(A&~(1<<32-kr(A)-1)).toString(32)+b,m=":"+m+"R"+b,b=fa++,0<b&&(m+="H"+b.toString(32)),m+=":"}else b=oh++,m=":"+m+"r"+b.toString(32)+":";return p.memoizedState=m},unstable_isNewReconciler:!1},BS={readContext:wo,useCallback:gp,useContext:wo,useEffect:fu,useImperativeHandle:mp,useInsertionEffect:dp,useLayoutEffect:Ig,useMemo:j1,useReducer:$r,useRef:zf,useState:function(){return $r(lr)},useDebugValue:lh,useDeferredValue:function(p){var m=$r(lr),b=m[0],A=m[1];return fu(function(){var O=Jr.transition;Jr.transition={};try{A(p)}finally{Jr.transition=O}},[p]),b},useTransition:function(){var p=$r(lr)[0],m=Qn().memoizedState;return[p,m]},useMutableSource:za,useSyncExternalStore:sh,useId:Ng,unstable_isNewReconciler:!1},US={readContext:wo,useCallback:gp,useContext:wo,useEffect:fu,useImperativeHandle:mp,useInsertionEffect:dp,useLayoutEffect:Ig,useMemo:j1,useReducer:ci,useRef:zf,useState:function(){return ci(lr)},useDebugValue:lh,useDeferredValue:function(p){var m=ci(lr),b=m[0],A=m[1];return fu(function(){var O=Jr.transition;Jr.transition={};try{A(p)}finally{Jr.transition=O}},[p]),b},useTransition:function(){var p=ci(lr)[0],m=Qn().memoizedState;return[p,m]},useMutableSource:za,useSyncExternalStore:sh,useId:Ng,unstable_isNewReconciler:!1};function yp(p,m){try{var b="",A=m;do b+=Ia(A),A=A.return;while(A);var O=b}catch(W){O=`
Error generating stack: `+W.message+`
`+W.stack}return{value:p,source:m,stack:O}}function Fg(p,m){try{console.error(m.value)}catch(b){setTimeout(function(){throw b})}}var zS=typeof WeakMap=="function"?WeakMap:Map;function Y1(p,m,b){b=zs(-1,b),b.tag=3,b.payload={element:null};var A=m.value;return b.callback=function(){bp||(bp=!0,Wg=A),Fg(p,m)},b}function Z1(p,m,b){b=zs(-1,b),b.tag=3;var A=p.type.getDerivedStateFromError;if(typeof A=="function"){var O=m.value;b.payload=function(){return A(O)},b.callback=function(){Fg(p,m)}}var W=p.stateNode;return W!==null&&typeof W.componentDidCatch=="function"&&(b.callback=function(){Fg(p,m),typeof A!="function"&&($a===null?$a=new Set([this]):$a.add(this));var Me=m.stack;this.componentDidCatch(m.value,{componentStack:Me!==null?Me:""})}),b}function vl(p,m,b){var A=p.pingCache;if(A===null){A=p.pingCache=new zS;var O=new Set;A.set(m,O)}else O=A.get(m),O===void 0&&(O=new Set,A.set(m,O));O.has(b)||(O.add(b),p=Yg.bind(null,p,m,b),m.then(p,p))}function js(p){do{var m;if((m=p.tag===13)&&(m=p.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return p;p=p.return}while(p!==null);return null}function Ha(p,m,b,A,O){return p.mode&1?(p.flags|=65536,p.lanes=O,p):(p===m?p.flags|=65536:(p.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(m=zs(-1,1),m.tag=2,Fa(b,m))),b.lanes|=1),p)}function Ga(p){p.flags|=4}function Dg(p,m){if(p!==null&&p.child===m.child)return!0;if(m.flags&16)return!1;for(p=m.child;p!==null;){if(p.flags&12854||p.subtreeFlags&12854)return!1;p=p.sibling}return!0}var $s,Mo,xp,wp;if(Ie)$s=function(p,m){for(var b=m.child;b!==null;){if(b.tag===5||b.tag===6)F(p,b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===m)break;for(;b.sibling===null;){if(b.return===null||b.return===m)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},Mo=function(){},xp=function(p,m,b,A,O){if(p=p.memoizedProps,p!==A){var W=m.stateNode,Me=Zr(Uo.current);b=Q(W,b,p,A,O,Me),(m.updateQueue=b)&&Ga(m)}},wp=function(p,m,b,A){b!==A&&Ga(m)};else if(he){$s=function(p,m,b,A){for(var O=m.child;O!==null;){if(O.tag===5){var W=O.stateNode;b&&A&&(W=bn(W,O.type,O.memoizedProps,O)),F(p,W)}else if(O.tag===6)W=O.stateNode,b&&A&&(W=dr(W,O.memoizedProps,O)),F(p,W);else if(O.tag!==4){if(O.tag===22&&O.memoizedState!==null)W=O.child,W!==null&&(W.return=O),$s(p,O,!0,!0);else if(O.child!==null){O.child.return=O,O=O.child;continue}}if(O===m)break;for(;O.sibling===null;){if(O.return===null||O.return===m)return;O=O.return}O.sibling.return=O.return,O=O.sibling}};var Og=function(p,m,b,A){for(var O=m.child;O!==null;){if(O.tag===5){var W=O.stateNode;b&&A&&(W=bn(W,O.type,O.memoizedProps,O)),Zt(p,W)}else if(O.tag===6)W=O.stateNode,b&&A&&(W=dr(W,O.memoizedProps,O)),Zt(p,W);else if(O.tag!==4){if(O.tag===22&&O.memoizedState!==null)W=O.child,W!==null&&(W.return=O),Og(p,O,!0,!0);else if(O.child!==null){O.child.return=O,O=O.child;continue}}if(O===m)break;for(;O.sibling===null;){if(O.return===null||O.return===m)return;O=O.return}O.sibling.return=O.return,O=O.sibling}};Mo=function(p,m){var b=m.stateNode;if(!Dg(p,m)){p=b.containerInfo;var A=It(p);Og(A,m,!1,!1),b.pendingChildren=A,Ga(m),Hn(p,A)}},xp=function(p,m,b,A,O){var W=p.stateNode,Me=p.memoizedProps;if((p=Dg(p,m))&&Me===A)m.stateNode=W;else{var Oe=m.stateNode,ct=Zr(Uo.current),kt=null;Me!==A&&(kt=Q(Oe,b,Me,A,O,ct)),p&&kt===null?m.stateNode=W:(W=Et(W,kt,b,Me,A,m,p,Oe),j(W,b,A,O,ct)&&Ga(m),m.stateNode=W,p?Ga(m):$s(W,m,!1,!1))}},wp=function(p,m,b,A){b!==A?(p=Zr(Gs.current),b=Zr(Uo.current),m.stateNode=fe(A,p,b,m),Ga(m)):m.stateNode=p.stateNode}}else Mo=function(){},xp=function(){},wp=function(){};function ch(p,m){if(!Tr)switch(p.tailMode){case"hidden":m=p.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?p.tail=null:b.sibling=null;break;case"collapsed":b=p.tail;for(var A=null;b!==null;)b.alternate!==null&&(A=b),b=b.sibling;A===null?m||p.tail===null?p.tail=null:p.tail.sibling=null:A.sibling=null}}function oo(p){var m=p.alternate!==null&&p.alternate.child===p.child,b=0,A=0;if(m)for(var O=p.child;O!==null;)b|=O.lanes|O.childLanes,A|=O.subtreeFlags&14680064,A|=O.flags&14680064,O.return=p,O=O.sibling;else for(O=p.child;O!==null;)b|=O.lanes|O.childLanes,A|=O.subtreeFlags,A|=O.flags,O.return=p,O=O.sibling;return p.subtreeFlags|=A,p.childLanes=b,m}function K1(p,m,b){var A=m.pendingProps;switch(Bo(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return oo(m),null;case 1:return ar(m.type)&&Yr(),oo(m),null;case 3:return A=m.stateNode,As(),pn(xn),pn(mn),Qu(),A.pendingContext&&(A.context=A.pendingContext,A.pendingContext=null),(p===null||p.child===null)&&(Da(m)?Ga(m):p===null||p.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,_o!==null&&(Ap(_o),_o=null))),Mo(p,m),oo(m),null;case 5:ca(m),b=Zr(Gs.current);var O=m.type;if(p!==null&&m.stateNode!=null)xp(p,m,O,A,b),p.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!A){if(m.stateNode===null)throw Error(s(166));return oo(m),null}if(p=Zr(Uo.current),Da(m)){if(!ke)throw Error(s(175));p=Y(m.stateNode,m.type,m.memoizedProps,b,p,m,!gl),m.updateQueue=p,p!==null&&Ga(m)}else{var W=oe(O,A,b,p,m);$s(W,m,!1,!1),m.stateNode=W,j(W,O,A,b,p)&&Ga(m)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return oo(m),null;case 6:if(p&&m.stateNode!=null)wp(p,m,p.memoizedProps,A);else{if(typeof A!="string"&&m.stateNode===null)throw Error(s(166));if(p=Zr(Gs.current),b=Zr(Uo.current),Da(m)){if(!ke)throw Error(s(176));if(p=m.stateNode,A=m.memoizedProps,(b=U(p,A,m,!gl))&&(O=li,O!==null))switch(W=(O.mode&1)!==0,O.tag){case 3:rt(O.stateNode.containerInfo,p,A,W);break;case 5:dt(O.type,O.memoizedProps,O.stateNode,p,A,W)}b&&Ga(m)}else m.stateNode=fe(A,p,b,m)}return oo(m),null;case 13:if(pn(Cr),A=m.memoizedState,Tr&&So!==null&&m.mode&1&&!(m.flags&128)){for(p=So;p;)p=Mr(p);return ua(),m.flags|=98560,m}if(A!==null&&A.dehydrated!==null){if(A=Da(m),p===null){if(!A)throw Error(s(318));if(!ke)throw Error(s(344));if(p=m.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(s(317));ne(p,m)}else ua(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;return oo(m),null}return _o!==null&&(Ap(_o),_o=null),m.flags&128?(m.lanes=b,m):(A=A!==null,b=!1,p===null?Da(m):b=p.memoizedState!==null,A&&!b&&(m.child.flags|=8192,m.mode&1&&(p===null||Cr.current&1?Sr===0&&(Sr=3):Tp())),m.updateQueue!==null&&(m.flags|=4),oo(m),null);case 4:return As(),Mo(p,m),p===null&&Ae(m.stateNode.containerInfo),oo(m),null;case 10:return au(m.type._context),oo(m),null;case 17:return ar(m.type)&&Yr(),oo(m),null;case 19:if(pn(Cr),O=m.memoizedState,O===null)return oo(m),null;if(A=(m.flags&128)!==0,W=O.rendering,W===null)if(A)ch(O,!1);else{if(Sr!==0||p!==null&&p.flags&128)for(p=m.child;p!==null;){if(W=Vs(p),W!==null){for(m.flags|=128,ch(O,!1),p=W.updateQueue,p!==null&&(m.updateQueue=p,m.flags|=4),m.subtreeFlags=0,p=b,A=m.child;A!==null;)b=A,O=p,b.flags&=14680066,W=b.alternate,W===null?(b.childLanes=0,b.lanes=O,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=W.childLanes,b.lanes=W.lanes,b.child=W.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=W.memoizedProps,b.memoizedState=W.memoizedState,b.updateQueue=W.updateQueue,b.type=W.type,O=W.dependencies,b.dependencies=O===null?null:{lanes:O.lanes,firstContext:O.firstContext}),A=A.sibling;return Xt(Cr,Cr.current&1|2),m.child}p=p.sibling}O.tail!==null&&di()>ph&&(m.flags|=128,A=!0,ch(O,!1),m.lanes=4194304)}else{if(!A)if(p=Vs(W),p!==null){if(m.flags|=128,A=!0,p=p.updateQueue,p!==null&&(m.updateQueue=p,m.flags|=4),ch(O,!0),O.tail===null&&O.tailMode==="hidden"&&!W.alternate&&!Tr)return oo(m),null}else 2*di()-O.renderingStartTime>ph&&b!==1073741824&&(m.flags|=128,A=!0,ch(O,!1),m.lanes=4194304);O.isBackwards?(W.sibling=m.child,m.child=W):(p=O.last,p!==null?p.sibling=W:m.child=W,O.last=W)}return O.tail!==null?(m=O.tail,O.rendering=m,O.tail=m.sibling,O.renderingStartTime=di(),m.sibling=null,p=Cr.current,Xt(Cr,A?p&1|2:p&1),m):(oo(m),null);case 22:case 23:return Xg(),A=m.memoizedState!==null,p!==null&&p.memoizedState!==null!==A&&(m.flags|=8192),A&&m.mode&1?lo&1073741824&&(oo(m),Ie&&m.subtreeFlags&6&&(m.flags|=8192)):oo(m),null;case 24:return null;case 25:return null}throw Error(s(156,m.tag))}var HS=a.ReactCurrentOwner,Eo=!1;function Ki(p,m,b,A){m.child=p===null?Ju(m,null,b,A):ro(m,p.child,b,A)}function hh(p,m,b,A,O){b=b.render;var W=m.ref;return Na(m,O),A=ec(p,m,b,A,W,O),b=Jo(),p!==null&&!Eo?(m.updateQueue=p.updateQueue,m.flags&=-2053,p.lanes&=~O,X(p,m,O)):(Tr&&b&&Es(m),m.flags|=1,Ki(p,m,A,O),m.child)}function Sp(p,m,b,A,O){if(p===null){var W=b.type;return typeof W=="function"&&!WS(W)&&W.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(m.tag=15,m.type=W,Bg(p,m,W,A,O)):(p=sy(b.type,null,A,m,m.mode,O),p.ref=m.ref,p.return=m,m.child=p)}if(W=p.child,!(p.lanes&O)){var Me=W.memoizedProps;if(b=b.compare,b=b!==null?b:qu,b(Me,A)&&p.ref===m.ref)return X(p,m,O)}return m.flags|=1,p=vh(W,A),p.ref=m.ref,p.return=m,m.child=p}function Bg(p,m,b,A,O){if(p!==null&&qu(p.memoizedProps,A)&&p.ref===m.ref)if(Eo=!1,(p.lanes&O)!==0)p.flags&131072&&(Eo=!0);else return m.lanes=p.lanes,X(p,m,O);return zg(p,m,b,A,O)}function J1(p,m,b){var A=m.pendingProps,O=A.children,W=p!==null?p.memoizedState:null;if(A.mode==="hidden")if(!(m.mode&1))m.memoizedState={baseLanes:0,cachePool:null},Xt(xl,lo),lo|=b;else if(b&1073741824)m.memoizedState={baseLanes:0,cachePool:null},A=W!==null?W.baseLanes:b,Xt(xl,lo),lo|=A;else return p=W!==null?W.baseLanes|b:b,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:p,cachePool:null},m.updateQueue=null,Xt(xl,lo),lo|=p,null;else W!==null?(A=W.baseLanes|b,m.memoizedState=null):A=b,Xt(xl,lo),lo|=A;return Ki(p,m,O,b),m.child}function Ug(p,m){var b=m.ref;(p===null&&b!==null||p!==null&&p.ref!==b)&&(m.flags|=512,m.flags|=2097152)}function zg(p,m,b,A,O){var W=ar(b)?or:mn.current;return W=Jn(m,W),Na(m,O),b=ec(p,m,b,A,W,O),A=Jo(),p!==null&&!Eo?(m.updateQueue=p.updateQueue,m.flags&=-2053,p.lanes&=~O,X(p,m,O)):(Tr&&A&&Es(m),m.flags|=1,Ki(p,m,b,O),m.child)}function Q1(p,m,b,A,O){if(ar(b)){var W=!0;Ln(m)}else W=!1;if(Na(m,O),m.stateNode===null)p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),Le(m,b,A),at(m,b,A,O),A=!0;else if(p===null){var Me=m.stateNode,Oe=m.memoizedProps;Me.props=Oe;var ct=Me.context,kt=b.contextType;typeof kt=="object"&&kt!==null?kt=wo(kt):(kt=ar(b)?or:mn.current,kt=Jn(m,kt));var Jt=b.getDerivedStateFromProps,On=typeof Jt=="function"||typeof Me.getSnapshotBeforeUpdate=="function";On||typeof Me.UNSAFE_componentWillReceiveProps!="function"&&typeof Me.componentWillReceiveProps!="function"||(Oe!==A||ct!==kt)&&He(m,Me,A,kt),Ms=!1;var gn=m.memoizedState;Me.state=gn,uu(m,A,Me,O),ct=m.memoizedState,Oe!==A||gn!==ct||xn.current||Ms?(typeof Jt=="function"&&(T(m,b,Jt,A),ct=m.memoizedState),(Oe=Ms||_e(m,b,Oe,A,gn,ct,kt))?(On||typeof Me.UNSAFE_componentWillMount!="function"&&typeof Me.componentWillMount!="function"||(typeof Me.componentWillMount=="function"&&Me.componentWillMount(),typeof Me.UNSAFE_componentWillMount=="function"&&Me.UNSAFE_componentWillMount()),typeof Me.componentDidMount=="function"&&(m.flags|=4194308)):(typeof Me.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=A,m.memoizedState=ct),Me.props=A,Me.state=ct,Me.context=kt,A=Oe):(typeof Me.componentDidMount=="function"&&(m.flags|=4194308),A=!1)}else{Me=m.stateNode,Qc(p,m),Oe=m.memoizedProps,kt=m.type===m.elementType?Oe:Oi(m.type,Oe),Me.props=kt,On=m.pendingProps,gn=Me.context,ct=b.contextType,typeof ct=="object"&&ct!==null?ct=wo(ct):(ct=ar(b)?or:mn.current,ct=Jn(m,ct));var Ur=b.getDerivedStateFromProps;(Jt=typeof Ur=="function"||typeof Me.getSnapshotBeforeUpdate=="function")||typeof Me.UNSAFE_componentWillReceiveProps!="function"&&typeof Me.componentWillReceiveProps!="function"||(Oe!==On||gn!==ct)&&He(m,Me,A,ct),Ms=!1,gn=m.memoizedState,Me.state=gn,uu(m,A,Me,O);var cn=m.memoizedState;Oe!==On||gn!==cn||xn.current||Ms?(typeof Ur=="function"&&(T(m,b,Ur,A),cn=m.memoizedState),(kt=Ms||_e(m,b,kt,A,gn,cn,ct)||!1)?(Jt||typeof Me.UNSAFE_componentWillUpdate!="function"&&typeof Me.componentWillUpdate!="function"||(typeof Me.componentWillUpdate=="function"&&Me.componentWillUpdate(A,cn,ct),typeof Me.UNSAFE_componentWillUpdate=="function"&&Me.UNSAFE_componentWillUpdate(A,cn,ct)),typeof Me.componentDidUpdate=="function"&&(m.flags|=4),typeof Me.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof Me.componentDidUpdate!="function"||Oe===p.memoizedProps&&gn===p.memoizedState||(m.flags|=4),typeof Me.getSnapshotBeforeUpdate!="function"||Oe===p.memoizedProps&&gn===p.memoizedState||(m.flags|=1024),m.memoizedProps=A,m.memoizedState=cn),Me.props=A,Me.state=cn,Me.context=ct,A=kt):(typeof Me.componentDidUpdate!="function"||Oe===p.memoizedProps&&gn===p.memoizedState||(m.flags|=4),typeof Me.getSnapshotBeforeUpdate!="function"||Oe===p.memoizedProps&&gn===p.memoizedState||(m.flags|=1024),A=!1)}return Hg(p,m,b,A,W,O)}function Hg(p,m,b,A,O,W){Ug(p,m);var Me=(m.flags&128)!==0;if(!A&&!Me)return O&&Wn(m,b,!1),X(p,m,W);A=m.stateNode,HS.current=m;var Oe=Me&&typeof b.getDerivedStateFromError!="function"?null:A.render();return m.flags|=1,p!==null&&Me?(m.child=ro(m,p.child,null,W),m.child=ro(m,null,Oe,W)):Ki(p,m,Oe,W),m.memoizedState=A.state,O&&Wn(m,b,!0),m.child}function ey(p){var m=p.stateNode;m.pendingContext?hn(p,m.pendingContext,m.pendingContext!==m.context):m.context&&hn(p,m.context,!1),io(p,m.containerInfo)}function ty(p,m,b,A,O){return ua(),Ku(O),m.flags|=256,Ki(p,m,b,A),m.child}var _p={dehydrated:null,treeContext:null,retryLane:0};function Vf(p){return{baseLanes:p,cachePool:null}}function Wf(p,m,b){var A=m.pendingProps,O=Cr.current,W=!1,Me=(m.flags&128)!==0,Oe;if((Oe=Me)||(Oe=p!==null&&p.memoizedState===null?!1:(O&2)!==0),Oe?(W=!0,m.flags&=-129):(p===null||p.memoizedState!==null)&&(O|=1),Xt(Cr,O&1),p===null)return Ui(m),p=m.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?(m.mode&1?br(p)?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):(O=A.children,p=A.fallback,W?(A=m.mode,W=m.child,O={mode:"hidden",children:O},!(A&1)&&W!==null?(W.childLanes=0,W.pendingProps=O):W=ay(O,A,0,null),p=Yf(p,A,b,null),W.return=m,p.return=m,W.sibling=p,m.child=W,m.child.memoizedState=Vf(b),m.memoizedState=_p,p):Gg(m,O));if(O=p.memoizedState,O!==null){if(Oe=O.dehydrated,Oe!==null){if(Me)return m.flags&256?(m.flags&=-257,S(p,m,b,Error(s(422)))):m.memoizedState!==null?(m.child=p.child,m.flags|=128,null):(W=A.fallback,O=m.mode,A=ay({mode:"visible",children:A.children},O,0,null),W=Yf(W,O,b,null),W.flags|=2,A.return=m,W.return=m,A.sibling=W,m.child=A,m.mode&1&&ro(m,p.child,null,b),m.child.memoizedState=Vf(b),m.memoizedState=_p,W);if(!(m.mode&1))m=S(p,m,b,null);else if(br(Oe))m=S(p,m,b,Error(s(419)));else if(A=(b&p.childLanes)!==0,Eo||A){if(A=yi,A!==null){switch(b&-b){case 4:W=2;break;case 16:W=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:W=32;break;case 536870912:W=268435456;break;default:W=0}A=W&(A.suspendedLanes|b)?0:W,A!==0&&A!==O.retryLane&&(O.retryLane=A,es(p,A,-1))}Tp(),m=S(p,m,b,Error(s(421)))}else si(Oe)?(m.flags|=128,m.child=p.child,m=VS.bind(null,p),xr(Oe,m),m=null):(b=O.treeContext,ke&&(So=Oo(Oe),li=m,Tr=!0,_o=null,gl=!1,b!==null&&(un[An++]=pr,un[An++]=Ar,un[An++]=wr,pr=b.id,Ar=b.overflow,wr=m)),m=Gg(m,m.pendingProps.children),m.flags|=4096);return m}return W?(A=Vg(p,m,A.children,A.fallback,b),W=m.child,O=p.child.memoizedState,W.memoizedState=O===null?Vf(b):{baseLanes:O.baseLanes|b,cachePool:null},W.childLanes=p.childLanes&~b,m.memoizedState=_p,A):(b=ny(p,m,A.children,b),m.memoizedState=null,b)}return W?(A=Vg(p,m,A.children,A.fallback,b),W=m.child,O=p.child.memoizedState,W.memoizedState=O===null?Vf(b):{baseLanes:O.baseLanes|b,cachePool:null},W.childLanes=p.childLanes&~b,m.memoizedState=_p,A):(b=ny(p,m,A.children,b),m.memoizedState=null,b)}function Gg(p,m){return m=ay({mode:"visible",children:m},p.mode,0,null),m.return=p,p.child=m}function ny(p,m,b,A){var O=p.child;return p=O.sibling,b=vh(O,{mode:"visible",children:b}),!(m.mode&1)&&(b.lanes=A),b.return=m,b.sibling=null,p!==null&&(A=m.deletions,A===null?(m.deletions=[p],m.flags|=16):A.push(p)),m.child=b}function Vg(p,m,b,A,O){var W=m.mode;p=p.child;var Me=p.sibling,Oe={mode:"hidden",children:b};return!(W&1)&&m.child!==p?(b=m.child,b.childLanes=0,b.pendingProps=Oe,m.deletions=null):(b=vh(p,Oe),b.subtreeFlags=p.subtreeFlags&14680064),Me!==null?A=vh(Me,A):(A=Yf(A,W,O,null),A.flags|=2),A.return=m,b.return=m,b.sibling=A,m.child=b,A}function S(p,m,b,A){return A!==null&&Ku(A),ro(m,p.child,null,b),p=Gg(m,m.pendingProps.children),p.flags|=2,m.memoizedState=null,p}function M(p,m,b){p.lanes|=m;var A=p.alternate;A!==null&&(A.lanes|=m),Df(p.return,m,b)}function P(p,m,b,A,O){var W=p.memoizedState;W===null?p.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:A,tail:b,tailMode:O}:(W.isBackwards=m,W.rendering=null,W.renderingStartTime=0,W.last=A,W.tail=b,W.tailMode=O)}function z(p,m,b){var A=m.pendingProps,O=A.revealOrder,W=A.tail;if(Ki(p,m,A.children,b),A=Cr.current,A&2)A=A&1|2,m.flags|=128;else{if(p!==null&&p.flags&128)e:for(p=m.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&M(p,b,m);else if(p.tag===19)M(p,b,m);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===m)break e;for(;p.sibling===null;){if(p.return===null||p.return===m)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}A&=1}if(Xt(Cr,A),!(m.mode&1))m.memoizedState=null;else switch(O){case"forwards":for(b=m.child,O=null;b!==null;)p=b.alternate,p!==null&&Vs(p)===null&&(O=b),b=b.sibling;b=O,b===null?(O=m.child,m.child=null):(O=b.sibling,b.sibling=null),P(m,!1,O,b,W);break;case"backwards":for(b=null,O=m.child,m.child=null;O!==null;){if(p=O.alternate,p!==null&&Vs(p)===null){m.child=O;break}p=O.sibling,O.sibling=b,b=O,O=p}P(m,!0,b,null,W);break;case"together":P(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function X(p,m,b){if(p!==null&&(m.dependencies=p.dependencies),pa|=m.lanes,!(b&m.childLanes))return null;if(p!==null&&m.child!==p.child)throw Error(s(153));if(m.child!==null){for(p=m.child,b=vh(p,p.pendingProps),m.child=b,b.return=m;p.sibling!==null;)p=p.sibling,b=b.sibling=vh(p,p.pendingProps),b.return=m;b.sibling=null}return m.child}function te(p,m,b){switch(m.tag){case 3:ey(m),ua();break;case 5:Oa(m);break;case 1:ar(m.type)&&Ln(m);break;case 4:io(m,m.stateNode.containerInfo);break;case 10:hp(m,m.type._context,m.memoizedProps.value);break;case 13:var A=m.memoizedState;if(A!==null)return A.dehydrated!==null?(Xt(Cr,Cr.current&1),m.flags|=128,null):b&m.child.childLanes?Wf(p,m,b):(Xt(Cr,Cr.current&1),p=X(p,m,b),p!==null?p.sibling:null);Xt(Cr,Cr.current&1);break;case 19:if(A=(b&m.childLanes)!==0,p.flags&128){if(A)return z(p,m,b);m.flags|=128}var O=m.memoizedState;if(O!==null&&(O.rendering=null,O.tail=null,O.lastEffect=null),Xt(Cr,Cr.current),A)break;return null;case 22:case 23:return m.lanes=0,J1(p,m,b)}return X(p,m,b)}function re(p,m){switch(Bo(m),m.tag){case 1:return ar(m.type)&&Yr(),p=m.flags,p&65536?(m.flags=p&-65537|128,m):null;case 3:return As(),pn(xn),pn(mn),Qu(),p=m.flags,p&65536&&!(p&128)?(m.flags=p&-65537|128,m):null;case 5:return ca(m),null;case 13:if(pn(Cr),p=m.memoizedState,p!==null&&p.dehydrated!==null){if(m.alternate===null)throw Error(s(340));ua()}return p=m.flags,p&65536?(m.flags=p&-65537|128,m):null;case 19:return pn(Cr),null;case 4:return As(),null;case 10:return au(m.type._context),null;case 22:case 23:return Xg(),null;case 24:return null;default:return null}}var ae=!1,ce=!1,ye=typeof WeakSet=="function"?WeakSet:Set,xe=null;function je(p,m){var b=p.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(A){co(p,m,A)}else b.current=null}function $e(p,m,b){try{b()}catch(A){co(p,m,A)}}var Be=!1;function wt(p,m){for(q(p.containerInfo),xe=m;xe!==null;)if(p=xe,m=p.child,(p.subtreeFlags&1028)!==0&&m!==null)m.return=p,xe=m;else for(;xe!==null;){p=xe;try{var b=p.alternate;if(p.flags&1024)switch(p.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var A=b.memoizedProps,O=b.memoizedState,W=p.stateNode,Me=W.getSnapshotBeforeUpdate(p.elementType===p.type?A:Oi(p.type,A),O);W.__reactInternalSnapshotBeforeUpdate=Me}break;case 3:Ie&&Mt(p.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(s(163))}}catch(Oe){co(p,p.return,Oe)}if(m=p.sibling,m!==null){m.return=p.return,xe=m;break}xe=p.return}return b=Be,Be=!1,b}function Qe(p,m,b){var A=m.updateQueue;if(A=A!==null?A.lastEffect:null,A!==null){var O=A=A.next;do{if((O.tag&p)===p){var W=O.destroy;O.destroy=void 0,W!==void 0&&$e(m,b,W)}O=O.next}while(O!==A)}}function Re(p,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var b=m=m.next;do{if((b.tag&p)===p){var A=b.create;b.destroy=A()}b=b.next}while(b!==m)}}function De(p){var m=p.ref;if(m!==null){var b=p.stateNode;switch(p.tag){case 5:p=J(b);break;default:p=b}typeof m=="function"?m(p):m.current=p}}function mt(p,m,b){if(Us&&typeof Us.onCommitFiberUnmount=="function")try{Us.onCommitFiberUnmount(Kc,m)}catch{}switch(m.tag){case 0:case 11:case 14:case 15:if(p=m.updateQueue,p!==null&&(p=p.lastEffect,p!==null)){var A=p=p.next;do{var O=A,W=O.destroy;O=O.tag,W!==void 0&&(O&2||O&4)&&$e(m,b,W),A=A.next}while(A!==p)}break;case 1:if(je(m,b),p=m.stateNode,typeof p.componentWillUnmount=="function")try{p.props=m.memoizedProps,p.state=m.memoizedState,p.componentWillUnmount()}catch(Me){co(m,b,Me)}break;case 5:je(m,b);break;case 4:Ie?mr(p,m,b):he&&he&&(m=m.stateNode.containerInfo,b=It(m),Kn(m,b))}}function St(p,m,b){for(var A=m;;)if(mt(p,A,b),A.child===null||Ie&&A.tag===4){if(A===m)break;for(;A.sibling===null;){if(A.return===null||A.return===m)return;A=A.return}A.sibling.return=A.return,A=A.sibling}else A.child.return=A,A=A.child}function vt(p){var m=p.alternate;m!==null&&(p.alternate=null,vt(m)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(m=p.stateNode,m!==null&&Ke(m)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function $t(p){return p.tag===5||p.tag===3||p.tag===4}function Dt(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||$t(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function fn(p){if(Ie){e:{for(var m=p.return;m!==null;){if($t(m))break e;m=m.return}throw Error(s(160))}var b=m;switch(b.tag){case 5:m=b.stateNode,b.flags&32&&(Je(m),b.flags&=-33),b=Dt(p),sr(p,b,m);break;case 3:case 4:m=b.stateNode.containerInfo,b=Dt(p),Ot(p,b,m);break;default:throw Error(s(161))}}}function Ot(p,m,b){var A=p.tag;if(A===5||A===6)p=p.stateNode,m?Nt(b,p,m):xt(b,p);else if(A!==4&&(p=p.child,p!==null))for(Ot(p,m,b),p=p.sibling;p!==null;)Ot(p,m,b),p=p.sibling}function sr(p,m,b){var A=p.tag;if(A===5||A===6)p=p.stateNode,m?Ct(b,p,m):ft(b,p);else if(A!==4&&(p=p.child,p!==null))for(sr(p,m,b),p=p.sibling;p!==null;)sr(p,m,b),p=p.sibling}function mr(p,m,b){for(var A=m,O=!1,W,Me;;){if(!O){O=A.return;e:for(;;){if(O===null)throw Error(s(160));switch(W=O.stateNode,O.tag){case 5:Me=!1;break e;case 3:W=W.containerInfo,Me=!0;break e;case 4:W=W.containerInfo,Me=!0;break e}O=O.return}O=!0}if(A.tag===5||A.tag===6)St(p,A,b),Me?be(W,A.stateNode):At(W,A.stateNode);else if(A.tag===18)Me?Ye(W,A.stateNode):Xe(W,A.stateNode);else if(A.tag===4){if(A.child!==null){W=A.stateNode.containerInfo,Me=!0,A.child.return=A,A=A.child;continue}}else if(mt(p,A,b),A.child!==null){A.child.return=A,A=A.child;continue}if(A===m)break;for(;A.sibling===null;){if(A.return===null||A.return===m)return;A=A.return,A.tag===4&&(O=!1)}A.sibling.return=A.return,A=A.sibling}}function er(p,m){if(Ie){switch(m.tag){case 0:case 11:case 14:case 15:Qe(3,m,m.return),Re(3,m),Qe(5,m,m.return);return;case 1:return;case 5:var b=m.stateNode;if(b!=null){var A=m.memoizedProps;p=p!==null?p.memoizedProps:A;var O=m.type,W=m.updateQueue;m.updateQueue=null,W!==null&&Wt(b,W,O,p,A,m)}return;case 6:if(m.stateNode===null)throw Error(s(162));b=m.memoizedProps,ht(m.stateNode,p!==null?p.memoizedProps:b,b);return;case 3:ke&&p!==null&&p.memoizedState.isDehydrated&&me(m.stateNode.containerInfo);return;case 12:return;case 13:jn(m);return;case 19:jn(m);return;case 17:return}throw Error(s(163))}switch(m.tag){case 0:case 11:case 14:case 15:Qe(3,m,m.return),Re(3,m),Qe(5,m,m.return);return;case 12:return;case 13:jn(m);return;case 19:jn(m);return;case 3:ke&&p!==null&&p.memoizedState.isDehydrated&&me(m.stateNode.containerInfo);break;case 22:case 23:return}e:if(he){switch(m.tag){case 1:case 5:case 6:break e;case 3:case 4:m=m.stateNode,Kn(m.containerInfo,m.pendingChildren);break e}throw Error(s(163))}}function jn(p){var m=p.updateQueue;if(m!==null){p.updateQueue=null;var b=p.stateNode;b===null&&(b=p.stateNode=new ye),m.forEach(function(A){var O=Kg.bind(null,p,A);b.has(A)||(b.add(A),A.then(O,O))})}}function Ir(p,m){for(xe=m;xe!==null;){m=xe;var b=m.deletions;if(b!==null)for(var A=0;A<b.length;A++){var O=b[A];try{var W=p;Ie?mr(W,O,m):St(W,O,m);var Me=O.alternate;Me!==null&&(Me.return=null),O.return=null}catch(ln){co(O,m,ln)}}if(b=m.child,m.subtreeFlags&12854&&b!==null)b.return=m,xe=b;else for(;xe!==null;){m=xe;try{var Oe=m.flags;if(Oe&32&&Ie&&Je(m.stateNode),Oe&512){var ct=m.alternate;if(ct!==null){var kt=ct.ref;kt!==null&&(typeof kt=="function"?kt(null):kt.current=null)}}if(Oe&8192)switch(m.tag){case 13:if(m.memoizedState!==null){var Jt=m.alternate;(Jt===null||Jt.memoizedState===null)&&($f=di())}break;case 22:var On=m.memoizedState!==null,gn=m.alternate,Ur=gn!==null&&gn.memoizedState!==null;if(b=m,Ie){e:if(A=b,O=On,W=null,Ie)for(var cn=A;;){if(cn.tag===5){if(W===null){W=cn;var ns=cn.stateNode;O?pt(ns):Ue(cn.stateNode,cn.memoizedProps)}}else if(cn.tag===6){if(W===null){var Ya=cn.stateNode;O?Te(Ya):qe(Ya,cn.memoizedProps)}}else if((cn.tag!==22&&cn.tag!==23||cn.memoizedState===null||cn===A)&&cn.child!==null){cn.child.return=cn,cn=cn.child;continue}if(cn===A)break;for(;cn.sibling===null;){if(cn.return===null||cn.return===A)break e;W===cn&&(W=null),cn=cn.return}W===cn&&(W=null),cn.sibling.return=cn.return,cn=cn.sibling}}if(On&&!Ur&&b.mode&1){xe=b;for(var Ze=b.child;Ze!==null;){for(b=xe=Ze;xe!==null;){A=xe;var ze=A.child;switch(A.tag){case 0:case 11:case 14:case 15:Qe(4,A,A.return);break;case 1:je(A,A.return);var it=A.stateNode;if(typeof it.componentWillUnmount=="function"){var qt=A.return;try{it.props=A.memoizedProps,it.state=A.memoizedState,it.componentWillUnmount()}catch(ln){co(A,qt,ln)}}break;case 5:je(A,A.return);break;case 22:if(A.memoizedState!==null){Ho(b);continue}}ze!==null?(ze.return=A,xe=ze):Ho(b)}Ze=Ze.sibling}}}switch(Oe&4102){case 2:fn(m),m.flags&=-3;break;case 6:fn(m),m.flags&=-3,er(m.alternate,m);break;case 4096:m.flags&=-4097;break;case 4100:m.flags&=-4097,er(m.alternate,m);break;case 4:er(m.alternate,m)}}catch(ln){co(m,m.return,ln)}if(b=m.sibling,b!==null){b.return=m.return,xe=b;break}xe=m.return}}}function Pr(p,m,b){xe=p,kn(p)}function kn(p,m,b){for(var A=(p.mode&1)!==0;xe!==null;){var O=xe,W=O.child;if(O.tag===22&&A){var Me=O.memoizedState!==null||ae;if(!Me){var Oe=O.alternate,ct=Oe!==null&&Oe.memoizedState!==null||ce;Oe=ae;var kt=ce;if(ae=Me,(ce=ct)&&!kt)for(xe=O;xe!==null;)Me=xe,ct=Me.child,Me.tag===22&&Me.memoizedState!==null?mi(O):ct!==null?(ct.return=Me,xe=ct):mi(O);for(;W!==null;)xe=W,kn(W),W=W.sibling;xe=O,ae=Oe,ce=kt}pi(p)}else O.subtreeFlags&8772&&W!==null?(W.return=O,xe=W):pi(p)}}function pi(p){for(;xe!==null;){var m=xe;if(m.flags&8772){var b=m.alternate;try{if(m.flags&8772)switch(m.tag){case 0:case 11:case 15:ce||Re(5,m);break;case 1:var A=m.stateNode;if(m.flags&4&&!ce)if(b===null)A.componentDidMount();else{var O=m.elementType===m.type?b.memoizedProps:Oi(m.type,b.memoizedProps);A.componentDidUpdate(O,b.memoizedState,A.__reactInternalSnapshotBeforeUpdate)}var W=m.updateQueue;W!==null&&ml(m,W,A);break;case 3:var Me=m.updateQueue;if(Me!==null){if(b=null,m.child!==null)switch(m.child.tag){case 5:b=J(m.child.stateNode);break;case 1:b=m.child.stateNode}ml(m,Me,b)}break;case 5:var Oe=m.stateNode;b===null&&m.flags&4&&Pe(Oe,m.type,m.memoizedProps,m);break;case 6:break;case 4:break;case 12:break;case 13:if(ke&&m.memoizedState===null){var ct=m.alternate;if(ct!==null){var kt=ct.memoizedState;if(kt!==null){var Jt=kt.dehydrated;Jt!==null&&Se(Jt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(s(163))}ce||m.flags&512&&De(m)}catch(On){co(m,m.return,On)}}if(m===p){xe=null;break}if(b=m.sibling,b!==null){b.return=m.return,xe=b;break}xe=m.return}}function Ho(p){for(;xe!==null;){var m=xe;if(m===p){xe=null;break}var b=m.sibling;if(b!==null){b.return=m.return,xe=b;break}xe=m.return}}function mi(p){for(;xe!==null;){var m=xe;try{switch(m.tag){case 0:case 11:case 15:var b=m.return;try{Re(4,m)}catch(ct){co(m,b,ct)}break;case 1:var A=m.stateNode;if(typeof A.componentDidMount=="function"){var O=m.return;try{A.componentDidMount()}catch(ct){co(m,O,ct)}}var W=m.return;try{De(m)}catch(ct){co(m,W,ct)}break;case 5:var Me=m.return;try{De(m)}catch(ct){co(m,Me,ct)}}}catch(ct){co(m,m.return,ct)}if(m===p){xe=null;break}var Oe=m.sibling;if(Oe!==null){Oe.return=m.return,xe=Oe;break}xe=m.return}}var so=0,ur=1,Ao=2,To=3,gi=4;if(typeof Symbol=="function"&&Symbol.for){var vi=Symbol.for;so=vi("selector.component"),ur=vi("selector.has_pseudo_class"),Ao=vi("selector.role"),To=vi("selector.test_id"),gi=vi("selector.text")}function ao(p){var m=Ne(p);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(s(364));return m}if(p=yt(p),p===null)throw Error(s(362));return p.stateNode.current}function Qo(p,m){switch(m.$$typeof){case so:if(p.type===m.value)return!0;break;case ur:e:{m=m.value,p=[p,0];for(var b=0;b<p.length;){var A=p[b++],O=p[b++],W=m[O];if(A.tag!==5||!ee(A)){for(;W!=null&&Qo(A,W);)O++,W=m[O];if(O===m.length){m=!0;break e}else for(A=A.child;A!==null;)p.push(A,O),A=A.sibling}}m=!1}return m;case Ao:if(p.tag===5&&Fe(p.stateNode,m.value))return!0;break;case gi:if((p.tag===5||p.tag===6)&&(p=de(p),p!==null&&0<=p.indexOf(m.value)))return!0;break;case To:if(p.tag===5&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(s(365))}return!1}function qs(p){switch(p.$$typeof){case so:return"<"+(R(p.value)||"Unknown")+">";case ur:return":has("+(qs(p)||"")+")";case Ao:return'[role="'+p.value+'"]';case gi:return'"'+p.value+'"';case To:return'[data-testname="'+p.value+'"]';default:throw Error(s(365))}}function zi(p,m){var b=[];p=[p,0];for(var A=0;A<p.length;){var O=p[A++],W=p[A++],Me=m[W];if(O.tag!==5||!ee(O)){for(;Me!=null&&Qo(O,Me);)W++,Me=m[W];if(W===m.length)b.push(O);else for(O=O.child;O!==null;)p.push(O,W),O=O.sibling}}return b}function da(p,m){if(!nt)throw Error(s(363));p=ao(p),p=zi(p,m),m=[],p=Array.from(p);for(var b=0;b<p.length;){var A=p[b++];if(A.tag===5)ee(A)||m.push(A.stateNode);else for(A=A.child;A!==null;)p.push(A),A=A.sibling}return m}var rc=Math.ceil,yl=a.ReactCurrentDispatcher,Va=a.ReactCurrentOwner,In=a.ReactCurrentBatchConfig,Dn=0,yi=null,xi=null,Pi=0,lo=0,xl=Ht(0),Sr=0,Wa=null,pa=0,jf=0,fh=0,dh=null,uo=null,$f=0,ph=1/0;function ja(){ph=di()+500}var bp=!1,Wg=null,$a=null,ma=!1,du=null,Mp=0,qf=0,Ep=null,ic=-1,Xf=0;function Co(){return Dn&6?di():ic!==-1?ic:ic=di()}function ga(p){return p.mode&1?Dn&2&&Pi!==0?Pi&-Pi:cp.transition!==null?(Xf===0&&(p=Gu,Gu<<=1,!(Gu&4194240)&&(Gu=64),Xf=p),Xf):(p=rr,p!==0?p:ie()):1}function es(p,m,b){if(50<qf)throw qf=0,Ep=null,Error(s(185));var A=pu(p,m);return A===null?null:(La(A,m,b),(!(Dn&2)||A!==yi)&&(A===yi&&(!(Dn&2)&&(jf|=m),Sr===4&&Vo(A,Pi)),Go(A,b),m===1&&Dn===0&&!(p.mode&1)&&(ja(),ka&&_s())),A)}function pu(p,m){p.lanes|=m;var b=p.alternate;for(b!==null&&(b.lanes|=m),b=p,p=p.return;p!==null;)p.childLanes|=m,b=p.alternate,b!==null&&(b.childLanes|=m),b=p,p=p.return;return b.tag===3?b.stateNode:null}function Go(p,m){var b=p.callbackNode;Lg(p,m);var A=Xc(p,p===yi?Pi:0);if(A===0)b!==null&&lp(b),p.callbackNode=null,p.callbackPriority=0;else if(m=A&-A,p.callbackPriority!==m){if(b!=null&&lp(b),m===1)p.tag===0?up($g.bind(null,p)):$u($g.bind(null,p)),Ve?We(function(){Dn===0&&_s()}):wn(Yc,_s),b=null;else{switch(Nf(A)){case 1:b=Yc;break;case 4:b=Zc;break;case 16:b=Vu;break;case 536870912:b=kg;break;default:b=Vu}b=yT(b,ry.bind(null,p))}p.callbackPriority=m,p.callbackNode=b}}function ry(p,m){if(ic=-1,Xf=0,Dn&6)throw Error(s(327));var b=p.callbackNode;if(ts()&&p.callbackNode!==b)return null;var A=Xc(p,p===yi?Pi:0);if(A===0)return null;if(A&30||A&p.expiredLanes||m)m=Cp(p,A);else{m=A;var O=Dn;Dn|=2;var W=iy();(yi!==p||Pi!==m)&&(ja(),mu(p,m));do try{GS();break}catch(Oe){oc(p,Oe)}while(1);dl(),yl.current=W,Dn=O,xi!==null?m=0:(yi=null,Pi=0,m=Sr)}if(m!==0){if(m===2&&(O=sa(p),O!==0&&(A=O,m=mh(p,O))),m===1)throw b=Wa,mu(p,0),Vo(p,A),Go(p,di()),b;if(m===6)Vo(p,A);else{if(O=p.current.alternate,!(A&30)&&!jg(O)&&(m=Cp(p,A),m===2&&(W=sa(p),W!==0&&(A=W,m=mh(p,W))),m===1))throw b=Wa,mu(p,0),Vo(p,A),Go(p,di()),b;switch(p.finishedWork=O,p.finishedLanes=A,m){case 0:case 1:throw Error(s(345));case 2:qa(p,uo);break;case 3:if(Vo(p,A),(A&130023424)===A&&(m=$f+500-di(),10<m)){if(Xc(p,0)!==0)break;if(O=p.suspendedLanes,(O&A)!==A){Co(),p.pingedLanes|=p.suspendedLanes&O;break}p.timeoutHandle=we(qa.bind(null,p,uo),m);break}qa(p,uo);break;case 4:if(Vo(p,A),(A&4194240)===A)break;for(m=p.eventTimes,O=-1;0<A;){var Me=31-kr(A);W=1<<Me,Me=m[Me],Me>O&&(O=Me),A&=~W}if(A=O,A=di()-A,A=(120>A?120:480>A?480:1080>A?1080:1920>A?1920:3e3>A?3e3:4320>A?4320:1960*rc(A/1960))-A,10<A){p.timeoutHandle=we(qa.bind(null,p,uo),A);break}qa(p,uo);break;case 5:qa(p,uo);break;default:throw Error(s(329))}}}return Go(p,di()),p.callbackNode===b?ry.bind(null,p):null}function mh(p,m){var b=dh;return p.current.memoizedState.isDehydrated&&(mu(p,m).flags|=256),p=Cp(p,m),p!==2&&(m=uo,uo=b,m!==null&&Ap(m)),p}function Ap(p){uo===null?uo=p:uo.push.apply(uo,p)}function jg(p){for(var m=p;;){if(m.flags&16384){var b=m.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var A=0;A<b.length;A++){var O=b[A],W=O.getSnapshot;O=O.value;try{if(!no(W(),O))return!1}catch{return!1}}}if(b=m.child,m.subtreeFlags&16384&&b!==null)b.return=m,m=b;else{if(m===p)break;for(;m.sibling===null;){if(m.return===null||m.return===p)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Vo(p,m){for(m&=~fh,m&=~jf,p.suspendedLanes|=m,p.pingedLanes&=~m,p=p.expirationTimes;0<m;){var b=31-kr(m),A=1<<b;p[b]=-1,m&=~A}}function $g(p){if(Dn&6)throw Error(s(327));ts();var m=Xc(p,0);if(!(m&1))return Go(p,di()),null;var b=Cp(p,m);if(p.tag!==0&&b===2){var A=sa(p);A!==0&&(m=A,b=mh(p,A))}if(b===1)throw b=Wa,mu(p,0),Vo(p,m),Go(p,di()),b;if(b===6)throw Error(s(345));return p.finishedWork=p.current.alternate,p.finishedLanes=m,qa(p,uo),Go(p,di()),null}function qg(p){du!==null&&du.tag===0&&!(Dn&6)&&ts();var m=Dn;Dn|=1;var b=In.transition,A=rr;try{if(In.transition=null,rr=1,p)return p()}finally{rr=A,In.transition=b,Dn=m,!(Dn&6)&&_s()}}function Xg(){lo=xl.current,pn(xl)}function mu(p,m){p.finishedWork=null,p.finishedLanes=0;var b=p.timeoutHandle;if(b!==Ce&&(p.timeoutHandle=Ce,Ee(b)),xi!==null)for(b=xi.return;b!==null;){var A=b;switch(Bo(A),A.tag){case 1:A=A.type.childContextTypes,A!=null&&Yr();break;case 3:As(),pn(xn),pn(mn),Qu();break;case 5:ca(A);break;case 4:As();break;case 13:pn(Cr);break;case 19:pn(Cr);break;case 10:au(A.type._context);break;case 22:case 23:Xg()}b=b.return}if(yi=p,xi=p=vh(p.current,null),Pi=lo=m,Sr=0,Wa=null,fh=jf=pa=0,uo=dh=null,bs!==null){for(m=0;m<bs.length;m++)if(b=bs[m],A=b.interleaved,A!==null){b.interleaved=null;var O=A.next,W=b.pending;if(W!==null){var Me=W.next;W.next=O,A.next=Me}b.pending=A}bs=null}return p}function oc(p,m){do{var b=xi;try{if(dl(),Zi.current=uh,Ba){for(var A=Br.memoizedState;A!==null;){var O=A.queue;O!==null&&(O.pending=null),A=A.next}Ba=!1}if(ha=0,jr=Ti=Br=null,Ws=!1,fa=0,Va.current=null,b===null||b.return===null){Sr=1,Wa=m,xi=null;break}e:{var W=p,Me=b.return,Oe=b,ct=m;if(m=Pi,Oe.flags|=32768,ct!==null&&typeof ct=="object"&&typeof ct.then=="function"){var kt=ct,Jt=Oe,On=Jt.tag;if(!(Jt.mode&1)&&(On===0||On===11||On===15)){var gn=Jt.alternate;gn?(Jt.updateQueue=gn.updateQueue,Jt.memoizedState=gn.memoizedState,Jt.lanes=gn.lanes):(Jt.updateQueue=null,Jt.memoizedState=null)}var Ur=js(Me);if(Ur!==null){Ur.flags&=-257,Ha(Ur,Me,Oe,W,m),Ur.mode&1&&vl(W,kt,m),m=Ur,ct=kt;var cn=m.updateQueue;if(cn===null){var ns=new Set;ns.add(ct),m.updateQueue=ns}else cn.add(ct);break e}else{if(!(m&1)){vl(W,kt,m),Tp();break e}ct=Error(s(426))}}else if(Tr&&Oe.mode&1){var Ya=js(Me);if(Ya!==null){!(Ya.flags&65536)&&(Ya.flags|=256),Ha(Ya,Me,Oe,W,m),Ku(ct);break e}}W=ct,Sr!==4&&(Sr=2),dh===null?dh=[W]:dh.push(W),ct=yp(ct,Oe),Oe=Me;do{switch(Oe.tag){case 3:Oe.flags|=65536,m&=-m,Oe.lanes|=m;var Ze=Y1(Oe,ct,m);lu(Oe,Ze);break e;case 1:W=ct;var ze=Oe.type,it=Oe.stateNode;if(!(Oe.flags&128)&&(typeof ze.getDerivedStateFromError=="function"||it!==null&&typeof it.componentDidCatch=="function"&&($a===null||!$a.has(it)))){Oe.flags|=65536,m&=-m,Oe.lanes|=m;var qt=Z1(Oe,W,m);lu(Oe,qt);break e}}Oe=Oe.return}while(Oe!==null)}Pp(b)}catch(ln){m=ln,xi===b&&b!==null&&(xi=b=b.return);continue}break}while(1)}function iy(){var p=yl.current;return yl.current=uh,p===null?uh:p}function Tp(){(Sr===0||Sr===3||Sr===2)&&(Sr=4),yi===null||!(pa&268435455)&&!(jf&268435455)||Vo(yi,Pi)}function Cp(p,m){var b=Dn;Dn|=2;var A=iy();yi===p&&Pi===m||mu(p,m);do try{oy();break}catch(O){oc(p,O)}while(1);if(dl(),Dn=b,yl.current=A,xi!==null)throw Error(s(261));return yi=null,Pi=0,Sr}function oy(){for(;xi!==null;)gh(xi)}function GS(){for(;xi!==null&&!Rg();)gh(xi)}function gh(p){var m=Lp(p.alternate,p,lo);p.memoizedProps=p.pendingProps,m===null?Pp(p):xi=m,Va.current=null}function Pp(p){var m=p;do{var b=m.alternate;if(p=m.return,m.flags&32768){if(b=re(b,m),b!==null){b.flags&=32767,xi=b;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{Sr=6,xi=null;return}}else if(b=K1(b,m,lo),b!==null){xi=b;return}if(m=m.sibling,m!==null){xi=m;return}xi=m=p}while(m!==null);Sr===0&&(Sr=5)}function qa(p,m){var b=rr,A=In.transition;try{In.transition=null,rr=1,wl(p,m,b)}finally{In.transition=A,rr=b}return null}function wl(p,m,b){do ts();while(du!==null);if(Dn&6)throw Error(s(327));var A=p.finishedWork,O=p.finishedLanes;if(A===null)return null;if(p.finishedWork=null,p.finishedLanes=0,A===p.current)throw Error(s(177));p.callbackNode=null,p.callbackPriority=0;var W=A.lanes|A.childLanes;if(ap(p,W),p===yi&&(xi=yi=null,Pi=0),!(A.subtreeFlags&2064)&&!(A.flags&2064)||ma||(ma=!0,yT(Vu,function(){return ts(),null})),W=(A.flags&15990)!==0,A.subtreeFlags&15990||W){W=In.transition,In.transition=null;var Me=rr;rr=1;var Oe=Dn;Dn|=4,Va.current=null,wt(p,A),Ir(p,A),Z(p.containerInfo),p.current=A,Pr(A),Ra(),Dn=Oe,rr=Me,In.transition=W}else p.current=A;if(ma&&(ma=!1,du=p,Mp=O),W=p.pendingLanes,W===0&&($a=null),Ff(A.stateNode),Go(p,di()),m!==null)for(b=p.onRecoverableError,A=0;A<m.length;A++)b(m[A]);if(bp)throw bp=!1,p=Wg,Wg=null,p;return Mp&1&&p.tag!==0&&ts(),W=p.pendingLanes,W&1?p===Ep?qf++:(qf=0,Ep=p):qf=0,_s(),null}function ts(){if(du!==null){var p=Nf(Mp),m=In.transition,b=rr;try{if(In.transition=null,rr=16>p?16:p,du===null)var A=!1;else{if(p=du,du=null,Mp=0,Dn&6)throw Error(s(331));var O=Dn;for(Dn|=4,xe=p.current;xe!==null;){var W=xe,Me=W.child;if(xe.flags&16){var Oe=W.deletions;if(Oe!==null){for(var ct=0;ct<Oe.length;ct++){var kt=Oe[ct];for(xe=kt;xe!==null;){var Jt=xe;switch(Jt.tag){case 0:case 11:case 15:Qe(8,Jt,W)}var On=Jt.child;if(On!==null)On.return=Jt,xe=On;else for(;xe!==null;){Jt=xe;var gn=Jt.sibling,Ur=Jt.return;if(vt(Jt),Jt===kt){xe=null;break}if(gn!==null){gn.return=Ur,xe=gn;break}xe=Ur}}}var cn=W.alternate;if(cn!==null){var ns=cn.child;if(ns!==null){cn.child=null;do{var Ya=ns.sibling;ns.sibling=null,ns=Ya}while(ns!==null)}}xe=W}}if(W.subtreeFlags&2064&&Me!==null)Me.return=W,xe=Me;else e:for(;xe!==null;){if(W=xe,W.flags&2048)switch(W.tag){case 0:case 11:case 15:Qe(9,W,W.return)}var Ze=W.sibling;if(Ze!==null){Ze.return=W.return,xe=Ze;break e}xe=W.return}}var ze=p.current;for(xe=ze;xe!==null;){Me=xe;var it=Me.child;if(Me.subtreeFlags&2064&&it!==null)it.return=Me,xe=it;else e:for(Me=ze;xe!==null;){if(Oe=xe,Oe.flags&2048)try{switch(Oe.tag){case 0:case 11:case 15:Re(9,Oe)}}catch(ln){co(Oe,Oe.return,ln)}if(Oe===Me){xe=null;break e}var qt=Oe.sibling;if(qt!==null){qt.return=Oe.return,xe=qt;break e}xe=Oe.return}}if(Dn=O,_s(),Us&&typeof Us.onPostCommitFiberRoot=="function")try{Us.onPostCommitFiberRoot(Kc,p)}catch{}A=!0}return A}finally{rr=b,In.transition=m}}return!1}function Sl(p,m,b){m=yp(b,m),m=Y1(p,m,1),Fa(p,m),m=Co(),p=pu(p,1),p!==null&&(La(p,1,m),Go(p,m))}function co(p,m,b){if(p.tag===3)Sl(p,p,b);else for(;m!==null;){if(m.tag===3){Sl(m,p,b);break}else if(m.tag===1){var A=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&($a===null||!$a.has(A))){p=yp(b,p),p=Z1(m,p,1),Fa(m,p),p=Co(),m=pu(m,1),m!==null&&(La(m,1,p),Go(m,p));break}}m=m.return}}function Yg(p,m,b){var A=p.pingCache;A!==null&&A.delete(m),m=Co(),p.pingedLanes|=p.suspendedLanes&b,yi===p&&(Pi&b)===b&&(Sr===4||Sr===3&&(Pi&130023424)===Pi&&500>di()-$f?mu(p,0):fh|=b),Go(p,m)}function Zg(p,m){m===0&&(p.mode&1?(m=qc,qc<<=1,!(qc&130023424)&&(qc=4194304)):m=1);var b=Co();p=pu(p,m),p!==null&&(La(p,m,b),Go(p,b))}function VS(p){var m=p.memoizedState,b=0;m!==null&&(b=m.retryLane),Zg(p,b)}function Kg(p,m){var b=0;switch(p.tag){case 13:var A=p.stateNode,O=p.memoizedState;O!==null&&(b=O.retryLane);break;case 19:A=p.stateNode;break;default:throw Error(s(314))}A!==null&&A.delete(m),Zg(p,b)}var Lp;Lp=function(p,m,b){if(p!==null)if(p.memoizedProps!==m.pendingProps||xn.current)Eo=!0;else{if(!(p.lanes&b)&&!(m.flags&128))return Eo=!1,te(p,m,b);Eo=!!(p.flags&131072)}else Eo=!1,Tr&&m.flags&1048576&&Bi(m,_n,m.index);switch(m.lanes=0,m.tag){case 2:var A=m.type;p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),p=m.pendingProps;var O=Jn(m,mn.current);Na(m,b),O=ec(null,m,A,p,O,b);var W=Jo();return m.flags|=1,typeof O=="object"&&O!==null&&typeof O.render=="function"&&O.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,ar(A)?(W=!0,Ln(m)):W=!1,m.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,Yu(m),O.updater=K,m.stateNode=O,O._reactInternals=m,at(m,A,p,b),m=Hg(null,m,A,!0,W,b)):(m.tag=0,Tr&&W&&Es(m),Ki(null,m,O,b),m=m.child),m;case 16:A=m.elementType;e:{switch(p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),p=m.pendingProps,O=A._init,A=O(A._payload),m.type=A,O=m.tag=LB(A),p=Oi(A,p),O){case 0:m=zg(null,m,A,p,b);break e;case 1:m=Q1(null,m,A,p,b);break e;case 11:m=hh(null,m,A,p,b);break e;case 14:m=Sp(null,m,A,Oi(A.type,p),b);break e}throw Error(s(306,A,""))}return m;case 0:return A=m.type,O=m.pendingProps,O=m.elementType===A?O:Oi(A,O),zg(p,m,A,O,b);case 1:return A=m.type,O=m.pendingProps,O=m.elementType===A?O:Oi(A,O),Q1(p,m,A,O,b);case 3:e:{if(ey(m),p===null)throw Error(s(387));A=m.pendingProps,W=m.memoizedState,O=W.element,Qc(p,m),uu(m,A,null,b);var Me=m.memoizedState;if(A=Me.element,ke&&W.isDehydrated)if(W={element:A,isDehydrated:!1,cache:Me.cache,transitions:Me.transitions},m.updateQueue.baseState=W,m.memoizedState=W,m.flags&256){O=Error(s(423)),m=ty(p,m,A,b,O);break e}else if(A!==O){O=Error(s(424)),m=ty(p,m,A,b,O);break e}else for(ke&&(So=Ko(m.stateNode.containerInfo),li=m,Tr=!0,_o=null,gl=!1),b=Ju(m,null,A,b),m.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(ua(),A===O){m=X(p,m,b);break e}Ki(p,m,A,b)}m=m.child}return m;case 5:return Oa(m),p===null&&Ui(m),A=m.type,O=m.pendingProps,W=p!==null?p.memoizedProps:null,Me=O.children,se(A,O)?Me=null:W!==null&&se(A,W)&&(m.flags|=32),Ug(p,m),Ki(p,m,Me,b),m.child;case 6:return p===null&&Ui(m),null;case 13:return Wf(p,m,b);case 4:return io(m,m.stateNode.containerInfo),A=m.pendingProps,p===null?m.child=ro(m,null,A,b):Ki(p,m,A,b),m.child;case 11:return A=m.type,O=m.pendingProps,O=m.elementType===A?O:Oi(A,O),hh(p,m,A,O,b);case 7:return Ki(p,m,m.pendingProps,b),m.child;case 8:return Ki(p,m,m.pendingProps.children,b),m.child;case 12:return Ki(p,m,m.pendingProps.children,b),m.child;case 10:e:{if(A=m.type._context,O=m.pendingProps,W=m.memoizedProps,Me=O.value,hp(m,A,Me),W!==null)if(no(W.value,Me)){if(W.children===O.children&&!xn.current){m=X(p,m,b);break e}}else for(W=m.child,W!==null&&(W.return=m);W!==null;){var Oe=W.dependencies;if(Oe!==null){Me=W.child;for(var ct=Oe.firstContext;ct!==null;){if(ct.context===A){if(W.tag===1){ct=zs(-1,b&-b),ct.tag=2;var kt=W.updateQueue;if(kt!==null){kt=kt.shared;var Jt=kt.pending;Jt===null?ct.next=ct:(ct.next=Jt.next,Jt.next=ct),kt.pending=ct}}W.lanes|=b,ct=W.alternate,ct!==null&&(ct.lanes|=b),Df(W.return,b,m),Oe.lanes|=b;break}ct=ct.next}}else if(W.tag===10)Me=W.type===m.type?null:W.child;else if(W.tag===18){if(Me=W.return,Me===null)throw Error(s(341));Me.lanes|=b,Oe=Me.alternate,Oe!==null&&(Oe.lanes|=b),Df(Me,b,m),Me=W.sibling}else Me=W.child;if(Me!==null)Me.return=W;else for(Me=W;Me!==null;){if(Me===m){Me=null;break}if(W=Me.sibling,W!==null){W.return=Me.return,Me=W;break}Me=Me.return}W=Me}Ki(p,m,O.children,b),m=m.child}return m;case 9:return O=m.type,A=m.pendingProps.children,Na(m,b),O=wo(O),A=A(O),m.flags|=1,Ki(p,m,A,b),m.child;case 14:return A=m.type,O=Oi(A,m.pendingProps),O=Oi(A.type,O),Sp(p,m,A,O,b);case 15:return Bg(p,m,m.type,m.pendingProps,b);case 17:return A=m.type,O=m.pendingProps,O=m.elementType===A?O:Oi(A,O),p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),m.tag=1,ar(A)?(p=!0,Ln(m)):p=!1,Na(m,b),Le(m,A,O),at(m,A,O,b),Hg(null,m,A,!0,p,b);case 19:return z(p,m,b);case 22:return J1(p,m,b)}throw Error(s(156,m.tag))};function yT(p,m){return wn(p,m)}function PB(p,m,b,A){this.tag=p,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xa(p,m,b,A){return new PB(p,m,b,A)}function WS(p){return p=p.prototype,!(!p||!p.isReactComponent)}function LB(p){if(typeof p=="function")return WS(p)?1:0;if(p!=null){if(p=p.$$typeof,p===y)return 11;if(p===x)return 14}return 2}function vh(p,m){var b=p.alternate;return b===null?(b=Xa(p.tag,m,p.key,p.mode),b.elementType=p.elementType,b.type=p.type,b.stateNode=p.stateNode,b.alternate=p,p.alternate=b):(b.pendingProps=m,b.type=p.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=p.flags&14680064,b.childLanes=p.childLanes,b.lanes=p.lanes,b.child=p.child,b.memoizedProps=p.memoizedProps,b.memoizedState=p.memoizedState,b.updateQueue=p.updateQueue,m=p.dependencies,b.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},b.sibling=p.sibling,b.index=p.index,b.ref=p.ref,b}function sy(p,m,b,A,O,W){var Me=2;if(A=p,typeof p=="function")WS(p)&&(Me=1);else if(typeof p=="string")Me=5;else e:switch(p){case c:return Yf(b.children,O,W,m);case h:Me=8,O|=8;break;case f:return p=Xa(12,b,m,O|2),p.elementType=f,p.lanes=W,p;case w:return p=Xa(13,b,m,O),p.elementType=w,p.lanes=W,p;case g:return p=Xa(19,b,m,O),p.elementType=g,p.lanes=W,p;case E:return ay(b,O,W,m);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case d:Me=10;break e;case v:Me=9;break e;case y:Me=11;break e;case x:Me=14;break e;case _:Me=16,A=null;break e}throw Error(s(130,p==null?p:typeof p,""))}return m=Xa(Me,b,m,O),m.elementType=p,m.type=A,m.lanes=W,m}function Yf(p,m,b,A){return p=Xa(7,p,A,m),p.lanes=b,p}function ay(p,m,b,A){return p=Xa(22,p,A,m),p.elementType=E,p.lanes=b,p.stateNode={},p}function jS(p,m,b){return p=Xa(6,p,null,m),p.lanes=b,p}function $S(p,m,b){return m=Xa(4,p.children!==null?p.children:[],p.key,m),m.lanes=b,m.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},m}function RB(p,m,b,A,O){this.tag=m,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ce,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=su(0),this.expirationTimes=su(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=su(0),this.identifierPrefix=A,this.onRecoverableError=O,ke&&(this.mutableSourceEagerHydrationData=null)}function xT(p,m,b,A,O,W,Me,Oe,ct){return p=new RB(p,m,b,Oe,ct),m===1?(m=1,W===!0&&(m|=8)):m=0,W=Xa(3,null,null,m),p.current=W,W.stateNode=p,W.memoizedState={element:A,isDehydrated:b,cache:null,transitions:null},Yu(W),p}function wT(p){if(!p)return En;p=p._reactInternals;e:{if(k(p)!==p||p.tag!==1)throw Error(s(170));var m=p;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(ar(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(s(171))}if(p.tag===1){var b=p.type;if(ar(b))return Er(p,b,m)}return m}function ST(p){var m=p._reactInternals;if(m===void 0)throw typeof p.render=="function"?Error(s(188)):(p=Object.keys(p).join(","),Error(s(268,p)));return p=B(m),p===null?null:p.stateNode}function _T(p,m){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var b=p.retryLane;p.retryLane=b!==0&&b<m?b:m}}function qS(p,m){_T(p,m),(p=p.alternate)&&_T(p,m)}function kB(p){return p=B(p),p===null?null:p.stateNode}function IB(){return null}return t.attemptContinuousHydration=function(p){if(p.tag===13){var m=Co();es(p,134217728,m),qS(p,134217728)}},t.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var m=Co(),b=ga(p);es(p,b,m),qS(p,b)}},t.attemptSynchronousHydration=function(p){switch(p.tag){case 3:var m=p.stateNode;if(m.current.memoizedState.isDehydrated){var b=fl(m.pendingLanes);b!==0&&(Xi(m,b|1),Go(m,di()),!(Dn&6)&&(ja(),_s()))}break;case 13:var A=Co();qg(function(){return es(p,1,A)}),qS(p,1)}},t.batchedUpdates=function(p,m){var b=Dn;Dn|=1;try{return p(m)}finally{Dn=b,Dn===0&&(ja(),ka&&_s())}},t.createComponentSelector=function(p){return{$$typeof:so,value:p}},t.createContainer=function(p,m,b,A,O,W,Me){return xT(p,m,!1,null,b,A,O,W,Me)},t.createHasPseudoClassSelector=function(p){return{$$typeof:ur,value:p}},t.createHydrationContainer=function(p,m,b,A,O,W,Me,Oe,ct){return p=xT(b,A,!0,p,O,W,Me,Oe,ct),p.context=wT(null),b=p.current,A=Co(),O=ga(b),W=zs(A,O),W.callback=m??null,Fa(b,W),p.current.lanes=O,La(p,O,A),Go(p,A),p},t.createPortal=function(p,m,b){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:A==null?null:""+A,children:p,containerInfo:m,implementation:b}},t.createRoleSelector=function(p){return{$$typeof:Ao,value:p}},t.createTestNameSelector=function(p){return{$$typeof:To,value:p}},t.createTextSelector=function(p){return{$$typeof:gi,value:p}},t.deferredUpdates=function(p){var m=rr,b=In.transition;try{return In.transition=null,rr=16,p()}finally{rr=m,In.transition=b}},t.discreteUpdates=function(p,m,b,A,O){var W=rr,Me=In.transition;try{return In.transition=null,rr=1,p(m,b,A,O)}finally{rr=W,In.transition=Me,Dn===0&&ja()}},t.findAllNodes=da,t.findBoundingRects=function(p,m){if(!nt)throw Error(s(363));m=da(p,m),p=[];for(var b=0;b<m.length;b++)p.push(_t(m[b]));for(m=p.length-1;0<m;m--){b=p[m];for(var A=b.x,O=A+b.width,W=b.y,Me=W+b.height,Oe=m-1;0<=Oe;Oe--)if(m!==Oe){var ct=p[Oe],kt=ct.x,Jt=kt+ct.width,On=ct.y,gn=On+ct.height;if(A>=kt&&W>=On&&O<=Jt&&Me<=gn){p.splice(m,1);break}else if(A!==kt||b.width!==ct.width||gn<W||On>Me){if(!(W!==On||b.height!==ct.height||Jt<A||kt>O)){kt>A&&(ct.width+=kt-A,ct.x=A),Jt<O&&(ct.width=O-kt),p.splice(m,1);break}}else{On>W&&(ct.height+=On-W,ct.y=W),gn<Me&&(ct.height=Me-On),p.splice(m,1);break}}}return p},t.findHostInstance=ST,t.findHostInstanceWithNoPortals=function(p){return p=N(p),p=p!==null?V(p):null,p===null?null:p.stateNode},t.findHostInstanceWithWarning=function(p){return ST(p)},t.flushControlled=function(p){var m=Dn;Dn|=1;var b=In.transition,A=rr;try{In.transition=null,rr=1,p()}finally{rr=A,In.transition=b,Dn=m,Dn===0&&(ja(),_s())}},t.flushPassiveEffects=ts,t.flushSync=qg,t.focusWithin=function(p,m){if(!nt)throw Error(s(363));for(p=ao(p),m=zi(p,m),m=Array.from(m),p=0;p<m.length;){var b=m[p++];if(!ee(b)){if(b.tag===5&&ot(b.stateNode))return!0;for(b=b.child;b!==null;)m.push(b),b=b.sibling}}return!1},t.getCurrentUpdatePriority=function(){return rr},t.getFindAllNodesFailureDescription=function(p,m){if(!nt)throw Error(s(363));var b=0,A=[];p=[ao(p),0];for(var O=0;O<p.length;){var W=p[O++],Me=p[O++],Oe=m[Me];if((W.tag!==5||!ee(W))&&(Qo(W,Oe)&&(A.push(qs(Oe)),Me++,Me>b&&(b=Me)),Me<m.length))for(W=W.child;W!==null;)p.push(W,Me),W=W.sibling}if(b<m.length){for(p=[];b<m.length;b++)p.push(qs(m[b]));return`findAllNodes was able to match part of the selector:
  `+(A.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},t.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return J(p.child.stateNode);default:return p.child.stateNode}},t.injectIntoDevTools=function(p){if(p={bundleType:p.bundleType,version:p.version,rendererPackageName:p.rendererPackageName,rendererConfig:p.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:kB,findFiberByHostInstance:p.findFiberByHostInstance||IB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)p=!0;else{try{Kc=m.inject(p),Us=m}catch{}p=!!m.checkDCE}}return p},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(p,m,b,A){if(!nt)throw Error(s(363));p=da(p,m);var O=et(p,b,A).disconnect;return{disconnect:function(){O()}}},t.registerMutableSourceForHydration=function(p,m){var b=m._getVersion;b=b(m._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[m,b]:p.mutableSourceEagerHydrationData.push(m,b)},t.runWithPriority=function(p,m){var b=rr;try{return rr=p,m()}finally{rr=b}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(p,m,b,A){var O=m.current,W=Co(),Me=ga(O);return b=wT(b),m.context===null?m.context=b:m.pendingContext=b,m=zs(W,Me),m.payload={element:p},A=A===void 0?null:A,A!==null&&(m.callback=A),Fa(O,m),p=es(O,Me,W),p!==null&&pl(p,O,Me),Me},t};(function(n){n.exports=Xq})($q);const Yq=bw(HM),Zq=n=>typeof n=="object"&&typeof n.then=="function",Ed=[];function x6(n,e,t=(r,i)=>r===i){if(n===e)return!0;if(!n||!e)return!1;const r=n.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!t(n[i],e[i]))return!1;return!0}function w6(n,e=null,t=!1,r={}){e===null&&(e=[n]);for(const o of Ed)if(x6(e,o.keys,o.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(o,"error"))throw o.error;if(Object.prototype.hasOwnProperty.call(o,"response"))return r.lifespan&&r.lifespan>0&&(o.timeout&&clearTimeout(o.timeout),o.timeout=setTimeout(o.remove,r.lifespan)),o.response;if(!t)throw o.promise}const i={keys:e,equal:r.equal,remove:()=>{const o=Ed.indexOf(i);o!==-1&&Ed.splice(o,1)},promise:(Zq(n)?n:n(...e)).then(o=>{i.response=o,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(o=>i.error=o)};if(Ed.push(i),!t)throw i.promise}const Kq=(n,e,t)=>w6(n,e,!1,t),Jq=(n,e,t)=>void w6(n,e,!0,t),Qq=n=>{if(n===void 0||n.length===0)Ed.splice(0,Ed.length);else{const e=Ed.find(t=>x6(n,t.keys,t.equal));e&&e.remove()}},AA={},S6=n=>void Object.assign(AA,n);function eX(n,e){function t(c,{args:h=[],attach:f,...d},v){let y=`${c[0].toUpperCase()}${c.slice(1)}`,w;if(c==="primitive"){if(d.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=d.object;w=hm(g,{type:c,root:v,attach:f,primitive:!0})}else{const g=AA[y];if(!g)throw new Error(`R3F: ${y} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");w=hm(new g(...h),{type:c,root:v,attach:f,memoizedProps:{args:h}})}return w.__r3f.attach===void 0&&(w instanceof Rn?w.__r3f.attach="geometry":w instanceof Zo&&(w.__r3f.attach="material")),y!=="inject"&&ob(w,d),w}function r(c,h){let f=!1;if(h){var d,v;(d=h.__r3f)!=null&&d.attach?ib(c,h,h.__r3f.attach):h.isObject3D&&c.isObject3D&&(c.add(h),f=!0),f||(v=c.__r3f)==null||v.objects.push(h),h.__r3f||hm(h,{}),h.__r3f.parent=c,VM(h),fm(h)}}function i(c,h,f){let d=!1;if(h){var v,y;if((v=h.__r3f)!=null&&v.attach)ib(c,h,h.__r3f.attach);else if(h.isObject3D&&c.isObject3D){h.parent=c,h.dispatchEvent({type:"added"});const w=c.children.filter(x=>x!==h),g=w.indexOf(f);c.children=[...w.slice(0,g),h,...w.slice(g)],d=!0}d||(y=c.__r3f)==null||y.objects.push(h),h.__r3f||hm(h,{}),h.__r3f.parent=c,VM(h),fm(h)}}function o(c,h,f=!1){c&&[...c].forEach(d=>s(h,d,f))}function s(c,h,f){if(h){var d,v,y;if(h.__r3f&&(h.__r3f.parent=null),(d=c.__r3f)!=null&&d.objects&&(c.__r3f.objects=c.__r3f.objects.filter(E=>E!==h)),(v=h.__r3f)!=null&&v.attach)vL(c,h,h.__r3f.attach);else if(h.isObject3D&&c.isObject3D){var w;c.remove(h),(w=h.__r3f)!=null&&w.root&&aX(h.__r3f.root,h)}const x=(y=h.__r3f)==null?void 0:y.primitive,_=f===void 0?h.dispose!==null&&!x:f;if(!x){var g;o((g=h.__r3f)==null?void 0:g.objects,h,_),o(h.children,h,_)}delete h.__r3f,_&&h.dispose&&h.type!=="Scene"&&Zv.unstable_scheduleCallback(Zv.unstable_IdlePriority,()=>{try{h.dispose()}catch{}}),fm(c)}}function a(c,h,f,d){var v;const y=(v=c.__r3f)==null?void 0:v.parent;if(!y)return;const w=t(h,f,c.__r3f.root);if(c.children){for(const g of c.children)g.__r3f&&r(w,g);c.children=c.children.filter(g=>!g.__r3f)}c.__r3f.objects.forEach(g=>r(w,g)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||s(y,c),w.parent&&(w.__r3f.autoRemovedBeforeAppend=!0),r(y,w),w.raycast&&w.__r3f.eventCount&&w.__r3f.root.getState().internal.interaction.push(w),[d,d.alternate].forEach(g=>{g!==null&&(g.stateNode=w,g.ref&&(typeof g.ref=="function"?g.ref(w):g.ref.current=w))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:Yq({createInstance:t,removeChild:s,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,h)=>{if(!h)return;const f=c.getState().scene;f.__r3f&&(f.__r3f.root=c,r(f,h))},removeChildFromContainer:(c,h)=>{h&&s(c.getState().scene,h)},insertInContainerBefore:(c,h,f)=>{if(!h||!f)return;const d=c.getState().scene;d.__r3f&&i(d,h,f)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var h;const f=(h=c==null?void 0:c.__r3f)!=null?h:{};return Boolean(f.handlers)},prepareUpdate(c,h,f,d){var v;if(((v=c==null?void 0:c.__r3f)!=null?v:{}).primitive&&d.object&&d.object!==c)return[!0];{const{args:w=[],children:g,...x}=d,{args:_=[],children:E,...C}=f;if(!Array.isArray(w))throw new Error("R3F: the args prop must be an array!");if(w.some((R,L)=>R!==_[L]))return[!0];const I=C6(c,x,C,!0);return I.changes.length?[!1,I]:null}},commitUpdate(c,[h,f],d,v,y,w){h?a(c,d,y,w):ob(c,f)},commitMount(c,h,f,d){var v;const y=(v=c.__r3f)!=null?v:{};c.raycast&&y.handlers&&y.eventCount&&c.__r3f.root.getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>hm(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var h;const{attach:f,parent:d}=(h=c.__r3f)!=null?h:{};f&&d&&vL(d,c,f),c.isObject3D&&(c.visible=!1),fm(c)},unhideInstance(c,h){var f;const{attach:d,parent:v}=(f=c.__r3f)!=null?f:{};d&&v&&ib(v,c,d),(c.isObject3D&&h.visible==null||h.visible)&&(c.visible=!0),fm(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Wh.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&ei.fun(performance.now)?performance.now:ei.fun(Date.now)?Date.now:()=>0,scheduleTimeout:ei.fun(setTimeout)?setTimeout:void 0,cancelTimeout:ei.fun(clearTimeout)?clearTimeout:void 0}),applyProps:ob}}var dL,pL;const rb=n=>"colorSpace"in n||"outputColorSpace"in n,_6=()=>{var n;return(n=AA.ColorManagement)!=null?n:null},b6=n=>n&&n.isOrthographicCamera,tX=n=>n&&n.hasOwnProperty("current"),T1=typeof window<"u"&&((dL=window.document)!=null&&dL.createElement||((pL=window.navigator)==null?void 0:pL.product)==="ReactNative")?pe.useLayoutEffect:pe.useEffect;function M6(n){const e=pe.useRef(n);return T1(()=>void(e.current=n),[n]),e}function nX({set:n}){return T1(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class E6 extends pe.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}E6.getDerivedStateFromError=()=>({error:!0});const A6="__default",mL=new Map,rX=n=>n&&!!n.memoized&&!!n.changes;function T6(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const v0=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()},ei={obj:n=>n===Object(n)&&!ei.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:r="reference",strict:i=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(ei.str(n)||ei.num(n))return n===e;const o=ei.obj(n);if(o&&r==="reference")return n===e;const s=ei.arr(n);if(s&&t==="reference")return n===e;if((s||o)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(o&&t==="shallow"&&r==="shallow"){for(a in i?e:n)if(!ei.equ(n[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:n)if(n[a]!==e[a])return!1;if(ei.und(a)){if(s&&n.length===0&&e.length===0||o&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function iX(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function oX(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function hm(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function GM(n,e){let t=n;if(e.includes("-")){const r=e.split("-"),i=r.pop();return t=r.reduce((o,s)=>o[s],n),{target:t,key:i}}else return{target:t,key:e}}const gL=/-\d+$/;function ib(n,e,t){if(ei.str(t)){if(gL.test(t)){const o=t.replace(gL,""),{target:s,key:a}=GM(n,o);Array.isArray(s[a])||(s[a]=[])}const{target:r,key:i}=GM(n,t);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=t(n,e)}function vL(n,e,t){var r,i;if(ei.str(t)){const{target:o,key:s}=GM(n,t),a=e.__r3f.previousAttach;a===void 0?delete o[s]:o[s]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(n,e);(i=e.__r3f)==null||delete i.previousAttach}function C6(n,{children:e,key:t,ref:r,...i},{children:o,key:s,ref:a,...l}={},u=!1){var c;const h=(c=n==null?void 0:n.__r3f)!=null?c:{},f=Object.entries(i),d=[];if(u){const y=Object.keys(l);for(let w=0;w<y.length;w++)i.hasOwnProperty(y[w])||f.unshift([y[w],A6+"remove"])}f.forEach(([y,w])=>{var g;if((g=n.__r3f)!=null&&g.primitive&&y==="object"||ei.equ(w,l[y]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(y))return d.push([y,w,!0,[]]);let x=[];y.includes("-")&&(x=y.split("-")),d.push([y,w,!1,x]);for(const _ in i){const E=i[_];_.startsWith(`${y}-`)&&d.push([_,E,!1,_.split("-")])}});const v={...i};return h.memoizedProps&&h.memoizedProps.args&&(v.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(v.attach=h.memoizedProps.attach),{memoized:v,changes:d}}function ob(n,e){var t,r,i;const o=(t=n.__r3f)!=null?t:{},s=o.root,a=(r=s==null||s.getState==null?void 0:s.getState())!=null?r:{},{memoized:l,changes:u}=rX(e)?e:C6(n,e),c=o.eventCount;n.__r3f&&(n.__r3f.memoizedProps=l);for(let f=0;f<u.length;f++){let[d,v,y,w]=u[f];if(rb(n)){const E="srgb",C="srgb-linear";d==="encoding"?(d="colorSpace",v=v===3001?E:C):d==="outputEncoding"&&(d="outputColorSpace",v=v===3001?E:C)}let g=n,x=g[d];if(w.length&&(x=w.reduce((_,E)=>_[E],n),!(x&&x.set))){const[_,...E]=w.reverse();g=E.reverse().reduce((C,I)=>C[I],n),d=_}if(v===A6+"remove")if(g.constructor){let _=mL.get(g.constructor);_||(_=new g.constructor,mL.set(g.constructor,_)),v=_[d]}else v=0;if(y)v?o.handlers[d]=v:delete o.handlers[d],o.eventCount=Object.keys(o.handlers).length;else if(x&&x.set&&(x.copy||x instanceof Rd)){if(Array.isArray(v))x.fromArray?x.fromArray(v):x.set(...v);else if(x.copy&&v&&v.constructor&&x.constructor===v.constructor)x.copy(v);else if(v!==void 0){const _=x instanceof Yt;!_&&x.setScalar?x.setScalar(v):x instanceof Rd&&v instanceof Rd?x.mask=v.mask:x.set(v),!_6()&&!a.linear&&_&&x.convertSRGBToLinear()}}else if(g[d]=v,g[d]instanceof Fi&&g[d].format===Ls&&g[d].type===ku){const _=g[d];rb(_)&&rb(a.gl)?_.colorSpace=a.gl.outputColorSpace:_.encoding=a.gl.outputEncoding}fm(n)}if(o.parent&&a.internal&&n.raycast&&c!==o.eventCount){const f=a.internal.interaction.indexOf(n);f>-1&&a.internal.interaction.splice(f,1),o.eventCount&&a.internal.interaction.push(n)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(i=n.__r3f)!=null&&i.parent&&VM(n),n}function fm(n){var e,t;const r=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();r&&r.internal.frames===0&&r.invalidate()}function VM(n){n.onUpdate==null||n.onUpdate(n)}function P6(n,e){n.manual||(b6(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function p2(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function sX(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Wh.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Wh.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Wh.ContinuousEventPriority;default:return Wh.DefaultEventPriority}}function L6(n,e,t,r){const i=t.get(e);i&&(t.delete(e),t.size===0&&(n.delete(r),i.target.releasePointerCapture(r)))}function aX(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(r=>r!==e),t.initialHits=t.initialHits.filter(r=>r!==e),t.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&t.hovered.delete(i)}),t.capturedMap.forEach((r,i)=>{L6(t.capturedMap,e,r,i)})}function lX(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],h=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+h*h))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var h;return(h=u.__r3f)==null?void 0:h.handlers["onPointer"+c]}))}function r(l,u){const c=n.getState(),h=new Set,f=[],d=u?u(c.internal.interaction):c.internal.interaction;for(let g=0;g<d.length;g++){const x=v0(d[g]);x&&(x.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function v(g){const x=v0(g);if(!x||!x.events.enabled||x.raycaster.camera===null)return[];if(x.raycaster.camera===void 0){var _;x.events.compute==null||x.events.compute(l,x,(_=x.previousRoot)==null?void 0:_.getState()),x.raycaster.camera===void 0&&(x.raycaster.camera=null)}return x.raycaster.camera?x.raycaster.intersectObject(g,!0):[]}let y=d.flatMap(v).sort((g,x)=>{const _=v0(g.object),E=v0(x.object);return!_||!E?g.distance-x.distance:E.events.priority-_.events.priority||g.distance-x.distance}).filter(g=>{const x=p2(g);return h.has(x)?!1:(h.add(x),!0)});c.events.filter&&(y=c.events.filter(y,c));for(const g of y){let x=g.object;for(;x;){var w;(w=x.__r3f)!=null&&w.eventCount&&f.push({...g,eventObject:x}),x=x.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let g of c.internal.capturedMap.get(l.pointerId).values())h.has(p2(g.intersection))||f.push(g.intersection);return f}function i(l,u,c,h){const f=n.getState();if(l.length){const d={stopped:!1};for(const v of l){const y=v0(v.object)||f,{raycaster:w,pointer:g,camera:x,internal:_}=y,E=new ge(g.x,g.y,0).unproject(x),C=D=>{var N,B;return(N=(B=_.capturedMap.get(D))==null?void 0:B.has(v.eventObject))!=null?N:!1},I=D=>{const N={intersection:v,target:u.target};_.capturedMap.has(D)?_.capturedMap.get(D).set(v.eventObject,N):_.capturedMap.set(D,new Map([[v.eventObject,N]])),u.target.setPointerCapture(D)},R=D=>{const N=_.capturedMap.get(D);N&&L6(_.capturedMap,v.eventObject,N,D)};let L={};for(let D in u){let N=u[D];typeof N!="function"&&(L[D]=N)}let k={...v,...L,pointer:g,intersections:l,stopped:d.stopped,delta:c,unprojectedPoint:E,ray:w.ray,camera:x,stopPropagation(){const D="pointerId"in u&&_.capturedMap.get(u.pointerId);if((!D||D.has(v.eventObject))&&(k.stopped=d.stopped=!0,_.hovered.size&&Array.from(_.hovered.values()).find(N=>N.eventObject===v.eventObject))){const N=l.slice(0,l.indexOf(v));o([...N,v])}},target:{hasPointerCapture:C,setPointerCapture:I,releasePointerCapture:R},currentTarget:{hasPointerCapture:C,setPointerCapture:I,releasePointerCapture:R},nativeEvent:u};if(h(k),d.stopped===!0)break}}return l}function o(l){const{internal:u}=n.getState();for(const c of u.hovered.values())if(!l.length||!l.find(h=>h.object===c.object&&h.index===c.index&&h.instanceId===c.instanceId)){const f=c.eventObject.__r3f,d=f==null?void 0:f.handlers;if(u.hovered.delete(p2(c)),f!=null&&f.eventCount){const v={...c,intersections:l};d.onPointerOut==null||d.onPointerOut(v),d.onPointerLeave==null||d.onPointerLeave(v)}}}function s(l,u){for(let c=0;c<u.length;c++){const h=u[c].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>o([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),o([]))})}}return function(c){const{onPointerMissed:h,internal:f}=n.getState();f.lastEvent.current=c;const d=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",w=r(c,d?t:void 0),g=v?e(c):0;l==="onPointerDown"&&(f.initialClick=[c.offsetX,c.offsetY],f.initialHits=w.map(_=>_.eventObject)),v&&!w.length&&g<=2&&(s(c,f.interaction),h&&h(c)),d&&o(w);function x(_){const E=_.eventObject,C=E.__r3f,I=C==null?void 0:C.handlers;if(C!=null&&C.eventCount)if(d){if(I.onPointerOver||I.onPointerEnter||I.onPointerOut||I.onPointerLeave){const R=p2(_),L=f.hovered.get(R);L?L.stopped&&_.stopPropagation():(f.hovered.set(R,_),I.onPointerOver==null||I.onPointerOver(_),I.onPointerEnter==null||I.onPointerEnter(_))}I.onPointerMove==null||I.onPointerMove(_)}else{const R=I[l];R?(!v||f.initialHits.includes(E))&&(s(c,f.interaction.filter(L=>!f.initialHits.includes(L))),R(_)):v&&f.initialHits.includes(E)&&s(c,f.interaction.filter(L=>!f.initialHits.includes(L)))}}i(w,c,g,x)}}return{handlePointer:a}}const uX=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],R6=n=>!!(n!=null&&n.render),TA=pe.createContext(null),cX=(n,e)=>{const t=v6((a,l)=>{const u=new ge,c=new ge,h=new ge;function f(g=l().camera,x=c,_=l().size){const{width:E,height:C,top:I,left:R}=_,L=E/C;x instanceof ge?h.copy(x):h.set(...x);const k=g.getWorldPosition(u).distanceTo(h);if(b6(g))return{width:E/g.zoom,height:C/g.zoom,top:I,left:R,factor:1,distance:k,aspect:L};{const D=g.fov*Math.PI/180,N=2*Math.tan(D/2)*k,B=N*(E/C);return{width:B,height:N,top:I,left:R,factor:E/B,distance:k,aspect:L}}}let d;const v=g=>a(x=>({performance:{...x.performance,current:g}})),y=new gt;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>n(l(),g),advance:(g,x)=>e(g,x,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new SA,pointer:y,mouse:y,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();d&&clearTimeout(d),g.performance.current!==g.performance.min&&v(g.performance.min),d=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:f},setEvents:g=>a(x=>({...x,events:{...x.events,...g}})),setSize:(g,x,_,E,C)=>{const I=l().camera,R={width:g,height:x,top:E||0,left:C||0,updateStyle:_};a(L=>({size:R,viewport:{...L.viewport,...f(I,c,R)}}))},setDpr:g=>a(x=>{const _=T6(g);return{viewport:{...x.viewport,dpr:_,initialDpr:x.viewport.initialDpr||_}}}),setFrameloop:(g="always")=>{const x=l().clock;x.stop(),x.elapsedTime=0,g!=="never"&&(x.start(),x.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:pe.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,x,_)=>{const E=l().internal;return E.priority=E.priority+(x>0?1:0),E.subscribers.push({ref:g,priority:x,store:_}),E.subscribers=E.subscribers.sort((C,I)=>C.priority-I.priority),()=>{const C=l().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(x>0?1:0),C.subscribers=C.subscribers.filter(I=>I.ref!==g))}}}}}),r=t.getState();let i=r.size,o=r.viewport.dpr,s=r.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:h}=t.getState();if(l!==i||u.dpr!==o){var f;i=l,o=u.dpr,P6(a,l),c.setPixelRatio(u.dpr);const d=(f=l.updateStyle)!=null?f:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,d)}a!==s&&(s=a,h(d=>({viewport:{...d.viewport,...d.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let m2,hX=new Set,fX=new Set,dX=new Set;function sb(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function y0(n,e){switch(n){case"before":return sb(hX,e);case"after":return sb(fX,e);case"tail":return sb(dX,e)}}let ab,lb;function ub(n,e,t){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(r=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),ab=e.internal.subscribers,m2=0;m2<ab.length;m2++)lb=ab[m2],lb.ref.current(lb.store.getState(),r,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function pX(n){let e=!1,t,r,i;function o(l){r=requestAnimationFrame(o),e=!0,t=0,y0("before",l);for(const c of n.values()){var u;i=c.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((u=i.gl.xr)!=null&&u.isPresenting)&&(t+=ub(l,i))}if(y0("after",l),t===0)return y0("tail",l),e=!1,cancelAnimationFrame(r)}function s(l,u=1){var c;if(!l)return n.forEach(h=>s(h.store.getState()),u);(c=l.gl.xr)!=null&&c.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(o)))}function a(l,u=!0,c,h){if(u&&y0("before",l),c)ub(l,c,h);else for(const f of n.values())ub(l,f.store.getState());u&&y0("after",l)}return{loop:o,invalidate:s,advance:a}}function CA(){const n=pe.useContext(TA);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function fs(n=t=>t,e){return CA()(n,e)}function k6(n,e=0){const t=CA(),r=t.getState().internal.subscribe,i=M6(n);return T1(()=>r(i,e,t),[e,r,t]),null}function I6(n,e){return function(t,...r){const i=new t;return n&&n(i),Promise.all(r.map(o=>new Promise((s,a)=>i.load(o,l=>{l.scene&&Object.assign(l,iX(l.scene)),s(l)},e,l=>a(new Error(`Could not load ${o}: ${l.message}`))))))}}function PA(n,e,t,r){const i=Array.isArray(e)?e:[e],o=Kq(I6(t,r),[n,...i],{equal:ei.equ});return Array.isArray(e)?o:o[0]}PA.preload=function(n,e,t){const r=Array.isArray(e)?e:[e];return Jq(I6(t),[n,...r])};PA.clear=function(n,e){const t=Array.isArray(e)?e:[e];return Qq([n,...t])};const ug=new Map,{invalidate:yL,advance:xL}=pX(ug),{reconciler:Kv,applyProps:tm}=eX(ug,sX),nm={objects:"shallow",strict:!1},mX=(n,e)=>{const t=typeof n=="function"?n(e):n;return R6(t)?t:new Yw({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function gX(n,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:t,height:r,top:i,left:o}=n.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:o}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function vX(n){const e=ug.get(n),t=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,o=r||cX(yL,xL),s=t||Kv.createContainer(o,Wh.ConcurrentRoot,null,!1,null,"",i,null);e||ug.set(n,{fiber:s,store:o});let a,l=!1,u;return{configure(c={}){let{gl:h,size:f,scene:d,events:v,onCreated:y,shadows:w=!1,linear:g=!1,flat:x=!1,legacy:_=!1,orthographic:E=!1,frameloop:C="always",dpr:I=[1,2],performance:R,raycaster:L,camera:k,onPointerMissed:D}=c,N=o.getState(),B=N.gl;N.gl||N.set({gl:B=mX(h,n)});let G=N.raycaster;G||N.set({raycaster:G=new EA});const{params:V,...$}=L||{};if(ei.equ($,G,nm)||tm(G,{...$}),ei.equ(V,G.params,nm)||tm(G,{params:{...G.params,...V}}),!N.camera||N.camera===u&&!ei.equ(u,k,nm)){u=k;const F=k instanceof x1,j=F?k:E?new Iu(0,0,0,0,.1,1e3):new Si(75,0,.1,1e3);F||(j.position.z=5,k&&tm(j,k),!N.camera&&!(k!=null&&k.rotation)&&j.lookAt(0,0,0)),N.set({camera:j})}if(!N.scene){let F;d instanceof ag?F=d:(F=new ag,d&&tm(F,d)),N.set({scene:hm(F)})}if(!N.xr){var J;const F=(se,fe)=>{const we=o.getState();we.frameloop!=="never"&&xL(se,!0,we,fe)},j=()=>{const se=o.getState();se.gl.xr.enabled=se.gl.xr.isPresenting,se.gl.xr.setAnimationLoop(se.gl.xr.isPresenting?F:null),se.gl.xr.isPresenting||yL(se)},Q={connect(){const se=o.getState().gl;se.xr.addEventListener("sessionstart",j),se.xr.addEventListener("sessionend",j)},disconnect(){const se=o.getState().gl;se.xr.removeEventListener("sessionstart",j),se.xr.removeEventListener("sessionend",j)}};typeof((J=B.xr)==null?void 0:J.addEventListener)=="function"&&Q.connect(),N.set({xr:Q})}if(B.shadowMap){const F=B.shadowMap.enabled,j=B.shadowMap.type;if(B.shadowMap.enabled=!!w,ei.boo(w))B.shadowMap.type=Y0;else if(ei.str(w)){var le;const Q={basic:xN,percentage:Gw,soft:Y0,variance:Rl};B.shadowMap.type=(le=Q[w])!=null?le:Y0}else ei.obj(w)&&Object.assign(B.shadowMap,w);(F!==B.shadowMap.enabled||j!==B.shadowMap.type)&&(B.shadowMap.needsUpdate=!0)}const H=_6();H&&("enabled"in H?H.enabled=!_:"legacyMode"in H&&(H.legacyMode=_)),tm(B,{outputEncoding:g?3e3:3001,toneMapping:x?Ru:N3}),N.legacy!==_&&N.set(()=>({legacy:_})),N.linear!==g&&N.set(()=>({linear:g})),N.flat!==x&&N.set(()=>({flat:x})),h&&!ei.fun(h)&&!R6(h)&&!ei.equ(h,B,nm)&&tm(B,h),v&&!N.events.handlers&&N.set({events:v(o)});const oe=gX(n,f);return ei.equ(oe,N.size,nm)||N.setSize(oe.width,oe.height,oe.updateStyle,oe.top,oe.left),I&&N.viewport.dpr!==T6(I)&&N.setDpr(I),N.frameloop!==C&&N.setFrameloop(C),N.onPointerMissed||N.set({onPointerMissed:D}),R&&!ei.equ(R,N.performance,nm)&&N.set(F=>({performance:{...F.performance,...R}})),a=y,l=!0,this},render(c){return l||this.configure(),Kv.updateContainer(pe.createElement(yX,{store:o,children:c,onCreated:a,rootElement:n}),s,null,()=>{}),o},unmount(){N6(n)}}}function yX({store:n,children:e,onCreated:t,rootElement:r}){return T1(()=>{const i=n.getState();i.set(o=>({internal:{...o.internal,active:!0}})),t&&t(i),n.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),pe.createElement(TA.Provider,{value:n},e)}function N6(n,e){const t=ug.get(n),r=t==null?void 0:t.fiber;if(r){const i=t==null?void 0:t.store.getState();i&&(i.internal.active=!1),Kv.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var o,s,a,l;i.events.disconnect==null||i.events.disconnect(),(o=i.gl)==null||(s=o.renderLists)==null||s.dispose==null||s.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),oX(i),ug.delete(n),e&&e(n)}catch{}},500)})}}function xX(n,e,t){return pe.createElement(wX,{key:e.uuid,children:n,container:e,state:t})}function wX({state:n={},children:e,container:t}){const{events:r,size:i,...o}=n,s=CA(),[a]=pe.useState(()=>new EA),[l]=pe.useState(()=>new gt),u=pe.useCallback((h,f)=>{const d={...h};Object.keys(h).forEach(y=>{(uX.includes(y)||h[y]!==f[y]&&f[y])&&delete d[y]});let v;if(f&&i){const y=f.camera;v=h.viewport.getCurrentViewport(y,new ge,i),y!==h.camera&&P6(y,i)}return{...d,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:s,events:{...h.events,...f==null?void 0:f.events,...r},size:{...h.size,...i},viewport:{...h.viewport,...v},...o}},[n]),[c]=pe.useState(()=>{const h=s.getState();return v6((d,v)=>({...h,scene:t,raycaster:a,pointer:l,mouse:l,previousRoot:s,events:{...h.events,...r},size:{...h.size,...i},...o,set:d,get:v,setEvents:y=>d(w=>({...w,events:{...w.events,...y}}))}))});return pe.useEffect(()=>{const h=s.subscribe(f=>c.setState(d=>u(f,d)));return()=>{h(),c.destroy()}},[]),pe.useEffect(()=>{c.setState(h=>u(s.getState(),h))},[u]),pe.createElement(pe.Fragment,null,Kv.createPortal(pe.createElement(TA.Provider,{value:c},e),c,null))}Kv.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:pe.version});function cg(){return cg=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},cg.apply(null,arguments)}function wL(n,e){let t;return(...r)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...r),e)}}function SX({debounce:n,scroll:e,polyfill:t,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,s]=pe.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=pe.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,u=n?typeof n=="number"?n:n.resize:null,c=pe.useRef(!1);pe.useEffect(()=>(c.current=!0,()=>void(c.current=!1)));const[h,f,d]=pe.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:x,top:_,width:E,height:C,bottom:I,right:R,x:L,y:k}=a.current.element.getBoundingClientRect(),D={left:x,top:_,width:E,height:C,bottom:I,right:R,x:L,y:k};a.current.element instanceof HTMLElement&&r&&(D.height=a.current.element.offsetHeight,D.width=a.current.element.offsetWidth),Object.freeze(D),c.current&&!EX(a.current.lastBounds,D)&&s(a.current.lastBounds=D)};return[g,u?wL(g,u):g,l?wL(g,l):g]},[s,r,l,u]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",d,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function y(){a.current.element&&(a.current.resizeObserver=new i(d),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",d,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{d()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const w=g=>{!g||g===a.current.element||(v(),a.current.element=g,a.current.scrollContainers=F6(g),y())};return bX(d,!!e),_X(f),pe.useEffect(()=>{v(),y()},[e,d,f]),pe.useEffect(()=>v,[]),[w,o,h]}function _X(n){pe.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function bX(n,e){pe.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function F6(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:r,overflowY:i}=window.getComputedStyle(n);return[t,r,i].some(o=>o==="auto"||o==="scroll")&&e.push(n),[...e,...F6(n.parentElement)]}const MX=["x","y","top","bottom","left","right","width","height"],EX=(n,e)=>MX.every(t=>n[t]===e[t]);var AX=Object.defineProperty,TX=Object.defineProperties,CX=Object.getOwnPropertyDescriptors,SL=Object.getOwnPropertySymbols,PX=Object.prototype.hasOwnProperty,LX=Object.prototype.propertyIsEnumerable,_L=(n,e,t)=>e in n?AX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,bL=(n,e)=>{for(var t in e||(e={}))PX.call(e,t)&&_L(n,t,e[t]);if(SL)for(var t of SL(e))LX.call(e,t)&&_L(n,t,e[t]);return n},RX=(n,e)=>TX(n,CX(e)),ML,EL;typeof window<"u"&&((ML=window.document)!=null&&ML.createElement||((EL=window.navigator)==null?void 0:EL.product)==="ReactNative")?pe.useLayoutEffect:pe.useEffect;function D6(n,e,t){if(!n)return;if(t(n)===!0)return n;let r=e?n.return:n.child;for(;r;){const i=D6(r,e,t);if(i)return i;r=e?null:r.sibling}}function O6(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const AL=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=AL;return}return AL.apply(this,arguments)};const LA=O6(pe.createContext(null));class B6 extends pe.Component{render(){return pe.createElement(LA.Provider,{value:this._reactInternals},this.props.children)}}function kX(){const n=pe.useContext(LA);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=pe.useId();return pe.useMemo(()=>{for(const r of[n,n==null?void 0:n.alternate]){if(!r)continue;const i=D6(r,!1,o=>{let s=o.memoizedState;for(;s;){if(s.memoizedState===e)return!0;s=s.next}});if(i)return i}},[n,e])}function IX(){const n=kX(),[e]=pe.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const i=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;i&&i!==LA&&!e.has(i)&&e.set(i,pe.useContext(O6(i)))}t=t.return}return e}function NX(){const n=IX();return pe.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>r=>pe.createElement(e,null,pe.createElement(t.Provider,RX(bL({},r),{value:n.get(t)}))),e=>pe.createElement(B6,bL({},e))),[n])}const cb={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function FX(n){const{handlePointer:e}=lX(n);return{priority:1,enabled:!0,compute(t,r,i){r.pointer.set(t.offsetX/r.size.width*2-1,-(t.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(cb).reduce((t,r)=>({...t,[r]:e(r)}),{}),update:()=>{var t;const{events:r,internal:i}=n.getState();(t=i.lastEvent)!=null&&t.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var r;const{set:i,events:o}=n.getState();o.disconnect==null||o.disconnect(),i(s=>({events:{...s.events,connected:t}})),Object.entries((r=o.handlers)!=null?r:[]).forEach(([s,a])=>{const[l,u]=cb[s];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:r}=n.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([o,s])=>{if(r&&r.connected instanceof HTMLElement){const[a]=cb[o];r.connected.removeEventListener(a,s)}}),t(o=>({events:{...o.events,connected:void 0}}))}}}}const DX=pe.forwardRef(function({children:e,fallback:t,resize:r,style:i,gl:o,events:s=FX,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:h,legacy:f,orthographic:d,frameloop:v,dpr:y,performance:w,raycaster:g,camera:x,onPointerMissed:_,onCreated:E,...C},I){pe.useMemo(()=>S6(Gq),[]);const R=NX(),[L,k]=SX({scroll:!0,debounce:{scroll:50,resize:0},...r}),D=pe.useRef(null),N=pe.useRef(null);pe.useImperativeHandle(I,()=>D.current);const B=M6(_),[G,V]=pe.useState(!1),[$,J]=pe.useState(!1);if(G)throw G;if($)throw $;const le=pe.useRef(null);T1(()=>{const q=D.current;k.width>0&&k.height>0&&q&&(le.current||(le.current=vX(q)),le.current.configure({gl:o,events:s,shadows:u,linear:c,flat:h,legacy:f,orthographic:d,frameloop:v,dpr:y,performance:w,raycaster:g,camera:x,size:k,onPointerMissed:(...Z)=>B.current==null?void 0:B.current(...Z),onCreated:Z=>{Z.events.connect==null||Z.events.connect(a?tX(a)?a.current:a:N.current),l&&Z.setEvents({compute:(oe,F)=>{const j=oe[l+"X"],Q=oe[l+"Y"];F.pointer.set(j/F.size.width*2-1,-(Q/F.size.height)*2+1),F.raycaster.setFromCamera(F.pointer,F.camera)}}),E==null||E(Z)}}),le.current.render(pe.createElement(R,null,pe.createElement(E6,{set:J},pe.createElement(pe.Suspense,{fallback:pe.createElement(nX,{set:V})},e)))))}),pe.useEffect(()=>{const q=D.current;if(q)return()=>N6(q)},[]);const H=a?"none":"auto";return pe.createElement("div",cg({ref:N,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:H,...i}},C),pe.createElement("div",{ref:L,style:{width:"100%",height:"100%"}},pe.createElement("canvas",{ref:D,style:{display:"block"}},t)))}),U6=pe.forwardRef(function(e,t){return pe.createElement(B6,null,pe.createElement(DX,cg({},e,{ref:t})))}),z6=(()=>parseInt(g1.replace(/\D+/g,"")))();var tl=Uint8Array,jh=Uint16Array,WM=Uint32Array,H6=new tl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),G6=new tl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),OX=new tl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),V6=function(n,e){for(var t=new jh(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new WM(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return[t,i]},W6=V6(H6,2),j6=W6[0],BX=W6[1];j6[28]=258,BX[258]=28;var UX=V6(G6,0),zX=UX[0],jM=new jh(32768);for(var ri=0;ri<32768;++ri){var Eh=(ri&43690)>>>1|(ri&21845)<<1;Eh=(Eh&52428)>>>2|(Eh&13107)<<2,Eh=(Eh&61680)>>>4|(Eh&3855)<<4,jM[ri]=((Eh&65280)>>>8|(Eh&255)<<8)>>>1}var tv=function(n,e,t){for(var r=n.length,i=0,o=new jh(e);i<r;++i)++o[n[i]-1];var s=new jh(e);for(i=0;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(t){a=new jh(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],c=e-n[i],h=s[n[i]-1]++<<c,f=h|(1<<c)-1;h<=f;++h)a[jM[h]>>>l]=u}else for(a=new jh(r),i=0;i<r;++i)n[i]&&(a[i]=jM[s[n[i]-1]++]>>>15-n[i]);return a},C1=new tl(288);for(var ri=0;ri<144;++ri)C1[ri]=8;for(var ri=144;ri<256;++ri)C1[ri]=9;for(var ri=256;ri<280;++ri)C1[ri]=7;for(var ri=280;ri<288;++ri)C1[ri]=8;var $6=new tl(32);for(var ri=0;ri<32;++ri)$6[ri]=5;var HX=tv(C1,9,1),GX=tv($6,5,1),hb=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Al=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},fb=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},VX=function(n){return(n/8|0)+(n&7&&1)},WX=function(n,e,t){(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length);var r=new(n instanceof jh?jh:n instanceof WM?WM:tl)(t-e);return r.set(n.subarray(e,t)),r},jX=function(n,e,t){var r=n.length;if(!r||t&&!t.l&&r<5)return e||new tl(0);var i=!e||t,o=!t||t.i;t||(t={}),e||(e=new tl(r*3));var s=function(fe){var we=e.length;if(fe>we){var Ee=new tl(Math.max(we*2,fe));Ee.set(e),e=Ee}},a=t.f||0,l=t.p||0,u=t.b||0,c=t.l,h=t.d,f=t.m,d=t.n,v=r*8;do{if(!c){t.f=a=Al(n,l,1);var y=Al(n,l+1,3);if(l+=3,y)if(y==1)c=HX,h=GX,f=9,d=5;else if(y==2){var _=Al(n,l,31)+257,E=Al(n,l+10,15)+4,C=_+Al(n,l+5,31)+1;l+=14;for(var I=new tl(C),R=new tl(19),L=0;L<E;++L)R[OX[L]]=Al(n,l+L*3,7);l+=E*3;for(var k=hb(R),D=(1<<k)-1,N=tv(R,k,1),L=0;L<C;){var B=N[Al(n,l,D)];l+=B&15;var w=B>>>4;if(w<16)I[L++]=w;else{var G=0,V=0;for(w==16?(V=3+Al(n,l,3),l+=2,G=I[L-1]):w==17?(V=3+Al(n,l,7),l+=3):w==18&&(V=11+Al(n,l,127),l+=7);V--;)I[L++]=G}}var $=I.subarray(0,_),J=I.subarray(_);f=hb($),d=hb(J),c=tv($,f,1),h=tv(J,d,1)}else throw"invalid block type";else{var w=VX(l)+4,g=n[w-4]|n[w-3]<<8,x=w+g;if(x>r){if(o)throw"unexpected EOF";break}i&&s(u+g),e.set(n.subarray(w,x),u),t.b=u+=g,t.p=l=x*8;continue}if(l>v){if(o)throw"unexpected EOF";break}}i&&s(u+131072);for(var le=(1<<f)-1,H=(1<<d)-1,q=l;;q=l){var G=c[fb(n,l)&le],Z=G>>>4;if(l+=G&15,l>v){if(o)throw"unexpected EOF";break}if(!G)throw"invalid length/literal";if(Z<256)e[u++]=Z;else if(Z==256){q=l,c=null;break}else{var oe=Z-254;if(Z>264){var L=Z-257,F=H6[L];oe=Al(n,l,(1<<F)-1)+j6[L],l+=F}var j=h[fb(n,l)&H],Q=j>>>4;if(!j)throw"invalid distance";l+=j&15;var J=zX[Q];if(Q>3){var F=G6[Q];J+=fb(n,l)&(1<<F)-1,l+=F}if(l>v){if(o)throw"unexpected EOF";break}i&&s(u+131072);for(var se=u+oe;u<se;u+=4)e[u]=e[u-J],e[u+1]=e[u+1-J],e[u+2]=e[u+2-J],e[u+3]=e[u+3-J];u=se}}t.l=c,t.p=q,t.b=u,c&&(a=1,t.m=f,t.d=h,t.n=d)}while(!a);return u==e.length?e:WX(e,0,u)},$X=new tl(0),qX=function(n){if((n[0]&15)!=8||n[0]>>>4>7||(n[0]<<8|n[1])%31)throw"invalid zlib data";if(n[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function g2(n,e){return jX((qX(n),n.subarray(2,-4)),e)}var XX=typeof TextDecoder<"u"&&new TextDecoder,YX=0;try{XX.decode($X,{stream:!0}),YX=1}catch{}const ZX=n=>n&&n.isCubeTexture;class KX extends po{constructor(e,t){var r,i;const o=ZX(e),a=((i=o?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),u=Math.pow(2,l),c=3*Math.max(u,16*7),h=4*u,f=[o?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/c}`,`#define CUBEUV_TEXEL_HEIGHT ${1/h}`,`#define CUBEUV_MAX_MIP ${l}.0`],d=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=f.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${z6>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,y={map:{value:e},height:{value:(t==null?void 0:t.height)||15},radius:{value:(t==null?void 0:t.radius)||100}},w=new b1(1,16),g=new $l({uniforms:y,fragmentShader:v,vertexShader:d,side:Ol});super(w,g)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var JX=Object.defineProperty,QX=(n,e,t)=>e in n?JX(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,eY=(n,e,t)=>(QX(n,typeof e!="symbol"?e+"":e,t),t);class tY{constructor(){eY(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(t)===-1&&r[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const o=i.indexOf(t);o!==-1&&i.splice(o,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let o=0,s=i.length;o<s;o++)i[o].call(this,e);e.target=null}}}var nY=Object.defineProperty,rY=(n,e,t)=>e in n?nY(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vn=(n,e,t)=>(rY(n,typeof e!="symbol"?e+"":e,t),t);const v2=new Qd,TL=new yc,iY=Math.cos(70*(Math.PI/180)),CL=(n,e)=>(n%e+e)%e;let oY=class extends tY{constructor(e,t){super(),vn(this,"object"),vn(this,"domElement"),vn(this,"enabled",!0),vn(this,"target",new ge),vn(this,"minDistance",0),vn(this,"maxDistance",1/0),vn(this,"minZoom",0),vn(this,"maxZoom",1/0),vn(this,"minPolarAngle",0),vn(this,"maxPolarAngle",Math.PI),vn(this,"minAzimuthAngle",-1/0),vn(this,"maxAzimuthAngle",1/0),vn(this,"enableDamping",!1),vn(this,"dampingFactor",.05),vn(this,"enableZoom",!0),vn(this,"zoomSpeed",1),vn(this,"enableRotate",!0),vn(this,"rotateSpeed",1),vn(this,"enablePan",!0),vn(this,"panSpeed",1),vn(this,"screenSpacePanning",!0),vn(this,"keyPanSpeed",7),vn(this,"zoomToCursor",!1),vn(this,"autoRotate",!1),vn(this,"autoRotateSpeed",2),vn(this,"reverseOrbit",!1),vn(this,"reverseHorizontalOrbit",!1),vn(this,"reverseVerticalOrbit",!1),vn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),vn(this,"mouseButtons",{LEFT:wu.ROTATE,MIDDLE:wu.DOLLY,RIGHT:wu.PAN}),vn(this,"touches",{ONE:vc.ROTATE,TWO:vc.DOLLY_PAN}),vn(this,"target0"),vn(this,"position0"),vn(this,"zoom0"),vn(this,"_domElementKeyEvents",null),vn(this,"getPolarAngle"),vn(this,"getAzimuthalAngle"),vn(this,"setPolarAngle"),vn(this,"setAzimuthalAngle"),vn(this,"getDistance"),vn(this,"getZoomScale"),vn(this,"listenToKeyEvents"),vn(this,"stopListenToKeyEvents"),vn(this,"saveState"),vn(this,"reset"),vn(this,"update"),vn(this,"connect"),vn(this,"dispose"),vn(this,"dollyIn"),vn(this,"dollyOut"),vn(this,"getScale"),vn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=be=>{let Je=CL(be,2*Math.PI),pt=c.phi;pt<0&&(pt+=2*Math.PI),Je<0&&(Je+=2*Math.PI);let Te=Math.abs(Je-pt);2*Math.PI-Te<Te&&(Je<pt?Je+=2*Math.PI:pt+=2*Math.PI),h.phi=Je-pt,r.update()},this.setAzimuthalAngle=be=>{let Je=CL(be,2*Math.PI),pt=c.theta;pt<0&&(pt+=2*Math.PI),Je<0&&(Je+=2*Math.PI);let Te=Math.abs(Je-pt);2*Math.PI-Te<Te&&(Je<pt?Je+=2*Math.PI:pt+=2*Math.PI),h.theta=Je-pt,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=be=>{be.addEventListener("keydown",ft),this._domElementKeyEvents=be},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",ft),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const be=new ge,Je=new ge(0,1,0),pt=new ys().setFromUnitVectors(e.up,Je),Te=pt.clone().invert(),Ue=new ge,qe=new ys,Mt=2*Math.PI;return function(){const It=r.object.position;pt.setFromUnitVectors(e.up,Je),Te.copy(pt).invert(),be.copy(It).sub(r.target),be.applyQuaternion(pt),c.setFromVector3(be),r.autoRotate&&l===a.NONE&&V(B()),r.enableDamping?(c.theta+=h.theta*r.dampingFactor,c.phi+=h.phi*r.dampingFactor):(c.theta+=h.theta,c.phi+=h.phi);let Zt=r.minAzimuthAngle,Hn=r.maxAzimuthAngle;isFinite(Zt)&&isFinite(Hn)&&(Zt<-Math.PI?Zt+=Mt:Zt>Math.PI&&(Zt-=Mt),Hn<-Math.PI?Hn+=Mt:Hn>Math.PI&&(Hn-=Mt),Zt<=Hn?c.theta=Math.max(Zt,Math.min(Hn,c.theta)):c.theta=c.theta>(Zt+Hn)/2?Math.max(Zt,c.theta):Math.min(Hn,c.theta)),c.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,c.phi)),c.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(d,r.dampingFactor):r.target.add(d),r.zoomToCursor&&k||r.object.isOrthographicCamera?c.radius=j(c.radius):c.radius=j(c.radius*f),be.setFromSpherical(c),be.applyQuaternion(Te),It.copy(r.target).add(be),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(h.theta*=1-r.dampingFactor,h.phi*=1-r.dampingFactor,d.multiplyScalar(1-r.dampingFactor)):(h.set(0,0,0),d.set(0,0,0));let Kn=!1;if(r.zoomToCursor&&k){let bn=null;if(r.object instanceof Si&&r.object.isPerspectiveCamera){const dr=be.length();bn=j(dr*f);const Vt=dr-bn;r.object.position.addScaledVector(R,Vt),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const dr=new ge(L.x,L.y,0);dr.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix(),Kn=!0;const Vt=new ge(L.x,L.y,0);Vt.unproject(r.object),r.object.position.sub(Vt).add(dr),r.object.updateMatrixWorld(),bn=be.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;bn!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(bn).add(r.object.position):(v2.origin.copy(r.object.position),v2.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(v2.direction))<iY?e.lookAt(r.target):(TL.setFromNormalAndCoplanarPoint(r.object.up,r.target),v2.intersectPlane(TL,r.target))))}else r.object instanceof Iu&&r.object.isOrthographicCamera&&(Kn=f!==1,Kn&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix()));return f=1,k=!1,Kn||Ue.distanceToSquared(r.object.position)>u||8*(1-qe.dot(r.object.quaternion))>u?(r.dispatchEvent(i),Ue.copy(r.object.position),qe.copy(r.object.quaternion),Kn=!1,!0):!1}})(),this.connect=be=>{r.domElement=be,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Pe),r.domElement.addEventListener("pointerdown",_t),r.domElement.addEventListener("pointercancel",ee),r.domElement.addEventListener("wheel",et)},this.dispose=()=>{var be,Je,pt,Te,Ue,qe;r.domElement&&(r.domElement.style.touchAction="auto"),(be=r.domElement)==null||be.removeEventListener("contextmenu",Pe),(Je=r.domElement)==null||Je.removeEventListener("pointerdown",_t),(pt=r.domElement)==null||pt.removeEventListener("pointercancel",ee),(Te=r.domElement)==null||Te.removeEventListener("wheel",et),(Ue=r.domElement)==null||Ue.ownerDocument.removeEventListener("pointermove",de),(qe=r.domElement)==null||qe.ownerDocument.removeEventListener("pointerup",ee),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",ft)};const r=this,i={type:"change"},o={type:"start"},s={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,c=new zM,h=new zM;let f=1;const d=new ge,v=new gt,y=new gt,w=new gt,g=new gt,x=new gt,_=new gt,E=new gt,C=new gt,I=new gt,R=new ge,L=new gt;let k=!1;const D=[],N={};function B(){return 2*Math.PI/60/60*r.autoRotateSpeed}function G(){return Math.pow(.95,r.zoomSpeed)}function V(be){r.reverseOrbit||r.reverseHorizontalOrbit?h.theta+=be:h.theta-=be}function $(be){r.reverseOrbit||r.reverseVerticalOrbit?h.phi+=be:h.phi-=be}const J=(()=>{const be=new ge;return function(pt,Te){be.setFromMatrixColumn(Te,0),be.multiplyScalar(-pt),d.add(be)}})(),le=(()=>{const be=new ge;return function(pt,Te){r.screenSpacePanning===!0?be.setFromMatrixColumn(Te,1):(be.setFromMatrixColumn(Te,0),be.crossVectors(r.object.up,be)),be.multiplyScalar(pt),d.add(be)}})(),H=(()=>{const be=new ge;return function(pt,Te){const Ue=r.domElement;if(Ue&&r.object instanceof Si&&r.object.isPerspectiveCamera){const qe=r.object.position;be.copy(qe).sub(r.target);let Mt=be.length();Mt*=Math.tan(r.object.fov/2*Math.PI/180),J(2*pt*Mt/Ue.clientHeight,r.object.matrix),le(2*Te*Mt/Ue.clientHeight,r.object.matrix)}else Ue&&r.object instanceof Iu&&r.object.isOrthographicCamera?(J(pt*(r.object.right-r.object.left)/r.object.zoom/Ue.clientWidth,r.object.matrix),le(Te*(r.object.top-r.object.bottom)/r.object.zoom/Ue.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function q(be){r.object instanceof Si&&r.object.isPerspectiveCamera||r.object instanceof Iu&&r.object.isOrthographicCamera?f=be:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function Z(be){q(f/be)}function oe(be){q(f*be)}function F(be){if(!r.zoomToCursor||!r.domElement)return;k=!0;const Je=r.domElement.getBoundingClientRect(),pt=be.clientX-Je.left,Te=be.clientY-Je.top,Ue=Je.width,qe=Je.height;L.x=pt/Ue*2-1,L.y=-(Te/qe)*2+1,R.set(L.x,L.y,1).unproject(r.object).sub(r.object.position).normalize()}function j(be){return Math.max(r.minDistance,Math.min(r.maxDistance,be))}function Q(be){v.set(be.clientX,be.clientY)}function se(be){F(be),E.set(be.clientX,be.clientY)}function fe(be){g.set(be.clientX,be.clientY)}function we(be){y.set(be.clientX,be.clientY),w.subVectors(y,v).multiplyScalar(r.rotateSpeed);const Je=r.domElement;Je&&(V(2*Math.PI*w.x/Je.clientHeight),$(2*Math.PI*w.y/Je.clientHeight)),v.copy(y),r.update()}function Ee(be){C.set(be.clientX,be.clientY),I.subVectors(C,E),I.y>0?Z(G()):I.y<0&&oe(G()),E.copy(C),r.update()}function Ce(be){x.set(be.clientX,be.clientY),_.subVectors(x,g).multiplyScalar(r.panSpeed),H(_.x,_.y),g.copy(x),r.update()}function Ge(be){F(be),be.deltaY<0?oe(G()):be.deltaY>0&&Z(G()),r.update()}function Ie(be){let Je=!1;switch(be.code){case r.keys.UP:H(0,r.keyPanSpeed),Je=!0;break;case r.keys.BOTTOM:H(0,-r.keyPanSpeed),Je=!0;break;case r.keys.LEFT:H(r.keyPanSpeed,0),Je=!0;break;case r.keys.RIGHT:H(-r.keyPanSpeed,0),Je=!0;break}Je&&(be.preventDefault(),r.update())}function he(){if(D.length==1)v.set(D[0].pageX,D[0].pageY);else{const be=.5*(D[0].pageX+D[1].pageX),Je=.5*(D[0].pageY+D[1].pageY);v.set(be,Je)}}function ke(){if(D.length==1)g.set(D[0].pageX,D[0].pageY);else{const be=.5*(D[0].pageX+D[1].pageX),Je=.5*(D[0].pageY+D[1].pageY);g.set(be,Je)}}function Ne(){const be=D[0].pageX-D[1].pageX,Je=D[0].pageY-D[1].pageY,pt=Math.sqrt(be*be+Je*Je);E.set(0,pt)}function Ae(){r.enableZoom&&Ne(),r.enablePan&&ke()}function ie(){r.enableZoom&&Ne(),r.enableRotate&&he()}function Ke(be){if(D.length==1)y.set(be.pageX,be.pageY);else{const pt=At(be),Te=.5*(be.pageX+pt.x),Ue=.5*(be.pageY+pt.y);y.set(Te,Ue)}w.subVectors(y,v).multiplyScalar(r.rotateSpeed);const Je=r.domElement;Je&&(V(2*Math.PI*w.x/Je.clientHeight),$(2*Math.PI*w.y/Je.clientHeight)),v.copy(y)}function Ve(be){if(D.length==1)x.set(be.pageX,be.pageY);else{const Je=At(be),pt=.5*(be.pageX+Je.x),Te=.5*(be.pageY+Je.y);x.set(pt,Te)}_.subVectors(x,g).multiplyScalar(r.panSpeed),H(_.x,_.y),g.copy(x)}function We(be){const Je=At(be),pt=be.pageX-Je.x,Te=be.pageY-Je.y,Ue=Math.sqrt(pt*pt+Te*Te);C.set(0,Ue),I.set(0,Math.pow(C.y/E.y,r.zoomSpeed)),Z(I.y),E.copy(C)}function nt(be){r.enableZoom&&We(be),r.enablePan&&Ve(be)}function yt(be){r.enableZoom&&We(be),r.enableRotate&&Ke(be)}function _t(be){var Je,pt;r.enabled!==!1&&(D.length===0&&((Je=r.domElement)==null||Je.ownerDocument.addEventListener("pointermove",de),(pt=r.domElement)==null||pt.ownerDocument.addEventListener("pointerup",ee)),Wt(be),be.pointerType==="touch"?xt(be):Fe(be))}function de(be){r.enabled!==!1&&(be.pointerType==="touch"?ht(be):ot(be))}function ee(be){var Je,pt,Te;Ct(be),D.length===0&&((Je=r.domElement)==null||Je.releasePointerCapture(be.pointerId),(pt=r.domElement)==null||pt.ownerDocument.removeEventListener("pointermove",de),(Te=r.domElement)==null||Te.ownerDocument.removeEventListener("pointerup",ee)),r.dispatchEvent(s),l=a.NONE}function Fe(be){let Je;switch(be.button){case 0:Je=r.mouseButtons.LEFT;break;case 1:Je=r.mouseButtons.MIDDLE;break;case 2:Je=r.mouseButtons.RIGHT;break;default:Je=-1}switch(Je){case wu.DOLLY:if(r.enableZoom===!1)return;se(be),l=a.DOLLY;break;case wu.ROTATE:if(be.ctrlKey||be.metaKey||be.shiftKey){if(r.enablePan===!1)return;fe(be),l=a.PAN}else{if(r.enableRotate===!1)return;Q(be),l=a.ROTATE}break;case wu.PAN:if(be.ctrlKey||be.metaKey||be.shiftKey){if(r.enableRotate===!1)return;Q(be),l=a.ROTATE}else{if(r.enablePan===!1)return;fe(be),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(o)}function ot(be){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;we(be);break;case a.DOLLY:if(r.enableZoom===!1)return;Ee(be);break;case a.PAN:if(r.enablePan===!1)return;Ce(be);break}}function et(be){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(be.preventDefault(),r.dispatchEvent(o),Ge(be),r.dispatchEvent(s))}function ft(be){r.enabled===!1||r.enablePan===!1||Ie(be)}function xt(be){switch(Nt(be),D.length){case 1:switch(r.touches.ONE){case vc.ROTATE:if(r.enableRotate===!1)return;he(),l=a.TOUCH_ROTATE;break;case vc.PAN:if(r.enablePan===!1)return;ke(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case vc.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ae(),l=a.TOUCH_DOLLY_PAN;break;case vc.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ie(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(o)}function ht(be){switch(Nt(be),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;Ke(be),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;Ve(be),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;nt(be),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;yt(be),r.update();break;default:l=a.NONE}}function Pe(be){r.enabled!==!1&&be.preventDefault()}function Wt(be){D.push(be)}function Ct(be){delete N[be.pointerId];for(let Je=0;Je<D.length;Je++)if(D[Je].pointerId==be.pointerId){D.splice(Je,1);return}}function Nt(be){let Je=N[be.pointerId];Je===void 0&&(Je=new gt,N[be.pointerId]=Je),Je.set(be.pageX,be.pageY)}function At(be){const Je=be.pointerId===D[0].pointerId?D[1]:D[0];return N[Je.pointerId]}this.dollyIn=(be=G())=>{oe(be),r.update()},this.dollyOut=(be=G())=>{Z(be),r.update()},this.getScale=()=>f,this.setScale=be=>{q(be),r.update()},this.getZoomScale=()=>G(),t!==void 0&&this.connect(t),this.update()}};class sY extends gA{constructor(e){super(e),this.type=Rs}parse(e){const s=function(L,k){switch(L){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(k||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(k||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(k||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(k||""))}},c=`
`,h=function(L,k,D){k=k||1024;let B=L.pos,G=-1,V=0,$="",J=String.fromCharCode.apply(null,new Uint16Array(L.subarray(B,B+128)));for(;0>(G=J.indexOf(c))&&V<k&&B<L.byteLength;)$+=J,V+=J.length,B+=128,J+=String.fromCharCode.apply(null,new Uint16Array(L.subarray(B,B+128)));return-1<G?(D!==!1&&(L.pos+=V+G+1),$+J.slice(0,G)):!1},f=function(L){const k=/^#\?(\S+)/,D=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,N=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,B=/^\s*FORMAT=(\S+)\s*$/,G=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,V={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let $,J;for((L.pos>=L.byteLength||!($=h(L)))&&s(1,"no header found"),(J=$.match(k))||s(3,"bad initial token"),V.valid|=1,V.programtype=J[1],V.string+=$+`
`;$=h(L),$!==!1;){if(V.string+=$+`
`,$.charAt(0)==="#"){V.comments+=$+`
`;continue}if((J=$.match(D))&&(V.gamma=parseFloat(J[1])),(J=$.match(N))&&(V.exposure=parseFloat(J[1])),(J=$.match(B))&&(V.valid|=2,V.format=J[1]),(J=$.match(G))&&(V.valid|=4,V.height=parseInt(J[1],10),V.width=parseInt(J[2],10)),V.valid&2&&V.valid&4)break}return V.valid&2||s(3,"missing format specifier"),V.valid&4||s(3,"missing image size specifier"),V},d=function(L,k,D){const N=k;if(N<8||N>32767||L[0]!==2||L[1]!==2||L[2]&128)return new Uint8Array(L);N!==(L[2]<<8|L[3])&&s(3,"wrong scanline width");const B=new Uint8Array(4*k*D);B.length||s(4,"unable to allocate buffer space");let G=0,V=0;const $=4*N,J=new Uint8Array(4),le=new Uint8Array($);let H=D;for(;H>0&&V<L.byteLength;){V+4>L.byteLength&&s(1),J[0]=L[V++],J[1]=L[V++],J[2]=L[V++],J[3]=L[V++],(J[0]!=2||J[1]!=2||(J[2]<<8|J[3])!=N)&&s(3,"bad rgbe scanline format");let q=0,Z;for(;q<$&&V<L.byteLength;){Z=L[V++];const F=Z>128;if(F&&(Z-=128),(Z===0||q+Z>$)&&s(3,"bad scanline data"),F){const j=L[V++];for(let Q=0;Q<Z;Q++)le[q++]=j}else le.set(L.subarray(V,V+Z),q),q+=Z,V+=Z}const oe=N;for(let F=0;F<oe;F++){let j=0;B[G]=le[F+j],j+=N,B[G+1]=le[F+j],j+=N,B[G+2]=le[F+j],j+=N,B[G+3]=le[F+j],G+=4}H--}return B},v=function(L,k,D,N){const B=L[k+3],G=Math.pow(2,B-128)/255;D[N+0]=L[k+0]*G,D[N+1]=L[k+1]*G,D[N+2]=L[k+2]*G,D[N+3]=1},y=function(L,k,D,N){const B=L[k+3],G=Math.pow(2,B-128)/255;D[N+0]=bd.toHalfFloat(Math.min(L[k+0]*G,65504)),D[N+1]=bd.toHalfFloat(Math.min(L[k+1]*G,65504)),D[N+2]=bd.toHalfFloat(Math.min(L[k+2]*G,65504)),D[N+3]=bd.toHalfFloat(1)},w=new Uint8Array(e);w.pos=0;const g=f(w),x=g.width,_=g.height,E=d(w.subarray(w.pos),x,_);let C,I,R;switch(this.type){case vs:R=E.length/4;const L=new Float32Array(R*4);for(let D=0;D<R;D++)v(E,D*4,L,D*4);C=L,I=vs;break;case Rs:R=E.length/4;const k=new Uint16Array(R*4);for(let D=0;D<R;D++)y(E,D*4,k,D*4);C=k,I=Rs;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:x,height:_,data:C,header:g.string,gamma:g.gamma,exposure:g.exposure,type:I}}setDataType(e){return this.type=e,this}load(e,t,r,i){function o(s,a){switch(s.type){case vs:case Rs:"colorSpace"in s?s.colorSpace="srgb-linear":s.encoding=3e3,s.minFilter=ti,s.magFilter=ti,s.generateMipmaps=!1,s.flipY=!0;break}t&&t(s,a)}return super.load(e,o,r,i)}}const x0=z6>=152;class aY extends gA{constructor(e){super(e),this.type=Rs}parse(e){const k=Math.pow(2.7182818,2.2);function D(Y,U){for(var ne=0,ve=0;ve<65536;++ve)(ve==0||Y[ve>>3]&1<<(ve&7))&&(U[ne++]=ve);for(var me=ne-1;ne<65536;)U[ne++]=0;return me}function N(Y){for(var U=0;U<16384;U++)Y[U]={},Y[U].len=0,Y[U].lit=0,Y[U].p=null}const B={l:0,c:0,lc:0};function G(Y,U,ne,ve,me){for(;ne<Y;)U=U<<8|At(ve,me),ne+=8;ne-=Y,B.l=U>>ne&(1<<Y)-1,B.c=U,B.lc=ne}const V=new Array(59);function $(Y){for(var U=0;U<=58;++U)V[U]=0;for(var U=0;U<65537;++U)V[Y[U]]+=1;for(var ne=0,U=58;U>0;--U){var ve=ne+V[U]>>1;V[U]=ne,ne=ve}for(var U=0;U<65537;++U){var me=Y[U];me>0&&(Y[U]=me|V[me]++<<6)}}function J(Y,U,ne,ve,me,Se,Xe){for(var Ye=ne,st=0,rt=0;me<=Se;me++){if(Ye.value-ne.value>ve)return!1;G(6,st,rt,Y,Ye);var dt=B.l;if(st=B.c,rt=B.lc,Xe[me]=dt,dt==63){if(Ye.value-ne.value>ve)throw"Something wrong with hufUnpackEncTable";G(8,st,rt,Y,Ye);var tt=B.l+6;if(st=B.c,rt=B.lc,me+tt>Se+1)throw"Something wrong with hufUnpackEncTable";for(;tt--;)Xe[me++]=0;me--}else if(dt>=59){var tt=dt-59+2;if(me+tt>Se+1)throw"Something wrong with hufUnpackEncTable";for(;tt--;)Xe[me++]=0;me--}}$(Xe)}function le(Y){return Y&63}function H(Y){return Y>>6}function q(Y,U,ne,ve){for(;U<=ne;U++){var me=H(Y[U]),Se=le(Y[U]);if(me>>Se)throw"Invalid table entry";if(Se>14){var Xe=ve[me>>Se-14];if(Xe.len)throw"Invalid table entry";if(Xe.lit++,Xe.p){var Ye=Xe.p;Xe.p=new Array(Xe.lit);for(var st=0;st<Xe.lit-1;++st)Xe.p[st]=Ye[st]}else Xe.p=new Array(1);Xe.p[Xe.lit-1]=U}else if(Se)for(var rt=0,st=1<<14-Se;st>0;st--){var Xe=ve[(me<<14-Se)+rt];if(Xe.len||Xe.p)throw"Invalid table entry";Xe.len=Se,Xe.lit=U,rt++}}return!0}const Z={c:0,lc:0};function oe(Y,U,ne,ve){Y=Y<<8|At(ne,ve),U+=8,Z.c=Y,Z.lc=U}const F={c:0,lc:0};function j(Y,U,ne,ve,me,Se,Xe,Ye,st,rt){if(Y==U){ve<8&&(oe(ne,ve,me,Xe),ne=Z.c,ve=Z.lc),ve-=8;var dt=ne>>ve,dt=new Uint8Array([dt])[0];if(st.value+dt>rt)return!1;for(var tt=Ye[st.value-1];dt-- >0;)Ye[st.value++]=tt}else if(st.value<rt)Ye[st.value++]=Y;else return!1;F.c=ne,F.lc=ve}function Q(Y){return Y&65535}function se(Y){var U=Q(Y);return U>32767?U-65536:U}const fe={a:0,b:0};function we(Y,U){var ne=se(Y),ve=se(U),me=ve,Se=ne+(me&1)+(me>>1),Xe=Se,Ye=Se-me;fe.a=Xe,fe.b=Ye}function Ee(Y,U){var ne=Q(Y),ve=Q(U),me=ne-(ve>>1)&65535,Se=ve+me-32768&65535;fe.a=Se,fe.b=me}function Ce(Y,U,ne,ve,me,Se,Xe){for(var Ye=Xe<16384,st=ne>me?me:ne,rt=1,dt;rt<=st;)rt<<=1;for(rt>>=1,dt=rt,rt>>=1;rt>=1;){for(var tt=0,jt=tt+Se*(me-dt),Rt=Se*rt,Ft=Se*dt,rn=ve*rt,an=ve*dt,sn,Ht,pn,Xt;tt<=jt;tt+=Ft){for(var En=tt,mn=tt+ve*(ne-dt);En<=mn;En+=an){var xn=En+rn,or=En+Rt,Jn=or+rn;Ye?(we(Y[En+U],Y[or+U]),sn=fe.a,pn=fe.b,we(Y[xn+U],Y[Jn+U]),Ht=fe.a,Xt=fe.b,we(sn,Ht),Y[En+U]=fe.a,Y[xn+U]=fe.b,we(pn,Xt),Y[or+U]=fe.a,Y[Jn+U]=fe.b):(Ee(Y[En+U],Y[or+U]),sn=fe.a,pn=fe.b,Ee(Y[xn+U],Y[Jn+U]),Ht=fe.a,Xt=fe.b,Ee(sn,Ht),Y[En+U]=fe.a,Y[xn+U]=fe.b,Ee(pn,Xt),Y[or+U]=fe.a,Y[Jn+U]=fe.b)}if(ne&rt){var or=En+Rt;Ye?we(Y[En+U],Y[or+U]):Ee(Y[En+U],Y[or+U]),sn=fe.a,Y[or+U]=fe.b,Y[En+U]=sn}}if(me&rt)for(var En=tt,mn=tt+ve*(ne-dt);En<=mn;En+=an){var xn=En+rn;Ye?we(Y[En+U],Y[xn+U]):Ee(Y[En+U],Y[xn+U]),sn=fe.a,Y[xn+U]=fe.b,Y[En+U]=sn}dt=rt,rt>>=1}return tt}function Ge(Y,U,ne,ve,me,Se,Xe,Ye,st,rt){for(var dt=0,tt=0,jt=Ye,Rt=Math.trunc(me.value+(Se+7)/8);me.value<Rt;)for(oe(dt,tt,ne,me),dt=Z.c,tt=Z.lc;tt>=14;){var Ft=dt>>tt-14&16383,rn=U[Ft];if(rn.len)tt-=rn.len,j(rn.lit,Xe,dt,tt,ne,ve,me,st,rt,jt),dt=F.c,tt=F.lc;else{if(!rn.p)throw"hufDecode issues";var an;for(an=0;an<rn.lit;an++){for(var sn=le(Y[rn.p[an]]);tt<sn&&me.value<Rt;)oe(dt,tt,ne,me),dt=Z.c,tt=Z.lc;if(tt>=sn&&H(Y[rn.p[an]])==(dt>>tt-sn&(1<<sn)-1)){tt-=sn,j(rn.p[an],Xe,dt,tt,ne,ve,me,st,rt,jt),dt=F.c,tt=F.lc;break}}if(an==rn.lit)throw"hufDecode issues"}}var Ht=8-Se&7;for(dt>>=Ht,tt-=Ht;tt>0;){var rn=U[dt<<14-tt&16383];if(rn.len)tt-=rn.len,j(rn.lit,Xe,dt,tt,ne,ve,me,st,rt,jt),dt=F.c,tt=F.lc;else throw"hufDecode issues"}return!0}function Ie(Y,U,ne,ve,me,Se){var Xe={value:0},Ye=ne.value,st=Nt(U,ne),rt=Nt(U,ne);ne.value+=4;var dt=Nt(U,ne);if(ne.value+=4,st<0||st>=65537||rt<0||rt>=65537)throw"Something wrong with HUF_ENCSIZE";var tt=new Array(65537),jt=new Array(16384);N(jt);var Rt=ve-(ne.value-Ye);if(J(Y,U,ne,Rt,st,rt,tt),dt>8*(ve-(ne.value-Ye)))throw"Something wrong with hufUncompress";q(tt,st,rt,jt),Ge(tt,jt,Y,U,ne,dt,rt,Se,me,Xe)}function he(Y,U,ne){for(var ve=0;ve<ne;++ve)U[ve]=Y[U[ve]]}function ke(Y){for(var U=1;U<Y.length;U++){var ne=Y[U-1]+Y[U]-128;Y[U]=ne}}function Ne(Y,U){for(var ne=0,ve=Math.floor((Y.length+1)/2),me=0,Se=Y.length-1;!(me>Se||(U[me++]=Y[ne++],me>Se));)U[me++]=Y[ve++]}function Ae(Y){for(var U=Y.byteLength,ne=new Array,ve=0,me=new DataView(Y);U>0;){var Se=me.getInt8(ve++);if(Se<0){var Xe=-Se;U-=Xe+1;for(var Ye=0;Ye<Xe;Ye++)ne.push(me.getUint8(ve++))}else{var Xe=Se;U-=2;for(var st=me.getUint8(ve++),Ye=0;Ye<Xe+1;Ye++)ne.push(st)}}return ne}function ie(Y,U,ne,ve,me,Se){var xn=new DataView(Se.buffer),Xe=ne[Y.idx[0]].width,Ye=ne[Y.idx[0]].height,st=3,rt=Math.floor(Xe/8),dt=Math.ceil(Xe/8),tt=Math.ceil(Ye/8),jt=Xe-(dt-1)*8,Rt=Ye-(tt-1)*8,Ft={value:0},rn=new Array(st),an=new Array(st),sn=new Array(st),Ht=new Array(st),pn=new Array(st);for(let hn=0;hn<st;++hn)pn[hn]=U[Y.idx[hn]],rn[hn]=hn<1?0:rn[hn-1]+dt*tt,an[hn]=new Float32Array(64),sn[hn]=new Uint16Array(64),Ht[hn]=new Uint16Array(dt*64);for(let hn=0;hn<tt;++hn){var Xt=8;hn==tt-1&&(Xt=Rt);var En=8;for(let Ln=0;Ln<dt;++Ln){Ln==dt-1&&(En=jt);for(let Wn=0;Wn<st;++Wn)sn[Wn].fill(0),sn[Wn][0]=me[rn[Wn]++],Ke(Ft,ve,sn[Wn]),Ve(sn[Wn],an[Wn]),We(an[Wn]);nt(an);for(let Wn=0;Wn<st;++Wn)yt(an[Wn],Ht[Wn],Ln*64)}let Er=0;for(let Ln=0;Ln<st;++Ln){const Wn=ne[Y.idx[Ln]].type;for(let kr=8*hn;kr<8*hn+Xt;++kr){Er=pn[Ln][kr];for(let oa=0;oa<rt;++oa){const qi=oa*64+(kr&7)*8;xn.setUint16(Er+0*2*Wn,Ht[Ln][qi+0],!0),xn.setUint16(Er+1*2*Wn,Ht[Ln][qi+1],!0),xn.setUint16(Er+2*2*Wn,Ht[Ln][qi+2],!0),xn.setUint16(Er+3*2*Wn,Ht[Ln][qi+3],!0),xn.setUint16(Er+4*2*Wn,Ht[Ln][qi+4],!0),xn.setUint16(Er+5*2*Wn,Ht[Ln][qi+5],!0),xn.setUint16(Er+6*2*Wn,Ht[Ln][qi+6],!0),xn.setUint16(Er+7*2*Wn,Ht[Ln][qi+7],!0),Er+=8*2*Wn}}if(rt!=dt)for(let kr=8*hn;kr<8*hn+Xt;++kr){const oa=pn[Ln][kr]+8*rt*2*Wn,qi=rt*64+(kr&7)*8;for(let Bs=0;Bs<En;++Bs)xn.setUint16(oa+Bs*2*Wn,Ht[Ln][qi+Bs],!0)}}}for(var mn=new Uint16Array(Xe),xn=new DataView(Se.buffer),or=0;or<st;++or){ne[Y.idx[or]].decoded=!0;var Jn=ne[Y.idx[or]].type;if(ne[or].type==2)for(var ar=0;ar<Ye;++ar){const hn=pn[or][ar];for(var Yr=0;Yr<Xe;++Yr)mn[Yr]=xn.getUint16(hn+Yr*2*Jn,!0);for(var Yr=0;Yr<Xe;++Yr)xn.setFloat32(hn+Yr*2*Jn,Ue(mn[Yr]),!0)}}}function Ke(Y,U,ne){for(var ve,me=1;me<64;)ve=U[Y.value],ve==65280?me=64:ve>>8==255?me+=ve&255:(ne[me]=ve,me++),Y.value++}function Ve(Y,U){U[0]=Ue(Y[0]),U[1]=Ue(Y[1]),U[2]=Ue(Y[5]),U[3]=Ue(Y[6]),U[4]=Ue(Y[14]),U[5]=Ue(Y[15]),U[6]=Ue(Y[27]),U[7]=Ue(Y[28]),U[8]=Ue(Y[2]),U[9]=Ue(Y[4]),U[10]=Ue(Y[7]),U[11]=Ue(Y[13]),U[12]=Ue(Y[16]),U[13]=Ue(Y[26]),U[14]=Ue(Y[29]),U[15]=Ue(Y[42]),U[16]=Ue(Y[3]),U[17]=Ue(Y[8]),U[18]=Ue(Y[12]),U[19]=Ue(Y[17]),U[20]=Ue(Y[25]),U[21]=Ue(Y[30]),U[22]=Ue(Y[41]),U[23]=Ue(Y[43]),U[24]=Ue(Y[9]),U[25]=Ue(Y[11]),U[26]=Ue(Y[18]),U[27]=Ue(Y[24]),U[28]=Ue(Y[31]),U[29]=Ue(Y[40]),U[30]=Ue(Y[44]),U[31]=Ue(Y[53]),U[32]=Ue(Y[10]),U[33]=Ue(Y[19]),U[34]=Ue(Y[23]),U[35]=Ue(Y[32]),U[36]=Ue(Y[39]),U[37]=Ue(Y[45]),U[38]=Ue(Y[52]),U[39]=Ue(Y[54]),U[40]=Ue(Y[20]),U[41]=Ue(Y[22]),U[42]=Ue(Y[33]),U[43]=Ue(Y[38]),U[44]=Ue(Y[46]),U[45]=Ue(Y[51]),U[46]=Ue(Y[55]),U[47]=Ue(Y[60]),U[48]=Ue(Y[21]),U[49]=Ue(Y[34]),U[50]=Ue(Y[37]),U[51]=Ue(Y[47]),U[52]=Ue(Y[50]),U[53]=Ue(Y[56]),U[54]=Ue(Y[59]),U[55]=Ue(Y[61]),U[56]=Ue(Y[35]),U[57]=Ue(Y[36]),U[58]=Ue(Y[48]),U[59]=Ue(Y[49]),U[60]=Ue(Y[57]),U[61]=Ue(Y[58]),U[62]=Ue(Y[62]),U[63]=Ue(Y[63])}function We(Y){const U=.5*Math.cos(.7853975),ne=.5*Math.cos(3.14159/16),ve=.5*Math.cos(3.14159/8),me=.5*Math.cos(3*3.14159/16),Se=.5*Math.cos(5*3.14159/16),Xe=.5*Math.cos(3*3.14159/8),Ye=.5*Math.cos(7*3.14159/16);for(var st=new Array(4),rt=new Array(4),dt=new Array(4),tt=new Array(4),jt=0;jt<8;++jt){var Rt=jt*8;st[0]=ve*Y[Rt+2],st[1]=Xe*Y[Rt+2],st[2]=ve*Y[Rt+6],st[3]=Xe*Y[Rt+6],rt[0]=ne*Y[Rt+1]+me*Y[Rt+3]+Se*Y[Rt+5]+Ye*Y[Rt+7],rt[1]=me*Y[Rt+1]-Ye*Y[Rt+3]-ne*Y[Rt+5]-Se*Y[Rt+7],rt[2]=Se*Y[Rt+1]-ne*Y[Rt+3]+Ye*Y[Rt+5]+me*Y[Rt+7],rt[3]=Ye*Y[Rt+1]-Se*Y[Rt+3]+me*Y[Rt+5]-ne*Y[Rt+7],dt[0]=U*(Y[Rt+0]+Y[Rt+4]),dt[3]=U*(Y[Rt+0]-Y[Rt+4]),dt[1]=st[0]+st[3],dt[2]=st[1]-st[2],tt[0]=dt[0]+dt[1],tt[1]=dt[3]+dt[2],tt[2]=dt[3]-dt[2],tt[3]=dt[0]-dt[1],Y[Rt+0]=tt[0]+rt[0],Y[Rt+1]=tt[1]+rt[1],Y[Rt+2]=tt[2]+rt[2],Y[Rt+3]=tt[3]+rt[3],Y[Rt+4]=tt[3]-rt[3],Y[Rt+5]=tt[2]-rt[2],Y[Rt+6]=tt[1]-rt[1],Y[Rt+7]=tt[0]-rt[0]}for(var Ft=0;Ft<8;++Ft)st[0]=ve*Y[16+Ft],st[1]=Xe*Y[16+Ft],st[2]=ve*Y[48+Ft],st[3]=Xe*Y[48+Ft],rt[0]=ne*Y[8+Ft]+me*Y[24+Ft]+Se*Y[40+Ft]+Ye*Y[56+Ft],rt[1]=me*Y[8+Ft]-Ye*Y[24+Ft]-ne*Y[40+Ft]-Se*Y[56+Ft],rt[2]=Se*Y[8+Ft]-ne*Y[24+Ft]+Ye*Y[40+Ft]+me*Y[56+Ft],rt[3]=Ye*Y[8+Ft]-Se*Y[24+Ft]+me*Y[40+Ft]-ne*Y[56+Ft],dt[0]=U*(Y[Ft]+Y[32+Ft]),dt[3]=U*(Y[Ft]-Y[32+Ft]),dt[1]=st[0]+st[3],dt[2]=st[1]-st[2],tt[0]=dt[0]+dt[1],tt[1]=dt[3]+dt[2],tt[2]=dt[3]-dt[2],tt[3]=dt[0]-dt[1],Y[0+Ft]=tt[0]+rt[0],Y[8+Ft]=tt[1]+rt[1],Y[16+Ft]=tt[2]+rt[2],Y[24+Ft]=tt[3]+rt[3],Y[32+Ft]=tt[3]-rt[3],Y[40+Ft]=tt[2]-rt[2],Y[48+Ft]=tt[1]-rt[1],Y[56+Ft]=tt[0]-rt[0]}function nt(Y){for(var U=0;U<64;++U){var ne=Y[0][U],ve=Y[1][U],me=Y[2][U];Y[0][U]=ne+1.5747*me,Y[1][U]=ne-.1873*ve-.4682*me,Y[2][U]=ne+1.8556*ve}}function yt(Y,U,ne){for(var ve=0;ve<64;++ve)U[ne+ve]=bd.toHalfFloat(_t(Y[ve]))}function _t(Y){return Y<=1?Math.sign(Y)*Math.pow(Math.abs(Y),2.2):Math.sign(Y)*Math.pow(k,Math.abs(Y)-1)}function de(Y){return new DataView(Y.array.buffer,Y.offset.value,Y.size)}function ee(Y){var U=Y.viewer.buffer.slice(Y.offset.value,Y.offset.value+Y.size),ne=new Uint8Array(Ae(U)),ve=new Uint8Array(ne.length);return ke(ne),Ne(ne,ve),new DataView(ve.buffer)}function Fe(Y){var U=Y.array.slice(Y.offset.value,Y.offset.value+Y.size),ne=g2(U),ve=new Uint8Array(ne.length);return ke(ne),Ne(ne,ve),new DataView(ve.buffer)}function ot(Y){for(var U=Y.viewer,ne={value:Y.offset.value},ve=new Uint16Array(Y.width*Y.scanlineBlockSize*(Y.channels*Y.type)),me=new Uint8Array(8192),Se=0,Xe=new Array(Y.channels),Ye=0;Ye<Y.channels;Ye++)Xe[Ye]={},Xe[Ye].start=Se,Xe[Ye].end=Xe[Ye].start,Xe[Ye].nx=Y.width,Xe[Ye].ny=Y.lines,Xe[Ye].size=Y.type,Se+=Xe[Ye].nx*Xe[Ye].ny*Xe[Ye].size;var st=qe(U,ne),rt=qe(U,ne);if(rt>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(st<=rt)for(var Ye=0;Ye<rt-st+1;Ye++)me[Ye+st]=be(U,ne);var dt=new Uint16Array(65536),tt=D(me,dt),jt=Nt(U,ne);Ie(Y.array,U,ne,jt,ve,Se);for(var Ye=0;Ye<Y.channels;++Ye)for(var Rt=Xe[Ye],Ft=0;Ft<Xe[Ye].size;++Ft)Ce(ve,Rt.start+Ft,Rt.nx,Rt.size,Rt.ny,Rt.nx*Rt.size,tt);he(dt,ve,Se);for(var rn=0,an=new Uint8Array(ve.buffer.byteLength),sn=0;sn<Y.lines;sn++)for(var Ht=0;Ht<Y.channels;Ht++){var Rt=Xe[Ht],pn=Rt.nx*Rt.size,Xt=new Uint8Array(ve.buffer,Rt.end*2,pn*2);an.set(Xt,rn),rn+=pn*2,Rt.end+=pn}return new DataView(an.buffer)}function et(Y){var U=Y.array.slice(Y.offset.value,Y.offset.value+Y.size),ne=g2(U);const ve=Y.lines*Y.channels*Y.width,me=Y.type==1?new Uint16Array(ve):new Uint32Array(ve);let Se=0,Xe=0;const Ye=new Array(4);for(let st=0;st<Y.lines;st++)for(let rt=0;rt<Y.channels;rt++){let dt=0;switch(Y.type){case 1:Ye[0]=Se,Ye[1]=Ye[0]+Y.width,Se=Ye[1]+Y.width;for(let tt=0;tt<Y.width;++tt){const jt=ne[Ye[0]++]<<8|ne[Ye[1]++];dt+=jt,me[Xe]=dt,Xe++}break;case 2:Ye[0]=Se,Ye[1]=Ye[0]+Y.width,Ye[2]=Ye[1]+Y.width,Se=Ye[2]+Y.width;for(let tt=0;tt<Y.width;++tt){const jt=ne[Ye[0]++]<<24|ne[Ye[1]++]<<16|ne[Ye[2]++]<<8;dt+=jt,me[Xe]=dt,Xe++}break}}return new DataView(me.buffer)}function ft(Y){var U=Y.viewer,ne={value:Y.offset.value},ve=new Uint8Array(Y.width*Y.lines*(Y.channels*Y.type*2)),me={version:Je(U,ne),unknownUncompressedSize:Je(U,ne),unknownCompressedSize:Je(U,ne),acCompressedSize:Je(U,ne),dcCompressedSize:Je(U,ne),rleCompressedSize:Je(U,ne),rleUncompressedSize:Je(U,ne),rleRawSize:Je(U,ne),totalAcUncompressedCount:Je(U,ne),totalDcUncompressedCount:Je(U,ne),acCompression:Je(U,ne)};if(me.version<2)throw"EXRLoader.parse: "+Mr.compression+" version "+me.version+" is unsupported";for(var Se=new Array,Xe=qe(U,ne)-2;Xe>0;){var Ye=xt(U.buffer,ne),st=be(U,ne),rt=st>>2&3,dt=(st>>4)-1,tt=new Int8Array([dt])[0],jt=be(U,ne);Se.push({name:Ye,index:tt,type:jt,compression:rt}),Xe-=Ye.length+3}for(var Rt=Mr.channels,Ft=new Array(Y.channels),rn=0;rn<Y.channels;++rn){var an=Ft[rn]={},sn=Rt[rn];an.name=sn.name,an.compression=0,an.decoded=!1,an.type=sn.pixelType,an.pLinear=sn.pLinear,an.width=Y.width,an.height=Y.lines}for(var Ht={idx:new Array(3)},pn=0;pn<Y.channels;++pn)for(var an=Ft[pn],rn=0;rn<Se.length;++rn){var Xt=Se[rn];an.name==Xt.name&&(an.compression=Xt.compression,Xt.index>=0&&(Ht.idx[Xt.index]=pn),an.offset=pn)}if(me.acCompressedSize>0)switch(me.acCompression){case 0:var xn=new Uint16Array(me.totalAcUncompressedCount);Ie(Y.array,U,ne,me.acCompressedSize,xn,me.totalAcUncompressedCount);break;case 1:var En=Y.array.slice(ne.value,ne.value+me.totalAcUncompressedCount),mn=g2(En),xn=new Uint16Array(mn.buffer);ne.value+=me.totalAcUncompressedCount;break}if(me.dcCompressedSize>0){var or={array:Y.array,offset:ne,size:me.dcCompressedSize},Jn=new Uint16Array(Fe(or).buffer);ne.value+=me.dcCompressedSize}if(me.rleRawSize>0){var En=Y.array.slice(ne.value,ne.value+me.rleCompressedSize),mn=g2(En),ar=Ae(mn.buffer);ne.value+=me.rleCompressedSize}for(var Yr=0,hn=new Array(Ft.length),rn=0;rn<hn.length;++rn)hn[rn]=new Array;for(var Er=0;Er<Y.lines;++Er)for(var Ln=0;Ln<Ft.length;++Ln)hn[Ln].push(Yr),Yr+=Ft[Ln].width*Y.type*2;ie(Ht,hn,Ft,xn,Jn,ve);for(var rn=0;rn<Ft.length;++rn){var an=Ft[rn];if(!an.decoded)switch(an.compression){case 2:for(var Wn=0,kr=0,Er=0;Er<Y.lines;++Er){for(var oa=hn[rn][Wn],qi=0;qi<an.width;++qi){for(var Bs=0;Bs<2*an.type;++Bs)ve[oa++]=ar[kr+Bs*an.width*an.height];kr++}Wn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(ve.buffer)}function xt(Y,U){for(var ne=new Uint8Array(Y),ve=0;ne[U.value+ve]!=0;)ve+=1;var me=new TextDecoder().decode(ne.slice(U.value,U.value+ve));return U.value=U.value+ve+1,me}function ht(Y,U,ne){var ve=new TextDecoder().decode(new Uint8Array(Y).slice(U.value,U.value+ne));return U.value=U.value+ne,ve}function Pe(Y,U){var ne=Ct(Y,U),ve=Nt(Y,U);return[ne,ve]}function Wt(Y,U){var ne=Nt(Y,U),ve=Nt(Y,U);return[ne,ve]}function Ct(Y,U){var ne=Y.getInt32(U.value,!0);return U.value=U.value+4,ne}function Nt(Y,U){var ne=Y.getUint32(U.value,!0);return U.value=U.value+4,ne}function At(Y,U){var ne=Y[U.value];return U.value=U.value+1,ne}function be(Y,U){var ne=Y.getUint8(U.value);return U.value=U.value+1,ne}const Je=function(Y,U){let ne;return"getBigInt64"in DataView.prototype?ne=Number(Y.getBigInt64(U.value,!0)):ne=Y.getUint32(U.value+4,!0)+Number(Y.getUint32(U.value,!0)<<32),U.value+=8,ne};function pt(Y,U){var ne=Y.getFloat32(U.value,!0);return U.value+=4,ne}function Te(Y,U){return bd.toHalfFloat(pt(Y,U))}function Ue(Y){var U=(Y&31744)>>10,ne=Y&1023;return(Y>>15?-1:1)*(U?U===31?ne?NaN:1/0:Math.pow(2,U-15)*(1+ne/1024):6103515625e-14*(ne/1024))}function qe(Y,U){var ne=Y.getUint16(U.value,!0);return U.value+=2,ne}function Mt(Y,U){return Ue(qe(Y,U))}function Et(Y,U,ne,ve){for(var me=ne.value,Se=[];ne.value<me+ve-1;){var Xe=xt(U,ne),Ye=Ct(Y,ne),st=be(Y,ne);ne.value+=3;var rt=Ct(Y,ne),dt=Ct(Y,ne);Se.push({name:Xe,pixelType:Ye,pLinear:st,xSampling:rt,ySampling:dt})}return ne.value+=1,Se}function It(Y,U){var ne=pt(Y,U),ve=pt(Y,U),me=pt(Y,U),Se=pt(Y,U),Xe=pt(Y,U),Ye=pt(Y,U),st=pt(Y,U),rt=pt(Y,U);return{redX:ne,redY:ve,greenX:me,greenY:Se,blueX:Xe,blueY:Ye,whiteX:st,whiteY:rt}}function Zt(Y,U){var ne=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],ve=be(Y,U);return ne[ve]}function Hn(Y,U){var ne=Nt(Y,U),ve=Nt(Y,U),me=Nt(Y,U),Se=Nt(Y,U);return{xMin:ne,yMin:ve,xMax:me,yMax:Se}}function Kn(Y,U){var ne=["INCREASING_Y"],ve=be(Y,U);return ne[ve]}function bn(Y,U){var ne=pt(Y,U),ve=pt(Y,U);return[ne,ve]}function dr(Y,U){var ne=pt(Y,U),ve=pt(Y,U),me=pt(Y,U);return[ne,ve,me]}function Vt(Y,U,ne,ve,me){if(ve==="string"||ve==="stringvector"||ve==="iccProfile")return ht(U,ne,me);if(ve==="chlist")return Et(Y,U,ne,me);if(ve==="chromaticities")return It(Y,ne);if(ve==="compression")return Zt(Y,ne);if(ve==="box2i")return Hn(Y,ne);if(ve==="lineOrder")return Kn(Y,ne);if(ve==="float")return pt(Y,ne);if(ve==="v2f")return bn(Y,ne);if(ve==="v3f")return dr(Y,ne);if(ve==="int")return Ct(Y,ne);if(ve==="rational")return Pe(Y,ne);if(ve==="timecode")return Wt(Y,ne);if(ve==="preview")return ne.value+=me,"skipped";ne.value+=me}function yo(Y,U,ne){const ve={};if(Y.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";ve.version=Y.getUint8(4);const me=Y.getUint8(5);ve.spec={singleTile:!!(me&2),longName:!!(me&4),deepFormat:!!(me&8),multiPart:!!(me&16)},ne.value=8;for(var Se=!0;Se;){var Xe=xt(U,ne);if(Xe==0)Se=!1;else{var Ye=xt(U,ne),st=Nt(Y,ne),rt=Vt(Y,U,ne,Ye,st);rt===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Ye}'.`):ve[Xe]=rt}}if(me&-5)throw console.error("EXRHeader:",ve),"THREE.EXRLoader: provided file is currently unsupported.";return ve}function Do(Y,U,ne,ve,me){const Se={size:0,viewer:U,array:ne,offset:ve,width:Y.dataWindow.xMax-Y.dataWindow.xMin+1,height:Y.dataWindow.yMax-Y.dataWindow.yMin+1,channels:Y.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:Y.channels[0].pixelType,uncompress:null,getter:null,format:null,[x0?"colorSpace":"encoding"]:null};switch(Y.compression){case"NO_COMPRESSION":Se.lines=1,Se.uncompress=de;break;case"RLE_COMPRESSION":Se.lines=1,Se.uncompress=ee;break;case"ZIPS_COMPRESSION":Se.lines=1,Se.uncompress=Fe;break;case"ZIP_COMPRESSION":Se.lines=16,Se.uncompress=Fe;break;case"PIZ_COMPRESSION":Se.lines=32,Se.uncompress=ot;break;case"PXR24_COMPRESSION":Se.lines=16,Se.uncompress=et;break;case"DWAA_COMPRESSION":Se.lines=32,Se.uncompress=ft;break;case"DWAB_COMPRESSION":Se.lines=256,Se.uncompress=ft;break;default:throw"EXRLoader.parse: "+Y.compression+" is unsupported"}if(Se.scanlineBlockSize=Se.lines,Se.type==1)switch(me){case vs:Se.getter=Mt,Se.inputSize=2;break;case Rs:Se.getter=qe,Se.inputSize=2;break}else if(Se.type==2)switch(me){case vs:Se.getter=pt,Se.inputSize=4;break;case Rs:Se.getter=Te,Se.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Se.type+" for "+Y.compression+".";Se.blockCount=(Y.dataWindow.yMax+1)/Se.scanlineBlockSize;for(var Xe=0;Xe<Se.blockCount;Xe++)Je(U,ve);Se.outputChannels=Se.channels==3?4:Se.channels;const Ye=Se.width*Se.height*Se.outputChannels;switch(me){case vs:Se.byteArray=new Float32Array(Ye),Se.channels<Se.outputChannels&&Se.byteArray.fill(1,0,Ye);break;case Rs:Se.byteArray=new Uint16Array(Ye),Se.channels<Se.outputChannels&&Se.byteArray.fill(15360,0,Ye);break;default:console.error("THREE.EXRLoader: unsupported type: ",me);break}return Se.bytesPerLine=Se.width*Se.inputSize*Se.channels,Se.outputChannels==4?Se.format=Ls:Se.format=U3,x0?Se.colorSpace="srgb-linear":Se.encoding=3e3,Se}const si=new DataView(e),br=new Uint8Array(e),xr={value:0},Mr=yo(si,e,xr),Mn=Do(Mr,si,br,xr,this.type),Ko={value:0},Oo={R:0,G:1,B:2,A:3,Y:0};for(let Y=0;Y<Mn.height/Mn.scanlineBlockSize;Y++){const U=Nt(si,xr);Mn.size=Nt(si,xr),Mn.lines=U+Mn.scanlineBlockSize>Mn.height?Mn.height-U:Mn.scanlineBlockSize;const ve=Mn.size<Mn.lines*Mn.bytesPerLine?Mn.uncompress(Mn):de(Mn);xr.value+=Mn.size;for(let me=0;me<Mn.scanlineBlockSize;me++){const Se=me+Y*Mn.scanlineBlockSize;if(Se>=Mn.height)break;for(let Xe=0;Xe<Mn.channels;Xe++){const Ye=Oo[Mr.channels[Xe].name];for(let st=0;st<Mn.width;st++){Ko.value=(me*(Mn.channels*Mn.width)+Xe*Mn.width+st)*Mn.inputSize;const rt=(Mn.height-1-Se)*(Mn.width*Mn.outputChannels)+st*Mn.outputChannels+Ye;Mn.byteArray[rt]=Mn.getter(ve,Ko)}}}}return{header:Mr,width:Mn.width,height:Mn.height,data:Mn.byteArray,format:Mn.format,[x0?"colorSpace":"encoding"]:Mn[x0?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,r,i){function o(s,a){x0?s.colorSpace=a.colorSpace:s.encoding=a.encoding,s.minFilter=ti,s.magFilter=ti,s.generateMipmaps=!1,s.flipY=!1,t&&t(s,a)}return super.load(e,o,r,i)}}const q6=pe.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:r,enableDamping:i=!0,keyEvents:o=!1,onChange:s,onStart:a,onEnd:l,...u},c)=>{const h=fs(I=>I.invalidate),f=fs(I=>I.camera),d=fs(I=>I.gl),v=fs(I=>I.events),y=fs(I=>I.setEvents),w=fs(I=>I.set),g=fs(I=>I.get),x=fs(I=>I.performance),_=e||f,E=r||v.connected||d.domElement,C=pe.useMemo(()=>new oY(_),[_]);return k6(()=>{C.enabled&&C.update()},-1),pe.useEffect(()=>(o&&C.connect(o===!0?E:o),C.connect(E),()=>void C.dispose()),[o,E,t,C,h]),pe.useEffect(()=>{const I=k=>{h(),t&&x.regress(),s&&s(k)},R=k=>{a&&a(k)},L=k=>{l&&l(k)};return C.addEventListener("change",I),C.addEventListener("start",R),C.addEventListener("end",L),()=>{C.removeEventListener("start",R),C.removeEventListener("end",L),C.removeEventListener("change",I)}},[s,a,l,C,h,y]),pe.useEffect(()=>{if(n){const I=g().controls;return w({controls:C}),()=>w({controls:I})}},[n,C]),pe.createElement("primitive",cg({ref:c,object:C,enableDamping:i},u))}),db={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},lY="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",PL=n=>Array.isArray(n);function X6({files:n=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:t=void 0,encoding:r=void 0,extensions:i}={}){var o;let s=null,a=!1,l;if(t){if(!(t in db))throw new Error("Preset must be one of: "+Object.keys(db).join(", "));n=db[t],e=lY}if(a=PL(n),l=PL(n)?"cube":n.startsWith("data:application/exr")?"exr":n.startsWith("data:application/hdr")?"hdr":(o=n.split(".").pop())==null||(o=o.split("?"))==null||(o=o.shift())==null?void 0:o.toLowerCase(),s=a?s6:l==="hdr"?sY:l==="exr"?aY:null,!s)throw new Error("useEnvironment: Unrecognized file extension: "+n);const u=PA(s,a?[n]:n,d=>{d.setPath==null||d.setPath(e),i&&i(d)}),c=a?u[0]:u;c.mapping=a?Ou:ig;const h=3001,f=3e3;return"colorSpace"in c?c.colorSpace=r??a?"srgb":"srgb-linear":c.encoding=r??a?h:f,c}const uY=n=>n.current&&n.current.isScene,cY=n=>uY(n)?n.current:n;function RA(n,e,t,r,i=0){const o=cY(e||t),s=o.background,a=o.environment,l=o.backgroundBlurriness||0;return n!=="only"&&(o.environment=r),n&&(o.background=r),n&&o.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=i),()=>{n!=="only"&&(o.environment=a),n&&(o.background=s),n&&o.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=l)}}function kA({scene:n,background:e=!1,blur:t,map:r}){const i=fs(o=>o.scene);return pe.useLayoutEffect(()=>{if(r)return RA(e,n,i,r,t)},[i,n,r,e,t]),null}function Y6({background:n=!1,scene:e,blur:t,...r}){const i=X6(r),o=fs(s=>s.scene);return pe.useLayoutEffect(()=>RA(n,e,o,i,t),[i,n,e,o,t]),null}function hY({children:n,near:e=1,far:t=1e3,resolution:r=256,frames:i=1,map:o,background:s=!1,blur:a,scene:l,files:u,path:c,preset:h=void 0,extensions:f}){const d=fs(_=>_.gl),v=fs(_=>_.scene),y=pe.useRef(null),[w]=pe.useState(()=>new ag),g=pe.useMemo(()=>{const _=new K3(r);return _.texture.type=Rs,_},[r]);pe.useLayoutEffect(()=>(i===1&&y.current.update(d,w),RA(s,l,v,g.texture,a)),[n,w,g.texture,l,v,s,i,d]);let x=1;return k6(()=>{(i===1/0||x<i)&&(y.current.update(d,w),x++)}),pe.createElement(pe.Fragment,null,xX(pe.createElement(pe.Fragment,null,n,pe.createElement("cubeCamera",{ref:y,args:[e,t,g]}),u||h?pe.createElement(Y6,{background:!0,files:u,preset:h,path:c,extensions:f}):o?pe.createElement(kA,{background:!0,map:o,extensions:f}):null),w))}function fY(n){var e,t,r,i;const o=X6(n),s=n.map||o;pe.useMemo(()=>S6({GroundProjectedEnvImpl:KX}),[]);const a=pe.useMemo(()=>[s],[s]),l=(e=n.ground)==null?void 0:e.height,u=(t=n.ground)==null?void 0:t.radius,c=(r=(i=n.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return pe.createElement(pe.Fragment,null,pe.createElement(kA,cg({},n,{map:s})),pe.createElement("groundProjectedEnvImpl",{args:a,scale:c,height:l,radius:u}))}function dY(n){return n.ground?pe.createElement(fY,n):n.map?pe.createElement(kA,n):n.children?pe.createElement(hY,n):pe.createElement(Y6,n)}cr.DEFAULT_UP.set(0,0,1);function pY(){const{camera:n,set:e}=fs();return pe.useEffect(()=>{if(n instanceof Iu)console.log("Camera is already orthographic"),n.position.set(0,-400,200),n.lookAt(0,0,0),n.updateProjectionMatrix();else{console.log("Converting to orthographic camera");const t=window.innerWidth/window.innerHeight,r=1e3,i=new Iu(r*t/-2,r*t/2,r/2,r/-2,.01,1e4);i.position.set(0,-400,200),i.lookAt(0,0,0),i.updateProjectionMatrix(),e({camera:i})}},[n,e]),null}function mY(){return ut(Zm,{children:[ue("axesHelper",{args:[200]}),ue("gridHelper",{args:[400,40,8947848,4473924],rotation:[Math.PI/2,0,0]})]})}function gY({children:n}){const e=Math.min(window.devicePixelRatio,2);return ue(pe.Suspense,{fallback:null,children:ut(U6,{style:{width:"100%",height:"100%",backgroundColor:"#f5f5f5",touchAction:"none"},dpr:e,frameloop:"demand",orthographic:!0,camera:{position:[0,-400,200],zoom:1,far:1e4,near:.01},children:[ue(pY,{}),ue(q6,{enableRotate:!0,enablePan:!0,enableZoom:!0,mouseButtons:{LEFT:wu.ROTATE,MIDDLE:wu.DOLLY,RIGHT:wu.PAN},touches:{ONE:vc.ROTATE,TWO:vc.DOLLY_PAN},zoomToCursor:!0,rotateSpeed:.7,panSpeed:.5,zoomSpeed:1.2}),ue("ambientLight",{intensity:4}),ue("pointLight",{position:[100,100,100]}),ue(mY,{}),n]})})}function LL(n,e,t){if(n.clearGroups(),delete n.userData.faceGroups,n.setIndex(e.triangles),n.setAttribute("position",new tn(e.vertices,3)),e.faceGroups){let r=new Set;t&&(r=new Set(t)),n.userData.faceGroups=e.faceGroups,e.faceGroups.forEach(({start:i,count:o,faceId:s})=>{n.addGroup(i,o,r.has(s)?1:0)})}else n.addGroup(0,e.triangles.length,0);e.normals&&e.normals.length?n.setAttribute("normal",new tn(e.normals,3)):n.computeVertexNormals(),n.computeBoundingBox()}function RL(n,e,t){if(n.clearGroups(),delete n.userData.edgeGroups,n.setAttribute("position",new tn(e.lines,3)),!!e)if(e.edgeGroups){let r=new Set;t&&(r=new Set(t)),n.userData.edgeGroups=e.edgeGroups,e.edgeGroups.forEach(({start:i,count:o,edgeId:s})=>{n.addGroup(i,o,r.has(s)?1:0)})}else n.addGroup(0,e.lines.length/3,0)}function kL(n,e){n.clearGroups(),delete n.userData.edgeGroups,n.copy(new cA(e,2))}const vY=W4.memo(function({faces:e,edges:t,helperSpaces:r=[],highQuality:i=!1}){const{invalidate:o}=fs(),[s,a]=pe.useState([]),l=pe.useRef(new Rn),u=pe.useRef(new Rn);pe.useEffect(()=>{s.forEach(d=>{d.body.dispose(),d.lines.dispose()});const f=r.map(()=>({body:new Rn,lines:new Rn}));a(f)},[r.length]),pe.useLayoutEffect(()=>{if(e)try{console.time("[PERF] syncFaces"),LL(l.current,e),console.timeEnd("[PERF] syncFaces")}catch(f){console.error("[ERROR] Error in syncFaces:",f)}if(t)try{console.time("[PERF] syncLines"),RL(u.current,t),console.timeEnd("[PERF] syncLines")}catch(f){console.error("[ERROR] Error in syncLines:",f)}else if(e)try{console.time("[PERF] syncLinesFromFaces"),kL(u.current,l.current),console.timeEnd("[PERF] syncLinesFromFaces")}catch(f){console.error("[ERROR] Error in syncLinesFromFaces:",f)}s.length===r.length&&r.forEach((f,d)=>{f.faces&&LL(s[d].body,f.faces),f.edges?RL(s[d].lines,f.edges):f.faces&&kL(s[d].lines,s[d].body)}),o()},[e,t,r,s,o]),pe.useEffect(()=>()=>{l.current.dispose(),u.current.dispose(),s.forEach(f=>{f.body.dispose(),f.lines.dispose()})},[s]);const c=i?{color:"#6a92a6",metalness:.4,roughness:.3,envMapIntensity:.8,flatShading:!1,polygonOffset:!0,polygonOffsetFactor:2,polygonOffsetUnits:1,castShadow:!0,receiveShadow:!0}:{color:"#5a8296",polygonOffset:!0,polygonOffsetFactor:2,polygonOffsetUnits:1},h=i?{color:"#304352",linewidth:1.5}:{color:"#3c5a6e"};return ut("group",{children:[ue("mesh",{geometry:l.current,castShadow:!0,receiveShadow:!0,children:i?ue("meshStandardMaterial",{...c}):ue("meshStandardMaterial",{...c})}),ue("lineSegments",{geometry:u.current,children:ue("lineBasicMaterial",{...h})}),s.length===r.length&&s.map((f,d)=>ut("group",{children:[ue("mesh",{geometry:f.body,castShadow:!0,children:ue("meshStandardMaterial",{color:"#ff0000",transparent:!0,opacity:.3,depthWrite:!1,polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:1,roughness:.7,metalness:0})}),ue("lineSegments",{geometry:f.lines,children:ue("lineBasicMaterial",{color:"#ff3333"})})]},`helper-${d}`))]})});function Dh({path:n,stroke:e,strokeWidth:t,strokeDasharray:r,onClick:i,viewId:o,partName:s,partIndex:a}){if(!n)return null;const l=n.data||(typeof n=="string"?n:String(n)),u=n.id;return ue("path",{id:u,d:l,stroke:e,strokeWidth:t,fill:"none",strokeDasharray:r,style:{vectorEffect:"non-scaling-stroke",cursor:"pointer"},onClick:()=>i&&i(u,n,s,a)})}const md={sub:(n,e)=>[n[0]-e[0],n[1]-e[1]],add:(n,e)=>[n[0]+e[0],n[1]+e[1]],scale:(n,e)=>[n[0]*e,n[1]*e],len:n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),normalize:n=>{const e=md.len(n);return e>1e-9?md.scale(n,1/e):[0,0]},perp:n=>[-n[1],n[0]],dot:(n,e)=>n[0]*e[0]+n[1]*e[1]};function ax({measurementData:n,svgRef:e,onUpdatePosition:t}){const{pathId:r,type:i,geometry:o,textPosition:s,viewId:a}=n,[l,u]=pe.useState(!1),[c,h]=pe.useState({x:0,y:0}),[f,d]=pe.useState({x:0,y:0}),v=B=>{e!=null&&e.current&&(B.stopPropagation(),u(!0),h({x:B.clientX,y:B.clientY}),d(s),window.addEventListener("mousemove",y),window.addEventListener("mouseup",w))},y=B=>{if(!l||!(e!=null&&e.current))return;const G=B.clientX-c.x,V=B.clientY-c.y,$=e.current.getScreenCTM();if(!$)return;const J=G/$.a,le=V/$.d,H={x:f.x+J,y:f.y+le};t(r,H)},w=()=>{l&&(u(!1),window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",w))},g=B=>{if(!(e!=null&&e.current)||B.touches.length!==1)return;B.stopPropagation();const G=B.touches[0];u(!0),h({x:G.clientX,y:G.clientY}),d(s),window.addEventListener("touchmove",x,{passive:!1}),window.addEventListener("touchend",_),window.addEventListener("touchcancel",_)},x=B=>{if(!l||!(e!=null&&e.current)||B.touches.length!==1)return;B.preventDefault();const G=B.touches[0],V=G.clientX-c.x,$=G.clientY-c.y,J=e.current.getScreenCTM();if(!J)return;const le=V/J.a,H=$/J.d,q={x:f.x+le,y:f.y+H};t(r,q)},_=()=>{l&&(u(!1),window.removeEventListener("touchmove",x),window.removeEventListener("touchend",_),window.removeEventListener("touchcancel",_))},E="#222222",C=.15,I=2.2,R=1.2,L=1.2,k=.8,D=1.2;let N=null;if(i==="line"&&o.endpoints){const[B,G]=o.endpoints,$=(o.length||0).toFixed(2),J=G[0]-B[0],le=G[1]-B[1],H=(B[0]+G[0])/2,q=(B[1]+G[1])/2,Z=Math.sqrt(J*J+le*le),oe=Z>1e-6?J/Z:1,F=Z>1e-6?le/Z:0,j=-F,Q=oe,se=s.x-H,fe=s.y-q,we=se*j+fe*Q,Ee=Math.abs(we)<L?Math.sign(we||1)*L:we,Ce=[B[0]+j*Ee,B[1]+Q*Ee],Ge=[G[0]+j*Ee,G[1]+Q*Ee],Ie=[B[0]+j*Math.sign(Ee)*k,B[1]+Q*Math.sign(Ee)*k],he=[G[0]+j*Math.sign(Ee)*k,G[1]+Q*Math.sign(Ee)*k],ke=[Ce[0]+j*Math.sign(Ee)*D,Ce[1]+Q*Math.sign(Ee)*D],Ne=[Ge[0]+j*Math.sign(Ee)*D,Ge[1]+Q*Math.sign(Ee)*D],Ae=Z,ie=oe,Ke=F,Ve=`M ${Ce[0]} ${Ce[1]} 
                    l ${ie*R} ${Ke*R} 
                    l ${-Ke*R*.35} ${ie*R*.35} 
                    l ${-ie*R*.65} ${-Ke*R*.65} 
                    z`,We=`M ${Ge[0]} ${Ge[1]} 
                    l ${-ie*R} ${-Ke*R} 
                    l ${Ke*R*.35} ${-ie*R*.35} 
                    l ${ie*R*.65} ${Ke*R*.65} 
                    z`,_t=($.length*I*.65+L*2)/2,de=(s.x-Ce[0])*ie+(s.y-Ce[1])*Ke,ee=Math.max(R,de-_t),Fe=Math.min(Ae-R,de+_t),ot=[Ce[0]+ie*ee,Ce[1]+Ke*ee],et=[Ce[0]+ie*Fe,Ce[1]+Ke*Fe],ft=ee>R+1e-6,xt=Fe<Ae-R-1e-6;N=ut("g",{children:[ue("line",{x1:Ie[0],y1:Ie[1],x2:ke[0],y2:ke[1],stroke:E,strokeWidth:C,style:{vectorEffect:"non-scaling-stroke"}}),ue("line",{x1:he[0],y1:he[1],x2:Ne[0],y2:Ne[1],stroke:E,strokeWidth:C,style:{vectorEffect:"non-scaling-stroke"}}),ft&&ue("line",{x1:Ce[0],y1:Ce[1],x2:ot[0],y2:ot[1],stroke:E,strokeWidth:C,style:{vectorEffect:"non-scaling-stroke"}}),xt&&ue("line",{x1:et[0],y1:et[1],x2:Ge[0],y2:Ge[1],stroke:E,strokeWidth:C,style:{vectorEffect:"non-scaling-stroke"}}),ue("path",{d:Ve,fill:E,stroke:"none",style:{vectorEffect:"non-scaling-stroke"}}),ue("path",{d:We,fill:E,stroke:"none",style:{vectorEffect:"non-scaling-stroke"}}),ut("g",{children:[ue("rect",{x:s.x-$.length*I*.3,y:s.y-I*.7,width:$.length*I*.6,height:I*1.4,fill:"white",fillOpacity:"0.8",rx:I*.2,ry:I*.2,style:{vectorEffect:"non-scaling-stroke"}}),ue("text",{x:s.x,y:s.y,fontSize:I,fill:E,stroke:"none",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"Arial, sans-serif",style:{cursor:"move",userSelect:"none",vectorEffect:"non-scaling-stroke"},onMouseDown:v,onTouchStart:g,children:$})]})]})}else if(i==="circle"&&o.center&&o.diameter!=null){const[B,G]=o.center,V=o.diameter,$=o.radius||V/2,J=`⌀${V.toFixed(2)}`,le=J.length*I*.65,H=$*2<le*1.5,q=s.x-B,Z=s.y-G,oe=q*q+Z*Z,F=Math.sqrt(oe);let j;oe<1e-9?j=0:j=Math.atan2(Z,q);const Q=Math.cos(j),se=Math.sin(j);if(H){const fe=$+L*3;let we=Math.max(F,fe);F<fe&&(we=fe);const Ee=[B,G],Ce=[B+Q*we*.9,G+se*we*.9],Ge={x:B+Q*we,y:G+se*we},Ie=Math.min($*.5,1);N=ut("g",{children:[ue("line",{x1:B-Ie,y1:G,x2:B+Ie,y2:G,stroke:E,strokeWidth:C,style:{vectorEffect:"non-scaling-stroke"}}),ue("line",{x1:B,y1:G-Ie,x2:B,y2:G+Ie,stroke:E,strokeWidth:C,style:{vectorEffect:"non-scaling-stroke"}}),ue("line",{x1:Ee[0],y1:Ee[1],x2:Ce[0],y2:Ce[1],stroke:E,strokeWidth:C,style:{vectorEffect:"non-scaling-stroke"}}),ut("g",{transform:`translate(${Ge.x-s.x}, ${Ge.y-s.y})`,children:[ue("rect",{x:s.x-J.length*I*.3,y:s.y-I*.7,width:J.length*I*.6,height:I*1.4,fill:"white",fillOpacity:"0.9",rx:I*.2,ry:I*.2,style:{vectorEffect:"non-scaling-stroke"}}),ue("text",{x:s.x,y:s.y,fontSize:I,fill:E,stroke:"none",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"Arial, sans-serif",style:{cursor:"move",userSelect:"none",vectorEffect:"non-scaling-stroke"},onMouseDown:v,onTouchStart:g,children:J})]})]})}else{const fe=[B-Q*$,G-se*$],we=[B+Q*$,G+se*$],Ee=`M ${fe[0]} ${fe[1]} 
                      l ${Q*R} ${se*R} 
                      l ${-se*R*.35} ${Q*R*.35} 
                      l ${-Q*R*.65} ${-se*R*.65} 
                      z`,Ce=`M ${we[0]} ${we[1]} 
                      l ${-Q*R} ${-se*R} 
                      l ${se*R*.35} ${-Q*R*.35} 
                      l ${Q*R*.65} ${se*R*.65} 
                      z`,Ie=(le+L*2)/2,he=md.dot([q,Z],[Q,se]),ke=-$+R,Ne=$-R,Ae=Math.max(ke,Math.min(Ne,he-Ie)),ie=Math.max(ke,Math.min(Ne,he+Ie)),Ke=[B+Q*Ae,G+se*Ae],Ve=[B+Q*ie,G+se*ie],We=md.len(md.sub(Ke,fe))>1e-6,nt=md.len(md.sub(we,Ve))>1e-6;N=ut("g",{children:[We&&ue("line",{x1:fe[0],y1:fe[1],x2:Ke[0],y2:Ke[1],stroke:E,strokeWidth:C,style:{vectorEffect:"non-scaling-stroke"}}),nt&&ue("line",{x1:Ve[0],y1:Ve[1],x2:we[0],y2:we[1],stroke:E,strokeWidth:C,style:{vectorEffect:"non-scaling-stroke"}}),ue("path",{d:Ee,fill:E,stroke:"none",style:{vectorEffect:"non-scaling-stroke"}}),ue("path",{d:Ce,fill:E,stroke:"none",style:{vectorEffect:"non-scaling-stroke"}}),ut("g",{children:[ue("rect",{x:s.x-J.length*I*.3,y:s.y-I*.7,width:J.length*I*.6,height:I*1.4,fill:"white",fillOpacity:"0.9",rx:I*.2,ry:I*.2,style:{vectorEffect:"non-scaling-stroke"}}),ue("text",{x:s.x,y:s.y,fontSize:I,fill:E,stroke:"none",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"Arial, sans-serif",style:{cursor:"move",userSelect:"none",vectorEffect:"non-scaling-stroke"},onMouseDown:v,onTouchStart:g,children:J})]})]})}}return N}function yY({projection:n,title:e,position:t,dimensions:r,onPathClick:i,viewId:o,activeMeasurements:s,onMeasurementUpdate:a,partName:l,partIndex:u}){var w,g;if(!n)return null;const c=pe.useRef(null),{width:h,height:f}=r,[d,v]=t,y=25;return ut("div",{style:{position:"absolute",left:`${d}px`,top:`${v}px`,width:`${h}px`,height:`${f}px`,border:"1px solid #aaa",backgroundColor:"#f8f8f8",overflow:"hidden"},children:[ue("div",{style:{padding:"5px",height:`${y}px`,borderBottom:"1px solid #ddd",backgroundColor:"#eee",fontSize:"12px",fontWeight:"bold",boxSizing:"border-box"},children:e}),ue("div",{style:{width:"100%",height:`calc(100% - ${y}px)`,position:"relative"},children:ut("svg",{ref:c,viewBox:n.combinedViewBox,style:{width:"100%",height:"100%"},preserveAspectRatio:"xMidYMid meet",children:[ue("g",{children:(((w=n.hidden)==null?void 0:w.paths)||[]).map((x,_)=>ue(Dh,{path:x,stroke:"#777777",strokeWidth:"0.3",strokeDasharray:"2,1",onClick:i,viewId:o,partName:l,partIndex:u},`${o}_hidden_${x.id||_}`))}),ue("g",{children:(((g=n.visible)==null?void 0:g.paths)||[]).map((x,_)=>ue(Dh,{path:x,stroke:"#000000",strokeWidth:"0.5",strokeDasharray:null,onClick:i,viewId:o,partName:l,partIndex:u},`${o}_visible_${x.id||_}`))}),ue("g",{children:Object.values(s).filter(x=>x.viewId===o).map(x=>{var I,R;let _=null;const E=n.allPaths;if(E)_=E.find(L=>L.id===x.pathId),_||console.warn(`[WARN] Measurement Lookup: Path with ID ${x.pathId} not found in projection.allPaths for view ${o}.`);else{console.warn(`[WARN] Measurement Lookup: projection.allPaths not found for view ${o}. Falling back to visible/hidden lookup.`);const L=x.pathId.includes("_visible_")||x.pathId.includes("_circle")?(I=n.visible)==null?void 0:I.paths:(R=n.hidden)==null?void 0:R.paths;L&&(_=L.find(k=>k.id===x.pathId)),_||console.warn(`[WARN] Measurement Fallback Lookup: Path with ID ${x.pathId} not found in visible/hidden paths for view ${o}.`)}if(!_||!_.geometry)return console.warn(`[WARN] Could not find valid geometry for measurement: ${x.pathId} in view ${o}`),null;const C={...x,geometry:_.geometry};return ue(ax,{measurementData:C,svgRef:c,onUpdatePosition:a},x.pathId)})})]})})]})}function bu(n){if(!n||typeof n!="string")return null;const e=n.split(/[\s,]+/).map(parseFloat);if(e.length!==4||e.some(isNaN))return console.warn("Could not parse viewBox string:",n),null;const t=Math.max(0,e[2]),r=Math.max(0,e[3]);return{x:e[0],y:e[1],width:t,height:r}}function xY({part:n,index:e,scale:t,onPathClick:r,activeMeasurements:i,onMeasurementUpdate:o}){var B,G,V,$,J,le;if(!n||!n.views)return null;const s=pe.useRef(null),a=pe.useRef(null),l=pe.useRef(null),u=20,c=n.views.front,h=n.views.top,f=n.views.right,d=n.name.replace(/\s+/g,"_"),v=`${d}_front`,y=`${d}_top`,w=`${d}_right`;let g,x,_,E=0,C=0,I=0,R=0,L=0,k=0;c&&(g=bu(c.combinedViewBox),E=g?g.width*t:0,C=g?g.height*t:0),h&&(x=bu(h.combinedViewBox),I=x?x.width*t:0,R=x?x.height*t:0),f&&(_=bu(f.combinedViewBox),L=_?_.width*t:0,k=_?_.height*t:0);const D=Math.max(E+L+u,I),N=C+R+u;return ut("div",{style:{margin:"10px",border:"1px solid #ccc",backgroundColor:"white",display:"inline-block",width:`${D+20}px`},children:[ue("h4",{style:{padding:"5px",margin:0,backgroundColor:"#eee"},children:n.name}),ut("div",{style:{padding:"10px",position:"relative",height:`${N+20}px`},children:[c&&g&&ue("div",{style:{position:"absolute",top:"0",left:"0",width:`${E}px`,height:`${C}px`},children:ue("div",{style:{width:"100%",height:"100%",position:"relative"},children:ut("svg",{ref:s,viewBox:c.combinedViewBox,style:{width:"100%",height:"100%"},preserveAspectRatio:"xMidYMid meet",children:[ue("g",{children:(((B=c.hidden)==null?void 0:B.paths)||[]).map((H,q)=>ue(Dh,{path:H,stroke:"#777777",strokeWidth:"0.3",strokeDasharray:"2,1",onClick:r,viewId:v,partName:n.name,partIndex:e},`${v}_hidden_${H.id||q}`))}),ue("g",{children:(((G=c.visible)==null?void 0:G.paths)||[]).map((H,q)=>ue(Dh,{path:H,stroke:"#000000",strokeWidth:"0.5",strokeDasharray:null,onClick:r,viewId:v,partName:n.name,partIndex:e},`${v}_visible_${H.id||q}`))}),ue("g",{children:Object.values(i).filter(H=>H.viewId===v).map(H=>{var se,fe,we,Ee;const q=H.pathId.split("_"),Z=q[q.length-3],oe=q.slice(q.length-2).join("_");let F=null;const j=Z==="visible"?(se=c==null?void 0:c.visible)==null?void 0:se.paths:(fe=c==null?void 0:c.hidden)==null?void 0:fe.paths;if(j&&(F=j.find(Ce=>{const Ge=`${Ce.id||""}`.split("_");return Ge.slice(Ge.length-2).join("_")===oe||`${Ce.id}`===oe}),!F)){const Ce=q[q.length-1],Ge=parseInt(Ce,10);!isNaN(Ge)&&Ge>=0&&Ge<j.length&&((Ee=(we=j[Ge])==null?void 0:we.geometry)==null?void 0:Ee.type)===H.type&&(F=j[Ge])}if(!F||!F.geometry)return console.warn(`PartView(Front): Could not find current geometry for measurement: ${H.pathId}`),null;const Q={...H,geometry:F.geometry};return ue(ax,{measurementData:Q,svgRef:s,onUpdatePosition:o},H.pathId)})})]})})}),h&&x&&ue("div",{style:{position:"absolute",top:`${C+u}px`,left:`${(E-I)/2}px`,width:`${I}px`,height:`${R}px`},children:ue("div",{style:{width:"100%",height:"100%",position:"relative"},children:ut("svg",{ref:a,viewBox:h.combinedViewBox,style:{width:"100%",height:"100%"},preserveAspectRatio:"xMidYMid meet",children:[ue("g",{children:(((V=h.hidden)==null?void 0:V.paths)||[]).map((H,q)=>ue(Dh,{path:H,stroke:"#777777",strokeWidth:"0.3",strokeDasharray:"2,1",onClick:r,viewId:y,partName:n.name,partIndex:e},`${y}_hidden_${H.id||q}`))}),ue("g",{children:((($=h.visible)==null?void 0:$.paths)||[]).map((H,q)=>ue(Dh,{path:H,stroke:"#000000",strokeWidth:"0.5",strokeDasharray:null,onClick:r,viewId:y,partName:n.name,partIndex:e},`${y}_visible_${H.id||q}`))}),ue("g",{children:Object.values(i).filter(H=>H.viewId===y).map(H=>{var se,fe,we,Ee;const q=H.pathId.split("_"),Z=q[q.length-3],oe=q.slice(q.length-2).join("_");let F=null;const j=Z==="visible"?(se=h==null?void 0:h.visible)==null?void 0:se.paths:(fe=h==null?void 0:h.hidden)==null?void 0:fe.paths;if(j&&(F=j.find(Ce=>{const Ge=`${Ce.id||""}`.split("_");return Ge.slice(Ge.length-2).join("_")===oe||`${Ce.id}`===oe}),!F)){const Ce=q[q.length-1],Ge=parseInt(Ce,10);!isNaN(Ge)&&Ge>=0&&Ge<j.length&&((Ee=(we=j[Ge])==null?void 0:we.geometry)==null?void 0:Ee.type)===H.type&&(F=j[Ge])}if(!F||!F.geometry)return console.warn(`PartView(Top): Could not find current geometry for measurement: ${H.pathId}`),null;const Q={...H,geometry:F.geometry};return ue(ax,{measurementData:Q,svgRef:a,onUpdatePosition:o},H.pathId)})})]})})}),f&&_&&ue("div",{style:{position:"absolute",top:`${(C-k)/2}px`,left:`${E+u}px`,width:`${L}px`,height:`${k}px`},children:ue("div",{style:{width:"100%",height:"100%",position:"relative"},children:ut("svg",{ref:l,viewBox:f.combinedViewBox,style:{width:"100%",height:"100%"},preserveAspectRatio:"xMidYMid meet",children:[ue("g",{children:(((J=f.hidden)==null?void 0:J.paths)||[]).map((H,q)=>ue(Dh,{path:H,stroke:"#777777",strokeWidth:"0.3",strokeDasharray:"2,1",onClick:r,viewId:w,partName:n.name,partIndex:e},`${w}_hidden_${H.id||q}`))}),ue("g",{children:(((le=f.visible)==null?void 0:le.paths)||[]).map((H,q)=>ue(Dh,{path:H,stroke:"#000000",strokeWidth:"0.5",strokeDasharray:null,onClick:r,viewId:w,partName:n.name,partIndex:e},`${w}_visible_${H.id||q}`))}),ue("g",{children:Object.values(i).filter(H=>H.viewId===w).map(H=>{var se,fe,we,Ee;const q=H.pathId.split("_"),Z=q[q.length-3],oe=q.slice(q.length-2).join("_");let F=null;const j=Z==="visible"?(se=f==null?void 0:f.visible)==null?void 0:se.paths:(fe=f==null?void 0:f.hidden)==null?void 0:fe.paths;if(j&&(F=j.find(Ce=>{const Ge=`${Ce.id||""}`.split("_");return Ge.slice(Ge.length-2).join("_")===oe||`${Ce.id}`===oe}),!F)){const Ce=q[q.length-1],Ge=parseInt(Ce,10);!isNaN(Ge)&&Ge>=0&&Ge<j.length&&((Ee=(we=j[Ge])==null?void 0:we.geometry)==null?void 0:Ee.type)===H.type&&(F=j[Ge])}if(!F||!F.geometry)return console.warn(`PartView(Right): Could not find current geometry for measurement: ${H.pathId}`),null;const Q={...H,geometry:F.geometry};return ue(ax,{measurementData:Q,svgRef:l,onUpdatePosition:o},H.pathId)})})]})})})]})]},e)}function wY({isMobile:n,zoomLevel:e,scale:t,containerSize:r,panOffset:i,onZoomChange:o,onPanChange:s,onScaleChange:a,onResetView:l,onExportPDF:u}){const c=h=>{const f=Math.max(.1,Math.min(10,e+h*e)),d=r.width/2,v=r.height/2,y=(d-i.x)/e,w=(v-i.y)/e,g=d-y*f,x=v-w*f;o(f),s({x:g,y:x})};return ut("div",{style:{position:"absolute",top:n?"8px":"10px",right:n?"8px":"10px",zIndex:100,backgroundColor:"rgba(255,255,255,0.8)",padding:n?"8px":"5px 10px",borderRadius:"4px",display:"flex",flexDirection:"column",gap:n?"8px":"5px"},children:[ut("div",{style:{display:"flex",alignItems:"center"},children:[ue("button",{title:"Zoom Out",style:{margin:"0 2px",padding:n?"5px 10px":"2px 6px",cursor:"pointer",fontSize:n?"16px":"inherit"},onClick:()=>c(-.1),children:"−"}),ut("span",{style:{margin:"0 5px",fontSize:n?"14px":"12px",minWidth:"35px",textAlign:"center"},children:[Math.round(e*100),"%"]}),ue("button",{title:"Zoom In",style:{margin:"0 2px",padding:n?"5px 10px":"2px 6px",cursor:"pointer",fontSize:n?"16px":"inherit"},onClick:()=>c(.1),children:"+"}),ue("button",{title:"Reset View",style:{margin:"0 0 0 10px",padding:n?"5px 10px":"2px 8px",cursor:"pointer",fontSize:n?"14px":"inherit"},onClick:l,children:"Reset"})]}),ut("div",{style:{display:"flex",alignItems:"center"},children:[ue("label",{htmlFor:"scaleSlider",style:{fontSize:n?"12px":"10px",marginRight:"5px"},children:"Scale:"}),ue("input",{type:"range",id:"scaleSlider",min:"1",max:"100",step:"1",value:t,onChange:h=>a(Number(h.target.value)),style:{cursor:"pointer",width:"80px"},title:`Scale: ${t} px/cm`}),ut("span",{style:{margin:"0 5px",fontSize:n?"12px":"10px",minWidth:"45px",textAlign:"right"},children:[t," px/cm"]})]}),ue("button",{title:"Export as PDF",style:{marginTop:"5px",padding:n?"5px 10px":"2px 8px",cursor:"pointer",fontSize:n?"14px":"inherit"},onClick:u,children:"Export PDF"})]})}function Fr(n){return Fr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fr(n)}var ms=Uint8Array,Sa=Uint16Array,IA=Int32Array,yS=new ms([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),xS=new ms([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),$M=new ms([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Z6=function(n,e){for(var t=new Sa(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var i=new IA(t[30]),r=1;r<30;++r)for(var o=t[r];o<t[r+1];++o)i[o]=o-t[r]<<5|r;return{b:t,r:i}},K6=Z6(yS,2),J6=K6.b,qM=K6.r;J6[28]=258,qM[258]=28;var Q6=Z6(xS,0),SY=Q6.b,IL=Q6.r,XM=new Sa(32768);for(var ii=0;ii<32768;++ii){var Ah=(ii&43690)>>1|(ii&21845)<<1;Ah=(Ah&52428)>>2|(Ah&13107)<<2,Ah=(Ah&61680)>>4|(Ah&3855)<<4,XM[ii]=((Ah&65280)>>8|(Ah&255)<<8)>>1}var Fu=function(n,e,t){for(var r=n.length,i=0,o=new Sa(e);i<r;++i)n[i]&&++o[n[i]-1];var s=new Sa(e);for(i=1;i<e;++i)s[i]=s[i-1]+o[i-1]<<1;var a;if(t){a=new Sa(1<<e);var l=15-e;for(i=0;i<r;++i)if(n[i])for(var u=i<<4|n[i],c=e-n[i],h=s[n[i]-1]++<<c,f=h|(1<<c)-1;h<=f;++h)a[XM[h]>>l]=u}else for(a=new Sa(r),i=0;i<r;++i)n[i]&&(a[i]=XM[s[n[i]-1]++]>>15-n[i]);return a},gf=new ms(288);for(var ii=0;ii<144;++ii)gf[ii]=8;for(var ii=144;ii<256;++ii)gf[ii]=9;for(var ii=256;ii<280;++ii)gf[ii]=7;for(var ii=280;ii<288;++ii)gf[ii]=8;var Jv=new ms(32);for(var ii=0;ii<32;++ii)Jv[ii]=5;var _Y=Fu(gf,9,0),bY=Fu(gf,9,1),MY=Fu(Jv,5,0),EY=Fu(Jv,5,1),pb=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Tl=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},mb=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},NA=function(n){return(n+7)/8|0},eD=function(n,e,t){return(e==null||e<0)&&(e=0),(t==null||t>n.length)&&(t=n.length),new ms(n.subarray(e,t))},AY=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],kl=function(n,e,t){var r=new Error(e||AY[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,kl),!t)throw r;return r},TY=function(n,e,t,r){var i=n.length,o=r?r.length:0;if(!i||e.f&&!e.l)return t||new ms(0);var s=!t,a=s||e.i!=2,l=e.i;s&&(t=new ms(i*3));var u=function(Ie){var he=t.length;if(Ie>he){var ke=new ms(Math.max(he*2,Ie));ke.set(t),t=ke}},c=e.f||0,h=e.p||0,f=e.b||0,d=e.l,v=e.d,y=e.m,w=e.n,g=i*8;do{if(!d){c=Tl(n,h,1);var x=Tl(n,h+1,3);if(h+=3,x)if(x==1)d=bY,v=EY,y=9,w=5;else if(x==2){var I=Tl(n,h,31)+257,R=Tl(n,h+10,15)+4,L=I+Tl(n,h+5,31)+1;h+=14;for(var k=new ms(L),D=new ms(19),N=0;N<R;++N)D[$M[N]]=Tl(n,h+N*3,7);h+=R*3;for(var B=pb(D),G=(1<<B)-1,V=Fu(D,B,1),N=0;N<L;){var $=V[Tl(n,h,G)];h+=$&15;var _=$>>4;if(_<16)k[N++]=_;else{var J=0,le=0;for(_==16?(le=3+Tl(n,h,3),h+=2,J=k[N-1]):_==17?(le=3+Tl(n,h,7),h+=3):_==18&&(le=11+Tl(n,h,127),h+=7);le--;)k[N++]=J}}var H=k.subarray(0,I),q=k.subarray(I);y=pb(H),w=pb(q),d=Fu(H,y,1),v=Fu(q,w,1)}else kl(1);else{var _=NA(h)+4,E=n[_-4]|n[_-3]<<8,C=_+E;if(C>i){l&&kl(0);break}a&&u(f+E),t.set(n.subarray(_,C),f),e.b=f+=E,e.p=h=C*8,e.f=c;continue}if(h>g){l&&kl(0);break}}a&&u(f+131072);for(var Z=(1<<y)-1,oe=(1<<w)-1,F=h;;F=h){var J=d[mb(n,h)&Z],j=J>>4;if(h+=J&15,h>g){l&&kl(0);break}if(J||kl(2),j<256)t[f++]=j;else if(j==256){F=h,d=null;break}else{var Q=j-254;if(j>264){var N=j-257,se=yS[N];Q=Tl(n,h,(1<<se)-1)+J6[N],h+=se}var fe=v[mb(n,h)&oe],we=fe>>4;fe||kl(3),h+=fe&15;var q=SY[we];if(we>3){var se=xS[we];q+=mb(n,h)&(1<<se)-1,h+=se}if(h>g){l&&kl(0);break}a&&u(f+131072);var Ee=f+Q;if(f<q){var Ce=o-q,Ge=Math.min(q,Ee);for(Ce+f<0&&kl(3);f<Ge;++f)t[f]=r[Ce+f]}for(;f<Ee;++f)t[f]=t[f-q]}}e.l=d,e.p=F,e.b=f,e.f=c,d&&(c=1,e.m=y,e.d=v,e.n=w)}while(!c);return f!=t.length&&s?eD(t,0,f):t.subarray(0,f)},dc=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},w0=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},gb=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var i=t.length,o=t.slice();if(!i)return{t:nD,l:0};if(i==1){var s=new ms(t[0].s+1);return s[t[0].s]=1,{t:s,l:1}}t.sort(function(C,I){return C.f-I.f}),t.push({s:-1,f:25001});var a=t[0],l=t[1],u=0,c=1,h=2;for(t[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=i-1;)a=t[t[u].f<t[h].f?u++:h++],l=t[u!=c&&t[u].f<t[h].f?u++:h++],t[c++]={s:-1,f:a.f+l.f,l:a,r:l};for(var f=o[0].s,r=1;r<i;++r)o[r].s>f&&(f=o[r].s);var d=new Sa(f+1),v=YM(t[c-1],d,0);if(v>e){var r=0,y=0,w=v-e,g=1<<w;for(o.sort(function(I,R){return d[R.s]-d[I.s]||I.f-R.f});r<i;++r){var x=o[r].s;if(d[x]>e)y+=g-(1<<v-d[x]),d[x]=e;else break}for(y>>=w;y>0;){var _=o[r].s;d[_]<e?y-=1<<e-d[_]++-1:++r}for(;r>=0&&y;--r){var E=o[r].s;d[E]==e&&(--d[E],++y)}v=e}return{t:new ms(d),l:v}},YM=function(n,e,t){return n.s==-1?Math.max(YM(n.l,e,t+1),YM(n.r,e,t+1)):e[n.s]=t},NL=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new Sa(++e),r=0,i=n[0],o=1,s=function(l){t[r++]=l},a=1;a<=e;++a)if(n[a]==i&&a!=e)++o;else{if(!i&&o>2){for(;o>138;o-=138)s(32754);o>2&&(s(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(s(i),--o;o>6;o-=6)s(8304);o>2&&(s(o-3<<5|8208),o=0)}for(;o--;)s(i);o=1,i=n[a]}return{c:t.subarray(0,r),n:e}},S0=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},tD=function(n,e,t){var r=t.length,i=NA(e+2);n[i]=r&255,n[i+1]=r>>8,n[i+2]=n[i]^255,n[i+3]=n[i+1]^255;for(var o=0;o<r;++o)n[i+o+4]=t[o];return(i+4+r)*8},FL=function(n,e,t,r,i,o,s,a,l,u,c){dc(e,c++,t),++i[256];for(var h=gb(i,15),f=h.t,d=h.l,v=gb(o,15),y=v.t,w=v.l,g=NL(f),x=g.c,_=g.n,E=NL(y),C=E.c,I=E.n,R=new Sa(19),L=0;L<x.length;++L)++R[x[L]&31];for(var L=0;L<C.length;++L)++R[C[L]&31];for(var k=gb(R,7),D=k.t,N=k.l,B=19;B>4&&!D[$M[B-1]];--B);var G=u+5<<3,V=S0(i,gf)+S0(o,Jv)+s,$=S0(i,f)+S0(o,y)+s+14+3*B+S0(R,D)+2*R[16]+3*R[17]+7*R[18];if(l>=0&&G<=V&&G<=$)return tD(e,c,n.subarray(l,l+u));var J,le,H,q;if(dc(e,c,1+($<V)),c+=2,$<V){J=Fu(f,d,0),le=f,H=Fu(y,w,0),q=y;var Z=Fu(D,N,0);dc(e,c,_-257),dc(e,c+5,I-1),dc(e,c+10,B-4),c+=14;for(var L=0;L<B;++L)dc(e,c+3*L,D[$M[L]]);c+=3*B;for(var oe=[x,C],F=0;F<2;++F)for(var j=oe[F],L=0;L<j.length;++L){var Q=j[L]&31;dc(e,c,Z[Q]),c+=D[Q],Q>15&&(dc(e,c,j[L]>>5&127),c+=j[L]>>12)}}else J=_Y,le=gf,H=MY,q=Jv;for(var L=0;L<a;++L){var se=r[L];if(se>255){var Q=se>>18&31;w0(e,c,J[Q+257]),c+=le[Q+257],Q>7&&(dc(e,c,se>>23&31),c+=yS[Q]);var fe=se&31;w0(e,c,H[fe]),c+=q[fe],fe>3&&(w0(e,c,se>>5&8191),c+=xS[fe])}else w0(e,c,J[se]),c+=le[se]}return w0(e,c,J[256]),c+le[256]},CY=new IA([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),nD=new ms(0),PY=function(n,e,t,r,i,o){var s=o.z||n.length,a=new ms(r+s+5*(1+Math.ceil(s/7e3))+i),l=a.subarray(r,a.length-i),u=o.l,c=(o.r||0)&7;if(e){c&&(l[0]=o.r>>3);for(var h=CY[e-1],f=h>>13,d=h&8191,v=(1<<t)-1,y=o.p||new Sa(32768),w=o.h||new Sa(v+1),g=Math.ceil(t/3),x=2*g,_=function(Ne){return(n[Ne]^n[Ne+1]<<g^n[Ne+2]<<x)&v},E=new IA(25e3),C=new Sa(288),I=new Sa(32),R=0,L=0,k=o.i||0,D=0,N=o.w||0,B=0;k+2<s;++k){var G=_(k),V=k&32767,$=w[G];if(y[V]=$,w[G]=V,N<=k){var J=s-k;if((R>7e3||D>24576)&&(J>423||!u)){c=FL(n,l,0,E,C,I,L,D,B,k-B,c),D=R=L=0,B=k;for(var le=0;le<286;++le)C[le]=0;for(var le=0;le<30;++le)I[le]=0}var H=2,q=0,Z=d,oe=V-$&32767;if(J>2&&G==_(k-oe))for(var F=Math.min(f,J)-1,j=Math.min(32767,k),Q=Math.min(258,J);oe<=j&&--Z&&V!=$;){if(n[k+H]==n[k+H-oe]){for(var se=0;se<Q&&n[k+se]==n[k+se-oe];++se);if(se>H){if(H=se,q=oe,se>F)break;for(var fe=Math.min(oe,se-2),we=0,le=0;le<fe;++le){var Ee=k-oe+le&32767,Ce=y[Ee],Ge=Ee-Ce&32767;Ge>we&&(we=Ge,$=Ee)}}}V=$,$=y[V],oe+=V-$&32767}if(q){E[D++]=268435456|qM[H]<<18|IL[q];var Ie=qM[H]&31,he=IL[q]&31;L+=yS[Ie]+xS[he],++C[257+Ie],++I[he],N=k+H,++R}else E[D++]=n[k],++C[n[k]]}}for(k=Math.max(k,N);k<s;++k)E[D++]=n[k],++C[n[k]];c=FL(n,l,u,E,C,I,L,D,B,k-B,c),u||(o.r=c&7|l[c/8|0]<<3,c-=7,o.h=w,o.p=y,o.i=k,o.w=N)}else{for(var k=o.w||0;k<s+u;k+=65535){var ke=k+65535;ke>=s&&(l[c/8|0]=u,ke=s),c=tD(l,c+1,n.subarray(k,ke))}o.i=s}return eD(a,0,r+NA(c)+i)},rD=function(){var n=1,e=0;return{p:function(t){for(var r=n,i=e,o=t.length|0,s=0;s!=o;){for(var a=Math.min(s+2655,o);s<a;++s)i+=r+=t[s];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}n=r,e=i},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},LY=function(n,e,t,r,i){if(!i&&(i={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),s=new ms(o.length+n.length);s.set(o),s.set(n,o.length),n=s,i.w=o.length}return PY(n,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,i)},iD=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},RY=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var i=rD();i.p(e.dictionary),iD(n,2,i.d())}},kY=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&kl(6,"invalid zlib data"),(n[1]>>5&1)==+!e&&kl(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function ZM(n,e){e||(e={});var t=rD();t.p(n);var r=LY(n,e,e.dictionary?6:2,4);return RY(r,e),iD(r,r.length-4,t.d()),r}function IY(n,e){return TY(n.subarray(kY(n,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var NY=typeof TextDecoder<"u"&&new TextDecoder,FY=0;try{NY.decode(nD,{stream:!0}),FY=1}catch{}var Sn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function vb(){Sn.console&&typeof Sn.console.log=="function"&&Sn.console.log.apply(Sn.console,arguments)}var Gr={log:vb,warn:function(n){Sn.console&&(typeof Sn.console.warn=="function"?Sn.console.warn.apply(Sn.console,arguments):vb.call(null,arguments))},error:function(n){Sn.console&&(typeof Sn.console.error=="function"?Sn.console.error.apply(Sn.console,arguments):vb(n))}};function yb(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){cd(r.response,e,t)},r.onerror=function(){Gr.error("could not download file")},r.send()}function DL(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function y2(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var nv,KM,cd=Sn.saveAs||((typeof window>"u"?"undefined":Fr(window))!=="object"||window!==Sn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=Sn.URL||Sn.webkitURL,i=document.createElement("a");e=e||n.name||"download",i.download=e,i.rel="noopener",typeof n=="string"?(i.href=n,i.origin!==location.origin?DL(i.href)?yb(n,e,t):y2(i,i.target="_blank"):y2(i)):(i.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){y2(i)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(DL(n))yb(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){y2(r)})}else navigator.msSaveOrOpenBlob(function(i,o){return o===void 0?o={autoBom:!1}:Fr(o)!=="object"&&(Gr.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return yb(n,e,t);var i=n.type==="application/octet-stream",o=/constructor/i.test(Sn.HTMLElement)||Sn.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&o)&&(typeof FileReader>"u"?"undefined":Fr(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var c=a.result;c=s?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},a.readAsDataURL(n)}else{var l=Sn.URL||Sn.webkitURL,u=l.createObjectURL(n);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function oD(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<t.length;r++){var i=t[r].re,o=t[r].process,s=i.exec(n);s&&(e=o(s),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function xb(n,e){var t=n[0],r=n[1],i=n[2],o=n[3];t=as(t,r,i,o,e[0],7,-680876936),o=as(o,t,r,i,e[1],12,-389564586),i=as(i,o,t,r,e[2],17,606105819),r=as(r,i,o,t,e[3],22,-1044525330),t=as(t,r,i,o,e[4],7,-176418897),o=as(o,t,r,i,e[5],12,1200080426),i=as(i,o,t,r,e[6],17,-1473231341),r=as(r,i,o,t,e[7],22,-45705983),t=as(t,r,i,o,e[8],7,1770035416),o=as(o,t,r,i,e[9],12,-1958414417),i=as(i,o,t,r,e[10],17,-42063),r=as(r,i,o,t,e[11],22,-1990404162),t=as(t,r,i,o,e[12],7,1804603682),o=as(o,t,r,i,e[13],12,-40341101),i=as(i,o,t,r,e[14],17,-1502002290),t=ls(t,r=as(r,i,o,t,e[15],22,1236535329),i,o,e[1],5,-165796510),o=ls(o,t,r,i,e[6],9,-1069501632),i=ls(i,o,t,r,e[11],14,643717713),r=ls(r,i,o,t,e[0],20,-373897302),t=ls(t,r,i,o,e[5],5,-701558691),o=ls(o,t,r,i,e[10],9,38016083),i=ls(i,o,t,r,e[15],14,-660478335),r=ls(r,i,o,t,e[4],20,-405537848),t=ls(t,r,i,o,e[9],5,568446438),o=ls(o,t,r,i,e[14],9,-1019803690),i=ls(i,o,t,r,e[3],14,-187363961),r=ls(r,i,o,t,e[8],20,1163531501),t=ls(t,r,i,o,e[13],5,-1444681467),o=ls(o,t,r,i,e[2],9,-51403784),i=ls(i,o,t,r,e[7],14,1735328473),t=us(t,r=ls(r,i,o,t,e[12],20,-1926607734),i,o,e[5],4,-378558),o=us(o,t,r,i,e[8],11,-2022574463),i=us(i,o,t,r,e[11],16,1839030562),r=us(r,i,o,t,e[14],23,-35309556),t=us(t,r,i,o,e[1],4,-1530992060),o=us(o,t,r,i,e[4],11,1272893353),i=us(i,o,t,r,e[7],16,-155497632),r=us(r,i,o,t,e[10],23,-1094730640),t=us(t,r,i,o,e[13],4,681279174),o=us(o,t,r,i,e[0],11,-358537222),i=us(i,o,t,r,e[3],16,-722521979),r=us(r,i,o,t,e[6],23,76029189),t=us(t,r,i,o,e[9],4,-640364487),o=us(o,t,r,i,e[12],11,-421815835),i=us(i,o,t,r,e[15],16,530742520),t=cs(t,r=us(r,i,o,t,e[2],23,-995338651),i,o,e[0],6,-198630844),o=cs(o,t,r,i,e[7],10,1126891415),i=cs(i,o,t,r,e[14],15,-1416354905),r=cs(r,i,o,t,e[5],21,-57434055),t=cs(t,r,i,o,e[12],6,1700485571),o=cs(o,t,r,i,e[3],10,-1894986606),i=cs(i,o,t,r,e[10],15,-1051523),r=cs(r,i,o,t,e[1],21,-2054922799),t=cs(t,r,i,o,e[8],6,1873313359),o=cs(o,t,r,i,e[15],10,-30611744),i=cs(i,o,t,r,e[6],15,-1560198380),r=cs(r,i,o,t,e[13],21,1309151649),t=cs(t,r,i,o,e[4],6,-145523070),o=cs(o,t,r,i,e[11],10,-1120210379),i=cs(i,o,t,r,e[2],15,718787259),r=cs(r,i,o,t,e[9],21,-343485551),n[0]=$h(t,n[0]),n[1]=$h(r,n[1]),n[2]=$h(i,n[2]),n[3]=$h(o,n[3])}function wS(n,e,t,r,i,o){return e=$h($h(e,n),$h(r,o)),$h(e<<i|e>>>32-i,t)}function as(n,e,t,r,i,o,s){return wS(e&t|~e&r,n,e,i,o,s)}function ls(n,e,t,r,i,o,s){return wS(e&r|t&~r,n,e,i,o,s)}function us(n,e,t,r,i,o,s){return wS(e^t^r,n,e,i,o,s)}function cs(n,e,t,r,i,o,s){return wS(t^(e|~r),n,e,i,o,s)}function sD(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)xb(r,DY(n.substring(e-64,e)));n=n.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)i[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(xb(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*t,xb(r,i),r}function DY(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}nv=Sn.atob.bind(Sn),KM=Sn.btoa.bind(Sn);var OL="0123456789abcdef".split("");function OY(n){for(var e="",t=0;t<4;t++)e+=OL[n>>8*t+4&15]+OL[n>>8*t&15];return e}function BY(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function JM(n){return sD(n).map(BY).join("")}var UY=function(n){for(var e=0;e<n.length;e++)n[e]=OY(n[e]);return n.join("")}(sD("hello"))!="5d41402abc4b2a76b9719d911017c592";function $h(n,e){if(UY){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function QM(n,e){var t,r,i,o;if(n!==t){for(var s=(i=n,o=1+(256/n.length>>0),new Array(o+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var c=a[l];u=(u+c+s.charCodeAt(l))%256,a[l]=a[u],a[u]=c}t=n,r=a}else a=r;var h=e.length,f=0,d=0,v="";for(l=0;l<h;l++)d=(d+(c=a[f=(f+1)%256]))%256,a[f]=a[d],a[d]=c,s=a[(a[f]+a[d])%256],v+=String.fromCharCode(e.charCodeAt(l)^s);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var BL={print:4,modify:8,copy:16,"annot-forms":32};function dm(n,e,t,r){this.v=1,this.r=2;var i=192;n.forEach(function(a){if(BL.perm!==void 0)throw new Error("Invalid permission: "+a);i+=BL[a]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var o=(e+this.padding).substr(0,32),s=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(o,s),this.P=-(1+(255^i)),this.encryptionKey=JM(o+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=QM(this.encryptionKey,this.padding)}function pm(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var i=n.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=n[r]}return e}function UL(n){if(Fr(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,i){if(i=i||!1,typeof t!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var o=Math.random().toString(35);return e[t][o]=[r,!!i],o},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var o in e[t]){var s=e[t][o];try{s[0].apply(n,r)}catch(a){Sn.console&&Gr.error("jsPDF PubSub Error",a.message,a)}s[1]&&i.push(o)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Wd(n){if(!(this instanceof Wd))return new Wd(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function aD(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function zh(n,e,t,r,i){if(!(this instanceof zh))return new zh(n,e,t,r,i);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,aD.call(this,r,i)}function Ad(n,e,t,r,i){if(!(this instanceof Ad))return new Ad(n,e,t,r,i);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,aD.call(this,r,i)}function dn(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],o=arguments[3],s=[],a=1,l=16,u="S",c=null;Fr(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,i=n.format||i,o=n.compress||n.compressPdf||o,(c=n.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),a=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(l=n.floatPrecision),u=n.defaultPathOperation||"S"),s=n.filters||(o===!0?["FlateEncode"]:s),r=r||"mm",t=(""+(t||"P")).toLowerCase();var h=n.putOnlyUsedFonts||!1,f={},d={internal:{},__private__:{}};d.__private__.PubSub=UL;var v="1.3",y=d.__private__.getPdfVersion=function(){return v};d.__private__.setPdfVersion=function(T){v=T};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};d.__private__.getPageFormats=function(){return w};var g=d.__private__.getPageFormat=function(T){return w[T]};i=i||"a4";var x={COMPAT:"compat",ADVANCED:"advanced"},_=x.COMPAT;function E(){this.saveGraphicsState(),ie(new Vt(Pe,0,0,-Pe,0,ml()*Pe).toString()+" cm"),this.setFontSize(this.getFontSize()/Pe),u="n",_=x.ADVANCED}function C(){this.restoreGraphicsState(),u="S",_=x.COMPAT}var I=d.__private__.combineFontStyleAndFontWeight=function(T,K){if(T=="bold"&&K=="normal"||T=="bold"&&K==400||T=="normal"&&K=="italic"||T=="bold"&&K=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return K&&(T=K==400||K==="normal"?T==="italic"?"italic":"normal":K!=700&&K!=="bold"||T!=="normal"?(K==700?"bold":K)+""+T:"bold"),T};d.advancedAPI=function(T){var K=_===x.COMPAT;return K&&E.call(this),typeof T!="function"||(T(this),K&&C.call(this)),this},d.compatAPI=function(T){var K=_===x.ADVANCED;return K&&C.call(this),typeof T!="function"||(T(this),K&&E.call(this)),this},d.isAdvancedAPI=function(){return _===x.ADVANCED};var R,L=function(T){if(_!==x.ADVANCED)throw new Error(T+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},k=d.roundToPrecision=d.__private__.roundToPrecision=function(T,K){var _e=e||K;if(isNaN(T)||isNaN(_e))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return T.toFixed(_e).replace(/0+$/,"")};R=d.hpf=d.__private__.hpf=typeof l=="number"?function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return k(T,l)}:l==="smart"?function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return k(T,T>-1&&T<1?16:5)}:function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.hpf");return k(T,16)};var D=d.f2=d.__private__.f2=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.f2");return k(T,2)},N=d.__private__.f3=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.f3");return k(T,3)},B=d.scale=d.__private__.scale=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.scale");return _===x.COMPAT?T*Pe:_===x.ADVANCED?T:void 0},G=function(T){return _===x.COMPAT?ml()-T:_===x.ADVANCED?T:void 0},V=function(T){return B(G(T))};d.__private__.setPrecision=d.setPrecision=function(T){typeof parseInt(T,10)=="number"&&(e=parseInt(T,10))};var $,J="00000000000000000000000000000000",le=d.__private__.getFileId=function(){return J},H=d.__private__.setFileId=function(T){return J=T!==void 0&&/^[a-fA-F0-9]{32}$/.test(T)?T.toUpperCase():J.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(Xi=new dm(c.userPermissions,c.userPassword,c.ownerPassword,J)),J};d.setFileId=function(T){return H(T),this},d.getFileId=function(){return le()};var q=d.__private__.convertDateToPDFDate=function(T){var K=T.getTimezoneOffset(),_e=K<0?"+":"-",Le=Math.floor(Math.abs(K/60)),He=Math.abs(K%60),at=[_e,Q(Le),"'",Q(He),"'"].join("");return["D:",T.getFullYear(),Q(T.getMonth()+1),Q(T.getDate()),Q(T.getHours()),Q(T.getMinutes()),Q(T.getSeconds()),at].join("")},Z=d.__private__.convertPDFDateToDate=function(T){var K=parseInt(T.substr(2,4),10),_e=parseInt(T.substr(6,2),10)-1,Le=parseInt(T.substr(8,2),10),He=parseInt(T.substr(10,2),10),at=parseInt(T.substr(12,2),10),bt=parseInt(T.substr(14,2),10);return new Date(K,_e,Le,He,at,bt,0)},oe=d.__private__.setCreationDate=function(T){var K;if(T===void 0&&(T=new Date),T instanceof Date)K=q(T);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(T))throw new Error("Invalid argument passed to jsPDF.setCreationDate");K=T}return $=K},F=d.__private__.getCreationDate=function(T){var K=$;return T==="jsDate"&&(K=Z($)),K};d.setCreationDate=function(T){return oe(T),this},d.getCreationDate=function(T){return F(T)};var j,Q=d.__private__.padd2=function(T){return("0"+parseInt(T)).slice(-2)},se=d.__private__.padd2Hex=function(T){return("00"+(T=T.toString())).substr(T.length)},fe=0,we=[],Ee=[],Ce=0,Ge=[],Ie=[],he=!1,ke=Ee,Ne=function(){fe=0,Ce=0,Ee=[],we=[],Ge=[],Ko=xr(),Oo=xr()};d.__private__.setCustomOutputDestination=function(T){he=!0,ke=T};var Ae=function(T){he||(ke=T)};d.__private__.resetCustomOutputDestination=function(){he=!1,ke=Ee};var ie=d.__private__.out=function(T){return T=T.toString(),Ce+=T.length+1,ke.push(T),ke},Ke=d.__private__.write=function(T){return ie(arguments.length===1?T.toString():Array.prototype.join.call(arguments," "))},Ve=d.__private__.getArrayBuffer=function(T){for(var K=T.length,_e=new ArrayBuffer(K),Le=new Uint8Array(_e);K--;)Le[K]=T.charCodeAt(K);return _e},We=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];d.__private__.getStandardFonts=function(){return We};var nt=n.fontSize||16;d.__private__.setFontSize=d.setFontSize=function(T){return nt=_===x.ADVANCED?T/Pe:T,this};var yt,_t=d.__private__.getFontSize=d.getFontSize=function(){return _===x.COMPAT?nt:nt*Pe},de=n.R2L||!1;d.__private__.setR2L=d.setR2L=function(T){return de=T,this},d.__private__.getR2L=d.getR2L=function(){return de};var ee,Fe=d.__private__.setZoomMode=function(T){var K=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(T))yt=T;else if(isNaN(T)){if(K.indexOf(T)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+T+'" is not recognized.');yt=T}else yt=parseInt(T,10)};d.__private__.getZoomMode=function(){return yt};var ot,et=d.__private__.setPageMode=function(T){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(T)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+T+'" is not recognized.');ee=T};d.__private__.getPageMode=function(){return ee};var ft=d.__private__.setLayoutMode=function(T){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(T)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+T+'" is not recognized.');ot=T};d.__private__.getLayoutMode=function(){return ot},d.__private__.setDisplayMode=d.setDisplayMode=function(T,K,_e){return Fe(T),ft(K),et(_e),this};var xt={title:"",subject:"",author:"",keywords:"",creator:""};d.__private__.getDocumentProperty=function(T){if(Object.keys(xt).indexOf(T)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return xt[T]},d.__private__.getDocumentProperties=function(){return xt},d.__private__.setDocumentProperties=d.setProperties=d.setDocumentProperties=function(T){for(var K in xt)xt.hasOwnProperty(K)&&T[K]&&(xt[K]=T[K]);return this},d.__private__.setDocumentProperty=function(T,K){if(Object.keys(xt).indexOf(T)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return xt[T]=K};var ht,Pe,Wt,Ct,Nt,At={},be={},Je=[],pt={},Te={},Ue={},qe={},Mt=null,Et=0,It=[],Zt=new UL(d),Hn=n.hotfixes||[],Kn={},bn={},dr=[],Vt=function T(K,_e,Le,He,at,bt){if(!(this instanceof T))return new T(K,_e,Le,He,at,bt);isNaN(K)&&(K=1),isNaN(_e)&&(_e=0),isNaN(Le)&&(Le=0),isNaN(He)&&(He=1),isNaN(at)&&(at=0),isNaN(bt)&&(bt=0),this._matrix=[K,_e,Le,He,at,bt]};Object.defineProperty(Vt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(T){this._matrix[0]=T}}),Object.defineProperty(Vt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(T){this._matrix[1]=T}}),Object.defineProperty(Vt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(T){this._matrix[2]=T}}),Object.defineProperty(Vt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(T){this._matrix[3]=T}}),Object.defineProperty(Vt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(T){this._matrix[4]=T}}),Object.defineProperty(Vt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(T){this._matrix[5]=T}}),Object.defineProperty(Vt.prototype,"a",{get:function(){return this._matrix[0]},set:function(T){this._matrix[0]=T}}),Object.defineProperty(Vt.prototype,"b",{get:function(){return this._matrix[1]},set:function(T){this._matrix[1]=T}}),Object.defineProperty(Vt.prototype,"c",{get:function(){return this._matrix[2]},set:function(T){this._matrix[2]=T}}),Object.defineProperty(Vt.prototype,"d",{get:function(){return this._matrix[3]},set:function(T){this._matrix[3]=T}}),Object.defineProperty(Vt.prototype,"e",{get:function(){return this._matrix[4]},set:function(T){this._matrix[4]=T}}),Object.defineProperty(Vt.prototype,"f",{get:function(){return this._matrix[5]},set:function(T){this._matrix[5]=T}}),Object.defineProperty(Vt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Vt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Vt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Vt.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Vt.prototype.join=function(T){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(R).join(T)},Vt.prototype.multiply=function(T){var K=T.sx*this.sx+T.shy*this.shx,_e=T.sx*this.shy+T.shy*this.sy,Le=T.shx*this.sx+T.sy*this.shx,He=T.shx*this.shy+T.sy*this.sy,at=T.tx*this.sx+T.ty*this.shx+this.tx,bt=T.tx*this.shy+T.ty*this.sy+this.ty;return new Vt(K,_e,Le,He,at,bt)},Vt.prototype.decompose=function(){var T=this.sx,K=this.shy,_e=this.shx,Le=this.sy,He=this.tx,at=this.ty,bt=Math.sqrt(T*T+K*K),Ut=(T/=bt)*_e+(K/=bt)*Le;_e-=T*Ut,Le-=K*Ut;var on=Math.sqrt(_e*_e+Le*Le);return Ut/=on,T*(Le/=on)<K*(_e/=on)&&(T=-T,K=-K,Ut=-Ut,bt=-bt),{scale:new Vt(bt,0,0,on,0,0),translate:new Vt(1,0,0,1,He,at),rotate:new Vt(T,K,-K,T,0,0),skew:new Vt(1,0,Ut,1,0,0)}},Vt.prototype.toString=function(T){return this.join(" ")},Vt.prototype.inversed=function(){var T=this.sx,K=this.shy,_e=this.shx,Le=this.sy,He=this.tx,at=this.ty,bt=1/(T*Le-K*_e),Ut=Le*bt,on=-K*bt,_n=-_e*bt,un=T*bt;return new Vt(Ut,on,_n,un,-Ut*He-_n*at,-on*He-un*at)},Vt.prototype.applyToPoint=function(T){var K=T.x*this.sx+T.y*this.shx+this.tx,_e=T.x*this.shy+T.y*this.sy+this.ty;return new Ms(K,_e)},Vt.prototype.applyToRectangle=function(T){var K=this.applyToPoint(T),_e=this.applyToPoint(new Ms(T.x+T.w,T.y+T.h));return new Yu(K.x,K.y,_e.x-K.x,_e.y-K.y)},Vt.prototype.clone=function(){var T=this.sx,K=this.shy,_e=this.shx,Le=this.sy,He=this.tx,at=this.ty;return new Vt(T,K,_e,Le,He,at)},d.Matrix=Vt;var yo=d.matrixMult=function(T,K){return K.multiply(T)},Do=new Vt(1,0,0,1,0,0);d.unitMatrix=d.identityMatrix=Do;var si=function(T,K){if(!Te[T]){var _e=(K instanceof zh?"Sh":"P")+(Object.keys(pt).length+1).toString(10);K.id=_e,Te[T]=_e,pt[_e]=K,Zt.publish("addPattern",K)}};d.ShadingPattern=zh,d.TilingPattern=Ad,d.addShadingPattern=function(T,K){return L("addShadingPattern()"),si(T,K),this},d.beginTilingPattern=function(T){L("beginTilingPattern()"),zs(T.boundingBox[0],T.boundingBox[1],T.boundingBox[2]-T.boundingBox[0],T.boundingBox[3]-T.boundingBox[1],T.matrix)},d.endTilingPattern=function(T,K){L("endTilingPattern()"),K.stream=Ie[j].join(`
`),si(T,K),Zt.publish("endTilingPattern",K),dr.pop().restore()};var br=d.__private__.newObject=function(){var T=xr();return Mr(T,!0),T},xr=d.__private__.newObjectDeferred=function(){return fe++,we[fe]=function(){return Ce},fe},Mr=function(T,K){return K=typeof K=="boolean"&&K,we[T]=Ce,K&&ie(T+" 0 obj"),T},Mn=d.__private__.newAdditionalObject=function(){var T={objId:xr(),content:""};return Ge.push(T),T},Ko=xr(),Oo=xr(),Y=d.__private__.decodeColorString=function(T){var K=T.split(" ");if(K.length!==2||K[1]!=="g"&&K[1]!=="G")K.length===5&&(K[4]==="k"||K[4]==="K")&&(K=[(1-K[0])*(1-K[3]),(1-K[1])*(1-K[3]),(1-K[2])*(1-K[3]),"r"]);else{var _e=parseFloat(K[0]);K=[_e,_e,_e,"r"]}for(var Le="#",He=0;He<3;He++)Le+=("0"+Math.floor(255*parseFloat(K[He])).toString(16)).slice(-2);return Le},U=d.__private__.encodeColorString=function(T){var K;typeof T=="string"&&(T={ch1:T});var _e=T.ch1,Le=T.ch2,He=T.ch3,at=T.ch4,bt=T.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof _e=="string"&&_e.charAt(0)!=="#"){var Ut=new oD(_e);if(Ut.ok)_e=Ut.toHex();else if(!/^\d*\.?\d*$/.test(_e))throw new Error('Invalid color "'+_e+'" passed to jsPDF.encodeColorString.')}if(typeof _e=="string"&&/^#[0-9A-Fa-f]{3}$/.test(_e)&&(_e="#"+_e[1]+_e[1]+_e[2]+_e[2]+_e[3]+_e[3]),typeof _e=="string"&&/^#[0-9A-Fa-f]{6}$/.test(_e)){var on=parseInt(_e.substr(1),16);_e=on>>16&255,Le=on>>8&255,He=255&on}if(Le===void 0||at===void 0&&_e===Le&&Le===He)if(typeof _e=="string")K=_e+" "+bt[0];else switch(T.precision){case 2:K=D(_e/255)+" "+bt[0];break;case 3:default:K=N(_e/255)+" "+bt[0]}else if(at===void 0||Fr(at)==="object"){if(at&&!isNaN(at.a)&&at.a===0)return K=["1.","1.","1.",bt[1]].join(" ");if(typeof _e=="string")K=[_e,Le,He,bt[1]].join(" ");else switch(T.precision){case 2:K=[D(_e/255),D(Le/255),D(He/255),bt[1]].join(" ");break;default:case 3:K=[N(_e/255),N(Le/255),N(He/255),bt[1]].join(" ")}}else if(typeof _e=="string")K=[_e,Le,He,at,bt[2]].join(" ");else switch(T.precision){case 2:K=[D(_e),D(Le),D(He),D(at),bt[2]].join(" ");break;case 3:default:K=[N(_e),N(Le),N(He),N(at),bt[2]].join(" ")}return K},ne=d.__private__.getFilters=function(){return s},ve=d.__private__.putStream=function(T){var K=(T=T||{}).data||"",_e=T.filters||ne(),Le=T.alreadyAppliedFilters||[],He=T.addLength1||!1,at=K.length,bt=T.objectId,Ut=function(ai){return ai};if(c!==null&&bt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(Ut=Xi.encryptor(bt,0));var on={};_e===!0&&(_e=["FlateEncode"]);var _n=T.additionalKeyValues||[],un=(on=dn.API.processDataByFilters!==void 0?dn.API.processDataByFilters(K,_e):{data:K,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(on.data.length!==0&&(_n.push({key:"Length",value:on.data.length}),He===!0&&_n.push({key:"Length1",value:at})),un.length!=0)if(un.split("/").length-1==1)_n.push({key:"Filter",value:un});else{_n.push({key:"Filter",value:"["+un+"]"});for(var An=0;An<_n.length;An+=1)if(_n[An].key==="DecodeParms"){for(var wr=[],pr=0;pr<on.reverseChain.split("/").length-1;pr+=1)wr.push("null");wr.push(_n[An].value),_n[An].value="["+wr.join(" ")+"]"}}ie("<<");for(var Ar=0;Ar<_n.length;Ar++)ie("/"+_n[Ar].key+" "+_n[Ar].value);ie(">>"),on.data.length!==0&&(ie("stream"),ie(Ut(on.data)),ie("endstream"))},me=d.__private__.putPage=function(T){var K=T.number,_e=T.data,Le=T.objId,He=T.contentsObjId;Mr(Le,!0),ie("<</Type /Page"),ie("/Parent "+T.rootDictionaryObjId+" 0 R"),ie("/Resources "+T.resourceDictionaryObjId+" 0 R"),ie("/MediaBox ["+parseFloat(R(T.mediaBox.bottomLeftX))+" "+parseFloat(R(T.mediaBox.bottomLeftY))+" "+R(T.mediaBox.topRightX)+" "+R(T.mediaBox.topRightY)+"]"),T.cropBox!==null&&ie("/CropBox ["+R(T.cropBox.bottomLeftX)+" "+R(T.cropBox.bottomLeftY)+" "+R(T.cropBox.topRightX)+" "+R(T.cropBox.topRightY)+"]"),T.bleedBox!==null&&ie("/BleedBox ["+R(T.bleedBox.bottomLeftX)+" "+R(T.bleedBox.bottomLeftY)+" "+R(T.bleedBox.topRightX)+" "+R(T.bleedBox.topRightY)+"]"),T.trimBox!==null&&ie("/TrimBox ["+R(T.trimBox.bottomLeftX)+" "+R(T.trimBox.bottomLeftY)+" "+R(T.trimBox.topRightX)+" "+R(T.trimBox.topRightY)+"]"),T.artBox!==null&&ie("/ArtBox ["+R(T.artBox.bottomLeftX)+" "+R(T.artBox.bottomLeftY)+" "+R(T.artBox.topRightX)+" "+R(T.artBox.topRightY)+"]"),typeof T.userUnit=="number"&&T.userUnit!==1&&ie("/UserUnit "+T.userUnit),Zt.publish("putPage",{objId:Le,pageContext:It[K],pageNumber:K,page:_e}),ie("/Contents "+He+" 0 R"),ie(">>"),ie("endobj");var at=_e.join(`
`);return _===x.ADVANCED&&(at+=`
Q`),Mr(He,!0),ve({data:at,filters:ne(),objectId:He}),ie("endobj"),Le},Se=d.__private__.putPages=function(){var T,K,_e=[];for(T=1;T<=Et;T++)It[T].objId=xr(),It[T].contentsObjId=xr();for(T=1;T<=Et;T++)_e.push(me({number:T,data:Ie[T],objId:It[T].objId,contentsObjId:It[T].contentsObjId,mediaBox:It[T].mediaBox,cropBox:It[T].cropBox,bleedBox:It[T].bleedBox,trimBox:It[T].trimBox,artBox:It[T].artBox,userUnit:It[T].userUnit,rootDictionaryObjId:Ko,resourceDictionaryObjId:Oo}));Mr(Ko,!0),ie("<</Type /Pages");var Le="/Kids [";for(K=0;K<Et;K++)Le+=_e[K]+" 0 R ";ie(Le+"]"),ie("/Count "+Et),ie(">>"),ie("endobj"),Zt.publish("postPutPages")},Xe=function(T){Zt.publish("putFont",{font:T,out:ie,newObject:br,putStream:ve}),T.isAlreadyPutted!==!0&&(T.objectNumber=br(),ie("<<"),ie("/Type /Font"),ie("/BaseFont /"+pm(T.postScriptName)),ie("/Subtype /Type1"),typeof T.encoding=="string"&&ie("/Encoding /"+T.encoding),ie("/FirstChar 32"),ie("/LastChar 255"),ie(">>"),ie("endobj"))},Ye=function(){for(var T in At)At.hasOwnProperty(T)&&(h===!1||h===!0&&f.hasOwnProperty(T))&&Xe(At[T])},st=function(T){T.objectNumber=br();var K=[];K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Form"}),K.push({key:"BBox",value:"["+[R(T.x),R(T.y),R(T.x+T.width),R(T.y+T.height)].join(" ")+"]"}),K.push({key:"Matrix",value:"["+T.matrix.toString()+"]"});var _e=T.pages[1].join(`
`);ve({data:_e,additionalKeyValues:K,objectId:T.objectNumber}),ie("endobj")},rt=function(){for(var T in Kn)Kn.hasOwnProperty(T)&&st(Kn[T])},dt=function(T,K){var _e,Le=[],He=1/(K-1);for(_e=0;_e<1;_e+=He)Le.push(_e);if(Le.push(1),T[0].offset!=0){var at={offset:0,color:T[0].color};T.unshift(at)}if(T[T.length-1].offset!=1){var bt={offset:1,color:T[T.length-1].color};T.push(bt)}for(var Ut="",on=0,_n=0;_n<Le.length;_n++){for(_e=Le[_n];_e>T[on+1].offset;)on++;var un=T[on].offset,An=(_e-un)/(T[on+1].offset-un),wr=T[on].color,pr=T[on+1].color;Ut+=se(Math.round((1-An)*wr[0]+An*pr[0]).toString(16))+se(Math.round((1-An)*wr[1]+An*pr[1]).toString(16))+se(Math.round((1-An)*wr[2]+An*pr[2]).toString(16))}return Ut.trim()},tt=function(T,K){K||(K=21);var _e=br(),Le=dt(T.colors,K),He=[];He.push({key:"FunctionType",value:"0"}),He.push({key:"Domain",value:"[0.0 1.0]"}),He.push({key:"Size",value:"["+K+"]"}),He.push({key:"BitsPerSample",value:"8"}),He.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),He.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ve({data:Le,additionalKeyValues:He,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:_e}),ie("endobj"),T.objectNumber=br(),ie("<< /ShadingType "+T.type),ie("/ColorSpace /DeviceRGB");var at="/Coords ["+R(parseFloat(T.coords[0]))+" "+R(parseFloat(T.coords[1]))+" ";T.type===2?at+=R(parseFloat(T.coords[2]))+" "+R(parseFloat(T.coords[3])):at+=R(parseFloat(T.coords[2]))+" "+R(parseFloat(T.coords[3]))+" "+R(parseFloat(T.coords[4]))+" "+R(parseFloat(T.coords[5])),ie(at+="]"),T.matrix&&ie("/Matrix ["+T.matrix.toString()+"]"),ie("/Function "+_e+" 0 R"),ie("/Extend [true true]"),ie(">>"),ie("endobj")},jt=function(T,K){var _e=xr(),Le=br();K.push({resourcesOid:_e,objectOid:Le}),T.objectNumber=Le;var He=[];He.push({key:"Type",value:"/Pattern"}),He.push({key:"PatternType",value:"1"}),He.push({key:"PaintType",value:"1"}),He.push({key:"TilingType",value:"1"}),He.push({key:"BBox",value:"["+T.boundingBox.map(R).join(" ")+"]"}),He.push({key:"XStep",value:R(T.xStep)}),He.push({key:"YStep",value:R(T.yStep)}),He.push({key:"Resources",value:_e+" 0 R"}),T.matrix&&He.push({key:"Matrix",value:"["+T.matrix.toString()+"]"}),ve({data:T.stream,additionalKeyValues:He,objectId:T.objectNumber}),ie("endobj")},Rt=function(T){var K;for(K in pt)pt.hasOwnProperty(K)&&(pt[K]instanceof zh?tt(pt[K]):pt[K]instanceof Ad&&jt(pt[K],T))},Ft=function(T){for(var K in T.objectNumber=br(),ie("<<"),T)switch(K){case"opacity":ie("/ca "+D(T[K]));break;case"stroke-opacity":ie("/CA "+D(T[K]))}ie(">>"),ie("endobj")},rn=function(){var T;for(T in Ue)Ue.hasOwnProperty(T)&&Ft(Ue[T])},an=function(){for(var T in ie("/XObject <<"),Kn)Kn.hasOwnProperty(T)&&Kn[T].objectNumber>=0&&ie("/"+T+" "+Kn[T].objectNumber+" 0 R");Zt.publish("putXobjectDict"),ie(">>")},sn=function(){Xi.oid=br(),ie("<<"),ie("/Filter /Standard"),ie("/V "+Xi.v),ie("/R "+Xi.r),ie("/U <"+Xi.toHexString(Xi.U)+">"),ie("/O <"+Xi.toHexString(Xi.O)+">"),ie("/P "+Xi.P),ie(">>"),ie("endobj")},Ht=function(){for(var T in ie("/Font <<"),At)At.hasOwnProperty(T)&&(h===!1||h===!0&&f.hasOwnProperty(T))&&ie("/"+T+" "+At[T].objectNumber+" 0 R");ie(">>")},pn=function(){if(Object.keys(pt).length>0){for(var T in ie("/Shading <<"),pt)pt.hasOwnProperty(T)&&pt[T]instanceof zh&&pt[T].objectNumber>=0&&ie("/"+T+" "+pt[T].objectNumber+" 0 R");Zt.publish("putShadingPatternDict"),ie(">>")}},Xt=function(T){if(Object.keys(pt).length>0){for(var K in ie("/Pattern <<"),pt)pt.hasOwnProperty(K)&&pt[K]instanceof d.TilingPattern&&pt[K].objectNumber>=0&&pt[K].objectNumber<T&&ie("/"+K+" "+pt[K].objectNumber+" 0 R");Zt.publish("putTilingPatternDict"),ie(">>")}},En=function(){if(Object.keys(Ue).length>0){var T;for(T in ie("/ExtGState <<"),Ue)Ue.hasOwnProperty(T)&&Ue[T].objectNumber>=0&&ie("/"+T+" "+Ue[T].objectNumber+" 0 R");Zt.publish("putGStateDict"),ie(">>")}},mn=function(T){Mr(T.resourcesOid,!0),ie("<<"),ie("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Ht(),pn(),Xt(T.objectOid),En(),an(),ie(">>"),ie("endobj")},xn=function(){var T=[];Ye(),rn(),rt(),Rt(T),Zt.publish("putResources"),T.forEach(mn),mn({resourcesOid:Oo,objectOid:Number.MAX_SAFE_INTEGER}),Zt.publish("postPutResources")},or=function(){Zt.publish("putAdditionalObjects");for(var T=0;T<Ge.length;T++){var K=Ge[T];Mr(K.objId,!0),ie(K.content),ie("endobj")}Zt.publish("postPutAdditionalObjects")},Jn=function(T){be[T.fontName]=be[T.fontName]||{},be[T.fontName][T.fontStyle]=T.id},ar=function(T,K,_e,Le,He){var at={id:"F"+(Object.keys(At).length+1).toString(10),postScriptName:T,fontName:K,fontStyle:_e,encoding:Le,isStandardFont:He||!1,metadata:{}};return Zt.publish("addFont",{font:at,instance:this}),At[at.id]=at,Jn(at),at.id},Yr=function(T){for(var K=0,_e=We.length;K<_e;K++){var Le=ar.call(this,T[K][0],T[K][1],T[K][2],We[K][3],!0);h===!1&&(f[Le]=!0);var He=T[K][0].split("-");Jn({id:Le,fontName:He[0],fontStyle:He[1]||""})}Zt.publish("addFonts",{fonts:At,dictionary:be})},hn=function(T){return T.foo=function(){try{return T.apply(this,arguments)}catch(Le){var K=Le.stack||"";~K.indexOf(" at ")&&(K=K.split(" at ")[1]);var _e="Error in function "+K.split(`
`)[0].split("<")[0]+": "+Le.message;if(!Sn.console)throw new Error(_e);Sn.console.error(_e,Le),Sn.alert&&alert(_e)}},T.foo.bar=T,T.foo},Er=function(T,K){var _e,Le,He,at,bt,Ut,on,_n,un;if(He=(K=K||{}).sourceEncoding||"Unicode",bt=K.outputEncoding,(K.autoencode||bt)&&At[ht].metadata&&At[ht].metadata[He]&&At[ht].metadata[He].encoding&&(at=At[ht].metadata[He].encoding,!bt&&At[ht].encoding&&(bt=At[ht].encoding),!bt&&at.codePages&&(bt=at.codePages[0]),typeof bt=="string"&&(bt=at[bt]),bt)){for(on=!1,Ut=[],_e=0,Le=T.length;_e<Le;_e++)(_n=bt[T.charCodeAt(_e)])?Ut.push(String.fromCharCode(_n)):Ut.push(T[_e]),Ut[_e].charCodeAt(0)>>8&&(on=!0);T=Ut.join("")}for(_e=T.length;on===void 0&&_e!==0;)T.charCodeAt(_e-1)>>8&&(on=!0),_e--;if(!on)return T;for(Ut=K.noBOM?[]:[254,255],_e=0,Le=T.length;_e<Le;_e++){if((un=(_n=T.charCodeAt(_e))>>8)>>8)throw new Error("Character at position "+_e+" of string '"+T+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ut.push(un),Ut.push(_n-(un<<8))}return String.fromCharCode.apply(void 0,Ut)},Ln=d.__private__.pdfEscape=d.pdfEscape=function(T,K){return Er(T,K).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Wn=d.__private__.beginPage=function(T){Ie[++Et]=[],It[Et]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(T[0]),topRightY:Number(T[1])}},qi(Et),Ae(Ie[j])},kr=function(T,K){var _e,Le,He;switch(t=K||t,typeof T=="string"&&(_e=g(T.toLowerCase()),Array.isArray(_e)&&(Le=_e[0],He=_e[1])),Array.isArray(T)&&(Le=T[0]*Pe,He=T[1]*Pe),isNaN(Le)&&(Le=i[0],He=i[1]),(Le>14400||He>14400)&&(Gr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),He=Math.min(14400,He)),i=[Le,He],t.substr(0,1)){case"l":He>Le&&(i=[He,Le]);break;case"p":Le>He&&(i=[He,Le])}Wn(i),up(ju),ie(xo),Na!==0&&ie(Na+" J"),wo!==0&&ie(wo+" j"),Zt.publish("addPage",{pageNumber:Et})},oa=function(T){T>0&&T<=Et&&(Ie.splice(T,1),It.splice(T,1),Et--,j>Et&&(j=Et),this.setPage(j))},qi=function(T){T>0&&T<=Et&&(j=T)},Bs=d.__private__.getNumberOfPages=d.getNumberOfPages=function(){return Ie.length-1},Gu=function(T,K,_e){var Le,He=void 0;return _e=_e||{},T=T!==void 0?T:At[ht].fontName,K=K!==void 0?K:At[ht].fontStyle,Le=T.toLowerCase(),be[Le]!==void 0&&be[Le][K]!==void 0?He=be[Le][K]:be[T]!==void 0&&be[T][K]!==void 0?He=be[T][K]:_e.disableWarning===!1&&Gr.warn("Unable to look up font label for font '"+T+"', '"+K+"'. Refer to getFontList() for available fonts."),He||_e.noFallback||(He=be.times[K])==null&&(He=be.times.normal),He},qc=d.__private__.putInfo=function(){var T=br(),K=function(Le){return Le};for(var _e in c!==null&&(K=Xi.encryptor(T,0)),ie("<<"),ie("/Producer ("+Ln(K("jsPDF "+dn.version))+")"),xt)xt.hasOwnProperty(_e)&&xt[_e]&&ie("/"+_e.substr(0,1).toUpperCase()+_e.substr(1)+" ("+Ln(K(xt[_e]))+")");ie("/CreationDate ("+Ln(K($))+")"),ie(">>"),ie("endobj")},fl=d.__private__.putCatalog=function(T){var K=(T=T||{}).rootDictionaryObjId||Ko;switch(br(),ie("<<"),ie("/Type /Catalog"),ie("/Pages "+K+" 0 R"),yt||(yt="fullwidth"),yt){case"fullwidth":ie("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ie("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ie("/OpenAction [3 0 R /Fit]");break;case"original":ie("/OpenAction [3 0 R /XYZ null null 1]");break;default:var _e=""+yt;_e.substr(_e.length-1)==="%"&&(yt=parseInt(yt)/100),typeof yt=="number"&&ie("/OpenAction [3 0 R /XYZ null null "+D(yt)+"]")}switch(ot||(ot="continuous"),ot){case"continuous":ie("/PageLayout /OneColumn");break;case"single":ie("/PageLayout /SinglePage");break;case"two":case"twoleft":ie("/PageLayout /TwoColumnLeft");break;case"tworight":ie("/PageLayout /TwoColumnRight")}ee&&ie("/PageMode /"+ee),Zt.publish("putCatalog"),ie(">>"),ie("endobj")},Xc=d.__private__.putTrailer=function(){ie("trailer"),ie("<<"),ie("/Size "+(fe+1)),ie("/Root "+fe+" 0 R"),ie("/Info "+(fe-1)+" 0 R"),c!==null&&ie("/Encrypt "+Xi.oid+" 0 R"),ie("/ID [ <"+J+"> <"+J+"> ]"),ie(">>")},Pg=d.__private__.putHeader=function(){ie("%PDF-"+v),ie("%ºß¬à")},Lg=d.__private__.putXRef=function(){var T="0000000000";ie("xref"),ie("0 "+(fe+1)),ie("0000000000 65535 f ");for(var K=1;K<=fe;K++)typeof we[K]=="function"?ie((T+we[K]()).slice(-10)+" 00000 n "):we[K]!==void 0?ie((T+we[K]).slice(-10)+" 00000 n "):ie("0000000000 00000 n ")},sa=d.__private__.buildDocument=function(){Ne(),Ae(Ee),Zt.publish("buildDocument"),Pg(),Se(),or(),xn(),c!==null&&sn(),qc(),fl();var T=Ce;return Lg(),Xc(),ie("startxref"),ie(""+T),ie("%%EOF"),Ae(Ie[j]),Ee.join(`
`)},su=d.__private__.getBlob=function(T){return new Blob([Ve(T)],{type:"application/pdf"})},La=d.output=d.__private__.output=hn(function(T,K){switch(typeof(K=K||{})=="string"?K={filename:K}:K.filename=K.filename||"generated.pdf",T){case void 0:return sa();case"save":d.save(K.filename);break;case"arraybuffer":return Ve(sa());case"blob":return su(sa());case"bloburi":case"bloburl":if(Sn.URL!==void 0&&typeof Sn.URL.createObjectURL=="function")return Sn.URL&&Sn.URL.createObjectURL(su(sa()))||void 0;Gr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var _e="",Le=sa();try{_e=KM(Le)}catch{_e=KM(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+K.filename+";base64,"+_e;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Sn)==="[object Window]"){var He="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",at=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';K.pdfObjectUrl&&(He=K.pdfObjectUrl,at="");var bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+He+'"'+at+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(K)+");<\/script></body></html>",Ut=Sn.open();return Ut!==null&&Ut.document.write(bt),Ut}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Sn)==="[object Window]"){var on='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(K.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+K.filename+'" width="500px" height="400px" /></body></html>',_n=Sn.open();if(_n!==null){_n.document.write(on);var un=this;_n.document.documentElement.querySelector("#pdfViewer").onload=function(){_n.document.title=K.filename,_n.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(un.output("bloburl"))}}return _n}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Sn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var An='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",K)+'"></iframe></body></html>',wr=Sn.open();if(wr!==null&&(wr.document.write(An),wr.document.title=K.filename),wr||typeof safari>"u")return wr;break;case"datauri":case"dataurl":return Sn.document.location.href=this.output("datauristring",K);default:return null}}),ap=function(T){return Array.isArray(Hn)===!0&&Hn.indexOf(T)>-1};switch(r){case"pt":Pe=1;break;case"mm":Pe=72/25.4;break;case"cm":Pe=72/2.54;break;case"in":Pe=72;break;case"px":Pe=ap("px_scaling")==1?.75:96/72;break;case"pc":case"em":Pe=12;break;case"ex":Pe=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Pe=r}var Xi=null;oe(),H();var rr=function(T){return c!==null?Xi.encryptor(T,0):function(K){return K}},Nf=d.__private__.getPageInfo=d.getPageInfo=function(T){if(isNaN(T)||T%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:It[T].objId,pageNumber:T,pageContext:It[T]}},wn=d.__private__.getPageInfoByObjId=function(T){if(isNaN(T)||T%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var K in It)if(It[K].objId===T)break;return Nf(K)},lp=d.__private__.getCurrentPageInfo=d.getCurrentPageInfo=function(){return{objId:It[j].objId,pageNumber:j,pageContext:It[j]}};d.addPage=function(){return kr.apply(this,arguments),this},d.setPage=function(){return qi.apply(this,arguments),Ae.call(this,Ie[j]),this},d.insertPage=function(T){return this.addPage(),this.movePage(j,T),this},d.movePage=function(T,K){var _e,Le;if(T>K){_e=Ie[T],Le=It[T];for(var He=T;He>K;He--)Ie[He]=Ie[He-1],It[He]=It[He-1];Ie[K]=_e,It[K]=Le,this.setPage(K)}else if(T<K){_e=Ie[T],Le=It[T];for(var at=T;at<K;at++)Ie[at]=Ie[at+1],It[at]=It[at+1];Ie[K]=_e,It[K]=Le,this.setPage(K)}return this},d.deletePage=function(){return oa.apply(this,arguments),this},d.__private__.text=d.text=function(T,K,_e,Le,He){var at,bt,Ut,on,_n,un,An,wr,pr,Ar=(Le=Le||{}).scope||this;if(typeof T=="number"&&typeof K=="number"&&(typeof _e=="string"||Array.isArray(_e))){var ai=_e;_e=K,K=T,T=ai}if(arguments[3]instanceof Vt?(L("The transform parameter of text() with a Matrix value"),pr=He):(Ut=arguments[4],on=arguments[5],Fr(An=arguments[3])==="object"&&An!==null||(typeof Ut=="string"&&(on=Ut,Ut=null),typeof An=="string"&&(on=An,An=null),typeof An=="number"&&(Ut=An,An=null),Le={flags:An,angle:Ut,align:on})),isNaN(K)||isNaN(_e)||T==null)throw new Error("Invalid arguments passed to jsPDF.text");if(T.length===0)return Ar;var Bi="",Es=!1,Bo=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:ka,li=Ar.internal.scaleFactor;function So(Qn){return Qn=Qn.split("	").join(Array(Le.TabLen||9).join(" ")),Ln(Qn,An)}function Tr(Qn){for(var lr,$r=Qn.concat(),ci=[],za=$r.length;za--;)typeof(lr=$r.shift())=="string"?ci.push(lr):Array.isArray(Qn)&&(lr.length===1||lr[1]===void 0&&lr[2]===void 0)?ci.push(lr[0]):ci.push([lr[0],lr[1],lr[2]]);return ci}function gl(Qn,lr){var $r;if(typeof Qn=="string")$r=lr(Qn)[0];else if(Array.isArray(Qn)){for(var ci,za,sh=Qn.concat(),tc=[],Bf=sh.length;Bf--;)typeof(ci=sh.shift())=="string"?tc.push(lr(ci)[0]):Array.isArray(ci)&&typeof ci[0]=="string"&&(za=lr(ci[0],ci[1],ci[2]),tc.push([za[0],za[1],za[2]]));$r=tc}return $r}var _o=!1,th=!0;if(typeof T=="string")_o=!0;else if(Array.isArray(T)){var nh=T.concat();bt=[];for(var cu,Ui=nh.length;Ui--;)(typeof(cu=nh.shift())!="string"||Array.isArray(cu)&&typeof cu[0]!="string")&&(th=!1);_o=th}if(_o===!1)throw new Error('Type of text must be string or Array. "'+T+'" is not recognized.');typeof T=="string"&&(T=T.match(/[\r?\n]/)?T.split(/\r\n|\r|\n/g):[T]);var Zu=nt/Ar.internal.scaleFactor,Da=Zu*(Bo-1);switch(Le.baseline){case"bottom":_e-=Da;break;case"top":_e+=Zu-Da;break;case"hanging":_e+=Zu-2*Da;break;case"middle":_e+=Zu/2-Da}if((un=Le.maxWidth||0)>0&&(typeof T=="string"?T=Ar.splitTextToSize(T,un):Object.prototype.toString.call(T)==="[object Array]"&&(T=T.reduce(function(Qn,lr){return Qn.concat(Ar.splitTextToSize(lr,un))},[]))),at={text:T,x:K,y:_e,options:Le,mutex:{pdfEscape:Ln,activeFontKey:ht,fonts:At,activeFontSize:nt}},Zt.publish("preProcessText",at),T=at.text,Ut=(Le=at.options).angle,!(pr instanceof Vt)&&Ut&&typeof Ut=="number"){Ut*=Math.PI/180,Le.rotationDirection===0&&(Ut=-Ut),_===x.ADVANCED&&(Ut=-Ut);var ua=Math.cos(Ut),Ku=Math.sin(Ut);pr=new Vt(ua,Ku,-Ku,ua,0,0)}else Ut&&Ut instanceof Vt&&(pr=Ut);_!==x.ADVANCED||pr||(pr=Do),(_n=Le.charSpace||au)!==void 0&&(Bi+=R(B(_n))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(wr=Le.horizontalScale)!==void 0&&(Bi+=R(100*wr)+` Tz
`),Le.lang;var Yi=-1,rh=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,ih=Ar.internal.getCurrentPageInfo().pageContext;switch(rh){case 0:case!1:case"fill":Yi=0;break;case 1:case!0:case"stroke":Yi=1;break;case 2:case"fillThenStroke":Yi=2;break;case 3:case"invisible":Yi=3;break;case 4:case"fillAndAddForClipping":Yi=4;break;case 5:case"strokeAndAddPathForClipping":Yi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Yi=6;break;case 7:case"addToPathForClipping":Yi=7}var Of=ih.usedRenderingMode!==void 0?ih.usedRenderingMode:-1;Yi!==-1?Bi+=Yi+` Tr
`:Of!==-1&&(Bi+=`0 Tr
`),Yi!==-1&&(ih.usedRenderingMode=Yi),on=Le.align||"left";var ro,Ju=nt*Bo,hu=Ar.internal.pageSize.getWidth(),Uo=At[ht];_n=Le.charSpace||au,un=Le.maxWidth||0,An=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var Hs=[],Gs=function(Qn){return Ar.getStringUnitWidth(Qn,{font:Uo,charSpace:_n,fontSize:nt,doKerning:!1})*nt/li};if(Object.prototype.toString.call(T)==="[object Array]"){var Zr;bt=Tr(T),on!=="left"&&(ro=bt.map(Gs));var io,As=0;if(on==="right"){K-=ro[0],T=[],Ui=bt.length;for(var Oa=0;Oa<Ui;Oa++)Oa===0?(io=Ia(K),Zr=Oi(_e)):(io=B(As-ro[Oa]),Zr=-Ju),T.push([bt[Oa],io,Zr]),As=ro[Oa]}else if(on==="center"){K-=ro[0]/2,T=[],Ui=bt.length;for(var ca=0;ca<Ui;ca++)ca===0?(io=Ia(K),Zr=Oi(_e)):(io=B((As-ro[ca])/2),Zr=-Ju),T.push([bt[ca],io,Zr]),As=ro[ca]}else if(on==="left"){T=[],Ui=bt.length;for(var Cr=0;Cr<Ui;Cr++)T.push(bt[Cr])}else if(on==="justify"&&Uo.encoding==="Identity-H"){T=[],Ui=bt.length,un=un!==0?un:hu;for(var Vs=0,Kr=0;Kr<Ui;Kr++)if(Zr=Kr===0?Oi(_e):-Ju,io=Kr===0?Ia(K):Vs,Kr<Ui-1){var Qu=B((un-ro[Kr])/(bt[Kr].split(" ").length-1)),Zi=bt[Kr].split(" ");T.push([Zi[0]+" ",io,Zr]),Vs=0;for(var Jr=1;Jr<Zi.length;Jr++){var ha=(Gs(Zi[Jr-1]+" "+Zi[Jr])-Gs(Zi[Jr]))*li+Qu;Jr==Zi.length-1?T.push([Zi[Jr],ha,0]):T.push([Zi[Jr]+" ",ha,0]),Vs-=ha}}else T.push([bt[Kr],io,Zr]);T.push(["",Vs,0])}else{if(on!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(T=[],Ui=bt.length,un=un!==0?un:hu,Kr=0;Kr<Ui;Kr++)Zr=Kr===0?Oi(_e):-Ju,io=Kr===0?Ia(K):0,Kr<Ui-1?Hs.push(R(B((un-ro[Kr])/(bt[Kr].split(" ").length-1)))):Hs.push(0),T.push([bt[Kr],io,Zr])}}var Br=typeof Le.R2L=="boolean"?Le.R2L:de;Br===!0&&(T=gl(T,function(Qn,lr,$r){return[Qn.split("").reverse().join(""),lr,$r]})),at={text:T,x:K,y:_e,options:Le,mutex:{pdfEscape:Ln,activeFontKey:ht,fonts:At,activeFontSize:nt}},Zt.publish("postProcessText",at),T=at.text,Es=at.mutex.isHex||!1;var Ti=At[ht].encoding;Ti!=="WinAnsiEncoding"&&Ti!=="StandardEncoding"||(T=gl(T,function(Qn,lr,$r){return[So(Qn),lr,$r]})),bt=Tr(T),T=[];for(var jr,Ba,Ws,fa=0,oh=1,ui=Array.isArray(bt[0])?oh:fa,Ua="",ec=function(Qn,lr,$r){var ci="";return $r instanceof Vt?($r=typeof Le.angle=="number"?yo($r,new Vt(1,0,0,1,Qn,lr)):yo(new Vt(1,0,0,1,Qn,lr),$r),_===x.ADVANCED&&($r=yo(new Vt(1,0,0,-1,0,0),$r)),ci=$r.join(" ")+` Tm
`):ci=R(Qn)+" "+R(lr)+` Td
`,ci},Jo=0;Jo<bt.length;Jo++){switch(Ua="",ui){case oh:Ws=(Es?"<":"(")+bt[Jo][0]+(Es?">":")"),jr=parseFloat(bt[Jo][1]),Ba=parseFloat(bt[Jo][2]);break;case fa:Ws=(Es?"<":"(")+bt[Jo]+(Es?">":")"),jr=Ia(K),Ba=Oi(_e)}Hs!==void 0&&Hs[Jo]!==void 0&&(Ua=Hs[Jo]+` Tw
`),Jo===0?T.push(Ua+ec(jr,Ba,pr)+Ws):ui===fa?T.push(Ua+Ws):ui===oh&&T.push(Ua+ec(jr,Ba,pr)+Ws)}T=ui===fa?T.join(` Tj
T* `):T.join(` Tj
`),T+=` Tj
`;var Ci=`BT
/`;return Ci+=ht+" "+nt+` Tf
`,Ci+=R(nt*Bo)+` TL
`,Ci+=dl+`
`,Ci+=Bi,Ci+=T,ie(Ci+="ET"),f[ht]=!0,Ar};var Rg=d.__private__.clip=d.clip=function(T){return ie(T==="evenodd"?"W*":"W"),this};d.clipEvenOdd=function(){return Rg("evenodd")},d.__private__.discardPath=d.discardPath=function(){return ie("n"),this};var Ra=d.__private__.isValidStyle=function(T){var K=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(T)!==-1&&(K=!0),K};d.__private__.setDefaultPathOperation=d.setDefaultPathOperation=function(T){return Ra(T)&&(u=T),this};var di=d.__private__.getStyle=d.getStyle=function(T){var K=u;switch(T){case"D":case"S":K="S";break;case"F":K="f";break;case"FD":case"DF":K="B";break;case"f":case"f*":case"B":case"B*":K=T}return K},Yc=d.close=function(){return ie("h"),this};d.stroke=function(){return ie("S"),this},d.fill=function(T){return Zc("f",T),this},d.fillEvenOdd=function(T){return Zc("f*",T),this},d.fillStroke=function(T){return Zc("B",T),this},d.fillStrokeEvenOdd=function(T){return Zc("B*",T),this};var Zc=function(T,K){Fr(K)==="object"?Kc(K,T):ie(T)},Vu=function(T){T===null||_===x.ADVANCED&&T===void 0||(T=di(T),ie(T))};function kg(T,K,_e,Le,He){var at=new Ad(K||this.boundingBox,_e||this.xStep,Le||this.yStep,this.gState,He||this.matrix);at.stream=this.stream;var bt=T+"$$"+this.cloneIndex+++"$$";return si(bt,at),at}var Kc=function(T,K){var _e=Te[T.key],Le=pt[_e];if(Le instanceof zh)ie("q"),ie(Us(K)),Le.gState&&d.setGState(Le.gState),ie(T.matrix.toString()+" cm"),ie("/"+_e+" sh"),ie("Q");else if(Le instanceof Ad){var He=new Vt(1,0,0,-1,0,ml());T.matrix&&(He=He.multiply(T.matrix||Do),_e=kg.call(Le,T.key,T.boundingBox,T.xStep,T.yStep,He).id),ie("q"),ie("/Pattern cs"),ie("/"+_e+" scn"),Le.gState&&d.setGState(Le.gState),ie(K),ie("Q")}},Us=function(T){switch(T){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ff=d.moveTo=function(T,K){return ie(R(B(T))+" "+R(V(K))+" m"),this},Wu=d.lineTo=function(T,K){return ie(R(B(T))+" "+R(V(K))+" l"),this},no=d.curveTo=function(T,K,_e,Le,He,at){return ie([R(B(T)),R(V(K)),R(B(_e)),R(V(Le)),R(B(He)),R(V(at)),"c"].join(" ")),this};d.__private__.line=d.line=function(T,K,_e,Le,He){if(isNaN(T)||isNaN(K)||isNaN(_e)||isNaN(Le)||!Ra(He))throw new Error("Invalid arguments passed to jsPDF.line");return _===x.COMPAT?this.lines([[_e-T,Le-K]],T,K,[1,1],He||"S"):this.lines([[_e-T,Le-K]],T,K,[1,1]).stroke()},d.__private__.lines=d.lines=function(T,K,_e,Le,He,at){var bt,Ut,on,_n,un,An,wr,pr,Ar,ai,Bi,Es;if(typeof T=="number"&&(Es=_e,_e=K,K=T,T=Es),Le=Le||[1,1],at=at||!1,isNaN(K)||isNaN(_e)||!Array.isArray(T)||!Array.isArray(Le)||!Ra(He)||typeof at!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ff(K,_e),bt=Le[0],Ut=Le[1],_n=T.length,ai=K,Bi=_e,on=0;on<_n;on++)(un=T[on]).length===2?(ai=un[0]*bt+ai,Bi=un[1]*Ut+Bi,Wu(ai,Bi)):(An=un[0]*bt+ai,wr=un[1]*Ut+Bi,pr=un[2]*bt+ai,Ar=un[3]*Ut+Bi,ai=un[4]*bt+ai,Bi=un[5]*Ut+Bi,no(An,wr,pr,Ar,ai,Bi));return at&&Yc(),Vu(He),this},d.path=function(T){for(var K=0;K<T.length;K++){var _e=T[K],Le=_e.c;switch(_e.op){case"m":Ff(Le[0],Le[1]);break;case"l":Wu(Le[0],Le[1]);break;case"c":no.apply(this,Le);break;case"h":Yc()}}return this},d.__private__.rect=d.rect=function(T,K,_e,Le,He){if(isNaN(T)||isNaN(K)||isNaN(_e)||isNaN(Le)||!Ra(He))throw new Error("Invalid arguments passed to jsPDF.rect");return _===x.COMPAT&&(Le=-Le),ie([R(B(T)),R(V(K)),R(B(_e)),R(B(Le)),"re"].join(" ")),Vu(He),this},d.__private__.triangle=d.triangle=function(T,K,_e,Le,He,at,bt){if(isNaN(T)||isNaN(K)||isNaN(_e)||isNaN(Le)||isNaN(He)||isNaN(at)||!Ra(bt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[_e-T,Le-K],[He-_e,at-Le],[T-He,K-at]],T,K,[1,1],bt,!0),this},d.__private__.roundedRect=d.roundedRect=function(T,K,_e,Le,He,at,bt){if(isNaN(T)||isNaN(K)||isNaN(_e)||isNaN(Le)||isNaN(He)||isNaN(at)||!Ra(bt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ut=4/3*(Math.SQRT2-1);return He=Math.min(He,.5*_e),at=Math.min(at,.5*Le),this.lines([[_e-2*He,0],[He*Ut,0,He,at-at*Ut,He,at],[0,Le-2*at],[0,at*Ut,-He*Ut,at,-He,at],[2*He-_e,0],[-He*Ut,0,-He,-at*Ut,-He,-at],[0,2*at-Le],[0,-at*Ut,He*Ut,-at,He,-at]],T+He,K,[1,1],bt,!0),this},d.__private__.ellipse=d.ellipse=function(T,K,_e,Le,He){if(isNaN(T)||isNaN(K)||isNaN(_e)||isNaN(Le)||!Ra(He))throw new Error("Invalid arguments passed to jsPDF.ellipse");var at=4/3*(Math.SQRT2-1)*_e,bt=4/3*(Math.SQRT2-1)*Le;return Ff(T+_e,K),no(T+_e,K-bt,T+at,K-Le,T,K-Le),no(T-at,K-Le,T-_e,K-bt,T-_e,K),no(T-_e,K+bt,T-at,K+Le,T,K+Le),no(T+at,K+Le,T+_e,K+bt,T+_e,K),Vu(He),this},d.__private__.circle=d.circle=function(T,K,_e,Le){if(isNaN(T)||isNaN(K)||isNaN(_e)||!Ra(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(T,K,_e,_e,Le)},d.setFont=function(T,K,_e){return _e&&(K=I(K,_e)),ht=Gu(T,K,{disableWarning:!1}),this};var aa=d.__private__.getFont=d.getFont=function(){return At[Gu.apply(d,arguments)]};d.__private__.getFontList=d.getFontList=function(){var T,K,_e={};for(T in be)if(be.hasOwnProperty(T))for(K in _e[T]=[],be[T])be[T].hasOwnProperty(K)&&_e[T].push(K);return _e},d.addFont=function(T,K,_e,Le,He){var at=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&at.indexOf(arguments[3])!==-1?He=arguments[3]:arguments[3]&&at.indexOf(arguments[3])==-1&&(_e=I(_e,Le)),He=He||"Identity-H",ar.call(this,T,K,_e,He)};var ka,ju=n.lineWidth||.200025,$u=d.__private__.getLineWidth=d.getLineWidth=function(){return ju},up=d.__private__.setLineWidth=d.setLineWidth=function(T){return ju=T,ie(R(B(T))+" w"),this};d.__private__.setLineDash=dn.API.setLineDash=dn.API.setLineDashPattern=function(T,K){if(T=T||[],K=K||0,isNaN(K)||!Array.isArray(T))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return T=T.map(function(_e){return R(B(_e))}).join(" "),K=R(B(K)),ie("["+T+"] "+K+" d"),this};var _s=d.__private__.getLineHeight=d.getLineHeight=function(){return nt*ka};d.__private__.getLineHeight=d.getLineHeight=function(){return nt*ka};var cp=d.__private__.setLineHeightFactor=d.setLineHeightFactor=function(T){return typeof(T=T||1.15)=="number"&&(ka=T),this},qu=d.__private__.getLineHeightFactor=d.getLineHeightFactor=function(){return ka};cp(n.lineHeight);var Ia=d.__private__.getHorizontalCoordinate=function(T){return B(T)},Oi=d.__private__.getVerticalCoordinate=function(T){return _===x.ADVANCED?T:It[j].mediaBox.topRightY-It[j].mediaBox.bottomLeftY-B(T)},Jc=d.__private__.getHorizontalCoordinateString=d.getHorizontalCoordinateString=function(T){return R(Ia(T))},la=d.__private__.getVerticalCoordinateString=d.getVerticalCoordinateString=function(T){return R(Oi(T))},xo=n.strokeColor||"0 G";d.__private__.getStrokeColor=d.getDrawColor=function(){return Y(xo)},d.__private__.setStrokeColor=d.setDrawColor=function(T,K,_e,Le){return xo=U({ch1:T,ch2:K,ch3:_e,ch4:Le,pdfColorType:"draw",precision:2}),ie(xo),this};var Xu=n.fillColor||"0 g";d.__private__.getFillColor=d.getFillColor=function(){return Y(Xu)},d.__private__.setFillColor=d.setFillColor=function(T,K,_e,Le){return Xu=U({ch1:T,ch2:K,ch3:_e,ch4:Le,pdfColorType:"fill",precision:2}),ie(Xu),this};var dl=n.textColor||"0 g",hp=d.__private__.getTextColor=d.getTextColor=function(){return Y(dl)};d.__private__.setTextColor=d.setTextColor=function(T,K,_e,Le){return dl=U({ch1:T,ch2:K,ch3:_e,ch4:Le,pdfColorType:"text",precision:3}),this};var au=n.charSpace,Df=d.__private__.getCharSpace=d.getCharSpace=function(){return parseFloat(au||0)};d.__private__.setCharSpace=d.setCharSpace=function(T){if(isNaN(T))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return au=T,this};var Na=0;d.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},d.__private__.setLineCap=d.setLineCap=function(T){var K=d.CapJoinStyles[T];if(K===void 0)throw new Error("Line cap style of '"+T+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Na=K,ie(K+" J"),this};var wo=0;d.__private__.setLineJoin=d.setLineJoin=function(T){var K=d.CapJoinStyles[T];if(K===void 0)throw new Error("Line join style of '"+T+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return wo=K,ie(K+" j"),this},d.__private__.setLineMiterLimit=d.__private__.setMiterLimit=d.setLineMiterLimit=d.setMiterLimit=function(T){if(T=T||0,isNaN(T))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ie(R(B(T))+" M"),this},d.GState=Wd,d.setGState=function(T){(T=typeof T=="string"?Ue[qe[T]]:bs(null,T)).equals(Mt)||(ie("/"+T.id+" gs"),Mt=T)};var bs=function(T,K){if(!T||!qe[T]){var _e=!1;for(var Le in Ue)if(Ue.hasOwnProperty(Le)&&Ue[Le].equals(K)){_e=!0;break}if(_e)K=Ue[Le];else{var He="GS"+(Object.keys(Ue).length+1).toString(10);Ue[He]=K,K.id=He}return T&&(qe[T]=K.id),Zt.publish("addGState",K),K}};d.addGState=function(T,K){return bs(T,K),this},d.saveGraphicsState=function(){return ie("q"),Je.push({key:ht,size:nt,color:dl}),this},d.restoreGraphicsState=function(){ie("Q");var T=Je.pop();return ht=T.key,nt=T.size,dl=T.color,Mt=null,this},d.setCurrentTransformationMatrix=function(T){return ie(T.toString()+" cm"),this},d.comment=function(T){return ie("#"+T),this};var Ms=function(T,K){var _e=T||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return _e},set:function(at){isNaN(at)||(_e=parseFloat(at))}});var Le=K||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(at){isNaN(at)||(Le=parseFloat(at))}});var He="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return He},set:function(at){He=at.toString()}}),this},Yu=function(T,K,_e,Le){Ms.call(this,T,K),this.type="rect";var He=_e||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return He},set:function(bt){isNaN(bt)||(He=parseFloat(bt))}});var at=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return at},set:function(bt){isNaN(bt)||(at=parseFloat(bt))}}),this},Qc=function(){this.page=Et,this.currentPage=j,this.pages=Ie.slice(0),this.pagesContext=It.slice(0),this.x=Wt,this.y=Ct,this.matrix=Nt,this.width=lu(j),this.height=ml(j),this.outputDestination=ke,this.id="",this.objectNumber=-1};Qc.prototype.restore=function(){Et=this.page,j=this.currentPage,It=this.pagesContext,Ie=this.pages,Wt=this.x,Ct=this.y,Nt=this.matrix,uu(j,this.width),eh(j,this.height),ke=this.outputDestination};var zs=function(T,K,_e,Le,He){dr.push(new Qc),Et=j=0,Ie=[],Wt=T,Ct=K,Nt=He,Wn([_e,Le])},Fa=function(T){if(bn[T])dr.pop().restore();else{var K=new Qc,_e="Xo"+(Object.keys(Kn).length+1).toString(10);K.id=_e,bn[T]=_e,Kn[_e]=K,Zt.publish("addFormObject",K),dr.pop().restore()}};for(var pl in d.beginFormObject=function(T,K,_e,Le,He){return zs(T,K,_e,Le,He),this},d.endFormObject=function(T){return Fa(T),this},d.doFormObject=function(T,K){var _e=Kn[bn[T]];return ie("q"),ie(K.toString()+" cm"),ie("/"+_e.id+" Do"),ie("Q"),this},d.getFormObject=function(T){var K=Kn[bn[T]];return{x:K.x,y:K.y,width:K.width,height:K.height,matrix:K.matrix}},d.save=function(T,K){return T=T||"generated.pdf",(K=K||{}).returnPromise=K.returnPromise||!1,K.returnPromise===!1?(cd(su(sa()),T),typeof cd.unload=="function"&&Sn.setTimeout&&setTimeout(cd.unload,911),this):new Promise(function(_e,Le){try{var He=cd(su(sa()),T);typeof cd.unload=="function"&&Sn.setTimeout&&setTimeout(cd.unload,911),_e(He)}catch(at){Le(at.message)}})},dn.API)dn.API.hasOwnProperty(pl)&&(pl==="events"&&dn.API.events.length?function(T,K){var _e,Le,He;for(He=K.length-1;He!==-1;He--)_e=K[He][0],Le=K[He][1],T.subscribe.apply(T,[_e].concat(typeof Le=="function"?[Le]:Le))}(Zt,dn.API.events):d[pl]=dn.API[pl]);var lu=d.getPageWidth=function(T){return(It[T=T||j].mediaBox.topRightX-It[T].mediaBox.bottomLeftX)/Pe},uu=d.setPageWidth=function(T,K){It[T].mediaBox.topRightX=K*Pe+It[T].mediaBox.bottomLeftX},ml=d.getPageHeight=function(T){return(It[T=T||j].mediaBox.topRightY-It[T].mediaBox.bottomLeftY)/Pe},eh=d.setPageHeight=function(T,K){It[T].mediaBox.topRightY=K*Pe+It[T].mediaBox.bottomLeftY};return d.internal={pdfEscape:Ln,getStyle:di,getFont:aa,getFontSize:_t,getCharSpace:Df,getTextColor:hp,getLineHeight:_s,getLineHeightFactor:qu,getLineWidth:$u,write:Ke,getHorizontalCoordinate:Ia,getVerticalCoordinate:Oi,getCoordinateString:Jc,getVerticalCoordinateString:la,collections:{},newObject:br,newAdditionalObject:Mn,newObjectDeferred:xr,newObjectDeferredBegin:Mr,getFilters:ne,putStream:ve,events:Zt,scaleFactor:Pe,pageSize:{getWidth:function(){return lu(j)},setWidth:function(T){uu(j,T)},getHeight:function(){return ml(j)},setHeight:function(T){eh(j,T)}},encryptionOptions:c,encryption:Xi,getEncryptor:rr,output:La,getNumberOfPages:Bs,pages:Ie,out:ie,f2:D,f3:N,getPageInfo:Nf,getPageInfoByObjId:wn,getCurrentPageInfo:lp,getPDFVersion:y,Point:Ms,Rectangle:Yu,Matrix:Vt,hasHotfix:ap},Object.defineProperty(d.internal.pageSize,"width",{get:function(){return lu(j)},set:function(T){uu(j,T)},enumerable:!0,configurable:!0}),Object.defineProperty(d.internal.pageSize,"height",{get:function(){return ml(j)},set:function(T){eh(j,T)},enumerable:!0,configurable:!0}),Yr.call(d,We),ht="F1",kr(i,t),Zt.publish("initialized"),d}dm.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},dm.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},dm.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},dm.prototype.processOwnerPassword=function(n,e){return QM(JM(e).substr(0,5),n)},dm.prototype.encryptor=function(n,e){var t=JM(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return QM(t,r)}},Wd.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Fr(n)!==Fr(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},dn.API={events:[]},dn.version="3.0.1";var Ri=dn.API,FA=1,ip=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},rm=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Nn=function(n){return n.toFixed(2)},Th=function(n){return n.toFixed(5)};Ri.__acroform__={};var ia=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},zL=function(n){return n*FA},vu=function(n){var e=new uD,t=en.internal.getHeight(n)||0,r=en.internal.getWidth(n)||0;return e.BBox=[0,0,Number(Nn(r)),Number(Nn(t))],e},zY=Ri.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},HY=Ri.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},GY=Ri.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},Wi=Ri.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return GY(n,e-1)},ji=Ri.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return zY(n,e-1)},$i=Ri.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return HY(n,e-1)},VY=Ri.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=n[0],o=n[1],s=n[2],a=n[3],l={};return l.lowerLeft_X=t(i)||0,l.lowerLeft_Y=r(o+a)||0,l.upperRight_X=t(i+s)||0,l.upperRight_Y=r(o)||0,[Number(Nn(l.lowerLeft_X)),Number(Nn(l.lowerLeft_Y)),Number(Nn(l.upperRight_X)),Number(Nn(l.upperRight_Y))]},WY=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=eE(n,t),i=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+i+" "+Nn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var o=vu(n);return o.scope=n.scope,o.stream=e.join(`
`),o}},eE=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=n.multiline?i.map(function(N){return N.split(`
`)}):i.map(function(N){return[N]});var o=t,s=en.internal.getHeight(n)||0;s=s<0?-s:s;var a=en.internal.getWidth(n)||0;a=a<0?-a:a;var l=function(N,B,G){if(N+1<i.length){var V=B+" "+i[N+1][0];return x2(V,n,G).width<=a-4}return!1};o++;e:for(;o>0;){e="",o--;var u,c,h=x2("3",n,o).height,f=n.multiline?s-o:(s-h)/2,d=f+=2,v=0,y=0,w=0;if(o<=0){e=`(...) Tj
`,e+="% Width of Text: "+x2(e,n,o=12).width+", FieldWidth:"+a+`
`;break}for(var g="",x=0,_=0;_<i.length;_++)if(i.hasOwnProperty(_)){var E=!1;if(i[_].length!==1&&w!==i[_].length-1){if((h+2)*(x+2)+2>s)continue e;g+=i[_][w],E=!0,y=_,_--}else{g=(g+=i[_][w]+" ").substr(g.length-1)==" "?g.substr(0,g.length-1):g;var C=parseInt(_),I=l(C,g,o),R=_>=i.length-1;if(I&&!R){g+=" ",w=0;continue}if(I||R){if(R)y=C;else if(n.multiline&&(h+2)*(x+2)+2>s)continue e}else{if(!n.multiline||(h+2)*(x+2)+2>s)continue e;y=C}}for(var L="",k=v;k<=y;k++){var D=i[k];if(n.multiline){if(k===y){L+=D[w]+" ",w=(w+1)%D.length;continue}if(k===v){L+=D[D.length-1]+" ";continue}}L+=D[0]+" "}switch(L=L.substr(L.length-1)==" "?L.substr(0,L.length-1):L,c=x2(L,n,o).width,n.textAlign){case"right":u=a-c-2;break;case"center":u=(a-c)/2;break;case"left":default:u=2}e+=Nn(u)+" "+Nn(d)+` Td
`,e+="("+ip(L)+`) Tj
`,e+=-Nn(u)+` 0 Td
`,d=-(o+2),c=0,v=E?y:y+1,x++,g=""}break}return r.text=e,r.fontSize=o,r},x2=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:i}},jY={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},$Y=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},qY=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,i=n[t];e.internal.newObjectDeferredBegin(i.objId,!0),Fr(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete n[r]}},XY=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(eu.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(jY)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");FA=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new cD,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var o=r[i];o.objId=void 0,o.hasAnnotation&&$Y(o,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,i){var o=!r;for(var s in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(s)){var a=r[s],l=[],u=a.Rect;if(a.Rect&&(a.Rect=VY(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=en.createDefaultAppearanceStream(a),Fr(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var c=WY(a);l.push({key:"AP",value:"<</N "+c+">>"}),i.internal.acroformPlugin.xForms.push(c)}if(a.appearanceStreamContent){var h="";for(var f in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(f)){var d=a.appearanceStreamContent[f];if(h+="/"+f+" ",h+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var s in d)if(d.hasOwnProperty(s)){var v=d[s];typeof v=="function"&&(v=v.call(i,a)),h+="/"+s+" "+v+" ",i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v)}}else typeof(v=d)=="function"&&(v=v.call(i,a)),h+="/"+s+" "+v,i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}o&&qY(i.internal.acroformPlugin.xForms,i)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},lD=Ri.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(s){return s};if(Array.isArray(n)){for(var i="[",o=0;o<n.length;o++)switch(o!==0&&(i+=" "),Fr(n[o])){case"boolean":case"number":case"object":i+=n[o].toString();break;case"string":n[o].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),i+="("+ip(r(n[o].toString()))+")"):i+=n[o].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},wb=function(n,e,t){var r=function(i){return i};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+ip(r(n))+")"},Eu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Eu.prototype.toString=function(){return this.objId+" 0 R"},Eu.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},Eu.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(o){return o!="content"&&o!="appearanceStreamContent"&&o!="scope"&&o!="objId"&&o.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],i=this[r];i&&(Array.isArray(i)?n.push({key:r,value:lD(i,this.objId,this.scope)}):i instanceof Eu?(i.scope=this.scope,n.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&n.push({key:r,value:i}))}return n};var uD=function(){Eu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};ia(uD,Eu);var cD=function(){Eu.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+ip(t(n))+")"}},set:function(t){n=t}})};ia(cD,Eu);var eu=function n(){Eu.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute F supplied.');e=g}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(e,3))},set:function(g){Boolean(g)===!0?this.F=ji(e,3):this.F=$i(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute Ff supplied.');t=g}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(g){r=g!==void 0?g:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(g){r[0]=g}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(g){r[1]=g}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(g){r[2]=g}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(g){r[3]=g}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(g){switch(g){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=g;break;default:throw new Error('Invalid value "'+g+'" for attribute FT supplied.')}}});var o=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!o||o.length<1){if(this instanceof Qx)return;o="FieldObject"+n.FieldNum++}var g=function(x){return x};return this.scope&&(g=this.scope.internal.getEncryptor(this.objId)),"("+ip(g(o))+")"},set:function(g){o=g.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return o},set:function(g){o=g}});var s="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return s},set:function(g){s=g}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(g){a=g}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(g){l=g}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/FA:u},set:function(g){u=g}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(g){c=g}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Qx||this instanceof Id))return wb(h,this.objId,this.scope)},set:function(g){g=g.toString(),h=g}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Io?f:wb(f,this.objId,this.scope)},set:function(g){g=g.toString(),f=this instanceof Io?g:g.substr(0,1)==="("?rm(g.substr(1,g.length-2)):rm(g)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Io?rm(f.substr(1,f.length-1)):f},set:function(g){g=g.toString(),f=this instanceof Io?"/"+g:g}});var d=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(d)return d},set:function(g){this.V=g}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof Io?d:wb(d,this.objId,this.scope)},set:function(g){g=g.toString(),d=this instanceof Io?g:g.substr(0,1)==="("?rm(g.substr(1,g.length-2)):rm(g)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Io?rm(d.substr(1,d.length-1)):d},set:function(g){g=g.toString(),d=this instanceof Io?"/"+g:g}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,y=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return y},set:function(g){g=Boolean(g),y=g}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(g){v=g}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,1))},set:function(g){Boolean(g)===!0?this.Ff=ji(this.Ff,1):this.Ff=$i(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,2))},set:function(g){Boolean(g)===!0?this.Ff=ji(this.Ff,2):this.Ff=$i(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,3))},set:function(g){Boolean(g)===!0?this.Ff=ji(this.Ff,3):this.Ff=$i(this.Ff,3)}});var w=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(w!==null)return w},set:function(g){if([0,1,2].indexOf(g)===-1)throw new Error('Invalid value "'+g+'" for attribute Q supplied.');w=g}}),Object.defineProperty(this,"textAlign",{get:function(){var g;switch(w){case 0:default:g="left";break;case 1:g="center";break;case 2:g="right"}return g},configurable:!0,enumerable:!0,set:function(g){switch(g){case"right":case 2:w=2;break;case"center":case 1:w=1;break;case"left":case 0:default:w=0}}})};ia(eu,Eu);var Hm=function(){eu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return lD(e,this.objId,this.scope)},set:function(t){var r,i;i=[],typeof(r=t)=="string"&&(i=function(o,s,a){a||(a=1);for(var l,u=[];l=s.exec(o);)u.push(l[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,18))},set:function(t){Boolean(t)===!0?this.Ff=ji(this.Ff,18):this.Ff=$i(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,19))},set:function(t){this.combo===!0&&(Boolean(t)===!0?this.Ff=ji(this.Ff,19):this.Ff=$i(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,20))},set:function(t){Boolean(t)===!0?(this.Ff=ji(this.Ff,20),e.sort()):this.Ff=$i(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,22))},set:function(t){Boolean(t)===!0?this.Ff=ji(this.Ff,22):this.Ff=$i(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,23))},set:function(t){Boolean(t)===!0?this.Ff=ji(this.Ff,23):this.Ff=$i(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,27))},set:function(t){Boolean(t)===!0?this.Ff=ji(this.Ff,27):this.Ff=$i(this.Ff,27)}}),this.hasAppearanceStream=!1};ia(Hm,eu);var Gm=function(){Hm.call(this),this.fontName="helvetica",this.combo=!1};ia(Gm,Hm);var Vm=function(){Gm.call(this),this.combo=!0};ia(Vm,Gm);var lx=function(){Vm.call(this),this.edit=!0};ia(lx,Vm);var Io=function(){eu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,15))},set:function(t){Boolean(t)===!0?this.Ff=ji(this.Ff,15):this.Ff=$i(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,16))},set:function(t){Boolean(t)===!0?this.Ff=ji(this.Ff,16):this.Ff=$i(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,17))},set:function(t){Boolean(t)===!0?this.Ff=ji(this.Ff,17):this.Ff=$i(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,26))},set:function(t){Boolean(t)===!0?this.Ff=ji(this.Ff,26):this.Ff=$i(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(o){return o};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+ip(t(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(t){Fr(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};ia(Io,eu);var ux=function(){Io.call(this),this.pushButton=!0};ia(ux,Io);var Wm=function(){Io.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};ia(Wm,Io);var Qx=function(){var n,e;eu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var o,s=[];for(o in s.push("<<"),r)s.push("/"+o+" ("+ip(i(r[o]))+")");return s.push(">>"),s.join(`
`)},set:function(i){Fr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(i){t="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=en.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ia(Qx,eu),Wm.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Wm.prototype.createOption=function(n){var e=new Qx;return e.Parent=this,e.optionName=n,this.Kids.push(e),YY.call(this.scope,e),e};var cx=function(){Io.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=en.CheckBox.createAppearanceStream()};ia(cx,Io);var Id=function(){eu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,13))},set:function(e){Boolean(e)===!0?this.Ff=ji(this.Ff,13):this.Ff=$i(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,21))},set:function(e){Boolean(e)===!0?this.Ff=ji(this.Ff,21):this.Ff=$i(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,23))},set:function(e){Boolean(e)===!0?this.Ff=ji(this.Ff,23):this.Ff=$i(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,24))},set:function(e){Boolean(e)===!0?this.Ff=ji(this.Ff,24):this.Ff=$i(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,25))},set:function(e){Boolean(e)===!0?this.Ff=ji(this.Ff,25):this.Ff=$i(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,26))},set:function(e){Boolean(e)===!0?this.Ff=ji(this.Ff,26):this.Ff=$i(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ia(Id,eu);var hx=function(){Id.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Wi(this.Ff,14))},set:function(n){Boolean(n)===!0?this.Ff=ji(this.Ff,14):this.Ff=$i(this.Ff,14)}}),this.password=!0};ia(hx,Id);var en={CheckBox:{createAppearanceStream:function(){return{N:{On:en.CheckBox.YesNormal},D:{On:en.CheckBox.YesPushDown,Off:en.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=vu(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),o=eE(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+Nn(en.internal.getWidth(n))+" "+Nn(en.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+Nn(o.fontSize)+" Tf "+i),t.push("BT"),t.push(o.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=vu(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),i=[],o=en.internal.getHeight(n),s=en.internal.getWidth(n),a=eE(n,n.caption);return i.push("1 g"),i.push("0 0 "+Nn(s)+" "+Nn(o)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Nn(s-1)+" "+Nn(o-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+t+" "+Nn(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(n){var e=vu(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Nn(en.internal.getWidth(n))+" "+Nn(en.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:en.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=en.RadioButton.Circle.YesNormal,e.D[n]=en.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=vu(n);e.scope=n.scope;var t=[],r=en.internal.getWidth(n)<=en.internal.getHeight(n)?en.internal.getWidth(n)/4:en.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=en.internal.Bezier_C,o=Number((r*i).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Th(en.internal.getWidth(n)/2)+" "+Th(en.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),t.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),t.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),t.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=vu(n);e.scope=n.scope;var t=[],r=en.internal.getWidth(n)<=en.internal.getHeight(n)?en.internal.getWidth(n)/4:en.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*en.internal.Bezier_C).toFixed(5)),s=Number((r*en.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Th(en.internal.getWidth(n)/2)+" "+Th(en.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Th(en.internal.getWidth(n)/2)+" "+Th(en.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),t.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),t.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),t.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=vu(n);e.scope=n.scope;var t=[],r=en.internal.getWidth(n)<=en.internal.getHeight(n)?en.internal.getWidth(n)/4:en.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),o=Number((i*en.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Th(en.internal.getWidth(n)/2)+" "+Th(en.internal.getHeight(n)/2)+" cm"),t.push(i+" 0 m"),t.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),t.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),t.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),t.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:en.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=en.RadioButton.Cross.YesNormal,e.D[n]=en.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=vu(n);e.scope=n.scope;var t=[],r=en.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+Nn(en.internal.getWidth(n)-2)+" "+Nn(en.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(Nn(r.x1.x)+" "+Nn(r.x1.y)+" m"),t.push(Nn(r.x2.x)+" "+Nn(r.x2.y)+" l"),t.push(Nn(r.x4.x)+" "+Nn(r.x4.y)+" m"),t.push(Nn(r.x3.x)+" "+Nn(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=vu(n);e.scope=n.scope;var t=en.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+Nn(en.internal.getWidth(n))+" "+Nn(en.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Nn(en.internal.getWidth(n)-2)+" "+Nn(en.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(Nn(t.x1.x)+" "+Nn(t.x1.y)+" m"),r.push(Nn(t.x2.x)+" "+Nn(t.x2.y)+" l"),r.push(Nn(t.x4.x)+" "+Nn(t.x4.y)+" m"),r.push(Nn(t.x3.x)+" "+Nn(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=vu(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+Nn(en.internal.getWidth(n))+" "+Nn(en.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};en.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=en.internal.getWidth(n),t=en.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},en.internal.getWidth=function(n){var e=0;return Fr(n)==="object"&&(e=zL(n.Rect[2])),e},en.internal.getHeight=function(n){var e=0;return Fr(n)==="object"&&(e=zL(n.Rect[3])),e};var YY=Ri.addField=function(n){if(XY(this,n),!(n instanceof eu))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Ri.AcroFormChoiceField=Hm,Ri.AcroFormListBox=Gm,Ri.AcroFormComboBox=Vm,Ri.AcroFormEditBox=lx,Ri.AcroFormButton=Io,Ri.AcroFormPushButton=ux,Ri.AcroFormRadioButton=Wm,Ri.AcroFormCheckBox=cx,Ri.AcroFormTextField=Id,Ri.AcroFormPasswordField=hx,Ri.AcroFormAppearance=en,Ri.AcroForm={ChoiceField:Hm,ListBox:Gm,ComboBox:Vm,EditBox:lx,Button:Io,PushButton:ux,RadioButton:Wm,CheckBox:cx,TextField:Id,PasswordField:hx,Appearance:en},dn.AcroForm={ChoiceField:Hm,ListBox:Gm,ComboBox:Vm,EditBox:lx,Button:Io,PushButton:ux,RadioButton:Wm,CheckBox:cx,TextField:Id,PasswordField:hx,Appearance:en};function hD(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(N,B){var G,V,$,J,le,H=e;if((B=B||e)==="RGBA"||N.data!==void 0&&N.data instanceof Uint8ClampedArray&&"height"in N&&"width"in N)return"RGBA";if(I(N))for(le in t)for($=t[le],G=0;G<$.length;G+=1){for(J=!0,V=0;V<$[G].length;V+=1)if($[G][V]!==void 0&&$[G][V]!==N[V]){J=!1;break}if(J===!0){H=le;break}}else for(le in t)for($=t[le],G=0;G<$.length;G+=1){for(J=!0,V=0;V<$[G].length;V+=1)if($[G][V]!==void 0&&$[G][V]!==N.charCodeAt(V)){J=!1;break}if(J===!0){H=le;break}}return H===e&&B!==e&&(H=B),H},i=function N(B){for(var G=this.internal.write,V=this.internal.putStream,$=(0,this.internal.getFilters)();$.indexOf("FlateEncode")!==-1;)$.splice($.indexOf("FlateEncode"),1);B.objectId=this.internal.newObject();var J=[];if(J.push({key:"Type",value:"/XObject"}),J.push({key:"Subtype",value:"/Image"}),J.push({key:"Width",value:B.width}),J.push({key:"Height",value:B.height}),B.colorSpace===w.INDEXED?J.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(B.palette.length/3-1)+" "+("sMask"in B&&B.sMask!==void 0?B.objectId+2:B.objectId+1)+" 0 R]"}):(J.push({key:"ColorSpace",value:"/"+B.colorSpace}),B.colorSpace===w.DEVICE_CMYK&&J.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),J.push({key:"BitsPerComponent",value:B.bitsPerComponent}),"decodeParameters"in B&&B.decodeParameters!==void 0&&J.push({key:"DecodeParms",value:"<<"+B.decodeParameters+">>"}),"transparency"in B&&Array.isArray(B.transparency)){for(var le="",H=0,q=B.transparency.length;H<q;H++)le+=B.transparency[H]+" "+B.transparency[H]+" ";J.push({key:"Mask",value:"["+le+"]"})}B.sMask!==void 0&&J.push({key:"SMask",value:B.objectId+1+" 0 R"});var Z=B.filter!==void 0?["/"+B.filter]:void 0;if(V({data:B.data,additionalKeyValues:J,alreadyAppliedFilters:Z,objectId:B.objectId}),G("endobj"),"sMask"in B&&B.sMask!==void 0){var oe="/Predictor "+B.predictor+" /Colors 1 /BitsPerComponent "+B.bitsPerComponent+" /Columns "+B.width,F={width:B.width,height:B.height,colorSpace:"DeviceGray",bitsPerComponent:B.bitsPerComponent,decodeParameters:oe,data:B.sMask};"filter"in B&&(F.filter=B.filter),N.call(this,F)}if(B.colorSpace===w.INDEXED){var j=this.internal.newObject();V({data:L(new Uint8Array(B.palette)),objectId:j}),G("endobj")}},o=function(){var N=this.internal.collections.addImage_images;for(var B in N)i.call(this,N[B])},s=function(){var N,B=this.internal.collections.addImage_images,G=this.internal.write;for(var V in B)G("/I"+(N=B[V]).index,N.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",s))},l=function(){var N=this.internal.collections.addImage_images;return a.call(this),N},u=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(N){return typeof n["process"+N.toUpperCase()]=="function"},h=function(N){return Fr(N)==="object"&&N.nodeType===1},f=function(N,B){if(N.nodeName==="IMG"&&N.hasAttribute("src")){var G=""+N.getAttribute("src");if(G.indexOf("data:image/")===0)return nv(unescape(G).split("base64,").pop());var V=n.loadFile(G,!0);if(V!==void 0)return V}if(N.nodeName==="CANVAS"){if(N.width===0||N.height===0)throw new Error("Given canvas must have data. Canvas width: "+N.width+", height: "+N.height);var $;switch(B){case"PNG":$="image/png";break;case"WEBP":$="image/webp";break;case"JPEG":case"JPG":default:$="image/jpeg"}return nv(N.toDataURL($,1).split("base64,").pop())}},d=function(N){var B=this.internal.collections.addImage_images;if(B){for(var G in B)if(N===B[G].alias)return B[G]}},v=function(N,B,G){return N||B||(N=-96,B=-96),N<0&&(N=-1*G.width*72/N/this.internal.scaleFactor),B<0&&(B=-1*G.height*72/B/this.internal.scaleFactor),N===0&&(N=B*G.width/G.height),B===0&&(B=N*G.height/G.width),[N,B]},y=function(N,B,G,V,$,J){var le=v.call(this,G,V,$),H=this.internal.getCoordinateString,q=this.internal.getVerticalCoordinateString,Z=l.call(this);if(G=le[0],V=le[1],Z[$.index]=$,J){J*=Math.PI/180;var oe=Math.cos(J),F=Math.sin(J),j=function(se){return se.toFixed(4)},Q=[j(oe),j(F),j(-1*F),j(oe),0,0,"cm"]}this.internal.write("q"),J?(this.internal.write([1,"0","0",1,H(N),q(B+V),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([H(G),"0","0",H(V),"0","0","cm"].join(" "))):this.internal.write([H(G),"0","0",H(V),H(N),q(B+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+$.index+" Do"),this.internal.write("Q")},w=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var g=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=n.__addimage__.sHashCode=function(N){var B,G,V=0;if(typeof N=="string")for(G=N.length,B=0;B<G;B++)V=(V<<5)-V+N.charCodeAt(B),V|=0;else if(I(N))for(G=N.byteLength/2,B=0;B<G;B++)V=(V<<5)-V+N[B],V|=0;return V},_=n.__addimage__.validateStringAsBase64=function(N){(N=N||"").toString().trim();var B=!0;return N.length===0&&(B=!1),N.length%4!=0&&(B=!1),/^[A-Za-z0-9+/]+$/.test(N.substr(0,N.length-2))===!1&&(B=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(N.substr(-2))===!1&&(B=!1),B},E=n.__addimage__.extractImageFromDataUrl=function(N){if(N==null||!(N=N.trim()).startsWith("data:"))return null;var B=N.indexOf(",");return B<0?null:N.substring(0,B).trim().endsWith("base64")?N.substring(B+1):null},C=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(N){return C()&&N instanceof ArrayBuffer};var I=n.__addimage__.isArrayBufferView=function(N){return C()&&typeof Uint32Array<"u"&&(N instanceof Int8Array||N instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array)},R=n.__addimage__.binaryStringToUint8Array=function(N){for(var B=N.length,G=new Uint8Array(B),V=0;V<B;V++)G[V]=N.charCodeAt(V);return G},L=n.__addimage__.arrayBufferToBinaryString=function(N){for(var B="",G=I(N)?N:new Uint8Array(N),V=0;V<G.length;V+=8192)B+=String.fromCharCode.apply(null,G.subarray(V,V+8192));return B};n.addImage=function(){var N,B,G,V,$,J,le,H,q;if(typeof arguments[1]=="number"?(B=e,G=arguments[1],V=arguments[2],$=arguments[3],J=arguments[4],le=arguments[5],H=arguments[6],q=arguments[7]):(B=arguments[1],G=arguments[2],V=arguments[3],$=arguments[4],J=arguments[5],le=arguments[6],H=arguments[7],q=arguments[8]),Fr(N=arguments[0])==="object"&&!h(N)&&"imageData"in N){var Z=N;N=Z.imageData,B=Z.format||B||e,G=Z.x||G||0,V=Z.y||V||0,$=Z.w||Z.width||$,J=Z.h||Z.height||J,le=Z.alias||le,H=Z.compression||H,q=Z.rotation||Z.angle||q}var oe=this.internal.getFilters();if(H===void 0&&oe.indexOf("FlateEncode")!==-1&&(H="SLOW"),isNaN(G)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var F=k.call(this,N,B,le,H);return y.call(this,G,V,$,J,F,q),this};var k=function(N,B,G,V){var $,J,le;if(typeof N=="string"&&r(N)===e){N=unescape(N);var H=D(N,!1);(H!==""||(H=n.loadFile(N,!0))!==void 0)&&(N=H)}if(h(N)&&(N=f(N,B)),B=r(N,B),!c(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(((le=G)==null||le.length===0)&&(G=function(q){return typeof q=="string"||I(q)?x(q):I(q.data)?x(q.data):null}(N)),($=d.call(this,G))||(C()&&(N instanceof Uint8Array||B==="RGBA"||(J=N,N=R(N))),$=this["process"+B.toUpperCase()](N,u.call(this),G,function(q){return q&&typeof q=="string"&&(q=q.toUpperCase()),q in n.image_compression?q:g.NONE}(V),J)),!$)throw new Error("An unknown error occurred whilst processing the image.");return $},D=n.__addimage__.convertBase64ToBinaryString=function(N,B){B=typeof B!="boolean"||B;var G,V="";if(typeof N=="string"){var $;G=($=E(N))!==null&&$!==void 0?$:N;try{V=nv(G)}catch(J){if(B)throw _(G)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+J.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return V};n.getImageProperties=function(N){var B,G,V="";if(h(N)&&(N=f(N)),typeof N=="string"&&r(N)===e&&((V=D(N,!1))===""&&(V=n.loadFile(N)||""),N=V),G=r(N),!c(G))throw new Error("addImage does not support files of type '"+G+"', please ensure that a plugin for '"+G+"' support is added.");if(!C()||N instanceof Uint8Array||(N=R(N)),!(B=this["process"+G.toUpperCase()](N)))throw new Error("An unknown error occurred whilst processing the image");return B.fileType=G,B}})(dn.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};dn.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,i,o,s=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(t.objId),u=t.pageContext.annotations,c=!1,h=0;h<u.length&&!c;h++)switch((r=u[h]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var f=0;f<u.length;f++){r=u[f];var d=this.internal.pdfEscape,v=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var y=this.internal.newAdditionalObject(),w=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(y.objId),x=r.title||"Note";o="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+d(g(r.contents))+")",o+=" /Popup "+w.objId+" 0 R",o+=" /P "+l.objId+" 0 R",o+=" /T ("+d(g(x))+") >>",y.content=o;var _=y.objId+" 0 R";o="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+s(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+_,r.open&&(o+=" /Open true"),o+=" >>",w.content=o,this.internal.write(y.objId,"0 R",w.objId,"0 R");break;case"freetext":i="/Rect ["+s(r.bounds.x)+" "+a(r.bounds.y)+" "+s(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var E=r.color||"#000000";o="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+d(v(r.contents))+")",o+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+E+")",o+=" /Border [0 0 0]",o+=" >>",this.internal.write(o);break;case"link":if(r.options.name){var C=this.annotations._nameMap[r.options.name];r.options.pageNumber=C.page,r.options.top=C.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",o="",r.options.url)o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+d(v(r.options.url))+") >>";else if(r.options.pageNumber)switch(o="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":o+=" /Fit]";break;case"FitH":o+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,o+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var I=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),o+=" /XYZ "+r.options.left+" "+I+" "+r.options.zoom+"]"}o!=""&&(o+=" >>",this.internal.write(o))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,i,o,s){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(t),y:u(r),w:l(t+i),h:u(r+o)},options:s,type:"link"})},n.textWithLink=function(t,r,i,o){var s,a,l=this.getTextWidth(t),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(o.maxWidth!==void 0){a=o.maxWidth;var c=this.splitTextToSize(t,a).length;s=Math.ceil(u*c)}else a=l,s=u;return this.text(t,r,i,o),i+=.2*u,o.align==="center"&&(r-=l/2),o.align==="right"&&(r-=l),this.link(r,i-u,a,s,o),l},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(dn.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];n.__arabicParser__={};var o=n.__arabicParser__.isInArabicSubstitutionA=function(y){return e[y.charCodeAt(0)]!==void 0},s=n.__arabicParser__.isArabicLetter=function(y){return typeof y=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(y)},a=n.__arabicParser__.isArabicEndLetter=function(y){return s(y)&&o(y)&&e[y.charCodeAt(0)].length<=2},l=n.__arabicParser__.isArabicAlfLetter=function(y){return s(y)&&i.indexOf(y.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(y){return s(y)&&o(y)&&e[y.charCodeAt(0)].length>=1};var u=n.__arabicParser__.arabicLetterHasFinalForm=function(y){return s(y)&&o(y)&&e[y.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(y){return s(y)&&o(y)&&e[y.charCodeAt(0)].length>=3};var c=n.__arabicParser__.arabicLetterHasMedialForm=function(y){return s(y)&&o(y)&&e[y.charCodeAt(0)].length==4},h=n.__arabicParser__.resolveLigatures=function(y){var w=0,g=t,x="",_=0;for(w=0;w<y.length;w+=1)g[y.charCodeAt(w)]!==void 0?(_++,typeof(g=g[y.charCodeAt(w)])=="number"&&(x+=String.fromCharCode(g),g=t,_=0),w===y.length-1&&(g=t,x+=y.charAt(w-(_-1)),w-=_-1,_=0)):(g=t,x+=y.charAt(w-_),w-=_,_=0);return x};n.__arabicParser__.isArabicDiacritic=function(y){return y!==void 0&&r[y.charCodeAt(0)]!==void 0};var f=n.__arabicParser__.getCorrectForm=function(y,w,g){return s(y)?o(y)===!1?-1:!u(y)||!s(w)&&!s(g)||!s(g)&&a(w)||a(y)&&!s(w)||a(y)&&l(w)||a(y)&&a(w)?0:c(y)&&s(w)&&!a(w)&&s(g)&&u(g)?3:a(y)||!s(g)?1:2:-1},d=function(y){var w=0,g=0,x=0,_="",E="",C="",I=(y=y||"").split("\\s+"),R=[];for(w=0;w<I.length;w+=1){for(R.push(""),g=0;g<I[w].length;g+=1)_=I[w][g],E=I[w][g-1],C=I[w][g+1],s(_)?(x=f(_,E,C),R[w]+=x!==-1?String.fromCharCode(e[_.charCodeAt(0)][x]):_):R[w]+=_;R[w]=h(R[w])}return R.join(" ")},v=n.__arabicParser__.processArabic=n.processArabic=function(){var y,w=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,g=[];if(Array.isArray(w)){var x=0;for(g=[],x=0;x<w.length;x+=1)Array.isArray(w[x])?g.push([d(w[x][0]),w[x][1],w[x][2]]):g.push([d(w[x])]);y=g}else y=d(w);return typeof arguments[0]=="string"?y:(arguments[0].text=y,arguments[0])};n.events.push(["preProcessText",v])}(dn.API),dn.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(a){t=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var o=[];Object.defineProperty(this,"childNodes",{get:function(){return o},set:function(a){o=a}});var s={};Object.defineProperty(this,"style",{get:function(){return s},set:function(a){s=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var i;if((t=t||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(dn.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(y){l=y}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(y){u=y}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(y){c=y}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(y){h=y}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(y){f=y}});var d=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return d},set:function(y){d=y}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(y){v=y}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},n.getTextDimensions=function(l,u){r.call(this);var c=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),f=u.scaleFactor||this.internal.scaleFactor,d=0,v=0,y=0,w=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var g=u.maxWidth;g>0?typeof l=="string"?l=this.splitTextToSize(l,g):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(_,E){return _.concat(w.splitTextToSize(E,g))},[])):l=Array.isArray(l)?l:[l];for(var x=0;x<l.length;x++)d<(y=this.getStringUnitWidth(l[x],{font:h})*c)&&(d=y);return d!==0&&(v=l.length),{w:d/=f,h:Math.max((v*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/f,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var s=n.cell=function(){var l;l=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,f=this.internal.__cell__.tableHeaderRow,d=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,d&&f&&(this.printHeaderRow(l.lineNumber,!0),l.y+=f[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,t===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-c,l.y+c,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+c,{align:"center",baseline:"top",maxWidth:l.width-c-c}):this.text(l.text,l.x+c,l.y+c,{align:"left",baseline:"top",maxWidth:l.width-c-c})),this.internal.__cell__.lastCell=l,this};n.table=function(l,u,c,h,f){if(r.call(this),!c)throw new Error("No data for PDF table.");var d,v,y,w,g=[],x=[],_=[],E={},C={},I=[],R=[],L=(f=f||{}).autoSize||!1,k=f.printHeaders!==!1,D=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,N=f.margins||Object.assign({width:this.getPageWidth()},e),B=typeof f.padding=="number"?f.padding:3,G=f.headerBackgroundColor||"#c8c8c8",V=f.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=k,this.internal.__cell__.margins=N,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=G,this.internal.__cell__.headerTextColor=V,this.setFontSize(D),h==null)x=g=Object.keys(c[0]),_=g.map(function(){return"left"});else if(Array.isArray(h)&&Fr(h[0])==="object")for(g=h.map(function(Z){return Z.name}),x=h.map(function(Z){return Z.prompt||Z.name||""}),_=h.map(function(Z){return Z.align||"left"}),d=0;d<h.length;d+=1)C[h[d].name]=h[d].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(x=g=h,_=g.map(function(){return"left"}));if(L||Array.isArray(h)&&typeof h[0]=="string")for(d=0;d<g.length;d+=1){for(E[w=g[d]]=c.map(function(Z){return Z[w]}),this.setFont(void 0,"bold"),I.push(this.getTextDimensions(x[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=E[w],this.setFont(void 0,"normal"),y=0;y<v.length;y+=1)I.push(this.getTextDimensions(v[y],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);C[w]=Math.max.apply(null,I)+B+B,I=[]}if(k){var $={};for(d=0;d<g.length;d+=1)$[g[d]]={},$[g[d]].text=x[d],$[g[d]].align=_[d];var J=a.call(this,$,C);R=g.map(function(Z){return new o(l,u,C[Z],J,$[Z].text,void 0,$[Z].align)}),this.setTableHeaderRow(R),this.printHeaderRow(1,!1)}var le=h.reduce(function(Z,oe){return Z[oe.name]=oe.align,Z},{});for(d=0;d<c.length;d+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:d,data:c[d]},this);var H=a.call(this,c[d],C);for(y=0;y<g.length;y+=1){var q=c[d][g[y]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:d,col:y,data:q},this),s.call(this,new o(l,u,C[g[y]],H,q,d+2,le[g[y]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var c=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(l).map(function(d){var v=l[d];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,u[d]-c-c)},this).map(function(d){return this.getLineHeightFactor()*d.length*h/f+c+c},this).reduce(function(d,v){return Math.max(d,v)},0)};n.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},n.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],d=0;d<this.internal.__cell__.tableHeaderRow.length;d+=1){c=this.internal.__cell__.tableHeaderRow[d].clone(),u&&(c.y=this.internal.__cell__.margins.top||0,f.push(c)),c.lineNumber=l;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),s.call(this,c),this.setTextColor(v)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),t=!1}}(dn.API);var fD={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},dD=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],tE=hD(dD),pD=[100,200,300,400,500,600,700,800,900],ZY=hD(pD);function nE(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(o){return fD[o=o||"normal"]?o:"normal"}(n.style),r=function(o){if(!o)return 400;if(typeof o=="number")return o>=100&&o<=900&&o%100==0?o:400;if(/^\d00$/.test(o))return parseInt(o);switch(o){case"bold":return 700;case"normal":default:return 400}}(n.weight),i=function(o){return typeof tE[o=o||"normal"]=="number"?o:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:i,src:n.src||[],ref:n.ref||{name:e,style:[i,t,r].join(" ")}}}function HL(n,e,t,r){var i;for(i=t;i>=0&&i<e.length;i+=r)if(n[e[i]])return n[e[i]];for(i=t;i>=0&&i<e.length;i-=r)if(n[e[i]])return n[e[i]]}var KY={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},GL={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function VL(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function JY(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",i=Object.assign({},KY,t.genericFontFamilies||{}),o=null,s=null,a=0;a<e.length;++a)if(i[(o=nE(e[a])).family]&&(o.family=i[o.family]),n.hasOwnProperty(o.family)){s=n[o.family];break}if(!(s=s||n[r]))throw new Error("Could not find a font-family for the rule '"+VL(o)+"' and default family '"+r+"'.");if(s=function(l,u){if(u[l])return u[l];var c=tE[l],h=c<=tE.normal?-1:1,f=HL(u,dD,c,h);if(!f)throw new Error("Could not find a matching font-stretch value for "+l);return f}(o.stretch,s),s=function(l,u){if(u[l])return u[l];for(var c=fD[l],h=0;h<c.length;++h)if(u[c[h]])return u[c[h]];throw new Error("Could not find a matching font-style for "+l)}(o.style,s),!(s=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var c=ZY[l],h=HL(u,pD,c,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(o.weight,s)))throw new Error("Failed to resolve a font for the rule '"+VL(o)+"'.");return s}function WL(n){return n.trimLeft()}function QY(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function eZ(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var w2,jL,$L,Sb=["times"];(function(n){var e,t,r,i,o,s,a,l,u,c=function(F){return F=F||{},this.isStrokeTransparent=F.isStrokeTransparent||!1,this.strokeOpacity=F.strokeOpacity||1,this.strokeStyle=F.strokeStyle||"#000000",this.fillStyle=F.fillStyle||"#000000",this.isFillTransparent=F.isFillTransparent||!1,this.fillOpacity=F.fillOpacity||1,this.font=F.font||"10px sans-serif",this.textBaseline=F.textBaseline||"alphabetic",this.textAlign=F.textAlign||"left",this.lineWidth=F.lineWidth||1,this.lineJoin=F.lineJoin||"miter",this.lineCap=F.lineCap||"butt",this.path=F.path||[],this.transform=F.transform!==void 0?F.transform.clone():new l,this.globalCompositeOperation=F.globalCompositeOperation||"normal",this.globalAlpha=F.globalAlpha||1,this.clip_path=F.clip_path||[],this.currentPoint=F.currentPoint||new s,this.miterLimit=F.miterLimit||10,this.lastPoint=F.lastPoint||new s,this.lineDashOffset=F.lineDashOffset||0,this.lineDash=F.lineDash||[],this.margin=F.margin||[0,0,0,0],this.prevPageLastElemOffset=F.prevPageLastElemOffset||0,this.ignoreClearRect=typeof F.ignoreClearRect!="boolean"||F.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,s=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new c}]);var h=function(F){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var j=F;Object.defineProperty(this,"pdf",{get:function(){return j}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(Ae){Q=Boolean(Ae)}});var se=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return se},set:function(Ae){se=Boolean(Ae)}});var fe=0;Object.defineProperty(this,"posX",{get:function(){return fe},set:function(Ae){isNaN(Ae)||(fe=Ae)}});var we=0;Object.defineProperty(this,"posY",{get:function(){return we},set:function(Ae){isNaN(Ae)||(we=Ae)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(Ae){var ie;typeof Ae=="number"?ie=[Ae,Ae,Ae,Ae]:((ie=new Array(4))[0]=Ae[0],ie[1]=Ae.length>=2?Ae[1]:ie[0],ie[2]=Ae.length>=3?Ae[2]:ie[0],ie[3]=Ae.length>=4?Ae[3]:ie[1]),u.margin=ie}});var Ee=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ee},set:function(Ae){Ee=Ae}});var Ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ce},set:function(Ae){Ce=Ae}});var Ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ge},set:function(Ae){Ge=Ae}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(Ae){Ae instanceof c&&(u=Ae)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(Ae){u.path=Ae}});var Ie=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ie},set:function(Ae){Ie=Ae}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Ae){var ie;ie=f(Ae),this.ctx.fillStyle=ie.style,this.ctx.isFillTransparent=ie.a===0,this.ctx.fillOpacity=ie.a,this.pdf.setFillColor(ie.r,ie.g,ie.b,{a:ie.a}),this.pdf.setTextColor(ie.r,ie.g,ie.b,{a:ie.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Ae){var ie=f(Ae);this.ctx.strokeStyle=ie.style,this.ctx.isStrokeTransparent=ie.a===0,this.ctx.strokeOpacity=ie.a,ie.a===0?this.pdf.setDrawColor(255,255,255):(ie.a,this.pdf.setDrawColor(ie.r,ie.g,ie.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Ae){["butt","round","square"].indexOf(Ae)!==-1&&(this.ctx.lineCap=Ae,this.pdf.setLineCap(Ae))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Ae){isNaN(Ae)||(this.ctx.lineWidth=Ae,this.pdf.setLineWidth(Ae))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Ae){["bevel","round","miter"].indexOf(Ae)!==-1&&(this.ctx.lineJoin=Ae,this.pdf.setLineJoin(Ae))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Ae){isNaN(Ae)||(this.ctx.miterLimit=Ae,this.pdf.setMiterLimit(Ae))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Ae){this.ctx.textBaseline=Ae}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Ae){["right","end","center","left","start"].indexOf(Ae)!==-1&&(this.ctx.textAlign=Ae)}});var he=null;function ke(Ae,ie){if(he===null){var Ke=function(Ve){var We=[];return Object.keys(Ve).forEach(function(nt){Ve[nt].forEach(function(yt){var _t=null;switch(yt){case"bold":_t={family:nt,weight:"bold"};break;case"italic":_t={family:nt,style:"italic"};break;case"bolditalic":_t={family:nt,weight:"bold",style:"italic"};break;case"":case"normal":_t={family:nt}}_t!==null&&(_t.ref={name:nt,style:yt},We.push(_t))})}),We}(Ae.getFontList());he=function(Ve){for(var We={},nt=0;nt<Ve.length;++nt){var yt=nE(Ve[nt]),_t=yt.family,de=yt.stretch,ee=yt.style,Fe=yt.weight;We[_t]=We[_t]||{},We[_t][de]=We[_t][de]||{},We[_t][de][ee]=We[_t][de][ee]||{},We[_t][de][ee][Fe]=yt}return We}(Ke.concat(ie))}return he}var Ne=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ne},set:function(Ae){he=null,Ne=Ae}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Ae){var ie;if(this.ctx.font=Ae,(ie=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Ae))!==null){var Ke=ie[1];ie[2];var Ve=ie[3],We=ie[4];ie[5];var nt=ie[6],yt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(We)[2];We=Math.floor(yt==="px"?parseFloat(We)*this.pdf.internal.scaleFactor:yt==="em"?parseFloat(We)*this.pdf.getFontSize():parseFloat(We)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(We);var _t=function(xt){var ht,Pe,Wt=[],Ct=xt.trim();if(Ct==="")return Sb;if(Ct in GL)return[GL[Ct]];for(;Ct!=="";){switch(Pe=null,ht=(Ct=WL(Ct)).charAt(0)){case'"':case"'":Pe=QY(Ct.substring(1),ht);break;default:Pe=eZ(Ct)}if(Pe===null||(Wt.push(Pe[0]),(Ct=WL(Pe[1]))!==""&&Ct.charAt(0)!==","))return Sb;Ct=Ct.replace(/^,/,"")}return Wt}(nt);if(this.fontFaces){var de=JY(ke(this.pdf,this.fontFaces),_t.map(function(xt){return{family:xt,stretch:"normal",weight:Ve,style:Ke}}));this.pdf.setFont(de.ref.name,de.ref.style)}else{var ee="";(Ve==="bold"||parseInt(Ve,10)>=700||Ke==="bold")&&(ee="bold"),Ke==="italic"&&(ee+="italic"),ee.length===0&&(ee="normal");for(var Fe="",ot={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},et=0;et<_t.length;et++){if(this.pdf.internal.getFont(_t[et],ee,{noFallback:!0,disableWarning:!0})!==void 0){Fe=_t[et];break}if(ee==="bolditalic"&&this.pdf.internal.getFont(_t[et],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Fe=_t[et],ee="bold";else if(this.pdf.internal.getFont(_t[et],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Fe=_t[et],ee="normal";break}}if(Fe===""){for(var ft=0;ft<_t.length;ft++)if(ot[_t[ft]]){Fe=ot[_t[ft]];break}}Fe=Fe===""?"Times":Fe,this.pdf.setFont(Fe,ee)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Ae){this.ctx.globalCompositeOperation=Ae}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Ae){this.ctx.globalAlpha=Ae}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Ae){this.ctx.lineDashOffset=Ae,oe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Ae){this.ctx.lineDash=Ae,oe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Ae){this.ctx.ignoreClearRect=Boolean(Ae)}})};h.prototype.setLineDash=function(F){this.lineDash=F},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){E.call(this,"fill",!1)},h.prototype.stroke=function(){E.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(F,j){if(isNaN(F)||isNaN(j))throw Gr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new s(F,j));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new s(F,j)},h.prototype.closePath=function(){var F=new s(0,0),j=0;for(j=this.path.length-1;j!==-1;j--)if(this.path[j].type==="begin"&&Fr(this.path[j+1])==="object"&&typeof this.path[j+1].x=="number"){F=new s(this.path[j+1].x,this.path[j+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new s(F.x,F.y)},h.prototype.lineTo=function(F,j){if(isNaN(F)||isNaN(j))throw Gr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new s(F,j));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new s(Q.x,Q.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),E.call(this,null,!0)},h.prototype.quadraticCurveTo=function(F,j,Q,se){if(isNaN(Q)||isNaN(se)||isNaN(F)||isNaN(j))throw Gr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var fe=this.ctx.transform.applyToPoint(new s(Q,se)),we=this.ctx.transform.applyToPoint(new s(F,j));this.path.push({type:"qct",x1:we.x,y1:we.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new s(fe.x,fe.y)},h.prototype.bezierCurveTo=function(F,j,Q,se,fe,we){if(isNaN(fe)||isNaN(we)||isNaN(F)||isNaN(j)||isNaN(Q)||isNaN(se))throw Gr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ee=this.ctx.transform.applyToPoint(new s(fe,we)),Ce=this.ctx.transform.applyToPoint(new s(F,j)),Ge=this.ctx.transform.applyToPoint(new s(Q,se));this.path.push({type:"bct",x1:Ce.x,y1:Ce.y,x2:Ge.x,y2:Ge.y,x:Ee.x,y:Ee.y}),this.ctx.lastPoint=new s(Ee.x,Ee.y)},h.prototype.arc=function(F,j,Q,se,fe,we){if(isNaN(F)||isNaN(j)||isNaN(Q)||isNaN(se)||isNaN(fe))throw Gr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(we=Boolean(we),!this.ctx.transform.isIdentity){var Ee=this.ctx.transform.applyToPoint(new s(F,j));F=Ee.x,j=Ee.y;var Ce=this.ctx.transform.applyToPoint(new s(0,Q)),Ge=this.ctx.transform.applyToPoint(new s(0,0));Q=Math.sqrt(Math.pow(Ce.x-Ge.x,2)+Math.pow(Ce.y-Ge.y,2))}Math.abs(fe-se)>=2*Math.PI&&(se=0,fe=2*Math.PI),this.path.push({type:"arc",x:F,y:j,radius:Q,startAngle:se,endAngle:fe,counterclockwise:we})},h.prototype.arcTo=function(F,j,Q,se,fe){throw new Error("arcTo not implemented.")},h.prototype.rect=function(F,j,Q,se){if(isNaN(F)||isNaN(j)||isNaN(Q)||isNaN(se))throw Gr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(F,j),this.lineTo(F+Q,j),this.lineTo(F+Q,j+se),this.lineTo(F,j+se),this.lineTo(F,j),this.lineTo(F+Q,j),this.lineTo(F,j)},h.prototype.fillRect=function(F,j,Q,se){if(isNaN(F)||isNaN(j)||isNaN(Q)||isNaN(se))throw Gr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!d.call(this)){var fe={};this.lineCap!=="butt"&&(fe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(fe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(F,j,Q,se),this.fill(),fe.hasOwnProperty("lineCap")&&(this.lineCap=fe.lineCap),fe.hasOwnProperty("lineJoin")&&(this.lineJoin=fe.lineJoin)}},h.prototype.strokeRect=function(F,j,Q,se){if(isNaN(F)||isNaN(j)||isNaN(Q)||isNaN(se))throw Gr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(F,j,Q,se),this.stroke())},h.prototype.clearRect=function(F,j,Q,se){if(isNaN(F)||isNaN(j)||isNaN(Q)||isNaN(se))throw Gr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(F,j,Q,se))},h.prototype.save=function(F){F=typeof F!="boolean"||F;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(j),F){this.ctx.fontSize=this.pdf.internal.getFontSize();var se=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=se}},h.prototype.restore=function(F){F=typeof F!="boolean"||F;for(var j=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(j),F&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(F){var j,Q,se,fe;if(F.isCanvasGradient===!0&&(F=F.getColor()),!F)return{r:0,g:0,b:0,a:0,style:F};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(F))j=0,Q=0,se=0,fe=0;else{var we=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(F);if(we!==null)j=parseInt(we[1]),Q=parseInt(we[2]),se=parseInt(we[3]),fe=1;else if((we=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(F))!==null)j=parseInt(we[1]),Q=parseInt(we[2]),se=parseInt(we[3]),fe=parseFloat(we[4]);else{if(fe=1,typeof F=="string"&&F.charAt(0)!=="#"){var Ee=new oD(F);F=Ee.ok?Ee.toHex():"#000000"}F.length===4?(j=F.substring(1,2),j+=j,Q=F.substring(2,3),Q+=Q,se=F.substring(3,4),se+=se):(j=F.substring(1,3),Q=F.substring(3,5),se=F.substring(5,7)),j=parseInt(j,16),Q=parseInt(Q,16),se=parseInt(se,16)}}return{r:j,g:Q,b:se,a:fe,style:F}},d=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(F,j,Q,se){if(isNaN(j)||isNaN(Q)||typeof F!="string")throw Gr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(se=isNaN(se)?void 0:se,!d.call(this)){var fe=H(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;B.call(this,{text:F,x:j,y:Q,scale:we,angle:fe,align:this.textAlign,maxWidth:se})}},h.prototype.strokeText=function(F,j,Q,se){if(isNaN(j)||isNaN(Q)||typeof F!="string")throw Gr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){se=isNaN(se)?void 0:se;var fe=H(this.ctx.transform.rotation),we=this.ctx.transform.scaleX;B.call(this,{text:F,x:j,y:Q,scale:we,renderingMode:"stroke",angle:fe,align:this.textAlign,maxWidth:se})}},h.prototype.measureText=function(F){if(typeof F!="string")throw Gr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var j=this.pdf,Q=this.pdf.internal.scaleFactor,se=j.internal.getFontSize(),fe=j.getStringUnitWidth(F)*se/j.internal.scaleFactor,we=function(Ee){var Ce=(Ee=Ee||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ce}}),this};return new we({width:fe*=Math.round(96*Q/72*1e4)/1e4})},h.prototype.scale=function(F,j){if(isNaN(F)||isNaN(j))throw Gr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new l(F,0,0,j,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},h.prototype.rotate=function(F){if(isNaN(F))throw Gr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var j=new l(Math.cos(F),Math.sin(F),-Math.sin(F),Math.cos(F),0,0);this.ctx.transform=this.ctx.transform.multiply(j)},h.prototype.translate=function(F,j){if(isNaN(F)||isNaN(j))throw Gr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new l(1,0,0,1,F,j);this.ctx.transform=this.ctx.transform.multiply(Q)},h.prototype.transform=function(F,j,Q,se,fe,we){if(isNaN(F)||isNaN(j)||isNaN(Q)||isNaN(se)||isNaN(fe)||isNaN(we))throw Gr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ee=new l(F,j,Q,se,fe,we);this.ctx.transform=this.ctx.transform.multiply(Ee)},h.prototype.setTransform=function(F,j,Q,se,fe,we){F=isNaN(F)?1:F,j=isNaN(j)?0:j,Q=isNaN(Q)?0:Q,se=isNaN(se)?1:se,fe=isNaN(fe)?0:fe,we=isNaN(we)?0:we,this.ctx.transform=new l(F,j,Q,se,fe,we)};var y=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(F,j,Q,se,fe,we,Ee,Ce,Ge){var Ie=this.pdf.getImageProperties(F),he=1,ke=1,Ne=1,Ae=1;se!==void 0&&Ce!==void 0&&(Ne=Ce/se,Ae=Ge/fe,he=Ie.width/se*Ce/se,ke=Ie.height/fe*Ge/fe),we===void 0&&(we=j,Ee=Q,j=0,Q=0),se!==void 0&&Ce===void 0&&(Ce=se,Ge=fe),se===void 0&&Ce===void 0&&(Ce=Ie.width,Ge=Ie.height);for(var ie,Ke=this.ctx.transform.decompose(),Ve=H(Ke.rotate.shx),We=new l,nt=(We=(We=(We=We.multiply(Ke.translate)).multiply(Ke.skew)).multiply(Ke.scale)).applyToRectangle(new a(we-j*Ne,Ee-Q*Ae,se*he,fe*ke)),yt=w.call(this,nt),_t=[],de=0;de<yt.length;de+=1)_t.indexOf(yt[de])===-1&&_t.push(yt[de]);if(_(_t),this.autoPaging)for(var ee=_t[0],Fe=_t[_t.length-1],ot=ee;ot<Fe+1;ot++){this.pdf.setPage(ot);var et=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ft=ot===1?this.posY+this.margin[0]:this.margin[0],xt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Pe=ot===1?0:xt+(ot-2)*ht;if(this.ctx.clip_path.length!==0){var Wt=this.path;ie=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(ie,this.posX+this.margin[3],-Pe+ft+this.ctx.prevPageLastElemOffset),C.call(this,"fill",!0),this.path=Wt}var Ct=JSON.parse(JSON.stringify(nt));Ct=x([Ct],this.posX+this.margin[3],-Pe+ft+this.ctx.prevPageLastElemOffset)[0];var Nt=(ot>ee||ot<Fe)&&y.call(this);Nt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],et,ht,null).clip().discardPath()),this.pdf.addImage(F,"JPEG",Ct.x,Ct.y,Ct.w,Ct.h,null,null,Ve),Nt&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(F,"JPEG",nt.x,nt.y,nt.w,nt.h,null,null,Ve)};var w=function(F,j,Q){var se=[];j=j||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var fe=this.posY+this.ctx.prevPageLastElemOffset;switch(F.type){default:case"mt":case"lt":se.push(Math.floor((F.y+fe)/Q)+1);break;case"arc":se.push(Math.floor((F.y+fe-F.radius)/Q)+1),se.push(Math.floor((F.y+fe+F.radius)/Q)+1);break;case"qct":var we=q(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x,F.y);se.push(Math.floor((we.y+fe)/Q)+1),se.push(Math.floor((we.y+we.h+fe)/Q)+1);break;case"bct":var Ee=Z(this.ctx.lastPoint.x,this.ctx.lastPoint.y,F.x1,F.y1,F.x2,F.y2,F.x,F.y);se.push(Math.floor((Ee.y+fe)/Q)+1),se.push(Math.floor((Ee.y+Ee.h+fe)/Q)+1);break;case"rect":se.push(Math.floor((F.y+fe)/Q)+1),se.push(Math.floor((F.y+F.h+fe)/Q)+1)}for(var Ce=0;Ce<se.length;Ce+=1)for(;this.pdf.internal.getNumberOfPages()<se[Ce];)g.call(this);return se},g=function(){var F=this.fillStyle,j=this.strokeStyle,Q=this.font,se=this.lineCap,fe=this.lineWidth,we=this.lineJoin;this.pdf.addPage(),this.fillStyle=F,this.strokeStyle=j,this.font=Q,this.lineCap=se,this.lineWidth=fe,this.lineJoin=we},x=function(F,j,Q){for(var se=0;se<F.length;se++)switch(F[se].type){case"bct":F[se].x2+=j,F[se].y2+=Q;case"qct":F[se].x1+=j,F[se].y1+=Q;case"mt":case"lt":case"arc":default:F[se].x+=j,F[se].y+=Q}return F},_=function(F){return F.sort(function(j,Q){return j-Q})},E=function(F,j){for(var Q,se,fe=this.fillStyle,we=this.strokeStyle,Ee=this.lineCap,Ce=this.lineWidth,Ge=Math.abs(Ce*this.ctx.transform.scaleX),Ie=this.lineJoin,he=JSON.parse(JSON.stringify(this.path)),ke=JSON.parse(JSON.stringify(this.path)),Ne=[],Ae=0;Ae<ke.length;Ae++)if(ke[Ae].x!==void 0)for(var ie=w.call(this,ke[Ae]),Ke=0;Ke<ie.length;Ke+=1)Ne.indexOf(ie[Ke])===-1&&Ne.push(ie[Ke]);for(var Ve=0;Ve<Ne.length;Ve++)for(;this.pdf.internal.getNumberOfPages()<Ne[Ve];)g.call(this);if(_(Ne),this.autoPaging)for(var We=Ne[0],nt=Ne[Ne.length-1],yt=We;yt<nt+1;yt++){this.pdf.setPage(yt),this.fillStyle=fe,this.strokeStyle=we,this.lineCap=Ee,this.lineWidth=Ge,this.lineJoin=Ie;var _t=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],de=yt===1?this.posY+this.margin[0]:this.margin[0],ee=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],ot=yt===1?0:ee+(yt-2)*Fe;if(this.ctx.clip_path.length!==0){var et=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(Q,this.posX+this.margin[3],-ot+de+this.ctx.prevPageLastElemOffset),C.call(this,F,!0),this.path=et}if(se=JSON.parse(JSON.stringify(he)),this.path=x(se,this.posX+this.margin[3],-ot+de+this.ctx.prevPageLastElemOffset),j===!1||yt===0){var ft=(yt>We||yt<nt)&&y.call(this);ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],_t,Fe,null).clip().discardPath()),C.call(this,F,j),ft&&this.pdf.restoreGraphicsState()}this.lineWidth=Ce}else this.lineWidth=Ge,C.call(this,F,j),this.lineWidth=Ce;this.path=he},C=function(F,j){if((F!=="stroke"||j||!v.call(this))&&(F==="stroke"||j||!d.call(this))){for(var Q,se,fe=[],we=this.path,Ee=0;Ee<we.length;Ee++){var Ce=we[Ee];switch(Ce.type){case"begin":fe.push({begin:!0});break;case"close":fe.push({close:!0});break;case"mt":fe.push({start:Ce,deltas:[],abs:[]});break;case"lt":var Ge=fe.length;if(we[Ee-1]&&!isNaN(we[Ee-1].x)&&(Q=[Ce.x-we[Ee-1].x,Ce.y-we[Ee-1].y],Ge>0)){for(;Ge>=0;Ge--)if(fe[Ge-1].close!==!0&&fe[Ge-1].begin!==!0){fe[Ge-1].deltas.push(Q),fe[Ge-1].abs.push(Ce);break}}break;case"bct":Q=[Ce.x1-we[Ee-1].x,Ce.y1-we[Ee-1].y,Ce.x2-we[Ee-1].x,Ce.y2-we[Ee-1].y,Ce.x-we[Ee-1].x,Ce.y-we[Ee-1].y],fe[fe.length-1].deltas.push(Q);break;case"qct":var Ie=we[Ee-1].x+2/3*(Ce.x1-we[Ee-1].x),he=we[Ee-1].y+2/3*(Ce.y1-we[Ee-1].y),ke=Ce.x+2/3*(Ce.x1-Ce.x),Ne=Ce.y+2/3*(Ce.y1-Ce.y),Ae=Ce.x,ie=Ce.y;Q=[Ie-we[Ee-1].x,he-we[Ee-1].y,ke-we[Ee-1].x,Ne-we[Ee-1].y,Ae-we[Ee-1].x,ie-we[Ee-1].y],fe[fe.length-1].deltas.push(Q);break;case"arc":fe.push({deltas:[],abs:[],arc:!0}),Array.isArray(fe[fe.length-1].abs)&&fe[fe.length-1].abs.push(Ce)}}se=j?null:F==="stroke"?"stroke":"fill";for(var Ke=!1,Ve=0;Ve<fe.length;Ve++)if(fe[Ve].arc)for(var We=fe[Ve].abs,nt=0;nt<We.length;nt++){var yt=We[nt];yt.type==="arc"?L.call(this,yt.x,yt.y,yt.radius,yt.startAngle,yt.endAngle,yt.counterclockwise,void 0,j,!Ke):G.call(this,yt.x,yt.y),Ke=!0}else if(fe[Ve].close===!0)this.pdf.internal.out("h"),Ke=!1;else if(fe[Ve].begin!==!0){var _t=fe[Ve].start.x,de=fe[Ve].start.y;V.call(this,fe[Ve].deltas,_t,de),Ke=!0}se&&k.call(this,se),j&&D.call(this)}},I=function(F){var j=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=j*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return F-Q;case"top":return F+j-Q;case"hanging":return F+j-2*Q;case"middle":return F+j/2-Q;case"ideographic":return F;case"alphabetic":default:return F}},R=function(F){return F+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var F=function(){};return F.colorStops=[],F.addColorStop=function(j,Q){this.colorStops.push([j,Q])},F.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},F.isCanvasGradient=!0,F},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var L=function(F,j,Q,se,fe,we,Ee,Ce,Ge){for(var Ie=J.call(this,Q,se,fe,we),he=0;he<Ie.length;he++){var ke=Ie[he];he===0&&(Ge?N.call(this,ke.x1+F,ke.y1+j):G.call(this,ke.x1+F,ke.y1+j)),$.call(this,F,j,ke.x2,ke.y2,ke.x3,ke.y3,ke.x4,ke.y4)}Ce?D.call(this):k.call(this,Ee)},k=function(F){switch(F){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},N=function(F,j){this.pdf.internal.out(t(F)+" "+r(j)+" m")},B=function(F){var j;switch(F.align){case"right":case"end":j="right";break;case"center":j="center";break;case"left":case"start":default:j="left"}var Q=this.pdf.getTextDimensions(F.text),se=I.call(this,F.y),fe=R.call(this,se)-Q.h,we=this.ctx.transform.applyToPoint(new s(F.x,se)),Ee=this.ctx.transform.decompose(),Ce=new l;Ce=(Ce=(Ce=Ce.multiply(Ee.translate)).multiply(Ee.skew)).multiply(Ee.scale);for(var Ge,Ie,he,ke=this.ctx.transform.applyToRectangle(new a(F.x,se,Q.w,Q.h)),Ne=Ce.applyToRectangle(new a(F.x,fe,Q.w,Q.h)),Ae=w.call(this,Ne),ie=[],Ke=0;Ke<Ae.length;Ke+=1)ie.indexOf(Ae[Ke])===-1&&ie.push(Ae[Ke]);if(_(ie),this.autoPaging)for(var Ve=ie[0],We=ie[ie.length-1],nt=Ve;nt<We+1;nt++){this.pdf.setPage(nt);var yt=nt===1?this.posY+this.margin[0]:this.margin[0],_t=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],de=this.pdf.internal.pageSize.height-this.margin[2],ee=de-this.margin[0],Fe=this.pdf.internal.pageSize.width-this.margin[1],ot=Fe-this.margin[3],et=nt===1?0:_t+(nt-2)*ee;if(this.ctx.clip_path.length!==0){var ft=this.path;Ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=x(Ge,this.posX+this.margin[3],-1*et+yt),C.call(this,"fill",!0),this.path=ft}var xt=x([JSON.parse(JSON.stringify(Ne))],this.posX+this.margin[3],-et+yt+this.ctx.prevPageLastElemOffset)[0];F.scale>=.01&&(Ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ie*F.scale),he=this.lineWidth,this.lineWidth=he*F.scale);var ht=this.autoPaging!=="text";if(ht||xt.y+xt.h<=de){if(ht||xt.y>=yt&&xt.x<=Fe){var Pe=ht?F.text:this.pdf.splitTextToSize(F.text,F.maxWidth||Fe-xt.x)[0],Wt=x([JSON.parse(JSON.stringify(ke))],this.posX+this.margin[3],-et+yt+this.ctx.prevPageLastElemOffset)[0],Ct=ht&&(nt>Ve||nt<We)&&y.call(this);Ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,ee,null).clip().discardPath()),this.pdf.text(Pe,Wt.x,Wt.y,{angle:F.angle,align:j,renderingMode:F.renderingMode}),Ct&&this.pdf.restoreGraphicsState()}}else xt.y<de&&(this.ctx.prevPageLastElemOffset+=de-xt.y);F.scale>=.01&&(this.pdf.setFontSize(Ie),this.lineWidth=he)}else F.scale>=.01&&(Ie=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ie*F.scale),he=this.lineWidth,this.lineWidth=he*F.scale),this.pdf.text(F.text,we.x+this.posX,we.y+this.posY,{angle:F.angle,align:j,renderingMode:F.renderingMode,maxWidth:F.maxWidth}),F.scale>=.01&&(this.pdf.setFontSize(Ie),this.lineWidth=he)},G=function(F,j,Q,se){Q=Q||0,se=se||0,this.pdf.internal.out(t(F+Q)+" "+r(j+se)+" l")},V=function(F,j,Q){return this.pdf.lines(F,j,Q,null,null)},$=function(F,j,Q,se,fe,we,Ee,Ce){this.pdf.internal.out([e(i(Q+F)),e(o(se+j)),e(i(fe+F)),e(o(we+j)),e(i(Ee+F)),e(o(Ce+j)),"c"].join(" "))},J=function(F,j,Q,se){for(var fe=2*Math.PI,we=Math.PI/2;j>Q;)j-=fe;var Ee=Math.abs(Q-j);Ee<fe&&se&&(Ee=fe-Ee);for(var Ce=[],Ge=se?-1:1,Ie=j;Ee>1e-5;){var he=Ie+Ge*Math.min(Ee,we);Ce.push(le.call(this,F,Ie,he)),Ee-=Math.abs(he-Ie),Ie=he}return Ce},le=function(F,j,Q){var se=(Q-j)/2,fe=F*Math.cos(se),we=F*Math.sin(se),Ee=fe,Ce=-we,Ge=Ee*Ee+Ce*Ce,Ie=Ge+Ee*fe+Ce*we,he=4/3*(Math.sqrt(2*Ge*Ie)-Ie)/(Ee*we-Ce*fe),ke=Ee-he*Ce,Ne=Ce+he*Ee,Ae=ke,ie=-Ne,Ke=se+j,Ve=Math.cos(Ke),We=Math.sin(Ke);return{x1:F*Math.cos(j),y1:F*Math.sin(j),x2:ke*Ve-Ne*We,y2:ke*We+Ne*Ve,x3:Ae*Ve-ie*We,y3:Ae*We+ie*Ve,x4:F*Math.cos(Q),y4:F*Math.sin(Q)}},H=function(F){return 180*F/Math.PI},q=function(F,j,Q,se,fe,we){var Ee=F+.5*(Q-F),Ce=j+.5*(se-j),Ge=fe+.5*(Q-fe),Ie=we+.5*(se-we),he=Math.min(F,fe,Ee,Ge),ke=Math.max(F,fe,Ee,Ge),Ne=Math.min(j,we,Ce,Ie),Ae=Math.max(j,we,Ce,Ie);return new a(he,Ne,ke-he,Ae-Ne)},Z=function(F,j,Q,se,fe,we,Ee,Ce){var Ge,Ie,he,ke,Ne,Ae,ie,Ke,Ve,We,nt,yt,_t,de,ee=Q-F,Fe=se-j,ot=fe-Q,et=we-se,ft=Ee-fe,xt=Ce-we;for(Ie=0;Ie<41;Ie++)Ve=(ie=(he=F+(Ge=Ie/40)*ee)+Ge*((Ne=Q+Ge*ot)-he))+Ge*(Ne+Ge*(fe+Ge*ft-Ne)-ie),We=(Ke=(ke=j+Ge*Fe)+Ge*((Ae=se+Ge*et)-ke))+Ge*(Ae+Ge*(we+Ge*xt-Ae)-Ke),Ie==0?(nt=Ve,yt=We,_t=Ve,de=We):(nt=Math.min(nt,Ve),yt=Math.min(yt,We),_t=Math.max(_t,Ve),de=Math.max(de,We));return new a(Math.round(nt),Math.round(yt),Math.round(_t-nt),Math.round(de-yt))},oe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var F,j,Q=(F=this.ctx.lineDash,j=this.ctx.lineDashOffset,JSON.stringify({lineDash:F,lineDashOffset:j}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(dn.API),function(n){var e=function(o){var s,a,l,u,c,h,f,d,v,y;for(a=[],l=0,u=(o+=s="\0\0\0\0".slice(o.length%4||4)).length;u>l;l+=4)(c=(o.charCodeAt(l)<<24)+(o.charCodeAt(l+1)<<16)+(o.charCodeAt(l+2)<<8)+o.charCodeAt(l+3))!==0?(h=(c=((c=((c=((c=(c-(y=c%85))/85)-(v=c%85))/85)-(d=c%85))/85)-(f=c%85))/85)%85,a.push(h+33,f+33,d+33,v+33,y+33)):a.push(122);return function(w,g){for(var x=g;x>0;x--)w.pop()}(a,s.length),String.fromCharCode.apply(String,a)+"~>"},t=function(o){var s,a,l,u,c,h=String,f="length",d=255,v="charCodeAt",y="slice",w="replace";for(o[y](-2),o=o[y](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),l=[],u=0,c=(o+=s="uuuuu"[y](o[f]%5||5))[f];c>u;u+=5)a=52200625*(o[v](u)-33)+614125*(o[v](u+1)-33)+7225*(o[v](u+2)-33)+85*(o[v](u+3)-33)+(o[v](u+4)-33),l.push(d&a>>24,d&a>>16,d&a>>8,d&a);return function(g,x){for(var _=x;_>0;_--)g.pop()}(l,s[f]),h.fromCharCode.apply(h,l)},r=function(o){var s=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),s.test(o)===!1)return"";for(var a="",l=0;l<o.length;l+=2)a+=String.fromCharCode("0x"+(o[l]+o[l+1]));return a},i=function(o){for(var s=new Uint8Array(o.length),a=o.length;a--;)s[a]=o.charCodeAt(a);return o=(s=ZM(s)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};n.processDataByFilters=function(o,s){var a=0,l=o||"",u=[];for(typeof(s=s||[])=="string"&&(s=[s]),a=0;a<s.length;a+=1)switch(s[a]){case"ASCII85Decode":case"/ASCII85Decode":l=t(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[a]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(dn.API),function(n){n.loadFile=function(e,t,r){return function(i,o,s){o=o!==!1,s=typeof s=="function"?s:function(){};var a=void 0;try{a=function(l,u,c){var h=new XMLHttpRequest,f=0,d=function(v){var y=v.length,w=[],g=String.fromCharCode;for(f=0;f<y;f+=1)w.push(g(255&v.charCodeAt(f)));return w.join("")};if(h.open("GET",l,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?c(d(this.responseText)):c(void 0)}),h.send(null),u&&h.status===200)return d(h.responseText)}(i,o,s)}catch{}return a}(e,t,r)},n.loadImageFile=n.loadFile}(dn.API),function(n){function e(){return(Sn.html2canvas?Promise.resolve(Sn.html2canvas):Vx(()=>import("./html2canvas.esm-0a33ed42.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load html2canvas: "+s))}).then(function(s){return s.default?s.default:s})}function t(){return(Sn.DOMPurify?Promise.resolve(Sn.DOMPurify):Vx(()=>import("./purify.es-7857af48.js"),[])).catch(function(s){return Promise.reject(new Error("Could not load dompurify: "+s))}).then(function(s){return s.default?s.default:s})}var r=function(s){var a=Fr(s);return a==="undefined"?"undefined":a==="string"||s instanceof String?"string":a==="number"||s instanceof Number?"number":a==="function"||s instanceof Function?"function":s&&s.constructor===Array?"array":s&&s.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(s,a){var l=document.createElement(s);for(var u in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[u]=a.style[u];return l},o=function s(a){var l=Object.assign(s.convert(Promise.resolve()),JSON.parse(JSON.stringify(s.template))),u=s.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,s,1,[s])).set(a)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(s,a){return s.__proto__=a||o.prototype,s},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(s,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(s)){case"string":return this.then(t).then(function(l){return this.set({src:i("div",{innerHTML:s,dompurify:l})})});case"element":return this.set({src:s});case"canvas":return this.set({canvas:s});case"img":return this.set({img:s});default:return this.error("Unknown source type.")}})},o.prototype.to=function(s){switch(s){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var s={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(u,c){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),f=u.firstChild;f;f=f.nextSibling)c!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||h.appendChild(l(f,c));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(s.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:s}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var s=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(s).then(e).then(function(a){var l=this.opt.jsPDF,u=this.opt.fontFaces,c=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:c,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var d=u[f],v=d.src.find(function(y){return y.format==="truetype"});v&&l.addFont(v.url,d.ref.name,d.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),a(this.prop.container,h)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var s=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=s})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(s,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(s,a):this.outputPdf(s,a)},o.prototype.outputPdf=function(s,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(s,a)})},o.prototype.outputImg=function(s){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(s){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+s+'" is not supported.'}})},o.prototype.save=function(s){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(s?{filename:s}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(s){if(r(s)!=="object")return this;var a=Object.keys(s||{}).map(function(l){if(l in o.template.prop)return function(){this.prop[l]=s[l]};switch(l){case"margin":return this.setMargin.bind(this,s.margin);case"jsPDF":return function(){return this.opt.jsPDF=s.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,s.pageSize);default:return function(){this.opt[l]=s[l]}}},this);return this.then(function(){return this.thenList(a)})},o.prototype.get=function(s,a){return this.then(function(){var l=s in o.template.prop?this.prop[s]:this.opt[s];return a?a(l):l})},o.prototype.setMargin=function(s){return this.then(function(){switch(r(s)){case"number":s=[s,s,s,s];case"array":if(s.length===2&&(s=[s[0],s[1],s[0],s[1]]),s.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=s}).then(this.setPageSize)},o.prototype.setPageSize=function(s){function a(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(s=s||dn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(s.inner={width:s.width-this.opt.margin[1]-this.opt.margin[3],height:s.height-this.opt.margin[0]-this.opt.margin[2]},s.inner.px={width:a(s.inner.width,s.k),height:a(s.inner.height,s.k)},s.inner.ratio=s.inner.height/s.inner.width),this.prop.pageSize=s})},o.prototype.setProgress=function(s,a,l,u){return s!=null&&(this.progress.val=s),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(s,a,l,u){return this.setProgress(s?this.progress.val+s:null,a||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},o.prototype.then=function(s,a){var l=this;return this.thenCore(s,a,function(u,c){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,u),h}).then(u,c).then(function(h){return l.updateProgress(1),h})})},o.prototype.thenCore=function(s,a,l){l=l||Promise.prototype.then,s&&(s=s.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:o.convert(Object.assign({},this),Promise.prototype),c=l.call(u,s,a);return o.convert(c,this.__proto__)},o.prototype.thenExternal=function(s,a){return Promise.prototype.then.call(this,s,a)},o.prototype.thenList=function(s){var a=this;return s.forEach(function(l){a=a.thenCore(l)}),a},o.prototype.catch=function(s){s&&(s=s.bind(this));var a=Promise.prototype.catch.call(this,s);return o.convert(a,this)},o.prototype.catchExternal=function(s){return Promise.prototype.catch.call(this,s)},o.prototype.error=function(s){return this.then(function(){throw new Error(s)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,dn.getPageSize=function(s,a,l){if(Fr(s)==="object"){var u=s;s=u.orientation,a=u.unit||a,l=u.format||l}a=a||"mm",l=l||"a4",s=(""+(s||"P")).toLowerCase();var c,h=(""+l).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":c=1;break;case"mm":c=72/25.4;break;case"cm":c=72/2.54;break;case"in":c=72;break;case"px":c=.75;break;case"pc":case"em":c=12;break;case"ex":c=6;break;default:throw"Invalid unit: "+a}var d,v=0,y=0;if(f.hasOwnProperty(h))v=f[h][1]/c,y=f[h][0]/c;else try{v=l[1],y=l[0]}catch{throw new Error("Invalid format: "+l)}if(s==="p"||s==="portrait")s="p",y>v&&(d=y,y=v,v=d);else{if(s!=="l"&&s!=="landscape")throw"Invalid orientation: "+s;s="l",v>y&&(d=y,y=v,v=d)}return{width:y,height:v,unit:a,k:c,orientation:s}},n.html=function(s,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(nE):null;var l=new o(a);return a.worker?l:l.from(s).doCallback()}}(dn.API),dn.API.addJS=function(n){return $L=n,this.internal.events.subscribe("postPutResources",function(){w2=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(w2+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),jL=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+$L+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){w2!==void 0&&jL!==void 0&&this.internal.out("/Names <</JavaScript "+w2+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),o=0;o<i.length;o++){var s=i[o],a=r.exec(s);if(a!=null){var l=a[1];t.internal.newObjectDeferredBegin(l,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,c=[];for(o=0;o<u;o++){var h=t.internal.newObject();c.push(h);var f=t.internal.getPageInfo(o+1);t.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var d=t.internal.newObject();for(t.internal.write("<< /Names [ "),o=0;o<c.length;o++)t.internal.write("(page_"+(o+1)+")"+c[o]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+d+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,i,o){var s={title:i,options:o,children:[]};return r==null&&(r=this.root),r.children.push(s),s},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,o=0;o<r.children.length;o++){var s=r.children[o];this.objStart(s),this.line("/Title "+this.makeString(s.title)),this.line("/Parent "+this.makeRef(r)),o>0&&this.line("/Prev "+this.makeRef(r.children[o-1])),o<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[o+1])),s.children.length>0&&(this.line("/First "+this.makeRef(s.children[0])),this.line("/Last "+this.makeRef(s.children[s.children.length-1])));var a=this.count=this.count_r({count:0},s);if(a>0&&this.line("/Count "+a),s.options&&s.options.pageNumber){var l=t.internal.getPageInfo(s.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,i){for(var o=0;o<i.children.length;o++)r.count++,this.count_r(r,i.children[o]);return r.count}}])}(dn.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,i,o,s,a){var l,u=this.decode.DCT_DECODE,c=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(l=function(h){for(var f,d=256*h.charCodeAt(4)+h.charCodeAt(5),v=h.length,y={width:0,height:0,numcomponents:1},w=4;w<v;w+=2){if(w+=d,e.indexOf(h.charCodeAt(w+1))!==-1){f=256*h.charCodeAt(w+5)+h.charCodeAt(w+6),y={width:256*h.charCodeAt(w+7)+h.charCodeAt(w+8),height:f,numcomponents:h.charCodeAt(w+9)};break}d=256*h.charCodeAt(w+2)+h.charCodeAt(w+3)}return y}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:t,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return c}}(dn.API);var im,S2,qL,XL,YL,tZ=function(){var n,e,t;function r(o){var s,a,l,u,c,h,f,d,v,y,w,g,x,_;for(this.data=o,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(s=this.readUInt32(),v=function(){var E,C;for(C=[],E=0;E<4;++E)C.push(String.fromCharCode(this.data[this.pos++]));return C}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(s);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},c=this.readUInt16(),u=this.readUInt16()||100,h.delay=1e3*c/u,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,s-=4),o=(h!=null?h.data:void 0)||this.imgData,g=0;0<=s?g<s:g>s;0<=s?++g:--g)o.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(s),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((y=l-this.transparency.indexed.length)>0)for(x=0;0<=y?x<y:x>y;0<=y?++x:--x)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(s)[0];break;case 2:this.transparency.rgb=this.read(s)}break;case"tEXt":f=(w=this.read(s)).indexOf(0),d=String.fromCharCode.apply(String,w.slice(0,f)),this.text[d]=String.fromCharCode.apply(String,w.slice(f+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=s}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(o){var s,a;for(a=[],s=0;0<=o?s<o:s>o;0<=o?++s:--s)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(o){var s=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*s),l=0,u=this;if(o==null&&(o=this.imgData),o.length===0)return new Uint8Array(0);function c(h,f,d,v){var y,w,g,x,_,E,C,I,R,L,k,D,N,B,G,V,$,J,le,H,q,Z=Math.ceil((u.width-h)/d),oe=Math.ceil((u.height-f)/v),F=u.width==Z&&u.height==oe;for(B=s*Z,D=F?a:new Uint8Array(B*oe),E=o.length,N=0,w=0;N<oe&&l<E;){switch(o[l++]){case 0:for(x=$=0;$<B;x=$+=1)D[w++]=o[l++];break;case 1:for(x=J=0;J<B;x=J+=1)y=o[l++],_=x<s?0:D[w-s],D[w++]=(y+_)%256;break;case 2:for(x=le=0;le<B;x=le+=1)y=o[l++],g=(x-x%s)/s,G=N&&D[(N-1)*B+g*s+x%s],D[w++]=(G+y)%256;break;case 3:for(x=H=0;H<B;x=H+=1)y=o[l++],g=(x-x%s)/s,_=x<s?0:D[w-s],G=N&&D[(N-1)*B+g*s+x%s],D[w++]=(y+Math.floor((_+G)/2))%256;break;case 4:for(x=q=0;q<B;x=q+=1)y=o[l++],g=(x-x%s)/s,_=x<s?0:D[w-s],N===0?G=V=0:(G=D[(N-1)*B+g*s+x%s],V=g&&D[(N-1)*B+(g-1)*s+x%s]),C=_+G-V,I=Math.abs(C-_),L=Math.abs(C-G),k=Math.abs(C-V),R=I<=L&&I<=k?_:L<=k?G:V,D[w++]=(y+R)%256;break;default:throw new Error("Invalid filter algorithm: "+o[l-1])}if(!F){var j=((f+N*v)*u.width+h)*s,Q=N*B;for(x=0;x<Z;x+=1){for(var se=0;se<s;se+=1)a[j++]=D[Q++];j+=(d-1)*s}}N++}}return o=IY(o),u.interlaceMethod==1?(c(0,0,8,8),c(4,0,8,8),c(0,4,4,8),c(2,0,4,4),c(0,2,2,4),c(1,0,2,2),c(0,1,1,2)):c(0,0,1,1),a},r.prototype.decodePalette=function(){var o,s,a,l,u,c,h,f,d;for(a=this.palette,c=this.transparency.indexed||[],u=new Uint8Array((c.length||0)+a.length),l=0,o=0,s=h=0,f=a.length;h<f;s=h+=3)u[l++]=a[s],u[l++]=a[s+1],u[l++]=a[s+2],u[l++]=(d=c[o++])!=null?d:255;return u},r.prototype.copyToImageData=function(o,s){var a,l,u,c,h,f,d,v,y,w,g;if(l=this.colors,y=null,a=this.hasAlphaChannel,this.palette.length&&(y=(g=this._decodedPalette)!=null?g:this._decodedPalette=this.decodePalette(),l=4,a=!0),v=(u=o.data||o).length,h=y||s,c=f=0,l===1)for(;c<v;)d=y?4*s[c/4]:f,w=h[d++],u[c++]=w,u[c++]=w,u[c++]=w,u[c++]=a?h[d++]:255,f=d;else for(;c<v;)d=y?4*s[c/4]:f,u[c++]=h[d++],u[c++]=h[d++],u[c++]=h[d++],u[c++]=a?h[d++]:255,f=d},r.prototype.decode=function(){var o;return o=new Uint8Array(this.width*this.height*4),this.copyToImageData(o,this.decodePixels()),o};var i=function(){if(Object.prototype.toString.call(Sn)==="[object Window]"){try{e=Sn.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),n=function(o){var s;if(i()===!0)return t.width=o.width,t.height=o.height,t.clearRect(0,0,o.width,o.height),t.putImageData(o,0,0),(s=new Image).src=e.toDataURL(),s;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(o){var s,a,l,u,c,h,f,d;if(this.animation){for(d=[],a=c=0,h=(f=this.animation.frames).length;c<h;a=++c)s=f[a],l=o.createImageData(s.width,s.height),u=this.decodePixels(new Uint8Array(s.data)),this.copyToImageData(l,u),s.imageData=l,d.push(s.image=n(l));return d}},r.prototype.renderFrame=function(o,s){var a,l,u;return a=(l=this.animation.frames)[s],u=l[s-1],s===0&&o.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?o.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&o.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&o.clearRect(a.xOffset,a.yOffset,a.width,a.height),o.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(o){var s,a,l,u,c,h,f=this;return a=0,h=this.animation,u=h.numFrames,l=h.frames,c=h.numPlays,(s=function(){var d,v;if(d=a++%u,v=l[d],f.renderFrame(o,d),u>1&&a/u<c)return f.animation._timeout=setTimeout(s,v.delay)})()},r.prototype.stopAnimation=function(){var o;return clearTimeout((o=this.animation)!=null?o._timeout:void 0)},r.prototype.render=function(o){var s,a;return o._png&&o._png.stopAnimation(),o._png=this,o.width=this.width,o.height=this.height,s=o.getContext("2d"),this.animation?(this.decodeFrames(s),this.animate(s)):(a=s.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),s.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function nZ(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,i=n[e++],o=i>>7,s=1<<(7&i)+1;n[e++],n[e++];var a=null,l=null;o&&(a=e,l=s,e+=3*s);var u=!0,c=[],h=0,f=null,d=0,v=null;for(this.width=t,this.height=r;u&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,v=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((N=n[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var y=n[e++];h=n[e++]|n[e++]<<8,f=n[e++],!(1&y)&&(f=null),d=y>>2&7,e++;break;case 254:for(;;){if(!((N=n[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var w=n[e++]|n[e++]<<8,g=n[e++]|n[e++]<<8,x=n[e++]|n[e++]<<8,_=n[e++]|n[e++]<<8,E=n[e++],C=E>>6&1,I=1<<(7&E)+1,R=a,L=l,k=!1;E>>7&&(k=!0,R=e,L=I,e+=3*I);var D=e;for(e++;;){var N;if(!((N=n[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}c.push({x:w,y:g,width:x,height:_,has_local_palette:k,palette_offset:R,palette_size:L,data_offset:D,data_length:e-D,transparent_index:f,interlaced:!!C,delay:h,disposal:d});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return v},this.frameInfo=function(B){if(B<0||B>=c.length)throw new Error("Frame index out of range.");return c[B]},this.decodeAndBlitFrameBGRA=function(B,G){var V=this.frameInfo(B),$=V.width*V.height,J=new Uint8Array($);ZL(n,V.data_offset,J,$);var le=V.palette_offset,H=V.transparent_index;H===null&&(H=256);var q=V.width,Z=t-q,oe=q,F=4*(V.y*t+V.x),j=4*((V.y+V.height)*t+V.x),Q=F,se=4*Z;V.interlaced===!0&&(se+=4*t*7);for(var fe=8,we=0,Ee=J.length;we<Ee;++we){var Ce=J[we];if(oe===0&&(oe=q,(Q+=se)>=j&&(se=4*Z+4*t*(fe-1),Q=F+(q+Z)*(fe<<1),fe>>=1)),Ce===H)Q+=4;else{var Ge=n[le+3*Ce],Ie=n[le+3*Ce+1],he=n[le+3*Ce+2];G[Q++]=he,G[Q++]=Ie,G[Q++]=Ge,G[Q++]=255}--oe}},this.decodeAndBlitFrameRGBA=function(B,G){var V=this.frameInfo(B),$=V.width*V.height,J=new Uint8Array($);ZL(n,V.data_offset,J,$);var le=V.palette_offset,H=V.transparent_index;H===null&&(H=256);var q=V.width,Z=t-q,oe=q,F=4*(V.y*t+V.x),j=4*((V.y+V.height)*t+V.x),Q=F,se=4*Z;V.interlaced===!0&&(se+=4*t*7);for(var fe=8,we=0,Ee=J.length;we<Ee;++we){var Ce=J[we];if(oe===0&&(oe=q,(Q+=se)>=j&&(se=4*Z+4*t*(fe-1),Q=F+(q+Z)*(fe<<1),fe>>=1)),Ce===H)Q+=4;else{var Ge=n[le+3*Ce],Ie=n[le+3*Ce+1],he=n[le+3*Ce+2];G[Q++]=Ge,G[Q++]=Ie,G[Q++]=he,G[Q++]=255}--oe}}}function ZL(n,e,t,r){for(var i=n[e++],o=1<<i,s=o+1,a=s+1,l=i+1,u=(1<<l)-1,c=0,h=0,f=0,d=n[e++],v=new Int32Array(4096),y=null;;){for(;c<16&&d!==0;)h|=n[e++]<<c,c+=8,d===1?d=n[e++]:--d;if(c<l)break;var w=h&u;if(h>>=l,c-=l,w!==o){if(w===s)break;for(var g=w<a?w:y,x=0,_=g;_>o;)_=v[_]>>8,++x;var E=_;if(f+x+(g!==w?1:0)>r)return void Gr.log("Warning, gif stream longer than expected.");t[f++]=E;var C=f+=x;for(g!==w&&(t[f++]=E),_=g;x--;)_=v[_],t[--C]=255&_,_>>=8;y!==null&&a<4096&&(v[a++]=y<<8|E,a>=u+1&&l<12&&(++l,u=u<<1|1)),y=w}else a=s+1,u=(1<<(l=i+1))-1,y=null}return f!==r&&Gr.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function _b(n){var e,t,r,i,o,s=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),h=new Array(65535),f=new Array(65535),d=new Array(64),v=new Array(64),y=[],w=0,g=7,x=new Array(64),_=new Array(64),E=new Array(64),C=new Array(256),I=new Array(2048),R=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],L=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],k=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],$=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function J(F,j){for(var Q=0,se=0,fe=new Array,we=1;we<=16;we++){for(var Ee=1;Ee<=F[we];Ee++)fe[j[se]]=[],fe[j[se]][0]=Q,fe[j[se]][1]=we,se++,Q++;Q*=2}return fe}function le(F){for(var j=F[0],Q=F[1]-1;Q>=0;)j&1<<Q&&(w|=1<<g),Q--,--g<0&&(w==255?(H(255),H(0)):H(w),g=7,w=0)}function H(F){y.push(F)}function q(F){H(F>>8&255),H(255&F)}function Z(F,j,Q,se,fe){for(var we,Ee=fe[0],Ce=fe[240],Ge=function(We,nt){var yt,_t,de,ee,Fe,ot,et,ft,xt,ht,Pe=0;for(xt=0;xt<8;++xt){yt=We[Pe],_t=We[Pe+1],de=We[Pe+2],ee=We[Pe+3],Fe=We[Pe+4],ot=We[Pe+5],et=We[Pe+6];var Wt=yt+(ft=We[Pe+7]),Ct=yt-ft,Nt=_t+et,At=_t-et,be=de+ot,Je=de-ot,pt=ee+Fe,Te=ee-Fe,Ue=Wt+pt,qe=Wt-pt,Mt=Nt+be,Et=Nt-be;We[Pe]=Ue+Mt,We[Pe+4]=Ue-Mt;var It=.707106781*(Et+qe);We[Pe+2]=qe+It,We[Pe+6]=qe-It;var Zt=.382683433*((Ue=Te+Je)-(Et=At+Ct)),Hn=.5411961*Ue+Zt,Kn=1.306562965*Et+Zt,bn=.707106781*(Mt=Je+At),dr=Ct+bn,Vt=Ct-bn;We[Pe+5]=Vt+Hn,We[Pe+3]=Vt-Hn,We[Pe+1]=dr+Kn,We[Pe+7]=dr-Kn,Pe+=8}for(Pe=0,xt=0;xt<8;++xt){yt=We[Pe],_t=We[Pe+8],de=We[Pe+16],ee=We[Pe+24],Fe=We[Pe+32],ot=We[Pe+40],et=We[Pe+48];var yo=yt+(ft=We[Pe+56]),Do=yt-ft,si=_t+et,br=_t-et,xr=de+ot,Mr=de-ot,Mn=ee+Fe,Ko=ee-Fe,Oo=yo+Mn,Y=yo-Mn,U=si+xr,ne=si-xr;We[Pe]=Oo+U,We[Pe+32]=Oo-U;var ve=.707106781*(ne+Y);We[Pe+16]=Y+ve,We[Pe+48]=Y-ve;var me=.382683433*((Oo=Ko+Mr)-(ne=br+Do)),Se=.5411961*Oo+me,Xe=1.306562965*ne+me,Ye=.707106781*(U=Mr+br),st=Do+Ye,rt=Do-Ye;We[Pe+40]=rt+Se,We[Pe+24]=rt-Se,We[Pe+8]=st+Xe,We[Pe+56]=st-Xe,Pe++}for(xt=0;xt<64;++xt)ht=We[xt]*nt[xt],d[xt]=ht>0?ht+.5|0:ht-.5|0;return d}(F,j),Ie=0;Ie<64;++Ie)v[R[Ie]]=Ge[Ie];var he=v[0]-Q;Q=v[0],he==0?le(se[0]):(le(se[f[we=32767+he]]),le(h[we]));for(var ke=63;ke>0&&v[ke]==0;)ke--;if(ke==0)return le(Ee),Q;for(var Ne,Ae=1;Ae<=ke;){for(var ie=Ae;v[Ae]==0&&Ae<=ke;)++Ae;var Ke=Ae-ie;if(Ke>=16){Ne=Ke>>4;for(var Ve=1;Ve<=Ne;++Ve)le(Ce);Ke&=15}we=32767+v[Ae],le(fe[(Ke<<4)+f[we]]),le(h[we]),Ae++}return ke!=63&&le(Ee),Q}function oe(F){F=Math.min(Math.max(F,1),100),o!=F&&(function(j){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],se=0;se<64;se++){var fe=s((Q[se]*j+50)/100);fe=Math.min(Math.max(fe,1),255),a[R[se]]=fe}for(var we=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ee=0;Ee<64;Ee++){var Ce=s((we[Ee]*j+50)/100);Ce=Math.min(Math.max(Ce,1),255),l[R[Ee]]=Ce}for(var Ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ie=0,he=0;he<8;he++)for(var ke=0;ke<8;ke++)u[Ie]=1/(a[R[Ie]]*Ge[he]*Ge[ke]*8),c[Ie]=1/(l[R[Ie]]*Ge[he]*Ge[ke]*8),Ie++}(F<50?Math.floor(5e3/F):Math.floor(200-2*F)),o=F)}this.encode=function(F,j){j&&oe(j),y=new Array,w=0,g=7,q(65496),q(65504),q(16),H(74),H(70),H(73),H(70),H(0),H(1),H(1),H(0),q(1),q(1),H(0),H(0),function(){q(65499),q(132),H(0);for(var _t=0;_t<64;_t++)H(a[_t]);H(1);for(var de=0;de<64;de++)H(l[de])}(),function(_t,de){q(65472),q(17),H(8),q(de),q(_t),H(3),H(1),H(17),H(0),H(2),H(17),H(1),H(3),H(17),H(1)}(F.width,F.height),function(){q(65476),q(418),H(0);for(var _t=0;_t<16;_t++)H(L[_t+1]);for(var de=0;de<=11;de++)H(k[de]);H(16);for(var ee=0;ee<16;ee++)H(D[ee+1]);for(var Fe=0;Fe<=161;Fe++)H(N[Fe]);H(1);for(var ot=0;ot<16;ot++)H(B[ot+1]);for(var et=0;et<=11;et++)H(G[et]);H(17);for(var ft=0;ft<16;ft++)H(V[ft+1]);for(var xt=0;xt<=161;xt++)H($[xt])}(),q(65498),q(12),H(3),H(1),H(0),H(2),H(17),H(3),H(17),H(0),H(63),H(0);var Q=0,se=0,fe=0;w=0,g=7,this.encode.displayName="_encode_";for(var we,Ee,Ce,Ge,Ie,he,ke,Ne,Ae,ie=F.data,Ke=F.width,Ve=F.height,We=4*Ke,nt=0;nt<Ve;){for(we=0;we<We;){for(Ie=We*nt+we,ke=-1,Ne=0,Ae=0;Ae<64;Ae++)he=Ie+(Ne=Ae>>3)*We+(ke=4*(7&Ae)),nt+Ne>=Ve&&(he-=We*(nt+1+Ne-Ve)),we+ke>=We&&(he-=we+ke-We+4),Ee=ie[he++],Ce=ie[he++],Ge=ie[he++],x[Ae]=(I[Ee]+I[Ce+256>>0]+I[Ge+512>>0]>>16)-128,_[Ae]=(I[Ee+768>>0]+I[Ce+1024>>0]+I[Ge+1280>>0]>>16)-128,E[Ae]=(I[Ee+1280>>0]+I[Ce+1536>>0]+I[Ge+1792>>0]>>16)-128;Q=Z(x,u,Q,e,r),se=Z(_,c,se,t,i),fe=Z(E,c,fe,t,i),we+=32}nt+=8}if(g>=0){var yt=[];yt[1]=g+1,yt[0]=(1<<g+1)-1,le(yt)}return q(65497),new Uint8Array(y)},n=n||50,function(){for(var F=String.fromCharCode,j=0;j<256;j++)C[j]=F(j)}(),e=J(L,k),t=J(B,G),r=J(D,N),i=J(V,$),function(){for(var F=1,j=2,Q=1;Q<=15;Q++){for(var se=F;se<j;se++)f[32767+se]=Q,h[32767+se]=[],h[32767+se][1]=Q,h[32767+se][0]=se;for(var fe=-(j-1);fe<=-F;fe++)f[32767+fe]=Q,h[32767+fe]=[],h[32767+fe][1]=Q,h[32767+fe][0]=j-1+fe;F<<=1,j<<=1}}(),function(){for(var F=0;F<256;F++)I[F]=19595*F,I[F+256>>0]=38470*F,I[F+512>>0]=7471*F+32768,I[F+768>>0]=-11059*F,I[F+1024>>0]=-21709*F,I[F+1280>>0]=32768*F+8421375,I[F+1536>>0]=-27439*F,I[F+1792>>0]=-5329*F}(),oe(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Cl(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function KL(n){function e(L){if(!L)throw Error("assert :P")}function t(L,k,D){for(var N=0;4>N;N++)if(L[k+N]!=D.charCodeAt(N))return!0;return!1}function r(L,k,D,N,B){for(var G=0;G<B;G++)L[k+G]=D[N+G]}function i(L,k,D,N){for(var B=0;B<N;B++)L[k+B]=D}function o(L){return new Int32Array(L)}function s(L,k){for(var D=[],N=0;N<L;N++)D.push(new k);return D}function a(L,k){var D=[];return function N(B,G,V){for(var $=V[G],J=0;J<$&&(B.push(V.length>G+1?[]:new k),!(V.length<G+1));J++)N(B[J],G+1,V)}(D,0,L),D}var l=function(){var L=this;function k(S,M){for(var P=1<<M-1>>>0;S&P;)P>>>=1;return P?(S&P-1)+P:S}function D(S,M,P,z,X){e(!(z%P));do S[M+(z-=P)]=X;while(0<z)}function N(S,M,P,z,X){if(e(2328>=X),512>=X)var te=o(512);else if((te=o(X))==null)return 0;return function(re,ae,ce,ye,xe,je){var $e,Be,wt=ae,Qe=1<<ce,Re=o(16),De=o(16);for(e(xe!=0),e(ye!=null),e(re!=null),e(0<ce),Be=0;Be<xe;++Be){if(15<ye[Be])return 0;++Re[ye[Be]]}if(Re[0]==xe)return 0;for(De[1]=0,$e=1;15>$e;++$e){if(Re[$e]>1<<$e)return 0;De[$e+1]=De[$e]+Re[$e]}for(Be=0;Be<xe;++Be)$e=ye[Be],0<ye[Be]&&(je[De[$e]++]=Be);if(De[15]==1)return(ye=new B).g=0,ye.value=je[0],D(re,wt,1,Qe,ye),Qe;var mt,St=-1,vt=Qe-1,$t=0,Dt=1,fn=1,Ot=1<<ce;for(Be=0,$e=1,xe=2;$e<=ce;++$e,xe<<=1){if(Dt+=fn<<=1,0>(fn-=Re[$e]))return 0;for(;0<Re[$e];--Re[$e])(ye=new B).g=$e,ye.value=je[Be++],D(re,wt+$t,xe,Ot,ye),$t=k($t,$e)}for($e=ce+1,xe=2;15>=$e;++$e,xe<<=1){if(Dt+=fn<<=1,0>(fn-=Re[$e]))return 0;for(;0<Re[$e];--Re[$e]){if(ye=new B,($t&vt)!=St){for(wt+=Ot,mt=1<<(St=$e)-ce;15>St&&!(0>=(mt-=Re[St]));)++St,mt<<=1;Qe+=Ot=1<<(mt=St-ce),re[ae+(St=$t&vt)].g=mt+ce,re[ae+St].value=wt-ae-St}ye.g=$e-ce,ye.value=je[Be++],D(re,wt+($t>>ce),xe,Ot,ye),$t=k($t,$e)}}return Dt!=2*De[15]-1?0:Qe}(S,M,P,z,X,te)}function B(){this.value=this.g=0}function G(){this.value=this.g=0}function V(){this.G=s(5,B),this.H=o(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=s(Ui,G)}function $(S,M,P,z){e(S!=null),e(M!=null),e(2147483648>z),S.Ca=254,S.I=0,S.b=-8,S.Ka=0,S.oa=M,S.pa=P,S.Jd=M,S.Yc=P+z,S.Zc=4<=z?P+z-4+1:P,we(S)}function J(S,M){for(var P=0;0<M--;)P|=Ce(S,128)<<M;return P}function le(S,M){var P=J(S,M);return Ee(S)?-P:P}function H(S,M,P,z){var X,te=0;for(e(S!=null),e(M!=null),e(4294967288>z),S.Sb=z,S.Ra=0,S.u=0,S.h=0,4<z&&(z=4),X=0;X<z;++X)te+=M[P+X]<<8*X;S.Ra=te,S.bb=z,S.oa=M,S.pa=P}function q(S){for(;8<=S.u&&S.bb<S.Sb;)S.Ra>>>=8,S.Ra+=S.oa[S.pa+S.bb]<<ua-8>>>0,++S.bb,S.u-=8;Q(S)&&(S.h=1,S.u=0)}function Z(S,M){if(e(0<=M),!S.h&&M<=Da){var P=j(S)&Zu[M];return S.u+=M,q(S),P}return S.h=1,S.u=0}function oe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function F(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function j(S){return S.Ra>>>(S.u&ua-1)>>>0}function Q(S){return e(S.bb<=S.Sb),S.h||S.bb==S.Sb&&S.u>ua}function se(S,M){S.u=M,S.h=Q(S)}function fe(S){S.u>=Ku&&(e(S.u>=Ku),q(S))}function we(S){e(S!=null&&S.oa!=null),S.pa<S.Zc?(S.I=(S.oa[S.pa++]|S.I<<8)>>>0,S.b+=8):(e(S!=null&&S.oa!=null),S.pa<S.Yc?(S.b+=8,S.I=S.oa[S.pa++]|S.I<<8):S.Ka?S.b=0:(S.I<<=8,S.b+=8,S.Ka=1))}function Ee(S){return J(S,1)}function Ce(S,M){var P=S.Ca;0>S.b&&we(S);var z=S.b,X=P*M>>>8,te=(S.I>>>z>X)+0;for(te?(P-=X,S.I-=X+1<<z>>>0):P=X+1,z=P,X=0;256<=z;)X+=8,z>>=8;return z=7^X+Yi[z],S.b-=z,S.Ca=(P<<z)-1,te}function Ge(S,M,P){S[M+0]=P>>24&255,S[M+1]=P>>16&255,S[M+2]=P>>8&255,S[M+3]=P>>0&255}function Ie(S,M){return S[M+0]<<0|S[M+1]<<8}function he(S,M){return Ie(S,M)|S[M+2]<<16}function ke(S,M){return Ie(S,M)|Ie(S,M+2)<<16}function Ne(S,M){var P=1<<M;return e(S!=null),e(0<M),S.X=o(P),S.X==null?0:(S.Mb=32-M,S.Xa=M,1)}function Ae(S,M){e(S!=null),e(M!=null),e(S.Xa==M.Xa),r(M.X,0,S.X,0,1<<M.Xa)}function ie(){this.X=[],this.Xa=this.Mb=0}function Ke(S,M,P,z){e(P!=null),e(z!=null);var X=P[0],te=z[0];return X==0&&(X=(S*te+M/2)/M),te==0&&(te=(M*X+S/2)/S),0>=X||0>=te?0:(P[0]=X,z[0]=te,1)}function Ve(S,M){return S+(1<<M)-1>>>M}function We(S,M){return((4278255360&S)+(4278255360&M)>>>0&4278255360)+((16711935&S)+(16711935&M)>>>0&16711935)>>>0}function nt(S,M){L[M]=function(P,z,X,te,re,ae,ce){var ye;for(ye=0;ye<re;++ye){var xe=L[S](ae[ce+ye-1],X,te+ye);ae[ce+ye]=We(P[z+ye],xe)}}}function yt(){this.ud=this.hd=this.jd=0}function _t(S,M){return((4278124286&(S^M))>>>1)+(S&M)>>>0}function de(S){return 0<=S&&256>S?S:0>S?0:255<S?255:void 0}function ee(S,M){return de(S+(S-M+.5>>1))}function Fe(S,M,P){return Math.abs(M-P)-Math.abs(S-P)}function ot(S,M,P,z,X,te,re){for(z=te[re-1],P=0;P<X;++P)te[re+P]=z=We(S[M+P],z)}function et(S,M,P,z,X){var te;for(te=0;te<P;++te){var re=S[M+te],ae=re>>8&255,ce=16711935&(ce=(ce=16711935&re)+((ae<<16)+ae));z[X+te]=(4278255360&re)+ce>>>0}}function ft(S,M){M.jd=S>>0&255,M.hd=S>>8&255,M.ud=S>>16&255}function xt(S,M,P,z,X,te){var re;for(re=0;re<z;++re){var ae=M[P+re],ce=ae>>>8,ye=ae,xe=255&(xe=(xe=ae>>>16)+((S.jd<<24>>24)*(ce<<24>>24)>>>5));ye=255&(ye=(ye=ye+((S.hd<<24>>24)*(ce<<24>>24)>>>5))+((S.ud<<24>>24)*(xe<<24>>24)>>>5)),X[te+re]=(4278255360&ae)+(xe<<16)+ye}}function ht(S,M,P,z,X){L[M]=function(te,re,ae,ce,ye,xe,je,$e,Be){for(ce=je;ce<$e;++ce)for(je=0;je<Be;++je)ye[xe++]=X(ae[z(te[re++])])},L[S]=function(te,re,ae,ce,ye,xe,je){var $e=8>>te.b,Be=te.Ea,wt=te.K[0],Qe=te.w;if(8>$e)for(te=(1<<te.b)-1,Qe=(1<<$e)-1;re<ae;++re){var Re,De=0;for(Re=0;Re<Be;++Re)Re&te||(De=z(ce[ye++])),xe[je++]=X(wt[De&Qe]),De>>=$e}else L["VP8LMapColor"+P](ce,ye,wt,Qe,xe,je,re,ae,Be)}}function Pe(S,M,P,z,X){for(P=M+P;M<P;){var te=S[M++];z[X++]=te>>16&255,z[X++]=te>>8&255,z[X++]=te>>0&255}}function Wt(S,M,P,z,X){for(P=M+P;M<P;){var te=S[M++];z[X++]=te>>16&255,z[X++]=te>>8&255,z[X++]=te>>0&255,z[X++]=te>>24&255}}function Ct(S,M,P,z,X){for(P=M+P;M<P;){var te=(re=S[M++])>>16&240|re>>12&15,re=re>>0&240|re>>28&15;z[X++]=te,z[X++]=re}}function Nt(S,M,P,z,X){for(P=M+P;M<P;){var te=(re=S[M++])>>16&248|re>>13&7,re=re>>5&224|re>>3&31;z[X++]=te,z[X++]=re}}function At(S,M,P,z,X){for(P=M+P;M<P;){var te=S[M++];z[X++]=te>>0&255,z[X++]=te>>8&255,z[X++]=te>>16&255}}function be(S,M,P,z,X,te){if(te==0)for(P=M+P;M<P;)Ge(z,((te=S[M++])[0]>>24|te[1]>>8&65280|te[2]<<8&16711680|te[3]<<24)>>>0),X+=32;else r(z,X,S,M,P)}function Je(S,M){L[M][0]=L[S+"0"],L[M][1]=L[S+"1"],L[M][2]=L[S+"2"],L[M][3]=L[S+"3"],L[M][4]=L[S+"4"],L[M][5]=L[S+"5"],L[M][6]=L[S+"6"],L[M][7]=L[S+"7"],L[M][8]=L[S+"8"],L[M][9]=L[S+"9"],L[M][10]=L[S+"10"],L[M][11]=L[S+"11"],L[M][12]=L[S+"12"],L[M][13]=L[S+"13"],L[M][14]=L[S+"0"],L[M][15]=L[S+"0"]}function pt(S){return S==pp||S==mp||S==lh||S==gp}function Te(){this.eb=[],this.size=this.A=this.fb=0}function Ue(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function qe(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Te,this.f.kb=new Ue,this.sd=null}function Mt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Et(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function It(S){return alert("todo:WebPSamplerProcessPlane"),S.T}function Zt(S,M){var P=S.T,z=M.ba.f.RGBA,X=z.eb,te=z.fb+S.ka*z.A,re=Mo[M.ba.S],ae=S.y,ce=S.O,ye=S.f,xe=S.N,je=S.ea,$e=S.W,Be=M.cc,wt=M.dc,Qe=M.Mc,Re=M.Nc,De=S.ka,mt=S.ka+S.T,St=S.U,vt=St+1>>1;for(De==0?re(ae,ce,null,null,ye,xe,je,$e,ye,xe,je,$e,X,te,null,null,St):(re(M.ec,M.fc,ae,ce,Be,wt,Qe,Re,ye,xe,je,$e,X,te-z.A,X,te,St),++P);De+2<mt;De+=2)Be=ye,wt=xe,Qe=je,Re=$e,xe+=S.Rc,$e+=S.Rc,te+=2*z.A,re(ae,(ce+=2*S.fa)-S.fa,ae,ce,Be,wt,Qe,Re,ye,xe,je,$e,X,te-z.A,X,te,St);return ce+=S.fa,S.j+mt<S.o?(r(M.ec,M.fc,ae,ce,St),r(M.cc,M.dc,ye,xe,vt),r(M.Mc,M.Nc,je,$e,vt),P--):1&mt||re(ae,ce,null,null,ye,xe,je,$e,ye,xe,je,$e,X,te+z.A,null,null,St),P}function Hn(S,M,P){var z=S.F,X=[S.J];if(z!=null){var te=S.U,re=M.ba.S,ae=re==fu||re==lh;M=M.ba.f.RGBA;var ce=[0],ye=S.ka;ce[0]=S.T,S.Kb&&(ye==0?--ce[0]:(--ye,X[0]-=S.width),S.j+S.ka+S.T==S.o&&(ce[0]=S.o-S.j-ye));var xe=M.eb;ye=M.fb+ye*M.A,S=lr(z,X[0],S.width,te,ce,xe,ye+(ae?0:3),M.A),e(P==ce),S&&pt(re)&&Ci(xe,ye,ae,te,ce,M.A)}return 0}function Kn(S){var M=S.ma,P=M.ba.S,z=11>P,X=P==nc||P==ah||P==fu||P==dp||P==12||pt(P);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!th(M.Oa,S,X?11:12))return 0;if(X&&pt(P)&&bt(),S.da)alert("todo:use_scaling");else{if(z){if(M.Ib=It,S.Kb){if(P=S.U+1>>1,M.memory=o(S.U+2*P),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+S.U,M.Mc=M.cc,M.Nc=M.dc+P,M.Ib=Zt,bt()}}else alert("todo:EmitYUV");X&&(M.Jb=Hn,z&&He())}if(z&&!Ug){for(S=0;256>S;++S)zg[S]=89858*(S-128)+Ki>>Eo,ey[S]=-22014*(S-128)+Ki,Hg[S]=-45773*(S-128),Q1[S]=113618*(S-128)+Ki>>Eo;for(S=hh;S<Sp;++S)M=76283*(S-16)+Ki>>Eo,ty[S-hh]=Bo(M,255),_p[S-hh]=Bo(M+8>>4,15);Ug=1}return 1}function bn(S){var M=S.ma,P=S.U,z=S.T;return e(!(1&S.ka)),0>=P||0>=z?0:(P=M.Ib(S,M),M.Jb!=null&&M.Jb(S,M,P),M.Dc+=P,1)}function dr(S){S.ma.memory=null}function Vt(S,M,P,z){return Z(S,8)!=47?0:(M[0]=Z(S,14)+1,P[0]=Z(S,14)+1,z[0]=Z(S,1),Z(S,3)!=0?0:!S.h)}function yo(S,M){if(4>S)return S+1;var P=S-2>>1;return(2+(1&S)<<P)+Z(M,P)+1}function Do(S,M){return 120<M?M-120:1<=(P=((P=$1[M-1])>>4)*S+(8-(15&P)))?P:1;var P}function si(S,M,P){var z=j(P),X=S[M+=255&z].g-8;return 0<X&&(se(P,P.u+8),z=j(P),M+=S[M].value,M+=z&(1<<X)-1),se(P,P.u+S[M].g),S[M].value}function br(S,M,P){return P.g+=S.g,P.value+=S.value<<M>>>0,e(8>=P.g),S.g}function xr(S,M,P){var z=S.xc;return e((M=z==0?0:S.vc[S.md*(P>>z)+(M>>z)])<S.Wb),S.Ya[M]}function Mr(S,M,P,z){var X=S.ab,te=S.c*M,re=S.C;M=re+M;var ae=P,ce=z;for(z=S.Ta,P=S.Ua;0<X--;){var ye=S.gc[X],xe=re,je=M,$e=ae,Be=ce,wt=(ce=z,ae=P,ye.Ea);switch(e(xe<je),e(je<=ye.nc),ye.hc){case 2:Of($e,Be,(je-xe)*wt,ce,ae);break;case 0:var Qe=xe,Re=je,De=ce,mt=ae,St=(Ot=ye).Ea;Qe==0&&(rh($e,Be,null,null,1,De,mt),ot($e,Be+1,0,0,St-1,De,mt+1),Be+=St,mt+=St,++Qe);for(var vt=1<<Ot.b,$t=vt-1,Dt=Ve(St,Ot.b),fn=Ot.K,Ot=Ot.w+(Qe>>Ot.b)*Dt;Qe<Re;){var sr=fn,mr=Ot,er=1;for(ih($e,Be,De,mt-St,1,De,mt);er<St;){var jn=(er&~$t)+vt;jn>St&&(jn=St),(0,Hs[sr[mr++]>>8&15])($e,Be+ +er,De,mt+er-St,jn-er,De,mt+er),er=jn}Be+=St,mt+=St,++Qe&$t||(Ot+=Dt)}je!=ye.nc&&r(ce,ae-wt,ce,ae+(je-xe-1)*wt,wt);break;case 1:for(wt=$e,Re=Be,St=($e=ye.Ea)-(mt=$e&~(De=(Be=1<<ye.b)-1)),Qe=Ve($e,ye.b),vt=ye.K,ye=ye.w+(xe>>ye.b)*Qe;xe<je;){for($t=vt,Dt=ye,fn=new yt,Ot=Re+mt,sr=Re+$e;Re<Ot;)ft($t[Dt++],fn),Gs(fn,wt,Re,Be,ce,ae),Re+=Be,ae+=Be;Re<sr&&(ft($t[Dt++],fn),Gs(fn,wt,Re,St,ce,ae),Re+=St,ae+=St),++xe&De||(ye+=Qe)}break;case 3:if($e==ce&&Be==ae&&0<ye.b){for(Re=ce,$e=wt=ae+(je-xe)*wt-(mt=(je-xe)*Ve(ye.Ea,ye.b)),Be=ce,De=ae,Qe=[],mt=(St=mt)-1;0<=mt;--mt)Qe[mt]=Be[De+mt];for(mt=St-1;0<=mt;--mt)Re[$e+mt]=Qe[mt];ro(ye,xe,je,ce,wt,ce,ae)}else ro(ye,xe,je,$e,Be,ce,ae)}ae=z,ce=P}ce!=P&&r(z,P,ae,ce,te)}function Mn(S,M){var P=S.V,z=S.Ba+S.c*S.C,X=M-S.C;if(e(M<=S.l.o),e(16>=X),0<X){var te=S.l,re=S.Ta,ae=S.Ua,ce=te.width;if(Mr(S,X,P,z),X=ae=[ae],e((P=S.C)<(z=M)),e(te.v<te.va),z>te.o&&(z=te.o),P<te.j){var ye=te.j-P;P=te.j,X[0]+=ye*ce}if(P>=z?P=0:(X[0]+=4*te.v,te.ka=P-te.j,te.U=te.va-te.v,te.T=z-P,P=1),P){if(ae=ae[0],11>(P=S.ca).S){var xe=P.f.RGBA,je=(z=P.S,X=te.U,te=te.T,ye=xe.eb,xe.A),$e=te;for(xe=xe.fb+S.Ma*xe.A;0<$e--;){var Be=re,wt=ae,Qe=X,Re=ye,De=xe;switch(z){case zf:Zr(Be,wt,Qe,Re,De);break;case nc:io(Be,wt,Qe,Re,De);break;case pp:io(Be,wt,Qe,Re,De),Ci(Re,De,0,Qe,1,0);break;case Hf:ca(Be,wt,Qe,Re,De);break;case ah:be(Be,wt,Qe,Re,De,1);break;case mp:be(Be,wt,Qe,Re,De,1),Ci(Re,De,0,Qe,1,0);break;case fu:be(Be,wt,Qe,Re,De,0);break;case lh:be(Be,wt,Qe,Re,De,0),Ci(Re,De,1,Qe,1,0);break;case dp:As(Be,wt,Qe,Re,De);break;case gp:As(Be,wt,Qe,Re,De),Qn(Re,De,Qe,1,0);break;case Ig:Oa(Be,wt,Qe,Re,De);break;default:e(0)}ae+=ce,xe+=je}S.Ma+=te}else alert("todo:EmitRescaledRowsYUVA");e(S.Ma<=P.height)}}S.C=M,e(S.C<=S.i)}function Ko(S){var M;if(0<S.ua)return 0;for(M=0;M<S.Wb;++M){var P=S.Ya[M].G,z=S.Ya[M].H;if(0<P[1][z[1]+0].g||0<P[2][z[2]+0].g||0<P[3][z[3]+0].g)return 0}return 1}function Oo(S,M,P,z,X,te){if(S.Z!=0){var re=S.qd,ae=S.rd;for(e($s[S.Z]!=null);M<P;++M)$s[S.Z](re,ae,z,X,z,X,te),re=z,ae=X,X+=te;S.qd=re,S.rd=ae}}function Y(S,M){var P=S.l.ma,z=P.Z==0||P.Z==1?S.l.j:S.C;if(z=S.C<z?z:S.C,e(M<=S.l.o),M>z){var X=S.l.width,te=P.ca,re=P.tb+X*z,ae=S.V,ce=S.Ba+S.c*z,ye=S.gc;e(S.ab==1),e(ye[0].hc==3),hu(ye[0],z,M,ae,ce,te,re),Oo(P,z,M,te,re,X)}S.C=S.Ma=M}function U(S,M,P,z,X,te,re){var ae=S.$/z,ce=S.$%z,ye=S.m,xe=S.s,je=P+S.$,$e=je;X=P+z*X;var Be=P+z*te,wt=280+xe.ua,Qe=S.Pb?ae:16777216,Re=0<xe.ua?xe.Wa:null,De=xe.wc,mt=je<Be?xr(xe,ce,ae):null;e(S.C<te),e(Be<=X);var St=!1;e:for(;;){for(;St||je<Be;){var vt=0;if(ae>=Qe){var $t=je-P;e((Qe=S).Pb),Qe.wd=Qe.m,Qe.xd=$t,0<Qe.s.ua&&Ae(Qe.s.Wa,Qe.s.vb),Qe=ae+X1}if(ce&De||(mt=xr(xe,ce,ae)),e(mt!=null),mt.Qb&&(M[je]=mt.qb,St=!0),!St)if(fe(ye),mt.jc){vt=ye,$t=M;var Dt=je,fn=mt.pd[j(vt)&Ui-1];e(mt.jc),256>fn.g?(se(vt,vt.u+fn.g),$t[Dt]=fn.value,vt=0):(se(vt,vt.u+fn.g-256),e(256<=fn.value),vt=fn.value),vt==0&&(St=!0)}else vt=si(mt.G[0],mt.H[0],ye);if(ye.h)break;if(St||256>vt){if(!St)if(mt.nd)M[je]=(mt.qb|vt<<8)>>>0;else{if(fe(ye),St=si(mt.G[1],mt.H[1],ye),fe(ye),$t=si(mt.G[2],mt.H[2],ye),Dt=si(mt.G[3],mt.H[3],ye),ye.h)break;M[je]=(Dt<<24|St<<16|vt<<8|$t)>>>0}if(St=!1,++je,++ce>=z&&(ce=0,++ae,re!=null&&ae<=te&&!(ae%16)&&re(S,ae),Re!=null))for(;$e<je;)vt=M[$e++],Re.X[(506832829*vt&4294967295)>>>Re.Mb]=vt}else if(280>vt){if(vt=yo(vt-256,ye),$t=si(mt.G[4],mt.H[4],ye),fe(ye),$t=Do(z,$t=yo($t,ye)),ye.h)break;if(je-P<$t||X-je<vt)break e;for(Dt=0;Dt<vt;++Dt)M[je+Dt]=M[je+Dt-$t];for(je+=vt,ce+=vt;ce>=z;)ce-=z,++ae,re!=null&&ae<=te&&!(ae%16)&&re(S,ae);if(e(je<=X),ce&De&&(mt=xr(xe,ce,ae)),Re!=null)for(;$e<je;)vt=M[$e++],Re.X[(506832829*vt&4294967295)>>>Re.Mb]=vt}else{if(!(vt<wt))break e;for(St=vt-280,e(Re!=null);$e<je;)vt=M[$e++],Re.X[(506832829*vt&4294967295)>>>Re.Mb]=vt;vt=je,e(!(St>>>($t=Re).Xa)),M[vt]=$t.X[St],St=!0}St||e(ye.h==Q(ye))}if(S.Pb&&ye.h&&je<X)e(S.m.h),S.a=5,S.m=S.wd,S.$=S.xd,0<S.s.ua&&Ae(S.s.vb,S.s.Wa);else{if(ye.h)break e;re!=null&&re(S,ae>te?te:ae),S.a=0,S.$=je-P}return 1}return S.a=3,0}function ne(S){e(S!=null),S.vc=null,S.yc=null,S.Ya=null;var M=S.Wa;M!=null&&(M.X=null),S.vb=null,e(S!=null)}function ve(){var S=new Fa;return S==null?null:(S.a=0,S.xb=Dg,Je("Predictor","VP8LPredictors"),Je("Predictor","VP8LPredictors_C"),Je("PredictorAdd","VP8LPredictorsAdd"),Je("PredictorAdd","VP8LPredictorsAdd_C"),Of=et,Gs=xt,Zr=Pe,io=Wt,As=Ct,Oa=Nt,ca=At,L.VP8LMapColor32b=Ju,L.VP8LMapColor8b=Uo,S)}function me(S,M,P,z,X){var te=1,re=[S],ae=[M],ce=z.m,ye=z.s,xe=null,je=0;e:for(;;){if(P)for(;te&&Z(ce,1);){var $e=re,Be=ae,wt=z,Qe=1,Re=wt.m,De=wt.gc[wt.ab],mt=Z(Re,2);if(wt.Oc&1<<mt)te=0;else{switch(wt.Oc|=1<<mt,De.hc=mt,De.Ea=$e[0],De.nc=Be[0],De.K=[null],++wt.ab,e(4>=wt.ab),mt){case 0:case 1:De.b=Z(Re,3)+2,Qe=me(Ve(De.Ea,De.b),Ve(De.nc,De.b),0,wt,De.K),De.K=De.K[0];break;case 3:var St,vt=Z(Re,8)+1,$t=16<vt?0:4<vt?1:2<vt?2:3;if($e[0]=Ve(De.Ea,$t),De.b=$t,St=Qe=me(vt,1,0,wt,De.K)){var Dt,fn=vt,Ot=De,sr=1<<(8>>Ot.b),mr=o(sr);if(mr==null)St=0;else{var er=Ot.K[0],jn=Ot.w;for(mr[0]=Ot.K[0][0],Dt=1;Dt<1*fn;++Dt)mr[Dt]=We(er[jn+Dt],mr[Dt-1]);for(;Dt<4*sr;++Dt)mr[Dt]=0;Ot.K[0]=null,Ot.K[0]=mr,St=1}}Qe=St;break;case 2:break;default:e(0)}te=Qe}}if(re=re[0],ae=ae[0],te&&Z(ce,1)&&!(te=1<=(je=Z(ce,4))&&11>=je)){z.a=3;break e}var Ir;if(Ir=te)t:{var Pr,kn,pi,Ho=z,mi=re,so=ae,ur=je,Ao=P,To=Ho.m,gi=Ho.s,vi=[null],ao=1,Qo=0,qs=q1[ur];n:for(;;){if(Ao&&Z(To,1)){var zi=Z(To,3)+2,da=Ve(mi,zi),rc=Ve(so,zi),yl=da*rc;if(!me(da,rc,0,Ho,vi))break n;for(vi=vi[0],gi.xc=zi,Pr=0;Pr<yl;++Pr){var Va=vi[Pr]>>8&65535;vi[Pr]=Va,Va>=ao&&(ao=Va+1)}}if(To.h)break n;for(kn=0;5>kn;++kn){var In=Ng[kn];!kn&&0<ur&&(In+=1<<ur),Qo<In&&(Qo=In)}var Dn=s(ao*qs,B),yi=ao,xi=s(yi,V);if(xi==null)var Pi=null;else e(65536>=yi),Pi=xi;var lo=o(Qo);if(Pi==null||lo==null||Dn==null){Ho.a=1;break n}var xl=Dn;for(Pr=pi=0;Pr<ao;++Pr){var Sr=Pi[Pr],Wa=Sr.G,pa=Sr.H,jf=0,fh=1,dh=0;for(kn=0;5>kn;++kn){In=Ng[kn],Wa[kn]=xl,pa[kn]=pi,!kn&&0<ur&&(In+=1<<ur);i:{var uo,$f=In,ph=Ho,ja=lo,bp=xl,Wg=pi,$a=0,ma=ph.m,du=Z(ma,1);if(i(ja,0,0,$f),du){var Mp=Z(ma,1)+1,qf=Z(ma,1),Ep=Z(ma,qf==0?1:8);ja[Ep]=1,Mp==2&&(ja[Ep=Z(ma,8)]=1);var ic=1}else{var Xf=o(19),Co=Z(ma,4)+4;if(19<Co){ph.a=3;var ga=0;break i}for(uo=0;uo<Co;++uo)Xf[OS[uo]]=Z(ma,3);var es=void 0,pu=void 0,Go=ph,ry=Xf,mh=$f,Ap=ja,jg=0,Vo=Go.m,$g=8,qg=s(128,B);r:for(;N(qg,0,7,ry,19);){if(Z(Vo,1)){var Xg=2+2*Z(Vo,3);if((es=2+Z(Vo,Xg))>mh)break r}else es=mh;for(pu=0;pu<mh&&es--;){fe(Vo);var mu=qg[0+(127&j(Vo))];se(Vo,Vo.u+mu.g);var oc=mu.value;if(16>oc)Ap[pu++]=oc,oc!=0&&($g=oc);else{var iy=oc==16,Tp=oc-16,Cp=FS[Tp],oy=Z(Vo,j1[Tp])+Cp;if(pu+oy>mh)break r;for(var GS=iy?$g:0;0<oy--;)Ap[pu++]=GS}}jg=1;break r}jg||(Go.a=3),ic=jg}(ic=ic&&!ma.h)&&($a=N(bp,Wg,8,ja,$f)),ic&&$a!=0?ga=$a:(ph.a=3,ga=0)}if(ga==0)break n;if(fh&&DS[kn]==1&&(fh=xl[pi].g==0),jf+=xl[pi].g,pi+=ga,3>=kn){var gh,Pp=lo[0];for(gh=1;gh<In;++gh)lo[gh]>Pp&&(Pp=lo[gh]);dh+=Pp}}if(Sr.nd=fh,Sr.Qb=0,fh&&(Sr.qb=(Wa[3][pa[3]+0].value<<24|Wa[1][pa[1]+0].value<<16|Wa[2][pa[2]+0].value)>>>0,jf==0&&256>Wa[0][pa[0]+0].value&&(Sr.Qb=1,Sr.qb+=Wa[0][pa[0]+0].value<<8)),Sr.jc=!Sr.Qb&&6>dh,Sr.jc){var qa,wl=Sr;for(qa=0;qa<Ui;++qa){var ts=qa,Sl=wl.pd[ts],co=wl.G[0][wl.H[0]+ts];256<=co.value?(Sl.g=co.g+256,Sl.value=co.value):(Sl.g=0,Sl.value=0,ts>>=br(co,8,Sl),ts>>=br(wl.G[1][wl.H[1]+ts],16,Sl),ts>>=br(wl.G[2][wl.H[2]+ts],0,Sl),br(wl.G[3][wl.H[3]+ts],24,Sl))}}}gi.vc=vi,gi.Wb=ao,gi.Ya=Pi,gi.yc=Dn,Ir=1;break t}Ir=0}if(!(te=Ir)){z.a=3;break e}if(0<je){if(ye.ua=1<<je,!Ne(ye.Wa,je)){z.a=1,te=0;break e}}else ye.ua=0;var Yg=z,Zg=re,VS=ae,Kg=Yg.s,Lp=Kg.xc;if(Yg.c=Zg,Yg.i=VS,Kg.md=Ve(Zg,Lp),Kg.wc=Lp==0?-1:(1<<Lp)-1,P){z.xb=Ga;break e}if((xe=o(re*ae))==null){z.a=1,te=0;break e}te=(te=U(z,xe,0,re,ae,ae,null))&&!ce.h;break e}return te?(X!=null?X[0]=xe:(e(xe==null),e(P)),z.$=0,P||ne(ye)):ne(ye),te}function Se(S,M){var P=S.c*S.i,z=P+M+16*M;return e(S.c<=M),S.V=o(z),S.V==null?(S.Ta=null,S.Ua=0,S.a=1,0):(S.Ta=S.V,S.Ua=S.Ba+P+M,1)}function Xe(S,M){var P=S.C,z=M-P,X=S.V,te=S.Ba+S.c*P;for(e(M<=S.l.o);0<z;){var re=16<z?16:z,ae=S.l.ma,ce=S.l.width,ye=ce*re,xe=ae.ca,je=ae.tb+ce*P,$e=S.Ta,Be=S.Ua;Mr(S,re,X,te),$r($e,Be,xe,je,ye),Oo(ae,P,P+re,xe,je,ce),z-=re,X+=re*S.c,P+=re}e(P==M),S.C=S.Ma=M}function Ye(){this.ub=this.yd=this.td=this.Rb=0}function st(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function rt(){this.Fb=this.Bb=this.Cb=0,this.Zb=o(4),this.Lb=o(4)}function dt(){this.Yb=function(){var S=[];return function M(P,z,X){for(var te=X[z],re=0;re<te&&(P.push(X.length>z+1?[]:0),!(X.length<z+1));re++)M(P[re],z+1,X)}(S,0,[3,11]),S}()}function tt(){this.jb=o(3),this.Wc=a([4,8],dt),this.Xc=a([4,17],dt)}function jt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new o(4),this.od=new o(4)}function Rt(){this.ld=this.La=this.dd=this.tc=0}function Ft(){this.Na=this.la=0}function rn(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function an(){this.ad=o(384),this.Za=0,this.Ob=o(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function sn(){this.uc=this.M=this.Nb=0,this.wa=Array(new Rt),this.Y=0,this.ya=Array(new an),this.aa=0,this.l=new Xt}function Ht(){this.y=o(16),this.f=o(8),this.ea=o(8)}function pn(){this.cb=this.a=0,this.sc="",this.m=new oe,this.Od=new Ye,this.Kc=new st,this.ed=new jt,this.Qa=new rt,this.Ic=this.$c=this.Aa=0,this.D=new sn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=s(8,oe),this.ia=0,this.pb=s(4,rn),this.Pa=new tt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ht),this.Hd=0,this.rb=Array(new Ft),this.sb=0,this.wa=Array(new Rt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new an),this.L=this.aa=0,this.gd=a([4,2],Rt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Xt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function En(){var S=new pn;return S!=null&&(S.a=0,S.sc="OK",S.cb=0,S.Xb=0,Gf||(Gf=Jn)),S}function mn(S,M,P){return S.a==0&&(S.a=M,S.sc=P,S.cb=0),0}function xn(S,M,P){return 3<=P&&S[M+0]==157&&S[M+1]==1&&S[M+2]==42}function or(S,M){if(S==null)return 0;if(S.a=0,S.sc="OK",M==null)return mn(S,2,"null VP8Io passed to VP8GetHeaders()");var P=M.data,z=M.w,X=M.ha;if(4>X)return mn(S,7,"Truncated header.");var te=P[z+0]|P[z+1]<<8|P[z+2]<<16,re=S.Od;if(re.Rb=!(1&te),re.td=te>>1&7,re.yd=te>>4&1,re.ub=te>>5,3<re.td)return mn(S,3,"Incorrect keyframe parameters.");if(!re.yd)return mn(S,4,"Frame not displayable.");z+=3,X-=3;var ae=S.Kc;if(re.Rb){if(7>X)return mn(S,7,"cannot parse picture header");if(!xn(P,z,X))return mn(S,3,"Bad code word");ae.c=16383&(P[z+4]<<8|P[z+3]),ae.Td=P[z+4]>>6,ae.i=16383&(P[z+6]<<8|P[z+5]),ae.Ud=P[z+6]>>6,z+=7,X-=7,S.za=ae.c+15>>4,S.Ub=ae.i+15>>4,M.width=ae.c,M.height=ae.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,i((te=S.Pa).jb,0,255,te.jb.length),e((te=S.Qa)!=null),te.Cb=0,te.Bb=0,te.Fb=1,i(te.Zb,0,0,te.Zb.length),i(te.Lb,0,0,te.Lb)}if(re.ub>X)return mn(S,7,"bad partition length");$(te=S.m,P,z,re.ub),z+=re.ub,X-=re.ub,re.Rb&&(ae.Ld=Ee(te),ae.Kd=Ee(te)),ae=S.Qa;var ce,ye=S.Pa;if(e(te!=null),e(ae!=null),ae.Cb=Ee(te),ae.Cb){if(ae.Bb=Ee(te),Ee(te)){for(ae.Fb=Ee(te),ce=0;4>ce;++ce)ae.Zb[ce]=Ee(te)?le(te,7):0;for(ce=0;4>ce;++ce)ae.Lb[ce]=Ee(te)?le(te,6):0}if(ae.Bb)for(ce=0;3>ce;++ce)ye.jb[ce]=Ee(te)?J(te,8):255}else ae.Bb=0;if(te.Ka)return mn(S,3,"cannot parse segment header");if((ae=S.ed).zd=Ee(te),ae.Tb=J(te,6),ae.wb=J(te,3),ae.Pc=Ee(te),ae.Pc&&Ee(te)){for(ye=0;4>ye;++ye)Ee(te)&&(ae.vd[ye]=le(te,6));for(ye=0;4>ye;++ye)Ee(te)&&(ae.od[ye]=le(te,6))}if(S.L=ae.Tb==0?0:ae.zd?1:2,te.Ka)return mn(S,3,"cannot parse filter header");var xe=X;if(X=ce=z,z=ce+xe,ae=xe,S.Xb=(1<<J(S.m,2))-1,xe<3*(ye=S.Xb))P=7;else{for(ce+=3*ye,ae-=3*ye,xe=0;xe<ye;++xe){var je=P[X+0]|P[X+1]<<8|P[X+2]<<16;je>ae&&(je=ae),$(S.Jc[+xe],P,ce,je),ce+=je,ae-=je,X+=3}$(S.Jc[+ye],P,ce,ae),P=ce<z?0:5}if(P!=0)return mn(S,P,"cannot parse partitions");for(P=J(ce=S.m,7),X=Ee(ce)?le(ce,4):0,z=Ee(ce)?le(ce,4):0,ae=Ee(ce)?le(ce,4):0,ye=Ee(ce)?le(ce,4):0,ce=Ee(ce)?le(ce,4):0,xe=S.Qa,je=0;4>je;++je){if(xe.Cb){var $e=xe.Zb[je];xe.Fb||($e+=P)}else{if(0<je){S.pb[je]=S.pb[0];continue}$e=P}var Be=S.pb[je];Be.Sc[0]=vp[Bo($e+X,127)],Be.Sc[1]=uh[Bo($e+0,127)],Be.Eb[0]=2*vp[Bo($e+z,127)],Be.Eb[1]=101581*uh[Bo($e+ae,127)]>>16,8>Be.Eb[1]&&(Be.Eb[1]=8),Be.Qc[0]=vp[Bo($e+ye,117)],Be.Qc[1]=uh[Bo($e+ce,127)],Be.lc=$e+ce}if(!re.Rb)return mn(S,4,"Not a key frame.");for(Ee(te),re=S.Pa,P=0;4>P;++P){for(X=0;8>X;++X)for(z=0;3>z;++z)for(ae=0;11>ae;++ae)ye=Ce(te,Y1[P][X][z][ae])?J(te,8):Fg[P][X][z][ae],re.Wc[P][X].Yb[z][ae]=ye;for(X=0;17>X;++X)re.Xc[P][X]=re.Wc[P][Z1[X]]}return S.kc=Ee(te),S.kc&&(S.Bd=J(te,8)),S.cb=1}function Jn(S,M,P,z,X,te,re){var ae=M[X].Yb[P];for(P=0;16>X;++X){if(!Ce(S,ae[P+0]))return X;for(;!Ce(S,ae[P+1]);)if(ae=M[++X].Yb[0],P=0,X==16)return 16;var ce=M[X+1].Yb;if(Ce(S,ae[P+2])){var ye=S,xe=0;if(Ce(ye,($e=ae)[(je=P)+3]))if(Ce(ye,$e[je+6])){for(ae=0,je=2*(xe=Ce(ye,$e[je+8]))+($e=Ce(ye,$e[je+9+xe])),xe=0,$e=BS[je];$e[ae];++ae)xe+=xe+Ce(ye,$e[ae]);xe+=3+(8<<je)}else Ce(ye,$e[je+7])?(xe=7+2*Ce(ye,165),xe+=Ce(ye,145)):xe=5+Ce(ye,159);else xe=Ce(ye,$e[je+4])?3+Ce(ye,$e[je+5]):2;ae=ce[2]}else xe=1,ae=ce[1];ce=re+US[X],0>(ye=S).b&&we(ye);var je,$e=ye.b,Be=(je=ye.Ca>>1)-(ye.I>>$e)>>31;--ye.b,ye.Ca+=Be,ye.Ca|=1,ye.I-=(je+1&Be)<<$e,te[ce]=((xe^Be)-Be)*z[(0<X)+0]}return 16}function ar(S){var M=S.rb[S.sb-1];M.la=0,M.Na=0,i(S.zc,0,0,S.zc.length),S.ja=0}function Yr(S,M){if(S==null)return 0;if(M==null)return mn(S,2,"NULL VP8Io parameter in VP8Decode().");if(!S.cb&&!or(S,M))return 0;if(e(S.cb),M.ac==null||M.ac(M)){M.ob&&(S.L=0);var P=Wf[S.L];if(S.L==2?(S.yb=0,S.zb=0):(S.yb=M.v-P>>4,S.zb=M.j-P>>4,0>S.yb&&(S.yb=0),0>S.zb&&(S.zb=0)),S.Va=M.o+15+P>>4,S.Hb=M.va+15+P>>4,S.Hb>S.za&&(S.Hb=S.za),S.Va>S.Ub&&(S.Va=S.Ub),0<S.L){var z=S.ed;for(P=0;4>P;++P){var X;if(S.Qa.Cb){var te=S.Qa.Lb[P];S.Qa.Fb||(te+=z.Tb)}else te=z.Tb;for(X=0;1>=X;++X){var re=S.gd[P][X],ae=te;if(z.Pc&&(ae+=z.vd[0],X&&(ae+=z.od[0])),0<(ae=0>ae?0:63<ae?63:ae)){var ce=ae;0<z.wb&&(ce=4<z.wb?ce>>2:ce>>1)>9-z.wb&&(ce=9-z.wb),1>ce&&(ce=1),re.dd=ce,re.tc=2*ae+ce,re.ld=40<=ae?2:15<=ae?1:0}else re.tc=0;re.La=X}}}P=0}else mn(S,6,"Frame setup failed"),P=S.a;if(P=P==0){if(P){S.$c=0,0<S.Aa||(S.Ic=ny);e:{P=S.Ic,z=4*(ce=S.za);var ye=32*ce,xe=ce+1,je=0<S.L?ce*(0<S.Aa?2:1):0,$e=(S.Aa==2?2:1)*ce;if((re=z+832+(X=3*(16*P+Wf[S.L])/2*ye)+(te=S.Fa!=null&&0<S.Fa.length?S.Kc.c*S.Kc.i:0))!=re)P=0;else{if(re>S.Vb){if(S.Vb=0,S.Ec=o(re),S.Fc=0,S.Ec==null){P=mn(S,1,"no memory during frame initialization.");break e}S.Vb=re}re=S.Ec,ae=S.Fc,S.Ac=re,S.Bc=ae,ae+=z,S.Gd=s(ye,Ht),S.Hd=0,S.rb=s(xe+1,Ft),S.sb=1,S.wa=je?s(je,Rt):null,S.Y=0,S.D.Nb=0,S.D.wa=S.wa,S.D.Y=S.Y,0<S.Aa&&(S.D.Y+=ce),e(!0),S.oc=re,S.pc=ae,ae+=832,S.ya=s($e,an),S.aa=0,S.D.ya=S.ya,S.D.aa=S.aa,S.Aa==2&&(S.D.aa+=ce),S.R=16*ce,S.B=8*ce,ce=(ye=Wf[S.L])*S.R,ye=ye/2*S.B,S.sa=re,S.ta=ae+ce,S.qa=S.sa,S.ra=S.ta+16*P*S.R+ye,S.Ha=S.qa,S.Ia=S.ra+8*P*S.B+ye,S.$c=0,ae+=X,S.mb=te?re:null,S.nb=te?ae:null,e(ae+te<=S.Fc+S.Vb),ar(S),i(S.Ac,S.Bc,0,z),P=1}}if(P){if(M.ka=0,M.y=S.sa,M.O=S.ta,M.f=S.qa,M.N=S.ra,M.ea=S.Ha,M.Vd=S.Ia,M.fa=S.R,M.Rc=S.B,M.F=null,M.J=0,!Bf){for(P=-255;255>=P;++P)ci[255+P]=0>P?-P:P;for(P=-1020;1020>=P;++P)za[1020+P]=-128>P?-128:127<P?127:P;for(P=-112;112>=P;++P)sh[112+P]=-16>P?-16:15<P?15:P;for(P=-255;510>=P;++P)tc[255+P]=0>P?0:255<P?255:P;Bf=1}Cr=qc,Vs=oa,Qu=qi,Zi=Bs,Jr=Gu,Kr=kr,ha=Xu,Br=dl,Ti=Df,jr=Na,Ba=hp,Ws=au,fa=wo,oh=bs,ui=qu,Ua=Ia,ec=Oi,Jo=Jc,js[0]=Ra,js[1]=Xc,js[2]=lp,js[3]=Rg,js[4]=di,js[5]=Zc,js[6]=Yc,js[7]=Vu,js[8]=Kc,js[9]=kg,vl[0]=ap,vl[1]=Lg,vl[2]=sa,vl[3]=su,vl[4]=Xi,vl[5]=rr,vl[6]=Nf,Ha[0]=no,Ha[1]=Pg,Ha[2]=Us,Ha[3]=Ff,Ha[4]=ka,Ha[5]=aa,Ha[6]=ju,P=1}else P=0}P&&(P=function(Be,wt){for(Be.M=0;Be.M<Be.Va;++Be.M){var Qe,Re=Be.Jc[Be.M&Be.Xb],De=Be.m,mt=Be;for(Qe=0;Qe<mt.za;++Qe){var St=De,vt=mt,$t=vt.Ac,Dt=vt.Bc+4*Qe,fn=vt.zc,Ot=vt.ya[vt.aa+Qe];if(vt.Qa.Bb?Ot.$b=Ce(St,vt.Pa.jb[0])?2+Ce(St,vt.Pa.jb[2]):Ce(St,vt.Pa.jb[1]):Ot.$b=0,vt.kc&&(Ot.Ad=Ce(St,vt.Bd)),Ot.Za=!Ce(St,145)+0,Ot.Za){var sr=Ot.Ob,mr=0;for(vt=0;4>vt;++vt){var er,jn=fn[0+vt];for(er=0;4>er;++er){jn=zS[$t[Dt+er]][jn];for(var Ir=yp[Ce(St,jn[0])];0<Ir;)Ir=yp[2*Ir+Ce(St,jn[Ir])];jn=-Ir,$t[Dt+er]=jn}r(sr,mr,$t,Dt,4),mr+=4,fn[0+vt]=jn}}else jn=Ce(St,156)?Ce(St,128)?1:3:Ce(St,163)?2:0,Ot.Ob[0]=jn,i($t,Dt,jn,4),i(fn,0,jn,4);Ot.Dd=Ce(St,142)?Ce(St,114)?Ce(St,183)?1:3:2:0}if(mt.m.Ka)return mn(Be,7,"Premature end-of-partition0 encountered.");for(;Be.ja<Be.za;++Be.ja){if(mt=Re,St=(De=Be).rb[De.sb-1],$t=De.rb[De.sb+De.ja],Qe=De.ya[De.aa+De.ja],Dt=De.kc?Qe.Ad:0)St.la=$t.la=0,Qe.Za||(St.Na=$t.Na=0),Qe.Hc=0,Qe.Gc=0,Qe.ia=0;else{var Pr,kn;if(St=$t,$t=mt,Dt=De.Pa.Xc,fn=De.ya[De.aa+De.ja],Ot=De.pb[fn.$b],vt=fn.ad,sr=0,mr=De.rb[De.sb-1],jn=er=0,i(vt,sr,0,384),fn.Za)var pi=0,Ho=Dt[3];else{Ir=o(16);var mi=St.Na+mr.Na;if(mi=Gf($t,Dt[1],mi,Ot.Eb,0,Ir,0),St.Na=mr.Na=(0<mi)+0,1<mi)Cr(Ir,0,vt,sr);else{var so=Ir[0]+3>>3;for(Ir=0;256>Ir;Ir+=16)vt[sr+Ir]=so}pi=1,Ho=Dt[0]}var ur=15&St.la,Ao=15&mr.la;for(Ir=0;4>Ir;++Ir){var To=1&Ao;for(so=kn=0;4>so;++so)ur=ur>>1|(To=(mi=Gf($t,Ho,mi=To+(1&ur),Ot.Sc,pi,vt,sr))>pi)<<7,kn=kn<<2|(3<mi?3:1<mi?2:vt[sr+0]!=0),sr+=16;ur>>=4,Ao=Ao>>1|To<<7,er=(er<<8|kn)>>>0}for(Ho=ur,pi=Ao>>4,Pr=0;4>Pr;Pr+=2){for(kn=0,ur=St.la>>4+Pr,Ao=mr.la>>4+Pr,Ir=0;2>Ir;++Ir){for(To=1&Ao,so=0;2>so;++so)mi=To+(1&ur),ur=ur>>1|(To=0<(mi=Gf($t,Dt[2],mi,Ot.Qc,0,vt,sr)))<<3,kn=kn<<2|(3<mi?3:1<mi?2:vt[sr+0]!=0),sr+=16;ur>>=2,Ao=Ao>>1|To<<5}jn|=kn<<4*Pr,Ho|=ur<<4<<Pr,pi|=(240&Ao)<<Pr}St.la=Ho,mr.la=pi,fn.Hc=er,fn.Gc=jn,fn.ia=43690&jn?0:Ot.ia,Dt=!(er|jn)}if(0<De.L&&(De.wa[De.Y+De.ja]=De.gd[Qe.$b][Qe.Za],De.wa[De.Y+De.ja].La|=!Dt),mt.Ka)return mn(Be,7,"Premature end-of-file encountered.")}if(ar(Be),De=wt,mt=1,Qe=(Re=Be).D,St=0<Re.L&&Re.M>=Re.zb&&Re.M<=Re.Va,Re.Aa==0)e:{if(Qe.M=Re.M,Qe.uc=St,gl(Re,Qe),mt=1,Qe=(kn=Re.D).Nb,St=(jn=Wf[Re.L])*Re.R,$t=jn/2*Re.B,Ir=16*Qe*Re.R,so=8*Qe*Re.B,Dt=Re.sa,fn=Re.ta-St+Ir,Ot=Re.qa,vt=Re.ra-$t+so,sr=Re.Ha,mr=Re.Ia-$t+so,Ao=(ur=kn.M)==0,er=ur>=Re.Va-1,Re.Aa==2&&gl(Re,kn),kn.uc)for(To=(mi=Re).D.M,e(mi.D.uc),kn=mi.yb;kn<mi.Hb;++kn){pi=kn,Ho=To;var gi=(vi=(In=mi).D).Nb;Pr=In.R;var vi=vi.wa[vi.Y+pi],ao=In.sa,Qo=In.ta+16*gi*Pr+16*pi,qs=vi.dd,zi=vi.tc;if(zi!=0)if(e(3<=zi),In.L==1)0<pi&&Ua(ao,Qo,Pr,zi+4),vi.La&&Jo(ao,Qo,Pr,zi),0<Ho&&ui(ao,Qo,Pr,zi+4),vi.La&&ec(ao,Qo,Pr,zi);else{var da=In.B,rc=In.qa,yl=In.ra+8*gi*da+8*pi,Va=In.Ha,In=In.Ia+8*gi*da+8*pi;gi=vi.ld,0<pi&&(Br(ao,Qo,Pr,zi+4,qs,gi),jr(rc,yl,Va,In,da,zi+4,qs,gi)),vi.La&&(Ws(ao,Qo,Pr,zi,qs,gi),oh(rc,yl,Va,In,da,zi,qs,gi)),0<Ho&&(ha(ao,Qo,Pr,zi+4,qs,gi),Ti(rc,yl,Va,In,da,zi+4,qs,gi)),vi.La&&(Ba(ao,Qo,Pr,zi,qs,gi),fa(rc,yl,Va,In,da,zi,qs,gi))}}if(Re.ia&&alert("todo:DitherRow"),De.put!=null){if(kn=16*ur,ur=16*(ur+1),Ao?(De.y=Re.sa,De.O=Re.ta+Ir,De.f=Re.qa,De.N=Re.ra+so,De.ea=Re.Ha,De.W=Re.Ia+so):(kn-=jn,De.y=Dt,De.O=fn,De.f=Ot,De.N=vt,De.ea=sr,De.W=mr),er||(ur-=jn),ur>De.o&&(ur=De.o),De.F=null,De.J=null,Re.Fa!=null&&0<Re.Fa.length&&kn<ur&&(De.J=eh(Re,De,kn,ur-kn),De.F=Re.mb,De.F==null&&De.F.length==0)){mt=mn(Re,3,"Could not decode alpha data.");break e}kn<De.j&&(jn=De.j-kn,kn=De.j,e(!(1&jn)),De.O+=Re.R*jn,De.N+=Re.B*(jn>>1),De.W+=Re.B*(jn>>1),De.F!=null&&(De.J+=De.width*jn)),kn<ur&&(De.O+=De.v,De.N+=De.v>>1,De.W+=De.v>>1,De.F!=null&&(De.J+=De.v),De.ka=kn-De.j,De.U=De.va-De.v,De.T=ur-kn,mt=De.put(De))}Qe+1!=Re.Ic||er||(r(Re.sa,Re.ta-St,Dt,fn+16*Re.R,St),r(Re.qa,Re.ra-$t,Ot,vt+8*Re.B,$t),r(Re.Ha,Re.Ia-$t,sr,mr+8*Re.B,$t))}if(!mt)return mn(Be,6,"Output aborted.")}return 1}(S,M)),M.bc!=null&&M.bc(M),P&=1}return P?(S.cb=0,P):0}function hn(S,M,P,z,X){X=S[M+P+32*z]+(X>>3),S[M+P+32*z]=-256&X?0>X?0:255:X}function Er(S,M,P,z,X,te){hn(S,M,0,P,z+X),hn(S,M,1,P,z+te),hn(S,M,2,P,z-te),hn(S,M,3,P,z-X)}function Ln(S){return(20091*S>>16)+S}function Wn(S,M,P,z){var X,te=0,re=o(16);for(X=0;4>X;++X){var ae=S[M+0]+S[M+8],ce=S[M+0]-S[M+8],ye=(35468*S[M+4]>>16)-Ln(S[M+12]),xe=Ln(S[M+4])+(35468*S[M+12]>>16);re[te+0]=ae+xe,re[te+1]=ce+ye,re[te+2]=ce-ye,re[te+3]=ae-xe,te+=4,M++}for(X=te=0;4>X;++X)ae=(S=re[te+0]+4)+re[te+8],ce=S-re[te+8],ye=(35468*re[te+4]>>16)-Ln(re[te+12]),hn(P,z,0,0,ae+(xe=Ln(re[te+4])+(35468*re[te+12]>>16))),hn(P,z,1,0,ce+ye),hn(P,z,2,0,ce-ye),hn(P,z,3,0,ae-xe),te++,z+=32}function kr(S,M,P,z){var X=S[M+0]+4,te=35468*S[M+4]>>16,re=Ln(S[M+4]),ae=35468*S[M+1]>>16;Er(P,z,0,X+re,S=Ln(S[M+1]),ae),Er(P,z,1,X+te,S,ae),Er(P,z,2,X-te,S,ae),Er(P,z,3,X-re,S,ae)}function oa(S,M,P,z,X){Wn(S,M,P,z),X&&Wn(S,M+16,P,z+4)}function qi(S,M,P,z){Vs(S,M+0,P,z,1),Vs(S,M+32,P,z+128,1)}function Bs(S,M,P,z){var X;for(S=S[M+0]+4,X=0;4>X;++X)for(M=0;4>M;++M)hn(P,z,M,X,S)}function Gu(S,M,P,z){S[M+0]&&Zi(S,M+0,P,z),S[M+16]&&Zi(S,M+16,P,z+4),S[M+32]&&Zi(S,M+32,P,z+128),S[M+48]&&Zi(S,M+48,P,z+128+4)}function qc(S,M,P,z){var X,te=o(16);for(X=0;4>X;++X){var re=S[M+0+X]+S[M+12+X],ae=S[M+4+X]+S[M+8+X],ce=S[M+4+X]-S[M+8+X],ye=S[M+0+X]-S[M+12+X];te[0+X]=re+ae,te[8+X]=re-ae,te[4+X]=ye+ce,te[12+X]=ye-ce}for(X=0;4>X;++X)re=(S=te[0+4*X]+3)+te[3+4*X],ae=te[1+4*X]+te[2+4*X],ce=te[1+4*X]-te[2+4*X],ye=S-te[3+4*X],P[z+0]=re+ae>>3,P[z+16]=ye+ce>>3,P[z+32]=re-ae>>3,P[z+48]=ye-ce>>3,z+=64}function fl(S,M,P){var z,X=M-32,te=zo,re=255-S[X-1];for(z=0;z<P;++z){var ae,ce=te,ye=re+S[M-1];for(ae=0;ae<P;++ae)S[M+ae]=ce[ye+S[X+ae]];M+=32}}function Xc(S,M){fl(S,M,4)}function Pg(S,M){fl(S,M,8)}function Lg(S,M){fl(S,M,16)}function sa(S,M){var P;for(P=0;16>P;++P)r(S,M+32*P,S,M-32,16)}function su(S,M){var P;for(P=16;0<P;--P)i(S,M,S[M-1],16),M+=32}function La(S,M,P){var z;for(z=0;16>z;++z)i(M,P+32*z,S,16)}function ap(S,M){var P,z=16;for(P=0;16>P;++P)z+=S[M-1+32*P]+S[M+P-32];La(z>>5,S,M)}function Xi(S,M){var P,z=8;for(P=0;16>P;++P)z+=S[M-1+32*P];La(z>>4,S,M)}function rr(S,M){var P,z=8;for(P=0;16>P;++P)z+=S[M+P-32];La(z>>4,S,M)}function Nf(S,M){La(128,S,M)}function wn(S,M,P){return S+2*M+P+2>>2}function lp(S,M){var P,z=M-32;for(z=new Uint8Array([wn(S[z-1],S[z+0],S[z+1]),wn(S[z+0],S[z+1],S[z+2]),wn(S[z+1],S[z+2],S[z+3]),wn(S[z+2],S[z+3],S[z+4])]),P=0;4>P;++P)r(S,M+32*P,z,0,z.length)}function Rg(S,M){var P=S[M-1],z=S[M-1+32],X=S[M-1+64],te=S[M-1+96];Ge(S,M+0,16843009*wn(S[M-1-32],P,z)),Ge(S,M+32,16843009*wn(P,z,X)),Ge(S,M+64,16843009*wn(z,X,te)),Ge(S,M+96,16843009*wn(X,te,te))}function Ra(S,M){var P,z=4;for(P=0;4>P;++P)z+=S[M+P-32]+S[M-1+32*P];for(z>>=3,P=0;4>P;++P)i(S,M+32*P,z,4)}function di(S,M){var P=S[M-1+0],z=S[M-1+32],X=S[M-1+64],te=S[M-1-32],re=S[M+0-32],ae=S[M+1-32],ce=S[M+2-32],ye=S[M+3-32];S[M+0+96]=wn(z,X,S[M-1+96]),S[M+1+96]=S[M+0+64]=wn(P,z,X),S[M+2+96]=S[M+1+64]=S[M+0+32]=wn(te,P,z),S[M+3+96]=S[M+2+64]=S[M+1+32]=S[M+0+0]=wn(re,te,P),S[M+3+64]=S[M+2+32]=S[M+1+0]=wn(ae,re,te),S[M+3+32]=S[M+2+0]=wn(ce,ae,re),S[M+3+0]=wn(ye,ce,ae)}function Yc(S,M){var P=S[M+1-32],z=S[M+2-32],X=S[M+3-32],te=S[M+4-32],re=S[M+5-32],ae=S[M+6-32],ce=S[M+7-32];S[M+0+0]=wn(S[M+0-32],P,z),S[M+1+0]=S[M+0+32]=wn(P,z,X),S[M+2+0]=S[M+1+32]=S[M+0+64]=wn(z,X,te),S[M+3+0]=S[M+2+32]=S[M+1+64]=S[M+0+96]=wn(X,te,re),S[M+3+32]=S[M+2+64]=S[M+1+96]=wn(te,re,ae),S[M+3+64]=S[M+2+96]=wn(re,ae,ce),S[M+3+96]=wn(ae,ce,ce)}function Zc(S,M){var P=S[M-1+0],z=S[M-1+32],X=S[M-1+64],te=S[M-1-32],re=S[M+0-32],ae=S[M+1-32],ce=S[M+2-32],ye=S[M+3-32];S[M+0+0]=S[M+1+64]=te+re+1>>1,S[M+1+0]=S[M+2+64]=re+ae+1>>1,S[M+2+0]=S[M+3+64]=ae+ce+1>>1,S[M+3+0]=ce+ye+1>>1,S[M+0+96]=wn(X,z,P),S[M+0+64]=wn(z,P,te),S[M+0+32]=S[M+1+96]=wn(P,te,re),S[M+1+32]=S[M+2+96]=wn(te,re,ae),S[M+2+32]=S[M+3+96]=wn(re,ae,ce),S[M+3+32]=wn(ae,ce,ye)}function Vu(S,M){var P=S[M+0-32],z=S[M+1-32],X=S[M+2-32],te=S[M+3-32],re=S[M+4-32],ae=S[M+5-32],ce=S[M+6-32],ye=S[M+7-32];S[M+0+0]=P+z+1>>1,S[M+1+0]=S[M+0+64]=z+X+1>>1,S[M+2+0]=S[M+1+64]=X+te+1>>1,S[M+3+0]=S[M+2+64]=te+re+1>>1,S[M+0+32]=wn(P,z,X),S[M+1+32]=S[M+0+96]=wn(z,X,te),S[M+2+32]=S[M+1+96]=wn(X,te,re),S[M+3+32]=S[M+2+96]=wn(te,re,ae),S[M+3+64]=wn(re,ae,ce),S[M+3+96]=wn(ae,ce,ye)}function kg(S,M){var P=S[M-1+0],z=S[M-1+32],X=S[M-1+64],te=S[M-1+96];S[M+0+0]=P+z+1>>1,S[M+2+0]=S[M+0+32]=z+X+1>>1,S[M+2+32]=S[M+0+64]=X+te+1>>1,S[M+1+0]=wn(P,z,X),S[M+3+0]=S[M+1+32]=wn(z,X,te),S[M+3+32]=S[M+1+64]=wn(X,te,te),S[M+3+64]=S[M+2+64]=S[M+0+96]=S[M+1+96]=S[M+2+96]=S[M+3+96]=te}function Kc(S,M){var P=S[M-1+0],z=S[M-1+32],X=S[M-1+64],te=S[M-1+96],re=S[M-1-32],ae=S[M+0-32],ce=S[M+1-32],ye=S[M+2-32];S[M+0+0]=S[M+2+32]=P+re+1>>1,S[M+0+32]=S[M+2+64]=z+P+1>>1,S[M+0+64]=S[M+2+96]=X+z+1>>1,S[M+0+96]=te+X+1>>1,S[M+3+0]=wn(ae,ce,ye),S[M+2+0]=wn(re,ae,ce),S[M+1+0]=S[M+3+32]=wn(P,re,ae),S[M+1+32]=S[M+3+64]=wn(z,P,re),S[M+1+64]=S[M+3+96]=wn(X,z,P),S[M+1+96]=wn(te,X,z)}function Us(S,M){var P;for(P=0;8>P;++P)r(S,M+32*P,S,M-32,8)}function Ff(S,M){var P;for(P=0;8>P;++P)i(S,M,S[M-1],8),M+=32}function Wu(S,M,P){var z;for(z=0;8>z;++z)i(M,P+32*z,S,8)}function no(S,M){var P,z=8;for(P=0;8>P;++P)z+=S[M+P-32]+S[M-1+32*P];Wu(z>>4,S,M)}function aa(S,M){var P,z=4;for(P=0;8>P;++P)z+=S[M+P-32];Wu(z>>3,S,M)}function ka(S,M){var P,z=4;for(P=0;8>P;++P)z+=S[M-1+32*P];Wu(z>>3,S,M)}function ju(S,M){Wu(128,S,M)}function $u(S,M,P){var z=S[M-P],X=S[M+0],te=3*(X-z)+fp[1020+S[M-2*P]-S[M+P]],re=Uf[112+(te+4>>3)];S[M-P]=zo[255+z+Uf[112+(te+3>>3)]],S[M+0]=zo[255+X-re]}function up(S,M,P,z){var X=S[M+0],te=S[M+P];return bo[255+S[M-2*P]-S[M-P]]>z||bo[255+te-X]>z}function _s(S,M,P,z){return 4*bo[255+S[M-P]-S[M+0]]+bo[255+S[M-2*P]-S[M+P]]<=z}function cp(S,M,P,z,X){var te=S[M-3*P],re=S[M-2*P],ae=S[M-P],ce=S[M+0],ye=S[M+P],xe=S[M+2*P],je=S[M+3*P];return 4*bo[255+ae-ce]+bo[255+re-ye]>z?0:bo[255+S[M-4*P]-te]<=X&&bo[255+te-re]<=X&&bo[255+re-ae]<=X&&bo[255+je-xe]<=X&&bo[255+xe-ye]<=X&&bo[255+ye-ce]<=X}function qu(S,M,P,z){var X=2*z+1;for(z=0;16>z;++z)_s(S,M+z,P,X)&&$u(S,M+z,P)}function Ia(S,M,P,z){var X=2*z+1;for(z=0;16>z;++z)_s(S,M+z*P,1,X)&&$u(S,M+z*P,1)}function Oi(S,M,P,z){var X;for(X=3;0<X;--X)qu(S,M+=4*P,P,z)}function Jc(S,M,P,z){var X;for(X=3;0<X;--X)Ia(S,M+=4,P,z)}function la(S,M,P,z,X,te,re,ae){for(te=2*te+1;0<X--;){if(cp(S,M,P,te,re))if(up(S,M,P,ae))$u(S,M,P);else{var ce=S,ye=M,xe=P,je=ce[ye-2*xe],$e=ce[ye-xe],Be=ce[ye+0],wt=ce[ye+xe],Qe=ce[ye+2*xe],Re=27*(mt=fp[1020+3*(Be-$e)+fp[1020+je-wt]])+63>>7,De=18*mt+63>>7,mt=9*mt+63>>7;ce[ye-3*xe]=zo[255+ce[ye-3*xe]+mt],ce[ye-2*xe]=zo[255+je+De],ce[ye-xe]=zo[255+$e+Re],ce[ye+0]=zo[255+Be-Re],ce[ye+xe]=zo[255+wt-De],ce[ye+2*xe]=zo[255+Qe-mt]}M+=z}}function xo(S,M,P,z,X,te,re,ae){for(te=2*te+1;0<X--;){if(cp(S,M,P,te,re))if(up(S,M,P,ae))$u(S,M,P);else{var ce=S,ye=M,xe=P,je=ce[ye-xe],$e=ce[ye+0],Be=ce[ye+xe],wt=Uf[112+((Qe=3*($e-je))+4>>3)],Qe=Uf[112+(Qe+3>>3)],Re=wt+1>>1;ce[ye-2*xe]=zo[255+ce[ye-2*xe]+Re],ce[ye-xe]=zo[255+je+Qe],ce[ye+0]=zo[255+$e-wt],ce[ye+xe]=zo[255+Be-Re]}M+=z}}function Xu(S,M,P,z,X,te){la(S,M,P,1,16,z,X,te)}function dl(S,M,P,z,X,te){la(S,M,1,P,16,z,X,te)}function hp(S,M,P,z,X,te){var re;for(re=3;0<re;--re)xo(S,M+=4*P,P,1,16,z,X,te)}function au(S,M,P,z,X,te){var re;for(re=3;0<re;--re)xo(S,M+=4,1,P,16,z,X,te)}function Df(S,M,P,z,X,te,re,ae){la(S,M,X,1,8,te,re,ae),la(P,z,X,1,8,te,re,ae)}function Na(S,M,P,z,X,te,re,ae){la(S,M,1,X,8,te,re,ae),la(P,z,1,X,8,te,re,ae)}function wo(S,M,P,z,X,te,re,ae){xo(S,M+4*X,X,1,8,te,re,ae),xo(P,z+4*X,X,1,8,te,re,ae)}function bs(S,M,P,z,X,te,re,ae){xo(S,M+4,1,X,8,te,re,ae),xo(P,z+4,1,X,8,te,re,ae)}function Ms(){this.ba=new qe,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Et,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Yu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Qc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function zs(){this.ua=0,this.Wa=new ie,this.vb=new ie,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new V,this.yc=new B}function Fa(){this.xb=this.a=0,this.l=new Xt,this.ca=new qe,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new F,this.Pb=0,this.wd=new F,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new zs,this.ab=0,this.gc=s(4,Qc),this.Oc=0}function pl(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Xt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function lu(S,M,P,z,X,te,re){for(S=S==null?0:S[M+0],M=0;M<re;++M)X[te+M]=S+P[z+M]&255,S=X[te+M]}function uu(S,M,P,z,X,te,re){var ae;if(S==null)lu(null,null,P,z,X,te,re);else for(ae=0;ae<re;++ae)X[te+ae]=S[M+ae]+P[z+ae]&255}function ml(S,M,P,z,X,te,re){if(S==null)lu(null,null,P,z,X,te,re);else{var ae,ce=S[M+0],ye=ce,xe=ce;for(ae=0;ae<re;++ae)ye=xe+(ce=S[M+ae])-ye,xe=P[z+ae]+(-256&ye?0>ye?0:255:ye)&255,ye=ce,X[te+ae]=xe}}function eh(S,M,P,z){var X=M.width,te=M.o;if(e(S!=null&&M!=null),0>P||0>=z||P+z>te)return null;if(!S.Cc){if(S.ga==null){var re;if(S.ga=new pl,(re=S.ga==null)||(re=M.width*M.o,e(S.Gb.length==0),S.Gb=o(re),S.Uc=0,S.Gb==null?re=0:(S.mb=S.Gb,S.nb=S.Uc,S.rc=null,re=1),re=!re),!re){re=S.ga;var ae=S.Fa,ce=S.P,ye=S.qc,xe=S.mb,je=S.nb,$e=ce+1,Be=ye-1,wt=re.l;if(e(ae!=null&&xe!=null&&M!=null),$s[0]=null,$s[1]=lu,$s[2]=uu,$s[3]=ml,re.ca=xe,re.tb=je,re.c=M.width,re.i=M.height,e(0<re.c&&0<re.i),1>=ye)M=0;else if(re.$a=ae[ce+0]>>0&3,re.Z=ae[ce+0]>>2&3,re.Lc=ae[ce+0]>>4&3,ce=ae[ce+0]>>6&3,0>re.$a||1<re.$a||4<=re.Z||1<re.Lc||ce)M=0;else if(wt.put=bn,wt.ac=Kn,wt.bc=dr,wt.ma=re,wt.width=M.width,wt.height=M.height,wt.Da=M.Da,wt.v=M.v,wt.va=M.va,wt.j=M.j,wt.o=M.o,re.$a)e:{e(re.$a==1),M=ve();t:for(;;){if(M==null){M=0;break e}if(e(re!=null),re.mc=M,M.c=re.c,M.i=re.i,M.l=re.l,M.l.ma=re,M.l.width=re.c,M.l.height=re.i,M.a=0,H(M.m,ae,$e,Be),!me(re.c,re.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&Ko(M.s)?(re.ic=1,ae=M.c*M.i,M.Ta=null,M.Ua=0,M.V=o(ae),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(re.ic=0,M=Se(M,re.c)),!M))break t;M=1;break e}re.mc=null,M=0}else M=Be>=re.c*re.i;re=!M}if(re)return null;S.ga.Lc!=1?S.Ga=0:z=te-P}e(S.ga!=null),e(P+z<=te);e:{if(M=(ae=S.ga).c,te=ae.l.o,ae.$a==0){if($e=S.rc,Be=S.Vc,wt=S.Fa,ce=S.P+1+P*M,ye=S.mb,xe=S.nb+P*M,e(ce<=S.P+S.qc),ae.Z!=0)for(e($s[ae.Z]!=null),re=0;re<z;++re)$s[ae.Z]($e,Be,wt,ce,ye,xe,M),$e=ye,Be=xe,xe+=M,ce+=M;else for(re=0;re<z;++re)r(ye,xe,wt,ce,M),$e=ye,Be=xe,xe+=M,ce+=M;S.rc=$e,S.Vc=Be}else{if(e(ae.mc!=null),M=P+z,e((re=ae.mc)!=null),e(M<=re.i),re.C>=M)M=1;else if(ae.ic||He(),ae.ic){ae=re.V,$e=re.Ba,Be=re.c;var Qe=re.i,Re=(wt=1,ce=re.$/Be,ye=re.$%Be,xe=re.m,je=re.s,re.$),De=Be*Qe,mt=Be*M,St=je.wc,vt=Re<mt?xr(je,ye,ce):null;e(Re<=De),e(M<=Qe),e(Ko(je));t:for(;;){for(;!xe.h&&Re<mt;){if(ye&St||(vt=xr(je,ye,ce)),e(vt!=null),fe(xe),256>(Qe=si(vt.G[0],vt.H[0],xe)))ae[$e+Re]=Qe,++Re,++ye>=Be&&(ye=0,++ce<=M&&!(ce%16)&&Y(re,ce));else{if(!(280>Qe)){wt=0;break t}Qe=yo(Qe-256,xe);var $t,Dt=si(vt.G[4],vt.H[4],xe);if(fe(xe),!(Re>=(Dt=Do(Be,Dt=yo(Dt,xe)))&&De-Re>=Qe)){wt=0;break t}for($t=0;$t<Qe;++$t)ae[$e+Re+$t]=ae[$e+Re+$t-Dt];for(Re+=Qe,ye+=Qe;ye>=Be;)ye-=Be,++ce<=M&&!(ce%16)&&Y(re,ce);Re<mt&&ye&St&&(vt=xr(je,ye,ce))}e(xe.h==Q(xe))}Y(re,ce>M?M:ce);break t}!wt||xe.h&&Re<De?(wt=0,re.a=xe.h?5:3):re.$=Re,M=wt}else M=U(re,re.V,re.Ba,re.c,re.i,M,Xe);if(!M){z=0;break e}}P+z>=te&&(S.Cc=1),z=1}if(!z)return null;if(S.Cc&&((z=S.ga)!=null&&(z.mc=null),S.ga=null,0<S.Ga))return alert("todo:WebPDequantizeLevels"),null}return S.nb+P*X}function T(S,M,P,z,X,te){for(;0<X--;){var re,ae=S,ce=M+(P?1:0),ye=S,xe=M+(P?0:3);for(re=0;re<z;++re){var je=ye[xe+4*re];je!=255&&(je*=32897,ae[ce+4*re+0]=ae[ce+4*re+0]*je>>23,ae[ce+4*re+1]=ae[ce+4*re+1]*je>>23,ae[ce+4*re+2]=ae[ce+4*re+2]*je>>23)}M+=te}}function K(S,M,P,z,X){for(;0<z--;){var te;for(te=0;te<P;++te){var re=S[M+2*te+0],ae=15&(ye=S[M+2*te+1]),ce=4369*ae,ye=(240&ye|ye>>4)*ce>>16;S[M+2*te+0]=(240&re|re>>4)*ce>>16&240|(15&re|re<<4)*ce>>16>>4&15,S[M+2*te+1]=240&ye|ae}M+=X}}function _e(S,M,P,z,X,te,re,ae){var ce,ye,xe=255;for(ye=0;ye<X;++ye){for(ce=0;ce<z;++ce){var je=S[M+ce];te[re+4*ce]=je,xe&=je}M+=P,re+=ae}return xe!=255}function Le(S,M,P,z,X){var te;for(te=0;te<X;++te)P[z+te]=S[M+te]>>8}function He(){Ci=T,Qn=K,lr=_e,$r=Le}function at(S,M,P){L[S]=function(z,X,te,re,ae,ce,ye,xe,je,$e,Be,wt,Qe,Re,De,mt,St){var vt,$t=St-1>>1,Dt=ae[ce+0]|ye[xe+0]<<16,fn=je[$e+0]|Be[wt+0]<<16;e(z!=null);var Ot=3*Dt+fn+131074>>2;for(M(z[X+0],255&Ot,Ot>>16,Qe,Re),te!=null&&(Ot=3*fn+Dt+131074>>2,M(te[re+0],255&Ot,Ot>>16,De,mt)),vt=1;vt<=$t;++vt){var sr=ae[ce+vt]|ye[xe+vt]<<16,mr=je[$e+vt]|Be[wt+vt]<<16,er=Dt+sr+fn+mr+524296,jn=er+2*(sr+fn)>>3;Ot=jn+Dt>>1,Dt=(er=er+2*(Dt+mr)>>3)+sr>>1,M(z[X+2*vt-1],255&Ot,Ot>>16,Qe,Re+(2*vt-1)*P),M(z[X+2*vt-0],255&Dt,Dt>>16,Qe,Re+(2*vt-0)*P),te!=null&&(Ot=er+fn>>1,Dt=jn+mr>>1,M(te[re+2*vt-1],255&Ot,Ot>>16,De,mt+(2*vt-1)*P),M(te[re+2*vt+0],255&Dt,Dt>>16,De,mt+(2*vt+0)*P)),Dt=sr,fn=mr}1&St||(Ot=3*Dt+fn+131074>>2,M(z[X+St-1],255&Ot,Ot>>16,Qe,Re+(St-1)*P),te!=null&&(Ot=3*fn+Dt+131074>>2,M(te[re+St-1],255&Ot,Ot>>16,De,mt+(St-1)*P)))}}function bt(){Mo[zf]=xp,Mo[nc]=Og,Mo[Hf]=wp,Mo[ah]=ch,Mo[fu]=oo,Mo[dp]=K1,Mo[Ig]=HS,Mo[pp]=Og,Mo[mp]=ch,Mo[lh]=oo,Mo[gp]=K1}function Ut(S){return S&~J1?0>S?0:255:S>>Bg}function on(S,M){return Ut((19077*S>>8)+(26149*M>>8)-14234)}function _n(S,M,P){return Ut((19077*S>>8)-(6419*M>>8)-(13320*P>>8)+8708)}function un(S,M){return Ut((19077*S>>8)+(33050*M>>8)-17685)}function An(S,M,P,z,X){z[X+0]=on(S,P),z[X+1]=_n(S,M,P),z[X+2]=un(S,M)}function wr(S,M,P,z,X){z[X+0]=un(S,M),z[X+1]=_n(S,M,P),z[X+2]=on(S,P)}function pr(S,M,P,z,X){var te=_n(S,M,P);M=te<<3&224|un(S,M)>>3,z[X+0]=248&on(S,P)|te>>5,z[X+1]=M}function Ar(S,M,P,z,X){var te=240&un(S,M)|15;z[X+0]=240&on(S,P)|_n(S,M,P)>>4,z[X+1]=te}function ai(S,M,P,z,X){z[X+0]=255,An(S,M,P,z,X+1)}function Bi(S,M,P,z,X){wr(S,M,P,z,X),z[X+3]=255}function Es(S,M,P,z,X){An(S,M,P,z,X),z[X+3]=255}function Bo(S,M){return 0>S?0:S>M?M:S}function li(S,M,P){L[S]=function(z,X,te,re,ae,ce,ye,xe,je){for(var $e=xe+(-2&je)*P;xe!=$e;)M(z[X+0],te[re+0],ae[ce+0],ye,xe),M(z[X+1],te[re+0],ae[ce+0],ye,xe+P),X+=2,++re,++ce,xe+=2*P;1&je&&M(z[X+0],te[re+0],ae[ce+0],ye,xe)}}function So(S,M,P){return P==0?S==0?M==0?6:5:M==0?4:0:P}function Tr(S,M,P,z,X){switch(S>>>30){case 3:Vs(M,P,z,X,0);break;case 2:Kr(M,P,z,X);break;case 1:Zi(M,P,z,X)}}function gl(S,M){var P,z,X=M.M,te=M.Nb,re=S.oc,ae=S.pc+40,ce=S.oc,ye=S.pc+584,xe=S.oc,je=S.pc+600;for(P=0;16>P;++P)re[ae+32*P-1]=129;for(P=0;8>P;++P)ce[ye+32*P-1]=129,xe[je+32*P-1]=129;for(0<X?re[ae-1-32]=ce[ye-1-32]=xe[je-1-32]=129:(i(re,ae-32-1,127,21),i(ce,ye-32-1,127,9),i(xe,je-32-1,127,9)),z=0;z<S.za;++z){var $e=M.ya[M.aa+z];if(0<z){for(P=-1;16>P;++P)r(re,ae+32*P-4,re,ae+32*P+12,4);for(P=-1;8>P;++P)r(ce,ye+32*P-4,ce,ye+32*P+4,4),r(xe,je+32*P-4,xe,je+32*P+4,4)}var Be=S.Gd,wt=S.Hd+z,Qe=$e.ad,Re=$e.Hc;if(0<X&&(r(re,ae-32,Be[wt].y,0,16),r(ce,ye-32,Be[wt].f,0,8),r(xe,je-32,Be[wt].ea,0,8)),$e.Za){var De=re,mt=ae-32+16;for(0<X&&(z>=S.za-1?i(De,mt,Be[wt].y[15],4):r(De,mt,Be[wt+1].y,0,4)),P=0;4>P;P++)De[mt+128+P]=De[mt+256+P]=De[mt+384+P]=De[mt+0+P];for(P=0;16>P;++P,Re<<=2)De=re,mt=ae+Vf[P],js[$e.Ob[P]](De,mt),Tr(Re,Qe,16*+P,De,mt)}else if(De=So(z,X,$e.Ob[0]),vl[De](re,ae),Re!=0)for(P=0;16>P;++P,Re<<=2)Tr(Re,Qe,16*+P,re,ae+Vf[P]);for(P=$e.Gc,De=So(z,X,$e.Dd),Ha[De](ce,ye),Ha[De](xe,je),Re=Qe,De=ce,mt=ye,255&($e=P>>0)&&(170&$e?Qu(Re,256,De,mt):Jr(Re,256,De,mt)),$e=xe,Re=je,255&(P>>=8)&&(170&P?Qu(Qe,320,$e,Re):Jr(Qe,320,$e,Re)),X<S.Ub-1&&(r(Be[wt].y,0,re,ae+480,16),r(Be[wt].f,0,ce,ye+224,8),r(Be[wt].ea,0,xe,je+224,8)),P=8*te*S.B,Be=S.sa,wt=S.ta+16*z+16*te*S.R,Qe=S.qa,$e=S.ra+8*z+P,Re=S.Ha,De=S.Ia+8*z+P,P=0;16>P;++P)r(Be,wt+P*S.R,re,ae+32*P,16);for(P=0;8>P;++P)r(Qe,$e+P*S.B,ce,ye+32*P,8),r(Re,De+P*S.B,xe,je+32*P,8)}}function _o(S,M,P,z,X,te,re,ae,ce){var ye=[0],xe=[0],je=0,$e=ce!=null?ce.kd:0,Be=ce??new Yu;if(S==null||12>P)return 7;Be.data=S,Be.w=M,Be.ha=P,M=[M],P=[P],Be.gb=[Be.gb];e:{var wt=M,Qe=P,Re=Be.gb;if(e(S!=null),e(Qe!=null),e(Re!=null),Re[0]=0,12<=Qe[0]&&!t(S,wt[0],"RIFF")){if(t(S,wt[0]+8,"WEBP")){Re=3;break e}var De=ke(S,wt[0]+4);if(12>De||4294967286<De){Re=3;break e}if($e&&De>Qe[0]-8){Re=7;break e}Re[0]=De,wt[0]+=12,Qe[0]-=12}Re=0}if(Re!=0)return Re;for(De=0<Be.gb[0],P=P[0];;){e:{var mt=S;Qe=M,Re=P;var St=ye,vt=xe,$t=wt=[0];if((Ot=je=[je])[0]=0,8>Re[0])Re=7;else{if(!t(mt,Qe[0],"VP8X")){if(ke(mt,Qe[0]+4)!=10){Re=3;break e}if(18>Re[0]){Re=7;break e}var Dt=ke(mt,Qe[0]+8),fn=1+he(mt,Qe[0]+12);if(2147483648<=fn*(mt=1+he(mt,Qe[0]+15))){Re=3;break e}$t!=null&&($t[0]=Dt),St!=null&&(St[0]=fn),vt!=null&&(vt[0]=mt),Qe[0]+=18,Re[0]-=18,Ot[0]=1}Re=0}}if(je=je[0],wt=wt[0],Re!=0)return Re;if(Qe=!!(2&wt),!De&&je)return 3;if(te!=null&&(te[0]=!!(16&wt)),re!=null&&(re[0]=Qe),ae!=null&&(ae[0]=0),re=ye[0],wt=xe[0],je&&Qe&&ce==null){Re=0;break}if(4>P){Re=7;break}if(De&&je||!De&&!je&&!t(S,M[0],"ALPH")){P=[P],Be.na=[Be.na],Be.P=[Be.P],Be.Sa=[Be.Sa];e:{Dt=S,Re=M,De=P;var Ot=Be.gb;St=Be.na,vt=Be.P,$t=Be.Sa,fn=22,e(Dt!=null),e(De!=null),mt=Re[0];var sr=De[0];for(e(St!=null),e($t!=null),St[0]=null,vt[0]=null,$t[0]=0;;){if(Re[0]=mt,De[0]=sr,8>sr){Re=7;break e}var mr=ke(Dt,mt+4);if(4294967286<mr){Re=3;break e}var er=8+mr+1&-2;if(fn+=er,0<Ot&&fn>Ot){Re=3;break e}if(!t(Dt,mt,"VP8 ")||!t(Dt,mt,"VP8L")){Re=0;break e}if(sr[0]<er){Re=7;break e}t(Dt,mt,"ALPH")||(St[0]=Dt,vt[0]=mt+8,$t[0]=mr),mt+=er,sr-=er}}if(P=P[0],Be.na=Be.na[0],Be.P=Be.P[0],Be.Sa=Be.Sa[0],Re!=0)break}P=[P],Be.Ja=[Be.Ja],Be.xa=[Be.xa];e:if(Ot=S,Re=M,De=P,St=Be.gb[0],vt=Be.Ja,$t=Be.xa,Dt=Re[0],mt=!t(Ot,Dt,"VP8 "),fn=!t(Ot,Dt,"VP8L"),e(Ot!=null),e(De!=null),e(vt!=null),e($t!=null),8>De[0])Re=7;else{if(mt||fn){if(Ot=ke(Ot,Dt+4),12<=St&&Ot>St-12){Re=3;break e}if($e&&Ot>De[0]-8){Re=7;break e}vt[0]=Ot,Re[0]+=8,De[0]-=8,$t[0]=fn}else $t[0]=5<=De[0]&&Ot[Dt+0]==47&&!(Ot[Dt+4]>>5),vt[0]=De[0];Re=0}if(P=P[0],Be.Ja=Be.Ja[0],Be.xa=Be.xa[0],M=M[0],Re!=0)break;if(4294967286<Be.Ja)return 3;if(ae==null||Qe||(ae[0]=Be.xa?2:1),re=[re],wt=[wt],Be.xa){if(5>P){Re=7;break}ae=re,$e=wt,Qe=te,S==null||5>P?S=0:5<=P&&S[M+0]==47&&!(S[M+4]>>5)?(De=[0],Ot=[0],St=[0],H(vt=new F,S,M,P),Vt(vt,De,Ot,St)?(ae!=null&&(ae[0]=De[0]),$e!=null&&($e[0]=Ot[0]),Qe!=null&&(Qe[0]=St[0]),S=1):S=0):S=0}else{if(10>P){Re=7;break}ae=wt,S==null||10>P||!xn(S,M+3,P-3)?S=0:($e=S[M+0]|S[M+1]<<8|S[M+2]<<16,Qe=16383&(S[M+7]<<8|S[M+6]),S=16383&(S[M+9]<<8|S[M+8]),1&$e||3<($e>>1&7)||!($e>>4&1)||$e>>5>=Be.Ja||!Qe||!S?S=0:(re&&(re[0]=Qe),ae&&(ae[0]=S),S=1))}if(!S||(re=re[0],wt=wt[0],je&&(ye[0]!=re||xe[0]!=wt)))return 3;ce!=null&&(ce[0]=Be,ce.offset=M-ce.w,e(4294967286>M-ce.w),e(ce.offset==ce.ha-P));break}return Re==0||Re==7&&je&&ce==null?(te!=null&&(te[0]|=Be.na!=null&&0<Be.na.length),z!=null&&(z[0]=re),X!=null&&(X[0]=wt),0):Re}function th(S,M,P){var z=M.width,X=M.height,te=0,re=0,ae=z,ce=X;if(M.Da=S!=null&&0<S.Da,M.Da&&(ae=S.cd,ce=S.bd,te=S.v,re=S.j,11>P||(te&=-2,re&=-2),0>te||0>re||0>=ae||0>=ce||te+ae>z||re+ce>X))return 0;if(M.v=te,M.j=re,M.va=te+ae,M.o=re+ce,M.U=ae,M.T=ce,M.da=S!=null&&0<S.da,M.da){if(!Ke(ae,ce,P=[S.ib],te=[S.hb]))return 0;M.ib=P[0],M.hb=te[0]}return M.ob=S!=null&&S.ob,M.Kb=S==null||!S.Sd,M.da&&(M.ob=M.ib<3*z/4&&M.hb<3*X/4,M.Kb=0),1}function nh(S){if(S==null)return 2;if(11>S.S){var M=S.f.RGBA;M.fb+=(S.height-1)*M.A,M.A=-M.A}else M=S.f.kb,S=S.height,M.O+=(S-1)*M.fa,M.fa=-M.fa,M.N+=(S-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(S-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(S-1)*M.lb,M.lb=-M.lb);return 0}function cu(S,M,P,z){if(z==null||0>=S||0>=M)return 2;if(P!=null){if(P.Da){var X=P.cd,te=P.bd,re=-2&P.v,ae=-2&P.j;if(0>re||0>ae||0>=X||0>=te||re+X>S||ae+te>M)return 2;S=X,M=te}if(P.da){if(!Ke(S,M,X=[P.ib],te=[P.hb]))return 2;S=X[0],M=te[0]}}z.width=S,z.height=M;e:{var ce=z.width,ye=z.height;if(S=z.S,0>=ce||0>=ye||!(S>=zf&&13>S))S=2;else{if(0>=z.Rd&&z.sd==null){re=te=X=M=0;var xe=(ae=ce*Vg[S])*ye;if(11>S||(te=(ye+1)/2*(M=(ce+1)/2),S==12&&(re=(X=ce)*ye)),(ye=o(xe+2*te+re))==null){S=1;break e}z.sd=ye,11>S?((ce=z.f.RGBA).eb=ye,ce.fb=0,ce.A=ae,ce.size=xe):((ce=z.f.kb).y=ye,ce.O=0,ce.fa=ae,ce.Fd=xe,ce.f=ye,ce.N=0+xe,ce.Ab=M,ce.Cd=te,ce.ea=ye,ce.W=0+xe+te,ce.Db=M,ce.Ed=te,S==12&&(ce.F=ye,ce.J=0+xe+2*te),ce.Tc=re,ce.lb=X)}if(M=1,X=z.S,te=z.width,re=z.height,X>=zf&&13>X)if(11>X)S=z.f.RGBA,M&=(ae=Math.abs(S.A))*(re-1)+te<=S.size,M&=ae>=te*Vg[X],M&=S.eb!=null;else{S=z.f.kb,ae=(te+1)/2,xe=(re+1)/2,ce=Math.abs(S.fa),ye=Math.abs(S.Ab);var je=Math.abs(S.Db),$e=Math.abs(S.lb),Be=$e*(re-1)+te;M&=ce*(re-1)+te<=S.Fd,M&=ye*(xe-1)+ae<=S.Cd,M=(M&=je*(xe-1)+ae<=S.Ed)&ce>=te&ye>=ae&je>=ae,M&=S.y!=null,M&=S.f!=null,M&=S.ea!=null,X==12&&(M&=$e>=te,M&=Be<=S.Tc,M&=S.F!=null)}else M=0;S=M?0:2}}return S!=0||P!=null&&P.fd&&(S=nh(z)),S}var Ui=64,Zu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Da=24,ua=32,Ku=8,Yi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];nt("Predictor0","PredictorAdd0"),L.Predictor0=function(){return 4278190080},L.Predictor1=function(S){return S},L.Predictor2=function(S,M,P){return M[P+0]},L.Predictor3=function(S,M,P){return M[P+1]},L.Predictor4=function(S,M,P){return M[P-1]},L.Predictor5=function(S,M,P){return _t(_t(S,M[P+1]),M[P+0])},L.Predictor6=function(S,M,P){return _t(S,M[P-1])},L.Predictor7=function(S,M,P){return _t(S,M[P+0])},L.Predictor8=function(S,M,P){return _t(M[P-1],M[P+0])},L.Predictor9=function(S,M,P){return _t(M[P+0],M[P+1])},L.Predictor10=function(S,M,P){return _t(_t(S,M[P-1]),_t(M[P+0],M[P+1]))},L.Predictor11=function(S,M,P){var z=M[P+0];return 0>=Fe(z>>24&255,S>>24&255,(M=M[P-1])>>24&255)+Fe(z>>16&255,S>>16&255,M>>16&255)+Fe(z>>8&255,S>>8&255,M>>8&255)+Fe(255&z,255&S,255&M)?z:S},L.Predictor12=function(S,M,P){var z=M[P+0];return(de((S>>24&255)+(z>>24&255)-((M=M[P-1])>>24&255))<<24|de((S>>16&255)+(z>>16&255)-(M>>16&255))<<16|de((S>>8&255)+(z>>8&255)-(M>>8&255))<<8|de((255&S)+(255&z)-(255&M)))>>>0},L.Predictor13=function(S,M,P){var z=M[P-1];return(ee((S=_t(S,M[P+0]))>>24&255,z>>24&255)<<24|ee(S>>16&255,z>>16&255)<<16|ee(S>>8&255,z>>8&255)<<8|ee(S>>0&255,z>>0&255))>>>0};var rh=L.PredictorAdd0;L.PredictorAdd1=ot,nt("Predictor2","PredictorAdd2"),nt("Predictor3","PredictorAdd3"),nt("Predictor4","PredictorAdd4"),nt("Predictor5","PredictorAdd5"),nt("Predictor6","PredictorAdd6"),nt("Predictor7","PredictorAdd7"),nt("Predictor8","PredictorAdd8"),nt("Predictor9","PredictorAdd9"),nt("Predictor10","PredictorAdd10"),nt("Predictor11","PredictorAdd11"),nt("Predictor12","PredictorAdd12"),nt("Predictor13","PredictorAdd13");var ih=L.PredictorAdd2;ht("ColorIndexInverseTransform","MapARGB","32b",function(S){return S>>8&255},function(S){return S}),ht("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(S){return S},function(S){return S>>8&255});var Of,ro=L.ColorIndexInverseTransform,Ju=L.MapARGB,hu=L.VP8LColorIndexInverseTransformAlpha,Uo=L.MapAlpha,Hs=L.VP8LPredictorsAdd=[];Hs.length=16,(L.VP8LPredictors=[]).length=16,(L.VP8LPredictorsAdd_C=[]).length=16,(L.VP8LPredictors_C=[]).length=16;var Gs,Zr,io,As,Oa,ca,Cr,Vs,Kr,Qu,Zi,Jr,ha,Br,Ti,jr,Ba,Ws,fa,oh,ui,Ua,ec,Jo,Ci,Qn,lr,$r,ci=o(511),za=o(2041),sh=o(225),tc=o(767),Bf=0,fp=za,Uf=sh,zo=tc,bo=ci,zf=0,nc=1,Hf=2,ah=3,fu=4,dp=5,Ig=6,pp=7,mp=8,lh=9,gp=10,j1=[2,3,7],FS=[3,3,11],Ng=[280,256,256,256,40],DS=[0,1,1,1,0],OS=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],$1=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],q1=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],X1=8,vp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],uh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Gf=null,BS=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],US=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],yp=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Fg=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],zS=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Y1=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Z1=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],vl=[],js=[],Ha=[],Ga=1,Dg=2,$s=[],Mo=[];at("UpsampleRgbLinePair",An,3),at("UpsampleBgrLinePair",wr,3),at("UpsampleRgbaLinePair",Es,4),at("UpsampleBgraLinePair",Bi,4),at("UpsampleArgbLinePair",ai,4),at("UpsampleRgba4444LinePair",Ar,2),at("UpsampleRgb565LinePair",pr,2);var xp=L.UpsampleRgbLinePair,wp=L.UpsampleBgrLinePair,Og=L.UpsampleRgbaLinePair,ch=L.UpsampleBgraLinePair,oo=L.UpsampleArgbLinePair,K1=L.UpsampleRgba4444LinePair,HS=L.UpsampleRgb565LinePair,Eo=16,Ki=1<<Eo-1,hh=-227,Sp=482,Bg=6,J1=(256<<Bg)-1,Ug=0,zg=o(256),Q1=o(256),Hg=o(256),ey=o(256),ty=o(Sp-hh),_p=o(Sp-hh);li("YuvToRgbRow",An,3),li("YuvToBgrRow",wr,3),li("YuvToRgbaRow",Es,4),li("YuvToBgraRow",Bi,4),li("YuvToArgbRow",ai,4),li("YuvToRgba4444Row",Ar,2),li("YuvToRgb565Row",pr,2);var Vf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Wf=[0,2,8],Gg=[8,7,6,4,4,2,2,2,1,1,1,1],ny=1;this.WebPDecodeRGBA=function(S,M,P,z,X){var te=nc,re=new Ms,ae=new qe;re.ba=ae,ae.S=te,ae.width=[ae.width],ae.height=[ae.height];var ce=ae.width,ye=ae.height,xe=new Mt;if(xe==null||S==null)var je=2;else e(xe!=null),je=_o(S,M,P,xe.width,xe.height,xe.Pd,xe.Qd,xe.format,null);if(je!=0?ce=0:(ce!=null&&(ce[0]=xe.width[0]),ye!=null&&(ye[0]=xe.height[0]),ce=1),ce){ae.width=ae.width[0],ae.height=ae.height[0],z!=null&&(z[0]=ae.width),X!=null&&(X[0]=ae.height);e:{if(z=new Xt,(X=new Yu).data=S,X.w=M,X.ha=P,X.kd=1,M=[0],e(X!=null),((S=_o(X.data,X.w,X.ha,null,null,null,M,null,X))==0||S==7)&&M[0]&&(S=4),(M=S)==0){if(e(re!=null),z.data=X.data,z.w=X.w+X.offset,z.ha=X.ha-X.offset,z.put=bn,z.ac=Kn,z.bc=dr,z.ma=re,X.xa){if((S=ve())==null){re=1;break e}if(function($e,Be){var wt=[0],Qe=[0],Re=[0];t:for(;;){if($e==null)return 0;if(Be==null)return $e.a=2,0;if($e.l=Be,$e.a=0,H($e.m,Be.data,Be.w,Be.ha),!Vt($e.m,wt,Qe,Re)){$e.a=3;break t}if($e.xb=Dg,Be.width=wt[0],Be.height=Qe[0],!me(wt[0],Qe[0],1,$e,null))break t;return 1}return e($e.a!=0),0}(S,z)){if(z=(M=cu(z.width,z.height,re.Oa,re.ba))==0){t:{z=S;n:for(;;){if(z==null){z=0;break t}if(e(z.s.yc!=null),e(z.s.Ya!=null),e(0<z.s.Wb),e((P=z.l)!=null),e((X=P.ma)!=null),z.xb!=0){if(z.ca=X.ba,z.tb=X.tb,e(z.ca!=null),!th(X.Oa,P,ah)){z.a=2;break n}if(!Se(z,P.width)||P.da)break n;if((P.da||pt(z.ca.S))&&He(),11>z.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),z.ca.f.kb.F!=null&&He()),z.Pb&&0<z.s.ua&&z.s.vb.X==null&&!Ne(z.s.vb,z.s.Wa.Xa)){z.a=1;break n}z.xb=0}if(!U(z,z.V,z.Ba,z.c,z.i,P.o,Mn))break n;X.Dc=z.Ma,z=1;break t}e(z.a!=0),z=0}z=!z}z&&(M=S.a)}else M=S.a}else{if((S=new En)==null){re=1;break e}if(S.Fa=X.na,S.P=X.P,S.qc=X.Sa,or(S,z)){if((M=cu(z.width,z.height,re.Oa,re.ba))==0){if(S.Aa=0,P=re.Oa,e((X=S)!=null),P!=null){if(0<(ce=0>(ce=P.Md)?0:100<ce?255:255*ce/100)){for(ye=xe=0;4>ye;++ye)12>(je=X.pb[ye]).lc&&(je.ia=ce*Gg[0>je.lc?0:je.lc]>>3),xe|=je.ia;xe&&(alert("todo:VP8InitRandom"),X.ia=1)}X.Ga=P.Id,100<X.Ga?X.Ga=100:0>X.Ga&&(X.Ga=0)}Yr(S,z)||(M=S.a)}}else M=S.a}M==0&&re.Oa!=null&&re.Oa.fd&&(M=nh(re.ba))}re=M}te=re!=0?null:11>te?ae.f.RGBA.eb:ae.f.kb.y}else te=null;return te};var Vg=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(L,k){for(var D="",N=0;N<4;N++)D+=String.fromCharCode(L[k++]);return D}function c(L,k){return(L[k+0]<<0|L[k+1]<<8|L[k+2]<<16)>>>0}function h(L,k){return(L[k+0]<<0|L[k+1]<<8|L[k+2]<<16|L[k+3]<<24)>>>0}new l;var f=[0],d=[0],v=[],y=new l,w=n,g=function(L,k){var D={},N=0,B=!1,G=0,V=0;if(D.frames=[],!function(j,Q,se,fe){for(var we=0;we<fe;we++)if(j[Q+we]!=se.charCodeAt(we))return!0;return!1}(L,k,"RIFF",4)){for(h(L,k+=4),k+=8;k<L.length;){var $=u(L,k),J=h(L,k+=4);k+=4;var le=J+(1&J);switch($){case"VP8 ":case"VP8L":D.frames[N]===void 0&&(D.frames[N]={}),(Z=D.frames[N]).src_off=B?V:k-8,Z.src_size=G+J+8,N++,B&&(B=!1,G=0,V=0);break;case"VP8X":(Z=D.header={}).feature_flags=L[k];var H=k+4;Z.canvas_width=1+c(L,H),H+=3,Z.canvas_height=1+c(L,H),H+=3;break;case"ALPH":B=!0,G=le+8,V=k-8;break;case"ANIM":(Z=D.header).bgcolor=h(L,k),H=k+4,Z.loop_count=(oe=L)[(F=H)+0]<<0|oe[F+1]<<8,H+=2;break;case"ANMF":var q,Z;(Z=D.frames[N]={}).offset_x=2*c(L,k),k+=3,Z.offset_y=2*c(L,k),k+=3,Z.width=1+c(L,k),k+=3,Z.height=1+c(L,k),k+=3,Z.duration=c(L,k),k+=3,q=L[k++],Z.dispose=1&q,Z.blend=q>>1&1}$!="ANMF"&&(k+=le)}var oe,F;return D}}(w,0);g.response=w,g.rgbaoutput=!0,g.dataurl=!1;var x=g.header?g.header:null,_=g.frames?g.frames:null;if(x){x.loop_counter=x.loop_count,f=[x.canvas_height],d=[x.canvas_width];for(var E=0;E<_.length&&_[E].blend!=0;E++);}var C=_[0],I=y.WebPDecodeRGBA(w,C.src_off,C.src_size,d,f);C.rgba=I,C.imgwidth=d[0],C.imgheight=f[0];for(var R=0;R<d[0]*f[0]*4;R++)v[R]=I[R];return this.width=d,this.height=f,this.data=v,this}(function(n){var e=function(){return typeof ZM=="function"},t=function(f,d,v,y){var w=4,g=s;switch(y){case n.image_compression.FAST:w=1,g=o;break;case n.image_compression.MEDIUM:w=6,g=a;break;case n.image_compression.SLOW:w=9,g=l}f=r(f,d,v,g);var x=ZM(f,{level:w});return n.__addimage__.arrayBufferToBinaryString(x)},r=function(f,d,v,y){for(var w,g,x,_=f.length/d,E=new Uint8Array(f.length+_),C=c(),I=0;I<_;I+=1){if(x=I*d,w=f.subarray(x,x+d),y)E.set(y(w,v,g),x+I);else{for(var R,L=C.length,k=[];R<L;R+=1)k[R]=C[R](w,v,g);var D=h(k.concat());E.set(k[D],x+I)}g=w}return E},i=function(f){var d=Array.apply([],f);return d.unshift(0),d},o=function(f,d){var v,y=[],w=f.length;y[0]=1;for(var g=0;g<w;g+=1)v=f[g-d]||0,y[g+1]=f[g]-v+256&255;return y},s=function(f,d,v){var y,w=[],g=f.length;w[0]=2;for(var x=0;x<g;x+=1)y=v&&v[x]||0,w[x+1]=f[x]-y+256&255;return w},a=function(f,d,v){var y,w,g=[],x=f.length;g[0]=3;for(var _=0;_<x;_+=1)y=f[_-d]||0,w=v&&v[_]||0,g[_+1]=f[_]+256-(y+w>>>1)&255;return g},l=function(f,d,v){var y,w,g,x,_=[],E=f.length;_[0]=4;for(var C=0;C<E;C+=1)y=f[C-d]||0,w=v&&v[C]||0,g=v&&v[C-d]||0,x=u(y,w,g),_[C+1]=f[C]-x+256&255;return _},u=function(f,d,v){if(f===d&&d===v)return f;var y=Math.abs(d-v),w=Math.abs(f-v),g=Math.abs(f+d-v-v);return y<=w&&y<=g?f:w<=g?d:v},c=function(){return[i,o,s,a,l]},h=function(f){var d=f.map(function(v){return v.reduce(function(y,w){return y+Math.abs(w)},0)});return d.indexOf(Math.min.apply(null,d))};n.processPNG=function(f,d,v,y){var w,g,x,_,E,C,I,R,L,k,D,N,B,G,V,$=this.decode.FLATE_DECODE,J="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(x=new tZ(f)).imgData,g=x.bits,w=x.colorSpace,E=x.colors,[4,6].indexOf(x.colorType)!==-1){if(x.bits===8){L=(R=x.pixelBitlength==32?new Uint32Array(x.decodePixels().buffer):x.pixelBitlength==16?new Uint16Array(x.decodePixels().buffer):new Uint8Array(x.decodePixels().buffer)).length,D=new Uint8Array(L*x.colors),k=new Uint8Array(L);var le,H=x.pixelBitlength-x.bits;for(G=0,V=0;G<L;G++){for(B=R[G],le=0;le<H;)D[V++]=B>>>le&255,le+=x.bits;k[G]=B>>>le&255}}if(x.bits===16){L=(R=new Uint32Array(x.decodePixels().buffer)).length,D=new Uint8Array(L*(32/x.pixelBitlength)*x.colors),k=new Uint8Array(L*(32/x.pixelBitlength)),N=x.colors>1,G=0,V=0;for(var q=0;G<L;)B=R[G++],D[V++]=B>>>0&255,N&&(D[V++]=B>>>16&255,B=R[G++],D[V++]=B>>>0&255),k[q++]=B>>>16&255;g=8}y!==n.image_compression.NONE&&e()?(f=t(D,x.width*x.colors,x.colors,y),I=t(k,x.width,1,y)):(f=D,I=k,$=void 0)}if(x.colorType===3&&(w=this.color_spaces.INDEXED,C=x.palette,x.transparency.indexed)){var Z=x.transparency.indexed,oe=0;for(G=0,L=Z.length;G<L;++G)oe+=Z[G];if((oe/=255)===L-1&&Z.indexOf(0)!==-1)_=[Z.indexOf(0)];else if(oe!==L){for(R=x.decodePixels(),k=new Uint8Array(R.length),G=0,L=R.length;G<L;G++)k[G]=Z[R[G]];I=t(k,x.width,1)}}var F=function(j){var Q;switch(j){case n.image_compression.FAST:Q=11;break;case n.image_compression.MEDIUM:Q=13;break;case n.image_compression.SLOW:Q=14;break;default:Q=12}return Q}(y);return $===this.decode.FLATE_DECODE&&(J="/Predictor "+F+" "),J+="/Colors "+E+" /BitsPerComponent "+g+" /Columns "+x.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(I&&this.__addimage__.isArrayBuffer(I)||this.__addimage__.isArrayBufferView(I))&&(I=this.__addimage__.arrayBufferToBinaryString(I)),{alias:v,data:f,index:d,filter:$,decodeParameters:J,transparency:_,palette:C,sMask:I,predictor:F,width:x.width,height:x.height,bitsPerComponent:g,colorSpace:w}}}})(dn.API),function(n){n.processGIF89A=function(e,t,r,i){var o=new nZ(e),s=o.width,a=o.height,l=[];o.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:s,height:a},c=new _b(100).encode(u,100);return n.processJPEG.call(this,c,t,r,i)},n.processGIF87A=n.processGIF89A}(dn.API),Cl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:t,quad:o}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Cl.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Gr.log("bit decode error:"+t)}},Cl.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<e;i++)for(var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[o>>7-a&1];this.data[s+4*a]=l.blue,this.data[s+4*a+1]=l.green,this.data[s+4*a+2]=l.red,this.data[s+4*a+3]=255}t!==0&&(this.pos+=4-t)}},Cl.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<n;i++){var o=this.datav.getUint8(this.pos++,!0),s=r*this.width*4+2*i*4,a=o>>4,l=15&o,u=this.palette[a];if(this.data[s]=u.blue,this.data[s+1]=u.green,this.data[s+2]=u.red,this.data[s+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[s+4]=u.blue,this.data[s+4+1]=u.green,this.data[s+4+2]=u.red,this.data[s+4+3]=255}e!==0&&(this.pos+=4-e)}},Cl.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;if(i<this.palette.length){var s=this.palette[i];this.data[o]=s.red,this.data[o+1]=s.green,this.data[o+2]=s.blue,this.data[o+3]=255}else this.data[o]=255,this.data[o+1]=255,this.data[o+2]=255,this.data[o+3]=255}n!==0&&(this.pos+=4-n)}},Cl.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(o&e)/e*255|0,a=(o>>5&e)/e*255|0,l=(o>>10&e)/e*255|0,u=o>>15?255:0,c=r*this.width*4+4*i;this.data[c]=l,this.data[c+1]=a,this.data[c+2]=s,this.data[c+3]=u}this.pos+=n}},Cl.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(s&e)/e*255|0,l=(s>>5&t)/t*255|0,u=(s>>11)/e*255|0,c=i*this.width*4+4*o;this.data[c]=u,this.data[c+1]=l,this.data[c+2]=a,this.data[c+3]=255}this.pos+=n}},Cl.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*t;this.data[s]=o,this.data[s+1]=i,this.data[s+2]=r,this.data[s+3]=255}this.pos+=this.width%4}},Cl.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=o,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=s}},Cl.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,i){var o=new Cl(e,!1),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},u=new _b(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}}(dn.API),KL.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,i){var o=new KL(e),s=o.width,a=o.height,l={data:o.getData(),width:s,height:a},u=new _b(100).encode(l,100);return n.processJPEG.call(this,u,t,r,i)}}(dn.API),dn.API.processRGBA=function(n,e,t){for(var r=n.data,i=r.length,o=new Uint8Array(i/4*3),s=new Uint8Array(i/4),a=0,l=0,u=0;u<i;u+=4){var c=r[u],h=r[u+1],f=r[u+2],d=r[u+3];o[a++]=c,o[a++]=h,o[a++]=f,s[l++]=d}var v=this.__addimage__.arrayBufferToBinaryString(o);return{alpha:this.__addimage__.arrayBufferToBinaryString(s),data:v,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},dn.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},im=dn.API,S2=im.getCharWidthsArray=function(n,e){var t,r,i=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),s=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,c=u.fof?u.fof:1,h=e.doKerning!==!1,f=0,d=n.length,v=0,y=a[0]||l,w=[];for(t=0;t<d;t++)r=n.charCodeAt(t),typeof i.metadata.widthOfString=="function"?w.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+s*(1e3/o)||0)/1e3):(f=h&&Fr(u[r])==="object"&&!isNaN(parseInt(u[r][v],10))?u[r][v]/c:0,w.push((a[r]||y)/l+f)),v=r;return w},qL=im.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return im.processArabic&&(n=im.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,i)/t:S2.apply(this,arguments).reduce(function(o,s){return o+s},0)},XL=function(n,e,t,r){for(var i=[],o=0,s=n.length,a=0;o!==s&&a+e[o]<t;)a+=e[o],o++;i.push(n.slice(0,o));var l=o;for(a=0;o!==s;)a+e[o]>r&&(i.push(n.slice(l,o)),a=0,l=o),a+=e[o],o++;return l!==o&&i.push(n.slice(l,o)),i},YL=function(n,e,t){t||(t={});var r,i,o,s,a,l,u,c=[],h=[c],f=t.textIndent||0,d=0,v=0,y=n.split(" "),w=S2.apply(this,[" ",t])[0];if(l=t.lineIndent===-1?y[0].length+2:t.lineIndent||0){var g=Array(l).join(" "),x=[];y.map(function(E){(E=E.split(/\s*\n/)).length>1?x=x.concat(E.map(function(C,I){return(I&&C.length?`
`:"")+C})):x.push(E[0])}),y=x,l=qL.apply(this,[g,t])}for(o=0,s=y.length;o<s;o++){var _=0;if(r=y[o],l&&r[0]==`
`&&(r=r.substr(1),_=1),f+d+(v=(i=S2.apply(this,[r,t])).reduce(function(E,C){return E+C},0))>e||_){if(v>e){for(a=XL.apply(this,[r,i,e-(f+d),e]),c.push(a.shift()),c=[a.pop()];a.length;)h.push([a.shift()]);v=i.slice(r.length-(c[0]?c[0].length:0)).reduce(function(E,C){return E+C},0)}else c=[r];h.push(c),f=v+l,d=w}else c.push(r),f+=d+v,d=w}return u=l?function(E,C){return(C?g:"")+E.join(" ")}:function(E){return E.join(" ")},h.map(u)},im.splitTextToSize=function(n,e,t){var r,i=(t=t||{}).fontSize||this.internal.getFontSize(),o=function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var h=this.internal.getFont(c.fontName,c.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var s=1*this.internal.scaleFactor*e/i;o.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/i:0,o.lineIndent=t.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat(YL.apply(this,[r[a],s,o]));return u},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},i=0;i<e.length;i++)t[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var o=function(h){return"0x"+parseInt(h,10).toString(16)},s=n.__fontmetrics__.compress=function(h){var f,d,v,y,w=["{"];for(var g in h){if(f=h[g],isNaN(parseInt(g,10))?d="'"+g+"'":(g=parseInt(g,10),d=(d=o(g).slice(2)).slice(0,-1)+r[d.slice(-1)]),typeof f=="number")f<0?(v=o(f).slice(3),y="-"):(v=o(f).slice(2),y=""),v=y+v.slice(0,-1)+r[v.slice(-1)];else{if(Fr(f)!=="object")throw new Error("Don't know what to do with value type "+Fr(f)+".");v=s(f)}w.push(d+v)}return w.push("}"),w.join("")},a=n.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,d,v,y,w={},g=1,x=w,_=[],E="",C="",I=h.length-1,R=1;R<I;R+=1)(y=h[R])=="'"?f?(v=f.join(""),f=void 0):f=[]:f?f.push(y):y=="{"?(_.push([x,v]),x={},v=void 0):y=="}"?((d=_.pop())[0][d[1]]=x,v=void 0,x=d[0]):y=="-"?g=-1:v===void 0?t.hasOwnProperty(y)?(E+=t[y],v=parseInt(E,16)*g,g=1,E=""):E+=y:t.hasOwnProperty(y)?(C+=t[y],x[v]=parseInt(C,16)*g,g=1,v=void 0,C=""):C+=y;return w},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},c={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(h){var f=h.font,d=c.Unicode[f.postScriptName];d&&(f.metadata.Unicode={},f.metadata.Unicode.widths=d.widths,f.metadata.Unicode.kerning=d.kerning);var v=u.Unicode[f.postScriptName];v&&(f.metadata.Unicode.encoding=v,f.encoding=v.codePages[0])}])}(dn.API),function(n){var e=function(t){for(var r=t.length,i=new Uint8Array(r),o=0;o<r;o++)i[o]=t.charCodeAt(o);return i};n.API.events.push(["addFont",function(t){var r=void 0,i=t.font,o=t.instance;if(!i.isStandardFont){if(o===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=o.existsFileInVFS(i.postScriptName)===!1?o.loadFile(i.postScriptName):o.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(s,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(nv(a)),s.metadata=n.API.TTFFont.open(a),s.metadata.Unicode=s.metadata.Unicode||{encoding:{},kerning:{},widths:[]},s.metadata.glyIdsUsed=[0]})(i,r)}}])}(dn),function(n){function e(){return(Sn.canvg?Promise.resolve(Sn.canvg):Vx(()=>import("./index.es-db09d348.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}dn.API.addSvgAsImage=function(t,r,i,o,s,a,l,u){if(isNaN(r)||isNaN(i))throw Gr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(o)||isNaN(s))throw Gr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=o,c.height=s;var h=c.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,c.width,c.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return e().then(function(v){return v.fromString(h,t,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(f)}).then(function(){d.addImage(c.toDataURL("image/jpeg",1),r,i,o,s,l,u)})}}(),dn.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,t);return this},dn.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,i,o,s={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(s),l=[],u=0,c=0,h=0;function f(v,y){var w,g=!1;for(w=0;w<v.length;w+=1)v[w]===y&&(g=!0);return g}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(s)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var d=a.length;for(h=0;h<d;h+=1)t[a[h]].value=t[a[h]].defaultValue,t[a[h]].explicitSet=!1}if(Fr(n)==="object"){for(i in n)if(o=n[i],f(a,i)&&o!==void 0){if(t[i].type==="boolean"&&typeof o=="boolean")t[i].value=o;else if(t[i].type==="name"&&f(t[i].valueSet,o))t[i].value=o;else if(t[i].type==="integer"&&Number.isInteger(o))t[i].value=o;else if(t[i].type==="array"){for(u=0;u<o.length;u+=1)if(r=!0,o[u].length===1&&typeof o[u][0]=="number")l.push(String(o[u]-1));else if(o[u].length>1){for(c=0;c<o[u].length;c+=1)typeof o[u][c]!="number"&&(r=!1);r===!0&&l.push([o[u][0]-1,o[u][1]-1].join(" "))}t[i].value="["+l.join(" ")+"]"}else t[i].value=t[i].defaultValue;t[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,y=[];for(v in t)t[v].explicitSet===!0&&(t[v].type==="name"?y.push("/"+v+" /"+t[v].value):y.push("/"+v+" "+t[v].value));y.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+y.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),o=unescape(encodeURIComponent(r)),s=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=o.length+s.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+o+s+a+l),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(dn.API),function(n){var e=n.API,t=e.pdfEscape16=function(o,s){for(var a,l=s.metadata.Unicode.widths,u=["","0","00","000","0000"],c=[""],h=0,f=o.length;h<f;++h){if(a=s.metadata.characterToGlyph(o.charCodeAt(h)),s.metadata.glyIdsUsed.push(a),s.metadata.toUnicode[a]=o.charCodeAt(h),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(s.metadata.widthOfGlyph(a),10)])),a=="0")return c.join("");a=a.toString(16),c.push(u[4-a.length],a)}return c.join("")},r=function(o){var s,a,l,u,c,h,f;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,f=(a=Object.keys(o).sort(function(d,v){return d-v})).length;h<f;h++)s=a[h],l.length>=100&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),o[s]!==void 0&&o[s]!==null&&typeof o[s].toString=="function"&&(u=("0000"+o[s].toString(16)).slice(-4),s=("0000"+(+s).toString(16)).slice(-4),l.push("<"+s+"><"+u+">"));return l.length&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),c+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,u=s.newObject,c=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="Identity-H"){for(var h=a.metadata.Unicode.widths,f=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),d="",v=0;v<f.length;v++)d+=String.fromCharCode(f[v]);var y=u();c({data:d,addLength1:!0,objectId:y}),l("endobj");var w=u();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var g=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+pm(a.fontName)),l("/FontFile2 "+y+" 0 R"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var x=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+pm(a.fontName)),l("/FontDescriptor "+g+" 0 R"),l("/W "+n.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+w+" 0 R"),l("/BaseFont /"+pm(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+x+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]),e.events.push(["putFont",function(o){(function(s){var a=s.font,l=s.out,u=s.newObject,c=s.putStream;if(a.metadata instanceof n.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var h=a.metadata.rawData,f="",d=0;d<h.length;d++)f+=String.fromCharCode(h[d]);var v=u();c({data:f,addLength1:!0,objectId:v}),l("endobj");var y=u();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:y}),l("endobj");var w=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+v+" 0 R"),l("/Flags 96"),l("/FontBBox "+n.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+pm(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var g=0;g<a.metadata.hmtx.widths.length;g++)a.metadata.hmtx.widths[g]=parseInt(a.metadata.hmtx.widths[g]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+y+" 0 R/BaseFont/"+pm(a.fontName)+"/FontDescriptor "+w+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(o)}]);var i=function(o){var s,a=o.text||"",l=o.x,u=o.y,c=o.options||{},h=o.mutex||{},f=h.pdfEscape,d=h.activeFontKey,v=h.fonts,y=d,w="",g=0,x="",_=v[y].encoding;if(v[y].encoding!=="Identity-H")return{text:a,x:l,y:u,options:c,mutex:h};for(x=a,y=d,Array.isArray(a)&&(x=a[0]),g=0;g<x.length;g+=1)v[y].metadata.hasOwnProperty("cmap")&&(s=v[y].metadata.cmap.unicode.codeMap[x[g].charCodeAt(0)]),s||x[g].charCodeAt(0)<256&&v[y].metadata.hasOwnProperty("Unicode")?w+=x[g]:w+="";var E="";return parseInt(y.slice(1))<14||_==="WinAnsiEncoding"?E=f(w,y).split("").map(function(C){return C.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(E=t(w,v[y])),h.isHex=!0,{text:E,x:l,y:u,options:c,mutex:h}};e.events.push(["postProcessText",function(o){var s=o.text||"",a=[],l={text:s,x:o.x,y:o.y,options:o.options,mutex:o.mutex};if(Array.isArray(s)){var u=0;for(u=0;u<s.length;u+=1)Array.isArray(s[u])&&s[u].length===3?a.push([i(Object.assign({},l,{text:s[u][0]})).text,s[u][1],s[u][2]]):a.push(i(Object.assign({},l,{text:s[u]})).text);o.text=a}else o.text=i(Object.assign({},l,{text:s})).text}])}(dn),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(dn.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var i,o,s,a,l,u,c,h=e,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},y={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},w=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),x=!1,_=0;this.__bidiEngine__={};var E=function(N){var B=N.charCodeAt(),G=B>>8,V=y[G];return V!==void 0?h[256*V+(255&B)]:G===252||G===253?"AL":g.test(G)?"L":G===8?"R":"N"},C=function(N){for(var B,G=0;G<N.length;G++){if((B=E(N.charAt(G)))==="L")return!1;if(B==="R")return!0}return!1},I=function(N,B,G,V){var $,J,le,H,q=B[V];switch(q){case"L":case"R":x=!1;break;case"N":case"AN":break;case"EN":x&&(q="AN");break;case"AL":x=!0,q="R";break;case"WS":q="N";break;case"CS":V<1||V+1>=B.length||($=G[V-1])!=="EN"&&$!=="AN"||(J=B[V+1])!=="EN"&&J!=="AN"?q="N":x&&(J="AN"),q=J===$?J:"N";break;case"ES":q=($=V>0?G[V-1]:"B")==="EN"&&V+1<B.length&&B[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&G[V-1]==="EN"){q="EN";break}if(x){q="N";break}for(le=V+1,H=B.length;le<H&&B[le]==="ET";)le++;q=le<H&&B[le]==="EN"?"EN":"N";break;case"NSM":if(s&&!a){for(H=B.length,le=V+1;le<H&&B[le]==="NSM";)le++;if(le<H){var Z=N[V],oe=Z>=1425&&Z<=2303||Z===64286;if($=B[le],oe&&($==="R"||$==="AL")){q="R";break}}}q=V<1||($=B[V-1])==="B"?"N":G[V-1];break;case"B":x=!1,i=!0,q=_;break;case"S":o=!0,q="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":x=!1;break;case"BN":q="N"}return q},R=function(N,B,G){var V=N.split("");return G&&L(V,G,{hiLevel:_}),V.reverse(),B&&B.reverse(),V.join("")},L=function(N,B,G){var V,$,J,le,H,q=-1,Z=N.length,oe=0,F=[],j=_?d:f,Q=[];for(x=!1,i=!1,o=!1,$=0;$<Z;$++)Q[$]=E(N[$]);for(J=0;J<Z;J++){if(H=oe,F[J]=I(N,Q,F,J),V=240&(oe=j[H][v[F[J]]]),oe&=15,B[J]=le=j[oe][5],V>0)if(V===16){for($=q;$<J;$++)B[$]=1;q=-1}else q=-1;if(j[oe][6])q===-1&&(q=J);else if(q>-1){for($=q;$<J;$++)B[$]=le;q=-1}Q[J]==="B"&&(B[J]=0),G.hiLevel|=le}o&&function(se,fe,we){for(var Ee=0;Ee<we;Ee++)if(se[Ee]==="S"){fe[Ee]=_;for(var Ce=Ee-1;Ce>=0&&se[Ce]==="WS";Ce--)fe[Ce]=_}}(Q,B,Z)},k=function(N,B,G,V,$){if(!($.hiLevel<N)){if(N===1&&_===1&&!i)return B.reverse(),void(G&&G.reverse());for(var J,le,H,q,Z=B.length,oe=0;oe<Z;){if(V[oe]>=N){for(H=oe+1;H<Z&&V[H]>=N;)H++;for(q=oe,le=H-1;q<le;q++,le--)J=B[q],B[q]=B[le],B[le]=J,G&&(J=G[q],G[q]=G[le],G[le]=J);oe=H}oe++}}},D=function(N,B,G){var V=N.split(""),$={hiLevel:_};return G||(G=[]),L(V,G,$),function(J,le,H){if(H.hiLevel!==0&&c)for(var q,Z=0;Z<J.length;Z++)le[Z]===1&&(q=w.indexOf(J[Z]))>=0&&(J[Z]=w[q+1])}(V,G,$),k(2,V,B,G,$),k(1,V,B,G,$),V.join("")};return this.__bidiEngine__.doBidiReorder=function(N,B,G){if(function($,J){if(J)for(var le=0;le<$.length;le++)J[le]=le;a===void 0&&(a=C($)),u===void 0&&(u=C($))}(N,B),s||!l||u)if(s&&l&&a^u)_=a?1:0,N=R(N,B,G);else if(!s&&l&&u)_=a?1:0,N=D(N,B,G),N=R(N,B);else if(!s||a||l||u){if(s&&!l&&a^u)N=R(N,B),a?(_=0,N=D(N,B,G)):(_=1,N=D(N,B,G),N=R(N,B));else if(s&&a&&!l&&u)_=1,N=D(N,B,G),N=R(N,B);else if(!s&&!l&&a^u){var V=c;a?(_=1,N=D(N,B,G),_=0,c=!1,N=D(N,B,G),c=V):(_=0,N=D(N,B,G),N=R(N,B),_=1,c=!1,N=D(N,B,G),c=V,N=R(N,B))}}else _=0,N=D(N,B,G);else _=a?1:0,N=D(N,B,G);return N},this.__bidiEngine__.setOptions=function(N){N&&(s=N.isInputVisual,l=N.isOutputVisual,a=N.isInputRtl,u=N.isOutputRtl,c=N.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var o=r.options||{};r.mutex,o.lang;var s=[];if(o.isInputVisual=typeof o.isInputVisual!="boolean"||o.isInputVisual,t.setOptions(o),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(s=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?s.push([t.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):s.push([t.doBidiReorder(i[a])]);r.text=s}else r.text=t.doBidiReorder(i);t.setOptions({isInputVisual:!0})}])}(dn),dn.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new vf(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new vZ(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new rZ(this.contents),this.head=new oZ(this),this.name=new cZ(this),this.cmap=new mD(this),this.toUnicode={},this.hhea=new sZ(this),this.maxp=new hZ(this),this.hmtx=new fZ(this),this.post=new lZ(this),this.os2=new aZ(this),this.loca=new gZ(this),this.glyf=new dZ(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,i,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var s,a,l,u;for(u=[],s=0,a=(l=this.bbox).length;s<a;s++)e=l[s],u.push(Math.round(e*this.scaleFactor));return u}.call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(t=i>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(o=this.familyClass)===1||o===2||o===3||o===4||o===5||o===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var i,o,s,a;for(s=0,o=0,a=(e=""+e).length;0<=a?o<a:o>a;o=0<=a?++o:--o)i=e.charCodeAt(o),s+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/t)||0;return s*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var tu,vf=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,i;for(i=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)i.push(this.writeByte(e.charCodeAt(t)));return i},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,i,o,s,a,l;return e=this.readByte(),t=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),s=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^o)+65536*(255^s)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*i+16777216*o+65536*s+256*a+l},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,i,o;for(o=[],r=0,i=e.length;r<i;r++)t=e[r],o.push(this.writeByte(t));return o},n}(),rZ=function(){var n;function e(t){var r,i,o;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,o=this.tableCount;0<=o?i<o:i>o;i=0<=o?++i:--i)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,i,o,s,a,l,u,c,h,f,d,v,y;for(y in d=Object.keys(t).length,l=Math.log(2),h=16*Math.floor(Math.log(d)/l),s=Math.floor(h/l),c=16*d-h,(i=new vf).writeInt(this.scalarType),i.writeShort(d),i.writeShort(h),i.writeShort(s),i.writeShort(c),o=16*d,u=i.pos+o,a=null,v=[],t)for(f=t[y],i.writeString(y),i.writeInt(n(f)),i.writeInt(u),i.writeInt(f.length),v=v.concat(f),y==="head"&&(a=u),u+=f.length;u%4;)v.push(0),u++;return i.write(v),r=2981146554-n(i.data),i.pos=a+8,i.writeUInt32(r),i.data},n=function(t){var r,i,o,s;for(t=gD.call(t);t.length%4;)t.push(0);for(o=new vf(t),i=0,r=0,s=t.length;r<s;r=r+=4)i+=o.readUInt32();return 4294967295&i},e}(),iZ={}.hasOwnProperty,Hu=function(n,e){for(var t in e)iZ.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};tu=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var oZ=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Hu(e,tu),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new vf).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),JL=function(){function n(e,t){var r,i,o,s,a,l,u,c,h,f,d,v,y,w,g,x,_;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(d=e.readUInt16(),f=d/2,e.pos+=6,o=function(){var E,C;for(C=[],l=E=0;0<=f?E<f:E>f;l=0<=f?++E:--E)C.push(e.readUInt16());return C}(),e.pos+=2,y=function(){var E,C;for(C=[],l=E=0;0<=f?E<f:E>f;l=0<=f?++E:--E)C.push(e.readUInt16());return C}(),u=function(){var E,C;for(C=[],l=E=0;0<=f?E<f:E>f;l=0<=f?++E:--E)C.push(e.readUInt16());return C}(),c=function(){var E,C;for(C=[],l=E=0;0<=f?E<f:E>f;l=0<=f?++E:--E)C.push(e.readUInt16());return C}(),i=(this.length-e.pos+this.offset)/2,a=function(){var E,C;for(C=[],l=E=0;0<=i?E<i:E>i;l=0<=i?++E:--E)C.push(e.readUInt16());return C}(),l=g=0,_=o.length;g<_;l=++g)for(w=o[l],r=x=v=y[l];v<=w?x<=w:x>=w;r=v<=w?++x:--x)c[l]===0?s=r+u[l]:(s=a[c[l]/2+(r-v)-(f-l)]||0)!==0&&(s+=u[l]),this.codeMap[r]=65535&s}e.pos=h}return n.encode=function(e,t){var r,i,o,s,a,l,u,c,h,f,d,v,y,w,g,x,_,E,C,I,R,L,k,D,N,B,G,V,$,J,le,H,q,Z,oe,F,j,Q,se,fe,we,Ee,Ce,Ge,Ie,he;switch(V=new vf,s=Object.keys(e).sort(function(ke,Ne){return ke-Ne}),t){case"macroman":for(y=0,w=function(){var ke=[];for(v=0;v<256;++v)ke.push(0);return ke}(),x={0:0},o={},$=0,q=s.length;$<q;$++)x[Ce=e[i=s[$]]]==null&&(x[Ce]=++y),o[i]={old:e[i],new:x[e[i]]},w[i]=x[e[i]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(w),{charMap:o,subtable:V.data,maxGlyphID:y+1};case"unicode":for(B=[],h=[],_=0,x={},r={},g=u=null,J=0,Z=s.length;J<Z;J++)x[C=e[i=s[J]]]==null&&(x[C]=++_),r[i]={old:C,new:x[C]},a=x[C]-i,g!=null&&a===u||(g&&h.push(g),B.push(i),u=a),g=i;for(g&&h.push(g),h.push(65535),B.push(65535),D=2*(k=B.length),L=2*Math.pow(Math.log(k)/Math.LN2,2),f=Math.log(L/2)/Math.LN2,R=2*k-L,l=[],I=[],d=[],v=le=0,oe=B.length;le<oe;v=++le){if(N=B[v],c=h[v],N===65535){l.push(0),I.push(0);break}if(N-(G=r[N].new)>=32768)for(l.push(0),I.push(2*(d.length+k-v)),i=H=N;N<=c?H<=c:H>=c;i=N<=c?++H:--H)d.push(r[i].new);else l.push(G-N),I.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*k+2*d.length),V.writeUInt16(0),V.writeUInt16(D),V.writeUInt16(L),V.writeUInt16(f),V.writeUInt16(R),we=0,F=h.length;we<F;we++)i=h[we],V.writeUInt16(i);for(V.writeUInt16(0),Ee=0,j=B.length;Ee<j;Ee++)i=B[Ee],V.writeUInt16(i);for(Ge=0,Q=l.length;Ge<Q;Ge++)a=l[Ge],V.writeUInt16(a);for(Ie=0,se=I.length;Ie<se;Ie++)E=I[Ie],V.writeUInt16(E);for(he=0,fe=d.length;he<fe;he++)y=d[he],V.writeUInt16(y);return{charMap:r,subtable:V.data,maxGlyphID:_+1}}},n}(),mD=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Hu(e,tu),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,i,o;for(t.pos=this.offset,this.version=t.readUInt16(),o=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=o?i<o:i>o;i=0<=o?++i:--i)r=new JL(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var i,o;return r==null&&(r="macroman"),i=JL.encode(t,r),(o=new vf).writeUInt16(0),o.writeUInt16(1),i.table=o.data.concat(i.subtable),i},e}(),sZ=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Hu(e,tu),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),aZ=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Hu(e,tu),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(t.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),lZ=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Hu(e,tu),e.prototype.tag="post",e.prototype.parse=function(t){var r,i,o;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var s;for(i=t.readUInt16(),this.glyphNameIndex=[],s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],o=[];t.pos<this.offset+this.length;)r=t.readByte(),o.push(this.names.push(t.readString(r)));return o;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 196608:break;case 262144:return this.map=function(){var a,l,u;for(u=[],s=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;s=0<=l?++a:--a)u.push(t.readUInt32());return u}.call(this)}},e}(),uZ=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},cZ=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Hu(e,tu),e.prototype.tag="name",e.prototype.parse=function(t){var r,i,o,s,a,l,u,c,h,f,d;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),i=[],s=0;0<=r?s<r:s>r;s=0<=r?++s:--s)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(u={},s=h=0,f=i.length;h<f;s=++h)o=i[s],t.pos=o.offset,c=t.readString(o.length),a=new uZ(c,o),u[d=o.nameID]==null&&(u[d]=[]),u[o.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),hZ=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Hu(e,tu),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),fZ=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Hu(e,tu),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,i,o,s,a,l,u;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(o=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,h;for(h=[],r=c=0;0<=o?c<o:c>o;r=0<=o?++c:--c)h.push(t.readInt16());return h}(),this.widths=function(){var c,h,f,d;for(d=[],c=0,h=(f=this.metrics).length;c<h;c++)s=f[c],d.push(s.advance);return d}.call(this),i=this.widths[this.widths.length-1],u=[],r=a=0;0<=o?a<o:a>o;r=0<=o?++a:--a)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),gD=[].slice,dZ=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Hu(e,tu),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,i,o,s,a,l,u,c,h,f;return t in this.cache?this.cache[t]:(s=this.file.loca,r=this.file.contents,i=s.indexOf(t),(o=s.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+i,a=(l=new vf(r.read(o))).readShort(),c=l.readShort(),f=l.readShort(),u=l.readShort(),h=l.readShort(),this.cache[t]=a===-1?new mZ(l,c,f,u,h):new pZ(l,a,c,f,u,h),this.cache[t]))},e.prototype.encode=function(t,r,i){var o,s,a,l,u;for(a=[],s=[],l=0,u=r.length;l<u;l++)o=t[r[l]],s.push(a.length),o&&(a=a.concat(o.encode(i)));return s.push(a.length),{table:a,offsets:s}},e}(),pZ=function(){function n(e,t,r,i,o,s){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=s,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),mZ=function(){function n(e,t,r,i,o){var s,a;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=i,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;a=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&a;)s.pos+=1&a?4:2,128&a?s.pos+=8:64&a?s.pos+=4:8&a&&(s.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new vf(gD.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),gZ=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return Hu(e,tu),e.prototype.tag="loca",e.prototype.parse=function(t){var r,i;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=2)s.push(2*t.readUInt16());return s}.call(this):function(){var o,s;for(s=[],i=0,o=this.length;i<o;i+=4)s.push(t.readUInt32());return s}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var i=new Uint32Array(this.offsets.length),o=0,s=0,a=0;a<i.length;++a)if(i[a]=o,s<r.length&&r[s]==a){++s,i[a]=o;var l=this.offsets[a],u=this.offsets[a+1]-l;u>0&&(o+=u)}for(var c=new Array(4*i.length),h=0;h<i.length;++h)c[4*h+3]=255&i[h],c[4*h+2]=(65280&i[h])>>8,c[4*h+1]=(16711680&i[h])>>16,c[4*h]=(4278190080&i[h])>>24;return c},e}(),vZ=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,i,o;for(t in i=this.font.cmap.tables[0].codeMap,e={},o=this.subset)r=o[t],e[t]=i[r];return e},n.prototype.glyphsFor=function(e){var t,r,i,o,s,a,l;for(i={},s=0,a=e.length;s<a;s++)i[o=e[s]]=this.font.glyf.glyphFor(o);for(o in t=[],i)(r=i[o])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(o in l=this.glyphsFor(t))r=l[o],i[o]=r;return i},n.prototype.encode=function(e,t){var r,i,o,s,a,l,u,c,h,f,d,v,y,w,g;for(i in r=mD.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(e),d={0:0},g=r.charMap)d[(l=g[i]).old]=l.new;for(v in f=r.maxGlyphID,s)v in d||(d[v]=f++);return c=function(x){var _,E;for(_ in E={},x)E[x[_]]=_;return E}(d),h=Object.keys(c).sort(function(x,_){return x-_}),y=function(){var x,_,E;for(E=[],x=0,_=h.length;x<_;x++)a=h[x],E.push(c[a]);return E}(),o=this.font.glyf.encode(s,y,d),u=this.font.loca.encode(o.offsets,y),w={cmap:this.font.cmap.raw(),glyf:o.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(w["OS/2"]=this.font.os2.raw()),this.font.directory.encode(w)},n}();dn.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,i,o,s;if(Array.isArray(t))return"["+function(){var a,l,u;for(u=[],a=0,l=t.length;a<l;a++)r=t[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(i in o=["<<"],t)s=t[i],o.push("/"+i+" "+e.convert(s));return o.push(">>"),o.join(`
`)}return""+t},e}();/*! https://mths.be/cssesc v3.0.0 by @mathias */var yZ={},xZ=yZ.hasOwnProperty,wZ=function(e,t){if(!e)return t;var r={};for(var i in t)r[i]=xZ.call(e,i)?e[i]:t[i];return r},SZ=/[ -,\.\/:-@\[-\^`\{-~]/,_Z=/[ -,\.\/:-@\[\]\^`\{-~]/,bZ=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,DA=function n(e,t){t=wZ(t,n.options),t.quotes!="single"&&t.quotes!="double"&&(t.quotes="single");for(var r=t.quotes=="double"?'"':"'",i=t.isIdentifier,o=e.charAt(0),s="",a=0,l=e.length;a<l;){var u=e.charAt(a++),c=u.charCodeAt(),h=void 0;if(c<32||c>126){if(c>=55296&&c<=56319&&a<l){var f=e.charCodeAt(a++);(f&64512)==56320?c=((c&1023)<<10)+(f&1023)+65536:a--}h="\\"+c.toString(16).toUpperCase()+" "}else t.escapeEverything?SZ.test(u)?h="\\"+u:h="\\"+c.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(u)?h="\\"+c.toString(16).toUpperCase()+" ":u=="\\"||!i&&(u=='"'&&r==u||u=="'"&&r==u)||i&&_Z.test(u)?h="\\"+u:h=u;s+=h}return i&&(/^-[-\d]/.test(s)?s="\\-"+s.slice(1):/\d/.test(o)&&(s="\\3"+o+" "+s.slice(1))),s=s.replace(bZ,function(d,v,y){return v&&v.length%2?d:(v||"")+y}),!i&&t.wrap?r+s+r:s};DA.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1};DA.version="3.0.0";var vD=DA,_0=0,bb=1,QL=2,_2=3,eR=4,tR=5,nR=6,Mb=/[a-z0-9_-]/i,b2=/[\s\t]/,MZ=function(n){for(var e=!0,t=_0,r="",i=0,o,s,a=[];;){if(s=n[i],t===_0){if(!s&&e)break;if(!s&&!e)throw new Error("Parse error");if(s==='"'||s==="'")o=s,t=bb,e=!1;else if(!b2.test(s))if(Mb.test(s))t=_2,e=!1,i--;else throw new Error("Parse error")}else if(t===bb)if(s)s==="\\"?t=QL:s===o?(a.push(r),r="",t=eR):r+=s;else throw new Error("Parse Error");else if(t===QL)if(s===o||s==="\\")r+=s,t=bb;else throw new Error("Parse error");else if(t===_2)if(s)Mb.test(s)?r+=s:s===","?(a.push(r),r="",t=_0):b2.test(s)?t=tR:s==="\\"&&(t=nR);else{a.push(r);break}else if(t===nR){if(/[0-9a-f]/i.test(s))throw new Error("Parse error");r+=s,t=_2}else if(t===tR)if(s){if(Mb.test(s))r+=" "+s,t=_2;else if(s===",")a.push(r),r="",t=_0;else if(!b2.test(s))throw new Error("Parse error")}else{a.push(r);break}else if(t===eR)if(s){if(s===",")t=_0;else if(!b2.test(s))throw new Error("Parse error")}else break;i++}return a},EZ=/[^a-z0-9_-]/i,AZ=function(n,e){var t=e&&e.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Quote must be `'` or `\"`");for(var r=new RegExp(t,"g"),i=[],o=0;o<n.length;++o){var s=n[o];EZ.test(s)&&(s=s.replace(/\\/g,"\\\\").replace(r,"\\"+t),s=t+s+t),i.push(s)}return i.join(", ")},TZ={parse:MZ,stringify:AZ},rE={},CZ={get exports(){return rE},set exports(n){rE=n}},fx={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},PZ=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function LZ(n){return n===10||n===13||n===8232||n===8233||n===32||n===9||n===11||n===12||n===160||n>=5760&&PZ.indexOf(n)>=0}function RZ(n){switch(n|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function kZ(n){return(n|32)===97}function om(n){return n>=48&&n<=57}function IZ(n){return n>=48&&n<=57||n===43||n===45||n===46}function NZ(n){this.index=0,this.path=n,this.max=n.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function dx(n){for(;n.index<n.max&&LZ(n.path.charCodeAt(n.index));)n.index++}function FZ(n){var e=n.path.charCodeAt(n.index);if(e===48){n.param=0,n.index++;return}if(e===49){n.param=1,n.index++;return}n.err="SvgPath: arc flag can be 0 or 1 only (at pos "+n.index+")"}function DZ(n){var e=n.index,t=e,r=n.max,i=!1,o=!1,s=!1,a=!1,l;if(t>=r){n.err="SvgPath: missed param (at pos "+t+")";return}if(l=n.path.charCodeAt(t),(l===43||l===45)&&(t++,l=t<r?n.path.charCodeAt(t):0),!om(l)&&l!==46){n.err="SvgPath: param should start with 0..9 or `.` (at pos "+t+")";return}if(l!==46){if(i=l===48,t++,l=t<r?n.path.charCodeAt(t):0,i&&t<r&&l&&om(l)){n.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+e+")";return}for(;t<r&&om(n.path.charCodeAt(t));)t++,o=!0;l=t<r?n.path.charCodeAt(t):0}if(l===46){for(a=!0,t++;om(n.path.charCodeAt(t));)t++,s=!0;l=t<r?n.path.charCodeAt(t):0}if(l===101||l===69){if(a&&!o&&!s){n.err="SvgPath: invalid float exponent (at pos "+t+")";return}if(t++,l=t<r?n.path.charCodeAt(t):0,(l===43||l===45)&&t++,t<r&&om(n.path.charCodeAt(t)))for(;t<r&&om(n.path.charCodeAt(t));)t++;else{n.err="SvgPath: invalid float exponent (at pos "+t+")";return}}n.index=t,n.param=parseFloat(n.path.slice(e,t))+0}function Eb(n){var e,t;e=n.path[n.segmentStart],t=e.toLowerCase();var r=n.data;if(t==="m"&&r.length>2&&(n.result.push([e,r[0],r[1]]),r=r.slice(2),t="l",e=e==="m"?"l":"L"),t==="r")n.result.push([e].concat(r));else for(;r.length>=fx[t]&&(n.result.push([e].concat(r.splice(0,fx[t]))),!!fx[t]););}function OZ(n){var e=n.max,t,r,i,o,s;if(n.segmentStart=n.index,t=n.path.charCodeAt(n.index),r=kZ(t),!RZ(t)){n.err="SvgPath: bad command "+n.path[n.index]+" (at pos "+n.index+")";return}if(o=fx[n.path[n.index].toLowerCase()],n.index++,dx(n),n.data=[],!o){Eb(n);return}for(i=!1;;){for(s=o;s>0;s--){if(r&&(s===3||s===4)?FZ(n):DZ(n),n.err.length){Eb(n);return}n.data.push(n.param),dx(n),i=!1,n.index<e&&n.path.charCodeAt(n.index)===44&&(n.index++,dx(n),i=!0)}if(!i&&(n.index>=n.max||!IZ(n.path.charCodeAt(n.index))))break}Eb(n)}var BZ=function(e){var t=new NZ(e),r=t.max;for(dx(t);t.index<r&&!t.err.length;)OZ(t);return t.result.length&&("mM".indexOf(t.result[0][0])<0?(t.err="SvgPath: string should start with `M` or `m`",t.result=[]):t.result[0][0]="M"),{err:t.err,segments:t.result}};function UZ(n,e){return[n[0]*e[0]+n[2]*e[1],n[1]*e[0]+n[3]*e[1],n[0]*e[2]+n[2]*e[3],n[1]*e[2]+n[3]*e[3],n[0]*e[4]+n[2]*e[5]+n[4],n[1]*e[4]+n[3]*e[5]+n[5]]}function ql(){if(!(this instanceof ql))return new ql;this.queue=[],this.cache=null}ql.prototype.matrix=function(n){return n[0]===1&&n[1]===0&&n[2]===0&&n[3]===1&&n[4]===0&&n[5]===0?this:(this.cache=null,this.queue.push(n),this)};ql.prototype.translate=function(n,e){return(n!==0||e!==0)&&(this.cache=null,this.queue.push([1,0,0,1,n,e])),this};ql.prototype.scale=function(n,e){return(n!==1||e!==1)&&(this.cache=null,this.queue.push([n,0,0,e,0,0])),this};ql.prototype.rotate=function(n,e,t){var r,i,o;return n!==0&&(this.translate(e,t),r=n*Math.PI/180,i=Math.cos(r),o=Math.sin(r),this.queue.push([i,o,-o,i,0,0]),this.cache=null,this.translate(-e,-t)),this};ql.prototype.skewX=function(n){return n!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(n*Math.PI/180),1,0,0])),this};ql.prototype.skewY=function(n){return n!==0&&(this.cache=null,this.queue.push([1,Math.tan(n*Math.PI/180),0,1,0,0])),this};ql.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var n=1;n<this.queue.length;n++)this.cache=UZ(this.cache,this.queue[n]);return this.cache};ql.prototype.calc=function(n,e,t){var r;return this.queue.length?(this.cache||(this.cache=this.toArray()),r=this.cache,[n*r[0]+e*r[2]+(t?0:r[4]),n*r[1]+e*r[3]+(t?0:r[5])]):[n,e]};var yD=ql,zZ=yD,HZ={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},GZ=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,VZ=/[\s,]+/,WZ=function(e){var t=new zZ,r,i;return e.split(GZ).forEach(function(o){if(o.length){if(typeof HZ[o]<"u"){r=o;return}switch(i=o.split(VZ).map(function(s){return+s||0}),r){case"matrix":i.length===6&&t.matrix(i);return;case"scale":i.length===1?t.scale(i[0],i[0]):i.length===2&&t.scale(i[0],i[1]);return;case"rotate":i.length===1?t.rotate(i[0],0,0):i.length===3&&t.rotate(i[0],i[1],i[2]);return;case"translate":i.length===1?t.translate(i[0],0):i.length===2&&t.translate(i[0],i[1]);return;case"skewX":i.length===1&&t.skewX(i[0]);return;case"skewY":i.length===1&&t.skewY(i[0]);return}}}),t},rv=Math.PI*2;function rR(n,e,t,r){var i=n*r-e*t<0?-1:1,o=n*t+e*r;return o>1&&(o=1),o<-1&&(o=-1),i*Math.acos(o)}function jZ(n,e,t,r,i,o,s,a,l,u){var c=u*(n-t)/2+l*(e-r)/2,h=-l*(n-t)/2+u*(e-r)/2,f=s*s,d=a*a,v=c*c,y=h*h,w=f*d-f*y-d*v;w<0&&(w=0),w/=f*y+d*v,w=Math.sqrt(w)*(i===o?-1:1);var g=w*s/a*h,x=w*-a/s*c,_=u*g-l*x+(n+t)/2,E=l*g+u*x+(e+r)/2,C=(c-g)/s,I=(h-x)/a,R=(-c-g)/s,L=(-h-x)/a,k=rR(1,0,C,I),D=rR(C,I,R,L);return o===0&&D>0&&(D-=rv),o===1&&D<0&&(D+=rv),[_,E,k,D]}function $Z(n,e){var t=1.3333333333333333*Math.tan(e/4),r=Math.cos(n),i=Math.sin(n),o=Math.cos(n+e),s=Math.sin(n+e);return[r,i,r-i*t,i+r*t,o+s*t,s-o*t,o,s]}var qZ=function(e,t,r,i,o,s,a,l,u){var c=Math.sin(u*rv/360),h=Math.cos(u*rv/360),f=h*(e-r)/2+c*(t-i)/2,d=-c*(e-r)/2+h*(t-i)/2;if(f===0&&d===0)return[];if(a===0||l===0)return[];a=Math.abs(a),l=Math.abs(l);var v=f*f/(a*a)+d*d/(l*l);v>1&&(a*=Math.sqrt(v),l*=Math.sqrt(v));var y=jZ(e,t,r,i,o,s,a,l,c,h),w=[],g=y[2],x=y[3],_=Math.max(Math.ceil(Math.abs(x)/(rv/4)),1);x/=_;for(var E=0;E<_;E++)w.push($Z(g,x)),g+=x;return w.map(function(C){for(var I=0;I<C.length;I+=2){var R=C[I+0],L=C[I+1];R*=a,L*=l;var k=h*R-c*L,D=c*R+h*L;C[I+0]=k+y[0],C[I+1]=D+y[1]}return C})},iv=1e-10,iR=Math.PI/180;function Qv(n,e,t){if(!(this instanceof Qv))return new Qv(n,e,t);this.rx=n,this.ry=e,this.ax=t}Qv.prototype.transform=function(n){var e=Math.cos(this.ax*iR),t=Math.sin(this.ax*iR),r=[this.rx*(n[0]*e+n[2]*t),this.rx*(n[1]*e+n[3]*t),this.ry*(-n[0]*t+n[2]*e),this.ry*(-n[1]*t+n[3]*e)],i=r[0]*r[0]+r[2]*r[2],o=r[1]*r[1]+r[3]*r[3],s=((r[0]-r[3])*(r[0]-r[3])+(r[2]+r[1])*(r[2]+r[1]))*((r[0]+r[3])*(r[0]+r[3])+(r[2]-r[1])*(r[2]-r[1])),a=(i+o)/2;if(s<iv*a)return this.rx=this.ry=Math.sqrt(a),this.ax=0,this;var l=r[0]*r[1]+r[2]*r[3];s=Math.sqrt(s);var u=a+s/2,c=a-s/2;return this.ax=Math.abs(l)<iv&&Math.abs(u-o)<iv?90:Math.atan(Math.abs(l)>Math.abs(u-o)?(u-i)/l:l/(u-o))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(u),this.ry=Math.sqrt(c)):(this.ax+=90,this.rx=Math.sqrt(c),this.ry=Math.sqrt(u)),this};Qv.prototype.isDegenerate=function(){return this.rx<iv*this.ry||this.ry<iv*this.rx};var XZ=Qv,YZ=BZ,ZZ=WZ,Pf=yD,KZ=qZ,JZ=XZ;function bi(n){if(!(this instanceof bi))return new bi(n);var e=YZ(n);this.segments=e.segments,this.err=e.err,this.__stack=[]}bi.from=function(n){if(typeof n=="string")return new bi(n);if(n instanceof bi){var e=new bi("");return e.err=n.err,e.segments=n.segments.map(function(t){return t.slice()}),e.__stack=n.__stack.map(function(t){return Pf().matrix(t.toArray())}),e}throw new Error("SvgPath.from: invalid param type "+n)};bi.prototype.__matrix=function(n){var e=this,t;n.queue.length&&this.iterate(function(r,i,o,s){var a,l,u,c;switch(r[0]){case"v":a=n.calc(0,r[1],!0),l=a[0]===0?["v",a[1]]:["l",a[0],a[1]];break;case"V":a=n.calc(o,r[1],!1),l=a[0]===n.calc(o,s,!1)[0]?["V",a[1]]:["L",a[0],a[1]];break;case"h":a=n.calc(r[1],0,!0),l=a[1]===0?["h",a[0]]:["l",a[0],a[1]];break;case"H":a=n.calc(r[1],s,!1),l=a[1]===n.calc(o,s,!1)[1]?["H",a[0]]:["L",a[0],a[1]];break;case"a":case"A":var h=n.toArray(),f=JZ(r[1],r[2],r[3]).transform(h);if(h[0]*h[3]-h[1]*h[2]<0&&(r[5]=r[5]?"0":"1"),a=n.calc(r[6],r[7],r[0]==="a"),r[0]==="A"&&r[6]===o&&r[7]===s||r[0]==="a"&&r[6]===0&&r[7]===0){l=[r[0]==="a"?"l":"L",a[0],a[1]];break}f.isDegenerate()?l=[r[0]==="a"?"l":"L",a[0],a[1]]:l=[r[0],f.rx,f.ry,f.ax,r[4],r[5],a[0],a[1]];break;case"m":c=i>0,a=n.calc(r[1],r[2],c),l=["m",a[0],a[1]];break;default:for(u=r[0],l=[u],c=u.toLowerCase()===u,t=1;t<r.length;t+=2)a=n.calc(r[t],r[t+1],c),l.push(a[0],a[1])}e.segments[i]=l},!0)};bi.prototype.__evaluateStack=function(){var n,e;if(this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(n=Pf(),e=this.__stack.length;--e>=0;)n.matrix(this.__stack[e].toArray());this.__matrix(n),this.__stack=[]}};bi.prototype.toString=function(){var n="",e="",t=!1;this.__evaluateStack();for(var r=0,i=this.segments.length;r<i;r++){var o=this.segments[r],s=o[0];s!==e||s==="m"||s==="M"?(s==="m"&&e==="z"&&(n+=" "),n+=s,t=!1):t=!0;for(var a=1;a<o.length;a++){var l=o[a];a===1?t&&l>=0&&(n+=" "):l>=0&&(n+=" "),n+=l}e=s}return n};bi.prototype.translate=function(n,e){return this.__stack.push(Pf().translate(n,e||0)),this};bi.prototype.scale=function(n,e){return this.__stack.push(Pf().scale(n,!e&&e!==0?n:e)),this};bi.prototype.rotate=function(n,e,t){return this.__stack.push(Pf().rotate(n,e||0,t||0)),this};bi.prototype.skewX=function(n){return this.__stack.push(Pf().skewX(n)),this};bi.prototype.skewY=function(n){return this.__stack.push(Pf().skewY(n)),this};bi.prototype.matrix=function(n){return this.__stack.push(Pf().matrix(n)),this};bi.prototype.transform=function(n){return n.trim()?(this.__stack.push(ZZ(n)),this):this};bi.prototype.round=function(n){var e=0,t=0,r=0,i=0,o;return n=n||0,this.__evaluateStack(),this.segments.forEach(function(s){var a=s[0].toLowerCase()===s[0];switch(s[0]){case"H":case"h":a&&(s[1]+=r),r=s[1]-s[1].toFixed(n),s[1]=+s[1].toFixed(n);return;case"V":case"v":a&&(s[1]+=i),i=s[1]-s[1].toFixed(n),s[1]=+s[1].toFixed(n);return;case"Z":case"z":r=e,i=t;return;case"M":case"m":a&&(s[1]+=r,s[2]+=i),r=s[1]-s[1].toFixed(n),i=s[2]-s[2].toFixed(n),e=r,t=i,s[1]=+s[1].toFixed(n),s[2]=+s[2].toFixed(n);return;case"A":case"a":a&&(s[6]+=r,s[7]+=i),r=s[6]-s[6].toFixed(n),i=s[7]-s[7].toFixed(n),s[1]=+s[1].toFixed(n),s[2]=+s[2].toFixed(n),s[3]=+s[3].toFixed(n+2),s[6]=+s[6].toFixed(n),s[7]=+s[7].toFixed(n);return;default:o=s.length,a&&(s[o-2]+=r,s[o-1]+=i),r=s[o-2]-s[o-2].toFixed(n),i=s[o-1]-s[o-1].toFixed(n),s.forEach(function(l,u){u&&(s[u]=+s[u].toFixed(n))});return}}),this};bi.prototype.iterate=function(n,e){var t=this.segments,r={},i=!1,o=0,s=0,a=0,l=0,u,c,h;if(e||this.__evaluateStack(),t.forEach(function(f,d){var v=n(f,d,o,s);Array.isArray(v)&&(r[d]=v,i=!0);var y=f[0]===f[0].toLowerCase();switch(f[0]){case"m":case"M":o=f[1]+(y?o:0),s=f[2]+(y?s:0),a=o,l=s;return;case"h":case"H":o=f[1]+(y?o:0);return;case"v":case"V":s=f[1]+(y?s:0);return;case"z":case"Z":o=a,s=l;return;default:o=f[f.length-2]+(y?o:0),s=f[f.length-1]+(y?s:0)}}),!i)return this;for(h=[],u=0;u<t.length;u++)if(typeof r[u]<"u")for(c=0;c<r[u].length;c++)h.push(r[u][c]);else h.push(t[u]);return this.segments=h,this};bi.prototype.abs=function(){return this.iterate(function(n,e,t,r){var i=n[0],o=i.toUpperCase(),s;if(i!==o)switch(n[0]=o,i){case"v":n[1]+=r;return;case"a":n[6]+=t,n[7]+=r;return;default:for(s=1;s<n.length;s++)n[s]+=s%2?t:r}},!0),this};bi.prototype.rel=function(){return this.iterate(function(n,e,t,r){var i=n[0],o=i.toLowerCase(),s;if(i!==o&&!(e===0&&i==="M"))switch(n[0]=o,i){case"V":n[1]-=r;return;case"A":n[6]-=t,n[7]-=r;return;default:for(s=1;s<n.length;s++)n[s]-=s%2?t:r}},!0),this};bi.prototype.unarc=function(){return this.iterate(function(n,e,t,r){var i,o,s,a=[],l=n[0];return l!=="A"&&l!=="a"?null:(l==="a"?(o=t+n[6],s=r+n[7]):(o=n[6],s=n[7]),i=KZ(t,r,o,s,n[4],n[5],n[1],n[2],n[3]),i.length===0?[[n[0]==="a"?"l":"L",n[6],n[7]]]:(i.forEach(function(u){a.push(["C",u[2],u[3],u[4],u[5],u[6],u[7]])}),a))}),this};bi.prototype.unshort=function(){var n=this.segments,e,t,r,i,o;return this.iterate(function(s,a,l,u){var c=s[0],h=c.toUpperCase(),f;a&&(h==="T"?(f=c==="t",r=n[a-1],r[0]==="Q"?(e=r[1]-l,t=r[2]-u):r[0]==="q"?(e=r[1]-r[3],t=r[2]-r[4]):(e=0,t=0),i=-e,o=-t,f||(i+=l,o+=u),n[a]=[f?"q":"Q",i,o,s[1],s[2]]):h==="S"&&(f=c==="s",r=n[a-1],r[0]==="C"?(e=r[3]-l,t=r[4]-u):r[0]==="c"?(e=r[3]-r[5],t=r[4]-r[6]):(e=0,t=0),i=-e,o=-t,f||(i+=l,o+=u),n[a]=[f?"c":"C",i,o,s[1],s[2],s[3],s[4]]))}),this};var QZ=bi;(function(n){n.exports=QZ})(CZ);const eK=bw(rE);var oR=function(n){var e=n,t,r={a:0,b:0,c:0},i=[],o=/(\[[^\]]+\])/g,s=/(#[^\#\s\+>~\.\[:\)]+)/g,a=/(\.[^\s\+>~\.\[:\)]+)/g,l=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,u=/(:(?!not|global|local)[\w-]+\([^\)]*\))/gi,c=/(:(?!not|global|local)[^\s\+>~\.\[:]+)/g,h=/([^\s\+>~\.\[:]+)/g;return t=function(f,d){var v,y,w,g,x,_;if(f.test(e))for(v=e.match(f),y=0,w=v.length;y<w;y+=1)r[d]+=1,g=v[y],x=e.indexOf(g),_=g.length,i.push({selector:n.substr(x,_),type:d,index:x,length:_}),e=e.replace(g,Array(_+1).join(" "))},function(){var f=function(w){var g,x,_,E;if(w.test(e))for(g=e.match(w),x=0,_=g.length;x<_;x+=1)E=g[x],e=e.replace(E,Array(E.length+1).join("A"))},d=/\\[0-9A-Fa-f]{6}\s?/g,v=/\\[0-9A-Fa-f]{1,5}\s/g,y=/\\./g;f(d),f(v),f(y)}(),function(){var f=/{[^]*/gm,d,v,y,w;if(f.test(e))for(d=e.match(f),v=0,y=d.length;v<y;v+=1)w=d[v],e=e.replace(w,Array(w.length+1).join(" "))}(),t(o,"b"),t(s,"a"),t(a,"b"),t(l,"c"),t(u,"b"),t(c,"b"),e=e.replace(/[\*\s\+>~]/g," "),e=e.replace(/[#\.]/g," "),e=e.replace(/:not/g,"    "),e=e.replace(/:local/g,"      "),e=e.replace(/:global/g,"       "),e=e.replace(/[\(\)]/g," "),t(h,"c"),i.sort(function(f,d){return f.index-d.index}),{selector:n,specificity:"0,"+r.a.toString()+","+r.b.toString()+","+r.c.toString(),specificityArray:[0,r.a,r.b,r.c],parts:i}},tK=function(n,e){var t,r,i;if(typeof n=="string"){if(n.indexOf(",")!==-1)throw"Invalid CSS selector";t=oR(n).specificityArray}else if(Array.isArray(n)){if(n.filter(function(o){return typeof o=="number"}).length!==4)throw"Invalid specificity array";t=n}else throw"Invalid CSS selector or specificity array";if(typeof e=="string"){if(e.indexOf(",")!==-1)throw"Invalid CSS selector";r=oR(e).specificityArray}else if(Array.isArray(e)){if(e.filter(function(o){return typeof o=="number"}).length!==4)throw"Invalid specificity array";r=e}else throw"Invalid CSS selector or specificity array";for(i=0;i<4;i+=1){if(t[i]<r[i])return-1;if(t[i]>r[i])return 1}return 0},iE=function(n,e){return iE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},iE(n,e)};function Or(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function t(){this.constructor=n}iE(n,e),n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var ew=function(){return ew=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++)for(var i in e=arguments[t])Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},ew.apply(this,arguments)};function Vr(n,e,t,r){return new(t||(t=Promise))(function(i,o){function s(u){try{l(r.next(u))}catch(c){o(c)}}function a(u){try{l(r.throw(u))}catch(c){o(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof t?c:new t(function(h){h(c)})).then(s,a)}l((r=r.apply(n,e||[])).next())})}function Wr(n,e){var t,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;s;)try{if(t=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,r=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!((i=i.length>0&&i[i.length-1])||c[0]!==6&&c[0]!==2)){s=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(c[0]===6&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(n,s)}catch(h){c=[6,h],r=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}var Dl=function(){function n(e){if(this.a=void 0,this.r=0,this.g=0,this.b=0,this.simpleColors={},this.colorDefs=[],this.ok=!1,e){for(var t in e.charAt(0)=="#"&&(e=e.substr(1,6)),e=(e=e.replace(/ /g,"")).toLowerCase(),this.simpleColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},this.simpleColors)e==t&&(e=this.simpleColors[t]);this.colorDefs=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^rgb\(([0-9.]+)%,\s*([0-9.]+)%,\s*([0-9.]+)%\)$/,example:["rgb(50.5%, 25.75%, 75.5%)","rgb(100%,0%,0%)"],process:function(l){return[Math.round(2.55*parseFloat(l[1])),Math.round(2.55*parseFloat(l[2])),Math.round(2.55*parseFloat(l[3]))]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}];for(var r=0;r<this.colorDefs.length;r++){var i=this.colorDefs[r].re,o=this.colorDefs[r].process,s=i.exec(e);if(s){var a=o(s);this.r=a[0],this.g=a[1],this.b=a[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b}}return n.prototype.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},n.prototype.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+(this.a||"1")+")"},n.prototype.toHex=function(){var e=this.r.toString(16),t=this.g.toString(16),r=this.b.toString(16);return e.length==1&&(e="0"+e),t.length==1&&(t="0"+t),r.length==1&&(r="0"+r),"#"+e+t+r},n.prototype.getHelpXML=function(){for(var e=[],t=0;t<this.colorDefs.length;t++)for(var r=this.colorDefs[t].example,i=0;i<r.length;i++)e[e.length]=r[i];for(var o in this.simpleColors)e[e.length]=o;var s=document.createElement("ul");for(s.setAttribute("id","rgbcolor-examples"),t=0;t<e.length;t++)try{var a=document.createElement("li"),l=new n(e[t]),u=document.createElement("div");u.style.cssText="margin: 3px; border: 1px solid black; background:"+l.toHex()+"; color:"+l.toHex(),u.appendChild(document.createTextNode("test"));var c=document.createTextNode(" "+e[t]+" -> "+l.toRGB()+" -> "+l.toHex());a.appendChild(u),a.appendChild(c),s.appendChild(a)}catch{}return s},n}(),$o=function(){function n(e){this.color=e}return n.prototype.getFillData=function(e,t){return Vr(this,void 0,void 0,function(){return Wr(this,function(r){return[2,void 0]})})},n}(),hg=function(){function n(){this.xmlSpace="",this.fill=null,this.fillOpacity=1,this.fontFamily="",this.fontSize=16,this.fontStyle="",this.fontWeight="",this.opacity=1,this.stroke=null,this.strokeDasharray=null,this.strokeDashoffset=0,this.strokeLinecap="",this.strokeLinejoin="",this.strokeMiterlimit=4,this.strokeOpacity=1,this.strokeWidth=1,this.alignmentBaseline="",this.textAnchor="",this.visibility="",this.color=null,this.contextFill=null,this.contextStroke=null,this.fillRule=null}return n.prototype.clone=function(){var e=new n;return e.xmlSpace=this.xmlSpace,e.fill=this.fill,e.fillOpacity=this.fillOpacity,e.fontFamily=this.fontFamily,e.fontSize=this.fontSize,e.fontStyle=this.fontStyle,e.fontWeight=this.fontWeight,e.opacity=this.opacity,e.stroke=this.stroke,e.strokeDasharray=this.strokeDasharray,e.strokeDashoffset=this.strokeDashoffset,e.strokeLinecap=this.strokeLinecap,e.strokeLinejoin=this.strokeLinejoin,e.strokeMiterlimit=this.strokeMiterlimit,e.strokeOpacity=this.strokeOpacity,e.strokeWidth=this.strokeWidth,e.textAnchor=this.textAnchor,e.alignmentBaseline=this.alignmentBaseline,e.visibility=this.visibility,e.color=this.color,e.fillRule=this.fillRule,e.contextFill=this.contextFill,e.contextStroke=this.contextStroke,e},n.default=function(){var e=new n;return e.xmlSpace="default",e.fill=new $o(new Dl("rgb(0, 0, 0)")),e.fillOpacity=1,e.fontFamily="times",e.fontSize=16,e.fontStyle="normal",e.fontWeight="normal",e.opacity=1,e.stroke=null,e.strokeDasharray=null,e.strokeDashoffset=0,e.strokeLinecap="butt",e.strokeLinejoin="miter",e.strokeMiterlimit=4,e.strokeOpacity=1,e.strokeWidth=1,e.alignmentBaseline="baseline",e.textAnchor="start",e.visibility="visible",e.color=new Dl("rgb(0, 0, 0)"),e.fillRule="nonzero",e.contextFill=null,e.contextStroke=null,e},n.getContextColors=function(e,t){t===void 0&&(t=!1);var r={};return e.attributeState.contextFill&&(r.contextFill=e.attributeState.contextFill),e.attributeState.contextStroke&&(r.contextStroke=e.attributeState.contextStroke),t&&e.attributeState.color&&(r.color=e.attributeState.color),r},n}(),Lf=function(){function n(e,t){var r,i,o;this.pdf=e,this.svg2pdfParameters=t.svg2pdfParameters,this.attributeState=t.attributeState?t.attributeState.clone():hg.default(),this.viewport=t.viewport,this.refsHandler=t.refsHandler,this.styleSheets=t.styleSheets,this.textMeasure=t.textMeasure,this.transform=(r=t.transform)!==null&&r!==void 0?r:this.pdf.unitMatrix,this.withinClipPath=(i=t.withinClipPath)!==null&&i!==void 0&&i,this.withinUse=(o=t.withinUse)!==null&&o!==void 0&&o}return n.prototype.clone=function(e){var t,r,i,o;return e===void 0&&(e={}),new n(this.pdf,{svg2pdfParameters:this.svg2pdfParameters,attributeState:e.attributeState?e.attributeState.clone():this.attributeState.clone(),viewport:(t=e.viewport)!==null&&t!==void 0?t:this.viewport,refsHandler:this.refsHandler,styleSheets:this.styleSheets,textMeasure:this.textMeasure,transform:(r=e.transform)!==null&&r!==void 0?r:this.transform,withinClipPath:(i=e.withinClipPath)!==null&&i!==void 0?i:this.withinClipPath,withinUse:(o=e.withinUse)!==null&&o!==void 0?o:this.withinUse})},n}(),xD=function(){function n(e){this.renderedElements={},this.idMap=e,this.idPrefix=String(n.instanceCounter++)}return n.prototype.getRendered=function(e,t,r){return Vr(this,void 0,void 0,function(){var i,o;return Wr(this,function(s){switch(s.label){case 0:return i=this.generateKey(e,t),this.renderedElements.hasOwnProperty(i)?[2,this.renderedElements[e]]:(o=this.get(e),this.renderedElements[i]=o,[4,r(o)]);case 1:return s.sent(),[2,o]}})})},n.prototype.get=function(e){return this.idMap[vD(e,{isIdentifier:!0})]},n.prototype.generateKey=function(e,t){var r="";return t&&(r=["color","contextFill","contextStroke"].map(function(i){var o,s;return(s=(o=t[i])===null||o===void 0?void 0:o.toRGBA())!==null&&s!==void 0?s:""}).join("|")),this.idPrefix+"|"+e+"|"+r},n.instanceCounter=0,n}();function sR(n,e){return Math.atan2(e[1]-n[1],e[0]-n[0])}var aR=2/3;function lR(n,e){return[aR*(e[0]-n[0])+n[0],aR*(e[1]-n[1])+n[1]]}function D0(n){var e=Math.sqrt(n[0]*n[0]+n[1]*n[1]);return[n[0]/e,n[1]/e]}function sm(n,e){return D0([e[0]-n[0],e[1]-n[1]])}function M2(n,e){return[n[0]+e[0],n[1]+e[1]]}function Ab(n,e){var t=n[0],r=n[1];return[e.a*t+e.c*r+e.e,e.b*t+e.d*r+e.f]}var fg=function(){function n(){this.segments=[]}return n.prototype.moveTo=function(e,t){return this.segments.push(new Ro(e,t)),this},n.prototype.lineTo=function(e,t){return this.segments.push(new Hh(e,t)),this},n.prototype.curveTo=function(e,t,r,i,o,s){return this.segments.push(new Su(e,t,r,i,o,s)),this},n.prototype.close=function(){return this.segments.push(new oE),this},n.prototype.transform=function(e){this.segments.forEach(function(t){if(t instanceof Ro||t instanceof Hh||t instanceof Su){var r=Ab([t.x,t.y],e);t.x=r[0],t.y=r[1]}if(t instanceof Su){var i=Ab([t.x1,t.y1],e),o=Ab([t.x2,t.y2],e);t.x1=i[0],t.y1=i[1],t.x2=o[0],t.y2=o[1]}})},n.prototype.draw=function(e){var t=e.pdf;this.segments.forEach(function(r){r instanceof Ro?t.moveTo(r.x,r.y):r instanceof Hh?t.lineTo(r.x,r.y):r instanceof Su?t.curveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):t.close()})},n}(),Ro=function(n,e){this.x=n,this.y=e},Hh=function(n,e){this.x=n,this.y=e},Su=function(n,e,t,r,i,o){this.x1=n,this.y1=e,this.x2=t,this.y2=r,this.x=i,this.y=o},oE=function(){};function yf(n,e){return e.split(",").indexOf((n.nodeName||n.tagName).toLowerCase())>=0}function Pt(n,e,t,r){var i;r===void 0&&(r=t);var o=(i=n.style)===null||i===void 0?void 0:i.getPropertyValue(r);if(o)return o;var s=e.getPropertyValue(n,r);return s||n.hasAttribute(t)&&n.getAttribute(t)||void 0}function jc(n,e,t){if(Pt(n.element,t.styleSheets,"display")==="none")return!1;var r=e,i=Pt(n.element,t.styleSheets,"visibility");return i&&(r=i!=="hidden"),r}function Rf(n,e,t){var r=jc(n,e,t);return n.element.childNodes.length!==0&&(n.children.forEach(function(i){i.isVisible(r,t)&&(r=!0)}),r)}var nK=function(){function n(){this.markers=[]}return n.prototype.addMarker=function(e){this.markers.push(e)},n.prototype.draw=function(e){return Vr(this,void 0,void 0,function(){var t,r,i,o,s,a,l,u;return Wr(this,function(c){switch(c.label){case 0:t=0,c.label=1;case 1:return t<this.markers.length?(r=this.markers[t],i=void 0,o=r.angle,s=r.anchor,a=Math.cos(o),l=Math.sin(o),i=e.pdf.Matrix(a,l,-l,a,s[0],s[1]),i=e.pdf.matrixMult(e.pdf.Matrix(e.attributeState.strokeWidth,0,0,e.attributeState.strokeWidth,0,0),i),i=e.pdf.matrixMult(i,e.transform),e.pdf.saveGraphicsState(),u=hg.getContextColors(e),[4,e.refsHandler.getRendered(r.id,u,function(h){return h.apply(e)})]):[3,4];case 2:c.sent(),e.pdf.doFormObject(e.refsHandler.generateKey(r.id,u),i),e.pdf.restoreGraphicsState(),c.label=3;case 3:return t++,[3,1];case 4:return[2]}})})},n}(),Ch=function(n,e,t,r){r===void 0&&(r=!1),this.id=n,this.anchor=e,this.angle=t,this.isStartMarker=r},OA=/url\(["']?#([^"']+)["']?\)/,rK={bottom:"bottom","text-bottom":"bottom",top:"top","text-top":"top",hanging:"hanging",middle:"middle",central:"middle",center:"middle",mathematical:"middle",ideographic:"ideographic",alphabetic:"alphabetic",baseline:"alphabetic"},uR="http://www.w3.org/2000/svg";function xc(n,e){var t;return(t=n&&n.toString().match(/^([\-0-9.]+)em$/))?parseFloat(t[1])*e:(t=n&&n.toString().match(/^([\-0-9.]+)(px|)$/))?parseFloat(t[1]):0}function wD(n){return rK[n]||"alphabetic"}function rl(n){for(var e,t=[],r=/[+-]?(?:(?:\d+\.?\d*)|(?:\d*\.?\d+))(?:[eE][+-]?\d+)?/g;e=r.exec(n);)t.push(parseFloat(e[0]));return t}function jm(n,e){if(n==="transparent"){var t=new Dl("rgb(0,0,0)");return t.a=0,t}if(e&&n.toLowerCase()==="currentcolor")return e.color||new Dl("rgb(0,0,0)");if(e&&n.toLowerCase()==="context-stroke")return e.contextStroke||new Dl("rgb(0,0,0)");if(e&&n.toLowerCase()==="context-fill")return e.contextFill||new Dl("rgb(0,0,0)");var r=/\s*rgba\(((?:[^,\)]*,){3}[^,\)]*)\)\s*/.exec(n);if(r){var i=rl(r[1]),o=new Dl("rgb("+i.slice(0,3).join(",")+")");return o.a=i[3],o}return new Dl(n)}var Ec={"sans-serif":"helvetica",verdana:"helvetica",arial:"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",serif:"times",cursive:"times",fantasy:"times"},Tb,iK=(Tb=dn.version.split("."),parseFloat(Tb[0])===2&&parseFloat(Tb[1])===3);function SD(n,e){return iK?e==400?n=="italic"?"italic":"normal":e==700&&n!=="italic"?"bold":n+""+e:e==400||e==="normal"?n==="italic"?"italic":"normal":e!=700&&e!=="bold"||n!=="normal"?(e==700?"bold":e)+""+n:"bold"}function BA(n,e){if(Pt(e.element,n.styleSheets,"display")==="none")return[0,0,0,0];var t=[];return e.children.forEach(function(r){var i=r.getBoundingBox(n);if(i[0]!==0||i[1]!==0||i[2]!==0||i[3]!==0){var o=r.computeNodeTransform(n);i[0]=i[0]*o.sx+o.tx,i[1]=i[1]*o.sy+o.ty,i[2]=i[2]*o.sx,i[3]=i[3]*o.sy,t=t.length===0?i:[Math.min(t[0],i[0]),Math.min(t[1],i[1]),Math.max(t[0]+t[2],i[0]+i[2])-Math.min(t[0],i[0]),Math.max(t[1]+t[3],i[1]+i[3])-Math.min(t[1],i[1])]}}),t.length===0?[0,0,0,0]:t}function P1(n,e){var t=parseFloat,r=t(n.getAttribute("x1"))||t(Pt(n,e.styleSheets,"x"))||t(Pt(n,e.styleSheets,"cx"))-t(Pt(n,e.styleSheets,"r"))||0,i=t(n.getAttribute("x2"))||r+t(Pt(n,e.styleSheets,"width"))||t(Pt(n,e.styleSheets,"cx"))+t(Pt(n,e.styleSheets,"r"))||0,o=t(n.getAttribute("y1"))||t(Pt(n,e.styleSheets,"y"))||t(Pt(n,e.styleSheets,"cy"))-t(Pt(n,e.styleSheets,"r"))||0,s=t(n.getAttribute("y2"))||o+t(Pt(n,e.styleSheets,"height"))||t(Pt(n,e.styleSheets,"cy"))+t(Pt(n,e.styleSheets,"r"))||0;return[Math.min(r,i),Math.min(o,s),Math.max(r,i)-Math.min(r,i),Math.max(o,s)-Math.min(o,s)]}function L1(n,e,t,r,i,o,s,a){a===void 0&&(a=!1);var l,u,c=e[0],h=e[1],f=e[2],d=e[3],v=i/f,y=o/d,w=n.getAttribute("preserveAspectRatio");if(w){var g=w.split(" ");g[0]==="defer"&&(g=g.slice(1)),l=g[0],u=g[1]||"meet"}else l="xMidYMid",u="meet";if(l!=="none"&&(u==="meet"?v=y=Math.min(v,y):u==="slice"&&(v=y=Math.max(v,y))),a)return s.pdf.Matrix(v,0,0,y,0,0);var x=t-c*v,_=r-h*y;l.indexOf("xMid")>=0?x+=(i-f*v)/2:l.indexOf("xMax")>=0&&(x+=i-f*v),l.indexOf("YMid")>=0?_+=(o-d*y)/2:l.indexOf("YMax")>=0&&(_+=o-d*y);var E=s.pdf.Matrix(1,0,0,1,x,_),C=s.pdf.Matrix(v,0,0,y,0,0);return s.pdf.matrixMult(C,E)}function SS(n,e){if(!n||n==="none")return e.pdf.unitMatrix;for(var t,r,i=/^[\s,]*matrix\(([^)]+)\)\s*/,o=/^[\s,]*translate\(([^)]+)\)\s*/,s=/^[\s,]*rotate\(([^)]+)\)\s*/,a=/^[\s,]*scale\(([^)]+)\)\s*/,l=/^[\s,]*skewX\(([^)]+)\)\s*/,u=/^[\s,]*skewY\(([^)]+)\)\s*/,c=e.pdf.unitMatrix;n.length>0&&n.length!==r;){r=n.length;var h=i.exec(n);if(h&&(t=rl(h[1]),c=e.pdf.matrixMult(e.pdf.Matrix(t[0],t[1],t[2],t[3],t[4],t[5]),c),n=n.substr(h[0].length)),h=s.exec(n)){t=rl(h[1]);var f=Math.PI*t[0]/180;if(c=e.pdf.matrixMult(e.pdf.Matrix(Math.cos(f),Math.sin(f),-Math.sin(f),Math.cos(f),0,0),c),t[1]||t[2]){var d=e.pdf.Matrix(1,0,0,1,t[1],t[2]),v=e.pdf.Matrix(1,0,0,1,-t[1],-t[2]);c=e.pdf.matrixMult(v,e.pdf.matrixMult(c,d))}n=n.substr(h[0].length)}(h=o.exec(n))&&(t=rl(h[1]),c=e.pdf.matrixMult(e.pdf.Matrix(1,0,0,1,t[0],t[1]||0),c),n=n.substr(h[0].length)),(h=a.exec(n))&&((t=rl(h[1]))[1]||(t[1]=t[0]),c=e.pdf.matrixMult(e.pdf.Matrix(t[0],0,0,t[1],0,0),c),n=n.substr(h[0].length)),(h=l.exec(n))&&(t=parseFloat(h[1]),t*=Math.PI/180,c=e.pdf.matrixMult(e.pdf.Matrix(1,0,Math.tan(t),1,0,0),c),n=n.substr(h[0].length)),(h=u.exec(n))&&(t=parseFloat(h[1]),t*=Math.PI/180,c=e.pdf.matrixMult(e.pdf.Matrix(1,Math.tan(t),0,1,0,0),c),n=n.substr(h[0].length))}return c}var UA=function(){function n(e,t){this.element=e,this.children=t,this.parent=null}return n.prototype.setParent=function(e){this.parent=e},n.prototype.getParent=function(){return this.parent},n.prototype.getBoundingBox=function(e){return Pt(this.element,e.styleSheets,"display")==="none"?[0,0,0,0]:this.getBoundingBoxCore(e)},n.prototype.computeNodeTransform=function(e){var t=this.computeNodeTransformCore(e),r=Pt(this.element,e.styleSheets,"transform");return r?e.pdf.matrixMult(t,SS(r,e)):t},n}(),R1=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Or(e,n),e.prototype.render=function(t){return Promise.resolve()},e.prototype.getBoundingBoxCore=function(t){return[]},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(UA),_D=function(n){function e(t,r,i){var o=n.call(this,r,i)||this;return o.pdfGradientType=t,o.contextColor=void 0,o}return Or(e,n),e.prototype.apply=function(t){return Vr(this,void 0,void 0,function(){var r,i,o,s,a,l;return Wr(this,function(u){return(r=this.element.getAttribute("id"))?(i=this.getStops(t.styleSheets),o=0,s=!1,i.forEach(function(c){var h=c.opacity;h&&h!==1&&(o+=h,s=!0)}),s&&(a=new Wd({opacity:o/i.length})),l=new zh(this.pdfGradientType,this.getCoordinates(),i,a),t.pdf.addShadingPattern(r,l),[2]):[2]})})},e.prototype.getStops=function(t){var r=this;if(this.stops)return this.stops;if(this.contextColor===void 0){this.contextColor=null;for(var i=this;i;){var o=Pt(i.element,t,"color");if(o){this.contextColor=jm(o,null);break}i=i.getParent()}}var s=[];return this.children.forEach(function(a){if(a.element.tagName.toLowerCase()==="stop"){var l=Pt(a.element,t,"color"),u=jm(Pt(a.element,t,"stop-color")||"",l?{color:jm(l,null)}:{color:r.contextColor}),c=parseFloat(Pt(a.element,t,"stop-opacity")||"1");s.push({offset:e.parseGradientOffset(a.element.getAttribute("offset")||"0"),color:[u.r,u.g,u.b],opacity:c})}}),this.stops=s},e.prototype.getBoundingBoxCore=function(t){return P1(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return Rf(this,t,r)},e.parseGradientOffset=function(t){var r=parseFloat(t);return!isNaN(r)&&t.indexOf("%")>=0?r/100:r},e}(R1),bD=function(n){function e(t,r){return n.call(this,"axial",t,r)||this}return Or(e,n),e.prototype.getCoordinates=function(){return[parseFloat(this.element.getAttribute("x1")||"0"),parseFloat(this.element.getAttribute("y1")||"0"),parseFloat(this.element.getAttribute("x2")||"1"),parseFloat(this.element.getAttribute("y2")||"0")]},e}(_D),MD=function(n){function e(t,r){return n.call(this,"radial",t,r)||this}return Or(e,n),e.prototype.getCoordinates=function(){var t=this.element.getAttribute("cx"),r=this.element.getAttribute("cy"),i=this.element.getAttribute("fx"),o=this.element.getAttribute("fy");return[parseFloat(i||t||"0.5"),parseFloat(o||r||"0.5"),0,parseFloat(t||"0.5"),parseFloat(r||"0.5"),parseFloat(this.element.getAttribute("r")||"0.5")]},e}(_D),oK=function(){function n(e,t){this.key=e,this.gradient=t}return n.prototype.getFillData=function(e,t){return Vr(this,void 0,void 0,function(){var r,i,o;return Wr(this,function(s){switch(s.label){case 0:return[4,t.refsHandler.getRendered(this.key,null,function(a){return a.apply(new Lf(t.pdf,{refsHandler:t.refsHandler,textMeasure:t.textMeasure,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters}))})];case 1:return s.sent(),this.gradient.element.hasAttribute("gradientUnits")&&this.gradient.element.getAttribute("gradientUnits").toLowerCase()!=="objectboundingbox"?r=t.pdf.unitMatrix:(i=e.getBoundingBox(t),r=t.pdf.Matrix(i[2],0,0,i[3],i[0],i[1])),o=SS(Pt(this.gradient.element,t.styleSheets,"gradientTransform","transform"),t),[2,{key:this.key,matrix:t.pdf.matrixMult(o,r)}]}})})},n}(),ED=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Or(e,n),e.prototype.apply=function(t){return Vr(this,void 0,void 0,function(){var r,i,o,s,a;return Wr(this,function(l){switch(l.label){case 0:if(!(r=this.element.getAttribute("id")))return[2];i=this.getBoundingBox(t),o=new Ad([i[0],i[1],i[0]+i[2],i[1]+i[3]],i[2],i[3]),t.pdf.beginTilingPattern(o),s=0,a=this.children,l.label=1;case 1:return s<a.length?[4,a[s].render(new Lf(t.pdf,{attributeState:t.attributeState,refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]:[3,4];case 2:l.sent(),l.label=3;case 3:return s++,[3,1];case 4:return t.pdf.endTilingPattern(r,o),[2]}})})},e.prototype.getBoundingBoxCore=function(t){return P1(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return Rf(this,t,r)},e}(R1),sK=function(){function n(e,t){this.key=e,this.pattern=t}return n.prototype.getFillData=function(e,t){return Vr(this,void 0,void 0,function(){var r,i,o,s,a,l,u,c,h,f,d,v;return Wr(this,function(y){switch(y.label){case 0:return[4,t.refsHandler.getRendered(this.key,null,function(w){return w.apply(new Lf(t.pdf,{refsHandler:t.refsHandler,textMeasure:t.textMeasure,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters}))})];case 1:return y.sent(),r={key:this.key,boundingBox:void 0,xStep:0,yStep:0,matrix:void 0},o=t.pdf.unitMatrix,this.pattern.element.hasAttribute("patternUnits")&&this.pattern.element.getAttribute("patternUnits").toLowerCase()!=="objectboundingbox"||(i=e.getBoundingBox(t),o=t.pdf.Matrix(1,0,0,1,i[0],i[1]),a=this.pattern.getBoundingBox(t),l=a[0]*i[0]||0,u=a[1]*i[1]||0,c=a[2]*i[2]||0,h=a[3]*i[3]||0,r.boundingBox=[l,u,l+c,u+h],r.xStep=c,r.yStep=h),s=t.pdf.unitMatrix,this.pattern.element.hasAttribute("patternContentUnits")&&this.pattern.element.getAttribute("patternContentUnits").toLowerCase()==="objectboundingbox"&&(i||(i=e.getBoundingBox(t)),s=t.pdf.Matrix(i[2],0,0,i[3],0,0),a=r.boundingBox||this.pattern.getBoundingBox(t),l=a[0]/i[0]||0,u=a[1]/i[1]||0,c=a[2]/i[2]||0,h=a[3]/i[3]||0,r.boundingBox=[l,u,l+c,u+h],r.xStep=c,r.yStep=h),f=t.pdf.unitMatrix,(d=Pt(this.pattern.element,t.styleSheets,"patternTransform","transform"))&&(f=SS(d,t)),v=s,v=t.pdf.matrixMult(v,o),v=t.pdf.matrixMult(v,f),v=t.pdf.matrixMult(v,t.transform),r.matrix=v,[2,r]}})})},n}();function aK(n,e){var t=OA.exec(n);if(t){var r=t[1],i=e.refsHandler.get(r);return i&&(i instanceof bD||i instanceof MD)?function(s,a,l){var u=a.getStops(l.styleSheets);if(u.length===0)return null;if(u.length===1){var c=u[0].color,h=new Dl;return h.ok=!0,h.r=c[0],h.g=c[1],h.b=c[2],h.a=u[0].opacity,new $o(h)}return new oK(s,a)}(r,i,e):i&&i instanceof ED?new sK(r,i):new $o(new Dl("rgb(0, 0, 0)"))}var o=jm(n,e.attributeState);return o.ok?new $o(o):null}function zA(n,e,t){var r=t||e.element,i=Pt(r,n.styleSheets,"color");if(i){var o=jm(i,n.attributeState);o.ok?n.attributeState.color=o:n.attributeState.color=new Dl("rgb(0,0,0)")}var s=Pt(r,n.styleSheets,"visibility");s&&(n.attributeState.visibility=s);var a=Pt(r,n.styleSheets,"fill");a&&(n.attributeState.fill=aK(a,n));var l=Pt(r,n.styleSheets,"fill-opacity");l&&(n.attributeState.fillOpacity=parseFloat(l));var u=Pt(r,n.styleSheets,"stroke-opacity");u&&(n.attributeState.strokeOpacity=parseFloat(u));var c=Pt(r,n.styleSheets,"opacity");c&&(n.attributeState.opacity=parseFloat(c));var h=Pt(r,n.styleSheets,"stroke-width");h!==void 0&&h!==""&&(n.attributeState.strokeWidth=Math.abs(parseFloat(h)));var f=Pt(r,n.styleSheets,"stroke");if(f)if(f==="none")n.attributeState.stroke=null;else{var d=jm(f,n.attributeState);d.ok&&(n.attributeState.stroke=new $o(d))}f&&n.attributeState.stroke instanceof $o&&(n.attributeState.contextStroke=n.attributeState.stroke.color),a&&n.attributeState.fill instanceof $o&&(n.attributeState.contextFill=n.attributeState.fill.color);var v=Pt(r,n.styleSheets,"stroke-linecap");v&&(n.attributeState.strokeLinecap=v);var y=Pt(r,n.styleSheets,"stroke-linejoin");y&&(n.attributeState.strokeLinejoin=y);var w=Pt(r,n.styleSheets,"stroke-dasharray");if(w){var g=parseInt(Pt(r,n.styleSheets,"stroke-dashoffset")||"0");n.attributeState.strokeDasharray=rl(w),n.attributeState.strokeDashoffset=g}var x=Pt(r,n.styleSheets,"stroke-miterlimit");x!==void 0&&x!==""&&(n.attributeState.strokeMiterlimit=parseFloat(x));var _=r.getAttribute("xml:space");_&&(n.attributeState.xmlSpace=_);var E=Pt(r,n.styleSheets,"font-weight");E&&(n.attributeState.fontWeight=E);var C=Pt(r,n.styleSheets,"font-style");C&&(n.attributeState.fontStyle=C);var I=Pt(r,n.styleSheets,"font-family");if(I){var R=TZ.parse(I);n.attributeState.fontFamily=function(V,$,J){var le=SD(V.fontStyle,V.fontWeight),H=J.pdf.getFontList(),q="";return $.some(function(Z){var oe=H[Z];return oe&&oe.indexOf(le)>=0?(q=Z,!0):(Z=Z.toLowerCase(),!!Ec.hasOwnProperty(Z)&&(q=Z,!0))})||(q="times"),q}(n.attributeState,R,n)}var L=Pt(r,n.styleSheets,"font-size");if(L){var k=n.pdf.getFontSize();n.attributeState.fontSize=xc(L,k)}var D=Pt(r,n.styleSheets,"vertical-align")||Pt(r,n.styleSheets,"alignment-baseline");if(D){var N=D.match(/(baseline|text-bottom|alphabetic|ideographic|middle|central|mathematical|text-top|bottom|center|top|hanging)/);N&&(n.attributeState.alignmentBaseline=N[0])}var B=Pt(r,n.styleSheets,"text-anchor");B&&(n.attributeState.textAnchor=B);var G=Pt(r,n.styleSheets,"fill-rule");G&&(n.attributeState.fillRule=G)}function HA(n,e,t){var r=1,i=1;r*=n.attributeState.fillOpacity,r*=n.attributeState.opacity,n.attributeState.fill instanceof $o&&n.attributeState.fill.color.a!==void 0&&(r*=n.attributeState.fill.color.a),i*=n.attributeState.strokeOpacity,i*=n.attributeState.opacity,n.attributeState.stroke instanceof $o&&n.attributeState.stroke.color.a!==void 0&&(i*=n.attributeState.stroke.color.a);var o,s,a=r<1,l=i<1;if(yf(t,"use")?(a=!0,l=!0,r*=n.attributeState.fill?1:0,i*=n.attributeState.stroke?1:0):n.withinUse&&(n.attributeState.fill!==e.attributeState.fill?(a=!0,r*=n.attributeState.fill?1:0):a&&!n.attributeState.fill&&(r=0),n.attributeState.stroke!==e.attributeState.stroke?(l=!0,i*=n.attributeState.stroke?1:0):l&&!n.attributeState.stroke&&(i=0)),a||l){var u={};a&&(u.opacity=r),l&&(u["stroke-opacity"]=i),n.pdf.setGState(new Wd(u))}if(n.attributeState.fill&&n.attributeState.fill!==e.attributeState.fill&&n.attributeState.fill instanceof $o&&n.attributeState.fill.color.ok&&!yf(t,"text")&&n.pdf.setFillColor(n.attributeState.fill.color.r,n.attributeState.fill.color.g,n.attributeState.fill.color.b),n.attributeState.strokeWidth!==e.attributeState.strokeWidth&&n.pdf.setLineWidth(n.attributeState.strokeWidth),n.attributeState.stroke!==e.attributeState.stroke&&n.attributeState.stroke instanceof $o&&n.pdf.setDrawColor(n.attributeState.stroke.color.r,n.attributeState.stroke.color.g,n.attributeState.stroke.color.b),n.attributeState.strokeLinecap!==e.attributeState.strokeLinecap&&n.pdf.setLineCap(n.attributeState.strokeLinecap),n.attributeState.strokeLinejoin!==e.attributeState.strokeLinejoin&&n.pdf.setLineJoin(n.attributeState.strokeLinejoin),n.attributeState.strokeDasharray===e.attributeState.strokeDasharray&&n.attributeState.strokeDashoffset===e.attributeState.strokeDashoffset||!n.attributeState.strokeDasharray||n.pdf.setLineDashPattern(n.attributeState.strokeDasharray,n.attributeState.strokeDashoffset),n.attributeState.strokeMiterlimit!==e.attributeState.strokeMiterlimit&&n.pdf.setLineMiterLimit(n.attributeState.strokeMiterlimit),n.attributeState.fontFamily!==e.attributeState.fontFamily&&(o=Ec.hasOwnProperty(n.attributeState.fontFamily)?Ec[n.attributeState.fontFamily]:n.attributeState.fontFamily),n.attributeState.fill&&n.attributeState.fill!==e.attributeState.fill&&n.attributeState.fill instanceof $o&&n.attributeState.fill.color.ok){var c=n.attributeState.fill.color;n.pdf.setTextColor(c.r,c.g,c.b)}n.attributeState.fontWeight===e.attributeState.fontWeight&&n.attributeState.fontStyle===e.attributeState.fontStyle||(s=SD(n.attributeState.fontStyle,n.attributeState.fontWeight)),o===void 0&&s===void 0||(o===void 0&&(o=Ec.hasOwnProperty(n.attributeState.fontFamily)?Ec[n.attributeState.fontFamily]:n.attributeState.fontFamily),n.pdf.setFont(o,s)),n.attributeState.fontSize!==e.attributeState.fontSize&&n.pdf.setFontSize(n.attributeState.fontSize*n.pdf.internal.scaleFactor)}function AD(n,e,t){var r=OA.exec(n);if(r){var i=r[1];return t.refsHandler.get(i)||void 0}}function TD(n,e,t){return Vr(this,void 0,void 0,function(){var r,i;return Wr(this,function(o){switch(o.label){case 0:return r=t.clone(),e.element.hasAttribute("clipPathUnits")&&e.element.getAttribute("clipPathUnits").toLowerCase()==="objectboundingbox"&&(i=n.getBoundingBox(t),r.transform=t.pdf.matrixMult(t.pdf.Matrix(i[2],0,0,i[3],i[0],i[1]),t.transform)),[4,e.apply(r)];case 1:return o.sent(),[2]}})})}var CD=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Or(e,n),e.prototype.render=function(t){return Vr(this,void 0,void 0,function(){var r,i,o,s;return Wr(this,function(a){switch(a.label){case 0:return this.isVisible(t.attributeState.visibility!=="hidden",t)?((r=t.clone()).transform=r.pdf.matrixMult(this.computeNodeTransform(r),t.transform),zA(r,this),i=Pt(this.element,r.styleSheets,"clip-path"),(o=i&&i!=="none")?(s=AD(i,0,r))?s.isVisible(!0,r)?(r.pdf.saveGraphicsState(),[4,TD(this,s,r)]):[3,2]:[3,4]:[3,5]):[2];case 1:return a.sent(),[3,3];case 2:return[2];case 3:return[3,5];case 4:o=!1,a.label=5;case 5:return r.withinClipPath||r.pdf.saveGraphicsState(),HA(r,t,this.element),[4,this.renderCore(r)];case 6:return a.sent(),r.withinClipPath||r.pdf.restoreGraphicsState(),o&&r.pdf.restoreGraphicsState(),[2]}})})},e}(UA),_S=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Or(e,n),e}(CD),k1=function(n){function e(t,r,i){var o=n.call(this,r,i)||this;return o.cachedPath=null,o.hasMarkers=t,o}return Or(e,n),e.prototype.renderCore=function(t){return Vr(this,void 0,void 0,function(){var r;return Wr(this,function(i){switch(i.label){case 0:return(r=this.getCachedPath(t))===null||r.segments.length===0?[2]:(t.withinClipPath?r.transform(t.transform):t.pdf.setCurrentTransformationMatrix(t.transform),r.draw(t),[4,this.fillOrStroke(t)]);case 1:return i.sent(),this.hasMarkers?[4,this.drawMarkers(t,r)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},e.prototype.getCachedPath=function(t){return this.cachedPath||(this.cachedPath=this.getPath(t))},e.prototype.drawMarkers=function(t,r){return Vr(this,void 0,void 0,function(){return Wr(this,function(i){switch(i.label){case 0:return[4,this.getMarkers(r,t).draw(t.clone({transform:t.pdf.unitMatrix}))];case 1:return i.sent(),[2]}})})},e.prototype.fillOrStroke=function(t){return Vr(this,void 0,void 0,function(){var r,i,o,s,a;return Wr(this,function(l){switch(l.label){case 0:return t.withinClipPath?[2]:(r=t.attributeState.fill,i=t.attributeState.stroke&&t.attributeState.strokeWidth!==0,r?[4,r.getFillData(this,t)]:[3,2]);case 1:return s=l.sent(),[3,3];case 2:s=void 0,l.label=3;case 3:return o=s,a=t.attributeState.fillRule==="evenodd",r&&i||t.withinUse?a?t.pdf.fillStrokeEvenOdd(o):t.pdf.fillStroke(o):r?a?t.pdf.fillEvenOdd(o):t.pdf.fill(o):i?t.pdf.stroke():t.pdf.discardPath(),[2]}})})},e.prototype.getBoundingBoxCore=function(t){var r=this.getCachedPath(t);if(!r||!r.segments.length)return[0,0,0,0];for(var i=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,s=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=0,u=0,c=0;c<r.segments.length;c++){var h=r.segments[c];(h instanceof Ro||h instanceof Hh||h instanceof Su)&&(l=h.x,u=h.y),h instanceof Su?(i=Math.min(i,l,h.x1,h.x2,h.x),s=Math.max(s,l,h.x1,h.x2,h.x),o=Math.min(o,u,h.y1,h.y2,h.y),a=Math.max(a,u,h.y1,h.y2,h.y)):(i=Math.min(i,l),s=Math.max(s,l),o=Math.min(o,u),a=Math.max(a,u))}return[i,o,s-i,a-o]},e.prototype.getMarkers=function(t,r){var i=Pt(this.element,r.styleSheets,"marker-start"),o=Pt(this.element,r.styleSheets,"marker-mid"),s=Pt(this.element,r.styleSheets,"marker-end"),a=new nK;if(i||o||s){s&&(s=Cb(s)),i&&(i=Cb(i)),o&&(o=Cb(o));for(var l=t.segments,u=[1,0],c=void 0,h=!1,f=[1,0],d=!1,v=function(w){var g=l[w],x=i&&(w===1||!(l[w]instanceof Ro)&&l[w-1]instanceof Ro);x&&l.forEach(function(L,k){if(!d&&L instanceof oE&&k>w){var D=l[k-1];d=(D instanceof Ro||D instanceof Hh||D instanceof Su)&&D}});var _=s&&(w===l.length-1||!(l[w]instanceof Ro)&&l[w+1]instanceof Ro),E=o&&w>0&&!(w===1&&l[w-1]instanceof Ro),C=l[w-1]||null;if(C instanceof Ro||C instanceof Hh||C instanceof Su)if(g instanceof Su)x&&a.addMarker(new Ch(i,[C.x,C.y],sR(d?[d.x,d.y]:[C.x,C.y],[g.x1,g.y1]),!0)),_&&a.addMarker(new Ch(s,[g.x,g.y],sR([g.x2,g.y2],[g.x,g.y]))),E&&(c=sm([C.x,C.y],[g.x1,g.y1]),c=C instanceof Ro?c:D0(M2(u,c)),a.addMarker(new Ch(o,[C.x,C.y],Math.atan2(c[1],c[0])))),u=sm([g.x2,g.y2],[g.x,g.y]);else if(g instanceof Ro||g instanceof Hh){if(c=sm([C.x,C.y],[g.x,g.y]),x){var I=d?sm([d.x,d.y],[g.x,g.y]):c;a.addMarker(new Ch(i,[C.x,C.y],Math.atan2(I[1],I[0]),!0))}_&&a.addMarker(new Ch(s,[g.x,g.y],Math.atan2(c[1],c[0]))),E&&(I=g instanceof Ro?u:C instanceof Ro?c:D0(M2(u,c)),a.addMarker(new Ch(o,[C.x,C.y],Math.atan2(I[1],I[0])))),u=c}else g instanceof oE&&(c=sm([C.x,C.y],[h.x,h.y]),E&&(I=C instanceof Ro?c:D0(M2(u,c)),a.addMarker(new Ch(o,[C.x,C.y],Math.atan2(I[1],I[0])))),_&&(I=D0(M2(c,f)),a.addMarker(new Ch(s,[h.x,h.y],Math.atan2(I[1],I[0])))),u=c);else{h=g instanceof Ro&&g;var R=l[w+1];(R instanceof Ro||R instanceof Hh||R instanceof Su)&&(f=sm([h.x,h.y],[R.x,R.y]))}},y=0;y<l.length;y++)v(y)}return a.markers.forEach(function(w){var g=r.refsHandler.get(w.id);if(g){var x=Pt(g.element,r.styleSheets,"orient");x!=null&&(w.isStartMarker&&x==="auto-start-reverse"&&(w.angle+=Math.PI),isNaN(Number(x))||(w.angle=parseFloat(x)/180*Math.PI))}}),a},e}(_S);function Cb(n){var e=OA.exec(n);return e&&e[1]||void 0}var lK=function(n){function e(t,r){return n.call(this,!0,t,r)||this}return Or(e,n),e.prototype.getPath=function(t){if(t.withinClipPath||t.attributeState.stroke===null)return null;var r=parseFloat(this.element.getAttribute("x1")||"0"),i=parseFloat(this.element.getAttribute("y1")||"0"),o=parseFloat(this.element.getAttribute("x2")||"0"),s=parseFloat(this.element.getAttribute("y2")||"0");return r||o||i||s?new fg().moveTo(r,i).lineTo(o,s):null},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return jc(this,t,r)},e.prototype.fillOrStroke=function(t){return Vr(this,void 0,void 0,function(){return Wr(this,function(r){switch(r.label){case 0:return t.attributeState.fill=null,[4,n.prototype.fillOrStroke.call(this,t)];case 1:return r.sent(),[2]}})})},e}(k1),PD=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Or(e,n),e.prototype.apply=function(t){return Vr(this,void 0,void 0,function(){var r,i,o,s,a;return Wr(this,function(l){switch(l.label){case 0:return this.isVisible(t.attributeState.visibility!=="hidden",t)?((r=t.clone()).transform=r.pdf.unitMatrix,zA(r,this),i=Pt(this.element,r.styleSheets,"clip-path"),i&&i!=="none"&&(o=AD(i,0,r))?o.isVisible(!0,r)?[4,TD(this,o,r)]:[3,2]:[3,3]):[2];case 1:return l.sent(),[3,3];case 2:return[2];case 3:HA(r,t,this.element),s=0,a=this.children,l.label=4;case 4:return s<a.length?[4,a[s].render(r)]:[3,7];case 5:l.sent(),l.label=6;case 6:return s++,[3,4];case 7:return[2]}})})},e.prototype.getBoundingBoxCore=function(t){return BA(t,this)},e.prototype.isVisible=function(t,r){return Rf(this,t,r)},e.prototype.computeNodeTransformCore=function(t){var r=parseFloat(Pt(this.element,t.styleSheets,"x")||"0"),i=parseFloat(Pt(this.element,t.styleSheets,"y")||"0"),o=this.element.getAttribute("viewBox");if(o){var s=rl(o),a=parseFloat(Pt(this.element,t.styleSheets,"width")||Pt(this.element.ownerSVGElement,t.styleSheets,"width")||o[2]),l=parseFloat(Pt(this.element,t.styleSheets,"height")||Pt(this.element.ownerSVGElement,t.styleSheets,"height")||o[3]);return L1(this.element,s,r,i,a,l,t)}return t.pdf.Matrix(1,0,0,1,r,i)},e}(R1),bS=function(n,e){this.width=n,this.height=e},uK=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Or(e,n),e.prototype.renderCore=function(t){return Vr(this,void 0,void 0,function(){var r,i,o,s,a,l,u,c,h,f,d,v,y;return Wr(this,function(w){switch(w.label){case 0:return r=parseFloat,(i=this.element.getAttribute("href")||this.element.getAttribute("xlink:href"))?(o=i.substring(1),s=t.refsHandler.get(o),a=yf(s.element,"symbol,svg")&&s.element.hasAttribute("viewBox"),l=r(Pt(this.element,t.styleSheets,"x")||"0"),u=r(Pt(this.element,t.styleSheets,"y")||"0"),c=void 0,h=void 0,a?(c=r(Pt(this.element,t.styleSheets,"width")||Pt(s.element,t.styleSheets,"width")||"0"),h=r(Pt(this.element,t.styleSheets,"height")||Pt(s.element,t.styleSheets,"height")||"0"),l+=r(Pt(s.element,t.styleSheets,"x")||"0"),u+=r(Pt(s.element,t.styleSheets,"y")||"0"),d=rl(s.element.getAttribute("viewBox")),f=L1(s.element,d,l,u,c,h,t)):f=t.pdf.Matrix(1,0,0,1,l,u),v=hg.getContextColors(t,!0),y=new Lf(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,withinUse:!0,viewport:a?new bS(c,h):t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure,attributeState:Object.assign(hg.default(),v)}),[4,t.refsHandler.getRendered(o,v,function(g){return e.renderReferencedNode(g,o,y)})]):[2];case 1:return w.sent(),t.pdf.saveGraphicsState(),t.pdf.setCurrentTransformationMatrix(t.transform),a&&Pt(s.element,t.styleSheets,"overflow")!=="visible"&&(t.pdf.rect(l,u,c,h),t.pdf.clip().discardPath()),t.pdf.doFormObject(t.refsHandler.generateKey(o,v),f),t.pdf.restoreGraphicsState(),[2]}})})},e.renderReferencedNode=function(t,r,i){return Vr(this,void 0,void 0,function(){var o;return Wr(this,function(s){switch(s.label){case 0:return o=[(o=t.getBoundingBox(i))[0]-.5*o[2],o[1]-.5*o[3],2*o[2],2*o[3]],i.pdf.beginFormObject(o[0],o[1],o[2],o[3],i.pdf.unitMatrix),t instanceof PD?[4,t.apply(i)]:[3,2];case 1:return s.sent(),[3,4];case 2:return[4,t.render(i)];case 3:s.sent(),s.label=4;case 4:return i.pdf.endFormObject(i.refsHandler.generateKey(r,i.attributeState)),[2]}})})},e.prototype.getBoundingBoxCore=function(t){return P1(this.element,t)},e.prototype.isVisible=function(t,r){return jc(this,t,r)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(_S),cK=function(n){function e(t,r){return n.call(this,!1,t,r)||this}return Or(e,n),e.prototype.getPath=function(t){var r=parseFloat(Pt(this.element,t.styleSheets,"width")||"0"),i=parseFloat(Pt(this.element,t.styleSheets,"height")||"0");if(!isFinite(r)||r<=0||!isFinite(i)||i<=0)return null;var o=Pt(this.element,t.styleSheets,"rx"),s=Pt(this.element,t.styleSheets,"ry"),a=Math.min(parseFloat(o||s||"0"),.5*r),l=Math.min(parseFloat(s||o||"0"),.5*i),u=parseFloat(Pt(this.element,t.styleSheets,"x")||"0"),c=parseFloat(Pt(this.element,t.styleSheets,"y")||"0"),h=4/3*(Math.SQRT2-1);return a===0&&l===0?new fg().moveTo(u,c).lineTo(u+r,c).lineTo(u+r,c+i).lineTo(u,c+i).close():new fg().moveTo(u+=a,c).lineTo(u+=r-2*a,c).curveTo(u+a*h,c,u+a,c+(l-l*h),u+=a,c+=l).lineTo(u,c+=i-2*l).curveTo(u,c+l*h,u-a*h,c+l,u-=a,c+=l).lineTo(u+=2*a-r,c).curveTo(u-a*h,c,u-a,c-l*h,u-=a,c-=l).lineTo(u,c+=2*l-i).curveTo(u,c-l*h,u+a*h,c-l,u+=a,c-=l).close()},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return jc(this,t,r)},e}(k1),LD=function(n){function e(t,r){return n.call(this,!1,t,r)||this}return Or(e,n),e.prototype.getPath=function(t){var r=this.getRx(t),i=this.getRy(t);if(!isFinite(r)||i<=0||!isFinite(i)||i<=0)return null;var o=parseFloat(Pt(this.element,t.styleSheets,"cx")||"0"),s=parseFloat(Pt(this.element,t.styleSheets,"cy")||"0"),a=4/3*(Math.SQRT2-1)*r,l=4/3*(Math.SQRT2-1)*i;return new fg().moveTo(o+r,s).curveTo(o+r,s-l,o+a,s-i,o,s-i).curveTo(o-a,s-i,o-r,s-l,o-r,s).curveTo(o-r,s+l,o-a,s+i,o,s+i).curveTo(o+a,s+i,o+r,s+l,o+r,s)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return jc(this,t,r)},e}(k1),hK=function(n){function e(t,r){return n.call(this,t,r)||this}return Or(e,n),e.prototype.getRx=function(t){return parseFloat(Pt(this.element,t.styleSheets,"rx")||"0")},e.prototype.getRy=function(t){return parseFloat(Pt(this.element,t.styleSheets,"ry")||"0")},e}(LD);function RD(n){var e="invisible",t=n.stroke&&n.strokeWidth!==0,r=n.fill;return r&&t?e="fillThenStroke":r?e="fill":t&&(e="stroke"),e}function cR(n){return n.replace(/[\n\r]/g,"")}function hR(n){return n.replace(/[\t]/g," ")}function fR(n){return n.replace(/ +/g," ")}function dR(n,e,t){switch(Pt(n,t.styleSheets,"text-transform")){case"uppercase":return e.toUpperCase();case"lowercase":return e.toLowerCase();default:return e}}var Pb=function(){function n(e,t,r,i){this.textNode=e,this.texts=[],this.textNodes=[],this.contexts=[],this.textAnchor=t,this.originX=r,this.originY=i,this.textMeasures=[]}return n.prototype.setX=function(e){this.originX=e},n.prototype.setY=function(e){this.originY=e},n.prototype.add=function(e,t,r){this.texts.push(t),this.textNodes.push(e),this.contexts.push(r)},n.prototype.rightTrimText=function(){for(var e=this.texts.length-1;e>=0;e--)if(this.contexts[e].attributeState.xmlSpace==="default"&&(this.texts[e]=this.texts[e].replace(/\s+$/,"")),this.texts[e].match(/[^\s]/))return!1;return!0},n.prototype.measureText=function(e){for(var t=0;t<this.texts.length;t++)this.textMeasures.push({width:e.textMeasure.measureTextWidth(this.texts[t],this.contexts[t].attributeState),length:this.texts[t].length})},n.prototype.put=function(e,t){var r,i,o,s,a=[],l=[],u=[],c=this.originX,h=this.originY,f=c,d=c;for(r=0;r<this.textNodes.length;r++){i=this.textNodes[r],o=this.contexts[r],s=this.textMeasures[r]||{width:e.textMeasure.measureTextWidth(this.texts[r],this.contexts[r].attributeState),length:this.texts[r].length};var v=c,y=h;if(i.nodeName!=="#text"&&!a.includes(i)){a.push(i);var w=n.resolveRelativePositionAttribute(i,"dx");w!==null&&(v+=xc(w,o.attributeState.fontSize));var g=n.resolveRelativePositionAttribute(i,"dy");g!==null&&(y+=xc(g,o.attributeState.fontSize))}l[r]=v,u[r]=y,c=v+s.width+s.length*t,h=y,f=Math.min(f,v),d=Math.max(d,c)}var x=0;switch(this.textAnchor){case"start":x=0;break;case"middle":x=(d-f)/2;break;case"end":x=d-f}for(r=0;r<this.textNodes.length;r++)if(i=this.textNodes[r],o=this.contexts[r],i.nodeName==="#text"||o.attributeState.visibility!=="hidden"){e.pdf.saveGraphicsState(),HA(o,e,i);var _=o.attributeState.alignmentBaseline,E=RD(o.attributeState);e.pdf.text(this.texts[r],l[r]-x,u[r],{baseline:wD(_),angle:e.transform,renderingMode:E==="fill"?void 0:E,charSpace:t===0?void 0:t}),e.pdf.restoreGraphicsState()}return[c,h]},n.resolveRelativePositionAttribute=function(e,t){for(var r,i=e;i&&yf(i,"tspan");){if(i.hasAttribute(t))return i.getAttribute(t);if(((r=e.parentElement)===null||r===void 0?void 0:r.firstChild)!==e)break;i=i.parentElement}return null},n}(),fK=function(n){function e(){var t=n!==null&&n.apply(this,arguments)||this;return t.boundingBox=[],t}return Or(e,n),e.prototype.processTSpans=function(t,r,i,o,s,a){for(var l=i.pdf.getFontSize(),u=i.attributeState.xmlSpace,c=!0,h=!1,f=0;f<r.childNodes.length;f++){var d=r.childNodes[f];if(d.textContent){var v=d.textContent;if(d.nodeName==="#text"){var y=cR(v);y=hR(y),u==="default"&&(y=fR(y),c&&y.match(/^\s/)&&(h=!0),y.match(/[^\s]/)&&(c=!1),a.prevText.match(/\s$/)&&(y=y.replace(/^\s+/,"")));var w=dR(r,y,i);s.add(r,w,i),a.prevText=v,a.prevContext=i}else if(!yf(d,"title")){if(yf(d,"tspan")){var g=d,x=g.getAttribute("x");if(x!==null){var _=xc(x,l);s=new Pb(this,Pt(g,i.styleSheets,"text-anchor")||i.attributeState.textAnchor,_,0),o.push({type:"y",chunk:s})}var E=g.getAttribute("y");if(E!==null){var C=xc(E,l);s=new Pb(this,Pt(g,i.styleSheets,"text-anchor")||i.attributeState.textAnchor,0,C),o.push({type:"x",chunk:s})}var I=i.clone();zA(I,t,g),this.processTSpans(t,g,I,o,s,a)}}}}return h},e.prototype.renderCore=function(t){return Vr(this,void 0,void 0,function(){var r,i,o,s,a,l,u,c,h,f,d,v,y,w,g,x,_,E,C,I,R,L,k;return Wr(this,function(D){if(t.pdf.saveGraphicsState(),r=0,i=0,o=1,s=t.pdf.getFontSize(),a=xc(this.element.getAttribute("x"),s),l=xc(this.element.getAttribute("y"),s),u=xc(this.element.getAttribute("dx"),s),c=xc(this.element.getAttribute("dy"),s),h=parseFloat(this.element.getAttribute("textLength")||"0"),f=t.attributeState.visibility,this.element.childElementCount===0)d=this.element.textContent||"",v=function(N,B){return N=hR(N=cR(N)),B.xmlSpace==="default"&&(N=fR(N=N.trim())),N}(d,t.attributeState),y=dR(this.element,v,t),r=t.textMeasure.getTextOffset(y,t.attributeState),h>0&&(w=t.textMeasure.measureTextWidth(y,t.attributeState),t.attributeState.xmlSpace==="default"&&d.match(/^\s/)&&(o=0),i=(h-w)/(y.length-o)||0),f==="visible"&&(g=t.attributeState.alignmentBaseline,x=RD(t.attributeState),t.pdf.text(y,a+u-r,l+c,{baseline:wD(g),angle:t.transform,renderingMode:x==="fill"?void 0:x,charSpace:i===0?void 0:i}),this.boundingBox=[a+u-r,l+c+.1*s,t.textMeasure.measureTextWidth(y,t.attributeState),s]);else{for(_=[],E=new Pb(this,t.attributeState.textAnchor,a+u,l+c),_.push({type:"",chunk:E}),C=this.processTSpans(this,this.element,t,_,E,{prevText:" ",prevContext:t}),o=C?0:1,I=!0,R=_.length-1;R>=0;R--)I&&(I=_[R].chunk.rightTrimText());h>0&&(L=0,k=0,_.forEach(function(N){var B=N.chunk;B.measureText(t),B.textMeasures.forEach(function(G){var V=G.width,$=G.length;L+=V,k+=$})}),i=(h-L)/(k-o)),_.reduce(function(N,B){var G=B.type,V=B.chunk;return G==="x"?V.setX(N[0]):G==="y"&&V.setY(N[1]),V.put(t,i)},[0,0])}return t.pdf.restoreGraphicsState(),[2]})})},e.prototype.isVisible=function(t,r){return Rf(this,t,r)},e.prototype.getBoundingBoxCore=function(t){return this.boundingBox.length>0?this.boundingBox:P1(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(_S),dK=function(n){function e(t,r){return n.call(this,!0,t,r)||this}return Or(e,n),e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return jc(this,t,r)},e.prototype.getPath=function(t){var r,i,o=new eK(Pt(this.element,t.styleSheets,"d")||"").unshort().unarc().abs(),s=new fg;return o.iterate(function(a){switch(a[0]){case"M":s.moveTo(a[1],a[2]);break;case"L":s.lineTo(a[1],a[2]);break;case"H":s.lineTo(a[1],i);break;case"V":s.lineTo(r,a[1]);break;case"C":s.curveTo(a[1],a[2],a[3],a[4],a[5],a[6]);break;case"Q":var l=lR([r,i],[a[1],a[2]]),u=lR([a[3],a[4]],[a[1],a[2]]);s.curveTo(l[0],l[1],u[0],u[1],a[3],a[4]);break;case"Z":s.close()}switch(a[0]){case"M":case"L":r=a[1],i=a[2];break;case"H":r=a[1];break;case"V":i=a[1];break;case"C":r=a[5],i=a[6];break;case"Q":r=a[3],i=a[4]}}),s},e}(k1),pK=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,((?:.|\s)*)$/i,mK=function(n){function e(t,r){var i=n.call(this,t,r)||this;return i.imageLoadingPromise=null,i.imageUrl=i.element.getAttribute("xlink:href")||i.element.getAttribute("href"),i.imageUrl&&(i.imageLoadingPromise=e.fetchImageData(i.imageUrl)),i}return Or(e,n),e.prototype.renderCore=function(t){return Vr(this,void 0,void 0,function(){var r,i,o,s,a,l,u,c,h,f,d,v,y,w,g,x,_,E;return Wr(this,function(C){switch(C.label){case 0:return this.imageLoadingPromise?(t.pdf.setCurrentTransformationMatrix(t.transform),r=parseFloat(Pt(this.element,t.styleSheets,"width")||"0"),i=parseFloat(Pt(this.element,t.styleSheets,"height")||"0"),o=parseFloat(Pt(this.element,t.styleSheets,"x")||"0"),s=parseFloat(Pt(this.element,t.styleSheets,"y")||"0"),!isFinite(r)||r<=0||!isFinite(i)||i<=0?[2]:[4,this.imageLoadingPromise]):[2];case 1:return a=C.sent(),l=a.data,(u=a.format).indexOf("svg")!==0?[3,3]:(c=new DOMParser,h=c.parseFromString(l,"image/svg+xml").firstElementChild,(!(f=this.element.getAttribute("preserveAspectRatio"))||f.indexOf("defer")<0||!h.getAttribute("preserveAspectRatio"))&&h.setAttribute("preserveAspectRatio",f||""),h.setAttribute("x",String(o)),h.setAttribute("y",String(s)),h.setAttribute("width",String(r)),h.setAttribute("height",String(i)),[4,GA(h,d={}).render(new Lf(t.pdf,{refsHandler:new xD(d),styleSheets:t.styleSheets,viewport:new bS(r,i),svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]);case 2:return C.sent(),[2];case 3:v="data:image/".concat(u,";base64,").concat(btoa(l)),C.label=4;case 4:return C.trys.push([4,6,,7]),[4,e.getImageDimensions(v)];case 5:return y=C.sent(),w=y[0],g=y[1],x=[0,0,w,g],_=L1(this.element,x,o,s,r,i,t),t.pdf.setCurrentTransformationMatrix(_),t.pdf.addImage(v,"",0,0,w,g),[3,7];case 6:return E=C.sent(),typeof console=="object"&&console.warn&&console.warn("Could not load image ".concat(this.imageUrl,`. 
`).concat(E)),[3,7];case 7:return[2]}})})},e.prototype.getBoundingBoxCore=function(t){return P1(this.element,t)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return jc(this,t,r)},e.fetchImageData=function(t){return Vr(this,void 0,void 0,function(){var r,i,o,s,a;return Wr(this,function(l){switch(l.label){case 0:if(!(o=t.match(pK)))return[3,1];if(s=o[2],(a=s.split("/"))[0]!=="image")throw new Error("Unsupported image URL: ".concat(t));return i=a[1],r=o[5],o[4]==="base64"?(r=r.replace(/\s/g,""),r=atob(r)):r=decodeURIComponent(r),[3,3];case 1:return[4,e.fetchImage(t)];case 2:r=l.sent(),i=t.substring(t.lastIndexOf(".")+1),l.label=3;case 3:return[2,{data:r,format:i}]}})})},e.fetchImage=function(t){return new Promise(function(r,i){var o=new XMLHttpRequest;o.open("GET",t,!0),o.responseType="arraybuffer",o.onload=function(){if(o.status!==200)throw new Error("Error ".concat(o.status,": Failed to load image '").concat(t,"'"));for(var s=new Uint8Array(o.response),a="",l=0;l<s.length;l++)a+=String.fromCharCode(s[l]);r(a)},o.onerror=i,o.onabort=i,o.send(null)})},e.getMimeType=function(t){switch(t=t.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";default:return"image/".concat(t)}},e.getImageDimensions=function(t){return new Promise(function(r,i){var o=new Image;o.onload=function(){r([o.width,o.height])},o.onerror=i,o.src=t})},e}(_S),kD=function(n){function e(t,r,i){var o=n.call(this,!0,r,i)||this;return o.closed=t,o}return Or(e,n),e.prototype.getPath=function(t){if(!this.element.hasAttribute("points")||this.element.getAttribute("points")==="")return null;var r=e.parsePointsString(this.element.getAttribute("points")),i=new fg;if(r.length<1)return i;i.moveTo(r[0][0],r[0][1]);for(var o=1;o<r.length;o++)i.lineTo(r[o][0],r[o][1]);return this.closed&&i.close(),i},e.prototype.isVisible=function(t,r){return jc(this,t,r)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.parsePointsString=function(t){for(var r=rl(t),i=[],o=0;o<r.length-1;o+=2){var s=r[o],a=r[o+1];i.push([s,a])}return i},e}(k1),gK=function(n){function e(t,r){return n.call(this,!0,t,r)||this}return Or(e,n),e}(kD),vK=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Or(e,n),e.prototype.render=function(t){return Promise.resolve()},e.prototype.getBoundingBoxCore=function(t){return[0,0,0,0]},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e.prototype.isVisible=function(t,r){return jc(this,t,r)},e}(UA),yK=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Or(e,n),e.prototype.apply=function(t){return Vr(this,void 0,void 0,function(){var r,i,o,s,a,l;return Wr(this,function(u){switch(u.label){case 0:r=this.computeNodeTransform(t),i=this.getBoundingBox(t),t.pdf.beginFormObject(i[0],i[1],i[2],i[3],r),o=hg.getContextColors(t),function(c){var h=c.attributeState,f=c.pdf,d=1,v=1;d*=h.fillOpacity,d*=h.opacity,h.fill instanceof $o&&h.fill.color.a!==void 0&&(d*=h.fill.color.a),v*=h.strokeOpacity,v*=h.opacity,h.stroke instanceof $o&&h.stroke.color.a!==void 0&&(v*=h.stroke.color.a);var y,w={};if(w.opacity=d,w["stroke-opacity"]=v,f.setGState(new Wd(w)),h.fill&&h.fill instanceof $o&&h.fill.color.ok?f.setFillColor(h.fill.color.r,h.fill.color.g,h.fill.color.b):f.setFillColor(0,0,0),f.setLineWidth(h.strokeWidth),h.stroke instanceof $o?f.setDrawColor(h.stroke.color.r,h.stroke.color.g,h.stroke.color.b):f.setDrawColor(0,0,0),f.setLineCap(h.strokeLinecap),f.setLineJoin(h.strokeLinejoin),h.strokeDasharray?f.setLineDashPattern(h.strokeDasharray,h.strokeDashoffset):f.setLineDashPattern([],0),f.setLineMiterLimit(h.strokeMiterlimit),y=Ec.hasOwnProperty(h.fontFamily)?Ec[h.fontFamily]:h.fontFamily,h.fill&&h.fill instanceof $o&&h.fill.color.ok){var g=h.fill.color;f.setTextColor(g.r,g.g,g.b)}else f.setTextColor(0,0,0);var x="";h.fontWeight==="bold"&&(x="bold"),h.fontStyle==="italic"&&(x+="italic"),x===""&&(x="normal"),y!==void 0||x!==void 0?(y===void 0&&(y=Ec.hasOwnProperty(h.fontFamily)?Ec[h.fontFamily]:h.fontFamily),f.setFont(y,x)):f.setFont("helvetica",x),f.setFontSize(h.fontSize*f.internal.scaleFactor)}(s=new Lf(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure,attributeState:Object.assign(hg.default(),o)})),a=0,l=this.children,u.label=1;case 1:return a<l.length?[4,l[a].render(s)]:[3,4];case 2:u.sent(),u.label=3;case 3:return a++,[3,1];case 4:return t.pdf.endFormObject(s.refsHandler.generateKey(this.element.getAttribute("id"),o)),[2]}})})},e.prototype.getBoundingBoxCore=function(t){var r,i=this.element.getAttribute("viewBox");return i&&(r=rl(i)),[r&&r[0]||0,r&&r[1]||0,r&&r[2]||parseFloat(this.element.getAttribute("markerWidth")||"3"),r&&r[3]||parseFloat(this.element.getAttribute("markerHeight")||"3")]},e.prototype.computeNodeTransformCore=function(t){var r,i=parseFloat(this.element.getAttribute("refX")||"0"),o=parseFloat(this.element.getAttribute("refY")||"0"),s=this.element.getAttribute("viewBox");if(s){var a=rl(s);r=L1(this.element,a,0,0,parseFloat(this.element.getAttribute("markerWidth")||"3"),parseFloat(this.element.getAttribute("markerHeight")||"3"),t,!0),r=t.pdf.matrixMult(t.pdf.Matrix(1,0,0,1,-i,-o),r)}else r=t.pdf.Matrix(1,0,0,1,-i,-o);return r},e.prototype.isVisible=function(t,r){return Rf(this,t,r)},e}(R1),xK=function(n){function e(t,r){return n.call(this,t,r)||this}return Or(e,n),e.prototype.getR=function(t){var r;return(r=this.r)!==null&&r!==void 0?r:this.r=parseFloat(Pt(this.element,t.styleSheets,"r")||"0")},e.prototype.getRx=function(t){return this.getR(t)},e.prototype.getRy=function(t){return this.getR(t)},e}(LD),wK=function(n){function e(t,r){return n.call(this,!1,t,r)||this}return Or(e,n),e}(kD),ID=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Or(e,n),e.prototype.renderCore=function(t){return Vr(this,void 0,void 0,function(){var r,i;return Wr(this,function(o){switch(o.label){case 0:r=0,i=this.children,o.label=1;case 1:return r<i.length?[4,i[r].render(t)]:[3,4];case 2:o.sent(),o.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.getBoundingBoxCore=function(t){return BA(t,this)},e}(CD),SK=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Or(e,n),e.prototype.isVisible=function(t,r){return Rf(this,t,r)},e.prototype.render=function(t){return Vr(this,void 0,void 0,function(){var r,i,o,s,a;return Wr(this,function(l){switch(l.label){case 0:return this.isVisible(t.attributeState.visibility!=="hidden",t)?(r=this.getX(t),i=this.getY(t),o=this.getWidth(t),s=this.getHeight(t),t.pdf.saveGraphicsState(),a=t.transform,this.element.hasAttribute("transform")&&(a=t.pdf.matrixMult(SS(this.element.getAttribute("transform"),t),a)),t.pdf.setCurrentTransformationMatrix(a),t.withinUse||Pt(this.element,t.styleSheets,"overflow")==="visible"||t.pdf.rect(r,i,o,s).clip().discardPath(),[4,n.prototype.render.call(this,t.clone({transform:t.pdf.unitMatrix,viewport:t.withinUse?t.viewport:new bS(o,s)}))]):[2];case 1:return l.sent(),t.pdf.restoreGraphicsState(),[2]}})})},e.prototype.computeNodeTransform=function(t){return this.computeNodeTransformCore(t)},e.prototype.computeNodeTransformCore=function(t){if(t.withinUse)return t.pdf.unitMatrix;var r,i=this.getX(t),o=this.getY(t),s=this.getViewBox();if(s){var a=this.getWidth(t),l=this.getHeight(t);r=L1(this.element,s,i,o,a,l,t)}else r=t.pdf.Matrix(1,0,0,1,i,o);return r},e.prototype.getWidth=function(t){if(this.width!==void 0)return this.width;var r,i,o=t.svg2pdfParameters;if(this.isOutermostSvg(t))if(o.width!=null)r=o.width;else if(i=Pt(this.element,t.styleSheets,"width"))r=parseFloat(i);else{var s=this.getViewBox();if(s&&(o.height!=null||Pt(this.element,t.styleSheets,"height"))){var a=s[2]/s[3];r=this.getHeight(t)*a}else r=Math.min(300,t.viewport.width,2*t.viewport.height)}else r=(i=Pt(this.element,t.styleSheets,"width"))?parseFloat(i):t.viewport.width;return this.width=r},e.prototype.getHeight=function(t){if(this.height!==void 0)return this.height;var r,i,o=t.svg2pdfParameters;if(this.isOutermostSvg(t))if(o.height!=null)r=o.height;else if(i=Pt(this.element,t.styleSheets,"height"))r=parseFloat(i);else{var s=this.getViewBox();if(s){var a=s[2]/s[3];r=this.getWidth(t)/a}else r=Math.min(150,t.viewport.width/2,t.viewport.height)}else r=(i=Pt(this.element,t.styleSheets,"height"))?parseFloat(i):t.viewport.height;return this.height=r},e.prototype.getX=function(t){if(this.x!==void 0)return this.x;if(this.isOutermostSvg(t))return this.x=0;var r=Pt(this.element,t.styleSheets,"x");return this.x=r?parseFloat(r):0},e.prototype.getY=function(t){if(this.y!==void 0)return this.y;if(this.isOutermostSvg(t))return this.y=0;var r=Pt(this.element,t.styleSheets,"y");return this.y=r?parseFloat(r):0},e.prototype.getViewBox=function(){if(this.viewBox!==void 0)return this.viewBox;var t=this.element.getAttribute("viewBox");return this.viewBox=t?rl(t):void 0},e.prototype.isOutermostSvg=function(t){return t.svg2pdfParameters.element===this.element},e}(ID),ND=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Or(e,n),e.prototype.isVisible=function(t,r){return Rf(this,t,r)},e.prototype.computeNodeTransformCore=function(t){return t.pdf.unitMatrix},e}(ID),_K=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Or(e,n),e.prototype.renderCore=function(t){return Vr(this,void 0,void 0,function(){var r,i,o,s;return Wr(this,function(a){switch(a.label){case 0:return[4,n.prototype.renderCore.call(this,t)];case 1:return a.sent(),(r=Pt(this.element,t.styleSheets,"href"))&&(i=this.getBoundingBox(t),o=t.pdf.internal.scaleFactor,s=t.pdf.internal.pageSize.getHeight(),t.pdf.link(o*(i[0]*t.transform.sx+t.transform.tx),s-o*(i[1]*t.transform.sy+t.transform.ty),o*i[2],o*i[3],{url:r})),[2]}})})},e}(ND),bK=function(n){function e(){return n!==null&&n.apply(this,arguments)||this}return Or(e,n),e.prototype.apply=function(t){return Vr(this,void 0,void 0,function(){var r,i,o,s,a;return Wr(this,function(l){switch(l.label){case 0:if(!this.isVisible(!0,t))return[2];r=t.pdf.matrixMult(this.computeNodeTransform(t),t.transform),t.pdf.setCurrentTransformationMatrix(r),i=0,o=this.children,l.label=1;case 1:return i<o.length?[4,o[i].render(new Lf(t.pdf,{refsHandler:t.refsHandler,styleSheets:t.styleSheets,viewport:t.viewport,withinClipPath:!0,svg2pdfParameters:t.svg2pdfParameters,textMeasure:t.textMeasure}))]:[3,4];case 2:l.sent(),l.label=3;case 3:return i++,[3,1];case 4:return s=this.children.length>0&&!!Pt(this.children[0].element,t.styleSheets,"clip-rule"),a=s?this.getClipRuleAttr(this.children[0].element,t.styleSheets):this.getClipRuleAttr(this.element,t.styleSheets),t.pdf.clip(a).discardPath(),t.pdf.setCurrentTransformationMatrix(r.inversed()),[2]}})})},e.prototype.getBoundingBoxCore=function(t){return BA(t,this)},e.prototype.isVisible=function(t,r){return Rf(this,t,r)},e.prototype.getClipRuleAttr=function(t,r){return Pt(t,r,"clip-rule")==="evenodd"?"evenodd":void 0},e}(R1);function GA(n,e){var t,r=[];switch(function(o,s){for(var a=[],l=0;l<o.childNodes.length;l++){var u=o.childNodes[l];u.nodeName.charAt(0)!=="#"&&a.push(u)}for(l=0;l<a.length;l++)s(l,a[l])}(n,function(o,s){return r.push(GA(s,e))}),n.tagName.toLowerCase()){case"a":t=new _K(n,r);break;case"g":t=new ND(n,r);break;case"circle":t=new xK(n,r);break;case"clippath":t=new bK(n,r);break;case"ellipse":t=new hK(n,r);break;case"lineargradient":t=new bD(n,r);break;case"image":t=new mK(n,r);break;case"line":t=new lK(n,r);break;case"marker":t=new yK(n,r);break;case"path":t=new dK(n,r);break;case"pattern":t=new ED(n,r);break;case"polygon":t=new gK(n,r);break;case"polyline":t=new wK(n,r);break;case"radialgradient":t=new MD(n,r);break;case"rect":t=new cK(n,r);break;case"svg":t=new SK(n,r);break;case"symbol":t=new PD(n,r);break;case"text":t=new fK(n,r);break;case"use":t=new uK(n,r);break;default:t=new vK(n,r)}if(e!=null&&t.element.hasAttribute("id")){var i=vD(t.element.id,{isIdentifier:!0});e[i]=e[i]||t}return t.children.forEach(function(o){return o.setParent(t)}),t}var MK=function(){function n(e,t){this.rootSvg=e,this.loadExternalSheets=t,this.styleSheets=[]}return n.prototype.load=function(){return Vr(this,void 0,void 0,function(){var e;return Wr(this,function(t){switch(t.label){case 0:return[4,this.collectStyleSheetTexts()];case 1:return e=t.sent(),this.parseCssSheets(e),[2]}})})},n.prototype.collectStyleSheetTexts=function(){return Vr(this,void 0,void 0,function(){var e,t,r,i,o;return Wr(this,function(s){switch(s.label){case 0:if(e=[],this.loadExternalSheets&&this.rootSvg.ownerDocument)for(i=0;i<this.rootSvg.ownerDocument.childNodes.length;i++)(t=this.rootSvg.ownerDocument.childNodes[i]).nodeName==="xml-stylesheet"&&typeof t.data=="string"&&e.push(n.loadSheet(t.data.match(/href=["'].*?["']/)[0].split("=")[1].slice(1,-1)));for(r=this.rootSvg.querySelectorAll("style,link"),i=0;i<r.length;i++)yf(o=r[i],"style")?e.push(o.textContent):this.loadExternalSheets&&yf(o,"link")&&o.getAttribute("rel")==="stylesheet"&&o.hasAttribute("href")&&e.push(n.loadSheet(o.getAttribute("href")));return[4,Promise.all(e)];case 1:return[2,s.sent().filter(function(a){return a!==null})]}})})},n.prototype.parseCssSheets=function(e){for(var t=document.implementation.createHTMLDocument(""),r=0,i=e;r<i.length;r++){var o=i[r],s=t.createElement("style");s.textContent=o,t.body.appendChild(s);var a=s.sheet;if(a instanceof CSSStyleSheet){for(var l=a.cssRules.length-1;l>=0;l--){var u=a.cssRules[l];if(u instanceof CSSStyleRule){var c=u;if(c.selectorText.indexOf(",")>=0){a.deleteRule(l);for(var h=c.cssText.substring(c.selectorText.length),f=n.splitSelectorAtCommas(c.selectorText),d=0;d<f.length;d++)a.insertRule(f[d]+h,l+d)}}else a.deleteRule(l)}this.styleSheets.push(a)}}},n.splitSelectorAtCommas=function(e){for(var t,r=/,|["']/g,i=/[^\\]["]/g,o=/[^\\][']/g,s=[],a="initial",l=-1,u=i,c=0;c<e.length;)switch(a){case"initial":r.lastIndex=c,(t=r.exec(e))?(t[0]===","?(s.push(e.substring(l+1,r.lastIndex-1).trim()),l=r.lastIndex-1):(a="withinQuotes",u=t[0]==='"'?i:o),c=r.lastIndex):(s.push(e.substring(l+1).trim()),c=e.length);break;case"withinQuotes":u.lastIndex=c,(t=u.exec(e))&&(c=u.lastIndex,a="initial")}return s},n.loadSheet=function(e){return new Promise(function(t,r){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="text",i.onload=function(){i.status!==200&&r(new Error("Error ".concat(i.status,": Failed to load '").concat(e,"'"))),t(i.responseText)},i.onerror=r,i.onabort=r,i.send(null)}).catch(function(){return null})},n.prototype.getPropertyValue=function(e,t){for(var r=[],i=0,o=this.styleSheets;i<o.length;i++)for(var s=o[i],a=0;a<s.cssRules.length;a++){var l=s.cssRules[a];l.style.getPropertyValue(t)&&e.matches(l.selectorText)&&r.push(l)}if(r.length!==0)return r.reduce(function(u,c){return f=c,((d=(h=u).style.getPropertyPriority(t))!==f.style.getPropertyPriority(t)?d==="important"?1:-1:tK(h.selectorText,f.selectorText))===1?u:c;var h,f,d}).style.getPropertyValue(t)||void 0},n}(),EK=function(){function n(){this.measureMethods={}}return n.prototype.getTextOffset=function(e,t){var r=t.textAnchor;if(r==="start")return 0;var i=this.measureTextWidth(e,t),o=0;switch(r){case"end":o=i;break;case"middle":o=i/2}return o},n.prototype.measureTextWidth=function(e,t){if(e.length===0)return 0;var r=t.fontFamily;return this.getMeasureFunction(r).call(this,e,t.fontFamily,t.fontSize+"px",t.fontStyle,t.fontWeight)},n.prototype.getMeasurementTextNode=function(){if(!this.textMeasuringTextElement){this.textMeasuringTextElement=document.createElementNS(uR,"text");var e=document.createElementNS(uR,"svg");e.appendChild(this.textMeasuringTextElement),e.style.setProperty("position","absolute"),e.style.setProperty("visibility","hidden"),document.body.appendChild(e)}return this.textMeasuringTextElement},n.prototype.canvasTextMeasure=function(e,t,r,i,o){var s=document.createElement("canvas").getContext("2d");return s!=null?(s.font=[i,o,r,t].join(" "),s.measureText(e).width):0},n.prototype.svgTextMeasure=function(e,t,r,i,o,s){s===void 0&&(s=this.getMeasurementTextNode());var a=s;return a.setAttribute("font-family",t),a.setAttribute("font-size",r),a.setAttribute("font-style",i),a.setAttribute("font-weight",o),a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),a.textContent=e,a.getBBox().width},n.prototype.getMeasureFunction=function(e){var t=this.measureMethods[e];if(!t){var r="16px",i="normal",o="normal",s=this.canvasTextMeasure(n.testString,e,r,i,o),a=this.svgTextMeasure(n.testString,e,r,i,o);t=Math.abs(s-a)<n.epsilon?this.canvasTextMeasure:this.svgTextMeasure,this.measureMethods[e]=t}return t},n.prototype.cleanupTextMeasuring=function(){if(this.textMeasuringTextElement){var e=this.textMeasuringTextElement.parentNode;e&&document.body.removeChild(e),this.textMeasuringTextElement=void 0}},n.testString=`abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789!"$%&/()=?'\\+*-_.:,;^}][{#~|<>`,n.epsilon=.1,n}();function AK(n,e){return Vr(this,arguments,void 0,function(t,r,i){var o,s,a,l,u,c,h,f,d,v,y,w,g,x;return i===void 0&&(i={}),Wr(this,function(_){switch(_.label){case 0:return o=(w=i.x)!==null&&w!==void 0?w:0,s=(g=i.y)!==null&&g!==void 0?g:0,a=(x=i.loadExternalStyleSheets)!==null&&x!==void 0&&x,u=new xD(l={}),[4,(c=new MK(t,a)).load()];case 1:return _.sent(),h=new bS(r.internal.pageSize.getWidth(),r.internal.pageSize.getHeight()),f=ew(ew({},i),{element:t}),d=new EK,v=new Lf(r,{refsHandler:u,styleSheets:c,viewport:h,svg2pdfParameters:f,textMeasure:d}),r.advancedAPI(),r.saveGraphicsState(),r.setCurrentTransformationMatrix(r.Matrix(1,0,0,1,o,s)),r.setLineWidth(v.attributeState.strokeWidth),y=v.attributeState.fill.color,r.setFillColor(y.r,y.g,y.b),r.setFont(v.attributeState.fontFamily),r.setFontSize(v.attributeState.fontSize*r.internal.scaleFactor),[4,GA(t,l).render(v)];case 2:return _.sent(),r.restoreGraphicsState(),r.compatAPI(),v.textMeasure.cleanupTextMeasuring(),[2,r]}})})}dn.API.svg=function(n,e){return e===void 0&&(e={}),AK(n,this,e)};const yn="[PDF Export]",ov={a4:{width:210,height:297},letter:{width:215.9,height:279.4}},Wo="a4",FD=20,TK=20,hd=10,CK=5,PK=3,pR=10,Ph=1,E2=(n,e,t=Wo)=>{const r=ov[t]||ov.a4,i={width:r.width,height:r.height},o={width:r.height,height:r.width},s=FD,a=hd,l=hd,u=hd,c=i.width-s-l,h=i.height-a-u,f=hd,d=TK,v=hd,y=hd,w=o.width-f-v,g=o.height-d-y,x=Math.min(c/n,h/e);if(Math.min(w/n,g/e)>x){const E=f,C=d,I=v,R=y,L=E,k=C,D=w,N=g;return{orientation:"l",width:o.width,height:o.height,marginLeft:E,marginTop:C,marginRight:I,marginBottom:R,printableX:L,printableY:k,printableWidth:D,printableHeight:N}}else{const E=s,C=a,I=l,R=u,L=E,k=C,D=c,N=h;return{orientation:"p",width:i.width,height:i.height,marginLeft:E,marginTop:C,marginRight:I,marginBottom:R,printableX:L,printableY:k,printableWidth:D,printableHeight:N}}},LK=(n,e)=>{const{pathId:t,type:r,textPosition:i}=n,o=document.createElementNS("http://www.w3.org/2000/svg","g"),s="#222222",a=.08,l=2.2,u=1.2,c=1.2,h=.8,f=1.2,d=(v,y)=>{const w=document.createElementNS("http://www.w3.org/2000/svg",v);for(const g in y)w.setAttribute(g,y[g]);return w};if(r==="line"&&(e!=null&&e.endpoints)){const[v,y]=e.endpoints,g=(e.length||0).toFixed(2),x=y[0]-v[0],_=y[1]-v[1],E=(v[0]+y[0])/2,C=(v[1]+y[1])/2,I=Math.sqrt(x*x+_*_),R=I>1e-6?x/I:1,L=I>1e-6?_/I:0,k=-L,D=R,N=i.x-E,B=i.y-C,G=N*k+B*D,V=Math.abs(G)<c?Math.sign(G||1)*c:G,$=[v[0]+k*V,v[1]+D*V],J=[y[0]+k*V,y[1]+D*V],le=[v[0]+k*Math.sign(V)*h,v[1]+D*Math.sign(V)*h],H=[y[0]+k*Math.sign(V)*h,y[1]+D*Math.sign(V)*h],q=[$[0]+k*Math.sign(V)*f,$[1]+D*Math.sign(V)*f],Z=[J[0]+k*Math.sign(V)*f,J[1]+D*Math.sign(V)*f],oe=R,F=L,j=`M ${$[0]} ${$[1]} l ${oe*u} ${F*u} l ${-F*u*.35} ${oe*u*.35} l ${-oe*u*.65} ${-F*u*.65} z`,Q=`M ${J[0]} ${J[1]} l ${-oe*u} ${-F*u} l ${F*u*.35} ${-oe*u*.35} l ${oe*u*.65} ${F*u*.65} z`,we=(g.length*l*.65+c*2)/2,Ee=(i.x-$[0])*oe+(i.y-$[1])*F,Ce=Math.max(u,Ee-we),Ge=Math.min(I-u,Ee+we),Ie=[$[0]+oe*Ce,$[1]+F*Ce],he=[$[0]+oe*Ge,$[1]+F*Ge],ke=Ce>u+1e-6,Ne=Ge<I-u-1e-6;o.appendChild(d("line",{x1:le[0],y1:le[1],x2:q[0],y2:q[1],stroke:s,"stroke-width":a,"stroke-linecap":"round","stroke-linejoin":"round"})),o.appendChild(d("line",{x1:H[0],y1:H[1],x2:Z[0],y2:Z[1],stroke:s,"stroke-width":a,"stroke-linecap":"round","stroke-linejoin":"round"})),ke&&o.appendChild(d("line",{x1:$[0],y1:$[1],x2:Ie[0],y2:Ie[1],stroke:s,"stroke-width":a,"stroke-linecap":"round","stroke-linejoin":"round"})),Ne&&o.appendChild(d("line",{x1:he[0],y1:he[1],x2:J[0],y2:J[1],stroke:s,"stroke-width":a,"stroke-linecap":"round","stroke-linejoin":"round"})),o.appendChild(d("path",{d:j,fill:s,stroke:"none"})),o.appendChild(d("path",{d:Q,fill:s,stroke:"none"}));const Ae=d("text",{x:i.x,y:i.y,"font-size":l,fill:s,stroke:"none","text-anchor":"middle","dominant-baseline":"middle","font-family":"Arial, sans-serif"});Ae.textContent=g,o.appendChild(Ae)}else if(r==="circle"&&(e!=null&&e.center)&&e.diameter!=null){const[v,y]=e.center,w=e.diameter,g=e.radius||w/2,x=`⌀${w.toFixed(2)}`,_=i.x-v,E=i.y-y;let I=_*_+E*E<1e-9?0:Math.atan2(E,_);const R=Math.cos(I),L=Math.sin(I),k=[v+R*g,y+L*g],D=[i.x-R*c,i.y-L*c];o.appendChild(d("line",{x1:k[0],y1:k[1],x2:D[0],y2:D[1],stroke:s,"stroke-width":a,"stroke-linecap":"round","stroke-linejoin":"round"}));const N=d("text",{x:i.x,y:i.y,"font-size":l,fill:s,stroke:"none","text-anchor":"middle","dominant-baseline":"middle","font-family":"Arial, sans-serif"});N.textContent=x,o.appendChild(N)}return o};function RK(n,e){const t=pe.useCallback((i,o,s,a,l,u,c=!1,h={})=>{var we,Ee,Ce,Ge;const f=`${yn} Render[${u||s}]`;if(console.log(`${f} Rendering ${c?"Part Layout":"View"} into printable area at [${a}] target ${l.width}x${l.height}mm`),!o||!l||!o.combinedViewBox){console.warn(`${f} Skipping render due to missing data:`,{viewData:o,printableDimensions:l});return}const[d,v]=a,{width:y,height:w}=l;console.log(`${yn}   View Printable Area: x=${d}, y=${v}, width=${y}, height=${w}`);const g=bu(o.combinedViewBox);if(console.log(`${f}   Layout Combined ViewBox (Content Source): ${o.combinedViewBox}`,g),!g||g.width<=0||g.height<=0){console.warn(`${f} Skipping render due to invalid combined viewBox: ${o.combinedViewBox}`);return}const x=document.createElementNS("http://www.w3.org/2000/svg","g");x.setAttribute("transform",`translate(${d}, ${v})`),i.appendChild(x);const _=document.createElementNS("http://www.w3.org/2000/svg","text");_.setAttribute("x",y/2),_.setAttribute("y",CK/2),_.setAttribute("font-size",PK),_.setAttribute("font-family","Arial, sans-serif"),_.setAttribute("text-anchor","middle"),_.setAttribute("dominant-baseline","middle"),_.setAttribute("fill","#333333"),_.textContent=s;const E=0,C=w,I=y/g.width,R=g.height>1e-6?C/g.height:1,L=Math.min(I,R);console.log(`${f}   Calculated Content Scale: scaleX=${I.toFixed(4)}, scaleY=${R.toFixed(4)}, finalScale=${L.toFixed(4)}`);const k=g.width*L,D=g.height*L,N=(y-k)/2-g.x*L,B=E+(C-D)/2-g.y*L;console.log(`${f}   Calculated Content Translation (within printable area): dX=${N.toFixed(2)}, dY=${B.toFixed(2)}`),console.log(`${f}   Scaled Content Size: ${k.toFixed(2)}x${D.toFixed(2)}mm`);const G=document.createElementNS("http://www.w3.org/2000/svg","g"),V=`translate(${N}, ${B}) scale(${L})`;G.setAttribute("transform",V),console.log(`${f}   Applied Main Content Group Transform: ${V}`),x.appendChild(G);const $=document.createElementNS("http://www.w3.org/2000/svg","rect");$.setAttribute("x",0),$.setAttribute("y",0),$.setAttribute("width",y),$.setAttribute("height",w),$.setAttribute("fill","none"),$.setAttribute("stroke","#000000"),$.setAttribute("stroke-width",.2),x.appendChild($);let J=null,le=null,H=null,q=[];const Z=.15,oe=.1,F=L>0?Z/L:Z,j=L>0?oe/L:oe,Q=L>0?1/L:1;console.log(`${f}   Effective Stroke Widths: Visible=${F.toFixed(4)}, Hidden=${j.toFixed(4)}, DashScale=${Q.toFixed(3)}`);const se=(Ie,he)=>{!Ie||!Array.isArray(Ie)||Ie.forEach(ke=>{const Ne=document.createElementNS("http://www.w3.org/2000/svg","path");Ne.setAttribute("d",ke.data);const Ae=ke.visibility==="hidden";Ne.setAttribute("stroke",Ae?"#777777":"#000000"),Ne.setAttribute("stroke-width",Ae?j:F),Ne.setAttribute("stroke-linecap","round"),Ne.setAttribute("stroke-linejoin","round"),Ae&&Ne.setAttribute("stroke-dasharray",`${2*Q},${1*Q}`),Ne.setAttribute("fill","none"),Ne.setAttribute("vector-effect","non-scaling-stroke"),he.appendChild(Ne)})};c?(console.log(`${f}   Rendering Part Layout Views with Offsets...`),J=document.createElementNS("http://www.w3.org/2000/svg","g"),J.setAttribute("transform",`translate(${h.front.x}, ${h.front.y})`),G.appendChild(J),se(o.frontPaths,J),o.topPaths&&h.top&&(le=document.createElementNS("http://www.w3.org/2000/svg","g"),le.setAttribute("transform",`translate(${h.top.x}, ${h.top.y})`),G.appendChild(le),se(o.topPaths,le)),o.rightPaths&&h.right&&(H=document.createElementNS("http://www.w3.org/2000/svg","g"),H.setAttribute("transform",`translate(${h.right.x}, ${h.right.y})`),G.appendChild(H),se(o.rightPaths,H))):(console.log(`${f}   Rendering Standard Layout Paths...`),q=[...((Ee=(we=o.visible)==null?void 0:we.paths)==null?void 0:Ee.map(Ie=>({...Ie,visibility:"visible"})))||[],...((Ge=(Ce=o.hidden)==null?void 0:Ce.paths)==null?void 0:Ge.map(Ie=>({...Ie,visibility:"hidden"})))||[]],se(q,G)),console.log(`${f} Rendering Measurements...`);const fe=c?u.split("_layout_")[0]:null;Object.values(e).filter(Ie=>{var he;return c?(he=Ie.viewId)==null?void 0:he.startsWith(fe+"_"):Ie.viewId===u}).forEach(Ie=>{var Ae,ie,Ke;console.log(`${f}   Processing measurement: ${Ie.pathId} (View: ${Ie.viewId})`);let he=null,ke=null,Ne=[];if(c)if((Ae=Ie.viewId)!=null&&Ae.endsWith("_front"))he=J,Ne=o.frontPaths||[],console.log(`${f}     -> Belongs to Front View`);else if((ie=Ie.viewId)!=null&&ie.endsWith("_top"))he=le,Ne=o.topPaths||[],console.log(`${f}     -> Belongs to Top View`);else if((Ke=Ie.viewId)!=null&&Ke.endsWith("_right"))he=H,Ne=o.rightPaths||[],console.log(`${f}     -> Belongs to Right View`);else{console.warn(`${f}     -> Could not determine target view group for part measurement: ${Ie.viewId}`);return}else he=G,Ne=q||[],console.log(`${f}     -> Belongs to Standard Layout`);if(!he){console.warn(`${f}     -> Target measurement group is null, skipping measurement ${Ie.pathId}`);return}if(ke=Ne.find(Ve=>Ve.id===Ie.pathId),ke!=null&&ke.geometry){console.log(`${f}     Found geometry for path ${ke.id}`);const Ve=LK(Ie,ke.geometry);Ve?(he.appendChild(Ve),console.log(`${f}     Appended measurement SVG to target group.`)):console.warn(`${f}     renderMeasurementToSvg returned null for ${Ie.pathId}`)}else console.warn(`${f}     Could not find geometry for measurement pathId: ${Ie.pathId} in searched paths (count: ${Ne.length})`)}),console.log(`${f} Finished Rendering ${c?"Part Layout":"View"}`)},[e]);return{exportPdf:pe.useCallback(async()=>{var l,u,c,h;if(console.log(`${yn} Starting PDF Export...`),console.log(`${yn} Input Projections:`,n),console.log(`${yn} Input Measurements:`,e),!n||!n.standardLayout&&(!n.parts||n.parts.length===0)){console.error(`${yn} No projection data available for PDF export (Requires standardLayout or parts array). Data:`,n),alert("No drawing data found to export.");return}let i,o="technical-drawing.pdf",s=!1,a=-1;try{const f=n.standardLayout&&n.standardLayout.combinedViewBox,d=n.parts&&n.parts.length>0;if(f&&d){console.log(`${yn} Exporting Assembly (Standard Layout + Parts)...`),o="technical-drawing-assembly.pdf",s=!0;const v=n.standardLayout;console.log(`${yn}   Calculating page layout for Standard Layout...`);const y=bu(v.combinedViewBox);if(!y||y.width<=0||y.height<=0)throw new Error("Invalid combinedViewBox in standard layout.");const w=y.width*Ph,g=y.height*Ph,x=E2(w,g);console.log(`${yn}   Standard Layout Page: size=${Wo}, orientation=${x.orientation}, W=${x.width}mm, H=${x.height}mm`),console.log(`${yn}   Printable Area: W=${x.printableWidth}mm, H=${x.printableHeight}mm`),console.log(`${yn}   Initializing jsPDF for Assembly: format='${Wo}', orientation='${x.orientation}', unit='mm'`),i=new dn({orientation:x.orientation,unit:"mm",format:Wo}),console.log(`${yn}   Creating temporary SVG for Standard Layout page (${x.width}x${x.height}mm)...`);const _=document.createElementNS("http://www.w3.org/2000/svg","svg");_.setAttribute("width",x.width),_.setAttribute("height",x.height),_.setAttribute("viewBox",`0 0 ${x.width} ${x.height}`);const E=document.createElementNS("http://www.w3.org/2000/svg","g");_.appendChild(E),console.log(`${yn}     Rendering standard layout into SVG printable area...`);const C="",I="assembly_standard_layout",R={combinedViewBox:v.combinedViewBox,visible:{paths:((l=v.paths)==null?void 0:l.filter(B=>B.visibility!=="hidden"))||[]},hidden:{paths:((u=v.paths)==null?void 0:u.filter(B=>B.visibility==="hidden"))||[]}},L=[x.printableX,x.printableY],k={width:x.printableWidth,height:x.printableHeight};t(E,R,C,L,k,I),console.log(`${yn}   Attempting to add Standard Layout SVG to PDF Page 1...`),await i.svg(_,{x:0,y:0,width:x.width,height:x.height}),console.log(`${yn}   Successfully added Standard Layout SVG.`),console.log(`${yn}   Calculating and drawing title block for Standard Layout page...`);const D=Lb(x.width,x.height,x.marginLeft,x.marginTop,x.marginRight,x.marginBottom,x.orientation,ov,Wo);Rb(i,D,{project:"Assembly",partName:"Standard Layout",scale:"NTS"}),console.log(`${yn}   Starting loop through parts for subsequent pages...`)}else if(f&&!d){console.log(`${yn} Exporting Standard Layout Only (Single Page)...`),o="technical-drawing-standard.pdf";const v=n.standardLayout;console.log(`${yn}   Standard Layout Data:`,v);const y=bu(v.combinedViewBox);if(!y||y.width<=0||y.height<=0)throw new Error("Invalid combinedViewBox in standard layout.");const w=y.width*Ph,g=y.height*Ph,x=E2(w,g);console.log(`${yn}   Page: size=${Wo}, orientation=${x.orientation}, W=${x.width}mm, H=${x.height}mm`),console.log(`${yn}   Printable Area: W=${x.printableWidth}mm, H=${x.printableHeight}mm`),console.log(`${yn}   Initializing jsPDF: format='${Wo}', orientation='${x.orientation}', unit='mm'`),i=new dn({orientation:x.orientation,unit:"mm",format:Wo});const _=document.createElementNS("http://www.w3.org/2000/svg","svg");_.setAttribute("width",x.width),_.setAttribute("height",x.height),_.setAttribute("viewBox",`0 0 ${x.width} ${x.height}`);const E=document.createElementNS("http://www.w3.org/2000/svg","g");_.appendChild(E);const C="standard_layout",I="",R={combinedViewBox:v.combinedViewBox,visible:{paths:((c=v.paths)==null?void 0:c.filter(B=>B.visibility!=="hidden"))||[]},hidden:{paths:((h=v.paths)==null?void 0:h.filter(B=>B.visibility==="hidden"))||[]}},L=[x.printableX,x.printableY],k={width:x.printableWidth,height:x.printableHeight};t(E,R,I,L,k,C),await i.svg(_,{x:0,y:0,width:x.width,height:x.height}),console.log(`${yn}   Successfully added single page SVG element.`),console.log(`${yn}   Calculating and drawing title block for single Standard Layout page...`);const D=Lb(x.width,x.height,x.marginLeft,x.marginTop,x.marginRight,x.marginBottom,x.orientation,ov,Wo);Rb(i,D,{project:"Single Component",partName:"Standard Layout",scale:"NTS"})}else if(!f&&d){console.log(`${yn} Exporting Part Views Only (Multi-Page)...`),o="technical-drawing-parts.pdf",s=!0,console.log(`${yn}   Parts Data:`,n.parts),console.log(`${yn}   Calculating layout for the first valid part to initialize PDF...`);let v=null;for(const[y,w]of n.parts.entries()){const g=mR(w,pR);if(g){const{combinedLayoutViewBox:x}=g,_=bu(x);if(_&&_.width>0&&_.height>0){const E=_.width*Ph,C=_.height*Ph;v=E2(E,C),a=y,console.log(`${yn}     First valid part found: ${w.name} (Index ${y})`),console.log(`${yn}     Initial Page Layout: size=${Wo}, orientation=${v.orientation}, W=${v.width}mm, H=${v.height}mm`);break}}}if(!v)throw new Error("No parts with valid views/dimensions found for PDF export.");console.log(`${yn}   Initializing jsPDF for Multi-Part: format='${Wo}', orientation='${v.orientation}', unit='mm'`),i=new dn({orientation:v.orientation,unit:"mm",format:Wo})}if(s&&d)if(a===-1&&!f)console.warn(`${yn} No valid parts found to process, skipping part loop.`);else{for(const[v,y]of n.parts.entries()){console.log(`${yn} Processing Part ${v+1}/${n.parts.length}: ${y.name}`);const w=mR(y,pR);if(!w){console.warn(`${yn} Skipping part ${y.name} (Index ${v}) due to layout calculation error or missing views.`);continue}const{combinedLayoutViewBox:g,pathGroups:x,layoutOffsets:_}=w,E=bu(g);if(!E||E.width<=0||E.height<=0){console.warn(`${yn} Skipping part ${y.name} (Index ${v}) due to invalid combined viewBox: ${g}`);continue}const C=E.width*Ph,I=E.height*Ph,R=E2(C,I);console.log(`${yn}   Part Page Layout: size=${Wo}, orientation=${R.orientation}, W=${R.width}mm, H=${R.height}mm`),console.log(`${yn}   Printable Area: W=${R.printableWidth}mm, H=${R.printableHeight}mm`),!(v===a)||f&&d?(console.log(`${yn}   Adding Page ${i.internal.getNumberOfPages()+1} to PDF: format='${Wo}', orientation='${R.orientation}'`),i.addPage(Wo,R.orientation)):console.log(`${yn}   Processing first part page (Index ${v}). PDF already initialized/page exists.`),console.log(`${yn}     Creating temporary SVG container for part ${y.name} (${R.width}x${R.height}mm)...`);const k=document.createElementNS("http://www.w3.org/2000/svg","svg");k.setAttribute("xmlns","http://www.w3.org/2000/svg"),k.setAttribute("width",R.width),k.setAttribute("height",R.height),k.setAttribute("viewBox",`0 0 ${R.width} ${R.height}`);const D=document.createElementNS("http://www.w3.org/2000/svg","g");k.appendChild(D),console.log(`${yn}       Rendering combined layout for part ${y.name} into SVG printable area...`);const N="",B=`${y.name.replace(/\s+/g,"_")}_layout_${v}`,G={combinedViewBox:g,frontPaths:x.frontPaths,topPaths:x.topPaths,rightPaths:x.rightPaths},V=[R.printableX,R.printableY],$={width:R.printableWidth,height:R.printableHeight};t(D,G,N,V,$,B,!0,_);const J=i.internal.getNumberOfPages();console.log(`${yn}     Attempting to add SVG element for page ${J} (${y.name}) to PDF...`),i.setPage(J),await i.svg(k,{x:0,y:0,width:R.width,height:R.height}),console.log(`${yn}     Finished adding SVG for page ${J}`),console.log(`${yn}       Calculating and drawing title block for part ${y.name}...`);const le=Lb(R.width,R.height,R.marginLeft,R.marginTop,R.marginRight,R.marginBottom,R.orientation,ov,Wo),H={project:"Multi-Part",partName:y.name||`Part ${v+1}`,scale:"NTS"};Rb(i,le,H)}console.log(`${yn}   Finished processing all parts.`)}i?(console.log(`${yn} Saving PDF as "${o}"...`),i.save(o),console.log(`${yn} PDF Export Successful: ${o}`)):(console.warn(`${yn} PDF object was not initialized (likely no valid standard layout or parts found). No export occurred.`),alert("Could not generate PDF: No valid views found."))}catch(f){console.error(`${yn} Error during PDF generation:`,f),alert(`Failed to export PDF: ${f.message}. See console for details.`)}},[n,e,t])}}function Lb(n,e,t,r,i,o,s,a,l=Wo){const u=`${yn} TitleBlockLayout`,c=a[l]||a.a4,h=Math.min(c.width,c.height),f=Math.max(c.width,c.height),d=FD,v=hd,y=h-d-v,w=y/2,x=f*.25*(2/3);console.log(`${u} Base Calc (Portrait ${h}x${f}): PrintableW=${y.toFixed(2)}, TB W=${w.toFixed(2)}, TB H=${x.toFixed(2)}`);const _=3,E=2,C=[1,2],I=C.reduce(($,J)=>$+J,0),R=2.5,L=1.2,k=.5,D=n-i-w,N=e-o-x;if(console.log(`${u} Final Position (Current Page ${n}x${e}, Orientation: ${s}): Margins(R/B)=${i}/${o}, TB X=${D.toFixed(2)}, TB Y=${N.toFixed(2)}`),w<=1e-6||x<=1e-6||D<-1e-6||N<-1e-6)return console.error(`${u} Calculated invalid title block dimensions or position.`,{titleBlockX:D,titleBlockY:N,titleBlockWidth:w,titleBlockHeight:x,pageWidth:n,pageHeight:e,marginRight:i,marginBottom:o}),null;const B={x:D,y:N,width:w,height:x},G=x/_,V=[];for(let $=0;$<_;$++){const J=[],le=N+$*G;let H=D;for(let q=0;q<E;q++){const Z=w*(C[q]/I);J.push({x:H,y:le,width:Z,height:G,textX:H+k,textY:le+G/2,maxWidth:Z-2*k}),H+=Z}V.push(J)}return console.log(`${u} Calculated Layout:`,{outerBox:B,cells:V}),{outerBox:B,cells:V,fontSize:R,lineHeight:R*L}}function Rb(n,e,t={}){if(!n||!e){console.warn(`${yn} DrawTitleBlock: Missing pdf instance or layout data.`);return}const r=`${yn} DrawTitleBlock`;console.log(`${r} Drawing title block... Data:`,t);const{outerBox:i,cells:o,fontSize:s}=e,a=[[{label:"Project:",value:t.project||"CAD-OS Demo"},{label:"Part Name:",value:t.partName||"N/A"}],[{label:"Scale:",value:t.scale||"1:1"},{label:"Material:",value:t.material||"Steel"}],[{label:"Drawn By:",value:t.drawnBy||"Cline"},{label:"Date:",value:t.date||new Date().toLocaleDateString()}]],l=.15;n.saveGraphicsState(),n.setLineWidth(l),n.setDrawColor(0),n.setTextColor(0),n.rect(i.x,i.y,i.width,i.height,"S");let u=i.x;for(let h=0;h<o[0].length-1;h++)u+=o[0][h].width,n.line(u,i.y,u,i.y+i.height);let c=i.y;for(let h=0;h<o.length-1;h++)c+=o[h][0].height,n.line(i.x,c,i.x+i.width,c);for(let h=0;h<o.length;h++)for(let f=0;f<o[h].length;f++){const d=o[h][f],v=a[h]&&a[h][f];if(v){const y=v.label||"",w=v.value||"",g=11,x=10,_=d.textY-g*.15,E=d.textY+x*.35;n.setFont("helvetica","bold"),n.setFontSize(g),n.text(y,d.textX,_,{align:"left",baseline:"middle",maxWidth:d.maxWidth}),n.setFont("helvetica","normal"),n.setFontSize(x),n.text(w,d.textX,E,{align:"left",baseline:"middle",maxWidth:d.maxWidth})}else console.warn(`${r} Missing data for cell [${h}][${f}]`)}n.restoreGraphicsState(),console.log(`${r} Finished drawing title block.`)}function mR(n,e){var k,D,N;const t=`${yn} PartLayout[${n.name}]`;console.log(`${t} Calculating content layout...`);const r=(k=n.views)==null?void 0:k.front,i=(D=n.views)==null?void 0:D.top,o=(N=n.views)==null?void 0:N.right;if(!r&&!i&&!o)return console.warn(`${t} Part has no standard views.`),null;const s=B=>{var V,$;if(!B)return{x:0,y:0,width:0,height:0};const G=B.normalizedViewBox||B.combinedViewBox||((V=B.visible)==null?void 0:V.viewBox)||(($=B.hidden)==null?void 0:$.viewBox);return bu(G||"0 0 0 0")},a=s(r),l=s(i),u=s(o);console.log(`${t}   ViewBoxes (Original Content): Front=`,a,"Top=",l,"Right=",u);const c=a.width>1e-6||a.height>1e-6,h=l.width>1e-6||l.height>1e-6,f=u.width>1e-6||u.height>1e-6;if(!c&&!h&&!f)return console.warn(`${t} Part has no valid view dimensions.`),null;let d=0,v=0,y=c?a.width:0,w=c?a.height:0,g={x:0,y:0},x={x:0,y:0};h&&(g.x=c?(a.width-l.width)/2:0,g.y=c?a.height+e:0,d=Math.min(d,g.x),y=Math.max(y,g.x+l.width),w=Math.max(w,g.y+l.height)),f&&(x.x=c?a.width+e:h?Math.max(g.x+l.width+e,e):0,x.y=c?(a.height-u.height)/2:h?Math.max(g.y,0):0,d=Math.min(d,x.x),v=Math.min(v,x.y),y=Math.max(y,x.x+u.width),w=Math.max(w,x.y+u.height));const _=y-d,E=w-v,C=`${d} ${v} ${_} ${E}`;console.log(`${t}   Calculated Combined Content ViewBox: ${C}`);const I={front:{x:-a.x,y:-a.y},top:{x:g.x-l.x,y:g.y-l.y},right:{x:x.x-u.x,y:x.y-u.y}};console.log(`${t}   Calculated Render Offsets: Front=(${I.front.x.toFixed(2)}, ${I.front.y.toFixed(2)}), Top=(${I.top.x.toFixed(2)}, ${I.top.y.toFixed(2)}), Right=(${I.right.x.toFixed(2)}, ${I.right.y.toFixed(2)})`);const R={frontPaths:[],topPaths:[],rightPaths:[]},L=(B,G)=>{var $,J;if(!B)return;const V=(le,H)=>{!le||!Array.isArray(le)||le.forEach(q=>{q&&typeof q.data=="string"&&R[G].push({...q,visibility:H})})};V(($=B.hidden)==null?void 0:$.paths,"hidden"),V((J=B.visible)==null?void 0:J.paths,"visible")};return L(r,"frontPaths"),L(i,"topPaths"),L(o,"rightPaths"),console.log(`${t}   Collected original paths: Front=${R.frontPaths.length}, Top=${R.topPaths.length}, Right=${R.rightPaths.length}`),{combinedLayoutViewBox:C,pathGroups:R,layoutOffsets:I}}function kK(n){const[e,t]=pe.useState(1),[r,i]=pe.useState({x:0,y:0}),[o,s]=pe.useState(!1),[a,l]=pe.useState({x:0,y:0}),[u,c]=pe.useState({x:0,y:0}),h=pe.useCallback(E=>{if(E.preventDefault(),!n.current)return;const C=n.current.getBoundingClientRect(),I=E.clientX-C.left,R=E.clientY-C.top,L=(I-r.x)/e,k=(R-r.y)/e,D=-Math.sign(E.deltaY)*.1,N=Math.max(.1,Math.min(10,e+D*e)),B=I-L*N,G=R-k*N;t(N),i({x:B,y:G})},[n,r,e]),f=pe.useCallback(E=>{E.target.closest('text[style*="cursor: move"]')||E.target.closest('button, input[type="range"]')||E.button===0&&(s(!0),l({x:E.clientX,y:E.clientY}),c({...r}))},[r]),d=pe.useCallback(E=>{if(!o)return;const C=E.clientX-a.x,I=E.clientY-a.y;i({x:u.x+C,y:u.y+I})},[o,a,u]),v=pe.useCallback(()=>{o&&s(!1)},[o]),y=pe.useCallback(E=>{if(!(E.target.closest('text[style*="cursor: move"]')||E.target.closest('button, input[type="range"]'))&&E.touches.length===1){const C=E.touches[0];s(!0),l({x:C.clientX,y:C.clientY}),c({...r})}},[r]),w=pe.useCallback(E=>{if(!o||E.touches.length!==1)return;const C=E.touches[0],I=C.clientX-a.x,R=C.clientY-a.y;i({x:u.x+I,y:u.y+R})},[o,a,u]),g=pe.useCallback(()=>{o&&s(!1)},[o]),x=pe.useCallback(()=>{t(1),i({x:0,y:0})},[]);return{zoomLevel:e,panOffset:r,isDragging:o,interactionHandlers:{onWheel:h,onMouseDown:f,onMouseMove:d,onMouseUp:v,onMouseLeave:v,onTouchStart:y,onTouchMove:w,onTouchEnd:g,onTouchCancel:g},resetInteraction:x,setZoomLevel:t,setPanOffset:i}}function IK({projections:n,isMobile:e}){if(!n)return ue("div",{children:"Loading projections..."});const t=pe.useRef(null),r=pe.useRef(null),[i,o]=pe.useState({width:800,height:600}),[s,a]=pe.useState(10),[l,u]=pe.useState({}),{exportPdf:c}=RK(n,l),{zoomLevel:h,panOffset:f,isDragging:d,interactionHandlers:v,resetInteraction:y,setZoomLevel:w,setPanOffset:g}=kK(t),x=pe.useCallback(($,J)=>{u(le=>({...le,[$]:{...le[$],textPosition:J}}))},[]),_=pe.useCallback(($,J,le,H)=>{var q;if(!J.geometry||J.geometry.type!=="line"&&J.geometry.type!=="circle"){console.log(`Clicked non-measurable path: ${$}, Type: ${(q=J.geometry)==null?void 0:q.type}`);return}u(Z=>{const oe={...Z};if(oe[$])delete oe[$],console.log(`Removed Measurement: ${$}`);else{const F={x:0,y:0};if(J.geometry.type==="line"&&J.geometry.endpoints){const[se,fe]=J.geometry.endpoints[0],[we,Ee]=J.geometry.endpoints[1];F.x=(se+we)/2,F.y=(fe+Ee)/2-5}else J.geometry.type==="circle"&&J.geometry.center&&(F.x=J.geometry.center[0],F.y=J.geometry.center[1]);let j;const Q=$.split("_");$.startsWith("standard_")?(j="standard_layout",console.log(`[INFO] Clicked path ${$} belongs to Standard Layout: ${j}`)):Q.length>=4?(j=Q.slice(0,Q.length-3).join("_"),console.log(`[INFO] Clicked path ${$} belongs to Part View: ${j}`)):(j=$,console.warn(`[WARN] Could not reliably extract viewId from pathId: ${$}. Using full ID.`)),oe[$]={pathId:$,type:J.geometry.type,textPosition:F,viewId:j},console.log("--- Added Measurement ---"),console.log(`  ID: ${$}`),console.log(`  Type: ${J.geometry.type}`),console.log("  Initial Text Pos:",F),console.log(`  Stored View ID: ${j}`),console.log("------------------------")}return oe})},[]);pe.useEffect(()=>{const $=()=>{t.current&&o({width:t.current.clientWidth,height:t.current.clientHeight})};return $(),window.addEventListener("resize",$),()=>window.removeEventListener("resize",$)},[]);const E=pe.useCallback(()=>{y(),u({})},[y]),C=n.standardLayout,I=n.parts;let R=null,L=0,k=0;const D=50,N=50,B=20;C&&C.combinedViewBox&&(R=bu(C.combinedViewBox),R?(L=R.width*s,k=R.height*s,console.log("[INFO] Standard Layout Dimensions (scaled):",L,k),console.log("[INFO] Standard Layout ViewBox:",C.combinedViewBox)):console.warn("[WARN] Could not parse standardLayout viewBox:",C.combinedViewBox));const G=[D,N],V=N+(k>0?k+B*2:0);return ut("div",{ref:t,style:{width:"100%",height:"100%",position:"relative",backgroundColor:"#e0e0e0",overflow:"hidden",cursor:d?"grabbing":"grab",touchAction:"none"},...v,children:[ue(wY,{isMobile:e,zoomLevel:h,scale:s,containerSize:i,panOffset:f,onZoomChange:w,onPanChange:g,onScaleChange:a,onResetView:E,onExportPDF:c}),ut("div",{ref:r,style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",transform:`translate(${f.x}px, ${f.y}px) scale(${h})`,transformOrigin:"0 0"},children:[C&&R&&ue(yY,{projection:{visible:{paths:C.paths.filter($=>$.id.includes("_visible_")||$.id.includes("_circle")),viewBox:C.combinedViewBox},hidden:{paths:C.paths.filter($=>$.id.includes("_hidden_")),viewBox:C.combinedViewBox},combinedViewBox:C.combinedViewBox,allPaths:C.paths},title:"Standard Views",position:G,dimensions:{width:L,height:k},onPathClick:_,viewId:"standard_layout",activeMeasurements:l,onMeasurementUpdate:x}),I&&I.length>0&&ut("div",{style:{position:"absolute",top:`${V}px`,left:`${D}px`,width:"max-content"},children:[ut("h3",{style:{padding:"0 0 5px 0",margin:0,fontSize:"14px",fontWeight:"bold"},children:[C?"Component Views":"Part Views"," "]}),ue("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:I.map(($,J)=>ue(xY,{part:$,index:J,scale:s,onPathClick:_,activeMeasurements:l,onMeasurementUpdate:x},J))})]})]})]})}const NK=async(n,e,t,r="png")=>{if(console.log("generate3DModelImageDataUrl called with format:",r),!n||!n.faces||!n.faces.vertices)throw new Error("Invalid or missing high detail mesh data.");if(!e)throw new Error("Captured camera state is required.");if(!t)throw new Error("Main camera reference is required.");let i=null,o=null,s=null,a=null,l=null,u=null,c=null,h=null,f=null,d=null;try{const v=t.aspect,y=4096,w=Math.round(y*v);i=document.createElement("canvas"),i.width=w,i.height=y,o=new Yw({canvas:i,antialias:!0,preserveDrawingBuffer:!0,alpha:!1,precision:"highp"}),o.setSize(w,y),o.setClearColor(new Yt("#121212")),o.shadowMap.enabled=!0,s=new ag,s.add(new xA(16777215,1.5));const g=new Jx(16777215,3);g.position.set(10,10,10),g.castShadow=!0,s.add(g);const x=new Jx(16777215,1);x.position.set(-10,-10,5),s.add(x),s.add(new vA(16777215,5592405,1)),n.faces&&n.faces.vertices&&n.faces.normals&&n.faces.triangles&&(l=new Rn,l.setAttribute("position",new _r(new Float32Array(n.faces.vertices),3)),l.setAttribute("normal",new _r(new Float32Array(n.faces.normals),3)),l.setIndex(new _r(new Uint32Array(n.faces.triangles),1)),c=new mS({color:"#6a92a6",metalness:.4,roughness:.3,envMapIntensity:.8,flatShading:!1}),f=new po(l,c),f.castShadow=!0,f.receiveShadow=!0,s.add(f)),n.edges&&n.edges.vertices&&(u=new Rn,u.setAttribute("position",new _r(new Float32Array(n.edges.vertices),3)),h=new Ss({color:"#304352",linewidth:1}),d=new Kl(u,h),s.add(d)),a=new Si(e.fov,w/y,t.near,t.far),a.position.copy(e.position),a.quaternion.copy(e.quaternion),a.updateProjectionMatrix(),o.render(s,a);const _=`image/${r}`,E=r==="jpeg"?.95:void 0;return o.domElement.toDataURL(_,E)}catch(v){throw console.error("Error generating 3D model image data URL:",v),v}finally{o&&o.dispose(),l&&l.dispose(),u&&u.dispose(),c&&c.dispose(),h&&h.dispose(),i=null,o=null,s=null,a=null,l=null,u=null,c=null,h=null,f=null,d=null}};cr.DEFAULT_UP.set(0,0,1);function FK({target:n=[0,0,0],modelSize:e=100,controlsRef:t}){const{camera:r}=fs(),i=pe.useRef(!1);return pe.useEffect(()=>{if(!i.current){const o=e*2.5;r.position.set(o*Math.sin(Math.PI/4),-o*Math.cos(Math.PI/4),o*.7),r.lookAt(n[0],n[1],n[2]),r.updateProjectionMatrix(),i.current=!0}},[r,e,n]),pe.useEffect(()=>{t.current&&(t.current.target.set(n[0],n[1],n[2]),t.current.update())},[t,n]),ue(q6,{ref:t,enableRotate:!0,enablePan:!1,enableZoom:!0,autoRotate:!1,maxPolarAngle:Math.PI*.75,minPolarAngle:Math.PI*.25,makeDefault:!0})}function DK(){return ut(Zm,{children:[ue("ambientLight",{intensity:1.5}),ue("directionalLight",{position:[10,10,10],intensity:3,castShadow:!0}),ue("directionalLight",{position:[-10,-10,5],intensity:1}),ue("hemisphereLight",{groundColor:"#555",intensity:1})]})}function OK({modelSize:n=100}){const e=Math.max(n*5,500),t=Math.floor(e/20);return ue("group",{position:[0,0,-.01],children:ue("gridHelper",{args:[e,t,8947848,4473924],rotation:[Math.PI/2,0,0]})})}function BK({mesh:n,highQuality:e,modelId:t}){return!n||!n.faces?null:ut("group",{children:[n.faces&&n.faces.vertices&&n.faces.normals&&n.faces.triangles&&ut("mesh",{children:[ut("bufferGeometry",{children:[ue("bufferAttribute",{attach:"attributes-position",count:n.faces.vertices.length/3,array:new Float32Array(n.faces.vertices),itemSize:3}),ue("bufferAttribute",{attach:"attributes-normal",count:n.faces.normals.length/3,array:new Float32Array(n.faces.normals),itemSize:3}),ue("bufferAttribute",{attach:"index",count:n.faces.triangles.length,array:new Uint32Array(n.faces.triangles),itemSize:1})]}),ue("meshStandardMaterial",{color:e?"#6a92a6":"#5a8296",metalness:e?.4:0,roughness:e?.3:.5,envMapIntensity:e?.8:.2,flatShading:!1})]}),n.edges&&n.edges.vertices&&ut("lineSegments",{children:[ue("bufferGeometry",{children:ue("bufferAttribute",{attach:"attributes-position",count:n.edges.vertices.length/3,array:new Float32Array(n.edges.vertices),itemSize:3})}),ue("lineBasicMaterial",{color:e?"#304352":"#3c5a6e",linewidth:1})]})]},`model-${t}`)}function UK({mesh:n,modelSize:e,showFloor:t,highQuality:r,modelId:i,controlsRef:o}){return ut(Zm,{children:[ue(FK,{modelSize:e,controlsRef:o}),ue(DK,{}),t&&ue(OK,{modelSize:e}),ue(BK,{mesh:n,highQuality:r,modelId:i}),r&&ue(dY,{preset:"studio"})]})}const zK=pe.forwardRef(({requestHighDetailMesh:n,setIsExporting:e},t)=>{const{camera:r}=fs();return pe.useImperativeHandle(t,()=>({handleExportImage:async(i="png",o)=>{if(!n){console.error("High detail mesh request function not available."),alert("Export function not properly configured.");return}if(!o){console.error("Captured camera state not provided for export."),alert("Failed to capture camera state for export.");return}if(!r){console.error("Main camera reference not available for export.");return}e(!0);try{console.log("Requesting high detail mesh for export...");const s=await n();if(!s||!s.faces||!s.faces.vertices){console.error("Failed to retrieve high detail mesh or mesh is invalid."),alert("Failed to generate high-detail model for export."),e(!1);return}console.log("High detail mesh received."),console.log("Calling image generation service...");const a=await NK(s,o,r,i);console.log("Image generation service returned data URL.");const l=document.createElement("a");l.download=`cad-render-high-quality.${i}`,l.href=a,document.body.appendChild(l),l.click(),document.body.removeChild(l),console.log(`High quality image exported as ${i}`)}catch(s){console.error("Error during handleExportImage:",s),alert(`Failed to export high quality image as ${i}. See console for details.`)}finally{e(!1),console.log("Export process finished.")}}})),null});function HK({mesh:n,isMobile:e,requestHighDetailMesh:t,selectedModel:r,params:i}){const[o,s]=pe.useState(100),[a,l]=pe.useState(!0),[u,c]=pe.useState(!e),[h,f]=pe.useState(Date.now()),[d,v]=pe.useState(!1),y=pe.useRef(),w=pe.useRef(),g=pe.useRef(),x=pe.useCallback(E=>{var R;const C=y.current;if(!C||!C.object){console.error("OrbitControls or camera not available for state capture."),alert("Cannot capture camera state for export.");return}C.update();const I={position:C.object.position.clone(),quaternion:C.object.quaternion.clone(),fov:C.object.fov};(R=w.current)==null||R.handleExportImage(E,I)},[]);pe.useEffect(()=>{f(Date.now())},[n]),pe.useEffect(()=>{if(n&&n.faces&&n.faces.vertices)try{const E=n.faces.vertices;if(E&&E.length>0){const C=[],I=[],R=[];for(let L=0;L<E.length;L+=3)C.push(E[L]),I.push(E[L+1]),R.push(E[L+2]);if(C.length>0&&I.length>0&&R.length>0){const L=Math.max(...C)-Math.min(...C),k=Math.max(...I)-Math.min(...I),D=Math.max(...R)-Math.min(...R),N=Math.max(L,k,D);s(N>0?N:100)}}}catch(E){console.error("Error calculating model size:",E),s(100)}},[n]);const _=u?Math.min(window.devicePixelRatio,2):1;return ut("div",{style:{width:"100%",height:"100%",position:"relative"},children:[ue(U6,{style:{width:"100%",height:"100%",backgroundColor:"#121212",touchAction:"none"},ref:g,dpr:_,gl:{preserveDrawingBuffer:!0,antialias:u,logarithmicDepthBuffer:!0,alpha:!1,precision:u?"highp":"mediump"},shadows:u,camera:{fov:45,near:.1,far:2e3,position:[0,-300,200]},children:ut(pe.Suspense,{fallback:null,children:[ue(UK,{mesh:n,modelSize:o,showFloor:a,highQuality:u,modelId:h,controlsRef:y}),ue(zK,{ref:w,requestHighDetailMesh:t,setIsExporting:v})]})},`canvas-${h}`),d&&ue("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",color:"white",fontSize:"1.5em",zIndex:10},children:"Generating High Quality Export..."}),ut("div",{style:{position:"absolute",bottom:e?"10px":"20px",left:"0",right:"0",display:"flex",justifyContent:"center",gap:e?"8px":"15px",background:"rgba(0,0,0,0.5)",padding:e?"8px":"10px",borderRadius:"8px",margin:"0 auto",width:e?"95%":"auto",maxWidth:"500px"},children:[ue("button",{onClick:()=>l(!a),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:e?"8px 12px":"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:e?"14px":"12px"},children:a?"Hide Grid":"Show Grid"}),!e&&ue("button",{onClick:()=>c(!u),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:u?"Standard Quality":"High Quality"}),ue("button",{onClick:()=>x("jpeg"),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:e?"8px 12px":"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:e?"14px":"12px"},disabled:d,children:d?"Exporting...":"Export JPG"}),ue("button",{onClick:()=>x("png"),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:e?"8px 12px":"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:e?"14px":"12px"},disabled:d,children:d?"Exporting...":"Export PNG"})]})]})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function qh(n,e){return typeof n=="function"?n(e):n}function Ea(n,e){return t=>{e.setState(r=>({...r,[n]:qh(t,r[n])}))}}function MS(n){return n instanceof Function}function GK(n){return Array.isArray(n)&&n.every(e=>typeof e=="number")}function VK(n,e){const t=[],r=i=>{i.forEach(o=>{t.push(o);const s=e(o);s!=null&&s.length&&r(s)})};return r(n),t}function Tn(n,e,t){let r=[],i;return o=>{let s;t.key&&t.debug&&(s=Date.now());const a=n(o);if(!(a.length!==r.length||a.some((c,h)=>r[h]!==c)))return i;r=a;let u;if(t.key&&t.debug&&(u=Date.now()),i=e(...a),t==null||t.onChange==null||t.onChange(i),t.key&&t.debug&&t!=null&&t.debug()){const c=Math.round((Date.now()-s)*100)/100,h=Math.round((Date.now()-u)*100)/100,f=h/16,d=(v,y)=>{for(v=String(v);v.length<y;)v=" "+v;return v};console.info(`%c⏱ ${d(h,5)} /${d(c,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,t==null?void 0:t.key)}return i}}function Cn(n,e,t,r){return{debug:()=>{var i;return(i=n==null?void 0:n.debugAll)!=null?i:n[e]},key:!1,onChange:r}}function WK(n,e,t,r){const i=()=>{var s;return(s=o.getValue())!=null?s:n.options.renderFallbackValue},o={id:`${e.id}_${t.id}`,row:e,column:t,getValue:()=>e.getValue(r),renderValue:i,getContext:Tn(()=>[n,t,e,o],(s,a,l,u)=>({table:s,column:a,row:l,cell:u,getValue:u.getValue,renderValue:u.renderValue}),Cn(n.options,"debugCells"))};return n._features.forEach(s=>{s.createCell==null||s.createCell(o,t,e,n)},{}),o}function jK(n,e,t,r){var i,o;const a={...n._getDefaultColumnDef(),...e},l=a.accessorKey;let u=(i=(o=a.id)!=null?o:l?typeof String.prototype.replaceAll=="function"?l.replaceAll(".","_"):l.replace(/\./g,"_"):void 0)!=null?i:typeof a.header=="string"?a.header:void 0,c;if(a.accessorFn?c=a.accessorFn:l&&(l.includes(".")?c=f=>{let d=f;for(const y of l.split(".")){var v;d=(v=d)==null?void 0:v[y]}return d}:c=f=>f[a.accessorKey]),!u)throw new Error;let h={id:`${String(u)}`,accessorFn:c,parent:r,depth:t,columnDef:a,columns:[],getFlatColumns:Tn(()=>[!0],()=>{var f;return[h,...(f=h.columns)==null?void 0:f.flatMap(d=>d.getFlatColumns())]},Cn(n.options,"debugColumns")),getLeafColumns:Tn(()=>[n._getOrderColumnsFn()],f=>{var d;if((d=h.columns)!=null&&d.length){let v=h.columns.flatMap(y=>y.getLeafColumns());return f(v)}return[h]},Cn(n.options,"debugColumns"))};for(const f of n._features)f.createColumn==null||f.createColumn(h,n);return h}const hs="debugHeaders";function gR(n,e,t){var r;let o={id:(r=t.id)!=null?r:e.id,column:e,index:t.index,isPlaceholder:!!t.isPlaceholder,placeholderId:t.placeholderId,depth:t.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const s=[],a=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(a),s.push(l)};return a(o),s},getContext:()=>({table:n,header:o,column:e})};return n._features.forEach(s=>{s.createHeader==null||s.createHeader(o,n)}),o}const $K={createTable:n=>{n.getHeaderGroups=Tn(()=>[n.getAllColumns(),n.getVisibleLeafColumns(),n.getState().columnPinning.left,n.getState().columnPinning.right],(e,t,r,i)=>{var o,s;const a=(o=r==null?void 0:r.map(h=>t.find(f=>f.id===h)).filter(Boolean))!=null?o:[],l=(s=i==null?void 0:i.map(h=>t.find(f=>f.id===h)).filter(Boolean))!=null?s:[],u=t.filter(h=>!(r!=null&&r.includes(h.id))&&!(i!=null&&i.includes(h.id)));return A2(e,[...a,...u,...l],n)},Cn(n.options,hs)),n.getCenterHeaderGroups=Tn(()=>[n.getAllColumns(),n.getVisibleLeafColumns(),n.getState().columnPinning.left,n.getState().columnPinning.right],(e,t,r,i)=>(t=t.filter(o=>!(r!=null&&r.includes(o.id))&&!(i!=null&&i.includes(o.id))),A2(e,t,n,"center")),Cn(n.options,hs)),n.getLeftHeaderGroups=Tn(()=>[n.getAllColumns(),n.getVisibleLeafColumns(),n.getState().columnPinning.left],(e,t,r)=>{var i;const o=(i=r==null?void 0:r.map(s=>t.find(a=>a.id===s)).filter(Boolean))!=null?i:[];return A2(e,o,n,"left")},Cn(n.options,hs)),n.getRightHeaderGroups=Tn(()=>[n.getAllColumns(),n.getVisibleLeafColumns(),n.getState().columnPinning.right],(e,t,r)=>{var i;const o=(i=r==null?void 0:r.map(s=>t.find(a=>a.id===s)).filter(Boolean))!=null?i:[];return A2(e,o,n,"right")},Cn(n.options,hs)),n.getFooterGroups=Tn(()=>[n.getHeaderGroups()],e=>[...e].reverse(),Cn(n.options,hs)),n.getLeftFooterGroups=Tn(()=>[n.getLeftHeaderGroups()],e=>[...e].reverse(),Cn(n.options,hs)),n.getCenterFooterGroups=Tn(()=>[n.getCenterHeaderGroups()],e=>[...e].reverse(),Cn(n.options,hs)),n.getRightFooterGroups=Tn(()=>[n.getRightHeaderGroups()],e=>[...e].reverse(),Cn(n.options,hs)),n.getFlatHeaders=Tn(()=>[n.getHeaderGroups()],e=>e.map(t=>t.headers).flat(),Cn(n.options,hs)),n.getLeftFlatHeaders=Tn(()=>[n.getLeftHeaderGroups()],e=>e.map(t=>t.headers).flat(),Cn(n.options,hs)),n.getCenterFlatHeaders=Tn(()=>[n.getCenterHeaderGroups()],e=>e.map(t=>t.headers).flat(),Cn(n.options,hs)),n.getRightFlatHeaders=Tn(()=>[n.getRightHeaderGroups()],e=>e.map(t=>t.headers).flat(),Cn(n.options,hs)),n.getCenterLeafHeaders=Tn(()=>[n.getCenterFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),Cn(n.options,hs)),n.getLeftLeafHeaders=Tn(()=>[n.getLeftFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),Cn(n.options,hs)),n.getRightLeafHeaders=Tn(()=>[n.getRightFlatHeaders()],e=>e.filter(t=>{var r;return!((r=t.subHeaders)!=null&&r.length)}),Cn(n.options,hs)),n.getLeafHeaders=Tn(()=>[n.getLeftHeaderGroups(),n.getCenterHeaderGroups(),n.getRightHeaderGroups()],(e,t,r)=>{var i,o,s,a,l,u;return[...(i=(o=e[0])==null?void 0:o.headers)!=null?i:[],...(s=(a=t[0])==null?void 0:a.headers)!=null?s:[],...(l=(u=r[0])==null?void 0:u.headers)!=null?l:[]].map(c=>c.getLeafHeaders()).flat()},Cn(n.options,hs))}};function A2(n,e,t,r){var i,o;let s=0;const a=function(f,d){d===void 0&&(d=1),s=Math.max(s,d),f.filter(v=>v.getIsVisible()).forEach(v=>{var y;(y=v.columns)!=null&&y.length&&a(v.columns,d+1)},0)};a(n);let l=[];const u=(f,d)=>{const v={depth:d,id:[r,`${d}`].filter(Boolean).join("_"),headers:[]},y=[];f.forEach(w=>{const g=[...y].reverse()[0],x=w.column.depth===v.depth;let _,E=!1;if(x&&w.column.parent?_=w.column.parent:(_=w.column,E=!0),g&&(g==null?void 0:g.column)===_)g.subHeaders.push(w);else{const C=gR(t,_,{id:[r,d,_.id,w==null?void 0:w.id].filter(Boolean).join("_"),isPlaceholder:E,placeholderId:E?`${y.filter(I=>I.column===_).length}`:void 0,depth:d,index:y.length});C.subHeaders.push(w),y.push(C)}v.headers.push(w),w.headerGroup=v}),l.push(v),d>0&&u(y,d-1)},c=e.map((f,d)=>gR(t,f,{depth:s,index:d}));u(c,s-1),l.reverse();const h=f=>f.filter(v=>v.column.getIsVisible()).map(v=>{let y=0,w=0,g=[0];v.subHeaders&&v.subHeaders.length?(g=[],h(v.subHeaders).forEach(_=>{let{colSpan:E,rowSpan:C}=_;y+=E,g.push(C)})):y=1;const x=Math.min(...g);return w=w+x,v.colSpan=y,v.rowSpan=w,{colSpan:y,rowSpan:w}});return h((i=(o=l[0])==null?void 0:o.headers)!=null?i:[]),l}const qK=(n,e,t,r,i,o,s)=>{let a={id:e,index:r,original:t,depth:i,parentId:s,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(a._valuesCache.hasOwnProperty(l))return a._valuesCache[l];const u=n.getColumn(l);if(u!=null&&u.accessorFn)return a._valuesCache[l]=u.accessorFn(a.original,r),a._valuesCache[l]},getUniqueValues:l=>{if(a._uniqueValuesCache.hasOwnProperty(l))return a._uniqueValuesCache[l];const u=n.getColumn(l);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(a._uniqueValuesCache[l]=u.columnDef.getUniqueValues(a.original,r),a._uniqueValuesCache[l]):(a._uniqueValuesCache[l]=[a.getValue(l)],a._uniqueValuesCache[l])},renderValue:l=>{var u;return(u=a.getValue(l))!=null?u:n.options.renderFallbackValue},subRows:o??[],getLeafRows:()=>VK(a.subRows,l=>l.subRows),getParentRow:()=>a.parentId?n.getRow(a.parentId,!0):void 0,getParentRows:()=>{let l=[],u=a;for(;;){const c=u.getParentRow();if(!c)break;l.push(c),u=c}return l.reverse()},getAllCells:Tn(()=>[n.getAllLeafColumns()],l=>l.map(u=>WK(n,a,u,u.id)),Cn(n.options,"debugRows")),_getAllCellsByColumnId:Tn(()=>[a.getAllCells()],l=>l.reduce((u,c)=>(u[c.column.id]=c,u),{}),Cn(n.options,"debugRows"))};for(let l=0;l<n._features.length;l++){const u=n._features[l];u==null||u.createRow==null||u.createRow(a,n)}return a},XK={createColumn:(n,e)=>{n._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,n.id),n.getFacetedRowModel=()=>n._getFacetedRowModel?n._getFacetedRowModel():e.getPreFilteredRowModel(),n._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,n.id),n.getFacetedUniqueValues=()=>n._getFacetedUniqueValues?n._getFacetedUniqueValues():new Map,n._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,n.id),n.getFacetedMinMaxValues=()=>{if(n._getFacetedMinMaxValues)return n._getFacetedMinMaxValues()}}},DD=(n,e,t)=>{var r,i;const o=t==null||(r=t.toString())==null?void 0:r.toLowerCase();return Boolean((i=n.getValue(e))==null||(i=i.toString())==null||(i=i.toLowerCase())==null?void 0:i.includes(o))};DD.autoRemove=n=>zl(n);const OD=(n,e,t)=>{var r;return Boolean((r=n.getValue(e))==null||(r=r.toString())==null?void 0:r.includes(t))};OD.autoRemove=n=>zl(n);const BD=(n,e,t)=>{var r;return((r=n.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(t==null?void 0:t.toLowerCase())};BD.autoRemove=n=>zl(n);const UD=(n,e,t)=>{var r;return(r=n.getValue(e))==null?void 0:r.includes(t)};UD.autoRemove=n=>zl(n);const zD=(n,e,t)=>!t.some(r=>{var i;return!((i=n.getValue(e))!=null&&i.includes(r))});zD.autoRemove=n=>zl(n)||!(n!=null&&n.length);const HD=(n,e,t)=>t.some(r=>{var i;return(i=n.getValue(e))==null?void 0:i.includes(r)});HD.autoRemove=n=>zl(n)||!(n!=null&&n.length);const GD=(n,e,t)=>n.getValue(e)===t;GD.autoRemove=n=>zl(n);const VD=(n,e,t)=>n.getValue(e)==t;VD.autoRemove=n=>zl(n);const VA=(n,e,t)=>{let[r,i]=t;const o=n.getValue(e);return o>=r&&o<=i};VA.resolveFilterValue=n=>{let[e,t]=n,r=typeof e!="number"?parseFloat(e):e,i=typeof t!="number"?parseFloat(t):t,o=e===null||Number.isNaN(r)?-1/0:r,s=t===null||Number.isNaN(i)?1/0:i;if(o>s){const a=o;o=s,s=a}return[o,s]};VA.autoRemove=n=>zl(n)||zl(n[0])&&zl(n[1]);const mc={includesString:DD,includesStringSensitive:OD,equalsString:BD,arrIncludes:UD,arrIncludesAll:zD,arrIncludesSome:HD,equals:GD,weakEquals:VD,inNumberRange:VA};function zl(n){return n==null||n===""}const YK={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:n=>({columnFilters:[],...n}),getDefaultOptions:n=>({onColumnFiltersChange:Ea("columnFilters",n),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(n,e)=>{n.getAutoFilterFn=()=>{const t=e.getCoreRowModel().flatRows[0],r=t==null?void 0:t.getValue(n.id);return typeof r=="string"?mc.includesString:typeof r=="number"?mc.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?mc.equals:Array.isArray(r)?mc.arrIncludes:mc.weakEquals},n.getFilterFn=()=>{var t,r;return MS(n.columnDef.filterFn)?n.columnDef.filterFn:n.columnDef.filterFn==="auto"?n.getAutoFilterFn():(t=(r=e.options.filterFns)==null?void 0:r[n.columnDef.filterFn])!=null?t:mc[n.columnDef.filterFn]},n.getCanFilter=()=>{var t,r,i;return((t=n.columnDef.enableColumnFilter)!=null?t:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&!!n.accessorFn},n.getIsFiltered=()=>n.getFilterIndex()>-1,n.getFilterValue=()=>{var t;return(t=e.getState().columnFilters)==null||(t=t.find(r=>r.id===n.id))==null?void 0:t.value},n.getFilterIndex=()=>{var t,r;return(t=(r=e.getState().columnFilters)==null?void 0:r.findIndex(i=>i.id===n.id))!=null?t:-1},n.setFilterValue=t=>{e.setColumnFilters(r=>{const i=n.getFilterFn(),o=r==null?void 0:r.find(c=>c.id===n.id),s=qh(t,o?o.value:void 0);if(vR(i,s,n)){var a;return(a=r==null?void 0:r.filter(c=>c.id!==n.id))!=null?a:[]}const l={id:n.id,value:s};if(o){var u;return(u=r==null?void 0:r.map(c=>c.id===n.id?l:c))!=null?u:[]}return r!=null&&r.length?[...r,l]:[l]})}},createRow:(n,e)=>{n.columnFilters={},n.columnFiltersMeta={}},createTable:n=>{n.setColumnFilters=e=>{const t=n.getAllLeafColumns(),r=i=>{var o;return(o=qh(e,i))==null?void 0:o.filter(s=>{const a=t.find(l=>l.id===s.id);if(a){const l=a.getFilterFn();if(vR(l,s.value,a))return!1}return!0})};n.options.onColumnFiltersChange==null||n.options.onColumnFiltersChange(r)},n.resetColumnFilters=e=>{var t,r;n.setColumnFilters(e?[]:(t=(r=n.initialState)==null?void 0:r.columnFilters)!=null?t:[])},n.getPreFilteredRowModel=()=>n.getCoreRowModel(),n.getFilteredRowModel=()=>(!n._getFilteredRowModel&&n.options.getFilteredRowModel&&(n._getFilteredRowModel=n.options.getFilteredRowModel(n)),n.options.manualFiltering||!n._getFilteredRowModel?n.getPreFilteredRowModel():n._getFilteredRowModel())}};function vR(n,e,t){return(n&&n.autoRemove?n.autoRemove(e,t):!1)||typeof e>"u"||typeof e=="string"&&!e}const ZK=(n,e,t)=>t.reduce((r,i)=>{const o=i.getValue(n);return r+(typeof o=="number"?o:0)},0),KK=(n,e,t)=>{let r;return t.forEach(i=>{const o=i.getValue(n);o!=null&&(r>o||r===void 0&&o>=o)&&(r=o)}),r},JK=(n,e,t)=>{let r;return t.forEach(i=>{const o=i.getValue(n);o!=null&&(r<o||r===void 0&&o>=o)&&(r=o)}),r},QK=(n,e,t)=>{let r,i;return t.forEach(o=>{const s=o.getValue(n);s!=null&&(r===void 0?s>=s&&(r=i=s):(r>s&&(r=s),i<s&&(i=s)))}),[r,i]},eJ=(n,e)=>{let t=0,r=0;if(e.forEach(i=>{let o=i.getValue(n);o!=null&&(o=+o)>=o&&(++t,r+=o)}),t)return r/t},tJ=(n,e)=>{if(!e.length)return;const t=e.map(o=>o.getValue(n));if(!GK(t))return;if(t.length===1)return t[0];const r=Math.floor(t.length/2),i=t.sort((o,s)=>o-s);return t.length%2!==0?i[r]:(i[r-1]+i[r])/2},nJ=(n,e)=>Array.from(new Set(e.map(t=>t.getValue(n))).values()),rJ=(n,e)=>new Set(e.map(t=>t.getValue(n))).size,iJ=(n,e)=>e.length,kb={sum:ZK,min:KK,max:JK,extent:QK,mean:eJ,median:tJ,unique:nJ,uniqueCount:rJ,count:iJ},oJ={getDefaultColumnDef:()=>({aggregatedCell:n=>{var e,t;return(e=(t=n.getValue())==null||t.toString==null?void 0:t.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:n=>({grouping:[],...n}),getDefaultOptions:n=>({onGroupingChange:Ea("grouping",n),groupedColumnMode:"reorder"}),createColumn:(n,e)=>{n.toggleGrouping=()=>{e.setGrouping(t=>t!=null&&t.includes(n.id)?t.filter(r=>r!==n.id):[...t??[],n.id])},n.getCanGroup=()=>{var t,r;return((t=n.columnDef.enableGrouping)!=null?t:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!n.accessorFn||!!n.columnDef.getGroupingValue)},n.getIsGrouped=()=>{var t;return(t=e.getState().grouping)==null?void 0:t.includes(n.id)},n.getGroupedIndex=()=>{var t;return(t=e.getState().grouping)==null?void 0:t.indexOf(n.id)},n.getToggleGroupingHandler=()=>{const t=n.getCanGroup();return()=>{t&&n.toggleGrouping()}},n.getAutoAggregationFn=()=>{const t=e.getCoreRowModel().flatRows[0],r=t==null?void 0:t.getValue(n.id);if(typeof r=="number")return kb.sum;if(Object.prototype.toString.call(r)==="[object Date]")return kb.extent},n.getAggregationFn=()=>{var t,r;if(!n)throw new Error;return MS(n.columnDef.aggregationFn)?n.columnDef.aggregationFn:n.columnDef.aggregationFn==="auto"?n.getAutoAggregationFn():(t=(r=e.options.aggregationFns)==null?void 0:r[n.columnDef.aggregationFn])!=null?t:kb[n.columnDef.aggregationFn]}},createTable:n=>{n.setGrouping=e=>n.options.onGroupingChange==null?void 0:n.options.onGroupingChange(e),n.resetGrouping=e=>{var t,r;n.setGrouping(e?[]:(t=(r=n.initialState)==null?void 0:r.grouping)!=null?t:[])},n.getPreGroupedRowModel=()=>n.getFilteredRowModel(),n.getGroupedRowModel=()=>(!n._getGroupedRowModel&&n.options.getGroupedRowModel&&(n._getGroupedRowModel=n.options.getGroupedRowModel(n)),n.options.manualGrouping||!n._getGroupedRowModel?n.getPreGroupedRowModel():n._getGroupedRowModel())},createRow:(n,e)=>{n.getIsGrouped=()=>!!n.groupingColumnId,n.getGroupingValue=t=>{if(n._groupingValuesCache.hasOwnProperty(t))return n._groupingValuesCache[t];const r=e.getColumn(t);return r!=null&&r.columnDef.getGroupingValue?(n._groupingValuesCache[t]=r.columnDef.getGroupingValue(n.original),n._groupingValuesCache[t]):n.getValue(t)},n._groupingValuesCache={}},createCell:(n,e,t,r)=>{n.getIsGrouped=()=>e.getIsGrouped()&&e.id===t.groupingColumnId,n.getIsPlaceholder=()=>!n.getIsGrouped()&&e.getIsGrouped(),n.getIsAggregated=()=>{var i;return!n.getIsGrouped()&&!n.getIsPlaceholder()&&!!((i=t.subRows)!=null&&i.length)}}};function sJ(n,e,t){if(!(e!=null&&e.length)||!t)return n;const r=n.filter(o=>!e.includes(o.id));return t==="remove"?r:[...e.map(o=>n.find(s=>s.id===o)).filter(Boolean),...r]}const aJ={getInitialState:n=>({columnOrder:[],...n}),getDefaultOptions:n=>({onColumnOrderChange:Ea("columnOrder",n)}),createColumn:(n,e)=>{n.getIndex=Tn(t=>[sv(e,t)],t=>t.findIndex(r=>r.id===n.id),Cn(e.options,"debugColumns")),n.getIsFirstColumn=t=>{var r;return((r=sv(e,t)[0])==null?void 0:r.id)===n.id},n.getIsLastColumn=t=>{var r;const i=sv(e,t);return((r=i[i.length-1])==null?void 0:r.id)===n.id}},createTable:n=>{n.setColumnOrder=e=>n.options.onColumnOrderChange==null?void 0:n.options.onColumnOrderChange(e),n.resetColumnOrder=e=>{var t;n.setColumnOrder(e?[]:(t=n.initialState.columnOrder)!=null?t:[])},n._getOrderColumnsFn=Tn(()=>[n.getState().columnOrder,n.getState().grouping,n.options.groupedColumnMode],(e,t,r)=>i=>{let o=[];if(!(e!=null&&e.length))o=i;else{const s=[...e],a=[...i];for(;a.length&&s.length;){const l=s.shift(),u=a.findIndex(c=>c.id===l);u>-1&&o.push(a.splice(u,1)[0])}o=[...o,...a]}return sJ(o,t,r)},Cn(n.options,"debugTable"))}},Ib=()=>({left:[],right:[]}),lJ={getInitialState:n=>({columnPinning:Ib(),...n}),getDefaultOptions:n=>({onColumnPinningChange:Ea("columnPinning",n)}),createColumn:(n,e)=>{n.pin=t=>{const r=n.getLeafColumns().map(i=>i.id).filter(Boolean);e.setColumnPinning(i=>{var o,s;if(t==="right"){var a,l;return{left:((a=i==null?void 0:i.left)!=null?a:[]).filter(h=>!(r!=null&&r.includes(h))),right:[...((l=i==null?void 0:i.right)!=null?l:[]).filter(h=>!(r!=null&&r.includes(h))),...r]}}if(t==="left"){var u,c;return{left:[...((u=i==null?void 0:i.left)!=null?u:[]).filter(h=>!(r!=null&&r.includes(h))),...r],right:((c=i==null?void 0:i.right)!=null?c:[]).filter(h=>!(r!=null&&r.includes(h)))}}return{left:((o=i==null?void 0:i.left)!=null?o:[]).filter(h=>!(r!=null&&r.includes(h))),right:((s=i==null?void 0:i.right)!=null?s:[]).filter(h=>!(r!=null&&r.includes(h)))}})},n.getCanPin=()=>n.getLeafColumns().some(r=>{var i,o,s;return((i=r.columnDef.enablePinning)!=null?i:!0)&&((o=(s=e.options.enableColumnPinning)!=null?s:e.options.enablePinning)!=null?o:!0)}),n.getIsPinned=()=>{const t=n.getLeafColumns().map(a=>a.id),{left:r,right:i}=e.getState().columnPinning,o=t.some(a=>r==null?void 0:r.includes(a)),s=t.some(a=>i==null?void 0:i.includes(a));return o?"left":s?"right":!1},n.getPinnedIndex=()=>{var t,r;const i=n.getIsPinned();return i?(t=(r=e.getState().columnPinning)==null||(r=r[i])==null?void 0:r.indexOf(n.id))!=null?t:-1:0}},createRow:(n,e)=>{n.getCenterVisibleCells=Tn(()=>[n._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,r,i)=>{const o=[...r??[],...i??[]];return t.filter(s=>!o.includes(s.column.id))},Cn(e.options,"debugRows")),n.getLeftVisibleCells=Tn(()=>[n._getAllVisibleCells(),e.getState().columnPinning.left],(t,r)=>(r??[]).map(o=>t.find(s=>s.column.id===o)).filter(Boolean).map(o=>({...o,position:"left"})),Cn(e.options,"debugRows")),n.getRightVisibleCells=Tn(()=>[n._getAllVisibleCells(),e.getState().columnPinning.right],(t,r)=>(r??[]).map(o=>t.find(s=>s.column.id===o)).filter(Boolean).map(o=>({...o,position:"right"})),Cn(e.options,"debugRows"))},createTable:n=>{n.setColumnPinning=e=>n.options.onColumnPinningChange==null?void 0:n.options.onColumnPinningChange(e),n.resetColumnPinning=e=>{var t,r;return n.setColumnPinning(e?Ib():(t=(r=n.initialState)==null?void 0:r.columnPinning)!=null?t:Ib())},n.getIsSomeColumnsPinned=e=>{var t;const r=n.getState().columnPinning;if(!e){var i,o;return Boolean(((i=r.left)==null?void 0:i.length)||((o=r.right)==null?void 0:o.length))}return Boolean((t=r[e])==null?void 0:t.length)},n.getLeftLeafColumns=Tn(()=>[n.getAllLeafColumns(),n.getState().columnPinning.left],(e,t)=>(t??[]).map(r=>e.find(i=>i.id===r)).filter(Boolean),Cn(n.options,"debugColumns")),n.getRightLeafColumns=Tn(()=>[n.getAllLeafColumns(),n.getState().columnPinning.right],(e,t)=>(t??[]).map(r=>e.find(i=>i.id===r)).filter(Boolean),Cn(n.options,"debugColumns")),n.getCenterLeafColumns=Tn(()=>[n.getAllLeafColumns(),n.getState().columnPinning.left,n.getState().columnPinning.right],(e,t,r)=>{const i=[...t??[],...r??[]];return e.filter(o=>!i.includes(o.id))},Cn(n.options,"debugColumns"))}},T2={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},Nb=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),uJ={getDefaultColumnDef:()=>T2,getInitialState:n=>({columnSizing:{},columnSizingInfo:Nb(),...n}),getDefaultOptions:n=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:Ea("columnSizing",n),onColumnSizingInfoChange:Ea("columnSizingInfo",n)}),createColumn:(n,e)=>{n.getSize=()=>{var t,r,i;const o=e.getState().columnSizing[n.id];return Math.min(Math.max((t=n.columnDef.minSize)!=null?t:T2.minSize,(r=o??n.columnDef.size)!=null?r:T2.size),(i=n.columnDef.maxSize)!=null?i:T2.maxSize)},n.getStart=Tn(t=>[t,sv(e,t),e.getState().columnSizing],(t,r)=>r.slice(0,n.getIndex(t)).reduce((i,o)=>i+o.getSize(),0),Cn(e.options,"debugColumns")),n.getAfter=Tn(t=>[t,sv(e,t),e.getState().columnSizing],(t,r)=>r.slice(n.getIndex(t)+1).reduce((i,o)=>i+o.getSize(),0),Cn(e.options,"debugColumns")),n.resetSize=()=>{e.setColumnSizing(t=>{let{[n.id]:r,...i}=t;return i})},n.getCanResize=()=>{var t,r;return((t=n.columnDef.enableResizing)!=null?t:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},n.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===n.id},createHeader:(n,e)=>{n.getSize=()=>{let t=0;const r=i=>{if(i.subHeaders.length)i.subHeaders.forEach(r);else{var o;t+=(o=i.column.getSize())!=null?o:0}};return r(n),t},n.getStart=()=>{if(n.index>0){const t=n.headerGroup.headers[n.index-1];return t.getStart()+t.getSize()}return 0},n.getResizeHandler=t=>{const r=e.getColumn(n.column.id),i=r==null?void 0:r.getCanResize();return o=>{if(!r||!i||(o.persist==null||o.persist(),Fb(o)&&o.touches&&o.touches.length>1))return;const s=n.getSize(),a=n?n.getLeafHeaders().map(g=>[g.column.id,g.column.getSize()]):[[r.id,r.getSize()]],l=Fb(o)?Math.round(o.touches[0].clientX):o.clientX,u={},c=(g,x)=>{typeof x=="number"&&(e.setColumnSizingInfo(_=>{var E,C;const I=e.options.columnResizeDirection==="rtl"?-1:1,R=(x-((E=_==null?void 0:_.startOffset)!=null?E:0))*I,L=Math.max(R/((C=_==null?void 0:_.startSize)!=null?C:0),-.999999);return _.columnSizingStart.forEach(k=>{let[D,N]=k;u[D]=Math.round(Math.max(N+N*L,0)*100)/100}),{..._,deltaOffset:R,deltaPercentage:L}}),(e.options.columnResizeMode==="onChange"||g==="end")&&e.setColumnSizing(_=>({..._,...u})))},h=g=>c("move",g),f=g=>{c("end",g),e.setColumnSizingInfo(x=>({...x,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},d=t||typeof document<"u"?document:null,v={moveHandler:g=>h(g.clientX),upHandler:g=>{d==null||d.removeEventListener("mousemove",v.moveHandler),d==null||d.removeEventListener("mouseup",v.upHandler),f(g.clientX)}},y={moveHandler:g=>(g.cancelable&&(g.preventDefault(),g.stopPropagation()),h(g.touches[0].clientX),!1),upHandler:g=>{var x;d==null||d.removeEventListener("touchmove",y.moveHandler),d==null||d.removeEventListener("touchend",y.upHandler),g.cancelable&&(g.preventDefault(),g.stopPropagation()),f((x=g.touches[0])==null?void 0:x.clientX)}},w=cJ()?{passive:!1}:!1;Fb(o)?(d==null||d.addEventListener("touchmove",y.moveHandler,w),d==null||d.addEventListener("touchend",y.upHandler,w)):(d==null||d.addEventListener("mousemove",v.moveHandler,w),d==null||d.addEventListener("mouseup",v.upHandler,w)),e.setColumnSizingInfo(g=>({...g,startOffset:l,startSize:s,deltaOffset:0,deltaPercentage:0,columnSizingStart:a,isResizingColumn:r.id}))}}},createTable:n=>{n.setColumnSizing=e=>n.options.onColumnSizingChange==null?void 0:n.options.onColumnSizingChange(e),n.setColumnSizingInfo=e=>n.options.onColumnSizingInfoChange==null?void 0:n.options.onColumnSizingInfoChange(e),n.resetColumnSizing=e=>{var t;n.setColumnSizing(e?{}:(t=n.initialState.columnSizing)!=null?t:{})},n.resetHeaderSizeInfo=e=>{var t;n.setColumnSizingInfo(e?Nb():(t=n.initialState.columnSizingInfo)!=null?t:Nb())},n.getTotalSize=()=>{var e,t;return(e=(t=n.getHeaderGroups()[0])==null?void 0:t.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},n.getLeftTotalSize=()=>{var e,t;return(e=(t=n.getLeftHeaderGroups()[0])==null?void 0:t.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},n.getCenterTotalSize=()=>{var e,t;return(e=(t=n.getCenterHeaderGroups()[0])==null?void 0:t.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},n.getRightTotalSize=()=>{var e,t;return(e=(t=n.getRightHeaderGroups()[0])==null?void 0:t.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0}}};let C2=null;function cJ(){if(typeof C2=="boolean")return C2;let n=!1;try{const e={get passive(){return n=!0,!1}},t=()=>{};window.addEventListener("test",t,e),window.removeEventListener("test",t)}catch{n=!1}return C2=n,C2}function Fb(n){return n.type==="touchstart"}const hJ={getInitialState:n=>({columnVisibility:{},...n}),getDefaultOptions:n=>({onColumnVisibilityChange:Ea("columnVisibility",n)}),createColumn:(n,e)=>{n.toggleVisibility=t=>{n.getCanHide()&&e.setColumnVisibility(r=>({...r,[n.id]:t??!n.getIsVisible()}))},n.getIsVisible=()=>{var t,r;const i=n.columns;return(t=i.length?i.some(o=>o.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[n.id])!=null?t:!0},n.getCanHide=()=>{var t,r;return((t=n.columnDef.enableHiding)!=null?t:!0)&&((r=e.options.enableHiding)!=null?r:!0)},n.getToggleVisibilityHandler=()=>t=>{n.toggleVisibility==null||n.toggleVisibility(t.target.checked)}},createRow:(n,e)=>{n._getAllVisibleCells=Tn(()=>[n.getAllCells(),e.getState().columnVisibility],t=>t.filter(r=>r.column.getIsVisible()),Cn(e.options,"debugRows")),n.getVisibleCells=Tn(()=>[n.getLeftVisibleCells(),n.getCenterVisibleCells(),n.getRightVisibleCells()],(t,r,i)=>[...t,...r,...i],Cn(e.options,"debugRows"))},createTable:n=>{const e=(t,r)=>Tn(()=>[r(),r().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(o=>o.getIsVisible==null?void 0:o.getIsVisible()),Cn(n.options,"debugColumns"));n.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>n.getAllFlatColumns()),n.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>n.getAllLeafColumns()),n.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>n.getLeftLeafColumns()),n.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>n.getRightLeafColumns()),n.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>n.getCenterLeafColumns()),n.setColumnVisibility=t=>n.options.onColumnVisibilityChange==null?void 0:n.options.onColumnVisibilityChange(t),n.resetColumnVisibility=t=>{var r;n.setColumnVisibility(t?{}:(r=n.initialState.columnVisibility)!=null?r:{})},n.toggleAllColumnsVisible=t=>{var r;t=(r=t)!=null?r:!n.getIsAllColumnsVisible(),n.setColumnVisibility(n.getAllLeafColumns().reduce((i,o)=>({...i,[o.id]:t||!(o.getCanHide!=null&&o.getCanHide())}),{}))},n.getIsAllColumnsVisible=()=>!n.getAllLeafColumns().some(t=>!(t.getIsVisible!=null&&t.getIsVisible())),n.getIsSomeColumnsVisible=()=>n.getAllLeafColumns().some(t=>t.getIsVisible==null?void 0:t.getIsVisible()),n.getToggleAllColumnsVisibilityHandler=()=>t=>{var r;n.toggleAllColumnsVisible((r=t.target)==null?void 0:r.checked)}}};function sv(n,e){return e?e==="center"?n.getCenterVisibleLeafColumns():e==="left"?n.getLeftVisibleLeafColumns():n.getRightVisibleLeafColumns():n.getVisibleLeafColumns()}const fJ={createTable:n=>{n._getGlobalFacetedRowModel=n.options.getFacetedRowModel&&n.options.getFacetedRowModel(n,"__global__"),n.getGlobalFacetedRowModel=()=>n.options.manualFiltering||!n._getGlobalFacetedRowModel?n.getPreFilteredRowModel():n._getGlobalFacetedRowModel(),n._getGlobalFacetedUniqueValues=n.options.getFacetedUniqueValues&&n.options.getFacetedUniqueValues(n,"__global__"),n.getGlobalFacetedUniqueValues=()=>n._getGlobalFacetedUniqueValues?n._getGlobalFacetedUniqueValues():new Map,n._getGlobalFacetedMinMaxValues=n.options.getFacetedMinMaxValues&&n.options.getFacetedMinMaxValues(n,"__global__"),n.getGlobalFacetedMinMaxValues=()=>{if(n._getGlobalFacetedMinMaxValues)return n._getGlobalFacetedMinMaxValues()}}},dJ={getInitialState:n=>({globalFilter:void 0,...n}),getDefaultOptions:n=>({onGlobalFilterChange:Ea("globalFilter",n),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var t;const r=(t=n.getCoreRowModel().flatRows[0])==null||(t=t._getAllCellsByColumnId()[e.id])==null?void 0:t.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(n,e)=>{n.getCanGlobalFilter=()=>{var t,r,i,o;return((t=n.columnDef.enableGlobalFilter)!=null?t:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&((o=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(n))!=null?o:!0)&&!!n.accessorFn}},createTable:n=>{n.getGlobalAutoFilterFn=()=>mc.includesString,n.getGlobalFilterFn=()=>{var e,t;const{globalFilterFn:r}=n.options;return MS(r)?r:r==="auto"?n.getGlobalAutoFilterFn():(e=(t=n.options.filterFns)==null?void 0:t[r])!=null?e:mc[r]},n.setGlobalFilter=e=>{n.options.onGlobalFilterChange==null||n.options.onGlobalFilterChange(e)},n.resetGlobalFilter=e=>{n.setGlobalFilter(e?void 0:n.initialState.globalFilter)}}},pJ={getInitialState:n=>({expanded:{},...n}),getDefaultOptions:n=>({onExpandedChange:Ea("expanded",n),paginateExpandedRows:!0}),createTable:n=>{let e=!1,t=!1;n._autoResetExpanded=()=>{var r,i;if(!e){n._queue(()=>{e=!0});return}if((r=(i=n.options.autoResetAll)!=null?i:n.options.autoResetExpanded)!=null?r:!n.options.manualExpanding){if(t)return;t=!0,n._queue(()=>{n.resetExpanded(),t=!1})}},n.setExpanded=r=>n.options.onExpandedChange==null?void 0:n.options.onExpandedChange(r),n.toggleAllRowsExpanded=r=>{r??!n.getIsAllRowsExpanded()?n.setExpanded(!0):n.setExpanded({})},n.resetExpanded=r=>{var i,o;n.setExpanded(r?{}:(i=(o=n.initialState)==null?void 0:o.expanded)!=null?i:{})},n.getCanSomeRowsExpand=()=>n.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),n.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),n.toggleAllRowsExpanded()},n.getIsSomeRowsExpanded=()=>{const r=n.getState().expanded;return r===!0||Object.values(r).some(Boolean)},n.getIsAllRowsExpanded=()=>{const r=n.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||n.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},n.getExpandedDepth=()=>{let r=0;return(n.getState().expanded===!0?Object.keys(n.getRowModel().rowsById):Object.keys(n.getState().expanded)).forEach(o=>{const s=o.split(".");r=Math.max(r,s.length)}),r},n.getPreExpandedRowModel=()=>n.getSortedRowModel(),n.getExpandedRowModel=()=>(!n._getExpandedRowModel&&n.options.getExpandedRowModel&&(n._getExpandedRowModel=n.options.getExpandedRowModel(n)),n.options.manualExpanding||!n._getExpandedRowModel?n.getPreExpandedRowModel():n._getExpandedRowModel())},createRow:(n,e)=>{n.toggleExpanded=t=>{e.setExpanded(r=>{var i;const o=r===!0?!0:!!(r!=null&&r[n.id]);let s={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(a=>{s[a]=!0}):s=r,t=(i=t)!=null?i:!o,!o&&t)return{...s,[n.id]:!0};if(o&&!t){const{[n.id]:a,...l}=s;return l}return r})},n.getIsExpanded=()=>{var t;const r=e.getState().expanded;return!!((t=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(n))!=null?t:r===!0||r!=null&&r[n.id])},n.getCanExpand=()=>{var t,r,i;return(t=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(n))!=null?t:((r=e.options.enableExpanding)!=null?r:!0)&&!!((i=n.subRows)!=null&&i.length)},n.getIsAllParentsExpanded=()=>{let t=!0,r=n;for(;t&&r.parentId;)r=e.getRow(r.parentId,!0),t=r.getIsExpanded();return t},n.getToggleExpandedHandler=()=>{const t=n.getCanExpand();return()=>{t&&n.toggleExpanded()}}}},sE=0,aE=10,Db=()=>({pageIndex:sE,pageSize:aE}),mJ={getInitialState:n=>({...n,pagination:{...Db(),...n==null?void 0:n.pagination}}),getDefaultOptions:n=>({onPaginationChange:Ea("pagination",n)}),createTable:n=>{let e=!1,t=!1;n._autoResetPageIndex=()=>{var r,i;if(!e){n._queue(()=>{e=!0});return}if((r=(i=n.options.autoResetAll)!=null?i:n.options.autoResetPageIndex)!=null?r:!n.options.manualPagination){if(t)return;t=!0,n._queue(()=>{n.resetPageIndex(),t=!1})}},n.setPagination=r=>{const i=o=>qh(r,o);return n.options.onPaginationChange==null?void 0:n.options.onPaginationChange(i)},n.resetPagination=r=>{var i;n.setPagination(r?Db():(i=n.initialState.pagination)!=null?i:Db())},n.setPageIndex=r=>{n.setPagination(i=>{let o=qh(r,i.pageIndex);const s=typeof n.options.pageCount>"u"||n.options.pageCount===-1?Number.MAX_SAFE_INTEGER:n.options.pageCount-1;return o=Math.max(0,Math.min(o,s)),{...i,pageIndex:o}})},n.resetPageIndex=r=>{var i,o;n.setPageIndex(r?sE:(i=(o=n.initialState)==null||(o=o.pagination)==null?void 0:o.pageIndex)!=null?i:sE)},n.resetPageSize=r=>{var i,o;n.setPageSize(r?aE:(i=(o=n.initialState)==null||(o=o.pagination)==null?void 0:o.pageSize)!=null?i:aE)},n.setPageSize=r=>{n.setPagination(i=>{const o=Math.max(1,qh(r,i.pageSize)),s=i.pageSize*i.pageIndex,a=Math.floor(s/o);return{...i,pageIndex:a,pageSize:o}})},n.setPageCount=r=>n.setPagination(i=>{var o;let s=qh(r,(o=n.options.pageCount)!=null?o:-1);return typeof s=="number"&&(s=Math.max(-1,s)),{...i,pageCount:s}}),n.getPageOptions=Tn(()=>[n.getPageCount()],r=>{let i=[];return r&&r>0&&(i=[...new Array(r)].fill(null).map((o,s)=>s)),i},Cn(n.options,"debugTable")),n.getCanPreviousPage=()=>n.getState().pagination.pageIndex>0,n.getCanNextPage=()=>{const{pageIndex:r}=n.getState().pagination,i=n.getPageCount();return i===-1?!0:i===0?!1:r<i-1},n.previousPage=()=>n.setPageIndex(r=>r-1),n.nextPage=()=>n.setPageIndex(r=>r+1),n.firstPage=()=>n.setPageIndex(0),n.lastPage=()=>n.setPageIndex(n.getPageCount()-1),n.getPrePaginationRowModel=()=>n.getExpandedRowModel(),n.getPaginationRowModel=()=>(!n._getPaginationRowModel&&n.options.getPaginationRowModel&&(n._getPaginationRowModel=n.options.getPaginationRowModel(n)),n.options.manualPagination||!n._getPaginationRowModel?n.getPrePaginationRowModel():n._getPaginationRowModel()),n.getPageCount=()=>{var r;return(r=n.options.pageCount)!=null?r:Math.ceil(n.getRowCount()/n.getState().pagination.pageSize)},n.getRowCount=()=>{var r;return(r=n.options.rowCount)!=null?r:n.getPrePaginationRowModel().rows.length}}},Ob=()=>({top:[],bottom:[]}),gJ={getInitialState:n=>({rowPinning:Ob(),...n}),getDefaultOptions:n=>({onRowPinningChange:Ea("rowPinning",n)}),createRow:(n,e)=>{n.pin=(t,r,i)=>{const o=r?n.getLeafRows().map(l=>{let{id:u}=l;return u}):[],s=i?n.getParentRows().map(l=>{let{id:u}=l;return u}):[],a=new Set([...s,n.id,...o]);e.setRowPinning(l=>{var u,c;if(t==="bottom"){var h,f;return{top:((h=l==null?void 0:l.top)!=null?h:[]).filter(y=>!(a!=null&&a.has(y))),bottom:[...((f=l==null?void 0:l.bottom)!=null?f:[]).filter(y=>!(a!=null&&a.has(y))),...Array.from(a)]}}if(t==="top"){var d,v;return{top:[...((d=l==null?void 0:l.top)!=null?d:[]).filter(y=>!(a!=null&&a.has(y))),...Array.from(a)],bottom:((v=l==null?void 0:l.bottom)!=null?v:[]).filter(y=>!(a!=null&&a.has(y)))}}return{top:((u=l==null?void 0:l.top)!=null?u:[]).filter(y=>!(a!=null&&a.has(y))),bottom:((c=l==null?void 0:l.bottom)!=null?c:[]).filter(y=>!(a!=null&&a.has(y)))}})},n.getCanPin=()=>{var t;const{enableRowPinning:r,enablePinning:i}=e.options;return typeof r=="function"?r(n):(t=r??i)!=null?t:!0},n.getIsPinned=()=>{const t=[n.id],{top:r,bottom:i}=e.getState().rowPinning,o=t.some(a=>r==null?void 0:r.includes(a)),s=t.some(a=>i==null?void 0:i.includes(a));return o?"top":s?"bottom":!1},n.getPinnedIndex=()=>{var t,r;const i=n.getIsPinned();if(!i)return-1;const o=(t=i==="top"?e.getTopRows():e.getBottomRows())==null?void 0:t.map(s=>{let{id:a}=s;return a});return(r=o==null?void 0:o.indexOf(n.id))!=null?r:-1}},createTable:n=>{n.setRowPinning=e=>n.options.onRowPinningChange==null?void 0:n.options.onRowPinningChange(e),n.resetRowPinning=e=>{var t,r;return n.setRowPinning(e?Ob():(t=(r=n.initialState)==null?void 0:r.rowPinning)!=null?t:Ob())},n.getIsSomeRowsPinned=e=>{var t;const r=n.getState().rowPinning;if(!e){var i,o;return Boolean(((i=r.top)==null?void 0:i.length)||((o=r.bottom)==null?void 0:o.length))}return Boolean((t=r[e])==null?void 0:t.length)},n._getPinnedRows=(e,t,r)=>{var i;return((i=n.options.keepPinnedRows)==null||i?(t??[]).map(s=>{const a=n.getRow(s,!0);return a.getIsAllParentsExpanded()?a:null}):(t??[]).map(s=>e.find(a=>a.id===s))).filter(Boolean).map(s=>({...s,position:r}))},n.getTopRows=Tn(()=>[n.getRowModel().rows,n.getState().rowPinning.top],(e,t)=>n._getPinnedRows(e,t,"top"),Cn(n.options,"debugRows")),n.getBottomRows=Tn(()=>[n.getRowModel().rows,n.getState().rowPinning.bottom],(e,t)=>n._getPinnedRows(e,t,"bottom"),Cn(n.options,"debugRows")),n.getCenterRows=Tn(()=>[n.getRowModel().rows,n.getState().rowPinning.top,n.getState().rowPinning.bottom],(e,t,r)=>{const i=new Set([...t??[],...r??[]]);return e.filter(o=>!i.has(o.id))},Cn(n.options,"debugRows"))}},vJ={getInitialState:n=>({rowSelection:{},...n}),getDefaultOptions:n=>({onRowSelectionChange:Ea("rowSelection",n),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:n=>{n.setRowSelection=e=>n.options.onRowSelectionChange==null?void 0:n.options.onRowSelectionChange(e),n.resetRowSelection=e=>{var t;return n.setRowSelection(e?{}:(t=n.initialState.rowSelection)!=null?t:{})},n.toggleAllRowsSelected=e=>{n.setRowSelection(t=>{e=typeof e<"u"?e:!n.getIsAllRowsSelected();const r={...t},i=n.getPreGroupedRowModel().flatRows;return e?i.forEach(o=>{o.getCanSelect()&&(r[o.id]=!0)}):i.forEach(o=>{delete r[o.id]}),r})},n.toggleAllPageRowsSelected=e=>n.setRowSelection(t=>{const r=typeof e<"u"?e:!n.getIsAllPageRowsSelected(),i={...t};return n.getRowModel().rows.forEach(o=>{lE(i,o.id,r,!0,n)}),i}),n.getPreSelectedRowModel=()=>n.getCoreRowModel(),n.getSelectedRowModel=Tn(()=>[n.getState().rowSelection,n.getCoreRowModel()],(e,t)=>Object.keys(e).length?Bb(n,t):{rows:[],flatRows:[],rowsById:{}},Cn(n.options,"debugTable")),n.getFilteredSelectedRowModel=Tn(()=>[n.getState().rowSelection,n.getFilteredRowModel()],(e,t)=>Object.keys(e).length?Bb(n,t):{rows:[],flatRows:[],rowsById:{}},Cn(n.options,"debugTable")),n.getGroupedSelectedRowModel=Tn(()=>[n.getState().rowSelection,n.getSortedRowModel()],(e,t)=>Object.keys(e).length?Bb(n,t):{rows:[],flatRows:[],rowsById:{}},Cn(n.options,"debugTable")),n.getIsAllRowsSelected=()=>{const e=n.getFilteredRowModel().flatRows,{rowSelection:t}=n.getState();let r=Boolean(e.length&&Object.keys(t).length);return r&&e.some(i=>i.getCanSelect()&&!t[i.id])&&(r=!1),r},n.getIsAllPageRowsSelected=()=>{const e=n.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:t}=n.getState();let r=!!e.length;return r&&e.some(i=>!t[i.id])&&(r=!1),r},n.getIsSomeRowsSelected=()=>{var e;const t=Object.keys((e=n.getState().rowSelection)!=null?e:{}).length;return t>0&&t<n.getFilteredRowModel().flatRows.length},n.getIsSomePageRowsSelected=()=>{const e=n.getPaginationRowModel().flatRows;return n.getIsAllPageRowsSelected()?!1:e.filter(t=>t.getCanSelect()).some(t=>t.getIsSelected()||t.getIsSomeSelected())},n.getToggleAllRowsSelectedHandler=()=>e=>{n.toggleAllRowsSelected(e.target.checked)},n.getToggleAllPageRowsSelectedHandler=()=>e=>{n.toggleAllPageRowsSelected(e.target.checked)}},createRow:(n,e)=>{n.toggleSelected=(t,r)=>{const i=n.getIsSelected();e.setRowSelection(o=>{var s;if(t=typeof t<"u"?t:!i,n.getCanSelect()&&i===t)return o;const a={...o};return lE(a,n.id,t,(s=r==null?void 0:r.selectChildren)!=null?s:!0,e),a})},n.getIsSelected=()=>{const{rowSelection:t}=e.getState();return WA(n,t)},n.getIsSomeSelected=()=>{const{rowSelection:t}=e.getState();return uE(n,t)==="some"},n.getIsAllSubRowsSelected=()=>{const{rowSelection:t}=e.getState();return uE(n,t)==="all"},n.getCanSelect=()=>{var t;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(n):(t=e.options.enableRowSelection)!=null?t:!0},n.getCanSelectSubRows=()=>{var t;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(n):(t=e.options.enableSubRowSelection)!=null?t:!0},n.getCanMultiSelect=()=>{var t;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(n):(t=e.options.enableMultiRowSelection)!=null?t:!0},n.getToggleSelectedHandler=()=>{const t=n.getCanSelect();return r=>{var i;t&&n.toggleSelected((i=r.target)==null?void 0:i.checked)}}}},lE=(n,e,t,r,i)=>{var o;const s=i.getRow(e,!0);t?(s.getCanMultiSelect()||Object.keys(n).forEach(a=>delete n[a]),s.getCanSelect()&&(n[e]=!0)):delete n[e],r&&(o=s.subRows)!=null&&o.length&&s.getCanSelectSubRows()&&s.subRows.forEach(a=>lE(n,a.id,t,r,i))};function Bb(n,e){const t=n.getState().rowSelection,r=[],i={},o=function(s,a){return s.map(l=>{var u;const c=WA(l,t);if(c&&(r.push(l),i[l.id]=l),(u=l.subRows)!=null&&u.length&&(l={...l,subRows:o(l.subRows)}),c)return l}).filter(Boolean)};return{rows:o(e.rows),flatRows:r,rowsById:i}}function WA(n,e){var t;return(t=e[n.id])!=null?t:!1}function uE(n,e,t){var r;if(!((r=n.subRows)!=null&&r.length))return!1;let i=!0,o=!1;return n.subRows.forEach(s=>{if(!(o&&!i)&&(s.getCanSelect()&&(WA(s,e)?o=!0:i=!1),s.subRows&&s.subRows.length)){const a=uE(s,e);a==="all"?o=!0:(a==="some"&&(o=!0),i=!1)}}),i?"all":o?"some":!1}const cE=/([0-9]+)/gm,yJ=(n,e,t)=>WD(xf(n.getValue(t)).toLowerCase(),xf(e.getValue(t)).toLowerCase()),xJ=(n,e,t)=>WD(xf(n.getValue(t)),xf(e.getValue(t))),wJ=(n,e,t)=>jA(xf(n.getValue(t)).toLowerCase(),xf(e.getValue(t)).toLowerCase()),SJ=(n,e,t)=>jA(xf(n.getValue(t)),xf(e.getValue(t))),_J=(n,e,t)=>{const r=n.getValue(t),i=e.getValue(t);return r>i?1:r<i?-1:0},bJ=(n,e,t)=>jA(n.getValue(t),e.getValue(t));function jA(n,e){return n===e?0:n>e?1:-1}function xf(n){return typeof n=="number"?isNaN(n)||n===1/0||n===-1/0?"":String(n):typeof n=="string"?n:""}function WD(n,e){const t=n.split(cE).filter(Boolean),r=e.split(cE).filter(Boolean);for(;t.length&&r.length;){const i=t.shift(),o=r.shift(),s=parseInt(i,10),a=parseInt(o,10),l=[s,a].sort();if(isNaN(l[0])){if(i>o)return 1;if(o>i)return-1;continue}if(isNaN(l[1]))return isNaN(s)?-1:1;if(s>a)return 1;if(a>s)return-1}return t.length-r.length}const b0={alphanumeric:yJ,alphanumericCaseSensitive:xJ,text:wJ,textCaseSensitive:SJ,datetime:_J,basic:bJ},MJ={getInitialState:n=>({sorting:[],...n}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:n=>({onSortingChange:Ea("sorting",n),isMultiSortEvent:e=>e.shiftKey}),createColumn:(n,e)=>{n.getAutoSortingFn=()=>{const t=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const i of t){const o=i==null?void 0:i.getValue(n.id);if(Object.prototype.toString.call(o)==="[object Date]")return b0.datetime;if(typeof o=="string"&&(r=!0,o.split(cE).length>1))return b0.alphanumeric}return r?b0.text:b0.basic},n.getAutoSortDir=()=>{const t=e.getFilteredRowModel().flatRows[0];return typeof(t==null?void 0:t.getValue(n.id))=="string"?"asc":"desc"},n.getSortingFn=()=>{var t,r;if(!n)throw new Error;return MS(n.columnDef.sortingFn)?n.columnDef.sortingFn:n.columnDef.sortingFn==="auto"?n.getAutoSortingFn():(t=(r=e.options.sortingFns)==null?void 0:r[n.columnDef.sortingFn])!=null?t:b0[n.columnDef.sortingFn]},n.toggleSorting=(t,r)=>{const i=n.getNextSortingOrder(),o=typeof t<"u"&&t!==null;e.setSorting(s=>{const a=s==null?void 0:s.find(d=>d.id===n.id),l=s==null?void 0:s.findIndex(d=>d.id===n.id);let u=[],c,h=o?t:i==="desc";if(s!=null&&s.length&&n.getCanMultiSort()&&r?a?c="toggle":c="add":s!=null&&s.length&&l!==s.length-1?c="replace":a?c="toggle":c="replace",c==="toggle"&&(o||i||(c="remove")),c==="add"){var f;u=[...s,{id:n.id,desc:h}],u.splice(0,u.length-((f=e.options.maxMultiSortColCount)!=null?f:Number.MAX_SAFE_INTEGER))}else c==="toggle"?u=s.map(d=>d.id===n.id?{...d,desc:h}:d):c==="remove"?u=s.filter(d=>d.id!==n.id):u=[{id:n.id,desc:h}];return u})},n.getFirstSortDir=()=>{var t,r;return((t=(r=n.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?t:n.getAutoSortDir()==="desc")?"desc":"asc"},n.getNextSortingOrder=t=>{var r,i;const o=n.getFirstSortDir(),s=n.getIsSorted();return s?s!==o&&((r=e.options.enableSortingRemoval)==null||r)&&(!(t&&(i=e.options.enableMultiRemove)!=null)||i)?!1:s==="desc"?"asc":"desc":o},n.getCanSort=()=>{var t,r;return((t=n.columnDef.enableSorting)!=null?t:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!n.accessorFn},n.getCanMultiSort=()=>{var t,r;return(t=(r=n.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?t:!!n.accessorFn},n.getIsSorted=()=>{var t;const r=(t=e.getState().sorting)==null?void 0:t.find(i=>i.id===n.id);return r?r.desc?"desc":"asc":!1},n.getSortIndex=()=>{var t,r;return(t=(r=e.getState().sorting)==null?void 0:r.findIndex(i=>i.id===n.id))!=null?t:-1},n.clearSorting=()=>{e.setSorting(t=>t!=null&&t.length?t.filter(r=>r.id!==n.id):[])},n.getToggleSortingHandler=()=>{const t=n.getCanSort();return r=>{t&&(r.persist==null||r.persist(),n.toggleSorting==null||n.toggleSorting(void 0,n.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:n=>{n.setSorting=e=>n.options.onSortingChange==null?void 0:n.options.onSortingChange(e),n.resetSorting=e=>{var t,r;n.setSorting(e?[]:(t=(r=n.initialState)==null?void 0:r.sorting)!=null?t:[])},n.getPreSortedRowModel=()=>n.getGroupedRowModel(),n.getSortedRowModel=()=>(!n._getSortedRowModel&&n.options.getSortedRowModel&&(n._getSortedRowModel=n.options.getSortedRowModel(n)),n.options.manualSorting||!n._getSortedRowModel?n.getPreSortedRowModel():n._getSortedRowModel())}},EJ=[$K,hJ,aJ,lJ,XK,YK,fJ,dJ,MJ,oJ,pJ,mJ,gJ,vJ,uJ];function AJ(n){var e,t;const r=[...EJ,...(e=n._features)!=null?e:[]];let i={_features:r};const o=i._features.reduce((f,d)=>Object.assign(f,d.getDefaultOptions==null?void 0:d.getDefaultOptions(i)),{}),s=f=>i.options.mergeOptions?i.options.mergeOptions(o,f):{...o,...f};let l={...{},...(t=n.initialState)!=null?t:{}};i._features.forEach(f=>{var d;l=(d=f.getInitialState==null?void 0:f.getInitialState(l))!=null?d:l});const u=[];let c=!1;const h={_features:r,options:{...o,...n},initialState:l,_queue:f=>{u.push(f),c||(c=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();c=!1}).catch(d=>setTimeout(()=>{throw d})))},reset:()=>{i.setState(i.initialState)},setOptions:f=>{const d=qh(f,i.options);i.options=s(d)},getState:()=>i.options.state,setState:f=>{i.options.onStateChange==null||i.options.onStateChange(f)},_getRowId:(f,d,v)=>{var y;return(y=i.options.getRowId==null?void 0:i.options.getRowId(f,d,v))!=null?y:`${v?[v.id,d].join("."):d}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(f,d)=>{let v=(d?i.getPrePaginationRowModel():i.getRowModel()).rowsById[f];if(!v&&(v=i.getCoreRowModel().rowsById[f],!v))throw new Error;return v},_getDefaultColumnDef:Tn(()=>[i.options.defaultColumn],f=>{var d;return f=(d=f)!=null?d:{},{header:v=>{const y=v.header.column.columnDef;return y.accessorKey?y.accessorKey:y.accessorFn?y.id:null},cell:v=>{var y,w;return(y=(w=v.renderValue())==null||w.toString==null?void 0:w.toString())!=null?y:null},...i._features.reduce((v,y)=>Object.assign(v,y.getDefaultColumnDef==null?void 0:y.getDefaultColumnDef()),{}),...f}},Cn(n,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:Tn(()=>[i._getColumnDefs()],f=>{const d=function(v,y,w){return w===void 0&&(w=0),v.map(g=>{const x=jK(i,g,w,y),_=g;return x.columns=_.columns?d(_.columns,x,w+1):[],x})};return d(f)},Cn(n,"debugColumns")),getAllFlatColumns:Tn(()=>[i.getAllColumns()],f=>f.flatMap(d=>d.getFlatColumns()),Cn(n,"debugColumns")),_getAllFlatColumnsById:Tn(()=>[i.getAllFlatColumns()],f=>f.reduce((d,v)=>(d[v.id]=v,d),{}),Cn(n,"debugColumns")),getAllLeafColumns:Tn(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(f,d)=>{let v=f.flatMap(y=>y.getLeafColumns());return d(v)},Cn(n,"debugColumns")),getColumn:f=>i._getAllFlatColumnsById()[f]};Object.assign(i,h);for(let f=0;f<i._features.length;f++){const d=i._features[f];d==null||d.createTable==null||d.createTable(i)}return i}function TJ(){return n=>Tn(()=>[n.options.data],e=>{const t={rows:[],flatRows:[],rowsById:{}},r=function(i,o,s){o===void 0&&(o=0);const a=[];for(let u=0;u<i.length;u++){const c=qK(n,n._getRowId(i[u],u,s),i[u],u,o,void 0,s==null?void 0:s.id);if(t.flatRows.push(c),t.rowsById[c.id]=c,a.push(c),n.options.getSubRows){var l;c.originalSubRows=n.options.getSubRows(i[u],u),(l=c.originalSubRows)!=null&&l.length&&(c.subRows=r(c.originalSubRows,o+1,c))}}return a};return t.rows=r(e),t},Cn(n.options,"debugTable","getRowModel",()=>n._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function yR(n,e){return n?CJ(n)?pe.createElement(n,e):n:null}function CJ(n){return PJ(n)||typeof n=="function"||LJ(n)}function PJ(n){return typeof n=="function"&&(()=>{const e=Object.getPrototypeOf(n);return e.prototype&&e.prototype.isReactComponent})()}function LJ(n){return typeof n=="object"&&typeof n.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(n.$$typeof.description)}function RJ(n){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...n},[t]=pe.useState(()=>({current:AJ(e)})),[r,i]=pe.useState(()=>t.current.initialState);return t.current.setOptions(o=>({...o,...n,state:{...r,...n.state},onStateChange:s=>{i(s),n.onStateChange==null||n.onStateChange(s)}})),t.current}function jD(n,e,t,r,i){r=r||{};var o=1.15,s=i.internal.scaleFactor,a=i.internal.getFontSize()/s,l=i.getLineHeightFactor?i.getLineHeightFactor():o,u=a*l,c=/\r\n|\r|\n/g,h="",f=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(h=typeof n=="string"?n.split(c):n,f=h.length||1),t+=a*(2-o),r.valign==="middle"?t-=f/2*u:r.valign==="bottom"&&(t-=f*u),r.halign==="center"||r.halign==="right"){var d=a;if(r.halign==="center"&&(d*=.5),h&&f>=1){for(var v=0;v<h.length;v++)i.text(h[v],e-i.getStringUnitWidth(h[v])*d,t),t+=u;return i}e-=i.getStringUnitWidth(n)*d}return r.halign==="justify"?i.text(n,e,t,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(n,e,t),i}var xR={},$m=function(){function n(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return n.setDefaults=function(e,t){t===void 0&&(t=null),t?t.__autoTableDocumentDefaults=e:xR=e},n.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},n.prototype.applyStyles=function(e,t){var r,i,o;t===void 0&&(t=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var s=this.jsPDFDocument.internal.getFont(),a=s.fontStyle,l=s.fontName;if(e.font&&(l=e.font),e.fontStyle){a=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(a)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),a=u[0])}if(this.jsPDFDocument.setFont(l,a),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!t){var c=n.unifyColor(e.fillColor);c&&(r=this.jsPDFDocument).setFillColor.apply(r,c),c=n.unifyColor(e.textColor),c&&(i=this.jsPDFDocument).setTextColor.apply(i,c),c=n.unifyColor(e.lineColor),c&&(o=this.jsPDFDocument).setDrawColor.apply(o,c),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},n.prototype.splitTextToSize=function(e,t,r){return this.jsPDFDocument.splitTextToSize(e,t,r)},n.prototype.rect=function(e,t,r,i,o){return this.jsPDFDocument.rect(e,t,r,i,o)},n.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},n.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},n.prototype.getDocument=function(){return this.jsPDFDocument},n.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},n.prototype.addPage=function(){return this.jsPDFDocument.addPage()},n.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},n.prototype.getGlobalOptions=function(){return xR||{}},n.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},n.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},n.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},n.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},n.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},n.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},n}(),hE=function(n,e){return hE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},hE(n,e)};function $D(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");hE(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}var qD=function(n){$D(e,n);function e(t){var r=n.call(this)||this;return r._element=t,r}return e}(Array);function kJ(n){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/n,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function IJ(n){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[n]}function tw(n,e,t){t.applyStyles(e,!0);var r=Array.isArray(n)?n:[n],i=r.map(function(o){return t.getTextWidth(o)}).reduce(function(o,s){return Math.max(o,s)},0);return i}function XD(n,e,t,r){var i=e.settings.tableLineWidth,o=e.settings.tableLineColor;n.applyStyles({lineWidth:i,lineColor:o});var s=YD(i,!1);s&&n.rect(t.x,t.y,e.getWidth(n.pageSize().width),r.y-t.y,s)}function YD(n,e){var t=n>0,r=e||e===0;return t&&r?"DF":t?"S":r?"F":null}function ES(n,e){var t,r,i,o;if(n=n||e,Array.isArray(n)){if(n.length>=4)return{top:n[0],right:n[1],bottom:n[2],left:n[3]};if(n.length===3)return{top:n[0],right:n[1],bottom:n[2],left:n[1]};if(n.length===2)return{top:n[0],right:n[1],bottom:n[0],left:n[1]};n.length===1?n=n[0]:n=e}return typeof n=="object"?(typeof n.vertical=="number"&&(n.top=n.vertical,n.bottom=n.vertical),typeof n.horizontal=="number"&&(n.right=n.horizontal,n.left=n.horizontal),{left:(t=n.left)!==null&&t!==void 0?t:e,top:(r=n.top)!==null&&r!==void 0?r:e,right:(i=n.right)!==null&&i!==void 0?i:e,bottom:(o=n.bottom)!==null&&o!==void 0?o:e}):(typeof n!="number"&&(n=e),{top:n,right:n,bottom:n,left:n})}function ZD(n,e){var t=ES(e.settings.margin,0);return n.pageSize().width-(t.left+t.right)}function NJ(n,e,t,r,i){var o={},s=1.3333333333333333,a=Ub(e,function(_){return i.getComputedStyle(_).backgroundColor});a!=null&&(o.fillColor=a);var l=Ub(e,function(_){return i.getComputedStyle(_).color});l!=null&&(o.textColor=l);var u=DJ(r,t);u&&(o.cellPadding=u);var c="borderTopColor",h=s*t,f=r.borderTopWidth;if(r.borderBottomWidth===f&&r.borderRightWidth===f&&r.borderLeftWidth===f){var d=(parseFloat(f)||0)/h;d&&(o.lineWidth=d)}else o.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/h,right:(parseFloat(r.borderRightWidth)||0)/h,bottom:(parseFloat(r.borderBottomWidth)||0)/h,left:(parseFloat(r.borderLeftWidth)||0)/h},o.lineWidth.top||(o.lineWidth.right?c="borderRightColor":o.lineWidth.bottom?c="borderBottomColor":o.lineWidth.left&&(c="borderLeftColor"));var v=Ub(e,function(_){return i.getComputedStyle(_)[c]});v!=null&&(o.lineColor=v);var y=["left","right","center","justify"];y.indexOf(r.textAlign)!==-1&&(o.halign=r.textAlign),y=["middle","bottom","top"],y.indexOf(r.verticalAlign)!==-1&&(o.valign=r.verticalAlign);var w=parseInt(r.fontSize||"");isNaN(w)||(o.fontSize=w/s);var g=FJ(r);g&&(o.fontStyle=g);var x=(r.fontFamily||"").toLowerCase();return n.indexOf(x)!==-1&&(o.font=x),o}function FJ(n){var e="";return(n.fontWeight==="bold"||n.fontWeight==="bolder"||parseInt(n.fontWeight)>=700)&&(e="bold"),(n.fontStyle==="italic"||n.fontStyle==="oblique")&&(e+="italic"),e}function Ub(n,e){var t=KD(n,e);if(!t)return null;var r=t.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],o=parseInt(r[4]);return o===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function KD(n,e){var t=e(n);return t==="rgba(0, 0, 0, 0)"||t==="transparent"||t==="initial"||t==="inherit"?n.parentElement==null?null:KD(n.parentElement,e):t}function DJ(n,e){var t=[n.paddingTop,n.paddingRight,n.paddingBottom,n.paddingLeft],r=96/(72/e),i=(parseInt(n.lineHeight)-parseInt(n.fontSize))/e/2,o=t.map(function(a){return parseInt(a||"0")/r}),s=ES(o,0);return i>s.top&&(s.top=i),i>s.bottom&&(s.bottom=i),s}function JD(n,e,t,r,i){var o,s;r===void 0&&(r=!1),i===void 0&&(i=!1);var a;typeof e=="string"?a=t.document.querySelector(e):a=e;var l=Object.keys(n.getFontList()),u=n.scaleFactor(),c=[],h=[],f=[];if(!a)return console.error("Html table could not be found with input: ",e),{head:c,body:h,foot:f};for(var d=0;d<a.rows.length;d++){var v=a.rows[d],y=(s=(o=v==null?void 0:v.parentElement)===null||o===void 0?void 0:o.tagName)===null||s===void 0?void 0:s.toLowerCase(),w=OJ(l,u,t,v,r,i);w&&(y==="thead"?c.push(w):y==="tfoot"?f.push(w):h.push(w))}return{head:c,body:h,foot:f}}function OJ(n,e,t,r,i,o){for(var s=new qD(r),a=0;a<r.cells.length;a++){var l=r.cells[a],u=t.getComputedStyle(l);if(i||u.display!=="none"){var c=void 0;o&&(c=NJ(n,l,e,u,t)),s.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:c,_element:l,content:BJ(l)})}}var h=t.getComputedStyle(r);if(s.length>0&&(i||h.display!=="none"))return s}function BJ(n){var e=n.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(t){return t.trim()}).join(`
`),e.innerText||e.textContent||""}function UJ(n,e,t){for(var r=0,i=[n,e,t];r<i.length;r++){var o=i[r];o&&typeof o!="object"&&console.error("The options parameter should be of type object, is: "+typeof o),o.startY&&typeof o.startY!="number"&&(console.error("Invalid value for startY option",o.startY),delete o.startY)}}function Ac(n,e,t,r,i){if(n==null)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(n),s=1;s<arguments.length;s++){var a=arguments[s];if(a!=null)for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(o[l]=a[l])}return o}function QD(n,e){var t=new $m(n),r=t.getDocumentOptions(),i=t.getGlobalOptions();UJ(i,r,e);var o=Ac({},i,r,e),s;typeof window<"u"&&(s=window);var a=zJ(i,r,e),l=HJ(i,r,e),u=GJ(t,o),c=WJ(t,o,s);return{id:e.tableId,content:c,hooks:l,styles:a,settings:u}}function zJ(n,e,t){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var u=n[l],c=e[l],h=t[l];r.columnStyles=Ac({},u,c,h)}else{var f=[n,e,t],d=f.map(function(v){return v[l]||{}});r[l]=Ac({},d[0],d[1],d[2])}},o=0,s=Object.keys(r);o<s.length;o++){var a=s[o];i(a)}return r}function HJ(n,e,t){for(var r=[n,e,t],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},o=0,s=r;o<s.length;o++){var a=s[o];a.didParseCell&&i.didParseCell.push(a.didParseCell),a.willDrawCell&&i.willDrawCell.push(a.willDrawCell),a.didDrawCell&&i.didDrawCell.push(a.didDrawCell),a.willDrawPage&&i.willDrawPage.push(a.willDrawPage),a.didDrawPage&&i.didDrawPage.push(a.didDrawPage)}return i}function GJ(n,e){var t,r,i,o,s,a,l,u,c,h,f,d,v=ES(e.margin,40/n.scaleFactor()),y=(t=VJ(n,e.startY))!==null&&t!==void 0?t:v.top,w;e.showFoot===!0?w="everyPage":e.showFoot===!1?w="never":w=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var g;e.showHead===!0?g="everyPage":e.showHead===!1?g="never":g=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var x=(o=e.useCss)!==null&&o!==void 0?o:!1,_=e.theme||(x?"plain":"striped"),E=!!e.horizontalPageBreak,C=(s=e.horizontalPageBreakRepeat)!==null&&s!==void 0?s:null;return{includeHiddenHtml:(a=e.includeHiddenHtml)!==null&&a!==void 0?a:!1,useCss:x,theme:_,startY:y,margin:v,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(c=e.tableWidth)!==null&&c!==void 0?c:"auto",showHead:g,showFoot:w,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(f=e.tableLineColor)!==null&&f!==void 0?f:200,horizontalPageBreak:E,horizontalPageBreakRepeat:C,horizontalPageBreakBehaviour:(d=e.horizontalPageBreakBehaviour)!==null&&d!==void 0?d:"afterAllRows"}}function VJ(n,e){var t=n.getLastAutoTable(),r=n.scaleFactor(),i=n.pageNumber(),o=!1;if(t&&t.startPageNumber){var s=t.startPageNumber+t.pageNumber-1;o=s===i}return typeof e=="number"?e:(e==null||e===!1)&&o&&(t==null?void 0:t.finalY)!=null?t.finalY+20/r:null}function WJ(n,e,t){var r=e.head||[],i=e.body||[],o=e.foot||[];if(e.html){var s=e.includeHiddenHtml;if(t){var a=JD(n,e.html,t,s,e.useCss)||{};r=a.head||r,i=a.body||r,o=a.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||jJ(r,i,o);return{columns:l,head:r,body:i,foot:o}}function jJ(n,e,t){var r=n[0]||e[0]||t[0]||[],i=[];return Object.keys(r).filter(function(o){return o!=="_element"}).forEach(function(o){var s=1,a;Array.isArray(r)?a=r[parseInt(o)]:a=r[o],typeof a=="object"&&!Array.isArray(a)&&(s=(a==null?void 0:a.colSpan)||1);for(var l=0;l<s;l++){var u=void 0;Array.isArray(r)?u=i.length:u=o+(l>0?"_".concat(l):"");var c={dataKey:u};i.push(c)}}),i}var fE=function(){function n(e,t,r){this.table=t,this.pageNumber=t.pageNumber,this.settings=t.settings,this.cursor=r,this.doc=e.getDocument()}return n}(),$J=function(n){$D(e,n);function e(t,r,i,o,s,a){var l=n.call(this,t,r,a)||this;return l.cell=i,l.row=o,l.column=s,l.section=o.section,l}return e}(fE),qJ=function(){function n(e,t){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=t.columns,this.head=t.head,this.body=t.body,this.foot=t.foot}return n.prototype.getHeadHeight=function(e){return this.head.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.getFootHeight=function(e){return this.foot.reduce(function(t,r){return t+r.getMaxCellHeight(e)},0)},n.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},n.prototype.callCellHooks=function(e,t,r,i,o,s){for(var a=0,l=t;a<l.length;a++){var u=l[a],c=new $J(e,this,r,i,o,s),h=u(c)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],h)return!1}return!0},n.prototype.callEndPageHooks=function(e,t){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var o=i[r];o(new fE(e,this,t))}},n.prototype.callWillDrawPageHooks=function(e,t){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var o=i[r];o(new fE(e,this,t))}},n.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var t=this.columns.reduce(function(i,o){return i+o.wrappedWidth},0);return t}else{var r=this.settings.margin;return e-r.left-r.right}},n}(),eO=function(){function n(e,t,r,i,o){o===void 0&&(o=!1),this.height=0,this.raw=e,e instanceof qD&&(this.raw=e._element,this.element=e._element),this.index=t,this.section=r,this.cells=i,this.spansMultiplePages=o}return n.prototype.getMaxCellHeight=function(e){var t=this;return e.reduce(function(r,i){var o;return Math.max(r,((o=t.cells[i.index])===null||o===void 0?void 0:o.height)||0)},0)},n.prototype.hasRowSpan=function(e){var t=this;return e.filter(function(r){var i=t.cells[r.index];return i?i.rowSpan>1:!1}).length>0},n.prototype.canEntireRowFit=function(e,t){return this.getMaxCellHeight(t)<=e},n.prototype.getMinimumRowHeight=function(e,t){var r=this;return e.reduce(function(i,o){var s=r.cells[o.index];if(!s)return 0;var a=t.getLineHeight(s.styles.fontSize),l=s.padding("vertical"),u=l+a;return u>i?u:i},0)},n}(),tO=function(){function n(e,t,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=t,this.section=r,this.raw=e;var o=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,o=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var s=o!=null?""+o:"",a=/\r\n|\r|\n/g;this.text=s.split(a)}return n.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var t=this.height-this.padding("vertical");e=this.y+t/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},n.prototype.getContentHeight=function(e,t){t===void 0&&(t=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*t,o=r*i+this.padding("vertical");return Math.max(o,this.styles.minCellHeight)},n.prototype.padding=function(e){var t=ES(this.styles.cellPadding,0);return e==="vertical"?t.top+t.bottom:e==="horizontal"?t.left+t.right:t[e]},n}(),XJ=function(){function n(e,t,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=t,this.index=r}return n.prototype.getMaxCustomCellWidth=function(e){for(var t=0,r=0,i=e.allRows();r<i.length;r++){var o=i[r],s=o.cells[this.index];s&&typeof s.styles.cellWidth=="number"&&(t=Math.max(t,s.styles.cellWidth))}return t},n}();function YJ(n,e){ZJ(n,e);var t=[],r=0;e.columns.forEach(function(o){var s=o.getMaxCustomCellWidth(e);s?o.width=s:(o.width=o.wrappedWidth,t.push(o)),r+=o.width});var i=e.getWidth(n.pageSize().width)-r;i&&(i=dE(t,i,function(o){return Math.max(o.minReadableWidth,o.minWidth)})),i&&(i=dE(t,i,function(o){return o.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/n.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),JJ(e),QJ(e,n),KJ(e)}function ZJ(n,e){var t=n.scaleFactor(),r=e.settings.horizontalPageBreak,i=ZD(n,e);e.allRows().forEach(function(o){for(var s=0,a=e.columns;s<a.length;s++){var l=a[s],u=o.cells[l.index];if(u){var c=e.hooks.didParseCell;e.callCellHooks(n,c,u,o,l,null);var h=u.padding("horizontal");u.contentWidth=tw(u.text,u.styles,n)+h;var f=tw(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,n);if(u.minReadableWidth=f+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||r===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var d=10/t;u.minWidth=u.styles.minCellWidth||d,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(o){for(var s=0,a=e.columns;s<a.length;s++){var l=a[s],u=o.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var c=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},h=c.cellWidth||c.minCellWidth;h&&typeof h=="number"&&(l.minWidth=h,l.wrappedWidth=h)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function dE(n,e,t){for(var r=e,i=n.reduce(function(d,v){return d+v.wrappedWidth},0),o=0;o<n.length;o++){var s=n[o],a=s.wrappedWidth/i,l=r*a,u=s.width+l,c=t(s),h=u<c?c:u;e-=h-s.width,s.width=h}if(e=Math.round(e*1e10)/1e10,e){var f=n.filter(function(d){return e<0?d.width>t(d):!0});f.length&&(e=dE(f,e,t))}return e}function KJ(n){for(var e={},t=1,r=n.allRows(),i=0;i<r.length;i++)for(var o=r[i],s=0,a=n.columns;s<a.length;s++){var l=a[s],u=e[l.index];if(t>1)t--,delete o.cells[l.index];else if(u)u.cell.height+=o.height,t=u.cell.colSpan,delete o.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var c=o.cells[l.index];if(!c)continue;if(c.height=o.height,c.rowSpan>1){var h=r.length-i,f=c.rowSpan>h?h:c.rowSpan;e[l.index]={cell:c,left:f,row:o}}}}}function JJ(n){for(var e=n.allRows(),t=0;t<e.length;t++)for(var r=e[t],i=null,o=0,s=0,a=0;a<n.columns.length;a++){var l=n.columns[a];if(s-=1,s>1&&n.columns[a+1])o+=l.width,delete r.cells[l.index];else if(i){var u=i;delete r.cells[l.index],i=null,u.width=l.width+o}else{var u=r.cells[l.index];if(!u)continue;if(s=u.colSpan,o=0,u.colSpan>1){i=u,o+=l.width;continue}u.width=l.width+o}}}function QJ(n,e){for(var t={count:0,height:0},r=0,i=n.allRows();r<i.length;r++){for(var o=i[r],s=0,a=n.columns;s<a.length;s++){var l=a[s],u=o.cells[l.index];if(u){e.applyStyles(u.styles,!0);var c=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,c+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=wR(u.text,c,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=wR(u.text,c,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var h=u.styles.overflow(u.text,c);typeof h=="string"?u.text=[h]:u.text=h}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var f=u.contentHeight/u.rowSpan;u.rowSpan>1&&t.count*t.height<f*u.rowSpan?t={height:f,count:u.rowSpan}:t&&t.count>0&&t.height>f&&(f=t.height),f>o.height&&(o.height=f)}}t.count--}}function wR(n,e,t,r,i){return n.map(function(o){return eQ(o,e,t,r,i)})}function eQ(n,e,t,r,i){var o=1e4*r.scaleFactor();if(e=Math.ceil(e*o)/o,e>=tw(n,t,r))return n;for(;e<tw(n+i,t,r)&&!(n.length<=1);)n=n.substring(0,n.length-1);return n.trim()+i}function nO(n,e){var t=new $m(n),r=tQ(e,t.scaleFactor()),i=new qJ(e,r);return YJ(t,i),t.applyStyles(t.userStyles),i}function tQ(n,e){var t=n.content,r=rQ(t.columns);if(t.head.length===0){var i=SR(r,"head");i&&t.head.push(i)}if(t.foot.length===0){var i=SR(r,"foot");i&&t.foot.push(i)}var o=n.settings.theme,s=n.styles;return{columns:r,head:zb("head",t.head,r,s,o,e),body:zb("body",t.body,r,s,o,e),foot:zb("foot",t.foot,r,s,o,e)}}function zb(n,e,t,r,i,o){var s={},a=e.map(function(l,u){for(var c=0,h={},f=0,d=0,v=0,y=t;v<y.length;v++){var w=y[v];if(s[w.index]==null||s[w.index].left===0)if(d===0){var g=void 0;Array.isArray(l)?g=l[w.index-f-c]:g=l[w.dataKey];var x={};typeof g=="object"&&!Array.isArray(g)&&(x=(g==null?void 0:g.styles)||{});var _=iQ(n,w,u,i,r,o,x),E=new tO(g,_,n);h[w.dataKey]=E,h[w.index]=E,d=E.colSpan-1,s[w.index]={left:E.rowSpan-1,times:d}}else d--,f++;else s[w.index].left--,d=s[w.index].times,c++}return new eO(l,u,n,h)});return a}function SR(n,e){var t={};return n.forEach(function(r){if(r.raw!=null){var i=nQ(e,r.raw);i!=null&&(t[r.dataKey]=i)}}),Object.keys(t).length>0?t:null}function nQ(n,e){if(n==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(n==="foot"&&typeof e=="object")return e.footer;return null}function rQ(n){return n.map(function(e,t){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:t:i=t,new XJ(i,e,t)})}function iQ(n,e,t,r,i,o,s){var a=IJ(r),l;n==="head"?l=i.headStyles:n==="body"?l=i.bodyStyles:n==="foot"&&(l=i.footStyles);var u=Ac({},a.table,a[n],i.styles,l),c=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},h=n==="body"?c:{},f=n==="body"&&t%2===0?Ac({},a.alternateRow,i.alternateRowStyles):{},d=kJ(o),v=Ac({},d,u,f,h);return Ac(v,s)}function oQ(n,e,t){var r;t===void 0&&(t={});var i=ZD(n,e),o=new Map,s=[],a=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(f){var d=e.columns.find(function(v){return v.dataKey===f||v.index===f});d&&!o.has(d.index)&&(o.set(d.index,!0),s.push(d.index),a.push(e.columns[d.index]),i-=d.wrappedWidth)});for(var u=!0,c=(r=t==null?void 0:t.start)!==null&&r!==void 0?r:0;c<e.columns.length;){if(o.has(c)){c++;continue}var h=e.columns[c].wrappedWidth;if(u||i>=h)u=!1,s.push(c),a.push(e.columns[c]),i-=h;else break;c++}return{colIndexes:s,columns:a,lastIndex:c-1}}function sQ(n,e){for(var t=[],r=0;r<e.columns.length;r++){var i=oQ(n,e,{start:r});i.columns.length&&(t.push(i),r=i.lastIndex)}return t}function rO(n,e){var t=e.settings,r=t.startY,i=t.margin,o={x:i.left,y:r},s=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),a=r+i.bottom+s;if(t.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(f,d){return f+d.height},0);a+=u}var c=new $m(n);(t.pageBreak==="always"||t.startY!=null&&a>c.pageSize().height)&&(oO(c),o.y=i.top),e.callWillDrawPageHooks(c,o);var h=Ac({},o);e.startPageNumber=c.pageNumber(),t.horizontalPageBreak?aQ(c,e,h,o):(c.applyStyles(c.userStyles),(t.showHead==="firstPage"||t.showHead==="everyPage")&&e.head.forEach(function(f){return Hc(c,e,f,o,e.columns)}),c.applyStyles(c.userStyles),e.body.forEach(function(f,d){var v=d===e.body.length-1;nw(c,e,f,v,h,o,e.columns)}),c.applyStyles(c.userStyles),(t.showFoot==="lastPage"||t.showFoot==="everyPage")&&e.foot.forEach(function(f){return Hc(c,e,f,o,e.columns)})),XD(c,e,h,o),e.callEndPageHooks(c,o),e.finalY=o.y,n.lastAutoTable=e,c.applyStyles(c.userStyles)}function aQ(n,e,t,r){var i=sQ(n,e),o=e.settings;if(o.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,c){n.applyStyles(n.userStyles),c>0?av(n,e,t,r,u.columns,!0):_R(n,e,r,u.columns),lQ(n,e,t,r,u.columns),Hb(n,e,r,u.columns)});else for(var s=-1,a=i[0],l=function(){var u=s;if(a){n.applyStyles(n.userStyles);var c=a.columns;s>=0?av(n,e,t,r,c,!0):_R(n,e,r,c),u=bR(n,e,s+1,r,c),Hb(n,e,r,c)}var h=u-s;i.slice(1).forEach(function(f){n.applyStyles(n.userStyles),av(n,e,t,r,f.columns,!0),bR(n,e,s+1,r,f.columns,h),Hb(n,e,r,f.columns)}),s=u};s<e.body.length-1;)l()}function _R(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(o){return Hc(n,e,o,t,r)})}function lQ(n,e,t,r,i){n.applyStyles(n.userStyles),e.body.forEach(function(o,s){var a=s===e.body.length-1;nw(n,e,o,a,t,r,i)})}function bR(n,e,t,r,i,o){n.applyStyles(n.userStyles),o=o??e.body.length;var s=Math.min(t+o,e.body.length),a=-1;return e.body.slice(t,s).forEach(function(l,u){var c=t+u===e.body.length-1,h=iO(n,e,c,r);l.canEntireRowFit(h,i)&&(Hc(n,e,l,r,i),a=t+u)}),a}function Hb(n,e,t,r){var i=e.settings;n.applyStyles(n.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(o){return Hc(n,e,o,t,r)})}function uQ(n,e,t){var r=t.getLineHeight(n.styles.fontSize),i=n.padding("vertical"),o=Math.floor((e-i)/r);return Math.max(0,o)}function cQ(n,e,t,r){var i={};n.spansMultiplePages=!0,n.height=0;for(var o=0,s=0,a=t.columns;s<a.length;s++){var l=a[s],u=n.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var c=new tO(u.raw,u.styles,u.section);c=Ac(c,u),c.text=[];var h=uQ(u,e,r);u.text.length>h&&(c.text=u.text.splice(h,u.text.length));var f=r.scaleFactor(),d=r.getLineHeightFactor();u.contentHeight=u.getContentHeight(f,d),u.contentHeight>=e&&(u.contentHeight=e,c.styles.minCellHeight-=e),u.contentHeight>n.height&&(n.height=u.contentHeight),c.contentHeight=c.getContentHeight(f,d),c.contentHeight>o&&(o=c.contentHeight),i[l.index]=c}}var v=new eO(n.raw,-1,n.section,i,!0);v.height=o;for(var y=0,w=t.columns;y<w.length;y++){var l=w[y],c=v.cells[l.index];c&&(c.height=v.height);var u=n.cells[l.index];u&&(u.height=n.height)}return v}function hQ(n,e,t,r){var i=n.pageSize().height,o=r.settings.margin,s=o.top+o.bottom,a=i-s;e.section==="body"&&(a-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,n),u=l<t;if(l>a)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var c=e.hasRowSpan(r.columns),h=e.getMaxCellHeight(r.columns)>a;return h?(c&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(c||r.settings.rowPageBreak==="avoid")}function nw(n,e,t,r,i,o,s){var a=iO(n,e,r,o);if(t.canEntireRowFit(a,s))Hc(n,e,t,o,s);else if(hQ(n,t,a,e)){var l=cQ(t,a,e,n);Hc(n,e,t,o,s),av(n,e,i,o,s),nw(n,e,l,r,i,o,s)}else av(n,e,i,o,s),nw(n,e,t,r,i,o,s)}function Hc(n,e,t,r,i){r.x=e.settings.margin.left;for(var o=0,s=i;o<s.length;o++){var a=s[o],l=t.cells[a.index];if(!l){r.x+=a.width;continue}n.applyStyles(l.styles),l.x=r.x,l.y=r.y;var u=e.callCellHooks(n,e.hooks.willDrawCell,l,t,a,r);if(u===!1){r.x+=a.width;continue}fQ(n,l,r);var c=l.getTextPos();jD(l.text,c.x,c.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},n.getDocument()),e.callCellHooks(n,e.hooks.didDrawCell,l,t,a,r),r.x+=a.width}r.y+=t.height}function fQ(n,e,t){var r=e.styles;if(n.getDocument().setFillColor(n.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=YD(r.lineWidth,r.fillColor);i&&n.rect(e.x,t.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&n.rect(e.x,t.y,e.width,e.height,"F"),dQ(n,e,t,r.lineWidth))}function dQ(n,e,t,r){var i,o,s,a;r.top&&(i=t.x,o=t.y,s=t.x+e.width,a=t.y,r.right&&(s+=.5*r.right),r.left&&(i-=.5*r.left),l(r.top,i,o,s,a)),r.bottom&&(i=t.x,o=t.y+e.height,s=t.x+e.width,a=t.y+e.height,r.right&&(s+=.5*r.right),r.left&&(i-=.5*r.left),l(r.bottom,i,o,s,a)),r.left&&(i=t.x,o=t.y,s=t.x,a=t.y+e.height,r.top&&(o-=.5*r.top),r.bottom&&(a+=.5*r.bottom),l(r.left,i,o,s,a)),r.right&&(i=t.x+e.width,o=t.y,s=t.x+e.width,a=t.y+e.height,r.top&&(o-=.5*r.top),r.bottom&&(a+=.5*r.bottom),l(r.right,i,o,s,a));function l(u,c,h,f,d){n.getDocument().setLineWidth(u),n.getDocument().line(c,h,f,d,"S")}}function iO(n,e,t,r){var i=e.settings.margin.bottom,o=e.settings.showFoot;return(o==="everyPage"||o==="lastPage"&&t)&&(i+=e.getFootHeight(e.columns)),n.pageSize().height-r.y-i}function av(n,e,t,r,i,o){i===void 0&&(i=[]),o===void 0&&(o=!1),n.applyStyles(n.userStyles),e.settings.showFoot==="everyPage"&&!o&&e.foot.forEach(function(a){return Hc(n,e,a,r,i)}),e.callEndPageHooks(n,r);var s=e.settings.margin;XD(n,e,t,r),oO(n),e.pageNumber++,r.x=s.left,r.y=s.top,t.y=s.top,e.callWillDrawPageHooks(n,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(a){return Hc(n,e,a,r,i)}),n.applyStyles(n.userStyles))}function oO(n){var e=n.pageNumber();n.setPage(e+1);var t=n.pageNumber();return t===e?(n.addPage(),!0):!1}function pQ(n){n.API.autoTable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[0],i=QD(this,r),o=nO(this,i);return rO(this,o),this},n.API.lastAutoTable=!1,n.API.autoTableText=function(e,t,r,i){jD(e,t,r,i,this)},n.API.autoTableSetDefaults=function(e){return $m.setDefaults(e,this),this},n.autoTableSetDefaults=function(e,t){$m.setDefaults(e,t)},n.API.autoTableHtmlToJson=function(e,t){var r;if(t===void 0&&(t=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new $m(this),o=JD(i,e,window,t,!1),s=o.head,a=o.body,l=((r=s[0])===null||r===void 0?void 0:r.map(function(u){return u.content}))||[];return{columns:l,rows:a,data:a}}}var Gb;function mQ(n,e){var t=QD(n,e),r=nO(n,t);rO(n,r)}try{if(typeof window<"u"&&window){var MR=window,ER=MR.jsPDF||((Gb=MR.jspdf)===null||Gb===void 0?void 0:Gb.jsPDF);ER&&pQ(ER)}}catch(n){console.error("Could not apply autoTable plugin",n)}const gQ=({data:n=[],modelName:e="Model"})=>{const t=pe.useMemo(()=>[{accessorKey:"id",header:"ID",cell:o=>o.getValue()},{accessorKey:"name",header:"Name",cell:o=>o.getValue()},{accessorKey:"quantity",header:"Quantity",cell:o=>o.getValue()},{accessorKey:"dimensions",header:"Dimensions",cell:o=>o.getValue()},{accessorKey:"material",header:"Material",cell:o=>o.getValue()}],[]),r=RJ({data:n,columns:t,getCoreRowModel:TJ()}),i=()=>{const o=new dn;o.text(`Bill of Materials - ${e}`,14,16),mQ(o,{startY:20,head:[t.map(s=>s.header)],body:n.map(s=>t.map(a=>s[a.accessorKey]))}),o.save(`${e}_BoM.pdf`)};return!n||n.length===0?ue("div",{style:{padding:"20px",textAlign:"center",color:"#888"},children:"No Bill of Materials data available for this model."}):ut("div",{style:{padding:"15px",height:"100%",overflowY:"auto",boxSizing:"border-box"},children:[ut("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[ue("h2",{style:{margin:0,fontSize:"1.4em"},children:"Bill of Materials"}),ue("button",{onClick:i,style:{padding:"8px 15px",fontSize:"1em",cursor:"pointer",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px"},children:"Export PDF"})]}),ut("table",{style:{width:"100%",borderCollapse:"collapse"},children:[ue("thead",{children:r.getHeaderGroups().map(o=>ue("tr",{children:o.headers.map(s=>ue("th",{style:{border:"1px solid #ddd",padding:"10px",textAlign:"left",backgroundColor:"#f2f2f2"},children:s.isPlaceholder?null:yR(s.column.columnDef.header,s.getContext())},s.id))},o.id))}),ue("tbody",{children:r.getRowModel().rows.map(o=>ue("tr",{children:o.getVisibleCells().map(s=>ue("td",{style:{border:"1px solid #ddd",padding:"10px"},children:yR(s.column.columnDef.cell,s.getContext())},s.id))},o.id))})]})]})};function vQ(){return new Worker("/cad-os/assets/worker-df6a642f.js",{type:"module"})}const Bt=()=>{throw new Error("oppencascade has not been loaded")};globalThis.FinalizationRegistry||(console.log("Garbage collection will not work"),globalThis.FinalizationRegistry=()=>({register:()=>null,unregister:()=>null}));const O0=new globalThis.FinalizationRegistry(n=>{try{n.delete()}catch(e){console.error(e)}});class cl{constructor(e){this.oc=Bt(),e&&O0.register(this,e,e),this._wrapped=e}get wrapped(){if(this._wrapped===null)throw new Error("This object has been deleted");return this._wrapped}set wrapped(e){this._wrapped&&(O0.unregister(this._wrapped),this._wrapped.delete()),O0.register(this,e,e),this._wrapped=e}delete(){var e;O0.unregister(this.wrapped),(e=this.wrapped)==null||e.delete(),this._wrapped=null}}const ni=()=>{function n(e){return O0.register(n,e),e}return n},to=n=>{const e=new Set;return[t=>(e.add(t),t),()=>{[...e.values()].forEach(t=>t.delete()),e.clear()},n?e:void 0]},sO=2147483647,Hl=Math.PI/180,lv=180/Math.PI,Vb=n=>Math.round(n*1e3)/1e3,e1=(n,e,t)=>{const r=Bt(),i=al(n),o=dg(e);let s;if(t){const a=dg(t);s=new r.gp_Ax3_3(i,o,a),a.delete()}else s=new r.gp_Ax3_4(i,o);return i.delete(),o.delete(),s},AS=(n,e,t)=>{const r=Bt(),i=al(n),o=dg(e);let s;if(t){const a=dg(t);s=new r.gp_Ax2_2(i,o,a),a.delete()}else s=new r.gp_Ax2_3(i,o);return i.delete(),o.delete(),s},uv=(n,e)=>{const t=Bt(),r=al(n),i=dg(e),o=new t.gp_Ax1_2(r,i);return r.delete(),i.delete(),o},yQ=(n=[0,0,0])=>{const e=Bt();if(Array.isArray(n)){if(n.length===3)return new e.gp_Vec_4(...n);if(n.length===2)return new e.gp_Vec_4(...n,0)}else{if(n instanceof Tt)return new e.gp_Vec_3(n.wrapped.XYZ());if(n.XYZ)return new e.gp_Vec_3(n.XYZ())}return new e.gp_Vec_4(0,0,0)};class Tt extends cl{constructor(e=[0,0,0]){super(yQ(e))}get repr(){return`x: ${Vb(this.x)}, y: ${Vb(this.y)}, z: ${Vb(this.z)}`}get x(){return this.wrapped.X()}get y(){return this.wrapped.Y()}get z(){return this.wrapped.Z()}get Length(){return this.wrapped.Magnitude()}toTuple(){return[this.x,this.y,this.z]}cross(e){return new Tt(this.wrapped.Crossed(e.wrapped))}dot(e){return this.wrapped.Dot(e.wrapped)}sub(e){return new Tt(this.wrapped.Subtracted(e.wrapped))}add(e){return new Tt(this.wrapped.Added(e.wrapped))}multiply(e){return new Tt(this.wrapped.Multiplied(e))}normalized(){return new Tt(this.wrapped.Normalized())}normalize(){return this.wrapped.Normalize(),this}getCenter(){return this}getAngle(e){return this.wrapped.Angle(e.wrapped)*lv}projectToPlane(e){const t=e.origin,r=e.zDir,i=this.sub(t),o=r.multiply(i.dot(r)/r.Length**2),s=this.sub(o);return i.delete(),o.delete(),s}equals(e){return this.wrapped.IsEqual(e.wrapped,1e-5,1e-5)}toPnt(){return new this.oc.gp_Pnt_2(this.wrapped.XYZ())}toDir(){return new this.oc.gp_Dir_3(this.wrapped.XYZ())}rotate(e,t=[0,0,0],r=[0,0,1]){const i=uv(t,r);return this.wrapped.Rotate(i,e*Hl),i.delete(),this}}const xQ={X:[1,0,0],Y:[0,1,0],Z:[0,0,1]};function wQ(n){return n==="X"||n==="Y"||n==="Z"?xQ[n]:n}function al(n){const e=new Tt(n),t=e.toPnt();return e.delete(),t}function dg(n){const e=new Tt(n),t=e.toDir();return e.delete(),t}class jd extends cl{constructor(e){const t=Bt();super(e||new t.gp_Trsf_1)}translate(e,t=0,r=0){const i=new Tt(typeof e=="number"?[e,t,r]:e);return this.wrapped.SetTranslation_1(i.wrapped),this}rotate(e,t=[0,0,0],r=[0,0,1]){const i=dg(r),o=al(t),s=new this.oc.gp_Ax1_2(o,i);return this.wrapped.SetRotation_1(s,e*Hl),s.delete(),i.delete(),o.delete(),this}mirror(e="YZ",t){const r=ni();let i,o;if(typeof e=="string"){const a=r(aO(e,t));i=a.origin,o=a.zDir}else e instanceof Fs?(i=t||e.origin,o=e.zDir):(i=t||[0,0,0],o=e);const s=r(AS(i,o));return this.wrapped.SetMirror_3(s),this}scale(e,t){const r=al(e);return this.wrapped.SetScale(r,t),r.delete(),this}coordSystemChange(e,t){const r=ni(),i=r(e==="reference"?new this.oc.gp_Ax3_1:e1(e.origin,e.zDir,e.xDir)),o=r(t==="reference"?new this.oc.gp_Ax3_1:e1(t.origin,t.zDir,t.xDir));return this.wrapped.SetTransformation_1(i,o),this}transformPoint(e){const t=al(e),r=t.Transformed(this.wrapped);return t.delete(),r}transform(e){return new this.oc.BRepBuilderAPI_Transform_2(e,this.wrapped,!0).ModifiedShape(e)}}class Fs{constructor(e,t=null,r=[0,0,1]){this.oc=Bt();const i=new Tt(r);if(i.Length===0)throw new Error("normal should be non null");this.zDir=i.normalize();let o;if(t)o=new Tt(t);else{const s=e1(e,i);o=new Tt(s.XDirection()),s.delete()}if(o.Length===0)throw new Error("xDir should be non null");this.xDir=o.normalize(),this.yDir=this.zDir.cross(this.xDir).normalize(),this.origin=new Tt(e)}delete(){this.localToGlobal.delete(),this.xDir.delete(),this.yDir.delete(),this.zDir.delete(),this._origin.delete()}clone(){return new Fs(this.origin,this.xDir,this.zDir)}get origin(){return this._origin}set origin(e){this._origin=e,this._calcTransforms()}translateTo(e){const t=this.clone();return t.origin=new Tt(e),t}translate(e,t=0,r=0){const i=new Tt(typeof e=="number"?[e,t,r]:e);return this.translateTo(this.origin.add(i))}translateX(e){return this.translate(e,0,0)}translateY(e){return this.translate(0,e,0)}translateZ(e){return this.translate(0,0,e)}pivot(e,t=[1,0,0]){const r=wQ(t),i=new Tt(this.zDir).rotate(e,[0,0,0],r),o=new Tt(this.xDir).rotate(e,[0,0,0],r);return new Fs(this.origin,o,i)}rotate2DAxes(e){const t=new Tt(this.xDir).rotate(e,[0,0,0],this.zDir);return new Fs(this.origin,t,this.zDir)}_calcTransforms(){const e=new this.oc.gp_Ax3_1,t=e1(this.origin,this.zDir,this.xDir);new this.oc.gp_Trsf_1().SetTransformation_1(e,t),this.globalToLocal=new jd,this.globalToLocal.coordSystemChange("reference",{origin:this.origin,zDir:this.zDir,xDir:this.xDir}),this.localToGlobal=new jd,this.localToGlobal.coordSystemChange({origin:this.origin,zDir:this.zDir,xDir:this.xDir},"reference")}setOrigin2d(e,t){this.origin=this.toWorldCoords([e,t])}toLocalCoords(e){const t=this.globalToLocal.transformPoint(e),r=new Tt(t);return t.delete(),r}toWorldCoords(e){const t=this.localToGlobal.transformPoint(e),r=new Tt(t);return t.delete(),r}}const SQ={XY:{xDir:[1,0,0],normal:[0,0,1]},YZ:{xDir:[0,1,0],normal:[1,0,0]},ZX:{xDir:[0,0,1],normal:[0,1,0]},XZ:{xDir:[1,0,0],normal:[0,-1,0]},YX:{xDir:[0,1,0],normal:[0,0,-1]},ZY:{xDir:[0,0,1],normal:[-1,0,0]},front:{xDir:[1,0,0],normal:[0,0,1]},back:{xDir:[-1,0,0],normal:[0,0,-1]},left:{xDir:[0,0,1],normal:[-1,0,0]},right:{xDir:[0,0,-1],normal:[1,0,0]},top:{xDir:[1,0,0],normal:[0,1,0]},bottom:{xDir:[1,0,0],normal:[0,-1,0]}},aO=(n,e=[0,0,0])=>{const t=SQ[n];if(!t)throw new Error(`Could not find plane ${n}`);let r;return typeof e=="number"?r=t.normal.map(i=>i*e):r=e,new Fs(r,t.xDir,t.normal)};let _Q=class extends cl{constructor(e){const t=Bt();let r=e;r||(r=new t.Bnd_Box_1),super(r)}get repr(){const[e,t]=this.bounds;return`${new Tt(e).repr} - ${new Tt(t).repr}`}get bounds(){const e={current:0},t={current:0},r={current:0},i={current:0},o={current:0},s={current:0};return this.wrapped.Get(e,t,r,i,o,s),[[e.current,t.current,r.current],[i.current,o.current,s.current]]}get center(){const[[e,t,r],[i,o,s]]=this.bounds;return[e+(i-e)/2,t+(o-t)/2,r+(s-r)/2]}get width(){const[[e],[t]]=this.bounds;return Math.abs(t-e)}get height(){const[[,e],[,t]]=this.bounds;return Math.abs(t-e)}get depth(){const[[,,e],[,,t]]=this.bounds;return Math.abs(t-e)}add(e){this.wrapped.Add_1(e.wrapped)}isOut(e){return this.wrapped.IsOut_4(e.wrapped)}};function wf(n="XY",e=[0,0,0]){return n instanceof Fs?n.clone():aO(n,e)}function bQ(n,e,t=[0,0,0],r=[0,0,1]){const i=new jd;i.rotate(e,t,r);const o=i.transform(n);return i.delete(),o}function MQ(n,e){const t=new jd;t.translate(e);const r=t.transform(n);return t.delete(),r}function EQ(n,e,t){const r=new jd;r.mirror(e,t);const i=r.transform(n);return r.delete(),i}function AQ(n,e,t){const r=new jd;r.scale(e,t);const i=r.transform(n);return r.delete(),i}function rw(n){return Array.isArray(n)&&n.length===2}let P2=null;const AR=n=>{if(P2&&!n)return P2;const t=Bt().GeomAbs_CurveType;return P2=new Map([[t.GeomAbs_Line,"LINE"],[t.GeomAbs_Circle,"CIRCLE"],[t.GeomAbs_Ellipse,"ELLIPSE"],[t.GeomAbs_Hyperbola,"HYPERBOLA"],[t.GeomAbs_Parabola,"PARABOLA"],[t.GeomAbs_BezierCurve,"BEZIER_CURVE"],[t.GeomAbs_BSplineCurve,"BSPLINE_CURVE"],[t.GeomAbs_OffsetCurve,"OFFSET_CURVE"],[t.GeomAbs_OtherCurve,"OTHER_CURVE"]]),P2},I1=n=>{let e=AR().get(n);if(e||(e=AR(!0).get(n)),!e)throw new Error("unknown type");return e};function TQ(n,e){const t=Math.pow(10,e),r=e<0?n:.01/t+n;return Math.round(r*t)/t}function CQ(n){return Array.from(Array(n).keys())}function qm(n){const e=Math.min(...n.map(t=>t.length));return CQ(e).map(t=>n.map(r=>r[t]))}function iw(n){return Math.round(n*100)/100}const cv=([n,e])=>`(${iw(n)},${iw(e)})`,TR=(n,e=1e-9)=>{let t=n;return Math.abs(n)<e&&(t=0),t.toFixed(-Math.log10(e))},lO=(n,e=1e-9)=>Array.from(new Map(n.map(([t,r])=>[`[${TR(t,e)},${TR(r,e)}]`,[t,r]])).values()),Xo=([n,e])=>{const t=Bt();return new t.gp_Pnt2d_3(n,e)},PQ=([n,e])=>{const t=Bt();return new t.gp_Dir2d_4(n,e)},uO=([n,e])=>{const t=Bt();return new t.gp_Vec2d_4(n,e)},pg=(n,e)=>{const t=Bt(),[r,i]=to(),o=new t.gp_Ax2d_2(r(Xo(n)),r(PQ(e)));return i(),o};class N1 extends cl{constructor(e){const t=Bt();let r=e;r||(r=new t.Bnd_Box2d),super(r)}get repr(){const[e,t]=this.bounds;return`${cv(e)} - ${cv(t)}`}get bounds(){const e={current:0},t={current:0},r={current:0},i={current:0};return this.wrapped.Get(e,t,r,i),[[e.current,t.current],[r.current,i.current]]}get center(){const[[e,t],[r,i]]=this.bounds;return[e+(r-e)/2,t+(i-t)/2]}get width(){const[[e],[t]]=this.bounds;return Math.abs(t-e)}get height(){const[[,e],[,t]]=this.bounds;return Math.abs(t-e)}outsidePoint(e=1){const[t,r]=this.bounds,i=r[0]-t[0],o=r[1]-t[1];return[r[0]+i/100*e,r[1]+o/100*e*.9]}add(e){this.wrapped.Add_1(e.wrapped)}isOut(e){return this.wrapped.IsOut_4(e.wrapped)}containsPoint(e){const r=ni()(Xo(e));return!this.wrapped.IsOut_1(r)}}const ws=([n,e],[t,r],i=1e-6)=>Math.abs(n-t)<=i&&Math.abs(e-r)<=i,mg=([n,e],[t,r])=>[n+t,e+r],$A=([n,e],[t,r])=>[n-t,e-r],pE=([n,e],t)=>[n*t,e*t],Au=([n,e],[t,r]=[0,0])=>Math.sqrt((n-t)**2+(e-r)**2),LQ=([n,e],[t,r]=[0,0])=>(n-t)**2+(e-r)**2;function RQ([n,e],[t,r]){return n*r-e*t}const kQ=([n,e],[t,r]=[0,0])=>Math.atan2(r*n-e*t,n*t+e*r),IQ=([n,e],[t,r]=[0,0])=>Math.atan2(r-e,t-n),Xh=([n,e])=>{const t=Au([n,e]);return[n/t,e/t]},NQ=(n,e,t=[0,0])=>{const[r,i]=n,[o,s]=t,a=r-o,l=i-s,u=Math.sin(e),c=Math.cos(e),h=a*c-l*u,f=a*u+l*c;return[h+o,f+s]},Rm=(n,e)=>{const t=Math.cos(e)*n,r=Math.sin(e)*n;return[t,r]},FQ=([n,e])=>{const t=Au([n,e]),r=Math.atan2(e,n);return[t,r]};class Ni extends cl{constructor(e){const t=Bt(),r=e.get();super(new t.Handle_Geom2d_Curve_2(r)),this._boundingBox=null}get boundingBox(){if(this._boundingBox)return this._boundingBox;const e=Bt(),t=new e.Bnd_Box2d;return e.BndLib_Add2dCurve.Add_3(this.wrapped,1e-6,t),this._boundingBox=new N1(t),this._boundingBox}get repr(){return`${this.geomType} ${cv(this.firstPoint)} - ${cv(this.lastPoint)}`}get innerCurve(){return this.wrapped.get()}value(e){const t=this.innerCurve.Value(e),r=[t.X(),t.Y()];return t.delete(),r}get firstPoint(){return this.value(this.firstParameter)}get lastPoint(){return this.value(this.lastParameter)}get firstParameter(){return this.innerCurve.FirstParameter()}get lastParameter(){return this.innerCurve.LastParameter()}adaptor(){const e=Bt();return new e.Geom2dAdaptor_Curve_2(this.wrapped)}get geomType(){const e=this.adaptor(),t=I1(e.GetType());return e.delete(),t}clone(){return new Ni(this.innerCurve.Copy())}reverse(){this.innerCurve.Reverse()}distanceFromPoint(e){const t=Bt(),r=ni(),i=r(new t.Geom2dAPI_ProjectPointOnCurve_2(r(Xo(e)),this.wrapped));let o=1/0;try{o=i.LowerDistance()}catch{o=1/0}return Math.min(o,Au(e,this.firstPoint),Au(e,this.lastPoint))}distanceFromCurve(e){const t=Bt(),r=ni();let i=1/0;const o=r(new t.Geom2dAPI_ExtremaCurveCurve(this.wrapped,e.wrapped,this.firstParameter,this.lastParameter,e.firstParameter,e.lastParameter));try{i=o.LowerDistance()}catch{i=1/0}return Math.min(i,this.distanceFromPoint(e.firstPoint),this.distanceFromPoint(e.lastPoint),e.distanceFromPoint(this.firstPoint),e.distanceFromPoint(this.lastPoint))}distanceFrom(e){return rw(e)?this.distanceFromPoint(e):this.distanceFromCurve(e)}isOnCurve(e){return this.distanceFromPoint(e)<1e-9}parameter(e,t=1e-9){const r=Bt(),i=ni();let o,s;try{const a=i(new r.Geom2dAPI_ProjectPointOnCurve_2(i(Xo(e)),this.wrapped));o=a.LowerDistance(),s=a.LowerDistanceParameter()}catch{if(ws(e,this.firstPoint,t))return this.firstParameter;if(ws(e,this.lastPoint,t))return this.lastParameter;throw new Error("Failed to find parameter")}if(o>t)throw new Error(`Point ${cv(e)} not on curve ${this.repr}, ${o.toFixed(9)}`);return s}tangentAt(e){const t=Bt(),[r,i]=to();let o;Array.isArray(e)?o=this.parameter(e):o=(this.innerCurve.LastParameter()-this.innerCurve.FirstParameter())*e+this.innerCurve.FirstParameter();const s=r(new t.gp_Pnt2d_1),a=r(new t.gp_Vec2d_1);this.innerCurve.D1(o,s,a);const l=[a.X(),a.Y()];return i(),l}splitAt(e,t=1e-9){const r=Bt(),i=ni();let o=e.map(l=>rw(l)?this.parameter(l,t):l);o=Array.from(new Map(o.map(l=>[TQ(l,-Math.log10(t)),l])).values()).sort((l,u)=>l-u);const s=this.firstParameter,a=this.lastParameter;return s>a&&o.reverse(),Math.abs(o[0]-s)<t*100&&(o=o.slice(1)),o.length?(Math.abs(o[o.length-1]-a)<t*100&&(o=o.slice(0,-1)),o.length?qm([[s,...o],[...o,a]]).map(([l,u])=>{try{if(this.geomType==="BEZIER_CURVE"){const h=new r.Geom2d_BezierCurve_1(i(this.adaptor()).Bezier().get().Poles_2());return h.Segment(l,u),new Ni(new r.Handle_Geom2d_Curve_2(h))}if(this.geomType==="BSPLINE_CURVE"){const h=i(this.adaptor()).BSpline().get(),f=new r.Geom2d_BSplineCurve_1(h.Poles_2(),h.Knots_2(),h.Multiplicities_2(),h.Degree(),h.IsPeriodic());return f.Segment(l,u,t),new Ni(new r.Handle_Geom2d_Curve_2(f))}const c=new r.Geom2d_TrimmedCurve(this.wrapped,l,u,!0,!0);return new Ni(new r.Handle_Geom2d_Curve_2(c))}catch{throw new Error("Failed to split the curve")}}):[this]):[this]}}const cO=(n,e=1e-4,t="C0",r=200)=>{const i=Bt(),o=ni(),s={C0:i.GeomAbs_Shape.GeomAbs_C0,C1:i.GeomAbs_Shape.GeomAbs_C1,C2:i.GeomAbs_Shape.GeomAbs_C2,C3:i.GeomAbs_Shape.GeomAbs_C3},a=o(new i.Geom2dConvert_ApproxCurve_2(n.ShallowCopy(),e,s[t],r,3));return new Ni(a.Curve())},CR=n=>{if(I1(n.GetType())!=="BSPLINE_CURVE")throw new Error("You can only convert a Bspline");const e=n.BSpline(),t=Bt(),r=new t.Geom2dConvert_BSplineCurveToBezierCurve_1(e);function*i(){const s=r.NbArcs();if(s)for(let a=1;a<=s;a++){const l=r.Arc(a);yield new Ni(l)}}const o=Array.from(i());return r.delete(),o};function ow(n,e={tolerance:1e-4,continuity:"C0",maxSegments:300}){const t=ni();return n.flatMap(r=>{const i=t(r.adaptor()),o=I1(i.GetType());if(o==="ELLIPSE"||o==="CIRCLE"&&ws(r.firstPoint,r.lastPoint))return r.splitAt([.5]);if(["LINE","ELLIPSE","CIRCLE"].includes(o))return r;if(o==="BEZIER_CURVE"){const l=i.Bezier().get().Degree();if([1,2,3].includes(l))return r}if(o==="BSPLINE_CURVE"){const a=CR(i);return ow(a,e)}const s=cO(i,e.tolerance,e.continuity,e.maxSegments);return ow(CR(t(s.adaptor())),e)})}function*hO(n){const e=n.NbPoints();if(e)for(let t=1;t<=e;t++){const r=n.Point(t);yield[r.X(),r.Y()]}}function*DQ(n){const e=n.NbSegments();if(!e)return;const t=Bt();for(let r=1;r<=e;r++){const i=new t.Handle_Geom2d_Curve_1,o=new t.Handle_Geom2d_Curve_1;try{n.Segment(r,i,o)}catch{continue}yield new Ni(i),o.delete()}}const F1=(n,e,t=1e-9)=>{if(n.boundingBox.isOut(e.boundingBox))return{intersections:[],commonSegments:[],commonSegmentsPoints:[]};const r=Bt(),i=new r.Geom2dAPI_InterCurveCurve_1;let o,s;try{i.Init_1(n.wrapped,e.wrapped,t),o=Array.from(hO(i)),s=Array.from(DQ(i))}catch(u){throw console.error(n,e,u),new Error("Intersections failed between curves")}finally{i.delete()}const a=s.filter(u=>ws(u.firstPoint,u.lastPoint,t)).map(u=>u.firstPoint);a.length&&(o.push(...a),s=s.filter(u=>!ws(u.firstPoint,u.lastPoint,t)));const l=s.flatMap(u=>[u.firstPoint,u.lastPoint]);return{intersections:o,commonSegments:s,commonSegmentsPoints:l}},OQ=(n,e=1e-9)=>{const t=Bt(),r=new t.Geom2dAPI_InterCurveCurve_1;let i;try{r.Init_1(n.wrapped,n.wrapped,e),i=Array.from(hO(r))}catch{throw new Error("Self intersection failed")}finally{r.delete()}return i},D1=(n,e)=>{const t=Bt(),[r,i]=to(),o=r(new t.GCE2d_MakeSegment_1(r(Xo(n)),r(Xo(e)))).Value(),s=new Ni(o);return ws(s.firstPoint,n)||s.reverse(),i(),s},mE=(n,e,t)=>{const r=Bt(),[i,o]=to(),s=i(new r.GCE2d_MakeArcOfCircle_4(i(Xo(n)),i(Xo(e)),i(Xo(t)))).Value();o();const a=new Ni(s);return ws(a.firstPoint,n)||a.wrapped.get().SetTrim(a.lastParameter,a.firstParameter,!0,!0),a},BQ=(n,e,t)=>{const r=Bt(),[i,o]=to(),s=i(new r.GCE2d_MakeArcOfCircle_5(i(Xo(n)),i(uO(e)),i(Xo(t)))).Value();o();const a=new Ni(s);return ws(a.firstPoint,n)||a.wrapped.get().SetTrim(a.lastParameter,a.firstParameter,!0,!0),a},UQ=(n,e,t,r,i=[0,0],o,s=!0)=>{const a=Bt(),[l,u]=to(),c=l(new a.gp_Elips2d_2(l(pg(i,o)),n,e,!0)),h=l(new a.GCE2d_MakeArcOfEllipse_1(c,t,r,s)).Value();return u(),new Ni(h)},zQ=(n,e,t)=>{const r=Bt(),[i,o]=to(),s=i(new r.TColgp_Array1OfPnt2d_2(1,e.length+2));s.SetValue(1,i(Xo(n))),e.forEach((l,u)=>{s.SetValue(u+2,i(Xo(l)))}),s.SetValue(e.length+2,i(Xo(t)));const a=new r.Geom2d_BezierCurve_1(s);return o(),new Ni(new r.Handle_Geom2d_Curve_2(a))},fO=(n,e,t)=>{const r=pE(mg(n,e),.5),i=Au(t,n),o=Xh($A(r,t));return mE(n,mg(pE(o,i),t),e)},HQ=(n,e,t)=>{const r=Xh($A(e,n)),i=[r[1],-r[0]],o=[i[0]*t,i[1]*t];return{firstPoint:mg(n,o),lastPoint:mg(e,o)}},gE=(n,e)=>{const t=ni(),r=n.geomType;if(r==="CIRCLE"){const l=t(t(n.adaptor()).Circle()),u=l.Radius(),c=l.IsDirect()?1:-1,h=e*c,f=u+h;if(f<1e-10){const g=t(l.Location()),x=[g.X(),g.Y()],_=E=>{const[C,I]=Xh($A(E,x));return mg(E,[h*C,h*I])};return{collapsed:!0,firstPoint:_(n.firstPoint),lastPoint:_(n.lastPoint)}}const d=Bt(),v=new d.gp_Circ2d_3(l.Axis(),f),y=new d.Geom2d_Circle_1(v),w=new d.Geom2d_TrimmedCurve(new d.Handle_Geom2d_Curve_2(y),n.firstParameter,n.lastParameter,!0,!0);return new Ni(new d.Handle_Geom2d_Curve_2(w))}if(r==="LINE"){const{firstPoint:l,lastPoint:u}=HQ(n.firstPoint,n.lastPoint,e);return D1(l,u)}const i=Bt(),o=new Ni(new i.Handle_Geom2d_Curve_2(new i.Geom2d_OffsetCurve(n.wrapped,e,!0))),s=cO(o.adaptor());return OQ(s).length?{collapsed:!0,firstPoint:s.firstPoint,lastPoint:s.lastPoint}:s};function dO(n,e,t){const r=RQ(n.tangentAt(1),e.tangentAt(0));if(Math.abs(r)<1e-10)return null;const i=r>0?-1:1,o=Math.abs(t)*i,s=gE(n,o),a=gE(e,o);if(!(s instanceof Ni)||!(a instanceof Ni))return null;let l;try{const{intersections:d}=F1(s,a,1e-9);l=d.at(-1)}catch{return null}if(!rw(l))return null;const u=l,c=(d,v)=>{const[y,w]=v.tangentAt(u),g=Xh([-w,y]),x=mg(u,pE(g,o)),_=d.parameter(x,1e-6);return d.splitAt([_])},[h]=c(n,s),[,f]=c(e,a);return{first:h,second:f,center:u}}function vE(n,e,t){const r=dO(n,e,t);if(!r)return console.warn("Cannot fillet between curves",n.repr,e.repr),[n,e];const{first:i,second:o,center:s}=r;return[i,fO(i.lastPoint,o.firstPoint,s),o]}function yE(n,e,t){const r=dO(n,e,t);if(!r)return console.warn("Cannot chamfer between curves",n.repr,e.repr),[n,e];const{first:i,second:o}=r;return[i,D1(i.lastPoint,o.firstPoint),o]}class GQ{constructor(){this.ids=[],this.values=[],this.length=0}clear(){this.length=0}push(e,t){let r=this.length++;for(;r>0;){const i=r-1>>1,o=this.values[i];if(t>=o)break;this.ids[r]=this.ids[i],this.values[r]=o,r=i}this.ids[r]=e,this.values[r]=t}pop(){if(this.length===0)return;const e=this.ids[0];if(this.length--,this.length>0){const t=this.ids[0]=this.ids[this.length],r=this.values[0]=this.values[this.length],i=this.length>>1;let o=0;for(;o<i;){let s=(o<<1)+1;const a=s+1;let l=this.ids[s],u=this.values[s];const c=this.values[a];if(a<this.length&&c<u&&(s=a,l=this.ids[a],u=c),u>=r)break;this.ids[o]=l,this.values[o]=u,o=s}this.ids[o]=t,this.values[o]=r}return e}peek(){if(this.length!==0)return this.ids[0]}peekValue(){if(this.length!==0)return this.values[0]}shrink(){this.ids.length=this.values.length=this.length}}const PR=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Wb=3;class qA{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,r]=new Uint8Array(e,0,2);if(t!==251)throw new Error("Data does not appear to be in a Flatbush format.");if(r>>4!==Wb)throw new Error(`Got v${r>>4} data when expected v${Wb}.`);const[i]=new Uint16Array(e,2,1),[o]=new Uint32Array(e,4,1);return new qA(o,i,PR[r&15],e)}constructor(e,t=16,r=Float64Array,i){if(e===void 0)throw new Error("Missing required argument: numItems.");if(isNaN(e)||e<=0)throw new Error(`Unpexpected numItems value: ${e}.`);this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535);let o=e,s=o;this._levelBounds=[o*4];do o=Math.ceil(o/this.nodeSize),s+=o,this._levelBounds.push(s*4);while(o!==1);this.ArrayType=r||Float64Array,this.IndexArrayType=s<16384?Uint16Array:Uint32Array;const a=PR.indexOf(this.ArrayType),l=s*4*this.ArrayType.BYTES_PER_ELEMENT;if(a<0)throw new Error(`Unexpected typed array class: ${r}.`);i&&i instanceof ArrayBuffer?(this.data=i,this._boxes=new this.ArrayType(this.data,8,s*4),this._indices=new this.IndexArrayType(this.data,8+l,s),this._pos=s*4,this.minX=this._boxes[this._pos-4],this.minY=this._boxes[this._pos-3],this.maxX=this._boxes[this._pos-2],this.maxY=this._boxes[this._pos-1]):(this.data=new ArrayBuffer(8+l+s*this.IndexArrayType.BYTES_PER_ELEMENT),this._boxes=new this.ArrayType(this.data,8,s*4),this._indices=new this.IndexArrayType(this.data,8+l,s),this._pos=0,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,new Uint8Array(this.data,0,2).set([251,(Wb<<4)+a]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e),this._queue=new GQ}add(e,t,r,i){const o=this._pos>>2;return this._indices[o]=o,this._boxes[this._pos++]=e,this._boxes[this._pos++]=t,this._boxes[this._pos++]=r,this._boxes[this._pos++]=i,e<this.minX&&(this.minX=e),t<this.minY&&(this.minY=t),r>this.maxX&&(this.maxX=r),i>this.maxY&&(this.maxY=i),o}finish(){if(this._pos>>2!==this.numItems)throw new Error(`Added ${this._pos>>2} items when expected ${this.numItems}.`);if(this.numItems<=this.nodeSize){this._boxes[this._pos++]=this.minX,this._boxes[this._pos++]=this.minY,this._boxes[this._pos++]=this.maxX,this._boxes[this._pos++]=this.maxY;return}const e=this.maxX-this.minX||1,t=this.maxY-this.minY||1,r=new Uint32Array(this.numItems),i=(1<<16)-1;for(let o=0;o<this.numItems;o++){let s=4*o;const a=this._boxes[s++],l=this._boxes[s++],u=this._boxes[s++],c=this._boxes[s++],h=Math.floor(i*((a+u)/2-this.minX)/e),f=Math.floor(i*((l+c)/2-this.minY)/t);r[o]=WQ(h,f)}xE(r,this._boxes,this._indices,0,this.numItems-1,this.nodeSize);for(let o=0,s=0;o<this._levelBounds.length-1;o++){const a=this._levelBounds[o];for(;s<a;){const l=s;let u=1/0,c=1/0,h=-1/0,f=-1/0;for(let d=0;d<this.nodeSize&&s<a;d++)u=Math.min(u,this._boxes[s++]),c=Math.min(c,this._boxes[s++]),h=Math.max(h,this._boxes[s++]),f=Math.max(f,this._boxes[s++]);this._indices[this._pos>>2]=l,this._boxes[this._pos++]=u,this._boxes[this._pos++]=c,this._boxes[this._pos++]=h,this._boxes[this._pos++]=f}}}search(e,t,r,i,o){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let s=this._boxes.length-4;const a=[],l=[];for(;s!==void 0;){const u=Math.min(s+this.nodeSize*4,RR(s,this._levelBounds));for(let c=s;c<u;c+=4){if(r<this._boxes[c]||i<this._boxes[c+1]||e>this._boxes[c+2]||t>this._boxes[c+3])continue;const h=this._indices[c>>2]|0;s<this.numItems*4?(o===void 0||o(h))&&l.push(h):a.push(h)}s=a.pop()}return l}neighbors(e,t,r=1/0,i=1/0,o){if(this._pos!==this._boxes.length)throw new Error("Data not yet indexed - call index.finish().");let s=this._boxes.length-4;const a=this._queue,l=[],u=i*i;for(;s!==void 0;){const c=Math.min(s+this.nodeSize*4,RR(s,this._levelBounds));for(let h=s;h<c;h+=4){const f=this._indices[h>>2]|0,d=LR(e,this._boxes[h],this._boxes[h+2]),v=LR(t,this._boxes[h+1],this._boxes[h+3]),y=d*d+v*v;s<this.numItems*4?(o===void 0||o(f))&&a.push((f<<1)+1,y):a.push(f<<1,y)}for(;a.length&&a.peek()&1;)if(a.peekValue()>u||(l.push(a.pop()>>1),l.length===r))return a.clear(),l;s=a.pop()>>1}return a.clear(),l}}function LR(n,e,t){return n<e?e-n:n<=t?0:n-t}function RR(n,e){let t=0,r=e.length-1;for(;t<r;){const i=t+r>>1;e[i]>n?r=i:t=i+1}return e[t]}function xE(n,e,t,r,i,o){if(Math.floor(r/o)>=Math.floor(i/o))return;const s=n[r+i>>1];let a=r-1,l=i+1;for(;;){do a++;while(n[a]<s);do l--;while(n[l]>s);if(a>=l)break;VQ(n,e,t,a,l)}xE(n,e,t,r,l,o),xE(n,e,t,l+1,i,o)}function VQ(n,e,t,r,i){const o=n[r];n[r]=n[i],n[i]=o;const s=4*r,a=4*i,l=e[s],u=e[s+1],c=e[s+2],h=e[s+3];e[s]=e[a],e[s+1]=e[a+1],e[s+2]=e[a+2],e[s+3]=e[a+3],e[a]=l,e[a+1]=u,e[a+2]=c,e[a+3]=h;const f=t[r];t[r]=t[i],t[i]=f}function WQ(n,e){let t=n^e,r=65535^t,i=65535^(n|e),o=n&(e^65535),s=t|r>>1,a=t>>1^t,l=i>>1^r&o>>1^i,u=t&i>>1^o>>1^o;t=s,r=a,i=l,o=u,s=t&t>>2^r&r>>2,a=t&r>>2^r&(t^r)>>2,l^=t&i>>2^r&o>>2,u^=r&i>>2^(t^r)&o>>2,t=s,r=a,i=l,o=u,s=t&t>>4^r&r>>4,a=t&r>>4^r&(t^r)>>4,l^=t&i>>4^r&o>>4,u^=r&i>>4^(t^r)&o>>4,t=s,r=a,i=l,o=u,l^=t&i>>8^r&o>>8,u^=r&i>>8^(t^r)&o>>8,t=l^l>>1,r=u^u>>1;let c=n^e,h=r|65535^(c|t);return c=(c|c<<8)&16711935,c=(c|c<<4)&252645135,c=(c|c<<2)&858993459,c=(c|c<<1)&1431655765,h=(h|h<<8)&16711935,h=(h|h<<4)&252645135,h=(h|h<<2)&858993459,h=(h|h<<1)&1431655765,(h<<1|c)>>>0}const jQ=(n,e=1e-7)=>{const t=new qA(n.length);n.forEach(o=>{const[s,a]=o.firstPoint;t.add(s-e,a-e,s+e,a+e)}),t.finish();const r=[],i=new Set;return n.forEach((o,s)=>{if(i.has(s))return;const a=[o];let l=s;i.add(s);let u=n.length;for(;;){if(u--<0)throw new Error("Infinite loop detected");const c=a[a.length-1].lastPoint,[h,f]=c,d=t.search(h-e,f-e,h+e,f+e),v=x=>Math.abs((l-x)%n.length),y=d.filter(x=>!i.has(x)).map(x=>[n[x],x,v(x)]).sort(([,,x],[,,_])=>v(x)-v(_));if(y.length===0){r.push(a);break}const[w,g]=y[0];a.push(w),i.add(g),l=g}}),r};function Pl(n){return Math.round(n*1e5)/1e5}const jb=n=>`${iw(n.X())} ${iw(n.Y())}`,$Q=(n,e)=>{const t=Bt(),r=I1(n.GetType()),[i,o]=e,s=`${Pl(i)} ${Pl(o)}`;if(r==="LINE")return`L ${s}`;if(r==="BEZIER_CURVE"){const a=n.Bezier().get(),l=a.Degree();if(l===1)return`L ${s}`;if(l===2)return`Q ${jb(a.Pole(2))} ${s}`;if(l===3){const u=jb(a.Pole(2)),c=jb(a.Pole(3));return`C ${u} ${c} ${s}`}}if(r==="CIRCLE"){const a=n.Circle(),l=a.Radius(),u=n.FirstParameter(),h=(n.LastParameter()-u)*lv,f=h!==360?s:`${Pl(i)} ${Pl(o+1e-4)}`;return`A ${l} ${l} 0 ${Math.abs(h)>180?"1":"0"} ${a.IsDirect()?"1":"0"} ${f}`}if(r==="ELLIPSE"){const a=n.Ellipse(),l=a.MajorRadius(),u=a.MinorRadius(),c=n.FirstParameter(),f=(n.LastParameter()-c)*lv,d=f!==360?s:`${Pl(i)} ${Pl(o+1e-4)}`,v=new t.gp_Dir2d_1,y=180-a.XAxis().Direction().Angle(v)*lv;return v.delete(),`A ${Pl(l)} ${Pl(u)} ${Pl(y)} ${Math.abs(f)>180?"1":"0"} ${a.IsDirect()?"1":"0"} ${d}`}throw new Error(`Unsupported curve type: ${r}`)},qQ={X:[1,0,0],Y:[0,1,0],Z:[0,0,1]},sw={YZ:[1,0,0],XZ:[0,1,0],XY:[0,0,1]};class pO{constructor(){this.filters=[]}delete(){this.filters=[]}and(e){return e.forEach(t=>t(this)),this}not(e){const t=new this.constructor;e(t);const r=({element:i})=>!t.shouldKeep(i);return this.filters.push(r),this}either(e){const t=e.map(i=>{const o=new this.constructor;return i(o),o}),r=({element:i})=>t.some(o=>o.shouldKeep(i));return this.filters.push(r),this}find(e,{unique:t=!1}={}){const r=this.applyFilter(e);if(t){if(r.length!==1)throw console.error(r),new Error("Finder has not found a unique solution");return r[0]}return r}}class XQ extends cl{constructor(){const e=Bt();super(new e.Message_ProgressRange_1)}}class $b extends cl{constructor(e){const t=Bt();super(new t.BRepExtrema_DistShapeShape_1),this.wrapped.LoadS1(e.wrapped)}distanceTo(e){this.wrapped.LoadS2(e.wrapped);const t=new XQ;return this.wrapped.Perform(t.wrapped),this.wrapped.Value()}}class mO extends pO{when(e){return this.filters.push(e),this}inList(e){const t=({element:r})=>!!e.find(i=>i.isSame(r));return this.filters.push(t),this}atAngleWith(e="Z",t=0){let r;typeof e=="string"?r=new Tt(qQ[e]):r=new Tt(e);const i=({normal:o})=>{if(!o)return!1;const s=Math.acos(Math.abs(o.dot(r)));return Math.abs(s-Hl*t)<1e-6};return this.filters.push(i),this}atDistance(e,t=[0,0,0]){const r=cw(t),i=new $b(r),o=({element:s})=>Math.abs(i.distanceTo(s)-e)<1e-6;return this.filters.push(o),this}containsPoint(e){return this.atDistance(0,e)}withinDistance(e,t=[0,0,0]){const r=cw(t),i=new $b(r),o=({element:s})=>i.distanceTo(s)-e<1e-6;return this.filters.push(o),this}inBox(e,t){const r=Hr(e,t);return this.inShape(r)}inShape(e){const t=new $b(e),r=({element:i})=>t.distanceTo(i)<1e-6;return this.filters.push(r),this}}class aw extends mO{clone(){const e=new aw;return e.filters=[...this.filters],e}inDirection(e){return this.atAngleWith(e,0)}ofLength(e){const t=({element:r})=>typeof e=="number"?Math.abs(r.length-e)<1e-9:e(r.length);return this.filters.push(t),this}ofCurveType(e){const t=({element:r})=>r.geomType===e;return this.filters.push(t),this}parallelTo(e){if(typeof e=="string"&&sw[e])return this.atAngleWith(sw[e],90);if(typeof e!="string"&&e instanceof Fs)return this.atAngleWith(e.zDir,90);if(typeof e!="string"&&e.normalAt){const t=e.normalAt();return this.atAngleWith(t,90),this}return this}inPlane(e,t){const r=e instanceof Fs?wf(e):wf(e,t);this.parallelTo(r);const i=({element:o})=>{const s=o.startPoint,a=s.projectToPlane(r);return s.equals(a)};return this.filters.push(i),this}shouldKeep(e){let t=null;try{t=e.tangentAt().normalized()}catch(r){console.error("failed to compute a normal",r)}return this.filters.every(r=>r({normal:t,element:e}))}applyFilter(e){return e.edges.filter(t=>this.shouldKeep(t))}}class XA extends mO{clone(){const e=new XA;return e.filters=[...this.filters],e}parallelTo(e){if(typeof e=="string"&&sw[e])return this.atAngleWith(sw[e]);if(typeof e!="string"&&e instanceof Fs)return this.atAngleWith(e.zDir);if(typeof e!="string"&&e.normalAt){const t=e.normalAt();return this.atAngleWith(t),this}return this}ofSurfaceType(e){const t=({element:r})=>r.geomType===e;return this.filters.push(t),this}inPlane(e,t){const r=e instanceof Fs?wf(e):wf(e,t);this.parallelTo(r);const i=({element:o})=>{const s=o.center,a=s.projectToPlane(r);return s.equals(a)};return this.filters.push(i),this}shouldKeep(e){const t=e.normalAt();return this.filters.every(i=>i({normal:t,element:e}))}applyFilter(e){return e.faces.filter(t=>this.shouldKeep(t))}}const YQ=function(n){return n.curves.map((e,t)=>({firstCurve:e,secondCurve:n.curves[(t+1)%n.curves.length],point:e.lastPoint}))},qb=2*Math.PI,kR=n=>{const e=n%qb,t=e<0?e+qb:e;return t<Math.PI?t:t===Math.PI?0:Math.abs(t-qb)};class lw extends pO{clone(){const e=new lw;return e.filters=[...this.filters],e}inList(e){const t=({element:r})=>!!e.find(i=>ws(i,r.point));return this.filters.push(t),this}atDistance(e,t=[0,0]){function r({element:i}){return Math.abs(Au(t,i.point)-e)<1e-9}return this.filters.push(r),this}atPoint(e){function t({element:r}){return ws(e,r.point)}return this.filters.push(t),this}inBox(e,t){const[r,i]=e,[o,s]=t,a=Math.min(r,o),l=Math.max(r,o),u=Math.min(i,s),c=Math.max(i,s);function h({element:f}){const[d,v]=f.point;return d>=a&&d<=l&&v>=u&&v<=c}return this.filters.push(h),this}ofAngle(e){function t({element:r}){const i=r.firstCurve.tangentAt(1),o=r.secondCurve.tangentAt(0);return Math.abs(kR(kQ(i,o))-kR(Hl*e))<1e-9}return this.filters.push(t),this}shouldKeep(e){return this.filters.every(r=>r({normal:null,element:e}))}applyFilter(e){return YQ(e).filter(t=>this.shouldKeep(t))}}const IR=n=>{const e=Bt();return{vertex:e.TopAbs_ShapeEnum.TopAbs_VERTEX,wire:e.TopAbs_ShapeEnum.TopAbs_WIRE,face:e.TopAbs_ShapeEnum.TopAbs_FACE,shell:e.TopAbs_ShapeEnum.TopAbs_SHELL,solid:e.TopAbs_ShapeEnum.TopAbs_SOLID,solidCompound:e.TopAbs_ShapeEnum.TopAbs_COMPSOLID,compound:e.TopAbs_ShapeEnum.TopAbs_COMPOUND,edge:e.TopAbs_ShapeEnum.TopAbs_EDGE,shape:e.TopAbs_ShapeEnum.TopAbs_SHAPE}[n]},ZQ=function*(e,t){const r=Bt(),i=new r.TopExp_Explorer_2(e,IR(t),IR("shape")),o=new Map;for(;i.More();){const s=i.Current(),a=s.HashCode(sO);o.get(a)||(o.set(a,!0),yield s),i.Next()}i.delete()},gO=n=>{if(n.IsNull())throw new Error("This shape has not type, it is null");return n.ShapeType()};class TS extends cl{constructor(e){super(e)}clone(){return new this.constructor($d(this.wrapped))}get hashCode(){return this.wrapped.HashCode(sO)}get isNull(){return this.wrapped.IsNull()}isSame(e){return this.wrapped.IsSame(e.wrapped)}isEqual(e){return this.wrapped.IsEqual(e.wrapped)}simplify(){const e=Bt(),t=new e.ShapeUpgrade_UnifySameDomain_2(this.wrapped,!0,!0,!1);t.Build();const r=fi(t.Shape());if(t.delete(),this.constructor!==r.constructor)throw new Error("unexpected types mismatch");return r}translate(e,t=0,r=0){const i=typeof e=="number"?[e,t,r]:e,o=fi(MQ(this.wrapped,i));if(this.delete(),this.constructor!==o.constructor)throw new Error("unexpected types mismatch");return o}translateX(e){return this.translate([e,0,0])}translateY(e){return this.translate([0,e,0])}translateZ(e){return this.translate([0,0,e])}rotate(e,t=[0,0,0],r=[0,0,1]){const i=fi(bQ(this.wrapped,e,t,r));if(this.delete(),this.constructor!==i.constructor)throw new Error("unexpected types mismatch");return i}mirror(e,t){const r=fi(EQ(this.wrapped,e,t));if(this.delete(),this.constructor!==r.constructor)throw new Error("unexpected types mismatch");return r}scale(e,t=[0,0,0]){const r=fi(AQ(this.wrapped,t,e));if(this.delete(),this.constructor!==r.constructor)throw new Error("unexpected types mismatch");return r}_iterTopo(e){return ZQ(this.wrapped,e)}_listTopo(e){return Array.from(this._iterTopo(e)).map(t=>$d(t))}get edges(){return this._listTopo("edge").map(e=>new kf(e))}get faces(){return this._listTopo("face").map(e=>new Ag(e))}get wires(){return this._listTopo("wire").map(e=>new Gc(e))}get boundingBox(){const e=new _Q;return this.oc.BRepBndLib.Add(this.wrapped,e.wrapped,!0),e}_mesh({tolerance:e=.001,angularTolerance:t=.1}={}){new this.oc.BRepMesh_IncrementalMesh_2(this.wrapped,e,!1,t,!1)}mesh({tolerance:e=.001,angularTolerance:t=.1}={}){this._mesh({tolerance:e,angularTolerance:t});let r=[],i=[],o=[];const s=[];for(const a of this.faces){const l=a.triangulation(i.length/3);if(!l)continue;const{trianglesIndexes:u,vertices:c,verticesNormals:h}=l;s.push({start:r.length,count:u.length,faceId:a.hashCode}),r=r.concat(u),i=i.concat(c),o=o.concat(h)}return{triangles:r,vertices:i,normals:o,faceGroups:s}}meshEdges({tolerance:e=.001,angularTolerance:t=.1}={}){var r;const i=ni(),o=new Set,s=[],a=[],l=()=>{const c=s.length;let h=null;return[f=>{h?(s.push(...h),h=[f.X(),f.Y(),f.Z()],s.push(...h)):h=[f.X(),f.Y(),f.Z()]},f=>{a.push({start:c/3,count:(s.length-c)/3,edgeId:f}),o.add(f)}]},u=i(new this.oc.TopLoc_Location_1);for(const c of this.faces){const h=i(this.oc.BRep_Tool.Triangulation(c.wrapped,u,0));if(h.IsNull())continue;const f=h.get();for(const d of c.edges){if(i(d),o.has(d.hashCode))continue;const v=i(new this.oc.TopLoc_Location_1),y=i(this.oc.BRep_Tool.PolygonOnTriangulation_1(d.wrapped,h,v)),w=(r=y==null?void 0:y.get())==null?void 0:r.Nodes();if(!w)continue;i(w);const[g,x]=l();for(let _=w.Lower();_<=w.Upper();_++){const E=i(i(f.Node(w.Value(_))).Transformed(v.Transformation()));g(E)}x(d.hashCode)}}for(const c of this.edges){i(c);const h=c.hashCode;if(o.has(h))continue;const f=i(new this.oc.BRepAdaptor_Curve_2(c.wrapped)),d=i(new this.oc.GCPnts_TangentialDeflection_2(f,e,t,2,1e-9,1e-7)),[v,y]=l();for(let w=0;w<d.NbPoints();w++){const g=i(d.Value(w+1).Transformed(u.Transformation()));v(g)}y(h)}return{lines:s,edgeGroups:a}}blobSTEP(){const e="blob.step",t=new this.oc.STEPControl_Writer_1;this.oc.Interface_Static.SetIVal("write.step.schema",5),t.Model(!0).delete();const r=new this.oc.Message_ProgressRange_1;t.Transfer(this.wrapped,this.oc.STEPControl_StepModelType.STEPControl_AsIs,!0,r);const i=t.Write(e);if(t.delete(),r.delete(),i===this.oc.IFSelect_ReturnStatus.IFSelect_RetDone){const o=this.oc.FS.readFile("/"+e);return this.oc.FS.unlink("/"+e),new Blob([o],{type:"application/STEP"})}else throw new Error("WRITE STEP FILE FAILED.")}blobSTL({tolerance:e=.001,angularTolerance:t=.1,binary:r=!1}={}){this._mesh({tolerance:e,angularTolerance:t});const i="blob.stl";if(this.oc.StlAPI.Write(this.wrapped,i,!r)){const s=this.oc.FS.readFile("/"+i);return this.oc.FS.unlink("/"+i),new Blob([s],{type:"application/sla"})}else throw new Error("WRITE STL FILE FAILED.")}}class vO extends TS{}class yO extends TS{get repr(){const{startPoint:e,endPoint:t}=this,r=`start: (${this.startPoint.repr}) end:(${this.endPoint.repr})`;return e.delete(),t.delete(),r}get curve(){return new KQ(this._geomAdaptor())}get startPoint(){return this.curve.startPoint}get endPoint(){return this.curve.endPoint}tangentAt(e=0){return this.curve.tangentAt(e)}pointAt(e=0){return this.curve.pointAt(e)}get isClosed(){return this.curve.isClosed}get isPeriodic(){return this.curve.isPeriodic}get period(){return this.curve.period}get geomType(){return this.curve.curveType}get length(){const e=new this.oc.GProp_GProps_1;this.oc.BRepGProp.LinearProperties(this.wrapped,e,!0,!1);const t=e.Mass();return e.delete(),t}get orientation(){return this.wrapped.Orientation_1()===this.oc.TopAbs_Orientation.TopAbs_FORWARD?"forward":"backward"}}class KQ extends cl{get repr(){const{startPoint:e,endPoint:t}=this,r=`start: (${this.startPoint.repr}) end:(${this.endPoint.repr}}`;return e.delete(),t.delete(),r}get curveType(){const e=this.wrapped.GetType&&this.wrapped.GetType();return I1(e)}get startPoint(){const e=this.wrapped.Value(this.wrapped.FirstParameter());return new Tt(e)}get endPoint(){const e=this.wrapped.Value(this.wrapped.LastParameter());return new Tt(e)}_mapParameter(e){const t=this.wrapped.FirstParameter(),r=this.wrapped.LastParameter();return t+(r-t)*e}pointAt(e=.5){return new Tt(this.wrapped.Value(this._mapParameter(e)))}tangentAt(e=.5){const t=this._mapParameter(e),r=new this.oc.gp_Pnt_1,i=new this.oc.gp_Vec_1;this.wrapped.D1(t,r,i);const o=new Tt(i);return r.delete(),i.delete(),o}get isClosed(){return this.wrapped.IsClosed()}get isPeriodic(){return this.wrapped.IsPeriodic()}get period(){return this.wrapped.Period()}}class kf extends yO{_geomAdaptor(){return new this.oc.BRepAdaptor_Curve_2(this.wrapped)}}class Gc extends yO{_geomAdaptor(){return new this.oc.BRepAdaptor_CompCurve_2(this.wrapped,!1)}offset2D(e,t="arc"){const r={arc:this.oc.GeomAbs_JoinType.GeomAbs_Arc,intersection:this.oc.GeomAbs_JoinType.GeomAbs_Intersection,tangent:this.oc.GeomAbs_JoinType.GeomAbs_Tangent},i=new this.oc.BRepOffsetAPI_MakeOffset_3(this.wrapped,r[t],!1);i.Perform(e,0);const o=fi(i.Shape());if(i.delete(),this.delete(),!(o instanceof Gc))throw new Error("Could not offset with a wire");return o}}class JQ extends cl{get surfaceType(){const e=this.oc.GeomAbs_SurfaceType,r=new Map([[e.GeomAbs_Plane,"PLANE"],[e.GeomAbs_Cylinder,"CYLINDRE"],[e.GeomAbs_Cone,"CONE"],[e.GeomAbs_Sphere,"SPHERE"],[e.GeomAbs_Torus,"TORUS"],[e.GeomAbs_BezierSurface,"BEZIER_SURFACE"],[e.GeomAbs_BSplineSurface,"BSPLINE_SURFACE"],[e.GeomAbs_SurfaceOfRevolution,"REVOLUTION_SURFACE"],[e.GeomAbs_SurfaceOfExtrusion,"EXTRUSION_SURFACE"],[e.GeomAbs_OffsetSurface,"OFFSET_SURFACE"],[e.GeomAbs_OtherSurface,"OTHER_SURFACE"]]).get(this.wrapped.GetType());if(!r)throw new Error("surface type not found");return r}}class Ag extends TS{_geomAdaptor(){return new this.oc.BRepAdaptor_Surface_2(this.wrapped,!1)}get surface(){return new JQ(this._geomAdaptor())}get orientation(){return this.wrapped.Orientation_1()===this.oc.TopAbs_Orientation.TopAbs_FORWARD?"forward":"backward"}get geomType(){const e=this.surface,t=e.surfaceType;return e.delete(),t}get UVBounds(){const e={current:0},t={current:0},r={current:0},i={current:0};return this.oc.BRepTools.UVBounds_1(this.wrapped,e,t,r,i),{uMin:e.current,uMax:t.current,vMin:r.current,vMax:i.current}}pointOnSurface(e,t){const{uMin:r,uMax:i,vMin:o,vMax:s}=this.UVBounds,a=this._geomAdaptor(),l=new this.oc.gp_Pnt_1,u=e*(i-r)+r,c=t*(s-o)+o;a.D0(u,c,l);const h=new Tt(l);return a.delete(),l.delete(),h}normalAt(e){let t=0,r=0;const i=ni();if(e){const u=i(this.oc.BRep_Tool.Surface_2(this.wrapped)),c=i(new this.oc.GeomAPI_ProjectPointOnSurf_2(i(al(e)),u,this.oc.Extrema_ExtAlgo.Extrema_ExtAlgo_Grad)),h={current:0},f={current:0};c.LowerDistanceParameters(h,f),t=h.current,r=f.current}else{const{uMin:u,uMax:c,vMin:h,vMax:f}=this.UVBounds;t=.5*(u+c),r=.5*(h+f)}const o=i(new this.oc.gp_Pnt_1),s=i(new this.oc.gp_Vec_1);return i(new this.oc.BRepGProp_Face_2(this.wrapped,!1)).Normal(t,r,o,s),new Tt(s)}get center(){const e=new this.oc.GProp_GProps_1;this.oc.BRepGProp.SurfaceProperties_2(this.wrapped,e,1e-7,!0);const t=new Tt(e.CentreOfMass());return e.delete(),t}outerWire(){const e=new Gc(this.oc.BRepTools.OuterWire(this.wrapped));return this.delete(),e}innerWires(){const e=this.clone().outerWire(),t=this.wires.filter(r=>!e.isSame(r));return e.delete(),this.delete(),t}triangulation(e=0){const t=ni(),r=t(new this.oc.TopLoc_Location_1),i=t(this.oc.BRep_Tool.Triangulation(this.wrapped,r,0));if(i.IsNull())return null;const o=t(r.Transformation()),s={vertices:[],trianglesIndexes:[],verticesNormals:[]},a=i.get(),l=a.NbNodes();s.vertices=new Array(l*3);for(let v=1;v<=l;v++){const y=t(t(a.Node(v)).Transformed(o));s.vertices[(v-1)*3+0]=y.X(),s.vertices[(v-1)*3+1]=y.Y(),s.vertices[(v-1)*3+2]=y.Z()}const u=t(new this.oc.TColgp_Array1OfDir_2(1,l)),c=t(new this.oc.Poly_Connect_2(i));this.oc.StdPrs_ToolTriangulatedShape.Normal(this.wrapped,c,u),s.verticesNormals=new Array(u.Length()*3);for(let v=u.Lower();v<=u.Upper();v++){const y=t(t(u.Value(v)).Transformed(o));s.verticesNormals[(v-1)*3+0]=y.X(),s.verticesNormals[(v-1)*3+1]=y.Y(),s.verticesNormals[(v-1)*3+2]=y.Z()}const h=this.orientation,f=a.NbTriangles();s.trianglesIndexes=new Array(f*3);let d=0;for(let v=1;v<=f;v++){const y=t(a.Triangle(v));let w=y.Value(1),g=y.Value(2);const x=y.Value(3);if(h==="backward"){const _=w;w=g,g=_}s.trianglesIndexes[d*3+0]=w-1+e,s.trianglesIndexes[d*3+1]=g-1+e,s.trianglesIndexes[d*3+2]=x-1+e,d++}return s}}class CS extends TS{fuse(e,{optimisation:t="none"}={}){const r=ni(),i=r(new this.oc.Message_ProgressRange_1),o=r(new this.oc.BRepAlgoAPI_Fuse_3(this.wrapped,e.wrapped,i));t==="commonFace"&&o.SetGlue(this.oc.BOPAlgo_GlueEnum.BOPAlgo_GlueShift),t==="sameFace"&&o.SetGlue(this.oc.BOPAlgo_GlueEnum.BOPAlgo_GlueFull),o.Build(i),o.SimplifyResult(!0,!0,.001);const s=fi(o.Shape());if(!wc(s))throw new Error("Could not fuse as a 3d shape");return s}cut(e,{optimisation:t="none"}={}){const r=ni(),i=r(new this.oc.Message_ProgressRange_1),o=r(new this.oc.BRepAlgoAPI_Cut_3(this.wrapped,e.wrapped,i));t==="commonFace"&&o.SetGlue(this.oc.BOPAlgo_GlueEnum.BOPAlgo_GlueShift),t==="sameFace"&&o.SetGlue(this.oc.BOPAlgo_GlueEnum.BOPAlgo_GlueFull),o.Build(i),o.SimplifyResult(!0,!0,.001);const s=fi(o.Shape());if(!wc(s))throw new Error("Could not cut as a 3d shape");return s}intersect(e){const t=ni(),r=t(new this.oc.Message_ProgressRange_1),i=t(new this.oc.BRepAlgoAPI_Common_3(this.wrapped,e.wrapped,r));i.Build(r),i.SimplifyResult(!0,!0,.001);const o=fi(i.Shape());if(!wc(o))throw new Error("Could not intersect as a 3d shape");return o}shell(e,t=null,r=.001){const i=typeof t=="number"?t:r;let o,s;if(typeof e=="number"){s=e;const d=new XA;o=typeof t=="function"?t(d):d}else s=e.thickness,o=e.filter;const a=ni(),l=o.find(this),u=a(new this.oc.TopTools_ListOfShape_1);l.forEach(d=>{u.Append_1(d.wrapped)});const c=a(new this.oc.Message_ProgressRange_1),h=a(new this.oc.BRepOffsetAPI_MakeThickSolid);h.MakeThickSolidByJoin(this.wrapped,u,-s,i,this.oc.BRepOffset_Mode.BRepOffset_Skin,!1,!1,this.oc.GeomAbs_JoinType.GeomAbs_Arc,!1,c);const f=fi(h.Shape());if(!wc(f))throw new Error("Could not shell as a 3d shape");return f}_builderIter(e,t){if(typeof e=="number"){let s=0;for(const a of this._iterTopo("edge"))t(e,$d(a)),s+=1;return s}let r,i=null;typeof e=="function"?r=e:(r=s=>e.filter.shouldKeep(s)?e.radius||1:0,e.filter&&!e.keep&&(i=()=>e.filter.delete()));let o=0;for(const s of this._iterTopo("edge")){const a=$d(s),l=new kf(a),u=r(l);u&&(t(u,a),o+=1),l.delete()}return i&&i(),o}fillet(e,t){const i=ni()(new this.oc.BRepFilletAPI_MakeFillet(this.wrapped,this.oc.ChFi3d_FilletShape.ChFi3d_Rational));let o=e;if(typeof e=="number"&&t&&(o={radius:e,filter:t(new aw)}),!this._builderIter(o,(l,u)=>i.Add_2(l,u)))throw new Error("Could not fillet, no edge was selected");const a=fi(i.Shape());if(!wc(a))throw new Error("Could not fillet as a 3d shape");return a}chamfer(e,t){const i=ni()(new this.oc.BRepFilletAPI_MakeChamfer(this.wrapped));let o=e;if(typeof e=="number"&&t&&(o={radius:e,filter:t(new aw)}),!this._builderIter(o,(l,u)=>i.Add_2(l,u)))throw new Error("Could not chamfer, no edge was selected");const a=fi(i.Shape());if(!wc(a))throw new Error("Could not chamfer as a 3d shape");return a}}class xO extends CS{}class op extends CS{}class wO extends CS{}class SO extends CS{}function wc(n){return n instanceof xO||n instanceof op||n instanceof wO||n instanceof SO}function NR(n){return n instanceof Gc}function $d(n){const e=Bt(),t=e.TopAbs_ShapeEnum,r=new Map([[t.TopAbs_EDGE,e.TopoDS.Edge_1],[t.TopAbs_WIRE,e.TopoDS.Wire_1],[t.TopAbs_FACE,e.TopoDS.Face_1],[t.TopAbs_SHELL,e.TopoDS.Shell_1],[t.TopAbs_SOLID,e.TopoDS.Solid_1],[t.TopAbs_COMPSOLID,e.TopoDS.CompSolid_1],[t.TopAbs_COMPOUND,e.TopoDS.Compound_1]]),i=gO(n),o=r.get(i);if(!o)throw new Error("Could not find a wrapper for this shape type");return o(n)}function fi(n){const t=Bt().TopAbs_ShapeEnum,i=new Map([[t.TopAbs_VERTEX,vO],[t.TopAbs_EDGE,kf],[t.TopAbs_WIRE,Gc],[t.TopAbs_FACE,Ag],[t.TopAbs_SHELL,xO],[t.TopAbs_SOLID,op],[t.TopAbs_COMPSOLID,wO],[t.TopAbs_COMPOUND,SO]]).get(gO(n));if(!i)throw new Error("Could not find a wrapper for this shape type");return new i($d(n))}const _O=(n,e)=>{const t=Bt();return new kf(new t.BRepBuilderAPI_MakeEdge_3(al(n),al(e)).Edge())},QQ=(n,e=[0,0,0],t=[0,0,1])=>{const r=Bt(),[i,o]=to(),s=i(AS(e,t)),a=i(new r.gp_Circ_2(s,n)),l=i(new r.BRepBuilderAPI_MakeEdge_8(a)),u=new kf(l.Edge());return o(),u},eee=(n,e,t,r=[0,0,0],i=[0,0,1],o=!1)=>{const s=Bt(),[a,l]=to();let u=2*Math.PI;o&&(u=-2*Math.PI);const c=a(new s.Geom2d_Line_3(a(new s.gp_Pnt2d_3(0,0)),a(new s.gp_Dir2d_4(u,n)))),h=e/n,f=c.Value(0),d=c.Value(h*Math.sqrt((2*Math.PI)**2+n**2)),v=a(new s.GCE2d_MakeSegment_1(f,d)),y=new s.Geom_CylindricalSurface_1(a(e1(r,i)),t),w=a(new s.BRepBuilderAPI_MakeEdge_30(a(new s.Handle_Geom2d_Curve_2(v.Value().get())),a(new s.Handle_Geom_Surface_2(y)))).Edge(),g=a(new s.BRepBuilderAPI_MakeWire_2(w)).Wire();return s.BRepLib.BuildCurves3d_2(g),l(),new Gc(g)},t1=n=>{const e=Bt(),t=new e.BRepBuilderAPI_MakeWire_1;n.forEach(s=>{s instanceof kf&&t.Add_1(s.wrapped),s instanceof Gc&&t.Add_2(s.wrapped)});const r=new e.Message_ProgressRange_1;t.Build(r);const i=t.Error();if(i!==e.BRepBuilderAPI_WireError.BRepBuilderAPI_WireDone){const s=new Map([[e.BRepBuilderAPI_WireError.BRepBuilderAPI_EmptyWire,"empty wire"],[e.BRepBuilderAPI_WireError.BRepBuilderAPI_NonManifoldWire,"non manifold wire"],[e.BRepBuilderAPI_WireError.BRepBuilderAPI_DisconnectedWire,"disconnected wire"]]);throw new Error(`Failed to build the wire, ${s.get(i)||"unknown error"}`)}const o=new Gc(t.Wire());return t.delete(),r.delete(),o},px=(n,e)=>{const t=Bt(),r=new t.BRepBuilderAPI_MakeFace_15(n.wrapped,!1);if(e==null||e.forEach(o=>{r.Add(o.wrapped)}),!r.IsDone())throw r.delete(),new Error("Failed to build the face. Your wire might be non planar.");const i=r.Face();return r.delete(),new Ag(i)},tee=(n,e)=>{const t=Bt(),[r,i]=to(),o=r(t.BRep_Tool.Surface_2(n.wrapped)),a=r(new t.BRepBuilderAPI_MakeFace_21(o,e.wrapped,!0)).Face();return i(),new Ag(a)},uw=(n,e,t=[0,0,0],r=[0,0,1])=>{const i=Bt(),o=AS(t,r),s=new i.BRepPrimAPI_MakeCylinder_3(o,n,e),a=new op(s.Shape());return o.delete(),s.delete(),a},nee=n=>{const e=Bt(),t=new e.BRepPrimAPI_MakeSphere_1(n),r=new op(t.Shape());return t.delete(),r};class ree extends cl{constructor(e,t,r){const i=Bt(),o=ni(),s=Math.sqrt(e*t/r),a=e/s,l=t/s,u=new i.gp_GTrsf_1;u.SetAffinity_1(uv([0,0,0],[0,1,0]),a);const c=o(new i.gp_GTrsf_1);c.SetAffinity_1(uv([0,0,0],[0,0,1]),s);const h=o(new i.gp_GTrsf_1);h.SetAffinity_1(uv([0,0,0],[1,0,0]),l),u.Multiply(c),u.Multiply(h),super(u)}applyToPoint(e){const t=Bt(),i=ni()(e.XYZ());return this.wrapped.Transforms_1(i),new t.gp_Pnt_2(i)}}function iee(n){const e=[];for(let t=n.LowerRow();t<=n.UpperRow();t++){const r=[];e.push(r);for(let i=n.LowerCol();i<=n.UpperCol();i++){const o=n.Value(t,i);r.push(o)}}return e}const oee=(n,e,t)=>{const r=Bt(),i=ni(),o=i(new r.gp_Sphere_1);o.SetRadius(1);const s=i(new r.Geom_SphericalSurface_2(o)),a=r.GeomConvert.SurfaceToBSplineSurface(s.UReversed()).get(),l=iee(a.Poles_2()),u=new ree(n,e,t);l.forEach((h,f)=>{h.forEach((d,v)=>{const y=u.applyToPoint(d);a.SetPole_1(f+1,v+1,y)})});const c=fi(i(new r.BRepBuilderAPI_MakeShell_2(a.UReversed(),!1)).Shell());return YA([c])},Hr=(n,e)=>{const t=Bt(),r=new t.BRepPrimAPI_MakeBox_4(al(n),al(e)),i=new op(r.Solid());return r.delete(),i},cw=n=>{const e=Bt(),t=al(n),r=new e.BRepBuilderAPI_MakeVertex(t),i=r.Vertex();return r.delete(),new vO(i)},Tu=n=>{const e=Bt(),t=new e.TopoDS_Builder,r=new e.TopoDS_Compound;return t.MakeCompound(r),n.forEach(o=>{t.Add(r,o.wrapped),o.delete()}),fi(r)},Lh=Tu;function see(n){const e=Bt(),t=ni(),r=t(new e.BRepBuilderAPI_Sewing(1e-6,!0,!0,!0,!1));return n.forEach(({wrapped:i})=>{r.Add(i)}),r.Perform(t(new e.Message_ProgressRange_1)),fi($d(r.SewedShape()))}function YA(n){const e=ni(),t=Bt(),r=see(n),i=fi(e(new t.ShapeFix_Solid_1).SolidFromShell(r.wrapped));if(!(i instanceof op))throw new Error("Could not make a solid of faces and shells");return i}const bO=(n,e)=>{const t=Bt(),[r,i]=to(),o=r(new t.BRepBuilderAPI_MakeFace_2(n.wrapped));e.forEach(u=>{o.Add(u.wrapped)});const s=r(o.Face()),a=r(new t.ShapeFix_Face_2(s));a.FixOrientation_1();const l=a.Face();return i(),new Ag(l)},aee=n=>n==="symmetric"||typeof n=="number"||Array.isArray(n)&&n.length===2,lee=n=>{let e;n?aee(n)?e={endTangent:n}:e={endTangent:0,...n}:e={endTangent:[1,0]};const{endTangent:t,startFactor:r=1,endFactor:i=1,startTangent:o}=e;let s;typeof t=="number"?s=Rm(1,t*Hl):s=t;let a;return typeof o=="number"?a=Rm(1,o*Hl):a=o,{endTangent:s,startFactor:r,endFactor:i,startTangent:a}};function FR(n,e,t,r){const i=n*t+e*r,o=Math.sqrt((n*n+e*e)*(t*t+r*r));let s=Math.acos(i/o);return n*r-e*t<0&&(s=-s),s}function uee([n,e],[t,r],i,o,s,a,l){const u=Math.PI*2;if(i<0&&(i=-i),o<0&&(o=-o),i==0||o==0)throw Error("rx and ry can not be 0");const c=Math.sin(s),h=Math.cos(s),f=(n-t)/2,d=(e-r)/2,v=(n+t)/2,y=(e+r)/2,w=h*f+c*d,g=h*d-c*f,x=w*w/(i*i)+g*g/(o*o);x>1&&(i=i*Math.sqrt(x),o=o*Math.sqrt(x));const _=i*o,E=i*g,C=o*w,I=E*E+C*C;if(!I)throw Error("start point can not be same as end point");let R=Math.sqrt(Math.abs((_*_-I)/I));a==l&&(R=-R);const L=R*E/o,k=-R*C/i,D=h*L-c*k+v,N=c*L+h*k+y,B=(w-L)/i,G=(w+L)/i,V=(g-k)/o,$=(g+k)/o,J=FR(1,0,B,V);let le=FR(B,V,-G,-$);for(;le>u;)le-=u;for(;le<0;)le+=u;l||(le-=u);let H=J+le;for(;H>u;)H-=u;for(;H<0;)H+=u;return{cx:D,cy:N,startAngle:J,deltaAngle:le,endAngle:H,clockwise:!!l,rx:i,ry:o}}const MO=(n,e)=>{const t=Bt(),r=new t.BRepPrimAPI_MakePrism_1(n.wrapped,e.wrapped,!1,!0),i=new op($d(r.Shape()));return r.delete(),i},EO=(n,e=[0,0,0],t=[0,0,1],r=360)=>{const i=Bt(),o=uv(e,t),s=new i.BRepPrimAPI_MakeRevol_1(n.wrapped,o,r*Hl,!1),a=fi(s.Shape());if(o.delete(),s.delete(),!wc(a))throw new Error("Could not revolve to a 3d shape");return a};function n1(n,e,{frenet:t=!1,auxiliarySpine:r,law:i=null,transitionMode:o="right",withContact:s,support:a,forceProfileSpineOthogonality:l}={},u=!1){const c=Bt(),h=o==="round"?!0:!!l,f=new c.BRepOffsetAPI_MakePipeShell(e.wrapped);if(o){const y={transformed:c.BRepBuilderAPI_TransitionMode.BRepBuilderAPI_Transformed,round:c.BRepBuilderAPI_TransitionMode.BRepBuilderAPI_RoundCorner,right:c.BRepBuilderAPI_TransitionMode.BRepBuilderAPI_RightCorner}[o];y&&f.SetTransitionMode(y)}a?f.SetMode_4(a):t&&f.SetMode_1(t),r&&f.SetMode_5(r.wrapped,!1,c.BRepFill_TypeOfContact.BRepFill_NoContact),i?f.SetLaw_1(n.wrapped,i,!!s,h):f.Add_1(n.wrapped,!!s,h);const d=new c.Message_ProgressRange_1;f.Build(d),u||f.MakeSolid();const v=fi(f.Shape());if(!wc(v))throw new Error("Could not sweep to a 3d shape");if(u){const y=fi(f.FirstShape()),w=fi(f.LastShape());if(!NR(y))throw new Error("Could not sweep with one start wire");if(!NR(w))throw new Error("Could not sweep with one end wire");return f.delete(),[v,y,w]}return f.delete(),d.delete(),v}const AO=(n,{profile:e,endFactor:t=1})=>{let r;const i=Bt();if(e==="s-curve")r=new i.Law_S,r.Set_1(0,1,n,t);else if(e==="linear")r=new i.Law_Linear,r.Set(0,1,n,t);else throw new Error("Could not generate a law function");return r.Trim(0,n,1e-6)};function TO(n,e,t,r,i=!1){const o=new Tt(e),s=new Tt(t),a=_O(o,o.add(s)),l=t1([a]),u=r?AO(s.Length,r):null;return i?n1(n,l,{law:u},i):n1(n,l,{law:u},i)}function CO(n,e,t,r,i,o=!1){const s=new Tt(t),a=new Tt(r),l=_O(s,s.add(a)),u=t1([l]),c=360/e*a.Length,h=1,f=eee(c,a.Length,h,t,r),d=i?AO(a.Length,i):null;return o?n1(n,u,{auxiliarySpine:f,law:d},o):n1(n,u,{auxiliarySpine:f,law:d},o)}const cee=(n,{ruled:e=!0,startPoint:t,endPoint:r}={},i=!1)=>{const o=Bt(),[s,a]=to(),l=s(new o.BRepOffsetAPI_ThruSections(!i,e,1e-6));t&&l.AddVertex(s(cw(t)).wrapped),n.forEach(h=>l.AddWire(h.wrapped)),r&&l.AddVertex(s(cw(r)).wrapped);const u=s(new o.Message_ProgressRange_1);l.Build(u);const c=fi(l.Shape());if(a(),!wc(c))throw new Error("Could not loft to a 3d shape");return c};class gg{constructor(e,{defaultOrigin:t=[0,0,0],defaultDirection:r=[0,0,1]}={}){this.wire=e,this.defaultOrigin=t,this.defaultDirection=r,this.baseFace=null}get baseFace(){return this._baseFace}set baseFace(e){e?this._baseFace=e.clone():this._baseFace=e}delete(){this.wire.delete(),this._defaultOrigin.delete(),this._defaultDirection.delete(),this.baseFace&&this.baseFace.delete()}clone(){const e=new gg(this.wire.clone(),{defaultOrigin:this.defaultOrigin,defaultDirection:this.defaultDirection});return this.baseFace&&(e.baseFace=this.baseFace.clone()),e}get defaultOrigin(){return this._defaultOrigin}set defaultOrigin(e){this._defaultOrigin=new Tt(e)}get defaultDirection(){return this._defaultDirection}set defaultDirection(e){this._defaultDirection=new Tt(e)}face(){let e;return this.baseFace?e=tee(this.baseFace,this.wire):e=px(this.wire),e}wires(){return this.wire.clone()}faces(){return this.face()}revolve(e,{origin:t}={}){const r=px(this.wire),i=EO(r,t||this.defaultOrigin,e);return r.delete(),this.delete(),i}extrude(e,{extrusionDirection:t,extrusionProfile:r,twistAngle:i,origin:o}={}){const[s,a]=to(),l=s(new Tt(t||this.defaultDirection).normalized().multiply(e));if(r&&!i){const h=TO(this.wire,o||this.defaultOrigin,l,r);return a(),this.delete(),h}if(i){const h=CO(this.wire,i,o||this.defaultOrigin,l,r);return a(),this.delete(),h}const u=px(this.wire),c=MO(u,l);return a(),this.delete(),c}sweepSketch(e,t={}){const r=this.wire.startPoint,i=this.wire.tangentAt(1e-9).multiply(-1).normalize(),o=i.cross(this.defaultDirection).multiply(-1),s=e(new Fs(r,o,i),r),a={forceProfileSpineOthogonality:!0,...t};this.baseFace&&(a.support=this.baseFace.wrapped);const l=n1(s.wire,this.wire,a);return this.delete(),l}loftWith(e,t={},r=!1){const i=Array.isArray(e)?[this,...e]:[this,e],o=cee(i.map(s=>s.wire),t,r);return i.forEach(s=>s.delete()),o}}const hee=n=>{const e=Bt(),t=new e.Bnd_Box2d;return n.forEach(r=>{e.BndLib_Add2dCurve.Add_3(r.wrapped,1e-6,t)}),new N1(t)};function fee(n,e){const[t,r]=to(),i=t(AS(e.origin,e.zDir,e.xDir)),o=Bt(),s=n.map(a=>{const l=o.GeomLib.To3d(i,a.wrapped);return new kf(new o.BRepBuilderAPI_MakeEdge_24(l).Edge())});return r(),s}const dee=(n,e)=>{const[t,r]=to(),i=Bt(),o=n.map(s=>{const a=t(new i.BRepBuilderAPI_MakeEdge_30(s.wrapped,e));return new kf(a.Edge())});return r(),o},PO=(n,e)=>{const t=Bt();return n.map(i=>e?new Ni(t.GeomLib.GTransform(i.wrapped,e)):i.clone())};class O1 extends cl{transformCurves(e){return PO(e,this.wrapped)}}const LO=(n,e,t=[0,0])=>{const r=Bt(),i=pg(t,e),o=new r.gp_GTrsf2d_1;return o.SetAffinity(i,n),i.delete(),new O1(o)},pee=n=>{const e=Bt(),[t,r]=to(),i=new e.gp_Trsf2d_1;i.SetTranslation_1(t(uO(n)));const o=new e.gp_GTrsf2d_2(i);return r(),new O1(o)},mee=(n,e=[0,0],t="center")=>{const r=Bt(),[i,o]=to(),s=new r.gp_Trsf2d_1;t==="center"?s.SetMirror_1(i(Xo(n))):s.SetMirror_2(i(pg(e,n)));const a=new r.gp_GTrsf2d_2(s);return o(),new O1(a)},gee=(n,e=[0,0])=>{const t=Bt(),[r,i]=to(),o=new t.gp_Trsf2d_1;o.SetRotation(r(Xo(e)),n);const s=new t.gp_GTrsf2d_2(o);return i(),new O1(s)},vee=(n,e=[0,0])=>{const t=Bt(),[r,i]=to(),o=new t.gp_Trsf2d_1;o.SetScale(r(Xo(e)),n);const s=new t.gp_GTrsf2d_2(o);return i(),new O1(s)};function yee(n,e,t="original"){const[r,i]=to(),o=Bt();let s=r(o.BRep_Tool.Surface_2(e.wrapped));const a=e.UVBounds;let l=null;const u=r(pg([0,0],[0,1])),c=r(pg([0,0],[1,0]));if(t==="original"&&e.geomType!=="PLANE"){if(e.geomType!=="CYLINDRE")throw new Error("Only planar and cylidrical faces can be unwrapped for sketching");const d=r(s.get().Cylinder());d.Direct()||(s=s.get().UReversed());const v=d.Radius();l=LO(1/v,[0,1]).wrapped}if(t==="bounds"){if(l=r(new o.gp_GTrsf2d_1),l.SetAffinity(u,a.uMax-a.uMin),a.uMin!==0){const v=r(new o.gp_GTrsf2d_1);v.SetTranslationPart(new o.gp_XY_2(0,-a.uMin)),l.Multiply(v)}const d=r(new o.gp_GTrsf2d_1);if(d.SetAffinity(c,a.vMax-a.vMin),l.Multiply(d),a.vMin!==0){const v=r(new o.gp_GTrsf2d_1);v.SetTranslationPart(r(new o.gp_XY_2(0,-a.vMin))),l.Multiply(v)}}const h=PO(n,l),f=dee(h,s);return i(),f}const PS=(n,e=1)=>{const t=n.bounds[0][0]-e,r=-n.bounds[1][1]-e;return`${t} ${r} ${n.width+2*e} ${n.height+2*e}`},ZA=(n,e,t=1)=>`<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="${PS(e,t)}" fill="none" stroke="black" stroke-width="0.6%" vector-effect="non-scaling-stroke">
    ${n}
</svg>`;class nr{constructor(e){this.curves=e,this._boundingBox=null,this._orientation=null,this._guessedOrientation=null}delete(){this.curves.forEach(e=>e.delete()),this._boundingBox&&this._boundingBox.delete()}clone(){return new nr(this.curves)}get repr(){return["Blueprint",...this.curves.map(e=>e.repr)].join(`
`)}get boundingBox(){return this._boundingBox||(this._boundingBox=hee(this.curves)),this._boundingBox}get orientation(){if(this._orientation)return this._orientation;if(this._guessedOrientation)return this._guessedOrientation;const e=this.curves.flatMap(r=>r.geomType!=="LINE"?[r.firstPoint,r.value(.5)]:[r.firstPoint]),t=e.map((r,i)=>{const o=e[(i+1)%e.length];return(o[0]-r[0])*(o[1]+r[1])}).reduce((r,i)=>r+i,0);return this._guessedOrientation=t>0?"clockwise":"counterClockwise",this._guessedOrientation}stretch(e,t,r=[0,0]){const i=LO(e,t,r).transformCurves(this.curves);return new nr(i)}scale(e,t){const r=t||this.boundingBox.center,i=vee(e,r).transformCurves(this.curves);return new nr(i)}rotate(e,t){const r=gee(e*Hl,t).transformCurves(this.curves);return new nr(r)}translate(e,t=0){const r=rw(e)?e:[e,t],i=pee(r).transformCurves(this.curves);return new nr(i)}mirror(e,t=[0,0],r="center"){const i=mee(e,t,r).transformCurves(this.curves);return new nr(i)}sketchOnPlane(e,t){const r=e instanceof Fs?wf(e):wf(e,t),i=fee(this.curves,r),o=t1(i);return new gg(o,{defaultOrigin:r.origin,defaultDirection:r.zDir})}sketchOnFace(e,t){const r=Bt(),i=yee(this.curves,e,t),o=t1(i);r.BRepLib.BuildCurves3d_2(o.wrapped);const s=new r.ShapeFix_Wire_2(o.wrapped,e.wrapped,1e-9);s.FixEdgeCurves(),s.delete();const a=new gg(o);if(o.isClosed){const l=a.clone().face();a.defaultOrigin=l.pointOnSurface(.5,.5),a.defaultDirection=l.normalAt(),l.orientation!==e.orientation&&(a.defaultDirection=a.defaultDirection.multiply(-1)),a.baseFace=e}else{const l=o.startPoint;a.defaultOrigin=l,a.defaultDirection=e.normalAt(l),a.baseFace=e}return a}toSVGPathD(){const e=ni(),t=this.clone().mirror([1,0],[0,0],"plane"),i=ow(t.curves).flatMap(a=>$Q(e(a.adaptor()),a.lastPoint)),[o,s]=t.curves[0].firstPoint;return`M ${Pl(o)} ${Pl(s)} ${i.join(" ")}${t.isClosed()?" Z":""}`}toSVGPath(){return`<path d="${this.toSVGPathD()}" />`}toSVGViewBox(e=1){return PS(this.boundingBox,e)}toSVGPaths(){return[this.toSVGPathD()]}toSVG(e=1){return ZA(this.toSVGPath(),this.boundingBox,e)}get firstPoint(){return this.curves[0].firstPoint}get lastPoint(){return this.curves[this.curves.length-1].lastPoint}isInside(e){if(!this.boundingBox.containsPoint(e))return!1;const t=Bt(),r=new t.Geom2dAPI_InterCurveCurve_1,i=D1(e,this.boundingBox.outsidePoint());let o=0;return this.curves.find(a=>a.isOnCurve(e))?!1:(this.curves.forEach(a=>{a.boundingBox.isOut(i.boundingBox)||(r.Init_1(i.wrapped,a.wrapped,1e-9),o+=r.NbPoints())}),r.delete(),!!(o%2))}isClosed(){return ws(this.firstPoint,this.lastPoint)}intersects(e){const t=Bt(),r=new t.Geom2dAPI_InterCurveCurve_1;if(this.boundingBox.isOut(e.boundingBox))return!1;for(const i of this.curves)for(const o of e.curves)if(!i.boundingBox.isOut(o.boundingBox)&&(r.Init_1(i.wrapped,o.wrapped,1e-9),r.NbPoints()||r.NbSegments()))return!0;return r.delete(),!1}}class xee{constructor(e=[0,0]){this.pointer=e,this.firstPoint=e,this._nextCorner=null,this.pendingCurves=[]}_convertToUV([e,t]){return[e,t]}_convertFromUV([e,t]){return[e,t]}movePointerTo(e){if(this.pendingCurves.length)throw new Error("You can only move the pointer if there is no curve defined");return this.pointer=e,this.firstPoint=e,this}saveCurve(e){if(!this._nextCorner){this.pendingCurves.push(e);return}const t=this.pendingCurves.pop();if(!t)throw new Error("bug in the custom corner algorithm");const r=this._nextCorner.mode==="chamfer"?yE:vE;this.pendingCurves.push(...r(t,e,this._nextCorner.radius)),this._nextCorner=null}lineTo(e){const t=D1(this._convertToUV(this.pointer),this._convertToUV(e));return this.pointer=e,this.saveCurve(t),this}line(e,t){return this.lineTo([this.pointer[0]+e,this.pointer[1]+t])}vLine(e){return this.line(0,e)}hLine(e){return this.line(e,0)}vLineTo(e){return this.lineTo([this.pointer[0],e])}hLineTo(e){return this.lineTo([e,this.pointer[1]])}polarLineTo([e,t]){const r=t*Hl,i=Rm(e,r);return this.lineTo(i)}polarLine(e,t){const r=t*Hl,[i,o]=Rm(e,r);return this.line(i,o)}tangentLine(e){const t=this.pendingCurves.length?this.pendingCurves[this.pendingCurves.length-1]:null;if(!t)throw new Error("You need a previous curve to sketch a tangent line");const r=Xh(this._convertFromUV(t.tangentAt(1)));return this.line(r[0]*e,r[1]*e)}threePointsArcTo(e,t){return this.saveCurve(mE(this._convertToUV(this.pointer),this._convertToUV(t),this._convertToUV(e))),this.pointer=e,this}threePointsArc(e,t,r,i){const[o,s]=this.pointer;return this.threePointsArcTo([o+e,s+t],[o+r,s+i])}sagittaArcTo(e,t){const[r,i]=this.pointer,[o,s]=e,a=[(r+o)/2,(i+s)/2],l=[-(s-i),o-r],u=Math.sqrt(l[0]**2+l[1]**2),c=[a[0]+l[0]/u*t,a[1]+l[1]/u*t];return this.saveCurve(mE(this._convertToUV(this.pointer),this._convertToUV(c),this._convertToUV(e))),this.pointer=e,this}sagittaArc(e,t,r){return this.sagittaArcTo([e+this.pointer[0],t+this.pointer[1]],r)}vSagittaArc(e,t){return this.sagittaArc(0,e,t)}hSagittaArc(e,t){return this.sagittaArc(e,0,t)}bulgeArcTo(e,t){if(!t)return this.lineTo(e);const r=Au(this.pointer,e)/2,i=-t*r;return this.sagittaArcTo(e,i)}bulgeArc(e,t,r){return this.bulgeArcTo([e+this.pointer[0],t+this.pointer[1]],r)}vBulgeArc(e,t){return this.bulgeArc(0,e,t)}hBulgeArc(e,t){return this.bulgeArc(e,0,t)}tangentArcTo(e){const t=this.pendingCurves.length?this.pendingCurves[this.pendingCurves.length-1]:null;if(!t)throw new Error("You need a previous curve to sketch a tangent arc");return this.saveCurve(BQ(this._convertToUV(this.pointer),t.tangentAt(1),this._convertToUV(e))),this.pointer=e,this}tangentArc(e,t){const[r,i]=this.pointer;return this.tangentArcTo([e+r,t+i])}ellipseTo(e,t,r,i=0,o=!1,s=!1){let a=i,l=t,u=r;t<r&&(a=i+90,l=r,u=t);const c=a*Hl,h=L=>Au(this._convertToUV(L)),f=h(Rm(l,c)),d=h(Rm(u,c+Math.PI/2)),v=Xh(this._convertToUV(NQ([1,0],c))),[,y]=FQ(v),{cx:w,cy:g,startAngle:x,endAngle:_,clockwise:E,rx:C,ry:I}=uee(this._convertToUV(this.pointer),this._convertToUV(e),f,d,y,o,s),R=UQ(C,I,E?x:_,E?_:x,[w,g],v);return E||R.reverse(),this.saveCurve(R),this.pointer=e,this}ellipse(e,t,r,i,o=0,s=!1,a=!1){const[l,u]=this.pointer;return this.ellipseTo([e+l,t+u],r,i,o,s,a)}halfEllipseTo(e,t,r=!1){const i=IQ(e,this.pointer),o=Au(e,this.pointer);return this.ellipseTo(e,o/2,t,i*lv,!0,r)}halfEllipse(e,t,r,i=!1){const[o,s]=this.pointer;return this.halfEllipseTo([o+e,s+t],r,i)}bezierCurveTo(e,t){let r;return t.length===2&&!Array.isArray(t[0])?r=[t]:r=t,this.saveCurve(zQ(this._convertToUV(this.pointer),r.map(i=>this._convertToUV(i)),this._convertToUV(e))),this.pointer=e,this}quadraticBezierCurveTo(e,t){return this.bezierCurveTo(e,[t])}cubicBezierCurveTo(e,t,r){return this.bezierCurveTo(e,[t,r])}smoothSplineTo(e,t){const{endTangent:r,startTangent:i,startFactor:o,endFactor:s}=lee(t),a=this.pendingCurves.length?this.pendingCurves[this.pendingCurves.length-1]:null,l=Au(this.pointer,e)*.25;let u;i?u=i:a?u=this._convertFromUV(a.tangentAt(1)):u=[1,0],u=Xh(u);const c=[this.pointer[0]+u[0]*o*l,this.pointer[1]+u[1]*o*l];let h;r==="symmetric"?h=[-u[0],-u[1]]:h=r,h=Xh(h);const f=[e[0]-h[0]*s*l,e[1]-h[1]*s*l];return this.cubicBezierCurveTo(e,c,f)}smoothSpline(e,t,r){return this.smoothSplineTo([e+this.pointer[0],t+this.pointer[1]],r)}customCorner(e,t="fillet"){if(!this.pendingCurves.length)throw new Error("You need a curve defined to fillet the angle");return this._nextCorner={mode:t,radius:e},this}_customCornerLastWithFirst(e,t="fillet"){if(!e)return;const r=this.pendingCurves.pop(),i=this.pendingCurves.shift();if(!r||!i)throw new Error("Not enough curves to close and fillet");const o=t==="chamfer"?yE:vE;this.pendingCurves.push(...o(r,i,e))}_closeSketch(){ws(this.pointer,this.firstPoint)||this.lineTo(this.firstPoint)}_closeWithMirror(){if(ws(this.pointer,this.firstPoint))throw new Error("Cannot close with a mirror when the sketch is already closed");const e=[this.pointer[0]-this.firstPoint[0],this.pointer[1]-this.firstPoint[1]],t=pg(this._convertToUV(this.pointer),this._convertToUV(e)),r=this.pendingCurves.map(i=>new Ni(i.innerCurve.Mirrored_2(t)));r.reverse(),r.map(i=>i.reverse()),this.pendingCurves.push(...r),this.pointer=this.firstPoint}}const wee=n=>{const e=Bt(),t=new e.BRepOffsetAPI_MakeFilling(3,15,2,!1,1e-5,1e-4,.01,.1,8,9);n.forEach((o,s)=>{o.edges.forEach(a=>{t.Add_1(a.wrapped,e.GeomAbs_Shape.GeomAbs_C0,s===0)})});const r=new e.Message_ProgressRange_1;t.Build(r),r.delete();const i=fi(t.Shape());if(t.delete(),!(i instanceof Ag))throw new Error("Failed to create a face");return i},See=(n,e)=>{const t=Bt(),r=new t.ShapeFix_Wire_2(n.wrapped,e.wrapped,1e-9);return r.FixEdgeCurves(),r.delete(),n},DR=n=>{let e,t;try{e=px(n[0]),t=n.slice(1)}catch{e=wee(n),t=n.slice(1).map(i=>See(i,e))}return bO(e,t)},OR=(n,e)=>{const t=[],r=[],i=[];n.forEach(l=>{const[u,c,h]=e(l);t.push(u),r.push(c),i.push(h)});const o=DR(r),s=DR(i);return YA([o,...t,s])};class BR{constructor(e){this.sketches=e}delete(){this.sketches.forEach(e=>e.delete())}get outerSketch(){return this.sketches[0]}get innerSketches(){return this.sketches.slice(1)}get wires(){const e=this.sketches.map(t=>t.wire);return Tu(e)}face(){const e=this.outerSketch.face();return bO(e,this.innerSketches.map(r=>r.wire))}extrude(e,{extrusionDirection:t,extrusionProfile:r,twistAngle:i,origin:o}={}){const s=new Tt(t||this.outerSketch.defaultDirection).normalized().multiply(e);return r&&!i?OR(this.sketches,u=>TO(u.wire,o||this.outerSketch.defaultOrigin,s,r,!0)):i?OR(this.sketches,u=>CO(u.wire,i,o||this.outerSketch.defaultOrigin,s,r,!0)):MO(this.face(),s)}revolve(e,{origin:t}={}){return EO(this.face(),t||this.outerSketch.defaultOrigin,e)}loftWith(e,t){if(this.sketches.length!==e.sketches.length)throw new Error("You need to loft with another compound with the same number of sketches");const r=this.sketches.map((o,s)=>{const a=e.sketches[s];return o.clone().loftWith(a.clone(),{ruled:t.ruled},!0)}),i=this.face().clone();return r.push(i,e.face()),YA(r)}}class Lr{constructor(e){this.blueprints=e,this._boundingBox=null}clone(){return new Lr(this.blueprints)}get boundingBox(){if(!this._boundingBox){const e=new N1;this.blueprints.forEach(t=>e.add(t.boundingBox)),this._boundingBox=e}return this._boundingBox}get repr(){return["Compound Blueprints","-- Outline",this.blueprints[0].repr,"-- Holes",...this.blueprints.slice(1).map(e=>e.repr)].join(`
`)}stretch(e,t,r){return new Lr(this.blueprints.map(i=>i.stretch(e,t,r)))}rotate(e,t){return new Lr(this.blueprints.map(r=>r.rotate(e,t)))}scale(e,t){const r=t||this.boundingBox.center;return new Lr(this.blueprints.map(i=>i.scale(e,r)))}translate(e,t=0){return new Lr(this.blueprints.map(r=>r.translate(e,t)))}mirror(e,t,r){return new Lr(this.blueprints.map(i=>i.mirror(e,t,r)))}sketchOnPlane(e,t){const r=this.blueprints.map(i=>i.sketchOnPlane(e,t));return new BR(r)}sketchOnFace(e,t){const r=this.blueprints.map(i=>i.sketchOnFace(e,t));return new BR(r)}toSVGViewBox(e=1){return PS(this.boundingBox,e)}toSVGPaths(){return this.blueprints.flatMap(e=>e.toSVGPaths())}toSVGGroup(){return`<g>${this.blueprints.map(e=>e.toSVGPath()).join("")}</g>`}toSVG(e=1){return ZA(this.toSVGGroup(),this.boundingBox,e)}}class UR{constructor(e){this.sketches=e}wires(){const e=this.sketches.map(t=>t instanceof gg?t.wire:t.wires);return Tu(e)}faces(){const e=this.sketches.map(t=>t.face());return Tu(e)}extrude(e,t={}){const r=this.sketches.map(i=>i.extrude(e,t));return Tu(r)}revolve(e,t){return Tu(this.sketches.map(r=>r.revolve(e,t)))}}class Un{constructor(e){this.blueprints=e,this._boundingBox=null}get repr(){return["Blueprints",...this.blueprints.map(e=>e.repr)].join(`
`)}clone(){return new Un(this.blueprints)}get boundingBox(){if(!this._boundingBox){const e=new N1;this.blueprints.forEach(t=>e.add(t.boundingBox)),this._boundingBox=e}return this._boundingBox}stretch(e,t,r){return new Un(this.blueprints.map(i=>i.stretch(e,t,r)))}rotate(e,t){return new Un(this.blueprints.map(r=>r.rotate(e,t)))}scale(e,t){const r=t||this.boundingBox.center;return new Un(this.blueprints.map(i=>i.scale(e,r)))}translate(e,t=0){return new Un(this.blueprints.map(r=>r.translate(e,t)))}mirror(e,t,r){return new Un(this.blueprints.map(i=>i.mirror(e,t,r)))}sketchOnPlane(e,t){return new UR(this.blueprints.map(r=>r.sketchOnPlane(e,t)))}sketchOnFace(e,t){return new UR(this.blueprints.map(r=>r.sketchOnFace(e,t)))}toSVGViewBox(e=1){return PS(this.boundingBox,e)}toSVGPaths(){return this.blueprints.map(e=>e.toSVGPaths())}toSVG(e=1){const t=this.blueprints.map(r=>r instanceof nr?r.toSVGPath():r.toSVGGroup());return ZA(t.join(`
    `),this.boundingBox,e)}}const _ee=n=>{const e=n.map((i,o)=>n.slice(o+1).map((s,a)=>[a+o+1,s]).filter(([,s])=>!i.boundingBox.isOut(s.boundingBox)).map(([s])=>s)),t=[],r=Array(e.length);return e.forEach((i,o)=>{let s=r[o];s||(s=[],t.push(s)),s.push(n[o]),i.length&&i.forEach(a=>{r[a]=s})}),t},RO=n=>n.map((e,t)=>{const r=e.curves[0],i=r.value((r.lastParameter+r.firstParameter)/2),o=n.filter((s,a)=>t===a?!1:s.isInside(i));return{blueprint:e,isIn:o}}),bee=(n,e)=>n.flatMap(({blueprint:t})=>KA(e.filter(({blueprint:r,isIn:i})=>r===t||i.indexOf(t)!==-1))),Mee=(n,e)=>{const t=e.filter(({isIn:i})=>i.length<=1),r=KA(RO(n.map(({blueprint:i})=>i)));return[t,...r]},KA=n=>{if(!n.length)return[];const e=n.filter(({isIn:r})=>!r.length),t=n.filter(({isIn:r})=>r.length>1);return e.length===1&&t.length===0?[n]:e.length>1?bee(e,n):Mee(t,n)},B1=n=>{const e=_ee(n).map(RO);return new Un(e.flatMap(KA).map(t=>t.length===1?t[0].blueprint:(t.sort((r,i)=>r.isIn.length-i.isIn.length),new Lr(t.map(({blueprint:r})=>r)))))},mx=1e-9,gs=(n,e)=>ws(n,e,mx),B0=n=>{const e=(n.lastParameter+n.firstParameter)/2;return n.value(e)},zR=(n,e)=>{const t=n.findIndex(o=>gs(e,o.firstPoint)),r=n.slice(0,t);return n.slice(t).concat(r)},HR=(n,e)=>{const t=s=>gs(e.firstPoint,s.firstPoint)&&gs(e.lastPoint,s.lastPoint);let r=n.findIndex(t);if(r===-1&&(n=JA(n),r=n.findIndex(t),r===-1))throw console.error(n.map(s=>s.repr),e.repr),new Error("Failed to rotate to segment start");const i=n.slice(0,r);return n.slice(r).concat(i)};function*GR(n,e,t){const r=s=>!!e.find(a=>gs(a,s.lastPoint)),i=s=>!!t.find(a=>gs(a.firstPoint,s.firstPoint)&&gs(a.lastPoint,s.lastPoint)||gs(a.firstPoint,s.lastPoint)&&gs(a.lastPoint,s.firstPoint));let o=[];for(const s of n)r(s)?(o.push(s),yield o,o=[]):i(s)?(o.length&&(yield o,o=[]),yield[s]):o.push(s);o.length&&(yield o)}const Eee=n=>n[0].firstPoint,Xb=n=>n[n.length-1].lastPoint,JA=n=>(n.reverse(),n.map(e=>{const t=e.clone();return t.reverse(),t})),Aee=n=>(n.reverse(),n.map(JA));function Tee(n,e,t){return n.filter(r=>{const i=e.filter(a=>gs(a.firstPoint,r)||gs(a.lastPoint,r));if(i.length%2)throw console.error(i,r),new Error("Bug in the intersection algo on non crossing point");const o=i.map(a=>t.isInside(B0(a)));return!(o.every(a=>a)||!o.some(a=>a))})}function Cee(n,e){let t=[];const r=[],i=new Array(n.curves.length).fill(0).map(()=>[]),o=new Array(e.curves.length).fill(0).map(()=>[]);if(n.curves.forEach((f,d)=>{e.curves.forEach((v,y)=>{const{intersections:w,commonSegments:g,commonSegmentsPoints:x}=F1(f,v,mx/100);t.push(...w),i[d].push(...w),o[y].push(...w),r.push(...g),t.push(...x),i[d].push(...x),o[y].push(...x)})}),t=lO(t,mx),!t.length||t.length===1)return null;const s=([f,d])=>d.length?f.splitAt(d,mx/100):[f];let a=qm([n.curves,i]).flatMap(s),l=qm([e.curves,o]).flatMap(s);const u=r.map(f=>[f.firstPoint,f.lastPoint]);if(t=Tee(t,a,e),!t.length&&!r.length)return null;if(r.length){const f=r[0];a=HR(a,f),l=HR(l,f)}else{const f=t[0];a=zR(a,f),l=zR(l,f)}const c=Array.from(GR(a,t,r));let h=Array.from(GR(l,t,r));return(!gs(Xb(h[0]),Xb(c[0]))||r.length>0&&h[0].length!==1)&&(h=Aee(h)),qm([c,h]).map(([f,d])=>{const v=Eee(f),y=Xb(f);return u.find(([w,g])=>gs(w,v)&&gs(g,y)||gs(w,y)&&gs(w,v))?[f,"same"]:[f,d]})}const Pee=n=>{const e=n.map(s=>s.firstPoint);let t=n.map(s=>s.lastPoint);t=t.slice(-1).concat(t.slice(0,-1));const r=qm([e,t]).map(([s,a],l)=>gs(s,a)?null:l).filter(s=>s!==null);if(!r.length)return[n];const i=qm([r.slice(0,-1),r.slice(1)]).map(([s,a])=>n.slice(s,a));let o=n.slice(r[r.length-1]);return r[0]!==0&&(o=o.concat(n.slice(0,r[0]))),i.push(o),i};function QA(n,e,{firstInside:t,secondInside:r}){const i=Cee(n,e);if(!i){const u=B0(n.curves[0]),c=e.isInside(u),h=B0(e.curves[0]),f=n.isInside(h);return{identical:!1,firstCurveInSecond:c,secondCurveInFirst:f}}if(i.every(([,u])=>u==="same"))return{identical:!0};let o=null,s=null;const a=i.flatMap(([u,c])=>{let h=[],f=0;if(c==="same")return s===1?(s=1,[...u]):s===2||s===0?(s=null,[]):s===null?(o?o=[...o,...u]:o=u,[]):(console.error("weird situation"),[]);const d=B0(u[0]),v=e.isInside(d);(t==="keep"&&v||t==="remove"&&!v)&&(f+=1,h.push(...u));const y=B0(c[0]),w=n.isInside(y);if(r==="keep"&&w||r==="remove"&&!w){let g=c;f===1&&(g=JA(c)),f+=1,h.push(...g)}return s===null&&f===1&&o&&(h=[...o,...h]),f===1&&(s=f,o=null),h}),l=Pee(a).filter(u=>u.length).map(u=>new nr(u));return l.length===0?null:l.length===1?l[0]:B1(l)}const LS=(n,e)=>{const t=QA(n,e,{firstInside:"remove",secondInside:"remove"});return t===null||t instanceof nr||t instanceof Un?t:t.identical?n.clone():t.firstCurveInSecond?e.clone():t.secondCurveInFirst?n.clone():new Un([n,e])},r1=(n,e)=>{const t=QA(n,e,{firstInside:"remove",secondInside:"keep"});return t===null||t instanceof nr||t instanceof Un?t:t.identical||t.firstCurveInSecond?null:t.secondCurveInFirst?new Un([new Lr([n,e])]):n.clone()},eT=(n,e)=>{const t=QA(n,e,{firstInside:"keep",secondInside:"keep"});return t===null||t instanceof nr||t instanceof Un?t:t.identical||t.firstCurveInSecond?n.clone():t.secondCurveInFirst?e.clone():null},wE=(n,e)=>{if(n instanceof nr&&e instanceof nr){let t=[];return n.curves.forEach(r=>{e.curves.forEach(i=>{const{intersections:o,commonSegmentsPoints:s}=F1(r,i);t.push(...o),t.push(...s)})}),t=lO(t),t.length>1}if(n instanceof Lr||n instanceof Un)return n.blueprints.some(t=>wE(t,e));if(e instanceof Lr||e instanceof Un)return e.blueprints.some(t=>wE(n,t));throw new Error("Bug in the generic intersects algorithm")},Lee=(n,e)=>{if(n instanceof Lr){if(e instanceof nr)return hw(e,n);if(e instanceof Lr)return fw(n,e)}if(e instanceof Lr){if(n instanceof nr)return hw(n,e);if(n instanceof Lr)return fw(n,e)}if(n instanceof nr&&e instanceof nr)return LS(n,e);throw new Error("Bug in the generic fuse algorithm")},VR=n=>{const e=new Map,t=[];return n.forEach((r,i)=>{let o;e.has(i)?o=e.get(i):(o={current:r,fusedWith:new Set([i])},t.push(o)),n.slice(i+1).forEach((s,a)=>{const l=o.current,u=i+a+1;if(o.fusedWith.has(u))return;let c=s,h=!1;if(e.has(u)&&(c=e.get(u).current,h=!0),l.boundingBox.isOut(c.boundingBox)||!wE(l,c))return;let f;if(l instanceof Un||c instanceof Un?f=Cc(l,c):f=Lee(l,c),!(f instanceof nr||f instanceof Lr)){if(f instanceof Un&&f.blueprints.length===2)return;if(f instanceof Un&&f.blueprints.length===1)f=f.blueprints[0];else if(!(f instanceof Un))throw console.error(f),new Error("Bug in blueprint fusing algorigthm")}o.fusedWith.add(u),o.current=f,h||e.set(u,o)})}),B1(t.map(({current:r})=>r).filter(r=>r).flatMap(r=>Tc(r)))},Tc=n=>n instanceof nr?[n]:n instanceof Lr?n.blueprints:n instanceof Un?n.blueprints.flatMap(e=>Tc(e)):[],hw=(n,e)=>{const t=LS(n,e.blueprints[0]),r=e.blueprints.slice(1).map(i=>r1(i,n));return B1([...Tc(t),...r.flatMap(i=>Tc(i))])};function Ree(n,e){const t=[];for(const r of n)for(const i of e)t.push([r,i]);return t}const fw=(n,e)=>{const t=LS(n.blueprints[0],e.blueprints[0]),r=e.blueprints.slice(1).map(s=>r1(s,n.blueprints[0])),i=n.blueprints.slice(1).map(s=>r1(s,e.blueprints[0])),o=Ree(n.blueprints.slice(1),e.blueprints.slice(1)).flatMap(([s,a])=>Tc(eT(s,a)));return B1([...Tc(t),...r.flatMap(s=>Tc(s)),...i.flatMap(s=>Tc(s)),...o])},Cc=(n,e)=>{if(n===null)return e&&e.clone();if(e===null)return n&&n.clone();if(!(n instanceof Un)&&e instanceof Un)return VR([n,...e.blueprints]);if(!(e instanceof Un)&&n instanceof Un)return VR([e,...n.blueprints]);if(n instanceof Un&&e instanceof Un){let t=Cc(n.blueprints[0],e);return n.blueprints.slice(1).forEach(r=>{t=Cc(r,t)}),t}if(n instanceof Lr){if(e instanceof Un)return Cc(e,n);if(e instanceof nr)return hw(e,n);if(e instanceof Lr)return fw(n,e)}if(e instanceof Lr){if(n instanceof Un)return Cc(n,e);if(n instanceof nr)return hw(n,e);if(n instanceof Lr)return fw(n,e)}return n instanceof nr&&e instanceof nr?LS(n,e):null},dw=n=>{const e=n.flatMap(t=>t===null?[]:t instanceof Un?t.blueprints:t);return e.length===1?e[0]:new Un(e)},Yh=(n,e)=>{if(n===null)return null;if(e===null)return n.clone();if(n instanceof Un)return dw(n.blueprints.map(r=>Yh(r,e)));if(n instanceof Lr){const r=n.blueprints[0];if(e instanceof nr&&!e.intersects(r)){if(!r.isInside(e.firstPoint))return null;const i=Cc(e,new Un(n.blueprints.slice(1)));return B1([r,...Tc(i)])}else{let i=Yh(n.blueprints[0],e);return n.blueprints.slice(1).forEach(o=>{i=Yh(i,o)}),i}}if(e instanceof Un)return dw(e.blueprints.map(r=>Yh(n,r)));if(e instanceof Lr){let r=r1(n,e.blueprints[0]);return e.blueprints.slice(1).forEach(i=>{r=Cc(r,eT(i,n))}),r}return r1(n,e)};function U0(n,e){if(n===null||e===null)return null;if(n instanceof nr&&e instanceof nr)return eT(n,e);if(n instanceof Un)return dw(n.blueprints.map(t=>U0(t,e)));if(n instanceof Lr){const t=n.blueprints[0],r=n.blueprints[1];return Yh(U0(t,e),r)}if(e instanceof Un)return dw(e.blueprints.map(t=>U0(n,t)));if(e instanceof Lr){const t=e.blueprints[0],r=e.blueprints[1];return Yh(U0(t,n),r)}throw new Error("intersct 2D algorithm error")}const WR=(n,e={})=>{const t=e.plane instanceof Fs?wf(e.plane):wf(e.plane,e.origin),r=t1([QQ(n,t.origin,t.zDir)]),i=new gg(r,{defaultOrigin:t.origin,defaultDirection:t.zDir});return t.delete(),i};/*! https://mths.be/codepointat v0.2.0 by @mathias */String.prototype.codePointAt||function(){var n=function(){try{var t={},r=Object.defineProperty,i=r(t,t,t)&&r}catch{}return i}(),e=function(t){if(this==null)throw TypeError();var r=String(this),i=r.length,o=t?Number(t):0;if(o!=o&&(o=0),!(o<0||o>=i)){var s=r.charCodeAt(o),a;return s>=55296&&s<=56319&&i>o+1&&(a=r.charCodeAt(o+1),a>=56320&&a<=57343)?(s-55296)*1024+a-56320+65536:s}};n?n(String.prototype,"codePointAt",{value:e,configurable:!0,writable:!0}):String.prototype.codePointAt=e}();function kO(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}var kee=new kO,Iee=new kO,IO=new Uint8Array(30),NO=new Uint16Array(30),Nee=new Uint8Array(30),Fee=new Uint16Array(30);function FO(n,e,t,r){var i,o;for(i=0;i<t;++i)n[i]=0;for(i=0;i<30-t;++i)n[i+t]=i/t|0;for(o=r,i=0;i<30;++i)e[i]=o,o+=1<<n[i]}function Dee(n,e){var t;for(t=0;t<7;++t)n.table[t]=0;for(n.table[7]=24,n.table[8]=152,n.table[9]=112,t=0;t<24;++t)n.trans[t]=256+t;for(t=0;t<144;++t)n.trans[24+t]=t;for(t=0;t<8;++t)n.trans[24+144+t]=280+t;for(t=0;t<112;++t)n.trans[24+144+8+t]=144+t;for(t=0;t<5;++t)e.table[t]=0;for(e.table[5]=32,t=0;t<32;++t)e.trans[t]=t}Dee(kee,Iee);FO(IO,NO,4,3);FO(Nee,Fee,2,1);IO[28]=0;NO[28]=258;function am(n,e,t,r,i){return Math.pow(1-i,3)*n+3*Math.pow(1-i,2)*i*e+3*(1-i)*Math.pow(i,2)*t+Math.pow(i,3)*r}function If(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}If.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};If.prototype.addPoint=function(n,e){typeof n=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=n,this.x2=n),n<this.x1&&(this.x1=n),n>this.x2&&(this.x2=n)),typeof e=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))};If.prototype.addX=function(n){this.addPoint(n,null)};If.prototype.addY=function(n){this.addPoint(null,n)};If.prototype.addBezier=function(n,e,t,r,i,o,s,a){var l=[n,e],u=[t,r],c=[i,o],h=[s,a];this.addPoint(n,e),this.addPoint(s,a);for(var f=0;f<=1;f++){var d=6*l[f]-12*u[f]+6*c[f],v=-3*l[f]+9*u[f]-9*c[f]+3*h[f],y=3*u[f]-3*l[f];if(v===0){if(d===0)continue;var w=-y/d;0<w&&w<1&&(f===0&&this.addX(am(l[f],u[f],c[f],h[f],w)),f===1&&this.addY(am(l[f],u[f],c[f],h[f],w)));continue}var g=Math.pow(d,2)-4*y*v;if(!(g<0)){var x=(-d+Math.sqrt(g))/(2*v);0<x&&x<1&&(f===0&&this.addX(am(l[f],u[f],c[f],h[f],x)),f===1&&this.addY(am(l[f],u[f],c[f],h[f],x)));var _=(-d-Math.sqrt(g))/(2*v);0<_&&_<1&&(f===0&&this.addX(am(l[f],u[f],c[f],h[f],_)),f===1&&this.addY(am(l[f],u[f],c[f],h[f],_)))}}};If.prototype.addQuad=function(n,e,t,r,i,o){var s=n+.6666666666666666*(t-n),a=e+2/3*(r-e),l=s+1/3*(i-n),u=a+1/3*(o-e);this.addBezier(n,e,s,a,l,u,i,o)};function vo(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}vo.prototype.moveTo=function(n,e){this.commands.push({type:"M",x:n,y:e})};vo.prototype.lineTo=function(n,e){this.commands.push({type:"L",x:n,y:e})};vo.prototype.curveTo=vo.prototype.bezierCurveTo=function(n,e,t,r,i,o){this.commands.push({type:"C",x1:n,y1:e,x2:t,y2:r,x:i,y:o})};vo.prototype.quadTo=vo.prototype.quadraticCurveTo=function(n,e,t,r){this.commands.push({type:"Q",x1:n,y1:e,x:t,y:r})};vo.prototype.close=vo.prototype.closePath=function(){this.commands.push({type:"Z"})};vo.prototype.extend=function(n){if(n.commands)n=n.commands;else if(n instanceof If){var e=n;this.moveTo(e.x1,e.y1),this.lineTo(e.x2,e.y1),this.lineTo(e.x2,e.y2),this.lineTo(e.x1,e.y2),this.close();return}Array.prototype.push.apply(this.commands,n)};vo.prototype.getBoundingBox=function(){for(var n=new If,e=0,t=0,r=0,i=0,o=0;o<this.commands.length;o++){var s=this.commands[o];switch(s.type){case"M":n.addPoint(s.x,s.y),e=r=s.x,t=i=s.y;break;case"L":n.addPoint(s.x,s.y),r=s.x,i=s.y;break;case"Q":n.addQuad(r,i,s.x1,s.y1,s.x,s.y),r=s.x,i=s.y;break;case"C":n.addBezier(r,i,s.x1,s.y1,s.x2,s.y2,s.x,s.y),r=s.x,i=s.y;break;case"Z":r=e,i=t;break;default:throw new Error("Unexpected path command "+s.type)}}return n.isEmpty()&&n.addPoint(0,0),n};vo.prototype.draw=function(n){n.beginPath();for(var e=0;e<this.commands.length;e+=1){var t=this.commands[e];t.type==="M"?n.moveTo(t.x,t.y):t.type==="L"?n.lineTo(t.x,t.y):t.type==="C"?n.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y):t.type==="Q"?n.quadraticCurveTo(t.x1,t.y1,t.x,t.y):t.type==="Z"&&n.closePath()}this.fill&&(n.fillStyle=this.fill,n.fill()),this.stroke&&(n.strokeStyle=this.stroke,n.lineWidth=this.strokeWidth,n.stroke())};vo.prototype.toPathData=function(n){n=n!==void 0?n:2;function e(s){return Math.round(s)===s?""+Math.round(s):s.toFixed(n)}function t(){for(var s=arguments,a="",l=0;l<arguments.length;l+=1){var u=s[l];u>=0&&l>0&&(a+=" "),a+=e(u)}return a}for(var r="",i=0;i<this.commands.length;i+=1){var o=this.commands[i];o.type==="M"?r+="M"+t(o.x,o.y):o.type==="L"?r+="L"+t(o.x,o.y):o.type==="C"?r+="C"+t(o.x1,o.y1,o.x2,o.y2,o.x,o.y):o.type==="Q"?r+="Q"+t(o.x1,o.y1,o.x,o.y):o.type==="Z"&&(r+="Z")}return r};vo.prototype.toSVG=function(n){var e='<path d="';return e+=this.toPathData(n),e+='"',this.fill&&this.fill!=="black"&&(this.fill===null?e+=' fill="none"':e+=' fill="'+this.fill+'"'),this.stroke&&(e+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),e+="/>",e};vo.prototype.toDOMElement=function(n){var e=this.toPathData(n),t=document.createElementNS("http://www.w3.org/2000/svg","path");return t.setAttribute("d",e),t};function DO(n){throw new Error(n)}function jR(n,e){n||DO(e)}var Fn={fail:DO,argument:jR,assert:jR},$R=32768,qR=2147483648,vg={},Gt={},Pn={};function nu(n){return function(){return n}}Gt.BYTE=function(n){return Fn.argument(n>=0&&n<=255,"Byte value should be between 0 and 255."),[n]};Pn.BYTE=nu(1);Gt.CHAR=function(n){return[n.charCodeAt(0)]};Pn.CHAR=nu(1);Gt.CHARARRAY=function(n){typeof n>"u"&&(n="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var e=[],t=0;t<n.length;t+=1)e[t]=n.charCodeAt(t);return e};Pn.CHARARRAY=function(n){return typeof n>"u"?0:n.length};Gt.USHORT=function(n){return[n>>8&255,n&255]};Pn.USHORT=nu(2);Gt.SHORT=function(n){return n>=$R&&(n=-(2*$R-n)),[n>>8&255,n&255]};Pn.SHORT=nu(2);Gt.UINT24=function(n){return[n>>16&255,n>>8&255,n&255]};Pn.UINT24=nu(3);Gt.ULONG=function(n){return[n>>24&255,n>>16&255,n>>8&255,n&255]};Pn.ULONG=nu(4);Gt.LONG=function(n){return n>=qR&&(n=-(2*qR-n)),[n>>24&255,n>>16&255,n>>8&255,n&255]};Pn.LONG=nu(4);Gt.FIXED=Gt.ULONG;Pn.FIXED=Pn.ULONG;Gt.FWORD=Gt.SHORT;Pn.FWORD=Pn.SHORT;Gt.UFWORD=Gt.USHORT;Pn.UFWORD=Pn.USHORT;Gt.LONGDATETIME=function(n){return[0,0,0,0,n>>24&255,n>>16&255,n>>8&255,n&255]};Pn.LONGDATETIME=nu(8);Gt.TAG=function(n){return Fn.argument(n.length===4,"Tag should be exactly 4 ASCII characters."),[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3)]};Pn.TAG=nu(4);Gt.Card8=Gt.BYTE;Pn.Card8=Pn.BYTE;Gt.Card16=Gt.USHORT;Pn.Card16=Pn.USHORT;Gt.OffSize=Gt.BYTE;Pn.OffSize=Pn.BYTE;Gt.SID=Gt.USHORT;Pn.SID=Pn.USHORT;Gt.NUMBER=function(n){return n>=-107&&n<=107?[n+139]:n>=108&&n<=1131?(n=n-108,[(n>>8)+247,n&255]):n>=-1131&&n<=-108?(n=-n-108,[(n>>8)+251,n&255]):n>=-32768&&n<=32767?Gt.NUMBER16(n):Gt.NUMBER32(n)};Pn.NUMBER=function(n){return Gt.NUMBER(n).length};Gt.NUMBER16=function(n){return[28,n>>8&255,n&255]};Pn.NUMBER16=nu(3);Gt.NUMBER32=function(n){return[29,n>>24&255,n>>16&255,n>>8&255,n&255]};Pn.NUMBER32=nu(5);Gt.REAL=function(n){var e=n.toString(),t=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(e);if(t){var r=parseFloat("1e"+((t[2]?+t[2]:0)+t[1].length));e=(Math.round(n*r)/r).toString()}for(var i="",o=0,s=e.length;o<s;o+=1){var a=e[o];a==="e"?i+=e[++o]==="-"?"c":"b":a==="."?i+="a":a==="-"?i+="e":i+=a}i+=i.length&1?"f":"ff";for(var l=[30],u=0,c=i.length;u<c;u+=2)l.push(parseInt(i.substr(u,2),16));return l};Pn.REAL=function(n){return Gt.REAL(n).length};Gt.NAME=Gt.CHARARRAY;Pn.NAME=Pn.CHARARRAY;Gt.STRING=Gt.CHARARRAY;Pn.STRING=Pn.CHARARRAY;vg.UTF8=function(n,e,t){for(var r=[],i=t,o=0;o<i;o++,e+=1)r[o]=n.getUint8(e);return String.fromCharCode.apply(null,r)};vg.UTF16=function(n,e,t){for(var r=[],i=t/2,o=0;o<i;o++,e+=2)r[o]=n.getUint16(e);return String.fromCharCode.apply(null,r)};Gt.UTF16=function(n){for(var e=[],t=0;t<n.length;t+=1){var r=n.charCodeAt(t);e[e.length]=r>>8&255,e[e.length]=r&255}return e};Pn.UTF16=function(n){return n.length*2};var SE={"x-mac-croatian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®Š™´¨≠ŽØ∞±≤≥∆µ∂∑∏š∫ªºΩžø¿¡¬√ƒ≈Ć«Č… ÀÃÕŒœĐ—“”‘’÷◊©⁄€‹›Æ»–·‚„‰ÂćÁčÈÍÎÏÌÓÔđÒÚÛÙıˆ˜¯πË˚¸Êæˇ","x-mac-cyrillic":"АБВГДЕЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ†°Ґ£§•¶І®©™Ђђ≠Ѓѓ∞±≤≥іµґЈЄєЇїЉљЊњјЅ¬√ƒ≈∆«»… ЋћЌќѕ–—“”‘’÷„ЎўЏџ№Ёёяабвгдежзийклмнопрстуфхцчшщъыьэю","x-mac-gaelic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØḂ±≤≥ḃĊċḊḋḞḟĠġṀæøṁṖṗɼƒſṠ«»… ÀÃÕŒœ–—“”‘’ṡẛÿŸṪ€‹›Ŷŷṫ·Ỳỳ⁊ÂÊÁËÈÍÎÏÌÓÔ♣ÒÚÛÙıÝýŴŵẄẅẀẁẂẃ","x-mac-greek":"Ä¹²É³ÖÜ΅àâä΄¨çéèêë£™îï•½‰ôö¦€ùûü†ΓΔΘΛΞΠß®©ΣΪ§≠°·Α±≤≥¥ΒΕΖΗΙΚΜΦΫΨΩάΝ¬ΟΡ≈Τ«»… ΥΧΆΈœ–―“”‘’÷ΉΊΌΎέήίόΏύαβψδεφγηιξκλμνοπώρστθωςχυζϊϋΐΰ­","x-mac-icelandic":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûüÝ°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€ÐðÞþý·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-inuit":"ᐃᐄᐅᐆᐊᐋᐱᐲᐳᐴᐸᐹᑉᑎᑏᑐᑑᑕᑖᑦᑭᑮᑯᑰᑲᑳᒃᒋᒌᒍᒎᒐᒑ°ᒡᒥᒦ•¶ᒧ®©™ᒨᒪᒫᒻᓂᓃᓄᓅᓇᓈᓐᓯᓰᓱᓲᓴᓵᔅᓕᓖᓗᓘᓚᓛᓪᔨᔩᔪᔫᔭ… ᔮᔾᕕᕖᕗ–—“”‘’ᕘᕙᕚᕝᕆᕇᕈᕉᕋᕌᕐᕿᖀᖁᖂᖃᖄᖅᖏᖐᖑᖒᖓᖔᖕᙱᙲᙳᙴᙵᙶᖖᖠᖡᖢᖣᖤᖥᖦᕼŁł","x-mac-ce":"ÄĀāÉĄÖÜáąČäčĆćéŹźĎíďĒēĖóėôöõúĚěü†°Ę£§•¶ß®©™ę¨≠ģĮįĪ≤≥īĶ∂∑łĻļĽľĹĺŅņŃ¬√ńŇ∆«»… ňŐÕőŌ–—“”‘’÷◊ōŔŕŘ‹›řŖŗŠ‚„šŚśÁŤťÍŽžŪÓÔūŮÚůŰűŲųÝýķŻŁżĢˇ",macintosh:"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›ﬁﬂ‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-romanian":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ĂȘ∞±≤≥¥µ∂∑∏π∫ªºΩăș¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸ⁄€‹›Țț‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙıˆ˜¯˘˙˚¸˝˛ˇ","x-mac-turkish":"ÄÅÇÉÑÖÜáàâäãåçéèêëíìîïñóòôöõúùûü†°¢£§•¶ß®©™´¨≠ÆØ∞±≤≥¥µ∂∑∏π∫ªºΩæø¿¡¬√ƒ≈∆«»… ÀÃÕŒœ–—“”‘’÷◊ÿŸĞğİıŞş‡·‚„‰ÂÊÁËÈÍÎÏÌÓÔÒÚÛÙˆ˜¯˘˙˚¸˝˛ˇ"};vg.MACSTRING=function(n,e,t,r){var i=SE[r];if(i!==void 0){for(var o="",s=0;s<t;s++){var a=n.getUint8(e+s);a<=127?o+=String.fromCharCode(a):o+=i[a&127]}return o}};var L2=typeof WeakMap=="function"&&new WeakMap,R2,Oee=function(n){if(!R2){R2={};for(var e in SE)R2[e]=new String(e)}var t=R2[n];if(t!==void 0){if(L2){var r=L2.get(t);if(r!==void 0)return r}var i=SE[n];if(i!==void 0){for(var o={},s=0;s<i.length;s++)o[i.charCodeAt(s)]=s+128;return L2&&L2.set(t,o),o}}};Gt.MACSTRING=function(n,e){var t=Oee(e);if(t!==void 0){for(var r=[],i=0;i<n.length;i++){var o=n.charCodeAt(i);if(o>=128&&(o=t[o],o===void 0))return;r[i]=o}return r}};Pn.MACSTRING=function(n,e){var t=Gt.MACSTRING(n,e);return t!==void 0?t.length:0};function _E(n){return n>=-128&&n<=127}function Bee(n,e,t){for(var r=0,i=n.length;e<i&&r<64&&n[e]===0;)++e,++r;return t.push(128|r-1),e}function Uee(n,e,t){for(var r=0,i=n.length,o=e;o<i&&r<64;){var s=n[o];if(!_E(s)||s===0&&o+1<i&&n[o+1]===0)break;++o,++r}t.push(r-1);for(var a=e;a<o;++a)t.push(n[a]+256&255);return o}function zee(n,e,t){for(var r=0,i=n.length,o=e;o<i&&r<64;){var s=n[o];if(s===0||_E(s)&&o+1<i&&_E(n[o+1]))break;++o,++r}t.push(64|r-1);for(var a=e;a<o;++a){var l=n[a];t.push(l+65536>>8&255,l+256&255)}return o}Gt.VARDELTAS=function(n){for(var e=0,t=[];e<n.length;){var r=n[e];r===0?e=Bee(n,e,t):r>=-128&&r<=127?e=Uee(n,e,t):e=zee(n,e,t)}return t};Gt.INDEX=function(n){for(var e=1,t=[e],r=[],i=0;i<n.length;i+=1){var o=Gt.OBJECT(n[i]);Array.prototype.push.apply(r,o),e+=o.length,t.push(e)}if(r.length===0)return[0,0];for(var s=[],a=1+Math.floor(Math.log(e)/Math.log(2))/8|0,l=[void 0,Gt.BYTE,Gt.USHORT,Gt.UINT24,Gt.ULONG][a],u=0;u<t.length;u+=1){var c=l(t[u]);Array.prototype.push.apply(s,c)}return Array.prototype.concat(Gt.Card16(n.length),Gt.OffSize(a),s,r)};Pn.INDEX=function(n){return Gt.INDEX(n).length};Gt.DICT=function(n){for(var e=[],t=Object.keys(n),r=t.length,i=0;i<r;i+=1){var o=parseInt(t[i],0),s=n[o];e=e.concat(Gt.OPERAND(s.value,s.type)),e=e.concat(Gt.OPERATOR(o))}return e};Pn.DICT=function(n){return Gt.DICT(n).length};Gt.OPERATOR=function(n){return n<1200?[n]:[12,n-1200]};Gt.OPERAND=function(n,e){var t=[];if(Array.isArray(e))for(var r=0;r<e.length;r+=1)Fn.argument(n.length===e.length,"Not enough arguments given for type"+e),t=t.concat(Gt.OPERAND(n[r],e[r]));else if(e==="SID")t=t.concat(Gt.NUMBER(n));else if(e==="offset")t=t.concat(Gt.NUMBER32(n));else if(e==="number")t=t.concat(Gt.NUMBER(n));else if(e==="real")t=t.concat(Gt.REAL(n));else throw new Error("Unknown operand type "+e);return t};Gt.OP=Gt.BYTE;Pn.OP=Pn.BYTE;var k2=typeof WeakMap=="function"&&new WeakMap;Gt.CHARSTRING=function(n){if(k2){var e=k2.get(n);if(e!==void 0)return e}for(var t=[],r=n.length,i=0;i<r;i+=1){var o=n[i];t=t.concat(Gt[o.type](o.value))}return k2&&k2.set(n,t),t};Pn.CHARSTRING=function(n){return Gt.CHARSTRING(n).length};Gt.OBJECT=function(n){var e=Gt[n.type];return Fn.argument(e!==void 0,"No encoding function for type "+n.type),e(n.value)};Pn.OBJECT=function(n){var e=Pn[n.type];return Fn.argument(e!==void 0,"No sizeOf function for type "+n.type),e(n.value)};Gt.TABLE=function(n){for(var e=[],t=n.fields.length,r=[],i=[],o=0;o<t;o+=1){var s=n.fields[o],a=Gt[s.type];Fn.argument(a!==void 0,"No encoding function for field type "+s.type+" ("+s.name+")");var l=n[s.name];l===void 0&&(l=s.value);var u=a(l);s.type==="TABLE"?(i.push(e.length),e=e.concat([0,0]),r.push(u)):e=e.concat(u)}for(var c=0;c<r.length;c+=1){var h=i[c],f=e.length;Fn.argument(f<65536,"Table "+n.tableName+" too big."),e[h]=f>>8,e[h+1]=f&255,e=e.concat(r[c])}return e};Pn.TABLE=function(n){for(var e=0,t=n.fields.length,r=0;r<t;r+=1){var i=n.fields[r],o=Pn[i.type];Fn.argument(o!==void 0,"No sizeOf function for field type "+i.type+" ("+i.name+")");var s=n[i.name];s===void 0&&(s=i.value),e+=o(s),i.type==="TABLE"&&(e+=2)}return e};Gt.RECORD=Gt.TABLE;Pn.RECORD=Pn.TABLE;Gt.LITERAL=function(n){return n};Pn.LITERAL=function(n){return n.length};function No(n,e,t){if(e.length&&(e[0].name!=="coverageFormat"||e[0].value===1))for(var r=0;r<e.length;r+=1){var i=e[r];this[i.name]=i.value}if(this.tableName=n,this.fields=e,t)for(var o=Object.keys(t),s=0;s<o.length;s+=1){var a=o[s],l=t[a];this[a]!==void 0&&(this[a]=l)}}No.prototype.encode=function(){return Gt.TABLE(this)};No.prototype.sizeOf=function(){return Pn.TABLE(this)};function i1(n,e,t){t===void 0&&(t=e.length);var r=new Array(e.length+1);r[0]={name:n+"Count",type:"USHORT",value:t};for(var i=0;i<e.length;i++)r[i+1]={name:n+i,type:"USHORT",value:e[i]};return r}function bE(n,e,t){var r=e.length,i=new Array(r+1);i[0]={name:n+"Count",type:"USHORT",value:r};for(var o=0;o<r;o++)i[o+1]={name:n+o,type:"TABLE",value:t(e[o],o)};return i}function o1(n,e,t){var r=e.length,i=[];i[0]={name:n+"Count",type:"USHORT",value:r};for(var o=0;o<r;o++)i=i.concat(t(e[o],o));return i}function pw(n){n.format===1?No.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(i1("glyph",n.glyphs))):n.format===2?No.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(o1("rangeRecord",n.ranges,function(e){return[{name:"startGlyphID",type:"USHORT",value:e.start},{name:"endGlyphID",type:"USHORT",value:e.end},{name:"startCoverageIndex",type:"USHORT",value:e.index}]}))):Fn.assert(!1,"Coverage format must be 1 or 2.")}pw.prototype=Object.create(No.prototype);pw.prototype.constructor=pw;function mw(n){No.call(this,"scriptListTable",o1("scriptRecord",n,function(e,t){var r=e.script,i=r.defaultLangSys;return Fn.assert(!!i,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+t,type:"TAG",value:e.tag},{name:"script"+t,type:"TABLE",value:new No("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new No("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:i.reqFeatureIndex}].concat(i1("featureIndex",i.featureIndexes)))}].concat(o1("langSys",r.langSysRecords,function(o,s){var a=o.langSys;return[{name:"langSysTag"+s,type:"TAG",value:o.tag},{name:"langSys"+s,type:"TABLE",value:new No("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:a.reqFeatureIndex}].concat(i1("featureIndex",a.featureIndexes)))}]})))}]}))}mw.prototype=Object.create(No.prototype);mw.prototype.constructor=mw;function gw(n){No.call(this,"featureListTable",o1("featureRecord",n,function(e,t){var r=e.feature;return[{name:"featureTag"+t,type:"TAG",value:e.tag},{name:"feature"+t,type:"TABLE",value:new No("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(i1("lookupListIndex",r.lookupListIndexes)))}]}))}gw.prototype=Object.create(No.prototype);gw.prototype.constructor=gw;function vw(n,e){No.call(this,"lookupListTable",bE("lookup",n,function(t){var r=e[t.lookupType];return Fn.assert(!!r,"Unable to write GSUB lookup type "+t.lookupType+" tables."),new No("lookupTable",[{name:"lookupType",type:"USHORT",value:t.lookupType},{name:"lookupFlag",type:"USHORT",value:t.lookupFlag}].concat(bE("subtable",t.subtables,r)))}))}vw.prototype=Object.create(No.prototype);vw.prototype.constructor=vw;var nn={Table:No,Record:No,Coverage:pw,ScriptList:mw,FeatureList:gw,LookupList:vw,ushortList:i1,tableList:bE,recordList:o1};function XR(n,e){return n.getUint8(e)}function yw(n,e){return n.getUint16(e,!1)}function Hee(n,e){return n.getInt16(e,!1)}function tT(n,e){return n.getUint32(e,!1)}function OO(n,e){var t=n.getInt16(e,!1),r=n.getUint16(e+2,!1);return t+r/65535}function Gee(n,e){for(var t="",r=e;r<e+4;r+=1)t+=String.fromCharCode(n.getInt8(r));return t}function Vee(n,e,t){for(var r=0,i=0;i<t;i+=1)r<<=8,r+=n.getUint8(e+i);return r}function Wee(n,e,t){for(var r=[],i=e;i<t;i+=1)r.push(n.getUint8(i));return r}function jee(n){for(var e="",t=0;t<n.length;t+=1)e+=String.fromCharCode(n[t]);return e}var $ee={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function lt(n,e){this.data=n,this.offset=e,this.relativeOffset=0}lt.prototype.parseByte=function(){var n=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,n};lt.prototype.parseChar=function(){var n=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,n};lt.prototype.parseCard8=lt.prototype.parseByte;lt.prototype.parseUShort=function(){var n=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,n};lt.prototype.parseCard16=lt.prototype.parseUShort;lt.prototype.parseSID=lt.prototype.parseUShort;lt.prototype.parseOffset16=lt.prototype.parseUShort;lt.prototype.parseShort=function(){var n=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,n};lt.prototype.parseF2Dot14=function(){var n=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,n};lt.prototype.parseULong=function(){var n=tT(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,n};lt.prototype.parseOffset32=lt.prototype.parseULong;lt.prototype.parseFixed=function(){var n=OO(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,n};lt.prototype.parseString=function(n){var e=this.data,t=this.offset+this.relativeOffset,r="";this.relativeOffset+=n;for(var i=0;i<n;i++)r+=String.fromCharCode(e.getUint8(t+i));return r};lt.prototype.parseTag=function(){return this.parseString(4)};lt.prototype.parseLongDateTime=function(){var n=tT(this.data,this.offset+this.relativeOffset+4);return n-=2082844800,this.relativeOffset+=8,n};lt.prototype.parseVersion=function(n){var e=yw(this.data,this.offset+this.relativeOffset),t=yw(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,n===void 0&&(n=4096),e+t/n/10};lt.prototype.skip=function(n,e){e===void 0&&(e=1),this.relativeOffset+=$ee[n]*e};lt.prototype.parseULongList=function(n){n===void 0&&(n=this.parseULong());for(var e=new Array(n),t=this.data,r=this.offset+this.relativeOffset,i=0;i<n;i++)e[i]=t.getUint32(r),r+=4;return this.relativeOffset+=n*4,e};lt.prototype.parseOffset16List=lt.prototype.parseUShortList=function(n){n===void 0&&(n=this.parseUShort());for(var e=new Array(n),t=this.data,r=this.offset+this.relativeOffset,i=0;i<n;i++)e[i]=t.getUint16(r),r+=2;return this.relativeOffset+=n*2,e};lt.prototype.parseShortList=function(n){for(var e=new Array(n),t=this.data,r=this.offset+this.relativeOffset,i=0;i<n;i++)e[i]=t.getInt16(r),r+=2;return this.relativeOffset+=n*2,e};lt.prototype.parseByteList=function(n){for(var e=new Array(n),t=this.data,r=this.offset+this.relativeOffset,i=0;i<n;i++)e[i]=t.getUint8(r++);return this.relativeOffset+=n,e};lt.prototype.parseList=function(n,e){e||(e=n,n=this.parseUShort());for(var t=new Array(n),r=0;r<n;r++)t[r]=e.call(this);return t};lt.prototype.parseList32=function(n,e){e||(e=n,n=this.parseULong());for(var t=new Array(n),r=0;r<n;r++)t[r]=e.call(this);return t};lt.prototype.parseRecordList=function(n,e){e||(e=n,n=this.parseUShort());for(var t=new Array(n),r=Object.keys(e),i=0;i<n;i++){for(var o={},s=0;s<r.length;s++){var a=r[s],l=e[a];o[a]=l.call(this)}t[i]=o}return t};lt.prototype.parseRecordList32=function(n,e){e||(e=n,n=this.parseULong());for(var t=new Array(n),r=Object.keys(e),i=0;i<n;i++){for(var o={},s=0;s<r.length;s++){var a=r[s],l=e[a];o[a]=l.call(this)}t[i]=o}return t};lt.prototype.parseStruct=function(n){if(typeof n=="function")return n.call(this);for(var e=Object.keys(n),t={},r=0;r<e.length;r++){var i=e[r],o=n[i];t[i]=o.call(this)}return t};lt.prototype.parseValueRecord=function(n){if(n===void 0&&(n=this.parseUShort()),n!==0){var e={};return n&1&&(e.xPlacement=this.parseShort()),n&2&&(e.yPlacement=this.parseShort()),n&4&&(e.xAdvance=this.parseShort()),n&8&&(e.yAdvance=this.parseShort()),n&16&&(e.xPlaDevice=void 0,this.parseShort()),n&32&&(e.yPlaDevice=void 0,this.parseShort()),n&64&&(e.xAdvDevice=void 0,this.parseShort()),n&128&&(e.yAdvDevice=void 0,this.parseShort()),e}};lt.prototype.parseValueRecordList=function(){for(var n=this.parseUShort(),e=this.parseUShort(),t=new Array(e),r=0;r<e;r++)t[r]=this.parseValueRecord(n);return t};lt.prototype.parsePointer=function(n){var e=this.parseOffset16();if(e>0)return new lt(this.data,this.offset+e).parseStruct(n)};lt.prototype.parsePointer32=function(n){var e=this.parseOffset32();if(e>0)return new lt(this.data,this.offset+e).parseStruct(n)};lt.prototype.parseListOfLists=function(n){for(var e=this.parseOffset16List(),t=e.length,r=this.relativeOffset,i=new Array(t),o=0;o<t;o++){var s=e[o];if(s===0){i[o]=void 0;continue}if(this.relativeOffset=s,n){for(var a=this.parseOffset16List(),l=new Array(a.length),u=0;u<a.length;u++)this.relativeOffset=s+a[u],l[u]=n.call(this);i[o]=l}else i[o]=this.parseUShortList()}return this.relativeOffset=r,i};lt.prototype.parseCoverage=function(){var n=this.offset+this.relativeOffset,e=this.parseUShort(),t=this.parseUShort();if(e===1)return{format:1,glyphs:this.parseUShortList(t)};if(e===2){for(var r=new Array(t),i=0;i<t;i++)r[i]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}}throw new Error("0x"+n.toString(16)+": Coverage format must be 1 or 2.")};lt.prototype.parseClassDef=function(){var n=this.offset+this.relativeOffset,e=this.parseUShort();if(e===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(e===2)return{format:2,ranges:this.parseRecordList({start:lt.uShort,end:lt.uShort,classId:lt.uShort})};throw new Error("0x"+n.toString(16)+": ClassDef format must be 1 or 2.")};lt.list=function(n,e){return function(){return this.parseList(n,e)}};lt.list32=function(n,e){return function(){return this.parseList32(n,e)}};lt.recordList=function(n,e){return function(){return this.parseRecordList(n,e)}};lt.recordList32=function(n,e){return function(){return this.parseRecordList32(n,e)}};lt.pointer=function(n){return function(){return this.parsePointer(n)}};lt.pointer32=function(n){return function(){return this.parsePointer32(n)}};lt.tag=lt.prototype.parseTag;lt.byte=lt.prototype.parseByte;lt.uShort=lt.offset16=lt.prototype.parseUShort;lt.uShortList=lt.prototype.parseUShortList;lt.uLong=lt.offset32=lt.prototype.parseULong;lt.uLongList=lt.prototype.parseULongList;lt.struct=lt.prototype.parseStruct;lt.coverage=lt.prototype.parseCoverage;lt.classDef=lt.prototype.parseClassDef;var YR={reserved:lt.uShort,reqFeatureIndex:lt.uShort,featureIndexes:lt.uShortList};lt.prototype.parseScriptList=function(){return this.parsePointer(lt.recordList({tag:lt.tag,script:lt.pointer({defaultLangSys:lt.pointer(YR),langSysRecords:lt.recordList({tag:lt.tag,langSys:lt.pointer(YR)})})}))||[]};lt.prototype.parseFeatureList=function(){return this.parsePointer(lt.recordList({tag:lt.tag,feature:lt.pointer({featureParams:lt.offset16,lookupListIndexes:lt.uShortList})}))||[]};lt.prototype.parseLookupList=function(n){return this.parsePointer(lt.list(lt.pointer(function(){var e=this.parseUShort();Fn.argument(1<=e&&e<=9,"GPOS/GSUB lookup type "+e+" unknown.");var t=this.parseUShort(),r=t&16;return{lookupType:e,lookupFlag:t,subtables:this.parseList(lt.pointer(n[e])),markFilteringSet:r?this.parseUShort():void 0}})))||[]};lt.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var n=this.parseUShort(),e=this.parseUShort();Fn.argument(n===1&&e<1,"GPOS/GSUB feature variations table unknown.");var t=this.parseRecordList32({conditionSetOffset:lt.offset32,featureTableSubstitutionOffset:lt.offset32});return t})||[]};var Vn={getByte:XR,getCard8:XR,getUShort:yw,getCard16:yw,getShort:Hee,getULong:tT,getFixed:OO,getTag:Gee,getOffset:Vee,getBytes:Wee,bytesToString:jee,Parser:lt};function qee(n,e){e.parseUShort(),n.length=e.parseULong(),n.language=e.parseULong();var t;n.groupCount=t=e.parseULong(),n.glyphIndexMap={};for(var r=0;r<t;r+=1)for(var i=e.parseULong(),o=e.parseULong(),s=e.parseULong(),a=i;a<=o;a+=1)n.glyphIndexMap[a]=s,s++}function Xee(n,e,t,r,i){n.length=e.parseUShort(),n.language=e.parseUShort();var o;n.segCount=o=e.parseUShort()>>1,e.skip("uShort",3),n.glyphIndexMap={};for(var s=new Vn.Parser(t,r+i+14),a=new Vn.Parser(t,r+i+16+o*2),l=new Vn.Parser(t,r+i+16+o*4),u=new Vn.Parser(t,r+i+16+o*6),c=r+i+16+o*8,h=0;h<o-1;h+=1)for(var f=void 0,d=s.parseUShort(),v=a.parseUShort(),y=l.parseShort(),w=u.parseUShort(),g=v;g<=d;g+=1)w!==0?(c=u.offset+u.relativeOffset-2,c+=w,c+=(g-v)*2,f=Vn.getUShort(t,c),f!==0&&(f=f+y&65535)):f=g+y&65535,n.glyphIndexMap[g]=f}function Yee(n,e){var t={};t.version=Vn.getUShort(n,e),Fn.argument(t.version===0,"cmap table version should be 0."),t.numTables=Vn.getUShort(n,e+2);for(var r=-1,i=t.numTables-1;i>=0;i-=1){var o=Vn.getUShort(n,e+4+i*8),s=Vn.getUShort(n,e+4+i*8+2);if(o===3&&(s===0||s===1||s===10)||o===0&&(s===0||s===1||s===2||s===3||s===4)){r=Vn.getULong(n,e+4+i*8+4);break}}if(r===-1)throw new Error("No valid cmap sub-tables found.");var a=new Vn.Parser(n,e+r);if(t.format=a.parseUShort(),t.format===12)qee(t,a);else if(t.format===4)Xee(t,a,n,e,r);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+t.format+").");return t}function Zee(n,e,t){n.segments.push({end:e,start:e,delta:-(e-t),offset:0,glyphIndex:t})}function Kee(n){n.segments.push({end:65535,start:65535,delta:1,offset:0})}function Jee(n){var e=!0,t;for(t=n.length-1;t>0;t-=1){var r=n.get(t);if(r.unicode>65535){console.log("Adding CMAP format 12 (needed!)"),e=!1;break}}var i=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:e?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:e?12:12+8}];e||(i=i.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),i=i.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var o=new nn.Table("cmap",i);for(o.segments=[],t=0;t<n.length;t+=1){for(var s=n.get(t),a=0;a<s.unicodes.length;a+=1)Zee(o,s.unicodes[a],t);o.segments=o.segments.sort(function(x,_){return x.start-_.start})}Kee(o);var l=o.segments.length,u=0,c=[],h=[],f=[],d=[],v=[],y=[];for(t=0;t<l;t+=1){var w=o.segments[t];w.end<=65535&&w.start<=65535?(c=c.concat({name:"end_"+t,type:"USHORT",value:w.end}),h=h.concat({name:"start_"+t,type:"USHORT",value:w.start}),f=f.concat({name:"idDelta_"+t,type:"SHORT",value:w.delta}),d=d.concat({name:"idRangeOffset_"+t,type:"USHORT",value:w.offset}),w.glyphId!==void 0&&(v=v.concat({name:"glyph_"+t,type:"USHORT",value:w.glyphId}))):u+=1,!e&&w.glyphIndex!==void 0&&(y=y.concat({name:"cmap12Start_"+t,type:"ULONG",value:w.start}),y=y.concat({name:"cmap12End_"+t,type:"ULONG",value:w.end}),y=y.concat({name:"cmap12Glyph_"+t,type:"ULONG",value:w.glyphIndex}))}if(o.segCountX2=(l-u)*2,o.searchRange=Math.pow(2,Math.floor(Math.log(l-u)/Math.log(2)))*2,o.entrySelector=Math.log(o.searchRange/2)/Math.log(2),o.rangeShift=o.segCountX2-o.searchRange,o.fields=o.fields.concat(c),o.fields.push({name:"reservedPad",type:"USHORT",value:0}),o.fields=o.fields.concat(h),o.fields=o.fields.concat(f),o.fields=o.fields.concat(d),o.fields=o.fields.concat(v),o.cmap4Length=14+c.length*2+2+h.length*2+f.length*2+d.length*2+v.length*2,!e){var g=16+y.length*4;o.cmap12Offset=12+2*2+4+o.cmap4Length,o.fields=o.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:g},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:y.length/3}]),o.fields=o.fields.concat(y)}return o}var Qee={parse:Yee,make:Jee},gx=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],ete=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],tte=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],ZR=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function BO(n){this.font=n}BO.prototype.charToGlyphIndex=function(n){var e=n.codePointAt(0),t=this.font.glyphs;if(t){for(var r=0;r<t.length;r+=1)for(var i=t.get(r),o=0;o<i.unicodes.length;o+=1)if(i.unicodes[o]===e)return r}return null};function xw(n,e){this.encoding=n,this.charset=e}xw.prototype.charToGlyphIndex=function(n){var e=n.codePointAt(0),t=this.encoding[e];return this.charset.indexOf(t)};function nte(n,e,t,r,i){n.beginPath(),n.moveTo(e,t),n.lineTo(r,i),n.stroke()}var od={line:nte};function rte(n,e){var t=e||new vo;return{configurable:!0,get:function(){return typeof t=="function"&&(t=t()),t},set:function(r){t=r}}}function hl(n){this.bindConstructorValues(n)}hl.prototype.bindConstructorValues=function(n){this.index=n.index||0,this.name=n.name||null,this.unicode=n.unicode||void 0,this.unicodes=n.unicodes||n.unicode!==void 0?[n.unicode]:[],"xMin"in n&&(this.xMin=n.xMin),"yMin"in n&&(this.yMin=n.yMin),"xMax"in n&&(this.xMax=n.xMax),"yMax"in n&&(this.yMax=n.yMax),"advanceWidth"in n&&(this.advanceWidth=n.advanceWidth),Object.defineProperty(this,"path",rte(this,n.path))};hl.prototype.addUnicode=function(n){this.unicodes.length===0&&(this.unicode=n),this.unicodes.push(n)};hl.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};hl.prototype.getPath=function(n,e,t,r,i){n=n!==void 0?n:0,e=e!==void 0?e:0,t=t!==void 0?t:72;var o,s;r||(r={});var a=r.xScale,l=r.yScale;if(r.hinting&&i&&i.hinting&&(s=this.path&&i.hinting.exec(this,t)),s)o=i.hinting.getCommands(s),n=Math.round(n),e=Math.round(e),a=l=1;else{o=this.path.commands;var u=1/(this.path.unitsPerEm||1e3)*t;a===void 0&&(a=u),l===void 0&&(l=u)}for(var c=new vo,h=0;h<o.length;h+=1){var f=o[h];f.type==="M"?c.moveTo(n+f.x*a,e+-f.y*l):f.type==="L"?c.lineTo(n+f.x*a,e+-f.y*l):f.type==="Q"?c.quadraticCurveTo(n+f.x1*a,e+-f.y1*l,n+f.x*a,e+-f.y*l):f.type==="C"?c.curveTo(n+f.x1*a,e+-f.y1*l,n+f.x2*a,e+-f.y2*l,n+f.x*a,e+-f.y*l):f.type==="Z"&&c.closePath()}return c};hl.prototype.getContours=function(){if(this.points===void 0)return[];for(var n=[],e=[],t=0;t<this.points.length;t+=1){var r=this.points[t];e.push(r),r.lastPointOfContour&&(n.push(e),e=[])}return Fn.argument(e.length===0,"There are still points left in the current contour."),n};hl.prototype.getMetrics=function(){for(var n=this.path.commands,e=[],t=[],r=0;r<n.length;r+=1){var i=n[r];i.type!=="Z"&&(e.push(i.x),t.push(i.y)),(i.type==="Q"||i.type==="C")&&(e.push(i.x1),t.push(i.y1)),i.type==="C"&&(e.push(i.x2),t.push(i.y2))}var o={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,t),xMax:Math.max.apply(null,e),yMax:Math.max.apply(null,t),leftSideBearing:this.leftSideBearing};return isFinite(o.xMin)||(o.xMin=0),isFinite(o.xMax)||(o.xMax=this.advanceWidth),isFinite(o.yMin)||(o.yMin=0),isFinite(o.yMax)||(o.yMax=0),o.rightSideBearing=this.advanceWidth-o.leftSideBearing-(o.xMax-o.xMin),o};hl.prototype.draw=function(n,e,t,r,i){this.getPath(e,t,r,i).draw(n)};hl.prototype.drawPoints=function(n,e,t,r){function i(h,f,d,v){n.beginPath();for(var y=0;y<h.length;y+=1)n.moveTo(f+h[y].x*v,d+h[y].y*v),n.arc(f+h[y].x*v,d+h[y].y*v,2,0,Math.PI*2,!1);n.closePath(),n.fill()}e=e!==void 0?e:0,t=t!==void 0?t:0,r=r!==void 0?r:24;for(var o=1/this.path.unitsPerEm*r,s=[],a=[],l=this.path,u=0;u<l.commands.length;u+=1){var c=l.commands[u];c.x!==void 0&&s.push({x:c.x,y:-c.y}),c.x1!==void 0&&a.push({x:c.x1,y:-c.y1}),c.x2!==void 0&&a.push({x:c.x2,y:-c.y2})}n.fillStyle="blue",i(s,e,t,o),n.fillStyle="red",i(a,e,t,o)};hl.prototype.drawMetrics=function(n,e,t,r){var i;e=e!==void 0?e:0,t=t!==void 0?t:0,r=r!==void 0?r:24,i=1/this.path.unitsPerEm*r,n.lineWidth=1,n.strokeStyle="black",od.line(n,e,-1e4,e,1e4),od.line(n,-1e4,t,1e4,t);var o=this.xMin||0,s=this.yMin||0,a=this.xMax||0,l=this.yMax||0,u=this.advanceWidth||0;n.strokeStyle="blue",od.line(n,e+o*i,-1e4,e+o*i,1e4),od.line(n,e+a*i,-1e4,e+a*i,1e4),od.line(n,-1e4,t+-s*i,1e4,t+-s*i),od.line(n,-1e4,t+-l*i,1e4,t+-l*i),n.strokeStyle="green",od.line(n,e+u*i,-1e4,e+u*i,1e4)};function I2(n,e,t){Object.defineProperty(n,e,{get:function(){return n.path,n[t]},set:function(r){n[t]=r},enumerable:!0,configurable:!0})}function nT(n,e){if(this.font=n,this.glyphs={},Array.isArray(e))for(var t=0;t<e.length;t++){var r=e[t];r.path.unitsPerEm=n.unitsPerEm,this.glyphs[t]=r}this.length=e&&e.length||0}nT.prototype.get=function(n){if(this.glyphs[n]===void 0){this.font._push(n),typeof this.glyphs[n]=="function"&&(this.glyphs[n]=this.glyphs[n]());var e=this.glyphs[n],t=this.font._IndexToUnicodeMap[n];if(t)for(var r=0;r<t.unicodes.length;r++)e.addUnicode(t.unicodes[r]);this.font.cffEncoding?this.font.isCIDFont?e.name="gid"+n:e.name=this.font.cffEncoding.charset[n]:this.font.glyphNames.names&&(e.name=this.font.glyphNames.glyphIndexToName(n)),this.glyphs[n].advanceWidth=this.font._hmtxTableData[n].advanceWidth,this.glyphs[n].leftSideBearing=this.font._hmtxTableData[n].leftSideBearing}else typeof this.glyphs[n]=="function"&&(this.glyphs[n]=this.glyphs[n]());return this.glyphs[n]};nT.prototype.push=function(n,e){this.glyphs[n]=e,this.length++};function ite(n,e){return new hl({index:e,font:n})}function ote(n,e,t,r,i,o){return function(){var s=new hl({index:e,font:n});return s.path=function(){t(s,r,i);var a=o(n.glyphs,s);return a.unitsPerEm=n.unitsPerEm,a},I2(s,"xMin","_xMin"),I2(s,"xMax","_xMax"),I2(s,"yMin","_yMin"),I2(s,"yMax","_yMax"),s}}function ste(n,e,t,r){return function(){var i=new hl({index:e,font:n});return i.path=function(){var o=t(n,i,r);return o.unitsPerEm=n.unitsPerEm,o},i}}var Du={GlyphSet:nT,glyphLoader:ite,ttfGlyphLoader:ote,cffGlyphLoader:ste};function UO(n,e){if(n===e)return!0;if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;for(var t=0;t<n.length;t+=1)if(!UO(n[t],e[t]))return!1;return!0}else return!1}function ME(n){var e;return n.length<1240?e=107:n.length<33900?e=1131:e=32768,e}function Ih(n,e,t){var r=[],i=[],o=Vn.getCard16(n,e),s,a;if(o!==0){var l=Vn.getByte(n,e+2);s=e+(o+1)*l+2;for(var u=e+3,c=0;c<o+1;c+=1)r.push(Vn.getOffset(n,u,l)),u+=l;a=s+r[o]}else a=e+2;for(var h=0;h<r.length-1;h+=1){var f=Vn.getBytes(n,s+r[h],s+r[h+1]);t&&(f=t(f)),i.push(f)}return{objects:i,startOffset:e,endOffset:a}}function ate(n,e){var t=[],r=Vn.getCard16(n,e),i,o;if(r!==0){var s=Vn.getByte(n,e+2);i=e+(r+1)*s+2;for(var a=e+3,l=0;l<r+1;l+=1)t.push(Vn.getOffset(n,a,s)),a+=s;o=i+t[r]}else o=e+2;return{offsets:t,startOffset:e,endOffset:o}}function lte(n,e,t,r,i){var o=Vn.getCard16(t,r),s=0;if(o!==0){var a=Vn.getByte(t,r+2);s=r+(o+1)*a+2}var l=Vn.getBytes(t,s+e[n],s+e[n+1]);return i&&(l=i(l)),l}function ute(n){for(var e="",t=15,r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var i=n.parseByte(),o=i>>4,s=i&15;if(o===t||(e+=r[o],s===t))break;e+=r[s]}return parseFloat(e)}function cte(n,e){var t,r,i,o;if(e===28)return t=n.parseByte(),r=n.parseByte(),t<<8|r;if(e===29)return t=n.parseByte(),r=n.parseByte(),i=n.parseByte(),o=n.parseByte(),t<<24|r<<16|i<<8|o;if(e===30)return ute(n);if(e>=32&&e<=246)return e-139;if(e>=247&&e<=250)return t=n.parseByte(),(e-247)*256+t+108;if(e>=251&&e<=254)return t=n.parseByte(),-(e-251)*256-t-108;throw new Error("Invalid b0 "+e)}function hte(n){for(var e={},t=0;t<n.length;t+=1){var r=n[t][0],i=n[t][1],o=void 0;if(i.length===1?o=i[0]:o=i,e.hasOwnProperty(r)&&!isNaN(e[r]))throw new Error("Object "+e+" already has key "+r);e[r]=o}return e}function zO(n,e,t){e=e!==void 0?e:0;var r=new Vn.Parser(n,e),i=[],o=[];for(t=t!==void 0?t:n.length;r.relativeOffset<t;){var s=r.parseByte();s<=21?(s===12&&(s=1200+r.parseByte()),i.push([s,o]),o=[]):o.push(cte(r,s))}return hte(i)}function hv(n,e){return e<=390?e=gx[e]:e=n[e-391],e}function HO(n,e,t){for(var r={},i,o=0;o<e.length;o+=1){var s=e[o];if(Array.isArray(s.type)){var a=[];a.length=s.type.length;for(var l=0;l<s.type.length;l++)i=n[s.op]!==void 0?n[s.op][l]:void 0,i===void 0&&(i=s.value!==void 0&&s.value[l]!==void 0?s.value[l]:null),s.type[l]==="SID"&&(i=hv(t,i)),a[l]=i;r[s.name]=a}else i=n[s.op],i===void 0&&(i=s.value!==void 0?s.value:null),s.type==="SID"&&(i=hv(t,i)),r[s.name]=i}return r}function fte(n,e){var t={};return t.formatMajor=Vn.getCard8(n,e),t.formatMinor=Vn.getCard8(n,e+1),t.size=Vn.getCard8(n,e+2),t.offsetSize=Vn.getCard8(n,e+3),t.startOffset=e,t.endOffset=e+4,t}var GO=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],VO=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function dte(n,e){var t=zO(n,0,n.byteLength);return HO(t,GO,e)}function WO(n,e,t,r){var i=zO(n,e,t);return HO(i,VO,r)}function KR(n,e,t,r){for(var i=[],o=0;o<t.length;o+=1){var s=new DataView(new Uint8Array(t[o]).buffer),a=dte(s,r);a._subrs=[],a._subrsBias=0,a._defaultWidthX=0,a._nominalWidthX=0;var l=a.private[0],u=a.private[1];if(l!==0&&u!==0){var c=WO(n,u+e,l,r);if(a._defaultWidthX=c.defaultWidthX,a._nominalWidthX=c.nominalWidthX,c.subrs!==0){var h=u+c.subrs,f=Ih(n,h+e);a._subrs=f.objects,a._subrsBias=ME(a._subrs)}a._privateDict=c}i.push(a)}return i}function pte(n,e,t,r){var i,o,s=new Vn.Parser(n,e);t-=1;var a=[".notdef"],l=s.parseCard8();if(l===0)for(var u=0;u<t;u+=1)i=s.parseSID(),a.push(hv(r,i));else if(l===1)for(;a.length<=t;){i=s.parseSID(),o=s.parseCard8();for(var c=0;c<=o;c+=1)a.push(hv(r,i)),i+=1}else if(l===2)for(;a.length<=t;){i=s.parseSID(),o=s.parseCard16();for(var h=0;h<=o;h+=1)a.push(hv(r,i)),i+=1}else throw new Error("Unknown charset format "+l);return a}function mte(n,e,t){var r,i={},o=new Vn.Parser(n,e),s=o.parseCard8();if(s===0)for(var a=o.parseCard8(),l=0;l<a;l+=1)r=o.parseCard8(),i[r]=l;else if(s===1){var u=o.parseCard8();r=1;for(var c=0;c<u;c+=1)for(var h=o.parseCard8(),f=o.parseCard8(),d=h;d<=h+f;d+=1)i[d]=r,r+=1}else throw new Error("Unknown encoding format "+s);return new xw(i,t)}function JR(n,e,t){var r,i,o,s,a=new vo,l=[],u=0,c=!1,h=!1,f=0,d=0,v,y,w,g;if(n.isCIDFont){var x=n.tables.cff.topDict._fdSelect[e.index],_=n.tables.cff.topDict._fdArray[x];v=_._subrs,y=_._subrsBias,w=_._defaultWidthX,g=_._nominalWidthX}else v=n.tables.cff.topDict._subrs,y=n.tables.cff.topDict._subrsBias,w=n.tables.cff.topDict._defaultWidthX,g=n.tables.cff.topDict._nominalWidthX;var E=w;function C(L,k){h&&a.closePath(),a.moveTo(L,k),h=!0}function I(){var L;L=l.length%2!==0,L&&!c&&(E=l.shift()+g),u+=l.length>>1,l.length=0,c=!0}function R(L){for(var k,D,N,B,G,V,$,J,le,H,q,Z,oe=0;oe<L.length;){var F=L[oe];switch(oe+=1,F){case 1:I();break;case 3:I();break;case 4:l.length>1&&!c&&(E=l.shift()+g,c=!0),d+=l.pop(),C(f,d);break;case 5:for(;l.length>0;)f+=l.shift(),d+=l.shift(),a.lineTo(f,d);break;case 6:for(;l.length>0&&(f+=l.shift(),a.lineTo(f,d),l.length!==0);)d+=l.shift(),a.lineTo(f,d);break;case 7:for(;l.length>0&&(d+=l.shift(),a.lineTo(f,d),l.length!==0);)f+=l.shift(),a.lineTo(f,d);break;case 8:for(;l.length>0;)r=f+l.shift(),i=d+l.shift(),o=r+l.shift(),s=i+l.shift(),f=o+l.shift(),d=s+l.shift(),a.curveTo(r,i,o,s,f,d);break;case 10:G=l.pop()+y,V=v[G],V&&R(V);break;case 11:return;case 12:switch(F=L[oe],oe+=1,F){case 35:r=f+l.shift(),i=d+l.shift(),o=r+l.shift(),s=i+l.shift(),$=o+l.shift(),J=s+l.shift(),le=$+l.shift(),H=J+l.shift(),q=le+l.shift(),Z=H+l.shift(),f=q+l.shift(),d=Z+l.shift(),l.shift(),a.curveTo(r,i,o,s,$,J),a.curveTo(le,H,q,Z,f,d);break;case 34:r=f+l.shift(),i=d,o=r+l.shift(),s=i+l.shift(),$=o+l.shift(),J=s,le=$+l.shift(),H=s,q=le+l.shift(),Z=d,f=q+l.shift(),a.curveTo(r,i,o,s,$,J),a.curveTo(le,H,q,Z,f,d);break;case 36:r=f+l.shift(),i=d+l.shift(),o=r+l.shift(),s=i+l.shift(),$=o+l.shift(),J=s,le=$+l.shift(),H=s,q=le+l.shift(),Z=H+l.shift(),f=q+l.shift(),a.curveTo(r,i,o,s,$,J),a.curveTo(le,H,q,Z,f,d);break;case 37:r=f+l.shift(),i=d+l.shift(),o=r+l.shift(),s=i+l.shift(),$=o+l.shift(),J=s+l.shift(),le=$+l.shift(),H=J+l.shift(),q=le+l.shift(),Z=H+l.shift(),Math.abs(q-f)>Math.abs(Z-d)?f=q+l.shift():d=Z+l.shift(),a.curveTo(r,i,o,s,$,J),a.curveTo(le,H,q,Z,f,d);break;default:console.log("Glyph "+e.index+": unknown operator "+1200+F),l.length=0}break;case 14:l.length>0&&!c&&(E=l.shift()+g,c=!0),h&&(a.closePath(),h=!1);break;case 18:I();break;case 19:case 20:I(),oe+=u+7>>3;break;case 21:l.length>2&&!c&&(E=l.shift()+g,c=!0),d+=l.pop(),f+=l.pop(),C(f,d);break;case 22:l.length>1&&!c&&(E=l.shift()+g,c=!0),f+=l.pop(),C(f,d);break;case 23:I();break;case 24:for(;l.length>2;)r=f+l.shift(),i=d+l.shift(),o=r+l.shift(),s=i+l.shift(),f=o+l.shift(),d=s+l.shift(),a.curveTo(r,i,o,s,f,d);f+=l.shift(),d+=l.shift(),a.lineTo(f,d);break;case 25:for(;l.length>6;)f+=l.shift(),d+=l.shift(),a.lineTo(f,d);r=f+l.shift(),i=d+l.shift(),o=r+l.shift(),s=i+l.shift(),f=o+l.shift(),d=s+l.shift(),a.curveTo(r,i,o,s,f,d);break;case 26:for(l.length%2&&(f+=l.shift());l.length>0;)r=f,i=d+l.shift(),o=r+l.shift(),s=i+l.shift(),f=o,d=s+l.shift(),a.curveTo(r,i,o,s,f,d);break;case 27:for(l.length%2&&(d+=l.shift());l.length>0;)r=f+l.shift(),i=d,o=r+l.shift(),s=i+l.shift(),f=o+l.shift(),d=s,a.curveTo(r,i,o,s,f,d);break;case 28:k=L[oe],D=L[oe+1],l.push((k<<24|D<<16)>>16),oe+=2;break;case 29:G=l.pop()+n.gsubrsBias,V=n.gsubrs[G],V&&R(V);break;case 30:for(;l.length>0&&(r=f,i=d+l.shift(),o=r+l.shift(),s=i+l.shift(),f=o+l.shift(),d=s+(l.length===1?l.shift():0),a.curveTo(r,i,o,s,f,d),l.length!==0);)r=f+l.shift(),i=d,o=r+l.shift(),s=i+l.shift(),d=s+l.shift(),f=o+(l.length===1?l.shift():0),a.curveTo(r,i,o,s,f,d);break;case 31:for(;l.length>0&&(r=f+l.shift(),i=d,o=r+l.shift(),s=i+l.shift(),d=s+l.shift(),f=o+(l.length===1?l.shift():0),a.curveTo(r,i,o,s,f,d),l.length!==0);)r=f,i=d+l.shift(),o=r+l.shift(),s=i+l.shift(),f=o+l.shift(),d=s+(l.length===1?l.shift():0),a.curveTo(r,i,o,s,f,d);break;default:F<32?console.log("Glyph "+e.index+": unknown operator "+F):F<247?l.push(F-139):F<251?(k=L[oe],oe+=1,l.push((F-247)*256+k+108)):F<255?(k=L[oe],oe+=1,l.push(-(F-251)*256-k-108)):(k=L[oe],D=L[oe+1],N=L[oe+2],B=L[oe+3],oe+=4,l.push((k<<24|D<<16|N<<8|B)/65536))}}}return R(t),e.advanceWidth=E,a}function gte(n,e,t,r){var i=[],o,s=new Vn.Parser(n,e),a=s.parseCard8();if(a===0)for(var l=0;l<t;l++){if(o=s.parseCard8(),o>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+o+" (FD count "+r+")");i.push(o)}else if(a===3){var u=s.parseCard16(),c=s.parseCard16();if(c!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+c);for(var h,f=0;f<u;f++){if(o=s.parseCard8(),h=s.parseCard16(),o>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+o+" (FD count "+r+")");if(h>t)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+h);for(;c<h;c++)i.push(o);c=h}if(h!==t)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+h)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+a);return i}function vte(n,e,t,r){t.tables.cff={};var i=fte(n,e),o=Ih(n,i.endOffset,Vn.bytesToString),s=Ih(n,o.endOffset),a=Ih(n,s.endOffset,Vn.bytesToString),l=Ih(n,a.endOffset);t.gsubrs=l.objects,t.gsubrsBias=ME(t.gsubrs);var u=KR(n,e,s.objects,a.objects);if(u.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+u.length);var c=u[0];if(t.tables.cff.topDict=c,c._privateDict&&(t.defaultWidthX=c._privateDict.defaultWidthX,t.nominalWidthX=c._privateDict.nominalWidthX),c.ros[0]!==void 0&&c.ros[1]!==void 0&&(t.isCIDFont=!0),t.isCIDFont){var h=c.fdArray,f=c.fdSelect;if(h===0||f===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");h+=e;var d=Ih(n,h),v=KR(n,e,d.objects,a.objects);c._fdArray=v,f+=e,c._fdSelect=gte(n,f,t.numGlyphs,v.length)}var y=e+c.private[1],w=WO(n,y,c.private[0],a.objects);if(t.defaultWidthX=w.defaultWidthX,t.nominalWidthX=w.nominalWidthX,w.subrs!==0){var g=y+w.subrs,x=Ih(n,g);t.subrs=x.objects,t.subrsBias=ME(t.subrs)}else t.subrs=[],t.subrsBias=0;var _;r.lowMemory?(_=ate(n,e+c.charStrings),t.nGlyphs=_.offsets.length):(_=Ih(n,e+c.charStrings),t.nGlyphs=_.objects.length);var E=pte(n,e+c.charset,t.nGlyphs,a.objects);if(c.encoding===0?t.cffEncoding=new xw(ete,E):c.encoding===1?t.cffEncoding=new xw(tte,E):t.cffEncoding=mte(n,e+c.encoding,E),t.encoding=t.encoding||t.cffEncoding,t.glyphs=new Du.GlyphSet(t),r.lowMemory)t._push=function(R){var L=lte(R,_.offsets,n,e+c.charStrings);t.glyphs.push(R,Du.cffGlyphLoader(t,R,JR,L))};else for(var C=0;C<t.nGlyphs;C+=1){var I=_.objects[C];t.glyphs.push(C,Du.cffGlyphLoader(t,C,JR,I))}}function jO(n,e){var t,r=gx.indexOf(n);return r>=0&&(t=r),r=e.indexOf(n),r>=0?t=r+gx.length:(t=gx.length+e.length,e.push(n)),t}function yte(){return new nn.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function xte(n){var e=new nn.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);e.names=[];for(var t=0;t<n.length;t+=1)e.names.push({name:"name_"+t,type:"NAME",value:n[t]});return e}function $O(n,e,t){for(var r={},i=0;i<n.length;i+=1){var o=n[i],s=e[o.name];s!==void 0&&!UO(s,o.value)&&(o.type==="SID"&&(s=jO(s,t)),r[o.op]={name:o.name,type:o.type,value:s})}return r}function QR(n,e){var t=new nn.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return t.dict=$O(GO,n,e),t}function e4(n){var e=new nn.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return e.topDicts=[{name:"topDict_0",type:"TABLE",value:n}],e}function wte(n){var e=new nn.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);e.strings=[];for(var t=0;t<n.length;t+=1)e.strings.push({name:"string_"+t,type:"STRING",value:n[t]});return e}function Ste(){return new nn.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function _te(n,e){for(var t=new nn.Record("Charsets",[{name:"format",type:"Card8",value:0}]),r=0;r<n.length;r+=1){var i=n[r],o=jO(i,e);t.fields.push({name:"glyph_"+r,type:"SID",value:o})}return t}function bte(n){var e=[],t=n.path;e.push({name:"width",type:"NUMBER",value:n.advanceWidth});for(var r=0,i=0,o=0;o<t.commands.length;o+=1){var s=void 0,a=void 0,l=t.commands[o];if(l.type==="Q"){var u=.3333333333333333,c=2/3;l={type:"C",x:l.x,y:l.y,x1:Math.round(u*r+c*l.x1),y1:Math.round(u*i+c*l.y1),x2:Math.round(u*l.x+c*l.x1),y2:Math.round(u*l.y+c*l.y1)}}if(l.type==="M")s=Math.round(l.x-r),a=Math.round(l.y-i),e.push({name:"dx",type:"NUMBER",value:s}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(l.x),i=Math.round(l.y);else if(l.type==="L")s=Math.round(l.x-r),a=Math.round(l.y-i),e.push({name:"dx",type:"NUMBER",value:s}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rlineto",type:"OP",value:5}),r=Math.round(l.x),i=Math.round(l.y);else if(l.type==="C"){var h=Math.round(l.x1-r),f=Math.round(l.y1-i),d=Math.round(l.x2-l.x1),v=Math.round(l.y2-l.y1);s=Math.round(l.x-l.x2),a=Math.round(l.y-l.y2),e.push({name:"dx1",type:"NUMBER",value:h}),e.push({name:"dy1",type:"NUMBER",value:f}),e.push({name:"dx2",type:"NUMBER",value:d}),e.push({name:"dy2",type:"NUMBER",value:v}),e.push({name:"dx",type:"NUMBER",value:s}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(l.x),i=Math.round(l.y)}}return e.push({name:"endchar",type:"OP",value:14}),e}function Mte(n){for(var e=new nn.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),t=0;t<n.length;t+=1){var r=n.get(t),i=bte(r);e.charStrings.push({name:r.name,type:"CHARSTRING",value:i})}return e}function Ete(n,e){var t=new nn.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return t.dict=$O(VO,n,e),t}function Ate(n,e){for(var t=new nn.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),r=1/e.unitsPerEm,i={version:e.version,fullName:e.fullName,familyName:e.familyName,weight:e.weightName,fontBBox:e.fontBBox||[0,0,0,0],fontMatrix:[r,0,0,r,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},o={},s=[],a,l=1;l<n.length;l+=1)a=n.get(l),s.push(a.name);var u=[];t.header=yte(),t.nameIndex=xte([e.postScriptName]);var c=QR(i,u);t.topDictIndex=e4(c),t.globalSubrIndex=Ste(),t.charsets=_te(s,u),t.charStringsIndex=Mte(n),t.privateDict=Ete(o,u),t.stringIndex=wte(u);var h=t.header.sizeOf()+t.nameIndex.sizeOf()+t.topDictIndex.sizeOf()+t.stringIndex.sizeOf()+t.globalSubrIndex.sizeOf();return i.charset=h,i.encoding=0,i.charStrings=i.charset+t.charsets.sizeOf(),i.private[1]=i.charStrings+t.charStringsIndex.sizeOf(),c=QR(i,u),t.topDictIndex=e4(c),t}var Tte={parse:vte,make:Ate};function Cte(n,e){var t={},r=new Vn.Parser(n,e);return t.version=r.parseVersion(),t.fontRevision=Math.round(r.parseFixed()*1e3)/1e3,t.checkSumAdjustment=r.parseULong(),t.magicNumber=r.parseULong(),Fn.argument(t.magicNumber===1594834165,"Font header has wrong magic number."),t.flags=r.parseUShort(),t.unitsPerEm=r.parseUShort(),t.created=r.parseLongDateTime(),t.modified=r.parseLongDateTime(),t.xMin=r.parseShort(),t.yMin=r.parseShort(),t.xMax=r.parseShort(),t.yMax=r.parseShort(),t.macStyle=r.parseUShort(),t.lowestRecPPEM=r.parseUShort(),t.fontDirectionHint=r.parseShort(),t.indexToLocFormat=r.parseShort(),t.glyphDataFormat=r.parseShort(),t}function Pte(n){var e=Math.round(new Date().getTime()/1e3)+2082844800,t=e;return n.createdTimestamp&&(t=n.createdTimestamp+2082844800),new nn.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:t},{name:"modified",type:"LONGDATETIME",value:e},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],n)}var Lte={parse:Cte,make:Pte};function Rte(n,e){var t={},r=new Vn.Parser(n,e);return t.version=r.parseVersion(),t.ascender=r.parseShort(),t.descender=r.parseShort(),t.lineGap=r.parseShort(),t.advanceWidthMax=r.parseUShort(),t.minLeftSideBearing=r.parseShort(),t.minRightSideBearing=r.parseShort(),t.xMaxExtent=r.parseShort(),t.caretSlopeRise=r.parseShort(),t.caretSlopeRun=r.parseShort(),t.caretOffset=r.parseShort(),r.relativeOffset+=8,t.metricDataFormat=r.parseShort(),t.numberOfHMetrics=r.parseUShort(),t}function kte(n){return new nn.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],n)}var Ite={parse:Rte,make:kte};function Nte(n,e,t,r,i){for(var o,s,a=new Vn.Parser(n,e),l=0;l<r;l+=1){l<t&&(o=a.parseUShort(),s=a.parseShort());var u=i.get(l);u.advanceWidth=o,u.leftSideBearing=s}}function Fte(n,e,t,r,i){n._hmtxTableData={};for(var o,s,a=new Vn.Parser(e,t),l=0;l<i;l+=1)l<r&&(o=a.parseUShort(),s=a.parseShort()),n._hmtxTableData[l]={advanceWidth:o,leftSideBearing:s}}function Dte(n,e,t,r,i,o,s){s.lowMemory?Fte(n,e,t,r,i):Nte(e,t,r,i,o)}function Ote(n){for(var e=new nn.Table("hmtx",[]),t=0;t<n.length;t+=1){var r=n.get(t),i=r.advanceWidth||0,o=r.leftSideBearing||0;e.fields.push({name:"advanceWidth_"+t,type:"USHORT",value:i}),e.fields.push({name:"leftSideBearing_"+t,type:"SHORT",value:o})}return e}var Bte={parse:Dte,make:Ote};function Ute(n){for(var e=new nn.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:n.length}]),t="",r=12+n.length*4,i=0;i<n.length;++i){var o=t.indexOf(n[i]);o<0&&(o=t.length,t+=n[i]),e.fields.push({name:"offset "+i,type:"USHORT",value:r+o}),e.fields.push({name:"length "+i,type:"USHORT",value:n[i].length})}return e.fields.push({name:"stringPool",type:"CHARARRAY",value:t}),e}function zte(n,e){var t=new Vn.Parser(n,e),r=t.parseULong();Fn.argument(r===1,"Unsupported ltag table version."),t.skip("uLong",1);for(var i=t.parseULong(),o=[],s=0;s<i;s++){for(var a="",l=e+t.parseUShort(),u=t.parseUShort(),c=l;c<l+u;++c)a+=String.fromCharCode(n.getInt8(c));o.push(a)}return o}var Hte={make:Ute,parse:zte};function Gte(n,e){var t={},r=new Vn.Parser(n,e);return t.version=r.parseVersion(),t.numGlyphs=r.parseUShort(),t.version===1&&(t.maxPoints=r.parseUShort(),t.maxContours=r.parseUShort(),t.maxCompositePoints=r.parseUShort(),t.maxCompositeContours=r.parseUShort(),t.maxZones=r.parseUShort(),t.maxTwilightPoints=r.parseUShort(),t.maxStorage=r.parseUShort(),t.maxFunctionDefs=r.parseUShort(),t.maxInstructionDefs=r.parseUShort(),t.maxStackElements=r.parseUShort(),t.maxSizeOfInstructions=r.parseUShort(),t.maxComponentElements=r.parseUShort(),t.maxComponentDepth=r.parseUShort()),t}function Vte(n){return new nn.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:n}])}var Wte={parse:Gte,make:Vte},qO=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],XO={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},jte={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},YO={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function $te(n,e,t){switch(n){case 0:if(e===65535)return"und";if(t)return t[e];break;case 1:return XO[e];case 3:return YO[e]}}var EE="utf-16",qte={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},Xte={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function ZO(n,e,t){switch(n){case 0:return EE;case 1:return Xte[t]||qte[e];case 3:if(e===1||e===10)return EE;break}}function Yte(n,e,t){for(var r={},i=new Vn.Parser(n,e),o=i.parseUShort(),s=i.parseUShort(),a=i.offset+i.parseUShort(),l=0;l<s;l++){var u=i.parseUShort(),c=i.parseUShort(),h=i.parseUShort(),f=i.parseUShort(),d=qO[f]||f,v=i.parseUShort(),y=i.parseUShort(),w=$te(u,h,t),g=ZO(u,c,h);if(g!==void 0&&w!==void 0){var x=void 0;if(g===EE?x=vg.UTF16(n,a+y,v):x=vg.MACSTRING(n,a+y,v,g),x){var _=r[d];_===void 0&&(_=r[d]={}),_[w]=x}}}return o===1&&i.parseUShort(),r}function Yb(n){var e={};for(var t in n)e[n[t]]=parseInt(t);return e}function t4(n,e,t,r,i,o){return new nn.Record("NameRecord",[{name:"platformID",type:"USHORT",value:n},{name:"encodingID",type:"USHORT",value:e},{name:"languageID",type:"USHORT",value:t},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:o}])}function Zte(n,e){var t=n.length,r=e.length-t+1;e:for(var i=0;i<r;i++)for(;i<r;i++){for(var o=0;o<t;o++)if(e[i+o]!==n[o])continue e;return i}return-1}function n4(n,e){var t=Zte(n,e);if(t<0){t=e.length;for(var r=0,i=n.length;r<i;++r)e.push(n[r])}return t}function Kte(n,e){var t,r=[],i={},o=Yb(qO);for(var s in n){var a=o[s];if(a===void 0&&(a=s),t=parseInt(a),isNaN(t))throw new Error('Name table entry "'+s+'" does not exist, see nameTableNames for complete list.');i[t]=n[s],r.push(t)}for(var l=Yb(XO),u=Yb(YO),c=[],h=[],f=0;f<r.length;f++){t=r[f];var d=i[t];for(var v in d){var y=d[v],w=1,g=l[v],x=jte[g],_=ZO(w,x,g),E=Gt.MACSTRING(y,_);E===void 0&&(w=0,g=e.indexOf(v),g<0&&(g=e.length,e.push(v)),x=4,E=Gt.UTF16(y));var C=n4(E,h);c.push(t4(w,x,g,t,E.length,C));var I=u[v];if(I!==void 0){var R=Gt.UTF16(y),L=n4(R,h);c.push(t4(3,1,I,t,R.length,L))}}}c.sort(function(N,B){return N.platformID-B.platformID||N.encodingID-B.encodingID||N.languageID-B.languageID||N.nameID-B.nameID});for(var k=new nn.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:c.length},{name:"stringOffset",type:"USHORT",value:6+c.length*12}]),D=0;D<c.length;D++)k.fields.push({name:"record_"+D,type:"RECORD",value:c[D]});return k.fields.push({name:"strings",type:"LITERAL",value:h}),k}var Jte={parse:Yte,make:Kte},AE=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function Qte(n){for(var e=0;e<AE.length;e+=1){var t=AE[e];if(n>=t.begin&&n<t.end)return e}return-1}function ene(n,e){var t={},r=new Vn.Parser(n,e);t.version=r.parseUShort(),t.xAvgCharWidth=r.parseShort(),t.usWeightClass=r.parseUShort(),t.usWidthClass=r.parseUShort(),t.fsType=r.parseUShort(),t.ySubscriptXSize=r.parseShort(),t.ySubscriptYSize=r.parseShort(),t.ySubscriptXOffset=r.parseShort(),t.ySubscriptYOffset=r.parseShort(),t.ySuperscriptXSize=r.parseShort(),t.ySuperscriptYSize=r.parseShort(),t.ySuperscriptXOffset=r.parseShort(),t.ySuperscriptYOffset=r.parseShort(),t.yStrikeoutSize=r.parseShort(),t.yStrikeoutPosition=r.parseShort(),t.sFamilyClass=r.parseShort(),t.panose=[];for(var i=0;i<10;i++)t.panose[i]=r.parseByte();return t.ulUnicodeRange1=r.parseULong(),t.ulUnicodeRange2=r.parseULong(),t.ulUnicodeRange3=r.parseULong(),t.ulUnicodeRange4=r.parseULong(),t.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),t.fsSelection=r.parseUShort(),t.usFirstCharIndex=r.parseUShort(),t.usLastCharIndex=r.parseUShort(),t.sTypoAscender=r.parseShort(),t.sTypoDescender=r.parseShort(),t.sTypoLineGap=r.parseShort(),t.usWinAscent=r.parseUShort(),t.usWinDescent=r.parseUShort(),t.version>=1&&(t.ulCodePageRange1=r.parseULong(),t.ulCodePageRange2=r.parseULong()),t.version>=2&&(t.sxHeight=r.parseShort(),t.sCapHeight=r.parseShort(),t.usDefaultChar=r.parseUShort(),t.usBreakChar=r.parseUShort(),t.usMaxContent=r.parseUShort()),t}function tne(n){return new nn.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],n)}var r4={parse:ene,make:tne,unicodeRanges:AE,getUnicodeRange:Qte};function nne(n,e){var t={},r=new Vn.Parser(n,e);switch(t.version=r.parseVersion(),t.italicAngle=r.parseFixed(),t.underlinePosition=r.parseShort(),t.underlineThickness=r.parseShort(),t.isFixedPitch=r.parseULong(),t.minMemType42=r.parseULong(),t.maxMemType42=r.parseULong(),t.minMemType1=r.parseULong(),t.maxMemType1=r.parseULong(),t.version){case 1:t.names=ZR.slice();break;case 2:t.numberOfGlyphs=r.parseUShort(),t.glyphNameIndex=new Array(t.numberOfGlyphs);for(var i=0;i<t.numberOfGlyphs;i++)t.glyphNameIndex[i]=r.parseUShort();t.names=[];for(var o=0;o<t.numberOfGlyphs;o++)if(t.glyphNameIndex[o]>=ZR.length){var s=r.parseChar();t.names.push(r.parseString(s))}break;case 2.5:t.numberOfGlyphs=r.parseUShort(),t.offset=new Array(t.numberOfGlyphs);for(var a=0;a<t.numberOfGlyphs;a++)t.offset[a]=r.parseChar();break}return t}function rne(){return new nn.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var ine={parse:nne,make:rne},Xl=new Array(9);Xl[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{substFormat:1,coverage:this.parsePointer(lt.coverage),deltaGlyphId:this.parseUShort()};if(t===2)return{substFormat:2,coverage:this.parsePointer(lt.coverage),substitute:this.parseOffset16List()};Fn.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")};Xl[2]=function(){var e=this.parseUShort();return Fn.argument(e===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(lt.coverage),sequences:this.parseListOfLists()}};Xl[3]=function(){var e=this.parseUShort();return Fn.argument(e===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(lt.coverage),alternateSets:this.parseListOfLists()}};Xl[4]=function(){var e=this.parseUShort();return Fn.argument(e===1,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(lt.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var Xm={sequenceIndex:lt.uShort,lookupListIndex:lt.uShort};Xl[5]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{substFormat:t,coverage:this.parsePointer(lt.coverage),ruleSets:this.parseListOfLists(function(){var o=this.parseUShort(),s=this.parseUShort();return{input:this.parseUShortList(o-1),lookupRecords:this.parseRecordList(s,Xm)}})};if(t===2)return{substFormat:t,coverage:this.parsePointer(lt.coverage),classDef:this.parsePointer(lt.classDef),classSets:this.parseListOfLists(function(){var o=this.parseUShort(),s=this.parseUShort();return{classes:this.parseUShortList(o-1),lookupRecords:this.parseRecordList(s,Xm)}})};if(t===3){var r=this.parseUShort(),i=this.parseUShort();return{substFormat:t,coverages:this.parseList(r,lt.pointer(lt.coverage)),lookupRecords:this.parseRecordList(i,Xm)}}Fn.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};Xl[6]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{substFormat:1,coverage:this.parsePointer(lt.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Xm)}})};if(t===2)return{substFormat:2,coverage:this.parsePointer(lt.coverage),backtrackClassDef:this.parsePointer(lt.classDef),inputClassDef:this.parsePointer(lt.classDef),lookaheadClassDef:this.parsePointer(lt.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(Xm)}})};if(t===3)return{substFormat:3,backtrackCoverage:this.parseList(lt.pointer(lt.coverage)),inputCoverage:this.parseList(lt.pointer(lt.coverage)),lookaheadCoverage:this.parseList(lt.pointer(lt.coverage)),lookupRecords:this.parseRecordList(Xm)};Fn.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};Xl[7]=function(){var e=this.parseUShort();Fn.argument(e===1,"GSUB Extension Substitution subtable identifier-format must be 1");var t=this.parseUShort(),r=new lt(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:t,extension:Xl[t].call(r)}};Xl[8]=function(){var e=this.parseUShort();return Fn.argument(e===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(lt.coverage),backtrackCoverage:this.parseList(lt.pointer(lt.coverage)),lookaheadCoverage:this.parseList(lt.pointer(lt.coverage)),substitutes:this.parseUShortList()}};function one(n,e){e=e||0;var t=new lt(n,e),r=t.parseVersion(1);return Fn.argument(r===1||r===1.1,"Unsupported GSUB table version."),r===1?{version:r,scripts:t.parseScriptList(),features:t.parseFeatureList(),lookups:t.parseLookupList(Xl)}:{version:r,scripts:t.parseScriptList(),features:t.parseFeatureList(),lookups:t.parseLookupList(Xl),variations:t.parseFeatureVariationsList()}}var Tg=new Array(9);Tg[1]=function(e){return e.substFormat===1?new nn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new nn.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new nn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new nn.Coverage(e.coverage)}].concat(nn.ushortList("substitute",e.substitute)))};Tg[2]=function(e){return Fn.assert(e.substFormat===1,"Lookup type 2 substFormat must be 1."),new nn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new nn.Coverage(e.coverage)}].concat(nn.tableList("seqSet",e.sequences,function(t){return new nn.Table("sequenceSetTable",nn.ushortList("sequence",t))})))};Tg[3]=function(e){return Fn.assert(e.substFormat===1,"Lookup type 3 substFormat must be 1."),new nn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new nn.Coverage(e.coverage)}].concat(nn.tableList("altSet",e.alternateSets,function(t){return new nn.Table("alternateSetTable",nn.ushortList("alternate",t))})))};Tg[4]=function(e){return Fn.assert(e.substFormat===1,"Lookup type 4 substFormat must be 1."),new nn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new nn.Coverage(e.coverage)}].concat(nn.tableList("ligSet",e.ligatureSets,function(t){return new nn.Table("ligatureSetTable",nn.tableList("ligature",t,function(r){return new nn.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:r.ligGlyph}].concat(nn.ushortList("component",r.components,r.components.length+1)))}))})))};Tg[6]=function(e){if(e.substFormat===1){var t=new nn.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:e.substFormat},{name:"coverage",type:"TABLE",value:new nn.Coverage(e.coverage)}].concat(nn.tableList("chainRuleSet",e.chainRuleSets,function(o){return new nn.Table("chainRuleSetTable",nn.tableList("chainRule",o,function(s){var a=nn.ushortList("backtrackGlyph",s.backtrack,s.backtrack.length).concat(nn.ushortList("inputGlyph",s.input,s.input.length+1)).concat(nn.ushortList("lookaheadGlyph",s.lookahead,s.lookahead.length)).concat(nn.ushortList("substitution",[],s.lookupRecords.length));return s.lookupRecords.forEach(function(l,u){a=a.concat({name:"sequenceIndex"+u,type:"USHORT",value:l.sequenceIndex}).concat({name:"lookupListIndex"+u,type:"USHORT",value:l.lookupListIndex})}),new nn.Table("chainRuleTable",a)}))})));return t}else if(e.substFormat===2)Fn.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(e.substFormat===3){var r=[{name:"substFormat",type:"USHORT",value:e.substFormat}];r.push({name:"backtrackGlyphCount",type:"USHORT",value:e.backtrackCoverage.length}),e.backtrackCoverage.forEach(function(o,s){r.push({name:"backtrackCoverage"+s,type:"TABLE",value:new nn.Coverage(o)})}),r.push({name:"inputGlyphCount",type:"USHORT",value:e.inputCoverage.length}),e.inputCoverage.forEach(function(o,s){r.push({name:"inputCoverage"+s,type:"TABLE",value:new nn.Coverage(o)})}),r.push({name:"lookaheadGlyphCount",type:"USHORT",value:e.lookaheadCoverage.length}),e.lookaheadCoverage.forEach(function(o,s){r.push({name:"lookaheadCoverage"+s,type:"TABLE",value:new nn.Coverage(o)})}),r.push({name:"substitutionCount",type:"USHORT",value:e.lookupRecords.length}),e.lookupRecords.forEach(function(o,s){r=r.concat({name:"sequenceIndex"+s,type:"USHORT",value:o.sequenceIndex}).concat({name:"lookupListIndex"+s,type:"USHORT",value:o.lookupListIndex})});var i=new nn.Table("chainContextTable",r);return i}Fn.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};function sne(n){return new nn.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new nn.ScriptList(n.scripts)},{name:"features",type:"TABLE",value:new nn.FeatureList(n.features)},{name:"lookups",type:"TABLE",value:new nn.LookupList(n.lookups,Tg)}])}var ane={parse:one,make:sne};function lne(n,e){var t=new Vn.Parser(n,e),r=t.parseULong();Fn.argument(r===1,"Unsupported META table version."),t.parseULong(),t.parseULong();for(var i=t.parseULong(),o={},s=0;s<i;s++){var a=t.parseTag(),l=t.parseULong(),u=t.parseULong(),c=vg.UTF8(n,e+l,u);o[a]=c}return o}function une(n){var e=Object.keys(n).length,t="",r=16+e*12,i=new nn.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:r},{name:"numTags",type:"ULONG",value:e}]);for(var o in n){var s=t.length;t+=n[o],i.fields.push({name:"tag "+o,type:"TAG",value:o}),i.fields.push({name:"offset "+o,type:"ULONG",value:r+s}),i.fields.push({name:"length "+o,type:"ULONG",value:n[o].length})}return i.fields.push({name:"stringPool",type:"CHARARRAY",value:t}),i}var cne={parse:lne,make:une};function i4(n){return Math.log(n)/Math.log(2)|0}function rT(n){for(;n.length%4!==0;)n.push(0);for(var e=0,t=0;t<n.length;t+=4)e+=(n[t]<<24)+(n[t+1]<<16)+(n[t+2]<<8)+n[t+3];return e%=Math.pow(2,32),e}function o4(n,e,t,r){return new nn.Record("Table Record",[{name:"tag",type:"TAG",value:n!==void 0?n:""},{name:"checkSum",type:"ULONG",value:e!==void 0?e:0},{name:"offset",type:"ULONG",value:t!==void 0?t:0},{name:"length",type:"ULONG",value:r!==void 0?r:0}])}function KO(n){var e=new nn.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);e.tables=n,e.numTables=n.length;var t=Math.pow(2,i4(e.numTables));e.searchRange=16*t,e.entrySelector=i4(t),e.rangeShift=e.numTables*16-e.searchRange;for(var r=[],i=[],o=e.sizeOf()+o4().sizeOf()*e.numTables;o%4!==0;)o+=1,i.push({name:"padding",type:"BYTE",value:0});for(var s=0;s<n.length;s+=1){var a=n[s];Fn.argument(a.tableName.length===4,"Table name"+a.tableName+" is invalid.");var l=a.sizeOf(),u=o4(a.tableName,rT(a.encode()),o,l);for(r.push({name:u.tag+" Table Record",type:"RECORD",value:u}),i.push({name:a.tableName+" table",type:"RECORD",value:a}),o+=l,Fn.argument(!isNaN(o),"Something went wrong calculating the offset.");o%4!==0;)o+=1,i.push({name:"padding",type:"BYTE",value:0})}return r.sort(function(c,h){return c.value.tag>h.value.tag?1:-1}),e.fields=e.fields.concat(r),e.fields=e.fields.concat(i),e}function s4(n,e,t){for(var r=0;r<e.length;r+=1){var i=n.charToGlyphIndex(e[r]);if(i>0){var o=n.glyphs.get(i);return o.getMetrics()}}return t}function hne(n){for(var e=0,t=0;t<n.length;t+=1)e+=n[t];return e/n.length}function fne(n){for(var e=[],t=[],r=[],i=[],o=[],s=[],a=[],l,u=0,c=0,h=0,f=0,d=0,v=0;v<n.glyphs.length;v+=1){var y=n.glyphs.get(v),w=y.unicode|0;if(isNaN(y.advanceWidth))throw new Error("Glyph "+y.name+" ("+v+"): advanceWidth is not a number.");(l>w||l===void 0)&&w>0&&(l=w),u<w&&(u=w);var g=r4.getUnicodeRange(w);if(g<32)c|=1<<g;else if(g<64)h|=1<<g-32;else if(g<96)f|=1<<g-64;else if(g<123)d|=1<<g-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if(y.name!==".notdef"){var x=y.getMetrics();e.push(x.xMin),t.push(x.yMin),r.push(x.xMax),i.push(x.yMax),s.push(x.leftSideBearing),a.push(x.rightSideBearing),o.push(y.advanceWidth)}}var _={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,t),xMax:Math.max.apply(null,r),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,o),advanceWidthAvg:hne(o),minLeftSideBearing:Math.min.apply(null,s),maxLeftSideBearing:Math.max.apply(null,s),minRightSideBearing:Math.min.apply(null,a)};_.ascender=n.ascender,_.descender=n.descender;var E=Lte.make({flags:3,unitsPerEm:n.unitsPerEm,xMin:_.xMin,yMin:_.yMin,xMax:_.xMax,yMax:_.yMax,lowestRecPPEM:3,createdTimestamp:n.createdTimestamp}),C=Ite.make({ascender:_.ascender,descender:_.descender,advanceWidthMax:_.advanceWidthMax,minLeftSideBearing:_.minLeftSideBearing,minRightSideBearing:_.minRightSideBearing,xMaxExtent:_.maxLeftSideBearing+(_.xMax-_.xMin),numberOfHMetrics:n.glyphs.length}),I=Wte.make(n.glyphs.length),R=r4.make(Object.assign({xAvgCharWidth:Math.round(_.advanceWidthAvg),usFirstCharIndex:l,usLastCharIndex:u,ulUnicodeRange1:c,ulUnicodeRange2:h,ulUnicodeRange3:f,ulUnicodeRange4:d,sTypoAscender:_.ascender,sTypoDescender:_.descender,sTypoLineGap:0,usWinAscent:_.yMax,usWinDescent:Math.abs(_.yMin),ulCodePageRange1:1,sxHeight:s4(n,"xyvw",{yMax:Math.round(_.ascender/2)}).yMax,sCapHeight:s4(n,"HIKLEFJMNTZBDPRAGOQSUVWXY",_).yMax,usDefaultChar:n.hasChar(" ")?32:0,usBreakChar:n.hasChar(" ")?32:0},n.tables.os2)),L=Bte.make(n.glyphs),k=Qee.make(n.glyphs),D=n.getEnglishName("fontFamily"),N=n.getEnglishName("fontSubfamily"),B=D+" "+N,G=n.getEnglishName("postScriptName");G||(G=D.replace(/\s/g,"")+"-"+N);var V={};for(var $ in n.names)V[$]=n.names[$];V.uniqueID||(V.uniqueID={en:n.getEnglishName("manufacturer")+":"+B}),V.postScriptName||(V.postScriptName={en:G}),V.preferredFamily||(V.preferredFamily=n.names.fontFamily),V.preferredSubfamily||(V.preferredSubfamily=n.names.fontSubfamily);var J=[],le=Jte.make(V,J),H=J.length>0?Hte.make(J):void 0,q=ine.make(),Z=Tte.make(n.glyphs,{version:n.getEnglishName("version"),fullName:B,familyName:D,weightName:N,postScriptName:G,unitsPerEm:n.unitsPerEm,fontBBox:[0,_.yMin,_.ascender,_.advanceWidthMax]}),oe=n.metas&&Object.keys(n.metas).length>0?cne.make(n.metas):void 0,F=[E,C,I,R,le,k,q,Z,L];H&&F.push(H),n.tables.gsub&&F.push(ane.make(n.tables.gsub)),oe&&F.push(oe);for(var j=KO(F),Q=j.encode(),se=rT(Q),fe=j.fields,we=!1,Ee=0;Ee<fe.length;Ee+=1)if(fe[Ee].name==="head table"){fe[Ee].value.checkSumAdjustment=2981146554-se,we=!0;break}if(!we)throw new Error("Could not find head table with checkSum to adjust.");return j}var dne={make:KO,fontToTable:fne,computeCheckSum:rT};function Zb(n,e){for(var t=0,r=n.length-1;t<=r;){var i=t+r>>>1,o=n[i].tag;if(o===e)return i;o<e?t=i+1:r=i-1}return-t-1}function a4(n,e){for(var t=0,r=n.length-1;t<=r;){var i=t+r>>>1,o=n[i];if(o===e)return i;o<e?t=i+1:r=i-1}return-t-1}function l4(n,e){for(var t,r=0,i=n.length-1;r<=i;){var o=r+i>>>1;t=n[o];var s=t.start;if(s===e)return t;s<e?r=o+1:i=o-1}if(r>0)return t=n[r-1],e>t.end?0:t}function U1(n,e){this.font=n,this.tableName=e}U1.prototype={searchTag:Zb,binSearch:a4,getTable:function(n){var e=this.font.tables[this.tableName];return!e&&n&&(e=this.font.tables[this.tableName]=this.createDefaultTable()),e},getScriptNames:function(){var n=this.getTable();return n?n.scripts.map(function(e){return e.tag}):[]},getDefaultScriptName:function(){var n=this.getTable();if(n){for(var e=!1,t=0;t<n.scripts.length;t++){var r=n.scripts[t].tag;if(r==="DFLT")return r;r==="latn"&&(e=!0)}if(e)return"latn"}},getScriptTable:function(n,e){var t=this.getTable(e);if(t){n=n||"DFLT";var r=t.scripts,i=Zb(t.scripts,n);if(i>=0)return r[i].script;if(e){var o={tag:n,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return r.splice(-1-i,0,o),o.script}}},getLangSysTable:function(n,e,t){var r=this.getScriptTable(n,t);if(r){if(!e||e==="dflt"||e==="DFLT")return r.defaultLangSys;var i=Zb(r.langSysRecords,e);if(i>=0)return r.langSysRecords[i].langSys;if(t){var o={tag:e,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return r.langSysRecords.splice(-1-i,0,o),o.langSys}}},getFeatureTable:function(n,e,t,r){var i=this.getLangSysTable(n,e,r);if(i){for(var o,s=i.featureIndexes,a=this.font.tables[this.tableName].features,l=0;l<s.length;l++)if(o=a[s[l]],o.tag===t)return o.feature;if(r){var u=a.length;return Fn.assert(u===0||t>=a[u-1].tag,"Features must be added in alphabetical order."),o={tag:t,feature:{params:0,lookupListIndexes:[]}},a.push(o),s.push(u),o.feature}}},getLookupTables:function(n,e,t,r,i){var o=this.getFeatureTable(n,e,t,i),s=[];if(o){for(var a,l=o.lookupListIndexes,u=this.font.tables[this.tableName].lookups,c=0;c<l.length;c++)a=u[l[c]],a.lookupType===r&&s.push(a);if(s.length===0&&i){a={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0};var h=u.length;return u.push(a),l.push(h),[a]}}return s},getGlyphClass:function(n,e){switch(n.format){case 1:return n.startGlyph<=e&&e<n.startGlyph+n.classes.length?n.classes[e-n.startGlyph]:0;case 2:var t=l4(n.ranges,e);return t?t.classId:0}},getCoverageIndex:function(n,e){switch(n.format){case 1:var t=a4(n.glyphs,e);return t>=0?t:-1;case 2:var r=l4(n.ranges,e);return r?r.index+e-r.start:-1}},expandCoverage:function(n){if(n.format===1)return n.glyphs;for(var e=[],t=n.ranges,r=0;r<t.length;r++)for(var i=t[r],o=i.start,s=i.end,a=o;a<=s;a++)e.push(a);return e}};function z1(n){U1.call(this,n,"gpos")}z1.prototype=U1.prototype;z1.prototype.init=function(){var n=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(n)};z1.prototype.getKerningValue=function(n,e,t){for(var r=0;r<n.length;r++)for(var i=n[r].subtables,o=0;o<i.length;o++){var s=i[o],a=this.getCoverageIndex(s.coverage,e);if(!(a<0))switch(s.posFormat){case 1:for(var l=s.pairSets[a],u=0;u<l.length;u++){var c=l[u];if(c.secondGlyph===t)return c.value1&&c.value1.xAdvance||0}break;case 2:var h=this.getGlyphClass(s.classDef1,e),f=this.getGlyphClass(s.classDef2,t),d=s.classRecords[h][f];return d.value1&&d.value1.xAdvance||0}}return 0};z1.prototype.getKerningTables=function(n,e){if(this.font.tables.gpos)return this.getLookupTables(n,e,"kern",2)};function Ca(n){U1.call(this,n,"gsub")}function pne(n,e){var t=n.length;if(t!==e.length)return!1;for(var r=0;r<t;r++)if(n[r]!==e[r])return!1;return!0}function iT(n,e,t){for(var r=n.subtables,i=0;i<r.length;i++){var o=r[i];if(o.substFormat===e)return o}if(t)return r.push(t),t}Ca.prototype=U1.prototype;Ca.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};Ca.prototype.getSingle=function(n,e,t){for(var r=[],i=this.getLookupTables(e,t,n,1),o=0;o<i.length;o++)for(var s=i[o].subtables,a=0;a<s.length;a++){var l=s[a],u=this.expandCoverage(l.coverage),c=void 0;if(l.substFormat===1){var h=l.deltaGlyphId;for(c=0;c<u.length;c++){var f=u[c];r.push({sub:f,by:f+h})}}else{var d=l.substitute;for(c=0;c<u.length;c++)r.push({sub:u[c],by:d[c]})}}return r};Ca.prototype.getMultiple=function(n,e,t){for(var r=[],i=this.getLookupTables(e,t,n,2),o=0;o<i.length;o++)for(var s=i[o].subtables,a=0;a<s.length;a++){var l=s[a],u=this.expandCoverage(l.coverage),c=void 0;for(c=0;c<u.length;c++){var h=u[c],f=l.sequences[c];r.push({sub:h,by:f})}}return r};Ca.prototype.getAlternates=function(n,e,t){for(var r=[],i=this.getLookupTables(e,t,n,3),o=0;o<i.length;o++)for(var s=i[o].subtables,a=0;a<s.length;a++)for(var l=s[a],u=this.expandCoverage(l.coverage),c=l.alternateSets,h=0;h<u.length;h++)r.push({sub:u[h],by:c[h]});return r};Ca.prototype.getLigatures=function(n,e,t){for(var r=[],i=this.getLookupTables(e,t,n,4),o=0;o<i.length;o++)for(var s=i[o].subtables,a=0;a<s.length;a++)for(var l=s[a],u=this.expandCoverage(l.coverage),c=l.ligatureSets,h=0;h<u.length;h++)for(var f=u[h],d=c[h],v=0;v<d.length;v++){var y=d[v];r.push({sub:[f].concat(y.components),by:y.ligGlyph})}return r};Ca.prototype.addSingle=function(n,e,t,r){var i=this.getLookupTables(t,r,n,1,!0)[0],o=iT(i,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});Fn.assert(o.coverage.format===1,"Single: unable to modify coverage table format "+o.coverage.format);var s=e.sub,a=this.binSearch(o.coverage.glyphs,s);a<0&&(a=-1-a,o.coverage.glyphs.splice(a,0,s),o.substitute.splice(a,0,0)),o.substitute[a]=e.by};Ca.prototype.addMultiple=function(n,e,t,r){Fn.assert(e.by instanceof Array&&e.by.length>1,'Multiple: "by" must be an array of two or more ids');var i=this.getLookupTables(t,r,n,2,!0)[0],o=iT(i,1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});Fn.assert(o.coverage.format===1,"Multiple: unable to modify coverage table format "+o.coverage.format);var s=e.sub,a=this.binSearch(o.coverage.glyphs,s);a<0&&(a=-1-a,o.coverage.glyphs.splice(a,0,s),o.sequences.splice(a,0,0)),o.sequences[a]=e.by};Ca.prototype.addAlternate=function(n,e,t,r){var i=this.getLookupTables(t,r,n,3,!0)[0],o=iT(i,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});Fn.assert(o.coverage.format===1,"Alternate: unable to modify coverage table format "+o.coverage.format);var s=e.sub,a=this.binSearch(o.coverage.glyphs,s);a<0&&(a=-1-a,o.coverage.glyphs.splice(a,0,s),o.alternateSets.splice(a,0,0)),o.alternateSets[a]=e.by};Ca.prototype.addLigature=function(n,e,t,r){var i=this.getLookupTables(t,r,n,4,!0)[0],o=i.subtables[0];o||(o={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},i.subtables[0]=o),Fn.assert(o.coverage.format===1,"Ligature: unable to modify coverage table format "+o.coverage.format);var s=e.sub[0],a=e.sub.slice(1),l={ligGlyph:e.by,components:a},u=this.binSearch(o.coverage.glyphs,s);if(u>=0){for(var c=o.ligatureSets[u],h=0;h<c.length;h++)if(pne(c[h].components,a))return;c.push(l)}else u=-1-u,o.coverage.glyphs.splice(u,0,s),o.ligatureSets.splice(u,0,[l])};Ca.prototype.getFeature=function(n,e,t){if(/ss\d\d/.test(n))return this.getSingle(n,e,t);switch(n){case"aalt":case"salt":return this.getSingle(n,e,t).concat(this.getAlternates(n,e,t));case"dlig":case"liga":case"rlig":return this.getLigatures(n,e,t);case"ccmp":return this.getMultiple(n,e,t).concat(this.getLigatures(n,e,t));case"stch":return this.getMultiple(n,e,t)}};Ca.prototype.add=function(n,e,t,r){if(/ss\d\d/.test(n))return this.addSingle(n,e,t,r);switch(n){case"aalt":case"salt":return typeof e.by=="number"?this.addSingle(n,e,t,r):this.addAlternate(n,e,t,r);case"dlig":case"liga":case"rlig":return this.addLigature(n,e,t,r);case"ccmp":return e.by instanceof Array?this.addMultiple(n,e,t,r):this.addLigature(n,e,t,r)}};function mne(){return typeof window<"u"}function gne(n){for(var e=new Buffer(n.byteLength),t=new Uint8Array(n),r=0;r<e.length;++r)e[r]=t[r];return e}function M0(n,e){if(!n)throw e}function u4(n,e,t,r,i){var o;return(e&r)>0?(o=n.parseByte(),e&i||(o=-o),o=t+o):(e&i)>0?o=t:o=t+n.parseShort(),o}function JO(n,e,t){var r=new Vn.Parser(e,t);n.numberOfContours=r.parseShort(),n._xMin=r.parseShort(),n._yMin=r.parseShort(),n._xMax=r.parseShort(),n._yMax=r.parseShort();var i,o;if(n.numberOfContours>0){for(var s=n.endPointIndices=[],a=0;a<n.numberOfContours;a+=1)s.push(r.parseUShort());n.instructionLength=r.parseUShort(),n.instructions=[];for(var l=0;l<n.instructionLength;l+=1)n.instructions.push(r.parseByte());var u=s[s.length-1]+1;i=[];for(var c=0;c<u;c+=1)if(o=r.parseByte(),i.push(o),(o&8)>0)for(var h=r.parseByte(),f=0;f<h;f+=1)i.push(o),c+=1;if(Fn.argument(i.length===u,"Bad flags."),s.length>0){var d=[],v;if(u>0){for(var y=0;y<u;y+=1)o=i[y],v={},v.onCurve=!!(o&1),v.lastPointOfContour=s.indexOf(y)>=0,d.push(v);for(var w=0,g=0;g<u;g+=1)o=i[g],v=d[g],v.x=u4(r,o,w,2,16),w=v.x;for(var x=0,_=0;_<u;_+=1)o=i[_],v=d[_],v.y=u4(r,o,x,4,32),x=v.y}n.points=d}else n.points=[]}else if(n.numberOfContours===0)n.points=[];else{n.isComposite=!0,n.points=[],n.components=[];for(var E=!0;E;){i=r.parseUShort();var C={glyphIndex:r.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(i&1)>0?(i&2)>0?(C.dx=r.parseShort(),C.dy=r.parseShort()):C.matchedPoints=[r.parseUShort(),r.parseUShort()]:(i&2)>0?(C.dx=r.parseChar(),C.dy=r.parseChar()):C.matchedPoints=[r.parseByte(),r.parseByte()],(i&8)>0?C.xScale=C.yScale=r.parseF2Dot14():(i&64)>0?(C.xScale=r.parseF2Dot14(),C.yScale=r.parseF2Dot14()):(i&128)>0&&(C.xScale=r.parseF2Dot14(),C.scale01=r.parseF2Dot14(),C.scale10=r.parseF2Dot14(),C.yScale=r.parseF2Dot14()),n.components.push(C),E=!!(i&32)}if(i&256){n.instructionLength=r.parseUShort(),n.instructions=[];for(var I=0;I<n.instructionLength;I+=1)n.instructions.push(r.parseByte())}}}function Kb(n,e){for(var t=[],r=0;r<n.length;r+=1){var i=n[r],o={x:e.xScale*i.x+e.scale01*i.y+e.dx,y:e.scale10*i.x+e.yScale*i.y+e.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};t.push(o)}return t}function vne(n){for(var e=[],t=[],r=0;r<n.length;r+=1){var i=n[r];t.push(i),i.lastPointOfContour&&(e.push(t),t=[])}return Fn.argument(t.length===0,"There are still points left in the current contour."),e}function QO(n){var e=new vo;if(!n)return e;for(var t=vne(n),r=0;r<t.length;++r){var i=t[r],o=null,s=i[i.length-1],a=i[0];if(s.onCurve)e.moveTo(s.x,s.y);else if(a.onCurve)e.moveTo(a.x,a.y);else{var l={x:(s.x+a.x)*.5,y:(s.y+a.y)*.5};e.moveTo(l.x,l.y)}for(var u=0;u<i.length;++u)if(o=s,s=a,a=i[(u+1)%i.length],s.onCurve)e.lineTo(s.x,s.y);else{var c=a;o.onCurve||((s.x+o.x)*.5,(s.y+o.y)*.5),a.onCurve||(c={x:(s.x+a.x)*.5,y:(s.y+a.y)*.5}),e.quadraticCurveTo(s.x,s.y,c.x,c.y)}e.closePath()}return e}function eB(n,e){if(e.isComposite)for(var t=0;t<e.components.length;t+=1){var r=e.components[t],i=n.get(r.glyphIndex);if(i.getPath(),i.points){var o=void 0;if(r.matchedPoints===void 0)o=Kb(i.points,r);else{if(r.matchedPoints[0]>e.points.length-1||r.matchedPoints[1]>i.points.length-1)throw Error("Matched points out of range in "+e.name);var s=e.points[r.matchedPoints[0]],a=i.points[r.matchedPoints[1]],l={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0};a=Kb([a],l)[0],l.dx=s.x-a.x,l.dy=s.y-a.y,o=Kb(i.points,l)}e.points=e.points.concat(o)}}return QO(e.points)}function yne(n,e,t,r){for(var i=new Du.GlyphSet(r),o=0;o<t.length-1;o+=1){var s=t[o],a=t[o+1];s!==a?i.push(o,Du.ttfGlyphLoader(r,o,JO,n,e+s,eB)):i.push(o,Du.glyphLoader(r,o))}return i}function xne(n,e,t,r){var i=new Du.GlyphSet(r);return r._push=function(o){var s=t[o],a=t[o+1];s!==a?i.push(o,Du.ttfGlyphLoader(r,o,JO,n,e+s,eB)):i.push(o,Du.glyphLoader(r,o))},i}function wne(n,e,t,r,i){return i.lowMemory?xne(n,e,t,r):yne(n,e,t,r)}var Sne={getPath:QO,parse:wne},tB,qd,nB,TE;function rB(n){this.font=n,this.getCommands=function(e){return Sne.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function _ne(n){return n}function iB(n){return Math.sign(n)*Math.round(Math.abs(n))}function bne(n){return Math.sign(n)*Math.round(Math.abs(n*2))/2}function Mne(n){return Math.sign(n)*(Math.round(Math.abs(n)+.5)-.5)}function Ene(n){return Math.sign(n)*Math.ceil(Math.abs(n))}function Ane(n){return Math.sign(n)*Math.floor(Math.abs(n))}var oB=function(n){var e=this.srPeriod,t=this.srPhase,r=this.srThreshold,i=1;return n<0&&(n=-n,i=-1),n+=r-t,n=Math.trunc(n/e)*e,n+=t,n<0?t*i:n*i},Cu={x:1,y:0,axis:"x",distance:function(n,e,t,r){return(t?n.xo:n.x)-(r?e.xo:e.x)},interpolate:function(n,e,t,r){var i,o,s,a,l,u,c;if(!r||r===this){if(i=n.xo-e.xo,o=n.xo-t.xo,l=e.x-e.xo,u=t.x-t.xo,s=Math.abs(i),a=Math.abs(o),c=s+a,c===0){n.x=n.xo+(l+u)/2;return}n.x=n.xo+(l*a+u*s)/c;return}if(i=r.distance(n,e,!0,!0),o=r.distance(n,t,!0,!0),l=r.distance(e,e,!1,!0),u=r.distance(t,t,!1,!0),s=Math.abs(i),a=Math.abs(o),c=s+a,c===0){Cu.setRelative(n,n,(l+u)/2,r,!0);return}Cu.setRelative(n,n,(l*a+u*s)/c,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(n,e,t,r,i){if(!r||r===this){n.x=(i?e.xo:e.x)+t;return}var o=i?e.xo:e.x,s=i?e.yo:e.y,a=o+t*r.x,l=s+t*r.y;n.x=a+(n.y-l)/r.normalSlope},slope:0,touch:function(n){n.xTouched=!0},touched:function(n){return n.xTouched},untouch:function(n){n.xTouched=!1}},Pc={x:0,y:1,axis:"y",distance:function(n,e,t,r){return(t?n.yo:n.y)-(r?e.yo:e.y)},interpolate:function(n,e,t,r){var i,o,s,a,l,u,c;if(!r||r===this){if(i=n.yo-e.yo,o=n.yo-t.yo,l=e.y-e.yo,u=t.y-t.yo,s=Math.abs(i),a=Math.abs(o),c=s+a,c===0){n.y=n.yo+(l+u)/2;return}n.y=n.yo+(l*a+u*s)/c;return}if(i=r.distance(n,e,!0,!0),o=r.distance(n,t,!0,!0),l=r.distance(e,e,!1,!0),u=r.distance(t,t,!1,!0),s=Math.abs(i),a=Math.abs(o),c=s+a,c===0){Pc.setRelative(n,n,(l+u)/2,r,!0);return}Pc.setRelative(n,n,(l*a+u*s)/c,r,!0)},normalSlope:0,setRelative:function(n,e,t,r,i){if(!r||r===this){n.y=(i?e.yo:e.y)+t;return}var o=i?e.xo:e.x,s=i?e.yo:e.y,a=o+t*r.x,l=s+t*r.y;n.y=l+r.normalSlope*(n.x-a)},slope:Number.POSITIVE_INFINITY,touch:function(n){n.yTouched=!0},touched:function(n){return n.yTouched},untouch:function(n){n.yTouched=!1}};Object.freeze(Cu);Object.freeze(Pc);function H1(n,e){this.x=n,this.y=e,this.axis=void 0,this.slope=e/n,this.normalSlope=-n/e,Object.freeze(this)}H1.prototype.distance=function(n,e,t,r){return this.x*Cu.distance(n,e,t,r)+this.y*Pc.distance(n,e,t,r)};H1.prototype.interpolate=function(n,e,t,r){var i,o,s,a,l,u,c;if(s=r.distance(n,e,!0,!0),a=r.distance(n,t,!0,!0),i=r.distance(e,e,!1,!0),o=r.distance(t,t,!1,!0),l=Math.abs(s),u=Math.abs(a),c=l+u,c===0){this.setRelative(n,n,(i+o)/2,r,!0);return}this.setRelative(n,n,(i*u+o*l)/c,r,!0)};H1.prototype.setRelative=function(n,e,t,r,i){r=r||this;var o=i?e.xo:e.x,s=i?e.yo:e.y,a=o+t*r.x,l=s+t*r.y,u=r.normalSlope,c=this.slope,h=n.x,f=n.y;n.x=(c*h-u*a+l-f)/(c-u),n.y=c*(n.x-h)+f};H1.prototype.touch=function(n){n.xTouched=!0,n.yTouched=!0};function G1(n,e){var t=Math.sqrt(n*n+e*e);return n/=t,e/=t,n===1&&e===0?Cu:n===0&&e===1?Pc:new H1(n,e)}function Ic(n,e,t,r){this.x=this.xo=Math.round(n*64)/64,this.y=this.yo=Math.round(e*64)/64,this.lastPointOfContour=t,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}Ic.prototype.nextTouched=function(n){for(var e=this.nextPointOnContour;!n.touched(e)&&e!==this;)e=e.nextPointOnContour;return e};Ic.prototype.prevTouched=function(n){for(var e=this.prevPointOnContour;!n.touched(e)&&e!==this;)e=e.prevPointOnContour;return e};var s1=Object.freeze(new Ic(0,0)),Tne={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function Zh(n,e){switch(this.env=n,this.stack=[],this.prog=e,n){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=Cu,this.round=iB}}rB.prototype.exec=function(n,e){if(typeof e!="number")throw new Error("Point size is not a number!");if(!(this._errorState>2)){var t=this.font,r=this._prepState;if(!r||r.ppem!==e){var i=this._fpgmState;if(!i){Zh.prototype=Tne,i=this._fpgmState=new Zh("fpgm",t.tables.fpgm),i.funcs=[],i.font=t,exports.DEBUG&&(console.log("---EXEC FPGM---"),i.step=-1);try{qd(i)}catch(u){console.log("Hinting error in FPGM:"+u),this._errorState=3;return}}Zh.prototype=i,r=this._prepState=new Zh("prep",t.tables.prep),r.ppem=e;var o=t.tables.cvt;if(o)for(var s=r.cvt=new Array(o.length),a=e/t.unitsPerEm,l=0;l<o.length;l++)s[l]=o[l]*a;else r.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),r.step=-1);try{qd(r)}catch(u){this._errorState<2&&console.log("Hinting error in PREP:"+u),this._errorState=2}}if(!(this._errorState>1))try{return nB(n,r)}catch(u){this._errorState<1&&(console.log("Hinting error:"+u),console.log("Note: further hinting errors are silenced")),this._errorState=1;return}}};nB=function(n,e){var t=e.ppem/e.font.unitsPerEm,r=t,i=n.components,o,s,a;if(Zh.prototype=e,!i)a=new Zh("glyf",n.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),a.step=-1),TE(n,a,t,r),s=a.gZone;else{var l=e.font;s=[],o=[];for(var u=0;u<i.length;u++){var c=i[u],h=l.glyphs.get(c.glyphIndex);a=new Zh("glyf",h.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+u+"---"),a.step=-1),TE(h,a,t,r);for(var f=Math.round(c.dx*t),d=Math.round(c.dy*r),v=a.gZone,y=a.contours,w=0;w<v.length;w++){var g=v[w];g.xTouched=g.yTouched=!1,g.xo=g.x=g.x+f,g.yo=g.y=g.y+d}var x=s.length;s.push.apply(s,v);for(var _=0;_<y.length;_++)o.push(y[_]+x)}n.instructions&&!a.inhibitGridFit&&(a=new Zh("glyf",n.instructions),a.gZone=a.z0=a.z1=a.z2=s,a.contours=o,s.push(new Ic(0,0),new Ic(Math.round(n.advanceWidth*t),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),a.step=-1),qd(a),s.length-=2)}return s};TE=function(n,e,t,r){for(var i=n.points||[],o=i.length,s=e.gZone=e.z0=e.z1=e.z2=[],a=e.contours=[],l,u=0;u<o;u++)l=i[u],s[u]=new Ic(l.x*t,l.y*r,l.lastPointOfContour,l.onCurve);for(var c,h,f=0;f<o;f++)l=s[f],c||(c=l,a.push(f)),l.lastPointOfContour?(l.nextPointOnContour=c,c.prevPointOnContour=l,c=void 0):(h=s[f+1],l.nextPointOnContour=h,h.prevPointOnContour=l);if(!e.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",e.stack);for(var d=0;d<o;d++)console.log(d,s[d].x,s[d].y)}if(s.push(new Ic(0,0),new Ic(Math.round(n.advanceWidth*t),0)),qd(e),s.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",e.stack);for(var v=0;v<o;v++)console.log(v,s[v].x,s[v].y)}}};qd=function(n){var e=n.prog;if(e){var t=e.length,r;for(n.ip=0;n.ip<t;n.ip++){if(exports.DEBUG&&n.step++,r=tB[e[n.ip]],!r)throw new Error("unknown instruction: 0x"+Number(e[n.ip]).toString(16));r(n)}}};function RS(n){for(var e=n.tZone=new Array(n.gZone.length),t=0;t<e.length;t++)e[t]=new Ic(0,0)}function sB(n,e){var t=n.prog,r=n.ip,i=1,o;do if(o=t[++r],o===88)i++;else if(o===89)i--;else if(o===64)r+=t[r+1]+1;else if(o===65)r+=2*t[r+1]+1;else if(o>=176&&o<=183)r+=o-176+1;else if(o>=184&&o<=191)r+=(o-184+1)*2;else if(e&&i===1&&o===27)break;while(i>0);n.ip=r}function c4(n,e){exports.DEBUG&&console.log(e.step,"SVTCA["+n.axis+"]"),e.fv=e.pv=e.dpv=n}function h4(n,e){exports.DEBUG&&console.log(e.step,"SPVTCA["+n.axis+"]"),e.pv=e.dpv=n}function f4(n,e){exports.DEBUG&&console.log(e.step,"SFVTCA["+n.axis+"]"),e.fv=n}function d4(n,e){var t=e.stack,r=t.pop(),i=t.pop(),o=e.z2[r],s=e.z1[i];exports.DEBUG&&console.log("SPVTL["+n+"]",r,i);var a,l;n?(a=o.y-s.y,l=s.x-o.x):(a=s.x-o.x,l=s.y-o.y),e.pv=e.dpv=G1(a,l)}function p4(n,e){var t=e.stack,r=t.pop(),i=t.pop(),o=e.z2[r],s=e.z1[i];exports.DEBUG&&console.log("SFVTL["+n+"]",r,i);var a,l;n?(a=o.y-s.y,l=s.x-o.x):(a=s.x-o.x,l=s.y-o.y),e.fv=G1(a,l)}function Cne(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"SPVFS[]",t,r),n.pv=n.dpv=G1(r,t)}function Pne(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"SPVFS[]",t,r),n.fv=G1(r,t)}function Lne(n){var e=n.stack,t=n.pv;exports.DEBUG&&console.log(n.step,"GPV[]"),e.push(t.x*16384),e.push(t.y*16384)}function Rne(n){var e=n.stack,t=n.fv;exports.DEBUG&&console.log(n.step,"GFV[]"),e.push(t.x*16384),e.push(t.y*16384)}function kne(n){n.fv=n.pv,exports.DEBUG&&console.log(n.step,"SFVTPV[]")}function Ine(n){var e=n.stack,t=e.pop(),r=e.pop(),i=e.pop(),o=e.pop(),s=e.pop(),a=n.z0,l=n.z1,u=a[t],c=a[r],h=l[i],f=l[o],d=n.z2[s];exports.DEBUG&&console.log("ISECT[], ",t,r,i,o,s);var v=u.x,y=u.y,w=c.x,g=c.y,x=h.x,_=h.y,E=f.x,C=f.y,I=(v-w)*(_-C)-(y-g)*(x-E),R=v*g-y*w,L=x*C-_*E;d.x=(R*(x-E)-L*(v-w))/I,d.y=(R*(_-C)-L*(y-g))/I}function Nne(n){n.rp0=n.stack.pop(),exports.DEBUG&&console.log(n.step,"SRP0[]",n.rp0)}function Fne(n){n.rp1=n.stack.pop(),exports.DEBUG&&console.log(n.step,"SRP1[]",n.rp1)}function Dne(n){n.rp2=n.stack.pop(),exports.DEBUG&&console.log(n.step,"SRP2[]",n.rp2)}function One(n){var e=n.stack.pop();switch(exports.DEBUG&&console.log(n.step,"SZP0[]",e),n.zp0=e,e){case 0:n.tZone||RS(n),n.z0=n.tZone;break;case 1:n.z0=n.gZone;break;default:throw new Error("Invalid zone pointer")}}function Bne(n){var e=n.stack.pop();switch(exports.DEBUG&&console.log(n.step,"SZP1[]",e),n.zp1=e,e){case 0:n.tZone||RS(n),n.z1=n.tZone;break;case 1:n.z1=n.gZone;break;default:throw new Error("Invalid zone pointer")}}function Une(n){var e=n.stack.pop();switch(exports.DEBUG&&console.log(n.step,"SZP2[]",e),n.zp2=e,e){case 0:n.tZone||RS(n),n.z2=n.tZone;break;case 1:n.z2=n.gZone;break;default:throw new Error("Invalid zone pointer")}}function zne(n){var e=n.stack.pop();switch(exports.DEBUG&&console.log(n.step,"SZPS[]",e),n.zp0=n.zp1=n.zp2=e,e){case 0:n.tZone||RS(n),n.z0=n.z1=n.z2=n.tZone;break;case 1:n.z0=n.z1=n.z2=n.gZone;break;default:throw new Error("Invalid zone pointer")}}function Hne(n){n.loop=n.stack.pop(),exports.DEBUG&&console.log(n.step,"SLOOP[]",n.loop)}function Gne(n){exports.DEBUG&&console.log(n.step,"RTG[]"),n.round=iB}function Vne(n){exports.DEBUG&&console.log(n.step,"RTHG[]"),n.round=Mne}function Wne(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"SMD[]",e),n.minDis=e/64}function jne(n){exports.DEBUG&&console.log(n.step,"ELSE[]"),sB(n,!1)}function $ne(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"JMPR[]",e),n.ip+=e-1}function qne(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"SCVTCI[]",e),n.cvCutIn=e/64}function Xne(n){var e=n.stack;exports.DEBUG&&console.log(n.step,"DUP[]"),e.push(e[e.length-1])}function Jb(n){exports.DEBUG&&console.log(n.step,"POP[]"),n.stack.pop()}function Yne(n){exports.DEBUG&&console.log(n.step,"CLEAR[]"),n.stack.length=0}function Zne(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"SWAP[]"),e.push(t),e.push(r)}function Kne(n){var e=n.stack;exports.DEBUG&&console.log(n.step,"DEPTH[]"),e.push(e.length)}function Jne(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"LOOPCALL[]",t,r);var i=n.ip,o=n.prog;n.prog=n.funcs[t];for(var s=0;s<r;s++)qd(n),exports.DEBUG&&console.log(++n.step,s+1<r?"next loopcall":"done loopcall",s);n.ip=i,n.prog=o}function Qne(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"CALL[]",e);var t=n.ip,r=n.prog;n.prog=n.funcs[e],qd(n),n.ip=t,n.prog=r,exports.DEBUG&&console.log(++n.step,"returning from",e)}function ere(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"CINDEX[]",t),e.push(e[e.length-t])}function tre(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"MINDEX[]",t),e.push(e.splice(e.length-t,1)[0])}function nre(n){if(n.env!=="fpgm")throw new Error("FDEF not allowed here");var e=n.stack,t=n.prog,r=n.ip,i=e.pop(),o=r;for(exports.DEBUG&&console.log(n.step,"FDEF[]",i);t[++r]!==45;);n.ip=r,n.funcs[i]=t.slice(o+1,r)}function m4(n,e){var t=e.stack.pop(),r=e.z0[t],i=e.fv,o=e.pv;exports.DEBUG&&console.log(e.step,"MDAP["+n+"]",t);var s=o.distance(r,s1);n&&(s=e.round(s)),i.setRelative(r,s1,s,o),i.touch(r),e.rp0=e.rp1=t}function g4(n,e){var t=e.z2,r=t.length-2,i,o,s;exports.DEBUG&&console.log(e.step,"IUP["+n.axis+"]");for(var a=0;a<r;a++)i=t[a],!n.touched(i)&&(o=i.prevTouched(n),o!==i&&(s=i.nextTouched(n),o===s&&n.setRelative(i,i,n.distance(o,o,!1,!0),n,!0),n.interpolate(i,o,s,n)))}function v4(n,e){for(var t=e.stack,r=n?e.rp1:e.rp2,i=(n?e.z0:e.z1)[r],o=e.fv,s=e.pv,a=e.loop,l=e.z2;a--;){var u=t.pop(),c=l[u],h=s.distance(i,i,!1,!0);o.setRelative(c,c,h,s),o.touch(c),exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-a)+": ":"")+"SHP["+(n?"rp1":"rp2")+"]",u)}e.loop=1}function y4(n,e){var t=e.stack,r=n?e.rp1:e.rp2,i=(n?e.z0:e.z1)[r],o=e.fv,s=e.pv,a=t.pop(),l=e.z2[e.contours[a]],u=l;exports.DEBUG&&console.log(e.step,"SHC["+n+"]",a);var c=s.distance(i,i,!1,!0);do u!==i&&o.setRelative(u,u,c,s),u=u.nextPointOnContour;while(u!==l)}function x4(n,e){var t=e.stack,r=n?e.rp1:e.rp2,i=(n?e.z0:e.z1)[r],o=e.fv,s=e.pv,a=t.pop();exports.DEBUG&&console.log(e.step,"SHZ["+n+"]",a);var l;switch(a){case 0:l=e.tZone;break;case 1:l=e.gZone;break;default:throw new Error("Invalid zone")}for(var u,c=s.distance(i,i,!1,!0),h=l.length-2,f=0;f<h;f++)u=l[f],o.setRelative(u,u,c,s)}function rre(n){for(var e=n.stack,t=n.loop,r=n.fv,i=e.pop()/64,o=n.z2;t--;){var s=e.pop(),a=o[s];exports.DEBUG&&console.log(n.step,(n.loop>1?"loop "+(n.loop-t)+": ":"")+"SHPIX[]",s,i),r.setRelative(a,a,i),r.touch(a)}n.loop=1}function ire(n){for(var e=n.stack,t=n.rp1,r=n.rp2,i=n.loop,o=n.z0[t],s=n.z1[r],a=n.fv,l=n.dpv,u=n.z2;i--;){var c=e.pop(),h=u[c];exports.DEBUG&&console.log(n.step,(n.loop>1?"loop "+(n.loop-i)+": ":"")+"IP[]",c,t,"<->",r),a.interpolate(h,o,s,l),a.touch(h)}n.loop=1}function w4(n,e){var t=e.stack,r=t.pop()/64,i=t.pop(),o=e.z1[i],s=e.z0[e.rp0],a=e.fv,l=e.pv;a.setRelative(o,s,r,l),a.touch(o),exports.DEBUG&&console.log(e.step,"MSIRP["+n+"]",r,i),e.rp1=e.rp0,e.rp2=i,n&&(e.rp0=i)}function ore(n){for(var e=n.stack,t=n.rp0,r=n.z0[t],i=n.loop,o=n.fv,s=n.pv,a=n.z1;i--;){var l=e.pop(),u=a[l];exports.DEBUG&&console.log(n.step,(n.loop>1?"loop "+(n.loop-i)+": ":"")+"ALIGNRP[]",l),o.setRelative(u,r,0,s),o.touch(u)}n.loop=1}function sre(n){exports.DEBUG&&console.log(n.step,"RTDG[]"),n.round=bne}function S4(n,e){var t=e.stack,r=t.pop(),i=t.pop(),o=e.z0[i],s=e.fv,a=e.pv,l=e.cvt[r];exports.DEBUG&&console.log(e.step,"MIAP["+n+"]",r,"(",l,")",i);var u=a.distance(o,s1);n&&(Math.abs(u-l)<e.cvCutIn&&(u=l),u=e.round(u)),s.setRelative(o,s1,u,a),e.zp0===0&&(o.xo=o.x,o.yo=o.y),s.touch(o),e.rp0=e.rp1=i}function are(n){var e=n.prog,t=n.ip,r=n.stack,i=e[++t];exports.DEBUG&&console.log(n.step,"NPUSHB[]",i);for(var o=0;o<i;o++)r.push(e[++t]);n.ip=t}function lre(n){var e=n.ip,t=n.prog,r=n.stack,i=t[++e];exports.DEBUG&&console.log(n.step,"NPUSHW[]",i);for(var o=0;o<i;o++){var s=t[++e]<<8|t[++e];s&32768&&(s=-((s^65535)+1)),r.push(s)}n.ip=e}function ure(n){var e=n.stack,t=n.store;t||(t=n.store=[]);var r=e.pop(),i=e.pop();exports.DEBUG&&console.log(n.step,"WS",r,i),t[i]=r}function cre(n){var e=n.stack,t=n.store,r=e.pop();exports.DEBUG&&console.log(n.step,"RS",r);var i=t&&t[r]||0;e.push(i)}function hre(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"WCVTP",t,r),n.cvt[r]=t/64}function fre(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"RCVT",t),e.push(n.cvt[t]*64)}function _4(n,e){var t=e.stack,r=t.pop(),i=e.z2[r];exports.DEBUG&&console.log(e.step,"GC["+n+"]",r),t.push(e.dpv.distance(i,s1,n,!1)*64)}function b4(n,e){var t=e.stack,r=t.pop(),i=t.pop(),o=e.z1[r],s=e.z0[i],a=e.dpv.distance(s,o,n,n);exports.DEBUG&&console.log(e.step,"MD["+n+"]",r,i,"->",a),e.stack.push(Math.round(a*64))}function dre(n){exports.DEBUG&&console.log(n.step,"MPPEM[]"),n.stack.push(n.ppem)}function pre(n){exports.DEBUG&&console.log(n.step,"FLIPON[]"),n.autoFlip=!0}function mre(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"LT[]",t,r),e.push(r<t?1:0)}function gre(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"LTEQ[]",t,r),e.push(r<=t?1:0)}function vre(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"GT[]",t,r),e.push(r>t?1:0)}function yre(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"GTEQ[]",t,r),e.push(r>=t?1:0)}function xre(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"EQ[]",t,r),e.push(t===r?1:0)}function wre(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"NEQ[]",t,r),e.push(t!==r?1:0)}function Sre(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"ODD[]",t),e.push(Math.trunc(t)%2?1:0)}function _re(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"EVEN[]",t),e.push(Math.trunc(t)%2?0:1)}function bre(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"IF[]",e),e||(sB(n,!0),exports.DEBUG&&console.log(n.step,"EIF[]"))}function Mre(n){exports.DEBUG&&console.log(n.step,"EIF[]")}function Ere(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"AND[]",t,r),e.push(t&&r?1:0)}function Are(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"OR[]",t,r),e.push(t||r?1:0)}function Tre(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"NOT[]",t),e.push(t?0:1)}function Qb(n,e){var t=e.stack,r=t.pop(),i=e.fv,o=e.pv,s=e.ppem,a=e.deltaBase+(n-1)*16,l=e.deltaShift,u=e.z0;exports.DEBUG&&console.log(e.step,"DELTAP["+n+"]",r,t);for(var c=0;c<r;c++){var h=t.pop(),f=t.pop(),d=a+((f&240)>>4);if(d===s){var v=(f&15)-8;v>=0&&v++,exports.DEBUG&&console.log(e.step,"DELTAPFIX",h,"by",v*l);var y=u[h];i.setRelative(y,y,v*l,o)}}}function Cre(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"SDB[]",t),n.deltaBase=t}function Pre(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"SDS[]",t),n.deltaShift=Math.pow(.5,t)}function Lre(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"ADD[]",t,r),e.push(r+t)}function Rre(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"SUB[]",t,r),e.push(r-t)}function kre(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"DIV[]",t,r),e.push(r*64/t)}function Ire(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"MUL[]",t,r),e.push(r*t/64)}function Nre(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"ABS[]",t),e.push(Math.abs(t))}function Fre(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"NEG[]",t),e.push(-t)}function Dre(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"FLOOR[]",t),e.push(Math.floor(t/64)*64)}function Ore(n){var e=n.stack,t=e.pop();exports.DEBUG&&console.log(n.step,"CEILING[]",t),e.push(Math.ceil(t/64)*64)}function N2(n,e){var t=e.stack,r=t.pop();exports.DEBUG&&console.log(e.step,"ROUND[]"),t.push(e.round(r/64)*64)}function Bre(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"WCVTF[]",t,r),n.cvt[r]=t*n.ppem/n.font.unitsPerEm}function e5(n,e){var t=e.stack,r=t.pop(),i=e.ppem,o=e.deltaBase+(n-1)*16,s=e.deltaShift;exports.DEBUG&&console.log(e.step,"DELTAC["+n+"]",r,t);for(var a=0;a<r;a++){var l=t.pop(),u=t.pop(),c=o+((u&240)>>4);if(c===i){var h=(u&15)-8;h>=0&&h++;var f=h*s;exports.DEBUG&&console.log(e.step,"DELTACFIX",l,"by",f),e.cvt[l]+=f}}}function Ure(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"SROUND[]",e),n.round=oB;var t;switch(e&192){case 0:t=.5;break;case 64:t=1;break;case 128:t=2;break;default:throw new Error("invalid SROUND value")}switch(n.srPeriod=t,e&48){case 0:n.srPhase=0;break;case 16:n.srPhase=.25*t;break;case 32:n.srPhase=.5*t;break;case 48:n.srPhase=.75*t;break;default:throw new Error("invalid SROUND value")}e&=15,e===0?n.srThreshold=0:n.srThreshold=(e/8-.5)*t}function zre(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"S45ROUND[]",e),n.round=oB;var t;switch(e&192){case 0:t=Math.sqrt(2)/2;break;case 64:t=Math.sqrt(2);break;case 128:t=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(n.srPeriod=t,e&48){case 0:n.srPhase=0;break;case 16:n.srPhase=.25*t;break;case 32:n.srPhase=.5*t;break;case 48:n.srPhase=.75*t;break;default:throw new Error("invalid S45ROUND value")}e&=15,e===0?n.srThreshold=0:n.srThreshold=(e/8-.5)*t}function Hre(n){exports.DEBUG&&console.log(n.step,"ROFF[]"),n.round=_ne}function Gre(n){exports.DEBUG&&console.log(n.step,"RUTG[]"),n.round=Ene}function Vre(n){exports.DEBUG&&console.log(n.step,"RDTG[]"),n.round=Ane}function Wre(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"SCANCTRL[]",e)}function M4(n,e){var t=e.stack,r=t.pop(),i=t.pop(),o=e.z2[r],s=e.z1[i];exports.DEBUG&&console.log(e.step,"SDPVTL["+n+"]",r,i);var a,l;n?(a=o.y-s.y,l=s.x-o.x):(a=s.x-o.x,l=s.y-o.y),e.dpv=G1(a,l)}function jre(n){var e=n.stack,t=e.pop(),r=0;exports.DEBUG&&console.log(n.step,"GETINFO[]",t),t&1&&(r=35),t&32&&(r|=4096),e.push(r)}function $re(n){var e=n.stack,t=e.pop(),r=e.pop(),i=e.pop();exports.DEBUG&&console.log(n.step,"ROLL[]"),e.push(r),e.push(t),e.push(i)}function qre(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"MAX[]",t,r),e.push(Math.max(r,t))}function Xre(n){var e=n.stack,t=e.pop(),r=e.pop();exports.DEBUG&&console.log(n.step,"MIN[]",t,r),e.push(Math.min(r,t))}function Yre(n){var e=n.stack.pop();exports.DEBUG&&console.log(n.step,"SCANTYPE[]",e)}function Zre(n){var e=n.stack.pop(),t=n.stack.pop();switch(exports.DEBUG&&console.log(n.step,"INSTCTRL[]",e,t),e){case 1:n.inhibitGridFit=!!t;return;case 2:n.ignoreCvt=!!t;return;default:throw new Error("invalid INSTCTRL[] selector")}}function Rh(n,e){var t=e.stack,r=e.prog,i=e.ip;exports.DEBUG&&console.log(e.step,"PUSHB["+n+"]");for(var o=0;o<n;o++)t.push(r[++i]);e.ip=i}function kh(n,e){var t=e.ip,r=e.prog,i=e.stack;exports.DEBUG&&console.log(e.ip,"PUSHW["+n+"]");for(var o=0;o<n;o++){var s=r[++t]<<8|r[++t];s&32768&&(s=-((s^65535)+1)),i.push(s)}e.ip=t}function Qt(n,e,t,r,i,o){var s=o.stack,a=n&&s.pop(),l=s.pop(),u=o.rp0,c=o.z0[u],h=o.z1[l],f=o.minDis,d=o.fv,v=o.dpv,y,w,g,x;w=y=v.distance(h,c,!0,!0),g=w>=0?1:-1,w=Math.abs(w),n&&(x=o.cvt[a],r&&Math.abs(w-x)<o.cvCutIn&&(w=x)),t&&w<f&&(w=f),r&&(w=o.round(w)),d.setRelative(h,c,g*w,v),d.touch(h),exports.DEBUG&&console.log(o.step,(n?"MIRP[":"MDRP[")+(e?"M":"m")+(t?">":"_")+(r?"R":"_")+(i===0?"Gr":i===1?"Bl":i===2?"Wh":"")+"]",n?a+"("+o.cvt[a]+","+x+")":"",l,"(d =",y,"->",g*w,")"),o.rp1=o.rp0,o.rp2=l,e&&(o.rp0=l)}tB=[c4.bind(void 0,Pc),c4.bind(void 0,Cu),h4.bind(void 0,Pc),h4.bind(void 0,Cu),f4.bind(void 0,Pc),f4.bind(void 0,Cu),d4.bind(void 0,0),d4.bind(void 0,1),p4.bind(void 0,0),p4.bind(void 0,1),Cne,Pne,Lne,Rne,kne,Ine,Nne,Fne,Dne,One,Bne,Une,zne,Hne,Gne,Vne,Wne,jne,$ne,qne,void 0,void 0,Xne,Jb,Yne,Zne,Kne,ere,tre,void 0,void 0,void 0,Jne,Qne,nre,void 0,m4.bind(void 0,0),m4.bind(void 0,1),g4.bind(void 0,Pc),g4.bind(void 0,Cu),v4.bind(void 0,0),v4.bind(void 0,1),y4.bind(void 0,0),y4.bind(void 0,1),x4.bind(void 0,0),x4.bind(void 0,1),rre,ire,w4.bind(void 0,0),w4.bind(void 0,1),ore,sre,S4.bind(void 0,0),S4.bind(void 0,1),are,lre,ure,cre,hre,fre,_4.bind(void 0,0),_4.bind(void 0,1),void 0,b4.bind(void 0,0),b4.bind(void 0,1),dre,void 0,pre,void 0,void 0,mre,gre,vre,yre,xre,wre,Sre,_re,bre,Mre,Ere,Are,Tre,Qb.bind(void 0,1),Cre,Pre,Lre,Rre,kre,Ire,Nre,Fre,Dre,Ore,N2.bind(void 0,0),N2.bind(void 0,1),N2.bind(void 0,2),N2.bind(void 0,3),void 0,void 0,void 0,void 0,Bre,Qb.bind(void 0,2),Qb.bind(void 0,3),e5.bind(void 0,1),e5.bind(void 0,2),e5.bind(void 0,3),Ure,zre,void 0,void 0,Hre,void 0,Gre,Vre,Jb,Jb,void 0,void 0,void 0,void 0,void 0,Wre,M4.bind(void 0,0),M4.bind(void 0,1),jre,void 0,$re,qre,Xre,Yre,Zre,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Rh.bind(void 0,1),Rh.bind(void 0,2),Rh.bind(void 0,3),Rh.bind(void 0,4),Rh.bind(void 0,5),Rh.bind(void 0,6),Rh.bind(void 0,7),Rh.bind(void 0,8),kh.bind(void 0,1),kh.bind(void 0,2),kh.bind(void 0,3),kh.bind(void 0,4),kh.bind(void 0,5),kh.bind(void 0,6),kh.bind(void 0,7),kh.bind(void 0,8),Qt.bind(void 0,0,0,0,0,0),Qt.bind(void 0,0,0,0,0,1),Qt.bind(void 0,0,0,0,0,2),Qt.bind(void 0,0,0,0,0,3),Qt.bind(void 0,0,0,0,1,0),Qt.bind(void 0,0,0,0,1,1),Qt.bind(void 0,0,0,0,1,2),Qt.bind(void 0,0,0,0,1,3),Qt.bind(void 0,0,0,1,0,0),Qt.bind(void 0,0,0,1,0,1),Qt.bind(void 0,0,0,1,0,2),Qt.bind(void 0,0,0,1,0,3),Qt.bind(void 0,0,0,1,1,0),Qt.bind(void 0,0,0,1,1,1),Qt.bind(void 0,0,0,1,1,2),Qt.bind(void 0,0,0,1,1,3),Qt.bind(void 0,0,1,0,0,0),Qt.bind(void 0,0,1,0,0,1),Qt.bind(void 0,0,1,0,0,2),Qt.bind(void 0,0,1,0,0,3),Qt.bind(void 0,0,1,0,1,0),Qt.bind(void 0,0,1,0,1,1),Qt.bind(void 0,0,1,0,1,2),Qt.bind(void 0,0,1,0,1,3),Qt.bind(void 0,0,1,1,0,0),Qt.bind(void 0,0,1,1,0,1),Qt.bind(void 0,0,1,1,0,2),Qt.bind(void 0,0,1,1,0,3),Qt.bind(void 0,0,1,1,1,0),Qt.bind(void 0,0,1,1,1,1),Qt.bind(void 0,0,1,1,1,2),Qt.bind(void 0,0,1,1,1,3),Qt.bind(void 0,1,0,0,0,0),Qt.bind(void 0,1,0,0,0,1),Qt.bind(void 0,1,0,0,0,2),Qt.bind(void 0,1,0,0,0,3),Qt.bind(void 0,1,0,0,1,0),Qt.bind(void 0,1,0,0,1,1),Qt.bind(void 0,1,0,0,1,2),Qt.bind(void 0,1,0,0,1,3),Qt.bind(void 0,1,0,1,0,0),Qt.bind(void 0,1,0,1,0,1),Qt.bind(void 0,1,0,1,0,2),Qt.bind(void 0,1,0,1,0,3),Qt.bind(void 0,1,0,1,1,0),Qt.bind(void 0,1,0,1,1,1),Qt.bind(void 0,1,0,1,1,2),Qt.bind(void 0,1,0,1,1,3),Qt.bind(void 0,1,1,0,0,0),Qt.bind(void 0,1,1,0,0,1),Qt.bind(void 0,1,1,0,0,2),Qt.bind(void 0,1,1,0,0,3),Qt.bind(void 0,1,1,0,1,0),Qt.bind(void 0,1,1,0,1,1),Qt.bind(void 0,1,1,0,1,2),Qt.bind(void 0,1,1,0,1,3),Qt.bind(void 0,1,1,1,0,0),Qt.bind(void 0,1,1,1,0,1),Qt.bind(void 0,1,1,1,0,2),Qt.bind(void 0,1,1,1,0,3),Qt.bind(void 0,1,1,1,1,0),Qt.bind(void 0,1,1,1,1,1),Qt.bind(void 0,1,1,1,1,2),Qt.bind(void 0,1,1,1,1,3)];function Cg(n){this.char=n,this.state={},this.activeState=null}function oT(n,e,t){this.contextName=t,this.startIndex=n,this.endOffset=e}function Kre(n,e,t){this.contextName=n,this.openRange=null,this.ranges=[],this.checkStart=e,this.checkEnd=t}function Yl(n,e){this.context=n,this.index=e,this.length=n.length,this.current=n[e],this.backtrack=n.slice(0,e),this.lookahead=n.slice(e+1)}function kS(n){this.eventId=n,this.subscribers=[]}function Jre(n){var e=this,t=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];t.forEach(function(i){Object.defineProperty(e.events,i,{value:new kS(i)})}),n&&t.forEach(function(i){var o=n[i];typeof o=="function"&&e.events[i].subscribe(o)});var r=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];r.forEach(function(i){e.events[i].subscribe(e.updateContextsRanges)})}function Di(n){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],Jre.call(this,n)}Cg.prototype.setState=function(n,e){return this.state[n]=e,this.activeState={key:n,value:this.state[n]},this.activeState};Cg.prototype.getState=function(n){return this.state[n]||null};Di.prototype.inboundIndex=function(n){return n>=0&&n<this.tokens.length};Di.prototype.composeRUD=function(n){var e=this,t=!0,r=n.map(function(o){return e[o[0]].apply(e,o.slice(1).concat(t))}),i=function(o){return typeof o=="object"&&o.hasOwnProperty("FAIL")};if(r.every(i))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:r.filter(i)};this.dispatch("composeRUD",[r.filter(function(o){return!i(o)})])};Di.prototype.replaceRange=function(n,e,t,r){e=e!==null?e:this.tokens.length;var i=t.every(function(s){return s instanceof Cg});if(!isNaN(n)&&this.inboundIndex(n)&&i){var o=this.tokens.splice.apply(this.tokens,[n,e].concat(t));return r||this.dispatch("replaceToken",[n,e,t]),[o,t]}else return{FAIL:"replaceRange: invalid tokens or startIndex."}};Di.prototype.replaceToken=function(n,e,t){if(!isNaN(n)&&this.inboundIndex(n)&&e instanceof Cg){var r=this.tokens.splice(n,1,e);return t||this.dispatch("replaceToken",[n,e]),[r[0],e]}else return{FAIL:"replaceToken: invalid token or index."}};Di.prototype.removeRange=function(n,e,t){e=isNaN(e)?this.tokens.length:e;var r=this.tokens.splice(n,e);return t||this.dispatch("removeRange",[r,n,e]),r};Di.prototype.removeToken=function(n,e){if(!isNaN(n)&&this.inboundIndex(n)){var t=this.tokens.splice(n,1);return e||this.dispatch("removeToken",[t,n]),t}else return{FAIL:"removeToken: invalid token index."}};Di.prototype.insertToken=function(n,e,t){var r=n.every(function(i){return i instanceof Cg});return r?(this.tokens.splice.apply(this.tokens,[e,0].concat(n)),t||this.dispatch("insertToken",[n,e]),n):{FAIL:"insertToken: invalid token(s)."}};Di.prototype.registerModifier=function(n,e,t){this.events.newToken.subscribe(function(r,i){var o=[r,i],s=e===null||e.apply(this,o)===!0,a=[r,i];if(s){var l=t.apply(this,a);r.setState(n,l)}}),this.registeredModifiers.push(n)};kS.prototype.subscribe=function(n){return typeof n=="function"?this.subscribers.push(n)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}};kS.prototype.unsubscribe=function(n){this.subscribers.splice(n,1)};Yl.prototype.setCurrentIndex=function(n){this.index=n,this.current=this.context[n],this.backtrack=this.context.slice(0,n),this.lookahead=this.context.slice(n+1)};Yl.prototype.get=function(n){switch(!0){case n===0:return this.current;case(n<0&&Math.abs(n)<=this.backtrack.length):return this.backtrack.slice(n)[0];case(n>0&&n<=this.lookahead.length):return this.lookahead[n-1];default:return null}};Di.prototype.rangeToText=function(n){if(n instanceof oT)return this.getRangeTokens(n).map(function(e){return e.char}).join("")};Di.prototype.getText=function(){return this.tokens.map(function(n){return n.char}).join("")};Di.prototype.getContext=function(n){var e=this.registeredContexts[n];return e||null};Di.prototype.on=function(n,e){var t=this.events[n];return t?t.subscribe(e):null};Di.prototype.dispatch=function(n,e){var t=this,r=this.events[n];r instanceof kS&&r.subscribers.forEach(function(i){i.apply(t,e||[])})};Di.prototype.registerContextChecker=function(n,e,t){if(this.getContext(n))return{FAIL:"context name '"+n+"' is already registered."};if(typeof e!="function")return{FAIL:"missing context start check."};if(typeof t!="function")return{FAIL:"missing context end check."};var r=new Kre(n,e,t);return this.registeredContexts[n]=r,this.contextCheckers.push(r),r};Di.prototype.getRangeTokens=function(n){var e=n.startIndex+n.endOffset;return[].concat(this.tokens.slice(n.startIndex,e))};Di.prototype.getContextRanges=function(n){var e=this.getContext(n);return e?e.ranges:{FAIL:"context checker '"+n+"' is not registered."}};Di.prototype.resetContextsRanges=function(){var n=this.registeredContexts;for(var e in n)if(n.hasOwnProperty(e)){var t=n[e];t.ranges=[]}};Di.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var n=this.tokens.map(function(r){return r.char}),e=0;e<n.length;e++){var t=new Yl(n,e);this.runContextCheck(t)}this.dispatch("updateContextsRanges",[this.registeredContexts])};Di.prototype.setEndOffset=function(n,e){var t=this.getContext(e).openRange.startIndex,r=new oT(t,n,e),i=this.getContext(e).ranges;return r.rangeId=e+"."+i.length,i.push(r),this.getContext(e).openRange=null,r};Di.prototype.runContextCheck=function(n){var e=this,t=n.index;this.contextCheckers.forEach(function(r){var i=r.contextName,o=e.getContext(i).openRange;if(!o&&r.checkStart(n)&&(o=new oT(t,null,i),e.getContext(i).openRange=o,e.dispatch("contextStart",[i,t])),o&&r.checkEnd(n)){var s=t-o.startIndex+1,a=e.setEndOffset(s,i);e.dispatch("contextEnd",[i,a])}})};Di.prototype.tokenize=function(n){this.tokens=[],this.resetContextsRanges();var e=Array.from(n);this.dispatch("start");for(var t=0;t<e.length;t++){var r=e[t],i=new Yl(e,t);this.dispatch("next",[i]),this.runContextCheck(i);var o=new Cg(r);this.tokens.push(o),this.dispatch("newToken",[o,i])}return this.dispatch("end",[this.tokens]),this.tokens};function cf(n){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(n)}function aB(n){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(n)}function Sf(n){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(n)}function vx(n){return/[A-z]/.test(n)}function Qre(n){return/\s/.test(n)}function Pa(n){this.font=n,this.features={}}function gd(n){this.id=n.id,this.tag=n.tag,this.substitution=n.substitution}function V1(n,e){if(!n)return-1;switch(e.format){case 1:return e.glyphs.indexOf(n);case 2:for(var t=e.ranges,r=0;r<t.length;r++){var i=t[r];if(n>=i.start&&n<=i.end){var o=n-i.start;return i.index+o}}break;default:return-1}return-1}function eie(n,e){var t=V1(n,e.coverage);return t===-1?null:n+e.deltaGlyphId}function tie(n,e){var t=V1(n,e.coverage);return t===-1?null:e.substitute[t]}function t5(n,e){for(var t=[],r=0;r<n.length;r++){var i=n[r],o=e.current;o=Array.isArray(o)?o[0]:o;var s=V1(o,i);s!==-1&&t.push(s)}return t.length!==n.length?-1:t}function nie(n,e){var t=e.inputCoverage.length+e.lookaheadCoverage.length+e.backtrackCoverage.length;if(n.context.length<t)return[];var r=t5(e.inputCoverage,n);if(r===-1)return[];var i=e.inputCoverage.length-1;if(n.lookahead.length<e.lookaheadCoverage.length)return[];for(var o=n.lookahead.slice(i);o.length&&Sf(o[0].char);)o.shift();var s=new Yl(o,0),a=t5(e.lookaheadCoverage,s),l=[].concat(n.backtrack);for(l.reverse();l.length&&Sf(l[0].char);)l.shift();if(l.length<e.backtrackCoverage.length)return[];var u=new Yl(l,0),c=t5(e.backtrackCoverage,u),h=r.length===e.inputCoverage.length&&a.length===e.lookaheadCoverage.length&&c.length===e.backtrackCoverage.length,f=[];if(h)for(var d=0;d<e.lookupRecords.length;d++)for(var v=e.lookupRecords[d],y=v.lookupListIndex,w=this.getLookupByIndex(y),g=0;g<w.subtables.length;g++){var x=w.subtables[g],_=this.getLookupMethod(w,x),E=this.getSubstitutionType(w,x);if(E==="12")for(var C=0;C<r.length;C++){var I=n.get(C),R=_(I);R&&f.push(R)}}return f}function rie(n,e){var t=n.current,r=V1(t,e.coverage);if(r===-1)return null;for(var i,o=e.ligatureSets[r],s=0;s<o.length;s++){i=o[s];for(var a=0;a<i.components.length;a++){var l=n.lookahead[a],u=i.components[a];if(l!==u)break;if(a===i.components.length-1)return i}}return null}function iie(n,e){var t=V1(n,e.coverage);return t===-1?null:e.sequences[t]}Pa.prototype.getDefaultScriptFeaturesIndexes=function(){for(var n=this.font.tables.gsub.scripts,e=0;e<n.length;e++){var t=n[e];if(t.tag==="DFLT")return t.script.defaultLangSys.featureIndexes}return[]};Pa.prototype.getScriptFeaturesIndexes=function(n){var e=this.font.tables;if(!e.gsub)return[];if(!n)return this.getDefaultScriptFeaturesIndexes();for(var t=this.font.tables.gsub.scripts,r=0;r<t.length;r++){var i=t[r];if(i.tag===n&&i.script.defaultLangSys)return i.script.defaultLangSys.featureIndexes;var o=i.langSysRecords;if(o)for(var s=0;s<o.length;s++){var a=o[s];if(a.tag===n){var l=a.langSys;return l.featureIndexes}}}return this.getDefaultScriptFeaturesIndexes()};Pa.prototype.mapTagsToFeatures=function(n,e){for(var t={},r=0;r<n.length;r++){var i=n[r].tag,o=n[r].feature;t[i]=o}this.features[e].tags=t};Pa.prototype.getScriptFeatures=function(n){var e=this.features[n];if(this.features.hasOwnProperty(n))return e;var t=this.getScriptFeaturesIndexes(n);if(!t)return null;var r=this.font.tables.gsub;return e=t.map(function(i){return r.features[i]}),this.features[n]=e,this.mapTagsToFeatures(e,n),e};Pa.prototype.getSubstitutionType=function(n,e){var t=n.lookupType.toString(),r=e.substFormat.toString();return t+r};Pa.prototype.getLookupMethod=function(n,e){var t=this,r=this.getSubstitutionType(n,e);switch(r){case"11":return function(i){return eie.apply(t,[i,e])};case"12":return function(i){return tie.apply(t,[i,e])};case"63":return function(i){return nie.apply(t,[i,e])};case"41":return function(i){return rie.apply(t,[i,e])};case"21":return function(i){return iie.apply(t,[i,e])};default:throw new Error("lookupType: "+n.lookupType+" - substFormat: "+e.substFormat+" is not yet supported")}};Pa.prototype.lookupFeature=function(n){var e=n.contextParams,t=e.index,r=this.getFeature({tag:n.tag,script:n.script});if(!r)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+n.tag+"' for script '"+n.script+"'.");for(var i=this.getFeatureLookups(r),o=[].concat(e.context),s=0;s<i.length;s++)for(var a=i[s],l=this.getLookupSubtables(a),u=0;u<l.length;u++){var c=l[u],h=this.getSubstitutionType(a,c),f=this.getLookupMethod(a,c),d=void 0;switch(h){case"11":d=f(e.current),d&&o.splice(t,1,new gd({id:11,tag:n.tag,substitution:d}));break;case"12":d=f(e.current),d&&o.splice(t,1,new gd({id:12,tag:n.tag,substitution:d}));break;case"63":d=f(e),Array.isArray(d)&&d.length&&o.splice(t,1,new gd({id:63,tag:n.tag,substitution:d}));break;case"41":d=f(e),d&&o.splice(t,1,new gd({id:41,tag:n.tag,substitution:d}));break;case"21":d=f(e.current),d&&o.splice(t,1,new gd({id:21,tag:n.tag,substitution:d}));break}e=new Yl(o,t),!(Array.isArray(d)&&!d.length)&&(d=null)}return o.length?o:null};Pa.prototype.supports=function(n){if(!n.script)return!1;this.getScriptFeatures(n.script);var e=this.features.hasOwnProperty(n.script);if(!n.tag)return e;var t=this.features[n.script].some(function(r){return r.tag===n.tag});return e&&t};Pa.prototype.getLookupSubtables=function(n){return n.subtables||null};Pa.prototype.getLookupByIndex=function(n){var e=this.font.tables.gsub.lookups;return e[n]||null};Pa.prototype.getFeatureLookups=function(n){return n.lookupListIndexes.map(this.getLookupByIndex.bind(this))};Pa.prototype.getFeature=function(e){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(e.script)||this.getScriptFeatures(e.script);var t=this.features[e.script];return t?t.tags[e.tag]?this.features[e.script].tags[e.tag]:null:{FAIL:"No feature for script "+e.script}};function oie(n){var e=n.current,t=n.get(-1);return t===null&&cf(e)||!cf(t)&&cf(e)}function sie(n){var e=n.get(1);return e===null||!cf(e)}var aie={startCheck:oie,endCheck:sie};function lie(n){var e=n.current,t=n.get(-1);return(cf(e)||Sf(e))&&!cf(t)}function uie(n){var e=n.get(1);switch(!0){case e===null:return!0;case(!cf(e)&&!Sf(e)):var t=Qre(e);if(!t)return!0;if(t){var r=!1;if(r=n.lookahead.some(function(i){return cf(i)||Sf(i)}),!r)return!0}break;default:return!1}}var cie={startCheck:lie,endCheck:uie};function hie(n,e,t){e[t].setState(n.tag,n.substitution)}function fie(n,e,t){e[t].setState(n.tag,n.substitution)}function die(n,e,t){n.substitution.forEach(function(r,i){var o=e[t+i];o.setState(n.tag,r)})}function pie(n,e,t){var r=e[t];r.setState(n.tag,n.substitution.ligGlyph);for(var i=n.substitution.components.length,o=0;o<i;o++)r=e[t+o+1],r.setState("deleted",!0)}var E4={11:hie,12:fie,63:die,41:pie};function sT(n,e,t){n instanceof gd&&E4[n.id]&&E4[n.id](n,e,t)}function mie(n){for(var e=[].concat(n.backtrack),t=e.length-1;t>=0;t--){var r=e[t],i=aB(r),o=Sf(r);if(!i&&!o)return!0;if(i)return!1}return!1}function gie(n){if(aB(n.current))return!1;for(var e=0;e<n.lookahead.length;e++){var t=n.lookahead[e],r=Sf(t);if(!r)return!0}return!1}function vie(n){var e=this,t="arab",r=this.featuresTags[t],i=this.tokenizer.getRangeTokens(n);if(i.length!==1){var o=new Yl(i.map(function(a){return a.getState("glyphIndex")}),0),s=new Yl(i.map(function(a){return a.char}),0);i.forEach(function(a,l){if(!Sf(a.char)){o.setCurrentIndex(l),s.setCurrentIndex(l);var u=0;mie(s)&&(u|=1),gie(s)&&(u|=2);var c;switch(u){case 1:c="fina";break;case 2:c="init";break;case 3:c="medi";break}if(r.indexOf(c)!==-1){var h=e.query.lookupFeature({tag:c,script:t,contextParams:o});if(h instanceof Error)return console.info(h.message);h.forEach(function(f,d){f instanceof gd&&(sT(f,i,d),o.context[d]=f.substitution)})}}})}}function A4(n,e){var t=n.map(function(r){return r.activeState.value});return new Yl(t,e||0)}function yie(n){var e=this,t="arab",r=this.tokenizer.getRangeTokens(n),i=A4(r);i.context.forEach(function(o,s){i.setCurrentIndex(s);var a=e.query.lookupFeature({tag:"rlig",script:t,contextParams:i});a.length&&(a.forEach(function(l){return sT(l,r,s)}),i=A4(r))})}function xie(n){var e=n.current,t=n.get(-1);return t===null&&vx(e)||!vx(t)&&vx(e)}function wie(n){var e=n.get(1);return e===null||!vx(e)}var Sie={startCheck:xie,endCheck:wie};function T4(n,e){var t=n.map(function(r){return r.activeState.value});return new Yl(t,e||0)}function _ie(n){var e=this,t="latn",r=this.tokenizer.getRangeTokens(n),i=T4(r);i.context.forEach(function(o,s){i.setCurrentIndex(s);var a=e.query.lookupFeature({tag:"liga",script:t,contextParams:i});a.length&&(a.forEach(function(l){return sT(l,r,s)}),i=T4(r))})}function ru(n){this.baseDir=n||"ltr",this.tokenizer=new Di,this.featuresTags={}}ru.prototype.setText=function(n){this.text=n};ru.prototype.contextChecks={latinWordCheck:Sie,arabicWordCheck:aie,arabicSentenceCheck:cie};function n5(n){var e=this.contextChecks[n+"Check"];return this.tokenizer.registerContextChecker(n,e.startCheck,e.endCheck)}function bie(){return n5.call(this,"latinWord"),n5.call(this,"arabicWord"),n5.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function Mie(){var n=this,e=this.tokenizer.getContextRanges("arabicSentence");e.forEach(function(t){var r=n.tokenizer.getRangeTokens(t);n.tokenizer.replaceRange(t.startIndex,t.endOffset,r.reverse())})}ru.prototype.registerFeatures=function(n,e){var t=this,r=e.filter(function(i){return t.query.supports({script:n,tag:i})});this.featuresTags.hasOwnProperty(n)?this.featuresTags[n]=this.featuresTags[n].concat(r):this.featuresTags[n]=r};ru.prototype.applyFeatures=function(n,e){if(!n)throw new Error("No valid font was provided to apply features");this.query||(this.query=new Pa(n));for(var t=0;t<e.length;t++){var r=e[t];this.query.supports({script:r.script})&&this.registerFeatures(r.script,r.tags)}};ru.prototype.registerModifier=function(n,e,t){this.tokenizer.registerModifier(n,e,t)};function aT(){if(this.tokenizer.registeredModifiers.indexOf("glyphIndex")===-1)throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function Eie(){var n=this,e="arab";if(this.featuresTags.hasOwnProperty(e)){aT.call(this);var t=this.tokenizer.getContextRanges("arabicWord");t.forEach(function(r){vie.call(n,r)})}}function Aie(){var n=this,e="arab";if(this.featuresTags.hasOwnProperty(e)){var t=this.featuresTags[e];if(t.indexOf("rlig")!==-1){aT.call(this);var r=this.tokenizer.getContextRanges("arabicWord");r.forEach(function(i){yie.call(n,i)})}}}function Tie(){var n=this,e="latn";if(this.featuresTags.hasOwnProperty(e)){var t=this.featuresTags[e];if(t.indexOf("liga")!==-1){aT.call(this);var r=this.tokenizer.getContextRanges("latinWord");r.forEach(function(i){_ie.call(n,i)})}}}ru.prototype.checkContextReady=function(n){return!!this.tokenizer.getContext(n)};ru.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(Eie.call(this),Aie.call(this)),this.checkContextReady("latinWord")&&Tie.call(this),this.checkContextReady("arabicSentence")&&Mie.call(this)};ru.prototype.processText=function(n){(!this.text||this.text!==n)&&(this.setText(n),bie.call(this),this.applyFeaturesToContexts())};ru.prototype.getBidiText=function(n){return this.processText(n),this.tokenizer.getText()};ru.prototype.getTextGlyphs=function(n){this.processText(n);for(var e=[],t=0;t<this.tokenizer.tokens.length;t++){var r=this.tokenizer.tokens[t];if(!r.state.deleted){var i=r.activeState.value;e.push(Array.isArray(i)?i[0]:i)}}return e};function Xr(n){n=n||{},n.tables=n.tables||{},n.empty||(M0(n.familyName,"When creating a new Font object, familyName is required."),M0(n.styleName,"When creating a new Font object, styleName is required."),M0(n.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),M0(n.ascender,"When creating a new Font object, ascender is required."),M0(n.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:n.familyName||" "},fontSubfamily:{en:n.styleName||" "},fullName:{en:n.fullName||n.familyName+" "+n.styleName},postScriptName:{en:n.postScriptName||(n.familyName+n.styleName).replace(/\s/g,"")},designer:{en:n.designer||" "},designerURL:{en:n.designerURL||" "},manufacturer:{en:n.manufacturer||" "},manufacturerURL:{en:n.manufacturerURL||" "},license:{en:n.license||" "},licenseURL:{en:n.licenseURL||" "},version:{en:n.version||"Version 0.1"},description:{en:n.description||" "},copyright:{en:n.copyright||" "},trademark:{en:n.trademark||" "}},this.unitsPerEm=n.unitsPerEm||1e3,this.ascender=n.ascender,this.descender=n.descender,this.createdTimestamp=n.createdTimestamp,this.tables=Object.assign(n.tables,{os2:Object.assign({usWeightClass:n.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:n.widthClass||this.usWidthClasses.MEDIUM,fsSelection:n.fsSelection||this.fsSelectionValues.REGULAR},n.tables.os2)})),this.supported=!0,this.glyphs=new Du.GlyphSet(this,n.glyphs||[]),this.encoding=new BO(this),this.position=new z1(this),this.substitution=new Ca(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new rB(this)}})}Xr.prototype.hasChar=function(n){return this.encoding.charToGlyphIndex(n)!==null};Xr.prototype.charToGlyphIndex=function(n){return this.encoding.charToGlyphIndex(n)};Xr.prototype.charToGlyph=function(n){var e=this.charToGlyphIndex(n),t=this.glyphs.get(e);return t||(t=this.glyphs.get(0)),t};Xr.prototype.updateFeatures=function(n){return this.defaultRenderOptions.features.map(function(e){return e.script==="latn"?{script:"latn",tags:e.tags.filter(function(t){return n[t]})}:e})};Xr.prototype.stringToGlyphs=function(n,e){var t=this,r=new ru,i=function(h){return t.charToGlyphIndex(h.char)};r.registerModifier("glyphIndex",null,i);var o=e?this.updateFeatures(e.features):this.defaultRenderOptions.features;r.applyFeatures(this,o);for(var s=r.getTextGlyphs(n),a=s.length,l=new Array(a),u=this.glyphs.get(0),c=0;c<a;c+=1)l[c]=this.glyphs.get(s[c])||u;return l};Xr.prototype.nameToGlyphIndex=function(n){return this.glyphNames.nameToGlyphIndex(n)};Xr.prototype.nameToGlyph=function(n){var e=this.nameToGlyphIndex(n),t=this.glyphs.get(e);return t||(t=this.glyphs.get(0)),t};Xr.prototype.glyphIndexToName=function(n){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(n):""};Xr.prototype.getKerningValue=function(n,e){n=n.index||n,e=e.index||e;var t=this.position.defaultKerningTables;return t?this.position.getKerningValue(t,n,e):this.kerningPairs[n+","+e]||0};Xr.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]};Xr.prototype.forEachGlyph=function(n,e,t,r,i,o){e=e!==void 0?e:0,t=t!==void 0?t:0,r=r!==void 0?r:72,i=Object.assign({},this.defaultRenderOptions,i);var s=1/this.unitsPerEm*r,a=this.stringToGlyphs(n,i),l;if(i.kerning){var u=i.script||this.position.getDefaultScriptName();l=this.position.getKerningTables(u,i.language)}for(var c=0;c<a.length;c+=1){var h=a[c];if(o.call(this,h,e,t,r,i),h.advanceWidth&&(e+=h.advanceWidth*s),i.kerning&&c<a.length-1){var f=l?this.position.getKerningValue(l,h.index,a[c+1].index):this.getKerningValue(h,a[c+1]);e+=f*s}i.letterSpacing?e+=i.letterSpacing*r:i.tracking&&(e+=i.tracking/1e3*r)}return e};Xr.prototype.getPath=function(n,e,t,r,i){var o=new vo;return this.forEachGlyph(n,e,t,r,i,function(s,a,l,u){var c=s.getPath(a,l,u,i,this);o.extend(c)}),o};Xr.prototype.getPaths=function(n,e,t,r,i){var o=[];return this.forEachGlyph(n,e,t,r,i,function(s,a,l,u){var c=s.getPath(a,l,u,i,this);o.push(c)}),o};Xr.prototype.getAdvanceWidth=function(n,e,t){return this.forEachGlyph(n,0,0,e,t,function(){})};Xr.prototype.draw=function(n,e,t,r,i,o){this.getPath(e,t,r,i,o).draw(n)};Xr.prototype.drawPoints=function(n,e,t,r,i,o){this.forEachGlyph(e,t,r,i,o,function(s,a,l,u){s.drawPoints(n,a,l,u)})};Xr.prototype.drawMetrics=function(n,e,t,r,i,o){this.forEachGlyph(e,t,r,i,o,function(s,a,l,u){s.drawMetrics(n,a,l,u)})};Xr.prototype.getEnglishName=function(n){var e=this.names[n];if(e)return e.en};Xr.prototype.validate=function(){var n=this;function e(r,i){}function t(r){var i=n.getEnglishName(r);i&&i.trim().length>0}t("fontFamily"),t("weightName"),t("manufacturer"),t("copyright"),t("version"),this.unitsPerEm>0};Xr.prototype.toTables=function(){return dne.fontToTable(this)};Xr.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()};Xr.prototype.toArrayBuffer=function(){for(var n=this.toTables(),e=n.encode(),t=new ArrayBuffer(e.length),r=new Uint8Array(t),i=0;i<e.length;i++)r[i]=e[i];return t};Xr.prototype.download=function(n){var e=this.getEnglishName("fontFamily"),t=this.getEnglishName("fontSubfamily");n=n||e.replace(/\s/g,"")+"-"+t+".otf";var r=this.toArrayBuffer();if(mne())if(window.URL=window.URL||window.webkitURL,window.URL){var i=new DataView(r),o=new Blob([i],{type:"font/opentype"}),s=document.createElement("a");s.href=window.URL.createObjectURL(o),s.download=n;var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!1),s.dispatchEvent(a)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var l=require("fs"),u=gne(r);l.writeFileSync(n,u)}};Xr.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};Xr.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};Xr.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var $c=new Array(10);$c[1]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();if(t===1)return{posFormat:1,coverage:this.parsePointer(lt.coverage),value:this.parseValueRecord()};if(t===2)return{posFormat:2,coverage:this.parsePointer(lt.coverage),values:this.parseValueRecordList()};Fn.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")};$c[2]=function(){var e=this.offset+this.relativeOffset,t=this.parseUShort();Fn.assert(t===1||t===2,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var r=this.parsePointer(lt.coverage),i=this.parseUShort(),o=this.parseUShort();if(t===1)return{posFormat:t,coverage:r,valueFormat1:i,valueFormat2:o,pairSets:this.parseList(lt.pointer(lt.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(i),value2:this.parseValueRecord(o)}})))};if(t===2){var s=this.parsePointer(lt.classDef),a=this.parsePointer(lt.classDef),l=this.parseUShort(),u=this.parseUShort();return{posFormat:t,coverage:r,valueFormat1:i,valueFormat2:o,classDef1:s,classDef2:a,class1Count:l,class2Count:u,classRecords:this.parseList(l,lt.list(u,function(){return{value1:this.parseValueRecord(i),value2:this.parseValueRecord(o)}}))}}};$c[3]=function(){return{error:"GPOS Lookup 3 not supported"}};$c[4]=function(){return{error:"GPOS Lookup 4 not supported"}};$c[5]=function(){return{error:"GPOS Lookup 5 not supported"}};$c[6]=function(){return{error:"GPOS Lookup 6 not supported"}};$c[7]=function(){return{error:"GPOS Lookup 7 not supported"}};$c[8]=function(){return{error:"GPOS Lookup 8 not supported"}};$c[9]=function(){return{error:"GPOS Lookup 9 not supported"}};new Array(10);const Nd=1e-8,km=(n,e)=>ws(n,e,Nd*10);function Cie(n,e){const t=n.orientation==="clockwise"?-e:e,r=n.curves.map(u=>({offset:gE(u,t),original:u})),i=[];let o=null,s=r.at(-1);if(!s)return[];if(i.length===1)return i;const a=u=>{o?u.offset instanceof Ni?i.push(u.offset):km(u.offset.firstPoint,u.offset.lastPoint)||i.push(D1(u.offset.firstPoint,u.offset.lastPoint)):o=u},l=function*(){for(const u of r.slice(0,-1))yield u;if(!o)throw new Error("Bug in the offset algorithm");yield o};for(const u of l()){const c=s.offset.lastPoint,h=u.offset.firstPoint;if(km(c,h)){a(s),s=u;continue}let f=[];if(s.offset instanceof Ni&&u.offset instanceof Ni){const{intersections:v,commonSegmentsPoints:y}=F1(s.offset,u.offset,Nd/100);f=[...v,...y]}if(f.length>0){let v=f[0];if(f.length>1){const g=s==null?void 0:s.original.lastPoint,x=f.map(_=>LQ(_,g));v=f[x.indexOf(Math.min(...x))]}const y=s.offset.splitAt([v],Nd)[0],w=u.offset.splitAt([v],Nd).at(-1);if(!w)throw new Error("Bug in the splitting algo in offset");a({offset:y,original:s.original}),s={offset:w,original:u.original};continue}const d=fO(c,h,s.original.lastPoint);a(s),i.push(d),s=u}return a(s),i}function Pie(n,e){const t=Cie(n,e);if(t.length<2)return null;const r=new Map,i=(u,c)=>{const h=r.get(u)||[];r.set(u,[...h,...c])};if(t.forEach((u,c)=>{t.slice(c+1).forEach((h,f)=>{const{intersections:d,commonSegmentsPoints:v}=F1(u,h,Nd),y=[...d,...v].filter(w=>{const g=km(w,u.firstPoint)||km(w,u.lastPoint),x=km(w,h.firstPoint)||km(w,h.lastPoint);return!(g&&x)});y.length&&(i(c,y),i(f+c+1,y))})}),!r.size){const u=new nr(t);return n.intersects(u)?null:u}const s=t.flatMap((u,c)=>{if(!r.has(c))return u;const h=r.get(c)||[];return u.splitAt(h,Nd*100)}).filter(u=>!n.curves.find(h=>h.distanceFrom(u)<Math.abs(e)-Nd));if(!s.length)return null;const l=jQ(s).filter(u=>u.length>1).map(u=>new nr(u)).filter(u=>u.isClosed());return l.length?l.length===1?l[0]:new Un(l):null}const C4=n=>{let e=n[0];for(let t=1;t<n.length;t++)e=Cc(e,n[t]);return e};function yx(n,e){if(n instanceof nr)return Pie(n,e);if(n instanceof Un)return C4(n.blueprints.map(t=>yx(t,e)));if(n instanceof Lr){const t=C4(n.blueprints.slice(1).map(r=>yx(r,e)));return Yh(yx(n.blueprints[0],e),t)}return null}function P4(n,e,t,r){let i=()=>!0;r&&(i=r.shouldKeep.bind(r));const o=[e.curves[0]],s=(l,u)=>{i({firstCurve:l,secondCurve:u,point:l.lastPoint})?o.push(...n(l,u,t)):o.push(l,u)};e.curves.slice(1).forEach(l=>{const u=o.pop();if(!u)throw new Error("Bug in the blueprint filletting algo");s(u,l)});const a=o.at(-1);if(!a)throw new Error("Bug in the blueprint corner algo");if(ws(o[0].firstPoint,a.lastPoint)&&o.length>1){const l=o.pop(),u=o.shift();if(!l||!u)throw new Error("Bug in the blueprint filletting algo");s(l,u)}return new nr(o)}function lT(n,e,t,r){if(e instanceof nr)return P4(n,e,t,r);if(e instanceof Lr)return new Lr(e.blueprints.map(i=>P4(n,i,t,r)));if(e instanceof Un){const i=e.blueprints.map(o=>lT(n,o,t,r)).filter(o=>o!==null);return new Un(i)}return null}function Lie(n,e,t){return lT(vE,n,e,t)}function Rie(n,e,t){return lT(yE,n,e,t)}function CE(n,e){return n instanceof nr?new nr(ow(n.curves,e)):n instanceof Lr?new Lr(n.blueprints.map(t=>CE(t,e))):n instanceof Un?new Un(n.blueprints.map(t=>CE(t,e))):n}class Qi{constructor(e=null){this.innerShape=e}clone(){var e;return new Qi(((e=this.innerShape)==null?void 0:e.clone())||null)}get boundingBox(){return this.innerShape?this.innerShape.boundingBox:new N1}stretch(e,t,r){return this.innerShape?new Qi(this.innerShape.stretch(e,t,r)):new Qi}get repr(){return this.innerShape===null?"=== empty shape":this.innerShape.repr}rotate(e,t){return this.innerShape?new Qi(this.innerShape.rotate(e,t)):new Qi}translate(e,t=0){return this.innerShape?new Qi(this.innerShape.translate(e,t)):new Qi}scale(e,t){return this.innerShape?new Qi(this.innerShape.scale(e,t)):new Qi}mirror(e,t,r){return this.innerShape?new Qi(this.innerShape.mirror(e,t,r)):new Qi}cut(e){return new Qi(Yh(this.innerShape,e.innerShape))}fuse(e){return new Qi(Cc(this.innerShape,e.innerShape))}intersect(e){return new Qi(U0(this.innerShape,e.innerShape))}fillet(e,t){const r=t&&t(new lw);return new Qi(Lie(this.innerShape,e,r))}chamfer(e,t){const r=t&&t(new lw);return new Qi(Rie(this.innerShape,e,r))}sketchOnPlane(e,t){if(!this.innerShape)throw new Error("Trying to sketch an empty drawing");return this.innerShape.sketchOnPlane(e,t)}sketchOnFace(e,t){if(!this.innerShape)throw new Error("Trying to sketch an empty drawing");return this.innerShape.sketchOnFace(e,t)}toSVG(e){var t;return((t=this.innerShape)==null?void 0:t.toSVG(e))||""}toSVGViewBox(e=1){var t;return((t=this.innerShape)==null?void 0:t.toSVGViewBox(e))||""}toSVGPaths(){var e;return((e=this.innerShape)==null?void 0:e.toSVGPaths())||[]}offset(e){return new Qi(yx(this.innerShape,e))}approximate(e,t={}){if(e!=="svg")throw new Error("Only 'svg' is supported for now");return new Qi(CE(this.innerShape,t))}get blueprint(){if(!(this.innerShape instanceof nr)){if(this.innerShape instanceof Un&&this.innerShape.blueprints.length===1&&this.innerShape.blueprints[0]instanceof nr)return this.innerShape.blueprints[0];throw new Error("This drawing is not a blueprint")}return this.innerShape}}class kie extends xee{constructor(e=[0,0]){super(),this.pointer=e,this.firstPoint=e,this.pendingCurves=[]}done(){return new Qi(new nr(this.pendingCurves))}close(){return this._closeSketch(),this.done()}closeWithMirror(){return this._closeWithMirror(),this.close()}closeWithCustomCorner(e,t="fillet"){return this._closeSketch(),this._customCornerLastWithFirst(e,t),this.done()}}function Iie(n){const e=new kie;return n&&e.movePointerTo(n),e}function lB(n,e){return typeof n!="number"||isNaN(n)?{valid:!1,message:`Parameter '${e}' must be a number`}:{valid:!0}}function Nie(n,e){return n<=0?{valid:!1,message:`Parameter '${e}' must be positive`}:{valid:!0}}function Fie(n,e,t){return n>=e?{valid:!1,message:`${t} (${n}) must be less than ${e}`}:{valid:!0}}function iu(n,e){const t=lB(n,e);return t.valid?Nie(n,e):t}function Die(n,e,t){const r=lB(n,t);return r.valid?Fie(n,e,t):r}function ou(n,e){return t=>{const r=[];for(const i of e){const o=n(t[i],i);o.valid||r.push(o.message)}return{valid:r.length===0,errors:r}}}function L4(n,e){return t=>{const r=t[n],i=t[e],o=Die(r,i,n);return o.valid?{valid:!0,errors:[]}:{valid:!1,errors:[o.message]}}}function Ym({width:n=100,depth:e=100,height:t=100}){if(n===0&&e===0&&t===0)return Hr([0,0,0],[1e-7,1e-7,1e-7]);const r=n/2,i=e/2;return Hr([-r,-i,0],[r,i,t])}const Oie={name:"Cuboid",create:Ym,params:[{name:"width",defaultValue:100},{name:"depth",defaultValue:100},{name:"height",defaultValue:100}],validators:[ou(iu,["width","depth","height"])],hasExplosion:!1};function Bie({radius:n=50}){return nee(n)}const Uie={name:"Sphere",create:Bie,params:[{name:"radius",defaultValue:50}],validators:[ou(iu,["radius"])],hasExplosion:!1};function uB({radius:n=50,height:e=100}){return uw(n,e,[0,0,0],[0,0,-1])}const zie={name:"Cylinder",create:uB,params:[{name:"radius",defaultValue:50},{name:"height",defaultValue:100}],validators:[ou(iu,["radius","height"])],hasExplosion:!1};function Hie({aLength:n=80,bLength:e=50,cLength:t=30}){return oee(n,e,t)}const Gie={name:"Ellipsoid",create:Hie,params:[{name:"aLength",defaultValue:80},{name:"bLength",defaultValue:50},{name:"cLength",defaultValue:30}],validators:[ou(iu,["aLength","bLength","cLength"])],hasExplosion:!1},cB=n=>n.boundingBox.center;function hB(n,e,t){return t.map(({position:r,direction:i,orientation:o})=>{const s=n(),a=e(s);let l=s.translate([r[0]-a[0],r[1]-a[1],r[2]-a[2]]);const u=[0,0,1],c=new Tt(o||i);if(c.Length>0){const h=new Tt(u).cross(c);if(h.Length>1e-10){const f=new Tt(u).getAngle(c);l=l.rotate(f,r,h)}else c.dot(new Tt(u))<0&&(l=l.rotate(180,r,[1,0,0]))}return l})}function fB(n,e,t,r,i,o=0,s=0,a=1){const l=new Tt([o,s,a]).normalized();return Array.from({length:e*t},(u,c)=>{const h=Math.floor(c/t),d=c%t*r,v=h*i,w=new Fs(new Tt(n.origin),new Tt(n.xDirection).normalized(),new Tt(n.normal).normalized()).toWorldCoords([d,v,0]);return{position:[w.x,w.y,w.z],direction:[n.normal[0],n.normal[1],n.normal[2]],orientation:[l.x,l.y,l.z]}})}function Vie(n,e,t,r=0,i=0,o=1){return fB({origin:n,xDirection:e,normal:(()=>{const s=new Tt(e),a=new Tt([0,0,1]),l=Math.abs(s.normalized().dot(a))>.99?new Tt([1,0,0]):s.cross(a).normalized();return[l.x,l.y,l.z]})()},1,t,t>1?new Tt(e).Length/(t-1):0,0,r,i,o)}function Wie({count:n=5,vectorX:e=0,vectorY:t=50,vectorZ:r=50,originX:i=0,originY:o=0,originZ:s=0,boxWidth:a=10,boxDepth:l=10,boxHeight:u=10,orientationX:c=0,orientationY:h=0,orientationZ:f=1}){return Tu(hB(()=>Ym({width:a,depth:l,height:u}),cB,Vie([i,o,s],[e,t,r],n,c,h,f)))}const jie={name:"DiagonalCuboidPattern",create:Wie,params:[{name:"count",defaultValue:5},{name:"vectorX",defaultValue:0},{name:"vectorY",defaultValue:50},{name:"vectorZ",defaultValue:50},{name:"originX",defaultValue:0},{name:"originY",defaultValue:0},{name:"originZ",defaultValue:0},{name:"boxWidth",defaultValue:10},{name:"boxDepth",defaultValue:10},{name:"boxHeight",defaultValue:10},{name:"orientationX",defaultValue:0},{name:"orientationY",defaultValue:0},{name:"orientationZ",defaultValue:1}],validators:[ou(iu,["count","boxWidth","boxDepth","boxHeight"])],hasExplosion:!1};function $ie({originX:n=0,originY:e=0,originZ:t=0,directionX:r=1,directionY:i=0,directionZ:o=0,normalX:s=0,normalY:a=0,normalZ:l=1,rowCount:u=3,colCount:c=3,xSpacing:h=30,ySpacing:f=30,boxWidth:d=10,boxDepth:v=10,boxHeight:y=10,orientationX:w=0,orientationY:g=0,orientationZ:x=1}){return Tu(hB(()=>Ym({width:d,depth:v,height:y}),cB,fB({origin:[n,e,t],xDirection:[r,i,o],normal:[s,a,l]},u,c,h,f,w,g,x)))}const qie={name:"RectangularCuboidGrid",create:$ie,params:[{name:"originX",defaultValue:0},{name:"originY",defaultValue:0},{name:"originZ",defaultValue:0},{name:"directionX",defaultValue:1},{name:"directionY",defaultValue:0},{name:"directionZ",defaultValue:0},{name:"normalX",defaultValue:0},{name:"normalY",defaultValue:0},{name:"normalZ",defaultValue:1},{name:"rowCount",defaultValue:3},{name:"colCount",defaultValue:3},{name:"xSpacing",defaultValue:30},{name:"ySpacing",defaultValue:30},{name:"boxWidth",defaultValue:10},{name:"boxDepth",defaultValue:10},{name:"boxHeight",defaultValue:10},{name:"orientationX",defaultValue:0},{name:"orientationY",defaultValue:0},{name:"orientationZ",defaultValue:1}],validators:[ou(iu,["rowCount","colCount","xSpacing","ySpacing","boxWidth","boxDepth","boxHeight"])],hasExplosion:!1};function dB({depth:n=100,flangeXLenght:e=50,flangeYLenght:t=50,thickness:r=5}){const i=Hr([0,-n/2,0],[e,n/2,r]),o=Hr([0,-n/2,0],[r,n/2,t]);return i.fuse(o)}const Xie={name:"LProfile",create:dB,params:[{name:"depth",defaultValue:100},{name:"flangeXLenght",defaultValue:50},{name:"flangeYLenght",defaultValue:50},{name:"thickness",defaultValue:5}],validators:[ou(iu,["depth","flangeXLenght","flangeYLenght","thickness"]),L4("thickness","flangeXLenght"),L4("thickness","flangeYLenght")],hasExplosion:!1};function pB({bottomRadius:n=50,topRadius:e=25,height:t=100}){return WR(n,{plane:"XY",origin:[0,0,0]}).loftWith(WR(e,{plane:"XY",origin:[0,0,-t]}),{ruled:!0})}const Yie={name:"Frustum",create:pB,params:[{name:"bottomRadius",defaultValue:50},{name:"topRadius",defaultValue:25},{name:"height",defaultValue:100}],validators:[ou(iu,["bottomRadius","topRadius","height"])],hasExplosion:!1};function mB({bottomRadius:n=50,topRadius:e=25,frustumHeight:t=80,cylinderHeight:r=40}){return pB({bottomRadius:n,topRadius:e,height:t}).fuse(uw(e,r,[0,0,-t],[0,0,-1]))}const Zie={name:"Drill",create:mB,params:[{name:"bottomRadius",defaultValue:50},{name:"topRadius",defaultValue:25},{name:"frustumHeight",defaultValue:80},{name:"cylinderHeight",defaultValue:40}],validators:[ou(iu,["bottomRadius","topRadius","frustumHeight","cylinderHeight"])],hasExplosion:!1};function Kie(n,e){return{main:n,helperSpaces:e}}const Zn={FRONT:"front",BACK:"back",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom"},tr={FRONT_LEFT:"front_left",FRONT_RIGHT:"front_right",FRONT_TOP:"front_top",FRONT_BOTTOM:"front_bottom",BACK_LEFT:"back_left",BACK_RIGHT:"back_right",BACK_TOP:"back_top",BACK_BOTTOM:"back_bottom",LEFT_TOP:"left_top",LEFT_BOTTOM:"left_bottom",RIGHT_TOP:"right_top",RIGHT_BOTTOM:"right_bottom"};function F2(n){let e;switch(n){case Zn.FRONT:e=new Tt([0,-1,0]);break;case Zn.BACK:e=new Tt([0,1,0]);break;case Zn.LEFT:e=new Tt([-1,0,0]);break;case Zn.RIGHT:e=new Tt([1,0,0]);break;case Zn.TOP:e=new Tt([0,0,1]);break;case Zn.BOTTOM:e=new Tt([0,0,-1]);break;default:throw new Error(`Unknown face identifier: ${n}`)}return e}function gB(n,e){const[[t,r,i],[o,s,a]]=n.bounds;let l;switch(e){case tr.FRONT_TOP:l=new Tt([t,r,a]);break;case tr.FRONT_BOTTOM:l=new Tt([t,r,i]);break;case tr.BACK_TOP:l=new Tt([t,s,a]);break;case tr.BACK_BOTTOM:l=new Tt([t,s,i]);break;case tr.LEFT_TOP:l=new Tt([t,r,a]);break;case tr.LEFT_BOTTOM:l=new Tt([t,r,i]);break;case tr.RIGHT_TOP:l=new Tt([o,r,a]);break;case tr.RIGHT_BOTTOM:l=new Tt([o,r,i]);break;case tr.FRONT_LEFT:l=new Tt([t,r,i]);break;case tr.FRONT_RIGHT:l=new Tt([o,r,i]);break;case tr.BACK_LEFT:l=new Tt([t,s,i]);break;case tr.BACK_RIGHT:l=new Tt([o,s,i]);break;default:throw new Error(`Unknown edge identifier: ${e}`)}return l}function vB(n,e){const[[t,r,i],[o,s,a]]=n.bounds;let l;switch(e){case tr.FRONT_TOP:l=new Tt([o,r,a]);break;case tr.FRONT_BOTTOM:l=new Tt([o,r,i]);break;case tr.BACK_TOP:l=new Tt([o,s,a]);break;case tr.BACK_BOTTOM:l=new Tt([o,s,i]);break;case tr.LEFT_TOP:l=new Tt([t,s,a]);break;case tr.LEFT_BOTTOM:l=new Tt([t,s,i]);break;case tr.RIGHT_TOP:l=new Tt([o,s,a]);break;case tr.RIGHT_BOTTOM:l=new Tt([o,s,i]);break;case tr.FRONT_LEFT:l=new Tt([t,r,a]);break;case tr.FRONT_RIGHT:l=new Tt([o,r,a]);break;case tr.BACK_LEFT:l=new Tt([t,s,a]);break;case tr.BACK_RIGHT:l=new Tt([o,s,a]);break;default:throw new Error(`Unknown edge identifier: ${e}`)}return l}function Jie(n){switch(n){case tr.FRONT_LEFT:return[Zn.FRONT,Zn.LEFT];case tr.FRONT_RIGHT:return[Zn.FRONT,Zn.RIGHT];case tr.FRONT_TOP:return[Zn.FRONT,Zn.TOP];case tr.FRONT_BOTTOM:return[Zn.FRONT,Zn.BOTTOM];case tr.BACK_LEFT:return[Zn.BACK,Zn.LEFT];case tr.BACK_RIGHT:return[Zn.BACK,Zn.RIGHT];case tr.BACK_TOP:return[Zn.BACK,Zn.TOP];case tr.BACK_BOTTOM:return[Zn.BACK,Zn.BOTTOM];case tr.LEFT_TOP:return[Zn.LEFT,Zn.TOP];case tr.LEFT_BOTTOM:return[Zn.LEFT,Zn.BOTTOM];case tr.RIGHT_TOP:return[Zn.RIGHT,Zn.TOP];case tr.RIGHT_BOTTOM:return[Zn.RIGHT,Zn.BOTTOM];default:throw new Error(`Unknown edge identifier: ${n}`)}}function Qie(n,e,t=.5,r=.5){const[[i,o,s],[a,l,u]]=n.bounds,c=Math.max(0,Math.min(1,t)),h=Math.max(0,Math.min(1,r));let f;switch(e){case Zn.FRONT:f=new Tt([i+(a-i)*c,o,s+(u-s)*h]);break;case Zn.BACK:f=new Tt([i+(a-i)*c,l,s+(u-s)*h]);break;case Zn.LEFT:f=new Tt([i,o+(l-o)*c,s+(u-s)*h]);break;case Zn.RIGHT:f=new Tt([a,o+(l-o)*c,s+(u-s)*h]);break;case Zn.TOP:f=new Tt([i+(a-i)*c,o+(l-o)*h,u]);break;case Zn.BOTTOM:f=new Tt([i+(a-i)*c,o+(l-o)*h,s]);break;default:throw new Error(`Unknown face identifier: ${e}`)}return f}function eoe(n,e,t=.5){const r=Math.max(0,Math.min(1,t)),i=gB(n,e),o=vB(n,e);return new Tt([i.x+(o.x-i.x)*r,i.y+(o.y-i.y)*r,i.z+(o.z-i.z)*r])}function toe(n,e){const{type:t,element:r,params:i={}}=e;switch(t){case"face":return Qie(n,r,i.u,i.v);case"edge":return eoe(n,r,i.t);case"corner":if(r.includes("START")){const o=r.replace("_START","");return gB(n,o)}else if(r.includes("END")){const o=r.replace("_END","");return vB(n,o)}else throw new Error(`Invalid corner identifier: ${r}`);case"center":return new Tt(n.center);default:throw new Error(`Unknown position type: ${t}`)}}function noe(n){const e=n.normalized(),t=Math.abs(e.x),r=Math.abs(e.y),i=Math.abs(e.z);let o;return t<=r&&t<=i?o=new Tt([0,e.z,-e.y]):r<=t&&r<=i?o=new Tt([e.z,0,-e.x]):o=new Tt([e.y,-e.x,0]),o.normalized()}function D2(n,e,t,r={}){const i=toe(n.boundingBox,e);let o;r.normal?o=new Tt(r.normal):o=roe(n,e,r);let s;r.xDir?s=new Tt(r.xDir):s=noe(o);const a=new jd;a.coordSystemChange({origin:i.toTuple(),zDir:o.toTuple(),xDir:s.toTuple()},"reference");const l=fi(a.transform(t.wrapped));return a.delete(),o.delete(),s.delete(),i.delete(),l}function roe(n,e,t={}){const{type:r,element:i}=e;switch(r){case"face":return F2(i);case"edge":if(t.faceForEdge)return F2(t.faceForEdge);{const o=Jie(i);return F2(o[0])}case"corner":return t.faceForCorner?F2(t.faceForCorner):new Tt([0,0,1]);case"center":default:return new Tt([0,0,1])}}function sd(n,e,t,r=!1){return r?fi(n.wrapped).mirror(e,t):n.mirror(e,t)}function ioe({width:n=50,depth:e=100,height:t=200,showHelper:r=!0,explosionFactor:i=0}){const o=Ym({width:n,depth:e,height:t}),s=Math.round(t/17.5)-1;if(s<=0)return Kie(Tu([]),r?[o]:[]);const a=t/(s+1),l=s>1?(e-28)/(s-1):0,u=Ym({width:n-1,depth:20,height:.5}),c=u.boundingBox.center,h=D2(u,{type:"face",element:Zn.TOP,params:{u:1.5/(n-1),v:2.25/20}},mB({bottomRadius:1.2,topRadius:.8,frustumHeight:.5*.8,cylinderHeight:.5*.2})),f=u.cut(h).cut(sd(h,"XZ",c,!0)).cut(sd(h,"YZ",c,!0)).cut(sd(sd(h,"XZ",c,!0),"YZ",c,!0)),d=f.clone(),v=dB({depth:20,flangeXLenght:4.5,flangeYLenght:4.5,thickness:.5}),y=v.boundingBox.center,w=D2(v,{type:"face",element:Zn.BOTTOM,params:{u:1.5/4.5,v:2.25/20}},uB({radius:.800001,height:.5})),g=v.cut(w).cut(sd(w,"XZ",y,!0)),x=g.clone(),_=D2(f,{type:"edge",element:tr.LEFT_BOTTOM,params:{t:.5}},g,{normal:[0,0,-1],xDir:[1,0,0]}),E=sd(_,"YZ",c,!0),C=[];let I=0,R=-e/2+14,L=a-(f.boundingBox.bounds[1][2]-f.boundingBox.bounds[0][2]);for(let Q=0;Q<s;Q++){const se=i*15;C.push(f.clone().translate([I,R,L])),C.push(_.clone().translate([I-se,R,L])),C.push(E.clone().translate([I+se,R,L])),R+=l,L+=a}const k=Ym({width:600,depth:20,height:.5}),D=l,N=a,B=Math.sqrt(D*D+N*N),G=B>.001?[0,D/B,N/B]:[1,0,0],$=D2(o,{type:"face",element:Zn.RIGHT},k,{normal:[-1,0,0],xDir:G}).intersect(o),J=$.clone(),le=o.boundingBox.center,H=sd($,"YZ",le,!0),q=i*30,Z=i*30;C.push($.translate([q,0,0])),C.push(H.translate([-Z,0,0]));const oe=Tu(C),F=[{id:"ST001",name:"Stringer",quantity:s,dimensions:`${n-1}×20×0.5cm`,material:"Steel"},{id:"LP001",name:"L-Profile",quantity:s*2,dimensions:"4.5×4.5×20cm",material:"Steel"},{id:"SS001",name:"Side Stringer",quantity:2,dimensions:"Variable",material:"Steel"}];return{main:oe,helperSpaces:r?[o]:[],componentData:F,technicalDrawingModels:{ST001:d,LP001:x,SS001:J}}}const ooe={name:"Staircase",create:ioe,params:[{name:"width",defaultValue:50},{name:"depth",defaultValue:100},{name:"height",defaultValue:200},{name:"showHelper",defaultValue:!0},{name:"explosionFactor",defaultValue:0}],validators:[ou(iu,["width","depth","height"])],hasExplosion:!0};function soe({width:n,depth:e,board_thickness:t}){let r=[];const s=Math.floor(e/100),a=Math.floor((e-t)/100),l=Math.floor(e/150),u=(e-s*50)/(s+1),c=(e-t-a*50)/(a+1),h=(2*e/3-l*50)/(l+1),f=Iie([-24,2.5]).bulgeArcTo([24,2.5],-.3).tangentArcTo([24,-2.5]).bulgeArcTo([-24,-2.5],-.3).tangentArcTo([-24,2.5]).close().sketchOnPlane("XZ",-1.5).extrude(3),d=[];for(let Ke=0;Ke<s;Ke++){const Ve=f.clone().translate(u+25+Ke*(50+u),-n/2+t/2,500);d.push(Ve),r.push(Ve.clone()),r.push(Ve.clone().mirror("XZ"))}const v=Lh(d),y=[];for(let Ke=0;Ke<a;Ke++){const Ve=f.clone().rotate(90,[0,0,0],[1,0,0]).translate(c+25+Ke*(50+c),-n/2+t,3*t/2);y.push(Ve),r.push(Ve.clone()),r.push(Ve.clone().mirror("XZ"))}const w=Lh(y),g=Hr([0,-n/2,0],[e,-n/2+t,500]).cut(v).cut(w);r.push(g),r.push(g.clone().mirror("XZ"));const x=Hr([e,-n/2,0],[e+2,-n/2+t,500]);r.push(x),r.push(x.clone().mirror("XZ"));const _=[];for(let Ke=0;Ke<a;Ke++){const Ve=f.clone().translate(c+25+Ke*(50+c),n/6,2*t);_.push(Ve),r.push(Ve.clone()),r.push(Ve.clone().mirror("XZ"))}const E=Lh(_),C=Hr([0,-n/2+t,t],[e-t-2,n/2-t,2*t]).cut(w).cut(w.mirror("XZ")).cut(E).cut(E.clone().mirror("XZ"));r.push(C);const I=Hr([e-t-2,-n/2+t,t],[e-t,n/2-t,2*t]);r.push(I);const R=[];for(let Ke=0;Ke<a;Ke++){const Ve=f.clone().translate(c+25+Ke*(50+c),n/6,500);R.push(Ve),r.push(Ve.clone()),r.push(Ve.clone().mirror("XZ"))}const L=Lh(R),k=Hr([0,n/6-t/2,2*t],[e-t-2,n/6+t/2,500]).cut(E).cut(L);r.push(k),r.push(k.clone().mirror("XZ"));const D=Hr([e-t-2,n/6-t/2,2*t],[e-t,n/6+t/2,500]);r.push(D),r.push(D.clone().mirror("XZ"));const N=[];for(let Ke=0;Ke<l;Ke++){const Ve=f.clone().translate(h+25+Ke*(50+h),n/4,500+t);N.push(Ve),r.push(Ve.clone()),r.push(Ve.clone().mirror("XZ"))}const B=Lh(N),G=Hr([0,-n/2,500],[e,n/2,500+t]).cut(v).cut(v.mirror("XZ")).cut(L).cut(L.mirror("XZ")).cut(B).cut(B.clone().mirror("XZ"));r.push(G);const V=Hr([e,-n/2,500],[e+2,n/2,500+t]);r.push(V);const $=[];for(let Ke=0;Ke<l;Ke++){const Ve=f.clone().translate(h+25+Ke*(50+h),n/4,500+6*(t+300));$.push(Ve),r.push(Ve.clone()),r.push(Ve.clone().mirror("XZ"))}const J=Lh($),H=Lh([]),q=Hr([0,n/4-t/2,500+t],[2*e/3,n/4+t/2,500+6*(t+300)]).cut(B).cut(J).cut(H);r.push(q),r.push(q.clone().mirror("XZ"));const Z=Hr([2*e/3,n/4-t/2,500+t],[2*e/3+2,n/4+t/2,500+6*(t+300)]);r.push(Z),r.push(Z.clone().mirror("XZ"));const oe=Hr([0,-n/2,500+6*(t+300)],[e,n/2,500+7*t+6*300]).cut(J).cut(J.mirror("XZ"));r.push(oe);const F=Hr([e,-n/2,500+6*(t+300)],[e+2,n/2,500+7*t+6*300]);r.push(F);const j=Hr([e-t,-n/2+t+4,t],[e,-n/6-3,500-4]);r.push(j),r.push(j.clone().mirror("XZ"));const Q=Hr([e-t,-n/6+3,t],[e,n/6-3,500-4]);r.push(Q);const se=Hr([e-t,-n/6-3,t],[e,-n/6-1,500-4]),fe=Hr([e-t,-n/2+t+2,t],[e,-n/2+t+4,500-4]),we=Hr([e-t,-n/2+t+4,500-4],[e,-n/6-3,500-2]),Ee=Hr([e-t,-n/2+t+4,t],[e,-n/6-3,t+2]);r.push(se),r.push(fe),r.push(we),r.push(Ee),r.push(se.clone().mirror("XZ")),r.push(fe.clone().mirror("XZ")),r.push(we.clone().mirror("XZ")),r.push(Ee.clone().mirror("XZ"));const Ce=Hr([e-t,-n/6+1,t],[e,-n/6+3,500-4]),Ge=Hr([e-t,n/6-3,t],[e,n/6-1,500-4]),Ie=Hr([e-t,-n/6+3,500-4],[e,n/6-3,500-2]),he=Hr([e-t,-n/6+3,t],[e,n/6-3,t+2]);r.push(Ce),r.push(Ge),r.push(Ie),r.push(he);const ke=-n/6+3+20,Ne=500/2,Ae=uw(5,20,[e,ke,Ne],[1,0,0]).fuse(uw(10,10,[e+20,ke,Ne],[1,0,0]));r.push(Ae),r.push(Ae.clone().mirror("XZ"));const ie=-n/2+t+4+20;return r.push(Ae.clone().translateY(ie-ke)),r.push(Ae.clone().translateY(ie-ke).mirror("XZ")),Lh(r)}const aoe={name:"Closet",create:soe,params:[{name:"width",defaultValue:2e3,description:"Overall width of the closet"},{name:"depth",defaultValue:500,description:"Overall depth of the closet"},{name:"board_thickness",defaultValue:30,description:"Thickness of the boards used"}],validators:[ou(iu,["width","depth","board_thickness"])],hasExplosion:!1,hasBoM:!0},Ys={Cuboid:Oie,Sphere:Uie,Cylinder:zie,Ellipsoid:Gie,DiagonalCuboidPattern:jie,RectangularCuboidGrid:qie,LProfile:Xie,Frustum:Yie,Drill:Zie,Closet:aoe,Staircase:{...ooe,hasBoM:!0}};function PE(n){return n.params.reduce((e,t)=>(e[t.name]=t.defaultValue,e),{})}const E0=R3(new vQ);function loe(){var D;const[n,e]=pe.useState(Object.keys(Ys)[0]),[t,r]=pe.useState(PE(Ys[n])),[i,o]=pe.useState(0),[s,a]=pe.useState(null),[l,u]=pe.useState(null),[c,h]=pe.useState(null),[f,d]=pe.useState([]),[v,y]=pe.useState("3d"),[w,g]=pe.useState(!0),[x,_]=pe.useState(!1);pe.useEffect(()=>{const N=()=>{_(window.innerWidth<768),window.innerWidth<768?g(!1):g(!0)};return N(),window.addEventListener("resize",N),()=>window.removeEventListener("resize",N)},[]);const E=pe.useCallback(async()=>{console.time(`[PERF] worker call for ${n}`),console.log(`[INFO] Creating ${n} with params:`,t);const N={...t};Ys[n].hasExplosion&&(N.explosionFactor=i);try{d([]);const B=await E0.createMesh(n,N);if(console.timeEnd(`[PERF] worker call for ${n}`),B.error&&B.validationErrors)d(B.validationErrors),a(null),u(null),h(null);else if(a(B),h(B.componentData||null),v==="technical"){const G=await E0.createProjections(n,N);u(G)}else u(null)}catch(B){console.error("Error creating model or projections:",B),d(["An error occurred while generating the model."]),a(null),u(null),h(null),console.timeEnd(`[PERF] worker call for ${n}`)}},[n,t,i,v]);pe.useEffect(()=>{E()},[E]);const C=pe.useCallback(async()=>{console.log(`[INFO] Requesting high-detail mesh for ${n}`),console.time(`[PERF] worker call for ${n} (high detail)`);try{const N={...t};Ys[n].hasExplosion&&(N.explosionFactor=i);const B=await E0.createMesh(n,N,"high");return console.timeEnd(`[PERF] worker call for ${n} (high detail)`),B.error?(console.error("Error generating high-detail mesh:",B.validationErrors),d(B.validationErrors||["Error generating high-detail mesh."]),null):B}catch(N){return console.error("Error requesting high-detail mesh:",N),d(["An error occurred while generating the high-detail model."]),console.timeEnd(`[PERF] worker call for ${n} (high detail)`),null}},[n,t,i,E0]);pe.useEffect(()=>{if(v==="technical"&&s&&!l){const N={...t};Ys[n].hasExplosion&&(N.explosionFactor=i),E0.createProjections(n,N).then(B=>{u(B)})}},[v,s,l,n,t,i]);const I=N=>{var G;const B=N.target.value;e(B),r(PE(Ys[B])),o(0),u(null),h(null),v==="bom"&&!((G=Ys[B])!=null&&G.hasBoM)&&y("3d")},R=(N,B)=>{r(G=>({...G,[N]:B}))},L=N=>{o(parseFloat(N.target.value))},k=()=>{g(!w)};return ut(Zm,{children:[ut("div",{style:{padding:x?"8px":"10px",borderBottom:"1px solid #eee",backgroundColor:"#f8f8f8",fontSize:x?"11px":"12px",margin:0,flexShrink:0},children:[ut("div",{style:{display:"flex",flexDirection:x?"column":"row",alignItems:x?"flex-start":"center",marginBottom:"10px",gap:x?"8px":"0"},children:[ut("div",{style:{display:"flex",alignItems:"center",width:x?"100%":"auto"},children:[ue("span",{style:{marginRight:"5px",fontWeight:"bold"},children:"Model:"}),ue("select",{value:n,onChange:I,style:{marginRight:"10px",height:x?"30px":"24px",fontSize:x?"14px":"12px",flex:x?"1":"auto"},children:Object.keys(Ys).map(N=>ue("option",{value:N,children:N},N))})]}),ut("div",{style:{display:"flex",marginLeft:x?"0":"20px",borderRadius:"4px",overflow:"hidden",border:"1px solid #ccc",width:x?"100%":"auto"},children:[ue("button",{onClick:()=>y("3d"),style:{padding:x?"8px 12px":"4px 12px",border:"none",background:v==="3d"?"#4a90e2":"#f0f0f0",color:v==="3d"?"white":"#333",cursor:"pointer",fontWeight:v==="3d"?"bold":"normal",flex:x?"1":"auto",fontSize:x?"14px":"inherit"},children:"3D View"}),ue("button",{onClick:()=>y("technical"),style:{padding:x?"8px 12px":"4px 12px",border:"none",background:v==="technical"?"#4a90e2":"#f0f0f0",color:v==="technical"?"white":"#333",cursor:"pointer",fontWeight:v==="technical"?"bold":"normal",flex:x?"1":"auto",fontSize:x?"14px":"inherit"},children:"Technical Drawing"}),ue("button",{onClick:()=>y("rendering"),style:{padding:x?"8px 12px":"4px 12px",border:"none",background:v==="rendering"?"#4a90e2":"#f0f0f0",color:v==="rendering"?"white":"#333",cursor:"pointer",fontWeight:v==="rendering"?"bold":"normal",flex:x?"1":"auto",fontSize:x?"14px":"inherit"},children:"360° Rendering"}),((D=Ys[n])==null?void 0:D.hasBoM)&&ue("button",{onClick:()=>y("bom"),style:{padding:x?"8px 12px":"4px 12px",border:"none",background:v==="bom"?"#4a90e2":"#f0f0f0",color:v==="bom"?"white":"#333",cursor:"pointer",fontWeight:v==="bom"?"bold":"normal",flex:x?"1":"auto",fontSize:x?"14px":"inherit"},children:"Bill of Materials"})]}),x&&ue("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:"4px"},children:ue("button",{onClick:k,style:{padding:"8px 16px",background:"#eee",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px",cursor:"pointer",width:"100%"},children:w?"Hide Parameters ▲":"Show Parameters ▼"})}),v==="3d"&&Ys[n].hasExplosion&&ut("div",{style:{display:"flex",alignItems:"center",marginLeft:x?"0":"15px",backgroundColor:"#e6f7ff",padding:"5px 10px",borderRadius:"4px",width:x?"100%":"auto",marginTop:x?"4px":"0"},children:[ue("span",{style:{marginRight:"8px",fontWeight:"bold"},children:"Explosion:"}),ue("input",{type:"range",min:"0",max:"1",step:"0.01",value:i,onChange:L,style:{width:x?"calc(100% - 100px)":"150px",height:x?"24px":"auto"}}),ut("span",{style:{marginLeft:"5px",minWidth:"40px"},children:[Math.round(i*100),"%"]})]})]}),ue("div",{style:{display:w?"flex":"none",flexWrap:"wrap",gap:"10px",margin:0,padding:0},children:Ys[n].params.map(N=>{const{name:B,defaultValue:G}=N;if(B==="explosionFactor")return null;const V=t[B];return ut("div",{style:{display:"flex",alignItems:"center",backgroundColor:"#fff",border:"1px solid #ccc",padding:x?"8px":"5px 8px",borderRadius:"4px",width:x?"calc(50% - 5px)":"auto"},children:[ut("span",{style:{marginRight:"8px",fontWeight:"bold",color:"#333",fontSize:x?"13px":"inherit"},children:[B,":"]}),typeof G=="boolean"?ue("input",{id:`param-${B}`,type:"checkbox",checked:V,onChange:J=>R(B,J.target.checked),style:{width:x?"20px":"auto",height:x?"20px":"auto"}}):ue("input",{id:`param-${B}`,type:"number",value:V,onChange:J=>R(B,parseFloat(J.target.value)),style:{width:x?"calc(100% - 50px)":"60px",height:x?"30px":"20px",fontSize:x?"14px":"12px",flex:x?"1":"none"}})]},B)})}),f.length>0&&ut("div",{style:{marginTop:"10px",padding:"8px 12px",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",fontSize:x?"13px":"12px"},children:[ue("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Invalid parameters:"}),ue("ul",{style:{margin:"0",paddingLeft:"20px"},children:f.map((N,B)=>ue("li",{children:N},B))})]})]}),ue("div",{style:{flex:1,position:"relative",overflow:"hidden",display:"flex",margin:0,padding:0},children:f.length>0?ue("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:x?"14px":"12px",color:"#999",padding:"0 20px",textAlign:"center"},children:"Fix parameters to see model"}):ut(Zm,{children:[v==="3d"&&s?ue(gY,{children:ue(vY,{edges:s.edges,faces:s.faces,helperSpaces:s.helperSpaces||[]})}):null,v==="technical"?l?ue(IK,{projections:l,isMobile:x}):ue("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:x?"14px":"12px",color:"#999"},children:"Loading technical drawings..."}):null,v==="rendering"?s?ue(HK,{mesh:s,isMobile:x,requestHighDetailMesh:C,selectedModel:n,params:t}):ue("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:x?"14px":"12px",color:"#999"},children:"Loading 360° rendering..."}):null,v==="bom"?c?ue(gQ,{data:c,modelName:n}):ue("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:x?"14px":"12px",color:"#999"},children:"Loading Bill of Materials..."}):null]})})]})}function uoe(){const[n,e]=pe.useState(window.innerWidth<480);return pe.useEffect(()=>{const r=()=>e(window.innerWidth<480);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),pe.useEffect(()=>{if(document.getElementById("calendly-css"))return;const r=document.createElement("link");r.id="calendly-css",r.href="https://assets.calendly.com/assets/external/widget.css",r.rel="stylesheet",document.head.appendChild(r);const i=document.createElement("script");return i.id="calendly-js",i.src="https://assets.calendly.com/assets/external/widget.js",i.async=!0,i.onload=()=>{window.Calendly&&window.Calendly.initBadgeWidget({url:"https://calendly.com/damjanbab/30min",text:"Schedule a FREE consultation meeting",color:"#0069ff",textColor:"#ffffff"})},document.body.appendChild(i),()=>{var l;const o=document.getElementById("calendly-css"),s=document.getElementById("calendly-js"),a=document.querySelector(".calendly-badge-widget");o&&document.head.removeChild(o),s&&document.body.removeChild(s),a&&((l=a.parentElement)==null||l.removeChild(a))}},[]),ut("div",{style:{maxWidth:"1200px",margin:"0 auto",paddingTop:n?"1rem":"2rem",paddingBottom:n?"1rem":"2rem",color:"#1E293B"},children:[ut("div",{style:{marginBottom:"4rem"},className:"section-content",children:[ut("div",{style:{display:"flex",alignItems:"center",marginBottom:"2rem",gap:"1rem"},children:[ue("div",{style:{width:"4px",height:"2rem",backgroundColor:"#2563EB",borderRadius:"2px"}}),ue("h1",{style:{fontSize:n?"1.75rem":"2.25rem",fontWeight:"800",margin:0},className:"section-title",children:"About CAD-OS"})]}),ue("style",{children:`
    .profile-container, .founder-container {
      display: flex;
      flex-direction: row; /* Default: row for desktop */
      align-items: flex-start;
      gap: 2rem;
      margin-bottom: 2rem;
    }
    .profile-container .image-container, .founder-container .image-container {
      flex-shrink: 0;
    }
    .profile-container .text-container, .founder-container .text-container {
      flex: 1;
      min-width: 0;
      text-align: left; /* Default: left align text */
    }

    @media (max-width: 768px) {
      .profile-container, .founder-container {
        flex-direction: column; /* Stack on mobile */
        align-items: center; /* Center items when stacked */
      }
      .profile-container .image-container, .founder-container .image-container {
         margin-bottom: 1.5rem; /* Add space below image when stacked */
      }
       .profile-container .text-container, .founder-container .text-container {
         text-align: center; /* Center text on mobile */
         max-width: 800px; /* Keep text readable */
         flex: none; /* Reset flex properties */
         min-width: auto;
      }
    }
    
    /* Additional mobile styles for very small screens */
    @media (max-width: 480px) {
      .value-card-grid, .expertise-card-grid, .tech-item-grid {
        grid-template-columns: 1fr !important; /* Force single column on very small screens */
      }
      
      .contact-card {
        width: 100% !important; /* Full width cards */
      }
      
      .section-title {
        font-size: 1.5rem !important; /* Smaller headings */
      }
      
      .section-content {
        padding-left: 0 !important;
        padding-right: 0 !important;
      }
    }
  `}),ut("div",{className:"profile-container",children:[ue("div",{className:"image-container",style:{width:n?"120px":"180px",height:n?"120px":"180px",borderRadius:"50%",overflow:"hidden",border:"4px solid #E2E8F0",boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},children:ue("img",{src:"https://raw.githubusercontent.com/damjanbab/cad-os/main/assets/company.jpg",alt:"CAD-OS Logo",style:{width:"100%",height:"100%",objectFit:"cover"},onError:r=>{const i=["./assets/company.jpg","/cad-os/assets/company.jpg","https://raw.githubusercontent.com/haloedDepth/cad-os/main/assets/company.jpg"],o=r.target.src,s=i.find(a=>a!==o);s?r.target.src=s:r.target.src="https://via.placeholder.com/180x180?text=CAD-OS"}})}),ut("div",{className:"text-container",children:[ue("p",{style:{fontSize:n?"1rem":"1.125rem",lineHeight:"1.7",color:"#475569",marginBottom:"1rem"},children:"Founded in January 2025, CAD-OS is a specialized engineering firm dedicated to delivering innovative parametric CAD solutions. Our team combines deep technical expertise in 3D modeling with cutting-edge programming capabilities to revolutionize how engineering models are created, shared, and implemented."}),ue("p",{style:{fontSize:n?"1rem":"1.125rem",lineHeight:"1.7",color:"#475569",marginBottom:"1rem"},children:"We've built our services on a foundation of transparency, quality, and exceptional communication. By leveraging open-source technologies alongside proprietary development techniques, we deliver professional engineering solutions that dramatically reduce development time while maintaining precision and adaptability."}),ue("p",{style:{fontSize:n?"1rem":"1.125rem",lineHeight:"1.7",color:"#475569"},children:"Our platform embodies our commitment to client empowerment, providing real-time collaboration tools, instant feedback mechanisms, and comprehensive self-service capabilities that set a new standard for CAD service delivery."})]})]})]}),ut("div",{style:{marginBottom:"4rem"},className:"section-content",children:[ut("div",{style:{display:"flex",alignItems:"center",marginBottom:"2rem",gap:"1rem"},children:[ue("div",{style:{width:"4px",height:"2rem",backgroundColor:"#2563EB",borderRadius:"2px"}}),ue("h2",{style:{fontSize:n?"1.5rem":"1.75rem",fontWeight:"700",margin:0},className:"section-title",children:"Our Founder"})]}),ut("div",{className:"founder-container",children:[ue("div",{className:"image-container",style:{width:n?"120px":"150px",height:n?"120px":"150px",borderRadius:"50%",overflow:"hidden",border:"4px solid #E2E8F0",boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},children:ue("img",{src:"https://raw.githubusercontent.com/damjanbab/cad-os/main/assets/profile.jpg",alt:"Damjan Babic",style:{width:"100%",height:"100%",objectFit:"cover"},onError:r=>{const i=["./assets/profile.jpg","/cad-os/assets/profile.jpg","https://raw.githubusercontent.com/haloedDepth/cad-os/main/assets/profile.jpg"],o=r.target.src,s=i.find(a=>a!==o);s?r.target.src=s:r.target.src="https://via.placeholder.com/150x150?text=Profile"}})}),ut("div",{className:"text-container",children:[ue("h3",{style:{fontSize:n?"1.125rem":"1.25rem",fontWeight:"700",marginBottom:"0.75rem",color:"#1E293B"},children:"Damjan Babic"}),ue("p",{style:{fontSize:n?"1rem":"1.125rem",lineHeight:"1.7",color:"#475569",marginBottom:"1rem"},children:"Damjan Babic founded CAD-OS with a background in Marine Engineering and over a decade of experience in 3D modeling using commercial software. His expertise in parametric and programmatic CAD solutions ensures clients receive precise, adaptable models for engineering and manufacturing applications."}),ue("p",{style:{fontSize:n?"1rem":"1.125rem",lineHeight:"1.7",color:"#475569"},children:"Through self-study, Damjan has developed strong programming skills in JavaScript, Python, Clojure, and various frontend technologies, allowing him to create custom solutions that merge engineering precision with modern web technologies. This unique combination enables CAD-OS to offer innovative, cost-effective services that traditional CAD approaches can't match."})]})]})]}),ut("div",{style:{marginBottom:"4rem"},className:"section-content",children:[ue("h2",{style:{fontSize:n?"1.5rem":"1.75rem",fontWeight:"700",marginBottom:"2rem"},className:"section-title",children:"Our Core Values"}),ut("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"2rem"},className:"value-card-grid",children:[ue(A0,{icon:ut("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ue("path",{d:"M18 8h1a4 4 0 1 1 0 8h-1"}),ue("path",{d:"M2 8h16v9a4 4 0 0 1-4 4H6a4 4 0 0 1-4-4V8z"}),ue("line",{x1:"6",y1:"1",x2:"6",y2:"4"}),ue("line",{x1:"10",y1:"1",x2:"10",y2:"4"}),ue("line",{x1:"14",y1:"1",x2:"14",y2:"4"})]}),title:"Transparency",description:"We believe in complete openness throughout the development process, giving clients full visibility into their projects at every stage.",isMobile:n}),ue(A0,{icon:ut("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ue("circle",{cx:"12",cy:"8",r:"7"}),ue("polyline",{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"})]}),title:"Quality",description:"Engineering precision and technical excellence guide all our work, ensuring every model meets rigorous standards and real-world functionality requirements.",isMobile:n}),ue(A0,{icon:ue("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:ue("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"})}),title:"Communication",description:"Clear, responsive communication forms the backbone of our client relationships, ensuring alignment and satisfaction at every project milestone.",isMobile:n}),ue(A0,{icon:ut("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ue("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),ue("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),title:"Continuous Innovation",description:"We constantly explore new techniques and technologies to enhance our service offerings and deliver progressively better solutions to our clients.",isMobile:n}),ue(A0,{icon:ut("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ue("circle",{cx:"12",cy:"12",r:"10"}),ue("polyline",{points:"12 6 12 12 16 14"})]}),title:"Rapid Prototyping",description:"We specialize in quickly turning concepts into functional prototypes, significantly accelerating the product development cycle for our clients.",isMobile:n})]})]}),ut("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem",marginBottom:"4rem"},className:"expertise-card-grid section-content",children:[ue(r5,{icon:ue("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:ue("polyline",{points:"22 12 18 12 15 21 9 3 6 12 2 12"})}),title:"Engineering Expertise",description:"Our team brings extensive engineering knowledge to every project, ensuring models meet rigorous technical standards and real-world functionality requirements across various industries.",isMobile:n}),ue(r5,{icon:ut("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ue("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),ue("polyline",{points:"2 17 12 22 22 17"}),ue("polyline",{points:"2 12 12 17 22 12"})]}),title:"Advanced 3D Modeling",description:"With over a decade of experience in commercial 3D modeling software, our specialists excel in creating complex parametric models that allow for rapid iterations and modifications.",isMobile:n}),ue(r5,{icon:ut("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ue("path",{d:"M18 10h-4V4h-4v6H6l6 6 6-6z"}),ue("path",{d:"M8 18h8"})]}),title:"Software Development",description:"Our programming capabilities in JavaScript, Python, Clojure, and frontend technologies enable us to create custom parametric solutions bridging traditional CAD and modern web applications.",isMobile:n})]}),ut("div",{style:{backgroundColor:"#F8FAFC",padding:n?"1.5rem":"3rem",borderRadius:"0.5rem",marginBottom:"4rem"},className:"section-content",children:[ue("h2",{style:{fontSize:n?"1.5rem":"1.75rem",fontWeight:"700",marginBottom:"2rem",textAlign:"center"},className:"section-title",children:"Our Technology Stack"}),ut("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem"},className:"tech-item-grid",children:[ue(lm,{name:"Replicad",description:"JavaScript CAD framework based on OpenCascade geometry kernel, enabling powerful programmatic 3D modeling",link:"https://replicad.xyz/",isMobile:n}),ue(lm,{name:"Three.js",description:"3D graphics library for rendering complex geometry in the browser with high performance",link:"https://threejs.org/",isMobile:n}),ue(lm,{name:"React Three Fiber",description:"React renderer for Three.js, making 3D graphics declarative and easier to work with",link:"https://docs.pmnd.rs/react-three-fiber",isMobile:n}),ue(lm,{name:"Web-Based Production",description:"Client-side rendering and processing for secure, real-time collaboration and feedback",link:"#",isMobile:n}),ue(lm,{name:"Parametric Design",description:"Custom parametric approach allowing for instant model updates based on changing parameters",link:"#",isMobile:n}),ue(lm,{name:"Open Source Core",description:"Built on open-source technologies to provide cost-effective solutions without compromising quality",link:"#",isMobile:n})]})]}),ut("div",{style:{marginBottom:"4rem"},className:"section-content",children:[ue("h2",{style:{fontSize:n?"1.5rem":"1.75rem",fontWeight:"700",marginBottom:"2rem"},className:"section-title",children:"Our Service Process"}),ue("div",{style:{display:"flex",flexDirection:"column",gap:"2rem"},children:ue("div",{style:{width:"100%",maxWidth:"100%"},children:ut("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-start"},children:[ue("div",{style:{fontSize:n?"1.5rem":"2rem",fontWeight:"800",color:"#2563EB",lineHeight:"1",flexShrink:0},children:"01"}),ut("div",{style:{flex:1,minWidth:0},children:[ue("h3",{style:{fontSize:n?"1.125rem":"1.25rem",fontWeight:"700",marginBottom:"0.5rem"},children:"Client Consultation"}),ue("p",{style:{color:"#475569",fontSize:n?"0.9rem":"1rem",lineHeight:"1.6"},children:"We begin with a detailed discussion about your project needs, including technical requirements, use cases, and design parameters. This consultation ensures we fully understand your vision."})]})]})})})]}),ut("div",{id:"contact",style:{padding:n?"1.5rem":"3rem",backgroundColor:"#1E293B",color:"white",borderRadius:"0.5rem",marginBottom:"4rem"},className:"section-content",children:[ue("h2",{style:{fontSize:n?"1.5rem":"1.75rem",fontWeight:"700",marginBottom:"1.5rem",textAlign:"center"},className:"section-title",children:"Let's Work Together"}),ue("p",{style:{textAlign:"center",maxWidth:"700px",margin:"0 auto",marginBottom:"2.5rem",color:"#CBD5E1",fontSize:n?"0.9rem":"1rem"},children:"Have a project in mind or need a custom 3D modeling solution? We'd love to hear about your requirements and discuss how our services can bring your ideas to reality."}),ue("div",{style:{display:"flex",flexDirection:"column",gap:"1.5rem",maxWidth:"700px",margin:"0 auto"},children:ue("a",{href:"mailto:damjanbab@icloud.com",style:{textDecoration:"none"},className:"contact-card",children:ut("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"1.5rem",backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:"0.5rem",transition:"background-color 0.2s",cursor:"pointer"},onMouseOver:r=>{r.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseOut:r=>{r.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.05)"},children:[ue("div",{style:{marginBottom:"1rem",color:"#60A5FA"},children:ut("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ue("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),ue("polyline",{points:"22,6 12,13 2,6"})]})}),ue("h3",{style:{fontSize:n?"1rem":"1.125rem",fontWeight:"600",marginBottom:"0.5rem",color:"white"},children:"Email"}),ue("p",{style:{color:"#E2E8F0",fontSize:n?"0.8rem":"0.875rem",textAlign:"center"},children:"damjanbab@icloud.com"})]})})})]}),ut("footer",{style:{textAlign:"center",padding:"2rem 0",color:"#64748B",borderTop:"1px solid #E2E8F0"},children:[ut("p",{style:{marginBottom:"0.5rem"},children:["© ",new Date().getFullYear()," CAD-OS. All rights reserved."]}),ue("p",{style:{fontSize:"0.875rem"},children:"Built with React, Three.js, and Replicad."})]})]})}function A0({icon:n,title:e,description:t,isMobile:r}){return ut("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:r?"1.25rem":"1.5rem",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",border:"1px solid #E2E8F0",height:"100%",display:"flex",flexDirection:"column"},children:[ue("div",{style:{color:"#2563EB",marginBottom:"1rem",display:"inline-flex",padding:"0.75rem",backgroundColor:"#EFF6FF",borderRadius:"0.5rem"},children:n}),ue("h3",{style:{fontSize:r?"1.125rem":"1.25rem",fontWeight:"700",marginBottom:"0.75rem"},children:e}),ue("p",{style:{color:"#475569",lineHeight:"1.5",flex:"1",fontSize:r?"0.9rem":"1rem"},children:t})]})}function r5({icon:n,title:e,description:t,isMobile:r}){return ut("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:r?"1.25rem":"1.5rem",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",border:"1px solid #E2E8F0"},children:[ue("div",{style:{color:"#2563EB",marginBottom:"1rem",display:"inline-flex",padding:"0.75rem",backgroundColor:"#EFF6FF",borderRadius:"0.5rem"},children:n}),ue("h3",{style:{fontSize:r?"1.125rem":"1.25rem",fontWeight:"700",marginBottom:"0.75rem"},children:e}),ue("p",{style:{color:"#475569",lineHeight:"1.5",fontSize:r?"0.9rem":"1rem"},children:t})]})}function lm({name:n,description:e,link:t,isMobile:r}){return ut("div",{style:{display:"flex",flexDirection:"column",padding:r?"1.25rem":"1.5rem",backgroundColor:"white",borderRadius:"0.375rem",boxShadow:"0 1px 2px rgba(0, 0, 0, 0.05)",border:"1px solid #E2E8F0",height:"100%"},children:[ue("h3",{style:{fontSize:r?"1rem":"1.125rem",fontWeight:"700",marginBottom:"0.625rem",color:"#1E293B"},children:n}),ue("p",{style:{color:"#64748B",fontSize:r?"0.8rem":"0.875rem",marginBottom:"1rem",flex:"1"},children:e}),t!=="#"&&ut("a",{href:t,target:"_blank",rel:"noopener noreferrer",style:{color:"#2563EB",textDecoration:"none",fontWeight:"600",fontSize:r?"0.8rem":"0.875rem",display:"inline-flex",alignItems:"center",marginTop:"auto"},children:["Learn more",ut("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginLeft:"0.25rem"},children:[ue("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),ue("polyline",{points:"12 5 19 12 12 19"})]})]})]})}function coe(){return new Worker("/cad-os/assets/videoFrame.worker-561b3b7a.js",{type:"module"})}const R4=n=>new Promise(e=>setTimeout(e,n));function hoe(){const[n,e]=pe.useState(Object.keys(Ys)[0]||""),[t,r]=pe.useState(!1),[i,o]=pe.useState(0),[s,a]=pe.useState(""),[l,u]=pe.useState(null),c=pe.useRef(null);pe.useEffect(()=>{const f=new coe;return c.current=R3(f),console.log("[VideoTool] Video Frame Worker API wrapped with Comlink."),()=>{var d,v;console.log("[VideoTool] Terminating Video Frame worker."),(v=(d=c.current)==null?void 0:d.cleanupOffscreenRenderer)==null||v.call(d),f.terminate(),c.current=null}},[]);const h=pe.useCallback(async()=>{var N,B;if(!c.current){alert("Video generation worker is not available.");return}if(!n){alert("Please select a model.");return}r(!0),o(0),a("Starting video generation..."),u(null);const f=Ys[n];if(!f){alert(`Model definition for "${n}" not found.`),r(!1);return}const d=30,y=d*5,w=1280,g=720,x=1,_=PE(f),E=[],C=new ge(0,-300,150),I=new ge(0,0,0),R=C.distanceTo(I),L=C.y,k=Math.PI*2/y,D={fov:45,near:.1,far:2e3};try{a(`Generating ${y} frames for ${n}...`);for(let Z=0;Z<y;Z++){const oe=Z/(y-1);console.log(`[VideoTool] Starting frame ${Z+1}/${y}`);const F=Z*k,j=I.x+R*Math.cos(F),Q=I.z+R*Math.sin(F),se=new ge(j,L,Q),fe=new Si;fe.position.copy(se),fe.lookAt(I);const we=fe.quaternion,Ee={position:{x:se.x,y:se.y,z:se.z},quaternion:{_x:we.x,_y:we.y,_z:we.z,_w:we.w}};let Ce={..._};if(f.hasExplosion){const ke=Math.sin(oe*Math.PI)*.2;Ce.explosionFactor=ke}const Ge={type:n,params:Ce};let Ie=null;try{console.log(`[VideoTool] Calling worker.generateVideoFrame for frame ${Z+1}`),Ie=await c.current.generateVideoFrame(Ge.type,Ge.params,Ee,"standard",w,g,x,D),console.log(`[VideoTool] Received frameBitmap for frame ${Z+1}`)}catch(ke){throw console.error(`[VideoTool] Error generating frame ${Z+1} in worker:`,ke),alert(`Error generating frame ${Z+1}. See console for details.`),ke}E.push(Ie);const he=Math.round((Z+1)/y*50);o(he),a(`Generated frame ${Z+1}/${y}`),Z%10===0&&await R4(1)}console.log("[VideoTool] Off-screen frame generation complete."),a("Assembling video..."),o(51);const G=document.createElement("canvas");G.width=w,G.height=g;const V=G.getContext("2d");if(!V)throw new Error("Could not get 2D context for assembly canvas");let $="video/webm;codecs=vp9";if(!MediaRecorder.isTypeSupported($)&&(console.warn(`${$} not supported, trying video/webm...`),$="video/webm",!MediaRecorder.isTypeSupported($)))throw new Error("No supported video/webm MIME type found for MediaRecorder.");const J=G.captureStream(d),le=new MediaRecorder(J,{mimeType:$}),H=[];le.ondataavailable=Z=>{Z.data.size>0&&H.push(Z.data)};const q=new Promise((Z,oe)=>{le.onstop=()=>{console.log("[VideoTool] Recording stopped.");try{const F=new Blob(H,{type:$}),j=URL.createObjectURL(F);u(j),Z()}catch(F){oe(F)}},le.onerror=F=>{console.error("[VideoTool] MediaRecorder error:",F.error),oe(F.error||new Error("MediaRecorder encountered an error."))}});le.start(),console.log("[VideoTool] MediaRecorder started."),console.log("[VideoTool] Starting to draw frames onto assembly canvas...");for(let Z=0;Z<E.length;Z++){const oe=E[Z];oe?(V.drawImage(oe,0,0,G.width,G.height),oe.close()):console.warn(`[VideoTool] Frame ${Z+1} was null or undefined. Skipping draw.`);const F=51+Math.round((Z+1)/E.length*49);o(F),a(`Assembling frame ${Z+1}/${y}`),await R4(1e3/d)}console.log("[VideoTool] Finished drawing frames to assembly canvas."),le.stop(),await q,console.log("[VideoTool] Video assembly complete."),a("Video generation complete.")}catch(G){console.error("[VideoTool] Error during video export:",G),alert(`Failed to export video: ${G.message}`),u(null),a(`Error: ${G.message}`)}finally{console.log("[VideoTool] Cleaning up worker renderer..."),await((B=(N=c.current)==null?void 0:N.cleanupOffscreenRenderer)==null?void 0:B.call(N)),console.log("[VideoTool] Worker renderer cleanup attempted."),r(!1)}},[n]);return ut("div",{children:[ue("h2",{children:"360 Animated Video Generator"}),ut("div",{style:{marginBottom:"15px"},children:[ue("label",{htmlFor:"model-select",style:{marginRight:"10px"},children:"Select Model:"}),ue("select",{id:"model-select",value:n,onChange:f=>e(f.target.value),disabled:t,children:Object.keys(Ys).map(f=>ue("option",{value:f,children:f},f))})]}),ue("button",{onClick:h,disabled:t,children:t?`Generating... (${i}%)`:"Generate 360 Video"}),t&&ut("div",{style:{marginTop:"15px"},children:[ue("progress",{value:i,max:"100",style:{width:"100%"}}),ue("p",{children:s})]}),l&&!t&&ut("div",{style:{marginTop:"15px",background:"#e0ffe0",padding:"10px",borderRadius:"5px"},children:[ue("p",{children:"Video ready!"}),ue("a",{href:l,download:`${n}-360-video.webm`,onClick:()=>u(null),children:"Download Video (WEBM)"}),ue("button",{onClick:()=>u(null),style:{marginLeft:"10px"},children:"Close"})]})]})}const foe=n=>({padding:"8px 16px",border:"none",borderBottom:n?"3px solid #2563EB":"3px solid transparent",background:"none",color:n?"#2563EB":"#333",cursor:"pointer",fontWeight:n?"600":"400",fontSize:"1rem",marginRight:"10px",transition:"border-color 0.2s, color 0.2s"});function doe(){const[n,e]=pe.useState("video");return ut("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[ue("div",{style:{padding:"10px 20px",borderBottom:"1px solid #e0e0e0",backgroundColor:"#f9f9f9",flexShrink:0},children:ue("button",{onClick:()=>e("video"),style:foe(n==="video"),children:"Video Generation"})}),ue("div",{style:{flex:1,overflow:"auto",padding:"20px"},children:n==="video"&&ue(hoe,{})})]})}function poe({articles:n}){return ue("div",{style:{display:"flex",flexDirection:"column",gap:"2rem"},children:n.map(e=>ue(m1,{to:`/blog/${e.id}`,style:{textDecoration:"none",color:"inherit"},children:ut("div",{style:{padding:"1.5rem",border:"1px solid #E2E8F0",borderRadius:"0.5rem",backgroundColor:"white",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:t=>{t.currentTarget.style.transform="translateY(-4px)",t.currentTarget.style.boxShadow="0 10px 15px rgba(0, 0, 0, 0.05)"},onMouseOut:t=>{t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.1)"},children:[ue("h2",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"0.5rem",color:"#1E293B"},children:e.title}),ue("p",{style:{fontSize:"0.875rem",color:"#64748B",marginBottom:"1rem"},children:e.date}),ue("p",{style:{fontSize:"1rem",lineHeight:"1.6",color:"#475569",marginBottom:"1.25rem"},children:e.excerpt}),ut("div",{style:{display:"inline-flex",alignItems:"center",color:"#2563EB",fontWeight:"600",fontSize:"0.875rem"},children:["Read more",ut("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",style:{marginLeft:"0.25rem"},children:[ue("line",{x1:"5",y1:"12",x2:"19",y2:"12"}),ue("polyline",{points:"12 5 19 12 12 19"})]})]})]})},e.id))})}function uT(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let sp=uT();function yB(n){sp=n}const fv={exec:()=>null};function Rr(n,e=""){let t=typeof n=="string"?n:n.source;const r={replace:(i,o)=>{let s=typeof o=="string"?o:o.source;return s=s.replace(ks.caret,"$1"),t=t.replace(i,s),r},getRegex:()=>new RegExp(t,e)};return r}const ks={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:n=>new RegExp(`^( {0,3}${n})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}#`),htmlBeginRegex:n=>new RegExp(`^ {0,${Math.min(3,n-1)}}<(?:[a-z].*>|!--)`,"i")},moe=/^(?:[ \t]*(?:\n|$))+/,goe=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,voe=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,W1=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,yoe=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,cT=/(?:[*+-]|\d{1,9}[.)])/,xB=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,wB=Rr(xB).replace(/bull/g,cT).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),xoe=Rr(xB).replace(/bull/g,cT).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),hT=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,woe=/^[^\n]+/,fT=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Soe=Rr(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",fT).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),_oe=Rr(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,cT).getRegex(),IS="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",dT=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,boe=Rr("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",dT).replace("tag",IS).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),SB=Rr(hT).replace("hr",W1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",IS).getRegex(),Moe=Rr(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",SB).getRegex(),pT={blockquote:Moe,code:goe,def:Soe,fences:voe,heading:yoe,hr:W1,html:boe,lheading:wB,list:_oe,newline:moe,paragraph:SB,table:fv,text:woe},k4=Rr("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",W1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",IS).getRegex(),Eoe={...pT,lheading:xoe,table:k4,paragraph:Rr(hT).replace("hr",W1).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",k4).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",IS).getRegex()},Aoe={...pT,html:Rr(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",dT).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:fv,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Rr(hT).replace("hr",W1).replace("heading",` *#{1,6} *[^
]`).replace("lheading",wB).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Toe=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Coe=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,_B=/^( {2,}|\\)\n(?!\s*$)/,Poe=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,NS=/[\p{P}\p{S}]/u,mT=/[\s\p{P}\p{S}]/u,bB=/[^\s\p{P}\p{S}]/u,Loe=Rr(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,mT).getRegex(),MB=/(?!~)[\p{P}\p{S}]/u,Roe=/(?!~)[\s\p{P}\p{S}]/u,koe=/(?:[^\s\p{P}\p{S}]|~)/u,Ioe=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,EB=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Noe=Rr(EB,"u").replace(/punct/g,NS).getRegex(),Foe=Rr(EB,"u").replace(/punct/g,MB).getRegex(),AB="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",Doe=Rr(AB,"gu").replace(/notPunctSpace/g,bB).replace(/punctSpace/g,mT).replace(/punct/g,NS).getRegex(),Ooe=Rr(AB,"gu").replace(/notPunctSpace/g,koe).replace(/punctSpace/g,Roe).replace(/punct/g,MB).getRegex(),Boe=Rr("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,bB).replace(/punctSpace/g,mT).replace(/punct/g,NS).getRegex(),Uoe=Rr(/\\(punct)/,"gu").replace(/punct/g,NS).getRegex(),zoe=Rr(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Hoe=Rr(dT).replace("(?:-->|$)","-->").getRegex(),Goe=Rr("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Hoe).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ww=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Voe=Rr(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",ww).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),TB=Rr(/^!?\[(label)\]\[(ref)\]/).replace("label",ww).replace("ref",fT).getRegex(),CB=Rr(/^!?\[(ref)\](?:\[\])?/).replace("ref",fT).getRegex(),Woe=Rr("reflink|nolink(?!\\()","g").replace("reflink",TB).replace("nolink",CB).getRegex(),gT={_backpedal:fv,anyPunctuation:Uoe,autolink:zoe,blockSkip:Ioe,br:_B,code:Coe,del:fv,emStrongLDelim:Noe,emStrongRDelimAst:Doe,emStrongRDelimUnd:Boe,escape:Toe,link:Voe,nolink:CB,punctuation:Loe,reflink:TB,reflinkSearch:Woe,tag:Goe,text:Poe,url:fv},joe={...gT,link:Rr(/^!?\[(label)\]\((.*?)\)/).replace("label",ww).getRegex(),reflink:Rr(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ww).getRegex()},LE={...gT,emStrongRDelimAst:Ooe,emStrongLDelim:Foe,url:Rr(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},$oe={...LE,br:Rr(_B).replace("{2,}","*").getRegex(),text:Rr(LE.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},O2={normal:pT,gfm:Eoe,pedantic:Aoe},T0={normal:gT,gfm:LE,breaks:$oe,pedantic:joe},qoe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},I4=n=>qoe[n];function yu(n,e){if(e){if(ks.escapeTest.test(n))return n.replace(ks.escapeReplace,I4)}else if(ks.escapeTestNoEncode.test(n))return n.replace(ks.escapeReplaceNoEncode,I4);return n}function N4(n){try{n=encodeURI(n).replace(ks.percentDecode,"%")}catch{return null}return n}function F4(n,e){var o;const t=n.replace(ks.findPipe,(s,a,l)=>{let u=!1,c=a;for(;--c>=0&&l[c]==="\\";)u=!u;return u?"|":" |"}),r=t.split(ks.splitPipe);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!((o=r.at(-1))!=null&&o.trim())&&r.pop(),e)if(r.length>e)r.splice(e);else for(;r.length<e;)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(ks.slashPipe,"|");return r}function C0(n,e,t){const r=n.length;if(r===0)return"";let i=0;for(;i<r&&n.charAt(r-i-1)===e;)i++;return n.slice(0,r-i)}function Xoe(n,e){if(n.indexOf(e[1])===-1)return-1;let t=0;for(let r=0;r<n.length;r++)if(n[r]==="\\")r++;else if(n[r]===e[0])t++;else if(n[r]===e[1]&&(t--,t<0))return r;return-1}function D4(n,e,t,r,i){const o=e.href,s=e.title||null,a=n[1].replace(i.other.outputLinkReplace,"$1");if(n[0].charAt(0)!=="!"){r.state.inLink=!0;const l={type:"link",raw:t,href:o,title:s,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,l}return{type:"image",raw:t,href:o,title:s,text:a}}function Yoe(n,e,t){const r=n.match(t.other.indentCodeCompensation);if(r===null)return e;const i=r[1];return e.split(`
`).map(o=>{const s=o.match(t.other.beginningSpace);if(s===null)return o;const[a]=s;return a.length>=i.length?o.slice(i.length):o}).join(`
`)}class Sw{constructor(e){zr(this,"options");zr(this,"rules");zr(this,"lexer");this.options=e||sp}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const r=t[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?r:C0(r,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const r=t[0],i=Yoe(r,t[3]||"",this.rules);return{type:"code",raw:r,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:i}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let r=t[2].trim();if(this.rules.other.endingHash.test(r)){const i=C0(r,"#");(this.options.pedantic||!i||this.rules.other.endingSpaceChar.test(i))&&(r=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:C0(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let r=C0(t[0],`
`).split(`
`),i="",o="";const s=[];for(;r.length>0;){let a=!1;const l=[];let u;for(u=0;u<r.length;u++)if(this.rules.other.blockquoteStart.test(r[u]))l.push(r[u]),a=!0;else if(!a)l.push(r[u]);else break;r=r.slice(u);const c=l.join(`
`),h=c.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");i=i?`${i}
${c}`:c,o=o?`${o}
${h}`:h;const f=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(h,s,!0),this.lexer.state.top=f,r.length===0)break;const d=s.at(-1);if((d==null?void 0:d.type)==="code")break;if((d==null?void 0:d.type)==="blockquote"){const v=d,y=v.raw+`
`+r.join(`
`),w=this.blockquote(y);s[s.length-1]=w,i=i.substring(0,i.length-v.raw.length)+w.raw,o=o.substring(0,o.length-v.text.length)+w.text;break}else if((d==null?void 0:d.type)==="list"){const v=d,y=v.raw+`
`+r.join(`
`),w=this.list(y);s[s.length-1]=w,i=i.substring(0,i.length-d.raw.length)+w.raw,o=o.substring(0,o.length-v.raw.length)+w.raw,r=y.substring(s.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:i,tokens:s,text:o}}}list(e){let t=this.rules.block.list.exec(e);if(t){let r=t[1].trim();const i=r.length>1,o={type:"list",raw:"",ordered:i,start:i?+r.slice(0,-1):"",loose:!1,items:[]};r=i?`\\d{1,9}\\${r.slice(-1)}`:`\\${r}`,this.options.pedantic&&(r=i?r:"[*+-]");const s=this.rules.other.listItemRegex(r);let a=!1;for(;e;){let u=!1,c="",h="";if(!(t=s.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let f=t[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,x=>" ".repeat(3*x.length)),d=e.split(`
`,1)[0],v=!f.trim(),y=0;if(this.options.pedantic?(y=2,h=f.trimStart()):v?y=t[1].length+1:(y=t[2].search(this.rules.other.nonSpaceChar),y=y>4?1:y,h=f.slice(y),y+=t[1].length),v&&this.rules.other.blankLine.test(d)&&(c+=d+`
`,e=e.substring(d.length+1),u=!0),!u){const x=this.rules.other.nextBulletRegex(y),_=this.rules.other.hrRegex(y),E=this.rules.other.fencesBeginRegex(y),C=this.rules.other.headingBeginRegex(y),I=this.rules.other.htmlBeginRegex(y);for(;e;){const R=e.split(`
`,1)[0];let L;if(d=R,this.options.pedantic?(d=d.replace(this.rules.other.listReplaceNesting,"  "),L=d):L=d.replace(this.rules.other.tabCharGlobal,"    "),E.test(d)||C.test(d)||I.test(d)||x.test(d)||_.test(d))break;if(L.search(this.rules.other.nonSpaceChar)>=y||!d.trim())h+=`
`+L.slice(y);else{if(v||f.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||E.test(f)||C.test(f)||_.test(f))break;h+=`
`+d}!v&&!d.trim()&&(v=!0),c+=R+`
`,e=e.substring(R.length+1),f=L.slice(y)}}o.loose||(a?o.loose=!0:this.rules.other.doubleBlankLine.test(c)&&(a=!0));let w=null,g;this.options.gfm&&(w=this.rules.other.listIsTask.exec(h),w&&(g=w[0]!=="[ ] ",h=h.replace(this.rules.other.listReplaceTask,""))),o.items.push({type:"list_item",raw:c,task:!!w,checked:g,loose:!1,text:h,tokens:[]}),o.raw+=c}const l=o.items.at(-1);if(l)l.raw=l.raw.trimEnd(),l.text=l.text.trimEnd();else return;o.raw=o.raw.trimEnd();for(let u=0;u<o.items.length;u++)if(this.lexer.state.top=!1,o.items[u].tokens=this.lexer.blockTokens(o.items[u].text,[]),!o.loose){const c=o.items[u].tokens.filter(f=>f.type==="space"),h=c.length>0&&c.some(f=>this.rules.other.anyLine.test(f.raw));o.loose=h}if(o.loose)for(let u=0;u<o.items.length;u++)o.items[u].loose=!0;return o}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const r=t[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),i=t[2]?t[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",o=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:r,raw:t[0],href:i,title:o}}}table(e){var a;const t=this.rules.block.table.exec(e);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const r=F4(t[1]),i=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),o=(a=t[3])!=null&&a.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],s={type:"table",raw:t[0],header:[],align:[],rows:[]};if(r.length===i.length){for(const l of i)this.rules.other.tableAlignRight.test(l)?s.align.push("right"):this.rules.other.tableAlignCenter.test(l)?s.align.push("center"):this.rules.other.tableAlignLeft.test(l)?s.align.push("left"):s.align.push(null);for(let l=0;l<r.length;l++)s.header.push({text:r[l],tokens:this.lexer.inline(r[l]),header:!0,align:s.align[l]});for(const l of o)s.rows.push(F4(l,s.header.length).map((u,c)=>({text:u,tokens:this.lexer.inline(u),header:!1,align:s.align[c]})));return s}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const r=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:r,tokens:this.lexer.inline(r)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:t[1]}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&this.rules.other.startATag.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const r=t[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(r)){if(!this.rules.other.endAngleBracket.test(r))return;const s=C0(r.slice(0,-1),"\\");if((r.length-s.length)%2===0)return}else{const s=Xoe(t[2],"()");if(s>-1){const l=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,l).trim(),t[3]=""}}let i=t[2],o="";if(this.options.pedantic){const s=this.rules.other.pedanticHrefTitle.exec(i);s&&(i=s[1],o=s[3])}else o=t[3]?t[3].slice(1,-1):"";return i=i.trim(),this.rules.other.startAngleBracket.test(i)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(r)?i=i.slice(1):i=i.slice(1,-1)),D4(t,{href:i&&i.replace(this.rules.inline.anyPunctuation,"$1"),title:o&&o.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer,this.rules)}}reflink(e,t){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){const i=(r[2]||r[1]).replace(this.rules.other.multipleSpaceGlobal," "),o=t[i.toLowerCase()];if(!o){const s=r[0].charAt(0);return{type:"text",raw:s,text:s}}return D4(r,o,r[0],this.lexer,this.rules)}}emStrong(e,t,r=""){let i=this.rules.inline.emStrongLDelim.exec(e);if(!i||i[3]&&r.match(this.rules.other.unicodeAlphaNumeric))return;if(!(i[1]||i[2]||"")||!r||this.rules.inline.punctuation.exec(r)){const s=[...i[0]].length-1;let a,l,u=s,c=0;const h=i[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,t=t.slice(-1*e.length+s);(i=h.exec(t))!=null;){if(a=i[1]||i[2]||i[3]||i[4]||i[5]||i[6],!a)continue;if(l=[...a].length,i[3]||i[4]){u+=l;continue}else if((i[5]||i[6])&&s%3&&!((s+l)%3)){c+=l;continue}if(u-=l,u>0)continue;l=Math.min(l,l+u+c);const f=[...i[0]][0].length,d=e.slice(0,s+i.index+f+l);if(Math.min(s,l)%2){const y=d.slice(1,-1);return{type:"em",raw:d,text:y,tokens:this.lexer.inlineTokens(y)}}const v=d.slice(2,-2);return{type:"strong",raw:d,text:v,tokens:this.lexer.inlineTokens(v)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let r=t[2].replace(this.rules.other.newLineCharGlobal," ");const i=this.rules.other.nonSpaceChar.test(r),o=this.rules.other.startingSpaceChar.test(r)&&this.rules.other.endingSpaceChar.test(r);return i&&o&&(r=r.substring(1,r.length-1)),{type:"codespan",raw:t[0],text:r}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let r,i;return t[2]==="@"?(r=t[1],i="mailto:"+r):(r=t[1],i=r),{type:"link",raw:t[0],text:r,href:i,tokens:[{type:"text",raw:r,text:r}]}}}url(e){var r;let t;if(t=this.rules.inline.url.exec(e)){let i,o;if(t[2]==="@")i=t[0],o="mailto:"+i;else{let s;do s=t[0],t[0]=((r=this.rules.inline._backpedal.exec(t[0]))==null?void 0:r[0])??"";while(s!==t[0]);i=t[0],t[1]==="www."?o="http://"+t[0]:o=t[0]}return{type:"link",raw:t[0],text:i,href:o,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){const r=this.lexer.state.inRawBlock;return{type:"text",raw:t[0],text:t[0],escaped:r}}}}class il{constructor(e){zr(this,"tokens");zr(this,"options");zr(this,"state");zr(this,"tokenizer");zr(this,"inlineQueue");this.tokens=[],this.tokens.links=Object.create(null),this.options=e||sp,this.options.tokenizer=this.options.tokenizer||new Sw,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:ks,block:O2.normal,inline:T0.normal};this.options.pedantic?(t.block=O2.pedantic,t.inline=T0.pedantic):this.options.gfm&&(t.block=O2.gfm,this.options.breaks?t.inline=T0.breaks:t.inline=T0.gfm),this.tokenizer.rules=t}static get rules(){return{block:O2,inline:T0}}static lex(e,t){return new il(t).lex(e)}static lexInline(e,t){return new il(t).inlineTokens(e)}lex(e){e=e.replace(ks.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const r=this.inlineQueue[t];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],r=!1){var i,o,s;for(this.options.pedantic&&(e=e.replace(ks.tabCharGlobal,"    ").replace(ks.spaceLine,""));e;){let a;if((o=(i=this.options.extensions)==null?void 0:i.block)!=null&&o.some(u=>(a=u.call({lexer:this},e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))continue;if(a=this.tokenizer.space(e)){e=e.substring(a.raw.length);const u=t.at(-1);a.raw.length===1&&u!==void 0?u.raw+=`
`:t.push(a);continue}if(a=this.tokenizer.code(e)){e=e.substring(a.raw.length);const u=t.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.at(-1).src=u.text):t.push(a);continue}if(a=this.tokenizer.fences(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.heading(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.hr(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.blockquote(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.list(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.html(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.def(e)){e=e.substring(a.raw.length);const u=t.at(-1);(u==null?void 0:u.type)==="paragraph"||(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.raw,this.inlineQueue.at(-1).src=u.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.lheading(e)){e=e.substring(a.raw.length),t.push(a);continue}let l=e;if((s=this.options.extensions)!=null&&s.startBlock){let u=1/0;const c=e.slice(1);let h;this.options.extensions.startBlock.forEach(f=>{h=f.call({lexer:this},c),typeof h=="number"&&h>=0&&(u=Math.min(u,h))}),u<1/0&&u>=0&&(l=e.substring(0,u+1))}if(this.state.top&&(a=this.tokenizer.paragraph(l))){const u=t.at(-1);r&&(u==null?void 0:u.type)==="paragraph"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):t.push(a),r=l.length!==e.length,e=e.substring(a.raw.length);continue}if(a=this.tokenizer.text(e)){e=e.substring(a.raw.length);const u=t.at(-1);(u==null?void 0:u.type)==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=u.text):t.push(a);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var a,l,u;let r=e,i=null;if(this.tokens.links){const c=Object.keys(this.tokens.links);if(c.length>0)for(;(i=this.tokenizer.rules.inline.reflinkSearch.exec(r))!=null;)c.includes(i[0].slice(i[0].lastIndexOf("[")+1,-1))&&(r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(i=this.tokenizer.rules.inline.anyPunctuation.exec(r))!=null;)r=r.slice(0,i.index)+"++"+r.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(i=this.tokenizer.rules.inline.blockSkip.exec(r))!=null;)r=r.slice(0,i.index)+"["+"a".repeat(i[0].length-2)+"]"+r.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let o=!1,s="";for(;e;){o||(s=""),o=!1;let c;if((l=(a=this.options.extensions)==null?void 0:a.inline)!=null&&l.some(f=>(c=f.call({lexer:this},e,t))?(e=e.substring(c.raw.length),t.push(c),!0):!1))continue;if(c=this.tokenizer.escape(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.tag(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.link(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(c.raw.length);const f=t.at(-1);c.type==="text"&&(f==null?void 0:f.type)==="text"?(f.raw+=c.raw,f.text+=c.text):t.push(c);continue}if(c=this.tokenizer.emStrong(e,r,s)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.codespan(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.br(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.del(e)){e=e.substring(c.raw.length),t.push(c);continue}if(c=this.tokenizer.autolink(e)){e=e.substring(c.raw.length),t.push(c);continue}if(!this.state.inLink&&(c=this.tokenizer.url(e))){e=e.substring(c.raw.length),t.push(c);continue}let h=e;if((u=this.options.extensions)!=null&&u.startInline){let f=1/0;const d=e.slice(1);let v;this.options.extensions.startInline.forEach(y=>{v=y.call({lexer:this},d),typeof v=="number"&&v>=0&&(f=Math.min(f,v))}),f<1/0&&f>=0&&(h=e.substring(0,f+1))}if(c=this.tokenizer.inlineText(h)){e=e.substring(c.raw.length),c.raw.slice(-1)!=="_"&&(s=c.raw.slice(-1)),o=!0;const f=t.at(-1);(f==null?void 0:f.type)==="text"?(f.raw+=c.raw,f.text+=c.text):t.push(c);continue}if(e){const f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return t}}class _w{constructor(e){zr(this,"options");zr(this,"parser");this.options=e||sp}space(e){return""}code({text:e,lang:t,escaped:r}){var s;const i=(s=(t||"").match(ks.notSpaceStart))==null?void 0:s[0],o=e.replace(ks.endingNewline,"")+`
`;return i?'<pre><code class="language-'+yu(i)+'">'+(r?o:yu(o,!0))+`</code></pre>
`:"<pre><code>"+(r?o:yu(o,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,r=e.start;let i="";for(let a=0;a<e.items.length;a++){const l=e.items[a];i+=this.listitem(l)}const o=t?"ol":"ul",s=t&&r!==1?' start="'+r+'"':"";return"<"+o+s+`>
`+i+"</"+o+`>
`}listitem(e){var r;let t="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?((r=e.tokens[0])==null?void 0:r.type)==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+yu(e.tokens[0].tokens[0].text),e.tokens[0].tokens[0].escaped=!0)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" ",escaped:!0}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",r="";for(let o=0;o<e.header.length;o++)r+=this.tablecell(e.header[o]);t+=this.tablerow({text:r});let i="";for(let o=0;o<e.rows.length;o++){const s=e.rows[o];r="";for(let a=0;a<s.length;a++)r+=this.tablecell(s[a]);i+=this.tablerow({text:r})}return i&&(i=`<tbody>${i}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+i+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${yu(e,!0)}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:r}){const i=this.parser.parseInline(r),o=N4(e);if(o===null)return i;e=o;let s='<a href="'+e+'"';return t&&(s+=' title="'+yu(t)+'"'),s+=">"+i+"</a>",s}image({href:e,title:t,text:r}){const i=N4(e);if(i===null)return yu(r);e=i;let o=`<img src="${e}" alt="${r}"`;return t&&(o+=` title="${yu(t)}"`),o+=">",o}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):"escaped"in e&&e.escaped?e.text:yu(e.text)}}class vT{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class ol{constructor(e){zr(this,"options");zr(this,"renderer");zr(this,"textRenderer");this.options=e||sp,this.options.renderer=this.options.renderer||new _w,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new vT}static parse(e,t){return new ol(t).parse(e)}static parseInline(e,t){return new ol(t).parseInline(e)}parse(e,t=!0){var i,o;let r="";for(let s=0;s<e.length;s++){const a=e[s];if((o=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&o[a.type]){const u=a,c=this.options.extensions.renderers[u.type].call({parser:this},u);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(u.type)){r+=c||"";continue}}const l=a;switch(l.type){case"space":{r+=this.renderer.space(l);continue}case"hr":{r+=this.renderer.hr(l);continue}case"heading":{r+=this.renderer.heading(l);continue}case"code":{r+=this.renderer.code(l);continue}case"table":{r+=this.renderer.table(l);continue}case"blockquote":{r+=this.renderer.blockquote(l);continue}case"list":{r+=this.renderer.list(l);continue}case"html":{r+=this.renderer.html(l);continue}case"paragraph":{r+=this.renderer.paragraph(l);continue}case"text":{let u=l,c=this.renderer.text(u);for(;s+1<e.length&&e[s+1].type==="text";)u=e[++s],c+=`
`+this.renderer.text(u);t?r+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c,escaped:!0}]}):r+=c;continue}default:{const u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}parseInline(e,t=this.renderer){var i,o;let r="";for(let s=0;s<e.length;s++){const a=e[s];if((o=(i=this.options.extensions)==null?void 0:i.renderers)!=null&&o[a.type]){const u=this.options.extensions.renderers[a.type].call({parser:this},a);if(u!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type)){r+=u||"";continue}}const l=a;switch(l.type){case"escape":{r+=t.text(l);break}case"html":{r+=t.html(l);break}case"link":{r+=t.link(l);break}case"image":{r+=t.image(l);break}case"strong":{r+=t.strong(l);break}case"em":{r+=t.em(l);break}case"codespan":{r+=t.codespan(l);break}case"br":{r+=t.br(l);break}case"del":{r+=t.del(l);break}case"text":{r+=t.text(l);break}default:{const u='Token with "'+l.type+'" type was not found.';if(this.options.silent)return console.error(u),"";throw new Error(u)}}}return r}}class dv{constructor(e){zr(this,"options");zr(this,"block");this.options=e||sp}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?il.lex:il.lexInline}provideParser(){return this.block?ol.parse:ol.parseInline}}zr(dv,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class Zoe{constructor(...e){zr(this,"defaults",uT());zr(this,"options",this.setOptions);zr(this,"parse",this.parseMarkdown(!0));zr(this,"parseInline",this.parseMarkdown(!1));zr(this,"Parser",ol);zr(this,"Renderer",_w);zr(this,"TextRenderer",vT);zr(this,"Lexer",il);zr(this,"Tokenizer",Sw);zr(this,"Hooks",dv);this.use(...e)}walkTokens(e,t){var i,o;let r=[];for(const s of e)switch(r=r.concat(t.call(this,s)),s.type){case"table":{const a=s;for(const l of a.header)r=r.concat(this.walkTokens(l.tokens,t));for(const l of a.rows)for(const u of l)r=r.concat(this.walkTokens(u.tokens,t));break}case"list":{const a=s;r=r.concat(this.walkTokens(a.items,t));break}default:{const a=s;(o=(i=this.defaults.extensions)==null?void 0:i.childTokens)!=null&&o[a.type]?this.defaults.extensions.childTokens[a.type].forEach(l=>{const u=a[l].flat(1/0);r=r.concat(this.walkTokens(u,t))}):a.tokens&&(r=r.concat(this.walkTokens(a.tokens,t)))}}return r}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(r=>{const i={...r};if(i.async=this.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(o=>{if(!o.name)throw new Error("extension name required");if("renderer"in o){const s=t.renderers[o.name];s?t.renderers[o.name]=function(...a){let l=o.renderer.apply(this,a);return l===!1&&(l=s.apply(this,a)),l}:t.renderers[o.name]=o.renderer}if("tokenizer"in o){if(!o.level||o.level!=="block"&&o.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const s=t[o.level];s?s.unshift(o.tokenizer):t[o.level]=[o.tokenizer],o.start&&(o.level==="block"?t.startBlock?t.startBlock.push(o.start):t.startBlock=[o.start]:o.level==="inline"&&(t.startInline?t.startInline.push(o.start):t.startInline=[o.start]))}"childTokens"in o&&o.childTokens&&(t.childTokens[o.name]=o.childTokens)}),i.extensions=t),r.renderer){const o=this.defaults.renderer||new _w(this.defaults);for(const s in r.renderer){if(!(s in o))throw new Error(`renderer '${s}' does not exist`);if(["options","parser"].includes(s))continue;const a=s,l=r.renderer[a],u=o[a];o[a]=(...c)=>{let h=l.apply(o,c);return h===!1&&(h=u.apply(o,c)),h||""}}i.renderer=o}if(r.tokenizer){const o=this.defaults.tokenizer||new Sw(this.defaults);for(const s in r.tokenizer){if(!(s in o))throw new Error(`tokenizer '${s}' does not exist`);if(["options","rules","lexer"].includes(s))continue;const a=s,l=r.tokenizer[a],u=o[a];o[a]=(...c)=>{let h=l.apply(o,c);return h===!1&&(h=u.apply(o,c)),h}}i.tokenizer=o}if(r.hooks){const o=this.defaults.hooks||new dv;for(const s in r.hooks){if(!(s in o))throw new Error(`hook '${s}' does not exist`);if(["options","block"].includes(s))continue;const a=s,l=r.hooks[a],u=o[a];dv.passThroughHooks.has(s)?o[a]=c=>{if(this.defaults.async)return Promise.resolve(l.call(o,c)).then(f=>u.call(o,f));const h=l.call(o,c);return u.call(o,h)}:o[a]=(...c)=>{let h=l.apply(o,c);return h===!1&&(h=u.apply(o,c)),h}}i.hooks=o}if(r.walkTokens){const o=this.defaults.walkTokens,s=r.walkTokens;i.walkTokens=function(a){let l=[];return l.push(s.call(this,a)),o&&(l=l.concat(o.call(this,a))),l}}this.defaults={...this.defaults,...i}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return il.lex(e,t??this.defaults)}parser(e,t){return ol.parse(e,t??this.defaults)}parseMarkdown(e){return(r,i)=>{const o={...i},s={...this.defaults,...o},a=this.onError(!!s.silent,!!s.async);if(this.defaults.async===!0&&o.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));s.hooks&&(s.hooks.options=s,s.hooks.block=e);const l=s.hooks?s.hooks.provideLexer():e?il.lex:il.lexInline,u=s.hooks?s.hooks.provideParser():e?ol.parse:ol.parseInline;if(s.async)return Promise.resolve(s.hooks?s.hooks.preprocess(r):r).then(c=>l(c,s)).then(c=>s.hooks?s.hooks.processAllTokens(c):c).then(c=>s.walkTokens?Promise.all(this.walkTokens(c,s.walkTokens)).then(()=>c):c).then(c=>u(c,s)).then(c=>s.hooks?s.hooks.postprocess(c):c).catch(a);try{s.hooks&&(r=s.hooks.preprocess(r));let c=l(r,s);s.hooks&&(c=s.hooks.processAllTokens(c)),s.walkTokens&&this.walkTokens(c,s.walkTokens);let h=u(c,s);return s.hooks&&(h=s.hooks.postprocess(h)),h}catch(c){return a(c)}}}onError(e,t){return r=>{if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const i="<p>An error occurred:</p><pre>"+yu(r.message+"",!0)+"</pre>";return t?Promise.resolve(i):i}if(t)return Promise.reject(r);throw r}}}const Xd=new Zoe;function yr(n,e){return Xd.parse(n,e)}yr.options=yr.setOptions=function(n){return Xd.setOptions(n),yr.defaults=Xd.defaults,yB(yr.defaults),yr};yr.getDefaults=uT;yr.defaults=sp;yr.use=function(...n){return Xd.use(...n),yr.defaults=Xd.defaults,yB(yr.defaults),yr};yr.walkTokens=function(n,e){return Xd.walkTokens(n,e)};yr.parseInline=Xd.parseInline;yr.Parser=ol;yr.parser=ol.parse;yr.Renderer=_w;yr.TextRenderer=vT;yr.Lexer=il;yr.lexer=il.lex;yr.Tokenizer=Sw;yr.Hooks=dv;yr.parse=yr;yr.options;yr.setOptions;yr.use;yr.walkTokens;yr.parseInline;ol.parse;il.lex;function Koe({article:n}){const[e,t]=pe.useState(""),[r,i]=pe.useState(!0),[o,s]=pe.useState(null);pe.useEffect(()=>{yr.setOptions({breaks:!0,gfm:!0})},[]),pe.useEffect(()=>{async function u(){try{const c=await fetch(`/assets/blog/${n.filename}`);if(c.ok){const d=await c.text(),v=yr.parse(d);t(v),i(!1);return}console.log(`Primary path failed, trying fallbacks for: ${n.filename}`);const h=await fetch(`/cad-os/assets/blog/${n.filename}`);if(h.ok){const d=await h.text(),v=yr.parse(d);t(v),i(!1);return}const f=await fetch(`https://raw.githubusercontent.com/haloedDepth/cad-os/main/assets/blog/${n.filename}`);if(f.ok){const d=await f.text(),v=yr.parse(d);t(v),i(!1);return}throw new Error(`Could not load article from any source: ${n.filename}`)}catch(c){console.error("Error fetching article content:",c),s("Failed to load article content. Please try again later."),i(!1)}}u()},[n]);const a={container:{maxWidth:"min(900px, calc(100% - 4rem))",margin:"0 auto",padding:0,overflow:"hidden"},backButton:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"transparent",color:"#2563EB",border:"none",padding:"0.75rem 0",marginBottom:"2rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"600",transition:"color 0.2s"},header:{marginBottom:"2.5rem",borderBottom:"1px solid #E2E8F0",paddingBottom:"1.5rem"},title:{fontSize:"2.5rem",fontWeight:"800",marginBottom:"1rem",color:"#1E293B",lineHeight:"1.2"},date:{fontSize:"0.95rem",color:"#64748B",fontWeight:"500"},content:{lineHeight:"1.8",color:"#334155",fontSize:"1.1rem",wordWrap:"break-word",overflowWrap:"break-word"}},l=`
    .blog-content {
      word-wrap: break-word;
      overflow-wrap: break-word;
    }
    
    .blog-content h1 {
      font-size: 2.25rem;
      font-weight: 800;
      margin-top: 2.5rem;
      margin-bottom: 1.5rem;
      color: #1E293B;
      line-height: 1.3;
    }
    
    .blog-content h2 {
      font-size: 1.875rem;
      font-weight: 700;
      margin-top: 2.25rem;
      margin-bottom: 1.25rem;
      color: #1E293B;
      line-height: 1.3;
    }
    
    .blog-content h3 {
      font-size: 1.5rem;
      font-weight: 700;
      margin-top: 2rem;
      margin-bottom: 1rem;
      color: #1E293B;
      line-height: 1.4;
    }
    
    .blog-content h4, .blog-content h5, .blog-content h6 {
      font-size: 1.25rem;
      font-weight: 600;
      margin-top: 1.75rem;
      margin-bottom: 0.75rem;
      color: #1E293B;
      line-height: 1.4;
    }
    
    .blog-content p {
      margin-bottom: 1.5rem;
      line-height: 1.8;
    }
    
    .blog-content ul, .blog-content ol {
      margin: 1.5rem 0 2rem;
      padding-left: 2rem;
    }
    
    .blog-content li {
      margin-bottom: 0.5rem;
    }
    
    .blog-content blockquote {
      border-left: 4px solid #3B82F6;
      padding-left: 1.5rem;
      margin-left: 0;
      margin-right: 0;
      margin-bottom: 1.5rem;
      font-style: italic;
      color: #4B5563;
    }
    
    .blog-content code {
      font-family: monospace;
      background-color: #EFF6FF;
      color: #2563EB;
      padding: 0.2rem 0.4rem;
      border-radius: 4px;
      font-size: 0.9em;
    }
    
    .blog-content pre {
      background-color: #1E293B;
      color: #F8FAFC;
      padding: 1.5rem;
      border-radius: 8px;
      overflow-x: auto;
      margin: 1.5rem 0 2rem;
      white-space: pre-wrap;    /* Added for wrapping */
      overflow-wrap: break-word; /* Added for wrapping */
    }
    
    .blog-content pre code {
      background-color: transparent;
      color: inherit;
      padding: 0;
      font-size: 0.9rem;
      line-height: 1.6;
    }
    
    .blog-content a {
      color: #2563EB;
      text-decoration: none;
      border-bottom: 1px solid currentColor;
      padding-bottom: 1px;
      transition: opacity 0.2s;
    }
    
    .blog-content a:hover {
      opacity: 0.8;
    }
    
    .blog-content hr {
      border: none;
      border-top: 1px solid #E2E8F0;
      margin: 2.5rem 0;
    }

    .blog-content img { /* Added Rule */
      max-width: 100%;
      height: auto;
      display: block; 
    }
    
    .blog-content table { /* Modified Rule */
      display: block; 
      overflow-x: auto; 
      width: 100%;
      border-collapse: collapse;
      margin: 2rem 0;
    }
    
    .blog-content th, .blog-content td {
      border: 1px solid #E2E8F0;
      padding: 0.75rem 1rem;
      text-align: left;
    }
    
    .blog-content th {
      background-color: #F8FAFC;
      font-weight: 600;
    }
    
    .blog-content tr:nth-child(even) {
      background-color: #F8FAFC;
    }
  `;return r?ue("div",{style:{display:"flex",justifyContent:"center",padding:"2rem"},children:ue("p",{children:"Loading article..."})}):o?ue("div",{style:{display:"flex",justifyContent:"center",padding:"2rem",color:"#e53e3e"},children:ue("p",{children:o})}):ut("div",{style:a.container,children:[ue("style",{children:l}),ut(m1,{to:"/blog",style:{...a.backButton,textDecoration:"none"},children:[ut("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[ue("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),ue("polyline",{points:"12 19 5 12 12 5"})]}),"Back to Articles"]}),ut("div",{style:a.header,children:[ue("h1",{style:a.title,children:n.title}),ue("p",{style:a.date,children:n.date})]}),ue("div",{className:"blog-content",style:a.content,dangerouslySetInnerHTML:{__html:e}})]})}function Joe({articles:n}){const{slug:e}=Kz(),t=n.find(r=>r.id===e);return t?ue(Koe,{article:t}):ut("div",{style:{padding:"2rem",textAlign:"center"},children:[ue("h2",{children:"Article Not Found"}),ue("p",{children:"The blog post you're looking for doesn't seem to exist."}),ue(m1,{to:"/blog",style:{display:"inline-block",marginTop:"1rem",padding:"0.5rem 1rem",backgroundColor:"#2563EB",color:"white",textDecoration:"none",borderRadius:"0.25rem"},children:"Back to Blog List"})]})}function Qoe(){const[n,e]=pe.useState([]),[t,r]=pe.useState(!0),[i,o]=pe.useState(null);return pe.useEffect(()=>{async function s(){try{e([{id:"parametric-modeling-foundations",title:"The Synergy Between Parametric Modeling and Rapid Prototyping",date:"April 11, 2025",excerpt:"Discover how the powerful combination of parametric modeling and rapid prototyping accelerates product development, enables complex designs, and delivers customized solutions across industries.",filename:"parametric-modeling-and-rapid-prototyping.md"}]),r(!1)}catch(a){console.error("Error fetching blog articles:",a),o("Failed to load blog articles"),r(!1)}}s()},[]),t?ue("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:ue("p",{children:"Loading articles..."})}):i?ue("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%",color:"#e53e3e"},children:ue("p",{children:i})}):ue("div",{style:{maxWidth:"1200px",margin:"0 auto",paddingTop:"2rem",paddingBottom:"2rem",color:"#1E293B"},children:ut(iN,{children:[ue(Uh,{index:!0,element:ut(Zm,{children:[ut("div",{style:{display:"flex",alignItems:"center",marginBottom:"2rem",gap:"1rem"},children:[ue("div",{style:{width:"4px",height:"2rem",backgroundColor:"#2563EB",borderRadius:"2px"}}),ue("h1",{style:{fontSize:"2.25rem",fontWeight:"800",margin:0},children:"Blog"})]}),ue("p",{style:{fontSize:"1.125rem",lineHeight:"1.7",color:"#475569",marginBottom:"2rem"},children:"Explore our latest articles on parametric modeling, CAD techniques, and engineering insights."}),ue(poe,{articles:n})]})}),ue(Uh,{path:":slug",element:ue(Joe,{articles:n})})]})})}const P0=({isActive:n})=>{const e=window.innerWidth<480;return{backgroundColor:n?"#2563EB":"transparent",color:"white",border:"none",padding:e?"0.4rem 0.6rem":"0.5rem 1rem",borderRadius:"0.25rem",cursor:"pointer",fontWeight:n?"600":"400",transition:"background-color 0.2s",textDecoration:"none",fontSize:e?"0.85rem":"inherit",whiteSpace:"nowrap"}};function ese(){const[n,e]=pe.useState(window.innerWidth<480);return pe.useEffect(()=>{const t=()=>e(window.innerWidth<480);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),ut("div",{style:{height:"100vh",display:"flex",flexDirection:"column",overflow:"hidden",margin:0,padding:0},children:[ut("nav",{style:{backgroundColor:"#1E293B",color:"white",padding:"0.75rem 1rem",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",margin:0,flexShrink:0,flexWrap:n?"wrap":"nowrap"},children:[ut("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:n?"0.5rem":0,flex:n?"1 0 100%":"0 1 auto"},children:[ue("h1",{style:{margin:0,fontSize:n?"1.25rem":"1.5rem",fontWeight:"600",color:"#F8FAFC"},children:"CAD-OS"}),ue("span",{style:{fontSize:"0.8rem",backgroundColor:"#0EA5E9",padding:"0.2rem 0.5rem",borderRadius:"0.25rem",color:"white"},children:"v0.18.1"})]}),ut("div",{style:{display:"flex",gap:"0.25rem",overflowX:"auto",justifyContent:n?"space-between":"flex-end",width:n?"100%":"auto"},children:[ue(um,{to:"/",style:P0,children:"Home"}),ue(um,{to:"/app",style:P0,children:"App"}),ue(um,{to:"/blog",style:P0,children:"Blog"}),ue(um,{to:"/about",style:P0,children:"About"}),ue(um,{to:"/tools",style:P0,children:"Tools"})]})]}),ue("div",{style:{flex:1,overflowY:"scroll",overflowX:"hidden",paddingLeft:window.innerWidth<768?"1rem":"2rem",paddingRight:window.innerWidth<768?"1rem":"2rem"},children:ut(iN,{children:[ue(Uh,{path:"/",element:ue(W7,{})}),ue(Uh,{path:"/app",element:ue(loe,{})}),ue(Uh,{path:"/blog/*",element:ue(Qoe,{})})," ",ue(Uh,{path:"/about",element:ue(uoe,{})}),ue(Uh,{path:"/tools",element:ue(doe,{})})]})})]})}function tse(){return ue(ese,{})}cz.render(ue(W4.StrictMode,{children:ue(F7,{children:ue(tse,{})})}),document.getElementById("root"));export{Fr as _,rse as c};
