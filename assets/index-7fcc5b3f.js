(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var VJ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function O2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var s0={},UF={get exports(){return s0},set exports(t){s0=t}},U2={},Be={},BF={get exports(){return Be},set exports(t){Be=t}},ar={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $0=Symbol.for("react.element"),zF=Symbol.for("react.portal"),HF=Symbol.for("react.fragment"),GF=Symbol.for("react.strict_mode"),VF=Symbol.for("react.profiler"),WF=Symbol.for("react.provider"),jF=Symbol.for("react.context"),XF=Symbol.for("react.forward_ref"),qF=Symbol.for("react.suspense"),YF=Symbol.for("react.memo"),ZF=Symbol.for("react.lazy"),W3=Symbol.iterator;function $F(t){return t===null||typeof t!="object"?null:(t=W3&&t[W3]||t["@@iterator"],typeof t=="function"?t:null)}var CL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},LL=Object.assign,PL={};function _m(t,e,n){this.props=t,this.context=e,this.refs=PL,this.updater=n||CL}_m.prototype.isReactComponent={};_m.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};_m.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function RL(){}RL.prototype=_m.prototype;function _5(t,e,n){this.props=t,this.context=e,this.refs=PL,this.updater=n||CL}var b5=_5.prototype=new RL;b5.constructor=_5;LL(b5,_m.prototype);b5.isPureReactComponent=!0;var j3=Array.isArray,kL=Object.prototype.hasOwnProperty,M5={current:null},IL={key:!0,ref:!0,__self:!0,__source:!0};function NL(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)kL.call(e,r)&&!IL.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:$0,type:t,key:s,ref:o,props:i,_owner:M5.current}}function KF(t,e){return{$$typeof:$0,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function E5(t){return typeof t=="object"&&t!==null&&t.$$typeof===$0}function JF(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var X3=/\/+/g;function rw(t,e){return typeof t=="object"&&t!==null&&t.key!=null?JF(""+t.key):e.toString(36)}function gy(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $0:case zF:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+rw(o,0):r,j3(i)?(n="",t!=null&&(n=t.replace(X3,"$&/")+"/"),gy(i,e,n,"",function(u){return u})):i!=null&&(E5(i)&&(i=KF(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(X3,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",j3(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+rw(s,a);o+=gy(s,e,n,l,i)}else if(l=$F(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+rw(s,a++),o+=gy(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vv(t,e,n){if(t==null)return t;var r=[],i=0;return gy(t,r,"","",function(s){return e.call(n,s,i++)}),r}function QF(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xo={current:null},vy={transition:null},e6={ReactCurrentDispatcher:xo,ReactCurrentBatchConfig:vy,ReactCurrentOwner:M5};ar.Children={map:Vv,forEach:function(t,e,n){Vv(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Vv(t,function(){e++}),e},toArray:function(t){return Vv(t,function(e){return e})||[]},only:function(t){if(!E5(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ar.Component=_m;ar.Fragment=HF;ar.Profiler=VF;ar.PureComponent=_5;ar.StrictMode=GF;ar.Suspense=qF;ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e6;ar.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=LL({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=M5.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)kL.call(e,l)&&!IL.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:$0,type:t.type,key:i,ref:s,props:r,_owner:o}};ar.createContext=function(t){return t={$$typeof:jF,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:WF,_context:t},t.Consumer=t};ar.createElement=NL;ar.createFactory=function(t){var e=NL.bind(null,t);return e.type=t,e};ar.createRef=function(){return{current:null}};ar.forwardRef=function(t){return{$$typeof:XF,render:t}};ar.isValidElement=E5;ar.lazy=function(t){return{$$typeof:ZF,_payload:{_status:-1,_result:t},_init:QF}};ar.memo=function(t,e){return{$$typeof:YF,type:t,compare:e===void 0?null:e}};ar.startTransition=function(t){var e=vy.transition;vy.transition={};try{t()}finally{vy.transition=e}};ar.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ar.useCallback=function(t,e){return xo.current.useCallback(t,e)};ar.useContext=function(t){return xo.current.useContext(t)};ar.useDebugValue=function(){};ar.useDeferredValue=function(t){return xo.current.useDeferredValue(t)};ar.useEffect=function(t,e){return xo.current.useEffect(t,e)};ar.useId=function(){return xo.current.useId()};ar.useImperativeHandle=function(t,e,n){return xo.current.useImperativeHandle(t,e,n)};ar.useInsertionEffect=function(t,e){return xo.current.useInsertionEffect(t,e)};ar.useLayoutEffect=function(t,e){return xo.current.useLayoutEffect(t,e)};ar.useMemo=function(t,e){return xo.current.useMemo(t,e)};ar.useReducer=function(t,e,n){return xo.current.useReducer(t,e,n)};ar.useRef=function(t){return xo.current.useRef(t)};ar.useState=function(t){return xo.current.useState(t)};ar.useSyncExternalStore=function(t,e,n){return xo.current.useSyncExternalStore(t,e,n)};ar.useTransition=function(){return xo.current.useTransition()};ar.version="18.2.0";(function(t){t.exports=ar})(BF);const FL=O2(Be);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t6=Be,n6=Symbol.for("react.element"),r6=Symbol.for("react.fragment"),i6=Object.prototype.hasOwnProperty,s6=t6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o6={key:!0,ref:!0,__self:!0,__source:!0};function DL(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)i6.call(e,r)&&!o6.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:n6,type:t,key:s,ref:o,props:i,_owner:s6.current}}U2.Fragment=r6;U2.jsx=DL;U2.jsxs=DL;(function(t){t.exports=U2})(UF);const nm=s0.Fragment,Me=s0.jsx,Tt=s0.jsxs;var o_={},a6={get exports(){return o_},set exports(t){o_=t}},ca={},a_={},l6={get exports(){return a_},set exports(t){a_=t}},OL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,Y){var j=W.length;W.push(Y);e:for(;0<j;){var re=j-1>>>1,I=W[re];if(0<i(I,Y))W[re]=Y,W[j]=I,j=re;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Y=W[0],j=W.pop();if(j!==Y){W[0]=j;e:for(var re=0,I=W.length,X=I>>>1;re<X;){var J=2*(re+1)-1,ae=W[J],fe=J+1,Se=W[fe];if(0>i(ae,j))fe<I&&0>i(Se,ae)?(W[re]=Se,W[fe]=j,re=fe):(W[re]=ae,W[J]=j,re=J);else if(fe<I&&0>i(Se,j))W[re]=Se,W[fe]=j,re=fe;else break e}}return Y}function i(W,Y){var j=W.sortIndex-Y.sortIndex;return j!==0?j:W.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,f=3,d=!1,v=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(W){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=W)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(u)}}function T(W){if(x=!1,_(W),!v)if(n(l)!==null)v=!0,se(L);else{var Y=n(u);Y!==null&&ce(T,Y.startTime-W)}}function L(W,Y){v=!1,x&&(x=!1,g(R),R=-1),d=!0;var j=f;try{for(_(Y),h=n(l);h!==null&&(!(h.expirationTime>Y)||W&&!O());){var re=h.callback;if(typeof re=="function"){h.callback=null,f=h.priorityLevel;var I=re(h.expirationTime<=Y);Y=t.unstable_now(),typeof I=="function"?h.callback=I:h===n(l)&&r(l),_(Y)}else r(l);h=n(l)}if(h!==null)var X=!0;else{var J=n(u);J!==null&&ce(T,J.startTime-Y),X=!1}return X}finally{h=null,f=j,d=!1}}var k=!1,N=null,R=-1,P=5,D=-1;function O(){return!(t.unstable_now()-D<P)}function B(){if(N!==null){var W=t.unstable_now();D=W;var Y=!0;try{Y=N(!0,W)}finally{Y?V():(k=!1,N=null)}}else k=!1}var V;if(typeof S=="function")V=function(){S(B)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ee=H.port2;H.port1.onmessage=B,V=function(){ee.postMessage(null)}}else V=function(){w(B,0)};function se(W){N=W,k||(k=!0,V())}function ce(W,Y){R=w(function(){W(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){v||d||(v=!0,se(L))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var j=f;f=Y;try{return W()}finally{f=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,Y){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var j=f;f=W;try{return Y()}finally{f=j}},t.unstable_scheduleCallback=function(W,Y,j){var re=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?re+j:re):j=re,W){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=j+I,W={id:c++,callback:Y,priorityLevel:W,startTime:j,expirationTime:I,sortIndex:-1},j>re?(W.sortIndex=j,e(u,W),n(l)===null&&W===n(u)&&(x?(g(R),R=-1):x=!0,ce(T,j-re))):(W.sortIndex=I,e(l,W),v||d||(v=!0,se(L))),W},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(W){var Y=f;return function(){var j=f;f=Y;try{return W.apply(this,arguments)}finally{f=j}}}})(OL);(function(t){t.exports=OL})(l6);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UL=Be,la=a_;function Rt(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BL=new Set,o0={};function ud(t,e){rm(t,e),rm(t+"Capture",e)}function rm(t,e){for(o0[t]=e,t=0;t<e.length;t++)BL.add(e[t])}var rc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l_=Object.prototype.hasOwnProperty,u6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,q3={},Y3={};function c6(t){return l_.call(Y3,t)?!0:l_.call(q3,t)?!1:u6.test(t)?Y3[t]=!0:(q3[t]=!0,!1)}function h6(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function f6(t,e,n,r){if(e===null||typeof e>"u"||h6(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function wo(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ns={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ns[t]=new wo(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ns[e]=new wo(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ns[t]=new wo(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ns[t]=new wo(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ns[t]=new wo(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ns[t]=new wo(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ns[t]=new wo(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ns[t]=new wo(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ns[t]=new wo(t,5,!1,t.toLowerCase(),null,!1,!1)});var A5=/[\-:]([a-z])/g;function T5(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(A5,T5);Ns[e]=new wo(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(A5,T5);Ns[e]=new wo(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(A5,T5);Ns[e]=new wo(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ns[t]=new wo(t,1,!1,t.toLowerCase(),null,!1,!1)});Ns.xlinkHref=new wo("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ns[t]=new wo(t,1,!1,t.toLowerCase(),null,!0,!0)});function C5(t,e,n,r){var i=Ns.hasOwnProperty(e)?Ns[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(f6(e,n,i,r)&&(n=null),r||i===null?c6(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var hc=UL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Wv=Symbol.for("react.element"),Mp=Symbol.for("react.portal"),Ep=Symbol.for("react.fragment"),L5=Symbol.for("react.strict_mode"),u_=Symbol.for("react.profiler"),zL=Symbol.for("react.provider"),HL=Symbol.for("react.context"),P5=Symbol.for("react.forward_ref"),c_=Symbol.for("react.suspense"),h_=Symbol.for("react.suspense_list"),R5=Symbol.for("react.memo"),th=Symbol.for("react.lazy"),GL=Symbol.for("react.offscreen"),Z3=Symbol.iterator;function tg(t){return t===null||typeof t!="object"?null:(t=Z3&&t[Z3]||t["@@iterator"],typeof t=="function"?t:null)}var wi=Object.assign,iw;function Cg(t){if(iw===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);iw=e&&e[1]||""}return`
`+iw+t}var sw=!1;function ow(t,e){if(!t||sw)return"";sw=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{sw=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Cg(t):""}function d6(t){switch(t.tag){case 5:return Cg(t.type);case 16:return Cg("Lazy");case 13:return Cg("Suspense");case 19:return Cg("SuspenseList");case 0:case 2:case 15:return t=ow(t.type,!1),t;case 11:return t=ow(t.type.render,!1),t;case 1:return t=ow(t.type,!0),t;default:return""}}function f_(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ep:return"Fragment";case Mp:return"Portal";case u_:return"Profiler";case L5:return"StrictMode";case c_:return"Suspense";case h_:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case HL:return(t.displayName||"Context")+".Consumer";case zL:return(t._context.displayName||"Context")+".Provider";case P5:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case R5:return e=t.displayName||null,e!==null?e:f_(t.type)||"Memo";case th:e=t._payload,t=t._init;try{return f_(t(e))}catch{}}return null}function p6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return f_(e);case 8:return e===L5?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ch(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function VL(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function m6(t){var e=VL(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jv(t){t._valueTracker||(t._valueTracker=m6(t))}function WL(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=VL(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Xy(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function d_(t,e){var n=e.checked;return wi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function $3(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ch(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jL(t,e){e=e.checked,e!=null&&C5(t,"checked",e,!1)}function p_(t,e){jL(t,e);var n=Ch(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?m_(t,e.type,n):e.hasOwnProperty("defaultValue")&&m_(t,e.type,Ch(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function K3(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function m_(t,e,n){(e!=="number"||Xy(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Lg=Array.isArray;function zp(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ch(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function g_(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Rt(91));return wi({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function J3(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Rt(92));if(Lg(n)){if(1<n.length)throw Error(Rt(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ch(n)}}function XL(t,e){var n=Ch(e.value),r=Ch(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Q3(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function qL(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function v_(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?qL(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Xv,YL=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Xv=Xv||document.createElement("div"),Xv.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Xv.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function a0(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Dg={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},g6=["Webkit","ms","Moz","O"];Object.keys(Dg).forEach(function(t){g6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Dg[e]=Dg[t]})});function ZL(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Dg.hasOwnProperty(t)&&Dg[t]?(""+e).trim():e+"px"}function $L(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ZL(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var v6=wi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function y_(t,e){if(e){if(v6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Rt(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Rt(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Rt(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Rt(62))}}function x_(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w_=null;function k5(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var S_=null,Hp=null,Gp=null;function eE(t){if(t=Q0(t)){if(typeof S_!="function")throw Error(Rt(280));var e=t.stateNode;e&&(e=V2(e),S_(t.stateNode,t.type,e))}}function KL(t){Hp?Gp?Gp.push(t):Gp=[t]:Hp=t}function JL(){if(Hp){var t=Hp,e=Gp;if(Gp=Hp=null,eE(t),e)for(t=0;t<e.length;t++)eE(e[t])}}function QL(t,e){return t(e)}function eP(){}var aw=!1;function tP(t,e,n){if(aw)return t(e,n);aw=!0;try{return QL(t,e,n)}finally{aw=!1,(Hp!==null||Gp!==null)&&(eP(),JL())}}function l0(t,e){var n=t.stateNode;if(n===null)return null;var r=V2(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Rt(231,e,typeof n));return n}var __=!1;if(rc)try{var ng={};Object.defineProperty(ng,"passive",{get:function(){__=!0}}),window.addEventListener("test",ng,ng),window.removeEventListener("test",ng,ng)}catch{__=!1}function y6(t,e,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Og=!1,qy=null,Yy=!1,b_=null,x6={onError:function(t){Og=!0,qy=t}};function w6(t,e,n,r,i,s,o,a,l){Og=!1,qy=null,y6.apply(x6,arguments)}function S6(t,e,n,r,i,s,o,a,l){if(w6.apply(this,arguments),Og){if(Og){var u=qy;Og=!1,qy=null}else throw Error(Rt(198));Yy||(Yy=!0,b_=u)}}function cd(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function nP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function tE(t){if(cd(t)!==t)throw Error(Rt(188))}function _6(t){var e=t.alternate;if(!e){if(e=cd(t),e===null)throw Error(Rt(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return tE(i),t;if(s===r)return tE(i),e;s=s.sibling}throw Error(Rt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Rt(189))}}if(n.alternate!==r)throw Error(Rt(190))}if(n.tag!==3)throw Error(Rt(188));return n.stateNode.current===n?t:e}function rP(t){return t=_6(t),t!==null?iP(t):null}function iP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=iP(t);if(e!==null)return e;t=t.sibling}return null}var sP=la.unstable_scheduleCallback,nE=la.unstable_cancelCallback,b6=la.unstable_shouldYield,M6=la.unstable_requestPaint,Di=la.unstable_now,E6=la.unstable_getCurrentPriorityLevel,I5=la.unstable_ImmediatePriority,oP=la.unstable_UserBlockingPriority,Zy=la.unstable_NormalPriority,A6=la.unstable_LowPriority,aP=la.unstable_IdlePriority,B2=null,nu=null;function T6(t){if(nu&&typeof nu.onCommitFiberRoot=="function")try{nu.onCommitFiberRoot(B2,t,void 0,(t.current.flags&128)===128)}catch{}}var wl=Math.clz32?Math.clz32:P6,C6=Math.log,L6=Math.LN2;function P6(t){return t>>>=0,t===0?32:31-(C6(t)/L6|0)|0}var qv=64,Yv=4194304;function Pg(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function $y(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Pg(a):(s&=o,s!==0&&(r=Pg(s)))}else o=n&~i,o!==0?r=Pg(o):s!==0&&(r=Pg(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-wl(e),i=1<<n,r|=t[n],e&=~i;return r}function R6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function k6(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-wl(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=R6(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function M_(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lP(){var t=qv;return qv<<=1,!(qv&4194240)&&(qv=64),t}function lw(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function K0(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-wl(e),t[e]=n}function I6(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-wl(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function N5(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-wl(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Rr=0;function uP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cP,F5,hP,fP,dP,E_=!1,Zv=[],mh=null,gh=null,vh=null,u0=new Map,c0=new Map,ih=[],N6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rE(t,e){switch(t){case"focusin":case"focusout":mh=null;break;case"dragenter":case"dragleave":gh=null;break;case"mouseover":case"mouseout":vh=null;break;case"pointerover":case"pointerout":u0.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":c0.delete(e.pointerId)}}function rg(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Q0(e),e!==null&&F5(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function F6(t,e,n,r,i){switch(e){case"focusin":return mh=rg(mh,t,e,n,r,i),!0;case"dragenter":return gh=rg(gh,t,e,n,r,i),!0;case"mouseover":return vh=rg(vh,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return u0.set(s,rg(u0.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,c0.set(s,rg(c0.get(s)||null,t,e,n,r,i)),!0}return!1}function pP(t){var e=kf(t.target);if(e!==null){var n=cd(e);if(n!==null){if(e=n.tag,e===13){if(e=nP(n),e!==null){t.blockedOn=e,dP(t.priority,function(){hP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yy(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=A_(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);w_=r,n.target.dispatchEvent(r),w_=null}else return e=Q0(n),e!==null&&F5(e),t.blockedOn=n,!1;e.shift()}return!0}function iE(t,e,n){yy(t)&&n.delete(e)}function D6(){E_=!1,mh!==null&&yy(mh)&&(mh=null),gh!==null&&yy(gh)&&(gh=null),vh!==null&&yy(vh)&&(vh=null),u0.forEach(iE),c0.forEach(iE)}function ig(t,e){t.blockedOn===e&&(t.blockedOn=null,E_||(E_=!0,la.unstable_scheduleCallback(la.unstable_NormalPriority,D6)))}function h0(t){function e(i){return ig(i,t)}if(0<Zv.length){ig(Zv[0],t);for(var n=1;n<Zv.length;n++){var r=Zv[n];r.blockedOn===t&&(r.blockedOn=null)}}for(mh!==null&&ig(mh,t),gh!==null&&ig(gh,t),vh!==null&&ig(vh,t),u0.forEach(e),c0.forEach(e),n=0;n<ih.length;n++)r=ih[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ih.length&&(n=ih[0],n.blockedOn===null);)pP(n),n.blockedOn===null&&ih.shift()}var Vp=hc.ReactCurrentBatchConfig,Ky=!0;function O6(t,e,n,r){var i=Rr,s=Vp.transition;Vp.transition=null;try{Rr=1,D5(t,e,n,r)}finally{Rr=i,Vp.transition=s}}function U6(t,e,n,r){var i=Rr,s=Vp.transition;Vp.transition=null;try{Rr=4,D5(t,e,n,r)}finally{Rr=i,Vp.transition=s}}function D5(t,e,n,r){if(Ky){var i=A_(t,e,n,r);if(i===null)yw(t,e,r,Jy,n),rE(t,r);else if(F6(i,t,e,n,r))r.stopPropagation();else if(rE(t,r),e&4&&-1<N6.indexOf(t)){for(;i!==null;){var s=Q0(i);if(s!==null&&cP(s),s=A_(t,e,n,r),s===null&&yw(t,e,r,Jy,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else yw(t,e,r,null,n)}}var Jy=null;function A_(t,e,n,r){if(Jy=null,t=k5(r),t=kf(t),t!==null)if(e=cd(t),e===null)t=null;else if(n=e.tag,n===13){if(t=nP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jy=t,null}function mP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(E6()){case I5:return 1;case oP:return 4;case Zy:case A6:return 16;case aP:return 536870912;default:return 16}default:return 16}}var lh=null,O5=null,xy=null;function gP(){if(xy)return xy;var t,e=O5,n=e.length,r,i="value"in lh?lh.value:lh.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return xy=i.slice(t,1<r?1-r:void 0)}function wy(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $v(){return!0}function sE(){return!1}function ha(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$v:sE,this.isPropagationStopped=sE,this}return wi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$v)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$v)},persist:function(){},isPersistent:$v}),e}var bm={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},U5=ha(bm),J0=wi({},bm,{view:0,detail:0}),B6=ha(J0),uw,cw,sg,z2=wi({},J0,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:B5,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==sg&&(sg&&t.type==="mousemove"?(uw=t.screenX-sg.screenX,cw=t.screenY-sg.screenY):cw=uw=0,sg=t),uw)},movementY:function(t){return"movementY"in t?t.movementY:cw}}),oE=ha(z2),z6=wi({},z2,{dataTransfer:0}),H6=ha(z6),G6=wi({},J0,{relatedTarget:0}),hw=ha(G6),V6=wi({},bm,{animationName:0,elapsedTime:0,pseudoElement:0}),W6=ha(V6),j6=wi({},bm,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),X6=ha(j6),q6=wi({},bm,{data:0}),aE=ha(q6),Y6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Z6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=$6[t])?!!e[t]:!1}function B5(){return K6}var J6=wi({},J0,{key:function(t){if(t.key){var e=Y6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wy(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Z6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:B5,charCode:function(t){return t.type==="keypress"?wy(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wy(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Q6=ha(J6),eD=wi({},z2,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lE=ha(eD),tD=wi({},J0,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:B5}),nD=ha(tD),rD=wi({},bm,{propertyName:0,elapsedTime:0,pseudoElement:0}),iD=ha(rD),sD=wi({},z2,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),oD=ha(sD),aD=[9,13,27,32],z5=rc&&"CompositionEvent"in window,Ug=null;rc&&"documentMode"in document&&(Ug=document.documentMode);var lD=rc&&"TextEvent"in window&&!Ug,vP=rc&&(!z5||Ug&&8<Ug&&11>=Ug),uE=String.fromCharCode(32),cE=!1;function yP(t,e){switch(t){case"keyup":return aD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ap=!1;function uD(t,e){switch(t){case"compositionend":return xP(e);case"keypress":return e.which!==32?null:(cE=!0,uE);case"textInput":return t=e.data,t===uE&&cE?null:t;default:return null}}function cD(t,e){if(Ap)return t==="compositionend"||!z5&&yP(t,e)?(t=gP(),xy=O5=lh=null,Ap=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return vP&&e.locale!=="ko"?null:e.data;default:return null}}var hD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hE(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!hD[t.type]:e==="textarea"}function wP(t,e,n,r){KL(r),e=Qy(e,"onChange"),0<e.length&&(n=new U5("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Bg=null,f0=null;function fD(t){RP(t,0)}function H2(t){var e=Lp(t);if(WL(e))return t}function dD(t,e){if(t==="change")return e}var SP=!1;if(rc){var fw;if(rc){var dw="oninput"in document;if(!dw){var fE=document.createElement("div");fE.setAttribute("oninput","return;"),dw=typeof fE.oninput=="function"}fw=dw}else fw=!1;SP=fw&&(!document.documentMode||9<document.documentMode)}function dE(){Bg&&(Bg.detachEvent("onpropertychange",_P),f0=Bg=null)}function _P(t){if(t.propertyName==="value"&&H2(f0)){var e=[];wP(e,f0,t,k5(t)),tP(fD,e)}}function pD(t,e,n){t==="focusin"?(dE(),Bg=e,f0=n,Bg.attachEvent("onpropertychange",_P)):t==="focusout"&&dE()}function mD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return H2(f0)}function gD(t,e){if(t==="click")return H2(e)}function vD(t,e){if(t==="input"||t==="change")return H2(e)}function yD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bl=typeof Object.is=="function"?Object.is:yD;function d0(t,e){if(bl(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!l_.call(e,i)||!bl(t[i],e[i]))return!1}return!0}function pE(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function mE(t,e){var n=pE(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=pE(n)}}function bP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?bP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function MP(){for(var t=window,e=Xy();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Xy(t.document)}return e}function H5(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xD(t){var e=MP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&bP(n.ownerDocument.documentElement,n)){if(r!==null&&H5(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=mE(n,s);var o=mE(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var wD=rc&&"documentMode"in document&&11>=document.documentMode,Tp=null,T_=null,zg=null,C_=!1;function gE(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;C_||Tp==null||Tp!==Xy(r)||(r=Tp,"selectionStart"in r&&H5(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),zg&&d0(zg,r)||(zg=r,r=Qy(T_,"onSelect"),0<r.length&&(e=new U5("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Tp)))}function Kv(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Cp={animationend:Kv("Animation","AnimationEnd"),animationiteration:Kv("Animation","AnimationIteration"),animationstart:Kv("Animation","AnimationStart"),transitionend:Kv("Transition","TransitionEnd")},pw={},EP={};rc&&(EP=document.createElement("div").style,"AnimationEvent"in window||(delete Cp.animationend.animation,delete Cp.animationiteration.animation,delete Cp.animationstart.animation),"TransitionEvent"in window||delete Cp.transitionend.transition);function G2(t){if(pw[t])return pw[t];if(!Cp[t])return t;var e=Cp[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in EP)return pw[t]=e[n];return t}var AP=G2("animationend"),TP=G2("animationiteration"),CP=G2("animationstart"),LP=G2("transitionend"),PP=new Map,vE="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Uh(t,e){PP.set(t,e),ud(e,[t])}for(var mw=0;mw<vE.length;mw++){var gw=vE[mw],SD=gw.toLowerCase(),_D=gw[0].toUpperCase()+gw.slice(1);Uh(SD,"on"+_D)}Uh(AP,"onAnimationEnd");Uh(TP,"onAnimationIteration");Uh(CP,"onAnimationStart");Uh("dblclick","onDoubleClick");Uh("focusin","onFocus");Uh("focusout","onBlur");Uh(LP,"onTransitionEnd");rm("onMouseEnter",["mouseout","mouseover"]);rm("onMouseLeave",["mouseout","mouseover"]);rm("onPointerEnter",["pointerout","pointerover"]);rm("onPointerLeave",["pointerout","pointerover"]);ud("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ud("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ud("onBeforeInput",["compositionend","keypress","textInput","paste"]);ud("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ud("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ud("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),bD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rg));function yE(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,S6(r,e,void 0,t),t.currentTarget=null}function RP(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;yE(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;yE(i,a,u),s=l}}}if(Yy)throw t=b_,Yy=!1,b_=null,t}function Zr(t,e){var n=e[I_];n===void 0&&(n=e[I_]=new Set);var r=t+"__bubble";n.has(r)||(kP(e,t,2,!1),n.add(r))}function vw(t,e,n){var r=0;e&&(r|=4),kP(n,t,r,e)}var Jv="_reactListening"+Math.random().toString(36).slice(2);function p0(t){if(!t[Jv]){t[Jv]=!0,BL.forEach(function(n){n!=="selectionchange"&&(bD.has(n)||vw(n,!1,t),vw(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Jv]||(e[Jv]=!0,vw("selectionchange",!1,e))}}function kP(t,e,n,r){switch(mP(e)){case 1:var i=O6;break;case 4:i=U6;break;default:i=D5}n=i.bind(null,e,n,t),i=void 0,!__||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function yw(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=kf(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}tP(function(){var u=s,c=k5(n),h=[];e:{var f=PP.get(t);if(f!==void 0){var d=U5,v=t;switch(t){case"keypress":if(wy(n)===0)break e;case"keydown":case"keyup":d=Q6;break;case"focusin":v="focus",d=hw;break;case"focusout":v="blur",d=hw;break;case"beforeblur":case"afterblur":d=hw;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=oE;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=H6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=nD;break;case AP:case TP:case CP:d=W6;break;case LP:d=iD;break;case"scroll":d=B6;break;case"wheel":d=oD;break;case"copy":case"cut":case"paste":d=X6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=lE}var x=(e&4)!==0,w=!x&&t==="scroll",g=x?f!==null?f+"Capture":null:f;x=[];for(var S=u,_;S!==null;){_=S;var T=_.stateNode;if(_.tag===5&&T!==null&&(_=T,g!==null&&(T=l0(S,g),T!=null&&x.push(m0(S,T,_)))),w)break;S=S.return}0<x.length&&(f=new d(f,v,null,n,c),h.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&n!==w_&&(v=n.relatedTarget||n.fromElement)&&(kf(v)||v[ic]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(v=n.relatedTarget||n.toElement,d=u,v=v?kf(v):null,v!==null&&(w=cd(v),v!==w||v.tag!==5&&v.tag!==6)&&(v=null)):(d=null,v=u),d!==v)){if(x=oE,T="onMouseLeave",g="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(x=lE,T="onPointerLeave",g="onPointerEnter",S="pointer"),w=d==null?f:Lp(d),_=v==null?f:Lp(v),f=new x(T,S+"leave",d,n,c),f.target=w,f.relatedTarget=_,T=null,kf(c)===u&&(x=new x(g,S+"enter",v,n,c),x.target=_,x.relatedTarget=w,T=x),w=T,d&&v)t:{for(x=d,g=v,S=0,_=x;_;_=Gd(_))S++;for(_=0,T=g;T;T=Gd(T))_++;for(;0<S-_;)x=Gd(x),S--;for(;0<_-S;)g=Gd(g),_--;for(;S--;){if(x===g||g!==null&&x===g.alternate)break t;x=Gd(x),g=Gd(g)}x=null}else x=null;d!==null&&xE(h,f,d,x,!1),v!==null&&w!==null&&xE(h,w,v,x,!0)}}e:{if(f=u?Lp(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var L=dD;else if(hE(f))if(SP)L=vD;else{L=mD;var k=pD}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(L=gD);if(L&&(L=L(t,u))){wP(h,L,n,c);break e}k&&k(t,f,u),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&m_(f,"number",f.value)}switch(k=u?Lp(u):window,t){case"focusin":(hE(k)||k.contentEditable==="true")&&(Tp=k,T_=u,zg=null);break;case"focusout":zg=T_=Tp=null;break;case"mousedown":C_=!0;break;case"contextmenu":case"mouseup":case"dragend":C_=!1,gE(h,n,c);break;case"selectionchange":if(wD)break;case"keydown":case"keyup":gE(h,n,c)}var N;if(z5)e:{switch(t){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Ap?yP(t,n)&&(R="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(vP&&n.locale!=="ko"&&(Ap||R!=="onCompositionStart"?R==="onCompositionEnd"&&Ap&&(N=gP()):(lh=c,O5="value"in lh?lh.value:lh.textContent,Ap=!0)),k=Qy(u,R),0<k.length&&(R=new aE(R,t,null,n,c),h.push({event:R,listeners:k}),N?R.data=N:(N=xP(n),N!==null&&(R.data=N)))),(N=lD?uD(t,n):cD(t,n))&&(u=Qy(u,"onBeforeInput"),0<u.length&&(c=new aE("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=N))}RP(h,e)})}function m0(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Qy(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=l0(t,n),s!=null&&r.unshift(m0(t,s,i)),s=l0(t,e),s!=null&&r.push(m0(t,s,i))),t=t.return}return r}function Gd(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function xE(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=l0(n,s),l!=null&&o.unshift(m0(n,l,a))):i||(l=l0(n,s),l!=null&&o.push(m0(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var MD=/\r\n?/g,ED=/\u0000|\uFFFD/g;function wE(t){return(typeof t=="string"?t:""+t).replace(MD,`
`).replace(ED,"")}function Qv(t,e,n){if(e=wE(e),wE(t)!==e&&n)throw Error(Rt(425))}function e2(){}var L_=null,P_=null;function R_(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var k_=typeof setTimeout=="function"?setTimeout:void 0,AD=typeof clearTimeout=="function"?clearTimeout:void 0,SE=typeof Promise=="function"?Promise:void 0,TD=typeof queueMicrotask=="function"?queueMicrotask:typeof SE<"u"?function(t){return SE.resolve(null).then(t).catch(CD)}:k_;function CD(t){setTimeout(function(){throw t})}function xw(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),h0(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);h0(e)}function yh(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _E(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Mm=Math.random().toString(36).slice(2),Jl="__reactFiber$"+Mm,g0="__reactProps$"+Mm,ic="__reactContainer$"+Mm,I_="__reactEvents$"+Mm,LD="__reactListeners$"+Mm,PD="__reactHandles$"+Mm;function kf(t){var e=t[Jl];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ic]||n[Jl]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_E(t);t!==null;){if(n=t[Jl])return n;t=_E(t)}return e}t=n,n=t.parentNode}return null}function Q0(t){return t=t[Jl]||t[ic],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Lp(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Rt(33))}function V2(t){return t[g0]||null}var N_=[],Pp=-1;function Bh(t){return{current:t}}function ei(t){0>Pp||(t.current=N_[Pp],N_[Pp]=null,Pp--)}function Hr(t,e){Pp++,N_[Pp]=t.current,t.current=e}var Lh={},so=Bh(Lh),Do=Bh(!1),Zf=Lh;function im(t,e){var n=t.type.contextTypes;if(!n)return Lh;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Oo(t){return t=t.childContextTypes,t!=null}function t2(){ei(Do),ei(so)}function bE(t,e,n){if(so.current!==Lh)throw Error(Rt(168));Hr(so,e),Hr(Do,n)}function IP(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Rt(108,p6(t)||"Unknown",i));return wi({},n,r)}function n2(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Lh,Zf=so.current,Hr(so,t),Hr(Do,Do.current),!0}function ME(t,e,n){var r=t.stateNode;if(!r)throw Error(Rt(169));n?(t=IP(t,e,Zf),r.__reactInternalMemoizedMergedChildContext=t,ei(Do),ei(so),Hr(so,t)):ei(Do),Hr(Do,n)}var Gu=null,W2=!1,ww=!1;function NP(t){Gu===null?Gu=[t]:Gu.push(t)}function RD(t){W2=!0,NP(t)}function zh(){if(!ww&&Gu!==null){ww=!0;var t=0,e=Rr;try{var n=Gu;for(Rr=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Gu=null,W2=!1}catch(i){throw Gu!==null&&(Gu=Gu.slice(t+1)),sP(I5,zh),i}finally{Rr=e,ww=!1}}return null}var Rp=[],kp=0,r2=null,i2=0,Oa=[],Ua=0,$f=null,Yu=1,Zu="";function bf(t,e){Rp[kp++]=i2,Rp[kp++]=r2,r2=t,i2=e}function FP(t,e,n){Oa[Ua++]=Yu,Oa[Ua++]=Zu,Oa[Ua++]=$f,$f=t;var r=Yu;t=Zu;var i=32-wl(r)-1;r&=~(1<<i),n+=1;var s=32-wl(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yu=1<<32-wl(e)+i|n<<i|r,Zu=s+t}else Yu=1<<s|n<<i|r,Zu=t}function G5(t){t.return!==null&&(bf(t,1),FP(t,1,0))}function V5(t){for(;t===r2;)r2=Rp[--kp],Rp[kp]=null,i2=Rp[--kp],Rp[kp]=null;for(;t===$f;)$f=Oa[--Ua],Oa[Ua]=null,Zu=Oa[--Ua],Oa[Ua]=null,Yu=Oa[--Ua],Oa[Ua]=null}var oa=null,ia=null,si=!1,gl=null;function DP(t,e){var n=za(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function EE(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,oa=t,ia=yh(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,oa=t,ia=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$f!==null?{id:Yu,overflow:Zu}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=za(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,oa=t,ia=null,!0):!1;default:return!1}}function F_(t){return(t.mode&1)!==0&&(t.flags&128)===0}function D_(t){if(si){var e=ia;if(e){var n=e;if(!EE(t,e)){if(F_(t))throw Error(Rt(418));e=yh(n.nextSibling);var r=oa;e&&EE(t,e)?DP(r,n):(t.flags=t.flags&-4097|2,si=!1,oa=t)}}else{if(F_(t))throw Error(Rt(418));t.flags=t.flags&-4097|2,si=!1,oa=t}}}function AE(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;oa=t}function e1(t){if(t!==oa)return!1;if(!si)return AE(t),si=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!R_(t.type,t.memoizedProps)),e&&(e=ia)){if(F_(t))throw OP(),Error(Rt(418));for(;e;)DP(t,e),e=yh(e.nextSibling)}if(AE(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Rt(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){ia=yh(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}ia=null}}else ia=oa?yh(t.stateNode.nextSibling):null;return!0}function OP(){for(var t=ia;t;)t=yh(t.nextSibling)}function sm(){ia=oa=null,si=!1}function W5(t){gl===null?gl=[t]:gl.push(t)}var kD=hc.ReactCurrentBatchConfig;function fl(t,e){if(t&&t.defaultProps){e=wi({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var s2=Bh(null),o2=null,Ip=null,j5=null;function X5(){j5=Ip=o2=null}function q5(t){var e=s2.current;ei(s2),t._currentValue=e}function O_(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Wp(t,e){o2=t,j5=Ip=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Fo=!0),t.firstContext=null)}function Wa(t){var e=t._currentValue;if(j5!==t)if(t={context:t,memoizedValue:e,next:null},Ip===null){if(o2===null)throw Error(Rt(308));Ip=t,o2.dependencies={lanes:0,firstContext:t}}else Ip=Ip.next=t;return e}var If=null;function Y5(t){If===null?If=[t]:If.push(t)}function UP(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Y5(e)):(n.next=i.next,i.next=n),e.interleaved=n,sc(t,r)}function sc(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var nh=!1;function Z5(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BP(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ec(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xh(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,mr&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,sc(t,n)}return i=r.interleaved,i===null?(e.next=e,Y5(r)):(e.next=i.next,i.next=e),r.interleaved=e,sc(t,n)}function Sy(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,N5(t,n)}}function TE(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function a2(t,e,n,r){var i=t.updateQueue;nh=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,d=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=t,x=a;switch(f=e,d=n,x.tag){case 1:if(v=x.payload,typeof v=="function"){h=v.call(d,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=x.payload,f=typeof v=="function"?v.call(d,h,f):v,f==null)break e;h=wi({},h,f);break e;case 2:nh=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else d={eventTime:d,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=d,l=h):c=c.next=d,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Jf|=o,t.lanes=o,t.memoizedState=h}}function CE(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Rt(191,i));i.call(r)}}}var zP=new UL.Component().refs;function U_(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:wi({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var j2={isMounted:function(t){return(t=t._reactInternals)?cd(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=vo(),i=Sh(t),s=ec(r,i);s.payload=e,n!=null&&(s.callback=n),e=xh(t,s,i),e!==null&&(Sl(e,t,i,r),Sy(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=vo(),i=Sh(t),s=ec(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=xh(t,s,i),e!==null&&(Sl(e,t,i,r),Sy(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=vo(),r=Sh(t),i=ec(n,r);i.tag=2,e!=null&&(i.callback=e),e=xh(t,i,r),e!==null&&(Sl(e,t,r,n),Sy(e,t,r))}};function LE(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!d0(n,r)||!d0(i,s):!0}function HP(t,e,n){var r=!1,i=Lh,s=e.contextType;return typeof s=="object"&&s!==null?s=Wa(s):(i=Oo(e)?Zf:so.current,r=e.contextTypes,s=(r=r!=null)?im(t,i):Lh),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=j2,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function PE(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&j2.enqueueReplaceState(e,e.state,null)}function B_(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=zP,Z5(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Wa(s):(s=Oo(e)?Zf:so.current,i.context=im(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(U_(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&j2.enqueueReplaceState(i,i.state,null),a2(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function og(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Rt(309));var r=n.stateNode}if(!r)throw Error(Rt(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===zP&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Rt(284));if(!n._owner)throw Error(Rt(290,t))}return t}function t1(t,e){throw t=Object.prototype.toString.call(e),Error(Rt(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function RE(t){var e=t._init;return e(t._payload)}function GP(t){function e(g,S){if(t){var _=g.deletions;_===null?(g.deletions=[S],g.flags|=16):_.push(S)}}function n(g,S){if(!t)return null;for(;S!==null;)e(g,S),S=S.sibling;return null}function r(g,S){for(g=new Map;S!==null;)S.key!==null?g.set(S.key,S):g.set(S.index,S),S=S.sibling;return g}function i(g,S){return g=_h(g,S),g.index=0,g.sibling=null,g}function s(g,S,_){return g.index=_,t?(_=g.alternate,_!==null?(_=_.index,_<S?(g.flags|=2,S):_):(g.flags|=2,S)):(g.flags|=1048576,S)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,S,_,T){return S===null||S.tag!==6?(S=Tw(_,g.mode,T),S.return=g,S):(S=i(S,_),S.return=g,S)}function l(g,S,_,T){var L=_.type;return L===Ep?c(g,S,_.props.children,T,_.key):S!==null&&(S.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===th&&RE(L)===S.type)?(T=i(S,_.props),T.ref=og(g,S,_),T.return=g,T):(T=Ty(_.type,_.key,_.props,null,g.mode,T),T.ref=og(g,S,_),T.return=g,T)}function u(g,S,_,T){return S===null||S.tag!==4||S.stateNode.containerInfo!==_.containerInfo||S.stateNode.implementation!==_.implementation?(S=Cw(_,g.mode,T),S.return=g,S):(S=i(S,_.children||[]),S.return=g,S)}function c(g,S,_,T,L){return S===null||S.tag!==7?(S=Vf(_,g.mode,T,L),S.return=g,S):(S=i(S,_),S.return=g,S)}function h(g,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Tw(""+S,g.mode,_),S.return=g,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Wv:return _=Ty(S.type,S.key,S.props,null,g.mode,_),_.ref=og(g,null,S),_.return=g,_;case Mp:return S=Cw(S,g.mode,_),S.return=g,S;case th:var T=S._init;return h(g,T(S._payload),_)}if(Lg(S)||tg(S))return S=Vf(S,g.mode,_,null),S.return=g,S;t1(g,S)}return null}function f(g,S,_,T){var L=S!==null?S.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return L!==null?null:a(g,S,""+_,T);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Wv:return _.key===L?l(g,S,_,T):null;case Mp:return _.key===L?u(g,S,_,T):null;case th:return L=_._init,f(g,S,L(_._payload),T)}if(Lg(_)||tg(_))return L!==null?null:c(g,S,_,T,null);t1(g,_)}return null}function d(g,S,_,T,L){if(typeof T=="string"&&T!==""||typeof T=="number")return g=g.get(_)||null,a(S,g,""+T,L);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Wv:return g=g.get(T.key===null?_:T.key)||null,l(S,g,T,L);case Mp:return g=g.get(T.key===null?_:T.key)||null,u(S,g,T,L);case th:var k=T._init;return d(g,S,_,k(T._payload),L)}if(Lg(T)||tg(T))return g=g.get(_)||null,c(S,g,T,L,null);t1(S,T)}return null}function v(g,S,_,T){for(var L=null,k=null,N=S,R=S=0,P=null;N!==null&&R<_.length;R++){N.index>R?(P=N,N=null):P=N.sibling;var D=f(g,N,_[R],T);if(D===null){N===null&&(N=P);break}t&&N&&D.alternate===null&&e(g,N),S=s(D,S,R),k===null?L=D:k.sibling=D,k=D,N=P}if(R===_.length)return n(g,N),si&&bf(g,R),L;if(N===null){for(;R<_.length;R++)N=h(g,_[R],T),N!==null&&(S=s(N,S,R),k===null?L=N:k.sibling=N,k=N);return si&&bf(g,R),L}for(N=r(g,N);R<_.length;R++)P=d(N,g,R,_[R],T),P!==null&&(t&&P.alternate!==null&&N.delete(P.key===null?R:P.key),S=s(P,S,R),k===null?L=P:k.sibling=P,k=P);return t&&N.forEach(function(O){return e(g,O)}),si&&bf(g,R),L}function x(g,S,_,T){var L=tg(_);if(typeof L!="function")throw Error(Rt(150));if(_=L.call(_),_==null)throw Error(Rt(151));for(var k=L=null,N=S,R=S=0,P=null,D=_.next();N!==null&&!D.done;R++,D=_.next()){N.index>R?(P=N,N=null):P=N.sibling;var O=f(g,N,D.value,T);if(O===null){N===null&&(N=P);break}t&&N&&O.alternate===null&&e(g,N),S=s(O,S,R),k===null?L=O:k.sibling=O,k=O,N=P}if(D.done)return n(g,N),si&&bf(g,R),L;if(N===null){for(;!D.done;R++,D=_.next())D=h(g,D.value,T),D!==null&&(S=s(D,S,R),k===null?L=D:k.sibling=D,k=D);return si&&bf(g,R),L}for(N=r(g,N);!D.done;R++,D=_.next())D=d(N,g,R,D.value,T),D!==null&&(t&&D.alternate!==null&&N.delete(D.key===null?R:D.key),S=s(D,S,R),k===null?L=D:k.sibling=D,k=D);return t&&N.forEach(function(B){return e(g,B)}),si&&bf(g,R),L}function w(g,S,_,T){if(typeof _=="object"&&_!==null&&_.type===Ep&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Wv:e:{for(var L=_.key,k=S;k!==null;){if(k.key===L){if(L=_.type,L===Ep){if(k.tag===7){n(g,k.sibling),S=i(k,_.props.children),S.return=g,g=S;break e}}else if(k.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===th&&RE(L)===k.type){n(g,k.sibling),S=i(k,_.props),S.ref=og(g,k,_),S.return=g,g=S;break e}n(g,k);break}else e(g,k);k=k.sibling}_.type===Ep?(S=Vf(_.props.children,g.mode,T,_.key),S.return=g,g=S):(T=Ty(_.type,_.key,_.props,null,g.mode,T),T.ref=og(g,S,_),T.return=g,g=T)}return o(g);case Mp:e:{for(k=_.key;S!==null;){if(S.key===k)if(S.tag===4&&S.stateNode.containerInfo===_.containerInfo&&S.stateNode.implementation===_.implementation){n(g,S.sibling),S=i(S,_.children||[]),S.return=g,g=S;break e}else{n(g,S);break}else e(g,S);S=S.sibling}S=Cw(_,g.mode,T),S.return=g,g=S}return o(g);case th:return k=_._init,w(g,S,k(_._payload),T)}if(Lg(_))return v(g,S,_,T);if(tg(_))return x(g,S,_,T);t1(g,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,S!==null&&S.tag===6?(n(g,S.sibling),S=i(S,_),S.return=g,g=S):(n(g,S),S=Tw(_,g.mode,T),S.return=g,g=S),o(g)):n(g,S)}return w}var om=GP(!0),VP=GP(!1),ev={},ru=Bh(ev),v0=Bh(ev),y0=Bh(ev);function Nf(t){if(t===ev)throw Error(Rt(174));return t}function $5(t,e){switch(Hr(y0,e),Hr(v0,t),Hr(ru,ev),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:v_(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=v_(e,t)}ei(ru),Hr(ru,e)}function am(){ei(ru),ei(v0),ei(y0)}function WP(t){Nf(y0.current);var e=Nf(ru.current),n=v_(e,t.type);e!==n&&(Hr(v0,t),Hr(ru,n))}function K5(t){v0.current===t&&(ei(ru),ei(v0))}var pi=Bh(0);function l2(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sw=[];function J5(){for(var t=0;t<Sw.length;t++)Sw[t]._workInProgressVersionPrimary=null;Sw.length=0}var _y=hc.ReactCurrentDispatcher,_w=hc.ReactCurrentBatchConfig,Kf=0,xi=null,rs=null,Ss=null,u2=!1,Hg=!1,x0=0,ID=0;function Gs(){throw Error(Rt(321))}function Q5(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!bl(t[n],e[n]))return!1;return!0}function eM(t,e,n,r,i,s){if(Kf=s,xi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_y.current=t===null||t.memoizedState===null?OD:UD,t=n(r,i),Hg){s=0;do{if(Hg=!1,x0=0,25<=s)throw Error(Rt(301));s+=1,Ss=rs=null,e.updateQueue=null,_y.current=BD,t=n(r,i)}while(Hg)}if(_y.current=c2,e=rs!==null&&rs.next!==null,Kf=0,Ss=rs=xi=null,u2=!1,e)throw Error(Rt(300));return t}function tM(){var t=x0!==0;return x0=0,t}function Zl(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ss===null?xi.memoizedState=Ss=t:Ss=Ss.next=t,Ss}function ja(){if(rs===null){var t=xi.alternate;t=t!==null?t.memoizedState:null}else t=rs.next;var e=Ss===null?xi.memoizedState:Ss.next;if(e!==null)Ss=e,rs=t;else{if(t===null)throw Error(Rt(310));rs=t,t={memoizedState:rs.memoizedState,baseState:rs.baseState,baseQueue:rs.baseQueue,queue:rs.queue,next:null},Ss===null?xi.memoizedState=Ss=t:Ss=Ss.next=t}return Ss}function w0(t,e){return typeof e=="function"?e(t):e}function bw(t){var e=ja(),n=e.queue;if(n===null)throw Error(Rt(311));n.lastRenderedReducer=t;var r=rs,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((Kf&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,xi.lanes|=c,Jf|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,bl(r,e.memoizedState)||(Fo=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,xi.lanes|=s,Jf|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Mw(t){var e=ja(),n=e.queue;if(n===null)throw Error(Rt(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);bl(s,e.memoizedState)||(Fo=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function jP(){}function XP(t,e){var n=xi,r=ja(),i=e(),s=!bl(r.memoizedState,i);if(s&&(r.memoizedState=i,Fo=!0),r=r.queue,nM(ZP.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ss!==null&&Ss.memoizedState.tag&1){if(n.flags|=2048,S0(9,YP.bind(null,n,r,i,e),void 0,null),Ms===null)throw Error(Rt(349));Kf&30||qP(n,e,i)}return i}function qP(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xi.updateQueue,e===null?(e={lastEffect:null,stores:null},xi.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function YP(t,e,n,r){e.value=n,e.getSnapshot=r,$P(e)&&KP(t)}function ZP(t,e,n){return n(function(){$P(e)&&KP(t)})}function $P(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!bl(t,n)}catch{return!0}}function KP(t){var e=sc(t,1);e!==null&&Sl(e,t,1,-1)}function kE(t){var e=Zl();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:w0,lastRenderedState:t},e.queue=t,t=t.dispatch=DD.bind(null,xi,t),[e.memoizedState,t]}function S0(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xi.updateQueue,e===null?(e={lastEffect:null,stores:null},xi.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function JP(){return ja().memoizedState}function by(t,e,n,r){var i=Zl();xi.flags|=t,i.memoizedState=S0(1|e,n,void 0,r===void 0?null:r)}function X2(t,e,n,r){var i=ja();r=r===void 0?null:r;var s=void 0;if(rs!==null){var o=rs.memoizedState;if(s=o.destroy,r!==null&&Q5(r,o.deps)){i.memoizedState=S0(e,n,s,r);return}}xi.flags|=t,i.memoizedState=S0(1|e,n,s,r)}function IE(t,e){return by(8390656,8,t,e)}function nM(t,e){return X2(2048,8,t,e)}function QP(t,e){return X2(4,2,t,e)}function eR(t,e){return X2(4,4,t,e)}function tR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function nR(t,e,n){return n=n!=null?n.concat([t]):null,X2(4,4,tR.bind(null,e,t),n)}function rM(){}function rR(t,e){var n=ja();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Q5(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function iR(t,e){var n=ja();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Q5(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function sR(t,e,n){return Kf&21?(bl(n,e)||(n=lP(),xi.lanes|=n,Jf|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Fo=!0),t.memoizedState=n)}function ND(t,e){var n=Rr;Rr=n!==0&&4>n?n:4,t(!0);var r=_w.transition;_w.transition={};try{t(!1),e()}finally{Rr=n,_w.transition=r}}function oR(){return ja().memoizedState}function FD(t,e,n){var r=Sh(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},aR(t))lR(e,n);else if(n=UP(t,e,n,r),n!==null){var i=vo();Sl(n,t,r,i),uR(n,e,r)}}function DD(t,e,n){var r=Sh(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(aR(t))lR(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,bl(a,o)){var l=e.interleaved;l===null?(i.next=i,Y5(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=UP(t,e,i,r),n!==null&&(i=vo(),Sl(n,t,r,i),uR(n,e,r))}}function aR(t){var e=t.alternate;return t===xi||e!==null&&e===xi}function lR(t,e){Hg=u2=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function uR(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,N5(t,n)}}var c2={readContext:Wa,useCallback:Gs,useContext:Gs,useEffect:Gs,useImperativeHandle:Gs,useInsertionEffect:Gs,useLayoutEffect:Gs,useMemo:Gs,useReducer:Gs,useRef:Gs,useState:Gs,useDebugValue:Gs,useDeferredValue:Gs,useTransition:Gs,useMutableSource:Gs,useSyncExternalStore:Gs,useId:Gs,unstable_isNewReconciler:!1},OD={readContext:Wa,useCallback:function(t,e){return Zl().memoizedState=[t,e===void 0?null:e],t},useContext:Wa,useEffect:IE,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,by(4194308,4,tR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return by(4194308,4,t,e)},useInsertionEffect:function(t,e){return by(4,2,t,e)},useMemo:function(t,e){var n=Zl();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Zl();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FD.bind(null,xi,t),[r.memoizedState,t]},useRef:function(t){var e=Zl();return t={current:t},e.memoizedState=t},useState:kE,useDebugValue:rM,useDeferredValue:function(t){return Zl().memoizedState=t},useTransition:function(){var t=kE(!1),e=t[0];return t=ND.bind(null,t[1]),Zl().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xi,i=Zl();if(si){if(n===void 0)throw Error(Rt(407));n=n()}else{if(n=e(),Ms===null)throw Error(Rt(349));Kf&30||qP(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,IE(ZP.bind(null,r,s,t),[t]),r.flags|=2048,S0(9,YP.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Zl(),e=Ms.identifierPrefix;if(si){var n=Zu,r=Yu;n=(r&~(1<<32-wl(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=x0++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ID++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},UD={readContext:Wa,useCallback:rR,useContext:Wa,useEffect:nM,useImperativeHandle:nR,useInsertionEffect:QP,useLayoutEffect:eR,useMemo:iR,useReducer:bw,useRef:JP,useState:function(){return bw(w0)},useDebugValue:rM,useDeferredValue:function(t){var e=ja();return sR(e,rs.memoizedState,t)},useTransition:function(){var t=bw(w0)[0],e=ja().memoizedState;return[t,e]},useMutableSource:jP,useSyncExternalStore:XP,useId:oR,unstable_isNewReconciler:!1},BD={readContext:Wa,useCallback:rR,useContext:Wa,useEffect:nM,useImperativeHandle:nR,useInsertionEffect:QP,useLayoutEffect:eR,useMemo:iR,useReducer:Mw,useRef:JP,useState:function(){return Mw(w0)},useDebugValue:rM,useDeferredValue:function(t){var e=ja();return rs===null?e.memoizedState=t:sR(e,rs.memoizedState,t)},useTransition:function(){var t=Mw(w0)[0],e=ja().memoizedState;return[t,e]},useMutableSource:jP,useSyncExternalStore:XP,useId:oR,unstable_isNewReconciler:!1};function lm(t,e){try{var n="",r=e;do n+=d6(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ew(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function z_(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zD=typeof WeakMap=="function"?WeakMap:Map;function cR(t,e,n){n=ec(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){f2||(f2=!0,$_=r),z_(t,e)},n}function hR(t,e,n){n=ec(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){z_(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){z_(t,e),typeof r!="function"&&(wh===null?wh=new Set([this]):wh.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function NE(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new zD;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=eO.bind(null,t,e,n),e.then(t,t))}function FE(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function DE(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ec(-1,1),e.tag=2,xh(n,e,1))),n.lanes|=1),t)}var HD=hc.ReactCurrentOwner,Fo=!1;function po(t,e,n,r){e.child=t===null?VP(e,null,n,r):om(e,t.child,n,r)}function OE(t,e,n,r,i){n=n.render;var s=e.ref;return Wp(e,i),r=eM(t,e,n,r,s,i),n=tM(),t!==null&&!Fo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,oc(t,e,i)):(si&&n&&G5(e),e.flags|=1,po(t,e,r,i),e.child)}function UE(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!hM(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,fR(t,e,s,r,i)):(t=Ty(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:d0,n(o,r)&&t.ref===e.ref)return oc(t,e,i)}return e.flags|=1,t=_h(s,r),t.ref=e.ref,t.return=e,e.child=t}function fR(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(d0(s,r)&&t.ref===e.ref)if(Fo=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Fo=!0);else return e.lanes=t.lanes,oc(t,e,i)}return H_(t,e,n,r,i)}function dR(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Hr(Fp,ra),ra|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Hr(Fp,ra),ra|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Hr(Fp,ra),ra|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Hr(Fp,ra),ra|=r;return po(t,e,i,n),e.child}function pR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function H_(t,e,n,r,i){var s=Oo(n)?Zf:so.current;return s=im(e,s),Wp(e,i),n=eM(t,e,n,r,s,i),r=tM(),t!==null&&!Fo?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,oc(t,e,i)):(si&&r&&G5(e),e.flags|=1,po(t,e,n,i),e.child)}function BE(t,e,n,r,i){if(Oo(n)){var s=!0;n2(e)}else s=!1;if(Wp(e,i),e.stateNode===null)My(t,e),HP(e,n,r),B_(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Wa(u):(u=Oo(n)?Zf:so.current,u=im(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&PE(e,o,r,u),nh=!1;var f=e.memoizedState;o.state=f,a2(e,r,o,i),l=e.memoizedState,a!==r||f!==l||Do.current||nh?(typeof c=="function"&&(U_(e,n,c,r),l=e.memoizedState),(a=nh||LE(e,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,BP(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:fl(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Wa(l):(l=Oo(n)?Zf:so.current,l=im(e,l));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&PE(e,o,r,l),nh=!1,f=e.memoizedState,o.state=f,a2(e,r,o,i);var v=e.memoizedState;a!==h||f!==v||Do.current||nh?(typeof d=="function"&&(U_(e,n,d,r),v=e.memoizedState),(u=nh||LE(e,n,u,r,f,v,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=v),o.props=r,o.state=v,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return G_(t,e,n,r,s,i)}function G_(t,e,n,r,i,s){pR(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ME(e,n,!1),oc(t,e,s);r=e.stateNode,HD.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=om(e,t.child,null,s),e.child=om(e,null,a,s)):po(t,e,a,s),e.memoizedState=r.state,i&&ME(e,n,!0),e.child}function mR(t){var e=t.stateNode;e.pendingContext?bE(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bE(t,e.context,!1),$5(t,e.containerInfo)}function zE(t,e,n,r,i){return sm(),W5(i),e.flags|=256,po(t,e,n,r),e.child}var V_={dehydrated:null,treeContext:null,retryLane:0};function W_(t){return{baseLanes:t,cachePool:null,transitions:null}}function gR(t,e,n){var r=e.pendingProps,i=pi.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Hr(pi,i&1),t===null)return D_(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Z2(o,r,0,null),t=Vf(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=W_(n),e.memoizedState=V_,t):iM(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return GD(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=_h(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=_h(a,s):(s=Vf(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?W_(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=V_,r}return s=t.child,t=s.sibling,r=_h(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function iM(t,e){return e=Z2({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function n1(t,e,n,r){return r!==null&&W5(r),om(e,t.child,null,n),t=iM(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function GD(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Ew(Error(Rt(422))),n1(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Z2({mode:"visible",children:r.children},i,0,null),s=Vf(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&om(e,t.child,null,o),e.child.memoizedState=W_(o),e.memoizedState=V_,s);if(!(e.mode&1))return n1(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Rt(419)),r=Ew(s,r,void 0),n1(t,e,o,r)}if(a=(o&t.childLanes)!==0,Fo||a){if(r=Ms,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,sc(t,i),Sl(r,t,i,-1))}return cM(),r=Ew(Error(Rt(421))),n1(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=tO.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,ia=yh(i.nextSibling),oa=e,si=!0,gl=null,t!==null&&(Oa[Ua++]=Yu,Oa[Ua++]=Zu,Oa[Ua++]=$f,Yu=t.id,Zu=t.overflow,$f=e),e=iM(e,r.children),e.flags|=4096,e)}function HE(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),O_(t.return,e,n)}function Aw(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function vR(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(po(t,e,r.children,n),r=pi.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&HE(t,n,e);else if(t.tag===19)HE(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Hr(pi,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&l2(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Aw(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&l2(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Aw(e,!0,n,null,s);break;case"together":Aw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function My(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function oc(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Jf|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Rt(153));if(e.child!==null){for(t=e.child,n=_h(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_h(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function VD(t,e,n){switch(e.tag){case 3:mR(e),sm();break;case 5:WP(e);break;case 1:Oo(e.type)&&n2(e);break;case 4:$5(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Hr(s2,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Hr(pi,pi.current&1),e.flags|=128,null):n&e.child.childLanes?gR(t,e,n):(Hr(pi,pi.current&1),t=oc(t,e,n),t!==null?t.sibling:null);Hr(pi,pi.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return vR(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Hr(pi,pi.current),r)break;return null;case 22:case 23:return e.lanes=0,dR(t,e,n)}return oc(t,e,n)}var yR,j_,xR,wR;yR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};j_=function(){};xR=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Nf(ru.current);var s=null;switch(n){case"input":i=d_(t,i),r=d_(t,r),s=[];break;case"select":i=wi({},i,{value:void 0}),r=wi({},r,{value:void 0}),s=[];break;case"textarea":i=g_(t,i),r=g_(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=e2)}y_(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(o0.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(o0.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Zr("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};wR=function(t,e,n,r){n!==r&&(e.flags|=4)};function ag(t,e){if(!si)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Vs(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function WD(t,e,n){var r=e.pendingProps;switch(V5(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Vs(e),null;case 1:return Oo(e.type)&&t2(),Vs(e),null;case 3:return r=e.stateNode,am(),ei(Do),ei(so),J5(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(e1(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gl!==null&&(Q_(gl),gl=null))),j_(t,e),Vs(e),null;case 5:K5(e);var i=Nf(y0.current);if(n=e.type,t!==null&&e.stateNode!=null)xR(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Rt(166));return Vs(e),null}if(t=Nf(ru.current),e1(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Jl]=e,r[g0]=s,t=(e.mode&1)!==0,n){case"dialog":Zr("cancel",r),Zr("close",r);break;case"iframe":case"object":case"embed":Zr("load",r);break;case"video":case"audio":for(i=0;i<Rg.length;i++)Zr(Rg[i],r);break;case"source":Zr("error",r);break;case"img":case"image":case"link":Zr("error",r),Zr("load",r);break;case"details":Zr("toggle",r);break;case"input":$3(r,s),Zr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Zr("invalid",r);break;case"textarea":J3(r,s),Zr("invalid",r)}y_(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Qv(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Qv(r.textContent,a,t),i=["children",""+a]):o0.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Zr("scroll",r)}switch(n){case"input":jv(r),K3(r,s,!0);break;case"textarea":jv(r),Q3(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=e2)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=qL(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Jl]=e,t[g0]=r,yR(t,e,!1,!1),e.stateNode=t;e:{switch(o=x_(n,r),n){case"dialog":Zr("cancel",t),Zr("close",t),i=r;break;case"iframe":case"object":case"embed":Zr("load",t),i=r;break;case"video":case"audio":for(i=0;i<Rg.length;i++)Zr(Rg[i],t);i=r;break;case"source":Zr("error",t),i=r;break;case"img":case"image":case"link":Zr("error",t),Zr("load",t),i=r;break;case"details":Zr("toggle",t),i=r;break;case"input":$3(t,r),i=d_(t,r),Zr("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=wi({},r,{value:void 0}),Zr("invalid",t);break;case"textarea":J3(t,r),i=g_(t,r),Zr("invalid",t);break;default:i=r}y_(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?$L(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&YL(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&a0(t,l):typeof l=="number"&&a0(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(o0.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Zr("scroll",t):l!=null&&C5(t,s,l,o))}switch(n){case"input":jv(t),K3(t,r,!1);break;case"textarea":jv(t),Q3(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ch(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?zp(t,!!r.multiple,s,!1):r.defaultValue!=null&&zp(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=e2)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Vs(e),null;case 6:if(t&&e.stateNode!=null)wR(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Rt(166));if(n=Nf(y0.current),Nf(ru.current),e1(e)){if(r=e.stateNode,n=e.memoizedProps,r[Jl]=e,(s=r.nodeValue!==n)&&(t=oa,t!==null))switch(t.tag){case 3:Qv(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Qv(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Jl]=e,e.stateNode=r}return Vs(e),null;case 13:if(ei(pi),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(si&&ia!==null&&e.mode&1&&!(e.flags&128))OP(),sm(),e.flags|=98560,s=!1;else if(s=e1(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Rt(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Rt(317));s[Jl]=e}else sm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Vs(e),s=!1}else gl!==null&&(Q_(gl),gl=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||pi.current&1?is===0&&(is=3):cM())),e.updateQueue!==null&&(e.flags|=4),Vs(e),null);case 4:return am(),j_(t,e),t===null&&p0(e.stateNode.containerInfo),Vs(e),null;case 10:return q5(e.type._context),Vs(e),null;case 17:return Oo(e.type)&&t2(),Vs(e),null;case 19:if(ei(pi),s=e.memoizedState,s===null)return Vs(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ag(s,!1);else{if(is!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=l2(t),o!==null){for(e.flags|=128,ag(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Hr(pi,pi.current&1|2),e.child}t=t.sibling}s.tail!==null&&Di()>um&&(e.flags|=128,r=!0,ag(s,!1),e.lanes=4194304)}else{if(!r)if(t=l2(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ag(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!si)return Vs(e),null}else 2*Di()-s.renderingStartTime>um&&n!==1073741824&&(e.flags|=128,r=!0,ag(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Di(),e.sibling=null,n=pi.current,Hr(pi,r?n&1|2:n&1),e):(Vs(e),null);case 22:case 23:return uM(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?ra&1073741824&&(Vs(e),e.subtreeFlags&6&&(e.flags|=8192)):Vs(e),null;case 24:return null;case 25:return null}throw Error(Rt(156,e.tag))}function jD(t,e){switch(V5(e),e.tag){case 1:return Oo(e.type)&&t2(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return am(),ei(Do),ei(so),J5(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return K5(e),null;case 13:if(ei(pi),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Rt(340));sm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ei(pi),null;case 4:return am(),null;case 10:return q5(e.type._context),null;case 22:case 23:return uM(),null;case 24:return null;default:return null}}var r1=!1,Qs=!1,XD=typeof WeakSet=="function"?WeakSet:Set,Kt=null;function Np(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ai(t,e,r)}else n.current=null}function X_(t,e,n){try{n()}catch(r){Ai(t,e,r)}}var GE=!1;function qD(t,e){if(L_=Ky,t=MP(),H5(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,f=null;t:for(;;){for(var d;h!==n||i!==0&&h.nodeType!==3||(a=o+i),h!==s||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===t)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(P_={focusedElem:t,selectionRange:n},Ky=!1,Kt=e;Kt!==null;)if(e=Kt,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Kt=t;else for(;Kt!==null;){e=Kt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var x=v.memoizedProps,w=v.memoizedState,g=e.stateNode,S=g.getSnapshotBeforeUpdate(e.elementType===e.type?x:fl(e.type,x),w);g.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Rt(163))}}catch(T){Ai(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,Kt=t;break}Kt=e.return}return v=GE,GE=!1,v}function Gg(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&X_(e,n,s)}i=i.next}while(i!==r)}}function q2(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function q_(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function SR(t){var e=t.alternate;e!==null&&(t.alternate=null,SR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Jl],delete e[g0],delete e[I_],delete e[LD],delete e[PD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function _R(t){return t.tag===5||t.tag===3||t.tag===4}function VE(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||_R(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Y_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=e2));else if(r!==4&&(t=t.child,t!==null))for(Y_(t,e,n),t=t.sibling;t!==null;)Y_(t,e,n),t=t.sibling}function Z_(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Z_(t,e,n),t=t.sibling;t!==null;)Z_(t,e,n),t=t.sibling}var Rs=null,ml=!1;function Gc(t,e,n){for(n=n.child;n!==null;)bR(t,e,n),n=n.sibling}function bR(t,e,n){if(nu&&typeof nu.onCommitFiberUnmount=="function")try{nu.onCommitFiberUnmount(B2,n)}catch{}switch(n.tag){case 5:Qs||Np(n,e);case 6:var r=Rs,i=ml;Rs=null,Gc(t,e,n),Rs=r,ml=i,Rs!==null&&(ml?(t=Rs,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Rs.removeChild(n.stateNode));break;case 18:Rs!==null&&(ml?(t=Rs,n=n.stateNode,t.nodeType===8?xw(t.parentNode,n):t.nodeType===1&&xw(t,n),h0(t)):xw(Rs,n.stateNode));break;case 4:r=Rs,i=ml,Rs=n.stateNode.containerInfo,ml=!0,Gc(t,e,n),Rs=r,ml=i;break;case 0:case 11:case 14:case 15:if(!Qs&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&X_(n,e,o),i=i.next}while(i!==r)}Gc(t,e,n);break;case 1:if(!Qs&&(Np(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ai(n,e,a)}Gc(t,e,n);break;case 21:Gc(t,e,n);break;case 22:n.mode&1?(Qs=(r=Qs)||n.memoizedState!==null,Gc(t,e,n),Qs=r):Gc(t,e,n);break;default:Gc(t,e,n)}}function WE(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new XD),e.forEach(function(r){var i=nO.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function sl(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Rs=a.stateNode,ml=!1;break e;case 3:Rs=a.stateNode.containerInfo,ml=!0;break e;case 4:Rs=a.stateNode.containerInfo,ml=!0;break e}a=a.return}if(Rs===null)throw Error(Rt(160));bR(s,o,i),Rs=null,ml=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Ai(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)MR(e,t),e=e.sibling}function MR(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(sl(e,t),ql(t),r&4){try{Gg(3,t,t.return),q2(3,t)}catch(x){Ai(t,t.return,x)}try{Gg(5,t,t.return)}catch(x){Ai(t,t.return,x)}}break;case 1:sl(e,t),ql(t),r&512&&n!==null&&Np(n,n.return);break;case 5:if(sl(e,t),ql(t),r&512&&n!==null&&Np(n,n.return),t.flags&32){var i=t.stateNode;try{a0(i,"")}catch(x){Ai(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&jL(i,s),x_(a,o);var u=x_(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?$L(i,h):c==="dangerouslySetInnerHTML"?YL(i,h):c==="children"?a0(i,h):C5(i,c,h,u)}switch(a){case"input":p_(i,s);break;case"textarea":XL(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?zp(i,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?zp(i,!!s.multiple,s.defaultValue,!0):zp(i,!!s.multiple,s.multiple?[]:"",!1))}i[g0]=s}catch(x){Ai(t,t.return,x)}}break;case 6:if(sl(e,t),ql(t),r&4){if(t.stateNode===null)throw Error(Rt(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){Ai(t,t.return,x)}}break;case 3:if(sl(e,t),ql(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{h0(e.containerInfo)}catch(x){Ai(t,t.return,x)}break;case 4:sl(e,t),ql(t);break;case 13:sl(e,t),ql(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(aM=Di())),r&4&&WE(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Qs=(u=Qs)||c,sl(e,t),Qs=u):sl(e,t),ql(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Kt=t,c=t.child;c!==null;){for(h=Kt=c;Kt!==null;){switch(f=Kt,d=f.child,f.tag){case 0:case 11:case 14:case 15:Gg(4,f,f.return);break;case 1:Np(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(x){Ai(r,n,x)}}break;case 5:Np(f,f.return);break;case 22:if(f.memoizedState!==null){XE(h);continue}}d!==null?(d.return=f,Kt=d):XE(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ZL("display",o))}catch(x){Ai(t,t.return,x)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(x){Ai(t,t.return,x)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:sl(e,t),ql(t),r&4&&WE(t);break;case 21:break;default:sl(e,t),ql(t)}}function ql(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(_R(n)){var r=n;break e}n=n.return}throw Error(Rt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(a0(i,""),r.flags&=-33);var s=VE(t);Z_(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=VE(t);Y_(t,a,o);break;default:throw Error(Rt(161))}}catch(l){Ai(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function YD(t,e,n){Kt=t,ER(t)}function ER(t,e,n){for(var r=(t.mode&1)!==0;Kt!==null;){var i=Kt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||r1;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||Qs;a=r1;var u=Qs;if(r1=o,(Qs=l)&&!u)for(Kt=i;Kt!==null;)o=Kt,l=o.child,o.tag===22&&o.memoizedState!==null?qE(i):l!==null?(l.return=o,Kt=l):qE(i);for(;s!==null;)Kt=s,ER(s),s=s.sibling;Kt=i,r1=a,Qs=u}jE(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Kt=s):jE(t)}}function jE(t){for(;Kt!==null;){var e=Kt;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Qs||q2(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Qs)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:fl(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&CE(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}CE(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&h0(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Rt(163))}Qs||e.flags&512&&q_(e)}catch(f){Ai(e,e.return,f)}}if(e===t){Kt=null;break}if(n=e.sibling,n!==null){n.return=e.return,Kt=n;break}Kt=e.return}}function XE(t){for(;Kt!==null;){var e=Kt;if(e===t){Kt=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Kt=n;break}Kt=e.return}}function qE(t){for(;Kt!==null;){var e=Kt;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{q2(4,e)}catch(l){Ai(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Ai(e,i,l)}}var s=e.return;try{q_(e)}catch(l){Ai(e,s,l)}break;case 5:var o=e.return;try{q_(e)}catch(l){Ai(e,o,l)}}}catch(l){Ai(e,e.return,l)}if(e===t){Kt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Kt=a;break}Kt=e.return}}var ZD=Math.ceil,h2=hc.ReactCurrentDispatcher,sM=hc.ReactCurrentOwner,Ga=hc.ReactCurrentBatchConfig,mr=0,Ms=null,Xi=null,Is=0,ra=0,Fp=Bh(0),is=0,_0=null,Jf=0,Y2=0,oM=0,Vg=null,ko=null,aM=0,um=1/0,zu=null,f2=!1,$_=null,wh=null,i1=!1,uh=null,d2=0,Wg=0,K_=null,Ey=-1,Ay=0;function vo(){return mr&6?Di():Ey!==-1?Ey:Ey=Di()}function Sh(t){return t.mode&1?mr&2&&Is!==0?Is&-Is:kD.transition!==null?(Ay===0&&(Ay=lP()),Ay):(t=Rr,t!==0||(t=window.event,t=t===void 0?16:mP(t.type)),t):1}function Sl(t,e,n,r){if(50<Wg)throw Wg=0,K_=null,Error(Rt(185));K0(t,n,r),(!(mr&2)||t!==Ms)&&(t===Ms&&(!(mr&2)&&(Y2|=n),is===4&&sh(t,Is)),Uo(t,r),n===1&&mr===0&&!(e.mode&1)&&(um=Di()+500,W2&&zh()))}function Uo(t,e){var n=t.callbackNode;k6(t,e);var r=$y(t,t===Ms?Is:0);if(r===0)n!==null&&nE(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&nE(n),e===1)t.tag===0?RD(YE.bind(null,t)):NP(YE.bind(null,t)),TD(function(){!(mr&6)&&zh()}),n=null;else{switch(uP(r)){case 1:n=I5;break;case 4:n=oP;break;case 16:n=Zy;break;case 536870912:n=aP;break;default:n=Zy}n=IR(n,AR.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function AR(t,e){if(Ey=-1,Ay=0,mr&6)throw Error(Rt(327));var n=t.callbackNode;if(jp()&&t.callbackNode!==n)return null;var r=$y(t,t===Ms?Is:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=p2(t,r);else{e=r;var i=mr;mr|=2;var s=CR();(Ms!==t||Is!==e)&&(zu=null,um=Di()+500,Gf(t,e));do try{JD();break}catch(a){TR(t,a)}while(1);X5(),h2.current=s,mr=i,Xi!==null?e=0:(Ms=null,Is=0,e=is)}if(e!==0){if(e===2&&(i=M_(t),i!==0&&(r=i,e=J_(t,i))),e===1)throw n=_0,Gf(t,0),sh(t,r),Uo(t,Di()),n;if(e===6)sh(t,r);else{if(i=t.current.alternate,!(r&30)&&!$D(i)&&(e=p2(t,r),e===2&&(s=M_(t),s!==0&&(r=s,e=J_(t,s))),e===1))throw n=_0,Gf(t,0),sh(t,r),Uo(t,Di()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Rt(345));case 2:Mf(t,ko,zu);break;case 3:if(sh(t,r),(r&130023424)===r&&(e=aM+500-Di(),10<e)){if($y(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){vo(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=k_(Mf.bind(null,t,ko,zu),e);break}Mf(t,ko,zu);break;case 4:if(sh(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-wl(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Di()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZD(r/1960))-r,10<r){t.timeoutHandle=k_(Mf.bind(null,t,ko,zu),r);break}Mf(t,ko,zu);break;case 5:Mf(t,ko,zu);break;default:throw Error(Rt(329))}}}return Uo(t,Di()),t.callbackNode===n?AR.bind(null,t):null}function J_(t,e){var n=Vg;return t.current.memoizedState.isDehydrated&&(Gf(t,e).flags|=256),t=p2(t,e),t!==2&&(e=ko,ko=n,e!==null&&Q_(e)),t}function Q_(t){ko===null?ko=t:ko.push.apply(ko,t)}function $D(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!bl(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function sh(t,e){for(e&=~oM,e&=~Y2,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-wl(e),r=1<<n;t[n]=-1,e&=~r}}function YE(t){if(mr&6)throw Error(Rt(327));jp();var e=$y(t,0);if(!(e&1))return Uo(t,Di()),null;var n=p2(t,e);if(t.tag!==0&&n===2){var r=M_(t);r!==0&&(e=r,n=J_(t,r))}if(n===1)throw n=_0,Gf(t,0),sh(t,e),Uo(t,Di()),n;if(n===6)throw Error(Rt(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Mf(t,ko,zu),Uo(t,Di()),null}function lM(t,e){var n=mr;mr|=1;try{return t(e)}finally{mr=n,mr===0&&(um=Di()+500,W2&&zh())}}function Qf(t){uh!==null&&uh.tag===0&&!(mr&6)&&jp();var e=mr;mr|=1;var n=Ga.transition,r=Rr;try{if(Ga.transition=null,Rr=1,t)return t()}finally{Rr=r,Ga.transition=n,mr=e,!(mr&6)&&zh()}}function uM(){ra=Fp.current,ei(Fp)}function Gf(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,AD(n)),Xi!==null)for(n=Xi.return;n!==null;){var r=n;switch(V5(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&t2();break;case 3:am(),ei(Do),ei(so),J5();break;case 5:K5(r);break;case 4:am();break;case 13:ei(pi);break;case 19:ei(pi);break;case 10:q5(r.type._context);break;case 22:case 23:uM()}n=n.return}if(Ms=t,Xi=t=_h(t.current,null),Is=ra=e,is=0,_0=null,oM=Y2=Jf=0,ko=Vg=null,If!==null){for(e=0;e<If.length;e++)if(n=If[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}If=null}return t}function TR(t,e){do{var n=Xi;try{if(X5(),_y.current=c2,u2){for(var r=xi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}u2=!1}if(Kf=0,Ss=rs=xi=null,Hg=!1,x0=0,sM.current=null,n===null||n.return===null){is=1,_0=e,Xi=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Is,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=FE(o);if(d!==null){d.flags&=-257,DE(d,o,a,s,e),d.mode&1&&NE(s,u,e),e=d,l=u;var v=e.updateQueue;if(v===null){var x=new Set;x.add(l),e.updateQueue=x}else v.add(l);break e}else{if(!(e&1)){NE(s,u,e),cM();break e}l=Error(Rt(426))}}else if(si&&a.mode&1){var w=FE(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),DE(w,o,a,s,e),W5(lm(l,a));break e}}s=l=lm(l,a),is!==4&&(is=2),Vg===null?Vg=[s]:Vg.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=cR(s,l,e);TE(s,g);break e;case 1:a=l;var S=s.type,_=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(wh===null||!wh.has(_)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=hR(s,a,e);TE(s,T);break e}}s=s.return}while(s!==null)}PR(n)}catch(L){e=L,Xi===n&&n!==null&&(Xi=n=n.return);continue}break}while(1)}function CR(){var t=h2.current;return h2.current=c2,t===null?c2:t}function cM(){(is===0||is===3||is===2)&&(is=4),Ms===null||!(Jf&268435455)&&!(Y2&268435455)||sh(Ms,Is)}function p2(t,e){var n=mr;mr|=2;var r=CR();(Ms!==t||Is!==e)&&(zu=null,Gf(t,e));do try{KD();break}catch(i){TR(t,i)}while(1);if(X5(),mr=n,h2.current=r,Xi!==null)throw Error(Rt(261));return Ms=null,Is=0,is}function KD(){for(;Xi!==null;)LR(Xi)}function JD(){for(;Xi!==null&&!b6();)LR(Xi)}function LR(t){var e=kR(t.alternate,t,ra);t.memoizedProps=t.pendingProps,e===null?PR(t):Xi=e,sM.current=null}function PR(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=jD(n,e),n!==null){n.flags&=32767,Xi=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{is=6,Xi=null;return}}else if(n=WD(n,e,ra),n!==null){Xi=n;return}if(e=e.sibling,e!==null){Xi=e;return}Xi=e=t}while(e!==null);is===0&&(is=5)}function Mf(t,e,n){var r=Rr,i=Ga.transition;try{Ga.transition=null,Rr=1,QD(t,e,n,r)}finally{Ga.transition=i,Rr=r}return null}function QD(t,e,n,r){do jp();while(uh!==null);if(mr&6)throw Error(Rt(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Rt(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(I6(t,s),t===Ms&&(Xi=Ms=null,Is=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||i1||(i1=!0,IR(Zy,function(){return jp(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ga.transition,Ga.transition=null;var o=Rr;Rr=1;var a=mr;mr|=4,sM.current=null,qD(t,n),MR(n,t),xD(P_),Ky=!!L_,P_=L_=null,t.current=n,YD(n),M6(),mr=a,Rr=o,Ga.transition=s}else t.current=n;if(i1&&(i1=!1,uh=t,d2=i),s=t.pendingLanes,s===0&&(wh=null),T6(n.stateNode),Uo(t,Di()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(f2)throw f2=!1,t=$_,$_=null,t;return d2&1&&t.tag!==0&&jp(),s=t.pendingLanes,s&1?t===K_?Wg++:(Wg=0,K_=t):Wg=0,zh(),null}function jp(){if(uh!==null){var t=uP(d2),e=Ga.transition,n=Rr;try{if(Ga.transition=null,Rr=16>t?16:t,uh===null)var r=!1;else{if(t=uh,uh=null,d2=0,mr&6)throw Error(Rt(331));var i=mr;for(mr|=4,Kt=t.current;Kt!==null;){var s=Kt,o=s.child;if(Kt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Kt=u;Kt!==null;){var c=Kt;switch(c.tag){case 0:case 11:case 15:Gg(8,c,s)}var h=c.child;if(h!==null)h.return=c,Kt=h;else for(;Kt!==null;){c=Kt;var f=c.sibling,d=c.return;if(SR(c),c===u){Kt=null;break}if(f!==null){f.return=d,Kt=f;break}Kt=d}}}var v=s.alternate;if(v!==null){var x=v.child;if(x!==null){v.child=null;do{var w=x.sibling;x.sibling=null,x=w}while(x!==null)}}Kt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Kt=o;else e:for(;Kt!==null;){if(s=Kt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Gg(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,Kt=g;break e}Kt=s.return}}var S=t.current;for(Kt=S;Kt!==null;){o=Kt;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,Kt=_;else e:for(o=S;Kt!==null;){if(a=Kt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:q2(9,a)}}catch(L){Ai(a,a.return,L)}if(a===o){Kt=null;break e}var T=a.sibling;if(T!==null){T.return=a.return,Kt=T;break e}Kt=a.return}}if(mr=i,zh(),nu&&typeof nu.onPostCommitFiberRoot=="function")try{nu.onPostCommitFiberRoot(B2,t)}catch{}r=!0}return r}finally{Rr=n,Ga.transition=e}}return!1}function ZE(t,e,n){e=lm(n,e),e=cR(t,e,1),t=xh(t,e,1),e=vo(),t!==null&&(K0(t,1,e),Uo(t,e))}function Ai(t,e,n){if(t.tag===3)ZE(t,t,n);else for(;e!==null;){if(e.tag===3){ZE(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wh===null||!wh.has(r))){t=lm(n,t),t=hR(e,t,1),e=xh(e,t,1),t=vo(),e!==null&&(K0(e,1,t),Uo(e,t));break}}e=e.return}}function eO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=vo(),t.pingedLanes|=t.suspendedLanes&n,Ms===t&&(Is&n)===n&&(is===4||is===3&&(Is&130023424)===Is&&500>Di()-aM?Gf(t,0):oM|=n),Uo(t,e)}function RR(t,e){e===0&&(t.mode&1?(e=Yv,Yv<<=1,!(Yv&130023424)&&(Yv=4194304)):e=1);var n=vo();t=sc(t,e),t!==null&&(K0(t,e,n),Uo(t,n))}function tO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),RR(t,n)}function nO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Rt(314))}r!==null&&r.delete(e),RR(t,n)}var kR;kR=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Do.current)Fo=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Fo=!1,VD(t,e,n);Fo=!!(t.flags&131072)}else Fo=!1,si&&e.flags&1048576&&FP(e,i2,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;My(t,e),t=e.pendingProps;var i=im(e,so.current);Wp(e,n),i=eM(null,e,r,t,i,n);var s=tM();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Oo(r)?(s=!0,n2(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Z5(e),i.updater=j2,e.stateNode=i,i._reactInternals=e,B_(e,r,t,n),e=G_(null,e,r,!0,s,n)):(e.tag=0,si&&s&&G5(e),po(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(My(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=iO(r),t=fl(r,t),i){case 0:e=H_(null,e,r,t,n);break e;case 1:e=BE(null,e,r,t,n);break e;case 11:e=OE(null,e,r,t,n);break e;case 14:e=UE(null,e,r,fl(r.type,t),n);break e}throw Error(Rt(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fl(r,i),H_(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fl(r,i),BE(t,e,r,i,n);case 3:e:{if(mR(e),t===null)throw Error(Rt(387));r=e.pendingProps,s=e.memoizedState,i=s.element,BP(t,e),a2(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=lm(Error(Rt(423)),e),e=zE(t,e,r,n,i);break e}else if(r!==i){i=lm(Error(Rt(424)),e),e=zE(t,e,r,n,i);break e}else for(ia=yh(e.stateNode.containerInfo.firstChild),oa=e,si=!0,gl=null,n=VP(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(sm(),r===i){e=oc(t,e,n);break e}po(t,e,r,n)}e=e.child}return e;case 5:return WP(e),t===null&&D_(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,R_(r,i)?o=null:s!==null&&R_(r,s)&&(e.flags|=32),pR(t,e),po(t,e,o,n),e.child;case 6:return t===null&&D_(e),null;case 13:return gR(t,e,n);case 4:return $5(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=om(e,null,r,n):po(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fl(r,i),OE(t,e,r,i,n);case 7:return po(t,e,e.pendingProps,n),e.child;case 8:return po(t,e,e.pendingProps.children,n),e.child;case 12:return po(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Hr(s2,r._currentValue),r._currentValue=o,s!==null)if(bl(s.value,o)){if(s.children===i.children&&!Do.current){e=oc(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=ec(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),O_(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Rt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),O_(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}po(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Wp(e,n),i=Wa(i),r=r(i),e.flags|=1,po(t,e,r,n),e.child;case 14:return r=e.type,i=fl(r,e.pendingProps),i=fl(r.type,i),UE(t,e,r,i,n);case 15:return fR(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:fl(r,i),My(t,e),e.tag=1,Oo(r)?(t=!0,n2(e)):t=!1,Wp(e,n),HP(e,r,i),B_(e,r,i,n),G_(null,e,r,!0,t,n);case 19:return vR(t,e,n);case 22:return dR(t,e,n)}throw Error(Rt(156,e.tag))};function IR(t,e){return sP(t,e)}function rO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function za(t,e,n,r){return new rO(t,e,n,r)}function hM(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iO(t){if(typeof t=="function")return hM(t)?1:0;if(t!=null){if(t=t.$$typeof,t===P5)return 11;if(t===R5)return 14}return 2}function _h(t,e){var n=t.alternate;return n===null?(n=za(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Ty(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")hM(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ep:return Vf(n.children,i,s,e);case L5:o=8,i|=8;break;case u_:return t=za(12,n,e,i|2),t.elementType=u_,t.lanes=s,t;case c_:return t=za(13,n,e,i),t.elementType=c_,t.lanes=s,t;case h_:return t=za(19,n,e,i),t.elementType=h_,t.lanes=s,t;case GL:return Z2(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case zL:o=10;break e;case HL:o=9;break e;case P5:o=11;break e;case R5:o=14;break e;case th:o=16,r=null;break e}throw Error(Rt(130,t==null?t:typeof t,""))}return e=za(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Vf(t,e,n,r){return t=za(7,t,r,e),t.lanes=n,t}function Z2(t,e,n,r){return t=za(22,t,r,e),t.elementType=GL,t.lanes=n,t.stateNode={isHidden:!1},t}function Tw(t,e,n){return t=za(6,t,null,e),t.lanes=n,t}function Cw(t,e,n){return e=za(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sO(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=lw(0),this.expirationTimes=lw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lw(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function fM(t,e,n,r,i,s,o,a,l){return t=new sO(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=za(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Z5(s),t}function oO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mp,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function NR(t){if(!t)return Lh;t=t._reactInternals;e:{if(cd(t)!==t||t.tag!==1)throw Error(Rt(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Oo(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Rt(171))}if(t.tag===1){var n=t.type;if(Oo(n))return IP(t,n,e)}return e}function FR(t,e,n,r,i,s,o,a,l){return t=fM(n,r,!0,t,i,s,o,a,l),t.context=NR(null),n=t.current,r=vo(),i=Sh(n),s=ec(r,i),s.callback=e??null,xh(n,s,i),t.current.lanes=i,K0(t,i,r),Uo(t,r),t}function $2(t,e,n,r){var i=e.current,s=vo(),o=Sh(i);return n=NR(n),e.context===null?e.context=n:e.pendingContext=n,e=ec(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=xh(i,e,o),t!==null&&(Sl(t,i,o,s),Sy(t,i,o)),o}function m2(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function $E(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function dM(t,e){$E(t,e),(t=t.alternate)&&$E(t,e)}function aO(){return null}var DR=typeof reportError=="function"?reportError:function(t){console.error(t)};function pM(t){this._internalRoot=t}K2.prototype.render=pM.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Rt(409));$2(t,e,null,null)};K2.prototype.unmount=pM.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Qf(function(){$2(null,t,null,null)}),e[ic]=null}};function K2(t){this._internalRoot=t}K2.prototype.unstable_scheduleHydration=function(t){if(t){var e=fP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ih.length&&e!==0&&e<ih[n].priority;n++);ih.splice(n,0,t),n===0&&pP(t)}};function mM(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function J2(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function KE(){}function lO(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=m2(o);s.call(u)}}var o=FR(e,r,t,0,null,!1,!1,"",KE);return t._reactRootContainer=o,t[ic]=o.current,p0(t.nodeType===8?t.parentNode:t),Qf(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=m2(l);a.call(u)}}var l=fM(t,0,!1,null,null,!1,!1,"",KE);return t._reactRootContainer=l,t[ic]=l.current,p0(t.nodeType===8?t.parentNode:t),Qf(function(){$2(e,l,n,r)}),l}function Q2(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=m2(o);a.call(l)}}$2(e,o,t,i)}else o=lO(n,e,t,i,r);return m2(o)}cP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Pg(e.pendingLanes);n!==0&&(N5(e,n|1),Uo(e,Di()),!(mr&6)&&(um=Di()+500,zh()))}break;case 13:Qf(function(){var r=sc(t,1);if(r!==null){var i=vo();Sl(r,t,1,i)}}),dM(t,1)}};F5=function(t){if(t.tag===13){var e=sc(t,134217728);if(e!==null){var n=vo();Sl(e,t,134217728,n)}dM(t,134217728)}};hP=function(t){if(t.tag===13){var e=Sh(t),n=sc(t,e);if(n!==null){var r=vo();Sl(n,t,e,r)}dM(t,e)}};fP=function(){return Rr};dP=function(t,e){var n=Rr;try{return Rr=t,e()}finally{Rr=n}};S_=function(t,e,n){switch(e){case"input":if(p_(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=V2(r);if(!i)throw Error(Rt(90));WL(r),p_(r,i)}}}break;case"textarea":XL(t,n);break;case"select":e=n.value,e!=null&&zp(t,!!n.multiple,e,!1)}};QL=lM;eP=Qf;var uO={usingClientEntryPoint:!1,Events:[Q0,Lp,V2,KL,JL,lM]},lg={findFiberByHostInstance:kf,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},cO={bundleType:lg.bundleType,version:lg.version,rendererPackageName:lg.rendererPackageName,rendererConfig:lg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:hc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=rP(t),t===null?null:t.stateNode},findFiberByHostInstance:lg.findFiberByHostInstance||aO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var s1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!s1.isDisabled&&s1.supportsFiber)try{B2=s1.inject(cO),nu=s1}catch{}}ca.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uO;ca.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mM(e))throw Error(Rt(200));return oO(t,e,null,n)};ca.createRoot=function(t,e){if(!mM(t))throw Error(Rt(299));var n=!1,r="",i=DR;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=fM(t,1,!1,null,null,n,!1,r,i),t[ic]=e.current,p0(t.nodeType===8?t.parentNode:t),new pM(e)};ca.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Rt(188)):(t=Object.keys(t).join(","),Error(Rt(268,t)));return t=rP(e),t=t===null?null:t.stateNode,t};ca.flushSync=function(t){return Qf(t)};ca.hydrate=function(t,e,n){if(!J2(e))throw Error(Rt(200));return Q2(null,t,e,!0,n)};ca.hydrateRoot=function(t,e,n){if(!mM(t))throw Error(Rt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=DR;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=FR(e,null,t,1,n??null,i,!1,s,o),t[ic]=e.current,p0(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new K2(e)};ca.render=function(t,e,n){if(!J2(e))throw Error(Rt(200));return Q2(null,t,e,!1,n)};ca.unmountComponentAtNode=function(t){if(!J2(t))throw Error(Rt(40));return t._reactRootContainer?(Qf(function(){Q2(null,null,t,!1,function(){t._reactRootContainer=null,t[ic]=null})}),!0):!1};ca.unstable_batchedUpdates=lM;ca.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!J2(n))throw Error(Rt(200));if(t==null||t._reactInternals===void 0)throw Error(Rt(38));return Q2(t,e,n,!1,r)};ca.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=ca})(a6);const hO=O2(o_);function fO(){return Tt("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"2rem",color:"#1E293B"},children:[Tt("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",marginBottom:"4rem",textAlign:"center"},children:[Me("h1",{style:{fontSize:"3rem",fontWeight:"800",marginBottom:"1rem",background:"linear-gradient(90deg, #2563EB, #0EA5E9)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent"},children:"Parametric CAD Services"}),Me("p",{style:{fontSize:"1.25rem",maxWidth:"800px",lineHeight:"1.7",color:"#475569"},children:"Professional 3D modeling, technical drawings, and high-quality rendering services for engineering and manufacturing needs."}),Tt("div",{style:{marginTop:"2rem",display:"flex",gap:"1rem"},children:[Tt("button",{onClick:()=>window.dispatchEvent(new CustomEvent("switchTab",{detail:"app"})),style:{backgroundColor:"#1E293B",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",transition:"background-color 0.2s"},children:[Tt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Me("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),Me("circle",{cx:"12",cy:"12",r:"3"})]}),"View Demo Models"]}),Me("button",{onClick:()=>{const t=document.getElementById("contact");t?t.scrollIntoView({behavior:"smooth"}):window.dispatchEvent(new CustomEvent("switchTab",{detail:"about"}))},style:{backgroundColor:"white",color:"#1E293B",border:"1px solid #CBD5E1",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",transition:"background-color 0.2s"},children:"Contact Me"}),Me("a",{href:"https://calendly.com/damjanbab/30min",target:"_blank",rel:"noopener noreferrer",style:{backgroundColor:"#0069ff",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",textDecoration:"none",display:"inline-block",textAlign:"center"},children:"Schedule a Meeting"})]})]}),Tt("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"2rem",marginBottom:"4rem"},children:[Me(Lw,{icon:Me("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:Me("path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z"})}),title:"Parametric 3D Modeling",description:"Custom 3D models created with a parametric approach, allowing for quick adjustments based on changing requirements. Real-time updates and development monitoring available."}),Me(Lw,{icon:Tt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Me("path",{d:"M3 3v18h18"}),Me("path",{d:"m3 9 4-4 5 5 4-4 5 5"})]}),title:"Technical Drawings",description:"Automated generation of manufacturing-ready technical drawings in any format you need. Includes orthographic projections, dimensions, and manufacturing specifications."}),Me(Lw,{icon:Tt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Me("circle",{cx:"12",cy:"12",r:"10"}),Me("path",{d:"M12 16a4 4 0 1 0 0-8 4 4 0 0 0 0 8z"}),Me("path",{d:"M12 2v2"}),Me("path",{d:"M12 20v2"}),Me("path",{d:"m4.93 4.93 1.41 1.41"}),Me("path",{d:"m17.66 17.66 1.41 1.41"}),Me("path",{d:"M2 12h2"}),Me("path",{d:"M20 12h2"}),Me("path",{d:"m6.34 17.66-1.41 1.41"}),Me("path",{d:"m19.07 4.93-1.41 1.41"})]}),title:"High-Quality Rendering",description:"Professional visualizations of your models through high-quality images and videos with customizable camera angles, lighting, and environments."})]}),Tt("div",{style:{backgroundColor:"#F1F5F9",padding:"2rem",borderRadius:"0.5rem",marginBottom:"4rem"},children:[Me("h2",{style:{marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"700"},children:"How It Works"}),Tt("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[Tt("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[Me("div",{style:{backgroundColor:"#2563EB",color:"white",width:"2rem",height:"2rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"1"}),Tt("div",{children:[Me("h3",{style:{marginBottom:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:"Define Requirements"}),Me("p",{style:{color:"#475569"},children:"We'll discuss your project needs, including dimensions, functionality, and aesthetic preferences to establish clear parameters for your model."})]})]}),Tt("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[Me("div",{style:{backgroundColor:"#2563EB",color:"white",width:"2rem",height:"2rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"2"}),Tt("div",{children:[Me("h3",{style:{marginBottom:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:"Real-Time Development"}),Me("p",{style:{color:"#475569"},children:"Access a password-protected workspace where you can monitor progress and provide feedback as your model is being developed."})]})]}),Tt("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[Me("div",{style:{backgroundColor:"#2563EB",color:"white",width:"2rem",height:"2rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"3"}),Tt("div",{children:[Me("h3",{style:{marginBottom:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:"Parameter Refinement"}),Me("p",{style:{color:"#475569"},children:"Request adjustments to your model parameters at any time. Thanks to the parametric approach, most changes can be implemented instantly."})]})]}),Tt("div",{style:{display:"flex",alignItems:"flex-start",gap:"1rem"},children:[Me("div",{style:{backgroundColor:"#2563EB",color:"white",width:"2rem",height:"2rem",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:"4"}),Tt("div",{children:[Me("h3",{style:{marginBottom:"0.5rem",fontSize:"1.125rem",fontWeight:"600"},children:"Final Delivery"}),Me("p",{style:{color:"#475569"},children:"Receive your completed 3D models, technical drawings, and renderings in the formats you need for manufacturing or presentation."})]})]})]})]}),Tt("div",{style:{marginBottom:"4rem"},children:[Me("h2",{style:{marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"700"},children:"Technical Capabilities"}),Tt("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"1.5rem"},children:[Me(Vd,{title:"Assembly Constructions",description:"Automated assembly constructions with options for exploded views or step-by-step assembly instructions with labeled components."}),Me(Vd,{title:"Parametric Design",description:"Dynamic models that update instantly when dimensions or parameters change, allowing for rapid iteration and refinement."}),Me(Vd,{title:"Engineering Specifications",description:"Detailed technical drawings with precise measurements, tolerances, and manufacturing notes for production."}),Me(Vd,{title:"Real-Time Collaboration",description:"Secure access to your model's development progress, allowing for immediate feedback and adjustments."}),Me(Vd,{title:"Custom Rendering",description:"Photorealistic visualizations with adjustable lighting, materials, camera angles, and environments."}),Me(Vd,{title:"Cost-Effective Solutions",description:"Built with open-source technologies to offer professional services at competitive rates."})]})]}),Tt("div",{style:{textAlign:"center",marginBottom:"2rem",padding:"3rem",backgroundColor:"#1E293B",borderRadius:"0.5rem",color:"white"},children:[Me("h2",{style:{fontSize:"1.875rem",fontWeight:"700",marginBottom:"1rem"},children:"Ready to bring your design to life?"}),Me("p",{style:{color:"#CBD5E1",marginBottom:"2rem",maxWidth:"800px",margin:"0 auto 2rem"},children:"Explore the demo models to see the capabilities, then get in touch to discuss your specific project needs and requirements."}),Tt("div",{style:{display:"flex",flexWrap:"wrap",gap:"1.5rem",justifyContent:"center",marginBottom:"2rem"},children:[Tt("a",{href:"mailto:damjanbab@icloud.com",style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"#2563EB",color:"white",border:"none",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",textDecoration:"none",boxShadow:"0 4px 6px rgba(37, 99, 235, 0.25)",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:t=>{t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 6px 8px rgba(37, 99, 235, 0.3)"},onMouseOut:t=>{t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="0 4px 6px rgba(37, 99, 235, 0.25)"},children:[Tt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Me("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),Me("polyline",{points:"22,6 12,13 2,6"})]}),"Email Me"]}),Tt("a",{href:"https://github.com/haloedDepth",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"transparent",color:"white",border:"1px solid #CBD5E1",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",textDecoration:"none",transition:"background-color 0.2s"},onMouseOver:t=>{t.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseOut:t=>{t.currentTarget.style.backgroundColor="transparent"},children:[Me("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:Me("path",{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"})}),"GitHub"]}),Tt("a",{href:"https://www.linkedin.com/in/damjanbabic/",target:"_blank",rel:"noopener noreferrer",style:{display:"flex",alignItems:"center",gap:"0.5rem",backgroundColor:"transparent",color:"white",border:"1px solid #CBD5E1",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",textDecoration:"none",transition:"background-color 0.2s"},onMouseOver:t=>{t.currentTarget.style.backgroundColor="rgba(255, 255, 255, 0.1)"},onMouseOut:t=>{t.currentTarget.style.backgroundColor="transparent"},children:[Tt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Me("path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"}),Me("rect",{x:"2",y:"9",width:"4",height:"12"}),Me("circle",{cx:"4",cy:"4",r:"2"})]}),"LinkedIn"]})]}),Me("button",{onClick:()=>window.dispatchEvent(new CustomEvent("switchTab",{detail:"app"})),style:{backgroundColor:"#0EA5E9",color:"white",border:"none",padding:"0.75rem 2rem",borderRadius:"0.375rem",fontWeight:"600",cursor:"pointer",boxShadow:"0 4px 6px rgba(14, 165, 233, 0.25)",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:t=>{t.currentTarget.style.transform="translateY(-2px)",t.currentTarget.style.boxShadow="0 6px 8px rgba(14, 165, 233, 0.3)"},onMouseOut:t=>{t.currentTarget.style.transform="translateY(0)",t.currentTarget.style.boxShadow="0 4px 6px rgba(14, 165, 233, 0.25)"},children:"Try Demo Models"})]})]})}function Lw({icon:t,title:e,description:n}){return Tt("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)",border:"1px solid #E2E8F0",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:r=>{r.currentTarget.style.transform="translateY(-4px)",r.currentTarget.style.boxShadow="0 10px 15px rgba(0, 0, 0, 0.05)"},onMouseOut:r=>{r.currentTarget.style.transform="translateY(0)",r.currentTarget.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.1)"},children:[Me("div",{style:{color:"#2563EB",marginBottom:"1rem",display:"inline-flex",padding:"0.75rem",backgroundColor:"#EFF6FF",borderRadius:"0.5rem"},children:t}),Me("h3",{style:{fontSize:"1.25rem",fontWeight:"700",marginBottom:"0.75rem"},children:e}),Me("p",{style:{color:"#475569",lineHeight:"1.5"},children:n})]})}function Vd({title:t,description:e}){return Tt("div",{style:{padding:"1.25rem",borderRadius:"0.5rem",backgroundColor:"#F8FAFC",border:"1px solid #E2E8F0"},children:[Me("h3",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"0.75rem",color:"#1E293B"},children:t}),Me("p",{style:{color:"#475569",fontSize:"0.9375rem",lineHeight:"1.5"},children:e})]})}/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const OR=Symbol("Comlink.proxy"),dO=Symbol("Comlink.endpoint"),pO=Symbol("Comlink.releaseProxy"),Pw=Symbol("Comlink.finalizer"),Cy=Symbol("Comlink.thrown"),UR=t=>typeof t=="object"&&t!==null||typeof t=="function",mO={canHandle:t=>UR(t)&&t[OR],serialize(t){const{port1:e,port2:n}=new MessageChannel;return zR(t,e),[n,[n]]},deserialize(t){return t.start(),GR(t)}},gO={canHandle:t=>UR(t)&&Cy in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},BR=new Map([["proxy",mO],["throw",gO]]);function vO(t,e){for(const n of t)if(e===n||n==="*"||n instanceof RegExp&&n.test(e))return!0;return!1}function zR(t,e=globalThis,n=["*"]){e.addEventListener("message",function r(i){if(!i||!i.data)return;if(!vO(n,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:s,type:o,path:a}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(Tf);let u;try{const c=a.slice(0,-1).reduce((f,d)=>f[d],t),h=a.reduce((f,d)=>f[d],t);switch(o){case"GET":u=h;break;case"SET":c[a.slice(-1)[0]]=Tf(i.data.value),u=!0;break;case"APPLY":u=h.apply(c,l);break;case"CONSTRUCT":{const f=new h(...l);u=bO(f)}break;case"ENDPOINT":{const{port1:f,port2:d}=new MessageChannel;zR(t,d),u=_O(f,[f])}break;case"RELEASE":u=void 0;break;default:return}}catch(c){u={value:c,[Cy]:0}}Promise.resolve(u).catch(c=>({value:c,[Cy]:0})).then(c=>{const[h,f]=y2(c);e.postMessage(Object.assign(Object.assign({},h),{id:s}),f),o==="RELEASE"&&(e.removeEventListener("message",r),HR(e),Pw in t&&typeof t[Pw]=="function"&&t[Pw]())}).catch(c=>{const[h,f]=y2({value:new TypeError("Unserializable return value"),[Cy]:0});e.postMessage(Object.assign(Object.assign({},h),{id:s}),f)})}),e.start&&e.start()}function yO(t){return t.constructor.name==="MessagePort"}function HR(t){yO(t)&&t.close()}function GR(t,e){const n=new Map;return t.addEventListener("message",function(i){const{data:s}=i;if(!s||!s.id)return;const o=n.get(s.id);if(o)try{o(s)}finally{n.delete(s.id)}}),eb(t,n,[],e)}function o1(t){if(t)throw new Error("Proxy has been released and is not useable")}function VR(t){return xp(t,new Map,{type:"RELEASE"}).then(()=>{HR(t)})}const g2=new WeakMap,v2="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(g2.get(t)||0)-1;g2.set(t,e),e===0&&VR(t)});function xO(t,e){const n=(g2.get(e)||0)+1;g2.set(e,n),v2&&v2.register(t,e,t)}function wO(t){v2&&v2.unregister(t)}function eb(t,e,n=[],r=function(){}){let i=!1;const s=new Proxy(r,{get(o,a){if(o1(i),a===pO)return()=>{wO(s),VR(t),e.clear(),i=!0};if(a==="then"){if(n.length===0)return{then:()=>s};const l=xp(t,e,{type:"GET",path:n.map(u=>u.toString())}).then(Tf);return l.then.bind(l)}return eb(t,e,[...n,a])},set(o,a,l){o1(i);const[u,c]=y2(l);return xp(t,e,{type:"SET",path:[...n,a].map(h=>h.toString()),value:u},c).then(Tf)},apply(o,a,l){o1(i);const u=n[n.length-1];if(u===dO)return xp(t,e,{type:"ENDPOINT"}).then(Tf);if(u==="bind")return eb(t,e,n.slice(0,-1));const[c,h]=JE(l);return xp(t,e,{type:"APPLY",path:n.map(f=>f.toString()),argumentList:c},h).then(Tf)},construct(o,a){o1(i);const[l,u]=JE(a);return xp(t,e,{type:"CONSTRUCT",path:n.map(c=>c.toString()),argumentList:l},u).then(Tf)}});return xO(s,t),s}function SO(t){return Array.prototype.concat.apply([],t)}function JE(t){const e=t.map(y2);return[e.map(n=>n[0]),SO(e.map(n=>n[1]))]}const WR=new WeakMap;function _O(t,e){return WR.set(t,e),t}function bO(t){return Object.assign(t,{[OR]:!0})}function y2(t){for(const[e,n]of BR)if(n.canHandle(t)){const[r,i]=n.serialize(t);return[{type:"HANDLER",name:e,value:r},i]}return[{type:"RAW",value:t},WR.get(t)||[]]}function Tf(t){switch(t.type){case"HANDLER":return BR.get(t.name).deserialize(t.value);case"RAW":return t.value}}function xp(t,e,n,r){return new Promise(i=>{const s=MO();e.set(s,i),t.start&&t.start(),t.postMessage(Object.assign({id:s},n),r)})}function MO(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}const EO="damjan22";function AO(t,e){const n=Be.useCallback((i,s)=>!!(s!=null&&s.requiresPassword&&!t[i]),[t]),r=Be.useCallback((i,s)=>s===EO?(e(o=>({...o,[i]:!0})),{success:!0}):{success:!1,error:"Incorrect password"},[e]);return{isPasswordRequired:n,verifyPasswordAttempt:r}}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const tv="155",$l={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Vu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},jR=0,tb=1,XR=2,TO=3,qR=0,ex=1,jg=2,dl=3,ac=0,yo=1,xl=2,CO=2,tc=0,Wf=1,nb=2,rb=3,ib=4,YR=5,Cf=100,ZR=101,$R=102,sb=103,ob=104,KR=200,JR=201,QR=202,e4=203,gM=204,vM=205,t4=206,n4=207,r4=208,i4=209,s4=210,o4=0,a4=1,l4=2,x2=3,u4=4,c4=5,h4=6,f4=7,nv=0,d4=1,p4=2,iu=0,m4=1,g4=2,v4=3,yM=4,y4=5,tx=300,cu=301,Ph=302,cm=303,b0=304,Em=306,M0=1e3,to=1001,E0=1002,Fi=1003,w2=1004,LO=1004,Xg=1005,PO=1005,Kr=1006,xM=1007,RO=1007,Rh=1008,kO=1008,su=1009,x4=1010,w4=1011,nx=1012,wM=1013,$u=1014,ro=1015,go=1016,SM=1017,_M=1018,bh=1020,S4=1021,mo=1023,_4=1024,b4=1025,Mh=1026,ed=1027,bM=1028,MM=1029,M4=1030,EM=1031,AM=1033,Ly=33776,Py=33777,Ry=33778,ky=33779,ab=35840,lb=35841,ub=35842,cb=35843,E4=36196,hb=37492,fb=37496,db=37808,pb=37809,mb=37810,gb=37811,vb=37812,yb=37813,xb=37814,wb=37815,Sb=37816,_b=37817,bb=37818,Mb=37819,Eb=37820,Ab=37821,Iy=36492,A4=36283,Tb=36284,Cb=36285,Lb=36286,T4=2200,C4=2201,L4=2202,A0=2300,T0=2301,Ny=2302,Ff=2400,Df=2401,C0=2402,rx=2500,TM=2501,IO=0,NO=1,FO=2,CM=3e3,Eh=3001,P4=3200,R4=3201,Hh=0,k4=1,Ah="",Gn="srgb",Ml="srgb-linear",LM="display-p3",DO=0,Fy=7680,OO=7681,UO=7682,BO=7683,zO=34055,HO=34056,GO=5386,VO=512,WO=513,jO=514,XO=515,qO=516,YO=517,ZO=518,I4=519,N4=512,F4=513,D4=514,O4=515,U4=516,B4=517,z4=518,H4=519,L0=35044,$O=35048,KO=35040,JO=35045,QO=35049,eU=35041,tU=35046,nU=35050,rU=35042,iU="100",Pb="300 es",S2=1035,Ql=2e3,P0=2001;let fc=class{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}};const Ws=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let QE=1234567;const jf=Math.PI/180,hm=180/Math.PI;function aa(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,r=Math.random()*4294967295|0;return(Ws[t&255]+Ws[t>>8&255]+Ws[t>>16&255]+Ws[t>>24&255]+"-"+Ws[e&255]+Ws[e>>8&255]+"-"+Ws[e>>16&15|64]+Ws[e>>24&255]+"-"+Ws[n&63|128]+Ws[n>>8&255]+"-"+Ws[n>>16&255]+Ws[n>>24&255]+Ws[r&255]+Ws[r>>8&255]+Ws[r>>16&255]+Ws[r>>24&255]).toLowerCase()}function Ti(t,e,n){return Math.max(e,Math.min(n,t))}function PM(t,e){return(t%e+e)%e}function sU(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)}function oU(t,e,n){return t!==e?(n-t)/(e-t):0}function qg(t,e,n){return(1-n)*t+n*e}function aU(t,e,n,r){return qg(t,e,1-Math.exp(-n*r))}function lU(t,e=1){return e-Math.abs(PM(t,e*2)-e)}function uU(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))}function cU(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(t*6-15)+10))}function hU(t,e){return t+Math.floor(Math.random()*(e-t+1))}function fU(t,e){return t+Math.random()*(e-t)}function dU(t){return t*(.5-Math.random())}function pU(t){t!==void 0&&(QE=t);let e=QE+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function mU(t){return t*jf}function gU(t){return t*hm}function Rb(t){return(t&t-1)===0&&t!==0}function G4(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function _2(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}function vU(t,e,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),l=o(n/2),u=s((e+r)/2),c=o((e+r)/2),h=s((e-r)/2),f=o((e-r)/2),d=s((r-e)/2),v=o((r-e)/2);switch(i){case"XYX":t.set(a*c,l*h,l*f,a*u);break;case"YZY":t.set(l*f,a*c,l*h,a*u);break;case"ZXZ":t.set(l*h,l*f,a*c,a*u);break;case"XZX":t.set(a*c,l*v,l*d,a*u);break;case"YXY":t.set(l*d,a*c,l*v,a*u);break;case"ZYZ":t.set(l*v,l*d,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}}function No(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Yn(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}const yU={DEG2RAD:jf,RAD2DEG:hm,generateUUID:aa,clamp:Ti,euclideanModulo:PM,mapLinear:sU,inverseLerp:oU,lerp:qg,damp:aU,pingpong:lU,smoothstep:uU,smootherstep:cU,randInt:hU,randFloat:fU,randFloatSpread:dU,seededRandom:pU,degToRad:mU,radToDeg:gU,isPowerOfTwo:Rb,ceilPowerOfTwo:G4,floorPowerOfTwo:_2,setQuaternionFromProperEuler:vU,normalize:Yn,denormalize:No};class wt{constructor(e=0,n=0){wt.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,r=this.y,i=e.elements;return this.x=i[0]*n+i[3]*r+i[6],this.y=i[1]*n+i[4]*r+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Ti(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y;return n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const r=Math.cos(n),i=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*r-o*i+e.x,this.y=s*i+o*r+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Jn{constructor(e,n,r,i,s,o,a,l,u){Jn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,u)}set(e,n,r,i,s,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=n,c[4]=s,c[5]=l,c[6]=r,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],this}extractBasis(e,n,r){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),r.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[3],l=r[6],u=r[1],c=r[4],h=r[7],f=r[2],d=r[5],v=r[8],x=i[0],w=i[3],g=i[6],S=i[1],_=i[4],T=i[7],L=i[2],k=i[5],N=i[8];return s[0]=o*x+a*S+l*L,s[3]=o*w+a*_+l*k,s[6]=o*g+a*T+l*N,s[1]=u*x+c*S+h*L,s[4]=u*w+c*_+h*k,s[7]=u*g+c*T+h*N,s[2]=f*x+d*S+v*L,s[5]=f*w+d*_+v*k,s[8]=f*g+d*T+v*N,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return n*o*c-n*a*u-r*s*c+r*a*l+i*s*u-i*o*l}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=c*o-a*u,f=a*l-c*s,d=u*s-o*l,v=n*h+r*f+i*d;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const x=1/v;return e[0]=h*x,e[1]=(i*u-c*r)*x,e[2]=(a*r-i*o)*x,e[3]=f*x,e[4]=(c*n-i*l)*x,e[5]=(i*s-a*n)*x,e[6]=d*x,e[7]=(r*l-u*n)*x,e[8]=(o*n-r*s)*x,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,r,i,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(r*l,r*u,-r*(l*o+u*a)+o+e,-i*u,i*l,-i*(-u*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(Rw.makeScale(e,n)),this}rotate(e){return this.premultiply(Rw.makeRotation(-e)),this}translate(e,n){return this.premultiply(Rw.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,r,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<9;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<9;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Rw=new Jn;function V4(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}const xU={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Dp(t,e){return new xU[t](e)}function R0(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}const eA={};function Yg(t){t in eA||(eA[t]=!0,console.warn(t))}function Xp(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function kw(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}const wU=new Jn().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),SU=new Jn().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function _U(t){return t.convertSRGBToLinear().applyMatrix3(SU)}function bU(t){return t.applyMatrix3(wU).convertLinearToSRGB()}const MU={[Ml]:t=>t,[Gn]:t=>t.convertSRGBToLinear(),[LM]:_U},EU={[Ml]:t=>t,[Gn]:t=>t.convertLinearToSRGB(),[LM]:bU},Fa={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(t){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!t},get workingColorSpace(){return Ml},set workingColorSpace(t){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(t,e,n){if(this.enabled===!1||e===n||!e||!n)return t;const r=MU[e],i=EU[n];if(r===void 0||i===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${n}".`);return i(r(t))},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)}};let Wd;class RM{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{Wd===void 0&&(Wd=R0("canvas")),Wd.width=e.width,Wd.height=e.height;const r=Wd.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=Wd}return n.width>2048||n.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),n.toDataURL("image/jpeg",.6)):n.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=R0("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(e,0,0,e.width,e.height);const i=r.getImageData(0,0,e.width,e.height),s=i.data;for(let o=0;o<s.length;o++)s[o]=Xp(s[o]/255)*255;return r.putImageData(i,0,0),n}else if(e.data){const n=e.data.slice(0);for(let r=0;r<n.length;r++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[r]=Math.floor(Xp(n[r]/255)*255):n[r]=Xp(n[r]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let AU=0;class Of{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:AU++}),this.uuid=aa(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const r={uuid:this.uuid,url:""},i=this.data;if(i!==null){let s;if(Array.isArray(i)){s=[];for(let o=0,a=i.length;o<a;o++)i[o].isDataTexture?s.push(Iw(i[o].image)):s.push(Iw(i[o]))}else s=Iw(i);r.url=s}return n||(e.images[this.uuid]=r),r}}function Iw(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?RM.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let TU=0;class Ci extends fc{constructor(e=Ci.DEFAULT_IMAGE,n=Ci.DEFAULT_MAPPING,r=to,i=to,s=Kr,o=Rh,a=mo,l=su,u=Ci.DEFAULT_ANISOTROPY,c=Ah){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:TU++}),this.uuid=aa(),this.name="",this.source=new Of(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=i,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new wt(0,0),this.repeat=new wt(1,1),this.center=new wt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Jn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof c=="string"?this.colorSpace=c:(Yg("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=c===Eh?Gn:Ah),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const r={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==tx)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case M0:e.x=e.x-Math.floor(e.x);break;case to:e.x=e.x<0?0:1;break;case E0:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case M0:e.y=e.y-Math.floor(e.y);break;case to:e.y=e.y<0?0:1;break;case E0:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return Yg("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Gn?Eh:CM}set encoding(e){Yg("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Eh?Gn:Ah}}Ci.DEFAULT_IMAGE=null;Ci.DEFAULT_MAPPING=tx;Ci.DEFAULT_ANISOTROPY=1;class Lr{constructor(e=0,n=0,r=0,i=1){Lr.prototype.isVector4=!0,this.x=e,this.y=n,this.z=r,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,r,i){return this.x=e,this.y=n,this.z=r,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*r+o[8]*i+o[12]*s,this.y=o[1]*n+o[5]*r+o[9]*i+o[13]*s,this.z=o[2]*n+o[6]*r+o[10]*i+o[14]*s,this.w=o[3]*n+o[7]*r+o[11]*i+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,r,i,s;const l=e.elements,u=l[0],c=l[4],h=l[8],f=l[1],d=l[5],v=l[9],x=l[2],w=l[6],g=l[10];if(Math.abs(c-f)<.01&&Math.abs(h-x)<.01&&Math.abs(v-w)<.01){if(Math.abs(c+f)<.1&&Math.abs(h+x)<.1&&Math.abs(v+w)<.1&&Math.abs(u+d+g-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const _=(u+1)/2,T=(d+1)/2,L=(g+1)/2,k=(c+f)/4,N=(h+x)/4,R=(v+w)/4;return _>T&&_>L?_<.01?(r=0,i=.707106781,s=.707106781):(r=Math.sqrt(_),i=k/r,s=N/r):T>L?T<.01?(r=.707106781,i=0,s=.707106781):(i=Math.sqrt(T),r=k/i,s=R/i):L<.01?(r=.707106781,i=.707106781,s=0):(s=Math.sqrt(L),r=N/s,i=R/s),this.set(r,i,s,n),this}let S=Math.sqrt((w-v)*(w-v)+(h-x)*(h-x)+(f-c)*(f-c));return Math.abs(S)<.001&&(S=1),this.x=(w-v)/S,this.y=(h-x)/S,this.z=(f-c)/S,this.w=Math.acos((u+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this.w=Math.max(e.w,Math.min(n.w,this.w)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this.w=Math.max(e,Math.min(n,this.w)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this.w=e.w+(n.w-e.w)*r,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class W4 extends fc{constructor(e=1,n=1,r={}){super(),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=1,this.scissor=new Lr(0,0,e,n),this.scissorTest=!1,this.viewport=new Lr(0,0,e,n);const i={width:e,height:n,depth:1};r.encoding!==void 0&&(Yg("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),r.colorSpace=r.encoding===Eh?Gn:Ah),this.texture=new Ci(i,r.mapping,r.wrapS,r.wrapT,r.magFilter,r.minFilter,r.format,r.type,r.anisotropy,r.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=r.generateMipmaps!==void 0?r.generateMipmaps:!1,this.texture.internalFormat=r.internalFormat!==void 0?r.internalFormat:null,this.texture.minFilter=r.minFilter!==void 0?r.minFilter:Kr,this.depthBuffer=r.depthBuffer!==void 0?r.depthBuffer:!0,this.stencilBuffer=r.stencilBuffer!==void 0?r.stencilBuffer:!1,this.depthTexture=r.depthTexture!==void 0?r.depthTexture:null,this.samples=r.samples!==void 0?r.samples:0}setSize(e,n,r=1){(this.width!==e||this.height!==n||this.depth!==r)&&(this.width=e,this.height=n,this.depth=r,this.texture.image.width=e,this.texture.image.height=n,this.texture.image.depth=r,this.dispose()),this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const n=Object.assign({},e.texture.image);return this.texture.source=new Of(n),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class El extends W4{constructor(e=1,n=1,r={}){super(e,n,r),this.isWebGLRenderTarget=!0}}class ix extends Ci{constructor(e=null,n=1,r=1,i=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Fi,this.minFilter=Fi,this.wrapR=to,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class CU extends El{constructor(e=1,n=1,r=1){super(e,n),this.isWebGLArrayRenderTarget=!0,this.depth=r,this.texture=new ix(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class kM extends Ci{constructor(e=null,n=1,r=1,i=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:r,depth:i},this.magFilter=Fi,this.minFilter=Fi,this.wrapR=to,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class LU extends El{constructor(e=1,n=1,r=1){super(e,n),this.isWebGL3DRenderTarget=!0,this.depth=r,this.texture=new kM(null,e,n,r),this.texture.isRenderTargetTexture=!0}}class PU extends El{constructor(e=1,n=1,r=1,i={}){super(e,n,i),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let o=0;o<r;o++)this.texture[o]=s.clone(),this.texture[o].isRenderTargetTexture=!0}setSize(e,n,r=1){if(this.width!==e||this.height!==n||this.depth!==r){this.width=e,this.height=n,this.depth=r;for(let i=0,s=this.texture.length;i<s;i++)this.texture[i].image.width=e,this.texture[i].image.height=n,this.texture[i].image.depth=r;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let n=0,r=e.texture.length;n<r;n++)this.texture[n]=e.texture[n].clone(),this.texture[n].isRenderTargetTexture=!0;return this}}class io{constructor(e=0,n=0,r=0,i=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=r,this._w=i}static slerpFlat(e,n,r,i,s,o,a){let l=r[i+0],u=r[i+1],c=r[i+2],h=r[i+3];const f=s[o+0],d=s[o+1],v=s[o+2],x=s[o+3];if(a===0){e[n+0]=l,e[n+1]=u,e[n+2]=c,e[n+3]=h;return}if(a===1){e[n+0]=f,e[n+1]=d,e[n+2]=v,e[n+3]=x;return}if(h!==x||l!==f||u!==d||c!==v){let w=1-a;const g=l*f+u*d+c*v+h*x,S=g>=0?1:-1,_=1-g*g;if(_>Number.EPSILON){const L=Math.sqrt(_),k=Math.atan2(L,g*S);w=Math.sin(w*k)/L,a=Math.sin(a*k)/L}const T=a*S;if(l=l*w+f*T,u=u*w+d*T,c=c*w+v*T,h=h*w+x*T,w===1-a){const L=1/Math.sqrt(l*l+u*u+c*c+h*h);l*=L,u*=L,c*=L,h*=L}}e[n]=l,e[n+1]=u,e[n+2]=c,e[n+3]=h}static multiplyQuaternionsFlat(e,n,r,i,s,o){const a=r[i],l=r[i+1],u=r[i+2],c=r[i+3],h=s[o],f=s[o+1],d=s[o+2],v=s[o+3];return e[n]=a*v+c*h+l*d-u*f,e[n+1]=l*v+c*f+u*h-a*d,e[n+2]=u*v+c*d+a*f-l*h,e[n+3]=c*v-a*h-l*f-u*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,r,i){return this._x=e,this._y=n,this._z=r,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n){const r=e._x,i=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(r/2),c=a(i/2),h=a(s/2),f=l(r/2),d=l(i/2),v=l(s/2);switch(o){case"XYZ":this._x=f*c*h+u*d*v,this._y=u*d*h-f*c*v,this._z=u*c*v+f*d*h,this._w=u*c*h-f*d*v;break;case"YXZ":this._x=f*c*h+u*d*v,this._y=u*d*h-f*c*v,this._z=u*c*v-f*d*h,this._w=u*c*h+f*d*v;break;case"ZXY":this._x=f*c*h-u*d*v,this._y=u*d*h+f*c*v,this._z=u*c*v+f*d*h,this._w=u*c*h-f*d*v;break;case"ZYX":this._x=f*c*h-u*d*v,this._y=u*d*h+f*c*v,this._z=u*c*v-f*d*h,this._w=u*c*h+f*d*v;break;case"YZX":this._x=f*c*h+u*d*v,this._y=u*d*h+f*c*v,this._z=u*c*v-f*d*h,this._w=u*c*h-f*d*v;break;case"XZY":this._x=f*c*h-u*d*v,this._y=u*d*h-f*c*v,this._z=u*c*v+f*d*h,this._w=u*c*h+f*d*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const r=n/2,i=Math.sin(r);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(r),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,r=n[0],i=n[4],s=n[8],o=n[1],a=n[5],l=n[9],u=n[2],c=n[6],h=n[10],f=r+a+h;if(f>0){const d=.5/Math.sqrt(f+1);this._w=.25/d,this._x=(c-l)*d,this._y=(s-u)*d,this._z=(o-i)*d}else if(r>a&&r>h){const d=2*Math.sqrt(1+r-a-h);this._w=(c-l)/d,this._x=.25*d,this._y=(i+o)/d,this._z=(s+u)/d}else if(a>h){const d=2*Math.sqrt(1+a-r-h);this._w=(s-u)/d,this._x=(i+o)/d,this._y=.25*d,this._z=(l+c)/d}else{const d=2*Math.sqrt(1+h-r-a);this._w=(o-i)/d,this._x=(s+u)/d,this._y=(l+c)/d,this._z=.25*d}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let r=e.dot(n)+1;return r<Number.EPSILON?(r=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=r):(this._x=0,this._y=-e.z,this._z=e.y,this._w=r)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=r),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ti(this.dot(e),-1,1)))}rotateTowards(e,n){const r=this.angleTo(e);if(r===0)return this;const i=Math.min(1,n/r);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const r=e._x,i=e._y,s=e._z,o=e._w,a=n._x,l=n._y,u=n._z,c=n._w;return this._x=r*c+o*a+i*u-s*l,this._y=i*c+o*l+s*a-r*u,this._z=s*c+o*u+r*l-i*a,this._w=o*c-r*a-i*l-s*u,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const r=this._x,i=this._y,s=this._z,o=this._w;let a=o*e._w+r*e._x+i*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=r,this._y=i,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const d=1-n;return this._w=d*o+n*this._w,this._x=d*r+n*this._x,this._y=d*i+n*this._y,this._z=d*s+n*this._z,this.normalize(),this._onChangeCallback(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),h=Math.sin((1-n)*c)/u,f=Math.sin(n*c)/u;return this._w=o*h+this._w*f,this._x=r*h+this._x*f,this._y=i*h+this._y*f,this._z=s*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,n,r){return this.copy(e).slerp(n,r)}random(){const e=Math.random(),n=Math.sqrt(1-e),r=Math.sqrt(e),i=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(n*Math.cos(i),r*Math.sin(s),r*Math.cos(s),n*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class ge{constructor(e=0,n=0,r=0){ge.prototype.isVector3=!0,this.x=e,this.y=n,this.z=r}set(e,n,r){return r===void 0&&(r=this.z),this.x=e,this.y=n,this.z=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(tA.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(tA.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[3]*r+s[6]*i,this.y=s[1]*n+s[4]*r+s[7]*i,this.z=s[2]*n+s[5]*r+s[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,r=this.y,i=this.z,s=e.elements,o=1/(s[3]*n+s[7]*r+s[11]*i+s[15]);return this.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,this.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o,this.z=(s[2]*n+s[6]*r+s[10]*i+s[14])*o,this}applyQuaternion(e){const n=this.x,r=this.y,i=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=l*n+o*i-a*r,c=l*r+a*n-s*i,h=l*i+s*r-o*n,f=-s*n-o*r-a*i;return this.x=u*l+f*-s+c*-a-h*-o,this.y=c*l+f*-o+h*-s-u*-a,this.z=h*l+f*-a+u*-o-c*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,r=this.y,i=this.z,s=e.elements;return this.x=s[0]*n+s[4]*r+s[8]*i,this.y=s[1]*n+s[5]*r+s[9]*i,this.z=s[2]*n+s[6]*r+s[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=Math.max(e.x,Math.min(n.x,this.x)),this.y=Math.max(e.y,Math.min(n.y,this.y)),this.z=Math.max(e.z,Math.min(n.z,this.z)),this}clampScalar(e,n){return this.x=Math.max(e,Math.min(n,this.x)),this.y=Math.max(e,Math.min(n,this.y)),this.z=Math.max(e,Math.min(n,this.z)),this}clampLength(e,n){const r=this.length();return this.divideScalar(r||1).multiplyScalar(Math.max(e,Math.min(n,r)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,r){return this.x=e.x+(n.x-e.x)*r,this.y=e.y+(n.y-e.y)*r,this.z=e.z+(n.z-e.z)*r,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const r=e.x,i=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=i*l-s*a,this.y=s*o-r*l,this.z=r*a-i*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const r=e.dot(this)/n;return this.copy(e).multiplyScalar(r)}projectOnPlane(e){return Nw.copy(this).projectOnVector(e),this.sub(Nw)}reflect(e){return this.sub(Nw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const r=this.dot(e)/n;return Math.acos(Ti(r,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,r=this.y-e.y,i=this.z-e.z;return n*n+r*r+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,r){const i=Math.sin(n)*e;return this.x=i*Math.sin(r),this.y=Math.cos(n)*e,this.z=i*Math.cos(r),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,r){return this.x=e*Math.sin(n),this.y=r,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),r=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=r,this.z=i,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,n=Math.random()*Math.PI*2,r=Math.sqrt(1-e**2);return this.x=r*Math.cos(n),this.y=r*Math.sin(n),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Nw=new ge,tA=new io;class Xa{constructor(e=new ge(1/0,1/0,1/0),n=new ge(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n+=3)this.expandByPoint(Iu.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,r=e.count;n<r;n++)this.expandByPoint(Iu.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=Iu.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),jd.copy(e.boundingBox),jd.applyMatrix4(e.matrixWorld),this.union(jd);else{const i=e.geometry;if(i!==void 0)if(n&&i.attributes!==void 0&&i.attributes.position!==void 0){const s=i.attributes.position;for(let o=0,a=s.count;o<a;o++)Iu.fromBufferAttribute(s,o).applyMatrix4(e.matrixWorld),this.expandByPoint(Iu)}else i.boundingBox===null&&i.computeBoundingBox(),jd.copy(i.boundingBox),jd.applyMatrix4(e.matrixWorld),this.union(jd)}const r=e.children;for(let i=0,s=r.length;i<s;i++)this.expandByObject(r[i],n);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Iu),Iu.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,r;return e.normal.x>0?(n=e.normal.x*this.min.x,r=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,r=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,r+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,r+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,r+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,r+=e.normal.z*this.min.z),n<=-e.constant&&r>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(ug),a1.subVectors(this.max,ug),Xd.subVectors(e.a,ug),qd.subVectors(e.b,ug),Yd.subVectors(e.c,ug),Vc.subVectors(qd,Xd),Wc.subVectors(Yd,qd),ff.subVectors(Xd,Yd);let n=[0,-Vc.z,Vc.y,0,-Wc.z,Wc.y,0,-ff.z,ff.y,Vc.z,0,-Vc.x,Wc.z,0,-Wc.x,ff.z,0,-ff.x,-Vc.y,Vc.x,0,-Wc.y,Wc.x,0,-ff.y,ff.x,0];return!Fw(n,Xd,qd,Yd,a1)||(n=[1,0,0,0,1,0,0,0,1],!Fw(n,Xd,qd,Yd,a1))?!1:(l1.crossVectors(Vc,Wc),n=[l1.x,l1.y,l1.z],Fw(n,Xd,qd,Yd,a1))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Iu).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Iu).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ku[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ku[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ku[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ku[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ku[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ku[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ku[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ku[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ku),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ku=[new ge,new ge,new ge,new ge,new ge,new ge,new ge,new ge],Iu=new ge,jd=new Xa,Xd=new ge,qd=new ge,Yd=new ge,Vc=new ge,Wc=new ge,ff=new ge,ug=new ge,a1=new ge,l1=new ge,df=new ge;function Fw(t,e,n,r,i){for(let s=0,o=t.length-3;s<=o;s+=3){df.fromArray(t,s);const a=i.x*Math.abs(df.x)+i.y*Math.abs(df.y)+i.z*Math.abs(df.z),l=e.dot(df),u=n.dot(df),c=r.dot(df);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const RU=new Xa,cg=new ge,Dw=new ge;class Pl{constructor(e=new ge,n=-1){this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const r=this.center;n!==void 0?r.copy(n):RU.setFromPoints(e).getCenter(r);let i=0;for(let s=0,o=e.length;s<o;s++)i=Math.max(i,r.distanceToSquared(e[s]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const r=this.center.distanceToSquared(e);return n.copy(e),r>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;cg.subVectors(e,this.center);const n=cg.lengthSq();if(n>this.radius*this.radius){const r=Math.sqrt(n),i=(r-this.radius)*.5;this.center.addScaledVector(cg,i/r),this.radius+=i}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(Dw.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(cg.copy(e.center).add(Dw)),this.expandByPoint(cg.copy(e.center).sub(Dw))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Nu=new ge,Ow=new ge,u1=new ge,jc=new ge,Uw=new ge,c1=new ge,Bw=new ge;class hd{constructor(e=new ge,n=new ge(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Nu)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const r=n.dot(this.direction);return r<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,r)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Nu.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Nu.copy(this.origin).addScaledVector(this.direction,n),Nu.distanceToSquared(e))}distanceSqToSegment(e,n,r,i){Ow.copy(e).add(n).multiplyScalar(.5),u1.copy(n).sub(e).normalize(),jc.copy(this.origin).sub(Ow);const s=e.distanceTo(n)*.5,o=-this.direction.dot(u1),a=jc.dot(this.direction),l=-jc.dot(u1),u=jc.lengthSq(),c=Math.abs(1-o*o);let h,f,d,v;if(c>0)if(h=o*l-a,f=o*a-l,v=s*c,h>=0)if(f>=-v)if(f<=v){const x=1/c;h*=x,f*=x,d=h*(h+o*f+2*a)+f*(o*h+f+2*l)+u}else f=s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*l)+u;else f=-s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*l)+u;else f<=-v?(h=Math.max(0,-(-o*s+a)),f=h>0?-s:Math.min(Math.max(-s,-l),s),d=-h*h+f*(f+2*l)+u):f<=v?(h=0,f=Math.min(Math.max(-s,-l),s),d=f*(f+2*l)+u):(h=Math.max(0,-(o*s+a)),f=h>0?s:Math.min(Math.max(-s,-l),s),d=-h*h+f*(f+2*l)+u);else f=o>0?-s:s,h=Math.max(0,-(o*f+a)),d=-h*h+f*(f+2*l)+u;return r&&r.copy(this.origin).addScaledVector(this.direction,h),i&&i.copy(Ow).addScaledVector(u1,f),d}intersectSphere(e,n){Nu.subVectors(e.center,this.origin);const r=Nu.dot(this.direction),i=Nu.dot(Nu)-r*r,s=e.radius*e.radius;if(i>s)return null;const o=Math.sqrt(s-i),a=r-o,l=r+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const r=-(this.origin.dot(e.normal)+e.constant)/n;return r>=0?r:null}intersectPlane(e,n){const r=this.distanceToPlane(e);return r===null?null:this.at(r,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let r,i,s,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,h=1/this.direction.z,f=this.origin;return u>=0?(r=(e.min.x-f.x)*u,i=(e.max.x-f.x)*u):(r=(e.max.x-f.x)*u,i=(e.min.x-f.x)*u),c>=0?(s=(e.min.y-f.y)*c,o=(e.max.y-f.y)*c):(s=(e.max.y-f.y)*c,o=(e.min.y-f.y)*c),r>o||s>i||((s>r||isNaN(r))&&(r=s),(o<i||isNaN(i))&&(i=o),h>=0?(a=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(a=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),r>l||a>i)||((a>r||r!==r)&&(r=a),(l<i||i!==i)&&(i=l),i<0)?null:this.at(r>=0?r:i,n)}intersectsBox(e){return this.intersectBox(e,Nu)!==null}intersectTriangle(e,n,r,i,s){Uw.subVectors(n,e),c1.subVectors(r,e),Bw.crossVectors(Uw,c1);let o=this.direction.dot(Bw),a;if(o>0){if(i)return null;a=1}else if(o<0)a=-1,o=-o;else return null;jc.subVectors(this.origin,e);const l=a*this.direction.dot(c1.crossVectors(jc,c1));if(l<0)return null;const u=a*this.direction.dot(Uw.cross(jc));if(u<0||l+u>o)return null;const c=-a*jc.dot(Bw);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Hn{constructor(e,n,r,i,s,o,a,l,u,c,h,f,d,v,x,w){Hn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,r,i,s,o,a,l,u,c,h,f,d,v,x,w)}set(e,n,r,i,s,o,a,l,u,c,h,f,d,v,x,w){const g=this.elements;return g[0]=e,g[4]=n,g[8]=r,g[12]=i,g[1]=s,g[5]=o,g[9]=a,g[13]=l,g[2]=u,g[6]=c,g[10]=h,g[14]=f,g[3]=d,g[7]=v,g[11]=x,g[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Hn().fromArray(this.elements)}copy(e){const n=this.elements,r=e.elements;return n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this}copyPosition(e){const n=this.elements,r=e.elements;return n[12]=r[12],n[13]=r[13],n[14]=r[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,r){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(e,n,r){return this.set(e.x,n.x,r.x,0,e.y,n.y,r.y,0,e.z,n.z,r.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,r=e.elements,i=1/Zd.setFromMatrixColumn(e,0).length(),s=1/Zd.setFromMatrixColumn(e,1).length(),o=1/Zd.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[7]=0,n[8]=r[8]*o,n[9]=r[9]*o,n[10]=r[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,r=e.x,i=e.y,s=e.z,o=Math.cos(r),a=Math.sin(r),l=Math.cos(i),u=Math.sin(i),c=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const f=o*c,d=o*h,v=a*c,x=a*h;n[0]=l*c,n[4]=-l*h,n[8]=u,n[1]=d+v*u,n[5]=f-x*u,n[9]=-a*l,n[2]=x-f*u,n[6]=v+d*u,n[10]=o*l}else if(e.order==="YXZ"){const f=l*c,d=l*h,v=u*c,x=u*h;n[0]=f+x*a,n[4]=v*a-d,n[8]=o*u,n[1]=o*h,n[5]=o*c,n[9]=-a,n[2]=d*a-v,n[6]=x+f*a,n[10]=o*l}else if(e.order==="ZXY"){const f=l*c,d=l*h,v=u*c,x=u*h;n[0]=f-x*a,n[4]=-o*h,n[8]=v+d*a,n[1]=d+v*a,n[5]=o*c,n[9]=x-f*a,n[2]=-o*u,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const f=o*c,d=o*h,v=a*c,x=a*h;n[0]=l*c,n[4]=v*u-d,n[8]=f*u+x,n[1]=l*h,n[5]=x*u+f,n[9]=d*u-v,n[2]=-u,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const f=o*l,d=o*u,v=a*l,x=a*u;n[0]=l*c,n[4]=x-f*h,n[8]=v*h+d,n[1]=h,n[5]=o*c,n[9]=-a*c,n[2]=-u*c,n[6]=d*h+v,n[10]=f-x*h}else if(e.order==="XZY"){const f=o*l,d=o*u,v=a*l,x=a*u;n[0]=l*c,n[4]=-h,n[8]=u*c,n[1]=f*h+x,n[5]=o*c,n[9]=d*h-v,n[2]=v*h-d,n[6]=a*c,n[10]=x*h+f}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(kU,e,IU)}lookAt(e,n,r){const i=this.elements;return ea.subVectors(e,n),ea.lengthSq()===0&&(ea.z=1),ea.normalize(),Xc.crossVectors(r,ea),Xc.lengthSq()===0&&(Math.abs(r.z)===1?ea.x+=1e-4:ea.z+=1e-4,ea.normalize(),Xc.crossVectors(r,ea)),Xc.normalize(),h1.crossVectors(ea,Xc),i[0]=Xc.x,i[4]=h1.x,i[8]=ea.x,i[1]=Xc.y,i[5]=h1.y,i[9]=ea.y,i[2]=Xc.z,i[6]=h1.z,i[10]=ea.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const r=e.elements,i=n.elements,s=this.elements,o=r[0],a=r[4],l=r[8],u=r[12],c=r[1],h=r[5],f=r[9],d=r[13],v=r[2],x=r[6],w=r[10],g=r[14],S=r[3],_=r[7],T=r[11],L=r[15],k=i[0],N=i[4],R=i[8],P=i[12],D=i[1],O=i[5],B=i[9],V=i[13],H=i[2],ee=i[6],se=i[10],ce=i[14],W=i[3],Y=i[7],j=i[11],re=i[15];return s[0]=o*k+a*D+l*H+u*W,s[4]=o*N+a*O+l*ee+u*Y,s[8]=o*R+a*B+l*se+u*j,s[12]=o*P+a*V+l*ce+u*re,s[1]=c*k+h*D+f*H+d*W,s[5]=c*N+h*O+f*ee+d*Y,s[9]=c*R+h*B+f*se+d*j,s[13]=c*P+h*V+f*ce+d*re,s[2]=v*k+x*D+w*H+g*W,s[6]=v*N+x*O+w*ee+g*Y,s[10]=v*R+x*B+w*se+g*j,s[14]=v*P+x*V+w*ce+g*re,s[3]=S*k+_*D+T*H+L*W,s[7]=S*N+_*O+T*ee+L*Y,s[11]=S*R+_*B+T*se+L*j,s[15]=S*P+_*V+T*ce+L*re,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],r=e[4],i=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],h=e[6],f=e[10],d=e[14],v=e[3],x=e[7],w=e[11],g=e[15];return v*(+s*l*h-i*u*h-s*a*f+r*u*f+i*a*d-r*l*d)+x*(+n*l*d-n*u*f+s*o*f-i*o*d+i*u*c-s*l*c)+w*(+n*u*h-n*a*d-s*o*h+r*o*d+s*a*c-r*u*c)+g*(-i*a*c-n*l*h+n*a*f+i*o*h-r*o*f+r*l*c)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,r){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=n,i[14]=r),this}invert(){const e=this.elements,n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],h=e[9],f=e[10],d=e[11],v=e[12],x=e[13],w=e[14],g=e[15],S=h*w*u-x*f*u+x*l*d-a*w*d-h*l*g+a*f*g,_=v*f*u-c*w*u-v*l*d+o*w*d+c*l*g-o*f*g,T=c*x*u-v*h*u+v*a*d-o*x*d-c*a*g+o*h*g,L=v*h*l-c*x*l-v*a*f+o*x*f+c*a*w-o*h*w,k=n*S+r*_+i*T+s*L;if(k===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/k;return e[0]=S*N,e[1]=(x*f*s-h*w*s-x*i*d+r*w*d+h*i*g-r*f*g)*N,e[2]=(a*w*s-x*l*s+x*i*u-r*w*u-a*i*g+r*l*g)*N,e[3]=(h*l*s-a*f*s-h*i*u+r*f*u+a*i*d-r*l*d)*N,e[4]=_*N,e[5]=(c*w*s-v*f*s+v*i*d-n*w*d-c*i*g+n*f*g)*N,e[6]=(v*l*s-o*w*s-v*i*u+n*w*u+o*i*g-n*l*g)*N,e[7]=(o*f*s-c*l*s+c*i*u-n*f*u-o*i*d+n*l*d)*N,e[8]=T*N,e[9]=(v*h*s-c*x*s-v*r*d+n*x*d+c*r*g-n*h*g)*N,e[10]=(o*x*s-v*a*s+v*r*u-n*x*u-o*r*g+n*a*g)*N,e[11]=(c*a*s-o*h*s-c*r*u+n*h*u+o*r*d-n*a*d)*N,e[12]=L*N,e[13]=(c*x*i-v*h*i+v*r*f-n*x*f-c*r*w+n*h*w)*N,e[14]=(v*a*i-o*x*i-v*r*l+n*x*l+o*r*w-n*a*w)*N,e[15]=(o*h*i-c*a*i+c*r*l-n*h*l-o*r*f+n*a*f)*N,this}scale(e){const n=this.elements,r=e.x,i=e.y,s=e.z;return n[0]*=r,n[4]*=i,n[8]*=s,n[1]*=r,n[5]*=i,n[9]*=s,n[2]*=r,n[6]*=i,n[10]*=s,n[3]*=r,n[7]*=i,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],r=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,r,i))}makeTranslation(e,n,r){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,r,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),r=Math.sin(e);return this.set(1,0,0,0,0,n,-r,0,0,r,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,0,r,0,0,1,0,0,-r,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),r=Math.sin(e);return this.set(n,-r,0,0,r,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const r=Math.cos(n),i=Math.sin(n),s=1-r,o=e.x,a=e.y,l=e.z,u=s*o,c=s*a;return this.set(u*o+r,u*a-i*l,u*l+i*a,0,u*a+i*l,c*a+r,c*l-i*o,0,u*l-i*a,c*l+i*o,s*l*l+r,0,0,0,0,1),this}makeScale(e,n,r){return this.set(e,0,0,0,0,n,0,0,0,0,r,0,0,0,0,1),this}makeShear(e,n,r,i,s,o){return this.set(1,r,s,0,e,1,o,0,n,i,1,0,0,0,0,1),this}compose(e,n,r){const i=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,u=s+s,c=o+o,h=a+a,f=s*u,d=s*c,v=s*h,x=o*c,w=o*h,g=a*h,S=l*u,_=l*c,T=l*h,L=r.x,k=r.y,N=r.z;return i[0]=(1-(x+g))*L,i[1]=(d+T)*L,i[2]=(v-_)*L,i[3]=0,i[4]=(d-T)*k,i[5]=(1-(f+g))*k,i[6]=(w+S)*k,i[7]=0,i[8]=(v+_)*N,i[9]=(w-S)*N,i[10]=(1-(f+x))*N,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,n,r){const i=this.elements;let s=Zd.set(i[0],i[1],i[2]).length();const o=Zd.set(i[4],i[5],i[6]).length(),a=Zd.set(i[8],i[9],i[10]).length();this.determinant()<0&&(s=-s),e.x=i[12],e.y=i[13],e.z=i[14],ol.copy(this);const u=1/s,c=1/o,h=1/a;return ol.elements[0]*=u,ol.elements[1]*=u,ol.elements[2]*=u,ol.elements[4]*=c,ol.elements[5]*=c,ol.elements[6]*=c,ol.elements[8]*=h,ol.elements[9]*=h,ol.elements[10]*=h,n.setFromRotationMatrix(ol),r.x=s,r.y=o,r.z=a,this}makePerspective(e,n,r,i,s,o,a=Ql){const l=this.elements,u=2*s/(n-e),c=2*s/(r-i),h=(n+e)/(n-e),f=(r+i)/(r-i);let d,v;if(a===Ql)d=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===P0)d=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=c,l[9]=f,l[13]=0,l[2]=0,l[6]=0,l[10]=d,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,n,r,i,s,o,a=Ql){const l=this.elements,u=1/(n-e),c=1/(r-i),h=1/(o-s),f=(n+e)*u,d=(r+i)*c;let v,x;if(a===Ql)v=(o+s)*h,x=-2*h;else if(a===P0)v=s*h,x=-1*h;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-f,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-d,l[2]=0,l[6]=0,l[10]=x,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const n=this.elements,r=e.elements;for(let i=0;i<16;i++)if(n[i]!==r[i])return!1;return!0}fromArray(e,n=0){for(let r=0;r<16;r++)this.elements[r]=e[r+n];return this}toArray(e=[],n=0){const r=this.elements;return e[n]=r[0],e[n+1]=r[1],e[n+2]=r[2],e[n+3]=r[3],e[n+4]=r[4],e[n+5]=r[5],e[n+6]=r[6],e[n+7]=r[7],e[n+8]=r[8],e[n+9]=r[9],e[n+10]=r[10],e[n+11]=r[11],e[n+12]=r[12],e[n+13]=r[13],e[n+14]=r[14],e[n+15]=r[15],e}}const Zd=new ge,ol=new Hn,kU=new ge(0,0,0),IU=new ge(1,1,1),Xc=new ge,h1=new ge,ea=new ge,nA=new Hn,rA=new io;class rv{constructor(e=0,n=0,r=0,i=rv.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,i=this._order){return this._x=e,this._y=n,this._z=r,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){const i=e.elements,s=i[0],o=i[4],a=i[8],l=i[1],u=i[5],c=i[9],h=i[2],f=i[6],d=i[10];switch(n){case"XYZ":this._y=Math.asin(Ti(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Ti(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ti(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,d),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Ti(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,d),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Ti(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Ti(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return nA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(nA,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return rA.setFromEuler(this),this.setFromQuaternion(rA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}rv.DEFAULT_ORDER="XYZ";class Xf{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let NU=0;const iA=new ge,$d=new io,Fu=new Hn,f1=new ge,hg=new ge,FU=new ge,DU=new io,sA=new ge(1,0,0),oA=new ge(0,1,0),aA=new ge(0,0,1),OU={type:"added"},lA={type:"removed"};class dr extends fc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:NU++}),this.uuid=aa(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=dr.DEFAULT_UP.clone();const e=new ge,n=new rv,r=new io,i=new ge(1,1,1);function s(){r.setFromEuler(n,!1)}function o(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Hn},normalMatrix:{value:new Jn}}),this.matrix=new Hn,this.matrixWorld=new Hn,this.matrixAutoUpdate=dr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=dr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new Xf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return $d.setFromAxisAngle(e,n),this.quaternion.multiply($d),this}rotateOnWorldAxis(e,n){return $d.setFromAxisAngle(e,n),this.quaternion.premultiply($d),this}rotateX(e){return this.rotateOnAxis(sA,e)}rotateY(e){return this.rotateOnAxis(oA,e)}rotateZ(e){return this.rotateOnAxis(aA,e)}translateOnAxis(e,n){return iA.copy(e).applyQuaternion(this.quaternion),this.position.add(iA.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(sA,e)}translateY(e){return this.translateOnAxis(oA,e)}translateZ(e){return this.translateOnAxis(aA,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Fu.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?f1.copy(e):f1.set(e,n,r);const i=this.parent;this.updateWorldMatrix(!0,!1),hg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Fu.lookAt(hg,f1,this.up):Fu.lookAt(f1,hg,this.up),this.quaternion.setFromRotationMatrix(Fu),i&&(Fu.extractRotation(i.matrixWorld),$d.setFromRotationMatrix(Fu),this.quaternion.premultiply($d.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(OU)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(lA)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const n=this.children[e];n.parent=null,n.dispatchEvent(lA)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Fu.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Fu.multiply(e.parent.matrixWorld)),e.applyMatrix4(Fu),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,i=this.children.length;r<i;r++){const o=this.children[r].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n){let r=[];this[e]===n&&r.push(this);for(let i=0,s=this.children.length;i<s;i++){const o=this.children[i].getObjectsByProperty(e,n);o.length>0&&(r=r.concat(o))}return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hg,e,FU),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hg,DU,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let r=0,i=n.length;r<i;r++)n[r].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let r=0,i=n.length;r<i;r++){const s=n[r];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,n){const r=this.parent;if(e===!0&&r!==null&&r.matrixWorldAutoUpdate===!0&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),n===!0){const i=this.children;for(let s=0,o=i.length;s<o;s++){const a=i[s];a.matrixWorldAutoUpdate===!0&&a.updateWorldMatrix(!1,!0)}}}toJSON(e){const n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const i={};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.castShadow===!0&&(i.castShadow=!0),this.receiveShadow===!0&&(i.receiveShadow=!0),this.visible===!1&&(i.visible=!1),this.frustumCulled===!1&&(i.frustumCulled=!1),this.renderOrder!==0&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),i.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(i.instanceColor=this.instanceColor.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const h=l[u];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));i.material=a}else i.material=s(e.materials,this.material);if(this.children.length>0){i.children=[];for(let a=0;a<this.children.length;a++)i.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];i.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),h=o(e.shapes),f=o(e.skeletons),d=o(e.animations),v=o(e.nodes);a.length>0&&(r.geometries=a),l.length>0&&(r.materials=l),u.length>0&&(r.textures=u),c.length>0&&(r.images=c),h.length>0&&(r.shapes=h),f.length>0&&(r.skeletons=f),d.length>0&&(r.animations=d),v.length>0&&(r.nodes=v)}return r.object=i,r;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){const i=e.children[r];this.add(i.clone())}return this}}dr.DEFAULT_UP=new ge(0,1,0);dr.DEFAULT_MATRIX_AUTO_UPDATE=!0;dr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const al=new ge,Du=new ge,zw=new ge,Ou=new ge,Kd=new ge,Jd=new ge,uA=new ge,Hw=new ge,Gw=new ge,Vw=new ge;let d1=!1;class Io{constructor(e=new ge,n=new ge,r=new ge){this.a=e,this.b=n,this.c=r}static getNormal(e,n,r,i){i.subVectors(r,n),al.subVectors(e,n),i.cross(al);const s=i.lengthSq();return s>0?i.multiplyScalar(1/Math.sqrt(s)):i.set(0,0,0)}static getBarycoord(e,n,r,i,s){al.subVectors(i,n),Du.subVectors(r,n),zw.subVectors(e,n);const o=al.dot(al),a=al.dot(Du),l=al.dot(zw),u=Du.dot(Du),c=Du.dot(zw),h=o*u-a*a;if(h===0)return s.set(-2,-1,-1);const f=1/h,d=(u*l-a*c)*f,v=(o*c-a*l)*f;return s.set(1-d-v,v,d)}static containsPoint(e,n,r,i){return this.getBarycoord(e,n,r,i,Ou),Ou.x>=0&&Ou.y>=0&&Ou.x+Ou.y<=1}static getUV(e,n,r,i,s,o,a,l){return d1===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),d1=!0),this.getInterpolation(e,n,r,i,s,o,a,l)}static getInterpolation(e,n,r,i,s,o,a,l){return this.getBarycoord(e,n,r,i,Ou),l.setScalar(0),l.addScaledVector(s,Ou.x),l.addScaledVector(o,Ou.y),l.addScaledVector(a,Ou.z),l}static isFrontFacing(e,n,r,i){return al.subVectors(r,n),Du.subVectors(e,n),al.cross(Du).dot(i)<0}set(e,n,r){return this.a.copy(e),this.b.copy(n),this.c.copy(r),this}setFromPointsAndIndices(e,n,r,i){return this.a.copy(e[n]),this.b.copy(e[r]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,n,r,i){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,r),this.c.fromBufferAttribute(e,i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return al.subVectors(this.c,this.b),Du.subVectors(this.a,this.b),al.cross(Du).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Io.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return Io.getBarycoord(e,this.a,this.b,this.c,n)}getUV(e,n,r,i,s){return d1===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),d1=!0),Io.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}getInterpolation(e,n,r,i,s){return Io.getInterpolation(e,this.a,this.b,this.c,n,r,i,s)}containsPoint(e){return Io.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Io.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const r=this.a,i=this.b,s=this.c;let o,a;Kd.subVectors(i,r),Jd.subVectors(s,r),Hw.subVectors(e,r);const l=Kd.dot(Hw),u=Jd.dot(Hw);if(l<=0&&u<=0)return n.copy(r);Gw.subVectors(e,i);const c=Kd.dot(Gw),h=Jd.dot(Gw);if(c>=0&&h<=c)return n.copy(i);const f=l*h-c*u;if(f<=0&&l>=0&&c<=0)return o=l/(l-c),n.copy(r).addScaledVector(Kd,o);Vw.subVectors(e,s);const d=Kd.dot(Vw),v=Jd.dot(Vw);if(v>=0&&d<=v)return n.copy(s);const x=d*u-l*v;if(x<=0&&u>=0&&v<=0)return a=u/(u-v),n.copy(r).addScaledVector(Jd,a);const w=c*v-d*h;if(w<=0&&h-c>=0&&d-v>=0)return uA.subVectors(s,i),a=(h-c)/(h-c+(d-v)),n.copy(i).addScaledVector(uA,a);const g=1/(w+x+f);return o=x*g,a=f*g,n.copy(r).addScaledVector(Kd,o).addScaledVector(Jd,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let UU=0;class Fs extends fc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:UU++}),this.uuid=aa(),this.name="",this.type="Material",this.blending=Wf,this.side=ac,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=gM,this.blendDst=vM,this.blendEquation=Cf,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=x2,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=I4,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Fy,this.stencilZFail=Fy,this.stencilZPass=Fy,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const r=e[n];if(r===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const i=this[n];if(i===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}i&&i.isColor?i.set(r):i&&i.isVector3&&r&&r.isVector3?i.copy(r):this[n]=r}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const r={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.color&&this.color.isColor&&(r.color=this.color.getHex()),this.roughness!==void 0&&(r.roughness=this.roughness),this.metalness!==void 0&&(r.metalness=this.metalness),this.sheen!==void 0&&(r.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(r.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(r.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(r.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(r.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(r.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(r.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(r.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(r.shininess=this.shininess),this.clearcoat!==void 0&&(r.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(r.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(r.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(r.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,r.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(r.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(r.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(r.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(r.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(r.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(r.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(r.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(r.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(r.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(r.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(r.lightMap=this.lightMap.toJSON(e).uuid,r.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(r.aoMap=this.aoMap.toJSON(e).uuid,r.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(r.bumpMap=this.bumpMap.toJSON(e).uuid,r.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(r.normalMap=this.normalMap.toJSON(e).uuid,r.normalMapType=this.normalMapType,r.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(r.displacementMap=this.displacementMap.toJSON(e).uuid,r.displacementScale=this.displacementScale,r.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(r.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(r.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(r.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(r.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(r.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(r.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(r.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(r.combine=this.combine)),this.envMapIntensity!==void 0&&(r.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(r.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(r.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(r.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(r.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(r.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(r.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(r.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(r.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(r.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(r.size=this.size),this.shadowSide!==null&&(r.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(r.sizeAttenuation=this.sizeAttenuation),this.blending!==Wf&&(r.blending=this.blending),this.side!==ac&&(r.side=this.side),this.vertexColors&&(r.vertexColors=!0),this.opacity<1&&(r.opacity=this.opacity),this.transparent===!0&&(r.transparent=this.transparent),r.depthFunc=this.depthFunc,r.depthTest=this.depthTest,r.depthWrite=this.depthWrite,r.colorWrite=this.colorWrite,r.stencilWrite=this.stencilWrite,r.stencilWriteMask=this.stencilWriteMask,r.stencilFunc=this.stencilFunc,r.stencilRef=this.stencilRef,r.stencilFuncMask=this.stencilFuncMask,r.stencilFail=this.stencilFail,r.stencilZFail=this.stencilZFail,r.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(r.rotation=this.rotation),this.polygonOffset===!0&&(r.polygonOffset=!0),this.polygonOffsetFactor!==0&&(r.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(r.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(r.linewidth=this.linewidth),this.dashSize!==void 0&&(r.dashSize=this.dashSize),this.gapSize!==void 0&&(r.gapSize=this.gapSize),this.scale!==void 0&&(r.scale=this.scale),this.dithering===!0&&(r.dithering=!0),this.alphaTest>0&&(r.alphaTest=this.alphaTest),this.alphaHash===!0&&(r.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(r.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(r.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(r.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(r.wireframe=this.wireframe),this.wireframeLinewidth>1&&(r.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(r.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(r.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(r.flatShading=this.flatShading),this.visible===!1&&(r.visible=!1),this.toneMapped===!1&&(r.toneMapped=!1),this.fog===!1&&(r.fog=!1),Object.keys(this.userData).length>0&&(r.userData=this.userData);function i(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=i(e.textures),o=i(e.images);s.length>0&&(r.textures=s),o.length>0&&(r.images=o)}return r}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let r=null;if(n!==null){const i=n.length;r=new Array(i);for(let s=0;s!==i;++s)r[s]=n[s].clone()}return this.clippingPlanes=r,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const j4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ll={h:0,s:0,l:0},p1={h:0,s:0,l:0};function Ww(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}class Zt{constructor(e,n,r){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,r)}set(e,n,r){if(n===void 0&&r===void 0){const i=e;i&&i.isColor?this.copy(i):typeof i=="number"?this.setHex(i):typeof i=="string"&&this.setStyle(i)}else this.setRGB(e,n,r);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=Gn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Fa.toWorkingColorSpace(this,n),this}setRGB(e,n,r,i=Fa.workingColorSpace){return this.r=e,this.g=n,this.b=r,Fa.toWorkingColorSpace(this,i),this}setHSL(e,n,r,i=Fa.workingColorSpace){if(e=PM(e,1),n=Ti(n,0,1),r=Ti(r,0,1),n===0)this.r=this.g=this.b=r;else{const s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;this.r=Ww(o,s,e+1/3),this.g=Ww(o,s,e),this.b=Ww(o,s,e-1/3)}return Fa.toWorkingColorSpace(this,i),this}setStyle(e,n=Gn){function r(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let i;if(i=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=i[1],a=i[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(i=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=i[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=Gn){const r=j4[e.toLowerCase()];return r!==void 0?this.setHex(r,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Xp(e.r),this.g=Xp(e.g),this.b=Xp(e.b),this}copyLinearToSRGB(e){return this.r=kw(e.r),this.g=kw(e.g),this.b=kw(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Gn){return Fa.fromWorkingColorSpace(js.copy(this),e),Math.round(Ti(js.r*255,0,255))*65536+Math.round(Ti(js.g*255,0,255))*256+Math.round(Ti(js.b*255,0,255))}getHexString(e=Gn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=Fa.workingColorSpace){Fa.fromWorkingColorSpace(js.copy(this),n);const r=js.r,i=js.g,s=js.b,o=Math.max(r,i,s),a=Math.min(r,i,s);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const h=o-a;switch(u=c<=.5?h/(o+a):h/(2-o-a),o){case r:l=(i-s)/h+(i<s?6:0);break;case i:l=(s-r)/h+2;break;case s:l=(r-i)/h+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,n=Fa.workingColorSpace){return Fa.fromWorkingColorSpace(js.copy(this),n),e.r=js.r,e.g=js.g,e.b=js.b,e}getStyle(e=Gn){Fa.fromWorkingColorSpace(js.copy(this),e);const n=js.r,r=js.g,i=js.b;return e!==Gn?`color(${e} ${n.toFixed(3)} ${r.toFixed(3)} ${i.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(r*255)},${Math.round(i*255)})`}offsetHSL(e,n,r){return this.getHSL(ll),ll.h+=e,ll.s+=n,ll.l+=r,this.setHSL(ll.h,ll.s,ll.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,r){return this.r=e.r+(n.r-e.r)*r,this.g=e.g+(n.g-e.g)*r,this.b=e.b+(n.b-e.b)*r,this}lerpHSL(e,n){this.getHSL(ll),e.getHSL(p1);const r=qg(ll.h,p1.h,n),i=qg(ll.s,p1.s,n),s=qg(ll.l,p1.l,n);return this.setHSL(r,i,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,r=this.g,i=this.b,s=e.elements;return this.r=s[0]*n+s[3]*r+s[6]*i,this.g=s[1]*n+s[4]*r+s[7]*i,this.b=s[2]*n+s[5]*r+s[8]*i,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const js=new Zt;Zt.NAMES=j4;class Gh extends Fs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=nv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const qu=BU();function BU(){const t=new ArrayBuffer(4),e=new Float32Array(t),n=new Uint32Array(t),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(r[l]=0,r[l|256]=32768,i[l]=24,i[l|256]=24):u<-14?(r[l]=1024>>-u-14,r[l|256]=1024>>-u-14|32768,i[l]=-u-1,i[l|256]=-u-1):u<=15?(r[l]=u+15<<10,r[l|256]=u+15<<10|32768,i[l]=13,i[l|256]=13):u<128?(r[l]=31744,r[l|256]=64512,i[l]=24,i[l|256]=24):(r[l]=31744,r[l|256]=64512,i[l]=13,i[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function Ro(t){Math.abs(t)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),t=Ti(t,-65504,65504),qu.floatView[0]=t;const e=qu.uint32View[0],n=e>>23&511;return qu.baseTable[n]+((e&8388607)>>qu.shiftTable[n])}function kg(t){const e=t>>10;return qu.uint32View[0]=qu.mantissaTable[qu.offsetTable[e]+(t&1023)]+qu.exponentTable[e],qu.floatView[0]}const Uf={toHalfFloat:Ro,fromHalfFloat:kg},ji=new ge,m1=new wt;class ur{constructor(e,n,r=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=r,this.usage=L0,this.updateRange={offset:0,count:-1},this.gpuType=ro,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,r){e*=this.itemSize,r*=n.itemSize;for(let i=0,s=this.itemSize;i<s;i++)this.array[e+i]=n.array[r+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,r=this.count;n<r;n++)m1.fromBufferAttribute(this,n),m1.applyMatrix3(e),this.setXY(n,m1.x,m1.y);else if(this.itemSize===3)for(let n=0,r=this.count;n<r;n++)ji.fromBufferAttribute(this,n),ji.applyMatrix3(e),this.setXYZ(n,ji.x,ji.y,ji.z);return this}applyMatrix4(e){for(let n=0,r=this.count;n<r;n++)ji.fromBufferAttribute(this,n),ji.applyMatrix4(e),this.setXYZ(n,ji.x,ji.y,ji.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)ji.fromBufferAttribute(this,n),ji.applyNormalMatrix(e),this.setXYZ(n,ji.x,ji.y,ji.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)ji.fromBufferAttribute(this,n),ji.transformDirection(e),this.setXYZ(n,ji.x,ji.y,ji.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let r=this.array[e*this.itemSize+n];return this.normalized&&(r=No(r,this.array)),r}setComponent(e,n,r){return this.normalized&&(r=Yn(r,this.array)),this.array[e*this.itemSize+n]=r,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=No(n,this.array)),n}setX(e,n){return this.normalized&&(n=Yn(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=No(n,this.array)),n}setY(e,n){return this.normalized&&(n=Yn(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=No(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Yn(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=No(n,this.array)),n}setW(e,n){return this.normalized&&(n=Yn(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Yn(n,this.array),r=Yn(r,this.array)),this.array[e+0]=n,this.array[e+1]=r,this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Yn(n,this.array),r=Yn(r,this.array),i=Yn(i,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Yn(n,this.array),r=Yn(r,this.array),i=Yn(i,this.array),s=Yn(s,this.array)),this.array[e+0]=n,this.array[e+1]=r,this.array[e+2]=i,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==L0&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class zU extends ur{constructor(e,n,r){super(new Int8Array(e),n,r)}}class HU extends ur{constructor(e,n,r){super(new Uint8Array(e),n,r)}}class GU extends ur{constructor(e,n,r){super(new Uint8ClampedArray(e),n,r)}}class VU extends ur{constructor(e,n,r){super(new Int16Array(e),n,r)}}class IM extends ur{constructor(e,n,r){super(new Uint16Array(e),n,r)}}class WU extends ur{constructor(e,n,r){super(new Int32Array(e),n,r)}}class NM extends ur{constructor(e,n,r){super(new Uint32Array(e),n,r)}}class jU extends ur{constructor(e,n,r){super(new Uint16Array(e),n,r),this.isFloat16BufferAttribute=!0}getX(e){let n=kg(this.array[e*this.itemSize]);return this.normalized&&(n=No(n,this.array)),n}setX(e,n){return this.normalized&&(n=Yn(n,this.array)),this.array[e*this.itemSize]=Ro(n),this}getY(e){let n=kg(this.array[e*this.itemSize+1]);return this.normalized&&(n=No(n,this.array)),n}setY(e,n){return this.normalized&&(n=Yn(n,this.array)),this.array[e*this.itemSize+1]=Ro(n),this}getZ(e){let n=kg(this.array[e*this.itemSize+2]);return this.normalized&&(n=No(n,this.array)),n}setZ(e,n){return this.normalized&&(n=Yn(n,this.array)),this.array[e*this.itemSize+2]=Ro(n),this}getW(e){let n=kg(this.array[e*this.itemSize+3]);return this.normalized&&(n=No(n,this.array)),n}setW(e,n){return this.normalized&&(n=Yn(n,this.array)),this.array[e*this.itemSize+3]=Ro(n),this}setXY(e,n,r){return e*=this.itemSize,this.normalized&&(n=Yn(n,this.array),r=Yn(r,this.array)),this.array[e+0]=Ro(n),this.array[e+1]=Ro(r),this}setXYZ(e,n,r,i){return e*=this.itemSize,this.normalized&&(n=Yn(n,this.array),r=Yn(r,this.array),i=Yn(i,this.array)),this.array[e+0]=Ro(n),this.array[e+1]=Ro(r),this.array[e+2]=Ro(i),this}setXYZW(e,n,r,i,s){return e*=this.itemSize,this.normalized&&(n=Yn(n,this.array),r=Yn(r,this.array),i=Yn(i,this.array),s=Yn(s,this.array)),this.array[e+0]=Ro(n),this.array[e+1]=Ro(r),this.array[e+2]=Ro(i),this.array[e+3]=Ro(s),this}}class nn extends ur{constructor(e,n,r){super(new Float32Array(e),n,r)}}class XU extends ur{constructor(e,n,r){super(new Float64Array(e),n,r)}}let qU=0;const Na=new Hn,jw=new dr,Qd=new ge,ta=new Xa,fg=new Xa,xs=new ge;class An extends fc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:qU++}),this.uuid=aa(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(V4(e)?NM:IM)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,r=0){this.groups.push({start:e,count:n,materialIndex:r})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const r=this.attributes.normal;if(r!==void 0){const s=new Jn().getNormalMatrix(e);r.applyNormalMatrix(s),r.needsUpdate=!0}const i=this.attributes.tangent;return i!==void 0&&(i.transformDirection(e),i.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Na.makeRotationFromQuaternion(e),this.applyMatrix4(Na),this}rotateX(e){return Na.makeRotationX(e),this.applyMatrix4(Na),this}rotateY(e){return Na.makeRotationY(e),this.applyMatrix4(Na),this}rotateZ(e){return Na.makeRotationZ(e),this.applyMatrix4(Na),this}translate(e,n,r){return Na.makeTranslation(e,n,r),this.applyMatrix4(Na),this}scale(e,n,r){return Na.makeScale(e,n,r),this.applyMatrix4(Na),this}lookAt(e){return jw.lookAt(e),jw.updateMatrix(),this.applyMatrix4(jw.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Qd).negate(),this.translate(Qd.x,Qd.y,Qd.z),this}setFromPoints(e){const n=[];for(let r=0,i=e.length;r<i;r++){const s=e[r];n.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new nn(n,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Xa);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new ge(-1/0,-1/0,-1/0),new ge(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let r=0,i=n.length;r<i;r++){const s=n[r];ta.setFromBufferAttribute(s),this.morphTargetsRelative?(xs.addVectors(this.boundingBox.min,ta.min),this.boundingBox.expandByPoint(xs),xs.addVectors(this.boundingBox.max,ta.max),this.boundingBox.expandByPoint(xs)):(this.boundingBox.expandByPoint(ta.min),this.boundingBox.expandByPoint(ta.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Pl);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new ge,1/0);return}if(e){const r=this.boundingSphere.center;if(ta.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];fg.setFromBufferAttribute(a),this.morphTargetsRelative?(xs.addVectors(ta.min,fg.min),ta.expandByPoint(xs),xs.addVectors(ta.max,fg.max),ta.expandByPoint(xs)):(ta.expandByPoint(fg.min),ta.expandByPoint(fg.max))}ta.getCenter(r);let i=0;for(let s=0,o=e.count;s<o;s++)xs.fromBufferAttribute(e,s),i=Math.max(i,r.distanceToSquared(xs));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)xs.fromBufferAttribute(a,u),l&&(Qd.fromBufferAttribute(e,u),xs.add(Qd)),i=Math.max(i,r.distanceToSquared(xs))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const r=e.array,i=n.position.array,s=n.normal.array,o=n.uv.array,a=i.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new ur(new Float32Array(4*a),4));const l=this.getAttribute("tangent").array,u=[],c=[];for(let D=0;D<a;D++)u[D]=new ge,c[D]=new ge;const h=new ge,f=new ge,d=new ge,v=new wt,x=new wt,w=new wt,g=new ge,S=new ge;function _(D,O,B){h.fromArray(i,D*3),f.fromArray(i,O*3),d.fromArray(i,B*3),v.fromArray(o,D*2),x.fromArray(o,O*2),w.fromArray(o,B*2),f.sub(h),d.sub(h),x.sub(v),w.sub(v);const V=1/(x.x*w.y-w.x*x.y);isFinite(V)&&(g.copy(f).multiplyScalar(w.y).addScaledVector(d,-x.y).multiplyScalar(V),S.copy(d).multiplyScalar(x.x).addScaledVector(f,-w.x).multiplyScalar(V),u[D].add(g),u[O].add(g),u[B].add(g),c[D].add(S),c[O].add(S),c[B].add(S))}let T=this.groups;T.length===0&&(T=[{start:0,count:r.length}]);for(let D=0,O=T.length;D<O;++D){const B=T[D],V=B.start,H=B.count;for(let ee=V,se=V+H;ee<se;ee+=3)_(r[ee+0],r[ee+1],r[ee+2])}const L=new ge,k=new ge,N=new ge,R=new ge;function P(D){N.fromArray(s,D*3),R.copy(N);const O=u[D];L.copy(O),L.sub(N.multiplyScalar(N.dot(O))).normalize(),k.crossVectors(R,O);const V=k.dot(c[D])<0?-1:1;l[D*4]=L.x,l[D*4+1]=L.y,l[D*4+2]=L.z,l[D*4+3]=V}for(let D=0,O=T.length;D<O;++D){const B=T[D],V=B.start,H=B.count;for(let ee=V,se=V+H;ee<se;ee+=3)P(r[ee+0]),P(r[ee+1]),P(r[ee+2])}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let r=this.getAttribute("normal");if(r===void 0)r=new ur(new Float32Array(n.count*3),3),this.setAttribute("normal",r);else for(let f=0,d=r.count;f<d;f++)r.setXYZ(f,0,0,0);const i=new ge,s=new ge,o=new ge,a=new ge,l=new ge,u=new ge,c=new ge,h=new ge;if(e)for(let f=0,d=e.count;f<d;f+=3){const v=e.getX(f+0),x=e.getX(f+1),w=e.getX(f+2);i.fromBufferAttribute(n,v),s.fromBufferAttribute(n,x),o.fromBufferAttribute(n,w),c.subVectors(o,s),h.subVectors(i,s),c.cross(h),a.fromBufferAttribute(r,v),l.fromBufferAttribute(r,x),u.fromBufferAttribute(r,w),a.add(c),l.add(c),u.add(c),r.setXYZ(v,a.x,a.y,a.z),r.setXYZ(x,l.x,l.y,l.z),r.setXYZ(w,u.x,u.y,u.z)}else for(let f=0,d=n.count;f<d;f+=3)i.fromBufferAttribute(n,f+0),s.fromBufferAttribute(n,f+1),o.fromBufferAttribute(n,f+2),c.subVectors(o,s),h.subVectors(i,s),c.cross(h),r.setXYZ(f+0,c.x,c.y,c.z),r.setXYZ(f+1,c.x,c.y,c.z),r.setXYZ(f+2,c.x,c.y,c.z);this.normalizeNormals(),r.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,r=e.count;n<r;n++)xs.fromBufferAttribute(e,n),xs.normalize(),e.setXYZ(n,xs.x,xs.y,xs.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,h=a.normalized,f=new u.constructor(l.length*c);let d=0,v=0;for(let x=0,w=l.length;x<w;x++){a.isInterleavedBufferAttribute?d=l[x]*a.data.stride+a.offset:d=l[x]*c;for(let g=0;g<c;g++)f[v++]=u[d++]}return new ur(f,c,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new An,r=this.index.array,i=this.attributes;for(const a in i){const l=i[a],u=e(l,r);n.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let c=0,h=u.length;c<h;c++){const f=u[c],d=e(f,r);l.push(d)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];n.addGroup(u.start,u.count,u.materialIndex)}return n}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const r=this.attributes;for(const l in r){const u=r[l];e.data.attributes[l]=u.toJSON(e.data)}const i={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let h=0,f=u.length;h<f;h++){const d=u[h];c.push(d.toJSON(e.data))}c.length>0&&(i[l]=c,s=!0)}s&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const r=e.index;r!==null&&this.setIndex(r.clone(n));const i=e.attributes;for(const u in i){const c=i[u];this.setAttribute(u,c.clone(n))}const s=e.morphAttributes;for(const u in s){const c=[],h=s[u];for(let f=0,d=h.length;f<d;f++)c.push(h[f].clone(n));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const h=o[u];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const cA=new Hn,pf=new hd,g1=new Pl,hA=new ge,ep=new ge,tp=new ge,np=new ge,Xw=new ge,v1=new ge,y1=new wt,x1=new wt,w1=new wt,fA=new ge,dA=new ge,pA=new ge,S1=new ge,_1=new ge;class qi extends dr{constructor(e=new An,n=new Gh){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const r=this.geometry,i=r.attributes.position,s=r.morphAttributes.position,o=r.morphTargetsRelative;n.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(s&&a){v1.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=a[l],h=s[l];c!==0&&(Xw.fromBufferAttribute(h,e),o?v1.addScaledVector(Xw,c):v1.addScaledVector(Xw.sub(n),c))}n.add(v1)}return n}raycast(e,n){const r=this.geometry,i=this.material,s=this.matrixWorld;i!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),g1.copy(r.boundingSphere),g1.applyMatrix4(s),pf.copy(e.ray).recast(e.near),!(g1.containsPoint(pf.origin)===!1&&(pf.intersectSphere(g1,hA)===null||pf.origin.distanceToSquared(hA)>(e.far-e.near)**2))&&(cA.copy(s).invert(),pf.copy(e.ray).applyMatrix4(cA),!(r.boundingBox!==null&&pf.intersectsBox(r.boundingBox)===!1)&&this._computeIntersections(e,n,pf)))}_computeIntersections(e,n,r){let i;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,c=s.attributes.uv1,h=s.attributes.normal,f=s.groups,d=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,x=f.length;v<x;v++){const w=f[v],g=o[w.materialIndex],S=Math.max(w.start,d.start),_=Math.min(a.count,Math.min(w.start+w.count,d.start+d.count));for(let T=S,L=_;T<L;T+=3){const k=a.getX(T),N=a.getX(T+1),R=a.getX(T+2);i=b1(this,g,e,r,u,c,h,k,N,R),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=w.materialIndex,n.push(i))}}else{const v=Math.max(0,d.start),x=Math.min(a.count,d.start+d.count);for(let w=v,g=x;w<g;w+=3){const S=a.getX(w),_=a.getX(w+1),T=a.getX(w+2);i=b1(this,o,e,r,u,c,h,S,_,T),i&&(i.faceIndex=Math.floor(w/3),n.push(i))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,x=f.length;v<x;v++){const w=f[v],g=o[w.materialIndex],S=Math.max(w.start,d.start),_=Math.min(l.count,Math.min(w.start+w.count,d.start+d.count));for(let T=S,L=_;T<L;T+=3){const k=T,N=T+1,R=T+2;i=b1(this,g,e,r,u,c,h,k,N,R),i&&(i.faceIndex=Math.floor(T/3),i.face.materialIndex=w.materialIndex,n.push(i))}}else{const v=Math.max(0,d.start),x=Math.min(l.count,d.start+d.count);for(let w=v,g=x;w<g;w+=3){const S=w,_=w+1,T=w+2;i=b1(this,o,e,r,u,c,h,S,_,T),i&&(i.faceIndex=Math.floor(w/3),n.push(i))}}}}function YU(t,e,n,r,i,s,o,a){let l;if(e.side===yo?l=r.intersectTriangle(o,s,i,!0,a):l=r.intersectTriangle(i,s,o,e.side===ac,a),l===null)return null;_1.copy(a),_1.applyMatrix4(t.matrixWorld);const u=n.ray.origin.distanceTo(_1);return u<n.near||u>n.far?null:{distance:u,point:_1.clone(),object:t}}function b1(t,e,n,r,i,s,o,a,l,u){t.getVertexPosition(a,ep),t.getVertexPosition(l,tp),t.getVertexPosition(u,np);const c=YU(t,e,n,r,ep,tp,np,S1);if(c){i&&(y1.fromBufferAttribute(i,a),x1.fromBufferAttribute(i,l),w1.fromBufferAttribute(i,u),c.uv=Io.getInterpolation(S1,ep,tp,np,y1,x1,w1,new wt)),s&&(y1.fromBufferAttribute(s,a),x1.fromBufferAttribute(s,l),w1.fromBufferAttribute(s,u),c.uv1=Io.getInterpolation(S1,ep,tp,np,y1,x1,w1,new wt),c.uv2=c.uv1),o&&(fA.fromBufferAttribute(o,a),dA.fromBufferAttribute(o,l),pA.fromBufferAttribute(o,u),c.normal=Io.getInterpolation(S1,ep,tp,np,fA,dA,pA,new ge),c.normal.dot(r.direction)>0&&c.normal.multiplyScalar(-1));const h={a,b:l,c:u,normal:new ge,materialIndex:0};Io.getNormal(ep,tp,np,h.normal),c.face=h}return c}class fd extends An{constructor(e=1,n=1,r=1,i=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:r,widthSegments:i,heightSegments:s,depthSegments:o};const a=this;i=Math.floor(i),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],c=[],h=[];let f=0,d=0;v("z","y","x",-1,-1,r,n,e,o,s,0),v("z","y","x",1,-1,r,n,-e,o,s,1),v("x","z","y",1,1,e,r,n,i,o,2),v("x","z","y",1,-1,e,r,-n,i,o,3),v("x","y","z",1,-1,e,n,r,i,s,4),v("x","y","z",-1,-1,e,n,-r,i,s,5),this.setIndex(l),this.setAttribute("position",new nn(u,3)),this.setAttribute("normal",new nn(c,3)),this.setAttribute("uv",new nn(h,2));function v(x,w,g,S,_,T,L,k,N,R,P){const D=T/N,O=L/R,B=T/2,V=L/2,H=k/2,ee=N+1,se=R+1;let ce=0,W=0;const Y=new ge;for(let j=0;j<se;j++){const re=j*O-V;for(let I=0;I<ee;I++){const X=I*D-B;Y[x]=X*S,Y[w]=re*_,Y[g]=H,u.push(Y.x,Y.y,Y.z),Y[x]=0,Y[w]=0,Y[g]=k>0?1:-1,c.push(Y.x,Y.y,Y.z),h.push(I/N),h.push(1-j/R),ce+=1}}for(let j=0;j<R;j++)for(let re=0;re<N;re++){const I=f+re+ee*j,X=f+re+ee*(j+1),J=f+(re+1)+ee*(j+1),ae=f+(re+1)+ee*j;l.push(I,X,ae),l.push(X,J,ae),W+=6}a.addGroup(d,W,P),d+=W,f+=ce}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fd(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function fm(t){const e={};for(const n in t){e[n]={};for(const r in t[n]){const i=t[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][r]=null):e[n][r]=i.clone():Array.isArray(i)?e[n][r]=i.slice():e[n][r]=i}}return e}function fo(t){const e={};for(let n=0;n<t.length;n++){const r=fm(t[n]);for(const i in r)e[i]=r[i]}return e}function ZU(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function X4(t){return t.getRenderTarget()===null?t.outputColorSpace:Ml}const q4={clone:fm,merge:fo};var $U=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,KU=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Al extends Fs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=$U,this.fragmentShader=KU,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=fm(e.uniforms),this.uniformsGroups=ZU(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const i in this.uniforms){const o=this.uniforms[i].value;o&&o.isTexture?n.uniforms[i]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[i]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[i]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[i]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[i]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[i]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[i]={type:"m4",value:o.toArray()}:n.uniforms[i]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const r={};for(const i in this.extensions)this.extensions[i]===!0&&(r[i]=!0);return Object.keys(r).length>0&&(n.extensions=r),n}}class iv extends dr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Hn,this.projectionMatrix=new Hn,this.projectionMatrixInverse=new Hn,this.coordinateSystem=Ql}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(-n[8],-n[9],-n[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class mi extends iv{constructor(e=50,n=1,r=.1,i=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=r,this.far=i,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=hm*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(jf*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return hm*2*Math.atan(Math.tan(jf*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,n,r,i,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(jf*.5*this.fov)/this.zoom,r=2*n,i=this.aspect*r,s=-.5*i;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*i/l,n-=o.offsetY*r/u,i*=o.width/l,r*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+i,n,n-r,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const rp=-90,ip=1;class Y4 extends dr{constructor(e,n,r){super(),this.type="CubeCamera",this.renderTarget=r,this.coordinateSystem=null;const i=new mi(rp,ip,e,n);i.layers=this.layers,this.add(i);const s=new mi(rp,ip,e,n);s.layers=this.layers,this.add(s);const o=new mi(rp,ip,e,n);o.layers=this.layers,this.add(o);const a=new mi(rp,ip,e,n);a.layers=this.layers,this.add(a);const l=new mi(rp,ip,e,n);l.layers=this.layers,this.add(l);const u=new mi(rp,ip,e,n);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[r,i,s,o,a,l]=n;for(const u of n)this.remove(u);if(e===Ql)r.up.set(0,1,0),r.lookAt(1,0,0),i.up.set(0,1,0),i.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===P0)r.up.set(0,-1,0),r.lookAt(-1,0,0),i.up.set(0,-1,0),i.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of n)this.add(u),u.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const r=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,s,o,a,l,u]=this.children,c=e.getRenderTarget(),h=e.xr.enabled;e.xr.enabled=!1;const f=r.texture.generateMipmaps;r.texture.generateMipmaps=!1,e.setRenderTarget(r,0),e.render(n,i),e.setRenderTarget(r,1),e.render(n,s),e.setRenderTarget(r,2),e.render(n,o),e.setRenderTarget(r,3),e.render(n,a),e.setRenderTarget(r,4),e.render(n,l),r.texture.generateMipmaps=f,e.setRenderTarget(r,5),e.render(n,u),e.setRenderTarget(c),e.xr.enabled=h,r.texture.needsPMREMUpdate=!0}}class sv extends Ci{constructor(e,n,r,i,s,o,a,l,u,c){e=e!==void 0?e:[],n=n!==void 0?n:cu,super(e,n,r,i,s,o,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class FM extends El{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const r={width:e,height:e,depth:1},i=[r,r,r,r,r,r];n.encoding!==void 0&&(Yg("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),n.colorSpace=n.encoding===Eh?Gn:Ah),this.texture=new sv(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=n.generateMipmaps!==void 0?n.generateMipmaps:!1,this.texture.minFilter=n.minFilter!==void 0?n.minFilter:Kr}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const r={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},i=new fd(5,5,5),s=new Al({name:"CubemapFromEquirect",uniforms:fm(r.uniforms),vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,side:yo,blending:tc});s.uniforms.tEquirect.value=n;const o=new qi(i,s),a=n.minFilter;return n.minFilter===Rh&&(n.minFilter=Kr),new Y4(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n,r,i){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,r,i);e.setRenderTarget(s)}}const qw=new ge,JU=new ge,QU=new Jn;let Wu=class{constructor(e=new ge(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,r,i){return this.normal.set(e,n,r),this.constant=i,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,r){const i=qw.subVectors(r,n).cross(JU.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const r=e.delta(qw),i=this.normal.dot(r);if(i===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/i;return s<0||s>1?null:n.copy(e.start).addScaledVector(r,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),r=this.distanceToPoint(e.end);return n<0&&r>0||r<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const r=n||QU.getNormalMatrix(e),i=this.coplanarPoint(qw).applyMatrix4(e),s=this.normal.applyMatrix3(r).normalize();return this.constant=-i.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const mf=new Pl,M1=new ge;class sx{constructor(e=new Wu,n=new Wu,r=new Wu,i=new Wu,s=new Wu,o=new Wu){this.planes=[e,n,r,i,s,o]}set(e,n,r,i,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(r),a[3].copy(i),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let r=0;r<6;r++)n[r].copy(e.planes[r]);return this}setFromProjectionMatrix(e,n=Ql){const r=this.planes,i=e.elements,s=i[0],o=i[1],a=i[2],l=i[3],u=i[4],c=i[5],h=i[6],f=i[7],d=i[8],v=i[9],x=i[10],w=i[11],g=i[12],S=i[13],_=i[14],T=i[15];if(r[0].setComponents(l-s,f-u,w-d,T-g).normalize(),r[1].setComponents(l+s,f+u,w+d,T+g).normalize(),r[2].setComponents(l+o,f+c,w+v,T+S).normalize(),r[3].setComponents(l-o,f-c,w-v,T-S).normalize(),r[4].setComponents(l-a,f-h,w-x,T-_).normalize(),n===Ql)r[5].setComponents(l+a,f+h,w+x,T+_).normalize();else if(n===P0)r[5].setComponents(a,h,x,_).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),mf.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),mf.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(mf)}intersectsSprite(e){return mf.center.set(0,0,0),mf.radius=.7071067811865476,mf.applyMatrix4(e.matrixWorld),this.intersectsSphere(mf)}intersectsSphere(e){const n=this.planes,r=e.center,i=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(r)<i)return!1;return!0}intersectsBox(e){const n=this.planes;for(let r=0;r<6;r++){const i=n[r];if(M1.x=i.normal.x>0?e.max.x:e.min.x,M1.y=i.normal.y>0?e.max.y:e.min.y,M1.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(M1)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let r=0;r<6;r++)if(n[r].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Z4(){let t=null,e=!1,n=null,r=null;function i(s,o){n(s,o),r=t.requestAnimationFrame(i)}return{start:function(){e!==!0&&n!==null&&(r=t.requestAnimationFrame(i),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function e8(t,e){const n=e.isWebGL2,r=new WeakMap;function i(u,c){const h=u.array,f=u.usage,d=t.createBuffer();t.bindBuffer(c,d),t.bufferData(c,h,f),u.onUploadCallback();let v;if(h instanceof Float32Array)v=t.FLOAT;else if(h instanceof Uint16Array)if(u.isFloat16BufferAttribute)if(n)v=t.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else v=t.UNSIGNED_SHORT;else if(h instanceof Int16Array)v=t.SHORT;else if(h instanceof Uint32Array)v=t.UNSIGNED_INT;else if(h instanceof Int32Array)v=t.INT;else if(h instanceof Int8Array)v=t.BYTE;else if(h instanceof Uint8Array)v=t.UNSIGNED_BYTE;else if(h instanceof Uint8ClampedArray)v=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+h);return{buffer:d,type:v,bytesPerElement:h.BYTES_PER_ELEMENT,version:u.version}}function s(u,c,h){const f=c.array,d=c.updateRange;t.bindBuffer(h,u),d.count===-1?t.bufferSubData(h,0,f):(n?t.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f,d.offset,d.count):t.bufferSubData(h,d.offset*f.BYTES_PER_ELEMENT,f.subarray(d.offset,d.offset+d.count)),d.count=-1),c.onUploadCallback()}function o(u){return u.isInterleavedBufferAttribute&&(u=u.data),r.get(u)}function a(u){u.isInterleavedBufferAttribute&&(u=u.data);const c=r.get(u);c&&(t.deleteBuffer(c.buffer),r.delete(u))}function l(u,c){if(u.isGLBufferAttribute){const f=r.get(u);(!f||f.version<u.version)&&r.set(u,{buffer:u.buffer,type:u.type,bytesPerElement:u.elementSize,version:u.version});return}u.isInterleavedBufferAttribute&&(u=u.data);const h=r.get(u);h===void 0?r.set(u,i(u,c)):h.version<u.version&&(s(h.buffer,u,c),h.version=u.version)}return{get:o,remove:a,update:l}}class ov extends An{constructor(e=1,n=1,r=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:r,heightSegments:i};const s=e/2,o=n/2,a=Math.floor(r),l=Math.floor(i),u=a+1,c=l+1,h=e/a,f=n/l,d=[],v=[],x=[],w=[];for(let g=0;g<c;g++){const S=g*f-o;for(let _=0;_<u;_++){const T=_*h-s;v.push(T,-S,0),x.push(0,0,1),w.push(_/a),w.push(1-g/l)}}for(let g=0;g<l;g++)for(let S=0;S<a;S++){const _=S+u*g,T=S+u*(g+1),L=S+1+u*(g+1),k=S+1+u*g;d.push(_,T,k),d.push(T,L,k)}this.setIndex(d),this.setAttribute("position",new nn(v,3)),this.setAttribute("normal",new nn(x,3)),this.setAttribute("uv",new nn(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ov(e.width,e.height,e.widthSegments,e.heightSegments)}}var t8=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,n8=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,r8=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,i8=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,s8=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,o8=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,a8=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,l8=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,u8=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,c8=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,h8=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,f8=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,d8=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,p8=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,m8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,g8=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,v8=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,y8=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,x8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,w8=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,S8=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,_8=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,b8=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,M8=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,E8=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,A8=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,T8=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,C8=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,L8="gl_FragColor = linearToOutputTexel( gl_FragColor );",P8=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,R8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,k8=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,I8=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,N8=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,F8=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,D8=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,O8=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,U8=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,B8=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,z8=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,H8=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,G8=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,V8=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,W8=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,j8=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,X8=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,q8=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Y8=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Z8=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,$8=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,K8=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,J8=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Q8=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,eB=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,tB=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,nB=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,rB=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,iB=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,sB=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,oB=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,aB=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,lB=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,uB=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,cB=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,hB=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,fB=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,dB=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,pB=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,mB=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,gB=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,vB=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,yB=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,xB=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,wB=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,SB=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,_B=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,bB=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,MB=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,EB=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,AB=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,TB=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,CB=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,LB=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,PB=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,RB=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,kB=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,IB=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,NB=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,FB=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,DB=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,OB=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,UB=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,BB=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,zB=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,HB=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,GB=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,VB=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,WB=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,jB=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,XB=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,qB=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,YB=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ZB=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,$B=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,KB=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const JB=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,QB=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ez=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tz=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,rz=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,iz=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,sz=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,oz=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,az=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,lz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,uz=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,cz=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,hz=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,fz=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,dz=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pz=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,mz=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gz=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,vz=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,yz=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,xz=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,wz=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Sz=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_z=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,bz=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Mz=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ez=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Az=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,Tz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Cz=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Lz=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Pz=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Rz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,qn={alphahash_fragment:t8,alphahash_pars_fragment:n8,alphamap_fragment:r8,alphamap_pars_fragment:i8,alphatest_fragment:s8,alphatest_pars_fragment:o8,aomap_fragment:a8,aomap_pars_fragment:l8,begin_vertex:u8,beginnormal_vertex:c8,bsdfs:h8,iridescence_fragment:f8,bumpmap_pars_fragment:d8,clipping_planes_fragment:p8,clipping_planes_pars_fragment:m8,clipping_planes_pars_vertex:g8,clipping_planes_vertex:v8,color_fragment:y8,color_pars_fragment:x8,color_pars_vertex:w8,color_vertex:S8,common:_8,cube_uv_reflection_fragment:b8,defaultnormal_vertex:M8,displacementmap_pars_vertex:E8,displacementmap_vertex:A8,emissivemap_fragment:T8,emissivemap_pars_fragment:C8,colorspace_fragment:L8,colorspace_pars_fragment:P8,envmap_fragment:R8,envmap_common_pars_fragment:k8,envmap_pars_fragment:I8,envmap_pars_vertex:N8,envmap_physical_pars_fragment:X8,envmap_vertex:F8,fog_vertex:D8,fog_pars_vertex:O8,fog_fragment:U8,fog_pars_fragment:B8,gradientmap_pars_fragment:z8,lightmap_fragment:H8,lightmap_pars_fragment:G8,lights_lambert_fragment:V8,lights_lambert_pars_fragment:W8,lights_pars_begin:j8,lights_toon_fragment:q8,lights_toon_pars_fragment:Y8,lights_phong_fragment:Z8,lights_phong_pars_fragment:$8,lights_physical_fragment:K8,lights_physical_pars_fragment:J8,lights_fragment_begin:Q8,lights_fragment_maps:eB,lights_fragment_end:tB,logdepthbuf_fragment:nB,logdepthbuf_pars_fragment:rB,logdepthbuf_pars_vertex:iB,logdepthbuf_vertex:sB,map_fragment:oB,map_pars_fragment:aB,map_particle_fragment:lB,map_particle_pars_fragment:uB,metalnessmap_fragment:cB,metalnessmap_pars_fragment:hB,morphcolor_vertex:fB,morphnormal_vertex:dB,morphtarget_pars_vertex:pB,morphtarget_vertex:mB,normal_fragment_begin:gB,normal_fragment_maps:vB,normal_pars_fragment:yB,normal_pars_vertex:xB,normal_vertex:wB,normalmap_pars_fragment:SB,clearcoat_normal_fragment_begin:_B,clearcoat_normal_fragment_maps:bB,clearcoat_pars_fragment:MB,iridescence_pars_fragment:EB,opaque_fragment:AB,packing:TB,premultiplied_alpha_fragment:CB,project_vertex:LB,dithering_fragment:PB,dithering_pars_fragment:RB,roughnessmap_fragment:kB,roughnessmap_pars_fragment:IB,shadowmap_pars_fragment:NB,shadowmap_pars_vertex:FB,shadowmap_vertex:DB,shadowmask_pars_fragment:OB,skinbase_vertex:UB,skinning_pars_vertex:BB,skinning_vertex:zB,skinnormal_vertex:HB,specularmap_fragment:GB,specularmap_pars_fragment:VB,tonemapping_fragment:WB,tonemapping_pars_fragment:jB,transmission_fragment:XB,transmission_pars_fragment:qB,uv_pars_fragment:YB,uv_pars_vertex:ZB,uv_vertex:$B,worldpos_vertex:KB,background_vert:JB,background_frag:QB,backgroundCube_vert:ez,backgroundCube_frag:tz,cube_vert:nz,cube_frag:rz,depth_vert:iz,depth_frag:sz,distanceRGBA_vert:oz,distanceRGBA_frag:az,equirect_vert:lz,equirect_frag:uz,linedashed_vert:cz,linedashed_frag:hz,meshbasic_vert:fz,meshbasic_frag:dz,meshlambert_vert:pz,meshlambert_frag:mz,meshmatcap_vert:gz,meshmatcap_frag:vz,meshnormal_vert:yz,meshnormal_frag:xz,meshphong_vert:wz,meshphong_frag:Sz,meshphysical_vert:_z,meshphysical_frag:bz,meshtoon_vert:Mz,meshtoon_frag:Ez,points_vert:Az,points_frag:Tz,shadow_vert:Cz,shadow_frag:Lz,sprite_vert:Pz,sprite_frag:Rz},Gt={common:{diffuse:{value:new Zt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Jn},alphaMap:{value:null},alphaMapTransform:{value:new Jn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Jn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Jn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Jn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Jn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Jn},normalScale:{value:new wt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Jn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Jn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Jn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Jn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Zt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Zt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Jn},alphaTest:{value:0},uvTransform:{value:new Jn}},sprite:{diffuse:{value:new Zt(16777215)},opacity:{value:1},center:{value:new wt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Jn},alphaMap:{value:null},alphaMapTransform:{value:new Jn},alphaTest:{value:0}}},vl={basic:{uniforms:fo([Gt.common,Gt.specularmap,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.fog]),vertexShader:qn.meshbasic_vert,fragmentShader:qn.meshbasic_frag},lambert:{uniforms:fo([Gt.common,Gt.specularmap,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.fog,Gt.lights,{emissive:{value:new Zt(0)}}]),vertexShader:qn.meshlambert_vert,fragmentShader:qn.meshlambert_frag},phong:{uniforms:fo([Gt.common,Gt.specularmap,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.fog,Gt.lights,{emissive:{value:new Zt(0)},specular:{value:new Zt(1118481)},shininess:{value:30}}]),vertexShader:qn.meshphong_vert,fragmentShader:qn.meshphong_frag},standard:{uniforms:fo([Gt.common,Gt.envmap,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.roughnessmap,Gt.metalnessmap,Gt.fog,Gt.lights,{emissive:{value:new Zt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:qn.meshphysical_vert,fragmentShader:qn.meshphysical_frag},toon:{uniforms:fo([Gt.common,Gt.aomap,Gt.lightmap,Gt.emissivemap,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.gradientmap,Gt.fog,Gt.lights,{emissive:{value:new Zt(0)}}]),vertexShader:qn.meshtoon_vert,fragmentShader:qn.meshtoon_frag},matcap:{uniforms:fo([Gt.common,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,Gt.fog,{matcap:{value:null}}]),vertexShader:qn.meshmatcap_vert,fragmentShader:qn.meshmatcap_frag},points:{uniforms:fo([Gt.points,Gt.fog]),vertexShader:qn.points_vert,fragmentShader:qn.points_frag},dashed:{uniforms:fo([Gt.common,Gt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:qn.linedashed_vert,fragmentShader:qn.linedashed_frag},depth:{uniforms:fo([Gt.common,Gt.displacementmap]),vertexShader:qn.depth_vert,fragmentShader:qn.depth_frag},normal:{uniforms:fo([Gt.common,Gt.bumpmap,Gt.normalmap,Gt.displacementmap,{opacity:{value:1}}]),vertexShader:qn.meshnormal_vert,fragmentShader:qn.meshnormal_frag},sprite:{uniforms:fo([Gt.sprite,Gt.fog]),vertexShader:qn.sprite_vert,fragmentShader:qn.sprite_frag},background:{uniforms:{uvTransform:{value:new Jn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:qn.background_vert,fragmentShader:qn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:qn.backgroundCube_vert,fragmentShader:qn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:qn.cube_vert,fragmentShader:qn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:qn.equirect_vert,fragmentShader:qn.equirect_frag},distanceRGBA:{uniforms:fo([Gt.common,Gt.displacementmap,{referencePosition:{value:new ge},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:qn.distanceRGBA_vert,fragmentShader:qn.distanceRGBA_frag},shadow:{uniforms:fo([Gt.lights,Gt.fog,{color:{value:new Zt(0)},opacity:{value:1}}]),vertexShader:qn.shadow_vert,fragmentShader:qn.shadow_frag}};vl.physical={uniforms:fo([vl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Jn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Jn},clearcoatNormalScale:{value:new wt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Jn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Jn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Jn},sheen:{value:0},sheenColor:{value:new Zt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Jn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Jn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Jn},transmissionSamplerSize:{value:new wt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Jn},attenuationDistance:{value:0},attenuationColor:{value:new Zt(0)},specularColor:{value:new Zt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Jn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Jn},anisotropyVector:{value:new wt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Jn}}]),vertexShader:qn.meshphysical_vert,fragmentShader:qn.meshphysical_frag};const E1={r:0,b:0,g:0};function kz(t,e,n,r,i,s,o){const a=new Zt(0);let l=s===!0?0:1,u,c,h=null,f=0,d=null;function v(w,g){let S=!1,_=g.isScene===!0?g.background:null;switch(_&&_.isTexture&&(_=(g.backgroundBlurriness>0?n:e).get(_)),_===null?x(a,l):_&&_.isColor&&(x(_,1),S=!0),t.xr.getEnvironmentBlendMode()){case"opaque":S=!0;break;case"additive":r.buffers.color.setClear(0,0,0,1,o),S=!0;break;case"alpha-blend":r.buffers.color.setClear(0,0,0,0,o),S=!0;break}(t.autoClear||S)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),_&&(_.isCubeTexture||_.mapping===Em)?(c===void 0&&(c=new qi(new fd(1,1,1),new Al({name:"BackgroundCubeMaterial",uniforms:fm(vl.backgroundCube.uniforms),vertexShader:vl.backgroundCube.vertexShader,fragmentShader:vl.backgroundCube.fragmentShader,side:yo,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(k,N,R){this.matrixWorld.copyPosition(R.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),c.material.uniforms.envMap.value=_,c.material.uniforms.flipEnvMap.value=_.isCubeTexture&&_.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=g.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,c.material.toneMapped=_.colorSpace!==Gn,(h!==_||f!==_.version||d!==t.toneMapping)&&(c.material.needsUpdate=!0,h=_,f=_.version,d=t.toneMapping),c.layers.enableAll(),w.unshift(c,c.geometry,c.material,0,0,null)):_&&_.isTexture&&(u===void 0&&(u=new qi(new ov(2,2),new Al({name:"BackgroundMaterial",uniforms:fm(vl.background.uniforms),vertexShader:vl.background.vertexShader,fragmentShader:vl.background.fragmentShader,side:ac,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(u)),u.material.uniforms.t2D.value=_,u.material.uniforms.backgroundIntensity.value=g.backgroundIntensity,u.material.toneMapped=_.colorSpace!==Gn,_.matrixAutoUpdate===!0&&_.updateMatrix(),u.material.uniforms.uvTransform.value.copy(_.matrix),(h!==_||f!==_.version||d!==t.toneMapping)&&(u.material.needsUpdate=!0,h=_,f=_.version,d=t.toneMapping),u.layers.enableAll(),w.unshift(u,u.geometry,u.material,0,0,null))}function x(w,g){w.getRGB(E1,X4(t)),r.buffers.color.setClear(E1.r,E1.g,E1.b,g,o)}return{getClearColor:function(){return a},setClearColor:function(w,g=1){a.set(w),l=g,x(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(w){l=w,x(a,l)},render:v}}function Iz(t,e,n,r){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),s=r.isWebGL2?null:e.get("OES_vertex_array_object"),o=r.isWebGL2||s!==null,a={},l=w(null);let u=l,c=!1;function h(H,ee,se,ce,W){let Y=!1;if(o){const j=x(ce,se,ee);u!==j&&(u=j,d(u.object)),Y=g(H,ce,se,W),Y&&S(H,ce,se,W)}else{const j=ee.wireframe===!0;(u.geometry!==ce.id||u.program!==se.id||u.wireframe!==j)&&(u.geometry=ce.id,u.program=se.id,u.wireframe=j,Y=!0)}W!==null&&n.update(W,t.ELEMENT_ARRAY_BUFFER),(Y||c)&&(c=!1,R(H,ee,se,ce),W!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n.get(W).buffer))}function f(){return r.isWebGL2?t.createVertexArray():s.createVertexArrayOES()}function d(H){return r.isWebGL2?t.bindVertexArray(H):s.bindVertexArrayOES(H)}function v(H){return r.isWebGL2?t.deleteVertexArray(H):s.deleteVertexArrayOES(H)}function x(H,ee,se){const ce=se.wireframe===!0;let W=a[H.id];W===void 0&&(W={},a[H.id]=W);let Y=W[ee.id];Y===void 0&&(Y={},W[ee.id]=Y);let j=Y[ce];return j===void 0&&(j=w(f()),Y[ce]=j),j}function w(H){const ee=[],se=[],ce=[];for(let W=0;W<i;W++)ee[W]=0,se[W]=0,ce[W]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ee,enabledAttributes:se,attributeDivisors:ce,object:H,attributes:{},index:null}}function g(H,ee,se,ce){const W=u.attributes,Y=ee.attributes;let j=0;const re=se.getAttributes();for(const I in re)if(re[I].location>=0){const J=W[I];let ae=Y[I];if(ae===void 0&&(I==="instanceMatrix"&&H.instanceMatrix&&(ae=H.instanceMatrix),I==="instanceColor"&&H.instanceColor&&(ae=H.instanceColor)),J===void 0||J.attribute!==ae||ae&&J.data!==ae.data)return!0;j++}return u.attributesNum!==j||u.index!==ce}function S(H,ee,se,ce){const W={},Y=ee.attributes;let j=0;const re=se.getAttributes();for(const I in re)if(re[I].location>=0){let J=Y[I];J===void 0&&(I==="instanceMatrix"&&H.instanceMatrix&&(J=H.instanceMatrix),I==="instanceColor"&&H.instanceColor&&(J=H.instanceColor));const ae={};ae.attribute=J,J&&J.data&&(ae.data=J.data),W[I]=ae,j++}u.attributes=W,u.attributesNum=j,u.index=ce}function _(){const H=u.newAttributes;for(let ee=0,se=H.length;ee<se;ee++)H[ee]=0}function T(H){L(H,0)}function L(H,ee){const se=u.newAttributes,ce=u.enabledAttributes,W=u.attributeDivisors;se[H]=1,ce[H]===0&&(t.enableVertexAttribArray(H),ce[H]=1),W[H]!==ee&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](H,ee),W[H]=ee)}function k(){const H=u.newAttributes,ee=u.enabledAttributes;for(let se=0,ce=ee.length;se<ce;se++)ee[se]!==H[se]&&(t.disableVertexAttribArray(se),ee[se]=0)}function N(H,ee,se,ce,W,Y,j){j===!0?t.vertexAttribIPointer(H,ee,se,W,Y):t.vertexAttribPointer(H,ee,se,ce,W,Y)}function R(H,ee,se,ce){if(r.isWebGL2===!1&&(H.isInstancedMesh||ce.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;_();const W=ce.attributes,Y=se.getAttributes(),j=ee.defaultAttributeValues;for(const re in Y){const I=Y[re];if(I.location>=0){let X=W[re];if(X===void 0&&(re==="instanceMatrix"&&H.instanceMatrix&&(X=H.instanceMatrix),re==="instanceColor"&&H.instanceColor&&(X=H.instanceColor)),X!==void 0){const J=X.normalized,ae=X.itemSize,fe=n.get(X);if(fe===void 0)continue;const Se=fe.buffer,Ee=fe.type,Ce=fe.bytesPerElement,$e=r.isWebGL2===!0&&(Ee===t.INT||Ee===t.UNSIGNED_INT||X.gpuType===wM);if(X.isInterleavedBufferAttribute){const ke=X.data,he=ke.stride,De=X.offset;if(ke.isInstancedInterleavedBuffer){for(let ze=0;ze<I.locationSize;ze++)L(I.location+ze,ke.meshPerAttribute);H.isInstancedMesh!==!0&&ce._maxInstanceCount===void 0&&(ce._maxInstanceCount=ke.meshPerAttribute*ke.count)}else for(let ze=0;ze<I.locationSize;ze++)T(I.location+ze);t.bindBuffer(t.ARRAY_BUFFER,Se);for(let ze=0;ze<I.locationSize;ze++)N(I.location+ze,ae/I.locationSize,Ee,J,he*Ce,(De+ae/I.locationSize*ze)*Ce,$e)}else{if(X.isInstancedBufferAttribute){for(let ke=0;ke<I.locationSize;ke++)L(I.location+ke,X.meshPerAttribute);H.isInstancedMesh!==!0&&ce._maxInstanceCount===void 0&&(ce._maxInstanceCount=X.meshPerAttribute*X.count)}else for(let ke=0;ke<I.locationSize;ke++)T(I.location+ke);t.bindBuffer(t.ARRAY_BUFFER,Se);for(let ke=0;ke<I.locationSize;ke++)N(I.location+ke,ae/I.locationSize,Ee,J,ae*Ce,ae/I.locationSize*ke*Ce,$e)}}else if(j!==void 0){const J=j[re];if(J!==void 0)switch(J.length){case 2:t.vertexAttrib2fv(I.location,J);break;case 3:t.vertexAttrib3fv(I.location,J);break;case 4:t.vertexAttrib4fv(I.location,J);break;default:t.vertexAttrib1fv(I.location,J)}}}}k()}function P(){B();for(const H in a){const ee=a[H];for(const se in ee){const ce=ee[se];for(const W in ce)v(ce[W].object),delete ce[W];delete ee[se]}delete a[H]}}function D(H){if(a[H.id]===void 0)return;const ee=a[H.id];for(const se in ee){const ce=ee[se];for(const W in ce)v(ce[W].object),delete ce[W];delete ee[se]}delete a[H.id]}function O(H){for(const ee in a){const se=a[ee];if(se[H.id]===void 0)continue;const ce=se[H.id];for(const W in ce)v(ce[W].object),delete ce[W];delete se[H.id]}}function B(){V(),c=!0,u!==l&&(u=l,d(u.object))}function V(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:h,reset:B,resetDefaultState:V,dispose:P,releaseStatesOfGeometry:D,releaseStatesOfProgram:O,initAttributes:_,enableAttribute:T,disableUnusedAttributes:k}}function Nz(t,e,n,r){const i=r.isWebGL2;let s;function o(u){s=u}function a(u,c){t.drawArrays(s,u,c),n.update(c,s,1)}function l(u,c,h){if(h===0)return;let f,d;if(i)f=t,d="drawArraysInstanced";else if(f=e.get("ANGLE_instanced_arrays"),d="drawArraysInstancedANGLE",f===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}f[d](s,u,c,h),n.update(c,s,h)}this.setMode=o,this.render=a,this.renderInstances=l}function Fz(t,e,n){let r;function i(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const N=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(N){if(N==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";N="mediump"}return N==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const o=typeof WebGL2RenderingContext<"u"&&t.constructor.name==="WebGL2RenderingContext";let a=n.precision!==void 0?n.precision:"highp";const l=s(a);l!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",l,"instead."),a=l);const u=o||e.has("WEBGL_draw_buffers"),c=n.logarithmicDepthBuffer===!0,h=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),d=t.getParameter(t.MAX_TEXTURE_SIZE),v=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),x=t.getParameter(t.MAX_VERTEX_ATTRIBS),w=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),g=t.getParameter(t.MAX_VARYING_VECTORS),S=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),_=f>0,T=o||e.has("OES_texture_float"),L=_&&T,k=o?t.getParameter(t.MAX_SAMPLES):0;return{isWebGL2:o,drawBuffers:u,getMaxAnisotropy:i,getMaxPrecision:s,precision:a,logarithmicDepthBuffer:c,maxTextures:h,maxVertexTextures:f,maxTextureSize:d,maxCubemapSize:v,maxAttributes:x,maxVertexUniforms:w,maxVaryings:g,maxFragmentUniforms:S,vertexTextures:_,floatFragmentTextures:T,floatVertexTextures:L,maxSamples:k}}function Dz(t){const e=this;let n=null,r=0,i=!1,s=!1;const o=new Wu,a=new Jn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f){const d=h.length!==0||f||r!==0||i;return i=f,r=h.length,d},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,f){n=c(h,f,0)},this.setState=function(h,f,d){const v=h.clippingPlanes,x=h.clipIntersection,w=h.clipShadows,g=t.get(h);if(!i||v===null||v.length===0||s&&!w)s?c(null):u();else{const S=s?0:r,_=S*4;let T=g.clippingState||null;l.value=T,T=c(v,f,_,d);for(let L=0;L!==_;++L)T[L]=n[L];g.clippingState=T,this.numIntersection=x?this.numPlanes:0,this.numPlanes+=S}};function u(){l.value!==n&&(l.value=n,l.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function c(h,f,d,v){const x=h!==null?h.length:0;let w=null;if(x!==0){if(w=l.value,v!==!0||w===null){const g=d+x*4,S=f.matrixWorldInverse;a.getNormalMatrix(S),(w===null||w.length<g)&&(w=new Float32Array(g));for(let _=0,T=d;_!==x;++_,T+=4)o.copy(h[_]).applyMatrix4(S,a),o.normal.toArray(w,T),w[T+3]=o.constant}l.value=w,l.needsUpdate=!0}return e.numPlanes=x,e.numIntersection=0,w}}function Oz(t){let e=new WeakMap;function n(o,a){return a===cm?o.mapping=cu:a===b0&&(o.mapping=Ph),o}function r(o){if(o&&o.isTexture&&o.isRenderTargetTexture===!1){const a=o.mapping;if(a===cm||a===b0)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new FM(l.height/2);return u.fromEquirectangularTexture(t,o),e.set(o,u),o.addEventListener("dispose",i),n(u.texture,o.mapping)}else return null}}return o}function i(o){const a=o.target;a.removeEventListener("dispose",i);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:r,dispose:s}}class ou extends iv{constructor(e=-1,n=1,r=1,i=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=r,this.bottom=i,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,r,i,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=r,this.view.offsetY=i,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),r=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let s=r-e,o=r+e,a=i+n,l=i-n;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}const Op=4,mA=[.125,.215,.35,.446,.526,.582],Lf=20,Yw=new ou,gA=new Zt;let Zw=null;const Ef=(1+Math.sqrt(5))/2,sp=1/Ef,vA=[new ge(1,1,1),new ge(-1,1,1),new ge(1,1,-1),new ge(-1,1,-1),new ge(0,Ef,sp),new ge(0,Ef,-sp),new ge(sp,0,Ef),new ge(-sp,0,Ef),new ge(Ef,sp,0),new ge(-Ef,sp,0)];class kb{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,r=.1,i=100){Zw=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,r,i,s),n>0&&this._blur(s,0,0,n),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=wA(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=xA(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Zw),e.scissorTest=!1,A1(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===cu||e.mapping===Ph?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Zw=this._renderer.getRenderTarget();const r=n||this._allocateTargets();return this._textureToCubeUV(e,r),this._applyPMREM(r),this._cleanup(r),r}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,r={magFilter:Kr,minFilter:Kr,generateMipmaps:!1,type:go,format:mo,colorSpace:Ml,depthBuffer:!1},i=yA(e,n,r);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=yA(e,n,r);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Uz(s)),this._blurMaterial=Bz(s,e,n)}return i}_compileMaterial(e){const n=new qi(this._lodPlanes[0],e);this._renderer.compile(n,Yw)}_sceneToCubeUV(e,n,r,i){const a=new mi(90,1,n,r),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,h=c.autoClear,f=c.toneMapping;c.getClearColor(gA),c.toneMapping=iu,c.autoClear=!1;const d=new Gh({name:"PMREM.Background",side:yo,depthWrite:!1,depthTest:!1}),v=new qi(new fd,d);let x=!1;const w=e.background;w?w.isColor&&(d.color.copy(w),e.background=null,x=!0):(d.color.copy(gA),x=!0);for(let g=0;g<6;g++){const S=g%3;S===0?(a.up.set(0,l[g],0),a.lookAt(u[g],0,0)):S===1?(a.up.set(0,0,l[g]),a.lookAt(0,u[g],0)):(a.up.set(0,l[g],0),a.lookAt(0,0,u[g]));const _=this._cubeSize;A1(i,S*_,g>2?_:0,_,_),c.setRenderTarget(i),x&&c.render(v,a),c.render(e,a)}v.geometry.dispose(),v.material.dispose(),c.toneMapping=f,c.autoClear=h,e.background=w}_textureToCubeUV(e,n){const r=this._renderer,i=e.mapping===cu||e.mapping===Ph;i?(this._cubemapMaterial===null&&(this._cubemapMaterial=wA()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=xA());const s=i?this._cubemapMaterial:this._equirectMaterial,o=new qi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;A1(n,0,0,3*l,2*l),r.setRenderTarget(n),r.render(o,Yw)}_applyPMREM(e){const n=this._renderer,r=n.autoClear;n.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const s=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),o=vA[(i-1)%vA.length];this._blur(e,i-1,i,s,o)}n.autoClear=r}_blur(e,n,r,i,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,r,i,"latitudinal",s),this._halfBlur(o,e,r,r,i,"longitudinal",s)}_halfBlur(e,n,r,i,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,h=new qi(this._lodPlanes[i],u),f=u.uniforms,d=this._sizeLods[r]-1,v=isFinite(s)?Math.PI/(2*d):2*Math.PI/(2*Lf-1),x=s/v,w=isFinite(s)?1+Math.floor(c*x):Lf;w>Lf&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${Lf}`);const g=[];let S=0;for(let N=0;N<Lf;++N){const R=N/x,P=Math.exp(-R*R/2);g.push(P),N===0?S+=P:N<w&&(S+=2*P)}for(let N=0;N<g.length;N++)g[N]=g[N]/S;f.envMap.value=e.texture,f.samples.value=w,f.weights.value=g,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:_}=this;f.dTheta.value=v,f.mipInt.value=_-r;const T=this._sizeLods[i],L=3*T*(i>_-Op?i-_+Op:0),k=4*(this._cubeSize-T);A1(n,L,k,3*T,2*T),l.setRenderTarget(n),l.render(h,Yw)}}function Uz(t){const e=[],n=[],r=[];let i=t;const s=t-Op+1+mA.length;for(let o=0;o<s;o++){const a=Math.pow(2,i);n.push(a);let l=1/a;o>t-Op?l=mA[o-t+Op-1]:o===0&&(l=0),r.push(l);const u=1/(a-2),c=-u,h=1+u,f=[c,c,h,c,h,h,c,c,h,h,c,h],d=6,v=6,x=3,w=2,g=1,S=new Float32Array(x*v*d),_=new Float32Array(w*v*d),T=new Float32Array(g*v*d);for(let k=0;k<d;k++){const N=k%3*2/3-1,R=k>2?0:-1,P=[N,R,0,N+2/3,R,0,N+2/3,R+1,0,N,R,0,N+2/3,R+1,0,N,R+1,0];S.set(P,x*v*k),_.set(f,w*v*k);const D=[k,k,k,k,k,k];T.set(D,g*v*k)}const L=new An;L.setAttribute("position",new ur(S,x)),L.setAttribute("uv",new ur(_,w)),L.setAttribute("faceIndex",new ur(T,g)),e.push(L),i>Op&&i--}return{lodPlanes:e,sizeLods:n,sigmas:r}}function yA(t,e,n){const r=new El(t,e,n);return r.texture.mapping=Em,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function A1(t,e,n,r,i){t.viewport.set(e,n,r,i),t.scissor.set(e,n,r,i)}function Bz(t,e,n){const r=new Float32Array(Lf),i=new ge(0,1,0);return new Al({name:"SphericalGaussianBlur",defines:{n:Lf,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:DM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:tc,depthTest:!1,depthWrite:!1})}function xA(){return new Al({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:DM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:tc,depthTest:!1,depthWrite:!1})}function wA(){return new Al({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:DM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:tc,depthTest:!1,depthWrite:!1})}function DM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function zz(t){let e=new WeakMap,n=null;function r(a){if(a&&a.isTexture){const l=a.mapping,u=l===cm||l===b0,c=l===cu||l===Ph;if(u||c)if(a.isRenderTargetTexture&&a.needsPMREMUpdate===!0){a.needsPMREMUpdate=!1;let h=e.get(a);return n===null&&(n=new kb(t)),h=u?n.fromEquirectangular(a,h):n.fromCubemap(a,h),e.set(a,h),h.texture}else{if(e.has(a))return e.get(a).texture;{const h=a.image;if(u&&h&&h.height>0||c&&h&&i(h)){n===null&&(n=new kb(t));const f=u?n.fromEquirectangular(a):n.fromCubemap(a);return e.set(a,f),a.addEventListener("dispose",s),f.texture}else return null}}}return a}function i(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:r,dispose:o}}function Hz(t){const e={};function n(r){if(e[r]!==void 0)return e[r];let i;switch(r){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(r)}return e[r]=i,i}return{has:function(r){return n(r)!==null},init:function(r){r.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(r){const i=n(r);return i===null&&console.warn("THREE.WebGLRenderer: "+r+" extension not supported."),i}}}function Gz(t,e,n,r){const i={},s=new WeakMap;function o(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const v in f.attributes)e.remove(f.attributes[v]);for(const v in f.morphAttributes){const x=f.morphAttributes[v];for(let w=0,g=x.length;w<g;w++)e.remove(x[w])}f.removeEventListener("dispose",o),delete i[f.id];const d=s.get(f);d&&(e.remove(d),s.delete(f)),r.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,n.memory.geometries--}function a(h,f){return i[f.id]===!0||(f.addEventListener("dispose",o),i[f.id]=!0,n.memory.geometries++),f}function l(h){const f=h.attributes;for(const v in f)e.update(f[v],t.ARRAY_BUFFER);const d=h.morphAttributes;for(const v in d){const x=d[v];for(let w=0,g=x.length;w<g;w++)e.update(x[w],t.ARRAY_BUFFER)}}function u(h){const f=[],d=h.index,v=h.attributes.position;let x=0;if(d!==null){const S=d.array;x=d.version;for(let _=0,T=S.length;_<T;_+=3){const L=S[_+0],k=S[_+1],N=S[_+2];f.push(L,k,k,N,N,L)}}else if(v!==void 0){const S=v.array;x=v.version;for(let _=0,T=S.length/3-1;_<T;_+=3){const L=_+0,k=_+1,N=_+2;f.push(L,k,k,N,N,L)}}else return;const w=new(V4(f)?NM:IM)(f,1);w.version=x;const g=s.get(h);g&&e.remove(g),s.set(h,w)}function c(h){const f=s.get(h);if(f){const d=h.index;d!==null&&f.version<d.version&&u(h)}else u(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:c}}function Vz(t,e,n,r){const i=r.isWebGL2;let s;function o(f){s=f}let a,l;function u(f){a=f.type,l=f.bytesPerElement}function c(f,d){t.drawElements(s,d,a,f*l),n.update(d,s,1)}function h(f,d,v){if(v===0)return;let x,w;if(i)x=t,w="drawElementsInstanced";else if(x=e.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",x===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}x[w](s,d,a,f*l,v),n.update(d,s,v)}this.setMode=o,this.setIndex=u,this.render=c,this.renderInstances=h}function Wz(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function r(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function i(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:i,update:r}}function jz(t,e){return t[0]-e[0]}function Xz(t,e){return Math.abs(e[1])-Math.abs(t[1])}function qz(t,e,n){const r={},i=new Float32Array(8),s=new WeakMap,o=new Lr,a=[];for(let u=0;u<8;u++)a[u]=[u,0];function l(u,c,h){const f=u.morphTargetInfluences;if(e.isWebGL2===!0){const d=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,v=d!==void 0?d.length:0;let x=s.get(c);if(x===void 0||x.count!==v){let H=function(){B.dispose(),s.delete(c),c.removeEventListener("dispose",H)};x!==void 0&&x.texture.dispose();const S=c.morphAttributes.position!==void 0,_=c.morphAttributes.normal!==void 0,T=c.morphAttributes.color!==void 0,L=c.morphAttributes.position||[],k=c.morphAttributes.normal||[],N=c.morphAttributes.color||[];let R=0;S===!0&&(R=1),_===!0&&(R=2),T===!0&&(R=3);let P=c.attributes.position.count*R,D=1;P>e.maxTextureSize&&(D=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);const O=new Float32Array(P*D*4*v),B=new ix(O,P,D,v);B.type=ro,B.needsUpdate=!0;const V=R*4;for(let ee=0;ee<v;ee++){const se=L[ee],ce=k[ee],W=N[ee],Y=P*D*4*ee;for(let j=0;j<se.count;j++){const re=j*V;S===!0&&(o.fromBufferAttribute(se,j),O[Y+re+0]=o.x,O[Y+re+1]=o.y,O[Y+re+2]=o.z,O[Y+re+3]=0),_===!0&&(o.fromBufferAttribute(ce,j),O[Y+re+4]=o.x,O[Y+re+5]=o.y,O[Y+re+6]=o.z,O[Y+re+7]=0),T===!0&&(o.fromBufferAttribute(W,j),O[Y+re+8]=o.x,O[Y+re+9]=o.y,O[Y+re+10]=o.z,O[Y+re+11]=W.itemSize===4?o.w:1)}}x={count:v,texture:B,size:new wt(P,D)},s.set(c,x),c.addEventListener("dispose",H)}let w=0;for(let S=0;S<f.length;S++)w+=f[S];const g=c.morphTargetsRelative?1:1-w;h.getUniforms().setValue(t,"morphTargetBaseInfluence",g),h.getUniforms().setValue(t,"morphTargetInfluences",f),h.getUniforms().setValue(t,"morphTargetsTexture",x.texture,n),h.getUniforms().setValue(t,"morphTargetsTextureSize",x.size)}else{const d=f===void 0?0:f.length;let v=r[c.id];if(v===void 0||v.length!==d){v=[];for(let _=0;_<d;_++)v[_]=[_,0];r[c.id]=v}for(let _=0;_<d;_++){const T=v[_];T[0]=_,T[1]=f[_]}v.sort(Xz);for(let _=0;_<8;_++)_<d&&v[_][1]?(a[_][0]=v[_][0],a[_][1]=v[_][1]):(a[_][0]=Number.MAX_SAFE_INTEGER,a[_][1]=0);a.sort(jz);const x=c.morphAttributes.position,w=c.morphAttributes.normal;let g=0;for(let _=0;_<8;_++){const T=a[_],L=T[0],k=T[1];L!==Number.MAX_SAFE_INTEGER&&k?(x&&c.getAttribute("morphTarget"+_)!==x[L]&&c.setAttribute("morphTarget"+_,x[L]),w&&c.getAttribute("morphNormal"+_)!==w[L]&&c.setAttribute("morphNormal"+_,w[L]),i[_]=k,g+=k):(x&&c.hasAttribute("morphTarget"+_)===!0&&c.deleteAttribute("morphTarget"+_),w&&c.hasAttribute("morphNormal"+_)===!0&&c.deleteAttribute("morphNormal"+_),i[_]=0)}const S=c.morphTargetsRelative?1:1-g;h.getUniforms().setValue(t,"morphTargetBaseInfluence",S),h.getUniforms().setValue(t,"morphTargetInfluences",i)}}return{update:l}}function Yz(t,e,n,r){let i=new WeakMap;function s(l){const u=r.render.frame,c=l.geometry,h=e.get(l,c);if(i.get(h)!==u&&(e.update(h),i.set(h,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),i.get(l)!==u&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),i.set(l,u))),l.isSkinnedMesh){const f=l.skeleton;i.get(f)!==u&&(f.update(),i.set(f,u))}return h}function o(){i=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),n.remove(u.instanceMatrix),u.instanceColor!==null&&n.remove(u.instanceColor)}return{update:s,dispose:o}}const $4=new Ci,K4=new ix,J4=new kM,Q4=new sv,SA=[],_A=[],bA=new Float32Array(16),MA=new Float32Array(9),EA=new Float32Array(4);function Am(t,e,n){const r=t[0];if(r<=0||r>0)return t;const i=e*n;let s=SA[i];if(s===void 0&&(s=new Float32Array(i),SA[i]=s),e!==0){r.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function ss(t,e){if(t.length!==e.length)return!1;for(let n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function os(t,e){for(let n=0,r=e.length;n<r;n++)t[n]=e[n]}function ox(t,e){let n=_A[e];n===void 0&&(n=new Int32Array(e),_A[e]=n);for(let r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Zz(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function $z(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ss(n,e))return;t.uniform2fv(this.addr,e),os(n,e)}}function Kz(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ss(n,e))return;t.uniform3fv(this.addr,e),os(n,e)}}function Jz(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ss(n,e))return;t.uniform4fv(this.addr,e),os(n,e)}}function Qz(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ss(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),os(n,e)}else{if(ss(n,r))return;EA.set(r),t.uniformMatrix2fv(this.addr,!1,EA),os(n,r)}}function e7(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ss(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),os(n,e)}else{if(ss(n,r))return;MA.set(r),t.uniformMatrix3fv(this.addr,!1,MA),os(n,r)}}function t7(t,e){const n=this.cache,r=e.elements;if(r===void 0){if(ss(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),os(n,e)}else{if(ss(n,r))return;bA.set(r),t.uniformMatrix4fv(this.addr,!1,bA),os(n,r)}}function n7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function r7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ss(n,e))return;t.uniform2iv(this.addr,e),os(n,e)}}function i7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ss(n,e))return;t.uniform3iv(this.addr,e),os(n,e)}}function s7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ss(n,e))return;t.uniform4iv(this.addr,e),os(n,e)}}function o7(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function a7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ss(n,e))return;t.uniform2uiv(this.addr,e),os(n,e)}}function l7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ss(n,e))return;t.uniform3uiv(this.addr,e),os(n,e)}}function u7(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ss(n,e))return;t.uniform4uiv(this.addr,e),os(n,e)}}function c7(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2D(e||$4,i)}function h7(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(e||J4,i)}function f7(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(e||Q4,i)}function d7(t,e,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(t.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(e||K4,i)}function p7(t){switch(t){case 5126:return Zz;case 35664:return $z;case 35665:return Kz;case 35666:return Jz;case 35674:return Qz;case 35675:return e7;case 35676:return t7;case 5124:case 35670:return n7;case 35667:case 35671:return r7;case 35668:case 35672:return i7;case 35669:case 35673:return s7;case 5125:return o7;case 36294:return a7;case 36295:return l7;case 36296:return u7;case 35678:case 36198:case 36298:case 36306:case 35682:return c7;case 35679:case 36299:case 36307:return h7;case 35680:case 36300:case 36308:case 36293:return f7;case 36289:case 36303:case 36311:case 36292:return d7}}function m7(t,e){t.uniform1fv(this.addr,e)}function g7(t,e){const n=Am(e,this.size,2);t.uniform2fv(this.addr,n)}function v7(t,e){const n=Am(e,this.size,3);t.uniform3fv(this.addr,n)}function y7(t,e){const n=Am(e,this.size,4);t.uniform4fv(this.addr,n)}function x7(t,e){const n=Am(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function w7(t,e){const n=Am(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function S7(t,e){const n=Am(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function _7(t,e){t.uniform1iv(this.addr,e)}function b7(t,e){t.uniform2iv(this.addr,e)}function M7(t,e){t.uniform3iv(this.addr,e)}function E7(t,e){t.uniform4iv(this.addr,e)}function A7(t,e){t.uniform1uiv(this.addr,e)}function T7(t,e){t.uniform2uiv(this.addr,e)}function C7(t,e){t.uniform3uiv(this.addr,e)}function L7(t,e){t.uniform4uiv(this.addr,e)}function P7(t,e,n){const r=this.cache,i=e.length,s=ox(n,i);ss(r,s)||(t.uniform1iv(this.addr,s),os(r,s));for(let o=0;o!==i;++o)n.setTexture2D(e[o]||$4,s[o])}function R7(t,e,n){const r=this.cache,i=e.length,s=ox(n,i);ss(r,s)||(t.uniform1iv(this.addr,s),os(r,s));for(let o=0;o!==i;++o)n.setTexture3D(e[o]||J4,s[o])}function k7(t,e,n){const r=this.cache,i=e.length,s=ox(n,i);ss(r,s)||(t.uniform1iv(this.addr,s),os(r,s));for(let o=0;o!==i;++o)n.setTextureCube(e[o]||Q4,s[o])}function I7(t,e,n){const r=this.cache,i=e.length,s=ox(n,i);ss(r,s)||(t.uniform1iv(this.addr,s),os(r,s));for(let o=0;o!==i;++o)n.setTexture2DArray(e[o]||K4,s[o])}function N7(t){switch(t){case 5126:return m7;case 35664:return g7;case 35665:return v7;case 35666:return y7;case 35674:return x7;case 35675:return w7;case 35676:return S7;case 5124:case 35670:return _7;case 35667:case 35671:return b7;case 35668:case 35672:return M7;case 35669:case 35673:return E7;case 5125:return A7;case 36294:return T7;case 36295:return C7;case 36296:return L7;case 35678:case 36198:case 36298:case 36306:case 35682:return P7;case 35679:case 36299:case 36307:return R7;case 35680:case 36300:case 36308:case 36293:return k7;case 36289:case 36303:case 36311:case 36292:return I7}}class F7{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.setValue=p7(n.type)}}class D7{constructor(e,n,r){this.id=e,this.addr=r,this.cache=[],this.size=n.size,this.setValue=N7(n.type)}}class O7{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,r){const i=this.seq;for(let s=0,o=i.length;s!==o;++s){const a=i[s];a.setValue(e,n[a.id],r)}}}const $w=/(\w+)(\])?(\[|\.)?/g;function AA(t,e){t.seq.push(e),t.map[e.id]=e}function U7(t,e,n){const r=t.name,i=r.length;for($w.lastIndex=0;;){const s=$w.exec(r),o=$w.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===i){AA(n,u===void 0?new F7(a,t,e):new D7(a,t,e));break}else{let h=n.map[a];h===void 0&&(h=new O7(a),AA(n,h)),n=h}}}class Dy{constructor(e,n){this.seq=[],this.map={};const r=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let i=0;i<r;++i){const s=e.getActiveUniform(n,i),o=e.getUniformLocation(n,s.name);U7(s,o,this)}}setValue(e,n,r,i){const s=this.map[n];s!==void 0&&s.setValue(e,r,i)}setOptional(e,n,r){const i=n[r];i!==void 0&&this.setValue(e,r,i)}static upload(e,n,r,i){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=r[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,i)}}static seqWithValue(e,n){const r=[];for(let i=0,s=e.length;i!==s;++i){const o=e[i];o.id in n&&r.push(o)}return r}}function TA(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}let B7=0;function z7(t,e){const n=t.split(`
`),r=[],i=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=i;o<s;o++){const a=o+1;r.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return r.join(`
`)}function H7(t){switch(t){case Ml:return["Linear","( value )"];case Gn:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",t),["Linear","( value )"]}}function CA(t,e,n){const r=t.getShaderParameter(e,t.COMPILE_STATUS),i=t.getShaderInfoLog(e).trim();if(r&&i==="")return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const o=parseInt(s[1]);return n.toUpperCase()+`

`+i+`

`+z7(t.getShaderSource(e),o)}else return i}function G7(t,e){const n=H7(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function V7(t,e){let n;switch(e){case m4:n="Linear";break;case g4:n="Reinhard";break;case v4:n="OptimizedCineon";break;case yM:n="ACESFilmic";break;case y4:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function W7(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.normalMapTangentSpace||t.clearcoatNormalMap||t.flatShading||t.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ig).join(`
`)}function j7(t){const e=[];for(const n in t){const r=t[n];r!==!1&&e.push("#define "+n+" "+r)}return e.join(`
`)}function X7(t,e){const n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=t.getActiveAttrib(e,i),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function Ig(t){return t!==""}function LA(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function PA(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const q7=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ib(t){return t.replace(q7,Z7)}const Y7=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function Z7(t,e){let n=qn[e];if(n===void 0){const r=Y7.get(e);if(r!==void 0)n=qn[r],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,r);else throw new Error("Can not resolve #include <"+e+">")}return Ib(n)}const $7=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function RA(t){return t.replace($7,K7)}function K7(t,e,n,r){let i="";for(let s=parseInt(e);s<parseInt(n);s++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return i}function kA(t){let e="precision "+t.precision+` float;
precision `+t.precision+" int;";return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function J7(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===ex?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===jg?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===dl&&(e="SHADOWMAP_TYPE_VSM"),e}function Q7(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case cu:case Ph:e="ENVMAP_TYPE_CUBE";break;case Em:e="ENVMAP_TYPE_CUBE_UV";break}return e}function e9(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Ph:e="ENVMAP_MODE_REFRACTION";break}return e}function t9(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case nv:e="ENVMAP_BLENDING_MULTIPLY";break;case d4:e="ENVMAP_BLENDING_MIX";break;case p4:e="ENVMAP_BLENDING_ADD";break}return e}function n9(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:r,maxMip:n}}function r9(t,e,n,r){const i=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=J7(n),u=Q7(n),c=e9(n),h=t9(n),f=n9(n),d=n.isWebGL2?"":W7(n),v=j7(s),x=i.createProgram();let w,g,S=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(w=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(Ig).join(`
`),w.length>0&&(w+=`
`),g=[d,"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v].filter(Ig).join(`
`),g.length>0&&(g+=`
`)):(w=[kA(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ig).join(`
`),g=[d,kA(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,v,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.envMap?"#define "+c:"",n.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==iu?"#define TONE_MAPPING":"",n.toneMapping!==iu?qn.tonemapping_pars_fragment:"",n.toneMapping!==iu?V7("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",qn.colorspace_pars_fragment,G7("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(Ig).join(`
`)),o=Ib(o),o=LA(o,n),o=PA(o,n),a=Ib(a),a=LA(a,n),a=PA(a,n),o=RA(o),a=RA(a),n.isWebGL2&&n.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,g=["#define varying in",n.glslVersion===Pb?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Pb?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);const _=S+w+o,T=S+g+a,L=TA(i,i.VERTEX_SHADER,_),k=TA(i,i.FRAGMENT_SHADER,T);if(i.attachShader(x,L),i.attachShader(x,k),n.index0AttributeName!==void 0?i.bindAttribLocation(x,0,n.index0AttributeName):n.morphTargets===!0&&i.bindAttribLocation(x,0,"position"),i.linkProgram(x),t.debug.checkShaderErrors){const P=i.getProgramInfoLog(x).trim(),D=i.getShaderInfoLog(L).trim(),O=i.getShaderInfoLog(k).trim();let B=!0,V=!0;if(i.getProgramParameter(x,i.LINK_STATUS)===!1)if(B=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(i,x,L,k);else{const H=CA(i,L,"vertex"),ee=CA(i,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(x,i.VALIDATE_STATUS)+`

Program Info Log: `+P+`
`+H+`
`+ee)}else P!==""?console.warn("THREE.WebGLProgram: Program Info Log:",P):(D===""||O==="")&&(V=!1);V&&(this.diagnostics={runnable:B,programLog:P,vertexShader:{log:D,prefix:w},fragmentShader:{log:O,prefix:g}})}i.deleteShader(L),i.deleteShader(k);let N;this.getUniforms=function(){return N===void 0&&(N=new Dy(i,x)),N};let R;return this.getAttributes=function(){return R===void 0&&(R=X7(i,x)),R},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(x),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=B7++,this.cacheKey=e,this.usedTimes=1,this.program=x,this.vertexShader=L,this.fragmentShader=k,this}let i9=0;class s9{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,r=e.fragmentShader,i=this._getShaderStage(n),s=this._getShaderStage(r),o=this._getShaderCacheForMaterial(e);return o.has(i)===!1&&(o.add(i),i.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const r of n)r.usedTimes--,r.usedTimes===0&&this.shaderCache.delete(r.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let r=n.get(e);return r===void 0&&(r=new Set,n.set(e,r)),r}_getShaderStage(e){const n=this.shaderCache;let r=n.get(e);return r===void 0&&(r=new o9(e),n.set(e,r)),r}}class o9{constructor(e){this.id=i9++,this.code=e,this.usedTimes=0}}function a9(t,e,n,r,i,s,o){const a=new Xf,l=new s9,u=[],c=i.isWebGL2,h=i.logarithmicDepthBuffer,f=i.vertexTextures;let d=i.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function x(P){return P===0?"uv":`uv${P}`}function w(P,D,O,B,V){const H=B.fog,ee=V.geometry,se=P.isMeshStandardMaterial?B.environment:null,ce=(P.isMeshStandardMaterial?n:e).get(P.envMap||se),W=ce&&ce.mapping===Em?ce.image.height:null,Y=v[P.type];P.precision!==null&&(d=i.getMaxPrecision(P.precision),d!==P.precision&&console.warn("THREE.WebGLProgram.getParameters:",P.precision,"not supported, using",d,"instead."));const j=ee.morphAttributes.position||ee.morphAttributes.normal||ee.morphAttributes.color,re=j!==void 0?j.length:0;let I=0;ee.morphAttributes.position!==void 0&&(I=1),ee.morphAttributes.normal!==void 0&&(I=2),ee.morphAttributes.color!==void 0&&(I=3);let X,J,ae,fe;if(Y){const gn=vl[Y];X=gn.vertexShader,J=gn.fragmentShader}else X=P.vertexShader,J=P.fragmentShader,l.update(P),ae=l.getVertexShaderID(P),fe=l.getFragmentShaderID(P);const Se=t.getRenderTarget(),Ee=V.isInstancedMesh===!0,Ce=!!P.map,$e=!!P.matcap,ke=!!ce,he=!!P.aoMap,De=!!P.lightMap,ze=!!P.bumpMap,pe=!!P.normalMap,K=!!P.displacementMap,tt=!!P.emissiveMap,Ze=!!P.metalnessMap,Ne=!!P.roughnessMap,Ke=P.anisotropy>0,ft=P.clearcoat>0,vt=P.iridescence>0,ue=P.sheen>0,Q=P.transmission>0,Pe=Ke&&!!P.anisotropyMap,et=ft&&!!P.clearcoatMap,Qe=ft&&!!P.clearcoatNormalMap,dt=ft&&!!P.clearcoatRoughnessMap,lt=vt&&!!P.iridescenceMap,it=vt&&!!P.iridescenceThicknessMap,Te=ue&&!!P.sheenColorMap,Nt=ue&&!!P.sheenRoughnessMap,At=!!P.specularMap,Ct=!!P.specularColorMap,bt=!!P.specularIntensityMap,xe=Q&&!!P.transmissionMap,Ye=Q&&!!P.thicknessMap,st=!!P.gradientMap,Ae=!!P.alphaMap,Fe=P.alphaTest>0,Ge=!!P.alphaHash,yt=!!P.extensions,pt=!!ee.attributes.uv1,kt=!!ee.attributes.uv2,Vt=!!ee.attributes.uv3;let yn=iu;return P.toneMapped&&(Se===null||Se.isXRRenderTarget===!0)&&(yn=t.toneMapping),{isWebGL2:c,shaderID:Y,shaderType:P.type,shaderName:P.name,vertexShader:X,fragmentShader:J,defines:P.defines,customVertexShaderID:ae,customFragmentShaderID:fe,isRawShaderMaterial:P.isRawShaderMaterial===!0,glslVersion:P.glslVersion,precision:d,instancing:Ee,instancingColor:Ee&&V.instanceColor!==null,supportsVertexTextures:f,outputColorSpace:Se===null?t.outputColorSpace:Se.isXRRenderTarget===!0?Se.texture.colorSpace:Ml,map:Ce,matcap:$e,envMap:ke,envMapMode:ke&&ce.mapping,envMapCubeUVHeight:W,aoMap:he,lightMap:De,bumpMap:ze,normalMap:pe,displacementMap:f&&K,emissiveMap:tt,normalMapObjectSpace:pe&&P.normalMapType===k4,normalMapTangentSpace:pe&&P.normalMapType===Hh,metalnessMap:Ze,roughnessMap:Ne,anisotropy:Ke,anisotropyMap:Pe,clearcoat:ft,clearcoatMap:et,clearcoatNormalMap:Qe,clearcoatRoughnessMap:dt,iridescence:vt,iridescenceMap:lt,iridescenceThicknessMap:it,sheen:ue,sheenColorMap:Te,sheenRoughnessMap:Nt,specularMap:At,specularColorMap:Ct,specularIntensityMap:bt,transmission:Q,transmissionMap:xe,thicknessMap:Ye,gradientMap:st,opaque:P.transparent===!1&&P.blending===Wf,alphaMap:Ae,alphaTest:Fe,alphaHash:Ge,combine:P.combine,mapUv:Ce&&x(P.map.channel),aoMapUv:he&&x(P.aoMap.channel),lightMapUv:De&&x(P.lightMap.channel),bumpMapUv:ze&&x(P.bumpMap.channel),normalMapUv:pe&&x(P.normalMap.channel),displacementMapUv:K&&x(P.displacementMap.channel),emissiveMapUv:tt&&x(P.emissiveMap.channel),metalnessMapUv:Ze&&x(P.metalnessMap.channel),roughnessMapUv:Ne&&x(P.roughnessMap.channel),anisotropyMapUv:Pe&&x(P.anisotropyMap.channel),clearcoatMapUv:et&&x(P.clearcoatMap.channel),clearcoatNormalMapUv:Qe&&x(P.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:dt&&x(P.clearcoatRoughnessMap.channel),iridescenceMapUv:lt&&x(P.iridescenceMap.channel),iridescenceThicknessMapUv:it&&x(P.iridescenceThicknessMap.channel),sheenColorMapUv:Te&&x(P.sheenColorMap.channel),sheenRoughnessMapUv:Nt&&x(P.sheenRoughnessMap.channel),specularMapUv:At&&x(P.specularMap.channel),specularColorMapUv:Ct&&x(P.specularColorMap.channel),specularIntensityMapUv:bt&&x(P.specularIntensityMap.channel),transmissionMapUv:xe&&x(P.transmissionMap.channel),thicknessMapUv:Ye&&x(P.thicknessMap.channel),alphaMapUv:Ae&&x(P.alphaMap.channel),vertexTangents:!!ee.attributes.tangent&&(pe||Ke),vertexColors:P.vertexColors,vertexAlphas:P.vertexColors===!0&&!!ee.attributes.color&&ee.attributes.color.itemSize===4,vertexUv1s:pt,vertexUv2s:kt,vertexUv3s:Vt,pointsUvs:V.isPoints===!0&&!!ee.attributes.uv&&(Ce||Ae),fog:!!H,useFog:P.fog===!0,fogExp2:H&&H.isFogExp2,flatShading:P.flatShading===!0,sizeAttenuation:P.sizeAttenuation===!0,logarithmicDepthBuffer:h,skinning:V.isSkinnedMesh===!0,morphTargets:ee.morphAttributes.position!==void 0,morphNormals:ee.morphAttributes.normal!==void 0,morphColors:ee.morphAttributes.color!==void 0,morphTargetsCount:re,morphTextureStride:I,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:P.dithering,shadowMapEnabled:t.shadowMap.enabled&&O.length>0,shadowMapType:t.shadowMap.type,toneMapping:yn,useLegacyLights:t._useLegacyLights,premultipliedAlpha:P.premultipliedAlpha,doubleSided:P.side===xl,flipSided:P.side===yo,useDepthPacking:P.depthPacking>=0,depthPacking:P.depthPacking||0,index0AttributeName:P.index0AttributeName,extensionDerivatives:yt&&P.extensions.derivatives===!0,extensionFragDepth:yt&&P.extensions.fragDepth===!0,extensionDrawBuffers:yt&&P.extensions.drawBuffers===!0,extensionShaderTextureLOD:yt&&P.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:c||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:c||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:c||r.has("EXT_shader_texture_lod"),customProgramCacheKey:P.customProgramCacheKey()}}function g(P){const D=[];if(P.shaderID?D.push(P.shaderID):(D.push(P.customVertexShaderID),D.push(P.customFragmentShaderID)),P.defines!==void 0)for(const O in P.defines)D.push(O),D.push(P.defines[O]);return P.isRawShaderMaterial===!1&&(S(D,P),_(D,P),D.push(t.outputColorSpace)),D.push(P.customProgramCacheKey),D.join()}function S(P,D){P.push(D.precision),P.push(D.outputColorSpace),P.push(D.envMapMode),P.push(D.envMapCubeUVHeight),P.push(D.mapUv),P.push(D.alphaMapUv),P.push(D.lightMapUv),P.push(D.aoMapUv),P.push(D.bumpMapUv),P.push(D.normalMapUv),P.push(D.displacementMapUv),P.push(D.emissiveMapUv),P.push(D.metalnessMapUv),P.push(D.roughnessMapUv),P.push(D.anisotropyMapUv),P.push(D.clearcoatMapUv),P.push(D.clearcoatNormalMapUv),P.push(D.clearcoatRoughnessMapUv),P.push(D.iridescenceMapUv),P.push(D.iridescenceThicknessMapUv),P.push(D.sheenColorMapUv),P.push(D.sheenRoughnessMapUv),P.push(D.specularMapUv),P.push(D.specularColorMapUv),P.push(D.specularIntensityMapUv),P.push(D.transmissionMapUv),P.push(D.thicknessMapUv),P.push(D.combine),P.push(D.fogExp2),P.push(D.sizeAttenuation),P.push(D.morphTargetsCount),P.push(D.morphAttributeCount),P.push(D.numDirLights),P.push(D.numPointLights),P.push(D.numSpotLights),P.push(D.numSpotLightMaps),P.push(D.numHemiLights),P.push(D.numRectAreaLights),P.push(D.numDirLightShadows),P.push(D.numPointLightShadows),P.push(D.numSpotLightShadows),P.push(D.numSpotLightShadowsWithMaps),P.push(D.shadowMapType),P.push(D.toneMapping),P.push(D.numClippingPlanes),P.push(D.numClipIntersection),P.push(D.depthPacking)}function _(P,D){a.disableAll(),D.isWebGL2&&a.enable(0),D.supportsVertexTextures&&a.enable(1),D.instancing&&a.enable(2),D.instancingColor&&a.enable(3),D.matcap&&a.enable(4),D.envMap&&a.enable(5),D.normalMapObjectSpace&&a.enable(6),D.normalMapTangentSpace&&a.enable(7),D.clearcoat&&a.enable(8),D.iridescence&&a.enable(9),D.alphaTest&&a.enable(10),D.vertexColors&&a.enable(11),D.vertexAlphas&&a.enable(12),D.vertexUv1s&&a.enable(13),D.vertexUv2s&&a.enable(14),D.vertexUv3s&&a.enable(15),D.vertexTangents&&a.enable(16),D.anisotropy&&a.enable(17),P.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.skinning&&a.enable(4),D.morphTargets&&a.enable(5),D.morphNormals&&a.enable(6),D.morphColors&&a.enable(7),D.premultipliedAlpha&&a.enable(8),D.shadowMapEnabled&&a.enable(9),D.useLegacyLights&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.transmission&&a.enable(15),D.sheen&&a.enable(16),D.opaque&&a.enable(17),D.pointsUvs&&a.enable(18),P.push(a.mask)}function T(P){const D=v[P.type];let O;if(D){const B=vl[D];O=q4.clone(B.uniforms)}else O=P.uniforms;return O}function L(P,D){let O;for(let B=0,V=u.length;B<V;B++){const H=u[B];if(H.cacheKey===D){O=H,++O.usedTimes;break}}return O===void 0&&(O=new r9(t,D,P,s),u.push(O)),O}function k(P){if(--P.usedTimes===0){const D=u.indexOf(P);u[D]=u[u.length-1],u.pop(),P.destroy()}}function N(P){l.remove(P)}function R(){l.dispose()}return{getParameters:w,getProgramCacheKey:g,getUniforms:T,acquireProgram:L,releaseProgram:k,releaseShaderCache:N,programs:u,dispose:R}}function l9(){let t=new WeakMap;function e(s){let o=t.get(s);return o===void 0&&(o={},t.set(s,o)),o}function n(s){t.delete(s)}function r(s,o,a){t.get(s)[o]=a}function i(){t=new WeakMap}return{get:e,remove:n,update:r,dispose:i}}function u9(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function IA(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function NA(){const t=[];let e=0;const n=[],r=[],i=[];function s(){e=0,n.length=0,r.length=0,i.length=0}function o(h,f,d,v,x,w){let g=t[e];return g===void 0?(g={id:h.id,object:h,geometry:f,material:d,groupOrder:v,renderOrder:h.renderOrder,z:x,group:w},t[e]=g):(g.id=h.id,g.object=h,g.geometry=f,g.material=d,g.groupOrder=v,g.renderOrder=h.renderOrder,g.z=x,g.group=w),e++,g}function a(h,f,d,v,x,w){const g=o(h,f,d,v,x,w);d.transmission>0?r.push(g):d.transparent===!0?i.push(g):n.push(g)}function l(h,f,d,v,x,w){const g=o(h,f,d,v,x,w);d.transmission>0?r.unshift(g):d.transparent===!0?i.unshift(g):n.unshift(g)}function u(h,f){n.length>1&&n.sort(h||u9),r.length>1&&r.sort(f||IA),i.length>1&&i.sort(f||IA)}function c(){for(let h=e,f=t.length;h<f;h++){const d=t[h];if(d.id===null)break;d.id=null,d.object=null,d.geometry=null,d.material=null,d.group=null}}return{opaque:n,transmissive:r,transparent:i,init:s,push:a,unshift:l,finish:c,sort:u}}function c9(){let t=new WeakMap;function e(r,i){const s=t.get(r);let o;return s===void 0?(o=new NA,t.set(r,[o])):i>=s.length?(o=new NA,s.push(o)):o=s[i],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function h9(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new ge,color:new Zt};break;case"SpotLight":n={position:new ge,direction:new ge,color:new Zt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ge,color:new Zt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ge,skyColor:new Zt,groundColor:new Zt};break;case"RectAreaLight":n={color:new Zt,position:new ge,halfWidth:new ge,halfHeight:new ge};break}return t[e.id]=n,n}}}function f9(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new wt};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new wt};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new wt,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let d9=0;function p9(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function m9(t,e){const n=new h9,r=f9(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let c=0;c<9;c++)i.probe.push(new ge);const s=new ge,o=new Hn,a=new Hn;function l(c,h){let f=0,d=0,v=0;for(let O=0;O<9;O++)i.probe[O].set(0,0,0);let x=0,w=0,g=0,S=0,_=0,T=0,L=0,k=0,N=0,R=0;c.sort(p9);const P=h===!0?Math.PI:1;for(let O=0,B=c.length;O<B;O++){const V=c[O],H=V.color,ee=V.intensity,se=V.distance,ce=V.shadow&&V.shadow.map?V.shadow.map.texture:null;if(V.isAmbientLight)f+=H.r*ee*P,d+=H.g*ee*P,v+=H.b*ee*P;else if(V.isLightProbe)for(let W=0;W<9;W++)i.probe[W].addScaledVector(V.sh.coefficients[W],ee);else if(V.isDirectionalLight){const W=n.get(V);if(W.color.copy(V.color).multiplyScalar(V.intensity*P),V.castShadow){const Y=V.shadow,j=r.get(V);j.shadowBias=Y.bias,j.shadowNormalBias=Y.normalBias,j.shadowRadius=Y.radius,j.shadowMapSize=Y.mapSize,i.directionalShadow[x]=j,i.directionalShadowMap[x]=ce,i.directionalShadowMatrix[x]=V.shadow.matrix,T++}i.directional[x]=W,x++}else if(V.isSpotLight){const W=n.get(V);W.position.setFromMatrixPosition(V.matrixWorld),W.color.copy(H).multiplyScalar(ee*P),W.distance=se,W.coneCos=Math.cos(V.angle),W.penumbraCos=Math.cos(V.angle*(1-V.penumbra)),W.decay=V.decay,i.spot[g]=W;const Y=V.shadow;if(V.map&&(i.spotLightMap[N]=V.map,N++,Y.updateMatrices(V),V.castShadow&&R++),i.spotLightMatrix[g]=Y.matrix,V.castShadow){const j=r.get(V);j.shadowBias=Y.bias,j.shadowNormalBias=Y.normalBias,j.shadowRadius=Y.radius,j.shadowMapSize=Y.mapSize,i.spotShadow[g]=j,i.spotShadowMap[g]=ce,k++}g++}else if(V.isRectAreaLight){const W=n.get(V);W.color.copy(H).multiplyScalar(ee),W.halfWidth.set(V.width*.5,0,0),W.halfHeight.set(0,V.height*.5,0),i.rectArea[S]=W,S++}else if(V.isPointLight){const W=n.get(V);if(W.color.copy(V.color).multiplyScalar(V.intensity*P),W.distance=V.distance,W.decay=V.decay,V.castShadow){const Y=V.shadow,j=r.get(V);j.shadowBias=Y.bias,j.shadowNormalBias=Y.normalBias,j.shadowRadius=Y.radius,j.shadowMapSize=Y.mapSize,j.shadowCameraNear=Y.camera.near,j.shadowCameraFar=Y.camera.far,i.pointShadow[w]=j,i.pointShadowMap[w]=ce,i.pointShadowMatrix[w]=V.shadow.matrix,L++}i.point[w]=W,w++}else if(V.isHemisphereLight){const W=n.get(V);W.skyColor.copy(V.color).multiplyScalar(ee*P),W.groundColor.copy(V.groundColor).multiplyScalar(ee*P),i.hemi[_]=W,_++}}S>0&&(e.isWebGL2||t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Gt.LTC_FLOAT_1,i.rectAreaLTC2=Gt.LTC_FLOAT_2):t.has("OES_texture_half_float_linear")===!0?(i.rectAreaLTC1=Gt.LTC_HALF_1,i.rectAreaLTC2=Gt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),i.ambient[0]=f,i.ambient[1]=d,i.ambient[2]=v;const D=i.hash;(D.directionalLength!==x||D.pointLength!==w||D.spotLength!==g||D.rectAreaLength!==S||D.hemiLength!==_||D.numDirectionalShadows!==T||D.numPointShadows!==L||D.numSpotShadows!==k||D.numSpotMaps!==N)&&(i.directional.length=x,i.spot.length=g,i.rectArea.length=S,i.point.length=w,i.hemi.length=_,i.directionalShadow.length=T,i.directionalShadowMap.length=T,i.pointShadow.length=L,i.pointShadowMap.length=L,i.spotShadow.length=k,i.spotShadowMap.length=k,i.directionalShadowMatrix.length=T,i.pointShadowMatrix.length=L,i.spotLightMatrix.length=k+N-R,i.spotLightMap.length=N,i.numSpotLightShadowsWithMaps=R,D.directionalLength=x,D.pointLength=w,D.spotLength=g,D.rectAreaLength=S,D.hemiLength=_,D.numDirectionalShadows=T,D.numPointShadows=L,D.numSpotShadows=k,D.numSpotMaps=N,i.version=d9++)}function u(c,h){let f=0,d=0,v=0,x=0,w=0;const g=h.matrixWorldInverse;for(let S=0,_=c.length;S<_;S++){const T=c[S];if(T.isDirectionalLight){const L=i.directional[f];L.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),L.direction.sub(s),L.direction.transformDirection(g),f++}else if(T.isSpotLight){const L=i.spot[v];L.position.setFromMatrixPosition(T.matrixWorld),L.position.applyMatrix4(g),L.direction.setFromMatrixPosition(T.matrixWorld),s.setFromMatrixPosition(T.target.matrixWorld),L.direction.sub(s),L.direction.transformDirection(g),v++}else if(T.isRectAreaLight){const L=i.rectArea[x];L.position.setFromMatrixPosition(T.matrixWorld),L.position.applyMatrix4(g),a.identity(),o.copy(T.matrixWorld),o.premultiply(g),a.extractRotation(o),L.halfWidth.set(T.width*.5,0,0),L.halfHeight.set(0,T.height*.5,0),L.halfWidth.applyMatrix4(a),L.halfHeight.applyMatrix4(a),x++}else if(T.isPointLight){const L=i.point[d];L.position.setFromMatrixPosition(T.matrixWorld),L.position.applyMatrix4(g),d++}else if(T.isHemisphereLight){const L=i.hemi[w];L.direction.setFromMatrixPosition(T.matrixWorld),L.direction.transformDirection(g),w++}}}return{setup:l,setupView:u,state:i}}function FA(t,e){const n=new m9(t,e),r=[],i=[];function s(){r.length=0,i.length=0}function o(h){r.push(h)}function a(h){i.push(h)}function l(h){n.setup(r,h)}function u(h){n.setupView(r,h)}return{init:s,state:{lightsArray:r,shadowsArray:i,lights:n},setupLights:l,setupLightsView:u,pushLight:o,pushShadow:a}}function g9(t,e){let n=new WeakMap;function r(s,o=0){const a=n.get(s);let l;return a===void 0?(l=new FA(t,e),n.set(s,[l])):o>=a.length?(l=new FA(t,e),a.push(l)):l=a[o],l}function i(){n=new WeakMap}return{get:r,dispose:i}}class OM extends Fs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=P4,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class UM extends Fs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const v9=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,y9=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function x9(t,e,n){let r=new sx;const i=new wt,s=new wt,o=new Lr,a=new OM({depthPacking:R4}),l=new UM,u={},c=n.maxTextureSize,h={[ac]:yo,[yo]:ac,[xl]:xl},f=new Al({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new wt},radius:{value:4}},vertexShader:v9,fragmentShader:y9}),d=f.clone();d.defines.HORIZONTAL_PASS=1;const v=new An;v.setAttribute("position",new ur(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new qi(v,f),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ex;let g=this.type;this.render=function(L,k,N){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||L.length===0)return;const R=t.getRenderTarget(),P=t.getActiveCubeFace(),D=t.getActiveMipmapLevel(),O=t.state;O.setBlending(tc),O.buffers.color.setClear(1,1,1,1),O.buffers.depth.setTest(!0),O.setScissorTest(!1);const B=g!==dl&&this.type===dl,V=g===dl&&this.type!==dl;for(let H=0,ee=L.length;H<ee;H++){const se=L[H],ce=se.shadow;if(ce===void 0){console.warn("THREE.WebGLShadowMap:",se,"has no shadow.");continue}if(ce.autoUpdate===!1&&ce.needsUpdate===!1)continue;i.copy(ce.mapSize);const W=ce.getFrameExtents();if(i.multiply(W),s.copy(ce.mapSize),(i.x>c||i.y>c)&&(i.x>c&&(s.x=Math.floor(c/W.x),i.x=s.x*W.x,ce.mapSize.x=s.x),i.y>c&&(s.y=Math.floor(c/W.y),i.y=s.y*W.y,ce.mapSize.y=s.y)),ce.map===null||B===!0||V===!0){const j=this.type!==dl?{minFilter:Fi,magFilter:Fi}:{};ce.map!==null&&ce.map.dispose(),ce.map=new El(i.x,i.y,j),ce.map.texture.name=se.name+".shadowMap",ce.camera.updateProjectionMatrix()}t.setRenderTarget(ce.map),t.clear();const Y=ce.getViewportCount();for(let j=0;j<Y;j++){const re=ce.getViewport(j);o.set(s.x*re.x,s.y*re.y,s.x*re.z,s.y*re.w),O.viewport(o),ce.updateMatrices(se,j),r=ce.getFrustum(),T(k,N,ce.camera,se,this.type)}ce.isPointLightShadow!==!0&&this.type===dl&&S(ce,N),ce.needsUpdate=!1}g=this.type,w.needsUpdate=!1,t.setRenderTarget(R,P,D)};function S(L,k){const N=e.update(x);f.defines.VSM_SAMPLES!==L.blurSamples&&(f.defines.VSM_SAMPLES=L.blurSamples,d.defines.VSM_SAMPLES=L.blurSamples,f.needsUpdate=!0,d.needsUpdate=!0),L.mapPass===null&&(L.mapPass=new El(i.x,i.y)),f.uniforms.shadow_pass.value=L.map.texture,f.uniforms.resolution.value=L.mapSize,f.uniforms.radius.value=L.radius,t.setRenderTarget(L.mapPass),t.clear(),t.renderBufferDirect(k,null,N,f,x,null),d.uniforms.shadow_pass.value=L.mapPass.texture,d.uniforms.resolution.value=L.mapSize,d.uniforms.radius.value=L.radius,t.setRenderTarget(L.map),t.clear(),t.renderBufferDirect(k,null,N,d,x,null)}function _(L,k,N,R){let P=null;const D=N.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(D!==void 0)P=D;else if(P=N.isPointLight===!0?l:a,t.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0){const O=P.uuid,B=k.uuid;let V=u[O];V===void 0&&(V={},u[O]=V);let H=V[B];H===void 0&&(H=P.clone(),V[B]=H),P=H}if(P.visible=k.visible,P.wireframe=k.wireframe,R===dl?P.side=k.shadowSide!==null?k.shadowSide:k.side:P.side=k.shadowSide!==null?k.shadowSide:h[k.side],P.alphaMap=k.alphaMap,P.alphaTest=k.alphaTest,P.map=k.map,P.clipShadows=k.clipShadows,P.clippingPlanes=k.clippingPlanes,P.clipIntersection=k.clipIntersection,P.displacementMap=k.displacementMap,P.displacementScale=k.displacementScale,P.displacementBias=k.displacementBias,P.wireframeLinewidth=k.wireframeLinewidth,P.linewidth=k.linewidth,N.isPointLight===!0&&P.isMeshDistanceMaterial===!0){const O=t.properties.get(P);O.light=N}return P}function T(L,k,N,R,P){if(L.visible===!1)return;if(L.layers.test(k.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&P===dl)&&(!L.frustumCulled||r.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(N.matrixWorldInverse,L.matrixWorld);const B=e.update(L),V=L.material;if(Array.isArray(V)){const H=B.groups;for(let ee=0,se=H.length;ee<se;ee++){const ce=H[ee],W=V[ce.materialIndex];if(W&&W.visible){const Y=_(L,W,R,P);t.renderBufferDirect(N,null,B,Y,L,ce)}}}else if(V.visible){const H=_(L,V,R,P);t.renderBufferDirect(N,null,B,H,L,null)}}const O=L.children;for(let B=0,V=O.length;B<V;B++)T(O[B],k,N,R,P)}}function w9(t,e,n){const r=n.isWebGL2;function i(){let Ae=!1;const Fe=new Lr;let Ge=null;const yt=new Lr(0,0,0,0);return{setMask:function(pt){Ge!==pt&&!Ae&&(t.colorMask(pt,pt,pt,pt),Ge=pt)},setLocked:function(pt){Ae=pt},setClear:function(pt,kt,Vt,yn,Nn){Nn===!0&&(pt*=yn,kt*=yn,Vt*=yn),Fe.set(pt,kt,Vt,yn),yt.equals(Fe)===!1&&(t.clearColor(pt,kt,Vt,yn),yt.copy(Fe))},reset:function(){Ae=!1,Ge=null,yt.set(-1,0,0,0)}}}function s(){let Ae=!1,Fe=null,Ge=null,yt=null;return{setTest:function(pt){pt?Se(t.DEPTH_TEST):Ee(t.DEPTH_TEST)},setMask:function(pt){Fe!==pt&&!Ae&&(t.depthMask(pt),Fe=pt)},setFunc:function(pt){if(Ge!==pt){switch(pt){case o4:t.depthFunc(t.NEVER);break;case a4:t.depthFunc(t.ALWAYS);break;case l4:t.depthFunc(t.LESS);break;case x2:t.depthFunc(t.LEQUAL);break;case u4:t.depthFunc(t.EQUAL);break;case c4:t.depthFunc(t.GEQUAL);break;case h4:t.depthFunc(t.GREATER);break;case f4:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Ge=pt}},setLocked:function(pt){Ae=pt},setClear:function(pt){yt!==pt&&(t.clearDepth(pt),yt=pt)},reset:function(){Ae=!1,Fe=null,Ge=null,yt=null}}}function o(){let Ae=!1,Fe=null,Ge=null,yt=null,pt=null,kt=null,Vt=null,yn=null,Nn=null;return{setTest:function(gn){Ae||(gn?Se(t.STENCIL_TEST):Ee(t.STENCIL_TEST))},setMask:function(gn){Fe!==gn&&!Ae&&(t.stencilMask(gn),Fe=gn)},setFunc:function(gn,kn,Ft){(Ge!==gn||yt!==kn||pt!==Ft)&&(t.stencilFunc(gn,kn,Ft),Ge=gn,yt=kn,pt=Ft)},setOp:function(gn,kn,Ft){(kt!==gn||Vt!==kn||yn!==Ft)&&(t.stencilOp(gn,kn,Ft),kt=gn,Vt=kn,yn=Ft)},setLocked:function(gn){Ae=gn},setClear:function(gn){Nn!==gn&&(t.clearStencil(gn),Nn=gn)},reset:function(){Ae=!1,Fe=null,Ge=null,yt=null,pt=null,kt=null,Vt=null,yn=null,Nn=null}}}const a=new i,l=new s,u=new o,c=new WeakMap,h=new WeakMap;let f={},d={},v=new WeakMap,x=[],w=null,g=!1,S=null,_=null,T=null,L=null,k=null,N=null,R=null,P=!1,D=null,O=null,B=null,V=null,H=null;const ee=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let se=!1,ce=0;const W=t.getParameter(t.VERSION);W.indexOf("WebGL")!==-1?(ce=parseFloat(/^WebGL (\d)/.exec(W)[1]),se=ce>=1):W.indexOf("OpenGL ES")!==-1&&(ce=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),se=ce>=2);let Y=null,j={};const re=t.getParameter(t.SCISSOR_BOX),I=t.getParameter(t.VIEWPORT),X=new Lr().fromArray(re),J=new Lr().fromArray(I);function ae(Ae,Fe,Ge,yt){const pt=new Uint8Array(4),kt=t.createTexture();t.bindTexture(Ae,kt),t.texParameteri(Ae,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Ae,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Vt=0;Vt<Ge;Vt++)r&&(Ae===t.TEXTURE_3D||Ae===t.TEXTURE_2D_ARRAY)?t.texImage3D(Fe,0,t.RGBA,1,1,yt,0,t.RGBA,t.UNSIGNED_BYTE,pt):t.texImage2D(Fe+Vt,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,pt);return kt}const fe={};fe[t.TEXTURE_2D]=ae(t.TEXTURE_2D,t.TEXTURE_2D,1),fe[t.TEXTURE_CUBE_MAP]=ae(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),r&&(fe[t.TEXTURE_2D_ARRAY]=ae(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),fe[t.TEXTURE_3D]=ae(t.TEXTURE_3D,t.TEXTURE_3D,1,1)),a.setClear(0,0,0,1),l.setClear(1),u.setClear(0),Se(t.DEPTH_TEST),l.setFunc(x2),K(!1),tt(tb),Se(t.CULL_FACE),ze(tc);function Se(Ae){f[Ae]!==!0&&(t.enable(Ae),f[Ae]=!0)}function Ee(Ae){f[Ae]!==!1&&(t.disable(Ae),f[Ae]=!1)}function Ce(Ae,Fe){return d[Ae]!==Fe?(t.bindFramebuffer(Ae,Fe),d[Ae]=Fe,r&&(Ae===t.DRAW_FRAMEBUFFER&&(d[t.FRAMEBUFFER]=Fe),Ae===t.FRAMEBUFFER&&(d[t.DRAW_FRAMEBUFFER]=Fe)),!0):!1}function $e(Ae,Fe){let Ge=x,yt=!1;if(Ae)if(Ge=v.get(Fe),Ge===void 0&&(Ge=[],v.set(Fe,Ge)),Ae.isWebGLMultipleRenderTargets){const pt=Ae.texture;if(Ge.length!==pt.length||Ge[0]!==t.COLOR_ATTACHMENT0){for(let kt=0,Vt=pt.length;kt<Vt;kt++)Ge[kt]=t.COLOR_ATTACHMENT0+kt;Ge.length=pt.length,yt=!0}}else Ge[0]!==t.COLOR_ATTACHMENT0&&(Ge[0]=t.COLOR_ATTACHMENT0,yt=!0);else Ge[0]!==t.BACK&&(Ge[0]=t.BACK,yt=!0);yt&&(n.isWebGL2?t.drawBuffers(Ge):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Ge))}function ke(Ae){return w!==Ae?(t.useProgram(Ae),w=Ae,!0):!1}const he={[Cf]:t.FUNC_ADD,[ZR]:t.FUNC_SUBTRACT,[$R]:t.FUNC_REVERSE_SUBTRACT};if(r)he[sb]=t.MIN,he[ob]=t.MAX;else{const Ae=e.get("EXT_blend_minmax");Ae!==null&&(he[sb]=Ae.MIN_EXT,he[ob]=Ae.MAX_EXT)}const De={[KR]:t.ZERO,[JR]:t.ONE,[QR]:t.SRC_COLOR,[gM]:t.SRC_ALPHA,[s4]:t.SRC_ALPHA_SATURATE,[r4]:t.DST_COLOR,[t4]:t.DST_ALPHA,[e4]:t.ONE_MINUS_SRC_COLOR,[vM]:t.ONE_MINUS_SRC_ALPHA,[i4]:t.ONE_MINUS_DST_COLOR,[n4]:t.ONE_MINUS_DST_ALPHA};function ze(Ae,Fe,Ge,yt,pt,kt,Vt,yn){if(Ae===tc){g===!0&&(Ee(t.BLEND),g=!1);return}if(g===!1&&(Se(t.BLEND),g=!0),Ae!==YR){if(Ae!==S||yn!==P){if((_!==Cf||k!==Cf)&&(t.blendEquation(t.FUNC_ADD),_=Cf,k=Cf),yn)switch(Ae){case Wf:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case nb:t.blendFunc(t.ONE,t.ONE);break;case rb:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case ib:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}else switch(Ae){case Wf:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case nb:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case rb:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case ib:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Ae);break}T=null,L=null,N=null,R=null,S=Ae,P=yn}return}pt=pt||Fe,kt=kt||Ge,Vt=Vt||yt,(Fe!==_||pt!==k)&&(t.blendEquationSeparate(he[Fe],he[pt]),_=Fe,k=pt),(Ge!==T||yt!==L||kt!==N||Vt!==R)&&(t.blendFuncSeparate(De[Ge],De[yt],De[kt],De[Vt]),T=Ge,L=yt,N=kt,R=Vt),S=Ae,P=!1}function pe(Ae,Fe){Ae.side===xl?Ee(t.CULL_FACE):Se(t.CULL_FACE);let Ge=Ae.side===yo;Fe&&(Ge=!Ge),K(Ge),Ae.blending===Wf&&Ae.transparent===!1?ze(tc):ze(Ae.blending,Ae.blendEquation,Ae.blendSrc,Ae.blendDst,Ae.blendEquationAlpha,Ae.blendSrcAlpha,Ae.blendDstAlpha,Ae.premultipliedAlpha),l.setFunc(Ae.depthFunc),l.setTest(Ae.depthTest),l.setMask(Ae.depthWrite),a.setMask(Ae.colorWrite);const yt=Ae.stencilWrite;u.setTest(yt),yt&&(u.setMask(Ae.stencilWriteMask),u.setFunc(Ae.stencilFunc,Ae.stencilRef,Ae.stencilFuncMask),u.setOp(Ae.stencilFail,Ae.stencilZFail,Ae.stencilZPass)),Ne(Ae.polygonOffset,Ae.polygonOffsetFactor,Ae.polygonOffsetUnits),Ae.alphaToCoverage===!0?Se(t.SAMPLE_ALPHA_TO_COVERAGE):Ee(t.SAMPLE_ALPHA_TO_COVERAGE)}function K(Ae){D!==Ae&&(Ae?t.frontFace(t.CW):t.frontFace(t.CCW),D=Ae)}function tt(Ae){Ae!==jR?(Se(t.CULL_FACE),Ae!==O&&(Ae===tb?t.cullFace(t.BACK):Ae===XR?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):Ee(t.CULL_FACE),O=Ae}function Ze(Ae){Ae!==B&&(se&&t.lineWidth(Ae),B=Ae)}function Ne(Ae,Fe,Ge){Ae?(Se(t.POLYGON_OFFSET_FILL),(V!==Fe||H!==Ge)&&(t.polygonOffset(Fe,Ge),V=Fe,H=Ge)):Ee(t.POLYGON_OFFSET_FILL)}function Ke(Ae){Ae?Se(t.SCISSOR_TEST):Ee(t.SCISSOR_TEST)}function ft(Ae){Ae===void 0&&(Ae=t.TEXTURE0+ee-1),Y!==Ae&&(t.activeTexture(Ae),Y=Ae)}function vt(Ae,Fe,Ge){Ge===void 0&&(Y===null?Ge=t.TEXTURE0+ee-1:Ge=Y);let yt=j[Ge];yt===void 0&&(yt={type:void 0,texture:void 0},j[Ge]=yt),(yt.type!==Ae||yt.texture!==Fe)&&(Y!==Ge&&(t.activeTexture(Ge),Y=Ge),t.bindTexture(Ae,Fe||fe[Ae]),yt.type=Ae,yt.texture=Fe)}function ue(){const Ae=j[Y];Ae!==void 0&&Ae.type!==void 0&&(t.bindTexture(Ae.type,null),Ae.type=void 0,Ae.texture=void 0)}function Q(){try{t.compressedTexImage2D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Pe(){try{t.compressedTexImage3D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function et(){try{t.texSubImage2D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Qe(){try{t.texSubImage3D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function dt(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function lt(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function it(){try{t.texStorage2D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Te(){try{t.texStorage3D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Nt(){try{t.texImage2D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function At(){try{t.texImage3D.apply(t,arguments)}catch(Ae){console.error("THREE.WebGLState:",Ae)}}function Ct(Ae){X.equals(Ae)===!1&&(t.scissor(Ae.x,Ae.y,Ae.z,Ae.w),X.copy(Ae))}function bt(Ae){J.equals(Ae)===!1&&(t.viewport(Ae.x,Ae.y,Ae.z,Ae.w),J.copy(Ae))}function xe(Ae,Fe){let Ge=h.get(Fe);Ge===void 0&&(Ge=new WeakMap,h.set(Fe,Ge));let yt=Ge.get(Ae);yt===void 0&&(yt=t.getUniformBlockIndex(Fe,Ae.name),Ge.set(Ae,yt))}function Ye(Ae,Fe){const yt=h.get(Fe).get(Ae);c.get(Fe)!==yt&&(t.uniformBlockBinding(Fe,yt,Ae.__bindingPointIndex),c.set(Fe,yt))}function st(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),r===!0&&(t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),f={},Y=null,j={},d={},v=new WeakMap,x=[],w=null,g=!1,S=null,_=null,T=null,L=null,k=null,N=null,R=null,P=!1,D=null,O=null,B=null,V=null,H=null,X.set(0,0,t.canvas.width,t.canvas.height),J.set(0,0,t.canvas.width,t.canvas.height),a.reset(),l.reset(),u.reset()}return{buffers:{color:a,depth:l,stencil:u},enable:Se,disable:Ee,bindFramebuffer:Ce,drawBuffers:$e,useProgram:ke,setBlending:ze,setMaterial:pe,setFlipSided:K,setCullFace:tt,setLineWidth:Ze,setPolygonOffset:Ne,setScissorTest:Ke,activeTexture:ft,bindTexture:vt,unbindTexture:ue,compressedTexImage2D:Q,compressedTexImage3D:Pe,texImage2D:Nt,texImage3D:At,updateUBOMapping:xe,uniformBlockBinding:Ye,texStorage2D:it,texStorage3D:Te,texSubImage2D:et,texSubImage3D:Qe,compressedTexSubImage2D:dt,compressedTexSubImage3D:lt,scissor:Ct,viewport:bt,reset:st}}function S9(t,e,n,r,i,s,o){const a=i.isWebGL2,l=i.maxTextures,u=i.maxCubemapSize,c=i.maxTextureSize,h=i.maxSamples,f=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,d=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),v=new WeakMap;let x;const w=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function S(ue,Q){return g?new OffscreenCanvas(ue,Q):R0("canvas")}function _(ue,Q,Pe,et){let Qe=1;if((ue.width>et||ue.height>et)&&(Qe=et/Math.max(ue.width,ue.height)),Qe<1||Q===!0)if(typeof HTMLImageElement<"u"&&ue instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&ue instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&ue instanceof ImageBitmap){const dt=Q?_2:Math.floor,lt=dt(Qe*ue.width),it=dt(Qe*ue.height);x===void 0&&(x=S(lt,it));const Te=Pe?S(lt,it):x;return Te.width=lt,Te.height=it,Te.getContext("2d").drawImage(ue,0,0,lt,it),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ue.width+"x"+ue.height+") to ("+lt+"x"+it+")."),Te}else return"data"in ue&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ue.width+"x"+ue.height+")."),ue;return ue}function T(ue){return Rb(ue.width)&&Rb(ue.height)}function L(ue){return a?!1:ue.wrapS!==to||ue.wrapT!==to||ue.minFilter!==Fi&&ue.minFilter!==Kr}function k(ue,Q){return ue.generateMipmaps&&Q&&ue.minFilter!==Fi&&ue.minFilter!==Kr}function N(ue){t.generateMipmap(ue)}function R(ue,Q,Pe,et,Qe=!1){if(a===!1)return Q;if(ue!==null){if(t[ue]!==void 0)return t[ue];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ue+"'")}let dt=Q;return Q===t.RED&&(Pe===t.FLOAT&&(dt=t.R32F),Pe===t.HALF_FLOAT&&(dt=t.R16F),Pe===t.UNSIGNED_BYTE&&(dt=t.R8)),Q===t.RED_INTEGER&&(Pe===t.UNSIGNED_BYTE&&(dt=t.R8UI),Pe===t.UNSIGNED_SHORT&&(dt=t.R16UI),Pe===t.UNSIGNED_INT&&(dt=t.R32UI),Pe===t.BYTE&&(dt=t.R8I),Pe===t.SHORT&&(dt=t.R16I),Pe===t.INT&&(dt=t.R32I)),Q===t.RG&&(Pe===t.FLOAT&&(dt=t.RG32F),Pe===t.HALF_FLOAT&&(dt=t.RG16F),Pe===t.UNSIGNED_BYTE&&(dt=t.RG8)),Q===t.RGBA&&(Pe===t.FLOAT&&(dt=t.RGBA32F),Pe===t.HALF_FLOAT&&(dt=t.RGBA16F),Pe===t.UNSIGNED_BYTE&&(dt=et===Gn&&Qe===!1?t.SRGB8_ALPHA8:t.RGBA8),Pe===t.UNSIGNED_SHORT_4_4_4_4&&(dt=t.RGBA4),Pe===t.UNSIGNED_SHORT_5_5_5_1&&(dt=t.RGB5_A1)),(dt===t.R16F||dt===t.R32F||dt===t.RG16F||dt===t.RG32F||dt===t.RGBA16F||dt===t.RGBA32F)&&e.get("EXT_color_buffer_float"),dt}function P(ue,Q,Pe){return k(ue,Pe)===!0||ue.isFramebufferTexture&&ue.minFilter!==Fi&&ue.minFilter!==Kr?Math.log2(Math.max(Q.width,Q.height))+1:ue.mipmaps!==void 0&&ue.mipmaps.length>0?ue.mipmaps.length:ue.isCompressedTexture&&Array.isArray(ue.image)?Q.mipmaps.length:1}function D(ue){return ue===Fi||ue===w2||ue===Xg?t.NEAREST:t.LINEAR}function O(ue){const Q=ue.target;Q.removeEventListener("dispose",O),V(Q),Q.isVideoTexture&&v.delete(Q)}function B(ue){const Q=ue.target;Q.removeEventListener("dispose",B),ee(Q)}function V(ue){const Q=r.get(ue);if(Q.__webglInit===void 0)return;const Pe=ue.source,et=w.get(Pe);if(et){const Qe=et[Q.__cacheKey];Qe.usedTimes--,Qe.usedTimes===0&&H(ue),Object.keys(et).length===0&&w.delete(Pe)}r.remove(ue)}function H(ue){const Q=r.get(ue);t.deleteTexture(Q.__webglTexture);const Pe=ue.source,et=w.get(Pe);delete et[Q.__cacheKey],o.memory.textures--}function ee(ue){const Q=ue.texture,Pe=r.get(ue),et=r.get(Q);if(et.__webglTexture!==void 0&&(t.deleteTexture(et.__webglTexture),o.memory.textures--),ue.depthTexture&&ue.depthTexture.dispose(),ue.isWebGLCubeRenderTarget)for(let Qe=0;Qe<6;Qe++){if(Array.isArray(Pe.__webglFramebuffer[Qe]))for(let dt=0;dt<Pe.__webglFramebuffer[Qe].length;dt++)t.deleteFramebuffer(Pe.__webglFramebuffer[Qe][dt]);else t.deleteFramebuffer(Pe.__webglFramebuffer[Qe]);Pe.__webglDepthbuffer&&t.deleteRenderbuffer(Pe.__webglDepthbuffer[Qe])}else{if(Array.isArray(Pe.__webglFramebuffer))for(let Qe=0;Qe<Pe.__webglFramebuffer.length;Qe++)t.deleteFramebuffer(Pe.__webglFramebuffer[Qe]);else t.deleteFramebuffer(Pe.__webglFramebuffer);if(Pe.__webglDepthbuffer&&t.deleteRenderbuffer(Pe.__webglDepthbuffer),Pe.__webglMultisampledFramebuffer&&t.deleteFramebuffer(Pe.__webglMultisampledFramebuffer),Pe.__webglColorRenderbuffer)for(let Qe=0;Qe<Pe.__webglColorRenderbuffer.length;Qe++)Pe.__webglColorRenderbuffer[Qe]&&t.deleteRenderbuffer(Pe.__webglColorRenderbuffer[Qe]);Pe.__webglDepthRenderbuffer&&t.deleteRenderbuffer(Pe.__webglDepthRenderbuffer)}if(ue.isWebGLMultipleRenderTargets)for(let Qe=0,dt=Q.length;Qe<dt;Qe++){const lt=r.get(Q[Qe]);lt.__webglTexture&&(t.deleteTexture(lt.__webglTexture),o.memory.textures--),r.remove(Q[Qe])}r.remove(Q),r.remove(ue)}let se=0;function ce(){se=0}function W(){const ue=se;return ue>=l&&console.warn("THREE.WebGLTextures: Trying to use "+ue+" texture units while this GPU supports only "+l),se+=1,ue}function Y(ue){const Q=[];return Q.push(ue.wrapS),Q.push(ue.wrapT),Q.push(ue.wrapR||0),Q.push(ue.magFilter),Q.push(ue.minFilter),Q.push(ue.anisotropy),Q.push(ue.internalFormat),Q.push(ue.format),Q.push(ue.type),Q.push(ue.generateMipmaps),Q.push(ue.premultiplyAlpha),Q.push(ue.flipY),Q.push(ue.unpackAlignment),Q.push(ue.colorSpace),Q.join()}function j(ue,Q){const Pe=r.get(ue);if(ue.isVideoTexture&&ft(ue),ue.isRenderTargetTexture===!1&&ue.version>0&&Pe.__version!==ue.version){const et=ue.image;if(et===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(et.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ce(Pe,ue,Q);return}}n.bindTexture(t.TEXTURE_2D,Pe.__webglTexture,t.TEXTURE0+Q)}function re(ue,Q){const Pe=r.get(ue);if(ue.version>0&&Pe.__version!==ue.version){Ce(Pe,ue,Q);return}n.bindTexture(t.TEXTURE_2D_ARRAY,Pe.__webglTexture,t.TEXTURE0+Q)}function I(ue,Q){const Pe=r.get(ue);if(ue.version>0&&Pe.__version!==ue.version){Ce(Pe,ue,Q);return}n.bindTexture(t.TEXTURE_3D,Pe.__webglTexture,t.TEXTURE0+Q)}function X(ue,Q){const Pe=r.get(ue);if(ue.version>0&&Pe.__version!==ue.version){$e(Pe,ue,Q);return}n.bindTexture(t.TEXTURE_CUBE_MAP,Pe.__webglTexture,t.TEXTURE0+Q)}const J={[M0]:t.REPEAT,[to]:t.CLAMP_TO_EDGE,[E0]:t.MIRRORED_REPEAT},ae={[Fi]:t.NEAREST,[w2]:t.NEAREST_MIPMAP_NEAREST,[Xg]:t.NEAREST_MIPMAP_LINEAR,[Kr]:t.LINEAR,[xM]:t.LINEAR_MIPMAP_NEAREST,[Rh]:t.LINEAR_MIPMAP_LINEAR},fe={[N4]:t.NEVER,[H4]:t.ALWAYS,[F4]:t.LESS,[O4]:t.LEQUAL,[D4]:t.EQUAL,[z4]:t.GEQUAL,[U4]:t.GREATER,[B4]:t.NOTEQUAL};function Se(ue,Q,Pe){if(Pe?(t.texParameteri(ue,t.TEXTURE_WRAP_S,J[Q.wrapS]),t.texParameteri(ue,t.TEXTURE_WRAP_T,J[Q.wrapT]),(ue===t.TEXTURE_3D||ue===t.TEXTURE_2D_ARRAY)&&t.texParameteri(ue,t.TEXTURE_WRAP_R,J[Q.wrapR]),t.texParameteri(ue,t.TEXTURE_MAG_FILTER,ae[Q.magFilter]),t.texParameteri(ue,t.TEXTURE_MIN_FILTER,ae[Q.minFilter])):(t.texParameteri(ue,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(ue,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),(ue===t.TEXTURE_3D||ue===t.TEXTURE_2D_ARRAY)&&t.texParameteri(ue,t.TEXTURE_WRAP_R,t.CLAMP_TO_EDGE),(Q.wrapS!==to||Q.wrapT!==to)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(ue,t.TEXTURE_MAG_FILTER,D(Q.magFilter)),t.texParameteri(ue,t.TEXTURE_MIN_FILTER,D(Q.minFilter)),Q.minFilter!==Fi&&Q.minFilter!==Kr&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Q.compareFunction&&(t.texParameteri(ue,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(ue,t.TEXTURE_COMPARE_FUNC,fe[Q.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const et=e.get("EXT_texture_filter_anisotropic");if(Q.magFilter===Fi||Q.minFilter!==Xg&&Q.minFilter!==Rh||Q.type===ro&&e.has("OES_texture_float_linear")===!1||a===!1&&Q.type===go&&e.has("OES_texture_half_float_linear")===!1)return;(Q.anisotropy>1||r.get(Q).__currentAnisotropy)&&(t.texParameterf(ue,et.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Q.anisotropy,i.getMaxAnisotropy())),r.get(Q).__currentAnisotropy=Q.anisotropy)}}function Ee(ue,Q){let Pe=!1;ue.__webglInit===void 0&&(ue.__webglInit=!0,Q.addEventListener("dispose",O));const et=Q.source;let Qe=w.get(et);Qe===void 0&&(Qe={},w.set(et,Qe));const dt=Y(Q);if(dt!==ue.__cacheKey){Qe[dt]===void 0&&(Qe[dt]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,Pe=!0),Qe[dt].usedTimes++;const lt=Qe[ue.__cacheKey];lt!==void 0&&(Qe[ue.__cacheKey].usedTimes--,lt.usedTimes===0&&H(Q)),ue.__cacheKey=dt,ue.__webglTexture=Qe[dt].texture}return Pe}function Ce(ue,Q,Pe){let et=t.TEXTURE_2D;(Q.isDataArrayTexture||Q.isCompressedArrayTexture)&&(et=t.TEXTURE_2D_ARRAY),Q.isData3DTexture&&(et=t.TEXTURE_3D);const Qe=Ee(ue,Q),dt=Q.source;n.bindTexture(et,ue.__webglTexture,t.TEXTURE0+Pe);const lt=r.get(dt);if(dt.version!==lt.__version||Qe===!0){n.activeTexture(t.TEXTURE0+Pe),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Q.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Q.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const it=L(Q)&&T(Q.image)===!1;let Te=_(Q.image,it,!1,c);Te=vt(Q,Te);const Nt=T(Te)||a,At=s.convert(Q.format,Q.colorSpace);let Ct=s.convert(Q.type),bt=R(Q.internalFormat,At,Ct,Q.colorSpace);Se(et,Q,Nt);let xe;const Ye=Q.mipmaps,st=a&&Q.isVideoTexture!==!0,Ae=lt.__version===void 0||Qe===!0,Fe=P(Q,Te,Nt);if(Q.isDepthTexture)bt=t.DEPTH_COMPONENT,a?Q.type===ro?bt=t.DEPTH_COMPONENT32F:Q.type===$u?bt=t.DEPTH_COMPONENT24:Q.type===bh?bt=t.DEPTH24_STENCIL8:bt=t.DEPTH_COMPONENT16:Q.type===ro&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Q.format===Mh&&bt===t.DEPTH_COMPONENT&&Q.type!==nx&&Q.type!==$u&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Q.type=$u,Ct=s.convert(Q.type)),Q.format===ed&&bt===t.DEPTH_COMPONENT&&(bt=t.DEPTH_STENCIL,Q.type!==bh&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Q.type=bh,Ct=s.convert(Q.type))),Ae&&(st?n.texStorage2D(t.TEXTURE_2D,1,bt,Te.width,Te.height):n.texImage2D(t.TEXTURE_2D,0,bt,Te.width,Te.height,0,At,Ct,null));else if(Q.isDataTexture)if(Ye.length>0&&Nt){st&&Ae&&n.texStorage2D(t.TEXTURE_2D,Fe,bt,Ye[0].width,Ye[0].height);for(let Ge=0,yt=Ye.length;Ge<yt;Ge++)xe=Ye[Ge],st?n.texSubImage2D(t.TEXTURE_2D,Ge,0,0,xe.width,xe.height,At,Ct,xe.data):n.texImage2D(t.TEXTURE_2D,Ge,bt,xe.width,xe.height,0,At,Ct,xe.data);Q.generateMipmaps=!1}else st?(Ae&&n.texStorage2D(t.TEXTURE_2D,Fe,bt,Te.width,Te.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,Te.width,Te.height,At,Ct,Te.data)):n.texImage2D(t.TEXTURE_2D,0,bt,Te.width,Te.height,0,At,Ct,Te.data);else if(Q.isCompressedTexture)if(Q.isCompressedArrayTexture){st&&Ae&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Fe,bt,Ye[0].width,Ye[0].height,Te.depth);for(let Ge=0,yt=Ye.length;Ge<yt;Ge++)xe=Ye[Ge],Q.format!==mo?At!==null?st?n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Ge,0,0,0,xe.width,xe.height,Te.depth,At,xe.data,0,0):n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Ge,bt,xe.width,xe.height,Te.depth,0,xe.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):st?n.texSubImage3D(t.TEXTURE_2D_ARRAY,Ge,0,0,0,xe.width,xe.height,Te.depth,At,Ct,xe.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Ge,bt,xe.width,xe.height,Te.depth,0,At,Ct,xe.data)}else{st&&Ae&&n.texStorage2D(t.TEXTURE_2D,Fe,bt,Ye[0].width,Ye[0].height);for(let Ge=0,yt=Ye.length;Ge<yt;Ge++)xe=Ye[Ge],Q.format!==mo?At!==null?st?n.compressedTexSubImage2D(t.TEXTURE_2D,Ge,0,0,xe.width,xe.height,At,xe.data):n.compressedTexImage2D(t.TEXTURE_2D,Ge,bt,xe.width,xe.height,0,xe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):st?n.texSubImage2D(t.TEXTURE_2D,Ge,0,0,xe.width,xe.height,At,Ct,xe.data):n.texImage2D(t.TEXTURE_2D,Ge,bt,xe.width,xe.height,0,At,Ct,xe.data)}else if(Q.isDataArrayTexture)st?(Ae&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Fe,bt,Te.width,Te.height,Te.depth),n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,Te.width,Te.height,Te.depth,At,Ct,Te.data)):n.texImage3D(t.TEXTURE_2D_ARRAY,0,bt,Te.width,Te.height,Te.depth,0,At,Ct,Te.data);else if(Q.isData3DTexture)st?(Ae&&n.texStorage3D(t.TEXTURE_3D,Fe,bt,Te.width,Te.height,Te.depth),n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,Te.width,Te.height,Te.depth,At,Ct,Te.data)):n.texImage3D(t.TEXTURE_3D,0,bt,Te.width,Te.height,Te.depth,0,At,Ct,Te.data);else if(Q.isFramebufferTexture){if(Ae)if(st)n.texStorage2D(t.TEXTURE_2D,Fe,bt,Te.width,Te.height);else{let Ge=Te.width,yt=Te.height;for(let pt=0;pt<Fe;pt++)n.texImage2D(t.TEXTURE_2D,pt,bt,Ge,yt,0,At,Ct,null),Ge>>=1,yt>>=1}}else if(Ye.length>0&&Nt){st&&Ae&&n.texStorage2D(t.TEXTURE_2D,Fe,bt,Ye[0].width,Ye[0].height);for(let Ge=0,yt=Ye.length;Ge<yt;Ge++)xe=Ye[Ge],st?n.texSubImage2D(t.TEXTURE_2D,Ge,0,0,At,Ct,xe):n.texImage2D(t.TEXTURE_2D,Ge,bt,At,Ct,xe);Q.generateMipmaps=!1}else st?(Ae&&n.texStorage2D(t.TEXTURE_2D,Fe,bt,Te.width,Te.height),n.texSubImage2D(t.TEXTURE_2D,0,0,0,At,Ct,Te)):n.texImage2D(t.TEXTURE_2D,0,bt,At,Ct,Te);k(Q,Nt)&&N(et),lt.__version=dt.version,Q.onUpdate&&Q.onUpdate(Q)}ue.__version=Q.version}function $e(ue,Q,Pe){if(Q.image.length!==6)return;const et=Ee(ue,Q),Qe=Q.source;n.bindTexture(t.TEXTURE_CUBE_MAP,ue.__webglTexture,t.TEXTURE0+Pe);const dt=r.get(Qe);if(Qe.version!==dt.__version||et===!0){n.activeTexture(t.TEXTURE0+Pe),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,Q.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,Q.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE);const lt=Q.isCompressedTexture||Q.image[0].isCompressedTexture,it=Q.image[0]&&Q.image[0].isDataTexture,Te=[];for(let Ge=0;Ge<6;Ge++)!lt&&!it?Te[Ge]=_(Q.image[Ge],!1,!0,u):Te[Ge]=it?Q.image[Ge].image:Q.image[Ge],Te[Ge]=vt(Q,Te[Ge]);const Nt=Te[0],At=T(Nt)||a,Ct=s.convert(Q.format,Q.colorSpace),bt=s.convert(Q.type),xe=R(Q.internalFormat,Ct,bt,Q.colorSpace),Ye=a&&Q.isVideoTexture!==!0,st=dt.__version===void 0||et===!0;let Ae=P(Q,Nt,At);Se(t.TEXTURE_CUBE_MAP,Q,At);let Fe;if(lt){Ye&&st&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Ae,xe,Nt.width,Nt.height);for(let Ge=0;Ge<6;Ge++){Fe=Te[Ge].mipmaps;for(let yt=0;yt<Fe.length;yt++){const pt=Fe[yt];Q.format!==mo?Ct!==null?Ye?n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,yt,0,0,pt.width,pt.height,Ct,pt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,yt,xe,pt.width,pt.height,0,pt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ye?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,yt,0,0,pt.width,pt.height,Ct,bt,pt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,yt,xe,pt.width,pt.height,0,Ct,bt,pt.data)}}}else{Fe=Q.mipmaps,Ye&&st&&(Fe.length>0&&Ae++,n.texStorage2D(t.TEXTURE_CUBE_MAP,Ae,xe,Te[0].width,Te[0].height));for(let Ge=0;Ge<6;Ge++)if(it){Ye?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,0,0,Te[Ge].width,Te[Ge].height,Ct,bt,Te[Ge].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,xe,Te[Ge].width,Te[Ge].height,0,Ct,bt,Te[Ge].data);for(let yt=0;yt<Fe.length;yt++){const kt=Fe[yt].image[Ge].image;Ye?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,yt+1,0,0,kt.width,kt.height,Ct,bt,kt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,yt+1,xe,kt.width,kt.height,0,Ct,bt,kt.data)}}else{Ye?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,0,0,Ct,bt,Te[Ge]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0,xe,Ct,bt,Te[Ge]);for(let yt=0;yt<Fe.length;yt++){const pt=Fe[yt];Ye?n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,yt+1,0,0,Ct,bt,pt.image[Ge]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,yt+1,xe,Ct,bt,pt.image[Ge])}}}k(Q,At)&&N(t.TEXTURE_CUBE_MAP),dt.__version=Qe.version,Q.onUpdate&&Q.onUpdate(Q)}ue.__version=Q.version}function ke(ue,Q,Pe,et,Qe,dt){const lt=s.convert(Pe.format,Pe.colorSpace),it=s.convert(Pe.type),Te=R(Pe.internalFormat,lt,it,Pe.colorSpace);if(!r.get(Q).__hasExternalTextures){const At=Math.max(1,Q.width>>dt),Ct=Math.max(1,Q.height>>dt);Qe===t.TEXTURE_3D||Qe===t.TEXTURE_2D_ARRAY?n.texImage3D(Qe,dt,Te,At,Ct,Q.depth,0,lt,it,null):n.texImage2D(Qe,dt,Te,At,Ct,0,lt,it,null)}n.bindFramebuffer(t.FRAMEBUFFER,ue),Ke(Q)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,et,Qe,r.get(Pe).__webglTexture,0,Ne(Q)):(Qe===t.TEXTURE_2D||Qe>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&Qe<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,et,Qe,r.get(Pe).__webglTexture,dt),n.bindFramebuffer(t.FRAMEBUFFER,null)}function he(ue,Q,Pe){if(t.bindRenderbuffer(t.RENDERBUFFER,ue),Q.depthBuffer&&!Q.stencilBuffer){let et=t.DEPTH_COMPONENT16;if(Pe||Ke(Q)){const Qe=Q.depthTexture;Qe&&Qe.isDepthTexture&&(Qe.type===ro?et=t.DEPTH_COMPONENT32F:Qe.type===$u&&(et=t.DEPTH_COMPONENT24));const dt=Ne(Q);Ke(Q)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,dt,et,Q.width,Q.height):t.renderbufferStorageMultisample(t.RENDERBUFFER,dt,et,Q.width,Q.height)}else t.renderbufferStorage(t.RENDERBUFFER,et,Q.width,Q.height);t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,ue)}else if(Q.depthBuffer&&Q.stencilBuffer){const et=Ne(Q);Pe&&Ke(Q)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,et,t.DEPTH24_STENCIL8,Q.width,Q.height):Ke(Q)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,et,t.DEPTH24_STENCIL8,Q.width,Q.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,Q.width,Q.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,ue)}else{const et=Q.isWebGLMultipleRenderTargets===!0?Q.texture:[Q.texture];for(let Qe=0;Qe<et.length;Qe++){const dt=et[Qe],lt=s.convert(dt.format,dt.colorSpace),it=s.convert(dt.type),Te=R(dt.internalFormat,lt,it,dt.colorSpace),Nt=Ne(Q);Pe&&Ke(Q)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,Nt,Te,Q.width,Q.height):Ke(Q)?f.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,Nt,Te,Q.width,Q.height):t.renderbufferStorage(t.RENDERBUFFER,Te,Q.width,Q.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function De(ue,Q){if(Q&&Q.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,ue),!(Q.depthTexture&&Q.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!r.get(Q.depthTexture).__webglTexture||Q.depthTexture.image.width!==Q.width||Q.depthTexture.image.height!==Q.height)&&(Q.depthTexture.image.width=Q.width,Q.depthTexture.image.height=Q.height,Q.depthTexture.needsUpdate=!0),j(Q.depthTexture,0);const et=r.get(Q.depthTexture).__webglTexture,Qe=Ne(Q);if(Q.depthTexture.format===Mh)Ke(Q)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,et,0,Qe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,et,0);else if(Q.depthTexture.format===ed)Ke(Q)?f.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,et,0,Qe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,et,0);else throw new Error("Unknown depthTexture format")}function ze(ue){const Q=r.get(ue),Pe=ue.isWebGLCubeRenderTarget===!0;if(ue.depthTexture&&!Q.__autoAllocateDepthBuffer){if(Pe)throw new Error("target.depthTexture not supported in Cube render targets");De(Q.__webglFramebuffer,ue)}else if(Pe){Q.__webglDepthbuffer=[];for(let et=0;et<6;et++)n.bindFramebuffer(t.FRAMEBUFFER,Q.__webglFramebuffer[et]),Q.__webglDepthbuffer[et]=t.createRenderbuffer(),he(Q.__webglDepthbuffer[et],ue,!1)}else n.bindFramebuffer(t.FRAMEBUFFER,Q.__webglFramebuffer),Q.__webglDepthbuffer=t.createRenderbuffer(),he(Q.__webglDepthbuffer,ue,!1);n.bindFramebuffer(t.FRAMEBUFFER,null)}function pe(ue,Q,Pe){const et=r.get(ue);Q!==void 0&&ke(et.__webglFramebuffer,ue,ue.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),Pe!==void 0&&ze(ue)}function K(ue){const Q=ue.texture,Pe=r.get(ue),et=r.get(Q);ue.addEventListener("dispose",B),ue.isWebGLMultipleRenderTargets!==!0&&(et.__webglTexture===void 0&&(et.__webglTexture=t.createTexture()),et.__version=Q.version,o.memory.textures++);const Qe=ue.isWebGLCubeRenderTarget===!0,dt=ue.isWebGLMultipleRenderTargets===!0,lt=T(ue)||a;if(Qe){Pe.__webglFramebuffer=[];for(let it=0;it<6;it++)if(a&&Q.mipmaps&&Q.mipmaps.length>0){Pe.__webglFramebuffer[it]=[];for(let Te=0;Te<Q.mipmaps.length;Te++)Pe.__webglFramebuffer[it][Te]=t.createFramebuffer()}else Pe.__webglFramebuffer[it]=t.createFramebuffer()}else{if(a&&Q.mipmaps&&Q.mipmaps.length>0){Pe.__webglFramebuffer=[];for(let it=0;it<Q.mipmaps.length;it++)Pe.__webglFramebuffer[it]=t.createFramebuffer()}else Pe.__webglFramebuffer=t.createFramebuffer();if(dt)if(i.drawBuffers){const it=ue.texture;for(let Te=0,Nt=it.length;Te<Nt;Te++){const At=r.get(it[Te]);At.__webglTexture===void 0&&(At.__webglTexture=t.createTexture(),o.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(a&&ue.samples>0&&Ke(ue)===!1){const it=dt?Q:[Q];Pe.__webglMultisampledFramebuffer=t.createFramebuffer(),Pe.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,Pe.__webglMultisampledFramebuffer);for(let Te=0;Te<it.length;Te++){const Nt=it[Te];Pe.__webglColorRenderbuffer[Te]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,Pe.__webglColorRenderbuffer[Te]);const At=s.convert(Nt.format,Nt.colorSpace),Ct=s.convert(Nt.type),bt=R(Nt.internalFormat,At,Ct,Nt.colorSpace,ue.isXRRenderTarget===!0),xe=Ne(ue);t.renderbufferStorageMultisample(t.RENDERBUFFER,xe,bt,ue.width,ue.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Te,t.RENDERBUFFER,Pe.__webglColorRenderbuffer[Te])}t.bindRenderbuffer(t.RENDERBUFFER,null),ue.depthBuffer&&(Pe.__webglDepthRenderbuffer=t.createRenderbuffer(),he(Pe.__webglDepthRenderbuffer,ue,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(Qe){n.bindTexture(t.TEXTURE_CUBE_MAP,et.__webglTexture),Se(t.TEXTURE_CUBE_MAP,Q,lt);for(let it=0;it<6;it++)if(a&&Q.mipmaps&&Q.mipmaps.length>0)for(let Te=0;Te<Q.mipmaps.length;Te++)ke(Pe.__webglFramebuffer[it][Te],ue,Q,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+it,Te);else ke(Pe.__webglFramebuffer[it],ue,Q,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+it,0);k(Q,lt)&&N(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(dt){const it=ue.texture;for(let Te=0,Nt=it.length;Te<Nt;Te++){const At=it[Te],Ct=r.get(At);n.bindTexture(t.TEXTURE_2D,Ct.__webglTexture),Se(t.TEXTURE_2D,At,lt),ke(Pe.__webglFramebuffer,ue,At,t.COLOR_ATTACHMENT0+Te,t.TEXTURE_2D,0),k(At,lt)&&N(t.TEXTURE_2D)}n.unbindTexture()}else{let it=t.TEXTURE_2D;if((ue.isWebGL3DRenderTarget||ue.isWebGLArrayRenderTarget)&&(a?it=ue.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(it,et.__webglTexture),Se(it,Q,lt),a&&Q.mipmaps&&Q.mipmaps.length>0)for(let Te=0;Te<Q.mipmaps.length;Te++)ke(Pe.__webglFramebuffer[Te],ue,Q,t.COLOR_ATTACHMENT0,it,Te);else ke(Pe.__webglFramebuffer,ue,Q,t.COLOR_ATTACHMENT0,it,0);k(Q,lt)&&N(it),n.unbindTexture()}ue.depthBuffer&&ze(ue)}function tt(ue){const Q=T(ue)||a,Pe=ue.isWebGLMultipleRenderTargets===!0?ue.texture:[ue.texture];for(let et=0,Qe=Pe.length;et<Qe;et++){const dt=Pe[et];if(k(dt,Q)){const lt=ue.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:t.TEXTURE_2D,it=r.get(dt).__webglTexture;n.bindTexture(lt,it),N(lt),n.unbindTexture()}}}function Ze(ue){if(a&&ue.samples>0&&Ke(ue)===!1){const Q=ue.isWebGLMultipleRenderTargets?ue.texture:[ue.texture],Pe=ue.width,et=ue.height;let Qe=t.COLOR_BUFFER_BIT;const dt=[],lt=ue.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,it=r.get(ue),Te=ue.isWebGLMultipleRenderTargets===!0;if(Te)for(let Nt=0;Nt<Q.length;Nt++)n.bindFramebuffer(t.FRAMEBUFFER,it.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Nt,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,it.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Nt,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,it.__webglMultisampledFramebuffer),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,it.__webglFramebuffer);for(let Nt=0;Nt<Q.length;Nt++){dt.push(t.COLOR_ATTACHMENT0+Nt),ue.depthBuffer&&dt.push(lt);const At=it.__ignoreDepthValues!==void 0?it.__ignoreDepthValues:!1;if(At===!1&&(ue.depthBuffer&&(Qe|=t.DEPTH_BUFFER_BIT),ue.stencilBuffer&&(Qe|=t.STENCIL_BUFFER_BIT)),Te&&t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,it.__webglColorRenderbuffer[Nt]),At===!0&&(t.invalidateFramebuffer(t.READ_FRAMEBUFFER,[lt]),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[lt])),Te){const Ct=r.get(Q[Nt]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,Ct,0)}t.blitFramebuffer(0,0,Pe,et,0,0,Pe,et,Qe,t.NEAREST),d&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,dt)}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),Te)for(let Nt=0;Nt<Q.length;Nt++){n.bindFramebuffer(t.FRAMEBUFFER,it.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+Nt,t.RENDERBUFFER,it.__webglColorRenderbuffer[Nt]);const At=r.get(Q[Nt]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,it.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+Nt,t.TEXTURE_2D,At,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,it.__webglMultisampledFramebuffer)}}function Ne(ue){return Math.min(h,ue.samples)}function Ke(ue){const Q=r.get(ue);return a&&ue.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Q.__useRenderToTexture!==!1}function ft(ue){const Q=o.render.frame;v.get(ue)!==Q&&(v.set(ue,Q),ue.update())}function vt(ue,Q){const Pe=ue.colorSpace,et=ue.format,Qe=ue.type;return ue.isCompressedTexture===!0||ue.format===S2||Pe!==Ml&&Pe!==Ah&&(Pe===Gn?a===!1?e.has("EXT_sRGB")===!0&&et===mo?(ue.format=S2,ue.minFilter=Kr,ue.generateMipmaps=!1):Q=RM.sRGBToLinear(Q):(et!==mo||Qe!==su)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",Pe)),Q}this.allocateTextureUnit=W,this.resetTextureUnits=ce,this.setTexture2D=j,this.setTexture2DArray=re,this.setTexture3D=I,this.setTextureCube=X,this.rebindTextures=pe,this.setupRenderTarget=K,this.updateRenderTargetMipmap=tt,this.updateMultisampleRenderTarget=Ze,this.setupDepthRenderbuffer=ze,this.setupFrameBufferTexture=ke,this.useMultisampledRTT=Ke}function ek(t,e,n){const r=n.isWebGL2;function i(s,o=Ah){let a;if(s===su)return t.UNSIGNED_BYTE;if(s===SM)return t.UNSIGNED_SHORT_4_4_4_4;if(s===_M)return t.UNSIGNED_SHORT_5_5_5_1;if(s===x4)return t.BYTE;if(s===w4)return t.SHORT;if(s===nx)return t.UNSIGNED_SHORT;if(s===wM)return t.INT;if(s===$u)return t.UNSIGNED_INT;if(s===ro)return t.FLOAT;if(s===go)return r?t.HALF_FLOAT:(a=e.get("OES_texture_half_float"),a!==null?a.HALF_FLOAT_OES:null);if(s===S4)return t.ALPHA;if(s===mo)return t.RGBA;if(s===_4)return t.LUMINANCE;if(s===b4)return t.LUMINANCE_ALPHA;if(s===Mh)return t.DEPTH_COMPONENT;if(s===ed)return t.DEPTH_STENCIL;if(s===S2)return a=e.get("EXT_sRGB"),a!==null?a.SRGB_ALPHA_EXT:null;if(s===bM)return t.RED;if(s===MM)return t.RED_INTEGER;if(s===M4)return t.RG;if(s===EM)return t.RG_INTEGER;if(s===AM)return t.RGBA_INTEGER;if(s===Ly||s===Py||s===Ry||s===ky)if(o===Gn)if(a=e.get("WEBGL_compressed_texture_s3tc_srgb"),a!==null){if(s===Ly)return a.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Py)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===Ry)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===ky)return a.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(a=e.get("WEBGL_compressed_texture_s3tc"),a!==null){if(s===Ly)return a.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Py)return a.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===Ry)return a.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===ky)return a.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===ab||s===lb||s===ub||s===cb)if(a=e.get("WEBGL_compressed_texture_pvrtc"),a!==null){if(s===ab)return a.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===lb)return a.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===ub)return a.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===cb)return a.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===E4)return a=e.get("WEBGL_compressed_texture_etc1"),a!==null?a.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===hb||s===fb)if(a=e.get("WEBGL_compressed_texture_etc"),a!==null){if(s===hb)return o===Gn?a.COMPRESSED_SRGB8_ETC2:a.COMPRESSED_RGB8_ETC2;if(s===fb)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:a.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===db||s===pb||s===mb||s===gb||s===vb||s===yb||s===xb||s===wb||s===Sb||s===_b||s===bb||s===Mb||s===Eb||s===Ab)if(a=e.get("WEBGL_compressed_texture_astc"),a!==null){if(s===db)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:a.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===pb)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:a.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===mb)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:a.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===gb)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:a.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===vb)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:a.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===yb)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:a.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===xb)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:a.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===wb)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:a.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===Sb)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:a.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===_b)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:a.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===bb)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:a.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===Mb)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:a.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===Eb)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:a.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===Ab)return o===Gn?a.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:a.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Iy)if(a=e.get("EXT_texture_compression_bptc"),a!==null){if(s===Iy)return o===Gn?a.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:a.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===A4||s===Tb||s===Cb||s===Lb)if(a=e.get("EXT_texture_compression_rgtc"),a!==null){if(s===Iy)return a.COMPRESSED_RED_RGTC1_EXT;if(s===Tb)return a.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===Cb)return a.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===Lb)return a.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===bh?r?t.UNSIGNED_INT_24_8:(a=e.get("WEBGL_depth_texture"),a!==null?a.UNSIGNED_INT_24_8_WEBGL:null):t[s]!==void 0?t[s]:null}return{convert:i}}class tk extends mi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Up extends dr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _9={type:"move"};class Kw{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Up,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Up,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ge,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ge),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Up,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ge,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ge),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const r of e.hand.values())this._getHandJoint(n,r)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,r){let i=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const x of e.hand.values()){const w=n.getJointPose(x,r),g=this._getHandJoint(u,x);w!==null&&(g.matrix.fromArray(w.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=w.radius),g.visible=w!==null}const c=u.joints["index-finger-tip"],h=u.joints["thumb-tip"],f=c.position.distanceTo(h.position),d=.02,v=.005;u.inputState.pinching&&f>d+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&f<=d-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,r),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(i=n.getPose(e.targetRaySpace,r),i===null&&s!==null&&(i=s),i!==null&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(_9)))}return a!==null&&(a.visible=i!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const r=new Up;r.matrixAutoUpdate=!1,r.visible=!1,e.joints[n.jointName]=r,e.add(r)}return e.joints[n.jointName]}}class nk extends Ci{constructor(e,n,r,i,s,o,a,l,u,c){if(c=c!==void 0?c:Mh,c!==Mh&&c!==ed)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");r===void 0&&c===Mh&&(r=$u),r===void 0&&c===ed&&(r=bh),super(null,i,s,o,a,l,c,r,u),this.isDepthTexture=!0,this.image={width:e,height:n},this.magFilter=a!==void 0?a:Fi,this.minFilter=l!==void 0?l:Fi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class b9 extends fc{constructor(e,n){super();const r=this;let i=null,s=1,o=null,a="local-floor",l=1,u=null,c=null,h=null,f=null,d=null,v=null;const x=n.getContextAttributes();let w=null,g=null;const S=[],_=[],T=new mi;T.layers.enable(1),T.viewport=new Lr;const L=new mi;L.layers.enable(2),L.viewport=new Lr;const k=[T,L],N=new tk;N.layers.enable(1),N.layers.enable(2);let R=null,P=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(re){let I=S[re];return I===void 0&&(I=new Kw,S[re]=I),I.getTargetRaySpace()},this.getControllerGrip=function(re){let I=S[re];return I===void 0&&(I=new Kw,S[re]=I),I.getGripSpace()},this.getHand=function(re){let I=S[re];return I===void 0&&(I=new Kw,S[re]=I),I.getHandSpace()};function D(re){const I=_.indexOf(re.inputSource);if(I===-1)return;const X=S[I];X!==void 0&&(X.update(re.inputSource,re.frame,u||o),X.dispatchEvent({type:re.type,data:re.inputSource}))}function O(){i.removeEventListener("select",D),i.removeEventListener("selectstart",D),i.removeEventListener("selectend",D),i.removeEventListener("squeeze",D),i.removeEventListener("squeezestart",D),i.removeEventListener("squeezeend",D),i.removeEventListener("end",O),i.removeEventListener("inputsourceschange",B);for(let re=0;re<S.length;re++){const I=_[re];I!==null&&(_[re]=null,S[re].disconnect(I))}R=null,P=null,e.setRenderTarget(w),d=null,f=null,h=null,i=null,g=null,j.stop(),r.isPresenting=!1,r.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(re){s=re,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(re){a=re,r.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(re){u=re},this.getBaseLayer=function(){return f!==null?f:d},this.getBinding=function(){return h},this.getFrame=function(){return v},this.getSession=function(){return i},this.setSession=async function(re){if(i=re,i!==null){if(w=e.getRenderTarget(),i.addEventListener("select",D),i.addEventListener("selectstart",D),i.addEventListener("selectend",D),i.addEventListener("squeeze",D),i.addEventListener("squeezestart",D),i.addEventListener("squeezeend",D),i.addEventListener("end",O),i.addEventListener("inputsourceschange",B),x.xrCompatible!==!0&&await n.makeXRCompatible(),i.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const I={antialias:i.renderState.layers===void 0?x.antialias:!0,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};d=new XRWebGLLayer(i,n,I),i.updateRenderState({baseLayer:d}),g=new El(d.framebufferWidth,d.framebufferHeight,{format:mo,type:su,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let I=null,X=null,J=null;x.depth&&(J=x.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,I=x.stencil?ed:Mh,X=x.stencil?bh:$u);const ae={colorFormat:n.RGBA8,depthFormat:J,scaleFactor:s};h=new XRWebGLBinding(i,n),f=h.createProjectionLayer(ae),i.updateRenderState({layers:[f]}),g=new El(f.textureWidth,f.textureHeight,{format:mo,type:su,depthTexture:new nk(f.textureWidth,f.textureHeight,X,void 0,void 0,void 0,void 0,void 0,void 0,I),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0});const fe=e.properties.get(g);fe.__ignoreDepthValues=f.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await i.requestReferenceSpace(a),j.setContext(i),j.start(),r.isPresenting=!0,r.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(i!==null)return i.environmentBlendMode};function B(re){for(let I=0;I<re.removed.length;I++){const X=re.removed[I],J=_.indexOf(X);J>=0&&(_[J]=null,S[J].disconnect(X))}for(let I=0;I<re.added.length;I++){const X=re.added[I];let J=_.indexOf(X);if(J===-1){for(let fe=0;fe<S.length;fe++)if(fe>=_.length){_.push(X),J=fe;break}else if(_[fe]===null){_[fe]=X,J=fe;break}if(J===-1)break}const ae=S[J];ae&&ae.connect(X)}}const V=new ge,H=new ge;function ee(re,I,X){V.setFromMatrixPosition(I.matrixWorld),H.setFromMatrixPosition(X.matrixWorld);const J=V.distanceTo(H),ae=I.projectionMatrix.elements,fe=X.projectionMatrix.elements,Se=ae[14]/(ae[10]-1),Ee=ae[14]/(ae[10]+1),Ce=(ae[9]+1)/ae[5],$e=(ae[9]-1)/ae[5],ke=(ae[8]-1)/ae[0],he=(fe[8]+1)/fe[0],De=Se*ke,ze=Se*he,pe=J/(-ke+he),K=pe*-ke;I.matrixWorld.decompose(re.position,re.quaternion,re.scale),re.translateX(K),re.translateZ(pe),re.matrixWorld.compose(re.position,re.quaternion,re.scale),re.matrixWorldInverse.copy(re.matrixWorld).invert();const tt=Se+pe,Ze=Ee+pe,Ne=De-K,Ke=ze+(J-K),ft=Ce*Ee/Ze*tt,vt=$e*Ee/Ze*tt;re.projectionMatrix.makePerspective(Ne,Ke,ft,vt,tt,Ze),re.projectionMatrixInverse.copy(re.projectionMatrix).invert()}function se(re,I){I===null?re.matrixWorld.copy(re.matrix):re.matrixWorld.multiplyMatrices(I.matrixWorld,re.matrix),re.matrixWorldInverse.copy(re.matrixWorld).invert()}this.updateCamera=function(re){if(i===null)return;N.near=L.near=T.near=re.near,N.far=L.far=T.far=re.far,(R!==N.near||P!==N.far)&&(i.updateRenderState({depthNear:N.near,depthFar:N.far}),R=N.near,P=N.far);const I=re.parent,X=N.cameras;se(N,I);for(let J=0;J<X.length;J++)se(X[J],I);X.length===2?ee(N,T,L):N.projectionMatrix.copy(T.projectionMatrix),ce(re,N,I)};function ce(re,I,X){X===null?re.matrix.copy(I.matrixWorld):(re.matrix.copy(X.matrixWorld),re.matrix.invert(),re.matrix.multiply(I.matrixWorld)),re.matrix.decompose(re.position,re.quaternion,re.scale),re.updateMatrixWorld(!0);const J=re.children;for(let ae=0,fe=J.length;ae<fe;ae++)J[ae].updateMatrixWorld(!0);re.projectionMatrix.copy(I.projectionMatrix),re.projectionMatrixInverse.copy(I.projectionMatrixInverse),re.isPerspectiveCamera&&(re.fov=hm*2*Math.atan(1/re.projectionMatrix.elements[5]),re.zoom=1)}this.getCamera=function(){return N},this.getFoveation=function(){if(!(f===null&&d===null))return l},this.setFoveation=function(re){l=re,f!==null&&(f.fixedFoveation=re),d!==null&&d.fixedFoveation!==void 0&&(d.fixedFoveation=re)};let W=null;function Y(re,I){if(c=I.getViewerPose(u||o),v=I,c!==null){const X=c.views;d!==null&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let J=!1;X.length!==N.cameras.length&&(N.cameras.length=0,J=!0);for(let ae=0;ae<X.length;ae++){const fe=X[ae];let Se=null;if(d!==null)Se=d.getViewport(fe);else{const Ce=h.getViewSubImage(f,fe);Se=Ce.viewport,ae===0&&(e.setRenderTargetTextures(g,Ce.colorTexture,f.ignoreDepthValues?void 0:Ce.depthStencilTexture),e.setRenderTarget(g))}let Ee=k[ae];Ee===void 0&&(Ee=new mi,Ee.layers.enable(ae),Ee.viewport=new Lr,k[ae]=Ee),Ee.matrix.fromArray(fe.transform.matrix),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.projectionMatrix.fromArray(fe.projectionMatrix),Ee.projectionMatrixInverse.copy(Ee.projectionMatrix).invert(),Ee.viewport.set(Se.x,Se.y,Se.width,Se.height),ae===0&&(N.matrix.copy(Ee.matrix),N.matrix.decompose(N.position,N.quaternion,N.scale)),J===!0&&N.cameras.push(Ee)}}for(let X=0;X<S.length;X++){const J=_[X],ae=S[X];J!==null&&ae!==void 0&&ae.update(J,I,u||o)}W&&W(re,I),I.detectedPlanes&&r.dispatchEvent({type:"planesdetected",data:I}),v=null}const j=new Z4;j.setAnimationLoop(Y),this.setAnimationLoop=function(re){W=re},this.dispose=function(){}}}function M9(t,e){function n(w,g){w.matrixAutoUpdate===!0&&w.updateMatrix(),g.value.copy(w.matrix)}function r(w,g){g.color.getRGB(w.fogColor.value,X4(t)),g.isFog?(w.fogNear.value=g.near,w.fogFar.value=g.far):g.isFogExp2&&(w.fogDensity.value=g.density)}function i(w,g,S,_,T){g.isMeshBasicMaterial||g.isMeshLambertMaterial?s(w,g):g.isMeshToonMaterial?(s(w,g),h(w,g)):g.isMeshPhongMaterial?(s(w,g),c(w,g)):g.isMeshStandardMaterial?(s(w,g),f(w,g),g.isMeshPhysicalMaterial&&d(w,g,T)):g.isMeshMatcapMaterial?(s(w,g),v(w,g)):g.isMeshDepthMaterial?s(w,g):g.isMeshDistanceMaterial?(s(w,g),x(w,g)):g.isMeshNormalMaterial?s(w,g):g.isLineBasicMaterial?(o(w,g),g.isLineDashedMaterial&&a(w,g)):g.isPointsMaterial?l(w,g,S,_):g.isSpriteMaterial?u(w,g):g.isShadowMaterial?(w.color.value.copy(g.color),w.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function s(w,g){w.opacity.value=g.opacity,g.color&&w.diffuse.value.copy(g.color),g.emissive&&w.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(w.map.value=g.map,n(g.map,w.mapTransform)),g.alphaMap&&(w.alphaMap.value=g.alphaMap,n(g.alphaMap,w.alphaMapTransform)),g.bumpMap&&(w.bumpMap.value=g.bumpMap,n(g.bumpMap,w.bumpMapTransform),w.bumpScale.value=g.bumpScale,g.side===yo&&(w.bumpScale.value*=-1)),g.normalMap&&(w.normalMap.value=g.normalMap,n(g.normalMap,w.normalMapTransform),w.normalScale.value.copy(g.normalScale),g.side===yo&&w.normalScale.value.negate()),g.displacementMap&&(w.displacementMap.value=g.displacementMap,n(g.displacementMap,w.displacementMapTransform),w.displacementScale.value=g.displacementScale,w.displacementBias.value=g.displacementBias),g.emissiveMap&&(w.emissiveMap.value=g.emissiveMap,n(g.emissiveMap,w.emissiveMapTransform)),g.specularMap&&(w.specularMap.value=g.specularMap,n(g.specularMap,w.specularMapTransform)),g.alphaTest>0&&(w.alphaTest.value=g.alphaTest);const S=e.get(g).envMap;if(S&&(w.envMap.value=S,w.flipEnvMap.value=S.isCubeTexture&&S.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=g.reflectivity,w.ior.value=g.ior,w.refractionRatio.value=g.refractionRatio),g.lightMap){w.lightMap.value=g.lightMap;const _=t._useLegacyLights===!0?Math.PI:1;w.lightMapIntensity.value=g.lightMapIntensity*_,n(g.lightMap,w.lightMapTransform)}g.aoMap&&(w.aoMap.value=g.aoMap,w.aoMapIntensity.value=g.aoMapIntensity,n(g.aoMap,w.aoMapTransform))}function o(w,g){w.diffuse.value.copy(g.color),w.opacity.value=g.opacity,g.map&&(w.map.value=g.map,n(g.map,w.mapTransform))}function a(w,g){w.dashSize.value=g.dashSize,w.totalSize.value=g.dashSize+g.gapSize,w.scale.value=g.scale}function l(w,g,S,_){w.diffuse.value.copy(g.color),w.opacity.value=g.opacity,w.size.value=g.size*S,w.scale.value=_*.5,g.map&&(w.map.value=g.map,n(g.map,w.uvTransform)),g.alphaMap&&(w.alphaMap.value=g.alphaMap,n(g.alphaMap,w.alphaMapTransform)),g.alphaTest>0&&(w.alphaTest.value=g.alphaTest)}function u(w,g){w.diffuse.value.copy(g.color),w.opacity.value=g.opacity,w.rotation.value=g.rotation,g.map&&(w.map.value=g.map,n(g.map,w.mapTransform)),g.alphaMap&&(w.alphaMap.value=g.alphaMap,n(g.alphaMap,w.alphaMapTransform)),g.alphaTest>0&&(w.alphaTest.value=g.alphaTest)}function c(w,g){w.specular.value.copy(g.specular),w.shininess.value=Math.max(g.shininess,1e-4)}function h(w,g){g.gradientMap&&(w.gradientMap.value=g.gradientMap)}function f(w,g){w.metalness.value=g.metalness,g.metalnessMap&&(w.metalnessMap.value=g.metalnessMap,n(g.metalnessMap,w.metalnessMapTransform)),w.roughness.value=g.roughness,g.roughnessMap&&(w.roughnessMap.value=g.roughnessMap,n(g.roughnessMap,w.roughnessMapTransform)),e.get(g).envMap&&(w.envMapIntensity.value=g.envMapIntensity)}function d(w,g,S){w.ior.value=g.ior,g.sheen>0&&(w.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),w.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(w.sheenColorMap.value=g.sheenColorMap,n(g.sheenColorMap,w.sheenColorMapTransform)),g.sheenRoughnessMap&&(w.sheenRoughnessMap.value=g.sheenRoughnessMap,n(g.sheenRoughnessMap,w.sheenRoughnessMapTransform))),g.clearcoat>0&&(w.clearcoat.value=g.clearcoat,w.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(w.clearcoatMap.value=g.clearcoatMap,n(g.clearcoatMap,w.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,n(g.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(w.clearcoatNormalMap.value=g.clearcoatNormalMap,n(g.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===yo&&w.clearcoatNormalScale.value.negate())),g.iridescence>0&&(w.iridescence.value=g.iridescence,w.iridescenceIOR.value=g.iridescenceIOR,w.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(w.iridescenceMap.value=g.iridescenceMap,n(g.iridescenceMap,w.iridescenceMapTransform)),g.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=g.iridescenceThicknessMap,n(g.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),g.transmission>0&&(w.transmission.value=g.transmission,w.transmissionSamplerMap.value=S.texture,w.transmissionSamplerSize.value.set(S.width,S.height),g.transmissionMap&&(w.transmissionMap.value=g.transmissionMap,n(g.transmissionMap,w.transmissionMapTransform)),w.thickness.value=g.thickness,g.thicknessMap&&(w.thicknessMap.value=g.thicknessMap,n(g.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=g.attenuationDistance,w.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(w.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(w.anisotropyMap.value=g.anisotropyMap,n(g.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=g.specularIntensity,w.specularColor.value.copy(g.specularColor),g.specularColorMap&&(w.specularColorMap.value=g.specularColorMap,n(g.specularColorMap,w.specularColorMapTransform)),g.specularIntensityMap&&(w.specularIntensityMap.value=g.specularIntensityMap,n(g.specularIntensityMap,w.specularIntensityMapTransform))}function v(w,g){g.matcap&&(w.matcap.value=g.matcap)}function x(w,g){const S=e.get(g).light;w.referencePosition.value.setFromMatrixPosition(S.matrixWorld),w.nearDistance.value=S.shadow.camera.near,w.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:r,refreshMaterialUniforms:i}}function E9(t,e,n,r){let i={},s={},o=[];const a=n.isWebGL2?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0;function l(S,_){const T=_.program;r.uniformBlockBinding(S,T)}function u(S,_){let T=i[S.id];T===void 0&&(v(S),T=c(S),i[S.id]=T,S.addEventListener("dispose",w));const L=_.program;r.updateUBOMapping(S,L);const k=e.render.frame;s[S.id]!==k&&(f(S),s[S.id]=k)}function c(S){const _=h();S.__bindingPointIndex=_;const T=t.createBuffer(),L=S.__size,k=S.usage;return t.bindBuffer(t.UNIFORM_BUFFER,T),t.bufferData(t.UNIFORM_BUFFER,L,k),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,_,T),T}function h(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(S){const _=i[S.id],T=S.uniforms,L=S.__cache;t.bindBuffer(t.UNIFORM_BUFFER,_);for(let k=0,N=T.length;k<N;k++){const R=T[k];if(d(R,k,L)===!0){const P=R.__offset,D=Array.isArray(R.value)?R.value:[R.value];let O=0;for(let B=0;B<D.length;B++){const V=D[B],H=x(V);typeof V=="number"?(R.__data[0]=V,t.bufferSubData(t.UNIFORM_BUFFER,P+O,R.__data)):V.isMatrix3?(R.__data[0]=V.elements[0],R.__data[1]=V.elements[1],R.__data[2]=V.elements[2],R.__data[3]=V.elements[0],R.__data[4]=V.elements[3],R.__data[5]=V.elements[4],R.__data[6]=V.elements[5],R.__data[7]=V.elements[0],R.__data[8]=V.elements[6],R.__data[9]=V.elements[7],R.__data[10]=V.elements[8],R.__data[11]=V.elements[0]):(V.toArray(R.__data,O),O+=H.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,P,R.__data)}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function d(S,_,T){const L=S.value;if(T[_]===void 0){if(typeof L=="number")T[_]=L;else{const k=Array.isArray(L)?L:[L],N=[];for(let R=0;R<k.length;R++)N.push(k[R].clone());T[_]=N}return!0}else if(typeof L=="number"){if(T[_]!==L)return T[_]=L,!0}else{const k=Array.isArray(T[_])?T[_]:[T[_]],N=Array.isArray(L)?L:[L];for(let R=0;R<k.length;R++){const P=k[R];if(P.equals(N[R])===!1)return P.copy(N[R]),!0}}return!1}function v(S){const _=S.uniforms;let T=0;const L=16;let k=0;for(let N=0,R=_.length;N<R;N++){const P=_[N],D={boundary:0,storage:0},O=Array.isArray(P.value)?P.value:[P.value];for(let B=0,V=O.length;B<V;B++){const H=O[B],ee=x(H);D.boundary+=ee.boundary,D.storage+=ee.storage}if(P.__data=new Float32Array(D.storage/Float32Array.BYTES_PER_ELEMENT),P.__offset=T,N>0){k=T%L;const B=L-k;k!==0&&B-D.boundary<0&&(T+=L-k,P.__offset=T)}T+=D.storage}return k=T%L,k>0&&(T+=L-k),S.__size=T,S.__cache={},this}function x(S){const _={boundary:0,storage:0};return typeof S=="number"?(_.boundary=4,_.storage=4):S.isVector2?(_.boundary=8,_.storage=8):S.isVector3||S.isColor?(_.boundary=16,_.storage=12):S.isVector4?(_.boundary=16,_.storage=16):S.isMatrix3?(_.boundary=48,_.storage=48):S.isMatrix4?(_.boundary=64,_.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),_}function w(S){const _=S.target;_.removeEventListener("dispose",w);const T=o.indexOf(_.__bindingPointIndex);o.splice(T,1),t.deleteBuffer(i[_.id]),delete i[_.id],delete s[_.id]}function g(){for(const S in i)t.deleteBuffer(i[S]);o=[],i={},s={}}return{bind:l,update:u,dispose:g}}function A9(){const t=R0("canvas");return t.style.display="block",t}class av{constructor(e={}){const{canvas:n=A9(),context:r=null,depth:i=!0,stencil:s=!0,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:h=!1}=e;this.isWebGLRenderer=!0;let f;r!==null?f=r.getContextAttributes().alpha:f=o;const d=new Uint32Array(4),v=new Int32Array(4);let x=null,w=null;const g=[],S=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Gn,this._useLegacyLights=!1,this.toneMapping=iu,this.toneMappingExposure=1;const _=this;let T=!1,L=0,k=0,N=null,R=-1,P=null;const D=new Lr,O=new Lr;let B=null;const V=new Zt(0);let H=0,ee=n.width,se=n.height,ce=1,W=null,Y=null;const j=new Lr(0,0,ee,se),re=new Lr(0,0,ee,se);let I=!1;const X=new sx;let J=!1,ae=!1,fe=null;const Se=new Hn,Ee=new wt,Ce=new ge,$e={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function ke(){return N===null?ce:1}let he=r;function De(U,ne){for(let me=0;me<U.length;me++){const de=U[me],we=n.getContext(de,ne);if(we!==null)return we}return null}try{const U={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:h};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${tv}`),n.addEventListener("webglcontextlost",Fe,!1),n.addEventListener("webglcontextrestored",Ge,!1),n.addEventListener("webglcontextcreationerror",yt,!1),he===null){const ne=["webgl2","webgl","experimental-webgl"];if(_.isWebGL1Renderer===!0&&ne.shift(),he=De(ne,U),he===null)throw De(ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&he instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),he.getShaderPrecisionFormat===void 0&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(U){throw console.error("THREE.WebGLRenderer: "+U.message),U}let ze,pe,K,tt,Ze,Ne,Ke,ft,vt,ue,Q,Pe,et,Qe,dt,lt,it,Te,Nt,At,Ct,bt,xe,Ye;function st(){ze=new Hz(he),pe=new Fz(he,ze,e),ze.init(pe),bt=new ek(he,ze,pe),K=new w9(he,ze,pe),tt=new Wz(he),Ze=new l9,Ne=new S9(he,ze,K,Ze,pe,bt,tt),Ke=new Oz(_),ft=new zz(_),vt=new e8(he,pe),xe=new Iz(he,ze,vt,pe),ue=new Gz(he,vt,tt,xe),Q=new Yz(he,ue,vt,tt),Nt=new qz(he,pe,Ne),lt=new Dz(Ze),Pe=new a9(_,Ke,ft,ze,pe,xe,lt),et=new M9(_,Ze),Qe=new c9,dt=new g9(ze,pe),Te=new kz(_,Ke,ft,K,Q,f,l),it=new x9(_,Q,pe),Ye=new E9(he,tt,pe,K),At=new Nz(he,ze,tt,pe),Ct=new Vz(he,ze,tt,pe),tt.programs=Pe.programs,_.capabilities=pe,_.extensions=ze,_.properties=Ze,_.renderLists=Qe,_.shadowMap=it,_.state=K,_.info=tt}st();const Ae=new b9(_,he);this.xr=Ae,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){const U=ze.get("WEBGL_lose_context");U&&U.loseContext()},this.forceContextRestore=function(){const U=ze.get("WEBGL_lose_context");U&&U.restoreContext()},this.getPixelRatio=function(){return ce},this.setPixelRatio=function(U){U!==void 0&&(ce=U,this.setSize(ee,se,!1))},this.getSize=function(U){return U.set(ee,se)},this.setSize=function(U,ne,me=!0){if(Ae.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ee=U,se=ne,n.width=Math.floor(U*ce),n.height=Math.floor(ne*ce),me===!0&&(n.style.width=U+"px",n.style.height=ne+"px"),this.setViewport(0,0,U,ne)},this.getDrawingBufferSize=function(U){return U.set(ee*ce,se*ce).floor()},this.setDrawingBufferSize=function(U,ne,me){ee=U,se=ne,ce=me,n.width=Math.floor(U*me),n.height=Math.floor(ne*me),this.setViewport(0,0,U,ne)},this.getCurrentViewport=function(U){return U.copy(D)},this.getViewport=function(U){return U.copy(j)},this.setViewport=function(U,ne,me,de){U.isVector4?j.set(U.x,U.y,U.z,U.w):j.set(U,ne,me,de),K.viewport(D.copy(j).multiplyScalar(ce).floor())},this.getScissor=function(U){return U.copy(re)},this.setScissor=function(U,ne,me,de){U.isVector4?re.set(U.x,U.y,U.z,U.w):re.set(U,ne,me,de),K.scissor(O.copy(re).multiplyScalar(ce).floor())},this.getScissorTest=function(){return I},this.setScissorTest=function(U){K.setScissorTest(I=U)},this.setOpaqueSort=function(U){W=U},this.setTransparentSort=function(U){Y=U},this.getClearColor=function(U){return U.copy(Te.getClearColor())},this.setClearColor=function(){Te.setClearColor.apply(Te,arguments)},this.getClearAlpha=function(){return Te.getClearAlpha()},this.setClearAlpha=function(){Te.setClearAlpha.apply(Te,arguments)},this.clear=function(U=!0,ne=!0,me=!0){let de=0;if(U){let we=!1;if(N!==null){const Xe=N.texture.format;we=Xe===AM||Xe===EM||Xe===MM}if(we){const Xe=N.texture.type,qe=Xe===su||Xe===$u||Xe===nx||Xe===bh||Xe===SM||Xe===_M,ot=Te.getClearColor(),rt=Te.getClearAlpha(),gt=ot.r,at=ot.g,Wt=ot.b;qe?(d[0]=gt,d[1]=at,d[2]=Wt,d[3]=rt,he.clearBufferuiv(he.COLOR,0,d)):(v[0]=gt,v[1]=at,v[2]=Wt,v[3]=rt,he.clearBufferiv(he.COLOR,0,v))}else de|=he.COLOR_BUFFER_BIT}ne&&(de|=he.DEPTH_BUFFER_BIT),me&&(de|=he.STENCIL_BUFFER_BIT),he.clear(de)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Fe,!1),n.removeEventListener("webglcontextrestored",Ge,!1),n.removeEventListener("webglcontextcreationerror",yt,!1),Qe.dispose(),dt.dispose(),Ze.dispose(),Ke.dispose(),ft.dispose(),Q.dispose(),xe.dispose(),Ye.dispose(),Pe.dispose(),Ae.dispose(),Ae.removeEventListener("sessionstart",gn),Ae.removeEventListener("sessionend",kn),fe&&(fe.dispose(),fe=null),Ft.stop()};function Fe(U){U.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),T=!0}function Ge(){console.log("THREE.WebGLRenderer: Context Restored."),T=!1;const U=tt.autoReset,ne=it.enabled,me=it.autoUpdate,de=it.needsUpdate,we=it.type;st(),tt.autoReset=U,it.enabled=ne,it.autoUpdate=me,it.needsUpdate=de,it.type=we}function yt(U){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",U.statusMessage)}function pt(U){const ne=U.target;ne.removeEventListener("dispose",pt),kt(ne)}function kt(U){Vt(U),Ze.remove(U)}function Vt(U){const ne=Ze.get(U).programs;ne!==void 0&&(ne.forEach(function(me){Pe.releaseProgram(me)}),U.isShaderMaterial&&Pe.releaseShaderCache(U))}this.renderBufferDirect=function(U,ne,me,de,we,Xe){ne===null&&(ne=$e);const qe=we.isMesh&&we.matrixWorld.determinant()<0,ot=Wr(U,ne,me,de,we);K.setMaterial(de,qe);let rt=me.index,gt=1;if(de.wireframe===!0){if(rt=ue.getWireframeAttribute(me),rt===void 0)return;gt=2}const at=me.drawRange,Wt=me.attributes.position;let It=at.start*gt,Ot=(at.start+at.count)*gt;Xe!==null&&(It=Math.max(It,Xe.start*gt),Ot=Math.min(Ot,(Xe.start+Xe.count)*gt)),rt!==null?(It=Math.max(It,0),Ot=Math.min(Ot,rt.count)):Wt!=null&&(It=Math.max(It,0),Ot=Math.min(Ot,Wt.count));const $t=Ot-It;if($t<0||$t===1/0)return;xe.setup(we,de,ot,me,rt);let Qt,sn=At;if(rt!==null&&(Qt=vt.get(rt),sn=Ct,sn.setIndex(Qt)),we.isMesh)de.wireframe===!0?(K.setLineWidth(de.wireframeLinewidth*ke()),sn.setMode(he.LINES)):sn.setMode(he.TRIANGLES);else if(we.isLine){let zt=de.linewidth;zt===void 0&&(zt=1),K.setLineWidth(zt*ke()),we.isLineSegments?sn.setMode(he.LINES):we.isLineLoop?sn.setMode(he.LINE_LOOP):sn.setMode(he.LINE_STRIP)}else we.isPoints?sn.setMode(he.POINTS):we.isSprite&&sn.setMode(he.TRIANGLES);if(we.isInstancedMesh)sn.renderInstances(It,$t,we.count);else if(me.isInstancedBufferGeometry){const zt=me._maxInstanceCount!==void 0?me._maxInstanceCount:1/0,on=Math.min(me.instanceCount,zt);sn.renderInstances(It,$t,on)}else sn.render(It,$t)},this.compile=function(U,ne){function me(de,we,Xe){de.transparent===!0&&de.side===xl&&de.forceSinglePass===!1?(de.side=yo,de.needsUpdate=!0,Wn(de,we,Xe),de.side=ac,de.needsUpdate=!0,Wn(de,we,Xe),de.side=xl):Wn(de,we,Xe)}w=dt.get(U),w.init(),S.push(w),U.traverseVisible(function(de){de.isLight&&de.layers.test(ne.layers)&&(w.pushLight(de),de.castShadow&&w.pushShadow(de))}),w.setupLights(_._useLegacyLights),U.traverse(function(de){const we=de.material;if(we)if(Array.isArray(we))for(let Xe=0;Xe<we.length;Xe++){const qe=we[Xe];me(qe,U,de)}else me(we,U,de)}),S.pop(),w=null};let yn=null;function Nn(U){yn&&yn(U)}function gn(){Ft.stop()}function kn(){Ft.start()}const Ft=new Z4;Ft.setAnimationLoop(Nn),typeof self<"u"&&Ft.setContext(self),this.setAnimationLoop=function(U){yn=U,Ae.setAnimationLoop(U),U===null?Ft.stop():Ft.start()},Ae.addEventListener("sessionstart",gn),Ae.addEventListener("sessionend",kn),this.render=function(U,ne){if(ne!==void 0&&ne.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(T===!0)return;U.matrixWorldAutoUpdate===!0&&U.updateMatrixWorld(),ne.parent===null&&ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),Ae.enabled===!0&&Ae.isPresenting===!0&&(Ae.cameraAutoUpdate===!0&&Ae.updateCamera(ne),ne=Ae.getCamera()),U.isScene===!0&&U.onBeforeRender(_,U,ne,N),w=dt.get(U,S.length),w.init(),S.push(w),Se.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),X.setFromProjectionMatrix(Se),ae=this.localClippingEnabled,J=lt.init(this.clippingPlanes,ae),x=Qe.get(U,g.length),x.init(),g.push(x),Vr(U,ne,0,_.sortObjects),x.finish(),_.sortObjects===!0&&x.sort(W,Y),this.info.render.frame++,J===!0&&lt.beginShadows();const me=w.state.shadowsArray;if(it.render(me,U,ne),J===!0&&lt.endShadows(),this.info.autoReset===!0&&this.info.reset(),Te.render(x,U),w.setupLights(_._useLegacyLights),ne.isArrayCamera){const de=ne.cameras;for(let we=0,Xe=de.length;we<Xe;we++){const qe=de[we];Ir(x,U,qe,qe.viewport)}}else Ir(x,U,ne);N!==null&&(Ne.updateMultisampleRenderTarget(N),Ne.updateRenderTargetMipmap(N)),U.isScene===!0&&U.onAfterRender(_,U,ne),xe.resetDefaultState(),R=-1,P=null,S.pop(),S.length>0?w=S[S.length-1]:w=null,g.pop(),g.length>0?x=g[g.length-1]:x=null};function Vr(U,ne,me,de){if(U.visible===!1)return;if(U.layers.test(ne.layers)){if(U.isGroup)me=U.renderOrder;else if(U.isLOD)U.autoUpdate===!0&&U.update(ne);else if(U.isLight)w.pushLight(U),U.castShadow&&w.pushShadow(U);else if(U.isSprite){if(!U.frustumCulled||X.intersectsSprite(U)){de&&Ce.setFromMatrixPosition(U.matrixWorld).applyMatrix4(Se);const qe=Q.update(U),ot=U.material;ot.visible&&x.push(U,qe,ot,me,Ce.z,null)}}else if((U.isMesh||U.isLine||U.isPoints)&&(!U.frustumCulled||X.intersectsObject(U))){const qe=Q.update(U),ot=U.material;if(de&&(U.boundingSphere!==void 0?(U.boundingSphere===null&&U.computeBoundingSphere(),Ce.copy(U.boundingSphere.center)):(qe.boundingSphere===null&&qe.computeBoundingSphere(),Ce.copy(qe.boundingSphere.center)),Ce.applyMatrix4(U.matrixWorld).applyMatrix4(Se)),Array.isArray(ot)){const rt=qe.groups;for(let gt=0,at=rt.length;gt<at;gt++){const Wt=rt[gt],It=ot[Wt.materialIndex];It&&It.visible&&x.push(U,qe,It,me,Ce.z,Wt)}}else ot.visible&&x.push(U,qe,ot,me,Ce.z,null)}}const Xe=U.children;for(let qe=0,ot=Xe.length;qe<ot;qe++)Vr(Xe[qe],ne,me,de)}function Ir(U,ne,me,de){const we=U.opaque,Xe=U.transmissive,qe=U.transparent;w.setupLightsView(me),J===!0&&lt.setGlobalState(_.clippingPlanes,me),Xe.length>0&&Zn(we,Xe,ne,me),de&&K.viewport(D.copy(de)),we.length>0&&vn(we,ne,me),Xe.length>0&&vn(Xe,ne,me),qe.length>0&&vn(qe,ne,me),K.buffers.depth.setTest(!0),K.buffers.depth.setMask(!0),K.buffers.color.setMask(!0),K.setPolygonOffset(!1)}function Zn(U,ne,me,de){const we=pe.isWebGL2;fe===null&&(fe=new El(1,1,{generateMipmaps:!0,type:ze.has("EXT_color_buffer_half_float")?go:su,minFilter:Rh,samples:we?4:0})),_.getDrawingBufferSize(Ee),we?fe.setSize(Ee.x,Ee.y):fe.setSize(_2(Ee.x),_2(Ee.y));const Xe=_.getRenderTarget();_.setRenderTarget(fe),_.getClearColor(V),H=_.getClearAlpha(),H<1&&_.setClearColor(16777215,.5),_.clear();const qe=_.toneMapping;_.toneMapping=iu,vn(U,me,de),Ne.updateMultisampleRenderTarget(fe),Ne.updateRenderTargetMipmap(fe);let ot=!1;for(let rt=0,gt=ne.length;rt<gt;rt++){const at=ne[rt],Wt=at.object,It=at.geometry,Ot=at.material,$t=at.group;if(Ot.side===xl&&Wt.layers.test(de.layers)){const Qt=Ot.side;Ot.side=yo,Ot.needsUpdate=!0,$n(Wt,me,de,It,Ot,$t),Ot.side=Qt,Ot.needsUpdate=!0,ot=!0}}ot===!0&&(Ne.updateMultisampleRenderTarget(fe),Ne.updateRenderTargetMipmap(fe)),_.setRenderTarget(Xe),_.setClearColor(V,H),_.toneMapping=qe}function vn(U,ne,me){const de=ne.isScene===!0?ne.overrideMaterial:null;for(let we=0,Xe=U.length;we<Xe;we++){const qe=U[we],ot=qe.object,rt=qe.geometry,gt=de===null?qe.material:de,at=qe.group;ot.layers.test(me.layers)&&$n(ot,ne,me,rt,gt,at)}}function $n(U,ne,me,de,we,Xe){U.onBeforeRender(_,ne,me,de,we,Xe),U.modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,U.matrixWorld),U.normalMatrix.getNormalMatrix(U.modelViewMatrix),we.onBeforeRender(_,ne,me,de,U,Xe),we.transparent===!0&&we.side===xl&&we.forceSinglePass===!1?(we.side=yo,we.needsUpdate=!0,_.renderBufferDirect(me,ne,de,we,U,Xe),we.side=ac,we.needsUpdate=!0,_.renderBufferDirect(me,ne,de,we,U,Xe),we.side=xl):_.renderBufferDirect(me,ne,de,we,U,Xe),U.onAfterRender(_,ne,me,de,we,Xe)}function Wn(U,ne,me){ne.isScene!==!0&&(ne=$e);const de=Ze.get(U),we=w.state.lights,Xe=w.state.shadowsArray,qe=we.state.version,ot=Pe.getParameters(U,we.state,Xe,ne,me),rt=Pe.getProgramCacheKey(ot);let gt=de.programs;de.environment=U.isMeshStandardMaterial?ne.environment:null,de.fog=ne.fog,de.envMap=(U.isMeshStandardMaterial?ft:Ke).get(U.envMap||de.environment),gt===void 0&&(U.addEventListener("dispose",pt),gt=new Map,de.programs=gt);let at=gt.get(rt);if(at!==void 0){if(de.currentProgram===at&&de.lightsStateVersion===qe)return pn(U,ot),at}else ot.uniforms=Pe.getUniforms(U),U.onBuild(me,ot,_),U.onBeforeCompile(ot,_),at=Pe.acquireProgram(ot,rt),gt.set(rt,at),de.uniforms=ot.uniforms;const Wt=de.uniforms;(!U.isShaderMaterial&&!U.isRawShaderMaterial||U.clipping===!0)&&(Wt.clippingPlanes=lt.uniform),pn(U,ot),de.needsLights=q(U),de.lightsStateVersion=qe,de.needsLights&&(Wt.ambientLightColor.value=we.state.ambient,Wt.lightProbe.value=we.state.probe,Wt.directionalLights.value=we.state.directional,Wt.directionalLightShadows.value=we.state.directionalShadow,Wt.spotLights.value=we.state.spot,Wt.spotLightShadows.value=we.state.spotShadow,Wt.rectAreaLights.value=we.state.rectArea,Wt.ltc_1.value=we.state.rectAreaLTC1,Wt.ltc_2.value=we.state.rectAreaLTC2,Wt.pointLights.value=we.state.point,Wt.pointLightShadows.value=we.state.pointShadow,Wt.hemisphereLights.value=we.state.hemi,Wt.directionalShadowMap.value=we.state.directionalShadowMap,Wt.directionalShadowMatrix.value=we.state.directionalShadowMatrix,Wt.spotShadowMap.value=we.state.spotShadowMap,Wt.spotLightMatrix.value=we.state.spotLightMatrix,Wt.spotLightMap.value=we.state.spotLightMap,Wt.pointShadowMap.value=we.state.pointShadowMap,Wt.pointShadowMatrix.value=we.state.pointShadowMatrix);const It=at.getUniforms(),Ot=Dy.seqWithValue(It.seq,Wt);return de.currentProgram=at,de.uniformsList=Ot,at}function pn(U,ne){const me=Ze.get(U);me.outputColorSpace=ne.outputColorSpace,me.instancing=ne.instancing,me.instancingColor=ne.instancingColor,me.skinning=ne.skinning,me.morphTargets=ne.morphTargets,me.morphNormals=ne.morphNormals,me.morphColors=ne.morphColors,me.morphTargetsCount=ne.morphTargetsCount,me.numClippingPlanes=ne.numClippingPlanes,me.numIntersection=ne.numClipIntersection,me.vertexAlphas=ne.vertexAlphas,me.vertexTangents=ne.vertexTangents,me.toneMapping=ne.toneMapping}function Wr(U,ne,me,de,we){ne.isScene!==!0&&(ne=$e),Ne.resetTextureUnits();const Xe=ne.fog,qe=de.isMeshStandardMaterial?ne.environment:null,ot=N===null?_.outputColorSpace:N.isXRRenderTarget===!0?N.texture.colorSpace:Ml,rt=(de.isMeshStandardMaterial?ft:Ke).get(de.envMap||qe),gt=de.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,at=!!me.attributes.tangent&&(!!de.normalMap||de.anisotropy>0),Wt=!!me.morphAttributes.position,It=!!me.morphAttributes.normal,Ot=!!me.morphAttributes.color;let $t=iu;de.toneMapped&&(N===null||N.isXRRenderTarget===!0)&&($t=_.toneMapping);const Qt=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,sn=Qt!==void 0?Qt.length:0,zt=Ze.get(de),on=w.state.lights;if(J===!0&&(ae===!0||U!==P)){const dn=U===P&&de.id===R;lt.setState(de,U,dn)}let jt=!1;de.version===zt.__version?(zt.needsLights&&zt.lightsStateVersion!==on.state.version||zt.outputColorSpace!==ot||we.isInstancedMesh&&zt.instancing===!1||!we.isInstancedMesh&&zt.instancing===!0||we.isSkinnedMesh&&zt.skinning===!1||!we.isSkinnedMesh&&zt.skinning===!0||we.isInstancedMesh&&zt.instancingColor===!0&&we.instanceColor===null||we.isInstancedMesh&&zt.instancingColor===!1&&we.instanceColor!==null||zt.envMap!==rt||de.fog===!0&&zt.fog!==Xe||zt.numClippingPlanes!==void 0&&(zt.numClippingPlanes!==lt.numPlanes||zt.numIntersection!==lt.numIntersection)||zt.vertexAlphas!==gt||zt.vertexTangents!==at||zt.morphTargets!==Wt||zt.morphNormals!==It||zt.morphColors!==Ot||zt.toneMapping!==$t||pe.isWebGL2===!0&&zt.morphTargetsCount!==sn)&&(jt=!0):(jt=!0,zt.__version=de.version);let ln=zt.currentProgram;jt===!0&&(ln=Wn(de,ne,we));let fn=!1,xn=!1,tr=!1;const Qn=ln.getUniforms(),cr=zt.uniforms;if(K.useProgram(ln.program)&&(fn=!0,xn=!0,tr=!0),de.id!==R&&(R=de.id,xn=!0),fn||P!==U){if(Qn.setValue(he,"projectionMatrix",U.projectionMatrix),pe.logarithmicDepthBuffer&&Qn.setValue(he,"logDepthBufFC",2/(Math.log(U.far+1)/Math.LN2)),P!==U&&(P=U,xn=!0,tr=!0),de.isShaderMaterial||de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshStandardMaterial||de.envMap){const dn=Qn.map.cameraPosition;dn!==void 0&&dn.setValue(he,Ce.setFromMatrixPosition(U.matrixWorld))}(de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshLambertMaterial||de.isMeshBasicMaterial||de.isMeshStandardMaterial||de.isShaderMaterial)&&Qn.setValue(he,"isOrthographic",U.isOrthographicCamera===!0),(de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshLambertMaterial||de.isMeshBasicMaterial||de.isMeshStandardMaterial||de.isShaderMaterial||de.isShadowMaterial||we.isSkinnedMesh)&&Qn.setValue(he,"viewMatrix",U.matrixWorldInverse)}if(we.isSkinnedMesh){Qn.setOptional(he,we,"bindMatrix"),Qn.setOptional(he,we,"bindMatrixInverse");const dn=we.skeleton;dn&&(pe.floatVertexTextures?(dn.boneTexture===null&&dn.computeBoneTexture(),Qn.setValue(he,"boneTexture",dn.boneTexture,Ne),Qn.setValue(he,"boneTextureSize",dn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const jr=me.morphAttributes;if((jr.position!==void 0||jr.normal!==void 0||jr.color!==void 0&&pe.isWebGL2===!0)&&Nt.update(we,me,ln),(xn||zt.receiveShadow!==we.receiveShadow)&&(zt.receiveShadow=we.receiveShadow,Qn.setValue(he,"receiveShadow",we.receiveShadow)),de.isMeshGouraudMaterial&&de.envMap!==null&&(cr.envMap.value=rt,cr.flipEnvMap.value=rt.isCubeTexture&&rt.isRenderTargetTexture===!1?-1:1),xn&&(Qn.setValue(he,"toneMappingExposure",_.toneMappingExposure),zt.needsLights&&oi(cr,tr),Xe&&de.fog===!0&&et.refreshFogUniforms(cr,Xe),et.refreshMaterialUniforms(cr,de,ce,se,fe),Dy.upload(he,zt.uniformsList,cr,Ne)),de.isShaderMaterial&&de.uniformsNeedUpdate===!0&&(Dy.upload(he,zt.uniformsList,cr,Ne),de.uniformsNeedUpdate=!1),de.isSpriteMaterial&&Qn.setValue(he,"center",we.center),Qn.setValue(he,"modelViewMatrix",we.modelViewMatrix),Qn.setValue(he,"normalMatrix",we.normalMatrix),Qn.setValue(he,"modelMatrix",we.matrixWorld),de.isShaderMaterial||de.isRawShaderMaterial){const dn=de.uniformsGroups;for(let _r=0,Rn=dn.length;_r<Rn;_r++)if(pe.isWebGL2){const jn=dn[_r];Ye.update(jn,ln),Ye.bind(jn,ln)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return ln}function oi(U,ne){U.ambientLightColor.needsUpdate=ne,U.lightProbe.needsUpdate=ne,U.directionalLights.needsUpdate=ne,U.directionalLightShadows.needsUpdate=ne,U.pointLights.needsUpdate=ne,U.pointLightShadows.needsUpdate=ne,U.spotLights.needsUpdate=ne,U.spotLightShadows.needsUpdate=ne,U.rectAreaLights.needsUpdate=ne,U.hemisphereLights.needsUpdate=ne}function q(U){return U.isMeshLambertMaterial||U.isMeshToonMaterial||U.isMeshPhongMaterial||U.isMeshStandardMaterial||U.isShadowMaterial||U.isShaderMaterial&&U.lights===!0}this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return N},this.setRenderTargetTextures=function(U,ne,me){Ze.get(U.texture).__webglTexture=ne,Ze.get(U.depthTexture).__webglTexture=me;const de=Ze.get(U);de.__hasExternalTextures=!0,de.__hasExternalTextures&&(de.__autoAllocateDepthBuffer=me===void 0,de.__autoAllocateDepthBuffer||ze.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),de.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(U,ne){const me=Ze.get(U);me.__webglFramebuffer=ne,me.__useDefaultFramebuffer=ne===void 0},this.setRenderTarget=function(U,ne=0,me=0){N=U,L=ne,k=me;let de=!0,we=null,Xe=!1,qe=!1;if(U){const rt=Ze.get(U);rt.__useDefaultFramebuffer!==void 0?(K.bindFramebuffer(he.FRAMEBUFFER,null),de=!1):rt.__webglFramebuffer===void 0?Ne.setupRenderTarget(U):rt.__hasExternalTextures&&Ne.rebindTextures(U,Ze.get(U.texture).__webglTexture,Ze.get(U.depthTexture).__webglTexture);const gt=U.texture;(gt.isData3DTexture||gt.isDataArrayTexture||gt.isCompressedArrayTexture)&&(qe=!0);const at=Ze.get(U).__webglFramebuffer;U.isWebGLCubeRenderTarget?(Array.isArray(at[ne])?we=at[ne][me]:we=at[ne],Xe=!0):pe.isWebGL2&&U.samples>0&&Ne.useMultisampledRTT(U)===!1?we=Ze.get(U).__webglMultisampledFramebuffer:Array.isArray(at)?we=at[me]:we=at,D.copy(U.viewport),O.copy(U.scissor),B=U.scissorTest}else D.copy(j).multiplyScalar(ce).floor(),O.copy(re).multiplyScalar(ce).floor(),B=I;if(K.bindFramebuffer(he.FRAMEBUFFER,we)&&pe.drawBuffers&&de&&K.drawBuffers(U,we),K.viewport(D),K.scissor(O),K.setScissorTest(B),Xe){const rt=Ze.get(U.texture);he.framebufferTexture2D(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,he.TEXTURE_CUBE_MAP_POSITIVE_X+ne,rt.__webglTexture,me)}else if(qe){const rt=Ze.get(U.texture),gt=ne||0;he.framebufferTextureLayer(he.FRAMEBUFFER,he.COLOR_ATTACHMENT0,rt.__webglTexture,me||0,gt)}R=-1},this.readRenderTargetPixels=function(U,ne,me,de,we,Xe,qe){if(!(U&&U.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ot=Ze.get(U).__webglFramebuffer;if(U.isWebGLCubeRenderTarget&&qe!==void 0&&(ot=ot[qe]),ot){K.bindFramebuffer(he.FRAMEBUFFER,ot);try{const rt=U.texture,gt=rt.format,at=rt.type;if(gt!==mo&&bt.convert(gt)!==he.getParameter(he.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Wt=at===go&&(ze.has("EXT_color_buffer_half_float")||pe.isWebGL2&&ze.has("EXT_color_buffer_float"));if(at!==su&&bt.convert(at)!==he.getParameter(he.IMPLEMENTATION_COLOR_READ_TYPE)&&!(at===ro&&(pe.isWebGL2||ze.has("OES_texture_float")||ze.has("WEBGL_color_buffer_float")))&&!Wt){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ne>=0&&ne<=U.width-de&&me>=0&&me<=U.height-we&&he.readPixels(ne,me,de,we,bt.convert(gt),bt.convert(at),Xe)}finally{const rt=N!==null?Ze.get(N).__webglFramebuffer:null;K.bindFramebuffer(he.FRAMEBUFFER,rt)}}},this.copyFramebufferToTexture=function(U,ne,me=0){const de=Math.pow(2,-me),we=Math.floor(ne.image.width*de),Xe=Math.floor(ne.image.height*de);Ne.setTexture2D(ne,0),he.copyTexSubImage2D(he.TEXTURE_2D,me,0,0,U.x,U.y,we,Xe),K.unbindTexture()},this.copyTextureToTexture=function(U,ne,me,de=0){const we=ne.image.width,Xe=ne.image.height,qe=bt.convert(me.format),ot=bt.convert(me.type);Ne.setTexture2D(me,0),he.pixelStorei(he.UNPACK_FLIP_Y_WEBGL,me.flipY),he.pixelStorei(he.UNPACK_PREMULTIPLY_ALPHA_WEBGL,me.premultiplyAlpha),he.pixelStorei(he.UNPACK_ALIGNMENT,me.unpackAlignment),ne.isDataTexture?he.texSubImage2D(he.TEXTURE_2D,de,U.x,U.y,we,Xe,qe,ot,ne.image.data):ne.isCompressedTexture?he.compressedTexSubImage2D(he.TEXTURE_2D,de,U.x,U.y,ne.mipmaps[0].width,ne.mipmaps[0].height,qe,ne.mipmaps[0].data):he.texSubImage2D(he.TEXTURE_2D,de,U.x,U.y,qe,ot,ne.image),de===0&&me.generateMipmaps&&he.generateMipmap(he.TEXTURE_2D),K.unbindTexture()},this.copyTextureToTexture3D=function(U,ne,me,de,we=0){if(_.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Xe=U.max.x-U.min.x+1,qe=U.max.y-U.min.y+1,ot=U.max.z-U.min.z+1,rt=bt.convert(de.format),gt=bt.convert(de.type);let at;if(de.isData3DTexture)Ne.setTexture3D(de,0),at=he.TEXTURE_3D;else if(de.isDataArrayTexture)Ne.setTexture2DArray(de,0),at=he.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}he.pixelStorei(he.UNPACK_FLIP_Y_WEBGL,de.flipY),he.pixelStorei(he.UNPACK_PREMULTIPLY_ALPHA_WEBGL,de.premultiplyAlpha),he.pixelStorei(he.UNPACK_ALIGNMENT,de.unpackAlignment);const Wt=he.getParameter(he.UNPACK_ROW_LENGTH),It=he.getParameter(he.UNPACK_IMAGE_HEIGHT),Ot=he.getParameter(he.UNPACK_SKIP_PIXELS),$t=he.getParameter(he.UNPACK_SKIP_ROWS),Qt=he.getParameter(he.UNPACK_SKIP_IMAGES),sn=me.isCompressedTexture?me.mipmaps[0]:me.image;he.pixelStorei(he.UNPACK_ROW_LENGTH,sn.width),he.pixelStorei(he.UNPACK_IMAGE_HEIGHT,sn.height),he.pixelStorei(he.UNPACK_SKIP_PIXELS,U.min.x),he.pixelStorei(he.UNPACK_SKIP_ROWS,U.min.y),he.pixelStorei(he.UNPACK_SKIP_IMAGES,U.min.z),me.isDataTexture||me.isData3DTexture?he.texSubImage3D(at,we,ne.x,ne.y,ne.z,Xe,qe,ot,rt,gt,sn.data):me.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(at,we,ne.x,ne.y,ne.z,Xe,qe,ot,rt,sn.data)):he.texSubImage3D(at,we,ne.x,ne.y,ne.z,Xe,qe,ot,rt,gt,sn),he.pixelStorei(he.UNPACK_ROW_LENGTH,Wt),he.pixelStorei(he.UNPACK_IMAGE_HEIGHT,It),he.pixelStorei(he.UNPACK_SKIP_PIXELS,Ot),he.pixelStorei(he.UNPACK_SKIP_ROWS,$t),he.pixelStorei(he.UNPACK_SKIP_IMAGES,Qt),we===0&&de.generateMipmaps&&he.generateMipmap(at),K.unbindTexture()},this.initTexture=function(U){U.isCubeTexture?Ne.setTextureCube(U,0):U.isData3DTexture?Ne.setTexture3D(U,0):U.isDataArrayTexture||U.isCompressedArrayTexture?Ne.setTexture2DArray(U,0):Ne.setTexture2D(U,0),K.unbindTexture()},this.resetState=function(){L=0,k=0,N=null,K.reset(),xe.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ql}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Gn?Eh:CM}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Eh?Gn:Ml}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class rk extends av{}rk.prototype.isWebGL1Renderer=!0;class ax{constructor(e,n=25e-5){this.isFogExp2=!0,this.name="",this.color=new Zt(e),this.density=n}clone(){return new ax(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class lx{constructor(e,n=1,r=1e3){this.isFog=!0,this.name="",this.color=new Zt(e),this.near=n,this.far=r}clone(){return new lx(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}let td=class extends dr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n}};class ux{constructor(e,n){this.isInterleavedBuffer=!0,this.array=e,this.stride=n,this.count=e!==void 0?e.length/n:0,this.usage=L0,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=aa()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,n,r){e*=this.stride,r*=n.stride;for(let i=0,s=this.stride;i<s;i++)this.array[e+i]=n.array[r+i];return this}set(e,n=0){return this.array.set(e,n),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=aa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const n=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),r=new this.constructor(n,this.stride);return r.setUsage(this.usage),r}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=aa()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ho=new ge;class nd{constructor(e,n,r,i=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let n=0,r=this.data.count;n<r;n++)ho.fromBufferAttribute(this,n),ho.applyMatrix4(e),this.setXYZ(n,ho.x,ho.y,ho.z);return this}applyNormalMatrix(e){for(let n=0,r=this.count;n<r;n++)ho.fromBufferAttribute(this,n),ho.applyNormalMatrix(e),this.setXYZ(n,ho.x,ho.y,ho.z);return this}transformDirection(e){for(let n=0,r=this.count;n<r;n++)ho.fromBufferAttribute(this,n),ho.transformDirection(e),this.setXYZ(n,ho.x,ho.y,ho.z);return this}setX(e,n){return this.normalized&&(n=Yn(n,this.array)),this.data.array[e*this.data.stride+this.offset]=n,this}setY(e,n){return this.normalized&&(n=Yn(n,this.array)),this.data.array[e*this.data.stride+this.offset+1]=n,this}setZ(e,n){return this.normalized&&(n=Yn(n,this.array)),this.data.array[e*this.data.stride+this.offset+2]=n,this}setW(e,n){return this.normalized&&(n=Yn(n,this.array)),this.data.array[e*this.data.stride+this.offset+3]=n,this}getX(e){let n=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(n=No(n,this.array)),n}getY(e){let n=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(n=No(n,this.array)),n}getZ(e){let n=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(n=No(n,this.array)),n}getW(e){let n=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(n=No(n,this.array)),n}setXY(e,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(n=Yn(n,this.array),r=Yn(r,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this}setXYZ(e,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(n=Yn(n,this.array),r=Yn(r,this.array),i=Yn(i,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this}setXYZW(e,n,r,i,s){return e=e*this.data.stride+this.offset,this.normalized&&(n=Yn(n,this.array),r=Yn(r,this.array),i=Yn(i,this.array),s=Yn(s,this.array)),this.data.array[e+0]=n,this.data.array[e+1]=r,this.data.array[e+2]=i,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return new ur(new this.array.constructor(n),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new nd(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const n=[];for(let r=0;r<this.count;r++){const i=r*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)n.push(this.data.array[i+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:n,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class BM extends Fs{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Zt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let op;const dg=new ge,ap=new ge,lp=new ge,up=new wt,pg=new wt,ik=new Hn,T1=new ge,mg=new ge,C1=new ge,DA=new wt,Jw=new wt,OA=new wt;class sk extends dr{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",op===void 0){op=new An;const n=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),r=new ux(n,5);op.setIndex([0,1,2,0,2,3]),op.setAttribute("position",new nd(r,3,0,!1)),op.setAttribute("uv",new nd(r,2,3,!1))}this.geometry=op,this.material=e!==void 0?e:new BM,this.center=new wt(.5,.5)}raycast(e,n){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ap.setFromMatrixScale(this.matrixWorld),ik.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),lp.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&ap.multiplyScalar(-lp.z);const r=this.material.rotation;let i,s;r!==0&&(s=Math.cos(r),i=Math.sin(r));const o=this.center;L1(T1.set(-.5,-.5,0),lp,o,ap,i,s),L1(mg.set(.5,-.5,0),lp,o,ap,i,s),L1(C1.set(.5,.5,0),lp,o,ap,i,s),DA.set(0,0),Jw.set(1,0),OA.set(1,1);let a=e.ray.intersectTriangle(T1,mg,C1,!1,dg);if(a===null&&(L1(mg.set(-.5,.5,0),lp,o,ap,i,s),Jw.set(0,1),a=e.ray.intersectTriangle(T1,C1,mg,!1,dg),a===null))return;const l=e.ray.origin.distanceTo(dg);l<e.near||l>e.far||n.push({distance:l,point:dg.clone(),uv:Io.getInterpolation(dg,T1,mg,C1,DA,Jw,OA,new wt),face:null,object:this})}copy(e,n){return super.copy(e,n),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function L1(t,e,n,r,i,s){up.subVectors(t,n).addScalar(.5).multiply(r),i!==void 0?(pg.x=s*up.x-i*up.y,pg.y=i*up.x+s*up.y):pg.copy(up),t.copy(e),t.x+=pg.x,t.y+=pg.y,t.applyMatrix4(ik)}const P1=new ge,UA=new ge;class ok extends dr{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const n=e.levels;for(let r=0,i=n.length;r<i;r++){const s=n[r];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,n=0,r=0){n=Math.abs(n);const i=this.levels;let s;for(s=0;s<i.length&&!(n<i[s].distance);s++);return i.splice(s,0,{distance:n,hysteresis:r,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const n=this.levels;if(n.length>0){let r,i;for(r=1,i=n.length;r<i;r++){let s=n[r].distance;if(n[r].object.visible&&(s-=s*n[r].hysteresis),e<s)break}return n[r-1].object}return null}raycast(e,n){if(this.levels.length>0){P1.setFromMatrixPosition(this.matrixWorld);const i=e.ray.origin.distanceTo(P1);this.getObjectForDistance(i).raycast(e,n)}}update(e){const n=this.levels;if(n.length>1){P1.setFromMatrixPosition(e.matrixWorld),UA.setFromMatrixPosition(this.matrixWorld);const r=P1.distanceTo(UA)/e.zoom;n[0].object.visible=!0;let i,s;for(i=1,s=n.length;i<s;i++){let o=n[i].distance;if(n[i].object.visible&&(o-=o*n[i].hysteresis),r>=o)n[i-1].object.visible=!1,n[i].object.visible=!0;else break}for(this._currentLevel=i-1;i<s;i++)n[i].object.visible=!1}}toJSON(e){const n=super.toJSON(e);this.autoUpdate===!1&&(n.object.autoUpdate=!1),n.object.levels=[];const r=this.levels;for(let i=0,s=r.length;i<s;i++){const o=r[i];n.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return n}}const BA=new ge,zA=new Lr,HA=new Lr,T9=new ge,GA=new Hn,cp=new ge,Qw=new Pl,VA=new Hn,eS=new hd;class ak extends qi{constructor(e,n){super(e,n),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Hn,this.bindMatrixInverse=new Hn,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Xa),this.boundingBox.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)cp.fromBufferAttribute(n,r),this.applyBoneTransform(r,cp),this.boundingBox.expandByPoint(cp)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Pl),this.boundingSphere.makeEmpty();const n=e.getAttribute("position");for(let r=0;r<n.count;r++)cp.fromBufferAttribute(n,r),this.applyBoneTransform(r,cp),this.boundingSphere.expandByPoint(cp)}copy(e,n){return super.copy(e,n),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,n){const r=this.material,i=this.matrixWorld;r!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Qw.copy(this.boundingSphere),Qw.applyMatrix4(i),e.ray.intersectsSphere(Qw)!==!1&&(VA.copy(i).invert(),eS.copy(e.ray).applyMatrix4(VA),!(this.boundingBox!==null&&eS.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,n,eS)))}getVertexPosition(e,n){return super.getVertexPosition(e,n),this.applyBoneTransform(e,n),n}bind(e,n){this.skeleton=e,n===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),n=this.matrixWorld),this.bindMatrix.copy(n),this.bindMatrixInverse.copy(n).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Lr,n=this.geometry.attributes.skinWeight;for(let r=0,i=n.count;r<i;r++){e.fromBufferAttribute(n,r);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),n.setXYZW(r,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,n){const r=this.skeleton,i=this.geometry;zA.fromBufferAttribute(i.attributes.skinIndex,e),HA.fromBufferAttribute(i.attributes.skinWeight,e),BA.copy(n).applyMatrix4(this.bindMatrix),n.set(0,0,0);for(let s=0;s<4;s++){const o=HA.getComponent(s);if(o!==0){const a=zA.getComponent(s);GA.multiplyMatrices(r.bones[a].matrixWorld,r.boneInverses[a]),n.addScaledVector(T9.copy(BA).applyMatrix4(GA),o)}}return n.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,n){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,n)}}class zM extends dr{constructor(){super(),this.isBone=!0,this.type="Bone"}}class qp extends Ci{constructor(e=null,n=1,r=1,i,s,o,a,l,u=Fi,c=Fi,h,f){super(null,o,a,l,u,c,i,s,h,f),this.isDataTexture=!0,this.image={data:e,width:n,height:r},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const WA=new Hn,C9=new Hn;class cx{constructor(e=[],n=[]){this.uuid=aa(),this.bones=e.slice(0),this.boneInverses=n,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,n=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),n.length===0)this.calculateInverses();else if(e.length!==n.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let r=0,i=this.bones.length;r<i;r++)this.boneInverses.push(new Hn)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,n=this.bones.length;e<n;e++){const r=new Hn;this.bones[e]&&r.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(r)}}pose(){for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&r.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,n=this.bones.length;e<n;e++){const r=this.bones[e];r&&(r.parent&&r.parent.isBone?(r.matrix.copy(r.parent.matrixWorld).invert(),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))}}update(){const e=this.bones,n=this.boneInverses,r=this.boneMatrices,i=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:C9;WA.multiplyMatrices(a,n[s]),WA.toArray(r,s*16)}i!==null&&(i.needsUpdate=!0)}clone(){return new cx(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=G4(e),e=Math.max(e,4);const n=new Float32Array(e*e*4);n.set(this.boneMatrices);const r=new qp(n,e,e,mo,ro);return r.needsUpdate=!0,this.boneMatrices=n,this.boneTexture=r,this.boneTextureSize=e,this}getBoneByName(e){for(let n=0,r=this.bones.length;n<r;n++){const i=this.bones[n];if(i.name===e)return i}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,n){this.uuid=e.uuid;for(let r=0,i=e.bones.length;r<i;r++){const s=e.bones[r];let o=n[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new zM),this.bones.push(o),this.boneInverses.push(new Hn().fromArray(e.boneInverses[r]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const n=this.bones,r=this.boneInverses;for(let i=0,s=n.length;i<s;i++){const o=n[i];e.bones.push(o.uuid);const a=r[i];e.boneInverses.push(a.toArray())}return e}}class dm extends ur{constructor(e,n,r,i=1){super(e,n,r),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const hp=new Hn,jA=new Hn,R1=[],XA=new Xa,L9=new Hn,gg=new qi,vg=new Pl;class lk extends qi{constructor(e,n,r){super(e,n),this.isInstancedMesh=!0,this.instanceMatrix=new dm(new Float32Array(r*16),16),this.instanceColor=null,this.count=r,this.boundingBox=null,this.boundingSphere=null;for(let i=0;i<r;i++)this.setMatrixAt(i,L9)}computeBoundingBox(){const e=this.geometry,n=this.count;this.boundingBox===null&&(this.boundingBox=new Xa),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,hp),XA.copy(e.boundingBox).applyMatrix4(hp),this.boundingBox.union(XA)}computeBoundingSphere(){const e=this.geometry,n=this.count;this.boundingSphere===null&&(this.boundingSphere=new Pl),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let r=0;r<n;r++)this.getMatrixAt(r,hp),vg.copy(e.boundingSphere).applyMatrix4(hp),this.boundingSphere.union(vg)}copy(e,n){return super.copy(e,n),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,n){n.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,n){n.fromArray(this.instanceMatrix.array,e*16)}raycast(e,n){const r=this.matrixWorld,i=this.count;if(gg.geometry=this.geometry,gg.material=this.material,gg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),vg.copy(this.boundingSphere),vg.applyMatrix4(r),e.ray.intersectsSphere(vg)!==!1))for(let s=0;s<i;s++){this.getMatrixAt(s,hp),jA.multiplyMatrices(r,hp),gg.matrixWorld=jA,gg.raycast(e,R1);for(let o=0,a=R1.length;o<a;o++){const l=R1[o];l.instanceId=s,l.object=this,n.push(l)}R1.length=0}}setColorAt(e,n){this.instanceColor===null&&(this.instanceColor=new dm(new Float32Array(this.instanceMatrix.count*3),3)),n.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,n){n.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class Ds extends Fs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Zt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const qA=new ge,YA=new ge,ZA=new Hn,tS=new hd,k1=new Pl;class kh extends dr{constructor(e=new An,n=new Ds){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[0];for(let i=1,s=n.count;i<s;i++)qA.fromBufferAttribute(n,i-1),YA.fromBufferAttribute(n,i),r[i]=r[i-1],r[i]+=qA.distanceTo(YA);e.setAttribute("lineDistance",new nn(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Line.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),k1.copy(r.boundingSphere),k1.applyMatrix4(i),k1.radius+=s,e.ray.intersectsSphere(k1)===!1)return;ZA.copy(i).invert(),tS.copy(e.ray).applyMatrix4(ZA);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=new ge,c=new ge,h=new ge,f=new ge,d=this.isLineSegments?2:1,v=r.index,w=r.attributes.position;if(v!==null){const g=Math.max(0,o.start),S=Math.min(v.count,o.start+o.count);for(let _=g,T=S-1;_<T;_+=d){const L=v.getX(_),k=v.getX(_+1);if(u.fromBufferAttribute(w,L),c.fromBufferAttribute(w,k),tS.distanceSqToSegment(u,c,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const R=e.ray.origin.distanceTo(f);R<e.near||R>e.far||n.push({distance:R,point:h.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}else{const g=Math.max(0,o.start),S=Math.min(w.count,o.start+o.count);for(let _=g,T=S-1;_<T;_+=d){if(u.fromBufferAttribute(w,_),c.fromBufferAttribute(w,_+1),tS.distanceSqToSegment(u,c,f,h)>l)continue;f.applyMatrix4(this.matrixWorld);const k=e.ray.origin.distanceTo(f);k<e.near||k>e.far||n.push({distance:k,point:h.clone().applyMatrix4(this.matrixWorld),index:_,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}const $A=new ge,KA=new ge;class qa extends kh{constructor(e,n){super(e,n),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const n=e.attributes.position,r=[];for(let i=0,s=n.count;i<s;i+=2)$A.fromBufferAttribute(n,i),KA.fromBufferAttribute(n,i+1),r[i]=i===0?0:r[i-1],r[i+1]=r[i]+$A.distanceTo(KA);e.setAttribute("lineDistance",new nn(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class uk extends kh{constructor(e,n){super(e,n),this.isLineLoop=!0,this.type="LineLoop"}}class HM extends Fs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Zt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const JA=new Hn,Nb=new hd,I1=new Pl,N1=new ge;class ck extends dr{constructor(e=new An,n=new HM){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=n,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),this.material=e.material,this.geometry=e.geometry,this}raycast(e,n){const r=this.geometry,i=this.matrixWorld,s=e.params.Points.threshold,o=r.drawRange;if(r.boundingSphere===null&&r.computeBoundingSphere(),I1.copy(r.boundingSphere),I1.applyMatrix4(i),I1.radius+=s,e.ray.intersectsSphere(I1)===!1)return;JA.copy(i).invert(),Nb.copy(e.ray).applyMatrix4(JA);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=r.index,h=r.attributes.position;if(u!==null){const f=Math.max(0,o.start),d=Math.min(u.count,o.start+o.count);for(let v=f,x=d;v<x;v++){const w=u.getX(v);N1.fromBufferAttribute(h,w),QA(N1,w,l,i,e,n,this)}}else{const f=Math.max(0,o.start),d=Math.min(h.count,o.start+o.count);for(let v=f,x=d;v<x;v++)N1.fromBufferAttribute(h,v),QA(N1,v,l,i,e,n,this)}}updateMorphTargets(){const n=this.geometry.morphAttributes,r=Object.keys(n);if(r.length>0){const i=n[r[0]];if(i!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=i.length;s<o;s++){const a=i[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function QA(t,e,n,r,i,s,o){const a=Nb.distanceSqToPoint(t);if(a<n){const l=new ge;Nb.closestPointToPoint(t,l),l.applyMatrix4(r);const u=i.ray.origin.distanceTo(l);if(u<i.near||u>i.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class P9 extends Ci{constructor(e,n,r,i,s,o,a,l,u){super(e,n,r,i,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Kr,this.magFilter=s!==void 0?s:Kr,this.generateMipmaps=!1;const c=this;function h(){c.needsUpdate=!0,e.requestVideoFrameCallback(h)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(h)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class R9 extends Ci{constructor(e,n){super({width:e,height:n}),this.isFramebufferTexture=!0,this.magFilter=Fi,this.minFilter=Fi,this.generateMipmaps=!1,this.needsUpdate=!0}}class hx extends Ci{constructor(e,n,r,i,s,o,a,l,u,c,h,f){super(null,o,a,l,u,c,i,s,h,f),this.isCompressedTexture=!0,this.image={width:n,height:r},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class k9 extends hx{constructor(e,n,r,i,s,o){super(e,n,r,s,o),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=to}}class I9 extends hx{constructor(e,n,r){super(void 0,e[0].width,e[0].height,n,r,cu),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class N9 extends Ci{constructor(e,n,r,i,s,o,a,l,u){super(e,n,r,i,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}let Rl=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,n){const r=this.getUtoTmapping(e);return this.getPoint(r,n)}getPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return n}getSpacedPoints(e=5){const n=[];for(let r=0;r<=e;r++)n.push(this.getPointAt(r/e));return n}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const n=[];let r,i=this.getPoint(0),s=0;n.push(0);for(let o=1;o<=e;o++)r=this.getPoint(o/e),s+=r.distanceTo(i),n.push(s),i=r;return this.cacheArcLengths=n,n}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,n){const r=this.getLengths();let i=0;const s=r.length;let o;n?o=n:o=e*r[s-1];let a=0,l=s-1,u;for(;a<=l;)if(i=Math.floor(a+(l-a)/2),u=r[i]-o,u<0)a=i+1;else if(u>0)l=i-1;else{l=i;break}if(i=l,r[i]===o)return i/(s-1);const c=r[i],f=r[i+1]-c,d=(o-c)/f;return(i+d)/(s-1)}getTangent(e,n){let i=e-1e-4,s=e+1e-4;i<0&&(i=0),s>1&&(s=1);const o=this.getPoint(i),a=this.getPoint(s),l=n||(o.isVector2?new wt:new ge);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,n){const r=this.getUtoTmapping(e);return this.getTangent(r,n)}computeFrenetFrames(e,n){const r=new ge,i=[],s=[],o=[],a=new ge,l=new Hn;for(let d=0;d<=e;d++){const v=d/e;i[d]=this.getTangentAt(v,new ge)}s[0]=new ge,o[0]=new ge;let u=Number.MAX_VALUE;const c=Math.abs(i[0].x),h=Math.abs(i[0].y),f=Math.abs(i[0].z);c<=u&&(u=c,r.set(1,0,0)),h<=u&&(u=h,r.set(0,1,0)),f<=u&&r.set(0,0,1),a.crossVectors(i[0],r).normalize(),s[0].crossVectors(i[0],a),o[0].crossVectors(i[0],s[0]);for(let d=1;d<=e;d++){if(s[d]=s[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(Ti(i[d-1].dot(i[d]),-1,1));s[d].applyMatrix4(l.makeRotationAxis(a,v))}o[d].crossVectors(i[d],s[d])}if(n===!0){let d=Math.acos(Ti(s[0].dot(s[e]),-1,1));d/=e,i[0].dot(a.crossVectors(s[0],s[e]))>0&&(d=-d);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(i[v],d*v)),o[v].crossVectors(i[v],s[v])}return{tangents:i,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};class fx extends Rl{constructor(e=0,n=0,r=1,i=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=n,this.xRadius=r,this.yRadius=i,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,n){const r=n||new wt,i=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=i;for(;s>i;)s-=i;s<Number.EPSILON&&(o?s=0:s=i),this.aClockwise===!0&&!o&&(s===i?s=-i:s=s-i);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=l-this.aX,d=u-this.aY;l=f*c-d*h+this.aX,u=f*h+d*c+this.aY}return r.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class hk extends fx{constructor(e,n,r,i,s,o){super(e,n,r,r,i,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function GM(){let t=0,e=0,n=0,r=0;function i(s,o,a,l){t=s,e=a,n=-3*s+3*o-2*a-l,r=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){i(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,c,h){let f=(o-s)/u-(a-s)/(u+c)+(a-o)/c,d=(a-o)/c-(l-o)/(c+h)+(l-a)/h;f*=c,d*=c,i(o,a,f,d)},calc:function(s){const o=s*s,a=o*s;return t+e*s+n*o+r*a}}}const F1=new ge,nS=new GM,rS=new GM,iS=new GM;class fk extends Rl{constructor(e=[],n=!1,r="centripetal",i=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=n,this.curveType=r,this.tension=i}getPoint(e,n=new ge){const r=n,i=this.points,s=i.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,c;this.closed||a>0?u=i[(a-1)%s]:(F1.subVectors(i[0],i[1]).add(i[0]),u=F1);const h=i[a%s],f=i[(a+1)%s];if(this.closed||a+2<s?c=i[(a+2)%s]:(F1.subVectors(i[s-1],i[s-2]).add(i[s-1]),c=F1),this.curveType==="centripetal"||this.curveType==="chordal"){const d=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(h),d),x=Math.pow(h.distanceToSquared(f),d),w=Math.pow(f.distanceToSquared(c),d);x<1e-4&&(x=1),v<1e-4&&(v=x),w<1e-4&&(w=x),nS.initNonuniformCatmullRom(u.x,h.x,f.x,c.x,v,x,w),rS.initNonuniformCatmullRom(u.y,h.y,f.y,c.y,v,x,w),iS.initNonuniformCatmullRom(u.z,h.z,f.z,c.z,v,x,w)}else this.curveType==="catmullrom"&&(nS.initCatmullRom(u.x,h.x,f.x,c.x,this.tension),rS.initCatmullRom(u.y,h.y,f.y,c.y,this.tension),iS.initCatmullRom(u.z,h.z,f.z,c.z,this.tension));return r.set(nS.calc(l),rS.calc(l),iS.calc(l)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new ge().fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function eT(t,e,n,r,i){const s=(r-e)*.5,o=(i-n)*.5,a=t*t,l=t*a;return(2*n-2*r+s+o)*l+(-3*n+3*r-2*s-o)*a+s*t+n}function F9(t,e){const n=1-t;return n*n*e}function D9(t,e){return 2*(1-t)*t*e}function O9(t,e){return t*t*e}function Zg(t,e,n,r){return F9(t,e)+D9(t,n)+O9(t,r)}function U9(t,e){const n=1-t;return n*n*n*e}function B9(t,e){const n=1-t;return 3*n*n*t*e}function z9(t,e){return 3*(1-t)*t*t*e}function H9(t,e){return t*t*t*e}function $g(t,e,n,r,i){return U9(t,e)+B9(t,n)+z9(t,r)+H9(t,i)}class VM extends Rl{constructor(e=new wt,n=new wt,r=new wt,i=new wt){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new wt){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set($g(e,i.x,s.x,o.x,a.x),$g(e,i.y,s.y,o.y,a.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class dk extends Rl{constructor(e=new ge,n=new ge,r=new ge,i=new ge){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=n,this.v2=r,this.v3=i}getPoint(e,n=new ge){const r=n,i=this.v0,s=this.v1,o=this.v2,a=this.v3;return r.set($g(e,i.x,s.x,o.x,a.x),$g(e,i.y,s.y,o.y,a.y),$g(e,i.z,s.z,o.z,a.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class dx extends Rl{constructor(e=new wt,n=new wt){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=n}getPoint(e,n=new wt){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new wt){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pk extends Rl{constructor(e=new ge,n=new ge){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=n}getPoint(e,n=new ge){const r=n;return e===1?r.copy(this.v2):(r.copy(this.v2).sub(this.v1),r.multiplyScalar(e).add(this.v1)),r}getPointAt(e,n){return this.getPoint(e,n)}getTangent(e,n=new ge){return n.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,n){return this.getTangent(e,n)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class WM extends Rl{constructor(e=new wt,n=new wt,r=new wt){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new wt){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(Zg(e,i.x,s.x,o.x),Zg(e,i.y,s.y,o.y)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jM extends Rl{constructor(e=new ge,n=new ge,r=new ge){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=n,this.v2=r}getPoint(e,n=new ge){const r=n,i=this.v0,s=this.v1,o=this.v2;return r.set(Zg(e,i.x,s.x,o.x),Zg(e,i.y,s.y,o.y),Zg(e,i.z,s.z,o.z)),r}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class XM extends Rl{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,n=new wt){const r=n,i=this.points,s=(i.length-1)*e,o=Math.floor(s),a=s-o,l=i[o===0?o:o-1],u=i[o],c=i[o>i.length-2?i.length-1:o+1],h=i[o>i.length-3?i.length-1:o+2];return r.set(eT(a,l.x,u.x,c.x,h.x),eT(a,l.y,u.y,c.y,h.y)),r}copy(e){super.copy(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let n=0,r=this.points.length;n<r;n++){const i=this.points[n];e.points.push(i.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let n=0,r=e.points.length;n<r;n++){const i=e.points[n];this.points.push(new wt().fromArray(i))}return this}}var qM=Object.freeze({__proto__:null,ArcCurve:hk,CatmullRomCurve3:fk,CubicBezierCurve:VM,CubicBezierCurve3:dk,EllipseCurve:fx,LineCurve:dx,LineCurve3:pk,QuadraticBezierCurve:WM,QuadraticBezierCurve3:jM,SplineCurve:XM});class mk extends Rl{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),n=this.curves[this.curves.length-1].getPoint(1);e.equals(n)||this.curves.push(new dx(n,e))}getPoint(e,n){const r=e*this.getLength(),i=this.getCurveLengths();let s=0;for(;s<i.length;){if(i[s]>=r){const o=i[s]-r,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,n)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let n=0;for(let r=0,i=this.curves.length;r<i;r++)n+=this.curves[r].getLength(),e.push(n);return this.cacheLengths=e,e}getSpacedPoints(e=40){const n=[];for(let r=0;r<=e;r++)n.push(this.getPoint(r/e));return this.autoClose&&n.push(n[0]),n}getPoints(e=12){const n=[];let r;for(let i=0,s=this.curves;i<s.length;i++){const o=s[i],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];r&&r.equals(c)||(n.push(c),r=c)}}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}copy(e){super.copy(e),this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let n=0,r=this.curves.length;n<r;n++){const i=this.curves[n];e.curves.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let n=0,r=e.curves.length;n<r;n++){const i=e.curves[n];this.curves.push(new qM[i.type]().fromJSON(i))}return this}}let k0=class extends mk{constructor(e){super(),this.type="Path",this.currentPoint=new wt,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let n=1,r=e.length;n<r;n++)this.lineTo(e[n].x,e[n].y);return this}moveTo(e,n){return this.currentPoint.set(e,n),this}lineTo(e,n){const r=new dx(this.currentPoint.clone(),new wt(e,n));return this.curves.push(r),this.currentPoint.set(e,n),this}quadraticCurveTo(e,n,r,i){const s=new WM(this.currentPoint.clone(),new wt(e,n),new wt(r,i));return this.curves.push(s),this.currentPoint.set(r,i),this}bezierCurveTo(e,n,r,i,s,o){const a=new VM(this.currentPoint.clone(),new wt(e,n),new wt(r,i),new wt(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const n=[this.currentPoint.clone()].concat(e),r=new XM(n);return this.curves.push(r),this.currentPoint.copy(e[e.length-1]),this}arc(e,n,r,i,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,n+l,r,i,s,o),this}absarc(e,n,r,i,s,o){return this.absellipse(e,n,r,r,i,s,o),this}ellipse(e,n,r,i,s,o,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,n+c,r,i,s,o,a,l),this}absellipse(e,n,r,i,s,o,a,l){const u=new fx(e,n,r,i,s,o,a,l);if(this.curves.length>0){const h=u.getPoint(0);h.equals(this.currentPoint)||this.lineTo(h.x,h.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class lv extends An{constructor(e=[new wt(0,-.5),new wt(.5,0),new wt(0,.5)],n=12,r=0,i=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:n,phiStart:r,phiLength:i},n=Math.floor(n),i=Ti(i,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],c=1/n,h=new ge,f=new wt,d=new ge,v=new ge,x=new ge;let w=0,g=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:w=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,d.x=g*1,d.y=-w,d.z=g*0,x.copy(d),d.normalize(),l.push(d.x,d.y,d.z);break;case e.length-1:l.push(x.x,x.y,x.z);break;default:w=e[S+1].x-e[S].x,g=e[S+1].y-e[S].y,d.x=g*1,d.y=-w,d.z=g*0,v.copy(d),d.x+=x.x,d.y+=x.y,d.z+=x.z,d.normalize(),l.push(d.x,d.y,d.z),x.copy(v)}for(let S=0;S<=n;S++){const _=r+S*c*i,T=Math.sin(_),L=Math.cos(_);for(let k=0;k<=e.length-1;k++){h.x=e[k].x*T,h.y=e[k].y,h.z=e[k].x*L,o.push(h.x,h.y,h.z),f.x=S/n,f.y=k/(e.length-1),a.push(f.x,f.y);const N=l[3*k+0]*T,R=l[3*k+1],P=l[3*k+0]*L;u.push(N,R,P)}}for(let S=0;S<n;S++)for(let _=0;_<e.length-1;_++){const T=_+S*e.length,L=T,k=T+e.length,N=T+e.length+1,R=T+1;s.push(L,k,R),s.push(N,R,k)}this.setIndex(s),this.setAttribute("position",new nn(o,3)),this.setAttribute("uv",new nn(a,2)),this.setAttribute("normal",new nn(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lv(e.points,e.segments,e.phiStart,e.phiLength)}}class px extends lv{constructor(e=1,n=1,r=4,i=8){const s=new k0;s.absarc(0,-n/2,e,Math.PI*1.5,0),s.absarc(0,n/2,e,0,Math.PI*.5),super(s.getPoints(r),i),this.type="CapsuleGeometry",this.parameters={radius:e,length:n,capSegments:r,radialSegments:i}}static fromJSON(e){return new px(e.radius,e.length,e.capSegments,e.radialSegments)}}class mx extends An{constructor(e=1,n=32,r=0,i=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:n,thetaStart:r,thetaLength:i},n=Math.max(3,n);const s=[],o=[],a=[],l=[],u=new ge,c=new wt;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let h=0,f=3;h<=n;h++,f+=3){const d=r+h/n*i;u.x=e*Math.cos(d),u.y=e*Math.sin(d),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[f]/e+1)/2,c.y=(o[f+1]/e+1)/2,l.push(c.x,c.y)}for(let h=1;h<=n;h++)s.push(h,h+1,0);this.setIndex(s),this.setAttribute("position",new nn(o,3)),this.setAttribute("normal",new nn(a,3)),this.setAttribute("uv",new nn(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mx(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Tm extends An{constructor(e=1,n=1,r=1,i=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:n,height:r,radialSegments:i,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;i=Math.floor(i),s=Math.floor(s);const c=[],h=[],f=[],d=[];let v=0;const x=[],w=r/2;let g=0;S(),o===!1&&(e>0&&_(!0),n>0&&_(!1)),this.setIndex(c),this.setAttribute("position",new nn(h,3)),this.setAttribute("normal",new nn(f,3)),this.setAttribute("uv",new nn(d,2));function S(){const T=new ge,L=new ge;let k=0;const N=(n-e)/r;for(let R=0;R<=s;R++){const P=[],D=R/s,O=D*(n-e)+e;for(let B=0;B<=i;B++){const V=B/i,H=V*l+a,ee=Math.sin(H),se=Math.cos(H);L.x=O*ee,L.y=-D*r+w,L.z=O*se,h.push(L.x,L.y,L.z),T.set(ee,N,se).normalize(),f.push(T.x,T.y,T.z),d.push(V,1-D),P.push(v++)}x.push(P)}for(let R=0;R<i;R++)for(let P=0;P<s;P++){const D=x[P][R],O=x[P+1][R],B=x[P+1][R+1],V=x[P][R+1];c.push(D,O,V),c.push(O,B,V),k+=6}u.addGroup(g,k,0),g+=k}function _(T){const L=v,k=new wt,N=new ge;let R=0;const P=T===!0?e:n,D=T===!0?1:-1;for(let B=1;B<=i;B++)h.push(0,w*D,0),f.push(0,D,0),d.push(.5,.5),v++;const O=v;for(let B=0;B<=i;B++){const H=B/i*l+a,ee=Math.cos(H),se=Math.sin(H);N.x=P*se,N.y=w*D,N.z=P*ee,h.push(N.x,N.y,N.z),f.push(0,D,0),k.x=ee*.5+.5,k.y=se*.5*D+.5,d.push(k.x,k.y),v++}for(let B=0;B<i;B++){const V=L+B,H=O+B;T===!0?c.push(H,H+1,V):c.push(H+1,H,V),R+=3}u.addGroup(g,R,T===!0?1:2),g+=R}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tm(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class gx extends Tm{constructor(e=1,n=1,r=32,i=1,s=!1,o=0,a=Math.PI*2){super(0,e,n,r,i,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new gx(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Vh extends An{constructor(e=[],n=[],r=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:n,radius:r,detail:i};const s=[],o=[];a(i),u(r),c(),this.setAttribute("position",new nn(s,3)),this.setAttribute("normal",new nn(s.slice(),3)),this.setAttribute("uv",new nn(o,2)),i===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const _=new ge,T=new ge,L=new ge;for(let k=0;k<n.length;k+=3)d(n[k+0],_),d(n[k+1],T),d(n[k+2],L),l(_,T,L,S)}function l(S,_,T,L){const k=L+1,N=[];for(let R=0;R<=k;R++){N[R]=[];const P=S.clone().lerp(T,R/k),D=_.clone().lerp(T,R/k),O=k-R;for(let B=0;B<=O;B++)B===0&&R===k?N[R][B]=P:N[R][B]=P.clone().lerp(D,B/O)}for(let R=0;R<k;R++)for(let P=0;P<2*(k-R)-1;P++){const D=Math.floor(P/2);P%2===0?(f(N[R][D+1]),f(N[R+1][D]),f(N[R][D])):(f(N[R][D+1]),f(N[R+1][D+1]),f(N[R+1][D]))}}function u(S){const _=new ge;for(let T=0;T<s.length;T+=3)_.x=s[T+0],_.y=s[T+1],_.z=s[T+2],_.normalize().multiplyScalar(S),s[T+0]=_.x,s[T+1]=_.y,s[T+2]=_.z}function c(){const S=new ge;for(let _=0;_<s.length;_+=3){S.x=s[_+0],S.y=s[_+1],S.z=s[_+2];const T=w(S)/2/Math.PI+.5,L=g(S)/Math.PI+.5;o.push(T,1-L)}v(),h()}function h(){for(let S=0;S<o.length;S+=6){const _=o[S+0],T=o[S+2],L=o[S+4],k=Math.max(_,T,L),N=Math.min(_,T,L);k>.9&&N<.1&&(_<.2&&(o[S+0]+=1),T<.2&&(o[S+2]+=1),L<.2&&(o[S+4]+=1))}}function f(S){s.push(S.x,S.y,S.z)}function d(S,_){const T=S*3;_.x=e[T+0],_.y=e[T+1],_.z=e[T+2]}function v(){const S=new ge,_=new ge,T=new ge,L=new ge,k=new wt,N=new wt,R=new wt;for(let P=0,D=0;P<s.length;P+=9,D+=6){S.set(s[P+0],s[P+1],s[P+2]),_.set(s[P+3],s[P+4],s[P+5]),T.set(s[P+6],s[P+7],s[P+8]),k.set(o[D+0],o[D+1]),N.set(o[D+2],o[D+3]),R.set(o[D+4],o[D+5]),L.copy(S).add(_).add(T).divideScalar(3);const O=w(L);x(k,D+0,S,O),x(N,D+2,_,O),x(R,D+4,T,O)}}function x(S,_,T,L){L<0&&S.x===1&&(o[_]=S.x-1),T.x===0&&T.z===0&&(o[_]=L/2/Math.PI+.5)}function w(S){return Math.atan2(S.z,-S.x)}function g(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Vh(e.vertices,e.indices,e.radius,e.details)}}class vx extends Vh{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=1/r,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-r,0,-i,r,0,i,-r,0,i,r,-i,-r,0,-i,r,0,i,-r,0,i,r,0,-r,0,-i,r,0,-i,-r,0,i,r,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,n),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new vx(e.radius,e.detail)}}const D1=new ge,O1=new ge,sS=new ge,U1=new Io;class YM extends An{constructor(e=null,n=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:n},e!==null){const i=Math.pow(10,4),s=Math.cos(jf*n),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],c=["a","b","c"],h=new Array(3),f={},d=[];for(let v=0;v<l;v+=3){o?(u[0]=o.getX(v),u[1]=o.getX(v+1),u[2]=o.getX(v+2)):(u[0]=v,u[1]=v+1,u[2]=v+2);const{a:x,b:w,c:g}=U1;if(x.fromBufferAttribute(a,u[0]),w.fromBufferAttribute(a,u[1]),g.fromBufferAttribute(a,u[2]),U1.getNormal(sS),h[0]=`${Math.round(x.x*i)},${Math.round(x.y*i)},${Math.round(x.z*i)}`,h[1]=`${Math.round(w.x*i)},${Math.round(w.y*i)},${Math.round(w.z*i)}`,h[2]=`${Math.round(g.x*i)},${Math.round(g.y*i)},${Math.round(g.z*i)}`,!(h[0]===h[1]||h[1]===h[2]||h[2]===h[0]))for(let S=0;S<3;S++){const _=(S+1)%3,T=h[S],L=h[_],k=U1[c[S]],N=U1[c[_]],R=`${T}_${L}`,P=`${L}_${T}`;P in f&&f[P]?(sS.dot(f[P].normal)<=s&&(d.push(k.x,k.y,k.z),d.push(N.x,N.y,N.z)),f[P]=null):R in f||(f[R]={index0:u[S],index1:u[_],normal:sS.clone()})}}for(const v in f)if(f[v]){const{index0:x,index1:w}=f[v];D1.fromBufferAttribute(a,x),O1.fromBufferAttribute(a,w),d.push(D1.x,D1.y,D1.z),d.push(O1.x,O1.y,O1.z)}this.setAttribute("position",new nn(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let qf=class extends k0{constructor(e){super(e),this.uuid=aa(),this.type="Shape",this.holes=[]}getPointsHoles(e){const n=[];for(let r=0,i=this.holes.length;r<i;r++)n[r]=this.holes[r].getPoints(e);return n}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(i.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let n=0,r=this.holes.length;n<r;n++){const i=this.holes[n];e.holes.push(i.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let n=0,r=e.holes.length;n<r;n++){const i=e.holes[n];this.holes.push(new k0().fromJSON(i))}return this}};const G9={triangulate:function(t,e,n=2){const r=e&&e.length,i=r?e[0]*n:t.length;let s=gk(t,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,c,h,f,d;if(r&&(s=q9(t,e,s,n)),t.length>80*n){a=u=t[0],l=c=t[1];for(let v=n;v<i;v+=n)h=t[v],f=t[v+1],h<a&&(a=h),f<l&&(l=f),h>u&&(u=h),f>c&&(c=f);d=Math.max(u-a,c-l),d=d!==0?32767/d:0}return I0(s,o,n,a,l,d,0),o}};function gk(t,e,n,r,i){let s,o;if(i===iH(t,e,n,r)>0)for(s=e;s<n;s+=r)o=tT(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=tT(s,t[s],t[s+1],o);return o&&yx(o,o.next)&&(F0(o),o=o.next),o}function rd(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(yx(n,n.next)||vi(n.prev,n,n.next)===0)){if(F0(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function I0(t,e,n,r,i,s,o){if(!t)return;!o&&s&&J9(t,r,i,s);let a=t,l,u;for(;t.prev!==t.next;){if(l=t.prev,u=t.next,s?W9(t,r,i,s):V9(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(u.i/n|0),F0(t),t=u.next,a=u.next;continue}if(t=u,t===a){o?o===1?(t=j9(rd(t),e,n),I0(t,e,n,r,i,s,2)):o===2&&X9(t,e,n,r,i,s):I0(rd(t),e,n,r,i,s,1);break}}}function V9(t){const e=t.prev,n=t,r=t.next;if(vi(e,n,r)>=0)return!1;const i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,u=r.y,c=i<s?i<o?i:o:s<o?s:o,h=a<l?a<u?a:u:l<u?l:u,f=i>s?i>o?i:o:s>o?s:o,d=a>l?a>u?a:u:l>u?l:u;let v=r.next;for(;v!==e;){if(v.x>=c&&v.x<=f&&v.y>=h&&v.y<=d&&Bp(i,a,s,l,o,u,v.x,v.y)&&vi(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function W9(t,e,n,r){const i=t.prev,s=t,o=t.next;if(vi(i,s,o)>=0)return!1;const a=i.x,l=s.x,u=o.x,c=i.y,h=s.y,f=o.y,d=a<l?a<u?a:u:l<u?l:u,v=c<h?c<f?c:f:h<f?h:f,x=a>l?a>u?a:u:l>u?l:u,w=c>h?c>f?c:f:h>f?h:f,g=Fb(d,v,e,n,r),S=Fb(x,w,e,n,r);let _=t.prevZ,T=t.nextZ;for(;_&&_.z>=g&&T&&T.z<=S;){if(_.x>=d&&_.x<=x&&_.y>=v&&_.y<=w&&_!==i&&_!==o&&Bp(a,c,l,h,u,f,_.x,_.y)&&vi(_.prev,_,_.next)>=0||(_=_.prevZ,T.x>=d&&T.x<=x&&T.y>=v&&T.y<=w&&T!==i&&T!==o&&Bp(a,c,l,h,u,f,T.x,T.y)&&vi(T.prev,T,T.next)>=0))return!1;T=T.nextZ}for(;_&&_.z>=g;){if(_.x>=d&&_.x<=x&&_.y>=v&&_.y<=w&&_!==i&&_!==o&&Bp(a,c,l,h,u,f,_.x,_.y)&&vi(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;T&&T.z<=S;){if(T.x>=d&&T.x<=x&&T.y>=v&&T.y<=w&&T!==i&&T!==o&&Bp(a,c,l,h,u,f,T.x,T.y)&&vi(T.prev,T,T.next)>=0)return!1;T=T.nextZ}return!0}function j9(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!yx(i,s)&&vk(i,r,r.next,s)&&N0(i,s)&&N0(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),F0(r),F0(r.next),r=t=s),r=r.next}while(r!==t);return rd(r)}function X9(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&tH(o,a)){let l=yk(o,a);o=rd(o,o.next),l=rd(l,l.next),I0(o,e,n,r,i,s,0),I0(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function q9(t,e,n,r){const i=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,u=gk(t,a,l,r,!1),u===u.next&&(u.steiner=!0),i.push(eH(u));for(i.sort(Y9),s=0;s<i.length;s++)n=Z9(i[s],n);return n}function Y9(t,e){return t.x-e.x}function Z9(t,e){const n=$9(t,e);if(!n)return e;const r=yk(n,t);return rd(r,r.next),rd(n,n.next)}function $9(t,e){let n=e,r=-1/0,i;const s=t.x,o=t.y;do{if(o<=n.y&&o>=n.next.y&&n.next.y!==n.y){const f=n.x+(o-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(f<=s&&f>r&&(r=f,i=n.x<n.next.x?n:n.next,f===s))return i}n=n.next}while(n!==e);if(!i)return null;const a=i,l=i.x,u=i.y;let c=1/0,h;n=i;do s>=n.x&&n.x>=l&&s!==n.x&&Bp(o<u?s:r,o,l,u,o<u?r:s,o,n.x,n.y)&&(h=Math.abs(o-n.y)/(s-n.x),N0(n,t)&&(h<c||h===c&&(n.x>i.x||n.x===i.x&&K9(i,n)))&&(i=n,c=h)),n=n.next;while(n!==a);return i}function K9(t,e){return vi(t.prev,t,e.prev)<0&&vi(e.next,t,t.next)<0}function J9(t,e,n,r){let i=t;do i.z===0&&(i.z=Fb(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Q9(i)}function Q9(t){let e,n,r,i,s,o,a,l,u=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<u&&(a++,r=r.nextZ,!!r);e++);for(l=u;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,u*=2}while(o>1);return t}function Fb(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function eH(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Bp(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function tH(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!nH(t,e)&&(N0(t,e)&&N0(e,t)&&rH(t,e)&&(vi(t.prev,t,e.prev)||vi(t,e.prev,e))||yx(t,e)&&vi(t.prev,t,t.next)>0&&vi(e.prev,e,e.next)>0)}function vi(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function yx(t,e){return t.x===e.x&&t.y===e.y}function vk(t,e,n,r){const i=z1(vi(t,e,n)),s=z1(vi(t,e,r)),o=z1(vi(n,r,t)),a=z1(vi(n,r,e));return!!(i!==s&&o!==a||i===0&&B1(t,n,e)||s===0&&B1(t,r,e)||o===0&&B1(n,t,r)||a===0&&B1(n,e,r))}function B1(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function z1(t){return t>0?1:t<0?-1:0}function nH(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&vk(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function N0(t,e){return vi(t.prev,t,t.next)<0?vi(t,e,t.next)>=0&&vi(t,t.prev,e)>=0:vi(t,e,t.prev)<0||vi(t,t.next,e)<0}function rH(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function yk(t,e){const n=new Db(t.i,t.x,t.y),r=new Db(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function tT(t,e,n,r){const i=new Db(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function F0(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Db(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function iH(t,e,n,r){let i=0;for(let s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}class au{static area(e){const n=e.length;let r=0;for(let i=n-1,s=0;s<n;i=s++)r+=e[i].x*e[s].y-e[s].x*e[i].y;return r*.5}static isClockWise(e){return au.area(e)<0}static triangulateShape(e,n){const r=[],i=[],s=[];nT(e),rT(r,e);let o=e.length;n.forEach(nT);for(let l=0;l<n.length;l++)i.push(o),o+=n[l].length,rT(r,n[l]);const a=G9.triangulate(r,i);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function nT(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function rT(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class xx extends An{constructor(e=new qf([new wt(.5,.5),new wt(-.5,.5),new wt(-.5,-.5),new wt(.5,-.5)]),n={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:n},e=Array.isArray(e)?e:[e];const r=this,i=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new nn(i,3)),this.setAttribute("uv",new nn(s,2)),this.computeVertexNormals();function o(a){const l=[],u=n.curveSegments!==void 0?n.curveSegments:12,c=n.steps!==void 0?n.steps:1,h=n.depth!==void 0?n.depth:1;let f=n.bevelEnabled!==void 0?n.bevelEnabled:!0,d=n.bevelThickness!==void 0?n.bevelThickness:.2,v=n.bevelSize!==void 0?n.bevelSize:d-.1,x=n.bevelOffset!==void 0?n.bevelOffset:0,w=n.bevelSegments!==void 0?n.bevelSegments:3;const g=n.extrudePath,S=n.UVGenerator!==void 0?n.UVGenerator:sH;let _,T=!1,L,k,N,R;g&&(_=g.getSpacedPoints(c),T=!0,f=!1,L=g.computeFrenetFrames(c,!1),k=new ge,N=new ge,R=new ge),f||(w=0,d=0,v=0,x=0);const P=a.extractPoints(u);let D=P.shape;const O=P.holes;if(!au.isClockWise(D)){D=D.reverse();for(let he=0,De=O.length;he<De;he++){const ze=O[he];au.isClockWise(ze)&&(O[he]=ze.reverse())}}const V=au.triangulateShape(D,O),H=D;for(let he=0,De=O.length;he<De;he++){const ze=O[he];D=D.concat(ze)}function ee(he,De,ze){return De||console.error("THREE.ExtrudeGeometry: vec does not exist"),he.clone().addScaledVector(De,ze)}const se=D.length,ce=V.length;function W(he,De,ze){let pe,K,tt;const Ze=he.x-De.x,Ne=he.y-De.y,Ke=ze.x-he.x,ft=ze.y-he.y,vt=Ze*Ze+Ne*Ne,ue=Ze*ft-Ne*Ke;if(Math.abs(ue)>Number.EPSILON){const Q=Math.sqrt(vt),Pe=Math.sqrt(Ke*Ke+ft*ft),et=De.x-Ne/Q,Qe=De.y+Ze/Q,dt=ze.x-ft/Pe,lt=ze.y+Ke/Pe,it=((dt-et)*ft-(lt-Qe)*Ke)/(Ze*ft-Ne*Ke);pe=et+Ze*it-he.x,K=Qe+Ne*it-he.y;const Te=pe*pe+K*K;if(Te<=2)return new wt(pe,K);tt=Math.sqrt(Te/2)}else{let Q=!1;Ze>Number.EPSILON?Ke>Number.EPSILON&&(Q=!0):Ze<-Number.EPSILON?Ke<-Number.EPSILON&&(Q=!0):Math.sign(Ne)===Math.sign(ft)&&(Q=!0),Q?(pe=-Ne,K=Ze,tt=Math.sqrt(vt)):(pe=Ze,K=Ne,tt=Math.sqrt(vt/2))}return new wt(pe/tt,K/tt)}const Y=[];for(let he=0,De=H.length,ze=De-1,pe=he+1;he<De;he++,ze++,pe++)ze===De&&(ze=0),pe===De&&(pe=0),Y[he]=W(H[he],H[ze],H[pe]);const j=[];let re,I=Y.concat();for(let he=0,De=O.length;he<De;he++){const ze=O[he];re=[];for(let pe=0,K=ze.length,tt=K-1,Ze=pe+1;pe<K;pe++,tt++,Ze++)tt===K&&(tt=0),Ze===K&&(Ze=0),re[pe]=W(ze[pe],ze[tt],ze[Ze]);j.push(re),I=I.concat(re)}for(let he=0;he<w;he++){const De=he/w,ze=d*Math.cos(De*Math.PI/2),pe=v*Math.sin(De*Math.PI/2)+x;for(let K=0,tt=H.length;K<tt;K++){const Ze=ee(H[K],Y[K],pe);Se(Ze.x,Ze.y,-ze)}for(let K=0,tt=O.length;K<tt;K++){const Ze=O[K];re=j[K];for(let Ne=0,Ke=Ze.length;Ne<Ke;Ne++){const ft=ee(Ze[Ne],re[Ne],pe);Se(ft.x,ft.y,-ze)}}}const X=v+x;for(let he=0;he<se;he++){const De=f?ee(D[he],I[he],X):D[he];T?(N.copy(L.normals[0]).multiplyScalar(De.x),k.copy(L.binormals[0]).multiplyScalar(De.y),R.copy(_[0]).add(N).add(k),Se(R.x,R.y,R.z)):Se(De.x,De.y,0)}for(let he=1;he<=c;he++)for(let De=0;De<se;De++){const ze=f?ee(D[De],I[De],X):D[De];T?(N.copy(L.normals[he]).multiplyScalar(ze.x),k.copy(L.binormals[he]).multiplyScalar(ze.y),R.copy(_[he]).add(N).add(k),Se(R.x,R.y,R.z)):Se(ze.x,ze.y,h/c*he)}for(let he=w-1;he>=0;he--){const De=he/w,ze=d*Math.cos(De*Math.PI/2),pe=v*Math.sin(De*Math.PI/2)+x;for(let K=0,tt=H.length;K<tt;K++){const Ze=ee(H[K],Y[K],pe);Se(Ze.x,Ze.y,h+ze)}for(let K=0,tt=O.length;K<tt;K++){const Ze=O[K];re=j[K];for(let Ne=0,Ke=Ze.length;Ne<Ke;Ne++){const ft=ee(Ze[Ne],re[Ne],pe);T?Se(ft.x,ft.y+_[c-1].y,_[c-1].x+ze):Se(ft.x,ft.y,h+ze)}}}J(),ae();function J(){const he=i.length/3;if(f){let De=0,ze=se*De;for(let pe=0;pe<ce;pe++){const K=V[pe];Ee(K[2]+ze,K[1]+ze,K[0]+ze)}De=c+w*2,ze=se*De;for(let pe=0;pe<ce;pe++){const K=V[pe];Ee(K[0]+ze,K[1]+ze,K[2]+ze)}}else{for(let De=0;De<ce;De++){const ze=V[De];Ee(ze[2],ze[1],ze[0])}for(let De=0;De<ce;De++){const ze=V[De];Ee(ze[0]+se*c,ze[1]+se*c,ze[2]+se*c)}}r.addGroup(he,i.length/3-he,0)}function ae(){const he=i.length/3;let De=0;fe(H,De),De+=H.length;for(let ze=0,pe=O.length;ze<pe;ze++){const K=O[ze];fe(K,De),De+=K.length}r.addGroup(he,i.length/3-he,1)}function fe(he,De){let ze=he.length;for(;--ze>=0;){const pe=ze;let K=ze-1;K<0&&(K=he.length-1);for(let tt=0,Ze=c+w*2;tt<Ze;tt++){const Ne=se*tt,Ke=se*(tt+1),ft=De+pe+Ne,vt=De+K+Ne,ue=De+K+Ke,Q=De+pe+Ke;Ce(ft,vt,ue,Q)}}}function Se(he,De,ze){l.push(he),l.push(De),l.push(ze)}function Ee(he,De,ze){$e(he),$e(De),$e(ze);const pe=i.length/3,K=S.generateTopUV(r,i,pe-3,pe-2,pe-1);ke(K[0]),ke(K[1]),ke(K[2])}function Ce(he,De,ze,pe){$e(he),$e(De),$e(pe),$e(De),$e(ze),$e(pe);const K=i.length/3,tt=S.generateSideWallUV(r,i,K-6,K-3,K-2,K-1);ke(tt[0]),ke(tt[1]),ke(tt[3]),ke(tt[1]),ke(tt[2]),ke(tt[3])}function $e(he){i.push(l[he*3+0]),i.push(l[he*3+1]),i.push(l[he*3+2])}function ke(he){s.push(he.x),s.push(he.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes,r=this.parameters.options;return oH(n,r,e)}static fromJSON(e,n){const r=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=n[e.shapes[s]];r.push(a)}const i=e.options.extrudePath;return i!==void 0&&(e.options.extrudePath=new qM[i.type]().fromJSON(i)),new xx(r,e.options)}}const sH={generateTopUV:function(t,e,n,r,i){const s=e[n*3],o=e[n*3+1],a=e[r*3],l=e[r*3+1],u=e[i*3],c=e[i*3+1];return[new wt(s,o),new wt(a,l),new wt(u,c)]},generateSideWallUV:function(t,e,n,r,i,s){const o=e[n*3],a=e[n*3+1],l=e[n*3+2],u=e[r*3],c=e[r*3+1],h=e[r*3+2],f=e[i*3],d=e[i*3+1],v=e[i*3+2],x=e[s*3],w=e[s*3+1],g=e[s*3+2];return Math.abs(a-c)<Math.abs(o-u)?[new wt(o,1-l),new wt(u,1-h),new wt(f,1-v),new wt(x,1-g)]:[new wt(a,1-l),new wt(c,1-h),new wt(d,1-v),new wt(w,1-g)]}};function oH(t,e,n){if(n.shapes=[],Array.isArray(t))for(let r=0,i=t.length;r<i;r++){const s=t[r];n.shapes.push(s.uuid)}else n.shapes.push(t.uuid);return n.options=Object.assign({},e),e.extrudePath!==void 0&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class uv extends Vh{constructor(e=1,n=0){const r=(1+Math.sqrt(5))/2,i=[-1,r,0,1,r,0,-1,-r,0,1,-r,0,0,-1,r,0,1,r,0,-1,-r,0,1,-r,r,0,-1,r,0,1,-r,0,-1,-r,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,s,e,n),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new uv(e.radius,e.detail)}}class cv extends Vh{constructor(e=1,n=0){const r=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(r,i,e,n),this.type="OctahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new cv(e.radius,e.detail)}}class wx extends An{constructor(e=.5,n=1,r=32,i=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:n,thetaSegments:r,phiSegments:i,thetaStart:s,thetaLength:o},r=Math.max(3,r),i=Math.max(1,i);const a=[],l=[],u=[],c=[];let h=e;const f=(n-e)/i,d=new ge,v=new wt;for(let x=0;x<=i;x++){for(let w=0;w<=r;w++){const g=s+w/r*o;d.x=h*Math.cos(g),d.y=h*Math.sin(g),l.push(d.x,d.y,d.z),u.push(0,0,1),v.x=(d.x/n+1)/2,v.y=(d.y/n+1)/2,c.push(v.x,v.y)}h+=f}for(let x=0;x<i;x++){const w=x*(r+1);for(let g=0;g<r;g++){const S=g+w,_=S,T=S+r+1,L=S+r+2,k=S+1;a.push(_,T,k),a.push(T,L,k)}}this.setIndex(a),this.setAttribute("position",new nn(l,3)),this.setAttribute("normal",new nn(u,3)),this.setAttribute("uv",new nn(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wx(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Sx extends An{constructor(e=new qf([new wt(0,.5),new wt(-.5,-.5),new wt(.5,-.5)]),n=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:n};const r=[],i=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(r),this.setAttribute("position",new nn(i,3)),this.setAttribute("normal",new nn(s,3)),this.setAttribute("uv",new nn(o,2));function u(c){const h=i.length/3,f=c.extractPoints(n);let d=f.shape;const v=f.holes;au.isClockWise(d)===!1&&(d=d.reverse());for(let w=0,g=v.length;w<g;w++){const S=v[w];au.isClockWise(S)===!0&&(v[w]=S.reverse())}const x=au.triangulateShape(d,v);for(let w=0,g=v.length;w<g;w++){const S=v[w];d=d.concat(S)}for(let w=0,g=d.length;w<g;w++){const S=d[w];i.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let w=0,g=x.length;w<g;w++){const S=x[w],_=S[0]+h,T=S[1]+h,L=S[2]+h;r.push(_,T,L),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),n=this.parameters.shapes;return aH(n,e)}static fromJSON(e,n){const r=[];for(let i=0,s=e.shapes.length;i<s;i++){const o=n[e.shapes[i]];r.push(o)}return new Sx(r,e.curveSegments)}}function aH(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,r=t.length;n<r;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class hv extends An{constructor(e=1,n=32,r=16,i=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:n,heightSegments:r,phiStart:i,phiLength:s,thetaStart:o,thetaLength:a},n=Math.max(3,Math.floor(n)),r=Math.max(2,Math.floor(r));const l=Math.min(o+a,Math.PI);let u=0;const c=[],h=new ge,f=new ge,d=[],v=[],x=[],w=[];for(let g=0;g<=r;g++){const S=[],_=g/r;let T=0;g===0&&o===0?T=.5/n:g===r&&l===Math.PI&&(T=-.5/n);for(let L=0;L<=n;L++){const k=L/n;h.x=-e*Math.cos(i+k*s)*Math.sin(o+_*a),h.y=e*Math.cos(o+_*a),h.z=e*Math.sin(i+k*s)*Math.sin(o+_*a),v.push(h.x,h.y,h.z),f.copy(h).normalize(),x.push(f.x,f.y,f.z),w.push(k+T,1-_),S.push(u++)}c.push(S)}for(let g=0;g<r;g++)for(let S=0;S<n;S++){const _=c[g][S+1],T=c[g][S],L=c[g+1][S],k=c[g+1][S+1];(g!==0||o>0)&&d.push(_,T,k),(g!==r-1||l<Math.PI)&&d.push(T,L,k)}this.setIndex(d),this.setAttribute("position",new nn(v,3)),this.setAttribute("normal",new nn(x,3)),this.setAttribute("uv",new nn(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new hv(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class _x extends Vh{constructor(e=1,n=0){const r=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(r,i,e,n),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:n}}static fromJSON(e){return new _x(e.radius,e.detail)}}class bx extends An{constructor(e=1,n=.4,r=12,i=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:n,radialSegments:r,tubularSegments:i,arc:s},r=Math.floor(r),i=Math.floor(i);const o=[],a=[],l=[],u=[],c=new ge,h=new ge,f=new ge;for(let d=0;d<=r;d++)for(let v=0;v<=i;v++){const x=v/i*s,w=d/r*Math.PI*2;h.x=(e+n*Math.cos(w))*Math.cos(x),h.y=(e+n*Math.cos(w))*Math.sin(x),h.z=n*Math.sin(w),a.push(h.x,h.y,h.z),c.x=e*Math.cos(x),c.y=e*Math.sin(x),f.subVectors(h,c).normalize(),l.push(f.x,f.y,f.z),u.push(v/i),u.push(d/r)}for(let d=1;d<=r;d++)for(let v=1;v<=i;v++){const x=(i+1)*d+v-1,w=(i+1)*(d-1)+v-1,g=(i+1)*(d-1)+v,S=(i+1)*d+v;o.push(x,w,S),o.push(w,g,S)}this.setIndex(o),this.setAttribute("position",new nn(a,3)),this.setAttribute("normal",new nn(l,3)),this.setAttribute("uv",new nn(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bx(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Mx extends An{constructor(e=1,n=.4,r=64,i=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:n,tubularSegments:r,radialSegments:i,p:s,q:o},r=Math.floor(r),i=Math.floor(i);const a=[],l=[],u=[],c=[],h=new ge,f=new ge,d=new ge,v=new ge,x=new ge,w=new ge,g=new ge;for(let _=0;_<=r;++_){const T=_/r*s*Math.PI*2;S(T,s,o,e,d),S(T+.01,s,o,e,v),w.subVectors(v,d),g.addVectors(v,d),x.crossVectors(w,g),g.crossVectors(x,w),x.normalize(),g.normalize();for(let L=0;L<=i;++L){const k=L/i*Math.PI*2,N=-n*Math.cos(k),R=n*Math.sin(k);h.x=d.x+(N*g.x+R*x.x),h.y=d.y+(N*g.y+R*x.y),h.z=d.z+(N*g.z+R*x.z),l.push(h.x,h.y,h.z),f.subVectors(h,d).normalize(),u.push(f.x,f.y,f.z),c.push(_/r),c.push(L/i)}}for(let _=1;_<=r;_++)for(let T=1;T<=i;T++){const L=(i+1)*(_-1)+(T-1),k=(i+1)*_+(T-1),N=(i+1)*_+T,R=(i+1)*(_-1)+T;a.push(L,k,R),a.push(k,N,R)}this.setIndex(a),this.setAttribute("position",new nn(l,3)),this.setAttribute("normal",new nn(u,3)),this.setAttribute("uv",new nn(c,2));function S(_,T,L,k,N){const R=Math.cos(_),P=Math.sin(_),D=L/T*_,O=Math.cos(D);N.x=k*(2+O)*.5*R,N.y=k*(2+O)*P*.5,N.z=k*Math.sin(D)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mx(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Ex extends An{constructor(e=new jM(new ge(-1,-1,0),new ge(-1,1,0),new ge(1,1,0)),n=64,r=1,i=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:n,radius:r,radialSegments:i,closed:s};const o=e.computeFrenetFrames(n,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new ge,l=new ge,u=new wt;let c=new ge;const h=[],f=[],d=[],v=[];x(),this.setIndex(v),this.setAttribute("position",new nn(h,3)),this.setAttribute("normal",new nn(f,3)),this.setAttribute("uv",new nn(d,2));function x(){for(let _=0;_<n;_++)w(_);w(s===!1?n:0),S(),g()}function w(_){c=e.getPointAt(_/n,c);const T=o.normals[_],L=o.binormals[_];for(let k=0;k<=i;k++){const N=k/i*Math.PI*2,R=Math.sin(N),P=-Math.cos(N);l.x=P*T.x+R*L.x,l.y=P*T.y+R*L.y,l.z=P*T.z+R*L.z,l.normalize(),f.push(l.x,l.y,l.z),a.x=c.x+r*l.x,a.y=c.y+r*l.y,a.z=c.z+r*l.z,h.push(a.x,a.y,a.z)}}function g(){for(let _=1;_<=n;_++)for(let T=1;T<=i;T++){const L=(i+1)*(_-1)+(T-1),k=(i+1)*_+(T-1),N=(i+1)*_+T,R=(i+1)*(_-1)+T;v.push(L,k,R),v.push(k,N,R)}}function S(){for(let _=0;_<=n;_++)for(let T=0;T<=i;T++)u.x=_/n,u.y=T/i,d.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Ex(new qM[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class xk extends An{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const n=[],r=new Set,i=new ge,s=new ge;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const h=l[u],f=h.start,d=h.count;for(let v=f,x=f+d;v<x;v+=3)for(let w=0;w<3;w++){const g=a.getX(v+w),S=a.getX(v+(w+1)%3);i.fromBufferAttribute(o,g),s.fromBufferAttribute(o,S),iT(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,h=3*a+(u+1)%3;i.fromBufferAttribute(o,c),s.fromBufferAttribute(o,h),iT(i,s,r)===!0&&(n.push(i.x,i.y,i.z),n.push(s.x,s.y,s.z))}}this.setAttribute("position",new nn(n,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function iT(t,e,n){const r=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`,i=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`;return n.has(r)===!0||n.has(i)===!0?!1:(n.add(r),n.add(i),!0)}var sT=Object.freeze({__proto__:null,BoxGeometry:fd,CapsuleGeometry:px,CircleGeometry:mx,ConeGeometry:gx,CylinderGeometry:Tm,DodecahedronGeometry:vx,EdgesGeometry:YM,ExtrudeGeometry:xx,IcosahedronGeometry:uv,LatheGeometry:lv,OctahedronGeometry:cv,PlaneGeometry:ov,PolyhedronGeometry:Vh,RingGeometry:wx,ShapeGeometry:Sx,SphereGeometry:hv,TetrahedronGeometry:_x,TorusGeometry:bx,TorusKnotGeometry:Mx,TubeGeometry:Ex,WireframeGeometry:xk});class wk extends Fs{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Zt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Sk extends Al{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class fv extends Fs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Zt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hh,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _k extends fv{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new wt(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ti(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(n){this.ior=(1+.4*n)/(1-.4*n)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Zt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Zt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Zt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class bk extends Fs{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Zt(16777215),this.specular=new Zt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hh,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=nv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Mk extends Fs{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Zt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hh,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class Ek extends Fs{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hh,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class Ak extends Fs{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Zt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Zt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hh,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=nv,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Tk extends Fs{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Zt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Hh,this.normalScale=new wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Ck extends Ds{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Da(t,e,n){return ZM(t)?new t.constructor(t.subarray(e,n!==void 0?n:t.length)):t.slice(e,n)}function Bf(t,e,n){return!t||!n&&t.constructor===e?t:typeof e.BYTES_PER_ELEMENT=="number"?new e(t):Array.prototype.slice.call(t)}function ZM(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Lk(t){function e(i,s){return t[i]-t[s]}const n=t.length,r=new Array(n);for(let i=0;i!==n;++i)r[i]=i;return r.sort(e),r}function Ob(t,e,n){const r=t.length,i=new t.constructor(r);for(let s=0,o=0;o!==r;++s){const a=n[s]*e;for(let l=0;l!==e;++l)i[o++]=t[a+l]}return i}function $M(t,e,n,r){let i=1,s=t[0];for(;s!==void 0&&s[r]===void 0;)s=t[i++];if(s===void 0)return;let o=s[r];if(o!==void 0)if(Array.isArray(o))do o=s[r],o!==void 0&&(e.push(s.time),n.push.apply(n,o)),s=t[i++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[r],o!==void 0&&(e.push(s.time),o.toArray(n,n.length)),s=t[i++];while(s!==void 0);else do o=s[r],o!==void 0&&(e.push(s.time),n.push(o)),s=t[i++];while(s!==void 0)}function lH(t,e,n,r,i=30){const s=t.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),h=[],f=[];for(let d=0;d<u.times.length;++d){const v=u.times[d]*i;if(!(v<n||v>=r)){h.push(u.times[d]);for(let x=0;x<c;++x)f.push(u.values[d*c+x])}}h.length!==0&&(u.times=Bf(h,u.times.constructor),u.values=Bf(f,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function uH(t,e=0,n=t,r=30){r<=0&&(r=30);const i=n.tracks.length,s=e/r;for(let o=0;o<i;++o){const a=n.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=t.tracks.find(function(g){return g.name===a.name&&g.ValueTypeName===l});if(u===void 0)continue;let c=0;const h=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=h/3);let f=0;const d=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=d/3);const v=a.times.length-1;let x;if(s<=a.times[0]){const g=c,S=h-c;x=Da(a.values,g,S)}else if(s>=a.times[v]){const g=v*h+c,S=g+h-c;x=Da(a.values,g,S)}else{const g=a.createInterpolant(),S=c,_=h-c;g.evaluate(s),x=Da(g.resultBuffer,S,_)}l==="quaternion"&&new io().fromArray(x).normalize().conjugate().toArray(x);const w=u.times.length;for(let g=0;g<w;++g){const S=g*d+f;if(l==="quaternion")io.multiplyQuaternionsFlat(u.values,S,x,0,u.values,S);else{const _=d-f*2;for(let T=0;T<_;++T)u.values[S+T]-=x[T]}}}return t.blendMode=TM,t}const cH={arraySlice:Da,convertArray:Bf,isTypedArray:ZM,getKeyframeOrder:Lk,sortedArray:Ob,flattenJSON:$M,subclip:lH,makeClipAdditive:uH};class dv{constructor(e,n,r,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=i!==void 0?i:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}evaluate(e){const n=this.parameterPositions;let r=this._cachedIndex,i=n[r],s=n[r-1];e:{t:{let o;n:{i:if(!(e<i)){for(let a=r+2;;){if(i===void 0){if(e<s)break i;return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}if(r===a)break;if(s=i,i=n[++r],e<i)break t}o=n.length;break n}if(!(e>=s)){const a=n[1];e<a&&(r=2,s=a);for(let l=r-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===l)break;if(i=s,s=n[--r-1],e>=s)break t}o=r,r=0;break n}break e}for(;r<o;){const a=r+o>>>1;e<n[a]?o=a:r=a+1}if(i=n[r],s=n[r-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===void 0)return r=n.length,this._cachedIndex=r,this.copySampleValue_(r-1)}this._cachedIndex=r,this.intervalChanged_(r,s,i)}return this.interpolate_(r,s,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const n=this.resultBuffer,r=this.sampleValues,i=this.valueSize,s=e*i;for(let o=0;o!==i;++o)n[o]=r[s+o];return n}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Pk extends dv{constructor(e,n,r,i){super(e,n,r,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ff,endingEnd:Ff}}intervalChanged_(e,n,r){const i=this.parameterPositions;let s=e-2,o=e+1,a=i[s],l=i[o];if(a===void 0)switch(this.getSettings_().endingStart){case Df:s=e,a=2*n-r;break;case C0:s=i.length-2,a=n+i[s]-i[s+1];break;default:s=e,a=r}if(l===void 0)switch(this.getSettings_().endingEnd){case Df:o=e,l=2*r-n;break;case C0:o=1,l=r+i[1]-i[0];break;default:o=e-1,l=n}const u=(r-n)*.5,c=this.valueSize;this._weightPrev=u/(n-a),this._weightNext=u/(l-r),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,h=this._offsetNext,f=this._weightPrev,d=this._weightNext,v=(r-n)/(i-n),x=v*v,w=x*v,g=-f*w+2*f*x-f*v,S=(1+f)*w+(-1.5-2*f)*x+(-.5+f)*v+1,_=(-1-d)*w+(1.5+d)*x+.5*v,T=d*w-d*x;for(let L=0;L!==a;++L)s[L]=g*o[c+L]+S*o[u+L]+_*o[l+L]+T*o[h+L];return s}}class KM extends dv{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(r-n)/(i-n),h=1-c;for(let f=0;f!==a;++f)s[f]=o[u+f]*h+o[l+f]*c;return s}}class Rk extends dv{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class kl{constructor(e,n,r,i){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(n===void 0||n.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Bf(n,this.TimeBufferType),this.values=Bf(r,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const n=e.constructor;let r;if(n.toJSON!==this.toJSON)r=n.toJSON(e);else{r={name:e.name,times:Bf(e.times,Array),values:Bf(e.values,Array)};const i=e.getInterpolation();i!==e.DefaultInterpolation&&(r.interpolation=i)}return r.type=e.ValueTypeName,r}InterpolantFactoryMethodDiscrete(e){return new Rk(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new KM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Pk(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let n;switch(e){case A0:n=this.InterpolantFactoryMethodDiscrete;break;case T0:n=this.InterpolantFactoryMethodLinear;break;case Ny:n=this.InterpolantFactoryMethodSmooth;break}if(n===void 0){const r="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(r);return console.warn("THREE.KeyframeTrack:",r),this}return this.createInterpolant=n,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return A0;case this.InterpolantFactoryMethodLinear:return T0;case this.InterpolantFactoryMethodSmooth:return Ny}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]+=e}return this}scale(e){if(e!==1){const n=this.times;for(let r=0,i=n.length;r!==i;++r)n[r]*=e}return this}trim(e,n){const r=this.times,i=r.length;let s=0,o=i-1;for(;s!==i&&r[s]<e;)++s;for(;o!==-1&&r[o]>n;)--o;if(++o,s!==0||o!==i){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=Da(r,s,o),this.values=Da(this.values,s*a,o*a)}return this}validate(){let e=!0;const n=this.getValueSize();n-Math.floor(n)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const r=this.times,i=this.values,s=r.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=r[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(i!==void 0&&ZM(i))for(let a=0,l=i.length;a!==l;++a){const u=i[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=Da(this.times),n=Da(this.values),r=this.getValueSize(),i=this.getInterpolation()===Ny,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(i)l=!0;else{const h=a*r,f=h-r,d=h+r;for(let v=0;v!==r;++v){const x=n[h+v];if(x!==n[f+v]||x!==n[d+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const h=a*r,f=o*r;for(let d=0;d!==r;++d)n[f+d]=n[h+d]}++o}}if(s>0){e[o]=e[s];for(let a=s*r,l=o*r,u=0;u!==r;++u)n[l+u]=n[a+u];++o}return o!==e.length?(this.times=Da(e,0,o),this.values=Da(n,0,o*r)):(this.times=e,this.values=n),this}clone(){const e=Da(this.times,0),n=Da(this.values,0),r=this.constructor,i=new r(this.name,e,n);return i.createInterpolant=this.createInterpolant,i}}kl.prototype.TimeBufferType=Float32Array;kl.prototype.ValueBufferType=Float32Array;kl.prototype.DefaultInterpolation=T0;class dd extends kl{}dd.prototype.ValueTypeName="bool";dd.prototype.ValueBufferType=Array;dd.prototype.DefaultInterpolation=A0;dd.prototype.InterpolantFactoryMethodLinear=void 0;dd.prototype.InterpolantFactoryMethodSmooth=void 0;class JM extends kl{}JM.prototype.ValueTypeName="color";class D0 extends kl{}D0.prototype.ValueTypeName="number";class kk extends dv{constructor(e,n,r,i){super(e,n,r,i)}interpolate_(e,n,r,i){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(r-n)/(i-n);let u=e*a;for(let c=u+a;u!==c;u+=4)io.slerpFlat(s,0,o,u-a,o,u,l);return s}}class Cm extends kl{InterpolantFactoryMethodLinear(e){return new kk(this.times,this.values,this.getValueSize(),e)}}Cm.prototype.ValueTypeName="quaternion";Cm.prototype.DefaultInterpolation=T0;Cm.prototype.InterpolantFactoryMethodSmooth=void 0;class pd extends kl{}pd.prototype.ValueTypeName="string";pd.prototype.ValueBufferType=Array;pd.prototype.DefaultInterpolation=A0;pd.prototype.InterpolantFactoryMethodLinear=void 0;pd.prototype.InterpolantFactoryMethodSmooth=void 0;class O0 extends kl{}O0.prototype.ValueTypeName="vector";class U0{constructor(e,n=-1,r,i=rx){this.name=e,this.tracks=r,this.duration=n,this.blendMode=i,this.uuid=aa(),this.duration<0&&this.resetDuration()}static parse(e){const n=[],r=e.tracks,i=1/(e.fps||1);for(let o=0,a=r.length;o!==a;++o)n.push(fH(r[o]).scale(i));const s=new this(e.name,e.duration,n,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const n=[],r=e.tracks,i={name:e.name,duration:e.duration,tracks:n,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=r.length;s!==o;++s)n.push(kl.toJSON(r[s]));return i}static CreateFromMorphTargetSequence(e,n,r,i){const s=n.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const c=Lk(l);l=Ob(l,1,c),u=Ob(u,1,c),!i&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new D0(".morphTargetInfluences["+n[a].name+"]",l,u).scale(1/r))}return new this(e,-1,o)}static findByName(e,n){let r=e;if(!Array.isArray(e)){const i=e;r=i.geometry&&i.geometry.animations||i.animations}for(let i=0;i<r.length;i++)if(r[i].name===n)return r[i];return null}static CreateClipsFromMorphTargetSequences(e,n,r){const i={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(s);if(c&&c.length>1){const h=c[1];let f=i[h];f||(i[h]=f=[]),f.push(u)}}const o=[];for(const a in i)o.push(this.CreateFromMorphTargetSequence(a,i[a],n,r));return o}static parseAnimation(e,n){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const r=function(h,f,d,v,x){if(d.length!==0){const w=[],g=[];$M(d,w,g,v),w.length!==0&&x.push(new h(f,w,g))}},i=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let h=0;h<u.length;h++){const f=u[h].keys;if(!(!f||f.length===0))if(f[0].morphTargets){const d={};let v;for(v=0;v<f.length;v++)if(f[v].morphTargets)for(let x=0;x<f[v].morphTargets.length;x++)d[f[v].morphTargets[x]]=-1;for(const x in d){const w=[],g=[];for(let S=0;S!==f[v].morphTargets.length;++S){const _=f[v];w.push(_.time),g.push(_.morphTarget===x?1:0)}i.push(new D0(".morphTargetInfluence["+x+"]",w,g))}l=d.length*o}else{const d=".bones["+n[h].name+"]";r(O0,d+".position",f,"pos",i),r(Cm,d+".quaternion",f,"rot",i),r(O0,d+".scale",f,"scl",i)}}return i.length===0?null:new this(s,l,i,a)}resetDuration(){const e=this.tracks;let n=0;for(let r=0,i=e.length;r!==i;++r){const s=this.tracks[r];n=Math.max(n,s.times[s.times.length-1])}return this.duration=n,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let n=0;n<this.tracks.length;n++)e=e&&this.tracks[n].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let n=0;n<this.tracks.length;n++)e.push(this.tracks[n].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function hH(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return D0;case"vector":case"vector2":case"vector3":case"vector4":return O0;case"color":return JM;case"quaternion":return Cm;case"bool":case"boolean":return dd;case"string":return pd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function fH(t){if(t.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=hH(t.type);if(t.times===void 0){const n=[],r=[];$M(t.keys,n,r,"value"),t.times=n,t.values=r}return e.parse!==void 0?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}const id={enabled:!1,files:{},add:function(t,e){this.enabled!==!1&&(this.files[t]=e)},get:function(t){if(this.enabled!==!1)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class QM{constructor(e,n,r){const i=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(c){a++,s===!1&&i.onStart!==void 0&&i.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,i.onProgress!==void 0&&i.onProgress(c,o,a),o===a&&(s=!1,i.onLoad!==void 0&&i.onLoad())},this.itemError=function(c){i.onError!==void 0&&i.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,h){return u.push(c,h),this},this.removeHandler=function(c){const h=u.indexOf(c);return h!==-1&&u.splice(h,2),this},this.getHandler=function(c){for(let h=0,f=u.length;h<f;h+=2){const d=u[h],v=u[h+1];if(d.global&&(d.lastIndex=0),d.test(c))return v}return null}}}const Ik=new QM;class zo{constructor(e){this.manager=e!==void 0?e:Ik,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,n){const r=this;return new Promise(function(i,s){r.load(e,i,n,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}zo.DEFAULT_MATERIAL_NAME="__DEFAULT";const Uu={};class dH extends Error{constructor(e,n){super(e),this.response=n}}class lc extends zo{constructor(e){super(e)}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=id.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{n&&n(s),this.manager.itemEnd(e)},0),s;if(Uu[e]!==void 0){Uu[e].push({onLoad:n,onProgress:r,onError:i});return}Uu[e]=[],Uu[e].push({onLoad:n,onProgress:r,onError:i});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=Uu[e],h=u.body.getReader(),f=u.headers.get("Content-Length")||u.headers.get("X-File-Size"),d=f?parseInt(f):0,v=d!==0;let x=0;const w=new ReadableStream({start(g){S();function S(){h.read().then(({done:_,value:T})=>{if(_)g.close();else{x+=T.byteLength;const L=new ProgressEvent("progress",{lengthComputable:v,loaded:x,total:d});for(let k=0,N=c.length;k<N;k++){const R=c[k];R.onProgress&&R.onProgress(L)}g.enqueue(T),S()}})}}});return new Response(w)}else throw new dH(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a===void 0)return u.text();{const h=/charset="?([^;"\s]*)"?/i.exec(a),f=h&&h[1]?h[1].toLowerCase():void 0,d=new TextDecoder(f);return u.arrayBuffer().then(v=>d.decode(v))}}}).then(u=>{id.add(e,u);const c=Uu[e];delete Uu[e];for(let h=0,f=c.length;h<f;h++){const d=c[h];d.onLoad&&d.onLoad(u)}}).catch(u=>{const c=Uu[e];if(c===void 0)throw this.manager.itemError(e),u;delete Uu[e];for(let h=0,f=c.length;h<f;h++){const d=c[h];d.onError&&d.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class pH extends zo{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new lc(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=[];for(let r=0;r<e.length;r++){const i=U0.parse(e[r]);n.push(i)}return n}}class mH extends zo{constructor(e){super(e)}load(e,n,r,i){const s=this,o=[],a=new hx,l=new lc(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(h){l.load(e[h],function(f){const d=s.parse(f,!0);o[h]={width:d.width,height:d.height,format:d.format,mipmaps:d.mipmaps},u+=1,u===6&&(d.mipmapCount===1&&(a.minFilter=Kr),a.image=o,a.format=d.format,a.needsUpdate=!0,n&&n(a))},r,i)}if(Array.isArray(e))for(let h=0,f=e.length;h<f;++h)c(h);else l.load(e,function(h){const f=s.parse(h,!0);if(f.isCubemap){const d=f.mipmaps.length/f.mipmapCount;for(let v=0;v<d;v++){o[v]={mipmaps:[]};for(let x=0;x<f.mipmapCount;x++)o[v].mipmaps.push(f.mipmaps[v*f.mipmapCount+x]),o[v].format=f.format,o[v].width=f.width,o[v].height=f.height}a.image=o}else a.image.width=f.width,a.image.height=f.height,a.mipmaps=f.mipmaps;f.mipmapCount===1&&(a.minFilter=Kr),a.format=f.format,a.needsUpdate=!0,n&&n(a)},r,i);return a}}class B0 extends zo{constructor(e){super(e)}load(e,n,r,i){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=id.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a=R0("img");function l(){c(),id.add(e,this),n&&n(this),s.manager.itemEnd(e)}function u(h){c(),i&&i(h),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class Nk extends zo{constructor(e){super(e)}load(e,n,r,i){const s=new sv;s.colorSpace=Gn;const o=new B0(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(c){s.images[u]=c,a++,a===6&&(s.needsUpdate=!0,n&&n(s))},void 0,i)}for(let u=0;u<e.length;++u)l(u);return s}}class e3 extends zo{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new qp,a=new lc(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(c){if(i!==void 0)i(c);else{console.error(c);return}}if(!u)return i();u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:to,o.wrapT=u.wrapT!==void 0?u.wrapT:to,o.magFilter=u.magFilter!==void 0?u.magFilter:Kr,o.minFilter=u.minFilter!==void 0?u.minFilter:Kr,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0?o.colorSpace=u.colorSpace:u.encoding!==void 0&&(o.encoding=u.encoding),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Rh),u.mipmapCount===1&&(o.minFilter=Kr),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,n&&n(o,u)},r,i),o}}class gH extends zo{constructor(e){super(e)}load(e,n,r,i){const s=new Ci,o=new B0(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,n!==void 0&&n(s)},r,i),s}}class Wh extends dr{constructor(e,n=1){super(),this.isLight=!0,this.type="Light",this.color=new Zt(e),this.intensity=n}dispose(){}copy(e,n){return super.copy(e,n),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const n=super.toJSON(e);return n.object.color=this.color.getHex(),n.object.intensity=this.intensity,this.groundColor!==void 0&&(n.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(n.object.distance=this.distance),this.angle!==void 0&&(n.object.angle=this.angle),this.decay!==void 0&&(n.object.decay=this.decay),this.penumbra!==void 0&&(n.object.penumbra=this.penumbra),this.shadow!==void 0&&(n.object.shadow=this.shadow.toJSON()),n}}class Ax extends Wh{constructor(e,n,r){super(e,r),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(dr.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Zt(n)}copy(e,n){return super.copy(e,n),this.groundColor.copy(e.groundColor),this}}const oS=new Hn,oT=new ge,aT=new ge;class t3{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new wt(512,512),this.map=null,this.mapPass=null,this.matrix=new Hn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new sx,this._frameExtents=new wt(1,1),this._viewportCount=1,this._viewports=[new Lr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const n=this.camera,r=this.matrix;oT.setFromMatrixPosition(e.matrixWorld),n.position.copy(oT),aT.setFromMatrixPosition(e.target.matrixWorld),n.lookAt(aT),n.updateMatrixWorld(),oS.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(oS),r.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),r.multiply(oS)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class vH extends t3{constructor(){super(new mi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const n=this.camera,r=hm*2*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,s=e.distance||n.far;(r!==n.fov||i!==n.aspect||s!==n.far)&&(n.fov=r,n.aspect=i,n.far=s,n.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Fk extends Wh{constructor(e,n,r=0,i=Math.PI/3,s=0,o=2){super(e,n),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(dr.DEFAULT_UP),this.updateMatrix(),this.target=new dr,this.distance=r,this.angle=i,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new vH}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const lT=new Hn,yg=new ge,aS=new ge;class yH extends t3{constructor(){super(new mi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new wt(4,2),this._viewportCount=6,this._viewports=[new Lr(2,1,1,1),new Lr(0,1,1,1),new Lr(3,1,1,1),new Lr(1,1,1,1),new Lr(3,0,1,1),new Lr(1,0,1,1)],this._cubeDirections=[new ge(1,0,0),new ge(-1,0,0),new ge(0,0,1),new ge(0,0,-1),new ge(0,1,0),new ge(0,-1,0)],this._cubeUps=[new ge(0,1,0),new ge(0,1,0),new ge(0,1,0),new ge(0,1,0),new ge(0,0,1),new ge(0,0,-1)]}updateMatrices(e,n=0){const r=this.camera,i=this.matrix,s=e.distance||r.far;s!==r.far&&(r.far=s,r.updateProjectionMatrix()),yg.setFromMatrixPosition(e.matrixWorld),r.position.copy(yg),aS.copy(r.position),aS.add(this._cubeDirections[n]),r.up.copy(this._cubeUps[n]),r.lookAt(aS),r.updateMatrixWorld(),i.makeTranslation(-yg.x,-yg.y,-yg.z),lT.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),this._frustum.setFromProjectionMatrix(lT)}}class Dk extends Wh{constructor(e,n,r=0,i=2){super(e,n),this.isPointLight=!0,this.type="PointLight",this.distance=r,this.decay=i,this.shadow=new yH}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,n){return super.copy(e,n),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class xH extends t3{constructor(){super(new ou(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class pm extends Wh{constructor(e,n){super(e,n),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(dr.DEFAULT_UP),this.updateMatrix(),this.target=new dr,this.shadow=new xH}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Tx extends Wh{constructor(e,n){super(e,n),this.isAmbientLight=!0,this.type="AmbientLight"}}class Ok extends Wh{constructor(e,n,r=10,i=10){super(e,n),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=r,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const n=super.toJSON(e);return n.object.width=this.width,n.object.height=this.height,n}}class Uk{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new ge)}set(e){for(let n=0;n<9;n++)this.coefficients[n].copy(e[n]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.282095),n.addScaledVector(o[1],.488603*i),n.addScaledVector(o[2],.488603*s),n.addScaledVector(o[3],.488603*r),n.addScaledVector(o[4],1.092548*(r*i)),n.addScaledVector(o[5],1.092548*(i*s)),n.addScaledVector(o[6],.315392*(3*s*s-1)),n.addScaledVector(o[7],1.092548*(r*s)),n.addScaledVector(o[8],.546274*(r*r-i*i)),n}getIrradianceAt(e,n){const r=e.x,i=e.y,s=e.z,o=this.coefficients;return n.copy(o[0]).multiplyScalar(.886227),n.addScaledVector(o[1],2*.511664*i),n.addScaledVector(o[2],2*.511664*s),n.addScaledVector(o[3],2*.511664*r),n.addScaledVector(o[4],2*.429043*r*i),n.addScaledVector(o[5],2*.429043*i*s),n.addScaledVector(o[6],.743125*s*s-.247708),n.addScaledVector(o[7],2*.429043*r*s),n.addScaledVector(o[8],.429043*(r*r-i*i)),n}add(e){for(let n=0;n<9;n++)this.coefficients[n].add(e.coefficients[n]);return this}addScaledSH(e,n){for(let r=0;r<9;r++)this.coefficients[r].addScaledVector(e.coefficients[r],n);return this}scale(e){for(let n=0;n<9;n++)this.coefficients[n].multiplyScalar(e);return this}lerp(e,n){for(let r=0;r<9;r++)this.coefficients[r].lerp(e.coefficients[r],n);return this}equals(e){for(let n=0;n<9;n++)if(!this.coefficients[n].equals(e.coefficients[n]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].fromArray(e,n+i*3);return this}toArray(e=[],n=0){const r=this.coefficients;for(let i=0;i<9;i++)r[i].toArray(e,n+i*3);return e}static getBasisAt(e,n){const r=e.x,i=e.y,s=e.z;n[0]=.282095,n[1]=.488603*i,n[2]=.488603*s,n[3]=.488603*r,n[4]=1.092548*r*i,n[5]=1.092548*i*s,n[6]=.315392*(3*s*s-1),n[7]=1.092548*r*s,n[8]=.546274*(r*r-i*i)}}class Cx extends Wh{constructor(e=new Uk,n=1){super(void 0,n),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const n=super.toJSON(e);return n.object.sh=this.sh.toArray(),n}}class Lx extends zo{constructor(e){super(e),this.textures={}}load(e,n,r,i){const s=this,o=new lc(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n=this.textures;function r(s){return n[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),n[s]}const i=Lx.createMaterialFromType(e.type);if(e.uuid!==void 0&&(i.uuid=e.uuid),e.name!==void 0&&(i.name=e.name),e.color!==void 0&&i.color!==void 0&&i.color.setHex(e.color),e.roughness!==void 0&&(i.roughness=e.roughness),e.metalness!==void 0&&(i.metalness=e.metalness),e.sheen!==void 0&&(i.sheen=e.sheen),e.sheenColor!==void 0&&(i.sheenColor=new Zt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(i.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&i.emissive!==void 0&&i.emissive.setHex(e.emissive),e.specular!==void 0&&i.specular!==void 0&&i.specular.setHex(e.specular),e.specularIntensity!==void 0&&(i.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&i.specularColor!==void 0&&i.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(i.shininess=e.shininess),e.clearcoat!==void 0&&(i.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(i.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(i.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(i.transmission=e.transmission),e.thickness!==void 0&&(i.thickness=e.thickness),e.attenuationDistance!==void 0&&(i.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&i.attenuationColor!==void 0&&i.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(i.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(i.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(i.fog=e.fog),e.flatShading!==void 0&&(i.flatShading=e.flatShading),e.blending!==void 0&&(i.blending=e.blending),e.combine!==void 0&&(i.combine=e.combine),e.side!==void 0&&(i.side=e.side),e.shadowSide!==void 0&&(i.shadowSide=e.shadowSide),e.opacity!==void 0&&(i.opacity=e.opacity),e.transparent!==void 0&&(i.transparent=e.transparent),e.alphaTest!==void 0&&(i.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(i.alphaHash=e.alphaHash),e.depthTest!==void 0&&(i.depthTest=e.depthTest),e.depthWrite!==void 0&&(i.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(i.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(i.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(i.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(i.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(i.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(i.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(i.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(i.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(i.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(i.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(i.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(i.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(i.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(i.rotation=e.rotation),e.linewidth!==1&&(i.linewidth=e.linewidth),e.dashSize!==void 0&&(i.dashSize=e.dashSize),e.gapSize!==void 0&&(i.gapSize=e.gapSize),e.scale!==void 0&&(i.scale=e.scale),e.polygonOffset!==void 0&&(i.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(i.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(i.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(i.dithering=e.dithering),e.alphaToCoverage!==void 0&&(i.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(i.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(i.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(i.visible=e.visible),e.toneMapped!==void 0&&(i.toneMapped=e.toneMapped),e.userData!==void 0&&(i.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(i.uniforms[s]={},o.type){case"t":i.uniforms[s].value=r(o.value);break;case"c":i.uniforms[s].value=new Zt().setHex(o.value);break;case"v2":i.uniforms[s].value=new wt().fromArray(o.value);break;case"v3":i.uniforms[s].value=new ge().fromArray(o.value);break;case"v4":i.uniforms[s].value=new Lr().fromArray(o.value);break;case"m3":i.uniforms[s].value=new Jn().fromArray(o.value);break;case"m4":i.uniforms[s].value=new Hn().fromArray(o.value);break;default:i.uniforms[s].value=o.value}}if(e.defines!==void 0&&(i.defines=e.defines),e.vertexShader!==void 0&&(i.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(i.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(i.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)i.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(i.lights=e.lights),e.clipping!==void 0&&(i.clipping=e.clipping),e.size!==void 0&&(i.size=e.size),e.sizeAttenuation!==void 0&&(i.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(i.map=r(e.map)),e.matcap!==void 0&&(i.matcap=r(e.matcap)),e.alphaMap!==void 0&&(i.alphaMap=r(e.alphaMap)),e.bumpMap!==void 0&&(i.bumpMap=r(e.bumpMap)),e.bumpScale!==void 0&&(i.bumpScale=e.bumpScale),e.normalMap!==void 0&&(i.normalMap=r(e.normalMap)),e.normalMapType!==void 0&&(i.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),i.normalScale=new wt().fromArray(s)}return e.displacementMap!==void 0&&(i.displacementMap=r(e.displacementMap)),e.displacementScale!==void 0&&(i.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(i.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(i.roughnessMap=r(e.roughnessMap)),e.metalnessMap!==void 0&&(i.metalnessMap=r(e.metalnessMap)),e.emissiveMap!==void 0&&(i.emissiveMap=r(e.emissiveMap)),e.emissiveIntensity!==void 0&&(i.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(i.specularMap=r(e.specularMap)),e.specularIntensityMap!==void 0&&(i.specularIntensityMap=r(e.specularIntensityMap)),e.specularColorMap!==void 0&&(i.specularColorMap=r(e.specularColorMap)),e.envMap!==void 0&&(i.envMap=r(e.envMap)),e.envMapIntensity!==void 0&&(i.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(i.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(i.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(i.lightMap=r(e.lightMap)),e.lightMapIntensity!==void 0&&(i.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(i.aoMap=r(e.aoMap)),e.aoMapIntensity!==void 0&&(i.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(i.gradientMap=r(e.gradientMap)),e.clearcoatMap!==void 0&&(i.clearcoatMap=r(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(i.clearcoatRoughnessMap=r(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(i.clearcoatNormalMap=r(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(i.clearcoatNormalScale=new wt().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(i.iridescenceMap=r(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(i.iridescenceThicknessMap=r(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(i.transmissionMap=r(e.transmissionMap)),e.thicknessMap!==void 0&&(i.thicknessMap=r(e.thicknessMap)),e.anisotropyMap!==void 0&&(i.anisotropyMap=r(e.anisotropyMap)),e.sheenColorMap!==void 0&&(i.sheenColorMap=r(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(i.sheenRoughnessMap=r(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const n={ShadowMaterial:wk,SpriteMaterial:BM,RawShaderMaterial:Sk,ShaderMaterial:Al,PointsMaterial:HM,MeshPhysicalMaterial:_k,MeshStandardMaterial:fv,MeshPhongMaterial:bk,MeshToonMaterial:Mk,MeshNormalMaterial:Ek,MeshLambertMaterial:Ak,MeshDepthMaterial:OM,MeshDistanceMaterial:UM,MeshBasicMaterial:Gh,MeshMatcapMaterial:Tk,LineDashedMaterial:Ck,LineBasicMaterial:Ds,Material:Fs};return new n[e]}}class Ub{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let n="";for(let r=0,i=e.length;r<i;r++)n+=String.fromCharCode(e[r]);try{return decodeURIComponent(escape(n))}catch{return n}}static extractUrlBase(e){const n=e.lastIndexOf("/");return n===-1?"./":e.slice(0,n+1)}static resolveURL(e,n){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(n)&&/^\//.test(e)&&(n=n.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:n+e)}}class Bk extends An{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class zk extends zo{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new lc(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{n(s.parse(JSON.parse(a)))}catch(l){i?i(l):console.error(l),s.manager.itemError(e)}},r,i)}parse(e){const n={},r={};function i(d,v){if(n[v]!==void 0)return n[v];const w=d.interleavedBuffers[v],g=s(d,w.buffer),S=Dp(w.type,g),_=new ux(S,w.stride);return _.uuid=w.uuid,n[v]=_,_}function s(d,v){if(r[v]!==void 0)return r[v];const w=d.arrayBuffers[v],g=new Uint32Array(w).buffer;return r[v]=g,g}const o=e.isInstancedBufferGeometry?new Bk:new An,a=e.data.index;if(a!==void 0){const d=Dp(a.type,a.array);o.setIndex(new ur(d,1))}const l=e.data.attributes;for(const d in l){const v=l[d];let x;if(v.isInterleavedBufferAttribute){const w=i(e.data,v.data);x=new nd(w,v.itemSize,v.offset,v.normalized)}else{const w=Dp(v.type,v.array),g=v.isInstancedBufferAttribute?dm:ur;x=new g(w,v.itemSize,v.normalized)}v.name!==void 0&&(x.name=v.name),v.usage!==void 0&&x.setUsage(v.usage),v.updateRange!==void 0&&(x.updateRange.offset=v.updateRange.offset,x.updateRange.count=v.updateRange.count),o.setAttribute(d,x)}const u=e.data.morphAttributes;if(u)for(const d in u){const v=u[d],x=[];for(let w=0,g=v.length;w<g;w++){const S=v[w];let _;if(S.isInterleavedBufferAttribute){const T=i(e.data,S.data);_=new nd(T,S.itemSize,S.offset,S.normalized)}else{const T=Dp(S.type,S.array);_=new ur(T,S.itemSize,S.normalized)}S.name!==void 0&&(_.name=S.name),x.push(_)}o.morphAttributes[d]=x}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const h=e.data.groups||e.data.drawcalls||e.data.offsets;if(h!==void 0)for(let d=0,v=h.length;d!==v;++d){const x=h[d];o.addGroup(x.start,x.count,x.materialIndex)}const f=e.data.boundingSphere;if(f!==void 0){const d=new ge;f.center!==void 0&&d.fromArray(f.center),o.boundingSphere=new Pl(d,f.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class wH extends zo{constructor(e){super(e)}load(e,n,r,i){const s=this,o=this.path===""?Ub.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new lc(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(h){i!==void 0&&i(h),console.error("THREE:ObjectLoader: Can't parse "+e+".",h.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){i!==void 0&&i(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,n)},r,i)}async loadAsync(e,n){const r=this,i=this.path===""?Ub.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||i;const s=new lc(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,n),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await r.parseAsync(a)}parse(e,n){const r=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,i),o=this.parseImages(e.images,function(){n!==void 0&&n(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,r),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),n!==void 0){let h=!1;for(const f in o)if(o[f].data instanceof HTMLImageElement){h=!0;break}h===!1&&n(u)}return u}async parseAsync(e){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,i,a,o,n),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),l}parseShapes(e){const n={};if(e!==void 0)for(let r=0,i=e.length;r<i;r++){const s=new qf().fromJSON(e[r]);n[s.uuid]=s}return n}parseSkeletons(e,n){const r={},i={};if(n.traverse(function(s){s.isBone&&(i[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new cx().fromJSON(e[s],i);r[a.uuid]=a}return r}parseGeometries(e,n){const r={};if(e!==void 0){const i=new zk;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(l);break;default:l.type in sT?a=sT[l.type].fromJSON(l,n):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),r[l.uuid]=a}}return r}parseMaterials(e,n){const r={},i={};if(e!==void 0){const s=new Lx;s.setTextures(n);for(let o=0,a=e.length;o<a;o++){const l=e[o];r[l.uuid]===void 0&&(r[l.uuid]=s.parse(l)),i[l.uuid]=r[l.uuid]}}return i}parseAnimations(e){const n={};if(e!==void 0)for(let r=0;r<e.length;r++){const i=e[r],s=U0.parse(i);n[s.uuid]=s}return n}parseImages(e,n){const r=this,i={};let s;function o(l){return r.manager.itemStart(l),s.load(l,function(){r.manager.itemEnd(l)},void 0,function(){r.manager.itemError(l),r.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:r.resourcePath+u;return o(c)}else return l.data?{data:Dp(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new QM(n);s=new B0(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const h=e[u],f=h.url;if(Array.isArray(f)){const d=[];for(let v=0,x=f.length;v<x;v++){const w=f[v],g=a(w);g!==null&&(g instanceof HTMLImageElement?d.push(g):d.push(new qp(g.data,g.width,g.height)))}i[h.uuid]=new Of(d)}else{const d=a(h.url);i[h.uuid]=new Of(d)}}}return i}async parseImagesAsync(e){const n=this,r={};let i;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:n.resourcePath+a;return await i.loadAsync(l)}else return o.data?{data:Dp(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){i=new B0(this.manager),i.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const c=[];for(let h=0,f=u.length;h<f;h++){const d=u[h],v=await s(d);v!==null&&(v instanceof HTMLImageElement?c.push(v):c.push(new qp(v.data,v.width,v.height)))}r[l.uuid]=new Of(c)}else{const c=await s(l.url);r[l.uuid]=new Of(c)}}}return r}parseTextures(e,n){function r(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const i={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),n[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=n[a.image],u=l.data;let c;Array.isArray(u)?(c=new sv,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new qp:c=new Ci,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=r(a.mapping,SH)),a.channel!==void 0&&(c.channel=a.channel),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=r(a.wrap[0],uT),c.wrapT=r(a.wrap[1],uT)),a.format!==void 0&&(c.format=a.format),a.internalFormat!==void 0&&(c.internalFormat=a.internalFormat),a.type!==void 0&&(c.type=a.type),a.colorSpace!==void 0&&(c.colorSpace=a.colorSpace),a.encoding!==void 0&&(c.encoding=a.encoding),a.minFilter!==void 0&&(c.minFilter=r(a.minFilter,cT)),a.magFilter!==void 0&&(c.magFilter=r(a.magFilter,cT)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.generateMipmaps!==void 0&&(c.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(c.compareFunction=a.compareFunction),a.userData!==void 0&&(c.userData=a.userData),i[a.uuid]=c}return i}parseObject(e,n,r,i,s){let o;function a(f){return n[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",f),n[f]}function l(f){if(f!==void 0){if(Array.isArray(f)){const d=[];for(let v=0,x=f.length;v<x;v++){const w=f[v];r[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),d.push(r[w])}return d}return r[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",f),r[f]}}function u(f){return i[f]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",f),i[f]}let c,h;switch(e.type){case"Scene":o=new td,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Zt(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new lx(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new ax(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":o=new mi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new ou(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Tx(e.color,e.intensity);break;case"DirectionalLight":o=new pm(e.color,e.intensity);break;case"PointLight":o=new Dk(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Ok(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Fk(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Ax(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Cx().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),h=l(e.material),o=new ak(c,h),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),h=l(e.material),o=new qi(c,h);break;case"InstancedMesh":c=a(e.geometry),h=l(e.material);const f=e.count,d=e.instanceMatrix,v=e.instanceColor;o=new lk(c,h,f),o.instanceMatrix=new dm(new Float32Array(d.array),16),v!==void 0&&(o.instanceColor=new dm(new Float32Array(v.array),v.itemSize));break;case"LOD":o=new ok;break;case"Line":o=new kh(a(e.geometry),l(e.material));break;case"LineLoop":o=new uk(a(e.geometry),l(e.material));break;case"LineSegments":o=new qa(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new ck(a(e.geometry),l(e.material));break;case"Sprite":o=new sk(l(e.material));break;case"Group":o=new Up;break;case"Bone":o=new zM;break;default:o=new dr}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const f=e.children;for(let d=0;d<f.length;d++)o.add(this.parseObject(f[d],n,r,i,s))}if(e.animations!==void 0){const f=e.animations;for(let d=0;d<f.length;d++){const v=f[d];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const f=e.levels;for(let d=0;d<f.length;d++){const v=f[d],x=o.getObjectByProperty("uuid",v.object);x!==void 0&&o.addLevel(x,v.distance,v.hysteresis)}}return o}bindSkeletons(e,n){Object.keys(n).length!==0&&e.traverse(function(r){if(r.isSkinnedMesh===!0&&r.skeleton!==void 0){const i=n[r.skeleton];i===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",r.skeleton):r.bind(i,r.bindMatrix)}})}}const SH={UVMapping:tx,CubeReflectionMapping:cu,CubeRefractionMapping:Ph,EquirectangularReflectionMapping:cm,EquirectangularRefractionMapping:b0,CubeUVReflectionMapping:Em},uT={RepeatWrapping:M0,ClampToEdgeWrapping:to,MirroredRepeatWrapping:E0},cT={NearestFilter:Fi,NearestMipmapNearestFilter:w2,NearestMipmapLinearFilter:Xg,LinearFilter:Kr,LinearMipmapNearestFilter:xM,LinearMipmapLinearFilter:Rh};class _H extends zo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,n,r,i){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=id.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){n&&n(o),s.manager.itemEnd(e)},0),o;const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(l){return l.blob()}).then(function(l){return createImageBitmap(l,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(l){id.add(e,l),n&&n(l),s.manager.itemEnd(e)}).catch(function(l){i&&i(l),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let H1;class n3{static getContext(){return H1===void 0&&(H1=new(window.AudioContext||window.webkitAudioContext)),H1}static setContext(e){H1=e}}class bH extends zo{constructor(e){super(e)}load(e,n,r,i){const s=this,o=new lc(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);n3.getContext().decodeAudioData(u,function(h){n(h)},a)}catch(u){a(u)}},r,i);function a(l){i?i(l):console.error(l),s.manager.itemError(e)}}}class MH extends Cx{constructor(e,n,r=1){super(void 0,r),this.isHemisphereLightProbe=!0;const i=new Zt().set(e),s=new Zt().set(n),o=new ge(i.r,i.g,i.b),a=new ge(s.r,s.g,s.b),l=Math.sqrt(Math.PI),u=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(u)}}class EH extends Cx{constructor(e,n=1){super(void 0,n),this.isAmbientLightProbe=!0;const r=new Zt().set(e);this.sh.coefficients[0].set(r.r,r.g,r.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const hT=new Hn,fT=new Hn,gf=new Hn;class AH{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new mi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new mi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const n=this._cache;if(n.focus!==e.focus||n.fov!==e.fov||n.aspect!==e.aspect*this.aspect||n.near!==e.near||n.far!==e.far||n.zoom!==e.zoom||n.eyeSep!==this.eyeSep){n.focus=e.focus,n.fov=e.fov,n.aspect=e.aspect*this.aspect,n.near=e.near,n.far=e.far,n.zoom=e.zoom,n.eyeSep=this.eyeSep,gf.copy(e.projectionMatrix);const i=n.eyeSep/2,s=i*n.near/n.focus,o=n.near*Math.tan(jf*n.fov*.5)/n.zoom;let a,l;fT.elements[12]=-i,hT.elements[12]=i,a=-o*n.aspect+s,l=o*n.aspect+s,gf.elements[0]=2*n.near/(l-a),gf.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(gf),a=-o*n.aspect-s,l=o*n.aspect-s,gf.elements[0]=2*n.near/(l-a),gf.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(gf)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(fT),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(hT)}}class r3{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=dT(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const n=dT();e=(n-this.oldTime)/1e3,this.oldTime=n,this.elapsedTime+=e}return e}}function dT(){return(typeof performance>"u"?Date:performance).now()}const vf=new ge,pT=new io,TH=new ge,yf=new ge;class CH extends dr{constructor(){super(),this.type="AudioListener",this.context=n3.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new r3}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const n=this.context.listener,r=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(vf,pT,TH),yf.set(0,0,-1).applyQuaternion(pT),n.positionX){const i=this.context.currentTime+this.timeDelta;n.positionX.linearRampToValueAtTime(vf.x,i),n.positionY.linearRampToValueAtTime(vf.y,i),n.positionZ.linearRampToValueAtTime(vf.z,i),n.forwardX.linearRampToValueAtTime(yf.x,i),n.forwardY.linearRampToValueAtTime(yf.y,i),n.forwardZ.linearRampToValueAtTime(yf.z,i),n.upX.linearRampToValueAtTime(r.x,i),n.upY.linearRampToValueAtTime(r.y,i),n.upZ.linearRampToValueAtTime(r.z,i)}else n.setPosition(vf.x,vf.y,vf.z),n.setOrientation(yf.x,yf.y,yf.z,r.x,r.y,r.z)}}class Hk extends dr{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const n=this.context.createBufferSource();return n.buffer=this.buffer,n.loop=this.loop,n.loopStart=this.loopStart,n.loopEnd=this.loopEnd,n.onended=this.onEnded.bind(this),n.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=n,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,n=this.filters.length;e<n;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const xf=new ge,mT=new io,LH=new ge,wf=new ge;class PH extends Hk{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,n,r){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=n,this.panner.coneOuterGain=r,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(xf,mT,LH),wf.set(0,0,1).applyQuaternion(mT);const n=this.panner;if(n.positionX){const r=this.context.currentTime+this.listener.timeDelta;n.positionX.linearRampToValueAtTime(xf.x,r),n.positionY.linearRampToValueAtTime(xf.y,r),n.positionZ.linearRampToValueAtTime(xf.z,r),n.orientationX.linearRampToValueAtTime(wf.x,r),n.orientationY.linearRampToValueAtTime(wf.y,r),n.orientationZ.linearRampToValueAtTime(wf.z,r)}else n.setPosition(xf.x,xf.y,xf.z),n.setOrientation(wf.x,wf.y,wf.z)}}class RH{constructor(e,n=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=n,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const n=this.getFrequencyData();for(let r=0;r<n.length;r++)e+=n[r];return e/n.length}}class Gk{constructor(e,n,r){this.binding=e,this.valueSize=r;let i,s,o;switch(n){case"quaternion":i=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(r*6),this._workIndex=5;break;case"string":case"bool":i=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(r*5);break;default:i=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(r*5)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,n){const r=this.buffer,i=this.valueSize,s=e*i+i;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==i;++a)r[s+a]=r[a];o=n}else{o+=n;const a=n/o;this._mixBufferRegion(r,s,0,a,i)}this.cumulativeWeight=o}accumulateAdditive(e){const n=this.buffer,r=this.valueSize,i=r*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(n,i,0,e,r),this.cumulativeWeightAdditive+=e}apply(e){const n=this.valueSize,r=this.buffer,i=e*n+n,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=n*this._origIndex;this._mixBufferRegion(r,i,l,1-s,n)}o>0&&this._mixBufferRegionAdditive(r,i,this._addIndex*n,1,n);for(let l=n,u=n+n;l!==u;++l)if(r[l]!==r[l+n]){a.setValue(r,i);break}}saveOriginalState(){const e=this.binding,n=this.buffer,r=this.valueSize,i=r*this._origIndex;e.getValue(n,i);for(let s=r,o=i;s!==o;++s)n[s]=n[i+s%r];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,n=e+this.valueSize;for(let r=e;r<n;r++)this.buffer[r]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,n=this._addIndex*this.valueSize;for(let r=0;r<this.valueSize;r++)this.buffer[n+r]=this.buffer[e+r]}_select(e,n,r,i,s){if(i>=.5)for(let o=0;o!==s;++o)e[n+o]=e[r+o]}_slerp(e,n,r,i){io.slerpFlat(e,n,e,n,e,r,i)}_slerpAdditive(e,n,r,i,s){const o=this._workIndex*s;io.multiplyQuaternionsFlat(e,o,e,n,e,r),io.slerpFlat(e,n,e,n,e,o,i)}_lerp(e,n,r,i,s){const o=1-i;for(let a=0;a!==s;++a){const l=n+a;e[l]=e[l]*o+e[r+a]*i}}_lerpAdditive(e,n,r,i,s){for(let o=0;o!==s;++o){const a=n+o;e[a]=e[a]+e[r+o]*i}}}const i3="\\[\\]\\.:\\/",kH=new RegExp("["+i3+"]","g"),s3="[^"+i3+"]",IH="[^"+i3.replace("\\.","")+"]",NH=/((?:WC+[\/:])*)/.source.replace("WC",s3),FH=/(WCOD+)?/.source.replace("WCOD",IH),DH=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",s3),OH=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",s3),UH=new RegExp("^"+NH+FH+DH+OH+"$"),BH=["material","materials","bones","map"];class zH{constructor(e,n,r){const i=r||pr.parseTrackName(n);this._targetGroup=e,this._bindings=e.subscribe_(n,i)}getValue(e,n){this.bind();const r=this._targetGroup.nCachedObjects_,i=this._bindings[r];i!==void 0&&i.getValue(e,n)}setValue(e,n){const r=this._bindings;for(let i=this._targetGroup.nCachedObjects_,s=r.length;i!==s;++i)r[i].setValue(e,n)}bind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].bind()}unbind(){const e=this._bindings;for(let n=this._targetGroup.nCachedObjects_,r=e.length;n!==r;++n)e[n].unbind()}}class pr{constructor(e,n,r){this.path=n,this.parsedPath=r||pr.parseTrackName(n),this.node=pr.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new pr.Composite(e,n,r):new pr(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(kH,"")}static parseTrackName(e){const n=UH.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},i=r.nodeName&&r.nodeName.lastIndexOf(".");if(i!==void 0&&i!==-1){const s=r.nodeName.substring(i+1);BH.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,i),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){const r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){const r=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===n||a.uuid===n)return a;const l=r(a.children);if(l)return l}return null},i=r(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)e[n++]=r[i]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++]}_setValue_array_setNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){const r=this.resolvedProperty;for(let i=0,s=r.length;i!==s;++i)r[i]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node;const n=this.parsedPath,r=n.objectName,i=n.propertyName;let s=n.propertyIndex;if(e||(e=pr.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let u=n.objectIndex;switch(r){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[i];if(o===void 0){const u=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(i==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}pr.Composite=zH;pr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};pr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};pr.prototype.GetterByBindingType=[pr.prototype._getValue_direct,pr.prototype._getValue_array,pr.prototype._getValue_arrayElement,pr.prototype._getValue_toArray];pr.prototype.SetterByBindingTypeAndVersioning=[[pr.prototype._setValue_direct,pr.prototype._setValue_direct_setNeedsUpdate,pr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[pr.prototype._setValue_array,pr.prototype._setValue_array_setNeedsUpdate,pr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[pr.prototype._setValue_arrayElement,pr.prototype._setValue_arrayElement_setNeedsUpdate,pr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[pr.prototype._setValue_fromArray,pr.prototype._setValue_fromArray_setNeedsUpdate,pr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class HH{constructor(){this.isAnimationObjectGroup=!0,this.uuid=aa(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let r=0,i=arguments.length;r!==i;++r)e[arguments[r].uuid]=r;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}add(){const e=this._objects,n=this._indicesByUUID,r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,h=arguments.length;c!==h;++c){const f=arguments[c],d=f.uuid;let v=n[d];if(v===void 0){v=l++,n[d]=v,e.push(f);for(let x=0,w=o;x!==w;++x)s[x].push(new pr(f,r[x],i[x]))}else if(v<u){a=e[v];const x=--u,w=e[x];n[w.uuid]=v,e[v]=w,n[d]=x,e[x]=f;for(let g=0,S=o;g!==S;++g){const _=s[g],T=_[x];let L=_[v];_[v]=T,L===void 0&&(L=new pr(f,r[g],i[g])),_[x]=L}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,c=n[u];if(c!==void 0&&c>=s){const h=s++,f=e[h];n[f.uuid]=c,e[c]=f,n[u]=h,e[h]=l;for(let d=0,v=i;d!==v;++d){const x=r[d],w=x[h],g=x[c];x[c]=w,x[h]=g}}}this.nCachedObjects_=s}uncache(){const e=this._objects,n=this._indicesByUUID,r=this._bindings,i=r.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,h=n[c];if(h!==void 0)if(delete n[c],h<s){const f=--s,d=e[f],v=--o,x=e[v];n[d.uuid]=h,e[h]=d,n[x.uuid]=f,e[f]=x,e.pop();for(let w=0,g=i;w!==g;++w){const S=r[w],_=S[f],T=S[v];S[h]=_,S[f]=T,S.pop()}}else{const f=--o,d=e[f];f>0&&(n[d.uuid]=h),e[h]=d,e.pop();for(let v=0,x=i;v!==x;++v){const w=r[v];w[h]=w[f],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,n){const r=this._bindingsIndicesByPath;let i=r[e];const s=this._bindings;if(i!==void 0)return s[i];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,h=new Array(u);i=s.length,r[e]=i,o.push(e),a.push(n),s.push(h);for(let f=c,d=l.length;f!==d;++f){const v=l[f];h[f]=new pr(v,e,n)}return h}unsubscribe_(e){const n=this._bindingsIndicesByPath,r=n[e];if(r!==void 0){const i=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];n[u]=r,o[r]=l,o.pop(),s[r]=s[a],s.pop(),i[r]=i[a],i.pop()}}}class Vk{constructor(e,n,r=null,i=n.blendMode){this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=i;const s=n.tracks,o=s.length,a=new Array(o),l={endingStart:Ff,endingEnd:Ff};for(let u=0;u!==o;++u){const c=s[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=C4,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,n){return this.loop=e,this.repetitions=n,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,n,r){if(e.fadeOut(n),this.fadeIn(n),r){const i=this._clip.duration,s=e._clip.duration,o=s/i,a=i/s;e.warp(1,o,n),this.warp(a,1,n)}return this}crossFadeTo(e,n,r){return e.crossFadeFrom(this,n,r)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,n,r){const i=this._mixer,s=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+r,u[0]=e/o,u[1]=n/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,n,r,i){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*r;l<0||r===0?n=0:(this._startTime=null,n=r*l)}n*=this._updateTimeScale(e);const o=this._updateTime(n),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case TM:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulateAdditive(a);break;case rx:default:for(let c=0,h=l.length;c!==h;++c)l[c].evaluate(o),u[c].accumulate(i,a)}}}_updateWeight(e){let n=0;if(this.enabled){n=this.weight;const r=this._weightInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopFading(),i===0&&(this.enabled=!1))}}return this._effectiveWeight=n,n}_updateTimeScale(e){let n=0;if(!this.paused){n=this.timeScale;const r=this._timeScaleInterpolant;if(r!==null){const i=r.evaluate(e)[0];n*=i,e>r.parameterPositions[1]&&(this.stopWarping(),n===0?this.paused=!0:this.timeScale=n)}}return this._effectiveTimeScale=n,n}_updateTime(e){const n=this._clip.duration,r=this.loop;let i=this.time+e,s=this._loopCount;const o=r===L4;if(e===0)return s===-1?i:o&&(s&1)===1?n-i:i;if(r===T4){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=n)i=n;else if(i<0)i=0;else{this.time=i;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),i>=n||i<0){const a=Math.floor(i/n);i-=n*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?n:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=i;if(o&&(s&1)===1)return n-i}return i}_setEndings(e,n,r){const i=this._interpolantSettings;r?(i.endingStart=Df,i.endingEnd=Df):(e?i.endingStart=this.zeroSlopeAtStart?Df:Ff:i.endingStart=C0,n?i.endingEnd=this.zeroSlopeAtEnd?Df:Ff:i.endingEnd=C0)}_scheduleFading(e,n,r){const i=this._mixer,s=i.time;let o=this._weightInterpolant;o===null&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=n,a[1]=s+e,l[1]=r,this}}const GH=new Float32Array(1);class VH extends fc{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,n){const r=e._localRoot||this._root,i=e._clip.tracks,s=i.length,o=e._propertyBindings,a=e._interpolants,l=r.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let h=0;h!==s;++h){const f=i[h],d=f.name;let v=c[d];if(v!==void 0)++v.referenceCount,o[h]=v;else{if(v=o[h],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,d));continue}const x=n&&n._propertyBindings[h].binding.parsedPath;v=new Gk(pr.create(r,d,x),f.ValueTypeName,f.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,d),o[h]=v}a[h].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const r=(e._localRoot||this._root).uuid,i=e._clip.uuid,s=this._actionsByClip[i];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,i,r)}const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const n=e._cacheIndex;return n!==null&&n<this._nActiveActions}_addInactiveAction(e,n,r){const i=this._actions,s=this._actionsByClip;let o=s[n];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[n]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=i.length,i.push(e),o.actionByRoot[r]=e}_removeInactiveAction(e){const n=this._actions,r=n[n.length-1],i=e._cacheIndex;r._cacheIndex=i,n[i]=r,n.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const h=a.actionByRoot,f=(e._localRoot||this._root).uuid;delete h[f],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const n=e._propertyBindings;for(let r=0,i=n.length;r!==i;++r){const s=n[r];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const n=this._actions,r=e._cacheIndex,i=this._nActiveActions++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackAction(e){const n=this._actions,r=e._cacheIndex,i=--this._nActiveActions,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_addInactiveBinding(e,n,r){const i=this._bindingsByRootAndName,s=this._bindings;let o=i[n];o===void 0&&(o={},i[n]=o),o[r]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const n=this._bindings,r=e.binding,i=r.rootNode.uuid,s=r.path,o=this._bindingsByRootAndName,a=o[i],l=n[n.length-1],u=e._cacheIndex;l._cacheIndex=u,n[u]=l,n.pop(),delete a[s],Object.keys(a).length===0&&delete o[i]}_lendBinding(e){const n=this._bindings,r=e._cacheIndex,i=this._nActiveBindings++,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_takeBackBinding(e){const n=this._bindings,r=e._cacheIndex,i=--this._nActiveBindings,s=n[i];e._cacheIndex=i,n[i]=e,s._cacheIndex=r,n[r]=s}_lendControlInterpolant(){const e=this._controlInterpolants,n=this._nActiveControlInterpolants++;let r=e[n];return r===void 0&&(r=new KM(new Float32Array(2),new Float32Array(2),1,GH),r.__cacheIndex=n,e[n]=r),r}_takeBackControlInterpolant(e){const n=this._controlInterpolants,r=e.__cacheIndex,i=--this._nActiveControlInterpolants,s=n[i];e.__cacheIndex=i,n[i]=e,s.__cacheIndex=r,n[r]=s}clipAction(e,n,r){const i=n||this._root,s=i.uuid;let o=typeof e=="string"?U0.findByName(i,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(r===void 0&&(o!==null?r=o.blendMode:r=rx),l!==void 0){const h=l.actionByRoot[s];if(h!==void 0&&h.blendMode===r)return h;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new Vk(this,o,n,r);return this._bindAction(c,u),this._addInactiveAction(c,a,s),c}existingAction(e,n){const r=n||this._root,i=r.uuid,s=typeof e=="string"?U0.findByName(r,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions,n=this._nActiveActions;for(let r=n-1;r>=0;--r)e[r].stop();return this}update(e){e*=this.timeScale;const n=this._actions,r=this._nActiveActions,i=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==r;++u)n[u]._update(i,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let n=0;n<this._actions.length;n++)this._actions[n].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const n=this._actions,r=e.uuid,i=this._actionsByClip,s=i[r];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const c=u._cacheIndex,h=n[n.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,h._cacheIndex=c,n[c]=h,n.pop(),this._removeInactiveBindingsForAction(u)}delete i[r]}}uncacheRoot(e){const n=e.uuid,r=this._actionsByClip;for(const o in r){const a=r[o].actionByRoot,l=a[n];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const i=this._bindingsByRootAndName,s=i[n];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,n){const r=this.existingAction(e,n);r!==null&&(this._deactivateAction(r),this._removeInactiveAction(r))}}class o3{constructor(e){this.value=e}clone(){return new o3(this.value.clone===void 0?this.value:this.value.clone())}}let WH=0;class jH extends fc{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:WH++}),this.name="",this.usage=L0,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const n=this.uniforms.indexOf(e);return n!==-1&&this.uniforms.splice(n,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const n=e.uniforms;this.uniforms.length=0;for(let r=0,i=n.length;r<i;r++)this.uniforms.push(n[r].clone());return this}clone(){return new this.constructor().copy(this)}}class XH extends ux{constructor(e,n,r=1){super(e,n),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const n=super.clone(e);return n.meshPerAttribute=this.meshPerAttribute,n}toJSON(e){const n=super.toJSON(e);return n.isInstancedInterleavedBuffer=!0,n.meshPerAttribute=this.meshPerAttribute,n}}class qH{constructor(e,n,r,i,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=i,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,n){return this.type=e,this.elementSize=n,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class a3{constructor(e,n,r=0,i=1/0){this.ray=new hd(e,n),this.near=r,this.far=i,this.camera=null,this.layers=new Xf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,n){this.ray.set(e,n)}setFromCamera(e,n){n.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(n).sub(this.ray.origin).normalize(),this.camera=n):n.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(n.near+n.far)/(n.near-n.far)).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld),this.camera=n):console.error("THREE.Raycaster: Unsupported camera type: "+n.type)}intersectObject(e,n=!0,r=[]){return Bb(e,this,r,n),r.sort(gT),r}intersectObjects(e,n=!0,r=[]){for(let i=0,s=e.length;i<s;i++)Bb(e[i],this,r,n);return r.sort(gT),r}}function gT(t,e){return t.distance-e.distance}function Bb(t,e,n,r){if(t.layers.test(e.layers)&&t.raycast(e,n),r===!0){const i=t.children;for(let s=0,o=i.length;s<o;s++)Bb(i[s],e,n,!0)}}class zb{constructor(e=1,n=0,r=0){return this.radius=e,this.phi=n,this.theta=r,this}set(e,n,r){return this.radius=e,this.phi=n,this.theta=r,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+n*n+r*r),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,r),this.phi=Math.acos(Ti(n/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class YH{constructor(e=1,n=0,r=0){return this.radius=e,this.theta=n,this.y=r,this}set(e,n,r){return this.radius=e,this.theta=n,this.y=r,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,n,r){return this.radius=Math.sqrt(e*e+r*r),this.theta=Math.atan2(e,r),this.y=n,this}clone(){return new this.constructor().copy(this)}}const vT=new wt;class ZH{constructor(e=new wt(1/0,1/0),n=new wt(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromPoints(e){this.makeEmpty();for(let n=0,r=e.length;n<r;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const r=vT.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,vT).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const yT=new ge,G1=new ge;class $H{constructor(e=new ge,n=new ge){this.start=e,this.end=n}set(e,n){return this.start.copy(e),this.end.copy(n),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,n){return this.delta(n).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,n){yT.subVectors(e,this.start),G1.subVectors(this.end,this.start);const r=G1.dot(G1);let s=G1.dot(yT)/r;return n&&(s=Ti(s,0,1)),s}closestPointToPoint(e,n,r){const i=this.closestPointToPointParameter(e,n);return this.delta(r).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const xT=new ge;class KH extends dr{constructor(e,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="SpotLightHelper";const r=new An,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,c=a/l*Math.PI*2;i.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}r.setAttribute("position",new nn(i,3));const s=new Ds({fog:!1,toneMapped:!1});this.cone=new qa(r,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),xT.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(xT),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const qc=new ge,V1=new Hn,lS=new Hn;class JH extends qa{constructor(e){const n=Wk(e),r=new An,i=[],s=[],o=new Zt(0,0,1),a=new Zt(0,1,0);for(let u=0;u<n.length;u++){const c=n[u];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}r.setAttribute("position",new nn(i,3)),r.setAttribute("color",new nn(s,3));const l=new Ds({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(r,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=n,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const n=this.bones,r=this.geometry,i=r.getAttribute("position");lS.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<n.length;s++){const a=n[s];a.parent&&a.parent.isBone&&(V1.multiplyMatrices(lS,a.matrixWorld),qc.setFromMatrixPosition(V1),i.setXYZ(o,qc.x,qc.y,qc.z),V1.multiplyMatrices(lS,a.parent.matrixWorld),qc.setFromMatrixPosition(V1),i.setXYZ(o+1,qc.x,qc.y,qc.z),o+=2)}r.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Wk(t){const e=[];t.isBone===!0&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,Wk(t.children[n]));return e}class QH extends qi{constructor(e,n,r){const i=new hv(n,4,2),s=new Gh({wireframe:!0,fog:!1,toneMapped:!1});super(i,s),this.light=e,this.color=r,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const eG=new ge,wT=new Zt,ST=new Zt;class tG extends dr{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="HemisphereLightHelper";const i=new cv(n);i.rotateY(Math.PI*.5),this.material=new Gh({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=i.getAttribute("position"),o=new Float32Array(s.count*3);i.setAttribute("color",new ur(o,3)),this.add(new qi(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const n=e.geometry.getAttribute("color");wT.copy(this.light.color),ST.copy(this.light.groundColor);for(let r=0,i=n.count;r<i;r++){const s=r<i/2?wT:ST;n.setXYZ(r,s.r,s.g,s.b)}n.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(eG.setFromMatrixPosition(this.light.matrixWorld).negate())}}class nG extends qa{constructor(e=10,n=10,r=4473924,i=8947848){r=new Zt(r),i=new Zt(i);const s=n/2,o=e/n,a=e/2,l=[],u=[];for(let f=0,d=0,v=-a;f<=n;f++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const x=f===s?r:i;x.toArray(u,d),d+=3,x.toArray(u,d),d+=3,x.toArray(u,d),d+=3,x.toArray(u,d),d+=3}const c=new An;c.setAttribute("position",new nn(l,3)),c.setAttribute("color",new nn(u,3));const h=new Ds({vertexColors:!0,toneMapped:!1});super(c,h),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class rG extends qa{constructor(e=10,n=16,r=8,i=64,s=4473924,o=8947848){s=new Zt(s),o=new Zt(o);const a=[],l=[];if(n>1)for(let h=0;h<n;h++){const f=h/n*(Math.PI*2),d=Math.sin(f)*e,v=Math.cos(f)*e;a.push(0,0,0),a.push(d,0,v);const x=h&1?s:o;l.push(x.r,x.g,x.b),l.push(x.r,x.g,x.b)}for(let h=0;h<r;h++){const f=h&1?s:o,d=e-e/r*h;for(let v=0;v<i;v++){let x=v/i*(Math.PI*2),w=Math.sin(x)*d,g=Math.cos(x)*d;a.push(w,0,g),l.push(f.r,f.g,f.b),x=(v+1)/i*(Math.PI*2),w=Math.sin(x)*d,g=Math.cos(x)*d,a.push(w,0,g),l.push(f.r,f.g,f.b)}}const u=new An;u.setAttribute("position",new nn(a,3)),u.setAttribute("color",new nn(l,3));const c=new Ds({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _T=new ge,W1=new ge,bT=new ge;class iG extends dr{constructor(e,n,r){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=r,this.type="DirectionalLightHelper",n===void 0&&(n=1);let i=new An;i.setAttribute("position",new nn([-n,n,0,n,n,0,n,-n,0,-n,-n,0,-n,n,0],3));const s=new Ds({fog:!1,toneMapped:!1});this.lightPlane=new kh(i,s),this.add(this.lightPlane),i=new An,i.setAttribute("position",new nn([0,0,0,0,0,1],3)),this.targetLine=new kh(i,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_T.setFromMatrixPosition(this.light.matrixWorld),W1.setFromMatrixPosition(this.light.target.matrixWorld),bT.subVectors(W1,_T),this.lightPlane.lookAt(W1),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(W1),this.targetLine.scale.z=bT.length()}}const j1=new ge,Mi=new iv;class sG extends qa{constructor(e){const n=new An,r=new Ds({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,x){l(v),l(x)}function l(v){i.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(i.length/3-1)}n.setAttribute("position",new nn(i,3)),n.setAttribute("color",new nn(s,3)),super(n,r),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new Zt(16755200),c=new Zt(16711680),h=new Zt(43775),f=new Zt(16777215),d=new Zt(3355443);this.setColors(u,c,h,f,d)}setColors(e,n,r,i,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,n.r,n.g,n.b),a.setXYZ(25,n.r,n.g,n.b),a.setXYZ(26,n.r,n.g,n.b),a.setXYZ(27,n.r,n.g,n.b),a.setXYZ(28,n.r,n.g,n.b),a.setXYZ(29,n.r,n.g,n.b),a.setXYZ(30,n.r,n.g,n.b),a.setXYZ(31,n.r,n.g,n.b),a.setXYZ(32,r.r,r.g,r.b),a.setXYZ(33,r.r,r.g,r.b),a.setXYZ(34,r.r,r.g,r.b),a.setXYZ(35,r.r,r.g,r.b),a.setXYZ(36,r.r,r.g,r.b),a.setXYZ(37,r.r,r.g,r.b),a.setXYZ(38,i.r,i.g,i.b),a.setXYZ(39,i.r,i.g,i.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,n=this.pointMap,r=1,i=1;Mi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ni("c",n,e,Mi,0,0,-1),Ni("t",n,e,Mi,0,0,1),Ni("n1",n,e,Mi,-r,-i,-1),Ni("n2",n,e,Mi,r,-i,-1),Ni("n3",n,e,Mi,-r,i,-1),Ni("n4",n,e,Mi,r,i,-1),Ni("f1",n,e,Mi,-r,-i,1),Ni("f2",n,e,Mi,r,-i,1),Ni("f3",n,e,Mi,-r,i,1),Ni("f4",n,e,Mi,r,i,1),Ni("u1",n,e,Mi,r*.7,i*1.1,-1),Ni("u2",n,e,Mi,-r*.7,i*1.1,-1),Ni("u3",n,e,Mi,0,i*2,-1),Ni("cf1",n,e,Mi,-r,0,1),Ni("cf2",n,e,Mi,r,0,1),Ni("cf3",n,e,Mi,0,-i,1),Ni("cf4",n,e,Mi,0,i,1),Ni("cn1",n,e,Mi,-r,0,-1),Ni("cn2",n,e,Mi,r,0,-1),Ni("cn3",n,e,Mi,0,-i,-1),Ni("cn4",n,e,Mi,0,i,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Ni(t,e,n,r,i,s,o){j1.set(i,s,o).unproject(r);const a=e[t];if(a!==void 0){const l=n.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],j1.x,j1.y,j1.z)}}const X1=new Xa;class oG extends qa{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(8*3),s=new An;s.setIndex(new ur(r,1)),s.setAttribute("position",new ur(i,3)),super(s,new Ds({color:n,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&X1.setFromObject(this.object),X1.isEmpty())return;const n=X1.min,r=X1.max,i=this.geometry.attributes.position,s=i.array;s[0]=r.x,s[1]=r.y,s[2]=r.z,s[3]=n.x,s[4]=r.y,s[5]=r.z,s[6]=n.x,s[7]=n.y,s[8]=r.z,s[9]=r.x,s[10]=n.y,s[11]=r.z,s[12]=r.x,s[13]=r.y,s[14]=n.z,s[15]=n.x,s[16]=r.y,s[17]=n.z,s[18]=n.x,s[19]=n.y,s[20]=n.z,s[21]=r.x,s[22]=n.y,s[23]=n.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,n){return super.copy(e,n),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class aG extends qa{constructor(e,n=16776960){const r=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new An;s.setIndex(new ur(r,1)),s.setAttribute("position",new nn(i,3)),super(s,new Ds({color:n,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const n=this.box;n.isEmpty()||(n.getCenter(this.position),n.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class lG extends kh{constructor(e,n=1,r=16776960){const i=r,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new An;o.setAttribute("position",new nn(s,3)),o.computeBoundingSphere(),super(o,new Ds({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=n;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new An;l.setAttribute("position",new nn(a,3)),l.computeBoundingSphere(),this.add(new qi(l,new Gh({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const MT=new ge;let q1,uS;class uG extends dr{constructor(e=new ge(0,0,1),n=new ge(0,0,0),r=1,i=16776960,s=r*.2,o=s*.2){super(),this.type="ArrowHelper",q1===void 0&&(q1=new An,q1.setAttribute("position",new nn([0,0,0,0,1,0],3)),uS=new Tm(0,.5,1,5,1),uS.translate(0,-.5,0)),this.position.copy(n),this.line=new kh(q1,new Ds({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new qi(uS,new Gh({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(r,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{MT.set(e.z,0,-e.x).normalize();const n=Math.acos(e.y);this.quaternion.setFromAxisAngle(MT,n)}}setLength(e,n=e*.2,r=n*.2){this.line.scale.set(1,Math.max(1e-4,e-n),1),this.line.updateMatrix(),this.cone.scale.set(r,n,r),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class cG extends qa{constructor(e=1){const n=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],r=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new An;i.setAttribute("position",new nn(n,3)),i.setAttribute("color",new nn(r,3));const s=new Ds({vertexColors:!0,toneMapped:!1});super(i,s),this.type="AxesHelper"}setColors(e,n,r){const i=new Zt,s=this.geometry.attributes.color.array;return i.set(e),i.toArray(s,0),i.toArray(s,3),i.set(n),i.toArray(s,6),i.toArray(s,9),i.set(r),i.toArray(s,12),i.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class hG{constructor(){this.type="ShapePath",this.color=new Zt,this.subPaths=[],this.currentPath=null}moveTo(e,n){return this.currentPath=new k0,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,n),this}lineTo(e,n){return this.currentPath.lineTo(e,n),this}quadraticCurveTo(e,n,r,i){return this.currentPath.quadraticCurveTo(e,n,r,i),this}bezierCurveTo(e,n,r,i,s,o){return this.currentPath.bezierCurveTo(e,n,r,i,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function n(g){const S=[];for(let _=0,T=g.length;_<T;_++){const L=g[_],k=new qf;k.curves=L.curves,S.push(k)}return S}function r(g,S){const _=S.length;let T=!1;for(let L=_-1,k=0;k<_;L=k++){let N=S[L],R=S[k],P=R.x-N.x,D=R.y-N.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(N=S[k],P=-P,R=S[L],D=-D),g.y<N.y||g.y>R.y)continue;if(g.y===N.y){if(g.x===N.x)return!0}else{const O=D*(g.x-N.x)-P*(g.y-N.y);if(O===0)return!0;if(O<0)continue;T=!T}}else{if(g.y!==N.y)continue;if(R.x<=g.x&&g.x<=N.x||N.x<=g.x&&g.x<=R.x)return!0}}return T}const i=au.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new qf,l.curves=a.curves,u.push(l),u;let c=!i(s[0].getPoints());c=e?!c:c;const h=[],f=[];let d=[],v=0,x;f[v]=void 0,d[v]=[];for(let g=0,S=s.length;g<S;g++)a=s[g],x=a.getPoints(),o=i(x),o=e?!o:o,o?(!c&&f[v]&&v++,f[v]={s:new qf,p:x},f[v].s.curves=a.curves,c&&v++,d[v]=[]):d[v].push({h:a,p:x[0]});if(!f[0])return n(s);if(f.length>1){let g=!1,S=0;for(let _=0,T=f.length;_<T;_++)h[_]=[];for(let _=0,T=f.length;_<T;_++){const L=d[_];for(let k=0;k<L.length;k++){const N=L[k];let R=!0;for(let P=0;P<f.length;P++)r(N.p,f[P].p)&&(_!==P&&S++,R?(R=!1,h[P].push(N)):g=!0);R&&h[_].push(N)}}S>0&&g===!1&&(d=h)}let w;for(let g=0,S=f.length;g<S;g++){l=f[g].s,u.push(l),w=d[g];for(let _=0,T=w.length;_<T;_++)l.holes.push(w[_].h)}return u}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:tv}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=tv);const fG=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:yM,AddEquation:Cf,AddOperation:p4,AdditiveAnimationBlendMode:TM,AdditiveBlending:nb,AlphaFormat:S4,AlwaysCompare:H4,AlwaysDepth:a4,AlwaysStencilFunc:I4,AmbientLight:Tx,AmbientLightProbe:EH,AnimationAction:Vk,AnimationClip:U0,AnimationLoader:pH,AnimationMixer:VH,AnimationObjectGroup:HH,AnimationUtils:cH,ArcCurve:hk,ArrayCamera:tk,ArrowHelper:uG,Audio:Hk,AudioAnalyser:RH,AudioContext:n3,AudioListener:CH,AudioLoader:bH,AxesHelper:cG,BackSide:yo,BasicDepthPacking:P4,BasicShadowMap:qR,Bone:zM,BooleanKeyframeTrack:dd,Box2:ZH,Box3:Xa,Box3Helper:aG,BoxGeometry:fd,BoxHelper:oG,BufferAttribute:ur,BufferGeometry:An,BufferGeometryLoader:zk,ByteType:x4,Cache:id,Camera:iv,CameraHelper:sG,CanvasTexture:N9,CapsuleGeometry:px,CatmullRomCurve3:fk,CineonToneMapping:v4,CircleGeometry:mx,ClampToEdgeWrapping:to,Clock:r3,Color:Zt,ColorKeyframeTrack:JM,ColorManagement:Fa,CompressedArrayTexture:k9,CompressedCubeTexture:I9,CompressedTexture:hx,CompressedTextureLoader:mH,ConeGeometry:gx,CubeCamera:Y4,CubeReflectionMapping:cu,CubeRefractionMapping:Ph,CubeTexture:sv,CubeTextureLoader:Nk,CubeUVReflectionMapping:Em,CubicBezierCurve:VM,CubicBezierCurve3:dk,CubicInterpolant:Pk,CullFaceBack:tb,CullFaceFront:XR,CullFaceFrontBack:TO,CullFaceNone:jR,Curve:Rl,CurvePath:mk,CustomBlending:YR,CustomToneMapping:y4,CylinderGeometry:Tm,Cylindrical:YH,Data3DTexture:kM,DataArrayTexture:ix,DataTexture:qp,DataTextureLoader:e3,DataUtils:Uf,DecrementStencilOp:BO,DecrementWrapStencilOp:HO,DefaultLoadingManager:Ik,DepthFormat:Mh,DepthStencilFormat:ed,DepthTexture:nk,DirectionalLight:pm,DirectionalLightHelper:iG,DiscreteInterpolant:Rk,DisplayP3ColorSpace:LM,DodecahedronGeometry:vx,DoubleSide:xl,DstAlphaFactor:t4,DstColorFactor:r4,DynamicCopyUsage:nU,DynamicDrawUsage:$O,DynamicReadUsage:QO,EdgesGeometry:YM,EllipseCurve:fx,EqualCompare:D4,EqualDepth:u4,EqualStencilFunc:jO,EquirectangularReflectionMapping:cm,EquirectangularRefractionMapping:b0,Euler:rv,EventDispatcher:fc,ExtrudeGeometry:xx,FileLoader:lc,Float16BufferAttribute:jU,Float32BufferAttribute:nn,Float64BufferAttribute:XU,FloatType:ro,Fog:lx,FogExp2:ax,FramebufferTexture:R9,FrontSide:ac,Frustum:sx,GLBufferAttribute:qH,GLSL1:iU,GLSL3:Pb,GreaterCompare:U4,GreaterDepth:h4,GreaterEqualCompare:z4,GreaterEqualDepth:c4,GreaterEqualStencilFunc:ZO,GreaterStencilFunc:qO,GridHelper:nG,Group:Up,HalfFloatType:go,HemisphereLight:Ax,HemisphereLightHelper:tG,HemisphereLightProbe:MH,IcosahedronGeometry:uv,ImageBitmapLoader:_H,ImageLoader:B0,ImageUtils:RM,IncrementStencilOp:UO,IncrementWrapStencilOp:zO,InstancedBufferAttribute:dm,InstancedBufferGeometry:Bk,InstancedInterleavedBuffer:XH,InstancedMesh:lk,Int16BufferAttribute:VU,Int32BufferAttribute:WU,Int8BufferAttribute:zU,IntType:wM,InterleavedBuffer:ux,InterleavedBufferAttribute:nd,Interpolant:dv,InterpolateDiscrete:A0,InterpolateLinear:T0,InterpolateSmooth:Ny,InvertStencilOp:GO,KeepStencilOp:Fy,KeyframeTrack:kl,LOD:ok,LatheGeometry:lv,Layers:Xf,LessCompare:F4,LessDepth:l4,LessEqualCompare:O4,LessEqualDepth:x2,LessEqualStencilFunc:XO,LessStencilFunc:WO,Light:Wh,LightProbe:Cx,Line:kh,Line3:$H,LineBasicMaterial:Ds,LineCurve:dx,LineCurve3:pk,LineDashedMaterial:Ck,LineLoop:uk,LineSegments:qa,LinearEncoding:CM,LinearFilter:Kr,LinearInterpolant:KM,LinearMipMapLinearFilter:kO,LinearMipMapNearestFilter:RO,LinearMipmapLinearFilter:Rh,LinearMipmapNearestFilter:xM,LinearSRGBColorSpace:Ml,LinearToneMapping:m4,Loader:zo,LoaderUtils:Ub,LoadingManager:QM,LoopOnce:T4,LoopPingPong:L4,LoopRepeat:C4,LuminanceAlphaFormat:b4,LuminanceFormat:_4,MOUSE:$l,Material:Fs,MaterialLoader:Lx,MathUtils:yU,Matrix3:Jn,Matrix4:Hn,MaxEquation:ob,Mesh:qi,MeshBasicMaterial:Gh,MeshDepthMaterial:OM,MeshDistanceMaterial:UM,MeshLambertMaterial:Ak,MeshMatcapMaterial:Tk,MeshNormalMaterial:Ek,MeshPhongMaterial:bk,MeshPhysicalMaterial:_k,MeshStandardMaterial:fv,MeshToonMaterial:Mk,MinEquation:sb,MirroredRepeatWrapping:E0,MixOperation:d4,MultiplyBlending:ib,MultiplyOperation:nv,NearestFilter:Fi,NearestMipMapLinearFilter:PO,NearestMipMapNearestFilter:LO,NearestMipmapLinearFilter:Xg,NearestMipmapNearestFilter:w2,NeverCompare:N4,NeverDepth:o4,NeverStencilFunc:VO,NoBlending:tc,NoColorSpace:Ah,NoToneMapping:iu,NormalAnimationBlendMode:rx,NormalBlending:Wf,NotEqualCompare:B4,NotEqualDepth:f4,NotEqualStencilFunc:YO,NumberKeyframeTrack:D0,Object3D:dr,ObjectLoader:wH,ObjectSpaceNormalMap:k4,OctahedronGeometry:cv,OneFactor:JR,OneMinusDstAlphaFactor:n4,OneMinusDstColorFactor:i4,OneMinusSrcAlphaFactor:vM,OneMinusSrcColorFactor:e4,OrthographicCamera:ou,PCFShadowMap:ex,PCFSoftShadowMap:jg,PMREMGenerator:kb,Path:k0,PerspectiveCamera:mi,Plane:Wu,PlaneGeometry:ov,PlaneHelper:lG,PointLight:Dk,PointLightHelper:QH,Points:ck,PointsMaterial:HM,PolarGridHelper:rG,PolyhedronGeometry:Vh,PositionalAudio:PH,PropertyBinding:pr,PropertyMixer:Gk,QuadraticBezierCurve:WM,QuadraticBezierCurve3:jM,Quaternion:io,QuaternionKeyframeTrack:Cm,QuaternionLinearInterpolant:kk,RED_GREEN_RGTC2_Format:Cb,RED_RGTC1_Format:A4,REVISION:tv,RGBADepthPacking:R4,RGBAFormat:mo,RGBAIntegerFormat:AM,RGBA_ASTC_10x10_Format:Mb,RGBA_ASTC_10x5_Format:Sb,RGBA_ASTC_10x6_Format:_b,RGBA_ASTC_10x8_Format:bb,RGBA_ASTC_12x10_Format:Eb,RGBA_ASTC_12x12_Format:Ab,RGBA_ASTC_4x4_Format:db,RGBA_ASTC_5x4_Format:pb,RGBA_ASTC_5x5_Format:mb,RGBA_ASTC_6x5_Format:gb,RGBA_ASTC_6x6_Format:vb,RGBA_ASTC_8x5_Format:yb,RGBA_ASTC_8x6_Format:xb,RGBA_ASTC_8x8_Format:wb,RGBA_BPTC_Format:Iy,RGBA_ETC2_EAC_Format:fb,RGBA_PVRTC_2BPPV1_Format:cb,RGBA_PVRTC_4BPPV1_Format:ub,RGBA_S3TC_DXT1_Format:Py,RGBA_S3TC_DXT3_Format:Ry,RGBA_S3TC_DXT5_Format:ky,RGB_ETC1_Format:E4,RGB_ETC2_Format:hb,RGB_PVRTC_2BPPV1_Format:lb,RGB_PVRTC_4BPPV1_Format:ab,RGB_S3TC_DXT1_Format:Ly,RGFormat:M4,RGIntegerFormat:EM,RawShaderMaterial:Sk,Ray:hd,Raycaster:a3,RectAreaLight:Ok,RedFormat:bM,RedIntegerFormat:MM,ReinhardToneMapping:g4,RenderTarget:W4,RepeatWrapping:M0,ReplaceStencilOp:OO,ReverseSubtractEquation:$R,RingGeometry:wx,SIGNED_RED_GREEN_RGTC2_Format:Lb,SIGNED_RED_RGTC1_Format:Tb,SRGBColorSpace:Gn,Scene:td,ShaderChunk:qn,ShaderLib:vl,ShaderMaterial:Al,ShadowMaterial:wk,Shape:qf,ShapeGeometry:Sx,ShapePath:hG,ShapeUtils:au,ShortType:w4,Skeleton:cx,SkeletonHelper:JH,SkinnedMesh:ak,Source:Of,Sphere:Pl,SphereGeometry:hv,Spherical:zb,SphericalHarmonics3:Uk,SplineCurve:XM,SpotLight:Fk,SpotLightHelper:KH,Sprite:sk,SpriteMaterial:BM,SrcAlphaFactor:gM,SrcAlphaSaturateFactor:s4,SrcColorFactor:QR,StaticCopyUsage:tU,StaticDrawUsage:L0,StaticReadUsage:JO,StereoCamera:AH,StreamCopyUsage:rU,StreamDrawUsage:KO,StreamReadUsage:eU,StringKeyframeTrack:pd,SubtractEquation:ZR,SubtractiveBlending:rb,TOUCH:Vu,TangentSpaceNormalMap:Hh,TetrahedronGeometry:_x,Texture:Ci,TextureLoader:gH,TorusGeometry:bx,TorusKnotGeometry:Mx,Triangle:Io,TriangleFanDrawMode:FO,TriangleStripDrawMode:NO,TrianglesDrawMode:IO,TubeGeometry:Ex,TwoPassDoubleSide:CO,UVMapping:tx,Uint16BufferAttribute:IM,Uint32BufferAttribute:NM,Uint8BufferAttribute:HU,Uint8ClampedBufferAttribute:GU,Uniform:o3,UniformsGroup:jH,UniformsLib:Gt,UniformsUtils:q4,UnsignedByteType:su,UnsignedInt248Type:bh,UnsignedIntType:$u,UnsignedShort4444Type:SM,UnsignedShort5551Type:_M,UnsignedShortType:nx,VSMShadowMap:dl,Vector2:wt,Vector3:ge,Vector4:Lr,VectorKeyframeTrack:O0,VideoTexture:P9,WebGL1Renderer:rk,WebGL3DRenderTarget:LU,WebGLArrayRenderTarget:CU,WebGLCoordinateSystem:Ql,WebGLCubeRenderTarget:FM,WebGLMultipleRenderTargets:PU,WebGLRenderTarget:El,WebGLRenderer:av,WebGLUtils:ek,WebGPUCoordinateSystem:P0,WireframeGeometry:xk,WrapAroundEnding:C0,ZeroCurvatureEnding:Ff,ZeroFactor:KR,ZeroSlopeEnding:Df,ZeroStencilOp:DO,_SRGBAFormat:S2,sRGBEncoding:Eh},Symbol.toStringTag,{value:"Module"}));var ch={},dG={get exports(){return ch},set exports(t){ch=t}},md={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */md.ConcurrentRoot=1;md.ContinuousEventPriority=4;md.DefaultEventPriority=16;md.DiscreteEventPriority=1;md.IdleEventPriority=536870912;md.LegacyRoot=0;(function(t){t.exports=md})(dG);function pG(t){let e;const n=new Set,r=(u,c)=>{const h=typeof u=="function"?u(e):u;if(h!==e){const f=e;e=c?h:Object.assign({},e,h),n.forEach(d=>d(e,f))}},i=()=>e,s=(u,c=i,h=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let f=c(e);function d(){const v=c(e);if(!h(f,v)){const x=f;u(f=v,x)}}return n.add(d),()=>n.delete(d)},l={setState:r,getState:i,subscribe:(u,c,h)=>c||h?s(u,c,h):(n.add(u),()=>n.delete(u)),destroy:()=>n.clear()};return e=t(r,i,l),l}const mG=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),ET=mG?Be.useEffect:Be.useLayoutEffect;function jk(t){const e=typeof t=="function"?pG(t):t,n=(r=e.getState,i=Object.is)=>{const[,s]=Be.useReducer(w=>w+1,0),o=e.getState(),a=Be.useRef(o),l=Be.useRef(r),u=Be.useRef(i),c=Be.useRef(!1),h=Be.useRef();h.current===void 0&&(h.current=r(o));let f,d=!1;(a.current!==o||l.current!==r||u.current!==i||c.current)&&(f=r(o),d=!i(h.current,f)),ET(()=>{d&&(h.current=f),a.current=o,l.current=r,u.current=i,c.current=!1});const v=Be.useRef(o);ET(()=>{const w=()=>{try{const S=e.getState(),_=l.current(S);u.current(h.current,_)||(a.current=S,h.current=_,s())}catch{c.current=!0,s()}},g=e.subscribe(w);return e.getState()!==v.current&&w(),g},[]);const x=d?f:h.current;return Be.useDebugValue(x),x};return Object.assign(n,e),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const r=[n,e];return{next(){const i=r.length<=0;return{value:r.shift(),done:i}}}},n}var Hb={},gG={get exports(){return Hb},set exports(t){Hb=t}},z0={},vG={get exports(){return z0},set exports(t){z0=t}},Xk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,Y){var j=W.length;W.push(Y);e:for(;0<j;){var re=j-1>>>1,I=W[re];if(0<i(I,Y))W[re]=Y,W[j]=I,j=re;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var Y=W[0],j=W.pop();if(j!==Y){W[0]=j;e:for(var re=0,I=W.length,X=I>>>1;re<X;){var J=2*(re+1)-1,ae=W[J],fe=J+1,Se=W[fe];if(0>i(ae,j))fe<I&&0>i(Se,ae)?(W[re]=Se,W[fe]=j,re=fe):(W[re]=ae,W[J]=j,re=J);else if(fe<I&&0>i(Se,j))W[re]=Se,W[fe]=j,re=fe;else break e}}return Y}function i(W,Y){var j=W.sortIndex-Y.sortIndex;return j!==0?j:W.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,f=3,d=!1,v=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(W){for(var Y=n(u);Y!==null;){if(Y.callback===null)r(u);else if(Y.startTime<=W)r(u),Y.sortIndex=Y.expirationTime,e(l,Y);else break;Y=n(u)}}function T(W){if(x=!1,_(W),!v)if(n(l)!==null)v=!0,se(L);else{var Y=n(u);Y!==null&&ce(T,Y.startTime-W)}}function L(W,Y){v=!1,x&&(x=!1,g(R),R=-1),d=!0;var j=f;try{for(_(Y),h=n(l);h!==null&&(!(h.expirationTime>Y)||W&&!O());){var re=h.callback;if(typeof re=="function"){h.callback=null,f=h.priorityLevel;var I=re(h.expirationTime<=Y);Y=t.unstable_now(),typeof I=="function"?h.callback=I:h===n(l)&&r(l),_(Y)}else r(l);h=n(l)}if(h!==null)var X=!0;else{var J=n(u);J!==null&&ce(T,J.startTime-Y),X=!1}return X}finally{h=null,f=j,d=!1}}var k=!1,N=null,R=-1,P=5,D=-1;function O(){return!(t.unstable_now()-D<P)}function B(){if(N!==null){var W=t.unstable_now();D=W;var Y=!0;try{Y=N(!0,W)}finally{Y?V():(k=!1,N=null)}}else k=!1}var V;if(typeof S=="function")V=function(){S(B)};else if(typeof MessageChannel<"u"){var H=new MessageChannel,ee=H.port2;H.port1.onmessage=B,V=function(){ee.postMessage(null)}}else V=function(){w(B,0)};function se(W){N=W,k||(k=!0,V())}function ce(W,Y){R=w(function(){W(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){v||d||(v=!0,se(L))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(W){switch(f){case 1:case 2:case 3:var Y=3;break;default:Y=f}var j=f;f=Y;try{return W()}finally{f=j}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,Y){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var j=f;f=W;try{return Y()}finally{f=j}},t.unstable_scheduleCallback=function(W,Y,j){var re=t.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?re+j:re):j=re,W){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=j+I,W={id:c++,callback:Y,priorityLevel:W,startTime:j,expirationTime:I,sortIndex:-1},j>re?(W.sortIndex=j,e(u,W),n(l)===null&&W===n(u)&&(x?(g(R),R=-1):x=!0,ce(T,j-re))):(W.sortIndex=I,e(l,W),v||d||(v=!0,se(L))),W},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(W){var Y=f;return function(){var j=f;f=Y;try{return W.apply(this,arguments)}finally{f=j}}}})(Xk);(function(t){t.exports=Xk})(vG);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yG=function(e){var n={},r=Be,i=z0,s=Object.assign;function o(p){for(var m="https://reactjs.org/docs/error-decoder.html?invariant="+p,b=1;b<arguments.length;b++)m+="&args[]="+encodeURIComponent(arguments[b]);return"Minified React error #"+p+"; visit "+m+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),d=Symbol.for("react.provider"),v=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),g=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.offscreen"),L=Symbol.iterator;function k(p){return p===null||typeof p!="object"?null:(p=L&&p[L]||p["@@iterator"],typeof p=="function"?p:null)}function N(p){if(p==null)return null;if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p;switch(p){case c:return"Fragment";case u:return"Portal";case f:return"Profiler";case h:return"StrictMode";case w:return"Suspense";case g:return"SuspenseList"}if(typeof p=="object")switch(p.$$typeof){case v:return(p.displayName||"Context")+".Consumer";case d:return(p._context.displayName||"Context")+".Provider";case x:var m=p.render;return p=p.displayName,p||(p=m.displayName||m.name||"",p=p!==""?"ForwardRef("+p+")":"ForwardRef"),p;case S:return m=p.displayName||null,m!==null?m:N(p.type)||"Memo";case _:m=p._payload,p=p._init;try{return N(p(m))}catch{}}return null}function R(p){var m=p.type;switch(p.tag){case 24:return"Cache";case 9:return(m.displayName||"Context")+".Consumer";case 10:return(m._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return p=m.render,p=p.displayName||p.name||"",m.displayName||(p!==""?"ForwardRef("+p+")":"ForwardRef");case 7:return"Fragment";case 5:return m;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N(m);case 8:return m===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m}return null}function P(p){var m=p,b=p;if(p.alternate)for(;m.return;)m=m.return;else{p=m;do m=p,m.flags&4098&&(b=m.return),p=m.return;while(p)}return m.tag===3?b:null}function D(p){if(P(p)!==p)throw Error(o(188))}function O(p){var m=p.alternate;if(!m){if(m=P(p),m===null)throw Error(o(188));return m!==p?null:p}for(var b=p,E=m;;){var F=b.return;if(F===null)break;var G=F.alternate;if(G===null){if(E=F.return,E!==null){b=E;continue}break}if(F.child===G.child){for(G=F.child;G;){if(G===b)return D(F),p;if(G===E)return D(F),m;G=G.sibling}throw Error(o(188))}if(b.return!==E.return)b=F,E=G;else{for(var be=!1,Oe=F.child;Oe;){if(Oe===b){be=!0,b=F,E=G;break}if(Oe===E){be=!0,E=F,b=G;break}Oe=Oe.sibling}if(!be){for(Oe=G.child;Oe;){if(Oe===b){be=!0,b=G,E=F;break}if(Oe===E){be=!0,E=G,b=F;break}Oe=Oe.sibling}if(!be)throw Error(o(189))}}if(b.alternate!==E)throw Error(o(190))}if(b.tag!==3)throw Error(o(188));return b.stateNode.current===b?p:m}function B(p){return p=O(p),p!==null?V(p):null}function V(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){var m=V(p);if(m!==null)return m;p=p.sibling}return null}function H(p){if(p.tag===5||p.tag===6)return p;for(p=p.child;p!==null;){if(p.tag!==4){var m=H(p);if(m!==null)return m}p=p.sibling}return null}var ee=Array.isArray,se=e.getPublicInstance,ce=e.getRootHostContext,W=e.getChildHostContext,Y=e.prepareForCommit,j=e.resetAfterCommit,re=e.createInstance,I=e.appendInitialChild,X=e.finalizeInitialChildren,J=e.prepareUpdate,ae=e.shouldSetTextContent,fe=e.createTextInstance,Se=e.scheduleTimeout,Ee=e.cancelTimeout,Ce=e.noTimeout,$e=e.isPrimaryRenderer,ke=e.supportsMutation,he=e.supportsPersistence,De=e.supportsHydration,ze=e.getInstanceFromNode,pe=e.preparePortalMount,K=e.getCurrentEventPriority,tt=e.detachDeletedInstance,Ze=e.supportsMicrotasks,Ne=e.scheduleMicrotask,Ke=e.supportsTestSelectors,ft=e.findFiberRoot,vt=e.getBoundingRect,ue=e.getTextContent,Q=e.isHiddenSubtree,Pe=e.matchAccessibilityRole,et=e.setFocusIfFocusable,Qe=e.setupIntersectionObserver,dt=e.appendChild,lt=e.appendChildToContainer,it=e.commitTextUpdate,Te=e.commitMount,Nt=e.commitUpdate,At=e.insertBefore,Ct=e.insertInContainerBefore,bt=e.removeChild,xe=e.removeChildFromContainer,Ye=e.resetTextContent,st=e.hideInstance,Ae=e.hideTextInstance,Fe=e.unhideInstance,Ge=e.unhideTextInstance,yt=e.clearContainer,pt=e.cloneInstance,kt=e.createContainerChildSet,Vt=e.appendChildToContainerChildSet,yn=e.finalizeContainerChildren,Nn=e.replaceContainerChildren,gn=e.cloneHiddenInstance,kn=e.cloneHiddenTextInstance,Ft=e.canHydrateInstance,Vr=e.canHydrateTextInstance,Ir=e.canHydrateSuspenseInstance,Zn=e.isSuspenseInstancePending,vn=e.isSuspenseInstanceFallback,$n=e.registerSuspenseInstanceRetry,Wn=e.getNextHydratableSibling,pn=e.getFirstHydratableChild,Wr=e.getFirstHydratableChildWithinContainer,oi=e.getFirstHydratableChildWithinSuspenseInstance,q=e.hydrateInstance,U=e.hydrateTextInstance,ne=e.hydrateSuspenseInstance,me=e.getNextHydratableInstanceAfterSuspenseInstance,de=e.commitHydratedContainer,we=e.commitHydratedSuspenseInstance,Xe=e.clearSuspenseBoundary,qe=e.clearSuspenseBoundaryFromContainer,ot=e.shouldDeleteUnhydratedTailInstances,rt=e.didNotMatchHydratedContainerTextInstance,gt=e.didNotMatchHydratedTextInstance,at;function Wt(p){if(at===void 0)try{throw Error()}catch(b){var m=b.stack.trim().match(/\n( *(at )?)/);at=m&&m[1]||""}return`
`+at+p}var It=!1;function Ot(p,m){if(!p||It)return"";It=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(m)if(m=function(){throw Error()},Object.defineProperty(m.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(m,[])}catch(Dt){var E=Dt}Reflect.construct(p,[],m)}else{try{m.call()}catch(Dt){E=Dt}p.call(m.prototype)}else{try{throw Error()}catch(Dt){E=Dt}p()}}catch(Dt){if(Dt&&E&&typeof Dt.stack=="string"){for(var F=Dt.stack.split(`
`),G=E.stack.split(`
`),be=F.length-1,Oe=G.length-1;1<=be&&0<=Oe&&F[be]!==G[Oe];)Oe--;for(;1<=be&&0<=Oe;be--,Oe--)if(F[be]!==G[Oe]){if(be!==1||Oe!==1)do if(be--,Oe--,0>Oe||F[be]!==G[Oe]){var mt=`
`+F[be].replace(" at new "," at ");return p.displayName&&mt.includes("<anonymous>")&&(mt=mt.replace("<anonymous>",p.displayName)),mt}while(1<=be&&0<=Oe);break}}}finally{It=!1,Error.prepareStackTrace=b}return(p=p?p.displayName||p.name:"")?Wt(p):""}var $t=Object.prototype.hasOwnProperty,Qt=[],sn=-1;function zt(p){return{current:p}}function on(p){0>sn||(p.current=Qt[sn],Qt[sn]=null,sn--)}function jt(p,m){sn++,Qt[sn]=p.current,p.current=m}var ln={},fn=zt(ln),xn=zt(!1),tr=ln;function Qn(p,m){var b=p.type.contextTypes;if(!b)return ln;var E=p.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===m)return E.__reactInternalMemoizedMaskedChildContext;var F={},G;for(G in b)F[G]=m[G];return E&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=m,p.__reactInternalMemoizedMaskedChildContext=F),F}function cr(p){return p=p.childContextTypes,p!=null}function jr(){on(xn),on(fn)}function dn(p,m,b){if(fn.current!==ln)throw Error(o(168));jt(fn,m),jt(xn,b)}function _r(p,m,b){var E=p.stateNode;if(m=m.childContextTypes,typeof E.getChildContext!="function")return b;E=E.getChildContext();for(var F in E)if(!(F in m))throw Error(o(108,R(p)||"Unknown",F));return s({},b,E)}function Rn(p){return p=(p=p.stateNode)&&p.__reactInternalMemoizedMergedChildContext||ln,tr=fn.current,jt(fn,p),jt(xn,xn.current),!0}function jn(p,m,b){var E=p.stateNode;if(!E)throw Error(o(169));b?(p=_r(p,m,tr),E.__reactInternalMemoizedMergedChildContext=p,on(xn),on(fn),jt(fn,p)):on(xn),jt(xn,b)}var Tr=Math.clz32?Math.clz32:So,Go=Math.log,zi=Math.LN2;function So(p){return p>>>=0,p===0?32:31-(Go(p)/zi|0)|0}var pu=64,gc=4194304;function Za(p){switch(p&-p){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return p&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return p}}function vc(p,m){var b=p.pendingLanes;if(b===0)return 0;var E=0,F=p.suspendedLanes,G=p.pingedLanes,be=b&268435455;if(be!==0){var Oe=be&~F;Oe!==0?E=Za(Oe):(G&=be,G!==0&&(E=Za(G)))}else be=b&~F,be!==0?E=Za(be):G!==0&&(E=Za(G));if(E===0)return 0;if(m!==0&&m!==E&&!(m&F)&&(F=E&-E,G=m&-m,F>=G||F===16&&(G&4194240)!==0))return m;if(E&4&&(E|=b&16),m=p.entangledLanes,m!==0)for(p=p.entanglements,m&=E;0<m;)b=31-Tr(m),F=1<<b,E|=p[b],m&=~F;return E}function km(p,m){switch(p){case 1:case 2:case 4:return m+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Im(p,m){for(var b=p.suspendedLanes,E=p.pingedLanes,F=p.expirationTimes,G=p.pendingLanes;0<G;){var be=31-Tr(G),Oe=1<<be,mt=F[be];mt===-1?(!(Oe&b)||Oe&E)&&(F[be]=km(Oe,m)):mt<=m&&(p.expiredLanes|=Oe),G&=~Oe}}function Vo(p){return p=p.pendingLanes&-1073741825,p!==0?p:p&1073741824?1073741824:0}function Ol(p){for(var m=[],b=0;31>b;b++)m.push(p);return m}function pa(p,m,b){p.pendingLanes|=m,m!==536870912&&(p.suspendedLanes=0,p.pingedLanes=0),p=p.eventTimes,m=31-Tr(m),p[m]=b}function yd(p,m){var b=p.pendingLanes&~m;p.pendingLanes=m,p.suspendedLanes=0,p.pingedLanes=0,p.expiredLanes&=m,p.mutableReadLanes&=m,p.entangledLanes&=m,m=p.entanglements;var E=p.eventTimes;for(p=p.expirationTimes;0<b;){var F=31-Tr(b),G=1<<F;m[F]=0,E[F]=-1,p[F]=-1,b&=~G}}function Hi(p,m){var b=p.entangledLanes|=m;for(p=p.entanglements;b;){var E=31-Tr(b),F=1<<E;F&m|p[E]&m&&(p[E]|=m),b&=~F}}var or=0;function Zh(p){return p&=-p,1<p?4<p?p&268435455?16:536870912:4:1}var bn=i.unstable_scheduleCallback,xd=i.unstable_cancelCallback,Nm=i.unstable_shouldYield,ma=i.unstable_requestPaint,ai=i.unstable_now,yc=i.unstable_ImmediatePriority,xc=i.unstable_UserBlockingPriority,mu=i.unstable_NormalPriority,Fm=i.unstable_IdlePriority,wc=null,_o=null;function $h(p){if(_o&&typeof _o.onCommitFiberRoot=="function")try{_o.onCommitFiberRoot(wc,p,void 0,(p.current.flags&128)===128)}catch{}}function gu(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var Yi=typeof Object.is=="function"?Object.is:gu,Wo=null,ga=!1,vu=!1;function yu(p){Wo===null?Wo=[p]:Wo.push(p)}function wd(p){ga=!0,yu(p)}function oo(){if(!vu&&Wo!==null){vu=!0;var p=0,m=or;try{var b=Wo;for(or=1;p<b.length;p++){var E=b[p];do E=E(!0);while(E!==null)}Wo=null,ga=!1}catch(F){throw Wo!==null&&(Wo=Wo.slice(p+1)),bn(yc,oo),F}finally{or=m,vu=!1}}return null}var Sd=a.ReactCurrentBatchConfig;function xu(p,m){if(Yi(p,m))return!0;if(typeof p!="object"||p===null||typeof m!="object"||m===null)return!1;var b=Object.keys(p),E=Object.keys(m);if(b.length!==E.length)return!1;for(E=0;E<b.length;E++){var F=b[E];if(!$t.call(m,F)||!Yi(p[F],m[F]))return!1}return!0}function va(p){switch(p.tag){case 5:return Wt(p.type);case 16:return Wt("Lazy");case 13:return Wt("Suspense");case 19:return Wt("SuspenseList");case 0:case 2:case 15:return p=Ot(p.type,!1),p;case 11:return p=Ot(p.type.render,!1),p;case 1:return p=Ot(p.type,!0),p;default:return""}}function Pi(p,m){if(p&&p.defaultProps){m=s({},m),p=p.defaultProps;for(var b in p)m[b]===void 0&&(m[b]=p[b]);return m}return m}var Sc=zt(null),jo=null,ls=null,wu=null;function $a(){wu=ls=jo=null}function _d(p,m,b){$e?(jt(Sc,m._currentValue),m._currentValue=b):(jt(Sc,m._currentValue2),m._currentValue2=b)}function Ul(p){var m=Sc.current;on(Sc),$e?p._currentValue=m:p._currentValue2=m}function Kh(p,m,b){for(;p!==null;){var E=p.alternate;if((p.childLanes&m)!==m?(p.childLanes|=m,E!==null&&(E.childLanes|=m)):E!==null&&(E.childLanes&m)!==m&&(E.childLanes|=m),p===b)break;p=p.return}}function ya(p,m){jo=p,wu=ls=null,p=p.dependencies,p!==null&&p.firstContext!==null&&(p.lanes&m&&(ps=!0),p.firstContext=null)}function us(p){var m=$e?p._currentValue:p._currentValue2;if(wu!==p)if(p={context:p,memoizedValue:m,next:null},ls===null){if(jo===null)throw Error(o(308));ls=p,jo.dependencies={lanes:0,firstContext:p}}else ls=ls.next=p;return m}var ao=null,lo=!1;function Su(p){p.updateQueue={baseState:p.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _c(p,m){p=p.updateQueue,m.updateQueue===p&&(m.updateQueue={baseState:p.baseState,firstBaseUpdate:p.firstBaseUpdate,lastBaseUpdate:p.lastBaseUpdate,shared:p.shared,effects:p.effects})}function bo(p,m){return{eventTime:p,lane:m,tag:0,payload:null,callback:null,next:null}}function xa(p,m){var b=p.updateQueue;b!==null&&(b=b.shared,fi!==null&&p.mode&1&&!(Un&2)?(p=b.interleaved,p===null?(m.next=m,ao===null?ao=[b]:ao.push(b)):(m.next=p.next,p.next=m),b.interleaved=m):(p=b.pending,p===null?m.next=m:(m.next=p.next,p.next=m),b.pending=m))}function Ka(p,m,b){if(m=m.updateQueue,m!==null&&(m=m.shared,(b&4194240)!==0)){var E=m.lanes;E&=p.pendingLanes,b|=E,m.lanes=b,Hi(p,b)}}function Bl(p,m){var b=p.updateQueue,E=p.alternate;if(E!==null&&(E=E.updateQueue,b===E)){var F=null,G=null;if(b=b.firstBaseUpdate,b!==null){do{var be={eventTime:b.eventTime,lane:b.lane,tag:b.tag,payload:b.payload,callback:b.callback,next:null};G===null?F=G=be:G=G.next=be,b=b.next}while(b!==null);G===null?F=G=m:G=G.next=m}else F=G=m;b={baseState:E.baseState,firstBaseUpdate:F,lastBaseUpdate:G,shared:E.shared,effects:E.effects},p.updateQueue=b;return}p=b.lastBaseUpdate,p===null?b.firstBaseUpdate=m:p.next=m,b.lastBaseUpdate=m}function zl(p,m,b,E){var F=p.updateQueue;lo=!1;var G=F.firstBaseUpdate,be=F.lastBaseUpdate,Oe=F.shared.pending;if(Oe!==null){F.shared.pending=null;var mt=Oe,Dt=mt.next;mt.next=null,be===null?G=Dt:be.next=Dt,be=mt;var Jt=p.alternate;Jt!==null&&(Jt=Jt.updateQueue,Oe=Jt.lastBaseUpdate,Oe!==be&&(Oe===null?Jt.firstBaseUpdate=Dt:Oe.next=Dt,Jt.lastBaseUpdate=mt))}if(G!==null){var Bn=F.baseState;be=0,Jt=Dt=mt=null,Oe=G;do{var Sn=Oe.lane,Fr=Oe.eventTime;if((E&Sn)===Sn){Jt!==null&&(Jt=Jt.next={eventTime:Fr,lane:0,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null});e:{var hn=p,Hs=Oe;switch(Sn=m,Fr=b,Hs.tag){case 1:if(hn=Hs.payload,typeof hn=="function"){Bn=hn.call(Fr,Bn,Sn);break e}Bn=hn;break e;case 3:hn.flags=hn.flags&-65537|128;case 0:if(hn=Hs.payload,Sn=typeof hn=="function"?hn.call(Fr,Bn,Sn):hn,Sn==null)break e;Bn=s({},Bn,Sn);break e;case 2:lo=!0}}Oe.callback!==null&&Oe.lane!==0&&(p.flags|=64,Sn=F.effects,Sn===null?F.effects=[Oe]:Sn.push(Oe))}else Fr={eventTime:Fr,lane:Sn,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null},Jt===null?(Dt=Jt=Fr,mt=Bn):Jt=Jt.next=Fr,be|=Sn;if(Oe=Oe.next,Oe===null){if(Oe=F.shared.pending,Oe===null)break;Sn=Oe,Oe=Sn.next,Sn.next=null,F.lastBaseUpdate=Sn,F.shared.pending=null}}while(1);if(Jt===null&&(mt=Bn),F.baseState=mt,F.firstBaseUpdate=Dt,F.lastBaseUpdate=Jt,m=F.shared.interleaved,m!==null){F=m;do be|=F.lane,F=F.next;while(F!==m)}else G===null&&(F.shared.lanes=0);Ko|=be,p.lanes=be,p.memoizedState=Bn}}function Ja(p,m,b){if(p=m.effects,m.effects=null,p!==null)for(m=0;m<p.length;m++){var E=p[m],F=E.callback;if(F!==null){if(E.callback=null,E=b,typeof F!="function")throw Error(o(191,F));F.call(E)}}}var bc=new r.Component().refs;function A(p,m,b,E){m=p.memoizedState,b=b(E,m),b=b==null?m:s({},m,b),p.memoizedState=b,p.lanes===0&&(p.updateQueue.baseState=b)}var $={isMounted:function(p){return(p=p._reactInternals)?P(p)===p:!1},enqueueSetState:function(p,m,b){p=p._reactInternals;var E=vs(),F=Qo(p),G=bo(E,F);G.payload=m,b!=null&&(G.callback=b),xa(p,G),m=Bs(p,F,E),m!==null&&Ka(m,p,F)},enqueueReplaceState:function(p,m,b){p=p._reactInternals;var E=vs(),F=Qo(p),G=bo(E,F);G.tag=1,G.payload=m,b!=null&&(G.callback=b),xa(p,G),m=Bs(p,F,E),m!==null&&Ka(m,p,F)},enqueueForceUpdate:function(p,m){p=p._reactInternals;var b=vs(),E=Qo(p),F=bo(b,E);F.tag=2,m!=null&&(F.callback=m),xa(p,F),m=Bs(p,E,b),m!==null&&Ka(m,p,E)}};function _e(p,m,b,E,F,G,be){return p=p.stateNode,typeof p.shouldComponentUpdate=="function"?p.shouldComponentUpdate(E,G,be):m.prototype&&m.prototype.isPureReactComponent?!xu(b,E)||!xu(F,G):!0}function Le(p,m,b){var E=!1,F=ln,G=m.contextType;return typeof G=="object"&&G!==null?G=us(G):(F=cr(m)?tr:fn.current,E=m.contextTypes,G=(E=E!=null)?Qn(p,F):ln),m=new m(b,G),p.memoizedState=m.state!==null&&m.state!==void 0?m.state:null,m.updater=$,p.stateNode=m,m._reactInternals=p,E&&(p=p.stateNode,p.__reactInternalMemoizedUnmaskedChildContext=F,p.__reactInternalMemoizedMaskedChildContext=G),m}function Ve(p,m,b,E){p=m.state,typeof m.componentWillReceiveProps=="function"&&m.componentWillReceiveProps(b,E),typeof m.UNSAFE_componentWillReceiveProps=="function"&&m.UNSAFE_componentWillReceiveProps(b,E),m.state!==p&&$.enqueueReplaceState(m,m.state,null)}function ct(p,m,b,E){var F=p.stateNode;F.props=b,F.state=p.memoizedState,F.refs=bc,Su(p);var G=m.contextType;typeof G=="object"&&G!==null?F.context=us(G):(G=cr(m)?tr:fn.current,F.context=Qn(p,G)),F.state=p.memoizedState,G=m.getDerivedStateFromProps,typeof G=="function"&&(A(p,m,G,b),F.state=p.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof F.getSnapshotBeforeUpdate=="function"||typeof F.UNSAFE_componentWillMount!="function"&&typeof F.componentWillMount!="function"||(m=F.state,typeof F.componentWillMount=="function"&&F.componentWillMount(),typeof F.UNSAFE_componentWillMount=="function"&&F.UNSAFE_componentWillMount(),m!==F.state&&$.enqueueReplaceState(F,F.state,null),zl(p,b,F,E),F.state=p.memoizedState),typeof F.componentDidMount=="function"&&(p.flags|=4194308)}var Et=[],Ht=0,an=null,En=0,cn=[],Tn=0,wr=null,gr=1,br="";function ti(p,m){Et[Ht++]=En,Et[Ht++]=an,an=p,En=m}function Ri(p,m,b){cn[Tn++]=gr,cn[Tn++]=br,cn[Tn++]=wr,wr=p;var E=gr;p=br;var F=32-Tr(E)-1;E&=~(1<<F),b+=1;var G=32-Tr(m)+F;if(30<G){var be=F-F%5;G=(E&(1<<be)-1).toString(32),E>>=be,F-=be,gr=1<<32-Tr(m)+F|b<<F|E,br=G+p}else gr=1<<G|b<<F|E,br=p}function uo(p){p.return!==null&&(ti(p,1),Ri(p,1,0))}function Es(p){for(;p===an;)an=Et[--Ht],Et[Ht]=null,En=Et[--Ht],Et[Ht]=null;for(;p===wr;)wr=cn[--Tn],cn[Tn]=null,br=cn[--Tn],cn[Tn]=null,gr=cn[--Tn],cn[Tn]=null}var ni=null,cs=null,Mr=!1,Qa=!1,hs=null;function Mc(p,m){var b=ka(5,null,null,0);b.elementType="DELETED",b.stateNode=m,b.return=p,m=p.deletions,m===null?(p.deletions=[b],p.flags|=16):m.push(b)}function Ec(p,m){switch(p.tag){case 5:return m=Ft(m,p.type,p.pendingProps),m!==null?(p.stateNode=m,ni=p,cs=pn(m),!0):!1;case 6:return m=Vr(m,p.pendingProps),m!==null?(p.stateNode=m,ni=p,cs=null,!0):!1;case 13:if(m=Ir(m),m!==null){var b=wr!==null?{id:gr,overflow:br}:null;return p.memoizedState={dehydrated:m,treeContext:b,retryLane:1073741824},b=ka(18,null,null,0),b.stateNode=m,b.return=p,p.child=b,ni=p,cs=null,!0}return!1;default:return!1}}function Hl(p){return(p.mode&1)!==0&&(p.flags&128)===0}function ki(p){if(Mr){var m=cs;if(m){var b=m;if(!Ec(p,m)){if(Hl(p))throw Error(o(418));m=Wn(b);var E=ni;m&&Ec(p,m)?Mc(E,b):(p.flags=p.flags&-4097|2,Mr=!1,ni=p)}}else{if(Hl(p))throw Error(o(418));p.flags=p.flags&-4097|2,Mr=!1,ni=p}}}function _u(p){for(p=p.return;p!==null&&p.tag!==5&&p.tag!==3&&p.tag!==13;)p=p.return;ni=p}function wa(p){if(!De||p!==ni)return!1;if(!Mr)return _u(p),Mr=!0,!1;if(p.tag!==3&&(p.tag!==5||ot(p.type)&&!ae(p.type,p.memoizedProps))){var m=cs;if(m){if(Hl(p)){for(p=cs;p;)p=Wn(p);throw Error(o(418))}for(;m;)Mc(p,m),m=Wn(m)}}if(_u(p),p.tag===13){if(!De)throw Error(o(316));if(p=p.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(o(317));cs=me(p)}else cs=ni?Wn(p.stateNode):null;return!0}function Xo(){De&&(cs=ni=null,Qa=Mr=!1)}function bu(p){hs===null?hs=[p]:hs.push(p)}function Gi(p,m,b){if(p=b.ref,p!==null&&typeof p!="function"&&typeof p!="object"){if(b._owner){if(b=b._owner,b){if(b.tag!==1)throw Error(o(309));var E=b.stateNode}if(!E)throw Error(o(147,p));var F=E,G=""+p;return m!==null&&m.ref!==null&&typeof m.ref=="function"&&m.ref._stringRef===G?m.ref:(m=function(be){var Oe=F.refs;Oe===bc&&(Oe=F.refs={}),be===null?delete Oe[G]:Oe[G]=be},m._stringRef=G,m)}if(typeof p!="string")throw Error(o(284));if(!b._owner)throw Error(o(290,p))}return p}function Ac(p,m){throw p=Object.prototype.toString.call(m),Error(o(31,p==="[object Object]"?"object with keys {"+Object.keys(m).join(", ")+"}":p))}function Tc(p){var m=p._init;return m(p._payload)}function Jh(p){function m(Je,He){if(p){var ut=Je.deletions;ut===null?(Je.deletions=[He],Je.flags|=16):ut.push(He)}}function b(Je,He){if(!p)return null;for(;He!==null;)m(Je,He),He=He.sibling;return null}function E(Je,He){for(Je=new Map;He!==null;)He.key!==null?Je.set(He.key,He):Je.set(He.index,He),He=He.sibling;return Je}function F(Je,He){return Je=zc(Je,He),Je.index=0,Je.sibling=null,Je}function G(Je,He,ut){return Je.index=ut,p?(ut=Je.alternate,ut!==null?(ut=ut.index,ut<He?(Je.flags|=2,He):ut):(Je.flags|=2,He)):(Je.flags|=1048576,He)}function be(Je){return p&&Je.alternate===null&&(Je.flags|=2),Je}function Oe(Je,He,ut,Yt){return He===null||He.tag!==6?(He=ew(ut,Je.mode,Yt),He.return=Je,He):(He=F(He,ut),He.return=Je,He)}function mt(Je,He,ut,Yt){var un=ut.type;return un===c?Jt(Je,He,ut.props.children,Yt,ut.key):He!==null&&(He.elementType===un||typeof un=="object"&&un!==null&&un.$$typeof===_&&Tc(un)===He.type)?(Yt=F(He,ut.props),Yt.ref=Gi(Je,He,ut),Yt.return=Je,Yt):(Yt=Hv(ut.type,ut.key,ut.props,null,Je.mode,Yt),Yt.ref=Gi(Je,He,ut),Yt.return=Je,Yt)}function Dt(Je,He,ut,Yt){return He===null||He.tag!==4||He.stateNode.containerInfo!==ut.containerInfo||He.stateNode.implementation!==ut.implementation?(He=tw(ut,Je.mode,Yt),He.return=Je,He):(He=F(He,ut.children||[]),He.return=Je,He)}function Jt(Je,He,ut,Yt,un){return He===null||He.tag!==7?(He=hf(ut,Je.mode,Yt,un),He.return=Je,He):(He=F(He,ut),He.return=Je,He)}function Bn(Je,He,ut){if(typeof He=="string"&&He!==""||typeof He=="number")return He=ew(""+He,Je.mode,ut),He.return=Je,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case l:return ut=Hv(He.type,He.key,He.props,null,Je.mode,ut),ut.ref=Gi(Je,null,He),ut.return=Je,ut;case u:return He=tw(He,Je.mode,ut),He.return=Je,He;case _:var Yt=He._init;return Bn(Je,Yt(He._payload),ut)}if(ee(He)||k(He))return He=hf(He,Je.mode,ut,null),He.return=Je,He;Ac(Je,He)}return null}function Sn(Je,He,ut,Yt){var un=He!==null?He.key:null;if(typeof ut=="string"&&ut!==""||typeof ut=="number")return un!==null?null:Oe(Je,He,""+ut,Yt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case l:return ut.key===un?mt(Je,He,ut,Yt):null;case u:return ut.key===un?Dt(Je,He,ut,Yt):null;case _:return un=ut._init,Sn(Je,He,un(ut._payload),Yt)}if(ee(ut)||k(ut))return un!==null?null:Jt(Je,He,ut,Yt,null);Ac(Je,ut)}return null}function Fr(Je,He,ut,Yt,un){if(typeof Yt=="string"&&Yt!==""||typeof Yt=="number")return Je=Je.get(ut)||null,Oe(He,Je,""+Yt,un);if(typeof Yt=="object"&&Yt!==null){switch(Yt.$$typeof){case l:return Je=Je.get(Yt.key===null?ut:Yt.key)||null,mt(He,Je,Yt,un);case u:return Je=Je.get(Yt.key===null?ut:Yt.key)||null,Dt(He,Je,Yt,un);case _:var Kn=Yt._init;return Fr(Je,He,ut,Kn(Yt._payload),un)}if(ee(Yt)||k(Yt))return Je=Je.get(ut)||null,Jt(He,Je,Yt,un,null);Ac(He,Yt)}return null}function hn(Je,He,ut,Yt){for(var un=null,Kn=null,zn=He,yr=He=0,ys=null;zn!==null&&yr<ut.length;yr++){zn.index>yr?(ys=zn,zn=null):ys=zn.sibling;var xr=Sn(Je,zn,ut[yr],Yt);if(xr===null){zn===null&&(zn=ys);break}p&&zn&&xr.alternate===null&&m(Je,zn),He=G(xr,He,yr),Kn===null?un=xr:Kn.sibling=xr,Kn=xr,zn=ys}if(yr===ut.length)return b(Je,zn),Mr&&ti(Je,yr),un;if(zn===null){for(;yr<ut.length;yr++)zn=Bn(Je,ut[yr],Yt),zn!==null&&(He=G(zn,He,yr),Kn===null?un=zn:Kn.sibling=zn,Kn=zn);return Mr&&ti(Je,yr),un}for(zn=E(Je,zn);yr<ut.length;yr++)ys=Fr(zn,Je,yr,ut[yr],Yt),ys!==null&&(p&&ys.alternate!==null&&zn.delete(ys.key===null?yr:ys.key),He=G(ys,He,yr),Kn===null?un=ys:Kn.sibling=ys,Kn=ys);return p&&zn.forEach(function(Hc){return m(Je,Hc)}),Mr&&ti(Je,yr),un}function Hs(Je,He,ut,Yt){var un=k(ut);if(typeof un!="function")throw Error(o(150));if(ut=un.call(ut),ut==null)throw Error(o(151));for(var Kn=un=null,zn=He,yr=He=0,ys=null,xr=ut.next();zn!==null&&!xr.done;yr++,xr=ut.next()){zn.index>yr?(ys=zn,zn=null):ys=zn.sibling;var Hc=Sn(Je,zn,xr.value,Yt);if(Hc===null){zn===null&&(zn=ys);break}p&&zn&&Hc.alternate===null&&m(Je,zn),He=G(Hc,He,yr),Kn===null?un=Hc:Kn.sibling=Hc,Kn=Hc,zn=ys}if(xr.done)return b(Je,zn),Mr&&ti(Je,yr),un;if(zn===null){for(;!xr.done;yr++,xr=ut.next())xr=Bn(Je,xr.value,Yt),xr!==null&&(He=G(xr,He,yr),Kn===null?un=xr:Kn.sibling=xr,Kn=xr);return Mr&&ti(Je,yr),un}for(zn=E(Je,zn);!xr.done;yr++,xr=ut.next())xr=Fr(zn,Je,yr,xr.value,Yt),xr!==null&&(p&&xr.alternate!==null&&zn.delete(xr.key===null?yr:xr.key),He=G(xr,He,yr),Kn===null?un=xr:Kn.sibling=xr,Kn=xr);return p&&zn.forEach(function(OF){return m(Je,OF)}),Mr&&ti(Je,yr),un}function Ia(Je,He,ut,Yt){if(typeof ut=="object"&&ut!==null&&ut.type===c&&ut.key===null&&(ut=ut.props.children),typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case l:e:{for(var un=ut.key,Kn=He;Kn!==null;){if(Kn.key===un){if(un=ut.type,un===c){if(Kn.tag===7){b(Je,Kn.sibling),He=F(Kn,ut.props.children),He.return=Je,Je=He;break e}}else if(Kn.elementType===un||typeof un=="object"&&un!==null&&un.$$typeof===_&&Tc(un)===Kn.type){b(Je,Kn.sibling),He=F(Kn,ut.props),He.ref=Gi(Je,Kn,ut),He.return=Je,Je=He;break e}b(Je,Kn);break}else m(Je,Kn);Kn=Kn.sibling}ut.type===c?(He=hf(ut.props.children,Je.mode,Yt,ut.key),He.return=Je,Je=He):(Yt=Hv(ut.type,ut.key,ut.props,null,Je.mode,Yt),Yt.ref=Gi(Je,He,ut),Yt.return=Je,Je=Yt)}return be(Je);case u:e:{for(Kn=ut.key;He!==null;){if(He.key===Kn)if(He.tag===4&&He.stateNode.containerInfo===ut.containerInfo&&He.stateNode.implementation===ut.implementation){b(Je,He.sibling),He=F(He,ut.children||[]),He.return=Je,Je=He;break e}else{b(Je,He);break}else m(Je,He);He=He.sibling}He=tw(ut,Je.mode,Yt),He.return=Je,Je=He}return be(Je);case _:return Kn=ut._init,Ia(Je,He,Kn(ut._payload),Yt)}if(ee(ut))return hn(Je,He,ut,Yt);if(k(ut))return Hs(Je,He,ut,Yt);Ac(Je,ut)}return typeof ut=="string"&&ut!==""||typeof ut=="number"?(ut=""+ut,He!==null&&He.tag===6?(b(Je,He.sibling),He=F(He,ut),He.return=Je,Je=He):(b(Je,He),He=ew(ut,Je.mode,Yt),He.return=Je,Je=He),be(Je)):b(Je,He)}return Ia}var Zi=Jh(!0),Mu=Jh(!1),Gl={},As=zt(Gl),Mo=zt(Gl),Eo=zt(Gl);function Xr(p){if(p===Gl)throw Error(o(174));return p}function $i(p,m){jt(Eo,m),jt(Mo,p),jt(As,Gl),p=ce(m),on(As),jt(As,p)}function co(){on(As),on(Mo),on(Eo)}function Sa(p){var m=Xr(Eo.current),b=Xr(As.current);m=W(b,p.type,m),b!==m&&(jt(Mo,p),jt(As,m))}function qo(p){Mo.current===p&&(on(As),on(Mo))}var Er=zt(0);function Ao(p){for(var m=p;m!==null;){if(m.tag===13){var b=m.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||Zn(b)||vn(b)))return m}else if(m.tag===19&&m.memoizedProps.revealOrder!==void 0){if(m.flags&128)return m}else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===p)break;for(;m.sibling===null;){if(m.return===null||m.return===p)return null;m=m.return}m.sibling.return=m.return,m=m.sibling}return null}var qr=[];function Eu(){for(var p=0;p<qr.length;p++){var m=qr[p];$e?m._workInProgressVersionPrimary=null:m._workInProgressVersionSecondary=null}qr.length=0}var Vi=a.ReactCurrentDispatcher,Yr=a.ReactCurrentBatchConfig,Yo=0,Nr=null,Si=null,Br=null,_a=!1,To=!1,Zo=0,Cc=0;function ri(){throw Error(o(321))}function ba(p,m){if(m===null)return!1;for(var b=0;b<m.length&&b<p.length;b++)if(!Yi(p[b],m[b]))return!1;return!0}function Au(p,m,b,E,F,G){if(Yo=G,Nr=m,m.memoizedState=null,m.updateQueue=null,m.lanes=0,Vi.current=p===null||p.memoizedState===null?rf:qx,p=b(E,F),To){G=0;do{if(To=!1,Zo=0,25<=G)throw Error(o(301));G+=1,Br=Si=null,m.updateQueue=null,Vi.current=Yx,p=b(E,F)}while(To)}if(Vi.current=kc,m=Si!==null&&Si.next!==null,Yo=0,Br=Si=Nr=null,_a=!1,m)throw Error(o(300));return p}function Os(){var p=Zo!==0;return Zo=0,p}function _i(){var p={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Br===null?Nr.memoizedState=Br=p:Br=Br.next=p,Br}function nr(){if(Si===null){var p=Nr.alternate;p=p!==null?p.memoizedState:null}else p=Si.next;var m=Br===null?Nr.memoizedState:Br.next;if(m!==null)Br=m,Si=p;else{if(p===null)throw Error(o(310));Si=p,p={memoizedState:Si.memoizedState,baseState:Si.baseState,baseQueue:Si.baseQueue,queue:Si.queue,next:null},Br===null?Nr.memoizedState=Br=p:Br=Br.next=p}return Br}function hr(p,m){return typeof m=="function"?m(p):m}function zr(p){var m=nr(),b=m.queue;if(b===null)throw Error(o(311));b.lastRenderedReducer=p;var E=Si,F=E.baseQueue,G=b.pending;if(G!==null){if(F!==null){var be=F.next;F.next=G.next,G.next=be}E.baseQueue=F=G,b.pending=null}if(F!==null){G=F.next,E=E.baseState;var Oe=be=null,mt=null,Dt=G;do{var Jt=Dt.lane;if((Yo&Jt)===Jt)mt!==null&&(mt=mt.next={lane:0,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null}),E=Dt.hasEagerState?Dt.eagerState:p(E,Dt.action);else{var Bn={lane:Jt,action:Dt.action,hasEagerState:Dt.hasEagerState,eagerState:Dt.eagerState,next:null};mt===null?(Oe=mt=Bn,be=E):mt=mt.next=Bn,Nr.lanes|=Jt,Ko|=Jt}Dt=Dt.next}while(Dt!==null&&Dt!==G);mt===null?be=E:mt.next=Oe,Yi(E,m.memoizedState)||(ps=!0),m.memoizedState=E,m.baseState=be,m.baseQueue=mt,b.lastRenderedState=E}if(p=b.interleaved,p!==null){F=p;do G=F.lane,Nr.lanes|=G,Ko|=G,F=F.next;while(F!==p)}else F===null&&(b.lanes=0);return[m.memoizedState,b.dispatch]}function ii(p){var m=nr(),b=m.queue;if(b===null)throw Error(o(311));b.lastRenderedReducer=p;var E=b.dispatch,F=b.pending,G=m.memoizedState;if(F!==null){b.pending=null;var be=F=F.next;do G=p(G,be.action),be=be.next;while(be!==F);Yi(G,m.memoizedState)||(ps=!0),m.memoizedState=G,m.baseQueue===null&&(m.baseState=G),b.lastRenderedState=G}return[G,E]}function Ma(){}function Lc(p,m){var b=Nr,E=nr(),F=m(),G=!Yi(E.memoizedState,F);if(G&&(E.memoizedState=F,ps=!0),E=E.queue,Vl(bd.bind(null,b,E,p),[p]),E.getSnapshot!==m||G||Br!==null&&Br.memoizedState.tag&1){if(b.flags|=2048,fs(9,Qh.bind(null,b,E,F,m),void 0,null),fi===null)throw Error(o(349));Yo&30||Tu(b,m,F)}return F}function Tu(p,m,b){p.flags|=16384,p={getSnapshot:m,value:b},m=Nr.updateQueue,m===null?(m={lastEffect:null,stores:null},Nr.updateQueue=m,m.stores=[p]):(b=m.stores,b===null?m.stores=[p]:b.push(p))}function Qh(p,m,b,E){m.value=b,m.getSnapshot=E,ef(m)&&Bs(p,1,-1)}function bd(p,m,b){return b(function(){ef(m)&&Bs(p,1,-1)})}function ef(p){var m=p.getSnapshot;p=p.value;try{var b=m();return!Yi(p,b)}catch{return!0}}function Ts(p){var m=_i();return typeof p=="function"&&(p=p()),m.memoizedState=m.baseState=p,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:p},m.queue=p,p=p.dispatch=Xx.bind(null,Nr,p),[m.memoizedState,p]}function fs(p,m,b,E){return p={tag:p,create:m,destroy:b,deps:E,next:null},m=Nr.updateQueue,m===null?(m={lastEffect:null,stores:null},Nr.updateQueue=m,m.lastEffect=p.next=p):(b=m.lastEffect,b===null?m.lastEffect=p.next=p:(E=b.next,b.next=p,p.next=E,m.lastEffect=p)),p}function tf(){return nr().memoizedState}function Cu(p,m,b,E){var F=_i();Nr.flags|=p,F.memoizedState=fs(1|m,b,void 0,E===void 0?null:E)}function nf(p,m,b,E){var F=nr();E=E===void 0?null:E;var G=void 0;if(Si!==null){var be=Si.memoizedState;if(G=be.destroy,E!==null&&ba(E,be.deps)){F.memoizedState=fs(m,b,G,E);return}}Nr.flags|=p,F.memoizedState=fs(1|m,b,G,E)}function Pc(p,m){return Cu(8390656,8,p,m)}function Vl(p,m){return nf(2048,8,p,m)}function Md(p,m){return nf(4,2,p,m)}function Dm(p,m){return nf(4,4,p,m)}function Ed(p,m){if(typeof m=="function")return p=p(),m(p),function(){m(null)};if(m!=null)return p=p(),m.current=p,function(){m.current=null}}function Ad(p,m,b){return b=b!=null?b.concat([p]):null,nf(4,4,Ed.bind(null,m,p),b)}function Rc(){}function Td(p,m){var b=nr();m=m===void 0?null:m;var E=b.memoizedState;return E!==null&&m!==null&&ba(m,E[1])?E[0]:(b.memoizedState=[p,m],p)}function Av(p,m){var b=nr();m=m===void 0?null:m;var E=b.memoizedState;return E!==null&&m!==null&&ba(m,E[1])?E[0]:(p=p(),b.memoizedState=[p,m],p)}function Wx(p,m){var b=or;or=b!==0&&4>b?b:4,p(!0);var E=Yr.transition;Yr.transition={};try{p(!1),m()}finally{or=b,Yr.transition=E}}function Om(){return nr().memoizedState}function jx(p,m,b){var E=Qo(p);b={lane:E,action:b,hasEagerState:!1,eagerState:null,next:null},Tv(p)?Cv(m,b):(Lv(p,m,b),b=vs(),p=Bs(p,E,b),p!==null&&Cd(p,m,E))}function Xx(p,m,b){var E=Qo(p),F={lane:E,action:b,hasEagerState:!1,eagerState:null,next:null};if(Tv(p))Cv(m,F);else{Lv(p,m,F);var G=p.alternate;if(p.lanes===0&&(G===null||G.lanes===0)&&(G=m.lastRenderedReducer,G!==null))try{var be=m.lastRenderedState,Oe=G(be,b);if(F.hasEagerState=!0,F.eagerState=Oe,Yi(Oe,be))return}catch{}finally{}b=vs(),p=Bs(p,E,b),p!==null&&Cd(p,m,E)}}function Tv(p){var m=p.alternate;return p===Nr||m!==null&&m===Nr}function Cv(p,m){To=_a=!0;var b=p.pending;b===null?m.next=m:(m.next=b.next,b.next=m),p.pending=m}function Lv(p,m,b){fi!==null&&p.mode&1&&!(Un&2)?(p=m.interleaved,p===null?(b.next=b,ao===null?ao=[m]:ao.push(m)):(b.next=p.next,p.next=b),m.interleaved=b):(p=m.pending,p===null?b.next=b:(b.next=p.next,p.next=b),m.pending=b)}function Cd(p,m,b){if(b&4194240){var E=m.lanes;E&=p.pendingLanes,b|=E,m.lanes=b,Hi(p,b)}}var kc={readContext:us,useCallback:ri,useContext:ri,useEffect:ri,useImperativeHandle:ri,useInsertionEffect:ri,useLayoutEffect:ri,useMemo:ri,useReducer:ri,useRef:ri,useState:ri,useDebugValue:ri,useDeferredValue:ri,useTransition:ri,useMutableSource:ri,useSyncExternalStore:ri,useId:ri,unstable_isNewReconciler:!1},rf={readContext:us,useCallback:function(p,m){return _i().memoizedState=[p,m===void 0?null:m],p},useContext:us,useEffect:Pc,useImperativeHandle:function(p,m,b){return b=b!=null?b.concat([p]):null,Cu(4194308,4,Ed.bind(null,m,p),b)},useLayoutEffect:function(p,m){return Cu(4194308,4,p,m)},useInsertionEffect:function(p,m){return Cu(4,2,p,m)},useMemo:function(p,m){var b=_i();return m=m===void 0?null:m,p=p(),b.memoizedState=[p,m],p},useReducer:function(p,m,b){var E=_i();return m=b!==void 0?b(m):m,E.memoizedState=E.baseState=m,p={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:m},E.queue=p,p=p.dispatch=jx.bind(null,Nr,p),[E.memoizedState,p]},useRef:function(p){var m=_i();return p={current:p},m.memoizedState=p},useState:Ts,useDebugValue:Rc,useDeferredValue:function(p){var m=Ts(p),b=m[0],E=m[1];return Pc(function(){var F=Yr.transition;Yr.transition={};try{E(p)}finally{Yr.transition=F}},[p]),b},useTransition:function(){var p=Ts(!1),m=p[0];return p=Wx.bind(null,p[1]),_i().memoizedState=p,[m,p]},useMutableSource:function(){},useSyncExternalStore:function(p,m,b){var E=Nr,F=_i();if(Mr){if(b===void 0)throw Error(o(407));b=b()}else{if(b=m(),fi===null)throw Error(o(349));Yo&30||Tu(E,m,b)}F.memoizedState=b;var G={value:b,getSnapshot:m};return F.queue=G,Pc(bd.bind(null,E,G,p),[p]),E.flags|=2048,fs(9,Qh.bind(null,E,G,b,m),void 0,null),b},useId:function(){var p=_i(),m=fi.identifierPrefix;if(Mr){var b=br,E=gr;b=(E&~(1<<32-Tr(E)-1)).toString(32)+b,m=":"+m+"R"+b,b=Zo++,0<b&&(m+="H"+b.toString(32)),m+=":"}else b=Cc++,m=":"+m+"r"+b.toString(32)+":";return p.memoizedState=m},unstable_isNewReconciler:!1},qx={readContext:us,useCallback:Td,useContext:us,useEffect:Vl,useImperativeHandle:Ad,useInsertionEffect:Md,useLayoutEffect:Dm,useMemo:Av,useReducer:zr,useRef:tf,useState:function(){return zr(hr)},useDebugValue:Rc,useDeferredValue:function(p){var m=zr(hr),b=m[0],E=m[1];return Vl(function(){var F=Yr.transition;Yr.transition={};try{E(p)}finally{Yr.transition=F}},[p]),b},useTransition:function(){var p=zr(hr)[0],m=nr().memoizedState;return[p,m]},useMutableSource:Ma,useSyncExternalStore:Lc,useId:Om,unstable_isNewReconciler:!1},Yx={readContext:us,useCallback:Td,useContext:us,useEffect:Vl,useImperativeHandle:Ad,useInsertionEffect:Md,useLayoutEffect:Dm,useMemo:Av,useReducer:ii,useRef:tf,useState:function(){return ii(hr)},useDebugValue:Rc,useDeferredValue:function(p){var m=ii(hr),b=m[0],E=m[1];return Vl(function(){var F=Yr.transition;Yr.transition={};try{E(p)}finally{Yr.transition=F}},[p]),b},useTransition:function(){var p=ii(hr)[0],m=nr().memoizedState;return[p,m]},useMutableSource:Ma,useSyncExternalStore:Lc,useId:Om,unstable_isNewReconciler:!1};function Ld(p,m){try{var b="",E=m;do b+=va(E),E=E.return;while(E);var F=b}catch(G){F=`
Error generating stack: `+G.message+`
`+G.stack}return{value:p,source:m,stack:F}}function Um(p,m){try{console.error(m.value)}catch(b){setTimeout(function(){throw b})}}var Zx=typeof WeakMap=="function"?WeakMap:Map;function Pv(p,m,b){b=bo(-1,b),b.tag=3,b.payload={element:null};var E=m.value;return b.callback=function(){Nd||(Nd=!0,qm=E),Um(p,m)},b}function Rv(p,m,b){b=bo(-1,b),b.tag=3;var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var F=m.value;b.payload=function(){return E(F)},b.callback=function(){Um(p,m)}}var G=p.stateNode;return G!==null&&typeof G.componentDidCatch=="function"&&(b.callback=function(){Um(p,m),typeof E!="function"&&(Pa===null?Pa=new Set([this]):Pa.add(this));var be=m.stack;this.componentDidCatch(m.value,{componentStack:be!==null?be:""})}),b}function el(p,m,b){var E=p.pingCache;if(E===null){E=p.pingCache=new Zx;var F=new Set;E.set(m,F)}else F=E.get(m),F===void 0&&(F=new Set,E.set(m,F));F.has(b)||(F.add(b),p=Jm.bind(null,p,m,b),m.then(p,p))}function Co(p){do{var m;if((m=p.tag===13)&&(m=p.memoizedState,m=m!==null?m.dehydrated!==null:!0),m)return p;p=p.return}while(p!==null);return null}function Ea(p,m,b,E,F){return p.mode&1?(p.flags|=65536,p.lanes=F,p):(p===m?p.flags|=65536:(p.flags|=128,b.flags|=131072,b.flags&=-52805,b.tag===1&&(b.alternate===null?b.tag=17:(m=bo(-1,1),m.tag=2,xa(b,m))),b.lanes|=1),p)}function Aa(p){p.flags|=4}function Bm(p,m){if(p!==null&&p.child===m.child)return!0;if(m.flags&16)return!1;for(p=m.child;p!==null;){if(p.flags&12854||p.subtreeFlags&12854)return!1;p=p.sibling}return!0}var Lo,ds,Pd,Rd;if(ke)Lo=function(p,m){for(var b=m.child;b!==null;){if(b.tag===5||b.tag===6)I(p,b.stateNode);else if(b.tag!==4&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===m)break;for(;b.sibling===null;){if(b.return===null||b.return===m)return;b=b.return}b.sibling.return=b.return,b=b.sibling}},ds=function(){},Pd=function(p,m,b,E,F){if(p=p.memoizedProps,p!==E){var G=m.stateNode,be=Xr(As.current);b=J(G,b,p,E,F,be),(m.updateQueue=b)&&Aa(m)}},Rd=function(p,m,b,E){b!==E&&Aa(m)};else if(he){Lo=function(p,m,b,E){for(var F=m.child;F!==null;){if(F.tag===5){var G=F.stateNode;b&&E&&(G=gn(G,F.type,F.memoizedProps,F)),I(p,G)}else if(F.tag===6)G=F.stateNode,b&&E&&(G=kn(G,F.memoizedProps,F)),I(p,G);else if(F.tag!==4){if(F.tag===22&&F.memoizedState!==null)G=F.child,G!==null&&(G.return=F),Lo(p,F,!0,!0);else if(F.child!==null){F.child.return=F,F=F.child;continue}}if(F===m)break;for(;F.sibling===null;){if(F.return===null||F.return===m)return;F=F.return}F.sibling.return=F.return,F=F.sibling}};var zm=function(p,m,b,E){for(var F=m.child;F!==null;){if(F.tag===5){var G=F.stateNode;b&&E&&(G=gn(G,F.type,F.memoizedProps,F)),Vt(p,G)}else if(F.tag===6)G=F.stateNode,b&&E&&(G=kn(G,F.memoizedProps,F)),Vt(p,G);else if(F.tag!==4){if(F.tag===22&&F.memoizedState!==null)G=F.child,G!==null&&(G.return=F),zm(p,F,!0,!0);else if(F.child!==null){F.child.return=F,F=F.child;continue}}if(F===m)break;for(;F.sibling===null;){if(F.return===null||F.return===m)return;F=F.return}F.sibling.return=F.return,F=F.sibling}};ds=function(p,m){var b=m.stateNode;if(!Bm(p,m)){p=b.containerInfo;var E=kt(p);zm(E,m,!1,!1),b.pendingChildren=E,Aa(m),yn(p,E)}},Pd=function(p,m,b,E,F){var G=p.stateNode,be=p.memoizedProps;if((p=Bm(p,m))&&be===E)m.stateNode=G;else{var Oe=m.stateNode,mt=Xr(As.current),Dt=null;be!==E&&(Dt=J(Oe,b,be,E,F,mt)),p&&Dt===null?m.stateNode=G:(G=pt(G,Dt,b,be,E,m,p,Oe),X(G,b,E,F,mt)&&Aa(m),m.stateNode=G,p?Aa(m):Lo(G,m,!1,!1))}},Rd=function(p,m,b,E){b!==E?(p=Xr(Eo.current),b=Xr(As.current),m.stateNode=fe(E,p,b,m),Aa(m)):m.stateNode=p.stateNode}}else ds=function(){},Pd=function(){},Rd=function(){};function Ic(p,m){if(!Mr)switch(p.tailMode){case"hidden":m=p.tail;for(var b=null;m!==null;)m.alternate!==null&&(b=m),m=m.sibling;b===null?p.tail=null:b.sibling=null;break;case"collapsed":b=p.tail;for(var E=null;b!==null;)b.alternate!==null&&(E=b),b=b.sibling;E===null?m||p.tail===null?p.tail=null:p.tail.sibling=null:E.sibling=null}}function Ki(p){var m=p.alternate!==null&&p.alternate.child===p.child,b=0,E=0;if(m)for(var F=p.child;F!==null;)b|=F.lanes|F.childLanes,E|=F.subtreeFlags&14680064,E|=F.flags&14680064,F.return=p,F=F.sibling;else for(F=p.child;F!==null;)b|=F.lanes|F.childLanes,E|=F.subtreeFlags,E|=F.flags,F.return=p,F=F.sibling;return p.subtreeFlags|=E,p.childLanes=b,m}function kv(p,m,b){var E=m.pendingProps;switch(Es(m),m.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ki(m),null;case 1:return cr(m.type)&&jr(),Ki(m),null;case 3:return E=m.stateNode,co(),on(xn),on(fn),Eu(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(p===null||p.child===null)&&(wa(m)?Aa(m):p===null||p.memoizedState.isDehydrated&&!(m.flags&256)||(m.flags|=1024,hs!==null&&(Od(hs),hs=null))),ds(p,m),Ki(m),null;case 5:qo(m),b=Xr(Eo.current);var F=m.type;if(p!==null&&m.stateNode!=null)Pd(p,m,F,E,b),p.ref!==m.ref&&(m.flags|=512,m.flags|=2097152);else{if(!E){if(m.stateNode===null)throw Error(o(166));return Ki(m),null}if(p=Xr(As.current),wa(m)){if(!De)throw Error(o(175));p=q(m.stateNode,m.type,m.memoizedProps,b,p,m,!Qa),m.updateQueue=p,p!==null&&Aa(m)}else{var G=re(F,E,b,p,m);Lo(G,m,!1,!1),m.stateNode=G,X(G,F,E,b,p)&&Aa(m)}m.ref!==null&&(m.flags|=512,m.flags|=2097152)}return Ki(m),null;case 6:if(p&&m.stateNode!=null)Rd(p,m,p.memoizedProps,E);else{if(typeof E!="string"&&m.stateNode===null)throw Error(o(166));if(p=Xr(Eo.current),b=Xr(As.current),wa(m)){if(!De)throw Error(o(176));if(p=m.stateNode,E=m.memoizedProps,(b=U(p,E,m,!Qa))&&(F=ni,F!==null))switch(G=(F.mode&1)!==0,F.tag){case 3:rt(F.stateNode.containerInfo,p,E,G);break;case 5:gt(F.type,F.memoizedProps,F.stateNode,p,E,G)}b&&Aa(m)}else m.stateNode=fe(E,p,b,m)}return Ki(m),null;case 13:if(on(Er),E=m.memoizedState,Mr&&cs!==null&&m.mode&1&&!(m.flags&128)){for(p=cs;p;)p=Wn(p);return Xo(),m.flags|=98560,m}if(E!==null&&E.dehydrated!==null){if(E=wa(m),p===null){if(!E)throw Error(o(318));if(!De)throw Error(o(344));if(p=m.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(o(317));ne(p,m)}else Xo(),!(m.flags&128)&&(m.memoizedState=null),m.flags|=4;return Ki(m),null}return hs!==null&&(Od(hs),hs=null),m.flags&128?(m.lanes=b,m):(E=E!==null,b=!1,p===null?wa(m):b=p.memoizedState!==null,E&&!b&&(m.child.flags|=8192,m.mode&1&&(p===null||Er.current&1?Sr===0&&(Sr=3):Ud())),m.updateQueue!==null&&(m.flags|=4),Ki(m),null);case 4:return co(),ds(p,m),p===null&&pe(m.stateNode.containerInfo),Ki(m),null;case 10:return Ul(m.type._context),Ki(m),null;case 17:return cr(m.type)&&jr(),Ki(m),null;case 19:if(on(Er),F=m.memoizedState,F===null)return Ki(m),null;if(E=(m.flags&128)!==0,G=F.rendering,G===null)if(E)Ic(F,!1);else{if(Sr!==0||p!==null&&p.flags&128)for(p=m.child;p!==null;){if(G=Ao(p),G!==null){for(m.flags|=128,Ic(F,!1),p=G.updateQueue,p!==null&&(m.updateQueue=p,m.flags|=4),m.subtreeFlags=0,p=b,E=m.child;E!==null;)b=E,F=p,b.flags&=14680066,G=b.alternate,G===null?(b.childLanes=0,b.lanes=F,b.child=null,b.subtreeFlags=0,b.memoizedProps=null,b.memoizedState=null,b.updateQueue=null,b.dependencies=null,b.stateNode=null):(b.childLanes=G.childLanes,b.lanes=G.lanes,b.child=G.child,b.subtreeFlags=0,b.deletions=null,b.memoizedProps=G.memoizedProps,b.memoizedState=G.memoizedState,b.updateQueue=G.updateQueue,b.type=G.type,F=G.dependencies,b.dependencies=F===null?null:{lanes:F.lanes,firstContext:F.firstContext}),E=E.sibling;return jt(Er,Er.current&1|2),m.child}p=p.sibling}F.tail!==null&&ai()>Oc&&(m.flags|=128,E=!0,Ic(F,!1),m.lanes=4194304)}else{if(!E)if(p=Ao(G),p!==null){if(m.flags|=128,E=!0,p=p.updateQueue,p!==null&&(m.updateQueue=p,m.flags|=4),Ic(F,!0),F.tail===null&&F.tailMode==="hidden"&&!G.alternate&&!Mr)return Ki(m),null}else 2*ai()-F.renderingStartTime>Oc&&b!==1073741824&&(m.flags|=128,E=!0,Ic(F,!1),m.lanes=4194304);F.isBackwards?(G.sibling=m.child,m.child=G):(p=F.last,p!==null?p.sibling=G:m.child=G,F.last=G)}return F.tail!==null?(m=F.tail,F.rendering=m,F.tail=m.sibling,F.renderingStartTime=ai(),m.sibling=null,p=Er.current,jt(Er,E?p&1|2:p&1),m):(Ki(m),null);case 22:case 23:return Km(),E=m.memoizedState!==null,p!==null&&p.memoizedState!==null!==E&&(m.flags|=8192),E&&m.mode&1?es&1073741824&&(Ki(m),ke&&m.subtreeFlags&6&&(m.flags|=8192)):Ki(m),null;case 24:return null;case 25:return null}throw Error(o(156,m.tag))}var $x=a.ReactCurrentOwner,ps=!1;function Wi(p,m,b,E){m.child=p===null?Mu(m,null,b,E):Zi(m,p.child,b,E)}function Nc(p,m,b,E,F){b=b.render;var G=m.ref;return ya(m,F),E=Au(p,m,b,E,G,F),b=Os(),p!==null&&!ps?(m.updateQueue=p.updateQueue,m.flags&=-2053,p.lanes&=~F,Z(p,m,F)):(Mr&&b&&uo(m),m.flags|=1,Wi(p,m,E,F),m.child)}function kd(p,m,b,E,F){if(p===null){var G=b.type;return typeof G=="function"&&!Qx(G)&&G.defaultProps===void 0&&b.compare===null&&b.defaultProps===void 0?(m.tag=15,m.type=G,Hm(p,m,G,E,F)):(p=Hv(b.type,null,E,m,m.mode,F),p.ref=m.ref,p.return=m,m.child=p)}if(G=p.child,!(p.lanes&F)){var be=G.memoizedProps;if(b=b.compare,b=b!==null?b:xu,b(be,E)&&p.ref===m.ref)return Z(p,m,F)}return m.flags|=1,p=zc(G,E),p.ref=m.ref,p.return=m,m.child=p}function Hm(p,m,b,E,F){if(p!==null&&xu(p.memoizedProps,E)&&p.ref===m.ref)if(ps=!1,(p.lanes&F)!==0)p.flags&131072&&(ps=!0);else return m.lanes=p.lanes,Z(p,m,F);return Vm(p,m,b,E,F)}function Iv(p,m,b){var E=m.pendingProps,F=E.children,G=p!==null?p.memoizedState:null;if(E.mode==="hidden")if(!(m.mode&1))m.memoizedState={baseLanes:0,cachePool:null},jt(nl,es),es|=b;else if(b&1073741824)m.memoizedState={baseLanes:0,cachePool:null},E=G!==null?G.baseLanes:b,jt(nl,es),es|=E;else return p=G!==null?G.baseLanes|b:b,m.lanes=m.childLanes=1073741824,m.memoizedState={baseLanes:p,cachePool:null},m.updateQueue=null,jt(nl,es),es|=p,null;else G!==null?(E=G.baseLanes|b,m.memoizedState=null):E=b,jt(nl,es),es|=E;return Wi(p,m,F,b),m.child}function Gm(p,m){var b=m.ref;(p===null&&b!==null||p!==null&&p.ref!==b)&&(m.flags|=512,m.flags|=2097152)}function Vm(p,m,b,E,F){var G=cr(b)?tr:fn.current;return G=Qn(m,G),ya(m,F),b=Au(p,m,b,E,G,F),E=Os(),p!==null&&!ps?(m.updateQueue=p.updateQueue,m.flags&=-2053,p.lanes&=~F,Z(p,m,F)):(Mr&&E&&uo(m),m.flags|=1,Wi(p,m,b,F),m.child)}function Nv(p,m,b,E,F){if(cr(b)){var G=!0;Rn(m)}else G=!1;if(ya(m,F),m.stateNode===null)p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),Le(m,b,E),ct(m,b,E,F),E=!0;else if(p===null){var be=m.stateNode,Oe=m.memoizedProps;be.props=Oe;var mt=be.context,Dt=b.contextType;typeof Dt=="object"&&Dt!==null?Dt=us(Dt):(Dt=cr(b)?tr:fn.current,Dt=Qn(m,Dt));var Jt=b.getDerivedStateFromProps,Bn=typeof Jt=="function"||typeof be.getSnapshotBeforeUpdate=="function";Bn||typeof be.UNSAFE_componentWillReceiveProps!="function"&&typeof be.componentWillReceiveProps!="function"||(Oe!==E||mt!==Dt)&&Ve(m,be,E,Dt),lo=!1;var Sn=m.memoizedState;be.state=Sn,zl(m,E,be,F),mt=m.memoizedState,Oe!==E||Sn!==mt||xn.current||lo?(typeof Jt=="function"&&(A(m,b,Jt,E),mt=m.memoizedState),(Oe=lo||_e(m,b,Oe,E,Sn,mt,Dt))?(Bn||typeof be.UNSAFE_componentWillMount!="function"&&typeof be.componentWillMount!="function"||(typeof be.componentWillMount=="function"&&be.componentWillMount(),typeof be.UNSAFE_componentWillMount=="function"&&be.UNSAFE_componentWillMount()),typeof be.componentDidMount=="function"&&(m.flags|=4194308)):(typeof be.componentDidMount=="function"&&(m.flags|=4194308),m.memoizedProps=E,m.memoizedState=mt),be.props=E,be.state=mt,be.context=Dt,E=Oe):(typeof be.componentDidMount=="function"&&(m.flags|=4194308),E=!1)}else{be=m.stateNode,_c(p,m),Oe=m.memoizedProps,Dt=m.type===m.elementType?Oe:Pi(m.type,Oe),be.props=Dt,Bn=m.pendingProps,Sn=be.context,mt=b.contextType,typeof mt=="object"&&mt!==null?mt=us(mt):(mt=cr(b)?tr:fn.current,mt=Qn(m,mt));var Fr=b.getDerivedStateFromProps;(Jt=typeof Fr=="function"||typeof be.getSnapshotBeforeUpdate=="function")||typeof be.UNSAFE_componentWillReceiveProps!="function"&&typeof be.componentWillReceiveProps!="function"||(Oe!==Bn||Sn!==mt)&&Ve(m,be,E,mt),lo=!1,Sn=m.memoizedState,be.state=Sn,zl(m,E,be,F);var hn=m.memoizedState;Oe!==Bn||Sn!==hn||xn.current||lo?(typeof Fr=="function"&&(A(m,b,Fr,E),hn=m.memoizedState),(Dt=lo||_e(m,b,Dt,E,Sn,hn,mt)||!1)?(Jt||typeof be.UNSAFE_componentWillUpdate!="function"&&typeof be.componentWillUpdate!="function"||(typeof be.componentWillUpdate=="function"&&be.componentWillUpdate(E,hn,mt),typeof be.UNSAFE_componentWillUpdate=="function"&&be.UNSAFE_componentWillUpdate(E,hn,mt)),typeof be.componentDidUpdate=="function"&&(m.flags|=4),typeof be.getSnapshotBeforeUpdate=="function"&&(m.flags|=1024)):(typeof be.componentDidUpdate!="function"||Oe===p.memoizedProps&&Sn===p.memoizedState||(m.flags|=4),typeof be.getSnapshotBeforeUpdate!="function"||Oe===p.memoizedProps&&Sn===p.memoizedState||(m.flags|=1024),m.memoizedProps=E,m.memoizedState=hn),be.props=E,be.state=hn,be.context=mt,E=Dt):(typeof be.componentDidUpdate!="function"||Oe===p.memoizedProps&&Sn===p.memoizedState||(m.flags|=4),typeof be.getSnapshotBeforeUpdate!="function"||Oe===p.memoizedProps&&Sn===p.memoizedState||(m.flags|=1024),E=!1)}return Wm(p,m,b,E,G,F)}function Wm(p,m,b,E,F,G){Gm(p,m);var be=(m.flags&128)!==0;if(!E&&!be)return F&&jn(m,b,!1),Z(p,m,G);E=m.stateNode,$x.current=m;var Oe=be&&typeof b.getDerivedStateFromError!="function"?null:E.render();return m.flags|=1,p!==null&&be?(m.child=Zi(m,p.child,null,G),m.child=Zi(m,null,Oe,G)):Wi(p,m,Oe,G),m.memoizedState=E.state,F&&jn(m,b,!0),m.child}function Fv(p){var m=p.stateNode;m.pendingContext?dn(p,m.pendingContext,m.pendingContext!==m.context):m.context&&dn(p,m.context,!1),$i(p,m.containerInfo)}function Dv(p,m,b,E,F){return Xo(),bu(F),m.flags|=256,Wi(p,m,b,E),m.child}var Id={dehydrated:null,treeContext:null,retryLane:0};function sf(p){return{baseLanes:p,cachePool:null}}function of(p,m,b){var E=m.pendingProps,F=Er.current,G=!1,be=(m.flags&128)!==0,Oe;if((Oe=be)||(Oe=p!==null&&p.memoizedState===null?!1:(F&2)!==0),Oe?(G=!0,m.flags&=-129):(p===null||p.memoizedState!==null)&&(F|=1),jt(Er,F&1),p===null)return ki(m),p=m.memoizedState,p!==null&&(p=p.dehydrated,p!==null)?(m.mode&1?vn(p)?m.lanes=8:m.lanes=1073741824:m.lanes=1,null):(F=E.children,p=E.fallback,G?(E=m.mode,G=m.child,F={mode:"hidden",children:F},!(E&1)&&G!==null?(G.childLanes=0,G.pendingProps=F):G=Gv(F,E,0,null),p=hf(p,E,b,null),G.return=m,p.return=m,G.sibling=p,m.child=G,m.child.memoizedState=sf(b),m.memoizedState=Id,p):jm(m,F));if(F=p.memoizedState,F!==null){if(Oe=F.dehydrated,Oe!==null){if(be)return m.flags&256?(m.flags&=-257,y(p,m,b,Error(o(422)))):m.memoizedState!==null?(m.child=p.child,m.flags|=128,null):(G=E.fallback,F=m.mode,E=Gv({mode:"visible",children:E.children},F,0,null),G=hf(G,F,b,null),G.flags|=2,E.return=m,G.return=m,E.sibling=G,m.child=E,m.mode&1&&Zi(m,p.child,null,b),m.child.memoizedState=sf(b),m.memoizedState=Id,G);if(!(m.mode&1))m=y(p,m,b,null);else if(vn(Oe))m=y(p,m,b,Error(o(419)));else if(E=(b&p.childLanes)!==0,ps||E){if(E=fi,E!==null){switch(b&-b){case 4:G=2;break;case 16:G=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:G=32;break;case 536870912:G=268435456;break;default:G=0}E=G&(E.suspendedLanes|b)?0:G,E!==0&&E!==F.retryLane&&(F.retryLane=E,Bs(p,E,-1))}Ud(),m=y(p,m,b,Error(o(421)))}else Zn(Oe)?(m.flags|=128,m.child=p.child,m=Jx.bind(null,p),$n(Oe,m),m=null):(b=F.treeContext,De&&(cs=oi(Oe),ni=m,Mr=!0,hs=null,Qa=!1,b!==null&&(cn[Tn++]=gr,cn[Tn++]=br,cn[Tn++]=wr,gr=b.id,br=b.overflow,wr=m)),m=jm(m,m.pendingProps.children),m.flags|=4096);return m}return G?(E=Xm(p,m,E.children,E.fallback,b),G=m.child,F=p.child.memoizedState,G.memoizedState=F===null?sf(b):{baseLanes:F.baseLanes|b,cachePool:null},G.childLanes=p.childLanes&~b,m.memoizedState=Id,E):(b=Ov(p,m,E.children,b),m.memoizedState=null,b)}return G?(E=Xm(p,m,E.children,E.fallback,b),G=m.child,F=p.child.memoizedState,G.memoizedState=F===null?sf(b):{baseLanes:F.baseLanes|b,cachePool:null},G.childLanes=p.childLanes&~b,m.memoizedState=Id,E):(b=Ov(p,m,E.children,b),m.memoizedState=null,b)}function jm(p,m){return m=Gv({mode:"visible",children:m},p.mode,0,null),m.return=p,p.child=m}function Ov(p,m,b,E){var F=p.child;return p=F.sibling,b=zc(F,{mode:"visible",children:b}),!(m.mode&1)&&(b.lanes=E),b.return=m,b.sibling=null,p!==null&&(E=m.deletions,E===null?(m.deletions=[p],m.flags|=16):E.push(p)),m.child=b}function Xm(p,m,b,E,F){var G=m.mode;p=p.child;var be=p.sibling,Oe={mode:"hidden",children:b};return!(G&1)&&m.child!==p?(b=m.child,b.childLanes=0,b.pendingProps=Oe,m.deletions=null):(b=zc(p,Oe),b.subtreeFlags=p.subtreeFlags&14680064),be!==null?E=zc(be,E):(E=hf(E,G,F,null),E.flags|=2),E.return=m,b.return=m,b.sibling=E,m.child=b,E}function y(p,m,b,E){return E!==null&&bu(E),Zi(m,p.child,null,b),p=jm(m,m.pendingProps.children),p.flags|=2,m.memoizedState=null,p}function M(p,m,b){p.lanes|=m;var E=p.alternate;E!==null&&(E.lanes|=m),Kh(p.return,m,b)}function C(p,m,b,E,F){var G=p.memoizedState;G===null?p.memoizedState={isBackwards:m,rendering:null,renderingStartTime:0,last:E,tail:b,tailMode:F}:(G.isBackwards=m,G.rendering=null,G.renderingStartTime=0,G.last=E,G.tail=b,G.tailMode=F)}function z(p,m,b){var E=m.pendingProps,F=E.revealOrder,G=E.tail;if(Wi(p,m,E.children,b),E=Er.current,E&2)E=E&1|2,m.flags|=128;else{if(p!==null&&p.flags&128)e:for(p=m.child;p!==null;){if(p.tag===13)p.memoizedState!==null&&M(p,b,m);else if(p.tag===19)M(p,b,m);else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===m)break e;for(;p.sibling===null;){if(p.return===null||p.return===m)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}E&=1}if(jt(Er,E),!(m.mode&1))m.memoizedState=null;else switch(F){case"forwards":for(b=m.child,F=null;b!==null;)p=b.alternate,p!==null&&Ao(p)===null&&(F=b),b=b.sibling;b=F,b===null?(F=m.child,m.child=null):(F=b.sibling,b.sibling=null),C(m,!1,F,b,G);break;case"backwards":for(b=null,F=m.child,m.child=null;F!==null;){if(p=F.alternate,p!==null&&Ao(p)===null){m.child=F;break}p=F.sibling,F.sibling=b,b=F,F=p}C(m,!0,b,null,G);break;case"together":C(m,!1,null,null,void 0);break;default:m.memoizedState=null}return m.child}function Z(p,m,b){if(p!==null&&(m.dependencies=p.dependencies),Ko|=m.lanes,!(b&m.childLanes))return null;if(p!==null&&m.child!==p.child)throw Error(o(153));if(m.child!==null){for(p=m.child,b=zc(p,p.pendingProps),m.child=b,b.return=m;p.sibling!==null;)p=p.sibling,b=b.sibling=zc(p,p.pendingProps),b.return=m;b.sibling=null}return m.child}function te(p,m,b){switch(m.tag){case 3:Fv(m),Xo();break;case 5:Sa(m);break;case 1:cr(m.type)&&Rn(m);break;case 4:$i(m,m.stateNode.containerInfo);break;case 10:_d(m,m.type._context,m.memoizedProps.value);break;case 13:var E=m.memoizedState;if(E!==null)return E.dehydrated!==null?(jt(Er,Er.current&1),m.flags|=128,null):b&m.child.childLanes?of(p,m,b):(jt(Er,Er.current&1),p=Z(p,m,b),p!==null?p.sibling:null);jt(Er,Er.current&1);break;case 19:if(E=(b&m.childLanes)!==0,p.flags&128){if(E)return z(p,m,b);m.flags|=128}var F=m.memoizedState;if(F!==null&&(F.rendering=null,F.tail=null,F.lastEffect=null),jt(Er,Er.current),E)break;return null;case 22:case 23:return m.lanes=0,Iv(p,m,b)}return Z(p,m,b)}function ie(p,m){switch(Es(m),m.tag){case 1:return cr(m.type)&&jr(),p=m.flags,p&65536?(m.flags=p&-65537|128,m):null;case 3:return co(),on(xn),on(fn),Eu(),p=m.flags,p&65536&&!(p&128)?(m.flags=p&-65537|128,m):null;case 5:return qo(m),null;case 13:if(on(Er),p=m.memoizedState,p!==null&&p.dehydrated!==null){if(m.alternate===null)throw Error(o(340));Xo()}return p=m.flags,p&65536?(m.flags=p&-65537|128,m):null;case 19:return on(Er),null;case 4:return co(),null;case 10:return Ul(m.type._context),null;case 22:case 23:return Km(),null;case 24:return null;default:return null}}var oe=!1,le=!1,ve=typeof WeakSet=="function"?WeakSet:Set,ye=null;function We(p,m){var b=p.ref;if(b!==null)if(typeof b=="function")try{b(null)}catch(E){ns(p,m,E)}else b.current=null}function je(p,m,b){try{b()}catch(E){ns(p,m,E)}}var Ue=!1;function _t(p,m){for(Y(p.containerInfo),ye=m;ye!==null;)if(p=ye,m=p.child,(p.subtreeFlags&1028)!==0&&m!==null)m.return=p,ye=m;else for(;ye!==null;){p=ye;try{var b=p.alternate;if(p.flags&1024)switch(p.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var E=b.memoizedProps,F=b.memoizedState,G=p.stateNode,be=G.getSnapshotBeforeUpdate(p.elementType===p.type?E:Pi(p.type,E),F);G.__reactInternalSnapshotBeforeUpdate=be}break;case 3:ke&&yt(p.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Oe){ns(p,p.return,Oe)}if(m=p.sibling,m!==null){m.return=p.return,ye=m;break}ye=p.return}return b=Ue,Ue=!1,b}function nt(p,m,b){var E=m.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var F=E=E.next;do{if((F.tag&p)===p){var G=F.destroy;F.destroy=void 0,G!==void 0&&je(m,b,G)}F=F.next}while(F!==E)}}function Re(p,m){if(m=m.updateQueue,m=m!==null?m.lastEffect:null,m!==null){var b=m=m.next;do{if((b.tag&p)===p){var E=b.create;b.destroy=E()}b=b.next}while(b!==m)}}function Ie(p){var m=p.ref;if(m!==null){var b=p.stateNode;switch(p.tag){case 5:p=se(b);break;default:p=b}typeof m=="function"?m(p):m.current=p}}function xt(p,m,b){if(_o&&typeof _o.onCommitFiberUnmount=="function")try{_o.onCommitFiberUnmount(wc,m)}catch{}switch(m.tag){case 0:case 11:case 14:case 15:if(p=m.updateQueue,p!==null&&(p=p.lastEffect,p!==null)){var E=p=p.next;do{var F=E,G=F.destroy;F=F.tag,G!==void 0&&(F&2||F&4)&&je(m,b,G),E=E.next}while(E!==p)}break;case 1:if(We(m,b),p=m.stateNode,typeof p.componentWillUnmount=="function")try{p.props=m.memoizedProps,p.state=m.memoizedState,p.componentWillUnmount()}catch(be){ns(m,b,be)}break;case 5:We(m,b);break;case 4:ke?vr(p,m,b):he&&he&&(m=m.stateNode.containerInfo,b=kt(m),Nn(m,b))}}function Mt(p,m,b){for(var E=m;;)if(xt(p,E,b),E.child===null||ke&&E.tag===4){if(E===m)break;for(;E.sibling===null;){if(E.return===null||E.return===m)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function St(p){var m=p.alternate;m!==null&&(p.alternate=null,St(m)),p.child=null,p.deletions=null,p.sibling=null,p.tag===5&&(m=p.stateNode,m!==null&&tt(m)),p.stateNode=null,p.return=null,p.dependencies=null,p.memoizedProps=null,p.memoizedState=null,p.pendingProps=null,p.stateNode=null,p.updateQueue=null}function qt(p){return p.tag===5||p.tag===3||p.tag===4}function Ut(p){e:for(;;){for(;p.sibling===null;){if(p.return===null||qt(p.return))return null;p=p.return}for(p.sibling.return=p.return,p=p.sibling;p.tag!==5&&p.tag!==6&&p.tag!==18;){if(p.flags&2||p.child===null||p.tag===4)continue e;p.child.return=p,p=p.child}if(!(p.flags&2))return p.stateNode}}function mn(p){if(ke){e:{for(var m=p.return;m!==null;){if(qt(m))break e;m=m.return}throw Error(o(160))}var b=m;switch(b.tag){case 5:m=b.stateNode,b.flags&32&&(Ye(m),b.flags&=-33),b=Ut(p),lr(p,b,m);break;case 3:case 4:m=b.stateNode.containerInfo,b=Ut(p),Bt(p,b,m);break;default:throw Error(o(161))}}}function Bt(p,m,b){var E=p.tag;if(E===5||E===6)p=p.stateNode,m?Ct(b,p,m):lt(b,p);else if(E!==4&&(p=p.child,p!==null))for(Bt(p,m,b),p=p.sibling;p!==null;)Bt(p,m,b),p=p.sibling}function lr(p,m,b){var E=p.tag;if(E===5||E===6)p=p.stateNode,m?At(b,p,m):dt(b,p);else if(E!==4&&(p=p.child,p!==null))for(lr(p,m,b),p=p.sibling;p!==null;)lr(p,m,b),p=p.sibling}function vr(p,m,b){for(var E=m,F=!1,G,be;;){if(!F){F=E.return;e:for(;;){if(F===null)throw Error(o(160));switch(G=F.stateNode,F.tag){case 5:be=!1;break e;case 3:G=G.containerInfo,be=!0;break e;case 4:G=G.containerInfo,be=!0;break e}F=F.return}F=!0}if(E.tag===5||E.tag===6)Mt(p,E,b),be?xe(G,E.stateNode):bt(G,E.stateNode);else if(E.tag===18)be?qe(G,E.stateNode):Xe(G,E.stateNode);else if(E.tag===4){if(E.child!==null){G=E.stateNode.containerInfo,be=!0,E.child.return=E,E=E.child;continue}}else if(xt(p,E,b),E.child!==null){E.child.return=E,E=E.child;continue}if(E===m)break;for(;E.sibling===null;){if(E.return===null||E.return===m)return;E=E.return,E.tag===4&&(F=!1)}E.sibling.return=E.return,E=E.sibling}}function rr(p,m){if(ke){switch(m.tag){case 0:case 11:case 14:case 15:nt(3,m,m.return),Re(3,m),nt(5,m,m.return);return;case 1:return;case 5:var b=m.stateNode;if(b!=null){var E=m.memoizedProps;p=p!==null?p.memoizedProps:E;var F=m.type,G=m.updateQueue;m.updateQueue=null,G!==null&&Nt(b,G,F,p,E,m)}return;case 6:if(m.stateNode===null)throw Error(o(162));b=m.memoizedProps,it(m.stateNode,p!==null?p.memoizedProps:b,b);return;case 3:De&&p!==null&&p.memoizedState.isDehydrated&&de(m.stateNode.containerInfo);return;case 12:return;case 13:Xn(m);return;case 19:Xn(m);return;case 17:return}throw Error(o(163))}switch(m.tag){case 0:case 11:case 14:case 15:nt(3,m,m.return),Re(3,m),nt(5,m,m.return);return;case 12:return;case 13:Xn(m);return;case 19:Xn(m);return;case 3:De&&p!==null&&p.memoizedState.isDehydrated&&de(m.stateNode.containerInfo);break;case 22:case 23:return}e:if(he){switch(m.tag){case 1:case 5:case 6:break e;case 3:case 4:m=m.stateNode,Nn(m.containerInfo,m.pendingChildren);break e}throw Error(o(163))}}function Xn(p){var m=p.updateQueue;if(m!==null){p.updateQueue=null;var b=p.stateNode;b===null&&(b=p.stateNode=new ve),m.forEach(function(E){var F=eg.bind(null,p,E);b.has(E)||(b.add(E),E.then(F,F))})}}function Cr(p,m){for(ye=m;ye!==null;){m=ye;var b=m.deletions;if(b!==null)for(var E=0;E<b.length;E++){var F=b[E];try{var G=p;ke?vr(G,F,m):Mt(G,F,m);var be=F.alternate;be!==null&&(be.return=null),F.return=null}catch(un){ns(F,m,un)}}if(b=m.child,m.subtreeFlags&12854&&b!==null)b.return=m,ye=b;else for(;ye!==null;){m=ye;try{var Oe=m.flags;if(Oe&32&&ke&&Ye(m.stateNode),Oe&512){var mt=m.alternate;if(mt!==null){var Dt=mt.ref;Dt!==null&&(typeof Dt=="function"?Dt(null):Dt.current=null)}}if(Oe&8192)switch(m.tag){case 13:if(m.memoizedState!==null){var Jt=m.alternate;(Jt===null||Jt.memoizedState===null)&&(lf=ai())}break;case 22:var Bn=m.memoizedState!==null,Sn=m.alternate,Fr=Sn!==null&&Sn.memoizedState!==null;if(b=m,ke){e:if(E=b,F=Bn,G=null,ke)for(var hn=E;;){if(hn.tag===5){if(G===null){G=hn;var Hs=hn.stateNode;F?st(Hs):Fe(hn.stateNode,hn.memoizedProps)}}else if(hn.tag===6){if(G===null){var Ia=hn.stateNode;F?Ae(Ia):Ge(Ia,hn.memoizedProps)}}else if((hn.tag!==22&&hn.tag!==23||hn.memoizedState===null||hn===E)&&hn.child!==null){hn.child.return=hn,hn=hn.child;continue}if(hn===E)break;for(;hn.sibling===null;){if(hn.return===null||hn.return===E)break e;G===hn&&(G=null),hn=hn.return}G===hn&&(G=null),hn.sibling.return=hn.return,hn=hn.sibling}}if(Bn&&!Fr&&b.mode&1){ye=b;for(var Je=b.child;Je!==null;){for(b=ye=Je;ye!==null;){E=ye;var He=E.child;switch(E.tag){case 0:case 11:case 14:case 15:nt(4,E,E.return);break;case 1:We(E,E.return);var ut=E.stateNode;if(typeof ut.componentWillUnmount=="function"){var Yt=E.return;try{ut.props=E.memoizedProps,ut.state=E.memoizedState,ut.componentWillUnmount()}catch(un){ns(E,Yt,un)}}break;case 5:We(E,E.return);break;case 22:if(E.memoizedState!==null){Cs(b);continue}}He!==null?(He.return=E,ye=He):Cs(b)}Je=Je.sibling}}}switch(Oe&4102){case 2:mn(m),m.flags&=-3;break;case 6:mn(m),m.flags&=-3,rr(m.alternate,m);break;case 4096:m.flags&=-4097;break;case 4100:m.flags&=-4097,rr(m.alternate,m);break;case 4:rr(m.alternate,m)}}catch(un){ns(m,m.return,un)}if(b=m.sibling,b!==null){b.return=m.return,ye=b;break}ye=m.return}}}function Ar(p,m,b){ye=p,In(p)}function In(p,m,b){for(var E=(p.mode&1)!==0;ye!==null;){var F=ye,G=F.child;if(F.tag===22&&E){var be=F.memoizedState!==null||oe;if(!be){var Oe=F.alternate,mt=Oe!==null&&Oe.memoizedState!==null||le;Oe=oe;var Dt=le;if(oe=be,(le=mt)&&!Dt)for(ye=F;ye!==null;)be=ye,mt=be.child,be.tag===22&&be.memoizedState!==null?ui(F):mt!==null?(mt.return=be,ye=mt):ui(F);for(;G!==null;)ye=G,In(G),G=G.sibling;ye=F,oe=Oe,le=Dt}li(p)}else F.subtreeFlags&8772&&G!==null?(G.return=F,ye=G):li(p)}}function li(p){for(;ye!==null;){var m=ye;if(m.flags&8772){var b=m.alternate;try{if(m.flags&8772)switch(m.tag){case 0:case 11:case 15:le||Re(5,m);break;case 1:var E=m.stateNode;if(m.flags&4&&!le)if(b===null)E.componentDidMount();else{var F=m.elementType===m.type?b.memoizedProps:Pi(m.type,b.memoizedProps);E.componentDidUpdate(F,b.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var G=m.updateQueue;G!==null&&Ja(m,G,E);break;case 3:var be=m.updateQueue;if(be!==null){if(b=null,m.child!==null)switch(m.child.tag){case 5:b=se(m.child.stateNode);break;case 1:b=m.child.stateNode}Ja(m,be,b)}break;case 5:var Oe=m.stateNode;b===null&&m.flags&4&&Te(Oe,m.type,m.memoizedProps,m);break;case 6:break;case 4:break;case 12:break;case 13:if(De&&m.memoizedState===null){var mt=m.alternate;if(mt!==null){var Dt=mt.memoizedState;if(Dt!==null){var Jt=Dt.dehydrated;Jt!==null&&we(Jt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}le||m.flags&512&&Ie(m)}catch(Bn){ns(m,m.return,Bn)}}if(m===p){ye=null;break}if(b=m.sibling,b!==null){b.return=m.return,ye=b;break}ye=m.return}}function Cs(p){for(;ye!==null;){var m=ye;if(m===p){ye=null;break}var b=m.sibling;if(b!==null){b.return=m.return,ye=b;break}ye=m.return}}function ui(p){for(;ye!==null;){var m=ye;try{switch(m.tag){case 0:case 11:case 15:var b=m.return;try{Re(4,m)}catch(mt){ns(m,b,mt)}break;case 1:var E=m.stateNode;if(typeof E.componentDidMount=="function"){var F=m.return;try{E.componentDidMount()}catch(mt){ns(m,F,mt)}}var G=m.return;try{Ie(m)}catch(mt){ns(m,G,mt)}break;case 5:var be=m.return;try{Ie(m)}catch(mt){ns(m,be,mt)}}}catch(mt){ns(m,m.return,mt)}if(m===p){ye=null;break}var Oe=m.sibling;if(Oe!==null){Oe.return=m.return,ye=Oe;break}ye=m.return}}var Ji=0,fr=1,ms=2,gs=3,ci=4;if(typeof Symbol=="function"&&Symbol.for){var hi=Symbol.for;Ji=hi("selector.component"),fr=hi("selector.has_pseudo_class"),ms=hi("selector.role"),gs=hi("selector.test_id"),ci=hi("selector.text")}function Qi(p){var m=ze(p);if(m!=null){if(typeof m.memoizedProps["data-testname"]!="string")throw Error(o(364));return m}if(p=ft(p),p===null)throw Error(o(362));return p.stateNode.current}function Us(p,m){switch(m.$$typeof){case Ji:if(p.type===m.value)return!0;break;case fr:e:{m=m.value,p=[p,0];for(var b=0;b<p.length;){var E=p[b++],F=p[b++],G=m[F];if(E.tag!==5||!Q(E)){for(;G!=null&&Us(E,G);)F++,G=m[F];if(F===m.length){m=!0;break e}else for(E=E.child;E!==null;)p.push(E,F),E=E.sibling}}m=!1}return m;case ms:if(p.tag===5&&Pe(p.stateNode,m.value))return!0;break;case ci:if((p.tag===5||p.tag===6)&&(p=ue(p),p!==null&&0<=p.indexOf(m.value)))return!0;break;case gs:if(p.tag===5&&(p=p.memoizedProps["data-testname"],typeof p=="string"&&p.toLowerCase()===m.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Po(p){switch(p.$$typeof){case Ji:return"<"+(N(p.value)||"Unknown")+">";case fr:return":has("+(Po(p)||"")+")";case ms:return'[role="'+p.value+'"]';case ci:return'"'+p.value+'"';case gs:return'[data-testname="'+p.value+'"]';default:throw Error(o(365))}}function Ii(p,m){var b=[];p=[p,0];for(var E=0;E<p.length;){var F=p[E++],G=p[E++],be=m[G];if(F.tag!==5||!Q(F)){for(;be!=null&&Us(F,be);)G++,be=m[G];if(G===m.length)b.push(F);else for(F=F.child;F!==null;)p.push(F,G),F=F.sibling}}return b}function $o(p,m){if(!Ke)throw Error(o(363));p=Qi(p),p=Ii(p,m),m=[],p=Array.from(p);for(var b=0;b<p.length;){var E=p[b++];if(E.tag===5)Q(E)||m.push(E.stateNode);else for(E=E.child;E!==null;)p.push(E),E=E.sibling}return m}var Lu=Math.ceil,tl=a.ReactCurrentDispatcher,Ta=a.ReactCurrentOwner,Fn=a.ReactCurrentBatchConfig,Un=0,fi=null,di=null,bi=0,es=0,nl=zt(0),Sr=0,Ca=null,Ko=0,af=0,Fc=0,Dc=null,ts=null,lf=0,Oc=1/0;function La(){Oc=ai()+500}var Nd=!1,qm=null,Pa=null,Jo=!1,Wl=null,Fd=0,uf=0,Dd=null,Pu=-1,cf=0;function vs(){return Un&6?ai():Pu!==-1?Pu:Pu=ai()}function Qo(p){return p.mode&1?Un&2&&bi!==0?bi&-bi:Sd.transition!==null?(cf===0&&(p=pu,pu<<=1,!(pu&4194240)&&(pu=64),cf=p),cf):(p=or,p!==0?p:K()):1}function Bs(p,m,b){if(50<uf)throw uf=0,Dd=null,Error(o(185));var E=jl(p,m);return E===null?null:(pa(E,m,b),(!(Un&2)||E!==fi)&&(E===fi&&(!(Un&2)&&(af|=m),Sr===4&&Ps(E,bi)),Ls(E,b),m===1&&Un===0&&!(p.mode&1)&&(La(),ga&&oo())),E)}function jl(p,m){p.lanes|=m;var b=p.alternate;for(b!==null&&(b.lanes|=m),b=p,p=p.return;p!==null;)p.childLanes|=m,b=p.alternate,b!==null&&(b.childLanes|=m),b=p,p=p.return;return b.tag===3?b.stateNode:null}function Ls(p,m){var b=p.callbackNode;Im(p,m);var E=vc(p,p===fi?bi:0);if(E===0)b!==null&&xd(b),p.callbackNode=null,p.callbackPriority=0;else if(m=E&-E,p.callbackPriority!==m){if(b!=null&&xd(b),m===1)p.tag===0?wd(Zm.bind(null,p)):yu(Zm.bind(null,p)),Ze?Ne(function(){Un===0&&oo()}):bn(yc,oo),b=null;else{switch(Zh(E)){case 1:b=yc;break;case 4:b=xc;break;case 16:b=mu;break;case 536870912:b=Fm;break;default:b=mu}b=B3(b,Uv.bind(null,p))}p.callbackPriority=m,p.callbackNode=b}}function Uv(p,m){if(Pu=-1,cf=0,Un&6)throw Error(o(327));var b=p.callbackNode;if(zs()&&p.callbackNode!==b)return null;var E=vc(p,p===fi?bi:0);if(E===0)return null;if(E&30||E&p.expiredLanes||m)m=Bd(p,E);else{m=E;var F=Un;Un|=2;var G=Bv();(fi!==p||bi!==m)&&(La(),Xl(p,m));do try{Kx();break}catch(Oe){Ru(p,Oe)}while(1);$a(),tl.current=G,Un=F,di!==null?m=0:(fi=null,bi=0,m=Sr)}if(m!==0){if(m===2&&(F=Vo(p),F!==0&&(E=F,m=Uc(p,F))),m===1)throw b=Ca,Xl(p,0),Ps(p,E),Ls(p,ai()),b;if(m===6)Ps(p,E);else{if(F=p.current.alternate,!(E&30)&&!Ym(F)&&(m=Bd(p,E),m===2&&(G=Vo(p),G!==0&&(E=G,m=Uc(p,G))),m===1))throw b=Ca,Xl(p,0),Ps(p,E),Ls(p,ai()),b;switch(p.finishedWork=F,p.finishedLanes=E,m){case 0:case 1:throw Error(o(345));case 2:Ra(p,ts);break;case 3:if(Ps(p,E),(E&130023424)===E&&(m=lf+500-ai(),10<m)){if(vc(p,0)!==0)break;if(F=p.suspendedLanes,(F&E)!==E){vs(),p.pingedLanes|=p.suspendedLanes&F;break}p.timeoutHandle=Se(Ra.bind(null,p,ts),m);break}Ra(p,ts);break;case 4:if(Ps(p,E),(E&4194240)===E)break;for(m=p.eventTimes,F=-1;0<E;){var be=31-Tr(E);G=1<<be,be=m[be],be>F&&(F=be),E&=~G}if(E=F,E=ai()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*Lu(E/1960))-E,10<E){p.timeoutHandle=Se(Ra.bind(null,p,ts),E);break}Ra(p,ts);break;case 5:Ra(p,ts);break;default:throw Error(o(329))}}}return Ls(p,ai()),p.callbackNode===b?Uv.bind(null,p):null}function Uc(p,m){var b=Dc;return p.current.memoizedState.isDehydrated&&(Xl(p,m).flags|=256),p=Bd(p,m),p!==2&&(m=ts,ts=b,m!==null&&Od(m)),p}function Od(p){ts===null?ts=p:ts.push.apply(ts,p)}function Ym(p){for(var m=p;;){if(m.flags&16384){var b=m.updateQueue;if(b!==null&&(b=b.stores,b!==null))for(var E=0;E<b.length;E++){var F=b[E],G=F.getSnapshot;F=F.value;try{if(!Yi(G(),F))return!1}catch{return!1}}}if(b=m.child,m.subtreeFlags&16384&&b!==null)b.return=m,m=b;else{if(m===p)break;for(;m.sibling===null;){if(m.return===null||m.return===p)return!0;m=m.return}m.sibling.return=m.return,m=m.sibling}}return!0}function Ps(p,m){for(m&=~Fc,m&=~af,p.suspendedLanes|=m,p.pingedLanes&=~m,p=p.expirationTimes;0<m;){var b=31-Tr(m),E=1<<b;p[b]=-1,m&=~E}}function Zm(p){if(Un&6)throw Error(o(327));zs();var m=vc(p,0);if(!(m&1))return Ls(p,ai()),null;var b=Bd(p,m);if(p.tag!==0&&b===2){var E=Vo(p);E!==0&&(m=E,b=Uc(p,E))}if(b===1)throw b=Ca,Xl(p,0),Ps(p,m),Ls(p,ai()),b;if(b===6)throw Error(o(345));return p.finishedWork=p.current.alternate,p.finishedLanes=m,Ra(p,ts),Ls(p,ai()),null}function $m(p){Wl!==null&&Wl.tag===0&&!(Un&6)&&zs();var m=Un;Un|=1;var b=Fn.transition,E=or;try{if(Fn.transition=null,or=1,p)return p()}finally{or=E,Fn.transition=b,Un=m,!(Un&6)&&oo()}}function Km(){es=nl.current,on(nl)}function Xl(p,m){p.finishedWork=null,p.finishedLanes=0;var b=p.timeoutHandle;if(b!==Ce&&(p.timeoutHandle=Ce,Ee(b)),di!==null)for(b=di.return;b!==null;){var E=b;switch(Es(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&jr();break;case 3:co(),on(xn),on(fn),Eu();break;case 5:qo(E);break;case 4:co();break;case 13:on(Er);break;case 19:on(Er);break;case 10:Ul(E.type._context);break;case 22:case 23:Km()}b=b.return}if(fi=p,di=p=zc(p.current,null),bi=es=m,Sr=0,Ca=null,Fc=af=Ko=0,ts=Dc=null,ao!==null){for(m=0;m<ao.length;m++)if(b=ao[m],E=b.interleaved,E!==null){b.interleaved=null;var F=E.next,G=b.pending;if(G!==null){var be=G.next;G.next=F,E.next=be}b.pending=E}ao=null}return p}function Ru(p,m){do{var b=di;try{if($a(),Vi.current=kc,_a){for(var E=Nr.memoizedState;E!==null;){var F=E.queue;F!==null&&(F.pending=null),E=E.next}_a=!1}if(Yo=0,Br=Si=Nr=null,To=!1,Zo=0,Ta.current=null,b===null||b.return===null){Sr=1,Ca=m,di=null;break}e:{var G=p,be=b.return,Oe=b,mt=m;if(m=bi,Oe.flags|=32768,mt!==null&&typeof mt=="object"&&typeof mt.then=="function"){var Dt=mt,Jt=Oe,Bn=Jt.tag;if(!(Jt.mode&1)&&(Bn===0||Bn===11||Bn===15)){var Sn=Jt.alternate;Sn?(Jt.updateQueue=Sn.updateQueue,Jt.memoizedState=Sn.memoizedState,Jt.lanes=Sn.lanes):(Jt.updateQueue=null,Jt.memoizedState=null)}var Fr=Co(be);if(Fr!==null){Fr.flags&=-257,Ea(Fr,be,Oe,G,m),Fr.mode&1&&el(G,Dt,m),m=Fr,mt=Dt;var hn=m.updateQueue;if(hn===null){var Hs=new Set;Hs.add(mt),m.updateQueue=Hs}else hn.add(mt);break e}else{if(!(m&1)){el(G,Dt,m),Ud();break e}mt=Error(o(426))}}else if(Mr&&Oe.mode&1){var Ia=Co(be);if(Ia!==null){!(Ia.flags&65536)&&(Ia.flags|=256),Ea(Ia,be,Oe,G,m),bu(mt);break e}}G=mt,Sr!==4&&(Sr=2),Dc===null?Dc=[G]:Dc.push(G),mt=Ld(mt,Oe),Oe=be;do{switch(Oe.tag){case 3:Oe.flags|=65536,m&=-m,Oe.lanes|=m;var Je=Pv(Oe,mt,m);Bl(Oe,Je);break e;case 1:G=mt;var He=Oe.type,ut=Oe.stateNode;if(!(Oe.flags&128)&&(typeof He.getDerivedStateFromError=="function"||ut!==null&&typeof ut.componentDidCatch=="function"&&(Pa===null||!Pa.has(ut)))){Oe.flags|=65536,m&=-m,Oe.lanes|=m;var Yt=Rv(Oe,G,m);Bl(Oe,Yt);break e}}Oe=Oe.return}while(Oe!==null)}zd(b)}catch(un){m=un,di===b&&b!==null&&(di=b=b.return);continue}break}while(1)}function Bv(){var p=tl.current;return tl.current=kc,p===null?kc:p}function Ud(){(Sr===0||Sr===3||Sr===2)&&(Sr=4),fi===null||!(Ko&268435455)&&!(af&268435455)||Ps(fi,bi)}function Bd(p,m){var b=Un;Un|=2;var E=Bv();fi===p&&bi===m||Xl(p,m);do try{zv();break}catch(F){Ru(p,F)}while(1);if($a(),Un=b,tl.current=E,di!==null)throw Error(o(261));return fi=null,bi=0,Sr}function zv(){for(;di!==null;)Bc(di)}function Kx(){for(;di!==null&&!Nm();)Bc(di)}function Bc(p){var m=Hd(p.alternate,p,es);p.memoizedProps=p.pendingProps,m===null?zd(p):di=m,Ta.current=null}function zd(p){var m=p;do{var b=m.alternate;if(p=m.return,m.flags&32768){if(b=ie(b,m),b!==null){b.flags&=32767,di=b;return}if(p!==null)p.flags|=32768,p.subtreeFlags=0,p.deletions=null;else{Sr=6,di=null;return}}else if(b=kv(b,m,es),b!==null){di=b;return}if(m=m.sibling,m!==null){di=m;return}di=m=p}while(m!==null);Sr===0&&(Sr=5)}function Ra(p,m){var b=or,E=Fn.transition;try{Fn.transition=null,or=1,rl(p,m,b)}finally{Fn.transition=E,or=b}return null}function rl(p,m,b){do zs();while(Wl!==null);if(Un&6)throw Error(o(327));var E=p.finishedWork,F=p.finishedLanes;if(E===null)return null;if(p.finishedWork=null,p.finishedLanes=0,E===p.current)throw Error(o(177));p.callbackNode=null,p.callbackPriority=0;var G=E.lanes|E.childLanes;if(yd(p,G),p===fi&&(di=fi=null,bi=0),!(E.subtreeFlags&2064)&&!(E.flags&2064)||Jo||(Jo=!0,B3(mu,function(){return zs(),null})),G=(E.flags&15990)!==0,E.subtreeFlags&15990||G){G=Fn.transition,Fn.transition=null;var be=or;or=1;var Oe=Un;Un|=4,Ta.current=null,_t(p,E),Cr(p,E),j(p.containerInfo),p.current=E,Ar(E),ma(),Un=Oe,or=be,Fn.transition=G}else p.current=E;if(Jo&&(Jo=!1,Wl=p,Fd=F),G=p.pendingLanes,G===0&&(Pa=null),$h(E.stateNode),Ls(p,ai()),m!==null)for(b=p.onRecoverableError,E=0;E<m.length;E++)b(m[E]);if(Nd)throw Nd=!1,p=qm,qm=null,p;return Fd&1&&p.tag!==0&&zs(),G=p.pendingLanes,G&1?p===Dd?uf++:(uf=0,Dd=p):uf=0,oo(),null}function zs(){if(Wl!==null){var p=Zh(Fd),m=Fn.transition,b=or;try{if(Fn.transition=null,or=16>p?16:p,Wl===null)var E=!1;else{if(p=Wl,Wl=null,Fd=0,Un&6)throw Error(o(331));var F=Un;for(Un|=4,ye=p.current;ye!==null;){var G=ye,be=G.child;if(ye.flags&16){var Oe=G.deletions;if(Oe!==null){for(var mt=0;mt<Oe.length;mt++){var Dt=Oe[mt];for(ye=Dt;ye!==null;){var Jt=ye;switch(Jt.tag){case 0:case 11:case 15:nt(8,Jt,G)}var Bn=Jt.child;if(Bn!==null)Bn.return=Jt,ye=Bn;else for(;ye!==null;){Jt=ye;var Sn=Jt.sibling,Fr=Jt.return;if(St(Jt),Jt===Dt){ye=null;break}if(Sn!==null){Sn.return=Fr,ye=Sn;break}ye=Fr}}}var hn=G.alternate;if(hn!==null){var Hs=hn.child;if(Hs!==null){hn.child=null;do{var Ia=Hs.sibling;Hs.sibling=null,Hs=Ia}while(Hs!==null)}}ye=G}}if(G.subtreeFlags&2064&&be!==null)be.return=G,ye=be;else e:for(;ye!==null;){if(G=ye,G.flags&2048)switch(G.tag){case 0:case 11:case 15:nt(9,G,G.return)}var Je=G.sibling;if(Je!==null){Je.return=G.return,ye=Je;break e}ye=G.return}}var He=p.current;for(ye=He;ye!==null;){be=ye;var ut=be.child;if(be.subtreeFlags&2064&&ut!==null)ut.return=be,ye=ut;else e:for(be=He;ye!==null;){if(Oe=ye,Oe.flags&2048)try{switch(Oe.tag){case 0:case 11:case 15:Re(9,Oe)}}catch(un){ns(Oe,Oe.return,un)}if(Oe===be){ye=null;break e}var Yt=Oe.sibling;if(Yt!==null){Yt.return=Oe.return,ye=Yt;break e}ye=Oe.return}}if(Un=F,oo(),_o&&typeof _o.onPostCommitFiberRoot=="function")try{_o.onPostCommitFiberRoot(wc,p)}catch{}E=!0}return E}finally{or=b,Fn.transition=m}}return!1}function il(p,m,b){m=Ld(b,m),m=Pv(p,m,1),xa(p,m),m=vs(),p=jl(p,1),p!==null&&(pa(p,1,m),Ls(p,m))}function ns(p,m,b){if(p.tag===3)il(p,p,b);else for(;m!==null;){if(m.tag===3){il(m,p,b);break}else if(m.tag===1){var E=m.stateNode;if(typeof m.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Pa===null||!Pa.has(E))){p=Ld(b,p),p=Rv(m,p,1),xa(m,p),p=vs(),m=jl(m,1),m!==null&&(pa(m,1,p),Ls(m,p));break}}m=m.return}}function Jm(p,m,b){var E=p.pingCache;E!==null&&E.delete(m),m=vs(),p.pingedLanes|=p.suspendedLanes&b,fi===p&&(bi&b)===b&&(Sr===4||Sr===3&&(bi&130023424)===bi&&500>ai()-lf?Xl(p,0):Fc|=b),Ls(p,m)}function Qm(p,m){m===0&&(p.mode&1?(m=gc,gc<<=1,!(gc&130023424)&&(gc=4194304)):m=1);var b=vs();p=jl(p,m),p!==null&&(pa(p,m,b),Ls(p,b))}function Jx(p){var m=p.memoizedState,b=0;m!==null&&(b=m.retryLane),Qm(p,b)}function eg(p,m){var b=0;switch(p.tag){case 13:var E=p.stateNode,F=p.memoizedState;F!==null&&(b=F.retryLane);break;case 19:E=p.stateNode;break;default:throw Error(o(314))}E!==null&&E.delete(m),Qm(p,b)}var Hd;Hd=function(p,m,b){if(p!==null)if(p.memoizedProps!==m.pendingProps||xn.current)ps=!0;else{if(!(p.lanes&b)&&!(m.flags&128))return ps=!1,te(p,m,b);ps=!!(p.flags&131072)}else ps=!1,Mr&&m.flags&1048576&&Ri(m,En,m.index);switch(m.lanes=0,m.tag){case 2:var E=m.type;p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),p=m.pendingProps;var F=Qn(m,fn.current);ya(m,b),F=Au(null,m,E,p,F,b);var G=Os();return m.flags|=1,typeof F=="object"&&F!==null&&typeof F.render=="function"&&F.$$typeof===void 0?(m.tag=1,m.memoizedState=null,m.updateQueue=null,cr(E)?(G=!0,Rn(m)):G=!1,m.memoizedState=F.state!==null&&F.state!==void 0?F.state:null,Su(m),F.updater=$,m.stateNode=F,F._reactInternals=m,ct(m,E,p,b),m=Wm(null,m,E,!0,G,b)):(m.tag=0,Mr&&G&&uo(m),Wi(null,m,F,b),m=m.child),m;case 16:E=m.elementType;e:{switch(p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),p=m.pendingProps,F=E._init,E=F(E._payload),m.type=E,F=m.tag=IF(E),p=Pi(E,p),F){case 0:m=Vm(null,m,E,p,b);break e;case 1:m=Nv(null,m,E,p,b);break e;case 11:m=Nc(null,m,E,p,b);break e;case 14:m=kd(null,m,E,Pi(E.type,p),b);break e}throw Error(o(306,E,""))}return m;case 0:return E=m.type,F=m.pendingProps,F=m.elementType===E?F:Pi(E,F),Vm(p,m,E,F,b);case 1:return E=m.type,F=m.pendingProps,F=m.elementType===E?F:Pi(E,F),Nv(p,m,E,F,b);case 3:e:{if(Fv(m),p===null)throw Error(o(387));E=m.pendingProps,G=m.memoizedState,F=G.element,_c(p,m),zl(m,E,null,b);var be=m.memoizedState;if(E=be.element,De&&G.isDehydrated)if(G={element:E,isDehydrated:!1,cache:be.cache,transitions:be.transitions},m.updateQueue.baseState=G,m.memoizedState=G,m.flags&256){F=Error(o(423)),m=Dv(p,m,E,b,F);break e}else if(E!==F){F=Error(o(424)),m=Dv(p,m,E,b,F);break e}else for(De&&(cs=Wr(m.stateNode.containerInfo),ni=m,Mr=!0,hs=null,Qa=!1),b=Mu(m,null,E,b),m.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling;else{if(Xo(),E===F){m=Z(p,m,b);break e}Wi(p,m,E,b)}m=m.child}return m;case 5:return Sa(m),p===null&&ki(m),E=m.type,F=m.pendingProps,G=p!==null?p.memoizedProps:null,be=F.children,ae(E,F)?be=null:G!==null&&ae(E,G)&&(m.flags|=32),Gm(p,m),Wi(p,m,be,b),m.child;case 6:return p===null&&ki(m),null;case 13:return of(p,m,b);case 4:return $i(m,m.stateNode.containerInfo),E=m.pendingProps,p===null?m.child=Zi(m,null,E,b):Wi(p,m,E,b),m.child;case 11:return E=m.type,F=m.pendingProps,F=m.elementType===E?F:Pi(E,F),Nc(p,m,E,F,b);case 7:return Wi(p,m,m.pendingProps,b),m.child;case 8:return Wi(p,m,m.pendingProps.children,b),m.child;case 12:return Wi(p,m,m.pendingProps.children,b),m.child;case 10:e:{if(E=m.type._context,F=m.pendingProps,G=m.memoizedProps,be=F.value,_d(m,E,be),G!==null)if(Yi(G.value,be)){if(G.children===F.children&&!xn.current){m=Z(p,m,b);break e}}else for(G=m.child,G!==null&&(G.return=m);G!==null;){var Oe=G.dependencies;if(Oe!==null){be=G.child;for(var mt=Oe.firstContext;mt!==null;){if(mt.context===E){if(G.tag===1){mt=bo(-1,b&-b),mt.tag=2;var Dt=G.updateQueue;if(Dt!==null){Dt=Dt.shared;var Jt=Dt.pending;Jt===null?mt.next=mt:(mt.next=Jt.next,Jt.next=mt),Dt.pending=mt}}G.lanes|=b,mt=G.alternate,mt!==null&&(mt.lanes|=b),Kh(G.return,b,m),Oe.lanes|=b;break}mt=mt.next}}else if(G.tag===10)be=G.type===m.type?null:G.child;else if(G.tag===18){if(be=G.return,be===null)throw Error(o(341));be.lanes|=b,Oe=be.alternate,Oe!==null&&(Oe.lanes|=b),Kh(be,b,m),be=G.sibling}else be=G.child;if(be!==null)be.return=G;else for(be=G;be!==null;){if(be===m){be=null;break}if(G=be.sibling,G!==null){G.return=be.return,be=G;break}be=be.return}G=be}Wi(p,m,F.children,b),m=m.child}return m;case 9:return F=m.type,E=m.pendingProps.children,ya(m,b),F=us(F),E=E(F),m.flags|=1,Wi(p,m,E,b),m.child;case 14:return E=m.type,F=Pi(E,m.pendingProps),F=Pi(E.type,F),kd(p,m,E,F,b);case 15:return Hm(p,m,m.type,m.pendingProps,b);case 17:return E=m.type,F=m.pendingProps,F=m.elementType===E?F:Pi(E,F),p!==null&&(p.alternate=null,m.alternate=null,m.flags|=2),m.tag=1,cr(E)?(p=!0,Rn(m)):p=!1,ya(m,b),Le(m,E,F),ct(m,E,F,b),Wm(null,m,E,!0,p,b);case 19:return z(p,m,b);case 22:return Iv(p,m,b)}throw Error(o(156,m.tag))};function B3(p,m){return bn(p,m)}function kF(p,m,b,E){this.tag=p,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=m,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ka(p,m,b,E){return new kF(p,m,b,E)}function Qx(p){return p=p.prototype,!(!p||!p.isReactComponent)}function IF(p){if(typeof p=="function")return Qx(p)?1:0;if(p!=null){if(p=p.$$typeof,p===x)return 11;if(p===S)return 14}return 2}function zc(p,m){var b=p.alternate;return b===null?(b=ka(p.tag,m,p.key,p.mode),b.elementType=p.elementType,b.type=p.type,b.stateNode=p.stateNode,b.alternate=p,p.alternate=b):(b.pendingProps=m,b.type=p.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=p.flags&14680064,b.childLanes=p.childLanes,b.lanes=p.lanes,b.child=p.child,b.memoizedProps=p.memoizedProps,b.memoizedState=p.memoizedState,b.updateQueue=p.updateQueue,m=p.dependencies,b.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext},b.sibling=p.sibling,b.index=p.index,b.ref=p.ref,b}function Hv(p,m,b,E,F,G){var be=2;if(E=p,typeof p=="function")Qx(p)&&(be=1);else if(typeof p=="string")be=5;else e:switch(p){case c:return hf(b.children,F,G,m);case h:be=8,F|=8;break;case f:return p=ka(12,b,m,F|2),p.elementType=f,p.lanes=G,p;case w:return p=ka(13,b,m,F),p.elementType=w,p.lanes=G,p;case g:return p=ka(19,b,m,F),p.elementType=g,p.lanes=G,p;case T:return Gv(b,F,G,m);default:if(typeof p=="object"&&p!==null)switch(p.$$typeof){case d:be=10;break e;case v:be=9;break e;case x:be=11;break e;case S:be=14;break e;case _:be=16,E=null;break e}throw Error(o(130,p==null?p:typeof p,""))}return m=ka(be,b,m,F),m.elementType=p,m.type=E,m.lanes=G,m}function hf(p,m,b,E){return p=ka(7,p,E,m),p.lanes=b,p}function Gv(p,m,b,E){return p=ka(22,p,E,m),p.elementType=T,p.lanes=b,p.stateNode={},p}function ew(p,m,b){return p=ka(6,p,null,m),p.lanes=b,p}function tw(p,m,b){return m=ka(4,p.children!==null?p.children:[],p.key,m),m.lanes=b,m.stateNode={containerInfo:p.containerInfo,pendingChildren:null,implementation:p.implementation},m}function NF(p,m,b,E,F){this.tag=m,this.containerInfo=p,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ce,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ol(0),this.expirationTimes=Ol(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ol(0),this.identifierPrefix=E,this.onRecoverableError=F,De&&(this.mutableSourceEagerHydrationData=null)}function z3(p,m,b,E,F,G,be,Oe,mt){return p=new NF(p,m,b,Oe,mt),m===1?(m=1,G===!0&&(m|=8)):m=0,G=ka(3,null,null,m),p.current=G,G.stateNode=p,G.memoizedState={element:E,isDehydrated:b,cache:null,transitions:null},Su(G),p}function H3(p){if(!p)return ln;p=p._reactInternals;e:{if(P(p)!==p||p.tag!==1)throw Error(o(170));var m=p;do{switch(m.tag){case 3:m=m.stateNode.context;break e;case 1:if(cr(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break e}}m=m.return}while(m!==null);throw Error(o(171))}if(p.tag===1){var b=p.type;if(cr(b))return _r(p,b,m)}return m}function G3(p){var m=p._reactInternals;if(m===void 0)throw typeof p.render=="function"?Error(o(188)):(p=Object.keys(p).join(","),Error(o(268,p)));return p=B(m),p===null?null:p.stateNode}function V3(p,m){if(p=p.memoizedState,p!==null&&p.dehydrated!==null){var b=p.retryLane;p.retryLane=b!==0&&b<m?b:m}}function nw(p,m){V3(p,m),(p=p.alternate)&&V3(p,m)}function FF(p){return p=B(p),p===null?null:p.stateNode}function DF(){return null}return n.attemptContinuousHydration=function(p){if(p.tag===13){var m=vs();Bs(p,134217728,m),nw(p,134217728)}},n.attemptHydrationAtCurrentPriority=function(p){if(p.tag===13){var m=vs(),b=Qo(p);Bs(p,b,m),nw(p,b)}},n.attemptSynchronousHydration=function(p){switch(p.tag){case 3:var m=p.stateNode;if(m.current.memoizedState.isDehydrated){var b=Za(m.pendingLanes);b!==0&&(Hi(m,b|1),Ls(m,ai()),!(Un&6)&&(La(),oo()))}break;case 13:var E=vs();$m(function(){return Bs(p,1,E)}),nw(p,1)}},n.batchedUpdates=function(p,m){var b=Un;Un|=1;try{return p(m)}finally{Un=b,Un===0&&(La(),ga&&oo())}},n.createComponentSelector=function(p){return{$$typeof:Ji,value:p}},n.createContainer=function(p,m,b,E,F,G,be){return z3(p,m,!1,null,b,E,F,G,be)},n.createHasPseudoClassSelector=function(p){return{$$typeof:fr,value:p}},n.createHydrationContainer=function(p,m,b,E,F,G,be,Oe,mt){return p=z3(b,E,!0,p,F,G,be,Oe,mt),p.context=H3(null),b=p.current,E=vs(),F=Qo(b),G=bo(E,F),G.callback=m??null,xa(b,G),p.current.lanes=F,pa(p,F,E),Ls(p,E),p},n.createPortal=function(p,m,b){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:E==null?null:""+E,children:p,containerInfo:m,implementation:b}},n.createRoleSelector=function(p){return{$$typeof:ms,value:p}},n.createTestNameSelector=function(p){return{$$typeof:gs,value:p}},n.createTextSelector=function(p){return{$$typeof:ci,value:p}},n.deferredUpdates=function(p){var m=or,b=Fn.transition;try{return Fn.transition=null,or=16,p()}finally{or=m,Fn.transition=b}},n.discreteUpdates=function(p,m,b,E,F){var G=or,be=Fn.transition;try{return Fn.transition=null,or=1,p(m,b,E,F)}finally{or=G,Fn.transition=be,Un===0&&La()}},n.findAllNodes=$o,n.findBoundingRects=function(p,m){if(!Ke)throw Error(o(363));m=$o(p,m),p=[];for(var b=0;b<m.length;b++)p.push(vt(m[b]));for(m=p.length-1;0<m;m--){b=p[m];for(var E=b.x,F=E+b.width,G=b.y,be=G+b.height,Oe=m-1;0<=Oe;Oe--)if(m!==Oe){var mt=p[Oe],Dt=mt.x,Jt=Dt+mt.width,Bn=mt.y,Sn=Bn+mt.height;if(E>=Dt&&G>=Bn&&F<=Jt&&be<=Sn){p.splice(m,1);break}else if(E!==Dt||b.width!==mt.width||Sn<G||Bn>be){if(!(G!==Bn||b.height!==mt.height||Jt<E||Dt>F)){Dt>E&&(mt.width+=Dt-E,mt.x=E),Jt<F&&(mt.width=F-Dt),p.splice(m,1);break}}else{Bn>G&&(mt.height+=Bn-G,mt.y=G),Sn<be&&(mt.height=be-Bn),p.splice(m,1);break}}}return p},n.findHostInstance=G3,n.findHostInstanceWithNoPortals=function(p){return p=O(p),p=p!==null?H(p):null,p===null?null:p.stateNode},n.findHostInstanceWithWarning=function(p){return G3(p)},n.flushControlled=function(p){var m=Un;Un|=1;var b=Fn.transition,E=or;try{Fn.transition=null,or=1,p()}finally{or=E,Fn.transition=b,Un=m,Un===0&&(La(),oo())}},n.flushPassiveEffects=zs,n.flushSync=$m,n.focusWithin=function(p,m){if(!Ke)throw Error(o(363));for(p=Qi(p),m=Ii(p,m),m=Array.from(m),p=0;p<m.length;){var b=m[p++];if(!Q(b)){if(b.tag===5&&et(b.stateNode))return!0;for(b=b.child;b!==null;)m.push(b),b=b.sibling}}return!1},n.getCurrentUpdatePriority=function(){return or},n.getFindAllNodesFailureDescription=function(p,m){if(!Ke)throw Error(o(363));var b=0,E=[];p=[Qi(p),0];for(var F=0;F<p.length;){var G=p[F++],be=p[F++],Oe=m[be];if((G.tag!==5||!Q(G))&&(Us(G,Oe)&&(E.push(Po(Oe)),be++,be>b&&(b=be)),be<m.length))for(G=G.child;G!==null;)p.push(G,be),G=G.sibling}if(b<m.length){for(p=[];b<m.length;b++)p.push(Po(m[b]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+p.join(" > ")}return null},n.getPublicRootInstance=function(p){if(p=p.current,!p.child)return null;switch(p.child.tag){case 5:return se(p.child.stateNode);default:return p.child.stateNode}},n.injectIntoDevTools=function(p){if(p={bundleType:p.bundleType,version:p.version,rendererPackageName:p.rendererPackageName,rendererConfig:p.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:FF,findFiberByHostInstance:p.findFiberByHostInstance||DF,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")p=!1;else{var m=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(m.isDisabled||!m.supportsFiber)p=!0;else{try{wc=m.inject(p),_o=m}catch{}p=!!m.checkDCE}}return p},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(p,m,b,E){if(!Ke)throw Error(o(363));p=$o(p,m);var F=Qe(p,b,E).disconnect;return{disconnect:function(){F()}}},n.registerMutableSourceForHydration=function(p,m){var b=m._getVersion;b=b(m._source),p.mutableSourceEagerHydrationData==null?p.mutableSourceEagerHydrationData=[m,b]:p.mutableSourceEagerHydrationData.push(m,b)},n.runWithPriority=function(p,m){var b=or;try{return or=p,m()}finally{or=b}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(p,m,b,E){var F=m.current,G=vs(),be=Qo(F);return b=H3(b),m.context===null?m.context=b:m.pendingContext=b,m=bo(G,be),m.payload={element:p},E=E===void 0?null:E,E!==null&&(m.callback=E),xa(F,m),p=Bs(F,be,G),p!==null&&Ka(p,F,be),be},n};(function(t){t.exports=yG})(gG);const xG=O2(Hb),wG=t=>typeof t=="object"&&typeof t.then=="function",zf=[];function qk(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e)return!1;const r=t.length;if(e.length!==r)return!1;for(let i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}function Yk(t,e=null,n=!1,r={}){e===null&&(e=[t]);for(const s of zf)if(qk(e,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return r.lifespan&&r.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,r.lifespan)),s.response;if(!n)throw s.promise}const i={keys:e,equal:r.equal,remove:()=>{const s=zf.indexOf(i);s!==-1&&zf.splice(s,1)},promise:(wG(t)?t:t(...e)).then(s=>{i.response=s,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))}).catch(s=>i.error=s)};if(zf.push(i),!n)throw i.promise}const SG=(t,e,n)=>Yk(t,e,!1,n),_G=(t,e,n)=>void Yk(t,e,!0,n),bG=t=>{if(t===void 0||t.length===0)zf.splice(0,zf.length);else{const e=zf.find(n=>qk(t,n.keys,n.equal));e&&e.remove()}},l3={},Zk=t=>void Object.assign(l3,t);function MG(t,e){function n(c,{args:h=[],attach:f,...d},v){let x=`${c[0].toUpperCase()}${c.slice(1)}`,w;if(c==="primitive"){if(d.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const g=d.object;w=wp(g,{type:c,root:v,attach:f,primitive:!0})}else{const g=l3[x];if(!g)throw new Error(`R3F: ${x} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(h))throw new Error("R3F: The args prop must be an array!");w=wp(new g(...h),{type:c,root:v,attach:f,memoizedProps:{args:h}})}return w.__r3f.attach===void 0&&(w instanceof An?w.__r3f.attach="geometry":w instanceof Fs&&(w.__r3f.attach="material")),x!=="inject"&&fS(w,d),w}function r(c,h){let f=!1;if(h){var d,v;(d=h.__r3f)!=null&&d.attach?hS(c,h,h.__r3f.attach):h.isObject3D&&c.isObject3D&&(c.add(h),f=!0),f||(v=c.__r3f)==null||v.objects.push(h),h.__r3f||wp(h,{}),h.__r3f.parent=c,Vb(h),Sp(h)}}function i(c,h,f){let d=!1;if(h){var v,x;if((v=h.__r3f)!=null&&v.attach)hS(c,h,h.__r3f.attach);else if(h.isObject3D&&c.isObject3D){h.parent=c,h.dispatchEvent({type:"added"});const w=c.children.filter(S=>S!==h),g=w.indexOf(f);c.children=[...w.slice(0,g),h,...w.slice(g)],d=!0}d||(x=c.__r3f)==null||x.objects.push(h),h.__r3f||wp(h,{}),h.__r3f.parent=c,Vb(h),Sp(h)}}function s(c,h,f=!1){c&&[...c].forEach(d=>o(h,d,f))}function o(c,h,f){if(h){var d,v,x;if(h.__r3f&&(h.__r3f.parent=null),(d=c.__r3f)!=null&&d.objects&&(c.__r3f.objects=c.__r3f.objects.filter(T=>T!==h)),(v=h.__r3f)!=null&&v.attach)PT(c,h,h.__r3f.attach);else if(h.isObject3D&&c.isObject3D){var w;c.remove(h),(w=h.__r3f)!=null&&w.root&&RG(h.__r3f.root,h)}const S=(x=h.__r3f)==null?void 0:x.primitive,_=f===void 0?h.dispose!==null&&!S:f;if(!S){var g;s((g=h.__r3f)==null?void 0:g.objects,h,_),s(h.children,h,_)}delete h.__r3f,_&&h.dispose&&h.type!=="Scene"&&z0.unstable_scheduleCallback(z0.unstable_IdlePriority,()=>{try{h.dispose()}catch{}}),Sp(c)}}function a(c,h,f,d){var v;const x=(v=c.__r3f)==null?void 0:v.parent;if(!x)return;const w=n(h,f,c.__r3f.root);if(c.children){for(const g of c.children)g.__r3f&&r(w,g);c.children=c.children.filter(g=>!g.__r3f)}c.__r3f.objects.forEach(g=>r(w,g)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||o(x,c),w.parent&&(w.__r3f.autoRemovedBeforeAppend=!0),r(x,w),w.raycast&&w.__r3f.eventCount&&w.__r3f.root.getState().internal.interaction.push(w),[d,d.alternate].forEach(g=>{g!==null&&(g.stateNode=w,g.ref&&(typeof g.ref=="function"?g.ref(w):g.ref.current=w))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:xG({createInstance:n,removeChild:o,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,h)=>{if(!h)return;const f=c.getState().scene;f.__r3f&&(f.__r3f.root=c,r(f,h))},removeChildFromContainer:(c,h)=>{h&&o(c.getState().scene,h)},insertInContainerBefore:(c,h,f)=>{if(!h||!f)return;const d=c.getState().scene;d.__r3f&&i(d,h,f)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var h;const f=(h=c==null?void 0:c.__r3f)!=null?h:{};return Boolean(f.handlers)},prepareUpdate(c,h,f,d){var v;if(((v=c==null?void 0:c.__r3f)!=null?v:{}).primitive&&d.object&&d.object!==c)return[!0];{const{args:w=[],children:g,...S}=d,{args:_=[],children:T,...L}=f;if(!Array.isArray(w))throw new Error("R3F: the args prop must be an array!");if(w.some((N,R)=>N!==_[R]))return[!0];const k=nI(c,S,L,!0);return k.changes.length?[!1,k]:null}},commitUpdate(c,[h,f],d,v,x,w){h?a(c,d,x,w):fS(c,f)},commitMount(c,h,f,d){var v;const x=(v=c.__r3f)!=null?v:{};c.raycast&&x.handlers&&x.eventCount&&c.__r3f.root.getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>wp(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var h;const{attach:f,parent:d}=(h=c.__r3f)!=null?h:{};f&&d&&PT(d,c,f),c.isObject3D&&(c.visible=!1),Sp(c)},unhideInstance(c,h){var f;const{attach:d,parent:v}=(f=c.__r3f)!=null?f:{};d&&v&&hS(v,c,d),(c.isObject3D&&h.visible==null||h.visible)&&(c.visible=!0),Sp(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():ch.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&$r.fun(performance.now)?performance.now:$r.fun(Date.now)?Date.now:()=>0,scheduleTimeout:$r.fun(setTimeout)?setTimeout:void 0,cancelTimeout:$r.fun(clearTimeout)?clearTimeout:void 0}),applyProps:fS}}var AT,TT;const cS=t=>"colorSpace"in t||"outputColorSpace"in t,$k=()=>{var t;return(t=l3.ColorManagement)!=null?t:null},Kk=t=>t&&t.isOrthographicCamera,EG=t=>t&&t.hasOwnProperty("current"),pv=typeof window<"u"&&((AT=window.document)!=null&&AT.createElement||((TT=window.navigator)==null?void 0:TT.product)==="ReactNative")?Be.useLayoutEffect:Be.useEffect;function Jk(t){const e=Be.useRef(t);return pv(()=>void(e.current=t),[t]),e}function AG({set:t}){return pv(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class Qk extends Be.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}Qk.getDerivedStateFromError=()=>({error:!0});const eI="__default",CT=new Map,TG=t=>t&&!!t.memoized&&!!t.changes;function tI(t){var e;const n=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(t)?Math.min(Math.max(t[0],n),t[1]):t}const xg=t=>{var e;return(e=t.__r3f)==null?void 0:e.root.getState()},$r={obj:t=>t===Object(t)&&!$r.arr(t)&&typeof t!="function",fun:t=>typeof t=="function",str:t=>typeof t=="string",num:t=>typeof t=="number",boo:t=>typeof t=="boolean",und:t=>t===void 0,arr:t=>Array.isArray(t),equ(t,e,{arrays:n="shallow",objects:r="reference",strict:i=!0}={}){if(typeof t!=typeof e||!!t!=!!e)return!1;if($r.str(t)||$r.num(t))return t===e;const s=$r.obj(t);if(s&&r==="reference")return t===e;const o=$r.arr(t);if(o&&n==="reference")return t===e;if((o||s)&&t===e)return!0;let a;for(a in t)if(!(a in e))return!1;if(s&&n==="shallow"&&r==="shallow"){for(a in i?e:t)if(!$r.equ(t[a],e[a],{strict:i,objects:"reference"}))return!1}else for(a in i?e:t)if(t[a]!==e[a])return!1;if($r.und(a)){if(o&&t.length===0&&e.length===0||s&&Object.keys(t).length===0&&Object.keys(e).length===0)return!0;if(t!==e)return!1}return!0}};function CG(t){const e={nodes:{},materials:{}};return t&&t.traverse(n=>{n.name&&(e.nodes[n.name]=n),n.material&&!e.materials[n.material.name]&&(e.materials[n.material.name]=n.material)}),e}function LG(t){t.dispose&&t.type!=="Scene"&&t.dispose();for(const e in t)e.dispose==null||e.dispose(),delete t[e]}function wp(t,e){const n=t;return n.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},t}function Gb(t,e){let n=t;if(e.includes("-")){const r=e.split("-"),i=r.pop();return n=r.reduce((s,o)=>s[o],t),{target:n,key:i}}else return{target:n,key:e}}const LT=/-\d+$/;function hS(t,e,n){if($r.str(n)){if(LT.test(n)){const s=n.replace(LT,""),{target:o,key:a}=Gb(t,s);Array.isArray(o[a])||(o[a]=[])}const{target:r,key:i}=Gb(t,n);e.__r3f.previousAttach=r[i],r[i]=e}else e.__r3f.previousAttach=n(t,e)}function PT(t,e,n){var r,i;if($r.str(n)){const{target:s,key:o}=Gb(t,n),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(r=e.__r3f)==null||r.previousAttach==null||r.previousAttach(t,e);(i=e.__r3f)==null||delete i.previousAttach}function nI(t,{children:e,key:n,ref:r,...i},{children:s,key:o,ref:a,...l}={},u=!1){var c;const h=(c=t==null?void 0:t.__r3f)!=null?c:{},f=Object.entries(i),d=[];if(u){const x=Object.keys(l);for(let w=0;w<x.length;w++)i.hasOwnProperty(x[w])||f.unshift([x[w],eI+"remove"])}f.forEach(([x,w])=>{var g;if((g=t.__r3f)!=null&&g.primitive&&x==="object"||$r.equ(w,l[x]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(x))return d.push([x,w,!0,[]]);let S=[];x.includes("-")&&(S=x.split("-")),d.push([x,w,!1,S]);for(const _ in i){const T=i[_];_.startsWith(`${x}-`)&&d.push([_,T,!1,_.split("-")])}});const v={...i};return h.memoizedProps&&h.memoizedProps.args&&(v.args=h.memoizedProps.args),h.memoizedProps&&h.memoizedProps.attach&&(v.attach=h.memoizedProps.attach),{memoized:v,changes:d}}function fS(t,e){var n,r,i;const s=(n=t.__r3f)!=null?n:{},o=s.root,a=(r=o==null||o.getState==null?void 0:o.getState())!=null?r:{},{memoized:l,changes:u}=TG(e)?e:nI(t,e),c=s.eventCount;t.__r3f&&(t.__r3f.memoizedProps=l);for(let f=0;f<u.length;f++){let[d,v,x,w]=u[f];if(cS(t)){const T="srgb",L="srgb-linear";d==="encoding"?(d="colorSpace",v=v===3001?T:L):d==="outputEncoding"&&(d="outputColorSpace",v=v===3001?T:L)}let g=t,S=g[d];if(w.length&&(S=w.reduce((_,T)=>_[T],t),!(S&&S.set))){const[_,...T]=w.reverse();g=T.reverse().reduce((L,k)=>L[k],t),d=_}if(v===eI+"remove")if(g.constructor){let _=CT.get(g.constructor);_||(_=new g.constructor,CT.set(g.constructor,_)),v=_[d]}else v=0;if(x)v?s.handlers[d]=v:delete s.handlers[d],s.eventCount=Object.keys(s.handlers).length;else if(S&&S.set&&(S.copy||S instanceof Xf)){if(Array.isArray(v))S.fromArray?S.fromArray(v):S.set(...v);else if(S.copy&&v&&v.constructor&&S.constructor===v.constructor)S.copy(v);else if(v!==void 0){const _=S instanceof Zt;!_&&S.setScalar?S.setScalar(v):S instanceof Xf&&v instanceof Xf?S.mask=v.mask:S.set(v),!$k()&&!a.linear&&_&&S.convertSRGBToLinear()}}else if(g[d]=v,g[d]instanceof Ci&&g[d].format===mo&&g[d].type===su){const _=g[d];cS(_)&&cS(a.gl)?_.colorSpace=a.gl.outputColorSpace:_.encoding=a.gl.outputEncoding}Sp(t)}if(s.parent&&a.internal&&t.raycast&&c!==s.eventCount){const f=a.internal.interaction.indexOf(t);f>-1&&a.internal.interaction.splice(f,1),s.eventCount&&a.internal.interaction.push(t)}return!(u.length===1&&u[0][0]==="onUpdate")&&u.length&&(i=t.__r3f)!=null&&i.parent&&Vb(t),t}function Sp(t){var e,n;const r=(e=t.__r3f)==null||(n=e.root)==null||n.getState==null?void 0:n.getState();r&&r.internal.frames===0&&r.invalidate()}function Vb(t){t.onUpdate==null||t.onUpdate(t)}function rI(t,e){t.manual||(Kk(t)?(t.left=e.width/-2,t.right=e.width/2,t.top=e.height/2,t.bottom=e.height/-2):t.aspect=e.width/e.height,t.updateProjectionMatrix(),t.updateMatrixWorld())}function Y1(t){return(t.eventObject||t.object).uuid+"/"+t.index+t.instanceId}function PG(){var t;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return ch.DefaultEventPriority;switch((t=e.event)==null?void 0:t.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return ch.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return ch.ContinuousEventPriority;default:return ch.DefaultEventPriority}}function iI(t,e,n,r){const i=n.get(e);i&&(n.delete(e),n.size===0&&(t.delete(r),i.target.releasePointerCapture(r)))}function RG(t,e){const{internal:n}=t.getState();n.interaction=n.interaction.filter(r=>r!==e),n.initialHits=n.initialHits.filter(r=>r!==e),n.hovered.forEach((r,i)=>{(r.eventObject===e||r.object===e)&&n.hovered.delete(i)}),n.capturedMap.forEach((r,i)=>{iI(n.capturedMap,e,r,i)})}function kG(t){function e(l){const{internal:u}=t.getState(),c=l.offsetX-u.initialClick[0],h=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+h*h))}function n(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var h;return(h=u.__r3f)==null?void 0:h.handlers["onPointer"+c]}))}function r(l,u){const c=t.getState(),h=new Set,f=[],d=u?u(c.internal.interaction):c.internal.interaction;for(let g=0;g<d.length;g++){const S=xg(d[g]);S&&(S.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function v(g){const S=xg(g);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var _;S.events.compute==null||S.events.compute(l,S,(_=S.previousRoot)==null?void 0:_.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(g,!0):[]}let x=d.flatMap(v).sort((g,S)=>{const _=xg(g.object),T=xg(S.object);return!_||!T?g.distance-S.distance:T.events.priority-_.events.priority||g.distance-S.distance}).filter(g=>{const S=Y1(g);return h.has(S)?!1:(h.add(S),!0)});c.events.filter&&(x=c.events.filter(x,c));for(const g of x){let S=g.object;for(;S;){var w;(w=S.__r3f)!=null&&w.eventCount&&f.push({...g,eventObject:S}),S=S.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let g of c.internal.capturedMap.get(l.pointerId).values())h.has(Y1(g.intersection))||f.push(g.intersection);return f}function i(l,u,c,h){const f=t.getState();if(l.length){const d={stopped:!1};for(const v of l){const x=xg(v.object)||f,{raycaster:w,pointer:g,camera:S,internal:_}=x,T=new ge(g.x,g.y,0).unproject(S),L=D=>{var O,B;return(O=(B=_.capturedMap.get(D))==null?void 0:B.has(v.eventObject))!=null?O:!1},k=D=>{const O={intersection:v,target:u.target};_.capturedMap.has(D)?_.capturedMap.get(D).set(v.eventObject,O):_.capturedMap.set(D,new Map([[v.eventObject,O]])),u.target.setPointerCapture(D)},N=D=>{const O=_.capturedMap.get(D);O&&iI(_.capturedMap,v.eventObject,O,D)};let R={};for(let D in u){let O=u[D];typeof O!="function"&&(R[D]=O)}let P={...v,...R,pointer:g,intersections:l,stopped:d.stopped,delta:c,unprojectedPoint:T,ray:w.ray,camera:S,stopPropagation(){const D="pointerId"in u&&_.capturedMap.get(u.pointerId);if((!D||D.has(v.eventObject))&&(P.stopped=d.stopped=!0,_.hovered.size&&Array.from(_.hovered.values()).find(O=>O.eventObject===v.eventObject))){const O=l.slice(0,l.indexOf(v));s([...O,v])}},target:{hasPointerCapture:L,setPointerCapture:k,releasePointerCapture:N},currentTarget:{hasPointerCapture:L,setPointerCapture:k,releasePointerCapture:N},nativeEvent:u};if(h(P),d.stopped===!0)break}}return l}function s(l){const{internal:u}=t.getState();for(const c of u.hovered.values())if(!l.length||!l.find(h=>h.object===c.object&&h.index===c.index&&h.instanceId===c.instanceId)){const f=c.eventObject.__r3f,d=f==null?void 0:f.handlers;if(u.hovered.delete(Y1(c)),f!=null&&f.eventCount){const v={...c,intersections:l};d.onPointerOut==null||d.onPointerOut(v),d.onPointerLeave==null||d.onPointerLeave(v)}}}function o(l,u){for(let c=0;c<u.length;c++){const h=u[c].__r3f;h==null||h.handlers.onPointerMissed==null||h.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=t.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))})}}return function(c){const{onPointerMissed:h,internal:f}=t.getState();f.lastEvent.current=c;const d=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",w=r(c,d?n:void 0),g=v?e(c):0;l==="onPointerDown"&&(f.initialClick=[c.offsetX,c.offsetY],f.initialHits=w.map(_=>_.eventObject)),v&&!w.length&&g<=2&&(o(c,f.interaction),h&&h(c)),d&&s(w);function S(_){const T=_.eventObject,L=T.__r3f,k=L==null?void 0:L.handlers;if(L!=null&&L.eventCount)if(d){if(k.onPointerOver||k.onPointerEnter||k.onPointerOut||k.onPointerLeave){const N=Y1(_),R=f.hovered.get(N);R?R.stopped&&_.stopPropagation():(f.hovered.set(N,_),k.onPointerOver==null||k.onPointerOver(_),k.onPointerEnter==null||k.onPointerEnter(_))}k.onPointerMove==null||k.onPointerMove(_)}else{const N=k[l];N?(!v||f.initialHits.includes(T))&&(o(c,f.interaction.filter(R=>!f.initialHits.includes(R))),N(_)):v&&f.initialHits.includes(T)&&o(c,f.interaction.filter(R=>!f.initialHits.includes(R)))}}i(w,c,g,S)}}return{handlePointer:a}}const IG=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],sI=t=>!!(t!=null&&t.render),u3=Be.createContext(null),NG=(t,e)=>{const n=jk((a,l)=>{const u=new ge,c=new ge,h=new ge;function f(g=l().camera,S=c,_=l().size){const{width:T,height:L,top:k,left:N}=_,R=T/L;S instanceof ge?h.copy(S):h.set(...S);const P=g.getWorldPosition(u).distanceTo(h);if(Kk(g))return{width:T/g.zoom,height:L/g.zoom,top:k,left:N,factor:1,distance:P,aspect:R};{const D=g.fov*Math.PI/180,O=2*Math.tan(D/2)*P,B=O*(T/L);return{width:B,height:O,top:k,left:N,factor:T/B,distance:P,aspect:R}}}let d;const v=g=>a(S=>({performance:{...S.performance,current:g}})),x=new wt;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(g=1)=>t(l(),g),advance:(g,S)=>e(g,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new r3,pointer:x,mouse:x,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const g=l();d&&clearTimeout(d),g.performance.current!==g.performance.min&&v(g.performance.min),d=setTimeout(()=>v(l().performance.max),g.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:f},setEvents:g=>a(S=>({...S,events:{...S.events,...g}})),setSize:(g,S,_,T,L)=>{const k=l().camera,N={width:g,height:S,top:T||0,left:L||0,updateStyle:_};a(R=>({size:N,viewport:{...R.viewport,...f(k,c,N)}}))},setDpr:g=>a(S=>{const _=tI(g);return{viewport:{...S.viewport,dpr:_,initialDpr:S.viewport.initialDpr||_}}}),setFrameloop:(g="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,g!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:g}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Be.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(g,S,_)=>{const T=l().internal;return T.priority=T.priority+(S>0?1:0),T.subscribers.push({ref:g,priority:S,store:_}),T.subscribers=T.subscribers.sort((L,k)=>L.priority-k.priority),()=>{const L=l().internal;L!=null&&L.subscribers&&(L.priority=L.priority-(S>0?1:0),L.subscribers=L.subscribers.filter(k=>k.ref!==g))}}}}}),r=n.getState();let i=r.size,s=r.viewport.dpr,o=r.camera;return n.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:h}=n.getState();if(l!==i||u.dpr!==s){var f;i=l,s=u.dpr,rI(a,l),c.setPixelRatio(u.dpr);const d=(f=l.updateStyle)!=null?f:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,d)}a!==o&&(o=a,h(d=>({viewport:{...d.viewport,...d.viewport.getCurrentViewport(a)}})))}),n.subscribe(a=>t(a)),n};let Z1,FG=new Set,DG=new Set,OG=new Set;function dS(t,e){if(t.size)for(const{callback:n}of t.values())n(e)}function wg(t,e){switch(t){case"before":return dS(FG,e);case"after":return dS(DG,e);case"tail":return dS(OG,e)}}let pS,mS;function gS(t,e,n){let r=e.clock.getDelta();for(e.frameloop==="never"&&typeof t=="number"&&(r=t-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=t),pS=e.internal.subscribers,Z1=0;Z1<pS.length;Z1++)mS=pS[Z1],mS.ref.current(mS.store.getState(),r,n);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function UG(t){let e=!1,n,r,i;function s(l){r=requestAnimationFrame(s),e=!0,n=0,wg("before",l);for(const c of t.values()){var u;i=c.store.getState(),i.internal.active&&(i.frameloop==="always"||i.internal.frames>0)&&!((u=i.gl.xr)!=null&&u.isPresenting)&&(n+=gS(l,i))}if(wg("after",l),n===0)return wg("tail",l),e=!1,cancelAnimationFrame(r)}function o(l,u=1){var c;if(!l)return t.forEach(h=>o(h.store.getState()),u);(c=l.gl.xr)!=null&&c.isPresenting||!l.internal.active||l.frameloop==="never"||(l.internal.frames=Math.min(60,l.internal.frames+u),e||(e=!0,requestAnimationFrame(s)))}function a(l,u=!0,c,h){if(u&&wg("before",l),c)gS(l,c,h);else for(const f of t.values())gS(l,f.store.getState());u&&wg("after",l)}return{loop:s,invalidate:o,advance:a}}function c3(){const t=Be.useContext(u3);if(!t)throw new Error("R3F: Hooks can only be used within the Canvas component!");return t}function Js(t=n=>n,e){return c3()(t,e)}function oI(t,e=0){const n=c3(),r=n.getState().internal.subscribe,i=Jk(t);return pv(()=>r(i,e,n),[e,r,n]),null}function aI(t,e){return function(n,...r){const i=new n;return t&&t(i),Promise.all(r.map(s=>new Promise((o,a)=>i.load(s,l=>{l.scene&&Object.assign(l,CG(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l.message}`))))))}}function h3(t,e,n,r){const i=Array.isArray(e)?e:[e],s=SG(aI(n,r),[t,...i],{equal:$r.equ});return Array.isArray(e)?s:s[0]}h3.preload=function(t,e,n){const r=Array.isArray(e)?e:[e];return _G(aI(n),[t,...r])};h3.clear=function(t,e){const n=Array.isArray(e)?e:[e];return bG([t,...n])};const mm=new Map,{invalidate:RT,advance:kT}=UG(mm),{reconciler:H0,applyProps:fp}=MG(mm,PG),dp={objects:"shallow",strict:!1},BG=(t,e)=>{const n=typeof t=="function"?t(e):t;return sI(n)?n:new av({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...t})};function zG(t,e){if(e)return e;if(typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&t.parentElement){const{width:n,height:r,top:i,left:s}=t.parentElement.getBoundingClientRect();return{width:n,height:r,top:i,left:s}}else if(typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas)return{width:t.width,height:t.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function HG(t){const e=mm.get(t),n=e==null?void 0:e.fiber,r=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const i=typeof reportError=="function"?reportError:console.error,s=r||NG(RT,kT),o=n||H0.createContainer(s,ch.ConcurrentRoot,null,!1,null,"",i,null);e||mm.set(t,{fiber:o,store:s});let a,l=!1,u;return{configure(c={}){let{gl:h,size:f,scene:d,events:v,onCreated:x,shadows:w=!1,linear:g=!1,flat:S=!1,legacy:_=!1,orthographic:T=!1,frameloop:L="always",dpr:k=[1,2],performance:N,raycaster:R,camera:P,onPointerMissed:D}=c,O=s.getState(),B=O.gl;O.gl||O.set({gl:B=BG(h,t)});let V=O.raycaster;V||O.set({raycaster:V=new a3});const{params:H,...ee}=R||{};if($r.equ(ee,V,dp)||fp(V,{...ee}),$r.equ(H,V.params,dp)||fp(V,{params:{...V.params,...H}}),!O.camera||O.camera===u&&!$r.equ(u,P,dp)){u=P;const I=P instanceof iv,X=I?P:T?new ou(0,0,0,0,.1,1e3):new mi(75,0,.1,1e3);I||(X.position.z=5,P&&fp(X,P),!O.camera&&!(P!=null&&P.rotation)&&X.lookAt(0,0,0)),O.set({camera:X})}if(!O.scene){let I;d instanceof td?I=d:(I=new td,d&&fp(I,d)),O.set({scene:wp(I)})}if(!O.xr){var se;const I=(ae,fe)=>{const Se=s.getState();Se.frameloop!=="never"&&kT(ae,!0,Se,fe)},X=()=>{const ae=s.getState();ae.gl.xr.enabled=ae.gl.xr.isPresenting,ae.gl.xr.setAnimationLoop(ae.gl.xr.isPresenting?I:null),ae.gl.xr.isPresenting||RT(ae)},J={connect(){const ae=s.getState().gl;ae.xr.addEventListener("sessionstart",X),ae.xr.addEventListener("sessionend",X)},disconnect(){const ae=s.getState().gl;ae.xr.removeEventListener("sessionstart",X),ae.xr.removeEventListener("sessionend",X)}};typeof((se=B.xr)==null?void 0:se.addEventListener)=="function"&&J.connect(),O.set({xr:J})}if(B.shadowMap){const I=B.shadowMap.enabled,X=B.shadowMap.type;if(B.shadowMap.enabled=!!w,$r.boo(w))B.shadowMap.type=jg;else if($r.str(w)){var ce;const J={basic:qR,percentage:ex,soft:jg,variance:dl};B.shadowMap.type=(ce=J[w])!=null?ce:jg}else $r.obj(w)&&Object.assign(B.shadowMap,w);(I!==B.shadowMap.enabled||X!==B.shadowMap.type)&&(B.shadowMap.needsUpdate=!0)}const W=$k();W&&("enabled"in W?W.enabled=!_:"legacyMode"in W&&(W.legacyMode=_)),fp(B,{outputEncoding:g?3e3:3001,toneMapping:S?iu:yM}),O.legacy!==_&&O.set(()=>({legacy:_})),O.linear!==g&&O.set(()=>({linear:g})),O.flat!==S&&O.set(()=>({flat:S})),h&&!$r.fun(h)&&!sI(h)&&!$r.equ(h,B,dp)&&fp(B,h),v&&!O.events.handlers&&O.set({events:v(s)});const re=zG(t,f);return $r.equ(re,O.size,dp)||O.setSize(re.width,re.height,re.updateStyle,re.top,re.left),k&&O.viewport.dpr!==tI(k)&&O.setDpr(k),O.frameloop!==L&&O.setFrameloop(L),O.onPointerMissed||O.set({onPointerMissed:D}),N&&!$r.equ(N,O.performance,dp)&&O.set(I=>({performance:{...I.performance,...N}})),a=x,l=!0,this},render(c){return l||this.configure(),H0.updateContainer(Be.createElement(GG,{store:s,children:c,onCreated:a,rootElement:t}),o,null,()=>{}),s},unmount(){lI(t)}}}function GG({store:t,children:e,onCreated:n,rootElement:r}){return pv(()=>{const i=t.getState();i.set(s=>({internal:{...s.internal,active:!0}})),n&&n(i),t.getState().events.connected||i.events.connect==null||i.events.connect(r)},[]),Be.createElement(u3.Provider,{value:t},e)}function lI(t,e){const n=mm.get(t),r=n==null?void 0:n.fiber;if(r){const i=n==null?void 0:n.store.getState();i&&(i.internal.active=!1),H0.updateContainer(null,r,null,()=>{i&&setTimeout(()=>{try{var s,o,a,l;i.events.disconnect==null||i.events.disconnect(),(s=i.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=i.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=i.gl)!=null&&l.xr&&i.xr.disconnect(),LG(i),mm.delete(t),e&&e(t)}catch{}},500)})}}function VG(t,e,n){return Be.createElement(WG,{key:e.uuid,children:t,container:e,state:n})}function WG({state:t={},children:e,container:n}){const{events:r,size:i,...s}=t,o=c3(),[a]=Be.useState(()=>new a3),[l]=Be.useState(()=>new wt),u=Be.useCallback((h,f)=>{const d={...h};Object.keys(h).forEach(x=>{(IG.includes(x)||h[x]!==f[x]&&f[x])&&delete d[x]});let v;if(f&&i){const x=f.camera;v=h.viewport.getCurrentViewport(x,new ge,i),x!==h.camera&&rI(x,i)}return{...d,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...f==null?void 0:f.events,...r},size:{...h.size,...i},viewport:{...h.viewport,...v},...s}},[t]),[c]=Be.useState(()=>{const h=o.getState();return jk((d,v)=>({...h,scene:n,raycaster:a,pointer:l,mouse:l,previousRoot:o,events:{...h.events,...r},size:{...h.size,...i},...s,set:d,get:v,setEvents:x=>d(w=>({...w,events:{...w.events,...x}}))}))});return Be.useEffect(()=>{const h=o.subscribe(f=>c.setState(d=>u(f,d)));return()=>{h(),c.destroy()}},[]),Be.useEffect(()=>{c.setState(h=>u(o.getState(),h))},[u]),Be.createElement(Be.Fragment,null,H0.createPortal(Be.createElement(u3.Provider,{value:c},e),c,null))}H0.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Be.version});function gm(){return gm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},gm.apply(null,arguments)}function IT(t,e){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...r),e)}}function jG({debounce:t,scroll:e,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const i=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!i)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=Be.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=Be.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=t?typeof t=="number"?t:t.scroll:null,u=t?typeof t=="number"?t:t.resize:null,c=Be.useRef(!1);Be.useEffect(()=>(c.current=!0,()=>void(c.current=!1)));const[h,f,d]=Be.useMemo(()=>{const g=()=>{if(!a.current.element)return;const{left:S,top:_,width:T,height:L,bottom:k,right:N,x:R,y:P}=a.current.element.getBoundingClientRect(),D={left:S,top:_,width:T,height:L,bottom:k,right:N,x:R,y:P};a.current.element instanceof HTMLElement&&r&&(D.height=a.current.element.offsetHeight,D.width=a.current.element.offsetWidth),Object.freeze(D),c.current&&!ZG(a.current.lastBounds,D)&&o(a.current.lastBounds=D)};return[g,u?IT(g,u):g,l?IT(g,l):g]},[o,r,l,u]);function v(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(g=>g.removeEventListener("scroll",d,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function x(){a.current.element&&(a.current.resizeObserver=new i(d),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(g=>g.addEventListener("scroll",d,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{d()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const w=g=>{!g||g===a.current.element||(v(),a.current.element=g,a.current.scrollContainers=uI(g),x())};return qG(d,!!e),XG(f),Be.useEffect(()=>{v(),x()},[e,d,f]),Be.useEffect(()=>v,[]),[w,s,h]}function XG(t){Be.useEffect(()=>{const e=t;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[t])}function qG(t,e){Be.useEffect(()=>{if(e){const n=t;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[t,e])}function uI(t){const e=[];if(!t||t===document.body)return e;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(t);return[n,r,i].some(s=>s==="auto"||s==="scroll")&&e.push(t),[...e,...uI(t.parentElement)]}const YG=["x","y","top","bottom","left","right","width","height"],ZG=(t,e)=>YG.every(n=>t[n]===e[n]);var $G=Object.defineProperty,KG=Object.defineProperties,JG=Object.getOwnPropertyDescriptors,NT=Object.getOwnPropertySymbols,QG=Object.prototype.hasOwnProperty,eV=Object.prototype.propertyIsEnumerable,FT=(t,e,n)=>e in t?$G(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,DT=(t,e)=>{for(var n in e||(e={}))QG.call(e,n)&&FT(t,n,e[n]);if(NT)for(var n of NT(e))eV.call(e,n)&&FT(t,n,e[n]);return t},tV=(t,e)=>KG(t,JG(e)),OT,UT;typeof window<"u"&&((OT=window.document)!=null&&OT.createElement||((UT=window.navigator)==null?void 0:UT.product)==="ReactNative")?Be.useLayoutEffect:Be.useEffect;function cI(t,e,n){if(!t)return;if(n(t)===!0)return t;let r=e?t.return:t.child;for(;r;){const i=cI(r,e,n);if(i)return i;r=e?null:r.sibling}}function hI(t){try{return Object.defineProperties(t,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return t}}const BT=console.error;console.error=function(){const t=[...arguments].join("");if(t!=null&&t.startsWith("Warning:")&&t.includes("useContext")){console.error=BT;return}return BT.apply(this,arguments)};const f3=hI(Be.createContext(null));class fI extends Be.Component{render(){return Be.createElement(f3.Provider,{value:this._reactInternals},this.props.children)}}function nV(){const t=Be.useContext(f3);if(t===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Be.useId();return Be.useMemo(()=>{for(const r of[t,t==null?void 0:t.alternate]){if(!r)continue;const i=cI(r,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(i)return i}},[t,e])}function rV(){const t=nV(),[e]=Be.useState(()=>new Map);e.clear();let n=t;for(;n;){if(n.type&&typeof n.type=="object"){const i=n.type._context===void 0&&n.type.Provider===n.type?n.type:n.type._context;i&&i!==f3&&!e.has(i)&&e.set(i,Be.useContext(hI(i)))}n=n.return}return e}function iV(){const t=rV();return Be.useMemo(()=>Array.from(t.keys()).reduce((e,n)=>r=>Be.createElement(e,null,Be.createElement(n.Provider,tV(DT({},r),{value:t.get(n)}))),e=>Be.createElement(fI,DT({},e))),[t])}const vS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function sV(t){const{handlePointer:e}=kG(t);return{priority:1,enabled:!0,compute(n,r,i){r.pointer.set(n.offsetX/r.size.width*2-1,-(n.offsetY/r.size.height)*2+1),r.raycaster.setFromCamera(r.pointer,r.camera)},connected:void 0,handlers:Object.keys(vS).reduce((n,r)=>({...n,[r]:e(r)}),{}),update:()=>{var n;const{events:r,internal:i}=t.getState();(n=i.lastEvent)!=null&&n.current&&r.handlers&&r.handlers.onPointerMove(i.lastEvent.current)},connect:n=>{var r;const{set:i,events:s}=t.getState();s.disconnect==null||s.disconnect(),i(o=>({events:{...o.events,connected:n}})),Object.entries((r=s.handlers)!=null?r:[]).forEach(([o,a])=>{const[l,u]=vS[o];n.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:n,events:r}=t.getState();if(r.connected){var i;Object.entries((i=r.handlers)!=null?i:[]).forEach(([s,o])=>{if(r&&r.connected instanceof HTMLElement){const[a]=vS[s];r.connected.removeEventListener(a,o)}}),n(s=>({events:{...s.events,connected:void 0}}))}}}}const oV=Be.forwardRef(function({children:e,fallback:n,resize:r,style:i,gl:s,events:o=sV,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:h,legacy:f,orthographic:d,frameloop:v,dpr:x,performance:w,raycaster:g,camera:S,onPointerMissed:_,onCreated:T,...L},k){Be.useMemo(()=>Zk(fG),[]);const N=iV(),[R,P]=jG({scroll:!0,debounce:{scroll:50,resize:0},...r}),D=Be.useRef(null),O=Be.useRef(null);Be.useImperativeHandle(k,()=>D.current);const B=Jk(_),[V,H]=Be.useState(!1),[ee,se]=Be.useState(!1);if(V)throw V;if(ee)throw ee;const ce=Be.useRef(null);pv(()=>{const Y=D.current;P.width>0&&P.height>0&&Y&&(ce.current||(ce.current=HG(Y)),ce.current.configure({gl:s,events:o,shadows:u,linear:c,flat:h,legacy:f,orthographic:d,frameloop:v,dpr:x,performance:w,raycaster:g,camera:S,size:P,onPointerMissed:(...j)=>B.current==null?void 0:B.current(...j),onCreated:j=>{j.events.connect==null||j.events.connect(a?EG(a)?a.current:a:O.current),l&&j.setEvents({compute:(re,I)=>{const X=re[l+"X"],J=re[l+"Y"];I.pointer.set(X/I.size.width*2-1,-(J/I.size.height)*2+1),I.raycaster.setFromCamera(I.pointer,I.camera)}}),T==null||T(j)}}),ce.current.render(Be.createElement(N,null,Be.createElement(Qk,{set:se},Be.createElement(Be.Suspense,{fallback:Be.createElement(AG,{set:H})},e)))))}),Be.useEffect(()=>{const Y=D.current;if(Y)return()=>lI(Y)},[]);const W=a?"none":"auto";return Be.createElement("div",gm({ref:O,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:W,...i}},L),Be.createElement("div",{ref:R,style:{width:"100%",height:"100%"}},Be.createElement("canvas",{ref:D,style:{display:"block"}},n)))}),dI=Be.forwardRef(function(e,n){return Be.createElement(fI,null,Be.createElement(oV,gm({},e,{ref:n})))}),pI=(()=>parseInt(tv.replace(/\D+/g,"")))();var Ba=Uint8Array,hh=Uint16Array,Wb=Uint32Array,mI=new Ba([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),gI=new Ba([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),aV=new Ba([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vI=function(t,e){for(var n=new hh(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new Wb(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return[n,i]},yI=vI(mI,2),xI=yI[0],lV=yI[1];xI[28]=258,lV[258]=28;var uV=vI(gI,0),cV=uV[0],jb=new hh(32768);for(var Jr=0;Jr<32768;++Jr){var Yc=(Jr&43690)>>>1|(Jr&21845)<<1;Yc=(Yc&52428)>>>2|(Yc&13107)<<2,Yc=(Yc&61680)>>>4|(Yc&3855)<<4,jb[Jr]=((Yc&65280)>>>8|(Yc&255)<<8)>>>1}var Kg=function(t,e,n){for(var r=t.length,i=0,s=new hh(e);i<r;++i)++s[t[i]-1];var o=new hh(e);for(i=0;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new hh(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],c=e-t[i],h=o[t[i]-1]++<<c,f=h|(1<<c)-1;h<=f;++h)a[jb[h]>>>l]=u}else for(a=new hh(r),i=0;i<r;++i)t[i]&&(a[i]=jb[o[t[i]-1]++]>>>15-t[i]);return a},mv=new Ba(288);for(var Jr=0;Jr<144;++Jr)mv[Jr]=8;for(var Jr=144;Jr<256;++Jr)mv[Jr]=9;for(var Jr=256;Jr<280;++Jr)mv[Jr]=7;for(var Jr=280;Jr<288;++Jr)mv[Jr]=8;var wI=new Ba(32);for(var Jr=0;Jr<32;++Jr)wI[Jr]=5;var hV=Kg(mv,9,1),fV=Kg(wI,5,1),yS=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},ul=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},xS=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},dV=function(t){return(t/8|0)+(t&7&&1)},pV=function(t,e,n){(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length);var r=new(t instanceof hh?hh:t instanceof Wb?Wb:Ba)(n-e);return r.set(t.subarray(e,n)),r},mV=function(t,e,n){var r=t.length;if(!r||n&&!n.l&&r<5)return e||new Ba(0);var i=!e||n,s=!n||n.i;n||(n={}),e||(e=new Ba(r*3));var o=function(fe){var Se=e.length;if(fe>Se){var Ee=new Ba(Math.max(Se*2,fe));Ee.set(e),e=Ee}},a=n.f||0,l=n.p||0,u=n.b||0,c=n.l,h=n.d,f=n.m,d=n.n,v=r*8;do{if(!c){n.f=a=ul(t,l,1);var x=ul(t,l+1,3);if(l+=3,x)if(x==1)c=hV,h=fV,f=9,d=5;else if(x==2){var _=ul(t,l,31)+257,T=ul(t,l+10,15)+4,L=_+ul(t,l+5,31)+1;l+=14;for(var k=new Ba(L),N=new Ba(19),R=0;R<T;++R)N[aV[R]]=ul(t,l+R*3,7);l+=T*3;for(var P=yS(N),D=(1<<P)-1,O=Kg(N,P,1),R=0;R<L;){var B=O[ul(t,l,D)];l+=B&15;var w=B>>>4;if(w<16)k[R++]=w;else{var V=0,H=0;for(w==16?(H=3+ul(t,l,3),l+=2,V=k[R-1]):w==17?(H=3+ul(t,l,7),l+=3):w==18&&(H=11+ul(t,l,127),l+=7);H--;)k[R++]=V}}var ee=k.subarray(0,_),se=k.subarray(_);f=yS(ee),d=yS(se),c=Kg(ee,f,1),h=Kg(se,d,1)}else throw"invalid block type";else{var w=dV(l)+4,g=t[w-4]|t[w-3]<<8,S=w+g;if(S>r){if(s)throw"unexpected EOF";break}i&&o(u+g),e.set(t.subarray(w,S),u),n.b=u+=g,n.p=l=S*8;continue}if(l>v){if(s)throw"unexpected EOF";break}}i&&o(u+131072);for(var ce=(1<<f)-1,W=(1<<d)-1,Y=l;;Y=l){var V=c[xS(t,l)&ce],j=V>>>4;if(l+=V&15,l>v){if(s)throw"unexpected EOF";break}if(!V)throw"invalid length/literal";if(j<256)e[u++]=j;else if(j==256){Y=l,c=null;break}else{var re=j-254;if(j>264){var R=j-257,I=mI[R];re=ul(t,l,(1<<I)-1)+xI[R],l+=I}var X=h[xS(t,l)&W],J=X>>>4;if(!X)throw"invalid distance";l+=X&15;var se=cV[J];if(J>3){var I=gI[J];se+=xS(t,l)&(1<<I)-1,l+=I}if(l>v){if(s)throw"unexpected EOF";break}i&&o(u+131072);for(var ae=u+re;u<ae;u+=4)e[u]=e[u-se],e[u+1]=e[u+1-se],e[u+2]=e[u+2-se],e[u+3]=e[u+3-se];u=ae}}n.l=c,n.p=Y,n.b=u,c&&(a=1,n.m=f,n.d=h,n.n=d)}while(!a);return u==e.length?e:pV(e,0,u)},gV=new Ba(0),vV=function(t){if((t[0]&15)!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(t[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function $1(t,e){return mV((vV(t),t.subarray(2,-4)),e)}var yV=typeof TextDecoder<"u"&&new TextDecoder,xV=0;try{yV.decode(gV,{stream:!0}),xV=1}catch{}const wV=t=>t&&t.isCubeTexture;class SV extends qi{constructor(e,n){var r,i;const s=wV(e),a=((i=s?(r=e.image[0])==null?void 0:r.width:e.image.width)!=null?i:1024)/4,l=Math.floor(Math.log2(a)),u=Math.pow(2,l),c=3*Math.max(u,16*7),h=4*u,f=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/c}`,`#define CUBEUV_TEXEL_HEIGHT ${1/h}`,`#define CUBEUV_MAX_MIP ${l}.0`],d=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,v=f.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${pI>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,x={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},w=new uv(1,16),g=new Al({uniforms:x,fragmentShader:v,vertexShader:d,side:xl});super(w,g)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var _V=Object.defineProperty,bV=(t,e,n)=>e in t?_V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,MV=(t,e,n)=>(bV(t,typeof e!="symbol"?e+"":e,n),n);class EV{constructor(){MV(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const r=this._listeners;r[e]===void 0&&(r[e]=[]),r[e].indexOf(n)===-1&&r[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const r=this._listeners;return r[e]!==void 0&&r[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const i=this._listeners[e];if(i!==void 0){const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const r=this._listeners[e.type];if(r!==void 0){e.target=this;const i=r.slice(0);for(let s=0,o=i.length;s<o;s++)i[s].call(this,e);e.target=null}}}var AV=Object.defineProperty,TV=(t,e,n)=>e in t?AV(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_n=(t,e,n)=>(TV(t,typeof e!="symbol"?e+"":e,n),n);const K1=new hd,zT=new Wu,CV=Math.cos(70*(Math.PI/180)),HT=(t,e)=>(t%e+e)%e;let LV=class extends EV{constructor(e,n){super(),_n(this,"object"),_n(this,"domElement"),_n(this,"enabled",!0),_n(this,"target",new ge),_n(this,"minDistance",0),_n(this,"maxDistance",1/0),_n(this,"minZoom",0),_n(this,"maxZoom",1/0),_n(this,"minPolarAngle",0),_n(this,"maxPolarAngle",Math.PI),_n(this,"minAzimuthAngle",-1/0),_n(this,"maxAzimuthAngle",1/0),_n(this,"enableDamping",!1),_n(this,"dampingFactor",.05),_n(this,"enableZoom",!0),_n(this,"zoomSpeed",1),_n(this,"enableRotate",!0),_n(this,"rotateSpeed",1),_n(this,"enablePan",!0),_n(this,"panSpeed",1),_n(this,"screenSpacePanning",!0),_n(this,"keyPanSpeed",7),_n(this,"zoomToCursor",!1),_n(this,"autoRotate",!1),_n(this,"autoRotateSpeed",2),_n(this,"reverseOrbit",!1),_n(this,"reverseHorizontalOrbit",!1),_n(this,"reverseVerticalOrbit",!1),_n(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),_n(this,"mouseButtons",{LEFT:$l.ROTATE,MIDDLE:$l.DOLLY,RIGHT:$l.PAN}),_n(this,"touches",{ONE:Vu.ROTATE,TWO:Vu.DOLLY_PAN}),_n(this,"target0"),_n(this,"position0"),_n(this,"zoom0"),_n(this,"_domElementKeyEvents",null),_n(this,"getPolarAngle"),_n(this,"getAzimuthalAngle"),_n(this,"setPolarAngle"),_n(this,"setAzimuthalAngle"),_n(this,"getDistance"),_n(this,"getZoomScale"),_n(this,"listenToKeyEvents"),_n(this,"stopListenToKeyEvents"),_n(this,"saveState"),_n(this,"reset"),_n(this,"update"),_n(this,"connect"),_n(this,"dispose"),_n(this,"dollyIn"),_n(this,"dollyOut"),_n(this,"getScale"),_n(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=xe=>{let Ye=HT(xe,2*Math.PI),st=c.phi;st<0&&(st+=2*Math.PI),Ye<0&&(Ye+=2*Math.PI);let Ae=Math.abs(Ye-st);2*Math.PI-Ae<Ae&&(Ye<st?Ye+=2*Math.PI:st+=2*Math.PI),h.phi=Ye-st,r.update()},this.setAzimuthalAngle=xe=>{let Ye=HT(xe,2*Math.PI),st=c.theta;st<0&&(st+=2*Math.PI),Ye<0&&(Ye+=2*Math.PI);let Ae=Math.abs(Ye-st);2*Math.PI-Ae<Ae&&(Ye<st?Ye+=2*Math.PI:st+=2*Math.PI),h.theta=Ye-st,r.update()},this.getDistance=()=>r.object.position.distanceTo(r.target),this.listenToKeyEvents=xe=>{xe.addEventListener("keydown",dt),this._domElementKeyEvents=xe},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",dt),this._domElementKeyEvents=null},this.saveState=()=>{r.target0.copy(r.target),r.position0.copy(r.object.position),r.zoom0=r.object.zoom},this.reset=()=>{r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),r.dispatchEvent(i),r.update(),l=a.NONE},this.update=(()=>{const xe=new ge,Ye=new ge(0,1,0),st=new io().setFromUnitVectors(e.up,Ye),Ae=st.clone().invert(),Fe=new ge,Ge=new io,yt=2*Math.PI;return function(){const kt=r.object.position;st.setFromUnitVectors(e.up,Ye),Ae.copy(st).invert(),xe.copy(kt).sub(r.target),xe.applyQuaternion(st),c.setFromVector3(xe),r.autoRotate&&l===a.NONE&&H(B()),r.enableDamping?(c.theta+=h.theta*r.dampingFactor,c.phi+=h.phi*r.dampingFactor):(c.theta+=h.theta,c.phi+=h.phi);let Vt=r.minAzimuthAngle,yn=r.maxAzimuthAngle;isFinite(Vt)&&isFinite(yn)&&(Vt<-Math.PI?Vt+=yt:Vt>Math.PI&&(Vt-=yt),yn<-Math.PI?yn+=yt:yn>Math.PI&&(yn-=yt),Vt<=yn?c.theta=Math.max(Vt,Math.min(yn,c.theta)):c.theta=c.theta>(Vt+yn)/2?Math.max(Vt,c.theta):Math.min(yn,c.theta)),c.phi=Math.max(r.minPolarAngle,Math.min(r.maxPolarAngle,c.phi)),c.makeSafe(),r.enableDamping===!0?r.target.addScaledVector(d,r.dampingFactor):r.target.add(d),r.zoomToCursor&&P||r.object.isOrthographicCamera?c.radius=X(c.radius):c.radius=X(c.radius*f),xe.setFromSpherical(c),xe.applyQuaternion(Ae),kt.copy(r.target).add(xe),r.object.matrixAutoUpdate||r.object.updateMatrix(),r.object.lookAt(r.target),r.enableDamping===!0?(h.theta*=1-r.dampingFactor,h.phi*=1-r.dampingFactor,d.multiplyScalar(1-r.dampingFactor)):(h.set(0,0,0),d.set(0,0,0));let Nn=!1;if(r.zoomToCursor&&P){let gn=null;if(r.object instanceof mi&&r.object.isPerspectiveCamera){const kn=xe.length();gn=X(kn*f);const Ft=kn-gn;r.object.position.addScaledVector(N,Ft),r.object.updateMatrixWorld()}else if(r.object.isOrthographicCamera){const kn=new ge(R.x,R.y,0);kn.unproject(r.object),r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix(),Nn=!0;const Ft=new ge(R.x,R.y,0);Ft.unproject(r.object),r.object.position.sub(Ft).add(kn),r.object.updateMatrixWorld(),gn=xe.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),r.zoomToCursor=!1;gn!==null&&(r.screenSpacePanning?r.target.set(0,0,-1).transformDirection(r.object.matrix).multiplyScalar(gn).add(r.object.position):(K1.origin.copy(r.object.position),K1.direction.set(0,0,-1).transformDirection(r.object.matrix),Math.abs(r.object.up.dot(K1.direction))<CV?e.lookAt(r.target):(zT.setFromNormalAndCoplanarPoint(r.object.up,r.target),K1.intersectPlane(zT,r.target))))}else r.object instanceof ou&&r.object.isOrthographicCamera&&(Nn=f!==1,Nn&&(r.object.zoom=Math.max(r.minZoom,Math.min(r.maxZoom,r.object.zoom/f)),r.object.updateProjectionMatrix()));return f=1,P=!1,Nn||Fe.distanceToSquared(r.object.position)>u||8*(1-Ge.dot(r.object.quaternion))>u?(r.dispatchEvent(i),Fe.copy(r.object.position),Ge.copy(r.object.quaternion),Nn=!1,!0):!1}})(),this.connect=xe=>{r.domElement=xe,r.domElement.style.touchAction="none",r.domElement.addEventListener("contextmenu",Te),r.domElement.addEventListener("pointerdown",vt),r.domElement.addEventListener("pointercancel",Q),r.domElement.addEventListener("wheel",Qe)},this.dispose=()=>{var xe,Ye,st,Ae,Fe,Ge;r.domElement&&(r.domElement.style.touchAction="auto"),(xe=r.domElement)==null||xe.removeEventListener("contextmenu",Te),(Ye=r.domElement)==null||Ye.removeEventListener("pointerdown",vt),(st=r.domElement)==null||st.removeEventListener("pointercancel",Q),(Ae=r.domElement)==null||Ae.removeEventListener("wheel",Qe),(Fe=r.domElement)==null||Fe.ownerDocument.removeEventListener("pointermove",ue),(Ge=r.domElement)==null||Ge.ownerDocument.removeEventListener("pointerup",Q),r._domElementKeyEvents!==null&&r._domElementKeyEvents.removeEventListener("keydown",dt)};const r=this,i={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,c=new zb,h=new zb;let f=1;const d=new ge,v=new wt,x=new wt,w=new wt,g=new wt,S=new wt,_=new wt,T=new wt,L=new wt,k=new wt,N=new ge,R=new wt;let P=!1;const D=[],O={};function B(){return 2*Math.PI/60/60*r.autoRotateSpeed}function V(){return Math.pow(.95,r.zoomSpeed)}function H(xe){r.reverseOrbit||r.reverseHorizontalOrbit?h.theta+=xe:h.theta-=xe}function ee(xe){r.reverseOrbit||r.reverseVerticalOrbit?h.phi+=xe:h.phi-=xe}const se=(()=>{const xe=new ge;return function(st,Ae){xe.setFromMatrixColumn(Ae,0),xe.multiplyScalar(-st),d.add(xe)}})(),ce=(()=>{const xe=new ge;return function(st,Ae){r.screenSpacePanning===!0?xe.setFromMatrixColumn(Ae,1):(xe.setFromMatrixColumn(Ae,0),xe.crossVectors(r.object.up,xe)),xe.multiplyScalar(st),d.add(xe)}})(),W=(()=>{const xe=new ge;return function(st,Ae){const Fe=r.domElement;if(Fe&&r.object instanceof mi&&r.object.isPerspectiveCamera){const Ge=r.object.position;xe.copy(Ge).sub(r.target);let yt=xe.length();yt*=Math.tan(r.object.fov/2*Math.PI/180),se(2*st*yt/Fe.clientHeight,r.object.matrix),ce(2*Ae*yt/Fe.clientHeight,r.object.matrix)}else Fe&&r.object instanceof ou&&r.object.isOrthographicCamera?(se(st*(r.object.right-r.object.left)/r.object.zoom/Fe.clientWidth,r.object.matrix),ce(Ae*(r.object.top-r.object.bottom)/r.object.zoom/Fe.clientHeight,r.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),r.enablePan=!1)}})();function Y(xe){r.object instanceof mi&&r.object.isPerspectiveCamera||r.object instanceof ou&&r.object.isOrthographicCamera?f=xe:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),r.enableZoom=!1)}function j(xe){Y(f/xe)}function re(xe){Y(f*xe)}function I(xe){if(!r.zoomToCursor||!r.domElement)return;P=!0;const Ye=r.domElement.getBoundingClientRect(),st=xe.clientX-Ye.left,Ae=xe.clientY-Ye.top,Fe=Ye.width,Ge=Ye.height;R.x=st/Fe*2-1,R.y=-(Ae/Ge)*2+1,N.set(R.x,R.y,1).unproject(r.object).sub(r.object.position).normalize()}function X(xe){return Math.max(r.minDistance,Math.min(r.maxDistance,xe))}function J(xe){v.set(xe.clientX,xe.clientY)}function ae(xe){I(xe),T.set(xe.clientX,xe.clientY)}function fe(xe){g.set(xe.clientX,xe.clientY)}function Se(xe){x.set(xe.clientX,xe.clientY),w.subVectors(x,v).multiplyScalar(r.rotateSpeed);const Ye=r.domElement;Ye&&(H(2*Math.PI*w.x/Ye.clientHeight),ee(2*Math.PI*w.y/Ye.clientHeight)),v.copy(x),r.update()}function Ee(xe){L.set(xe.clientX,xe.clientY),k.subVectors(L,T),k.y>0?j(V()):k.y<0&&re(V()),T.copy(L),r.update()}function Ce(xe){S.set(xe.clientX,xe.clientY),_.subVectors(S,g).multiplyScalar(r.panSpeed),W(_.x,_.y),g.copy(S),r.update()}function $e(xe){I(xe),xe.deltaY<0?re(V()):xe.deltaY>0&&j(V()),r.update()}function ke(xe){let Ye=!1;switch(xe.code){case r.keys.UP:W(0,r.keyPanSpeed),Ye=!0;break;case r.keys.BOTTOM:W(0,-r.keyPanSpeed),Ye=!0;break;case r.keys.LEFT:W(r.keyPanSpeed,0),Ye=!0;break;case r.keys.RIGHT:W(-r.keyPanSpeed,0),Ye=!0;break}Ye&&(xe.preventDefault(),r.update())}function he(){if(D.length==1)v.set(D[0].pageX,D[0].pageY);else{const xe=.5*(D[0].pageX+D[1].pageX),Ye=.5*(D[0].pageY+D[1].pageY);v.set(xe,Ye)}}function De(){if(D.length==1)g.set(D[0].pageX,D[0].pageY);else{const xe=.5*(D[0].pageX+D[1].pageX),Ye=.5*(D[0].pageY+D[1].pageY);g.set(xe,Ye)}}function ze(){const xe=D[0].pageX-D[1].pageX,Ye=D[0].pageY-D[1].pageY,st=Math.sqrt(xe*xe+Ye*Ye);T.set(0,st)}function pe(){r.enableZoom&&ze(),r.enablePan&&De()}function K(){r.enableZoom&&ze(),r.enableRotate&&he()}function tt(xe){if(D.length==1)x.set(xe.pageX,xe.pageY);else{const st=bt(xe),Ae=.5*(xe.pageX+st.x),Fe=.5*(xe.pageY+st.y);x.set(Ae,Fe)}w.subVectors(x,v).multiplyScalar(r.rotateSpeed);const Ye=r.domElement;Ye&&(H(2*Math.PI*w.x/Ye.clientHeight),ee(2*Math.PI*w.y/Ye.clientHeight)),v.copy(x)}function Ze(xe){if(D.length==1)S.set(xe.pageX,xe.pageY);else{const Ye=bt(xe),st=.5*(xe.pageX+Ye.x),Ae=.5*(xe.pageY+Ye.y);S.set(st,Ae)}_.subVectors(S,g).multiplyScalar(r.panSpeed),W(_.x,_.y),g.copy(S)}function Ne(xe){const Ye=bt(xe),st=xe.pageX-Ye.x,Ae=xe.pageY-Ye.y,Fe=Math.sqrt(st*st+Ae*Ae);L.set(0,Fe),k.set(0,Math.pow(L.y/T.y,r.zoomSpeed)),j(k.y),T.copy(L)}function Ke(xe){r.enableZoom&&Ne(xe),r.enablePan&&Ze(xe)}function ft(xe){r.enableZoom&&Ne(xe),r.enableRotate&&tt(xe)}function vt(xe){var Ye,st;r.enabled!==!1&&(D.length===0&&((Ye=r.domElement)==null||Ye.ownerDocument.addEventListener("pointermove",ue),(st=r.domElement)==null||st.ownerDocument.addEventListener("pointerup",Q)),Nt(xe),xe.pointerType==="touch"?lt(xe):Pe(xe))}function ue(xe){r.enabled!==!1&&(xe.pointerType==="touch"?it(xe):et(xe))}function Q(xe){var Ye,st,Ae;At(xe),D.length===0&&((Ye=r.domElement)==null||Ye.releasePointerCapture(xe.pointerId),(st=r.domElement)==null||st.ownerDocument.removeEventListener("pointermove",ue),(Ae=r.domElement)==null||Ae.ownerDocument.removeEventListener("pointerup",Q)),r.dispatchEvent(o),l=a.NONE}function Pe(xe){let Ye;switch(xe.button){case 0:Ye=r.mouseButtons.LEFT;break;case 1:Ye=r.mouseButtons.MIDDLE;break;case 2:Ye=r.mouseButtons.RIGHT;break;default:Ye=-1}switch(Ye){case $l.DOLLY:if(r.enableZoom===!1)return;ae(xe),l=a.DOLLY;break;case $l.ROTATE:if(xe.ctrlKey||xe.metaKey||xe.shiftKey){if(r.enablePan===!1)return;fe(xe),l=a.PAN}else{if(r.enableRotate===!1)return;J(xe),l=a.ROTATE}break;case $l.PAN:if(xe.ctrlKey||xe.metaKey||xe.shiftKey){if(r.enableRotate===!1)return;J(xe),l=a.ROTATE}else{if(r.enablePan===!1)return;fe(xe),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function et(xe){if(r.enabled!==!1)switch(l){case a.ROTATE:if(r.enableRotate===!1)return;Se(xe);break;case a.DOLLY:if(r.enableZoom===!1)return;Ee(xe);break;case a.PAN:if(r.enablePan===!1)return;Ce(xe);break}}function Qe(xe){r.enabled===!1||r.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(xe.preventDefault(),r.dispatchEvent(s),$e(xe),r.dispatchEvent(o))}function dt(xe){r.enabled===!1||r.enablePan===!1||ke(xe)}function lt(xe){switch(Ct(xe),D.length){case 1:switch(r.touches.ONE){case Vu.ROTATE:if(r.enableRotate===!1)return;he(),l=a.TOUCH_ROTATE;break;case Vu.PAN:if(r.enablePan===!1)return;De(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(r.touches.TWO){case Vu.DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;pe(),l=a.TOUCH_DOLLY_PAN;break;case Vu.DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;K(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&r.dispatchEvent(s)}function it(xe){switch(Ct(xe),l){case a.TOUCH_ROTATE:if(r.enableRotate===!1)return;tt(xe),r.update();break;case a.TOUCH_PAN:if(r.enablePan===!1)return;Ze(xe),r.update();break;case a.TOUCH_DOLLY_PAN:if(r.enableZoom===!1&&r.enablePan===!1)return;Ke(xe),r.update();break;case a.TOUCH_DOLLY_ROTATE:if(r.enableZoom===!1&&r.enableRotate===!1)return;ft(xe),r.update();break;default:l=a.NONE}}function Te(xe){r.enabled!==!1&&xe.preventDefault()}function Nt(xe){D.push(xe)}function At(xe){delete O[xe.pointerId];for(let Ye=0;Ye<D.length;Ye++)if(D[Ye].pointerId==xe.pointerId){D.splice(Ye,1);return}}function Ct(xe){let Ye=O[xe.pointerId];Ye===void 0&&(Ye=new wt,O[xe.pointerId]=Ye),Ye.set(xe.pageX,xe.pageY)}function bt(xe){const Ye=xe.pointerId===D[0].pointerId?D[1]:D[0];return O[Ye.pointerId]}this.dollyIn=(xe=V())=>{re(xe),r.update()},this.dollyOut=(xe=V())=>{j(xe),r.update()},this.getScale=()=>f,this.setScale=xe=>{Y(xe),r.update()},this.getZoomScale=()=>V(),n!==void 0&&this.connect(n),this.update()}};class PV extends e3{constructor(e){super(e),this.type=go}parse(e){const o=function(R,P){switch(R){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(P||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(P||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(P||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(P||""))}},c=`
`,h=function(R,P,D){P=P||1024;let B=R.pos,V=-1,H=0,ee="",se=String.fromCharCode.apply(null,new Uint16Array(R.subarray(B,B+128)));for(;0>(V=se.indexOf(c))&&H<P&&B<R.byteLength;)ee+=se,H+=se.length,B+=128,se+=String.fromCharCode.apply(null,new Uint16Array(R.subarray(B,B+128)));return-1<V?(D!==!1&&(R.pos+=H+V+1),ee+se.slice(0,V)):!1},f=function(R){const P=/^#\?(\S+)/,D=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,O=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,B=/^\s*FORMAT=(\S+)\s*$/,V=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,H={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ee,se;for((R.pos>=R.byteLength||!(ee=h(R)))&&o(1,"no header found"),(se=ee.match(P))||o(3,"bad initial token"),H.valid|=1,H.programtype=se[1],H.string+=ee+`
`;ee=h(R),ee!==!1;){if(H.string+=ee+`
`,ee.charAt(0)==="#"){H.comments+=ee+`
`;continue}if((se=ee.match(D))&&(H.gamma=parseFloat(se[1])),(se=ee.match(O))&&(H.exposure=parseFloat(se[1])),(se=ee.match(B))&&(H.valid|=2,H.format=se[1]),(se=ee.match(V))&&(H.valid|=4,H.height=parseInt(se[1],10),H.width=parseInt(se[2],10)),H.valid&2&&H.valid&4)break}return H.valid&2||o(3,"missing format specifier"),H.valid&4||o(3,"missing image size specifier"),H},d=function(R,P,D){const O=P;if(O<8||O>32767||R[0]!==2||R[1]!==2||R[2]&128)return new Uint8Array(R);O!==(R[2]<<8|R[3])&&o(3,"wrong scanline width");const B=new Uint8Array(4*P*D);B.length||o(4,"unable to allocate buffer space");let V=0,H=0;const ee=4*O,se=new Uint8Array(4),ce=new Uint8Array(ee);let W=D;for(;W>0&&H<R.byteLength;){H+4>R.byteLength&&o(1),se[0]=R[H++],se[1]=R[H++],se[2]=R[H++],se[3]=R[H++],(se[0]!=2||se[1]!=2||(se[2]<<8|se[3])!=O)&&o(3,"bad rgbe scanline format");let Y=0,j;for(;Y<ee&&H<R.byteLength;){j=R[H++];const I=j>128;if(I&&(j-=128),(j===0||Y+j>ee)&&o(3,"bad scanline data"),I){const X=R[H++];for(let J=0;J<j;J++)ce[Y++]=X}else ce.set(R.subarray(H,H+j),Y),Y+=j,H+=j}const re=O;for(let I=0;I<re;I++){let X=0;B[V]=ce[I+X],X+=O,B[V+1]=ce[I+X],X+=O,B[V+2]=ce[I+X],X+=O,B[V+3]=ce[I+X],V+=4}W--}return B},v=function(R,P,D,O){const B=R[P+3],V=Math.pow(2,B-128)/255;D[O+0]=R[P+0]*V,D[O+1]=R[P+1]*V,D[O+2]=R[P+2]*V,D[O+3]=1},x=function(R,P,D,O){const B=R[P+3],V=Math.pow(2,B-128)/255;D[O+0]=Uf.toHalfFloat(Math.min(R[P+0]*V,65504)),D[O+1]=Uf.toHalfFloat(Math.min(R[P+1]*V,65504)),D[O+2]=Uf.toHalfFloat(Math.min(R[P+2]*V,65504)),D[O+3]=Uf.toHalfFloat(1)},w=new Uint8Array(e);w.pos=0;const g=f(w),S=g.width,_=g.height,T=d(w.subarray(w.pos),S,_);let L,k,N;switch(this.type){case ro:N=T.length/4;const R=new Float32Array(N*4);for(let D=0;D<N;D++)v(T,D*4,R,D*4);L=R,k=ro;break;case go:N=T.length/4;const P=new Uint16Array(N*4);for(let D=0;D<N;D++)x(T,D*4,P,D*4);L=P,k=go;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:S,height:_,data:L,header:g.string,gamma:g.gamma,exposure:g.exposure,type:k}}setDataType(e){return this.type=e,this}load(e,n,r,i){function s(o,a){switch(o.type){case ro:case go:"colorSpace"in o?o.colorSpace="srgb-linear":o.encoding=3e3,o.minFilter=Kr,o.magFilter=Kr,o.generateMipmaps=!1,o.flipY=!0;break}n&&n(o,a)}return super.load(e,s,r,i)}}const Sg=pI>=152;class RV extends e3{constructor(e){super(e),this.type=go}parse(e){const P=Math.pow(2.7182818,2.2);function D(q,U){for(var ne=0,me=0;me<65536;++me)(me==0||q[me>>3]&1<<(me&7))&&(U[ne++]=me);for(var de=ne-1;ne<65536;)U[ne++]=0;return de}function O(q){for(var U=0;U<16384;U++)q[U]={},q[U].len=0,q[U].lit=0,q[U].p=null}const B={l:0,c:0,lc:0};function V(q,U,ne,me,de){for(;ne<q;)U=U<<8|bt(me,de),ne+=8;ne-=q,B.l=U>>ne&(1<<q)-1,B.c=U,B.lc=ne}const H=new Array(59);function ee(q){for(var U=0;U<=58;++U)H[U]=0;for(var U=0;U<65537;++U)H[q[U]]+=1;for(var ne=0,U=58;U>0;--U){var me=ne+H[U]>>1;H[U]=ne,ne=me}for(var U=0;U<65537;++U){var de=q[U];de>0&&(q[U]=de|H[de]++<<6)}}function se(q,U,ne,me,de,we,Xe){for(var qe=ne,ot=0,rt=0;de<=we;de++){if(qe.value-ne.value>me)return!1;V(6,ot,rt,q,qe);var gt=B.l;if(ot=B.c,rt=B.lc,Xe[de]=gt,gt==63){if(qe.value-ne.value>me)throw"Something wrong with hufUnpackEncTable";V(8,ot,rt,q,qe);var at=B.l+6;if(ot=B.c,rt=B.lc,de+at>we+1)throw"Something wrong with hufUnpackEncTable";for(;at--;)Xe[de++]=0;de--}else if(gt>=59){var at=gt-59+2;if(de+at>we+1)throw"Something wrong with hufUnpackEncTable";for(;at--;)Xe[de++]=0;de--}}ee(Xe)}function ce(q){return q&63}function W(q){return q>>6}function Y(q,U,ne,me){for(;U<=ne;U++){var de=W(q[U]),we=ce(q[U]);if(de>>we)throw"Invalid table entry";if(we>14){var Xe=me[de>>we-14];if(Xe.len)throw"Invalid table entry";if(Xe.lit++,Xe.p){var qe=Xe.p;Xe.p=new Array(Xe.lit);for(var ot=0;ot<Xe.lit-1;++ot)Xe.p[ot]=qe[ot]}else Xe.p=new Array(1);Xe.p[Xe.lit-1]=U}else if(we)for(var rt=0,ot=1<<14-we;ot>0;ot--){var Xe=me[(de<<14-we)+rt];if(Xe.len||Xe.p)throw"Invalid table entry";Xe.len=we,Xe.lit=U,rt++}}return!0}const j={c:0,lc:0};function re(q,U,ne,me){q=q<<8|bt(ne,me),U+=8,j.c=q,j.lc=U}const I={c:0,lc:0};function X(q,U,ne,me,de,we,Xe,qe,ot,rt){if(q==U){me<8&&(re(ne,me,de,Xe),ne=j.c,me=j.lc),me-=8;var gt=ne>>me,gt=new Uint8Array([gt])[0];if(ot.value+gt>rt)return!1;for(var at=qe[ot.value-1];gt-- >0;)qe[ot.value++]=at}else if(ot.value<rt)qe[ot.value++]=q;else return!1;I.c=ne,I.lc=me}function J(q){return q&65535}function ae(q){var U=J(q);return U>32767?U-65536:U}const fe={a:0,b:0};function Se(q,U){var ne=ae(q),me=ae(U),de=me,we=ne+(de&1)+(de>>1),Xe=we,qe=we-de;fe.a=Xe,fe.b=qe}function Ee(q,U){var ne=J(q),me=J(U),de=ne-(me>>1)&65535,we=me+de-32768&65535;fe.a=we,fe.b=de}function Ce(q,U,ne,me,de,we,Xe){for(var qe=Xe<16384,ot=ne>de?de:ne,rt=1,gt;rt<=ot;)rt<<=1;for(rt>>=1,gt=rt,rt>>=1;rt>=1;){for(var at=0,Wt=at+we*(de-gt),It=we*rt,Ot=we*gt,$t=me*rt,Qt=me*gt,sn,zt,on,jt;at<=Wt;at+=Ot){for(var ln=at,fn=at+me*(ne-gt);ln<=fn;ln+=Qt){var xn=ln+$t,tr=ln+It,Qn=tr+$t;qe?(Se(q[ln+U],q[tr+U]),sn=fe.a,on=fe.b,Se(q[xn+U],q[Qn+U]),zt=fe.a,jt=fe.b,Se(sn,zt),q[ln+U]=fe.a,q[xn+U]=fe.b,Se(on,jt),q[tr+U]=fe.a,q[Qn+U]=fe.b):(Ee(q[ln+U],q[tr+U]),sn=fe.a,on=fe.b,Ee(q[xn+U],q[Qn+U]),zt=fe.a,jt=fe.b,Ee(sn,zt),q[ln+U]=fe.a,q[xn+U]=fe.b,Ee(on,jt),q[tr+U]=fe.a,q[Qn+U]=fe.b)}if(ne&rt){var tr=ln+It;qe?Se(q[ln+U],q[tr+U]):Ee(q[ln+U],q[tr+U]),sn=fe.a,q[tr+U]=fe.b,q[ln+U]=sn}}if(de&rt)for(var ln=at,fn=at+me*(ne-gt);ln<=fn;ln+=Qt){var xn=ln+$t;qe?Se(q[ln+U],q[xn+U]):Ee(q[ln+U],q[xn+U]),sn=fe.a,q[xn+U]=fe.b,q[ln+U]=sn}gt=rt,rt>>=1}return at}function $e(q,U,ne,me,de,we,Xe,qe,ot,rt){for(var gt=0,at=0,Wt=qe,It=Math.trunc(de.value+(we+7)/8);de.value<It;)for(re(gt,at,ne,de),gt=j.c,at=j.lc;at>=14;){var Ot=gt>>at-14&16383,$t=U[Ot];if($t.len)at-=$t.len,X($t.lit,Xe,gt,at,ne,me,de,ot,rt,Wt),gt=I.c,at=I.lc;else{if(!$t.p)throw"hufDecode issues";var Qt;for(Qt=0;Qt<$t.lit;Qt++){for(var sn=ce(q[$t.p[Qt]]);at<sn&&de.value<It;)re(gt,at,ne,de),gt=j.c,at=j.lc;if(at>=sn&&W(q[$t.p[Qt]])==(gt>>at-sn&(1<<sn)-1)){at-=sn,X($t.p[Qt],Xe,gt,at,ne,me,de,ot,rt,Wt),gt=I.c,at=I.lc;break}}if(Qt==$t.lit)throw"hufDecode issues"}}var zt=8-we&7;for(gt>>=zt,at-=zt;at>0;){var $t=U[gt<<14-at&16383];if($t.len)at-=$t.len,X($t.lit,Xe,gt,at,ne,me,de,ot,rt,Wt),gt=I.c,at=I.lc;else throw"hufDecode issues"}return!0}function ke(q,U,ne,me,de,we){var Xe={value:0},qe=ne.value,ot=Ct(U,ne),rt=Ct(U,ne);ne.value+=4;var gt=Ct(U,ne);if(ne.value+=4,ot<0||ot>=65537||rt<0||rt>=65537)throw"Something wrong with HUF_ENCSIZE";var at=new Array(65537),Wt=new Array(16384);O(Wt);var It=me-(ne.value-qe);if(se(q,U,ne,It,ot,rt,at),gt>8*(me-(ne.value-qe)))throw"Something wrong with hufUncompress";Y(at,ot,rt,Wt),$e(at,Wt,q,U,ne,gt,rt,we,de,Xe)}function he(q,U,ne){for(var me=0;me<ne;++me)U[me]=q[U[me]]}function De(q){for(var U=1;U<q.length;U++){var ne=q[U-1]+q[U]-128;q[U]=ne}}function ze(q,U){for(var ne=0,me=Math.floor((q.length+1)/2),de=0,we=q.length-1;!(de>we||(U[de++]=q[ne++],de>we));)U[de++]=q[me++]}function pe(q){for(var U=q.byteLength,ne=new Array,me=0,de=new DataView(q);U>0;){var we=de.getInt8(me++);if(we<0){var Xe=-we;U-=Xe+1;for(var qe=0;qe<Xe;qe++)ne.push(de.getUint8(me++))}else{var Xe=we;U-=2;for(var ot=de.getUint8(me++),qe=0;qe<Xe+1;qe++)ne.push(ot)}}return ne}function K(q,U,ne,me,de,we){var xn=new DataView(we.buffer),Xe=ne[q.idx[0]].width,qe=ne[q.idx[0]].height,ot=3,rt=Math.floor(Xe/8),gt=Math.ceil(Xe/8),at=Math.ceil(qe/8),Wt=Xe-(gt-1)*8,It=qe-(at-1)*8,Ot={value:0},$t=new Array(ot),Qt=new Array(ot),sn=new Array(ot),zt=new Array(ot),on=new Array(ot);for(let dn=0;dn<ot;++dn)on[dn]=U[q.idx[dn]],$t[dn]=dn<1?0:$t[dn-1]+gt*at,Qt[dn]=new Float32Array(64),sn[dn]=new Uint16Array(64),zt[dn]=new Uint16Array(gt*64);for(let dn=0;dn<at;++dn){var jt=8;dn==at-1&&(jt=It);var ln=8;for(let Rn=0;Rn<gt;++Rn){Rn==gt-1&&(ln=Wt);for(let jn=0;jn<ot;++jn)sn[jn].fill(0),sn[jn][0]=de[$t[jn]++],tt(Ot,me,sn[jn]),Ze(sn[jn],Qt[jn]),Ne(Qt[jn]);Ke(Qt);for(let jn=0;jn<ot;++jn)ft(Qt[jn],zt[jn],Rn*64)}let _r=0;for(let Rn=0;Rn<ot;++Rn){const jn=ne[q.idx[Rn]].type;for(let Tr=8*dn;Tr<8*dn+jt;++Tr){_r=on[Rn][Tr];for(let Go=0;Go<rt;++Go){const zi=Go*64+(Tr&7)*8;xn.setUint16(_r+0*2*jn,zt[Rn][zi+0],!0),xn.setUint16(_r+1*2*jn,zt[Rn][zi+1],!0),xn.setUint16(_r+2*2*jn,zt[Rn][zi+2],!0),xn.setUint16(_r+3*2*jn,zt[Rn][zi+3],!0),xn.setUint16(_r+4*2*jn,zt[Rn][zi+4],!0),xn.setUint16(_r+5*2*jn,zt[Rn][zi+5],!0),xn.setUint16(_r+6*2*jn,zt[Rn][zi+6],!0),xn.setUint16(_r+7*2*jn,zt[Rn][zi+7],!0),_r+=8*2*jn}}if(rt!=gt)for(let Tr=8*dn;Tr<8*dn+jt;++Tr){const Go=on[Rn][Tr]+8*rt*2*jn,zi=rt*64+(Tr&7)*8;for(let So=0;So<ln;++So)xn.setUint16(Go+So*2*jn,zt[Rn][zi+So],!0)}}}for(var fn=new Uint16Array(Xe),xn=new DataView(we.buffer),tr=0;tr<ot;++tr){ne[q.idx[tr]].decoded=!0;var Qn=ne[q.idx[tr]].type;if(ne[tr].type==2)for(var cr=0;cr<qe;++cr){const dn=on[tr][cr];for(var jr=0;jr<Xe;++jr)fn[jr]=xn.getUint16(dn+jr*2*Qn,!0);for(var jr=0;jr<Xe;++jr)xn.setFloat32(dn+jr*2*Qn,Fe(fn[jr]),!0)}}}function tt(q,U,ne){for(var me,de=1;de<64;)me=U[q.value],me==65280?de=64:me>>8==255?de+=me&255:(ne[de]=me,de++),q.value++}function Ze(q,U){U[0]=Fe(q[0]),U[1]=Fe(q[1]),U[2]=Fe(q[5]),U[3]=Fe(q[6]),U[4]=Fe(q[14]),U[5]=Fe(q[15]),U[6]=Fe(q[27]),U[7]=Fe(q[28]),U[8]=Fe(q[2]),U[9]=Fe(q[4]),U[10]=Fe(q[7]),U[11]=Fe(q[13]),U[12]=Fe(q[16]),U[13]=Fe(q[26]),U[14]=Fe(q[29]),U[15]=Fe(q[42]),U[16]=Fe(q[3]),U[17]=Fe(q[8]),U[18]=Fe(q[12]),U[19]=Fe(q[17]),U[20]=Fe(q[25]),U[21]=Fe(q[30]),U[22]=Fe(q[41]),U[23]=Fe(q[43]),U[24]=Fe(q[9]),U[25]=Fe(q[11]),U[26]=Fe(q[18]),U[27]=Fe(q[24]),U[28]=Fe(q[31]),U[29]=Fe(q[40]),U[30]=Fe(q[44]),U[31]=Fe(q[53]),U[32]=Fe(q[10]),U[33]=Fe(q[19]),U[34]=Fe(q[23]),U[35]=Fe(q[32]),U[36]=Fe(q[39]),U[37]=Fe(q[45]),U[38]=Fe(q[52]),U[39]=Fe(q[54]),U[40]=Fe(q[20]),U[41]=Fe(q[22]),U[42]=Fe(q[33]),U[43]=Fe(q[38]),U[44]=Fe(q[46]),U[45]=Fe(q[51]),U[46]=Fe(q[55]),U[47]=Fe(q[60]),U[48]=Fe(q[21]),U[49]=Fe(q[34]),U[50]=Fe(q[37]),U[51]=Fe(q[47]),U[52]=Fe(q[50]),U[53]=Fe(q[56]),U[54]=Fe(q[59]),U[55]=Fe(q[61]),U[56]=Fe(q[35]),U[57]=Fe(q[36]),U[58]=Fe(q[48]),U[59]=Fe(q[49]),U[60]=Fe(q[57]),U[61]=Fe(q[58]),U[62]=Fe(q[62]),U[63]=Fe(q[63])}function Ne(q){const U=.5*Math.cos(.7853975),ne=.5*Math.cos(3.14159/16),me=.5*Math.cos(3.14159/8),de=.5*Math.cos(3*3.14159/16),we=.5*Math.cos(5*3.14159/16),Xe=.5*Math.cos(3*3.14159/8),qe=.5*Math.cos(7*3.14159/16);for(var ot=new Array(4),rt=new Array(4),gt=new Array(4),at=new Array(4),Wt=0;Wt<8;++Wt){var It=Wt*8;ot[0]=me*q[It+2],ot[1]=Xe*q[It+2],ot[2]=me*q[It+6],ot[3]=Xe*q[It+6],rt[0]=ne*q[It+1]+de*q[It+3]+we*q[It+5]+qe*q[It+7],rt[1]=de*q[It+1]-qe*q[It+3]-ne*q[It+5]-we*q[It+7],rt[2]=we*q[It+1]-ne*q[It+3]+qe*q[It+5]+de*q[It+7],rt[3]=qe*q[It+1]-we*q[It+3]+de*q[It+5]-ne*q[It+7],gt[0]=U*(q[It+0]+q[It+4]),gt[3]=U*(q[It+0]-q[It+4]),gt[1]=ot[0]+ot[3],gt[2]=ot[1]-ot[2],at[0]=gt[0]+gt[1],at[1]=gt[3]+gt[2],at[2]=gt[3]-gt[2],at[3]=gt[0]-gt[1],q[It+0]=at[0]+rt[0],q[It+1]=at[1]+rt[1],q[It+2]=at[2]+rt[2],q[It+3]=at[3]+rt[3],q[It+4]=at[3]-rt[3],q[It+5]=at[2]-rt[2],q[It+6]=at[1]-rt[1],q[It+7]=at[0]-rt[0]}for(var Ot=0;Ot<8;++Ot)ot[0]=me*q[16+Ot],ot[1]=Xe*q[16+Ot],ot[2]=me*q[48+Ot],ot[3]=Xe*q[48+Ot],rt[0]=ne*q[8+Ot]+de*q[24+Ot]+we*q[40+Ot]+qe*q[56+Ot],rt[1]=de*q[8+Ot]-qe*q[24+Ot]-ne*q[40+Ot]-we*q[56+Ot],rt[2]=we*q[8+Ot]-ne*q[24+Ot]+qe*q[40+Ot]+de*q[56+Ot],rt[3]=qe*q[8+Ot]-we*q[24+Ot]+de*q[40+Ot]-ne*q[56+Ot],gt[0]=U*(q[Ot]+q[32+Ot]),gt[3]=U*(q[Ot]-q[32+Ot]),gt[1]=ot[0]+ot[3],gt[2]=ot[1]-ot[2],at[0]=gt[0]+gt[1],at[1]=gt[3]+gt[2],at[2]=gt[3]-gt[2],at[3]=gt[0]-gt[1],q[0+Ot]=at[0]+rt[0],q[8+Ot]=at[1]+rt[1],q[16+Ot]=at[2]+rt[2],q[24+Ot]=at[3]+rt[3],q[32+Ot]=at[3]-rt[3],q[40+Ot]=at[2]-rt[2],q[48+Ot]=at[1]-rt[1],q[56+Ot]=at[0]-rt[0]}function Ke(q){for(var U=0;U<64;++U){var ne=q[0][U],me=q[1][U],de=q[2][U];q[0][U]=ne+1.5747*de,q[1][U]=ne-.1873*me-.4682*de,q[2][U]=ne+1.8556*me}}function ft(q,U,ne){for(var me=0;me<64;++me)U[ne+me]=Uf.toHalfFloat(vt(q[me]))}function vt(q){return q<=1?Math.sign(q)*Math.pow(Math.abs(q),2.2):Math.sign(q)*Math.pow(P,Math.abs(q)-1)}function ue(q){return new DataView(q.array.buffer,q.offset.value,q.size)}function Q(q){var U=q.viewer.buffer.slice(q.offset.value,q.offset.value+q.size),ne=new Uint8Array(pe(U)),me=new Uint8Array(ne.length);return De(ne),ze(ne,me),new DataView(me.buffer)}function Pe(q){var U=q.array.slice(q.offset.value,q.offset.value+q.size),ne=$1(U),me=new Uint8Array(ne.length);return De(ne),ze(ne,me),new DataView(me.buffer)}function et(q){for(var U=q.viewer,ne={value:q.offset.value},me=new Uint16Array(q.width*q.scanlineBlockSize*(q.channels*q.type)),de=new Uint8Array(8192),we=0,Xe=new Array(q.channels),qe=0;qe<q.channels;qe++)Xe[qe]={},Xe[qe].start=we,Xe[qe].end=Xe[qe].start,Xe[qe].nx=q.width,Xe[qe].ny=q.lines,Xe[qe].size=q.type,we+=Xe[qe].nx*Xe[qe].ny*Xe[qe].size;var ot=Ge(U,ne),rt=Ge(U,ne);if(rt>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(ot<=rt)for(var qe=0;qe<rt-ot+1;qe++)de[qe+ot]=xe(U,ne);var gt=new Uint16Array(65536),at=D(de,gt),Wt=Ct(U,ne);ke(q.array,U,ne,Wt,me,we);for(var qe=0;qe<q.channels;++qe)for(var It=Xe[qe],Ot=0;Ot<Xe[qe].size;++Ot)Ce(me,It.start+Ot,It.nx,It.size,It.ny,It.nx*It.size,at);he(gt,me,we);for(var $t=0,Qt=new Uint8Array(me.buffer.byteLength),sn=0;sn<q.lines;sn++)for(var zt=0;zt<q.channels;zt++){var It=Xe[zt],on=It.nx*It.size,jt=new Uint8Array(me.buffer,It.end*2,on*2);Qt.set(jt,$t),$t+=on*2,It.end+=on}return new DataView(Qt.buffer)}function Qe(q){var U=q.array.slice(q.offset.value,q.offset.value+q.size),ne=$1(U);const me=q.lines*q.channels*q.width,de=q.type==1?new Uint16Array(me):new Uint32Array(me);let we=0,Xe=0;const qe=new Array(4);for(let ot=0;ot<q.lines;ot++)for(let rt=0;rt<q.channels;rt++){let gt=0;switch(q.type){case 1:qe[0]=we,qe[1]=qe[0]+q.width,we=qe[1]+q.width;for(let at=0;at<q.width;++at){const Wt=ne[qe[0]++]<<8|ne[qe[1]++];gt+=Wt,de[Xe]=gt,Xe++}break;case 2:qe[0]=we,qe[1]=qe[0]+q.width,qe[2]=qe[1]+q.width,we=qe[2]+q.width;for(let at=0;at<q.width;++at){const Wt=ne[qe[0]++]<<24|ne[qe[1]++]<<16|ne[qe[2]++]<<8;gt+=Wt,de[Xe]=gt,Xe++}break}}return new DataView(de.buffer)}function dt(q){var U=q.viewer,ne={value:q.offset.value},me=new Uint8Array(q.width*q.lines*(q.channels*q.type*2)),de={version:Ye(U,ne),unknownUncompressedSize:Ye(U,ne),unknownCompressedSize:Ye(U,ne),acCompressedSize:Ye(U,ne),dcCompressedSize:Ye(U,ne),rleCompressedSize:Ye(U,ne),rleUncompressedSize:Ye(U,ne),rleRawSize:Ye(U,ne),totalAcUncompressedCount:Ye(U,ne),totalDcUncompressedCount:Ye(U,ne),acCompression:Ye(U,ne)};if(de.version<2)throw"EXRLoader.parse: "+Wn.compression+" version "+de.version+" is unsupported";for(var we=new Array,Xe=Ge(U,ne)-2;Xe>0;){var qe=lt(U.buffer,ne),ot=xe(U,ne),rt=ot>>2&3,gt=(ot>>4)-1,at=new Int8Array([gt])[0],Wt=xe(U,ne);we.push({name:qe,index:at,type:Wt,compression:rt}),Xe-=qe.length+3}for(var It=Wn.channels,Ot=new Array(q.channels),$t=0;$t<q.channels;++$t){var Qt=Ot[$t]={},sn=It[$t];Qt.name=sn.name,Qt.compression=0,Qt.decoded=!1,Qt.type=sn.pixelType,Qt.pLinear=sn.pLinear,Qt.width=q.width,Qt.height=q.lines}for(var zt={idx:new Array(3)},on=0;on<q.channels;++on)for(var Qt=Ot[on],$t=0;$t<we.length;++$t){var jt=we[$t];Qt.name==jt.name&&(Qt.compression=jt.compression,jt.index>=0&&(zt.idx[jt.index]=on),Qt.offset=on)}if(de.acCompressedSize>0)switch(de.acCompression){case 0:var xn=new Uint16Array(de.totalAcUncompressedCount);ke(q.array,U,ne,de.acCompressedSize,xn,de.totalAcUncompressedCount);break;case 1:var ln=q.array.slice(ne.value,ne.value+de.totalAcUncompressedCount),fn=$1(ln),xn=new Uint16Array(fn.buffer);ne.value+=de.totalAcUncompressedCount;break}if(de.dcCompressedSize>0){var tr={array:q.array,offset:ne,size:de.dcCompressedSize},Qn=new Uint16Array(Pe(tr).buffer);ne.value+=de.dcCompressedSize}if(de.rleRawSize>0){var ln=q.array.slice(ne.value,ne.value+de.rleCompressedSize),fn=$1(ln),cr=pe(fn.buffer);ne.value+=de.rleCompressedSize}for(var jr=0,dn=new Array(Ot.length),$t=0;$t<dn.length;++$t)dn[$t]=new Array;for(var _r=0;_r<q.lines;++_r)for(var Rn=0;Rn<Ot.length;++Rn)dn[Rn].push(jr),jr+=Ot[Rn].width*q.type*2;K(zt,dn,Ot,xn,Qn,me);for(var $t=0;$t<Ot.length;++$t){var Qt=Ot[$t];if(!Qt.decoded)switch(Qt.compression){case 2:for(var jn=0,Tr=0,_r=0;_r<q.lines;++_r){for(var Go=dn[$t][jn],zi=0;zi<Qt.width;++zi){for(var So=0;So<2*Qt.type;++So)me[Go++]=cr[Tr+So*Qt.width*Qt.height];Tr++}jn++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(me.buffer)}function lt(q,U){for(var ne=new Uint8Array(q),me=0;ne[U.value+me]!=0;)me+=1;var de=new TextDecoder().decode(ne.slice(U.value,U.value+me));return U.value=U.value+me+1,de}function it(q,U,ne){var me=new TextDecoder().decode(new Uint8Array(q).slice(U.value,U.value+ne));return U.value=U.value+ne,me}function Te(q,U){var ne=At(q,U),me=Ct(q,U);return[ne,me]}function Nt(q,U){var ne=Ct(q,U),me=Ct(q,U);return[ne,me]}function At(q,U){var ne=q.getInt32(U.value,!0);return U.value=U.value+4,ne}function Ct(q,U){var ne=q.getUint32(U.value,!0);return U.value=U.value+4,ne}function bt(q,U){var ne=q[U.value];return U.value=U.value+1,ne}function xe(q,U){var ne=q.getUint8(U.value);return U.value=U.value+1,ne}const Ye=function(q,U){let ne;return"getBigInt64"in DataView.prototype?ne=Number(q.getBigInt64(U.value,!0)):ne=q.getUint32(U.value+4,!0)+Number(q.getUint32(U.value,!0)<<32),U.value+=8,ne};function st(q,U){var ne=q.getFloat32(U.value,!0);return U.value+=4,ne}function Ae(q,U){return Uf.toHalfFloat(st(q,U))}function Fe(q){var U=(q&31744)>>10,ne=q&1023;return(q>>15?-1:1)*(U?U===31?ne?NaN:1/0:Math.pow(2,U-15)*(1+ne/1024):6103515625e-14*(ne/1024))}function Ge(q,U){var ne=q.getUint16(U.value,!0);return U.value+=2,ne}function yt(q,U){return Fe(Ge(q,U))}function pt(q,U,ne,me){for(var de=ne.value,we=[];ne.value<de+me-1;){var Xe=lt(U,ne),qe=At(q,ne),ot=xe(q,ne);ne.value+=3;var rt=At(q,ne),gt=At(q,ne);we.push({name:Xe,pixelType:qe,pLinear:ot,xSampling:rt,ySampling:gt})}return ne.value+=1,we}function kt(q,U){var ne=st(q,U),me=st(q,U),de=st(q,U),we=st(q,U),Xe=st(q,U),qe=st(q,U),ot=st(q,U),rt=st(q,U);return{redX:ne,redY:me,greenX:de,greenY:we,blueX:Xe,blueY:qe,whiteX:ot,whiteY:rt}}function Vt(q,U){var ne=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],me=xe(q,U);return ne[me]}function yn(q,U){var ne=Ct(q,U),me=Ct(q,U),de=Ct(q,U),we=Ct(q,U);return{xMin:ne,yMin:me,xMax:de,yMax:we}}function Nn(q,U){var ne=["INCREASING_Y"],me=xe(q,U);return ne[me]}function gn(q,U){var ne=st(q,U),me=st(q,U);return[ne,me]}function kn(q,U){var ne=st(q,U),me=st(q,U),de=st(q,U);return[ne,me,de]}function Ft(q,U,ne,me,de){if(me==="string"||me==="stringvector"||me==="iccProfile")return it(U,ne,de);if(me==="chlist")return pt(q,U,ne,de);if(me==="chromaticities")return kt(q,ne);if(me==="compression")return Vt(q,ne);if(me==="box2i")return yn(q,ne);if(me==="lineOrder")return Nn(q,ne);if(me==="float")return st(q,ne);if(me==="v2f")return gn(q,ne);if(me==="v3f")return kn(q,ne);if(me==="int")return At(q,ne);if(me==="rational")return Te(q,ne);if(me==="timecode")return Nt(q,ne);if(me==="preview")return ne.value+=de,"skipped";ne.value+=de}function Vr(q,U,ne){const me={};if(q.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";me.version=q.getUint8(4);const de=q.getUint8(5);me.spec={singleTile:!!(de&2),longName:!!(de&4),deepFormat:!!(de&8),multiPart:!!(de&16)},ne.value=8;for(var we=!0;we;){var Xe=lt(U,ne);if(Xe==0)we=!1;else{var qe=lt(U,ne),ot=Ct(q,ne),rt=Ft(q,U,ne,qe,ot);rt===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${qe}'.`):me[Xe]=rt}}if(de&-5)throw console.error("EXRHeader:",me),"THREE.EXRLoader: provided file is currently unsupported.";return me}function Ir(q,U,ne,me,de){const we={size:0,viewer:U,array:ne,offset:me,width:q.dataWindow.xMax-q.dataWindow.xMin+1,height:q.dataWindow.yMax-q.dataWindow.yMin+1,channels:q.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:q.channels[0].pixelType,uncompress:null,getter:null,format:null,[Sg?"colorSpace":"encoding"]:null};switch(q.compression){case"NO_COMPRESSION":we.lines=1,we.uncompress=ue;break;case"RLE_COMPRESSION":we.lines=1,we.uncompress=Q;break;case"ZIPS_COMPRESSION":we.lines=1,we.uncompress=Pe;break;case"ZIP_COMPRESSION":we.lines=16,we.uncompress=Pe;break;case"PIZ_COMPRESSION":we.lines=32,we.uncompress=et;break;case"PXR24_COMPRESSION":we.lines=16,we.uncompress=Qe;break;case"DWAA_COMPRESSION":we.lines=32,we.uncompress=dt;break;case"DWAB_COMPRESSION":we.lines=256,we.uncompress=dt;break;default:throw"EXRLoader.parse: "+q.compression+" is unsupported"}if(we.scanlineBlockSize=we.lines,we.type==1)switch(de){case ro:we.getter=yt,we.inputSize=2;break;case go:we.getter=Ge,we.inputSize=2;break}else if(we.type==2)switch(de){case ro:we.getter=st,we.inputSize=4;break;case go:we.getter=Ae,we.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+we.type+" for "+q.compression+".";we.blockCount=(q.dataWindow.yMax+1)/we.scanlineBlockSize;for(var Xe=0;Xe<we.blockCount;Xe++)Ye(U,me);we.outputChannels=we.channels==3?4:we.channels;const qe=we.width*we.height*we.outputChannels;switch(de){case ro:we.byteArray=new Float32Array(qe),we.channels<we.outputChannels&&we.byteArray.fill(1,0,qe);break;case go:we.byteArray=new Uint16Array(qe),we.channels<we.outputChannels&&we.byteArray.fill(15360,0,qe);break;default:console.error("THREE.EXRLoader: unsupported type: ",de);break}return we.bytesPerLine=we.width*we.inputSize*we.channels,we.outputChannels==4?we.format=mo:we.format=bM,Sg?we.colorSpace="srgb-linear":we.encoding=3e3,we}const Zn=new DataView(e),vn=new Uint8Array(e),$n={value:0},Wn=Vr(Zn,e,$n),pn=Ir(Wn,Zn,vn,$n,this.type),Wr={value:0},oi={R:0,G:1,B:2,A:3,Y:0};for(let q=0;q<pn.height/pn.scanlineBlockSize;q++){const U=Ct(Zn,$n);pn.size=Ct(Zn,$n),pn.lines=U+pn.scanlineBlockSize>pn.height?pn.height-U:pn.scanlineBlockSize;const me=pn.size<pn.lines*pn.bytesPerLine?pn.uncompress(pn):ue(pn);$n.value+=pn.size;for(let de=0;de<pn.scanlineBlockSize;de++){const we=de+q*pn.scanlineBlockSize;if(we>=pn.height)break;for(let Xe=0;Xe<pn.channels;Xe++){const qe=oi[Wn.channels[Xe].name];for(let ot=0;ot<pn.width;ot++){Wr.value=(de*(pn.channels*pn.width)+Xe*pn.width+ot)*pn.inputSize;const rt=(pn.height-1-we)*(pn.width*pn.outputChannels)+ot*pn.outputChannels+qe;pn.byteArray[rt]=pn.getter(me,Wr)}}}}return{header:Wn,width:pn.width,height:pn.height,data:pn.byteArray,format:pn.format,[Sg?"colorSpace":"encoding"]:pn[Sg?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,n,r,i){function s(o,a){Sg?o.colorSpace=a.colorSpace:o.encoding=a.encoding,o.minFilter=Kr,o.magFilter=Kr,o.generateMipmaps=!1,o.flipY=!1,n&&n(o,a)}return super.load(e,s,r,i)}}const SI=Be.forwardRef(({makeDefault:t,camera:e,regress:n,domElement:r,enableDamping:i=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...u},c)=>{const h=Js(k=>k.invalidate),f=Js(k=>k.camera),d=Js(k=>k.gl),v=Js(k=>k.events),x=Js(k=>k.setEvents),w=Js(k=>k.set),g=Js(k=>k.get),S=Js(k=>k.performance),_=e||f,T=r||v.connected||d.domElement,L=Be.useMemo(()=>new LV(_),[_]);return oI(()=>{L.enabled&&L.update()},-1),Be.useEffect(()=>(s&&L.connect(s===!0?T:s),L.connect(T),()=>void L.dispose()),[s,T,n,L,h]),Be.useEffect(()=>{const k=P=>{h(),n&&S.regress(),o&&o(P)},N=P=>{a&&a(P)},R=P=>{l&&l(P)};return L.addEventListener("change",k),L.addEventListener("start",N),L.addEventListener("end",R),()=>{L.removeEventListener("start",N),L.removeEventListener("end",R),L.removeEventListener("change",k)}},[o,a,l,L,h,x]),Be.useEffect(()=>{if(t){const k=g().controls;return w({controls:L}),()=>w({controls:k})}},[t,L]),Be.createElement("primitive",gm({ref:c,object:L,enableDamping:i},u))}),kV="modulepreload",IV=function(t){return"/cad-os/"+t},GT={},Xb=function(e,n,r){if(!n||n.length===0)return e();const i=document.getElementsByTagName("link");return Promise.all(n.map(s=>{if(s=IV(s),s in GT)return;GT[s]=!0;const o=s.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!r)for(let c=i.length-1;c>=0;c--){const h=i[c];if(h.href===s&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":kV,o||(u.as="script",u.crossOrigin=""),u.href=s,document.head.appendChild(u),o)return new Promise((c,h)=>{u.addEventListener("load",c),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())},wS={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},NV="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",VT=t=>Array.isArray(t);function _I({files:t=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:e="",preset:n=void 0,encoding:r=void 0,extensions:i}={}){var s;let o=null,a=!1,l;if(n){if(!(n in wS))throw new Error("Preset must be one of: "+Object.keys(wS).join(", "));t=wS[n],e=NV}if(a=VT(t),l=VT(t)?"cube":t.startsWith("data:application/exr")?"exr":t.startsWith("data:application/hdr")?"hdr":(s=t.split(".").pop())==null||(s=s.split("?"))==null||(s=s.shift())==null?void 0:s.toLowerCase(),o=a?Nk:l==="hdr"?PV:l==="exr"?RV:null,!o)throw new Error("useEnvironment: Unrecognized file extension: "+t);const u=h3(o,a?[t]:t,d=>{d.setPath==null||d.setPath(e),i&&i(d)}),c=a?u[0]:u;c.mapping=a?cu:cm;const h=3001,f=3e3;return"colorSpace"in c?c.colorSpace=r??a?"srgb":"srgb-linear":c.encoding=r??a?h:f,c}const FV=t=>t.current&&t.current.isScene,DV=t=>FV(t)?t.current:t;function d3(t,e,n,r,i=0){const s=DV(e||n),o=s.background,a=s.environment,l=s.backgroundBlurriness||0;return t!=="only"&&(s.environment=r),t&&(s.background=r),t&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=i),()=>{t!=="only"&&(s.environment=a),t&&(s.background=o),t&&s.backgroundBlurriness!==void 0&&(s.backgroundBlurriness=l)}}function p3({scene:t,background:e=!1,blur:n,map:r}){const i=Js(s=>s.scene);return Be.useLayoutEffect(()=>{if(r)return d3(e,t,i,r,n)},[i,t,r,e,n]),null}function bI({background:t=!1,scene:e,blur:n,...r}){const i=_I(r),s=Js(o=>o.scene);return Be.useLayoutEffect(()=>d3(t,e,s,i,n),[i,t,e,s,n]),null}function OV({children:t,near:e=1,far:n=1e3,resolution:r=256,frames:i=1,map:s,background:o=!1,blur:a,scene:l,files:u,path:c,preset:h=void 0,extensions:f}){const d=Js(_=>_.gl),v=Js(_=>_.scene),x=Be.useRef(null),[w]=Be.useState(()=>new td),g=Be.useMemo(()=>{const _=new FM(r);return _.texture.type=go,_},[r]);Be.useLayoutEffect(()=>(i===1&&x.current.update(d,w),d3(o,l,v,g.texture,a)),[t,w,g.texture,l,v,o,i,d]);let S=1;return oI(()=>{(i===1/0||S<i)&&(x.current.update(d,w),S++)}),Be.createElement(Be.Fragment,null,VG(Be.createElement(Be.Fragment,null,t,Be.createElement("cubeCamera",{ref:x,args:[e,n,g]}),u||h?Be.createElement(bI,{background:!0,files:u,preset:h,path:c,extensions:f}):s?Be.createElement(p3,{background:!0,map:s,extensions:f}):null),w))}function UV(t){var e,n,r,i;const s=_I(t),o=t.map||s;Be.useMemo(()=>Zk({GroundProjectedEnvImpl:SV}),[]);const a=Be.useMemo(()=>[o],[o]),l=(e=t.ground)==null?void 0:e.height,u=(n=t.ground)==null?void 0:n.radius,c=(r=(i=t.ground)==null?void 0:i.scale)!==null&&r!==void 0?r:1e3;return Be.createElement(Be.Fragment,null,Be.createElement(p3,gm({},t,{map:o})),Be.createElement("groundProjectedEnvImpl",{args:a,scale:c,height:l,radius:u}))}function BV(t){return t.ground?Be.createElement(UV,t):t.map?Be.createElement(p3,t):t.children?Be.createElement(OV,t):Be.createElement(bI,t)}dr.DEFAULT_UP.set(0,0,1);function zV(){const{camera:t,set:e}=Js();return Be.useEffect(()=>{if(t instanceof ou)console.log("Camera is already orthographic"),t.position.set(0,-400,200),t.lookAt(0,0,0),t.updateProjectionMatrix();else{console.log("Converting to orthographic camera");const n=window.innerWidth/window.innerHeight,r=1e3,i=new ou(r*n/-2,r*n/2,r/2,r/-2,.01,1e4);i.position.set(0,-400,200),i.lookAt(0,0,0),i.updateProjectionMatrix(),e({camera:i})}},[t,e]),null}function HV(){return Tt(nm,{children:[Me("axesHelper",{args:[200]}),Me("gridHelper",{args:[400,40,8947848,4473924],rotation:[Math.PI/2,0,0]})]})}function GV({children:t}){const e=Math.min(window.devicePixelRatio,2);return Me(Be.Suspense,{fallback:null,children:Tt(dI,{style:{width:"100%",height:"100%",backgroundColor:"#f5f5f5",touchAction:"none"},dpr:e,frameloop:"demand",orthographic:!0,camera:{position:[0,-400,200],zoom:1,far:1e4,near:.01},children:[Me(zV,{}),Me(SI,{enableRotate:!0,enablePan:!0,enableZoom:!0,mouseButtons:{LEFT:$l.ROTATE,MIDDLE:$l.DOLLY,RIGHT:$l.PAN},touches:{ONE:Vu.ROTATE,TWO:Vu.DOLLY_PAN},zoomToCursor:!0,rotateSpeed:.7,panSpeed:.5,zoomSpeed:1.2}),Me("ambientLight",{intensity:4}),Me("pointLight",{position:[100,100,100]}),Me(HV,{}),t]})})}function WT(t,e,n){if(t.clearGroups(),delete t.userData.faceGroups,t.setIndex(e.triangles),t.setAttribute("position",new nn(e.vertices,3)),e.faceGroups){let r=new Set;n&&(r=new Set(n)),t.userData.faceGroups=e.faceGroups,e.faceGroups.forEach(({start:i,count:s,faceId:o})=>{t.addGroup(i,s,r.has(o)?1:0)})}else t.addGroup(0,e.triangles.length,0);e.normals&&e.normals.length?t.setAttribute("normal",new nn(e.normals,3)):t.computeVertexNormals(),t.computeBoundingBox()}function jT(t,e,n){if(t.clearGroups(),delete t.userData.edgeGroups,t.setAttribute("position",new nn(e.lines,3)),!!e)if(e.edgeGroups){let r=new Set;n&&(r=new Set(n)),t.userData.edgeGroups=e.edgeGroups,e.edgeGroups.forEach(({start:i,count:s,edgeId:o})=>{t.addGroup(i,s,r.has(o)?1:0)})}else t.addGroup(0,e.lines.length/3,0)}function XT(t,e){t.clearGroups(),delete t.userData.edgeGroups,t.copy(new YM(e,2))}const VV=FL.memo(function({faces:e,edges:n,helperSpaces:r=[],highQuality:i=!1}){const{invalidate:s}=Js(),[o,a]=Be.useState([]),l=Be.useRef(new An),u=Be.useRef(new An);Be.useEffect(()=>{o.forEach(d=>{d.body.dispose(),d.lines.dispose()});const f=r.map(()=>({body:new An,lines:new An}));a(f)},[r.length]),Be.useLayoutEffect(()=>{if(e)try{console.time("[PERF] syncFaces"),WT(l.current,e),console.timeEnd("[PERF] syncFaces")}catch(f){console.error("[ERROR] Error in syncFaces:",f)}if(n)try{console.time("[PERF] syncLines"),jT(u.current,n),console.timeEnd("[PERF] syncLines")}catch(f){console.error("[ERROR] Error in syncLines:",f)}else if(e)try{console.time("[PERF] syncLinesFromFaces"),XT(u.current,l.current),console.timeEnd("[PERF] syncLinesFromFaces")}catch(f){console.error("[ERROR] Error in syncLinesFromFaces:",f)}o.length===r.length&&r.forEach((f,d)=>{f.faces&&WT(o[d].body,f.faces),f.edges?jT(o[d].lines,f.edges):f.faces&&XT(o[d].lines,o[d].body)}),s()},[e,n,r,o,s]),Be.useEffect(()=>()=>{l.current.dispose(),u.current.dispose(),o.forEach(f=>{f.body.dispose(),f.lines.dispose()})},[o]);const c=i?{color:"#6a92a6",metalness:.4,roughness:.3,envMapIntensity:.8,flatShading:!1,polygonOffset:!0,polygonOffsetFactor:2,polygonOffsetUnits:1,castShadow:!0,receiveShadow:!0}:{color:"#5a8296",polygonOffset:!0,polygonOffsetFactor:2,polygonOffsetUnits:1},h=i?{color:"#304352",linewidth:1.5}:{color:"#3c5a6e"};return Tt("group",{children:[Me("mesh",{geometry:l.current,castShadow:!0,receiveShadow:!0,children:i?Me("meshStandardMaterial",{...c}):Me("meshStandardMaterial",{...c})}),Me("lineSegments",{geometry:u.current,children:Me("lineBasicMaterial",{...h})}),o.length===r.length&&o.map((f,d)=>Tt("group",{children:[Me("mesh",{geometry:f.body,castShadow:!0,children:Me("meshStandardMaterial",{color:"#ff0000",transparent:!0,opacity:.3,depthWrite:!1,polygonOffset:!0,polygonOffsetFactor:1,polygonOffsetUnits:1,roughness:.7,metalness:0})}),Me("lineSegments",{geometry:f.lines,children:Me("lineBasicMaterial",{color:"#ff3333"})})]},`helper-${d}`))]})});function Pr(t){return Pr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pr(t)}var no=Uint8Array,sa=Uint16Array,m3=Int32Array,Px=new no([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Rx=new no([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),qb=new no([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),MI=function(t,e){for(var n=new sa(31),r=0;r<31;++r)n[r]=e+=1<<t[r-1];for(var i=new m3(n[30]),r=1;r<30;++r)for(var s=n[r];s<n[r+1];++s)i[s]=s-n[r]<<5|r;return{b:n,r:i}},EI=MI(Px,2),AI=EI.b,Yb=EI.r;AI[28]=258,Yb[258]=28;var TI=MI(Rx,0),WV=TI.b,qT=TI.r,Zb=new sa(32768);for(var Qr=0;Qr<32768;++Qr){var Zc=(Qr&43690)>>1|(Qr&21845)<<1;Zc=(Zc&52428)>>2|(Zc&13107)<<2,Zc=(Zc&61680)>>4|(Zc&3855)<<4,Zb[Qr]=((Zc&65280)>>8|(Zc&255)<<8)>>1}var lu=function(t,e,n){for(var r=t.length,i=0,s=new sa(e);i<r;++i)t[i]&&++s[t[i]-1];var o=new sa(e);for(i=1;i<e;++i)o[i]=o[i-1]+s[i-1]<<1;var a;if(n){a=new sa(1<<e);var l=15-e;for(i=0;i<r;++i)if(t[i])for(var u=i<<4|t[i],c=e-t[i],h=o[t[i]-1]++<<c,f=h|(1<<c)-1;h<=f;++h)a[Zb[h]>>l]=u}else for(a=new sa(r),i=0;i<r;++i)t[i]&&(a[i]=Zb[o[t[i]-1]++]>>15-t[i]);return a},Ih=new no(288);for(var Qr=0;Qr<144;++Qr)Ih[Qr]=8;for(var Qr=144;Qr<256;++Qr)Ih[Qr]=9;for(var Qr=256;Qr<280;++Qr)Ih[Qr]=7;for(var Qr=280;Qr<288;++Qr)Ih[Qr]=8;var G0=new no(32);for(var Qr=0;Qr<32;++Qr)G0[Qr]=5;var jV=lu(Ih,9,0),XV=lu(Ih,9,1),qV=lu(G0,5,0),YV=lu(G0,5,1),SS=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},cl=function(t,e,n){var r=e/8|0;return(t[r]|t[r+1]<<8)>>(e&7)&n},_S=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(e&7)},g3=function(t){return(t+7)/8|0},CI=function(t,e,n){return(e==null||e<0)&&(e=0),(n==null||n>t.length)&&(n=t.length),new no(t.subarray(e,n))},ZV=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],pl=function(t,e,n){var r=new Error(e||ZV[t]);if(r.code=t,Error.captureStackTrace&&Error.captureStackTrace(r,pl),!n)throw r;return r},$V=function(t,e,n,r){var i=t.length,s=r?r.length:0;if(!i||e.f&&!e.l)return n||new no(0);var o=!n,a=o||e.i!=2,l=e.i;o&&(n=new no(i*3));var u=function(ke){var he=n.length;if(ke>he){var De=new no(Math.max(he*2,ke));De.set(n),n=De}},c=e.f||0,h=e.p||0,f=e.b||0,d=e.l,v=e.d,x=e.m,w=e.n,g=i*8;do{if(!d){c=cl(t,h,1);var S=cl(t,h+1,3);if(h+=3,S)if(S==1)d=XV,v=YV,x=9,w=5;else if(S==2){var k=cl(t,h,31)+257,N=cl(t,h+10,15)+4,R=k+cl(t,h+5,31)+1;h+=14;for(var P=new no(R),D=new no(19),O=0;O<N;++O)D[qb[O]]=cl(t,h+O*3,7);h+=N*3;for(var B=SS(D),V=(1<<B)-1,H=lu(D,B,1),O=0;O<R;){var ee=H[cl(t,h,V)];h+=ee&15;var _=ee>>4;if(_<16)P[O++]=_;else{var se=0,ce=0;for(_==16?(ce=3+cl(t,h,3),h+=2,se=P[O-1]):_==17?(ce=3+cl(t,h,7),h+=3):_==18&&(ce=11+cl(t,h,127),h+=7);ce--;)P[O++]=se}}var W=P.subarray(0,k),Y=P.subarray(k);x=SS(W),w=SS(Y),d=lu(W,x,1),v=lu(Y,w,1)}else pl(1);else{var _=g3(h)+4,T=t[_-4]|t[_-3]<<8,L=_+T;if(L>i){l&&pl(0);break}a&&u(f+T),n.set(t.subarray(_,L),f),e.b=f+=T,e.p=h=L*8,e.f=c;continue}if(h>g){l&&pl(0);break}}a&&u(f+131072);for(var j=(1<<x)-1,re=(1<<w)-1,I=h;;I=h){var se=d[_S(t,h)&j],X=se>>4;if(h+=se&15,h>g){l&&pl(0);break}if(se||pl(2),X<256)n[f++]=X;else if(X==256){I=h,d=null;break}else{var J=X-254;if(X>264){var O=X-257,ae=Px[O];J=cl(t,h,(1<<ae)-1)+AI[O],h+=ae}var fe=v[_S(t,h)&re],Se=fe>>4;fe||pl(3),h+=fe&15;var Y=WV[Se];if(Se>3){var ae=Rx[Se];Y+=_S(t,h)&(1<<ae)-1,h+=ae}if(h>g){l&&pl(0);break}a&&u(f+131072);var Ee=f+J;if(f<Y){var Ce=s-Y,$e=Math.min(Y,Ee);for(Ce+f<0&&pl(3);f<$e;++f)n[f]=r[Ce+f]}for(;f<Ee;++f)n[f]=n[f-Y]}}e.l=d,e.p=I,e.b=f,e.f=c,d&&(c=1,e.m=x,e.d=v,e.n=w)}while(!c);return f!=n.length&&o?CI(n,0,f):n.subarray(0,f)},Bu=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8},_g=function(t,e,n){n<<=e&7;var r=e/8|0;t[r]|=n,t[r+1]|=n>>8,t[r+2]|=n>>16},bS=function(t,e){for(var n=[],r=0;r<t.length;++r)t[r]&&n.push({s:r,f:t[r]});var i=n.length,s=n.slice();if(!i)return{t:PI,l:0};if(i==1){var o=new no(n[0].s+1);return o[n[0].s]=1,{t:o,l:1}}n.sort(function(L,k){return L.f-k.f}),n.push({s:-1,f:25001});var a=n[0],l=n[1],u=0,c=1,h=2;for(n[0]={s:-1,f:a.f+l.f,l:a,r:l};c!=i-1;)a=n[n[u].f<n[h].f?u++:h++],l=n[u!=c&&n[u].f<n[h].f?u++:h++],n[c++]={s:-1,f:a.f+l.f,l:a,r:l};for(var f=s[0].s,r=1;r<i;++r)s[r].s>f&&(f=s[r].s);var d=new sa(f+1),v=$b(n[c-1],d,0);if(v>e){var r=0,x=0,w=v-e,g=1<<w;for(s.sort(function(k,N){return d[N.s]-d[k.s]||k.f-N.f});r<i;++r){var S=s[r].s;if(d[S]>e)x+=g-(1<<v-d[S]),d[S]=e;else break}for(x>>=w;x>0;){var _=s[r].s;d[_]<e?x-=1<<e-d[_]++-1:++r}for(;r>=0&&x;--r){var T=s[r].s;d[T]==e&&(--d[T],++x)}v=e}return{t:new no(d),l:v}},$b=function(t,e,n){return t.s==-1?Math.max($b(t.l,e,n+1),$b(t.r,e,n+1)):e[t.s]=n},YT=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new sa(++e),r=0,i=t[0],s=1,o=function(l){n[r++]=l},a=1;a<=e;++a)if(t[a]==i&&a!=e)++s;else{if(!i&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(i),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(i);s=1,i=t[a]}return{c:n.subarray(0,r),n:e}},bg=function(t,e){for(var n=0,r=0;r<e.length;++r)n+=t[r]*e[r];return n},LI=function(t,e,n){var r=n.length,i=g3(e+2);t[i]=r&255,t[i+1]=r>>8,t[i+2]=t[i]^255,t[i+3]=t[i+1]^255;for(var s=0;s<r;++s)t[i+s+4]=n[s];return(i+4+r)*8},ZT=function(t,e,n,r,i,s,o,a,l,u,c){Bu(e,c++,n),++i[256];for(var h=bS(i,15),f=h.t,d=h.l,v=bS(s,15),x=v.t,w=v.l,g=YT(f),S=g.c,_=g.n,T=YT(x),L=T.c,k=T.n,N=new sa(19),R=0;R<S.length;++R)++N[S[R]&31];for(var R=0;R<L.length;++R)++N[L[R]&31];for(var P=bS(N,7),D=P.t,O=P.l,B=19;B>4&&!D[qb[B-1]];--B);var V=u+5<<3,H=bg(i,Ih)+bg(s,G0)+o,ee=bg(i,f)+bg(s,x)+o+14+3*B+bg(N,D)+2*N[16]+3*N[17]+7*N[18];if(l>=0&&V<=H&&V<=ee)return LI(e,c,t.subarray(l,l+u));var se,ce,W,Y;if(Bu(e,c,1+(ee<H)),c+=2,ee<H){se=lu(f,d,0),ce=f,W=lu(x,w,0),Y=x;var j=lu(D,O,0);Bu(e,c,_-257),Bu(e,c+5,k-1),Bu(e,c+10,B-4),c+=14;for(var R=0;R<B;++R)Bu(e,c+3*R,D[qb[R]]);c+=3*B;for(var re=[S,L],I=0;I<2;++I)for(var X=re[I],R=0;R<X.length;++R){var J=X[R]&31;Bu(e,c,j[J]),c+=D[J],J>15&&(Bu(e,c,X[R]>>5&127),c+=X[R]>>12)}}else se=jV,ce=Ih,W=qV,Y=G0;for(var R=0;R<a;++R){var ae=r[R];if(ae>255){var J=ae>>18&31;_g(e,c,se[J+257]),c+=ce[J+257],J>7&&(Bu(e,c,ae>>23&31),c+=Px[J]);var fe=ae&31;_g(e,c,W[fe]),c+=Y[fe],fe>3&&(_g(e,c,ae>>5&8191),c+=Rx[fe])}else _g(e,c,se[ae]),c+=ce[ae]}return _g(e,c,se[256]),c+ce[256]},KV=new m3([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),PI=new no(0),JV=function(t,e,n,r,i,s){var o=s.z||t.length,a=new no(r+o+5*(1+Math.ceil(o/7e3))+i),l=a.subarray(r,a.length-i),u=s.l,c=(s.r||0)&7;if(e){c&&(l[0]=s.r>>3);for(var h=KV[e-1],f=h>>13,d=h&8191,v=(1<<n)-1,x=s.p||new sa(32768),w=s.h||new sa(v+1),g=Math.ceil(n/3),S=2*g,_=function(ze){return(t[ze]^t[ze+1]<<g^t[ze+2]<<S)&v},T=new m3(25e3),L=new sa(288),k=new sa(32),N=0,R=0,P=s.i||0,D=0,O=s.w||0,B=0;P+2<o;++P){var V=_(P),H=P&32767,ee=w[V];if(x[H]=ee,w[V]=H,O<=P){var se=o-P;if((N>7e3||D>24576)&&(se>423||!u)){c=ZT(t,l,0,T,L,k,R,D,B,P-B,c),D=N=R=0,B=P;for(var ce=0;ce<286;++ce)L[ce]=0;for(var ce=0;ce<30;++ce)k[ce]=0}var W=2,Y=0,j=d,re=H-ee&32767;if(se>2&&V==_(P-re))for(var I=Math.min(f,se)-1,X=Math.min(32767,P),J=Math.min(258,se);re<=X&&--j&&H!=ee;){if(t[P+W]==t[P+W-re]){for(var ae=0;ae<J&&t[P+ae]==t[P+ae-re];++ae);if(ae>W){if(W=ae,Y=re,ae>I)break;for(var fe=Math.min(re,ae-2),Se=0,ce=0;ce<fe;++ce){var Ee=P-re+ce&32767,Ce=x[Ee],$e=Ee-Ce&32767;$e>Se&&(Se=$e,ee=Ee)}}}H=ee,ee=x[H],re+=H-ee&32767}if(Y){T[D++]=268435456|Yb[W]<<18|qT[Y];var ke=Yb[W]&31,he=qT[Y]&31;R+=Px[ke]+Rx[he],++L[257+ke],++k[he],O=P+W,++N}else T[D++]=t[P],++L[t[P]]}}for(P=Math.max(P,O);P<o;++P)T[D++]=t[P],++L[t[P]];c=ZT(t,l,u,T,L,k,R,D,B,P-B,c),u||(s.r=c&7|l[c/8|0]<<3,c-=7,s.h=w,s.p=x,s.i=P,s.w=O)}else{for(var P=s.w||0;P<o+u;P+=65535){var De=P+65535;De>=o&&(l[c/8|0]=u,De=o),c=LI(l,c+1,t.subarray(P,De))}s.i=o}return CI(a,0,r+g3(c)+i)},RI=function(){var t=1,e=0;return{p:function(n){for(var r=t,i=e,s=n.length|0,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)i+=r+=n[o];r=(r&65535)+15*(r>>16),i=(i&65535)+15*(i>>16)}t=r,e=i},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},QV=function(t,e,n,r,i){if(!i&&(i={l:1},e.dictionary)){var s=e.dictionary.subarray(-32768),o=new no(s.length+t.length);o.set(s),o.set(t,s.length),t=o,i.w=s.length}return JV(t,e.level==null?6:e.level,e.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,r,i)},kI=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},eW=function(t,e){var n=e.level,r=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=r<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var i=RI();i.p(e.dictionary),kI(t,2,i.d())}},tW=function(t,e){return((t[0]&15)!=8||t[0]>>4>7||(t[0]<<8|t[1])%31)&&pl(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&pl(6,"invalid zlib data: "+(t[1]&32?"need":"unexpected")+" dictionary"),(t[1]>>3&4)+2};function Kb(t,e){e||(e={});var n=RI();n.p(t);var r=QV(t,e,e.dictionary?6:2,4);return eW(r,e),kI(r,r.length-4,n.d()),r}function nW(t,e){return $V(t.subarray(tW(t,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}var rW=typeof TextDecoder<"u"&&new TextDecoder,iW=0;try{rW.decode(PI,{stream:!0}),iW=1}catch{}var Mn=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function MS(){Mn.console&&typeof Mn.console.log=="function"&&Mn.console.log.apply(Mn.console,arguments)}var Dr={log:MS,warn:function(t){Mn.console&&(typeof Mn.console.warn=="function"?Mn.console.warn.apply(Mn.console,arguments):MS.call(null,arguments))},error:function(t){Mn.console&&(typeof Mn.console.error=="function"?Mn.console.error.apply(Mn.console,arguments):MS(t))}};function ES(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){Af(r.response,e,n)},r.onerror=function(){Dr.error("could not download file")},r.send()}function $T(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function J1(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var Jg,Jb,Af=Mn.saveAs||((typeof window>"u"?"undefined":Pr(window))!=="object"||window!==Mn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var r=Mn.URL||Mn.webkitURL,i=document.createElement("a");e=e||t.name||"download",i.download=e,i.rel="noopener",typeof t=="string"?(i.href=t,i.origin!==location.origin?$T(i.href)?ES(t,e,n):J1(i,i.target="_blank"):J1(i)):(i.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(i.href)},4e4),setTimeout(function(){J1(i)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if($T(t))ES(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout(function(){J1(r)})}else navigator.msSaveOrOpenBlob(function(i,s){return s===void 0?s={autoBom:!1}:Pr(s)!=="object"&&(Dr.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob([String.fromCharCode(65279),i],{type:i.type}):i}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof t=="string")return ES(t,e,n);var i=t.type==="application/octet-stream",s=/constructor/i.test(Mn.HTMLElement)||Mn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&s)&&(typeof FileReader>"u"?"undefined":Pr(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var c=a.result;c=o?c:c.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=c:location=c,r=null},a.readAsDataURL(t)}else{var l=Mn.URL||Mn.webkitURL,u=l.createObjectURL(t);r?r.location=u:location.href=u,r=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function II(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],r=0;r<n.length;r++){var i=n[r].re,s=n[r].process,o=i.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function AS(t,e){var n=t[0],r=t[1],i=t[2],s=t[3];n=Xs(n,r,i,s,e[0],7,-680876936),s=Xs(s,n,r,i,e[1],12,-389564586),i=Xs(i,s,n,r,e[2],17,606105819),r=Xs(r,i,s,n,e[3],22,-1044525330),n=Xs(n,r,i,s,e[4],7,-176418897),s=Xs(s,n,r,i,e[5],12,1200080426),i=Xs(i,s,n,r,e[6],17,-1473231341),r=Xs(r,i,s,n,e[7],22,-45705983),n=Xs(n,r,i,s,e[8],7,1770035416),s=Xs(s,n,r,i,e[9],12,-1958414417),i=Xs(i,s,n,r,e[10],17,-42063),r=Xs(r,i,s,n,e[11],22,-1990404162),n=Xs(n,r,i,s,e[12],7,1804603682),s=Xs(s,n,r,i,e[13],12,-40341101),i=Xs(i,s,n,r,e[14],17,-1502002290),n=qs(n,r=Xs(r,i,s,n,e[15],22,1236535329),i,s,e[1],5,-165796510),s=qs(s,n,r,i,e[6],9,-1069501632),i=qs(i,s,n,r,e[11],14,643717713),r=qs(r,i,s,n,e[0],20,-373897302),n=qs(n,r,i,s,e[5],5,-701558691),s=qs(s,n,r,i,e[10],9,38016083),i=qs(i,s,n,r,e[15],14,-660478335),r=qs(r,i,s,n,e[4],20,-405537848),n=qs(n,r,i,s,e[9],5,568446438),s=qs(s,n,r,i,e[14],9,-1019803690),i=qs(i,s,n,r,e[3],14,-187363961),r=qs(r,i,s,n,e[8],20,1163531501),n=qs(n,r,i,s,e[13],5,-1444681467),s=qs(s,n,r,i,e[2],9,-51403784),i=qs(i,s,n,r,e[7],14,1735328473),n=Ys(n,r=qs(r,i,s,n,e[12],20,-1926607734),i,s,e[5],4,-378558),s=Ys(s,n,r,i,e[8],11,-2022574463),i=Ys(i,s,n,r,e[11],16,1839030562),r=Ys(r,i,s,n,e[14],23,-35309556),n=Ys(n,r,i,s,e[1],4,-1530992060),s=Ys(s,n,r,i,e[4],11,1272893353),i=Ys(i,s,n,r,e[7],16,-155497632),r=Ys(r,i,s,n,e[10],23,-1094730640),n=Ys(n,r,i,s,e[13],4,681279174),s=Ys(s,n,r,i,e[0],11,-358537222),i=Ys(i,s,n,r,e[3],16,-722521979),r=Ys(r,i,s,n,e[6],23,76029189),n=Ys(n,r,i,s,e[9],4,-640364487),s=Ys(s,n,r,i,e[12],11,-421815835),i=Ys(i,s,n,r,e[15],16,530742520),n=Zs(n,r=Ys(r,i,s,n,e[2],23,-995338651),i,s,e[0],6,-198630844),s=Zs(s,n,r,i,e[7],10,1126891415),i=Zs(i,s,n,r,e[14],15,-1416354905),r=Zs(r,i,s,n,e[5],21,-57434055),n=Zs(n,r,i,s,e[12],6,1700485571),s=Zs(s,n,r,i,e[3],10,-1894986606),i=Zs(i,s,n,r,e[10],15,-1051523),r=Zs(r,i,s,n,e[1],21,-2054922799),n=Zs(n,r,i,s,e[8],6,1873313359),s=Zs(s,n,r,i,e[15],10,-30611744),i=Zs(i,s,n,r,e[6],15,-1560198380),r=Zs(r,i,s,n,e[13],21,1309151649),n=Zs(n,r,i,s,e[4],6,-145523070),s=Zs(s,n,r,i,e[11],10,-1120210379),i=Zs(i,s,n,r,e[2],15,718787259),r=Zs(r,i,s,n,e[9],21,-343485551),t[0]=fh(n,t[0]),t[1]=fh(r,t[1]),t[2]=fh(i,t[2]),t[3]=fh(s,t[3])}function kx(t,e,n,r,i,s){return e=fh(fh(e,t),fh(r,s)),fh(e<<i|e>>>32-i,n)}function Xs(t,e,n,r,i,s,o){return kx(e&n|~e&r,t,e,i,s,o)}function qs(t,e,n,r,i,s,o){return kx(e&r|n&~r,t,e,i,s,o)}function Ys(t,e,n,r,i,s,o){return kx(e^n^r,t,e,i,s,o)}function Zs(t,e,n,r,i,s,o){return kx(n^(e|~r),t,e,i,s,o)}function NI(t){var e,n=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)AS(r,sW(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),e>55)for(AS(r,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,AS(r,i),r}function sW(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}Jg=Mn.atob.bind(Mn),Jb=Mn.btoa.bind(Mn);var KT="0123456789abcdef".split("");function oW(t){for(var e="",n=0;n<4;n++)e+=KT[t>>8*n+4&15]+KT[t>>8*n&15];return e}function aW(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function Qb(t){return NI(t).map(aW).join("")}var lW=function(t){for(var e=0;e<t.length;e++)t[e]=oW(t[e]);return t.join("")}(NI("hello"))!="5d41402abc4b2a76b9719d911017c592";function fh(t,e){if(lW){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function e5(t,e){var n,r,i,s;if(t!==n){for(var o=(i=t,s=1+(256/t.length>>0),new Array(s+1).join(i)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var c=a[l];u=(u+c+o.charCodeAt(l))%256,a[l]=a[u],a[u]=c}n=t,r=a}else a=r;var h=e.length,f=0,d=0,v="";for(l=0;l<h;l++)d=(d+(c=a[f=(f+1)%256]))%256,a[f]=a[d],a[d]=c,o=a[(a[f]+a[d])%256],v+=String.fromCharCode(e.charCodeAt(l)^o);return v}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var JT={print:4,modify:8,copy:16,"annot-forms":32};function _p(t,e,n,r){this.v=1,this.r=2;var i=192;t.forEach(function(a){if(JT.perm!==void 0)throw new Error("Invalid permission: "+a);i+=JT[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^i)),this.encryptionKey=Qb(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=e5(this.encryptionKey,this.padding)}function bp(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,r=0;r<n;r++){var i=t.charCodeAt(r);i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?e+="#"+("0"+i.toString(16)).slice(-2):e+=t[r]}return e}function QT(t){if(Pr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,r,i){if(i=i||!1,typeof n!="string"||typeof r!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var s=Math.random().toString(35);return e[n][s]=[r,!!i],s},this.unsubscribe=function(n){for(var r in e)if(e[r][n])return delete e[r][n],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),i=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,r)}catch(a){Mn.console&&Dr.error("jsPDF PubSub Error",a.message,a)}o[1]&&i.push(s)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function sd(t){if(!(this instanceof sd))return new sd(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function FI(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function oh(t,e,n,r,i){if(!(this instanceof oh))return new oh(t,e,n,r,i);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,FI.call(this,r,i)}function Hf(t,e,n,r,i){if(!(this instanceof Hf))return new Hf(t,e,n,r,i);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,FI.call(this,r,i)}function wn(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],i=arguments[2],s=arguments[3],o=[],a=1,l=16,u="S",c=null;Pr(t=t||{})==="object"&&(n=t.orientation,r=t.unit||r,i=t.format||i,s=t.compress||t.compressPdf||s,(c=t.encryption||null)!==null&&(c.userPassword=c.userPassword||"",c.ownerPassword=c.ownerPassword||"",c.userPermissions=c.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(s===!0?["FlateEncode"]:o),r=r||"mm",n=(""+(n||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,f={},d={internal:{},__private__:{}};d.__private__.PubSub=QT;var v="1.3",x=d.__private__.getPdfVersion=function(){return v};d.__private__.setPdfVersion=function(A){v=A};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};d.__private__.getPageFormats=function(){return w};var g=d.__private__.getPageFormat=function(A){return w[A]};i=i||"a4";var S={COMPAT:"compat",ADVANCED:"advanced"},_=S.COMPAT;function T(){this.saveGraphicsState(),K(new Ft(Te,0,0,-Te,0,Ja()*Te).toString()+" cm"),this.setFontSize(this.getFontSize()/Te),u="n",_=S.ADVANCED}function L(){this.restoreGraphicsState(),u="S",_=S.COMPAT}var k=d.__private__.combineFontStyleAndFontWeight=function(A,$){if(A=="bold"&&$=="normal"||A=="bold"&&$==400||A=="normal"&&$=="italic"||A=="bold"&&$=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return $&&(A=$==400||$==="normal"?A==="italic"?"italic":"normal":$!=700&&$!=="bold"||A!=="normal"?($==700?"bold":$)+""+A:"bold"),A};d.advancedAPI=function(A){var $=_===S.COMPAT;return $&&T.call(this),typeof A!="function"||(A(this),$&&L.call(this)),this},d.compatAPI=function(A){var $=_===S.ADVANCED;return $&&L.call(this),typeof A!="function"||(A(this),$&&T.call(this)),this},d.isAdvancedAPI=function(){return _===S.ADVANCED};var N,R=function(A){if(_!==S.ADVANCED)throw new Error(A+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},P=d.roundToPrecision=d.__private__.roundToPrecision=function(A,$){var _e=e||$;if(isNaN(A)||isNaN(_e))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return A.toFixed(_e).replace(/0+$/,"")};N=d.hpf=d.__private__.hpf=typeof l=="number"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return P(A,l)}:l==="smart"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return P(A,A>-1&&A<1?16:5)}:function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return P(A,16)};var D=d.f2=d.__private__.f2=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f2");return P(A,2)},O=d.__private__.f3=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f3");return P(A,3)},B=d.scale=d.__private__.scale=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.scale");return _===S.COMPAT?A*Te:_===S.ADVANCED?A:void 0},V=function(A){return _===S.COMPAT?Ja()-A:_===S.ADVANCED?A:void 0},H=function(A){return B(V(A))};d.__private__.setPrecision=d.setPrecision=function(A){typeof parseInt(A,10)=="number"&&(e=parseInt(A,10))};var ee,se="00000000000000000000000000000000",ce=d.__private__.getFileId=function(){return se},W=d.__private__.setFileId=function(A){return se=A!==void 0&&/^[a-fA-F0-9]{32}$/.test(A)?A.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),c!==null&&(Hi=new _p(c.userPermissions,c.userPassword,c.ownerPassword,se)),se};d.setFileId=function(A){return W(A),this},d.getFileId=function(){return ce()};var Y=d.__private__.convertDateToPDFDate=function(A){var $=A.getTimezoneOffset(),_e=$<0?"+":"-",Le=Math.floor(Math.abs($/60)),Ve=Math.abs($%60),ct=[_e,J(Le),"'",J(Ve),"'"].join("");return["D:",A.getFullYear(),J(A.getMonth()+1),J(A.getDate()),J(A.getHours()),J(A.getMinutes()),J(A.getSeconds()),ct].join("")},j=d.__private__.convertPDFDateToDate=function(A){var $=parseInt(A.substr(2,4),10),_e=parseInt(A.substr(6,2),10)-1,Le=parseInt(A.substr(8,2),10),Ve=parseInt(A.substr(10,2),10),ct=parseInt(A.substr(12,2),10),Et=parseInt(A.substr(14,2),10);return new Date($,_e,Le,Ve,ct,Et,0)},re=d.__private__.setCreationDate=function(A){var $;if(A===void 0&&(A=new Date),A instanceof Date)$=Y(A);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(A))throw new Error("Invalid argument passed to jsPDF.setCreationDate");$=A}return ee=$},I=d.__private__.getCreationDate=function(A){var $=ee;return A==="jsDate"&&($=j(ee)),$};d.setCreationDate=function(A){return re(A),this},d.getCreationDate=function(A){return I(A)};var X,J=d.__private__.padd2=function(A){return("0"+parseInt(A)).slice(-2)},ae=d.__private__.padd2Hex=function(A){return("00"+(A=A.toString())).substr(A.length)},fe=0,Se=[],Ee=[],Ce=0,$e=[],ke=[],he=!1,De=Ee,ze=function(){fe=0,Ce=0,Ee=[],Se=[],$e=[],Wr=$n(),oi=$n()};d.__private__.setCustomOutputDestination=function(A){he=!0,De=A};var pe=function(A){he||(De=A)};d.__private__.resetCustomOutputDestination=function(){he=!1,De=Ee};var K=d.__private__.out=function(A){return A=A.toString(),Ce+=A.length+1,De.push(A),De},tt=d.__private__.write=function(A){return K(arguments.length===1?A.toString():Array.prototype.join.call(arguments," "))},Ze=d.__private__.getArrayBuffer=function(A){for(var $=A.length,_e=new ArrayBuffer($),Le=new Uint8Array(_e);$--;)Le[$]=A.charCodeAt($);return _e},Ne=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];d.__private__.getStandardFonts=function(){return Ne};var Ke=t.fontSize||16;d.__private__.setFontSize=d.setFontSize=function(A){return Ke=_===S.ADVANCED?A/Te:A,this};var ft,vt=d.__private__.getFontSize=d.getFontSize=function(){return _===S.COMPAT?Ke:Ke*Te},ue=t.R2L||!1;d.__private__.setR2L=d.setR2L=function(A){return ue=A,this},d.__private__.getR2L=d.getR2L=function(){return ue};var Q,Pe=d.__private__.setZoomMode=function(A){var $=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(A))ft=A;else if(isNaN(A)){if($.indexOf(A)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+A+'" is not recognized.');ft=A}else ft=parseInt(A,10)};d.__private__.getZoomMode=function(){return ft};var et,Qe=d.__private__.setPageMode=function(A){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(A)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+A+'" is not recognized.');Q=A};d.__private__.getPageMode=function(){return Q};var dt=d.__private__.setLayoutMode=function(A){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(A)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+A+'" is not recognized.');et=A};d.__private__.getLayoutMode=function(){return et},d.__private__.setDisplayMode=d.setDisplayMode=function(A,$,_e){return Pe(A),dt($),Qe(_e),this};var lt={title:"",subject:"",author:"",keywords:"",creator:""};d.__private__.getDocumentProperty=function(A){if(Object.keys(lt).indexOf(A)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return lt[A]},d.__private__.getDocumentProperties=function(){return lt},d.__private__.setDocumentProperties=d.setProperties=d.setDocumentProperties=function(A){for(var $ in lt)lt.hasOwnProperty($)&&A[$]&&(lt[$]=A[$]);return this},d.__private__.setDocumentProperty=function(A,$){if(Object.keys(lt).indexOf(A)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return lt[A]=$};var it,Te,Nt,At,Ct,bt={},xe={},Ye=[],st={},Ae={},Fe={},Ge={},yt=null,pt=0,kt=[],Vt=new QT(d),yn=t.hotfixes||[],Nn={},gn={},kn=[],Ft=function A($,_e,Le,Ve,ct,Et){if(!(this instanceof A))return new A($,_e,Le,Ve,ct,Et);isNaN($)&&($=1),isNaN(_e)&&(_e=0),isNaN(Le)&&(Le=0),isNaN(Ve)&&(Ve=1),isNaN(ct)&&(ct=0),isNaN(Et)&&(Et=0),this._matrix=[$,_e,Le,Ve,ct,Et]};Object.defineProperty(Ft.prototype,"sx",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(Ft.prototype,"shy",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(Ft.prototype,"shx",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(Ft.prototype,"sy",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(Ft.prototype,"tx",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(Ft.prototype,"ty",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(Ft.prototype,"a",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(Ft.prototype,"b",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(Ft.prototype,"c",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(Ft.prototype,"d",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(Ft.prototype,"e",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(Ft.prototype,"f",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(Ft.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Ft.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Ft.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Ft.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Ft.prototype.join=function(A){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(N).join(A)},Ft.prototype.multiply=function(A){var $=A.sx*this.sx+A.shy*this.shx,_e=A.sx*this.shy+A.shy*this.sy,Le=A.shx*this.sx+A.sy*this.shx,Ve=A.shx*this.shy+A.sy*this.sy,ct=A.tx*this.sx+A.ty*this.shx+this.tx,Et=A.tx*this.shy+A.ty*this.sy+this.ty;return new Ft($,_e,Le,Ve,ct,Et)},Ft.prototype.decompose=function(){var A=this.sx,$=this.shy,_e=this.shx,Le=this.sy,Ve=this.tx,ct=this.ty,Et=Math.sqrt(A*A+$*$),Ht=(A/=Et)*_e+($/=Et)*Le;_e-=A*Ht,Le-=$*Ht;var an=Math.sqrt(_e*_e+Le*Le);return Ht/=an,A*(Le/=an)<$*(_e/=an)&&(A=-A,$=-$,Ht=-Ht,Et=-Et),{scale:new Ft(Et,0,0,an,0,0),translate:new Ft(1,0,0,1,Ve,ct),rotate:new Ft(A,$,-$,A,0,0),skew:new Ft(1,0,Ht,1,0,0)}},Ft.prototype.toString=function(A){return this.join(" ")},Ft.prototype.inversed=function(){var A=this.sx,$=this.shy,_e=this.shx,Le=this.sy,Ve=this.tx,ct=this.ty,Et=1/(A*Le-$*_e),Ht=Le*Et,an=-$*Et,En=-_e*Et,cn=A*Et;return new Ft(Ht,an,En,cn,-Ht*Ve-En*ct,-an*Ve-cn*ct)},Ft.prototype.applyToPoint=function(A){var $=A.x*this.sx+A.y*this.shx+this.tx,_e=A.x*this.shy+A.y*this.sy+this.ty;return new lo($,_e)},Ft.prototype.applyToRectangle=function(A){var $=this.applyToPoint(A),_e=this.applyToPoint(new lo(A.x+A.w,A.y+A.h));return new Su($.x,$.y,_e.x-$.x,_e.y-$.y)},Ft.prototype.clone=function(){var A=this.sx,$=this.shy,_e=this.shx,Le=this.sy,Ve=this.tx,ct=this.ty;return new Ft(A,$,_e,Le,Ve,ct)},d.Matrix=Ft;var Vr=d.matrixMult=function(A,$){return $.multiply(A)},Ir=new Ft(1,0,0,1,0,0);d.unitMatrix=d.identityMatrix=Ir;var Zn=function(A,$){if(!Ae[A]){var _e=($ instanceof oh?"Sh":"P")+(Object.keys(st).length+1).toString(10);$.id=_e,Ae[A]=_e,st[_e]=$,Vt.publish("addPattern",$)}};d.ShadingPattern=oh,d.TilingPattern=Hf,d.addShadingPattern=function(A,$){return R("addShadingPattern()"),Zn(A,$),this},d.beginTilingPattern=function(A){R("beginTilingPattern()"),bo(A.boundingBox[0],A.boundingBox[1],A.boundingBox[2]-A.boundingBox[0],A.boundingBox[3]-A.boundingBox[1],A.matrix)},d.endTilingPattern=function(A,$){R("endTilingPattern()"),$.stream=ke[X].join(`
`),Zn(A,$),Vt.publish("endTilingPattern",$),kn.pop().restore()};var vn=d.__private__.newObject=function(){var A=$n();return Wn(A,!0),A},$n=d.__private__.newObjectDeferred=function(){return fe++,Se[fe]=function(){return Ce},fe},Wn=function(A,$){return $=typeof $=="boolean"&&$,Se[A]=Ce,$&&K(A+" 0 obj"),A},pn=d.__private__.newAdditionalObject=function(){var A={objId:$n(),content:""};return $e.push(A),A},Wr=$n(),oi=$n(),q=d.__private__.decodeColorString=function(A){var $=A.split(" ");if($.length!==2||$[1]!=="g"&&$[1]!=="G")$.length===5&&($[4]==="k"||$[4]==="K")&&($=[(1-$[0])*(1-$[3]),(1-$[1])*(1-$[3]),(1-$[2])*(1-$[3]),"r"]);else{var _e=parseFloat($[0]);$=[_e,_e,_e,"r"]}for(var Le="#",Ve=0;Ve<3;Ve++)Le+=("0"+Math.floor(255*parseFloat($[Ve])).toString(16)).slice(-2);return Le},U=d.__private__.encodeColorString=function(A){var $;typeof A=="string"&&(A={ch1:A});var _e=A.ch1,Le=A.ch2,Ve=A.ch3,ct=A.ch4,Et=A.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof _e=="string"&&_e.charAt(0)!=="#"){var Ht=new II(_e);if(Ht.ok)_e=Ht.toHex();else if(!/^\d*\.?\d*$/.test(_e))throw new Error('Invalid color "'+_e+'" passed to jsPDF.encodeColorString.')}if(typeof _e=="string"&&/^#[0-9A-Fa-f]{3}$/.test(_e)&&(_e="#"+_e[1]+_e[1]+_e[2]+_e[2]+_e[3]+_e[3]),typeof _e=="string"&&/^#[0-9A-Fa-f]{6}$/.test(_e)){var an=parseInt(_e.substr(1),16);_e=an>>16&255,Le=an>>8&255,Ve=255&an}if(Le===void 0||ct===void 0&&_e===Le&&Le===Ve)if(typeof _e=="string")$=_e+" "+Et[0];else switch(A.precision){case 2:$=D(_e/255)+" "+Et[0];break;case 3:default:$=O(_e/255)+" "+Et[0]}else if(ct===void 0||Pr(ct)==="object"){if(ct&&!isNaN(ct.a)&&ct.a===0)return $=["1.","1.","1.",Et[1]].join(" ");if(typeof _e=="string")$=[_e,Le,Ve,Et[1]].join(" ");else switch(A.precision){case 2:$=[D(_e/255),D(Le/255),D(Ve/255),Et[1]].join(" ");break;default:case 3:$=[O(_e/255),O(Le/255),O(Ve/255),Et[1]].join(" ")}}else if(typeof _e=="string")$=[_e,Le,Ve,ct,Et[2]].join(" ");else switch(A.precision){case 2:$=[D(_e),D(Le),D(Ve),D(ct),Et[2]].join(" ");break;case 3:default:$=[O(_e),O(Le),O(Ve),O(ct),Et[2]].join(" ")}return $},ne=d.__private__.getFilters=function(){return o},me=d.__private__.putStream=function(A){var $=(A=A||{}).data||"",_e=A.filters||ne(),Le=A.alreadyAppliedFilters||[],Ve=A.addLength1||!1,ct=$.length,Et=A.objectId,Ht=function(ti){return ti};if(c!==null&&Et===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");c!==null&&(Ht=Hi.encryptor(Et,0));var an={};_e===!0&&(_e=["FlateEncode"]);var En=A.additionalKeyValues||[],cn=(an=wn.API.processDataByFilters!==void 0?wn.API.processDataByFilters($,_e):{data:$,reverseChain:[]}).reverseChain+(Array.isArray(Le)?Le.join(" "):Le.toString());if(an.data.length!==0&&(En.push({key:"Length",value:an.data.length}),Ve===!0&&En.push({key:"Length1",value:ct})),cn.length!=0)if(cn.split("/").length-1==1)En.push({key:"Filter",value:cn});else{En.push({key:"Filter",value:"["+cn+"]"});for(var Tn=0;Tn<En.length;Tn+=1)if(En[Tn].key==="DecodeParms"){for(var wr=[],gr=0;gr<an.reverseChain.split("/").length-1;gr+=1)wr.push("null");wr.push(En[Tn].value),En[Tn].value="["+wr.join(" ")+"]"}}K("<<");for(var br=0;br<En.length;br++)K("/"+En[br].key+" "+En[br].value);K(">>"),an.data.length!==0&&(K("stream"),K(Ht(an.data)),K("endstream"))},de=d.__private__.putPage=function(A){var $=A.number,_e=A.data,Le=A.objId,Ve=A.contentsObjId;Wn(Le,!0),K("<</Type /Page"),K("/Parent "+A.rootDictionaryObjId+" 0 R"),K("/Resources "+A.resourceDictionaryObjId+" 0 R"),K("/MediaBox ["+parseFloat(N(A.mediaBox.bottomLeftX))+" "+parseFloat(N(A.mediaBox.bottomLeftY))+" "+N(A.mediaBox.topRightX)+" "+N(A.mediaBox.topRightY)+"]"),A.cropBox!==null&&K("/CropBox ["+N(A.cropBox.bottomLeftX)+" "+N(A.cropBox.bottomLeftY)+" "+N(A.cropBox.topRightX)+" "+N(A.cropBox.topRightY)+"]"),A.bleedBox!==null&&K("/BleedBox ["+N(A.bleedBox.bottomLeftX)+" "+N(A.bleedBox.bottomLeftY)+" "+N(A.bleedBox.topRightX)+" "+N(A.bleedBox.topRightY)+"]"),A.trimBox!==null&&K("/TrimBox ["+N(A.trimBox.bottomLeftX)+" "+N(A.trimBox.bottomLeftY)+" "+N(A.trimBox.topRightX)+" "+N(A.trimBox.topRightY)+"]"),A.artBox!==null&&K("/ArtBox ["+N(A.artBox.bottomLeftX)+" "+N(A.artBox.bottomLeftY)+" "+N(A.artBox.topRightX)+" "+N(A.artBox.topRightY)+"]"),typeof A.userUnit=="number"&&A.userUnit!==1&&K("/UserUnit "+A.userUnit),Vt.publish("putPage",{objId:Le,pageContext:kt[$],pageNumber:$,page:_e}),K("/Contents "+Ve+" 0 R"),K(">>"),K("endobj");var ct=_e.join(`
`);return _===S.ADVANCED&&(ct+=`
Q`),Wn(Ve,!0),me({data:ct,filters:ne(),objectId:Ve}),K("endobj"),Le},we=d.__private__.putPages=function(){var A,$,_e=[];for(A=1;A<=pt;A++)kt[A].objId=$n(),kt[A].contentsObjId=$n();for(A=1;A<=pt;A++)_e.push(de({number:A,data:ke[A],objId:kt[A].objId,contentsObjId:kt[A].contentsObjId,mediaBox:kt[A].mediaBox,cropBox:kt[A].cropBox,bleedBox:kt[A].bleedBox,trimBox:kt[A].trimBox,artBox:kt[A].artBox,userUnit:kt[A].userUnit,rootDictionaryObjId:Wr,resourceDictionaryObjId:oi}));Wn(Wr,!0),K("<</Type /Pages");var Le="/Kids [";for($=0;$<pt;$++)Le+=_e[$]+" 0 R ";K(Le+"]"),K("/Count "+pt),K(">>"),K("endobj"),Vt.publish("postPutPages")},Xe=function(A){Vt.publish("putFont",{font:A,out:K,newObject:vn,putStream:me}),A.isAlreadyPutted!==!0&&(A.objectNumber=vn(),K("<<"),K("/Type /Font"),K("/BaseFont /"+bp(A.postScriptName)),K("/Subtype /Type1"),typeof A.encoding=="string"&&K("/Encoding /"+A.encoding),K("/FirstChar 32"),K("/LastChar 255"),K(">>"),K("endobj"))},qe=function(){for(var A in bt)bt.hasOwnProperty(A)&&(h===!1||h===!0&&f.hasOwnProperty(A))&&Xe(bt[A])},ot=function(A){A.objectNumber=vn();var $=[];$.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Form"}),$.push({key:"BBox",value:"["+[N(A.x),N(A.y),N(A.x+A.width),N(A.y+A.height)].join(" ")+"]"}),$.push({key:"Matrix",value:"["+A.matrix.toString()+"]"});var _e=A.pages[1].join(`
`);me({data:_e,additionalKeyValues:$,objectId:A.objectNumber}),K("endobj")},rt=function(){for(var A in Nn)Nn.hasOwnProperty(A)&&ot(Nn[A])},gt=function(A,$){var _e,Le=[],Ve=1/($-1);for(_e=0;_e<1;_e+=Ve)Le.push(_e);if(Le.push(1),A[0].offset!=0){var ct={offset:0,color:A[0].color};A.unshift(ct)}if(A[A.length-1].offset!=1){var Et={offset:1,color:A[A.length-1].color};A.push(Et)}for(var Ht="",an=0,En=0;En<Le.length;En++){for(_e=Le[En];_e>A[an+1].offset;)an++;var cn=A[an].offset,Tn=(_e-cn)/(A[an+1].offset-cn),wr=A[an].color,gr=A[an+1].color;Ht+=ae(Math.round((1-Tn)*wr[0]+Tn*gr[0]).toString(16))+ae(Math.round((1-Tn)*wr[1]+Tn*gr[1]).toString(16))+ae(Math.round((1-Tn)*wr[2]+Tn*gr[2]).toString(16))}return Ht.trim()},at=function(A,$){$||($=21);var _e=vn(),Le=gt(A.colors,$),Ve=[];Ve.push({key:"FunctionType",value:"0"}),Ve.push({key:"Domain",value:"[0.0 1.0]"}),Ve.push({key:"Size",value:"["+$+"]"}),Ve.push({key:"BitsPerSample",value:"8"}),Ve.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ve.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),me({data:Le,additionalKeyValues:Ve,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:_e}),K("endobj"),A.objectNumber=vn(),K("<< /ShadingType "+A.type),K("/ColorSpace /DeviceRGB");var ct="/Coords ["+N(parseFloat(A.coords[0]))+" "+N(parseFloat(A.coords[1]))+" ";A.type===2?ct+=N(parseFloat(A.coords[2]))+" "+N(parseFloat(A.coords[3])):ct+=N(parseFloat(A.coords[2]))+" "+N(parseFloat(A.coords[3]))+" "+N(parseFloat(A.coords[4]))+" "+N(parseFloat(A.coords[5])),K(ct+="]"),A.matrix&&K("/Matrix ["+A.matrix.toString()+"]"),K("/Function "+_e+" 0 R"),K("/Extend [true true]"),K(">>"),K("endobj")},Wt=function(A,$){var _e=$n(),Le=vn();$.push({resourcesOid:_e,objectOid:Le}),A.objectNumber=Le;var Ve=[];Ve.push({key:"Type",value:"/Pattern"}),Ve.push({key:"PatternType",value:"1"}),Ve.push({key:"PaintType",value:"1"}),Ve.push({key:"TilingType",value:"1"}),Ve.push({key:"BBox",value:"["+A.boundingBox.map(N).join(" ")+"]"}),Ve.push({key:"XStep",value:N(A.xStep)}),Ve.push({key:"YStep",value:N(A.yStep)}),Ve.push({key:"Resources",value:_e+" 0 R"}),A.matrix&&Ve.push({key:"Matrix",value:"["+A.matrix.toString()+"]"}),me({data:A.stream,additionalKeyValues:Ve,objectId:A.objectNumber}),K("endobj")},It=function(A){var $;for($ in st)st.hasOwnProperty($)&&(st[$]instanceof oh?at(st[$]):st[$]instanceof Hf&&Wt(st[$],A))},Ot=function(A){for(var $ in A.objectNumber=vn(),K("<<"),A)switch($){case"opacity":K("/ca "+D(A[$]));break;case"stroke-opacity":K("/CA "+D(A[$]))}K(">>"),K("endobj")},$t=function(){var A;for(A in Fe)Fe.hasOwnProperty(A)&&Ot(Fe[A])},Qt=function(){for(var A in K("/XObject <<"),Nn)Nn.hasOwnProperty(A)&&Nn[A].objectNumber>=0&&K("/"+A+" "+Nn[A].objectNumber+" 0 R");Vt.publish("putXobjectDict"),K(">>")},sn=function(){Hi.oid=vn(),K("<<"),K("/Filter /Standard"),K("/V "+Hi.v),K("/R "+Hi.r),K("/U <"+Hi.toHexString(Hi.U)+">"),K("/O <"+Hi.toHexString(Hi.O)+">"),K("/P "+Hi.P),K(">>"),K("endobj")},zt=function(){for(var A in K("/Font <<"),bt)bt.hasOwnProperty(A)&&(h===!1||h===!0&&f.hasOwnProperty(A))&&K("/"+A+" "+bt[A].objectNumber+" 0 R");K(">>")},on=function(){if(Object.keys(st).length>0){for(var A in K("/Shading <<"),st)st.hasOwnProperty(A)&&st[A]instanceof oh&&st[A].objectNumber>=0&&K("/"+A+" "+st[A].objectNumber+" 0 R");Vt.publish("putShadingPatternDict"),K(">>")}},jt=function(A){if(Object.keys(st).length>0){for(var $ in K("/Pattern <<"),st)st.hasOwnProperty($)&&st[$]instanceof d.TilingPattern&&st[$].objectNumber>=0&&st[$].objectNumber<A&&K("/"+$+" "+st[$].objectNumber+" 0 R");Vt.publish("putTilingPatternDict"),K(">>")}},ln=function(){if(Object.keys(Fe).length>0){var A;for(A in K("/ExtGState <<"),Fe)Fe.hasOwnProperty(A)&&Fe[A].objectNumber>=0&&K("/"+A+" "+Fe[A].objectNumber+" 0 R");Vt.publish("putGStateDict"),K(">>")}},fn=function(A){Wn(A.resourcesOid,!0),K("<<"),K("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),zt(),on(),jt(A.objectOid),ln(),Qt(),K(">>"),K("endobj")},xn=function(){var A=[];qe(),$t(),rt(),It(A),Vt.publish("putResources"),A.forEach(fn),fn({resourcesOid:oi,objectOid:Number.MAX_SAFE_INTEGER}),Vt.publish("postPutResources")},tr=function(){Vt.publish("putAdditionalObjects");for(var A=0;A<$e.length;A++){var $=$e[A];Wn($.objId,!0),K($.content),K("endobj")}Vt.publish("postPutAdditionalObjects")},Qn=function(A){xe[A.fontName]=xe[A.fontName]||{},xe[A.fontName][A.fontStyle]=A.id},cr=function(A,$,_e,Le,Ve){var ct={id:"F"+(Object.keys(bt).length+1).toString(10),postScriptName:A,fontName:$,fontStyle:_e,encoding:Le,isStandardFont:Ve||!1,metadata:{}};return Vt.publish("addFont",{font:ct,instance:this}),bt[ct.id]=ct,Qn(ct),ct.id},jr=function(A){for(var $=0,_e=Ne.length;$<_e;$++){var Le=cr.call(this,A[$][0],A[$][1],A[$][2],Ne[$][3],!0);h===!1&&(f[Le]=!0);var Ve=A[$][0].split("-");Qn({id:Le,fontName:Ve[0],fontStyle:Ve[1]||""})}Vt.publish("addFonts",{fonts:bt,dictionary:xe})},dn=function(A){return A.foo=function(){try{return A.apply(this,arguments)}catch(Le){var $=Le.stack||"";~$.indexOf(" at ")&&($=$.split(" at ")[1]);var _e="Error in function "+$.split(`
`)[0].split("<")[0]+": "+Le.message;if(!Mn.console)throw new Error(_e);Mn.console.error(_e,Le),Mn.alert&&alert(_e)}},A.foo.bar=A,A.foo},_r=function(A,$){var _e,Le,Ve,ct,Et,Ht,an,En,cn;if(Ve=($=$||{}).sourceEncoding||"Unicode",Et=$.outputEncoding,($.autoencode||Et)&&bt[it].metadata&&bt[it].metadata[Ve]&&bt[it].metadata[Ve].encoding&&(ct=bt[it].metadata[Ve].encoding,!Et&&bt[it].encoding&&(Et=bt[it].encoding),!Et&&ct.codePages&&(Et=ct.codePages[0]),typeof Et=="string"&&(Et=ct[Et]),Et)){for(an=!1,Ht=[],_e=0,Le=A.length;_e<Le;_e++)(En=Et[A.charCodeAt(_e)])?Ht.push(String.fromCharCode(En)):Ht.push(A[_e]),Ht[_e].charCodeAt(0)>>8&&(an=!0);A=Ht.join("")}for(_e=A.length;an===void 0&&_e!==0;)A.charCodeAt(_e-1)>>8&&(an=!0),_e--;if(!an)return A;for(Ht=$.noBOM?[]:[254,255],_e=0,Le=A.length;_e<Le;_e++){if((cn=(En=A.charCodeAt(_e))>>8)>>8)throw new Error("Character at position "+_e+" of string '"+A+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Ht.push(cn),Ht.push(En-(cn<<8))}return String.fromCharCode.apply(void 0,Ht)},Rn=d.__private__.pdfEscape=d.pdfEscape=function(A,$){return _r(A,$).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},jn=d.__private__.beginPage=function(A){ke[++pt]=[],kt[pt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(A[0]),topRightY:Number(A[1])}},zi(pt),pe(ke[X])},Tr=function(A,$){var _e,Le,Ve;switch(n=$||n,typeof A=="string"&&(_e=g(A.toLowerCase()),Array.isArray(_e)&&(Le=_e[0],Ve=_e[1])),Array.isArray(A)&&(Le=A[0]*Te,Ve=A[1]*Te),isNaN(Le)&&(Le=i[0],Ve=i[1]),(Le>14400||Ve>14400)&&(Dr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Le=Math.min(14400,Le),Ve=Math.min(14400,Ve)),i=[Le,Ve],n.substr(0,1)){case"l":Ve>Le&&(i=[Ve,Le]);break;case"p":Le>Ve&&(i=[Ve,Le])}jn(i),wd(vu),K(ls),ya!==0&&K(ya+" J"),us!==0&&K(us+" j"),Vt.publish("addPage",{pageNumber:pt})},Go=function(A){A>0&&A<=pt&&(ke.splice(A,1),kt.splice(A,1),pt--,X>pt&&(X=pt),this.setPage(X))},zi=function(A){A>0&&A<=pt&&(X=A)},So=d.__private__.getNumberOfPages=d.getNumberOfPages=function(){return ke.length-1},pu=function(A,$,_e){var Le,Ve=void 0;return _e=_e||{},A=A!==void 0?A:bt[it].fontName,$=$!==void 0?$:bt[it].fontStyle,Le=A.toLowerCase(),xe[Le]!==void 0&&xe[Le][$]!==void 0?Ve=xe[Le][$]:xe[A]!==void 0&&xe[A][$]!==void 0?Ve=xe[A][$]:_e.disableWarning===!1&&Dr.warn("Unable to look up font label for font '"+A+"', '"+$+"'. Refer to getFontList() for available fonts."),Ve||_e.noFallback||(Ve=xe.times[$])==null&&(Ve=xe.times.normal),Ve},gc=d.__private__.putInfo=function(){var A=vn(),$=function(Le){return Le};for(var _e in c!==null&&($=Hi.encryptor(A,0)),K("<<"),K("/Producer ("+Rn($("jsPDF "+wn.version))+")"),lt)lt.hasOwnProperty(_e)&&lt[_e]&&K("/"+_e.substr(0,1).toUpperCase()+_e.substr(1)+" ("+Rn($(lt[_e]))+")");K("/CreationDate ("+Rn($(ee))+")"),K(">>"),K("endobj")},Za=d.__private__.putCatalog=function(A){var $=(A=A||{}).rootDictionaryObjId||Wr;switch(vn(),K("<<"),K("/Type /Catalog"),K("/Pages "+$+" 0 R"),ft||(ft="fullwidth"),ft){case"fullwidth":K("/OpenAction [3 0 R /FitH null]");break;case"fullheight":K("/OpenAction [3 0 R /FitV null]");break;case"fullpage":K("/OpenAction [3 0 R /Fit]");break;case"original":K("/OpenAction [3 0 R /XYZ null null 1]");break;default:var _e=""+ft;_e.substr(_e.length-1)==="%"&&(ft=parseInt(ft)/100),typeof ft=="number"&&K("/OpenAction [3 0 R /XYZ null null "+D(ft)+"]")}switch(et||(et="continuous"),et){case"continuous":K("/PageLayout /OneColumn");break;case"single":K("/PageLayout /SinglePage");break;case"two":case"twoleft":K("/PageLayout /TwoColumnLeft");break;case"tworight":K("/PageLayout /TwoColumnRight")}Q&&K("/PageMode /"+Q),Vt.publish("putCatalog"),K(">>"),K("endobj")},vc=d.__private__.putTrailer=function(){K("trailer"),K("<<"),K("/Size "+(fe+1)),K("/Root "+fe+" 0 R"),K("/Info "+(fe-1)+" 0 R"),c!==null&&K("/Encrypt "+Hi.oid+" 0 R"),K("/ID [ <"+se+"> <"+se+"> ]"),K(">>")},km=d.__private__.putHeader=function(){K("%PDF-"+v),K("%")},Im=d.__private__.putXRef=function(){var A="0000000000";K("xref"),K("0 "+(fe+1)),K("0000000000 65535 f ");for(var $=1;$<=fe;$++)typeof Se[$]=="function"?K((A+Se[$]()).slice(-10)+" 00000 n "):Se[$]!==void 0?K((A+Se[$]).slice(-10)+" 00000 n "):K("0000000000 00000 n ")},Vo=d.__private__.buildDocument=function(){ze(),pe(Ee),Vt.publish("buildDocument"),km(),we(),tr(),xn(),c!==null&&sn(),gc(),Za();var A=Ce;return Im(),vc(),K("startxref"),K(""+A),K("%%EOF"),pe(ke[X]),Ee.join(`
`)},Ol=d.__private__.getBlob=function(A){return new Blob([Ze(A)],{type:"application/pdf"})},pa=d.output=d.__private__.output=dn(function(A,$){switch(typeof($=$||{})=="string"?$={filename:$}:$.filename=$.filename||"generated.pdf",A){case void 0:return Vo();case"save":d.save($.filename);break;case"arraybuffer":return Ze(Vo());case"blob":return Ol(Vo());case"bloburi":case"bloburl":if(Mn.URL!==void 0&&typeof Mn.URL.createObjectURL=="function")return Mn.URL&&Mn.URL.createObjectURL(Ol(Vo()))||void 0;Dr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var _e="",Le=Vo();try{_e=Jb(Le)}catch{_e=Jb(unescape(encodeURIComponent(Le)))}return"data:application/pdf;filename="+$.filename+";base64,"+_e;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Mn)==="[object Window]"){var Ve="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ct=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';$.pdfObjectUrl&&(Ve=$.pdfObjectUrl,ct="");var Et='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ve+'"'+ct+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify($)+");<\/script></body></html>",Ht=Mn.open();return Ht!==null&&Ht.document.write(Et),Ht}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Mn)==="[object Window]"){var an='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+($.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+$.filename+'" width="500px" height="400px" /></body></html>',En=Mn.open();if(En!==null){En.document.write(an);var cn=this;En.document.documentElement.querySelector("#pdfViewer").onload=function(){En.document.title=$.filename,En.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(cn.output("bloburl"))}}return En}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Mn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Tn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",$)+'"></iframe></body></html>',wr=Mn.open();if(wr!==null&&(wr.document.write(Tn),wr.document.title=$.filename),wr||typeof safari>"u")return wr;break;case"datauri":case"dataurl":return Mn.document.location.href=this.output("datauristring",$);default:return null}}),yd=function(A){return Array.isArray(yn)===!0&&yn.indexOf(A)>-1};switch(r){case"pt":Te=1;break;case"mm":Te=72/25.4;break;case"cm":Te=72/2.54;break;case"in":Te=72;break;case"px":Te=yd("px_scaling")==1?.75:96/72;break;case"pc":case"em":Te=12;break;case"ex":Te=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);Te=r}var Hi=null;re(),W();var or=function(A){return c!==null?Hi.encryptor(A,0):function($){return $}},Zh=d.__private__.getPageInfo=d.getPageInfo=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:kt[A].objId,pageNumber:A,pageContext:kt[A]}},bn=d.__private__.getPageInfoByObjId=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var $ in kt)if(kt[$].objId===A)break;return Zh($)},xd=d.__private__.getCurrentPageInfo=d.getCurrentPageInfo=function(){return{objId:kt[X].objId,pageNumber:X,pageContext:kt[X]}};d.addPage=function(){return Tr.apply(this,arguments),this},d.setPage=function(){return zi.apply(this,arguments),pe.call(this,ke[X]),this},d.insertPage=function(A){return this.addPage(),this.movePage(X,A),this},d.movePage=function(A,$){var _e,Le;if(A>$){_e=ke[A],Le=kt[A];for(var Ve=A;Ve>$;Ve--)ke[Ve]=ke[Ve-1],kt[Ve]=kt[Ve-1];ke[$]=_e,kt[$]=Le,this.setPage($)}else if(A<$){_e=ke[A],Le=kt[A];for(var ct=A;ct<$;ct++)ke[ct]=ke[ct+1],kt[ct]=kt[ct+1];ke[$]=_e,kt[$]=Le,this.setPage($)}return this},d.deletePage=function(){return Go.apply(this,arguments),this},d.__private__.text=d.text=function(A,$,_e,Le,Ve){var ct,Et,Ht,an,En,cn,Tn,wr,gr,br=(Le=Le||{}).scope||this;if(typeof A=="number"&&typeof $=="number"&&(typeof _e=="string"||Array.isArray(_e))){var ti=_e;_e=$,$=A,A=ti}if(arguments[3]instanceof Ft?(R("The transform parameter of text() with a Matrix value"),gr=Ve):(Ht=arguments[4],an=arguments[5],Pr(Tn=arguments[3])==="object"&&Tn!==null||(typeof Ht=="string"&&(an=Ht,Ht=null),typeof Tn=="string"&&(an=Tn,Tn=null),typeof Tn=="number"&&(Ht=Tn,Tn=null),Le={flags:Tn,angle:Ht,align:an})),isNaN($)||isNaN(_e)||A==null)throw new Error("Invalid arguments passed to jsPDF.text");if(A.length===0)return br;var Ri="",uo=!1,Es=typeof Le.lineHeightFactor=="number"?Le.lineHeightFactor:ga,ni=br.internal.scaleFactor;function cs(nr){return nr=nr.split("	").join(Array(Le.TabLen||9).join(" ")),Rn(nr,Tn)}function Mr(nr){for(var hr,zr=nr.concat(),ii=[],Ma=zr.length;Ma--;)typeof(hr=zr.shift())=="string"?ii.push(hr):Array.isArray(nr)&&(hr.length===1||hr[1]===void 0&&hr[2]===void 0)?ii.push(hr[0]):ii.push([hr[0],hr[1],hr[2]]);return ii}function Qa(nr,hr){var zr;if(typeof nr=="string")zr=hr(nr)[0];else if(Array.isArray(nr)){for(var ii,Ma,Lc=nr.concat(),Tu=[],Qh=Lc.length;Qh--;)typeof(ii=Lc.shift())=="string"?Tu.push(hr(ii)[0]):Array.isArray(ii)&&typeof ii[0]=="string"&&(Ma=hr(ii[0],ii[1],ii[2]),Tu.push([Ma[0],Ma[1],Ma[2]]));zr=Tu}return zr}var hs=!1,Mc=!0;if(typeof A=="string")hs=!0;else if(Array.isArray(A)){var Ec=A.concat();Et=[];for(var Hl,ki=Ec.length;ki--;)(typeof(Hl=Ec.shift())!="string"||Array.isArray(Hl)&&typeof Hl[0]!="string")&&(Mc=!1);hs=Mc}if(hs===!1)throw new Error('Type of text must be string or Array. "'+A+'" is not recognized.');typeof A=="string"&&(A=A.match(/[\r?\n]/)?A.split(/\r\n|\r|\n/g):[A]);var _u=Ke/br.internal.scaleFactor,wa=_u*(Es-1);switch(Le.baseline){case"bottom":_e-=wa;break;case"top":_e+=_u-wa;break;case"hanging":_e+=_u-2*wa;break;case"middle":_e+=_u/2-wa}if((cn=Le.maxWidth||0)>0&&(typeof A=="string"?A=br.splitTextToSize(A,cn):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(nr,hr){return nr.concat(br.splitTextToSize(hr,cn))},[]))),ct={text:A,x:$,y:_e,options:Le,mutex:{pdfEscape:Rn,activeFontKey:it,fonts:bt,activeFontSize:Ke}},Vt.publish("preProcessText",ct),A=ct.text,Ht=(Le=ct.options).angle,!(gr instanceof Ft)&&Ht&&typeof Ht=="number"){Ht*=Math.PI/180,Le.rotationDirection===0&&(Ht=-Ht),_===S.ADVANCED&&(Ht=-Ht);var Xo=Math.cos(Ht),bu=Math.sin(Ht);gr=new Ft(Xo,bu,-bu,Xo,0,0)}else Ht&&Ht instanceof Ft&&(gr=Ht);_!==S.ADVANCED||gr||(gr=Ir),(En=Le.charSpace||Ul)!==void 0&&(Ri+=N(B(En))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(wr=Le.horizontalScale)!==void 0&&(Ri+=N(100*wr)+` Tz
`),Le.lang;var Gi=-1,Ac=Le.renderingMode!==void 0?Le.renderingMode:Le.stroke,Tc=br.internal.getCurrentPageInfo().pageContext;switch(Ac){case 0:case!1:case"fill":Gi=0;break;case 1:case!0:case"stroke":Gi=1;break;case 2:case"fillThenStroke":Gi=2;break;case 3:case"invisible":Gi=3;break;case 4:case"fillAndAddForClipping":Gi=4;break;case 5:case"strokeAndAddPathForClipping":Gi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Gi=6;break;case 7:case"addToPathForClipping":Gi=7}var Jh=Tc.usedRenderingMode!==void 0?Tc.usedRenderingMode:-1;Gi!==-1?Ri+=Gi+` Tr
`:Jh!==-1&&(Ri+=`0 Tr
`),Gi!==-1&&(Tc.usedRenderingMode=Gi),an=Le.align||"left";var Zi,Mu=Ke*Es,Gl=br.internal.pageSize.getWidth(),As=bt[it];En=Le.charSpace||Ul,cn=Le.maxWidth||0,Tn=Object.assign({autoencode:!0,noBOM:!0},Le.flags);var Mo=[],Eo=function(nr){return br.getStringUnitWidth(nr,{font:As,charSpace:En,fontSize:Ke,doKerning:!1})*Ke/ni};if(Object.prototype.toString.call(A)==="[object Array]"){var Xr;Et=Mr(A),an!=="left"&&(Zi=Et.map(Eo));var $i,co=0;if(an==="right"){$-=Zi[0],A=[],ki=Et.length;for(var Sa=0;Sa<ki;Sa++)Sa===0?($i=va($),Xr=Pi(_e)):($i=B(co-Zi[Sa]),Xr=-Mu),A.push([Et[Sa],$i,Xr]),co=Zi[Sa]}else if(an==="center"){$-=Zi[0]/2,A=[],ki=Et.length;for(var qo=0;qo<ki;qo++)qo===0?($i=va($),Xr=Pi(_e)):($i=B((co-Zi[qo])/2),Xr=-Mu),A.push([Et[qo],$i,Xr]),co=Zi[qo]}else if(an==="left"){A=[],ki=Et.length;for(var Er=0;Er<ki;Er++)A.push(Et[Er])}else if(an==="justify"&&As.encoding==="Identity-H"){A=[],ki=Et.length,cn=cn!==0?cn:Gl;for(var Ao=0,qr=0;qr<ki;qr++)if(Xr=qr===0?Pi(_e):-Mu,$i=qr===0?va($):Ao,qr<ki-1){var Eu=B((cn-Zi[qr])/(Et[qr].split(" ").length-1)),Vi=Et[qr].split(" ");A.push([Vi[0]+" ",$i,Xr]),Ao=0;for(var Yr=1;Yr<Vi.length;Yr++){var Yo=(Eo(Vi[Yr-1]+" "+Vi[Yr])-Eo(Vi[Yr]))*ni+Eu;Yr==Vi.length-1?A.push([Vi[Yr],Yo,0]):A.push([Vi[Yr]+" ",Yo,0]),Ao-=Yo}}else A.push([Et[qr],$i,Xr]);A.push(["",Ao,0])}else{if(an!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(A=[],ki=Et.length,cn=cn!==0?cn:Gl,qr=0;qr<ki;qr++)Xr=qr===0?Pi(_e):-Mu,$i=qr===0?va($):0,qr<ki-1?Mo.push(N(B((cn-Zi[qr])/(Et[qr].split(" ").length-1)))):Mo.push(0),A.push([Et[qr],$i,Xr])}}var Nr=typeof Le.R2L=="boolean"?Le.R2L:ue;Nr===!0&&(A=Qa(A,function(nr,hr,zr){return[nr.split("").reverse().join(""),hr,zr]})),ct={text:A,x:$,y:_e,options:Le,mutex:{pdfEscape:Rn,activeFontKey:it,fonts:bt,activeFontSize:Ke}},Vt.publish("postProcessText",ct),A=ct.text,uo=ct.mutex.isHex||!1;var Si=bt[it].encoding;Si!=="WinAnsiEncoding"&&Si!=="StandardEncoding"||(A=Qa(A,function(nr,hr,zr){return[cs(nr),hr,zr]})),Et=Mr(A),A=[];for(var Br,_a,To,Zo=0,Cc=1,ri=Array.isArray(Et[0])?Cc:Zo,ba="",Au=function(nr,hr,zr){var ii="";return zr instanceof Ft?(zr=typeof Le.angle=="number"?Vr(zr,new Ft(1,0,0,1,nr,hr)):Vr(new Ft(1,0,0,1,nr,hr),zr),_===S.ADVANCED&&(zr=Vr(new Ft(1,0,0,-1,0,0),zr)),ii=zr.join(" ")+` Tm
`):ii=N(nr)+" "+N(hr)+` Td
`,ii},Os=0;Os<Et.length;Os++){switch(ba="",ri){case Cc:To=(uo?"<":"(")+Et[Os][0]+(uo?">":")"),Br=parseFloat(Et[Os][1]),_a=parseFloat(Et[Os][2]);break;case Zo:To=(uo?"<":"(")+Et[Os]+(uo?">":")"),Br=va($),_a=Pi(_e)}Mo!==void 0&&Mo[Os]!==void 0&&(ba=Mo[Os]+` Tw
`),Os===0?A.push(ba+Au(Br,_a,gr)+To):ri===Zo?A.push(ba+To):ri===Cc&&A.push(ba+Au(Br,_a,gr)+To)}A=ri===Zo?A.join(` Tj
T* `):A.join(` Tj
`),A+=` Tj
`;var _i=`BT
/`;return _i+=it+" "+Ke+` Tf
`,_i+=N(Ke*Es)+` TL
`,_i+=$a+`
`,_i+=Ri,_i+=A,K(_i+="ET"),f[it]=!0,br};var Nm=d.__private__.clip=d.clip=function(A){return K(A==="evenodd"?"W*":"W"),this};d.clipEvenOdd=function(){return Nm("evenodd")},d.__private__.discardPath=d.discardPath=function(){return K("n"),this};var ma=d.__private__.isValidStyle=function(A){var $=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(A)!==-1&&($=!0),$};d.__private__.setDefaultPathOperation=d.setDefaultPathOperation=function(A){return ma(A)&&(u=A),this};var ai=d.__private__.getStyle=d.getStyle=function(A){var $=u;switch(A){case"D":case"S":$="S";break;case"F":$="f";break;case"FD":case"DF":$="B";break;case"f":case"f*":case"B":case"B*":$=A}return $},yc=d.close=function(){return K("h"),this};d.stroke=function(){return K("S"),this},d.fill=function(A){return xc("f",A),this},d.fillEvenOdd=function(A){return xc("f*",A),this},d.fillStroke=function(A){return xc("B",A),this},d.fillStrokeEvenOdd=function(A){return xc("B*",A),this};var xc=function(A,$){Pr($)==="object"?wc($,A):K(A)},mu=function(A){A===null||_===S.ADVANCED&&A===void 0||(A=ai(A),K(A))};function Fm(A,$,_e,Le,Ve){var ct=new Hf($||this.boundingBox,_e||this.xStep,Le||this.yStep,this.gState,Ve||this.matrix);ct.stream=this.stream;var Et=A+"$$"+this.cloneIndex+++"$$";return Zn(Et,ct),ct}var wc=function(A,$){var _e=Ae[A.key],Le=st[_e];if(Le instanceof oh)K("q"),K(_o($)),Le.gState&&d.setGState(Le.gState),K(A.matrix.toString()+" cm"),K("/"+_e+" sh"),K("Q");else if(Le instanceof Hf){var Ve=new Ft(1,0,0,-1,0,Ja());A.matrix&&(Ve=Ve.multiply(A.matrix||Ir),_e=Fm.call(Le,A.key,A.boundingBox,A.xStep,A.yStep,Ve).id),K("q"),K("/Pattern cs"),K("/"+_e+" scn"),Le.gState&&d.setGState(Le.gState),K($),K("Q")}},_o=function(A){switch(A){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},$h=d.moveTo=function(A,$){return K(N(B(A))+" "+N(H($))+" m"),this},gu=d.lineTo=function(A,$){return K(N(B(A))+" "+N(H($))+" l"),this},Yi=d.curveTo=function(A,$,_e,Le,Ve,ct){return K([N(B(A)),N(H($)),N(B(_e)),N(H(Le)),N(B(Ve)),N(H(ct)),"c"].join(" ")),this};d.__private__.line=d.line=function(A,$,_e,Le,Ve){if(isNaN(A)||isNaN($)||isNaN(_e)||isNaN(Le)||!ma(Ve))throw new Error("Invalid arguments passed to jsPDF.line");return _===S.COMPAT?this.lines([[_e-A,Le-$]],A,$,[1,1],Ve||"S"):this.lines([[_e-A,Le-$]],A,$,[1,1]).stroke()},d.__private__.lines=d.lines=function(A,$,_e,Le,Ve,ct){var Et,Ht,an,En,cn,Tn,wr,gr,br,ti,Ri,uo;if(typeof A=="number"&&(uo=_e,_e=$,$=A,A=uo),Le=Le||[1,1],ct=ct||!1,isNaN($)||isNaN(_e)||!Array.isArray(A)||!Array.isArray(Le)||!ma(Ve)||typeof ct!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for($h($,_e),Et=Le[0],Ht=Le[1],En=A.length,ti=$,Ri=_e,an=0;an<En;an++)(cn=A[an]).length===2?(ti=cn[0]*Et+ti,Ri=cn[1]*Ht+Ri,gu(ti,Ri)):(Tn=cn[0]*Et+ti,wr=cn[1]*Ht+Ri,gr=cn[2]*Et+ti,br=cn[3]*Ht+Ri,ti=cn[4]*Et+ti,Ri=cn[5]*Ht+Ri,Yi(Tn,wr,gr,br,ti,Ri));return ct&&yc(),mu(Ve),this},d.path=function(A){for(var $=0;$<A.length;$++){var _e=A[$],Le=_e.c;switch(_e.op){case"m":$h(Le[0],Le[1]);break;case"l":gu(Le[0],Le[1]);break;case"c":Yi.apply(this,Le);break;case"h":yc()}}return this},d.__private__.rect=d.rect=function(A,$,_e,Le,Ve){if(isNaN(A)||isNaN($)||isNaN(_e)||isNaN(Le)||!ma(Ve))throw new Error("Invalid arguments passed to jsPDF.rect");return _===S.COMPAT&&(Le=-Le),K([N(B(A)),N(H($)),N(B(_e)),N(B(Le)),"re"].join(" ")),mu(Ve),this},d.__private__.triangle=d.triangle=function(A,$,_e,Le,Ve,ct,Et){if(isNaN(A)||isNaN($)||isNaN(_e)||isNaN(Le)||isNaN(Ve)||isNaN(ct)||!ma(Et))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[_e-A,Le-$],[Ve-_e,ct-Le],[A-Ve,$-ct]],A,$,[1,1],Et,!0),this},d.__private__.roundedRect=d.roundedRect=function(A,$,_e,Le,Ve,ct,Et){if(isNaN(A)||isNaN($)||isNaN(_e)||isNaN(Le)||isNaN(Ve)||isNaN(ct)||!ma(Et))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Ht=4/3*(Math.SQRT2-1);return Ve=Math.min(Ve,.5*_e),ct=Math.min(ct,.5*Le),this.lines([[_e-2*Ve,0],[Ve*Ht,0,Ve,ct-ct*Ht,Ve,ct],[0,Le-2*ct],[0,ct*Ht,-Ve*Ht,ct,-Ve,ct],[2*Ve-_e,0],[-Ve*Ht,0,-Ve,-ct*Ht,-Ve,-ct],[0,2*ct-Le],[0,-ct*Ht,Ve*Ht,-ct,Ve,-ct]],A+Ve,$,[1,1],Et,!0),this},d.__private__.ellipse=d.ellipse=function(A,$,_e,Le,Ve){if(isNaN(A)||isNaN($)||isNaN(_e)||isNaN(Le)||!ma(Ve))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ct=4/3*(Math.SQRT2-1)*_e,Et=4/3*(Math.SQRT2-1)*Le;return $h(A+_e,$),Yi(A+_e,$-Et,A+ct,$-Le,A,$-Le),Yi(A-ct,$-Le,A-_e,$-Et,A-_e,$),Yi(A-_e,$+Et,A-ct,$+Le,A,$+Le),Yi(A+ct,$+Le,A+_e,$+Et,A+_e,$),mu(Ve),this},d.__private__.circle=d.circle=function(A,$,_e,Le){if(isNaN(A)||isNaN($)||isNaN(_e)||!ma(Le))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(A,$,_e,_e,Le)},d.setFont=function(A,$,_e){return _e&&($=k($,_e)),it=pu(A,$,{disableWarning:!1}),this};var Wo=d.__private__.getFont=d.getFont=function(){return bt[pu.apply(d,arguments)]};d.__private__.getFontList=d.getFontList=function(){var A,$,_e={};for(A in xe)if(xe.hasOwnProperty(A))for($ in _e[A]=[],xe[A])xe[A].hasOwnProperty($)&&_e[A].push($);return _e},d.addFont=function(A,$,_e,Le,Ve){var ct=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ct.indexOf(arguments[3])!==-1?Ve=arguments[3]:arguments[3]&&ct.indexOf(arguments[3])==-1&&(_e=k(_e,Le)),Ve=Ve||"Identity-H",cr.call(this,A,$,_e,Ve)};var ga,vu=t.lineWidth||.200025,yu=d.__private__.getLineWidth=d.getLineWidth=function(){return vu},wd=d.__private__.setLineWidth=d.setLineWidth=function(A){return vu=A,K(N(B(A))+" w"),this};d.__private__.setLineDash=wn.API.setLineDash=wn.API.setLineDashPattern=function(A,$){if(A=A||[],$=$||0,isNaN($)||!Array.isArray(A))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return A=A.map(function(_e){return N(B(_e))}).join(" "),$=N(B($)),K("["+A+"] "+$+" d"),this};var oo=d.__private__.getLineHeight=d.getLineHeight=function(){return Ke*ga};d.__private__.getLineHeight=d.getLineHeight=function(){return Ke*ga};var Sd=d.__private__.setLineHeightFactor=d.setLineHeightFactor=function(A){return typeof(A=A||1.15)=="number"&&(ga=A),this},xu=d.__private__.getLineHeightFactor=d.getLineHeightFactor=function(){return ga};Sd(t.lineHeight);var va=d.__private__.getHorizontalCoordinate=function(A){return B(A)},Pi=d.__private__.getVerticalCoordinate=function(A){return _===S.ADVANCED?A:kt[X].mediaBox.topRightY-kt[X].mediaBox.bottomLeftY-B(A)},Sc=d.__private__.getHorizontalCoordinateString=d.getHorizontalCoordinateString=function(A){return N(va(A))},jo=d.__private__.getVerticalCoordinateString=d.getVerticalCoordinateString=function(A){return N(Pi(A))},ls=t.strokeColor||"0 G";d.__private__.getStrokeColor=d.getDrawColor=function(){return q(ls)},d.__private__.setStrokeColor=d.setDrawColor=function(A,$,_e,Le){return ls=U({ch1:A,ch2:$,ch3:_e,ch4:Le,pdfColorType:"draw",precision:2}),K(ls),this};var wu=t.fillColor||"0 g";d.__private__.getFillColor=d.getFillColor=function(){return q(wu)},d.__private__.setFillColor=d.setFillColor=function(A,$,_e,Le){return wu=U({ch1:A,ch2:$,ch3:_e,ch4:Le,pdfColorType:"fill",precision:2}),K(wu),this};var $a=t.textColor||"0 g",_d=d.__private__.getTextColor=d.getTextColor=function(){return q($a)};d.__private__.setTextColor=d.setTextColor=function(A,$,_e,Le){return $a=U({ch1:A,ch2:$,ch3:_e,ch4:Le,pdfColorType:"text",precision:3}),this};var Ul=t.charSpace,Kh=d.__private__.getCharSpace=d.getCharSpace=function(){return parseFloat(Ul||0)};d.__private__.setCharSpace=d.setCharSpace=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ul=A,this};var ya=0;d.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},d.__private__.setLineCap=d.setLineCap=function(A){var $=d.CapJoinStyles[A];if($===void 0)throw new Error("Line cap style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ya=$,K($+" J"),this};var us=0;d.__private__.setLineJoin=d.setLineJoin=function(A){var $=d.CapJoinStyles[A];if($===void 0)throw new Error("Line join style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return us=$,K($+" j"),this},d.__private__.setLineMiterLimit=d.__private__.setMiterLimit=d.setLineMiterLimit=d.setMiterLimit=function(A){if(A=A||0,isNaN(A))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return K(N(B(A))+" M"),this},d.GState=sd,d.setGState=function(A){(A=typeof A=="string"?Fe[Ge[A]]:ao(null,A)).equals(yt)||(K("/"+A.id+" gs"),yt=A)};var ao=function(A,$){if(!A||!Ge[A]){var _e=!1;for(var Le in Fe)if(Fe.hasOwnProperty(Le)&&Fe[Le].equals($)){_e=!0;break}if(_e)$=Fe[Le];else{var Ve="GS"+(Object.keys(Fe).length+1).toString(10);Fe[Ve]=$,$.id=Ve}return A&&(Ge[A]=$.id),Vt.publish("addGState",$),$}};d.addGState=function(A,$){return ao(A,$),this},d.saveGraphicsState=function(){return K("q"),Ye.push({key:it,size:Ke,color:$a}),this},d.restoreGraphicsState=function(){K("Q");var A=Ye.pop();return it=A.key,Ke=A.size,$a=A.color,yt=null,this},d.setCurrentTransformationMatrix=function(A){return K(A.toString()+" cm"),this},d.comment=function(A){return K("#"+A),this};var lo=function(A,$){var _e=A||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return _e},set:function(ct){isNaN(ct)||(_e=parseFloat(ct))}});var Le=$||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Le},set:function(ct){isNaN(ct)||(Le=parseFloat(ct))}});var Ve="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ve},set:function(ct){Ve=ct.toString()}}),this},Su=function(A,$,_e,Le){lo.call(this,A,$),this.type="rect";var Ve=_e||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ve},set:function(Et){isNaN(Et)||(Ve=parseFloat(Et))}});var ct=Le||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ct},set:function(Et){isNaN(Et)||(ct=parseFloat(Et))}}),this},_c=function(){this.page=pt,this.currentPage=X,this.pages=ke.slice(0),this.pagesContext=kt.slice(0),this.x=Nt,this.y=At,this.matrix=Ct,this.width=Bl(X),this.height=Ja(X),this.outputDestination=De,this.id="",this.objectNumber=-1};_c.prototype.restore=function(){pt=this.page,X=this.currentPage,kt=this.pagesContext,ke=this.pages,Nt=this.x,At=this.y,Ct=this.matrix,zl(X,this.width),bc(X,this.height),De=this.outputDestination};var bo=function(A,$,_e,Le,Ve){kn.push(new _c),pt=X=0,ke=[],Nt=A,At=$,Ct=Ve,jn([_e,Le])},xa=function(A){if(gn[A])kn.pop().restore();else{var $=new _c,_e="Xo"+(Object.keys(Nn).length+1).toString(10);$.id=_e,gn[A]=_e,Nn[_e]=$,Vt.publish("addFormObject",$),kn.pop().restore()}};for(var Ka in d.beginFormObject=function(A,$,_e,Le,Ve){return bo(A,$,_e,Le,Ve),this},d.endFormObject=function(A){return xa(A),this},d.doFormObject=function(A,$){var _e=Nn[gn[A]];return K("q"),K($.toString()+" cm"),K("/"+_e.id+" Do"),K("Q"),this},d.getFormObject=function(A){var $=Nn[gn[A]];return{x:$.x,y:$.y,width:$.width,height:$.height,matrix:$.matrix}},d.save=function(A,$){return A=A||"generated.pdf",($=$||{}).returnPromise=$.returnPromise||!1,$.returnPromise===!1?(Af(Ol(Vo()),A),typeof Af.unload=="function"&&Mn.setTimeout&&setTimeout(Af.unload,911),this):new Promise(function(_e,Le){try{var Ve=Af(Ol(Vo()),A);typeof Af.unload=="function"&&Mn.setTimeout&&setTimeout(Af.unload,911),_e(Ve)}catch(ct){Le(ct.message)}})},wn.API)wn.API.hasOwnProperty(Ka)&&(Ka==="events"&&wn.API.events.length?function(A,$){var _e,Le,Ve;for(Ve=$.length-1;Ve!==-1;Ve--)_e=$[Ve][0],Le=$[Ve][1],A.subscribe.apply(A,[_e].concat(typeof Le=="function"?[Le]:Le))}(Vt,wn.API.events):d[Ka]=wn.API[Ka]);var Bl=d.getPageWidth=function(A){return(kt[A=A||X].mediaBox.topRightX-kt[A].mediaBox.bottomLeftX)/Te},zl=d.setPageWidth=function(A,$){kt[A].mediaBox.topRightX=$*Te+kt[A].mediaBox.bottomLeftX},Ja=d.getPageHeight=function(A){return(kt[A=A||X].mediaBox.topRightY-kt[A].mediaBox.bottomLeftY)/Te},bc=d.setPageHeight=function(A,$){kt[A].mediaBox.topRightY=$*Te+kt[A].mediaBox.bottomLeftY};return d.internal={pdfEscape:Rn,getStyle:ai,getFont:Wo,getFontSize:vt,getCharSpace:Kh,getTextColor:_d,getLineHeight:oo,getLineHeightFactor:xu,getLineWidth:yu,write:tt,getHorizontalCoordinate:va,getVerticalCoordinate:Pi,getCoordinateString:Sc,getVerticalCoordinateString:jo,collections:{},newObject:vn,newAdditionalObject:pn,newObjectDeferred:$n,newObjectDeferredBegin:Wn,getFilters:ne,putStream:me,events:Vt,scaleFactor:Te,pageSize:{getWidth:function(){return Bl(X)},setWidth:function(A){zl(X,A)},getHeight:function(){return Ja(X)},setHeight:function(A){bc(X,A)}},encryptionOptions:c,encryption:Hi,getEncryptor:or,output:pa,getNumberOfPages:So,pages:ke,out:K,f2:D,f3:O,getPageInfo:Zh,getPageInfoByObjId:bn,getCurrentPageInfo:xd,getPDFVersion:x,Point:lo,Rectangle:Su,Matrix:Ft,hasHotfix:yd},Object.defineProperty(d.internal.pageSize,"width",{get:function(){return Bl(X)},set:function(A){zl(X,A)},enumerable:!0,configurable:!0}),Object.defineProperty(d.internal.pageSize,"height",{get:function(){return Ja(X)},set:function(A){bc(X,A)},enumerable:!0,configurable:!0}),jr.call(d,Ne),it="F1",Tr(i,n),Vt.publish("initialized"),d}_p.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},_p.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},_p.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},_p.prototype.processOwnerPassword=function(t,e){return e5(Qb(e).substr(0,5),t)},_p.prototype.encryptor=function(t,e){var n=Qb(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return e5(n,r)}},sd.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||Pr(t)!==Pr(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return r===0},wn.API={events:[]},wn.version="3.0.1";var Ei=wn.API,v3=1,gd=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},pp=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Dn=function(t){return t.toFixed(2)},$c=function(t){return t.toFixed(5)};Ei.__acroform__={};var Ho=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},eC=function(t){return t*v3},Yl=function(t){var e=new OI,n=tn.internal.getHeight(t)||0,r=tn.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Dn(r)),Number(Dn(n))],e},uW=Ei.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|=1<<e},cW=Ei.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&=~(1<<e)},hW=Ei.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Oi=Ei.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return hW(t,e-1)},Ui=Ei.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return uW(t,e-1)},Bi=Ei.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return cW(t,e-1)},fW=Ei.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,i=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(i)||0,l.lowerLeft_Y=r(s+a)||0,l.upperRight_X=n(i+o)||0,l.upperRight_Y=r(s)||0,[Number(Dn(l.lowerLeft_X)),Number(Dn(l.lowerLeft_Y)),Number(Dn(l.upperRight_X)),Number(Dn(l.upperRight_Y))]},dW=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,r=t5(t,n),i=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+i+" "+Dn(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Yl(t);return s.scope=t.scope,s.stream=e.join(`
`),s}},t5=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},i=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");i=t.multiline?i.map(function(O){return O.split(`
`)}):i.map(function(O){return[O]});var s=n,o=tn.internal.getHeight(t)||0;o=o<0?-o:o;var a=tn.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(O,B,V){if(O+1<i.length){var H=B+" "+i[O+1][0];return Q1(H,t,V).width<=a-4}return!1};s++;e:for(;s>0;){e="",s--;var u,c,h=Q1("3",t,s).height,f=t.multiline?o-s:(o-h)/2,d=f+=2,v=0,x=0,w=0;if(s<=0){e=`(...) Tj
`,e+="% Width of Text: "+Q1(e,t,s=12).width+", FieldWidth:"+a+`
`;break}for(var g="",S=0,_=0;_<i.length;_++)if(i.hasOwnProperty(_)){var T=!1;if(i[_].length!==1&&w!==i[_].length-1){if((h+2)*(S+2)+2>o)continue e;g+=i[_][w],T=!0,x=_,_--}else{g=(g+=i[_][w]+" ").substr(g.length-1)==" "?g.substr(0,g.length-1):g;var L=parseInt(_),k=l(L,g,s),N=_>=i.length-1;if(k&&!N){g+=" ",w=0;continue}if(k||N){if(N)x=L;else if(t.multiline&&(h+2)*(S+2)+2>o)continue e}else{if(!t.multiline||(h+2)*(S+2)+2>o)continue e;x=L}}for(var R="",P=v;P<=x;P++){var D=i[P];if(t.multiline){if(P===x){R+=D[w]+" ",w=(w+1)%D.length;continue}if(P===v){R+=D[D.length-1]+" ";continue}}R+=D[0]+" "}switch(R=R.substr(R.length-1)==" "?R.substr(0,R.length-1):R,c=Q1(R,t,s).width,t.textAlign){case"right":u=a-c-2;break;case"center":u=(a-c)/2;break;case"left":default:u=2}e+=Dn(u)+" "+Dn(d)+` Td
`,e+="("+gd(R)+`) Tj
`,e+=-Dn(u)+` 0 Td
`,d=-(s+2),c=0,v=T?x:x+1,S++,g=""}break}return r.text=e,r.fontSize=s,r},Q1=function(t,e,n){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),i=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:i}},pW={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},mW=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},gW=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,i=t[n];e.internal.newObjectDeferredBegin(i.objId,!0),Pr(i)==="object"&&typeof i.putStream=="function"&&i.putStream(),delete t[r]}},vW=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Il.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(pW)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");v3=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new UI,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in r)if(r.hasOwnProperty(i)){var s=r[i];s.objId=void 0,s.hasAnnotation&&mW(s,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(r,i){var s=!r;for(var o in r||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(o)){var a=r[o],l=[],u=a.Rect;if(a.Rect&&(a.Rect=fW(a.Rect,i)),i.internal.newObjectDeferredBegin(a.objId,!0),a.DA=tn.createDefaultAppearanceStream(a),Pr(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var c=dW(a);l.push({key:"AP",value:"<</N "+c+">>"}),i.internal.acroformPlugin.xForms.push(c)}if(a.appearanceStreamContent){var h="";for(var f in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(f)){var d=a.appearanceStreamContent[f];if(h+="/"+f+" ",h+="<<",Object.keys(d).length>=1||Array.isArray(d)){for(var o in d)if(d.hasOwnProperty(o)){var v=d[o];typeof v=="function"&&(v=v.call(i,a)),h+="/"+o+" "+v+" ",i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v)}}else typeof(v=d)=="function"&&(v=v.call(i,a)),h+="/"+o+" "+v,i.internal.acroformPlugin.xForms.indexOf(v)>=0||i.internal.acroformPlugin.xForms.push(v);h+=">>"}l.push({key:"AP",value:`<<
`+h+">>"})}i.internal.putStream({additionalKeyValues:l,objectId:a.objId}),i.internal.out("endobj")}s&&gW(i.internal.acroformPlugin.xForms,i)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},DI=Ei.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(o){return o};if(Array.isArray(t)){for(var i="[",s=0;s<t.length;s++)switch(s!==0&&(i+=" "),Pr(t[s])){case"boolean":case"number":case"object":i+=t[s].toString();break;case"string":t[s].substr(0,1)!=="/"?(e!==void 0&&n&&(r=n.internal.getEncryptor(e)),i+="("+gd(r(t[s].toString()))+")"):i+=t[s].toString()}return i+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},TS=function(t,e,n){var r=function(i){return i};return e!==void 0&&n&&(r=n.internal.getEncryptor(e)),(t=t||"").toString(),t="("+gd(r(t))+")"},eu=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};eu.prototype.toString=function(){return this.objId+" 0 R"},eu.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},eu.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(s){return s!="content"&&s!="appearanceStreamContent"&&s!="scope"&&s!="objId"&&s.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var r=e[n],i=this[r];i&&(Array.isArray(i)?t.push({key:r,value:DI(i,this.objId,this.scope)}):i instanceof eu?(i.scope=this.scope,t.push({key:r,value:i.objId+" 0 R"})):typeof i!="function"&&t.push({key:r,value:i}))}return t};var OI=function(){eu.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Ho(OI,eu);var UI=function(){eu.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+gd(n(t))+")"}},set:function(n){t=n}})};Ho(UI,eu);var Il=function t(){eu.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute F supplied.');e=g}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(e,3))},set:function(g){Boolean(g)===!0?this.F=Ui(e,3):this.F=Bi(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(g){if(isNaN(g))throw new Error('Invalid value "'+g+'" for attribute Ff supplied.');n=g}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(g){r=g!==void 0?g:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(g){r[0]=g}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(g){r[1]=g}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(g){r[2]=g}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(g){r[3]=g}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(g){switch(g){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=g;break;default:throw new Error('Invalid value "'+g+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof b2)return;s="FieldObject"+t.FieldNum++}var g=function(S){return S};return this.scope&&(g=this.scope.internal.getEncryptor(this.objId)),"("+gd(g(s))+")"},set:function(g){s=g.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(g){s=g}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(g){o=g}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(g){a=g}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(g){l=g}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/v3:u},set:function(g){u=g}});var c="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return c},set:function(g){c=g}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof b2||this instanceof Yf))return TS(h,this.objId,this.scope)},set:function(g){g=g.toString(),h=g}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof _s?f:TS(f,this.objId,this.scope)},set:function(g){g=g.toString(),f=this instanceof _s?g:g.substr(0,1)==="("?pp(g.substr(1,g.length-2)):pp(g)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof _s?pp(f.substr(1,f.length-1)):f},set:function(g){g=g.toString(),f=this instanceof _s?"/"+g:g}});var d=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(d)return d},set:function(g){this.V=g}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof _s?d:TS(d,this.objId,this.scope)},set:function(g){g=g.toString(),d=this instanceof _s?g:g.substr(0,1)==="("?pp(g.substr(1,g.length-2)):pp(g)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof _s?pp(d.substr(1,d.length-1)):d},set:function(g){g=g.toString(),d=this instanceof _s?"/"+g:g}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var v,x=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return x},set:function(g){g=Boolean(g),x=g}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(v)return v},set:function(g){v=g}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,1))},set:function(g){Boolean(g)===!0?this.Ff=Ui(this.Ff,1):this.Ff=Bi(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,2))},set:function(g){Boolean(g)===!0?this.Ff=Ui(this.Ff,2):this.Ff=Bi(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,3))},set:function(g){Boolean(g)===!0?this.Ff=Ui(this.Ff,3):this.Ff=Bi(this.Ff,3)}});var w=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(w!==null)return w},set:function(g){if([0,1,2].indexOf(g)===-1)throw new Error('Invalid value "'+g+'" for attribute Q supplied.');w=g}}),Object.defineProperty(this,"textAlign",{get:function(){var g;switch(w){case 0:default:g="left";break;case 1:g="center";break;case 2:g="right"}return g},configurable:!0,enumerable:!0,set:function(g){switch(g){case"right":case 2:w=2;break;case"center":case 1:w=1;break;case"left":case 0:default:w=0}}})};Ho(Il,eu);var Yp=function(){Il.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return DI(e,this.objId,this.scope)},set:function(n){var r,i;i=[],typeof(r=n)=="string"&&(i=function(s,o,a){a||(a=1);for(var l,u=[];l=o.exec(s);)u.push(l[a]);return u}(r,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,18))},set:function(n){Boolean(n)===!0?this.Ff=Ui(this.Ff,18):this.Ff=Bi(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,19))},set:function(n){this.combo===!0&&(Boolean(n)===!0?this.Ff=Ui(this.Ff,19):this.Ff=Bi(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,20))},set:function(n){Boolean(n)===!0?(this.Ff=Ui(this.Ff,20),e.sort()):this.Ff=Bi(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,22))},set:function(n){Boolean(n)===!0?this.Ff=Ui(this.Ff,22):this.Ff=Bi(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,23))},set:function(n){Boolean(n)===!0?this.Ff=Ui(this.Ff,23):this.Ff=Bi(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,27))},set:function(n){Boolean(n)===!0?this.Ff=Ui(this.Ff,27):this.Ff=Bi(this.Ff,27)}}),this.hasAppearanceStream=!1};Ho(Yp,Il);var Zp=function(){Yp.call(this),this.fontName="helvetica",this.combo=!1};Ho(Zp,Yp);var $p=function(){Zp.call(this),this.combo=!0};Ho($p,Zp);var Oy=function(){$p.call(this),this.edit=!0};Ho(Oy,$p);var _s=function(){Il.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,15))},set:function(n){Boolean(n)===!0?this.Ff=Ui(this.Ff,15):this.Ff=Bi(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,16))},set:function(n){Boolean(n)===!0?this.Ff=Ui(this.Ff,16):this.Ff=Bi(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,17))},set:function(n){Boolean(n)===!0?this.Ff=Ui(this.Ff,17):this.Ff=Bi(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,26))},set:function(n){Boolean(n)===!0?this.Ff=Ui(this.Ff,26):this.Ff=Bi(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(s){return s};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,i=[];for(r in i.push("<<"),e)i.push("/"+r+" ("+gd(n(e[r]))+")");return i.push(">>"),i.join(`
`)}},set:function(n){Pr(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Ho(_s,Il);var Uy=function(){_s.call(this),this.pushButton=!0};Ho(Uy,_s);var Kp=function(){_s.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Ho(Kp,_s);var b2=function(){var t,e;Il.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(i){t=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(i){e=i}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(a){return a};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var s,o=[];for(s in o.push("<<"),r)o.push("/"+s+" ("+gd(i(r[s]))+")");return o.push(">>"),o.join(`
`)},set:function(i){Pr(i)==="object"&&(r=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(i){typeof i=="string"&&(r.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(i){n=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(i){n="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=tn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ho(b2,Il),Kp.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Kp.prototype.createOption=function(t){var e=new b2;return e.Parent=this,e.optionName=t,this.Kids.push(e),yW.call(this.scope,e),e};var By=function(){_s.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=tn.CheckBox.createAppearanceStream()};Ho(By,_s);var Yf=function(){Il.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,13))},set:function(e){Boolean(e)===!0?this.Ff=Ui(this.Ff,13):this.Ff=Bi(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,21))},set:function(e){Boolean(e)===!0?this.Ff=Ui(this.Ff,21):this.Ff=Bi(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,23))},set:function(e){Boolean(e)===!0?this.Ff=Ui(this.Ff,23):this.Ff=Bi(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,24))},set:function(e){Boolean(e)===!0?this.Ff=Ui(this.Ff,24):this.Ff=Bi(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,25))},set:function(e){Boolean(e)===!0?this.Ff=Ui(this.Ff,25):this.Ff=Bi(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,26))},set:function(e){Boolean(e)===!0?this.Ff=Ui(this.Ff,26):this.Ff=Bi(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ho(Yf,Il);var zy=function(){Yf.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Oi(this.Ff,14))},set:function(t){Boolean(t)===!0?this.Ff=Ui(this.Ff,14):this.Ff=Bi(this.Ff,14)}}),this.password=!0};Ho(zy,Yf);var tn={CheckBox:{createAppearanceStream:function(){return{N:{On:tn.CheckBox.YesNormal},D:{On:tn.CheckBox.YesPushDown,Off:tn.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Yl(t);e.scope=t.scope;var n=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),s=t5(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Dn(tn.internal.getWidth(t))+" "+Dn(tn.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+Dn(s.fontSize)+" Tf "+i),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Yl(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),i=[],s=tn.internal.getHeight(t),o=tn.internal.getWidth(t),a=t5(t,t.caption);return i.push("1 g"),i.push("0 0 "+Dn(o)+" "+Dn(s)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+Dn(o-1)+" "+Dn(s-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+n+" "+Dn(a.fontSize)+" Tf "+r),i.push(a.text),i.push("ET"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Yl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Dn(tn.internal.getWidth(t))+" "+Dn(tn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:tn.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=tn.RadioButton.Circle.YesNormal,e.D[t]=tn.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Yl(t);e.scope=t.scope;var n=[],r=tn.internal.getWidth(t)<=tn.internal.getHeight(t)?tn.internal.getWidth(t)/4:tn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=tn.internal.Bezier_C,s=Number((r*i).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+$c(tn.internal.getWidth(t)/2)+" "+$c(tn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Yl(t);e.scope=t.scope;var n=[],r=tn.internal.getWidth(t)<=tn.internal.getHeight(t)?tn.internal.getWidth(t)/4:tn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*tn.internal.Bezier_C).toFixed(5)),o=Number((r*tn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+$c(tn.internal.getWidth(t)/2)+" "+$c(tn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+$c(tn.internal.getWidth(t)/2)+" "+$c(tn.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),n.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),n.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),n.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Yl(t);e.scope=t.scope;var n=[],r=tn.internal.getWidth(t)<=tn.internal.getHeight(t)?tn.internal.getWidth(t)/4:tn.internal.getHeight(t)/4;r=Number((.9*r).toFixed(5));var i=Number((2*r).toFixed(5)),s=Number((i*tn.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+$c(tn.internal.getWidth(t)/2)+" "+$c(tn.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:tn.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=tn.RadioButton.Cross.YesNormal,e.D[t]=tn.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Yl(t);e.scope=t.scope;var n=[],r=tn.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Dn(tn.internal.getWidth(t)-2)+" "+Dn(tn.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Dn(r.x1.x)+" "+Dn(r.x1.y)+" m"),n.push(Dn(r.x2.x)+" "+Dn(r.x2.y)+" l"),n.push(Dn(r.x4.x)+" "+Dn(r.x4.y)+" m"),n.push(Dn(r.x3.x)+" "+Dn(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Yl(t);e.scope=t.scope;var n=tn.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+Dn(tn.internal.getWidth(t))+" "+Dn(tn.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+Dn(tn.internal.getWidth(t)-2)+" "+Dn(tn.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(Dn(n.x1.x)+" "+Dn(n.x1.y)+" m"),r.push(Dn(n.x2.x)+" "+Dn(n.x2.y)+" l"),r.push(Dn(n.x4.x)+" "+Dn(n.x4.y)+" m"),r.push(Dn(n.x3.x)+" "+Dn(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Yl(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Dn(tn.internal.getWidth(t))+" "+Dn(tn.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};tn.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=tn.internal.getWidth(t),n=tn.internal.getHeight(t),r=Math.min(e,n);return{x1:{x:(e-r)/2,y:(n-r)/2+r},x2:{x:(e-r)/2+r,y:(n-r)/2},x3:{x:(e-r)/2,y:(n-r)/2},x4:{x:(e-r)/2+r,y:(n-r)/2+r}}}},tn.internal.getWidth=function(t){var e=0;return Pr(t)==="object"&&(e=eC(t.Rect[2])),e},tn.internal.getHeight=function(t){var e=0;return Pr(t)==="object"&&(e=eC(t.Rect[3])),e};var yW=Ei.addField=function(t){if(vW(this,t),!(t instanceof Il))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Ei.AcroFormChoiceField=Yp,Ei.AcroFormListBox=Zp,Ei.AcroFormComboBox=$p,Ei.AcroFormEditBox=Oy,Ei.AcroFormButton=_s,Ei.AcroFormPushButton=Uy,Ei.AcroFormRadioButton=Kp,Ei.AcroFormCheckBox=By,Ei.AcroFormTextField=Yf,Ei.AcroFormPasswordField=zy,Ei.AcroFormAppearance=tn,Ei.AcroForm={ChoiceField:Yp,ListBox:Zp,ComboBox:$p,EditBox:Oy,Button:_s,PushButton:Uy,RadioButton:Kp,CheckBox:By,TextField:Yf,PasswordField:zy,Appearance:tn},wn.AcroForm={ChoiceField:Yp,ListBox:Zp,ComboBox:$p,EditBox:Oy,Button:_s,PushButton:Uy,RadioButton:Kp,CheckBox:By,TextField:Yf,PasswordField:zy,Appearance:tn};function BI(t){return t.reduce(function(e,n,r){return e[n]=r,e},{})}(function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(O,B){var V,H,ee,se,ce,W=e;if((B=B||e)==="RGBA"||O.data!==void 0&&O.data instanceof Uint8ClampedArray&&"height"in O&&"width"in O)return"RGBA";if(k(O))for(ce in n)for(ee=n[ce],V=0;V<ee.length;V+=1){for(se=!0,H=0;H<ee[V].length;H+=1)if(ee[V][H]!==void 0&&ee[V][H]!==O[H]){se=!1;break}if(se===!0){W=ce;break}}else for(ce in n)for(ee=n[ce],V=0;V<ee.length;V+=1){for(se=!0,H=0;H<ee[V].length;H+=1)if(ee[V][H]!==void 0&&ee[V][H]!==O.charCodeAt(H)){se=!1;break}if(se===!0){W=ce;break}}return W===e&&B!==e&&(W=B),W},i=function O(B){for(var V=this.internal.write,H=this.internal.putStream,ee=(0,this.internal.getFilters)();ee.indexOf("FlateEncode")!==-1;)ee.splice(ee.indexOf("FlateEncode"),1);B.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:B.width}),se.push({key:"Height",value:B.height}),B.colorSpace===w.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(B.palette.length/3-1)+" "+("sMask"in B&&B.sMask!==void 0?B.objectId+2:B.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+B.colorSpace}),B.colorSpace===w.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:B.bitsPerComponent}),"decodeParameters"in B&&B.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+B.decodeParameters+">>"}),"transparency"in B&&Array.isArray(B.transparency)){for(var ce="",W=0,Y=B.transparency.length;W<Y;W++)ce+=B.transparency[W]+" "+B.transparency[W]+" ";se.push({key:"Mask",value:"["+ce+"]"})}B.sMask!==void 0&&se.push({key:"SMask",value:B.objectId+1+" 0 R"});var j=B.filter!==void 0?["/"+B.filter]:void 0;if(H({data:B.data,additionalKeyValues:se,alreadyAppliedFilters:j,objectId:B.objectId}),V("endobj"),"sMask"in B&&B.sMask!==void 0){var re="/Predictor "+B.predictor+" /Colors 1 /BitsPerComponent "+B.bitsPerComponent+" /Columns "+B.width,I={width:B.width,height:B.height,colorSpace:"DeviceGray",bitsPerComponent:B.bitsPerComponent,decodeParameters:re,data:B.sMask};"filter"in B&&(I.filter=B.filter),O.call(this,I)}if(B.colorSpace===w.INDEXED){var X=this.internal.newObject();H({data:R(new Uint8Array(B.palette)),objectId:X}),V("endobj")}},s=function(){var O=this.internal.collections.addImage_images;for(var B in O)i.call(this,O[B])},o=function(){var O,B=this.internal.collections.addImage_images,V=this.internal.write;for(var H in B)V("/I"+(O=B[H]).index,O.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var O=this.internal.collections.addImage_images;return a.call(this),O},u=function(){return Object.keys(this.internal.collections.addImage_images).length},c=function(O){return typeof t["process"+O.toUpperCase()]=="function"},h=function(O){return Pr(O)==="object"&&O.nodeType===1},f=function(O,B){if(O.nodeName==="IMG"&&O.hasAttribute("src")){var V=""+O.getAttribute("src");if(V.indexOf("data:image/")===0)return Jg(unescape(V).split("base64,").pop());var H=t.loadFile(V,!0);if(H!==void 0)return H}if(O.nodeName==="CANVAS"){if(O.width===0||O.height===0)throw new Error("Given canvas must have data. Canvas width: "+O.width+", height: "+O.height);var ee;switch(B){case"PNG":ee="image/png";break;case"WEBP":ee="image/webp";break;case"JPEG":case"JPG":default:ee="image/jpeg"}return Jg(O.toDataURL(ee,1).split("base64,").pop())}},d=function(O){var B=this.internal.collections.addImage_images;if(B){for(var V in B)if(O===B[V].alias)return B[V]}},v=function(O,B,V){return O||B||(O=-96,B=-96),O<0&&(O=-1*V.width*72/O/this.internal.scaleFactor),B<0&&(B=-1*V.height*72/B/this.internal.scaleFactor),O===0&&(O=B*V.width/V.height),B===0&&(B=O*V.height/V.width),[O,B]},x=function(O,B,V,H,ee,se){var ce=v.call(this,V,H,ee),W=this.internal.getCoordinateString,Y=this.internal.getVerticalCoordinateString,j=l.call(this);if(V=ce[0],H=ce[1],j[ee.index]=ee,se){se*=Math.PI/180;var re=Math.cos(se),I=Math.sin(se),X=function(ae){return ae.toFixed(4)},J=[X(re),X(I),X(-1*I),X(re),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,W(O),Y(B+H),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([W(V),"0","0",W(H),"0","0","cm"].join(" "))):this.internal.write([W(V),"0","0",W(H),W(O),Y(B+H),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ee.index+" Do"),this.internal.write("Q")},w=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var g=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},S=t.__addimage__.sHashCode=function(O){var B,V,H=0;if(typeof O=="string")for(V=O.length,B=0;B<V;B++)H=(H<<5)-H+O.charCodeAt(B),H|=0;else if(k(O))for(V=O.byteLength/2,B=0;B<V;B++)H=(H<<5)-H+O[B],H|=0;return H},_=t.__addimage__.validateStringAsBase64=function(O){(O=O||"").toString().trim();var B=!0;return O.length===0&&(B=!1),O.length%4!=0&&(B=!1),/^[A-Za-z0-9+/]+$/.test(O.substr(0,O.length-2))===!1&&(B=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(O.substr(-2))===!1&&(B=!1),B},T=t.__addimage__.extractImageFromDataUrl=function(O){if(O==null||!(O=O.trim()).startsWith("data:"))return null;var B=O.indexOf(",");return B<0?null:O.substring(0,B).trim().endsWith("base64")?O.substring(B+1):null},L=t.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};t.__addimage__.isArrayBuffer=function(O){return L()&&O instanceof ArrayBuffer};var k=t.__addimage__.isArrayBufferView=function(O){return L()&&typeof Uint32Array<"u"&&(O instanceof Int8Array||O instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&O instanceof Uint8ClampedArray||O instanceof Int16Array||O instanceof Uint16Array||O instanceof Int32Array||O instanceof Uint32Array||O instanceof Float32Array||O instanceof Float64Array)},N=t.__addimage__.binaryStringToUint8Array=function(O){for(var B=O.length,V=new Uint8Array(B),H=0;H<B;H++)V[H]=O.charCodeAt(H);return V},R=t.__addimage__.arrayBufferToBinaryString=function(O){for(var B="",V=k(O)?O:new Uint8Array(O),H=0;H<V.length;H+=8192)B+=String.fromCharCode.apply(null,V.subarray(H,H+8192));return B};t.addImage=function(){var O,B,V,H,ee,se,ce,W,Y;if(typeof arguments[1]=="number"?(B=e,V=arguments[1],H=arguments[2],ee=arguments[3],se=arguments[4],ce=arguments[5],W=arguments[6],Y=arguments[7]):(B=arguments[1],V=arguments[2],H=arguments[3],ee=arguments[4],se=arguments[5],ce=arguments[6],W=arguments[7],Y=arguments[8]),Pr(O=arguments[0])==="object"&&!h(O)&&"imageData"in O){var j=O;O=j.imageData,B=j.format||B||e,V=j.x||V||0,H=j.y||H||0,ee=j.w||j.width||ee,se=j.h||j.height||se,ce=j.alias||ce,W=j.compression||W,Y=j.rotation||j.angle||Y}var re=this.internal.getFilters();if(W===void 0&&re.indexOf("FlateEncode")!==-1&&(W="SLOW"),isNaN(V)||isNaN(H))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var I=P.call(this,O,B,ce,W);return x.call(this,V,H,ee,se,I,Y),this};var P=function(O,B,V,H){var ee,se,ce;if(typeof O=="string"&&r(O)===e){O=unescape(O);var W=D(O,!1);(W!==""||(W=t.loadFile(O,!0))!==void 0)&&(O=W)}if(h(O)&&(O=f(O,B)),B=r(O,B),!c(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(((ce=V)==null||ce.length===0)&&(V=function(Y){return typeof Y=="string"||k(Y)?S(Y):k(Y.data)?S(Y.data):null}(O)),(ee=d.call(this,V))||(L()&&(O instanceof Uint8Array||B==="RGBA"||(se=O,O=N(O))),ee=this["process"+B.toUpperCase()](O,u.call(this),V,function(Y){return Y&&typeof Y=="string"&&(Y=Y.toUpperCase()),Y in t.image_compression?Y:g.NONE}(H),se)),!ee)throw new Error("An unknown error occurred whilst processing the image.");return ee},D=t.__addimage__.convertBase64ToBinaryString=function(O,B){B=typeof B!="boolean"||B;var V,H="";if(typeof O=="string"){var ee;V=(ee=T(O))!==null&&ee!==void 0?ee:O;try{H=Jg(V)}catch(se){if(B)throw _(V)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return H};t.getImageProperties=function(O){var B,V,H="";if(h(O)&&(O=f(O)),typeof O=="string"&&r(O)===e&&((H=D(O,!1))===""&&(H=t.loadFile(O)||""),O=H),V=r(O),!c(V))throw new Error("addImage does not support files of type '"+V+"', please ensure that a plugin for '"+V+"' support is added.");if(!L()||O instanceof Uint8Array||(O=N(O)),!(B=this["process"+V.toUpperCase()](O)))throw new Error("An unknown error occurred whilst processing the image");return B.fileType=V,B}})(wn.API),function(t){var e=function(n){if(n!==void 0&&n!="")return!0};wn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var r,i,s,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(n.objId),u=n.pageContext.annotations,c=!1,h=0;h<u.length&&!c;h++)switch((r=u[h]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(c!=0){this.internal.write("/Annots [");for(var f=0;f<u.length;f++){r=u[f];var d=this.internal.pdfEscape,v=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var x=this.internal.newAdditionalObject(),w=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(x.objId),S=r.title||"Note";s="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y)+"] ")+"/Contents ("+d(g(r.contents))+")",s+=" /Popup "+w.objId+" 0 R",s+=" /P "+l.objId+" 0 R",s+=" /T ("+d(g(S))+") >>",x.content=s;var _=x.objId+" 0 R";s="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(r.bounds.x+30)+" "+a(r.bounds.y+r.bounds.h)+" "+o(r.bounds.x+r.bounds.w+30)+" "+a(r.bounds.y)+"] ")+" /Parent "+_,r.open&&(s+=" /Open true"),s+=" >>",w.content=s,this.internal.write(x.objId,"0 R",w.objId,"0 R");break;case"freetext":i="/Rect ["+o(r.bounds.x)+" "+a(r.bounds.y)+" "+o(r.bounds.x+r.bounds.w)+" "+a(r.bounds.y+r.bounds.h)+"] ";var T=r.color||"#000000";s="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+d(v(r.contents))+")",s+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+T+")",s+=" /Border [0 0 0]",s+=" >>",this.internal.write(s);break;case"link":if(r.options.name){var L=this.annotations._nameMap[r.options.name];r.options.pageNumber=L.page,r.options.top=L.y}else r.options.top||(r.options.top=0);if(i="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",s="",r.options.url)s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+d(v(r.options.url))+") >>";else if(r.options.pageNumber)switch(s="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":s+=" /Fit]";break;case"FitH":s+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,s+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var k=a(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),s+=" /XYZ "+r.options.left+" "+k+" "+r.options.zoom+"]"}s!=""&&(s+=" >>",this.internal.write(s))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},t.link=function(n,r,i,s,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(n),y:u(r),w:l(n+i),h:u(r+s)},options:o,type:"link"})},t.textWithLink=function(n,r,i,s){var o,a,l=this.getTextWidth(n),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(s.maxWidth!==void 0){a=s.maxWidth;var c=this.splitTextToSize(n,a).length;o=Math.ceil(u*c)}else a=l,o=u;return this.text(n,r,i,s),i+=.2*u,s.align==="center"&&(r-=l/2),s.align==="right"&&(r-=l),this.link(r,i-u,a,o,s),l},t.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(wn.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(x){return e[x.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(x){return typeof x=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(x)},a=t.__arabicParser__.isArabicEndLetter=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(x){return o(x)&&i.indexOf(x.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length>=3};var c=t.__arabicParser__.arabicLetterHasMedialForm=function(x){return o(x)&&s(x)&&e[x.charCodeAt(0)].length==4},h=t.__arabicParser__.resolveLigatures=function(x){var w=0,g=n,S="",_=0;for(w=0;w<x.length;w+=1)g[x.charCodeAt(w)]!==void 0?(_++,typeof(g=g[x.charCodeAt(w)])=="number"&&(S+=String.fromCharCode(g),g=n,_=0),w===x.length-1&&(g=n,S+=x.charAt(w-(_-1)),w-=_-1,_=0)):(g=n,S+=x.charAt(w-_),w-=_,_=0);return S};t.__arabicParser__.isArabicDiacritic=function(x){return x!==void 0&&r[x.charCodeAt(0)]!==void 0};var f=t.__arabicParser__.getCorrectForm=function(x,w,g){return o(x)?s(x)===!1?-1:!u(x)||!o(w)&&!o(g)||!o(g)&&a(w)||a(x)&&!o(w)||a(x)&&l(w)||a(x)&&a(w)?0:c(x)&&o(w)&&!a(w)&&o(g)&&u(g)?3:a(x)||!o(g)?1:2:-1},d=function(x){var w=0,g=0,S=0,_="",T="",L="",k=(x=x||"").split("\\s+"),N=[];for(w=0;w<k.length;w+=1){for(N.push(""),g=0;g<k[w].length;g+=1)_=k[w][g],T=k[w][g-1],L=k[w][g+1],o(_)?(S=f(_,T,L),N[w]+=S!==-1?String.fromCharCode(e[_.charCodeAt(0)][S]):_):N[w]+=_;N[w]=h(N[w])}return N.join(" ")},v=t.__arabicParser__.processArabic=t.processArabic=function(){var x,w=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,g=[];if(Array.isArray(w)){var S=0;for(g=[],S=0;S<w.length;S+=1)Array.isArray(w[S])?g.push([d(w[S][0]),w[S][1],w[S][2]]):g.push([d(w[S])]);x=g}else x=d(w);return typeof arguments[0]=="string"?x:(arguments[0].text=x,arguments[0])};t.events.push(["preProcessText",v])}(wn.API),wn.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(a){n=a}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(a){r=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(a){i=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var s=[];Object.defineProperty(this,"childNodes",{get:function(){return s},set:function(a){s=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,r){var i;if((n=n||"2d")!=="2d")return null;for(i in r)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=r[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(wn.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(x){l=x}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(x){u=x}});var c=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return c},set:function(x){c=x}});var h=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return h},set:function(x){h=x}});var f=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return f},set:function(x){f=x}});var d=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return d},set:function(x){d=x}});var v=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return v},set:function(x){v=x}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return r.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){r.call(this);var c=(u=u||{}).fontSize||this.getFontSize(),h=u.font||this.getFont(),f=u.scaleFactor||this.internal.scaleFactor,d=0,v=0,x=0,w=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var g=u.maxWidth;g>0?typeof l=="string"?l=this.splitTextToSize(l,g):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(_,T){return _.concat(w.splitTextToSize(T,g))},[])):l=Array.isArray(l)?l:[l];for(var S=0;S<l.length;S++)d<(x=this.getStringUnitWidth(l[S],{font:h})*c)&&(d=x);return d!==0&&(v=l.length),{w:d/=f,h:Math.max((v*c*this.getLineHeightFactor()-c*(this.getLineHeightFactor()-1))/f,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var u=this.internal.__cell__.lastCell,c=this.internal.__cell__.padding,h=this.internal.__cell__.margins||e,f=this.internal.__cell__.tableHeaderRow,d=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+h.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=h.top,d&&f&&(this.printHeaderRow(l.lineNumber,!0),l.y+=f[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,n===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-c,l.y+c,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+c,{align:"center",baseline:"top",maxWidth:l.width-c-c}):this.text(l.text,l.x+c,l.y+c,{align:"left",baseline:"top",maxWidth:l.width-c-c})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,c,h,f){if(r.call(this),!c)throw new Error("No data for PDF table.");var d,v,x,w,g=[],S=[],_=[],T={},L={},k=[],N=[],R=(f=f||{}).autoSize||!1,P=f.printHeaders!==!1,D=f.css&&f.css["font-size"]!==void 0?16*f.css["font-size"]:f.fontSize||12,O=f.margins||Object.assign({width:this.getPageWidth()},e),B=typeof f.padding=="number"?f.padding:3,V=f.headerBackgroundColor||"#c8c8c8",H=f.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=P,this.internal.__cell__.margins=O,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=V,this.internal.__cell__.headerTextColor=H,this.setFontSize(D),h==null)S=g=Object.keys(c[0]),_=g.map(function(){return"left"});else if(Array.isArray(h)&&Pr(h[0])==="object")for(g=h.map(function(j){return j.name}),S=h.map(function(j){return j.prompt||j.name||""}),_=h.map(function(j){return j.align||"left"}),d=0;d<h.length;d+=1)L[h[d].name]=h[d].width*(19.049976/25.4);else Array.isArray(h)&&typeof h[0]=="string"&&(S=g=h,_=g.map(function(){return"left"}));if(R||Array.isArray(h)&&typeof h[0]=="string")for(d=0;d<g.length;d+=1){for(T[w=g[d]]=c.map(function(j){return j[w]}),this.setFont(void 0,"bold"),k.push(this.getTextDimensions(S[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),v=T[w],this.setFont(void 0,"normal"),x=0;x<v.length;x+=1)k.push(this.getTextDimensions(v[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);L[w]=Math.max.apply(null,k)+B+B,k=[]}if(P){var ee={};for(d=0;d<g.length;d+=1)ee[g[d]]={},ee[g[d]].text=S[d],ee[g[d]].align=_[d];var se=a.call(this,ee,L);N=g.map(function(j){return new s(l,u,L[j],se,ee[j].text,void 0,ee[j].align)}),this.setTableHeaderRow(N),this.printHeaderRow(1,!1)}var ce=h.reduce(function(j,re){return j[re.name]=re.align,j},{});for(d=0;d<c.length;d+=1){"rowStart"in f&&f.rowStart instanceof Function&&f.rowStart({row:d,data:c[d]},this);var W=a.call(this,c[d],L);for(x=0;x<g.length;x+=1){var Y=c[d][g[x]];"cellStart"in f&&f.cellStart instanceof Function&&f.cellStart({row:d,col:x,data:Y},this),o.call(this,new s(l,u,L[g[x]],W,Y,d+2,ce[g[x]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var c=this.internal.__cell__.padding,h=this.internal.__cell__.table_font_size,f=this.internal.scaleFactor;return Object.keys(l).map(function(d){var v=l[d];return this.splitTextToSize(v.hasOwnProperty("text")?v.text:v,u[d]-c-c)},this).map(function(d){return this.getLineHeightFactor()*d.length*h/f+c+c},this).reduce(function(d,v){return Math.max(d,v)},0)};t.setTableHeaderRow=function(l){r.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var c;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var h=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(h[0],h[1],h[2],h[3],void 0,-1)}this.setFont(void 0,"bold");for(var f=[],d=0;d<this.internal.__cell__.tableHeaderRow.length;d+=1){c=this.internal.__cell__.tableHeaderRow[d].clone(),u&&(c.y=this.internal.__cell__.margins.top||0,f.push(c)),c.lineNumber=l;var v=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,c),this.setTextColor(v)}f.length>0&&this.setTableHeaderRow(f),this.setFont(void 0,"normal"),n=!1}}(wn.API);var zI={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},HI=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],n5=BI(HI),GI=[100,200,300,400,500,600,700,800,900],xW=BI(GI);function r5(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(s){return zI[s=s||"normal"]?s:"normal"}(t.style),r=function(s){if(!s)return 400;if(typeof s=="number")return s>=100&&s<=900&&s%100==0?s:400;if(/^\d00$/.test(s))return parseInt(s);switch(s){case"bold":return 700;case"normal":default:return 400}}(t.weight),i=function(s){return typeof n5[s=s||"normal"]=="number"?s:"normal"}(t.stretch);return{family:e,style:n,weight:r,stretch:i,src:t.src||[],ref:t.ref||{name:e,style:[i,n,r].join(" ")}}}function tC(t,e,n,r){var i;for(i=n;i>=0&&i<e.length;i+=r)if(t[e[i]])return t[e[i]];for(i=n;i>=0&&i<e.length;i-=r)if(t[e[i]])return t[e[i]]}var wW={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},nC={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function rC(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function SW(t,e,n){for(var r=(n=n||{}).defaultFontFamily||"times",i=Object.assign({},wW,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(i[(s=r5(e[a])).family]&&(s.family=i[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[r]))throw new Error("Could not find a font-family for the rule '"+rC(s)+"' and default family '"+r+"'.");if(o=function(l,u){if(u[l])return u[l];var c=n5[l],h=c<=n5.normal?-1:1,f=tC(u,HI,c,h);if(!f)throw new Error("Could not find a matching font-stretch value for "+l);return f}(s.stretch,o),o=function(l,u){if(u[l])return u[l];for(var c=zI[l],h=0;h<c.length;++h)if(u[c[h]])return u[c[h]];throw new Error("Could not find a matching font-style for "+l)}(s.style,o),!(o=function(l,u){if(u[l])return u[l];if(l===400&&u[500])return u[500];if(l===500&&u[400])return u[400];var c=xW[l],h=tC(u,GI,c,l<400?-1:1);if(!h)throw new Error("Could not find a matching font-weight for value "+l);return h}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+rC(s)+"'.");return o}function iC(t){return t.trimLeft()}function _W(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function bW(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var ey,sC,oC,CS=["times"];(function(t){var e,n,r,i,s,o,a,l,u,c=function(I){return I=I||{},this.isStrokeTransparent=I.isStrokeTransparent||!1,this.strokeOpacity=I.strokeOpacity||1,this.strokeStyle=I.strokeStyle||"#000000",this.fillStyle=I.fillStyle||"#000000",this.isFillTransparent=I.isFillTransparent||!1,this.fillOpacity=I.fillOpacity||1,this.font=I.font||"10px sans-serif",this.textBaseline=I.textBaseline||"alphabetic",this.textAlign=I.textAlign||"left",this.lineWidth=I.lineWidth||1,this.lineJoin=I.lineJoin||"miter",this.lineCap=I.lineCap||"butt",this.path=I.path||[],this.transform=I.transform!==void 0?I.transform.clone():new l,this.globalCompositeOperation=I.globalCompositeOperation||"normal",this.globalAlpha=I.globalAlpha||1,this.clip_path=I.clip_path||[],this.currentPoint=I.currentPoint||new o,this.miterLimit=I.miterLimit||10,this.lastPoint=I.lastPoint||new o,this.lineDashOffset=I.lineDashOffset||0,this.lineDash=I.lineDash||[],this.margin=I.margin||[0,0,0,0],this.prevPageLastElemOffset=I.prevPageLastElemOffset||0,this.ignoreClearRect=typeof I.ignoreClearRect!="boolean"||I.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new c}]);var h=function(I){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var X=I;Object.defineProperty(this,"pdf",{get:function(){return X}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(pe){J=Boolean(pe)}});var ae=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ae},set:function(pe){ae=Boolean(pe)}});var fe=0;Object.defineProperty(this,"posX",{get:function(){return fe},set:function(pe){isNaN(pe)||(fe=pe)}});var Se=0;Object.defineProperty(this,"posY",{get:function(){return Se},set:function(pe){isNaN(pe)||(Se=pe)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(pe){var K;typeof pe=="number"?K=[pe,pe,pe,pe]:((K=new Array(4))[0]=pe[0],K[1]=pe.length>=2?pe[1]:K[0],K[2]=pe.length>=3?pe[2]:K[0],K[3]=pe.length>=4?pe[3]:K[1]),u.margin=K}});var Ee=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ee},set:function(pe){Ee=pe}});var Ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ce},set:function(pe){Ce=pe}});var $e=[];Object.defineProperty(this,"pageBreaks",{get:function(){return $e},set:function(pe){$e=pe}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(pe){pe instanceof c&&(u=pe)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(pe){u.path=pe}});var ke=[];Object.defineProperty(this,"ctxStack",{get:function(){return ke},set:function(pe){ke=pe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(pe){var K;K=f(pe),this.ctx.fillStyle=K.style,this.ctx.isFillTransparent=K.a===0,this.ctx.fillOpacity=K.a,this.pdf.setFillColor(K.r,K.g,K.b,{a:K.a}),this.pdf.setTextColor(K.r,K.g,K.b,{a:K.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(pe){var K=f(pe);this.ctx.strokeStyle=K.style,this.ctx.isStrokeTransparent=K.a===0,this.ctx.strokeOpacity=K.a,K.a===0?this.pdf.setDrawColor(255,255,255):(K.a,this.pdf.setDrawColor(K.r,K.g,K.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(pe){["butt","round","square"].indexOf(pe)!==-1&&(this.ctx.lineCap=pe,this.pdf.setLineCap(pe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(pe){isNaN(pe)||(this.ctx.lineWidth=pe,this.pdf.setLineWidth(pe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(pe){["bevel","round","miter"].indexOf(pe)!==-1&&(this.ctx.lineJoin=pe,this.pdf.setLineJoin(pe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(pe){isNaN(pe)||(this.ctx.miterLimit=pe,this.pdf.setMiterLimit(pe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(pe){this.ctx.textBaseline=pe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(pe){["right","end","center","left","start"].indexOf(pe)!==-1&&(this.ctx.textAlign=pe)}});var he=null;function De(pe,K){if(he===null){var tt=function(Ze){var Ne=[];return Object.keys(Ze).forEach(function(Ke){Ze[Ke].forEach(function(ft){var vt=null;switch(ft){case"bold":vt={family:Ke,weight:"bold"};break;case"italic":vt={family:Ke,style:"italic"};break;case"bolditalic":vt={family:Ke,weight:"bold",style:"italic"};break;case"":case"normal":vt={family:Ke}}vt!==null&&(vt.ref={name:Ke,style:ft},Ne.push(vt))})}),Ne}(pe.getFontList());he=function(Ze){for(var Ne={},Ke=0;Ke<Ze.length;++Ke){var ft=r5(Ze[Ke]),vt=ft.family,ue=ft.stretch,Q=ft.style,Pe=ft.weight;Ne[vt]=Ne[vt]||{},Ne[vt][ue]=Ne[vt][ue]||{},Ne[vt][ue][Q]=Ne[vt][ue][Q]||{},Ne[vt][ue][Q][Pe]=ft}return Ne}(tt.concat(K))}return he}var ze=null;Object.defineProperty(this,"fontFaces",{get:function(){return ze},set:function(pe){he=null,ze=pe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(pe){var K;if(this.ctx.font=pe,(K=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(pe))!==null){var tt=K[1];K[2];var Ze=K[3],Ne=K[4];K[5];var Ke=K[6],ft=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ne)[2];Ne=Math.floor(ft==="px"?parseFloat(Ne)*this.pdf.internal.scaleFactor:ft==="em"?parseFloat(Ne)*this.pdf.getFontSize():parseFloat(Ne)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ne);var vt=function(lt){var it,Te,Nt=[],At=lt.trim();if(At==="")return CS;if(At in nC)return[nC[At]];for(;At!=="";){switch(Te=null,it=(At=iC(At)).charAt(0)){case'"':case"'":Te=_W(At.substring(1),it);break;default:Te=bW(At)}if(Te===null||(Nt.push(Te[0]),(At=iC(Te[1]))!==""&&At.charAt(0)!==","))return CS;At=At.replace(/^,/,"")}return Nt}(Ke);if(this.fontFaces){var ue=SW(De(this.pdf,this.fontFaces),vt.map(function(lt){return{family:lt,stretch:"normal",weight:Ze,style:tt}}));this.pdf.setFont(ue.ref.name,ue.ref.style)}else{var Q="";(Ze==="bold"||parseInt(Ze,10)>=700||tt==="bold")&&(Q="bold"),tt==="italic"&&(Q+="italic"),Q.length===0&&(Q="normal");for(var Pe="",et={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Qe=0;Qe<vt.length;Qe++){if(this.pdf.internal.getFont(vt[Qe],Q,{noFallback:!0,disableWarning:!0})!==void 0){Pe=vt[Qe];break}if(Q==="bolditalic"&&this.pdf.internal.getFont(vt[Qe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Pe=vt[Qe],Q="bold";else if(this.pdf.internal.getFont(vt[Qe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Pe=vt[Qe],Q="normal";break}}if(Pe===""){for(var dt=0;dt<vt.length;dt++)if(et[vt[dt]]){Pe=et[vt[dt]];break}}Pe=Pe===""?"Times":Pe,this.pdf.setFont(Pe,Q)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(pe){this.ctx.globalCompositeOperation=pe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(pe){this.ctx.globalAlpha=pe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(pe){this.ctx.lineDashOffset=pe,re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(pe){this.ctx.lineDash=pe,re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(pe){this.ctx.ignoreClearRect=Boolean(pe)}})};h.prototype.setLineDash=function(I){this.lineDash=I},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){T.call(this,"fill",!1)},h.prototype.stroke=function(){T.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(I,X){if(isNaN(I)||isNaN(X))throw Dr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new o(I,X));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(I,X)},h.prototype.closePath=function(){var I=new o(0,0),X=0;for(X=this.path.length-1;X!==-1;X--)if(this.path[X].type==="begin"&&Pr(this.path[X+1])==="object"&&typeof this.path[X+1].x=="number"){I=new o(this.path[X+1].x,this.path[X+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(I.x,I.y)},h.prototype.lineTo=function(I,X){if(isNaN(I)||isNaN(X))throw Dr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new o(I,X));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),T.call(this,null,!0)},h.prototype.quadraticCurveTo=function(I,X,J,ae){if(isNaN(J)||isNaN(ae)||isNaN(I)||isNaN(X))throw Dr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var fe=this.ctx.transform.applyToPoint(new o(J,ae)),Se=this.ctx.transform.applyToPoint(new o(I,X));this.path.push({type:"qct",x1:Se.x,y1:Se.y,x:fe.x,y:fe.y}),this.ctx.lastPoint=new o(fe.x,fe.y)},h.prototype.bezierCurveTo=function(I,X,J,ae,fe,Se){if(isNaN(fe)||isNaN(Se)||isNaN(I)||isNaN(X)||isNaN(J)||isNaN(ae))throw Dr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ee=this.ctx.transform.applyToPoint(new o(fe,Se)),Ce=this.ctx.transform.applyToPoint(new o(I,X)),$e=this.ctx.transform.applyToPoint(new o(J,ae));this.path.push({type:"bct",x1:Ce.x,y1:Ce.y,x2:$e.x,y2:$e.y,x:Ee.x,y:Ee.y}),this.ctx.lastPoint=new o(Ee.x,Ee.y)},h.prototype.arc=function(I,X,J,ae,fe,Se){if(isNaN(I)||isNaN(X)||isNaN(J)||isNaN(ae)||isNaN(fe))throw Dr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Se=Boolean(Se),!this.ctx.transform.isIdentity){var Ee=this.ctx.transform.applyToPoint(new o(I,X));I=Ee.x,X=Ee.y;var Ce=this.ctx.transform.applyToPoint(new o(0,J)),$e=this.ctx.transform.applyToPoint(new o(0,0));J=Math.sqrt(Math.pow(Ce.x-$e.x,2)+Math.pow(Ce.y-$e.y,2))}Math.abs(fe-ae)>=2*Math.PI&&(ae=0,fe=2*Math.PI),this.path.push({type:"arc",x:I,y:X,radius:J,startAngle:ae,endAngle:fe,counterclockwise:Se})},h.prototype.arcTo=function(I,X,J,ae,fe){throw new Error("arcTo not implemented.")},h.prototype.rect=function(I,X,J,ae){if(isNaN(I)||isNaN(X)||isNaN(J)||isNaN(ae))throw Dr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(I,X),this.lineTo(I+J,X),this.lineTo(I+J,X+ae),this.lineTo(I,X+ae),this.lineTo(I,X),this.lineTo(I+J,X),this.lineTo(I,X)},h.prototype.fillRect=function(I,X,J,ae){if(isNaN(I)||isNaN(X)||isNaN(J)||isNaN(ae))throw Dr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!d.call(this)){var fe={};this.lineCap!=="butt"&&(fe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(fe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(I,X,J,ae),this.fill(),fe.hasOwnProperty("lineCap")&&(this.lineCap=fe.lineCap),fe.hasOwnProperty("lineJoin")&&(this.lineJoin=fe.lineJoin)}},h.prototype.strokeRect=function(I,X,J,ae){if(isNaN(I)||isNaN(X)||isNaN(J)||isNaN(ae))throw Dr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");v.call(this)||(this.beginPath(),this.rect(I,X,J,ae),this.stroke())},h.prototype.clearRect=function(I,X,J,ae){if(isNaN(I)||isNaN(X)||isNaN(J)||isNaN(ae))throw Dr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(I,X,J,ae))},h.prototype.save=function(I){I=typeof I!="boolean"||I;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(X),I){this.ctx.fontSize=this.pdf.internal.getFontSize();var ae=new c(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ae}},h.prototype.restore=function(I){I=typeof I!="boolean"||I;for(var X=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(X),I&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var f=function(I){var X,J,ae,fe;if(I.isCanvasGradient===!0&&(I=I.getColor()),!I)return{r:0,g:0,b:0,a:0,style:I};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(I))X=0,J=0,ae=0,fe=0;else{var Se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(I);if(Se!==null)X=parseInt(Se[1]),J=parseInt(Se[2]),ae=parseInt(Se[3]),fe=1;else if((Se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(I))!==null)X=parseInt(Se[1]),J=parseInt(Se[2]),ae=parseInt(Se[3]),fe=parseFloat(Se[4]);else{if(fe=1,typeof I=="string"&&I.charAt(0)!=="#"){var Ee=new II(I);I=Ee.ok?Ee.toHex():"#000000"}I.length===4?(X=I.substring(1,2),X+=X,J=I.substring(2,3),J+=J,ae=I.substring(3,4),ae+=ae):(X=I.substring(1,3),J=I.substring(3,5),ae=I.substring(5,7)),X=parseInt(X,16),J=parseInt(J,16),ae=parseInt(ae,16)}}return{r:X,g:J,b:ae,a:fe,style:I}},d=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},v=function(){return Boolean(this.ctx.isStrokeTransparent||this.globalAlpha==0)};h.prototype.fillText=function(I,X,J,ae){if(isNaN(X)||isNaN(J)||typeof I!="string")throw Dr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ae=isNaN(ae)?void 0:ae,!d.call(this)){var fe=W(this.ctx.transform.rotation),Se=this.ctx.transform.scaleX;B.call(this,{text:I,x:X,y:J,scale:Se,angle:fe,align:this.textAlign,maxWidth:ae})}},h.prototype.strokeText=function(I,X,J,ae){if(isNaN(X)||isNaN(J)||typeof I!="string")throw Dr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!v.call(this)){ae=isNaN(ae)?void 0:ae;var fe=W(this.ctx.transform.rotation),Se=this.ctx.transform.scaleX;B.call(this,{text:I,x:X,y:J,scale:Se,renderingMode:"stroke",angle:fe,align:this.textAlign,maxWidth:ae})}},h.prototype.measureText=function(I){if(typeof I!="string")throw Dr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var X=this.pdf,J=this.pdf.internal.scaleFactor,ae=X.internal.getFontSize(),fe=X.getStringUnitWidth(I)*ae/X.internal.scaleFactor,Se=function(Ee){var Ce=(Ee=Ee||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Ce}}),this};return new Se({width:fe*=Math.round(96*J/72*1e4)/1e4})},h.prototype.scale=function(I,X){if(isNaN(I)||isNaN(X))throw Dr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new l(I,0,0,X,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},h.prototype.rotate=function(I){if(isNaN(I))throw Dr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var X=new l(Math.cos(I),Math.sin(I),-Math.sin(I),Math.cos(I),0,0);this.ctx.transform=this.ctx.transform.multiply(X)},h.prototype.translate=function(I,X){if(isNaN(I)||isNaN(X))throw Dr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new l(1,0,0,1,I,X);this.ctx.transform=this.ctx.transform.multiply(J)},h.prototype.transform=function(I,X,J,ae,fe,Se){if(isNaN(I)||isNaN(X)||isNaN(J)||isNaN(ae)||isNaN(fe)||isNaN(Se))throw Dr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ee=new l(I,X,J,ae,fe,Se);this.ctx.transform=this.ctx.transform.multiply(Ee)},h.prototype.setTransform=function(I,X,J,ae,fe,Se){I=isNaN(I)?1:I,X=isNaN(X)?0:X,J=isNaN(J)?0:J,ae=isNaN(ae)?1:ae,fe=isNaN(fe)?0:fe,Se=isNaN(Se)?0:Se,this.ctx.transform=new l(I,X,J,ae,fe,Se)};var x=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(I,X,J,ae,fe,Se,Ee,Ce,$e){var ke=this.pdf.getImageProperties(I),he=1,De=1,ze=1,pe=1;ae!==void 0&&Ce!==void 0&&(ze=Ce/ae,pe=$e/fe,he=ke.width/ae*Ce/ae,De=ke.height/fe*$e/fe),Se===void 0&&(Se=X,Ee=J,X=0,J=0),ae!==void 0&&Ce===void 0&&(Ce=ae,$e=fe),ae===void 0&&Ce===void 0&&(Ce=ke.width,$e=ke.height);for(var K,tt=this.ctx.transform.decompose(),Ze=W(tt.rotate.shx),Ne=new l,Ke=(Ne=(Ne=(Ne=Ne.multiply(tt.translate)).multiply(tt.skew)).multiply(tt.scale)).applyToRectangle(new a(Se-X*ze,Ee-J*pe,ae*he,fe*De)),ft=w.call(this,Ke),vt=[],ue=0;ue<ft.length;ue+=1)vt.indexOf(ft[ue])===-1&&vt.push(ft[ue]);if(_(vt),this.autoPaging)for(var Q=vt[0],Pe=vt[vt.length-1],et=Q;et<Pe+1;et++){this.pdf.setPage(et);var Qe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],dt=et===1?this.posY+this.margin[0]:this.margin[0],lt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],it=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Te=et===1?0:lt+(et-2)*it;if(this.ctx.clip_path.length!==0){var Nt=this.path;K=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(K,this.posX+this.margin[3],-Te+dt+this.ctx.prevPageLastElemOffset),L.call(this,"fill",!0),this.path=Nt}var At=JSON.parse(JSON.stringify(Ke));At=S([At],this.posX+this.margin[3],-Te+dt+this.ctx.prevPageLastElemOffset)[0];var Ct=(et>Q||et<Pe)&&x.call(this);Ct&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qe,it,null).clip().discardPath()),this.pdf.addImage(I,"JPEG",At.x,At.y,At.w,At.h,null,null,Ze),Ct&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(I,"JPEG",Ke.x,Ke.y,Ke.w,Ke.h,null,null,Ze)};var w=function(I,X,J){var ae=[];X=X||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var fe=this.posY+this.ctx.prevPageLastElemOffset;switch(I.type){default:case"mt":case"lt":ae.push(Math.floor((I.y+fe)/J)+1);break;case"arc":ae.push(Math.floor((I.y+fe-I.radius)/J)+1),ae.push(Math.floor((I.y+fe+I.radius)/J)+1);break;case"qct":var Se=Y(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x,I.y);ae.push(Math.floor((Se.y+fe)/J)+1),ae.push(Math.floor((Se.y+Se.h+fe)/J)+1);break;case"bct":var Ee=j(this.ctx.lastPoint.x,this.ctx.lastPoint.y,I.x1,I.y1,I.x2,I.y2,I.x,I.y);ae.push(Math.floor((Ee.y+fe)/J)+1),ae.push(Math.floor((Ee.y+Ee.h+fe)/J)+1);break;case"rect":ae.push(Math.floor((I.y+fe)/J)+1),ae.push(Math.floor((I.y+I.h+fe)/J)+1)}for(var Ce=0;Ce<ae.length;Ce+=1)for(;this.pdf.internal.getNumberOfPages()<ae[Ce];)g.call(this);return ae},g=function(){var I=this.fillStyle,X=this.strokeStyle,J=this.font,ae=this.lineCap,fe=this.lineWidth,Se=this.lineJoin;this.pdf.addPage(),this.fillStyle=I,this.strokeStyle=X,this.font=J,this.lineCap=ae,this.lineWidth=fe,this.lineJoin=Se},S=function(I,X,J){for(var ae=0;ae<I.length;ae++)switch(I[ae].type){case"bct":I[ae].x2+=X,I[ae].y2+=J;case"qct":I[ae].x1+=X,I[ae].y1+=J;case"mt":case"lt":case"arc":default:I[ae].x+=X,I[ae].y+=J}return I},_=function(I){return I.sort(function(X,J){return X-J})},T=function(I,X){for(var J,ae,fe=this.fillStyle,Se=this.strokeStyle,Ee=this.lineCap,Ce=this.lineWidth,$e=Math.abs(Ce*this.ctx.transform.scaleX),ke=this.lineJoin,he=JSON.parse(JSON.stringify(this.path)),De=JSON.parse(JSON.stringify(this.path)),ze=[],pe=0;pe<De.length;pe++)if(De[pe].x!==void 0)for(var K=w.call(this,De[pe]),tt=0;tt<K.length;tt+=1)ze.indexOf(K[tt])===-1&&ze.push(K[tt]);for(var Ze=0;Ze<ze.length;Ze++)for(;this.pdf.internal.getNumberOfPages()<ze[Ze];)g.call(this);if(_(ze),this.autoPaging)for(var Ne=ze[0],Ke=ze[ze.length-1],ft=Ne;ft<Ke+1;ft++){this.pdf.setPage(ft),this.fillStyle=fe,this.strokeStyle=Se,this.lineCap=Ee,this.lineWidth=$e,this.lineJoin=ke;var vt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ue=ft===1?this.posY+this.margin[0]:this.margin[0],Q=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Pe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],et=ft===1?0:Q+(ft-2)*Pe;if(this.ctx.clip_path.length!==0){var Qe=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S(J,this.posX+this.margin[3],-et+ue+this.ctx.prevPageLastElemOffset),L.call(this,I,!0),this.path=Qe}if(ae=JSON.parse(JSON.stringify(he)),this.path=S(ae,this.posX+this.margin[3],-et+ue+this.ctx.prevPageLastElemOffset),X===!1||ft===0){var dt=(ft>Ne||ft<Ke)&&x.call(this);dt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],vt,Pe,null).clip().discardPath()),L.call(this,I,X),dt&&this.pdf.restoreGraphicsState()}this.lineWidth=Ce}else this.lineWidth=$e,L.call(this,I,X),this.lineWidth=Ce;this.path=he},L=function(I,X){if((I!=="stroke"||X||!v.call(this))&&(I==="stroke"||X||!d.call(this))){for(var J,ae,fe=[],Se=this.path,Ee=0;Ee<Se.length;Ee++){var Ce=Se[Ee];switch(Ce.type){case"begin":fe.push({begin:!0});break;case"close":fe.push({close:!0});break;case"mt":fe.push({start:Ce,deltas:[],abs:[]});break;case"lt":var $e=fe.length;if(Se[Ee-1]&&!isNaN(Se[Ee-1].x)&&(J=[Ce.x-Se[Ee-1].x,Ce.y-Se[Ee-1].y],$e>0)){for(;$e>=0;$e--)if(fe[$e-1].close!==!0&&fe[$e-1].begin!==!0){fe[$e-1].deltas.push(J),fe[$e-1].abs.push(Ce);break}}break;case"bct":J=[Ce.x1-Se[Ee-1].x,Ce.y1-Se[Ee-1].y,Ce.x2-Se[Ee-1].x,Ce.y2-Se[Ee-1].y,Ce.x-Se[Ee-1].x,Ce.y-Se[Ee-1].y],fe[fe.length-1].deltas.push(J);break;case"qct":var ke=Se[Ee-1].x+2/3*(Ce.x1-Se[Ee-1].x),he=Se[Ee-1].y+2/3*(Ce.y1-Se[Ee-1].y),De=Ce.x+2/3*(Ce.x1-Ce.x),ze=Ce.y+2/3*(Ce.y1-Ce.y),pe=Ce.x,K=Ce.y;J=[ke-Se[Ee-1].x,he-Se[Ee-1].y,De-Se[Ee-1].x,ze-Se[Ee-1].y,pe-Se[Ee-1].x,K-Se[Ee-1].y],fe[fe.length-1].deltas.push(J);break;case"arc":fe.push({deltas:[],abs:[],arc:!0}),Array.isArray(fe[fe.length-1].abs)&&fe[fe.length-1].abs.push(Ce)}}ae=X?null:I==="stroke"?"stroke":"fill";for(var tt=!1,Ze=0;Ze<fe.length;Ze++)if(fe[Ze].arc)for(var Ne=fe[Ze].abs,Ke=0;Ke<Ne.length;Ke++){var ft=Ne[Ke];ft.type==="arc"?R.call(this,ft.x,ft.y,ft.radius,ft.startAngle,ft.endAngle,ft.counterclockwise,void 0,X,!tt):V.call(this,ft.x,ft.y),tt=!0}else if(fe[Ze].close===!0)this.pdf.internal.out("h"),tt=!1;else if(fe[Ze].begin!==!0){var vt=fe[Ze].start.x,ue=fe[Ze].start.y;H.call(this,fe[Ze].deltas,vt,ue),tt=!0}ae&&P.call(this,ae),X&&D.call(this)}},k=function(I){var X=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=X*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return I-J;case"top":return I+X-J;case"hanging":return I+X-2*J;case"middle":return I+X/2-J;case"ideographic":return I;case"alphabetic":default:return I}},N=function(I){return I+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var I=function(){};return I.colorStops=[],I.addColorStop=function(X,J){this.colorStops.push([X,J])},I.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},I.isCanvasGradient=!0,I},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var R=function(I,X,J,ae,fe,Se,Ee,Ce,$e){for(var ke=se.call(this,J,ae,fe,Se),he=0;he<ke.length;he++){var De=ke[he];he===0&&($e?O.call(this,De.x1+I,De.y1+X):V.call(this,De.x1+I,De.y1+X)),ee.call(this,I,X,De.x2,De.y2,De.x3,De.y3,De.x4,De.y4)}Ce?D.call(this):P.call(this,Ee)},P=function(I){switch(I){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},O=function(I,X){this.pdf.internal.out(n(I)+" "+r(X)+" m")},B=function(I){var X;switch(I.align){case"right":case"end":X="right";break;case"center":X="center";break;case"left":case"start":default:X="left"}var J=this.pdf.getTextDimensions(I.text),ae=k.call(this,I.y),fe=N.call(this,ae)-J.h,Se=this.ctx.transform.applyToPoint(new o(I.x,ae)),Ee=this.ctx.transform.decompose(),Ce=new l;Ce=(Ce=(Ce=Ce.multiply(Ee.translate)).multiply(Ee.skew)).multiply(Ee.scale);for(var $e,ke,he,De=this.ctx.transform.applyToRectangle(new a(I.x,ae,J.w,J.h)),ze=Ce.applyToRectangle(new a(I.x,fe,J.w,J.h)),pe=w.call(this,ze),K=[],tt=0;tt<pe.length;tt+=1)K.indexOf(pe[tt])===-1&&K.push(pe[tt]);if(_(K),this.autoPaging)for(var Ze=K[0],Ne=K[K.length-1],Ke=Ze;Ke<Ne+1;Ke++){this.pdf.setPage(Ke);var ft=Ke===1?this.posY+this.margin[0]:this.margin[0],vt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ue=this.pdf.internal.pageSize.height-this.margin[2],Q=ue-this.margin[0],Pe=this.pdf.internal.pageSize.width-this.margin[1],et=Pe-this.margin[3],Qe=Ke===1?0:vt+(Ke-2)*Q;if(this.ctx.clip_path.length!==0){var dt=this.path;$e=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=S($e,this.posX+this.margin[3],-1*Qe+ft),L.call(this,"fill",!0),this.path=dt}var lt=S([JSON.parse(JSON.stringify(ze))],this.posX+this.margin[3],-Qe+ft+this.ctx.prevPageLastElemOffset)[0];I.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*I.scale),he=this.lineWidth,this.lineWidth=he*I.scale);var it=this.autoPaging!=="text";if(it||lt.y+lt.h<=ue){if(it||lt.y>=ft&&lt.x<=Pe){var Te=it?I.text:this.pdf.splitTextToSize(I.text,I.maxWidth||Pe-lt.x)[0],Nt=S([JSON.parse(JSON.stringify(De))],this.posX+this.margin[3],-Qe+ft+this.ctx.prevPageLastElemOffset)[0],At=it&&(Ke>Ze||Ke<Ne)&&x.call(this);At&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],et,Q,null).clip().discardPath()),this.pdf.text(Te,Nt.x,Nt.y,{angle:I.angle,align:X,renderingMode:I.renderingMode}),At&&this.pdf.restoreGraphicsState()}}else lt.y<ue&&(this.ctx.prevPageLastElemOffset+=ue-lt.y);I.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=he)}else I.scale>=.01&&(ke=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ke*I.scale),he=this.lineWidth,this.lineWidth=he*I.scale),this.pdf.text(I.text,Se.x+this.posX,Se.y+this.posY,{angle:I.angle,align:X,renderingMode:I.renderingMode,maxWidth:I.maxWidth}),I.scale>=.01&&(this.pdf.setFontSize(ke),this.lineWidth=he)},V=function(I,X,J,ae){J=J||0,ae=ae||0,this.pdf.internal.out(n(I+J)+" "+r(X+ae)+" l")},H=function(I,X,J){return this.pdf.lines(I,X,J,null,null)},ee=function(I,X,J,ae,fe,Se,Ee,Ce){this.pdf.internal.out([e(i(J+I)),e(s(ae+X)),e(i(fe+I)),e(s(Se+X)),e(i(Ee+I)),e(s(Ce+X)),"c"].join(" "))},se=function(I,X,J,ae){for(var fe=2*Math.PI,Se=Math.PI/2;X>J;)X-=fe;var Ee=Math.abs(J-X);Ee<fe&&ae&&(Ee=fe-Ee);for(var Ce=[],$e=ae?-1:1,ke=X;Ee>1e-5;){var he=ke+$e*Math.min(Ee,Se);Ce.push(ce.call(this,I,ke,he)),Ee-=Math.abs(he-ke),ke=he}return Ce},ce=function(I,X,J){var ae=(J-X)/2,fe=I*Math.cos(ae),Se=I*Math.sin(ae),Ee=fe,Ce=-Se,$e=Ee*Ee+Ce*Ce,ke=$e+Ee*fe+Ce*Se,he=4/3*(Math.sqrt(2*$e*ke)-ke)/(Ee*Se-Ce*fe),De=Ee-he*Ce,ze=Ce+he*Ee,pe=De,K=-ze,tt=ae+X,Ze=Math.cos(tt),Ne=Math.sin(tt);return{x1:I*Math.cos(X),y1:I*Math.sin(X),x2:De*Ze-ze*Ne,y2:De*Ne+ze*Ze,x3:pe*Ze-K*Ne,y3:pe*Ne+K*Ze,x4:I*Math.cos(J),y4:I*Math.sin(J)}},W=function(I){return 180*I/Math.PI},Y=function(I,X,J,ae,fe,Se){var Ee=I+.5*(J-I),Ce=X+.5*(ae-X),$e=fe+.5*(J-fe),ke=Se+.5*(ae-Se),he=Math.min(I,fe,Ee,$e),De=Math.max(I,fe,Ee,$e),ze=Math.min(X,Se,Ce,ke),pe=Math.max(X,Se,Ce,ke);return new a(he,ze,De-he,pe-ze)},j=function(I,X,J,ae,fe,Se,Ee,Ce){var $e,ke,he,De,ze,pe,K,tt,Ze,Ne,Ke,ft,vt,ue,Q=J-I,Pe=ae-X,et=fe-J,Qe=Se-ae,dt=Ee-fe,lt=Ce-Se;for(ke=0;ke<41;ke++)Ze=(K=(he=I+($e=ke/40)*Q)+$e*((ze=J+$e*et)-he))+$e*(ze+$e*(fe+$e*dt-ze)-K),Ne=(tt=(De=X+$e*Pe)+$e*((pe=ae+$e*Qe)-De))+$e*(pe+$e*(Se+$e*lt-pe)-tt),ke==0?(Ke=Ze,ft=Ne,vt=Ze,ue=Ne):(Ke=Math.min(Ke,Ze),ft=Math.min(ft,Ne),vt=Math.max(vt,Ze),ue=Math.max(ue,Ne));return new a(Math.round(Ke),Math.round(ft),Math.round(vt-Ke),Math.round(ue-ft))},re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var I,X,J=(I=this.ctx.lineDash,X=this.ctx.lineDashOffset,JSON.stringify({lineDash:I,lineDashOffset:X}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(wn.API),function(t){var e=function(s){var o,a,l,u,c,h,f,d,v,x;for(a=[],l=0,u=(s+=o="\0\0\0\0".slice(s.length%4||4)).length;u>l;l+=4)(c=(s.charCodeAt(l)<<24)+(s.charCodeAt(l+1)<<16)+(s.charCodeAt(l+2)<<8)+s.charCodeAt(l+3))!==0?(h=(c=((c=((c=((c=(c-(x=c%85))/85)-(v=c%85))/85)-(d=c%85))/85)-(f=c%85))/85)%85,a.push(h+33,f+33,d+33,v+33,x+33)):a.push(122);return function(w,g){for(var S=g;S>0;S--)w.pop()}(a,o.length),String.fromCharCode.apply(String,a)+"~>"},n=function(s){var o,a,l,u,c,h=String,f="length",d=255,v="charCodeAt",x="slice",w="replace";for(s[x](-2),s=s[x](0,-2)[w](/\s/g,"")[w]("z","!!!!!"),l=[],u=0,c=(s+=o="uuuuu"[x](s[f]%5||5))[f];c>u;u+=5)a=52200625*(s[v](u)-33)+614125*(s[v](u+1)-33)+7225*(s[v](u+2)-33)+85*(s[v](u+3)-33)+(s[v](u+4)-33),l.push(d&a>>24,d&a>>16,d&a>>8,d&a);return function(g,S){for(var _=S;_>0;_--)g.pop()}(l,o[f]),h.fromCharCode.apply(h,l)},r=function(s){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((s=s.replace(/\s/g,"")).indexOf(">")!==-1&&(s=s.substr(0,s.indexOf(">"))),s.length%2&&(s+="0"),o.test(s)===!1)return"";for(var a="",l=0;l<s.length;l+=2)a+=String.fromCharCode("0x"+(s[l]+s[l+1]));return a},i=function(s){for(var o=new Uint8Array(s.length),a=s.length;a--;)o[a]=s.charCodeAt(a);return s=(o=Kb(o)).reduce(function(l,u){return l+String.fromCharCode(u)},"")};t.processDataByFilters=function(s,o){var a=0,l=s||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),a=0;a<o.length;a+=1)switch(o[a]){case"ASCII85Decode":case"/ASCII85Decode":l=n(l),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":l=e(l),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":l=r(l),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":l=l.split("").map(function(c){return("0"+c.charCodeAt().toString(16)).slice(-2)}).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":l=i(l),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[a]+'" is not implemented')}return{data:l,reverseChain:u.reverse().join(" ")}}}(wn.API),function(t){t.loadFile=function(e,n,r){return function(i,s,o){s=s!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,u,c){var h=new XMLHttpRequest,f=0,d=function(v){var x=v.length,w=[],g=String.fromCharCode;for(f=0;f<x;f+=1)w.push(g(255&v.charCodeAt(f)));return w.join("")};if(h.open("GET",l,!u),h.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(h.onload=function(){h.status===200?c(d(this.responseText)):c(void 0)}),h.send(null),u&&h.status===200)return d(h.responseText)}(i,s,o)}catch{}return a}(e,n,r)},t.loadImageFile=t.loadFile}(wn.API),function(t){function e(){return(Mn.html2canvas?Promise.resolve(Mn.html2canvas):Xb(()=>import("./html2canvas.esm-0a33ed42.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function n(){return(Mn.DOMPurify?Promise.resolve(Mn.DOMPurify):Xb(()=>import("./purify.es-7857af48.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var r=function(o){var a=Pr(o);return a==="undefined"?"undefined":a==="string"||o instanceof String?"string":a==="number"||o instanceof Number?"number":a==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":a==="object"?"object":"unknown"},i=function(o,a){var l=document.createElement(o);for(var u in a.className&&(l.className=a.className),a.innerHTML&&a.dompurify&&(l.innerHTML=a.dompurify.sanitize(a.innerHTML)),a.style)l.style[u]=a.style[u];return l},s=function o(a){var l=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),l);return u=(u=u.setProgress(1,o,1,[o])).set(a)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(o,a){return o.__proto__=a||s.prototype,o},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(o,a){return this.then(function(){switch(a=a||function(l){switch(r(l)){case"string":return"string";case"element":return l.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(n).then(function(l){return this.set({src:i("div",{innerHTML:o,dompurify:l})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},s.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},a=function l(u,c){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),f=u.firstChild;f;f=f.nextSibling)c!==!0&&f.nodeType===1&&f.nodeName==="SCRIPT"||h.appendChild(l(f,c));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h}(this.prop.src,this.opt.html2canvas.javascriptEnabled);a.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(a),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},s.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=Object.assign({},this.opt.html2canvas);return delete l.onrendered,a(this.prop.container,l)}).then(function(a){(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(e).then(function(a){var l=this.opt.jsPDF,u=this.opt.fontFaces,c=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,h=Object.assign({async:!0,allowTaint:!0,scale:c,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete h.onrendered,l.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,l.context2d.posX=this.opt.x,l.context2d.posY=this.opt.y,l.context2d.margin=this.opt.margin,l.context2d.fontFaces=u,u)for(var f=0;f<u.length;++f){var d=u[f],v=d.src.find(function(x){return x.format==="truetype"});v&&l.addFont(v.url,d.ref.name,d.ref.style)}return h.windowHeight=h.windowHeight||0,h.windowHeight=h.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):h.windowHeight,l.context2d.save(!0),a(this.prop.container,h)}).then(function(a){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(a),this.prop.canvas=a,document.body.removeChild(this.prop.overlay)})},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},s.prototype.output=function(o,a,l){return(l=l||"pdf").toLowerCase()==="img"||l.toLowerCase()==="image"?this.outputImg(o,a):this.outputPdf(o,a)},s.prototype.outputPdf=function(o,a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,a)})},s.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},s.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},s.prototype.set=function(o){if(r(o)!=="object")return this;var a=Object.keys(o||{}).map(function(l){if(l in s.template.prop)return function(){this.prop[l]=o[l]};switch(l){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[l]=o[l]}}},this);return this.then(function(){return this.thenList(a)})},s.prototype.get=function(o,a){return this.then(function(){var l=o in s.template.prop?this.prop[o]:this.opt[o];return a?a(l):l})},s.prototype.setMargin=function(o){return this.then(function(){switch(r(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},s.prototype.setPageSize=function(o){function a(l,u){return Math.floor(l*u/72*96)}return this.then(function(){(o=o||wn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:a(o.inner.width,o.k),height:a(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},s.prototype.setProgress=function(o,a,l,u){return o!=null&&(this.progress.val=o),a!=null&&(this.progress.state=a),l!=null&&(this.progress.n=l),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(o,a,l,u){return this.setProgress(o?this.progress.val+o:null,a||null,l?this.progress.n+l:null,u?this.progress.stack.concat(u):null)},s.prototype.then=function(o,a){var l=this;return this.thenCore(o,a,function(u,c){return l.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,function(h){return l.updateProgress(null,u),h}).then(u,c).then(function(h){return l.updateProgress(1),h})})},s.prototype.thenCore=function(o,a,l){l=l||Promise.prototype.then,o&&(o=o.bind(this)),a&&(a=a.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:s.convert(Object.assign({},this),Promise.prototype),c=l.call(u,o,a);return s.convert(c,this.__proto__)},s.prototype.thenExternal=function(o,a){return Promise.prototype.then.call(this,o,a)},s.prototype.thenList=function(o){var a=this;return o.forEach(function(l){a=a.thenCore(l)}),a},s.prototype.catch=function(o){o&&(o=o.bind(this));var a=Promise.prototype.catch.call(this,o);return s.convert(a,this)},s.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},s.prototype.error=function(o){return this.then(function(){throw new Error(o)})},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,wn.getPageSize=function(o,a,l){if(Pr(o)==="object"){var u=o;o=u.orientation,a=u.unit||a,l=u.format||l}a=a||"mm",l=l||"a4",o=(""+(o||"P")).toLowerCase();var c,h=(""+l).toLowerCase(),f={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(a){case"pt":c=1;break;case"mm":c=72/25.4;break;case"cm":c=72/2.54;break;case"in":c=72;break;case"px":c=.75;break;case"pc":case"em":c=12;break;case"ex":c=6;break;default:throw"Invalid unit: "+a}var d,v=0,x=0;if(f.hasOwnProperty(h))v=f[h][1]/c,x=f[h][0]/c;else try{v=l[1],x=l[0]}catch{throw new Error("Invalid format: "+l)}if(o==="p"||o==="portrait")o="p",x>v&&(d=x,x=v,v=d);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",v>x&&(d=x,x=v,v=d)}return{width:x,height:v,unit:a,k:c,orientation:o}},t.html=function(o,a){(a=a||{}).callback=a.callback||function(){},a.html2canvas=a.html2canvas||{},a.html2canvas.canvas=a.html2canvas.canvas||this.canvas,a.jsPDF=a.jsPDF||this,a.fontFaces=a.fontFaces?a.fontFaces.map(r5):null;var l=new s(a);return a.worker?l:l.from(o).doCallback()}}(wn.API),wn.API.addJS=function(t){return oC=t,this.internal.events.subscribe("postPutResources",function(){ey=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(ey+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),sC=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+oC+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){ey!==void 0&&sC!==void 0&&this.internal.out("/Names <</JavaScript "+ey+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=n.outline.render().split(/\r\n/),s=0;s<i.length;s++){var o=i[s],a=r.exec(o);if(a!=null){var l=a[1];n.internal.newObjectDeferredBegin(l,!1)}n.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,c=[];for(s=0;s<u;s++){var h=n.internal.newObject();c.push(h);var f=n.internal.getPageInfo(s+1);n.internal.write("<< /D["+f.objId+" 0 R /XYZ null null null]>> endobj")}var d=n.internal.newObject();for(n.internal.write("<< /Names [ "),s=0;s<c.length;s++)n.internal.write("(page_"+(s+1)+")"+c[s]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+d+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,i,s){var o={title:i,options:s,children:[]};return r==null&&(r=this.root),r.children.push(o),o},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var i=0;i<r.children.length;i++)this.genIds_r(r.children[i])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,s=0;s<r.children.length;s++){var o=r.children[s];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(r)),s>0&&this.line("/Prev "+this.makeRef(r.children[s-1])),s<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[s+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=n.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var u=0;u<r.children.length;u++)this.renderItems(r.children[u])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,i){for(var s=0;s<i.children.length;s++)r.count++,this.count_r(r,i.children[s]);return r.count}}])}(wn.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,r,i,s,o,a){var l,u=this.decode.DCT_DECODE,c=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=o||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(l=function(h){for(var f,d=256*h.charCodeAt(4)+h.charCodeAt(5),v=h.length,x={width:0,height:0,numcomponents:1},w=4;w<v;w+=2){if(w+=d,e.indexOf(h.charCodeAt(w+1))!==-1){f=256*h.charCodeAt(w+5)+h.charCodeAt(w+6),x={width:256*h.charCodeAt(w+7)+h.charCodeAt(w+8),height:f,numcomponents:h.charCodeAt(w+9)};break}d=256*h.charCodeAt(w+2)+h.charCodeAt(w+3)}return x}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}c={data:n,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:r,alias:i}}return c}}(wn.API);var mp,ty,aC,lC,uC,MW=function(){var t,e,n;function r(s){var o,a,l,u,c,h,f,d,v,x,w,g,S,_;for(this.data=s,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},h=null;;){switch(o=this.readUInt32(),v=function(){var T,L;for(L=[],T=0;T<4;++T)L.push(String.fromCharCode(this.data[this.pos++]));return L}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":h&&this.animation.frames.push(h),this.pos+=4,h={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},c=this.readUInt16(),u=this.readUInt16()||100,h.delay=1e3*c/u,h.disposeOp=this.data[this.pos++],h.blendOp=this.data[this.pos++],h.data=[];break;case"IDAT":case"fdAT":for(v==="fdAT"&&(this.pos+=4,o-=4),s=(h!=null?h.data:void 0)||this.imgData,g=0;0<=o?g<o:g>o;0<=o?++g:--g)s.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(l=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>l)throw new Error("More transparent colors than palette size");if((x=l-this.transparency.indexed.length)>0)for(S=0;0<=x?S<x:S>x;0<=x?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":f=(w=this.read(o)).indexOf(0),d=String.fromCharCode.apply(String,w.slice(0,f)),this.text[d]=String.fromCharCode.apply(String,w.slice(f+1));break;case"IEND":return h&&this.animation.frames.push(h),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(_=this.colorType)===4||_===6,a=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*a,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(s){var o,a;for(a=[],o=0;0<=s?o<s:o>s;0<=s?++o:--o)a.push(this.data[this.pos++]);return a},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(s){var o=this.pixelBitlength/8,a=new Uint8Array(this.width*this.height*o),l=0,u=this;if(s==null&&(s=this.imgData),s.length===0)return new Uint8Array(0);function c(h,f,d,v){var x,w,g,S,_,T,L,k,N,R,P,D,O,B,V,H,ee,se,ce,W,Y,j=Math.ceil((u.width-h)/d),re=Math.ceil((u.height-f)/v),I=u.width==j&&u.height==re;for(B=o*j,D=I?a:new Uint8Array(B*re),T=s.length,O=0,w=0;O<re&&l<T;){switch(s[l++]){case 0:for(S=ee=0;ee<B;S=ee+=1)D[w++]=s[l++];break;case 1:for(S=se=0;se<B;S=se+=1)x=s[l++],_=S<o?0:D[w-o],D[w++]=(x+_)%256;break;case 2:for(S=ce=0;ce<B;S=ce+=1)x=s[l++],g=(S-S%o)/o,V=O&&D[(O-1)*B+g*o+S%o],D[w++]=(V+x)%256;break;case 3:for(S=W=0;W<B;S=W+=1)x=s[l++],g=(S-S%o)/o,_=S<o?0:D[w-o],V=O&&D[(O-1)*B+g*o+S%o],D[w++]=(x+Math.floor((_+V)/2))%256;break;case 4:for(S=Y=0;Y<B;S=Y+=1)x=s[l++],g=(S-S%o)/o,_=S<o?0:D[w-o],O===0?V=H=0:(V=D[(O-1)*B+g*o+S%o],H=g&&D[(O-1)*B+(g-1)*o+S%o]),L=_+V-H,k=Math.abs(L-_),R=Math.abs(L-V),P=Math.abs(L-H),N=k<=R&&k<=P?_:R<=P?V:H,D[w++]=(x+N)%256;break;default:throw new Error("Invalid filter algorithm: "+s[l-1])}if(!I){var X=((f+O*v)*u.width+h)*o,J=O*B;for(S=0;S<j;S+=1){for(var ae=0;ae<o;ae+=1)a[X++]=D[J++];X+=(d-1)*o}}O++}}return s=nW(s),u.interlaceMethod==1?(c(0,0,8,8),c(4,0,8,8),c(0,4,4,8),c(2,0,4,4),c(0,2,2,4),c(1,0,2,2),c(0,1,1,2)):c(0,0,1,1),a},r.prototype.decodePalette=function(){var s,o,a,l,u,c,h,f,d;for(a=this.palette,c=this.transparency.indexed||[],u=new Uint8Array((c.length||0)+a.length),l=0,s=0,o=h=0,f=a.length;h<f;o=h+=3)u[l++]=a[o],u[l++]=a[o+1],u[l++]=a[o+2],u[l++]=(d=c[s++])!=null?d:255;return u},r.prototype.copyToImageData=function(s,o){var a,l,u,c,h,f,d,v,x,w,g;if(l=this.colors,x=null,a=this.hasAlphaChannel,this.palette.length&&(x=(g=this._decodedPalette)!=null?g:this._decodedPalette=this.decodePalette(),l=4,a=!0),v=(u=s.data||s).length,h=x||o,c=f=0,l===1)for(;c<v;)d=x?4*o[c/4]:f,w=h[d++],u[c++]=w,u[c++]=w,u[c++]=w,u[c++]=a?h[d++]:255,f=d;else for(;c<v;)d=x?4*o[c/4]:f,u[c++]=h[d++],u[c++]=h[d++],u[c++]=h[d++],u[c++]=a?h[d++]:255,f=d},r.prototype.decode=function(){var s;return s=new Uint8Array(this.width*this.height*4),this.copyToImageData(s,this.decodePixels()),s};var i=function(){if(Object.prototype.toString.call(Mn)==="[object Window]"){try{e=Mn.document.createElement("canvas"),n=e.getContext("2d")}catch{return!1}return!0}return!1};return i(),t=function(s){var o;if(i()===!0)return n.width=s.width,n.height=s.height,n.clearRect(0,0,s.width,s.height),n.putImageData(s,0,0),(o=new Image).src=e.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(s){var o,a,l,u,c,h,f,d;if(this.animation){for(d=[],a=c=0,h=(f=this.animation.frames).length;c<h;a=++c)o=f[a],l=s.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(l,u),o.imageData=l,d.push(o.image=t(l));return d}},r.prototype.renderFrame=function(s,o){var a,l,u;return a=(l=this.animation.frames)[o],u=l[o-1],o===0&&s.clearRect(0,0,this.width,this.height),(u!=null?u.disposeOp:void 0)===1?s.clearRect(u.xOffset,u.yOffset,u.width,u.height):(u!=null?u.disposeOp:void 0)===2&&s.putImageData(u.imageData,u.xOffset,u.yOffset),a.blendOp===0&&s.clearRect(a.xOffset,a.yOffset,a.width,a.height),s.drawImage(a.image,a.xOffset,a.yOffset)},r.prototype.animate=function(s){var o,a,l,u,c,h,f=this;return a=0,h=this.animation,u=h.numFrames,l=h.frames,c=h.numPlays,(o=function(){var d,v;if(d=a++%u,v=l[d],f.renderFrame(s,d),u>1&&a/u<c)return f.animation._timeout=setTimeout(o,v.delay)})()},r.prototype.stopAnimation=function(){var s;return clearTimeout((s=this.animation)!=null?s._timeout:void 0)},r.prototype.render=function(s){var o,a;return s._png&&s._png.stopAnimation(),s._png=this,s.width=this.width,s.height=this.height,o=s.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(a=o.createImageData(this.width,this.height),this.copyToImageData(a,this.decodePixels()),o.putImageData(a,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function EW(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,i=t[e++],s=i>>7,o=1<<(7&i)+1;t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var u=!0,c=[],h=0,f=null,d=0,v=null;for(this.width=n,this.height=r;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,v=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((O=t[e++])>=0))throw Error("Invalid block size");if(O===0)break;e+=O}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var x=t[e++];h=t[e++]|t[e++]<<8,f=t[e++],!(1&x)&&(f=null),d=x>>2&7,e++;break;case 254:for(;;){if(!((O=t[e++])>=0))throw Error("Invalid block size");if(O===0)break;e+=O}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var w=t[e++]|t[e++]<<8,g=t[e++]|t[e++]<<8,S=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,T=t[e++],L=T>>6&1,k=1<<(7&T)+1,N=a,R=l,P=!1;T>>7&&(P=!0,N=e,R=k,e+=3*k);var D=e;for(e++;;){var O;if(!((O=t[e++])>=0))throw Error("Invalid block size");if(O===0)break;e+=O}c.push({x:w,y:g,width:S,height:_,has_local_palette:P,palette_offset:N,palette_size:R,data_offset:D,data_length:e-D,transparent_index:f,interlaced:!!L,delay:h,disposal:d});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return c.length},this.loopCount=function(){return v},this.frameInfo=function(B){if(B<0||B>=c.length)throw new Error("Frame index out of range.");return c[B]},this.decodeAndBlitFrameBGRA=function(B,V){var H=this.frameInfo(B),ee=H.width*H.height,se=new Uint8Array(ee);cC(t,H.data_offset,se,ee);var ce=H.palette_offset,W=H.transparent_index;W===null&&(W=256);var Y=H.width,j=n-Y,re=Y,I=4*(H.y*n+H.x),X=4*((H.y+H.height)*n+H.x),J=I,ae=4*j;H.interlaced===!0&&(ae+=4*n*7);for(var fe=8,Se=0,Ee=se.length;Se<Ee;++Se){var Ce=se[Se];if(re===0&&(re=Y,(J+=ae)>=X&&(ae=4*j+4*n*(fe-1),J=I+(Y+j)*(fe<<1),fe>>=1)),Ce===W)J+=4;else{var $e=t[ce+3*Ce],ke=t[ce+3*Ce+1],he=t[ce+3*Ce+2];V[J++]=he,V[J++]=ke,V[J++]=$e,V[J++]=255}--re}},this.decodeAndBlitFrameRGBA=function(B,V){var H=this.frameInfo(B),ee=H.width*H.height,se=new Uint8Array(ee);cC(t,H.data_offset,se,ee);var ce=H.palette_offset,W=H.transparent_index;W===null&&(W=256);var Y=H.width,j=n-Y,re=Y,I=4*(H.y*n+H.x),X=4*((H.y+H.height)*n+H.x),J=I,ae=4*j;H.interlaced===!0&&(ae+=4*n*7);for(var fe=8,Se=0,Ee=se.length;Se<Ee;++Se){var Ce=se[Se];if(re===0&&(re=Y,(J+=ae)>=X&&(ae=4*j+4*n*(fe-1),J=I+(Y+j)*(fe<<1),fe>>=1)),Ce===W)J+=4;else{var $e=t[ce+3*Ce],ke=t[ce+3*Ce+1],he=t[ce+3*Ce+2];V[J++]=$e,V[J++]=ke,V[J++]=he,V[J++]=255}--re}}}function cC(t,e,n,r){for(var i=t[e++],s=1<<i,o=s+1,a=o+1,l=i+1,u=(1<<l)-1,c=0,h=0,f=0,d=t[e++],v=new Int32Array(4096),x=null;;){for(;c<16&&d!==0;)h|=t[e++]<<c,c+=8,d===1?d=t[e++]:--d;if(c<l)break;var w=h&u;if(h>>=l,c-=l,w!==s){if(w===o)break;for(var g=w<a?w:x,S=0,_=g;_>s;)_=v[_]>>8,++S;var T=_;if(f+S+(g!==w?1:0)>r)return void Dr.log("Warning, gif stream longer than expected.");n[f++]=T;var L=f+=S;for(g!==w&&(n[f++]=T),_=g;S--;)_=v[_],n[--L]=255&_,_>>=8;x!==null&&a<4096&&(v[a++]=x<<8|T,a>=u+1&&l<12&&(++l,u=u<<1|1)),x=w}else a=o+1,u=(1<<(l=i+1))-1,x=null}return f!==r&&Dr.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function LS(t){var e,n,r,i,s,o=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),c=new Array(64),h=new Array(65535),f=new Array(65535),d=new Array(64),v=new Array(64),x=[],w=0,g=7,S=new Array(64),_=new Array(64),T=new Array(64),L=new Array(256),k=new Array(2048),N=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],R=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],O=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],H=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ee=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(I,X){for(var J=0,ae=0,fe=new Array,Se=1;Se<=16;Se++){for(var Ee=1;Ee<=I[Se];Ee++)fe[X[ae]]=[],fe[X[ae]][0]=J,fe[X[ae]][1]=Se,ae++,J++;J*=2}return fe}function ce(I){for(var X=I[0],J=I[1]-1;J>=0;)X&1<<J&&(w|=1<<g),J--,--g<0&&(w==255?(W(255),W(0)):W(w),g=7,w=0)}function W(I){x.push(I)}function Y(I){W(I>>8&255),W(255&I)}function j(I,X,J,ae,fe){for(var Se,Ee=fe[0],Ce=fe[240],$e=function(Ne,Ke){var ft,vt,ue,Q,Pe,et,Qe,dt,lt,it,Te=0;for(lt=0;lt<8;++lt){ft=Ne[Te],vt=Ne[Te+1],ue=Ne[Te+2],Q=Ne[Te+3],Pe=Ne[Te+4],et=Ne[Te+5],Qe=Ne[Te+6];var Nt=ft+(dt=Ne[Te+7]),At=ft-dt,Ct=vt+Qe,bt=vt-Qe,xe=ue+et,Ye=ue-et,st=Q+Pe,Ae=Q-Pe,Fe=Nt+st,Ge=Nt-st,yt=Ct+xe,pt=Ct-xe;Ne[Te]=Fe+yt,Ne[Te+4]=Fe-yt;var kt=.707106781*(pt+Ge);Ne[Te+2]=Ge+kt,Ne[Te+6]=Ge-kt;var Vt=.382683433*((Fe=Ae+Ye)-(pt=bt+At)),yn=.5411961*Fe+Vt,Nn=1.306562965*pt+Vt,gn=.707106781*(yt=Ye+bt),kn=At+gn,Ft=At-gn;Ne[Te+5]=Ft+yn,Ne[Te+3]=Ft-yn,Ne[Te+1]=kn+Nn,Ne[Te+7]=kn-Nn,Te+=8}for(Te=0,lt=0;lt<8;++lt){ft=Ne[Te],vt=Ne[Te+8],ue=Ne[Te+16],Q=Ne[Te+24],Pe=Ne[Te+32],et=Ne[Te+40],Qe=Ne[Te+48];var Vr=ft+(dt=Ne[Te+56]),Ir=ft-dt,Zn=vt+Qe,vn=vt-Qe,$n=ue+et,Wn=ue-et,pn=Q+Pe,Wr=Q-Pe,oi=Vr+pn,q=Vr-pn,U=Zn+$n,ne=Zn-$n;Ne[Te]=oi+U,Ne[Te+32]=oi-U;var me=.707106781*(ne+q);Ne[Te+16]=q+me,Ne[Te+48]=q-me;var de=.382683433*((oi=Wr+Wn)-(ne=vn+Ir)),we=.5411961*oi+de,Xe=1.306562965*ne+de,qe=.707106781*(U=Wn+vn),ot=Ir+qe,rt=Ir-qe;Ne[Te+40]=rt+we,Ne[Te+24]=rt-we,Ne[Te+8]=ot+Xe,Ne[Te+56]=ot-Xe,Te++}for(lt=0;lt<64;++lt)it=Ne[lt]*Ke[lt],d[lt]=it>0?it+.5|0:it-.5|0;return d}(I,X),ke=0;ke<64;++ke)v[N[ke]]=$e[ke];var he=v[0]-J;J=v[0],he==0?ce(ae[0]):(ce(ae[f[Se=32767+he]]),ce(h[Se]));for(var De=63;De>0&&v[De]==0;)De--;if(De==0)return ce(Ee),J;for(var ze,pe=1;pe<=De;){for(var K=pe;v[pe]==0&&pe<=De;)++pe;var tt=pe-K;if(tt>=16){ze=tt>>4;for(var Ze=1;Ze<=ze;++Ze)ce(Ce);tt&=15}Se=32767+v[pe],ce(fe[(tt<<4)+f[Se]]),ce(h[Se]),pe++}return De!=63&&ce(Ee),J}function re(I){I=Math.min(Math.max(I,1),100),s!=I&&(function(X){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ae=0;ae<64;ae++){var fe=o((J[ae]*X+50)/100);fe=Math.min(Math.max(fe,1),255),a[N[ae]]=fe}for(var Se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ee=0;Ee<64;Ee++){var Ce=o((Se[Ee]*X+50)/100);Ce=Math.min(Math.max(Ce,1),255),l[N[Ee]]=Ce}for(var $e=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ke=0,he=0;he<8;he++)for(var De=0;De<8;De++)u[ke]=1/(a[N[ke]]*$e[he]*$e[De]*8),c[ke]=1/(l[N[ke]]*$e[he]*$e[De]*8),ke++}(I<50?Math.floor(5e3/I):Math.floor(200-2*I)),s=I)}this.encode=function(I,X){X&&re(X),x=new Array,w=0,g=7,Y(65496),Y(65504),Y(16),W(74),W(70),W(73),W(70),W(0),W(1),W(1),W(0),Y(1),Y(1),W(0),W(0),function(){Y(65499),Y(132),W(0);for(var vt=0;vt<64;vt++)W(a[vt]);W(1);for(var ue=0;ue<64;ue++)W(l[ue])}(),function(vt,ue){Y(65472),Y(17),W(8),Y(ue),Y(vt),W(3),W(1),W(17),W(0),W(2),W(17),W(1),W(3),W(17),W(1)}(I.width,I.height),function(){Y(65476),Y(418),W(0);for(var vt=0;vt<16;vt++)W(R[vt+1]);for(var ue=0;ue<=11;ue++)W(P[ue]);W(16);for(var Q=0;Q<16;Q++)W(D[Q+1]);for(var Pe=0;Pe<=161;Pe++)W(O[Pe]);W(1);for(var et=0;et<16;et++)W(B[et+1]);for(var Qe=0;Qe<=11;Qe++)W(V[Qe]);W(17);for(var dt=0;dt<16;dt++)W(H[dt+1]);for(var lt=0;lt<=161;lt++)W(ee[lt])}(),Y(65498),Y(12),W(3),W(1),W(0),W(2),W(17),W(3),W(17),W(0),W(63),W(0);var J=0,ae=0,fe=0;w=0,g=7,this.encode.displayName="_encode_";for(var Se,Ee,Ce,$e,ke,he,De,ze,pe,K=I.data,tt=I.width,Ze=I.height,Ne=4*tt,Ke=0;Ke<Ze;){for(Se=0;Se<Ne;){for(ke=Ne*Ke+Se,De=-1,ze=0,pe=0;pe<64;pe++)he=ke+(ze=pe>>3)*Ne+(De=4*(7&pe)),Ke+ze>=Ze&&(he-=Ne*(Ke+1+ze-Ze)),Se+De>=Ne&&(he-=Se+De-Ne+4),Ee=K[he++],Ce=K[he++],$e=K[he++],S[pe]=(k[Ee]+k[Ce+256>>0]+k[$e+512>>0]>>16)-128,_[pe]=(k[Ee+768>>0]+k[Ce+1024>>0]+k[$e+1280>>0]>>16)-128,T[pe]=(k[Ee+1280>>0]+k[Ce+1536>>0]+k[$e+1792>>0]>>16)-128;J=j(S,u,J,e,r),ae=j(_,c,ae,n,i),fe=j(T,c,fe,n,i),Se+=32}Ke+=8}if(g>=0){var ft=[];ft[1]=g+1,ft[0]=(1<<g+1)-1,ce(ft)}return Y(65497),new Uint8Array(x)},t=t||50,function(){for(var I=String.fromCharCode,X=0;X<256;X++)L[X]=I(X)}(),e=se(R,P),n=se(B,V),r=se(D,O),i=se(H,ee),function(){for(var I=1,X=2,J=1;J<=15;J++){for(var ae=I;ae<X;ae++)f[32767+ae]=J,h[32767+ae]=[],h[32767+ae][1]=J,h[32767+ae][0]=ae;for(var fe=-(X-1);fe<=-I;fe++)f[32767+fe]=J,h[32767+fe]=[],h[32767+fe][1]=J,h[32767+fe][0]=X-1+fe;I<<=1,X<<=1}}(),function(){for(var I=0;I<256;I++)k[I]=19595*I,k[I+256>>0]=38470*I,k[I+512>>0]=7471*I+32768,k[I+768>>0]=-11059*I,k[I+1024>>0]=-21709*I,k[I+1280>>0]=32768*I+8421375,k[I+1536>>0]=-27439*I,k[I+1792>>0]=-5329*I}(),re(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function hl(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function hC(t){function e(R){if(!R)throw Error("assert :P")}function n(R,P,D){for(var O=0;4>O;O++)if(R[P+O]!=D.charCodeAt(O))return!0;return!1}function r(R,P,D,O,B){for(var V=0;V<B;V++)R[P+V]=D[O+V]}function i(R,P,D,O){for(var B=0;B<O;B++)R[P+B]=D}function s(R){return new Int32Array(R)}function o(R,P){for(var D=[],O=0;O<R;O++)D.push(new P);return D}function a(R,P){var D=[];return function O(B,V,H){for(var ee=H[V],se=0;se<ee&&(B.push(H.length>V+1?[]:new P),!(H.length<V+1));se++)O(B[se],V+1,H)}(D,0,R),D}var l=function(){var R=this;function P(y,M){for(var C=1<<M-1>>>0;y&C;)C>>>=1;return C?(y&C-1)+C:y}function D(y,M,C,z,Z){e(!(z%C));do y[M+(z-=C)]=Z;while(0<z)}function O(y,M,C,z,Z){if(e(2328>=Z),512>=Z)var te=s(512);else if((te=s(Z))==null)return 0;return function(ie,oe,le,ve,ye,We){var je,Ue,_t=oe,nt=1<<le,Re=s(16),Ie=s(16);for(e(ye!=0),e(ve!=null),e(ie!=null),e(0<le),Ue=0;Ue<ye;++Ue){if(15<ve[Ue])return 0;++Re[ve[Ue]]}if(Re[0]==ye)return 0;for(Ie[1]=0,je=1;15>je;++je){if(Re[je]>1<<je)return 0;Ie[je+1]=Ie[je]+Re[je]}for(Ue=0;Ue<ye;++Ue)je=ve[Ue],0<ve[Ue]&&(We[Ie[je]++]=Ue);if(Ie[15]==1)return(ve=new B).g=0,ve.value=We[0],D(ie,_t,1,nt,ve),nt;var xt,Mt=-1,St=nt-1,qt=0,Ut=1,mn=1,Bt=1<<le;for(Ue=0,je=1,ye=2;je<=le;++je,ye<<=1){if(Ut+=mn<<=1,0>(mn-=Re[je]))return 0;for(;0<Re[je];--Re[je])(ve=new B).g=je,ve.value=We[Ue++],D(ie,_t+qt,ye,Bt,ve),qt=P(qt,je)}for(je=le+1,ye=2;15>=je;++je,ye<<=1){if(Ut+=mn<<=1,0>(mn-=Re[je]))return 0;for(;0<Re[je];--Re[je]){if(ve=new B,(qt&St)!=Mt){for(_t+=Bt,xt=1<<(Mt=je)-le;15>Mt&&!(0>=(xt-=Re[Mt]));)++Mt,xt<<=1;nt+=Bt=1<<(xt=Mt-le),ie[oe+(Mt=qt&St)].g=xt+le,ie[oe+Mt].value=_t-oe-Mt}ve.g=je-le,ve.value=We[Ue++],D(ie,_t+(qt>>le),ye,Bt,ve),qt=P(qt,je)}}return Ut!=2*Ie[15]-1?0:nt}(y,M,C,z,Z,te)}function B(){this.value=this.g=0}function V(){this.value=this.g=0}function H(){this.G=o(5,B),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ki,V)}function ee(y,M,C,z){e(y!=null),e(M!=null),e(2147483648>z),y.Ca=254,y.I=0,y.b=-8,y.Ka=0,y.oa=M,y.pa=C,y.Jd=M,y.Yc=C+z,y.Zc=4<=z?C+z-4+1:C,Se(y)}function se(y,M){for(var C=0;0<M--;)C|=Ce(y,128)<<M;return C}function ce(y,M){var C=se(y,M);return Ee(y)?-C:C}function W(y,M,C,z){var Z,te=0;for(e(y!=null),e(M!=null),e(4294967288>z),y.Sb=z,y.Ra=0,y.u=0,y.h=0,4<z&&(z=4),Z=0;Z<z;++Z)te+=M[C+Z]<<8*Z;y.Ra=te,y.bb=z,y.oa=M,y.pa=C}function Y(y){for(;8<=y.u&&y.bb<y.Sb;)y.Ra>>>=8,y.Ra+=y.oa[y.pa+y.bb]<<Xo-8>>>0,++y.bb,y.u-=8;J(y)&&(y.h=1,y.u=0)}function j(y,M){if(e(0<=M),!y.h&&M<=wa){var C=X(y)&_u[M];return y.u+=M,Y(y),C}return y.h=1,y.u=0}function re(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function I(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function X(y){return y.Ra>>>(y.u&Xo-1)>>>0}function J(y){return e(y.bb<=y.Sb),y.h||y.bb==y.Sb&&y.u>Xo}function ae(y,M){y.u=M,y.h=J(y)}function fe(y){y.u>=bu&&(e(y.u>=bu),Y(y))}function Se(y){e(y!=null&&y.oa!=null),y.pa<y.Zc?(y.I=(y.oa[y.pa++]|y.I<<8)>>>0,y.b+=8):(e(y!=null&&y.oa!=null),y.pa<y.Yc?(y.b+=8,y.I=y.oa[y.pa++]|y.I<<8):y.Ka?y.b=0:(y.I<<=8,y.b+=8,y.Ka=1))}function Ee(y){return se(y,1)}function Ce(y,M){var C=y.Ca;0>y.b&&Se(y);var z=y.b,Z=C*M>>>8,te=(y.I>>>z>Z)+0;for(te?(C-=Z,y.I-=Z+1<<z>>>0):C=Z+1,z=C,Z=0;256<=z;)Z+=8,z>>=8;return z=7^Z+Gi[z],y.b-=z,y.Ca=(C<<z)-1,te}function $e(y,M,C){y[M+0]=C>>24&255,y[M+1]=C>>16&255,y[M+2]=C>>8&255,y[M+3]=C>>0&255}function ke(y,M){return y[M+0]<<0|y[M+1]<<8}function he(y,M){return ke(y,M)|y[M+2]<<16}function De(y,M){return ke(y,M)|ke(y,M+2)<<16}function ze(y,M){var C=1<<M;return e(y!=null),e(0<M),y.X=s(C),y.X==null?0:(y.Mb=32-M,y.Xa=M,1)}function pe(y,M){e(y!=null),e(M!=null),e(y.Xa==M.Xa),r(M.X,0,y.X,0,1<<M.Xa)}function K(){this.X=[],this.Xa=this.Mb=0}function tt(y,M,C,z){e(C!=null),e(z!=null);var Z=C[0],te=z[0];return Z==0&&(Z=(y*te+M/2)/M),te==0&&(te=(M*Z+y/2)/y),0>=Z||0>=te?0:(C[0]=Z,z[0]=te,1)}function Ze(y,M){return y+(1<<M)-1>>>M}function Ne(y,M){return((4278255360&y)+(4278255360&M)>>>0&4278255360)+((16711935&y)+(16711935&M)>>>0&16711935)>>>0}function Ke(y,M){R[M]=function(C,z,Z,te,ie,oe,le){var ve;for(ve=0;ve<ie;++ve){var ye=R[y](oe[le+ve-1],Z,te+ve);oe[le+ve]=Ne(C[z+ve],ye)}}}function ft(){this.ud=this.hd=this.jd=0}function vt(y,M){return((4278124286&(y^M))>>>1)+(y&M)>>>0}function ue(y){return 0<=y&&256>y?y:0>y?0:255<y?255:void 0}function Q(y,M){return ue(y+(y-M+.5>>1))}function Pe(y,M,C){return Math.abs(M-C)-Math.abs(y-C)}function et(y,M,C,z,Z,te,ie){for(z=te[ie-1],C=0;C<Z;++C)te[ie+C]=z=Ne(y[M+C],z)}function Qe(y,M,C,z,Z){var te;for(te=0;te<C;++te){var ie=y[M+te],oe=ie>>8&255,le=16711935&(le=(le=16711935&ie)+((oe<<16)+oe));z[Z+te]=(4278255360&ie)+le>>>0}}function dt(y,M){M.jd=y>>0&255,M.hd=y>>8&255,M.ud=y>>16&255}function lt(y,M,C,z,Z,te){var ie;for(ie=0;ie<z;++ie){var oe=M[C+ie],le=oe>>>8,ve=oe,ye=255&(ye=(ye=oe>>>16)+((y.jd<<24>>24)*(le<<24>>24)>>>5));ve=255&(ve=(ve=ve+((y.hd<<24>>24)*(le<<24>>24)>>>5))+((y.ud<<24>>24)*(ye<<24>>24)>>>5)),Z[te+ie]=(4278255360&oe)+(ye<<16)+ve}}function it(y,M,C,z,Z){R[M]=function(te,ie,oe,le,ve,ye,We,je,Ue){for(le=We;le<je;++le)for(We=0;We<Ue;++We)ve[ye++]=Z(oe[z(te[ie++])])},R[y]=function(te,ie,oe,le,ve,ye,We){var je=8>>te.b,Ue=te.Ea,_t=te.K[0],nt=te.w;if(8>je)for(te=(1<<te.b)-1,nt=(1<<je)-1;ie<oe;++ie){var Re,Ie=0;for(Re=0;Re<Ue;++Re)Re&te||(Ie=z(le[ve++])),ye[We++]=Z(_t[Ie&nt]),Ie>>=je}else R["VP8LMapColor"+C](le,ve,_t,nt,ye,We,ie,oe,Ue)}}function Te(y,M,C,z,Z){for(C=M+C;M<C;){var te=y[M++];z[Z++]=te>>16&255,z[Z++]=te>>8&255,z[Z++]=te>>0&255}}function Nt(y,M,C,z,Z){for(C=M+C;M<C;){var te=y[M++];z[Z++]=te>>16&255,z[Z++]=te>>8&255,z[Z++]=te>>0&255,z[Z++]=te>>24&255}}function At(y,M,C,z,Z){for(C=M+C;M<C;){var te=(ie=y[M++])>>16&240|ie>>12&15,ie=ie>>0&240|ie>>28&15;z[Z++]=te,z[Z++]=ie}}function Ct(y,M,C,z,Z){for(C=M+C;M<C;){var te=(ie=y[M++])>>16&248|ie>>13&7,ie=ie>>5&224|ie>>3&31;z[Z++]=te,z[Z++]=ie}}function bt(y,M,C,z,Z){for(C=M+C;M<C;){var te=y[M++];z[Z++]=te>>0&255,z[Z++]=te>>8&255,z[Z++]=te>>16&255}}function xe(y,M,C,z,Z,te){if(te==0)for(C=M+C;M<C;)$e(z,((te=y[M++])[0]>>24|te[1]>>8&65280|te[2]<<8&16711680|te[3]<<24)>>>0),Z+=32;else r(z,Z,y,M,C)}function Ye(y,M){R[M][0]=R[y+"0"],R[M][1]=R[y+"1"],R[M][2]=R[y+"2"],R[M][3]=R[y+"3"],R[M][4]=R[y+"4"],R[M][5]=R[y+"5"],R[M][6]=R[y+"6"],R[M][7]=R[y+"7"],R[M][8]=R[y+"8"],R[M][9]=R[y+"9"],R[M][10]=R[y+"10"],R[M][11]=R[y+"11"],R[M][12]=R[y+"12"],R[M][13]=R[y+"13"],R[M][14]=R[y+"0"],R[M][15]=R[y+"0"]}function st(y){return y==Ed||y==Ad||y==Rc||y==Td}function Ae(){this.eb=[],this.size=this.A=this.fb=0}function Fe(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ge(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ae,this.f.kb=new Fe,this.sd=null}function yt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function pt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function kt(y){return alert("todo:WebPSamplerProcessPlane"),y.T}function Vt(y,M){var C=y.T,z=M.ba.f.RGBA,Z=z.eb,te=z.fb+y.ka*z.A,ie=ds[M.ba.S],oe=y.y,le=y.O,ve=y.f,ye=y.N,We=y.ea,je=y.W,Ue=M.cc,_t=M.dc,nt=M.Mc,Re=M.Nc,Ie=y.ka,xt=y.ka+y.T,Mt=y.U,St=Mt+1>>1;for(Ie==0?ie(oe,le,null,null,ve,ye,We,je,ve,ye,We,je,Z,te,null,null,Mt):(ie(M.ec,M.fc,oe,le,Ue,_t,nt,Re,ve,ye,We,je,Z,te-z.A,Z,te,Mt),++C);Ie+2<xt;Ie+=2)Ue=ve,_t=ye,nt=We,Re=je,ye+=y.Rc,je+=y.Rc,te+=2*z.A,ie(oe,(le+=2*y.fa)-y.fa,oe,le,Ue,_t,nt,Re,ve,ye,We,je,Z,te-z.A,Z,te,Mt);return le+=y.fa,y.j+xt<y.o?(r(M.ec,M.fc,oe,le,Mt),r(M.cc,M.dc,ve,ye,St),r(M.Mc,M.Nc,We,je,St),C--):1&xt||ie(oe,le,null,null,ve,ye,We,je,ve,ye,We,je,Z,te+z.A,null,null,Mt),C}function yn(y,M,C){var z=y.F,Z=[y.J];if(z!=null){var te=y.U,ie=M.ba.S,oe=ie==Vl||ie==Rc;M=M.ba.f.RGBA;var le=[0],ve=y.ka;le[0]=y.T,y.Kb&&(ve==0?--le[0]:(--ve,Z[0]-=y.width),y.j+y.ka+y.T==y.o&&(le[0]=y.o-y.j-ve));var ye=M.eb;ve=M.fb+ve*M.A,y=hr(z,Z[0],y.width,te,le,ye,ve+(oe?0:3),M.A),e(C==le),y&&st(ie)&&_i(ye,ve,oe,te,le,M.A)}return 0}function Nn(y){var M=y.ma,C=M.ba.S,z=11>C,Z=C==Cu||C==Pc||C==Vl||C==Md||C==12||st(C);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!Mc(M.Oa,y,Z?11:12))return 0;if(Z&&st(C)&&Et(),y.da)alert("todo:use_scaling");else{if(z){if(M.Ib=kt,y.Kb){if(C=y.U+1>>1,M.memory=s(y.U+2*C),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+y.U,M.Mc=M.cc,M.Nc=M.dc+C,M.Ib=Vt,Et()}}else alert("todo:EmitYUV");Z&&(M.Jb=yn,z&&Ve())}if(z&&!Gm){for(y=0;256>y;++y)Vm[y]=89858*(y-128)+Wi>>ps,Fv[y]=-22014*(y-128)+Wi,Wm[y]=-45773*(y-128),Nv[y]=113618*(y-128)+Wi>>ps;for(y=Nc;y<kd;++y)M=76283*(y-16)+Wi>>ps,Dv[y-Nc]=Es(M,255),Id[y-Nc]=Es(M+8>>4,15);Gm=1}return 1}function gn(y){var M=y.ma,C=y.U,z=y.T;return e(!(1&y.ka)),0>=C||0>=z?0:(C=M.Ib(y,M),M.Jb!=null&&M.Jb(y,M,C),M.Dc+=C,1)}function kn(y){y.ma.memory=null}function Ft(y,M,C,z){return j(y,8)!=47?0:(M[0]=j(y,14)+1,C[0]=j(y,14)+1,z[0]=j(y,1),j(y,3)!=0?0:!y.h)}function Vr(y,M){if(4>y)return y+1;var C=y-2>>1;return(2+(1&y)<<C)+j(M,C)+1}function Ir(y,M){return 120<M?M-120:1<=(C=((C=Tv[M-1])>>4)*y+(8-(15&C)))?C:1;var C}function Zn(y,M,C){var z=X(C),Z=y[M+=255&z].g-8;return 0<Z&&(ae(C,C.u+8),z=X(C),M+=y[M].value,M+=z&(1<<Z)-1),ae(C,C.u+y[M].g),y[M].value}function vn(y,M,C){return C.g+=y.g,C.value+=y.value<<M>>>0,e(8>=C.g),y.g}function $n(y,M,C){var z=y.xc;return e((M=z==0?0:y.vc[y.md*(C>>z)+(M>>z)])<y.Wb),y.Ya[M]}function Wn(y,M,C,z){var Z=y.ab,te=y.c*M,ie=y.C;M=ie+M;var oe=C,le=z;for(z=y.Ta,C=y.Ua;0<Z--;){var ve=y.gc[Z],ye=ie,We=M,je=oe,Ue=le,_t=(le=z,oe=C,ve.Ea);switch(e(ye<We),e(We<=ve.nc),ve.hc){case 2:Jh(je,Ue,(We-ye)*_t,le,oe);break;case 0:var nt=ye,Re=We,Ie=le,xt=oe,Mt=(Bt=ve).Ea;nt==0&&(Ac(je,Ue,null,null,1,Ie,xt),et(je,Ue+1,0,0,Mt-1,Ie,xt+1),Ue+=Mt,xt+=Mt,++nt);for(var St=1<<Bt.b,qt=St-1,Ut=Ze(Mt,Bt.b),mn=Bt.K,Bt=Bt.w+(nt>>Bt.b)*Ut;nt<Re;){var lr=mn,vr=Bt,rr=1;for(Tc(je,Ue,Ie,xt-Mt,1,Ie,xt);rr<Mt;){var Xn=(rr&~qt)+St;Xn>Mt&&(Xn=Mt),(0,Mo[lr[vr++]>>8&15])(je,Ue+ +rr,Ie,xt+rr-Mt,Xn-rr,Ie,xt+rr),rr=Xn}Ue+=Mt,xt+=Mt,++nt&qt||(Bt+=Ut)}We!=ve.nc&&r(le,oe-_t,le,oe+(We-ye-1)*_t,_t);break;case 1:for(_t=je,Re=Ue,Mt=(je=ve.Ea)-(xt=je&~(Ie=(Ue=1<<ve.b)-1)),nt=Ze(je,ve.b),St=ve.K,ve=ve.w+(ye>>ve.b)*nt;ye<We;){for(qt=St,Ut=ve,mn=new ft,Bt=Re+xt,lr=Re+je;Re<Bt;)dt(qt[Ut++],mn),Eo(mn,_t,Re,Ue,le,oe),Re+=Ue,oe+=Ue;Re<lr&&(dt(qt[Ut++],mn),Eo(mn,_t,Re,Mt,le,oe),Re+=Mt,oe+=Mt),++ye&Ie||(ve+=nt)}break;case 3:if(je==le&&Ue==oe&&0<ve.b){for(Re=le,je=_t=oe+(We-ye)*_t-(xt=(We-ye)*Ze(ve.Ea,ve.b)),Ue=le,Ie=oe,nt=[],xt=(Mt=xt)-1;0<=xt;--xt)nt[xt]=Ue[Ie+xt];for(xt=Mt-1;0<=xt;--xt)Re[je+xt]=nt[xt];Zi(ve,ye,We,le,_t,le,oe)}else Zi(ve,ye,We,je,Ue,le,oe)}oe=z,le=C}le!=C&&r(z,C,oe,le,te)}function pn(y,M){var C=y.V,z=y.Ba+y.c*y.C,Z=M-y.C;if(e(M<=y.l.o),e(16>=Z),0<Z){var te=y.l,ie=y.Ta,oe=y.Ua,le=te.width;if(Wn(y,Z,C,z),Z=oe=[oe],e((C=y.C)<(z=M)),e(te.v<te.va),z>te.o&&(z=te.o),C<te.j){var ve=te.j-C;C=te.j,Z[0]+=ve*le}if(C>=z?C=0:(Z[0]+=4*te.v,te.ka=C-te.j,te.U=te.va-te.v,te.T=z-C,C=1),C){if(oe=oe[0],11>(C=y.ca).S){var ye=C.f.RGBA,We=(z=C.S,Z=te.U,te=te.T,ve=ye.eb,ye.A),je=te;for(ye=ye.fb+y.Ma*ye.A;0<je--;){var Ue=ie,_t=oe,nt=Z,Re=ve,Ie=ye;switch(z){case tf:Xr(Ue,_t,nt,Re,Ie);break;case Cu:$i(Ue,_t,nt,Re,Ie);break;case Ed:$i(Ue,_t,nt,Re,Ie),_i(Re,Ie,0,nt,1,0);break;case nf:qo(Ue,_t,nt,Re,Ie);break;case Pc:xe(Ue,_t,nt,Re,Ie,1);break;case Ad:xe(Ue,_t,nt,Re,Ie,1),_i(Re,Ie,0,nt,1,0);break;case Vl:xe(Ue,_t,nt,Re,Ie,0);break;case Rc:xe(Ue,_t,nt,Re,Ie,0),_i(Re,Ie,1,nt,1,0);break;case Md:co(Ue,_t,nt,Re,Ie);break;case Td:co(Ue,_t,nt,Re,Ie),nr(Re,Ie,nt,1,0);break;case Dm:Sa(Ue,_t,nt,Re,Ie);break;default:e(0)}oe+=le,ye+=We}y.Ma+=te}else alert("todo:EmitRescaledRowsYUVA");e(y.Ma<=C.height)}}y.C=M,e(y.C<=y.i)}function Wr(y){var M;if(0<y.ua)return 0;for(M=0;M<y.Wb;++M){var C=y.Ya[M].G,z=y.Ya[M].H;if(0<C[1][z[1]+0].g||0<C[2][z[2]+0].g||0<C[3][z[3]+0].g)return 0}return 1}function oi(y,M,C,z,Z,te){if(y.Z!=0){var ie=y.qd,oe=y.rd;for(e(Lo[y.Z]!=null);M<C;++M)Lo[y.Z](ie,oe,z,Z,z,Z,te),ie=z,oe=Z,Z+=te;y.qd=ie,y.rd=oe}}function q(y,M){var C=y.l.ma,z=C.Z==0||C.Z==1?y.l.j:y.C;if(z=y.C<z?z:y.C,e(M<=y.l.o),M>z){var Z=y.l.width,te=C.ca,ie=C.tb+Z*z,oe=y.V,le=y.Ba+y.c*z,ve=y.gc;e(y.ab==1),e(ve[0].hc==3),Gl(ve[0],z,M,oe,le,te,ie),oi(C,z,M,te,ie,Z)}y.C=y.Ma=M}function U(y,M,C,z,Z,te,ie){var oe=y.$/z,le=y.$%z,ve=y.m,ye=y.s,We=C+y.$,je=We;Z=C+z*Z;var Ue=C+z*te,_t=280+ye.ua,nt=y.Pb?oe:16777216,Re=0<ye.ua?ye.Wa:null,Ie=ye.wc,xt=We<Ue?$n(ye,le,oe):null;e(y.C<te),e(Ue<=Z);var Mt=!1;e:for(;;){for(;Mt||We<Ue;){var St=0;if(oe>=nt){var qt=We-C;e((nt=y).Pb),nt.wd=nt.m,nt.xd=qt,0<nt.s.ua&&pe(nt.s.Wa,nt.s.vb),nt=oe+Lv}if(le&Ie||(xt=$n(ye,le,oe)),e(xt!=null),xt.Qb&&(M[We]=xt.qb,Mt=!0),!Mt)if(fe(ve),xt.jc){St=ve,qt=M;var Ut=We,mn=xt.pd[X(St)&ki-1];e(xt.jc),256>mn.g?(ae(St,St.u+mn.g),qt[Ut]=mn.value,St=0):(ae(St,St.u+mn.g-256),e(256<=mn.value),St=mn.value),St==0&&(Mt=!0)}else St=Zn(xt.G[0],xt.H[0],ve);if(ve.h)break;if(Mt||256>St){if(!Mt)if(xt.nd)M[We]=(xt.qb|St<<8)>>>0;else{if(fe(ve),Mt=Zn(xt.G[1],xt.H[1],ve),fe(ve),qt=Zn(xt.G[2],xt.H[2],ve),Ut=Zn(xt.G[3],xt.H[3],ve),ve.h)break;M[We]=(Ut<<24|Mt<<16|St<<8|qt)>>>0}if(Mt=!1,++We,++le>=z&&(le=0,++oe,ie!=null&&oe<=te&&!(oe%16)&&ie(y,oe),Re!=null))for(;je<We;)St=M[je++],Re.X[(506832829*St&4294967295)>>>Re.Mb]=St}else if(280>St){if(St=Vr(St-256,ve),qt=Zn(xt.G[4],xt.H[4],ve),fe(ve),qt=Ir(z,qt=Vr(qt,ve)),ve.h)break;if(We-C<qt||Z-We<St)break e;for(Ut=0;Ut<St;++Ut)M[We+Ut]=M[We+Ut-qt];for(We+=St,le+=St;le>=z;)le-=z,++oe,ie!=null&&oe<=te&&!(oe%16)&&ie(y,oe);if(e(We<=Z),le&Ie&&(xt=$n(ye,le,oe)),Re!=null)for(;je<We;)St=M[je++],Re.X[(506832829*St&4294967295)>>>Re.Mb]=St}else{if(!(St<_t))break e;for(Mt=St-280,e(Re!=null);je<We;)St=M[je++],Re.X[(506832829*St&4294967295)>>>Re.Mb]=St;St=We,e(!(Mt>>>(qt=Re).Xa)),M[St]=qt.X[Mt],Mt=!0}Mt||e(ve.h==J(ve))}if(y.Pb&&ve.h&&We<Z)e(y.m.h),y.a=5,y.m=y.wd,y.$=y.xd,0<y.s.ua&&pe(y.s.vb,y.s.Wa);else{if(ve.h)break e;ie!=null&&ie(y,oe>te?te:oe),y.a=0,y.$=We-C}return 1}return y.a=3,0}function ne(y){e(y!=null),y.vc=null,y.yc=null,y.Ya=null;var M=y.Wa;M!=null&&(M.X=null),y.vb=null,e(y!=null)}function me(){var y=new xa;return y==null?null:(y.a=0,y.xb=Bm,Ye("Predictor","VP8LPredictors"),Ye("Predictor","VP8LPredictors_C"),Ye("PredictorAdd","VP8LPredictorsAdd"),Ye("PredictorAdd","VP8LPredictorsAdd_C"),Jh=Qe,Eo=lt,Xr=Te,$i=Nt,co=At,Sa=Ct,qo=bt,R.VP8LMapColor32b=Mu,R.VP8LMapColor8b=As,y)}function de(y,M,C,z,Z){var te=1,ie=[y],oe=[M],le=z.m,ve=z.s,ye=null,We=0;e:for(;;){if(C)for(;te&&j(le,1);){var je=ie,Ue=oe,_t=z,nt=1,Re=_t.m,Ie=_t.gc[_t.ab],xt=j(Re,2);if(_t.Oc&1<<xt)te=0;else{switch(_t.Oc|=1<<xt,Ie.hc=xt,Ie.Ea=je[0],Ie.nc=Ue[0],Ie.K=[null],++_t.ab,e(4>=_t.ab),xt){case 0:case 1:Ie.b=j(Re,3)+2,nt=de(Ze(Ie.Ea,Ie.b),Ze(Ie.nc,Ie.b),0,_t,Ie.K),Ie.K=Ie.K[0];break;case 3:var Mt,St=j(Re,8)+1,qt=16<St?0:4<St?1:2<St?2:3;if(je[0]=Ze(Ie.Ea,qt),Ie.b=qt,Mt=nt=de(St,1,0,_t,Ie.K)){var Ut,mn=St,Bt=Ie,lr=1<<(8>>Bt.b),vr=s(lr);if(vr==null)Mt=0;else{var rr=Bt.K[0],Xn=Bt.w;for(vr[0]=Bt.K[0][0],Ut=1;Ut<1*mn;++Ut)vr[Ut]=Ne(rr[Xn+Ut],vr[Ut-1]);for(;Ut<4*lr;++Ut)vr[Ut]=0;Bt.K[0]=null,Bt.K[0]=vr,Mt=1}}nt=Mt;break;case 2:break;default:e(0)}te=nt}}if(ie=ie[0],oe=oe[0],te&&j(le,1)&&!(te=1<=(We=j(le,4))&&11>=We)){z.a=3;break e}var Cr;if(Cr=te)t:{var Ar,In,li,Cs=z,ui=ie,Ji=oe,fr=We,ms=C,gs=Cs.m,ci=Cs.s,hi=[null],Qi=1,Us=0,Po=Cv[fr];n:for(;;){if(ms&&j(gs,1)){var Ii=j(gs,3)+2,$o=Ze(ui,Ii),Lu=Ze(Ji,Ii),tl=$o*Lu;if(!de($o,Lu,0,Cs,hi))break n;for(hi=hi[0],ci.xc=Ii,Ar=0;Ar<tl;++Ar){var Ta=hi[Ar]>>8&65535;hi[Ar]=Ta,Ta>=Qi&&(Qi=Ta+1)}}if(gs.h)break n;for(In=0;5>In;++In){var Fn=Om[In];!In&&0<fr&&(Fn+=1<<fr),Us<Fn&&(Us=Fn)}var Un=o(Qi*Po,B),fi=Qi,di=o(fi,H);if(di==null)var bi=null;else e(65536>=fi),bi=di;var es=s(Us);if(bi==null||es==null||Un==null){Cs.a=1;break n}var nl=Un;for(Ar=li=0;Ar<Qi;++Ar){var Sr=bi[Ar],Ca=Sr.G,Ko=Sr.H,af=0,Fc=1,Dc=0;for(In=0;5>In;++In){Fn=Om[In],Ca[In]=nl,Ko[In]=li,!In&&0<fr&&(Fn+=1<<fr);i:{var ts,lf=Fn,Oc=Cs,La=es,Nd=nl,qm=li,Pa=0,Jo=Oc.m,Wl=j(Jo,1);if(i(La,0,0,lf),Wl){var Fd=j(Jo,1)+1,uf=j(Jo,1),Dd=j(Jo,uf==0?1:8);La[Dd]=1,Fd==2&&(La[Dd=j(Jo,8)]=1);var Pu=1}else{var cf=s(19),vs=j(Jo,4)+4;if(19<vs){Oc.a=3;var Qo=0;break i}for(ts=0;ts<vs;++ts)cf[Xx[ts]]=j(Jo,3);var Bs=void 0,jl=void 0,Ls=Oc,Uv=cf,Uc=lf,Od=La,Ym=0,Ps=Ls.m,Zm=8,$m=o(128,B);r:for(;O($m,0,7,Uv,19);){if(j(Ps,1)){var Km=2+2*j(Ps,3);if((Bs=2+j(Ps,Km))>Uc)break r}else Bs=Uc;for(jl=0;jl<Uc&&Bs--;){fe(Ps);var Xl=$m[0+(127&X(Ps))];ae(Ps,Ps.u+Xl.g);var Ru=Xl.value;if(16>Ru)Od[jl++]=Ru,Ru!=0&&(Zm=Ru);else{var Bv=Ru==16,Ud=Ru-16,Bd=Wx[Ud],zv=j(Ps,Av[Ud])+Bd;if(jl+zv>Uc)break r;for(var Kx=Bv?Zm:0;0<zv--;)Od[jl++]=Kx}}Ym=1;break r}Ym||(Ls.a=3),Pu=Ym}(Pu=Pu&&!Jo.h)&&(Pa=O(Nd,qm,8,La,lf)),Pu&&Pa!=0?Qo=Pa:(Oc.a=3,Qo=0)}if(Qo==0)break n;if(Fc&&jx[In]==1&&(Fc=nl[li].g==0),af+=nl[li].g,li+=Qo,3>=In){var Bc,zd=es[0];for(Bc=1;Bc<Fn;++Bc)es[Bc]>zd&&(zd=es[Bc]);Dc+=zd}}if(Sr.nd=Fc,Sr.Qb=0,Fc&&(Sr.qb=(Ca[3][Ko[3]+0].value<<24|Ca[1][Ko[1]+0].value<<16|Ca[2][Ko[2]+0].value)>>>0,af==0&&256>Ca[0][Ko[0]+0].value&&(Sr.Qb=1,Sr.qb+=Ca[0][Ko[0]+0].value<<8)),Sr.jc=!Sr.Qb&&6>Dc,Sr.jc){var Ra,rl=Sr;for(Ra=0;Ra<ki;++Ra){var zs=Ra,il=rl.pd[zs],ns=rl.G[0][rl.H[0]+zs];256<=ns.value?(il.g=ns.g+256,il.value=ns.value):(il.g=0,il.value=0,zs>>=vn(ns,8,il),zs>>=vn(rl.G[1][rl.H[1]+zs],16,il),zs>>=vn(rl.G[2][rl.H[2]+zs],0,il),vn(rl.G[3][rl.H[3]+zs],24,il))}}}ci.vc=hi,ci.Wb=Qi,ci.Ya=bi,ci.yc=Un,Cr=1;break t}Cr=0}if(!(te=Cr)){z.a=3;break e}if(0<We){if(ve.ua=1<<We,!ze(ve.Wa,We)){z.a=1,te=0;break e}}else ve.ua=0;var Jm=z,Qm=ie,Jx=oe,eg=Jm.s,Hd=eg.xc;if(Jm.c=Qm,Jm.i=Jx,eg.md=Ze(Qm,Hd),eg.wc=Hd==0?-1:(1<<Hd)-1,C){z.xb=Aa;break e}if((ye=s(ie*oe))==null){z.a=1,te=0;break e}te=(te=U(z,ye,0,ie,oe,oe,null))&&!le.h;break e}return te?(Z!=null?Z[0]=ye:(e(ye==null),e(C)),z.$=0,C||ne(ve)):ne(ve),te}function we(y,M){var C=y.c*y.i,z=C+M+16*M;return e(y.c<=M),y.V=s(z),y.V==null?(y.Ta=null,y.Ua=0,y.a=1,0):(y.Ta=y.V,y.Ua=y.Ba+C+M,1)}function Xe(y,M){var C=y.C,z=M-C,Z=y.V,te=y.Ba+y.c*C;for(e(M<=y.l.o);0<z;){var ie=16<z?16:z,oe=y.l.ma,le=y.l.width,ve=le*ie,ye=oe.ca,We=oe.tb+le*C,je=y.Ta,Ue=y.Ua;Wn(y,ie,Z,te),zr(je,Ue,ye,We,ve),oi(oe,C,C+ie,ye,We,le),z-=ie,Z+=ie*y.c,C+=ie}e(C==M),y.C=y.Ma=M}function qe(){this.ub=this.yd=this.td=this.Rb=0}function ot(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function rt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function gt(){this.Yb=function(){var y=[];return function M(C,z,Z){for(var te=Z[z],ie=0;ie<te&&(C.push(Z.length>z+1?[]:0),!(Z.length<z+1));ie++)M(C[ie],z+1,Z)}(y,0,[3,11]),y}()}function at(){this.jb=s(3),this.Wc=a([4,8],gt),this.Xc=a([4,17],gt)}function Wt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function It(){this.ld=this.La=this.dd=this.tc=0}function Ot(){this.Na=this.la=0}function $t(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Qt(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function sn(){this.uc=this.M=this.Nb=0,this.wa=Array(new It),this.Y=0,this.ya=Array(new Qt),this.aa=0,this.l=new jt}function zt(){this.y=s(16),this.f=s(8),this.ea=s(8)}function on(){this.cb=this.a=0,this.sc="",this.m=new re,this.Od=new qe,this.Kc=new ot,this.ed=new Wt,this.Qa=new rt,this.Ic=this.$c=this.Aa=0,this.D=new sn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,re),this.ia=0,this.pb=o(4,$t),this.Pa=new at,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new zt),this.Hd=0,this.rb=Array(new Ot),this.sb=0,this.wa=Array(new It),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Qt),this.L=this.aa=0,this.gd=a([4,2],It),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function jt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ln(){var y=new on;return y!=null&&(y.a=0,y.sc="OK",y.cb=0,y.Xb=0,rf||(rf=Qn)),y}function fn(y,M,C){return y.a==0&&(y.a=M,y.sc=C,y.cb=0),0}function xn(y,M,C){return 3<=C&&y[M+0]==157&&y[M+1]==1&&y[M+2]==42}function tr(y,M){if(y==null)return 0;if(y.a=0,y.sc="OK",M==null)return fn(y,2,"null VP8Io passed to VP8GetHeaders()");var C=M.data,z=M.w,Z=M.ha;if(4>Z)return fn(y,7,"Truncated header.");var te=C[z+0]|C[z+1]<<8|C[z+2]<<16,ie=y.Od;if(ie.Rb=!(1&te),ie.td=te>>1&7,ie.yd=te>>4&1,ie.ub=te>>5,3<ie.td)return fn(y,3,"Incorrect keyframe parameters.");if(!ie.yd)return fn(y,4,"Frame not displayable.");z+=3,Z-=3;var oe=y.Kc;if(ie.Rb){if(7>Z)return fn(y,7,"cannot parse picture header");if(!xn(C,z,Z))return fn(y,3,"Bad code word");oe.c=16383&(C[z+4]<<8|C[z+3]),oe.Td=C[z+4]>>6,oe.i=16383&(C[z+6]<<8|C[z+5]),oe.Ud=C[z+6]>>6,z+=7,Z-=7,y.za=oe.c+15>>4,y.Ub=oe.i+15>>4,M.width=oe.c,M.height=oe.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,i((te=y.Pa).jb,0,255,te.jb.length),e((te=y.Qa)!=null),te.Cb=0,te.Bb=0,te.Fb=1,i(te.Zb,0,0,te.Zb.length),i(te.Lb,0,0,te.Lb)}if(ie.ub>Z)return fn(y,7,"bad partition length");ee(te=y.m,C,z,ie.ub),z+=ie.ub,Z-=ie.ub,ie.Rb&&(oe.Ld=Ee(te),oe.Kd=Ee(te)),oe=y.Qa;var le,ve=y.Pa;if(e(te!=null),e(oe!=null),oe.Cb=Ee(te),oe.Cb){if(oe.Bb=Ee(te),Ee(te)){for(oe.Fb=Ee(te),le=0;4>le;++le)oe.Zb[le]=Ee(te)?ce(te,7):0;for(le=0;4>le;++le)oe.Lb[le]=Ee(te)?ce(te,6):0}if(oe.Bb)for(le=0;3>le;++le)ve.jb[le]=Ee(te)?se(te,8):255}else oe.Bb=0;if(te.Ka)return fn(y,3,"cannot parse segment header");if((oe=y.ed).zd=Ee(te),oe.Tb=se(te,6),oe.wb=se(te,3),oe.Pc=Ee(te),oe.Pc&&Ee(te)){for(ve=0;4>ve;++ve)Ee(te)&&(oe.vd[ve]=ce(te,6));for(ve=0;4>ve;++ve)Ee(te)&&(oe.od[ve]=ce(te,6))}if(y.L=oe.Tb==0?0:oe.zd?1:2,te.Ka)return fn(y,3,"cannot parse filter header");var ye=Z;if(Z=le=z,z=le+ye,oe=ye,y.Xb=(1<<se(y.m,2))-1,ye<3*(ve=y.Xb))C=7;else{for(le+=3*ve,oe-=3*ve,ye=0;ye<ve;++ye){var We=C[Z+0]|C[Z+1]<<8|C[Z+2]<<16;We>oe&&(We=oe),ee(y.Jc[+ye],C,le,We),le+=We,oe-=We,Z+=3}ee(y.Jc[+ve],C,le,oe),C=le<z?0:5}if(C!=0)return fn(y,C,"cannot parse partitions");for(C=se(le=y.m,7),Z=Ee(le)?ce(le,4):0,z=Ee(le)?ce(le,4):0,oe=Ee(le)?ce(le,4):0,ve=Ee(le)?ce(le,4):0,le=Ee(le)?ce(le,4):0,ye=y.Qa,We=0;4>We;++We){if(ye.Cb){var je=ye.Zb[We];ye.Fb||(je+=C)}else{if(0<We){y.pb[We]=y.pb[0];continue}je=C}var Ue=y.pb[We];Ue.Sc[0]=Cd[Es(je+Z,127)],Ue.Sc[1]=kc[Es(je+0,127)],Ue.Eb[0]=2*Cd[Es(je+z,127)],Ue.Eb[1]=101581*kc[Es(je+oe,127)]>>16,8>Ue.Eb[1]&&(Ue.Eb[1]=8),Ue.Qc[0]=Cd[Es(je+ve,117)],Ue.Qc[1]=kc[Es(je+le,127)],Ue.lc=je+le}if(!ie.Rb)return fn(y,4,"Not a key frame.");for(Ee(te),ie=y.Pa,C=0;4>C;++C){for(Z=0;8>Z;++Z)for(z=0;3>z;++z)for(oe=0;11>oe;++oe)ve=Ce(te,Pv[C][Z][z][oe])?se(te,8):Um[C][Z][z][oe],ie.Wc[C][Z].Yb[z][oe]=ve;for(Z=0;17>Z;++Z)ie.Xc[C][Z]=ie.Wc[C][Rv[Z]]}return y.kc=Ee(te),y.kc&&(y.Bd=se(te,8)),y.cb=1}function Qn(y,M,C,z,Z,te,ie){var oe=M[Z].Yb[C];for(C=0;16>Z;++Z){if(!Ce(y,oe[C+0]))return Z;for(;!Ce(y,oe[C+1]);)if(oe=M[++Z].Yb[0],C=0,Z==16)return 16;var le=M[Z+1].Yb;if(Ce(y,oe[C+2])){var ve=y,ye=0;if(Ce(ve,(je=oe)[(We=C)+3]))if(Ce(ve,je[We+6])){for(oe=0,We=2*(ye=Ce(ve,je[We+8]))+(je=Ce(ve,je[We+9+ye])),ye=0,je=qx[We];je[oe];++oe)ye+=ye+Ce(ve,je[oe]);ye+=3+(8<<We)}else Ce(ve,je[We+7])?(ye=7+2*Ce(ve,165),ye+=Ce(ve,145)):ye=5+Ce(ve,159);else ye=Ce(ve,je[We+4])?3+Ce(ve,je[We+5]):2;oe=le[2]}else ye=1,oe=le[1];le=ie+Yx[Z],0>(ve=y).b&&Se(ve);var We,je=ve.b,Ue=(We=ve.Ca>>1)-(ve.I>>je)>>31;--ve.b,ve.Ca+=Ue,ve.Ca|=1,ve.I-=(We+1&Ue)<<je,te[le]=((ye^Ue)-Ue)*z[(0<Z)+0]}return 16}function cr(y){var M=y.rb[y.sb-1];M.la=0,M.Na=0,i(y.zc,0,0,y.zc.length),y.ja=0}function jr(y,M){if(y==null)return 0;if(M==null)return fn(y,2,"NULL VP8Io parameter in VP8Decode().");if(!y.cb&&!tr(y,M))return 0;if(e(y.cb),M.ac==null||M.ac(M)){M.ob&&(y.L=0);var C=of[y.L];if(y.L==2?(y.yb=0,y.zb=0):(y.yb=M.v-C>>4,y.zb=M.j-C>>4,0>y.yb&&(y.yb=0),0>y.zb&&(y.zb=0)),y.Va=M.o+15+C>>4,y.Hb=M.va+15+C>>4,y.Hb>y.za&&(y.Hb=y.za),y.Va>y.Ub&&(y.Va=y.Ub),0<y.L){var z=y.ed;for(C=0;4>C;++C){var Z;if(y.Qa.Cb){var te=y.Qa.Lb[C];y.Qa.Fb||(te+=z.Tb)}else te=z.Tb;for(Z=0;1>=Z;++Z){var ie=y.gd[C][Z],oe=te;if(z.Pc&&(oe+=z.vd[0],Z&&(oe+=z.od[0])),0<(oe=0>oe?0:63<oe?63:oe)){var le=oe;0<z.wb&&(le=4<z.wb?le>>2:le>>1)>9-z.wb&&(le=9-z.wb),1>le&&(le=1),ie.dd=le,ie.tc=2*oe+le,ie.ld=40<=oe?2:15<=oe?1:0}else ie.tc=0;ie.La=Z}}}C=0}else fn(y,6,"Frame setup failed"),C=y.a;if(C=C==0){if(C){y.$c=0,0<y.Aa||(y.Ic=Ov);e:{C=y.Ic,z=4*(le=y.za);var ve=32*le,ye=le+1,We=0<y.L?le*(0<y.Aa?2:1):0,je=(y.Aa==2?2:1)*le;if((ie=z+832+(Z=3*(16*C+of[y.L])/2*ve)+(te=y.Fa!=null&&0<y.Fa.length?y.Kc.c*y.Kc.i:0))!=ie)C=0;else{if(ie>y.Vb){if(y.Vb=0,y.Ec=s(ie),y.Fc=0,y.Ec==null){C=fn(y,1,"no memory during frame initialization.");break e}y.Vb=ie}ie=y.Ec,oe=y.Fc,y.Ac=ie,y.Bc=oe,oe+=z,y.Gd=o(ve,zt),y.Hd=0,y.rb=o(ye+1,Ot),y.sb=1,y.wa=We?o(We,It):null,y.Y=0,y.D.Nb=0,y.D.wa=y.wa,y.D.Y=y.Y,0<y.Aa&&(y.D.Y+=le),e(!0),y.oc=ie,y.pc=oe,oe+=832,y.ya=o(je,Qt),y.aa=0,y.D.ya=y.ya,y.D.aa=y.aa,y.Aa==2&&(y.D.aa+=le),y.R=16*le,y.B=8*le,le=(ve=of[y.L])*y.R,ve=ve/2*y.B,y.sa=ie,y.ta=oe+le,y.qa=y.sa,y.ra=y.ta+16*C*y.R+ve,y.Ha=y.qa,y.Ia=y.ra+8*C*y.B+ve,y.$c=0,oe+=Z,y.mb=te?ie:null,y.nb=te?oe:null,e(oe+te<=y.Fc+y.Vb),cr(y),i(y.Ac,y.Bc,0,z),C=1}}if(C){if(M.ka=0,M.y=y.sa,M.O=y.ta,M.f=y.qa,M.N=y.ra,M.ea=y.Ha,M.Vd=y.Ia,M.fa=y.R,M.Rc=y.B,M.F=null,M.J=0,!Qh){for(C=-255;255>=C;++C)ii[255+C]=0>C?-C:C;for(C=-1020;1020>=C;++C)Ma[1020+C]=-128>C?-128:127<C?127:C;for(C=-112;112>=C;++C)Lc[112+C]=-16>C?-16:15<C?15:C;for(C=-255;510>=C;++C)Tu[255+C]=0>C?0:255<C?255:C;Qh=1}Er=gc,Ao=Go,Eu=zi,Vi=So,Yr=pu,qr=Tr,Yo=wu,Nr=$a,Si=Kh,Br=ya,_a=_d,To=Ul,Zo=us,Cc=ao,ri=xu,ba=va,Au=Pi,Os=Sc,Co[0]=ma,Co[1]=vc,Co[2]=xd,Co[3]=Nm,Co[4]=ai,Co[5]=xc,Co[6]=yc,Co[7]=mu,Co[8]=wc,Co[9]=Fm,el[0]=yd,el[1]=Im,el[2]=Vo,el[3]=Ol,el[4]=Hi,el[5]=or,el[6]=Zh,Ea[0]=Yi,Ea[1]=km,Ea[2]=_o,Ea[3]=$h,Ea[4]=ga,Ea[5]=Wo,Ea[6]=vu,C=1}else C=0}C&&(C=function(Ue,_t){for(Ue.M=0;Ue.M<Ue.Va;++Ue.M){var nt,Re=Ue.Jc[Ue.M&Ue.Xb],Ie=Ue.m,xt=Ue;for(nt=0;nt<xt.za;++nt){var Mt=Ie,St=xt,qt=St.Ac,Ut=St.Bc+4*nt,mn=St.zc,Bt=St.ya[St.aa+nt];if(St.Qa.Bb?Bt.$b=Ce(Mt,St.Pa.jb[0])?2+Ce(Mt,St.Pa.jb[2]):Ce(Mt,St.Pa.jb[1]):Bt.$b=0,St.kc&&(Bt.Ad=Ce(Mt,St.Bd)),Bt.Za=!Ce(Mt,145)+0,Bt.Za){var lr=Bt.Ob,vr=0;for(St=0;4>St;++St){var rr,Xn=mn[0+St];for(rr=0;4>rr;++rr){Xn=Zx[qt[Ut+rr]][Xn];for(var Cr=Ld[Ce(Mt,Xn[0])];0<Cr;)Cr=Ld[2*Cr+Ce(Mt,Xn[Cr])];Xn=-Cr,qt[Ut+rr]=Xn}r(lr,vr,qt,Ut,4),vr+=4,mn[0+St]=Xn}}else Xn=Ce(Mt,156)?Ce(Mt,128)?1:3:Ce(Mt,163)?2:0,Bt.Ob[0]=Xn,i(qt,Ut,Xn,4),i(mn,0,Xn,4);Bt.Dd=Ce(Mt,142)?Ce(Mt,114)?Ce(Mt,183)?1:3:2:0}if(xt.m.Ka)return fn(Ue,7,"Premature end-of-partition0 encountered.");for(;Ue.ja<Ue.za;++Ue.ja){if(xt=Re,Mt=(Ie=Ue).rb[Ie.sb-1],qt=Ie.rb[Ie.sb+Ie.ja],nt=Ie.ya[Ie.aa+Ie.ja],Ut=Ie.kc?nt.Ad:0)Mt.la=qt.la=0,nt.Za||(Mt.Na=qt.Na=0),nt.Hc=0,nt.Gc=0,nt.ia=0;else{var Ar,In;if(Mt=qt,qt=xt,Ut=Ie.Pa.Xc,mn=Ie.ya[Ie.aa+Ie.ja],Bt=Ie.pb[mn.$b],St=mn.ad,lr=0,vr=Ie.rb[Ie.sb-1],Xn=rr=0,i(St,lr,0,384),mn.Za)var li=0,Cs=Ut[3];else{Cr=s(16);var ui=Mt.Na+vr.Na;if(ui=rf(qt,Ut[1],ui,Bt.Eb,0,Cr,0),Mt.Na=vr.Na=(0<ui)+0,1<ui)Er(Cr,0,St,lr);else{var Ji=Cr[0]+3>>3;for(Cr=0;256>Cr;Cr+=16)St[lr+Cr]=Ji}li=1,Cs=Ut[0]}var fr=15&Mt.la,ms=15&vr.la;for(Cr=0;4>Cr;++Cr){var gs=1&ms;for(Ji=In=0;4>Ji;++Ji)fr=fr>>1|(gs=(ui=rf(qt,Cs,ui=gs+(1&fr),Bt.Sc,li,St,lr))>li)<<7,In=In<<2|(3<ui?3:1<ui?2:St[lr+0]!=0),lr+=16;fr>>=4,ms=ms>>1|gs<<7,rr=(rr<<8|In)>>>0}for(Cs=fr,li=ms>>4,Ar=0;4>Ar;Ar+=2){for(In=0,fr=Mt.la>>4+Ar,ms=vr.la>>4+Ar,Cr=0;2>Cr;++Cr){for(gs=1&ms,Ji=0;2>Ji;++Ji)ui=gs+(1&fr),fr=fr>>1|(gs=0<(ui=rf(qt,Ut[2],ui,Bt.Qc,0,St,lr)))<<3,In=In<<2|(3<ui?3:1<ui?2:St[lr+0]!=0),lr+=16;fr>>=2,ms=ms>>1|gs<<5}Xn|=In<<4*Ar,Cs|=fr<<4<<Ar,li|=(240&ms)<<Ar}Mt.la=Cs,vr.la=li,mn.Hc=rr,mn.Gc=Xn,mn.ia=43690&Xn?0:Bt.ia,Ut=!(rr|Xn)}if(0<Ie.L&&(Ie.wa[Ie.Y+Ie.ja]=Ie.gd[nt.$b][nt.Za],Ie.wa[Ie.Y+Ie.ja].La|=!Ut),xt.Ka)return fn(Ue,7,"Premature end-of-file encountered.")}if(cr(Ue),Ie=_t,xt=1,nt=(Re=Ue).D,Mt=0<Re.L&&Re.M>=Re.zb&&Re.M<=Re.Va,Re.Aa==0)e:{if(nt.M=Re.M,nt.uc=Mt,Qa(Re,nt),xt=1,nt=(In=Re.D).Nb,Mt=(Xn=of[Re.L])*Re.R,qt=Xn/2*Re.B,Cr=16*nt*Re.R,Ji=8*nt*Re.B,Ut=Re.sa,mn=Re.ta-Mt+Cr,Bt=Re.qa,St=Re.ra-qt+Ji,lr=Re.Ha,vr=Re.Ia-qt+Ji,ms=(fr=In.M)==0,rr=fr>=Re.Va-1,Re.Aa==2&&Qa(Re,In),In.uc)for(gs=(ui=Re).D.M,e(ui.D.uc),In=ui.yb;In<ui.Hb;++In){li=In,Cs=gs;var ci=(hi=(Fn=ui).D).Nb;Ar=Fn.R;var hi=hi.wa[hi.Y+li],Qi=Fn.sa,Us=Fn.ta+16*ci*Ar+16*li,Po=hi.dd,Ii=hi.tc;if(Ii!=0)if(e(3<=Ii),Fn.L==1)0<li&&ba(Qi,Us,Ar,Ii+4),hi.La&&Os(Qi,Us,Ar,Ii),0<Cs&&ri(Qi,Us,Ar,Ii+4),hi.La&&Au(Qi,Us,Ar,Ii);else{var $o=Fn.B,Lu=Fn.qa,tl=Fn.ra+8*ci*$o+8*li,Ta=Fn.Ha,Fn=Fn.Ia+8*ci*$o+8*li;ci=hi.ld,0<li&&(Nr(Qi,Us,Ar,Ii+4,Po,ci),Br(Lu,tl,Ta,Fn,$o,Ii+4,Po,ci)),hi.La&&(To(Qi,Us,Ar,Ii,Po,ci),Cc(Lu,tl,Ta,Fn,$o,Ii,Po,ci)),0<Cs&&(Yo(Qi,Us,Ar,Ii+4,Po,ci),Si(Lu,tl,Ta,Fn,$o,Ii+4,Po,ci)),hi.La&&(_a(Qi,Us,Ar,Ii,Po,ci),Zo(Lu,tl,Ta,Fn,$o,Ii,Po,ci))}}if(Re.ia&&alert("todo:DitherRow"),Ie.put!=null){if(In=16*fr,fr=16*(fr+1),ms?(Ie.y=Re.sa,Ie.O=Re.ta+Cr,Ie.f=Re.qa,Ie.N=Re.ra+Ji,Ie.ea=Re.Ha,Ie.W=Re.Ia+Ji):(In-=Xn,Ie.y=Ut,Ie.O=mn,Ie.f=Bt,Ie.N=St,Ie.ea=lr,Ie.W=vr),rr||(fr-=Xn),fr>Ie.o&&(fr=Ie.o),Ie.F=null,Ie.J=null,Re.Fa!=null&&0<Re.Fa.length&&In<fr&&(Ie.J=bc(Re,Ie,In,fr-In),Ie.F=Re.mb,Ie.F==null&&Ie.F.length==0)){xt=fn(Re,3,"Could not decode alpha data.");break e}In<Ie.j&&(Xn=Ie.j-In,In=Ie.j,e(!(1&Xn)),Ie.O+=Re.R*Xn,Ie.N+=Re.B*(Xn>>1),Ie.W+=Re.B*(Xn>>1),Ie.F!=null&&(Ie.J+=Ie.width*Xn)),In<fr&&(Ie.O+=Ie.v,Ie.N+=Ie.v>>1,Ie.W+=Ie.v>>1,Ie.F!=null&&(Ie.J+=Ie.v),Ie.ka=In-Ie.j,Ie.U=Ie.va-Ie.v,Ie.T=fr-In,xt=Ie.put(Ie))}nt+1!=Re.Ic||rr||(r(Re.sa,Re.ta-Mt,Ut,mn+16*Re.R,Mt),r(Re.qa,Re.ra-qt,Bt,St+8*Re.B,qt),r(Re.Ha,Re.Ia-qt,lr,vr+8*Re.B,qt))}if(!xt)return fn(Ue,6,"Output aborted.")}return 1}(y,M)),M.bc!=null&&M.bc(M),C&=1}return C?(y.cb=0,C):0}function dn(y,M,C,z,Z){Z=y[M+C+32*z]+(Z>>3),y[M+C+32*z]=-256&Z?0>Z?0:255:Z}function _r(y,M,C,z,Z,te){dn(y,M,0,C,z+Z),dn(y,M,1,C,z+te),dn(y,M,2,C,z-te),dn(y,M,3,C,z-Z)}function Rn(y){return(20091*y>>16)+y}function jn(y,M,C,z){var Z,te=0,ie=s(16);for(Z=0;4>Z;++Z){var oe=y[M+0]+y[M+8],le=y[M+0]-y[M+8],ve=(35468*y[M+4]>>16)-Rn(y[M+12]),ye=Rn(y[M+4])+(35468*y[M+12]>>16);ie[te+0]=oe+ye,ie[te+1]=le+ve,ie[te+2]=le-ve,ie[te+3]=oe-ye,te+=4,M++}for(Z=te=0;4>Z;++Z)oe=(y=ie[te+0]+4)+ie[te+8],le=y-ie[te+8],ve=(35468*ie[te+4]>>16)-Rn(ie[te+12]),dn(C,z,0,0,oe+(ye=Rn(ie[te+4])+(35468*ie[te+12]>>16))),dn(C,z,1,0,le+ve),dn(C,z,2,0,le-ve),dn(C,z,3,0,oe-ye),te++,z+=32}function Tr(y,M,C,z){var Z=y[M+0]+4,te=35468*y[M+4]>>16,ie=Rn(y[M+4]),oe=35468*y[M+1]>>16;_r(C,z,0,Z+ie,y=Rn(y[M+1]),oe),_r(C,z,1,Z+te,y,oe),_r(C,z,2,Z-te,y,oe),_r(C,z,3,Z-ie,y,oe)}function Go(y,M,C,z,Z){jn(y,M,C,z),Z&&jn(y,M+16,C,z+4)}function zi(y,M,C,z){Ao(y,M+0,C,z,1),Ao(y,M+32,C,z+128,1)}function So(y,M,C,z){var Z;for(y=y[M+0]+4,Z=0;4>Z;++Z)for(M=0;4>M;++M)dn(C,z,M,Z,y)}function pu(y,M,C,z){y[M+0]&&Vi(y,M+0,C,z),y[M+16]&&Vi(y,M+16,C,z+4),y[M+32]&&Vi(y,M+32,C,z+128),y[M+48]&&Vi(y,M+48,C,z+128+4)}function gc(y,M,C,z){var Z,te=s(16);for(Z=0;4>Z;++Z){var ie=y[M+0+Z]+y[M+12+Z],oe=y[M+4+Z]+y[M+8+Z],le=y[M+4+Z]-y[M+8+Z],ve=y[M+0+Z]-y[M+12+Z];te[0+Z]=ie+oe,te[8+Z]=ie-oe,te[4+Z]=ve+le,te[12+Z]=ve-le}for(Z=0;4>Z;++Z)ie=(y=te[0+4*Z]+3)+te[3+4*Z],oe=te[1+4*Z]+te[2+4*Z],le=te[1+4*Z]-te[2+4*Z],ve=y-te[3+4*Z],C[z+0]=ie+oe>>3,C[z+16]=ve+le>>3,C[z+32]=ie-oe>>3,C[z+48]=ve-le>>3,z+=64}function Za(y,M,C){var z,Z=M-32,te=Ts,ie=255-y[Z-1];for(z=0;z<C;++z){var oe,le=te,ve=ie+y[M-1];for(oe=0;oe<C;++oe)y[M+oe]=le[ve+y[Z+oe]];M+=32}}function vc(y,M){Za(y,M,4)}function km(y,M){Za(y,M,8)}function Im(y,M){Za(y,M,16)}function Vo(y,M){var C;for(C=0;16>C;++C)r(y,M+32*C,y,M-32,16)}function Ol(y,M){var C;for(C=16;0<C;--C)i(y,M,y[M-1],16),M+=32}function pa(y,M,C){var z;for(z=0;16>z;++z)i(M,C+32*z,y,16)}function yd(y,M){var C,z=16;for(C=0;16>C;++C)z+=y[M-1+32*C]+y[M+C-32];pa(z>>5,y,M)}function Hi(y,M){var C,z=8;for(C=0;16>C;++C)z+=y[M-1+32*C];pa(z>>4,y,M)}function or(y,M){var C,z=8;for(C=0;16>C;++C)z+=y[M+C-32];pa(z>>4,y,M)}function Zh(y,M){pa(128,y,M)}function bn(y,M,C){return y+2*M+C+2>>2}function xd(y,M){var C,z=M-32;for(z=new Uint8Array([bn(y[z-1],y[z+0],y[z+1]),bn(y[z+0],y[z+1],y[z+2]),bn(y[z+1],y[z+2],y[z+3]),bn(y[z+2],y[z+3],y[z+4])]),C=0;4>C;++C)r(y,M+32*C,z,0,z.length)}function Nm(y,M){var C=y[M-1],z=y[M-1+32],Z=y[M-1+64],te=y[M-1+96];$e(y,M+0,16843009*bn(y[M-1-32],C,z)),$e(y,M+32,16843009*bn(C,z,Z)),$e(y,M+64,16843009*bn(z,Z,te)),$e(y,M+96,16843009*bn(Z,te,te))}function ma(y,M){var C,z=4;for(C=0;4>C;++C)z+=y[M+C-32]+y[M-1+32*C];for(z>>=3,C=0;4>C;++C)i(y,M+32*C,z,4)}function ai(y,M){var C=y[M-1+0],z=y[M-1+32],Z=y[M-1+64],te=y[M-1-32],ie=y[M+0-32],oe=y[M+1-32],le=y[M+2-32],ve=y[M+3-32];y[M+0+96]=bn(z,Z,y[M-1+96]),y[M+1+96]=y[M+0+64]=bn(C,z,Z),y[M+2+96]=y[M+1+64]=y[M+0+32]=bn(te,C,z),y[M+3+96]=y[M+2+64]=y[M+1+32]=y[M+0+0]=bn(ie,te,C),y[M+3+64]=y[M+2+32]=y[M+1+0]=bn(oe,ie,te),y[M+3+32]=y[M+2+0]=bn(le,oe,ie),y[M+3+0]=bn(ve,le,oe)}function yc(y,M){var C=y[M+1-32],z=y[M+2-32],Z=y[M+3-32],te=y[M+4-32],ie=y[M+5-32],oe=y[M+6-32],le=y[M+7-32];y[M+0+0]=bn(y[M+0-32],C,z),y[M+1+0]=y[M+0+32]=bn(C,z,Z),y[M+2+0]=y[M+1+32]=y[M+0+64]=bn(z,Z,te),y[M+3+0]=y[M+2+32]=y[M+1+64]=y[M+0+96]=bn(Z,te,ie),y[M+3+32]=y[M+2+64]=y[M+1+96]=bn(te,ie,oe),y[M+3+64]=y[M+2+96]=bn(ie,oe,le),y[M+3+96]=bn(oe,le,le)}function xc(y,M){var C=y[M-1+0],z=y[M-1+32],Z=y[M-1+64],te=y[M-1-32],ie=y[M+0-32],oe=y[M+1-32],le=y[M+2-32],ve=y[M+3-32];y[M+0+0]=y[M+1+64]=te+ie+1>>1,y[M+1+0]=y[M+2+64]=ie+oe+1>>1,y[M+2+0]=y[M+3+64]=oe+le+1>>1,y[M+3+0]=le+ve+1>>1,y[M+0+96]=bn(Z,z,C),y[M+0+64]=bn(z,C,te),y[M+0+32]=y[M+1+96]=bn(C,te,ie),y[M+1+32]=y[M+2+96]=bn(te,ie,oe),y[M+2+32]=y[M+3+96]=bn(ie,oe,le),y[M+3+32]=bn(oe,le,ve)}function mu(y,M){var C=y[M+0-32],z=y[M+1-32],Z=y[M+2-32],te=y[M+3-32],ie=y[M+4-32],oe=y[M+5-32],le=y[M+6-32],ve=y[M+7-32];y[M+0+0]=C+z+1>>1,y[M+1+0]=y[M+0+64]=z+Z+1>>1,y[M+2+0]=y[M+1+64]=Z+te+1>>1,y[M+3+0]=y[M+2+64]=te+ie+1>>1,y[M+0+32]=bn(C,z,Z),y[M+1+32]=y[M+0+96]=bn(z,Z,te),y[M+2+32]=y[M+1+96]=bn(Z,te,ie),y[M+3+32]=y[M+2+96]=bn(te,ie,oe),y[M+3+64]=bn(ie,oe,le),y[M+3+96]=bn(oe,le,ve)}function Fm(y,M){var C=y[M-1+0],z=y[M-1+32],Z=y[M-1+64],te=y[M-1+96];y[M+0+0]=C+z+1>>1,y[M+2+0]=y[M+0+32]=z+Z+1>>1,y[M+2+32]=y[M+0+64]=Z+te+1>>1,y[M+1+0]=bn(C,z,Z),y[M+3+0]=y[M+1+32]=bn(z,Z,te),y[M+3+32]=y[M+1+64]=bn(Z,te,te),y[M+3+64]=y[M+2+64]=y[M+0+96]=y[M+1+96]=y[M+2+96]=y[M+3+96]=te}function wc(y,M){var C=y[M-1+0],z=y[M-1+32],Z=y[M-1+64],te=y[M-1+96],ie=y[M-1-32],oe=y[M+0-32],le=y[M+1-32],ve=y[M+2-32];y[M+0+0]=y[M+2+32]=C+ie+1>>1,y[M+0+32]=y[M+2+64]=z+C+1>>1,y[M+0+64]=y[M+2+96]=Z+z+1>>1,y[M+0+96]=te+Z+1>>1,y[M+3+0]=bn(oe,le,ve),y[M+2+0]=bn(ie,oe,le),y[M+1+0]=y[M+3+32]=bn(C,ie,oe),y[M+1+32]=y[M+3+64]=bn(z,C,ie),y[M+1+64]=y[M+3+96]=bn(Z,z,C),y[M+1+96]=bn(te,Z,z)}function _o(y,M){var C;for(C=0;8>C;++C)r(y,M+32*C,y,M-32,8)}function $h(y,M){var C;for(C=0;8>C;++C)i(y,M,y[M-1],8),M+=32}function gu(y,M,C){var z;for(z=0;8>z;++z)i(M,C+32*z,y,8)}function Yi(y,M){var C,z=8;for(C=0;8>C;++C)z+=y[M+C-32]+y[M-1+32*C];gu(z>>4,y,M)}function Wo(y,M){var C,z=4;for(C=0;8>C;++C)z+=y[M+C-32];gu(z>>3,y,M)}function ga(y,M){var C,z=4;for(C=0;8>C;++C)z+=y[M-1+32*C];gu(z>>3,y,M)}function vu(y,M){gu(128,y,M)}function yu(y,M,C){var z=y[M-C],Z=y[M+0],te=3*(Z-z)+bd[1020+y[M-2*C]-y[M+C]],ie=ef[112+(te+4>>3)];y[M-C]=Ts[255+z+ef[112+(te+3>>3)]],y[M+0]=Ts[255+Z-ie]}function wd(y,M,C,z){var Z=y[M+0],te=y[M+C];return fs[255+y[M-2*C]-y[M-C]]>z||fs[255+te-Z]>z}function oo(y,M,C,z){return 4*fs[255+y[M-C]-y[M+0]]+fs[255+y[M-2*C]-y[M+C]]<=z}function Sd(y,M,C,z,Z){var te=y[M-3*C],ie=y[M-2*C],oe=y[M-C],le=y[M+0],ve=y[M+C],ye=y[M+2*C],We=y[M+3*C];return 4*fs[255+oe-le]+fs[255+ie-ve]>z?0:fs[255+y[M-4*C]-te]<=Z&&fs[255+te-ie]<=Z&&fs[255+ie-oe]<=Z&&fs[255+We-ye]<=Z&&fs[255+ye-ve]<=Z&&fs[255+ve-le]<=Z}function xu(y,M,C,z){var Z=2*z+1;for(z=0;16>z;++z)oo(y,M+z,C,Z)&&yu(y,M+z,C)}function va(y,M,C,z){var Z=2*z+1;for(z=0;16>z;++z)oo(y,M+z*C,1,Z)&&yu(y,M+z*C,1)}function Pi(y,M,C,z){var Z;for(Z=3;0<Z;--Z)xu(y,M+=4*C,C,z)}function Sc(y,M,C,z){var Z;for(Z=3;0<Z;--Z)va(y,M+=4,C,z)}function jo(y,M,C,z,Z,te,ie,oe){for(te=2*te+1;0<Z--;){if(Sd(y,M,C,te,ie))if(wd(y,M,C,oe))yu(y,M,C);else{var le=y,ve=M,ye=C,We=le[ve-2*ye],je=le[ve-ye],Ue=le[ve+0],_t=le[ve+ye],nt=le[ve+2*ye],Re=27*(xt=bd[1020+3*(Ue-je)+bd[1020+We-_t]])+63>>7,Ie=18*xt+63>>7,xt=9*xt+63>>7;le[ve-3*ye]=Ts[255+le[ve-3*ye]+xt],le[ve-2*ye]=Ts[255+We+Ie],le[ve-ye]=Ts[255+je+Re],le[ve+0]=Ts[255+Ue-Re],le[ve+ye]=Ts[255+_t-Ie],le[ve+2*ye]=Ts[255+nt-xt]}M+=z}}function ls(y,M,C,z,Z,te,ie,oe){for(te=2*te+1;0<Z--;){if(Sd(y,M,C,te,ie))if(wd(y,M,C,oe))yu(y,M,C);else{var le=y,ve=M,ye=C,We=le[ve-ye],je=le[ve+0],Ue=le[ve+ye],_t=ef[112+((nt=3*(je-We))+4>>3)],nt=ef[112+(nt+3>>3)],Re=_t+1>>1;le[ve-2*ye]=Ts[255+le[ve-2*ye]+Re],le[ve-ye]=Ts[255+We+nt],le[ve+0]=Ts[255+je-_t],le[ve+ye]=Ts[255+Ue-Re]}M+=z}}function wu(y,M,C,z,Z,te){jo(y,M,C,1,16,z,Z,te)}function $a(y,M,C,z,Z,te){jo(y,M,1,C,16,z,Z,te)}function _d(y,M,C,z,Z,te){var ie;for(ie=3;0<ie;--ie)ls(y,M+=4*C,C,1,16,z,Z,te)}function Ul(y,M,C,z,Z,te){var ie;for(ie=3;0<ie;--ie)ls(y,M+=4,1,C,16,z,Z,te)}function Kh(y,M,C,z,Z,te,ie,oe){jo(y,M,Z,1,8,te,ie,oe),jo(C,z,Z,1,8,te,ie,oe)}function ya(y,M,C,z,Z,te,ie,oe){jo(y,M,1,Z,8,te,ie,oe),jo(C,z,1,Z,8,te,ie,oe)}function us(y,M,C,z,Z,te,ie,oe){ls(y,M+4*Z,Z,1,8,te,ie,oe),ls(C,z+4*Z,Z,1,8,te,ie,oe)}function ao(y,M,C,z,Z,te,ie,oe){ls(y,M+4,1,Z,8,te,ie,oe),ls(C,z+4,1,Z,8,te,ie,oe)}function lo(){this.ba=new Ge,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new pt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Su(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function _c(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function bo(){this.ua=0,this.Wa=new K,this.vb=new K,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new H,this.yc=new B}function xa(){this.xb=this.a=0,this.l=new jt,this.ca=new Ge,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new I,this.Pb=0,this.wd=new I,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new bo,this.ab=0,this.gc=o(4,_c),this.Oc=0}function Ka(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new jt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Bl(y,M,C,z,Z,te,ie){for(y=y==null?0:y[M+0],M=0;M<ie;++M)Z[te+M]=y+C[z+M]&255,y=Z[te+M]}function zl(y,M,C,z,Z,te,ie){var oe;if(y==null)Bl(null,null,C,z,Z,te,ie);else for(oe=0;oe<ie;++oe)Z[te+oe]=y[M+oe]+C[z+oe]&255}function Ja(y,M,C,z,Z,te,ie){if(y==null)Bl(null,null,C,z,Z,te,ie);else{var oe,le=y[M+0],ve=le,ye=le;for(oe=0;oe<ie;++oe)ve=ye+(le=y[M+oe])-ve,ye=C[z+oe]+(-256&ve?0>ve?0:255:ve)&255,ve=le,Z[te+oe]=ye}}function bc(y,M,C,z){var Z=M.width,te=M.o;if(e(y!=null&&M!=null),0>C||0>=z||C+z>te)return null;if(!y.Cc){if(y.ga==null){var ie;if(y.ga=new Ka,(ie=y.ga==null)||(ie=M.width*M.o,e(y.Gb.length==0),y.Gb=s(ie),y.Uc=0,y.Gb==null?ie=0:(y.mb=y.Gb,y.nb=y.Uc,y.rc=null,ie=1),ie=!ie),!ie){ie=y.ga;var oe=y.Fa,le=y.P,ve=y.qc,ye=y.mb,We=y.nb,je=le+1,Ue=ve-1,_t=ie.l;if(e(oe!=null&&ye!=null&&M!=null),Lo[0]=null,Lo[1]=Bl,Lo[2]=zl,Lo[3]=Ja,ie.ca=ye,ie.tb=We,ie.c=M.width,ie.i=M.height,e(0<ie.c&&0<ie.i),1>=ve)M=0;else if(ie.$a=oe[le+0]>>0&3,ie.Z=oe[le+0]>>2&3,ie.Lc=oe[le+0]>>4&3,le=oe[le+0]>>6&3,0>ie.$a||1<ie.$a||4<=ie.Z||1<ie.Lc||le)M=0;else if(_t.put=gn,_t.ac=Nn,_t.bc=kn,_t.ma=ie,_t.width=M.width,_t.height=M.height,_t.Da=M.Da,_t.v=M.v,_t.va=M.va,_t.j=M.j,_t.o=M.o,ie.$a)e:{e(ie.$a==1),M=me();t:for(;;){if(M==null){M=0;break e}if(e(ie!=null),ie.mc=M,M.c=ie.c,M.i=ie.i,M.l=ie.l,M.l.ma=ie,M.l.width=ie.c,M.l.height=ie.i,M.a=0,W(M.m,oe,je,Ue),!de(ie.c,ie.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&Wr(M.s)?(ie.ic=1,oe=M.c*M.i,M.Ta=null,M.Ua=0,M.V=s(oe),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(ie.ic=0,M=we(M,ie.c)),!M))break t;M=1;break e}ie.mc=null,M=0}else M=Ue>=ie.c*ie.i;ie=!M}if(ie)return null;y.ga.Lc!=1?y.Ga=0:z=te-C}e(y.ga!=null),e(C+z<=te);e:{if(M=(oe=y.ga).c,te=oe.l.o,oe.$a==0){if(je=y.rc,Ue=y.Vc,_t=y.Fa,le=y.P+1+C*M,ve=y.mb,ye=y.nb+C*M,e(le<=y.P+y.qc),oe.Z!=0)for(e(Lo[oe.Z]!=null),ie=0;ie<z;++ie)Lo[oe.Z](je,Ue,_t,le,ve,ye,M),je=ve,Ue=ye,ye+=M,le+=M;else for(ie=0;ie<z;++ie)r(ve,ye,_t,le,M),je=ve,Ue=ye,ye+=M,le+=M;y.rc=je,y.Vc=Ue}else{if(e(oe.mc!=null),M=C+z,e((ie=oe.mc)!=null),e(M<=ie.i),ie.C>=M)M=1;else if(oe.ic||Ve(),oe.ic){oe=ie.V,je=ie.Ba,Ue=ie.c;var nt=ie.i,Re=(_t=1,le=ie.$/Ue,ve=ie.$%Ue,ye=ie.m,We=ie.s,ie.$),Ie=Ue*nt,xt=Ue*M,Mt=We.wc,St=Re<xt?$n(We,ve,le):null;e(Re<=Ie),e(M<=nt),e(Wr(We));t:for(;;){for(;!ye.h&&Re<xt;){if(ve&Mt||(St=$n(We,ve,le)),e(St!=null),fe(ye),256>(nt=Zn(St.G[0],St.H[0],ye)))oe[je+Re]=nt,++Re,++ve>=Ue&&(ve=0,++le<=M&&!(le%16)&&q(ie,le));else{if(!(280>nt)){_t=0;break t}nt=Vr(nt-256,ye);var qt,Ut=Zn(St.G[4],St.H[4],ye);if(fe(ye),!(Re>=(Ut=Ir(Ue,Ut=Vr(Ut,ye)))&&Ie-Re>=nt)){_t=0;break t}for(qt=0;qt<nt;++qt)oe[je+Re+qt]=oe[je+Re+qt-Ut];for(Re+=nt,ve+=nt;ve>=Ue;)ve-=Ue,++le<=M&&!(le%16)&&q(ie,le);Re<xt&&ve&Mt&&(St=$n(We,ve,le))}e(ye.h==J(ye))}q(ie,le>M?M:le);break t}!_t||ye.h&&Re<Ie?(_t=0,ie.a=ye.h?5:3):ie.$=Re,M=_t}else M=U(ie,ie.V,ie.Ba,ie.c,ie.i,M,Xe);if(!M){z=0;break e}}C+z>=te&&(y.Cc=1),z=1}if(!z)return null;if(y.Cc&&((z=y.ga)!=null&&(z.mc=null),y.ga=null,0<y.Ga))return alert("todo:WebPDequantizeLevels"),null}return y.nb+C*Z}function A(y,M,C,z,Z,te){for(;0<Z--;){var ie,oe=y,le=M+(C?1:0),ve=y,ye=M+(C?0:3);for(ie=0;ie<z;++ie){var We=ve[ye+4*ie];We!=255&&(We*=32897,oe[le+4*ie+0]=oe[le+4*ie+0]*We>>23,oe[le+4*ie+1]=oe[le+4*ie+1]*We>>23,oe[le+4*ie+2]=oe[le+4*ie+2]*We>>23)}M+=te}}function $(y,M,C,z,Z){for(;0<z--;){var te;for(te=0;te<C;++te){var ie=y[M+2*te+0],oe=15&(ve=y[M+2*te+1]),le=4369*oe,ve=(240&ve|ve>>4)*le>>16;y[M+2*te+0]=(240&ie|ie>>4)*le>>16&240|(15&ie|ie<<4)*le>>16>>4&15,y[M+2*te+1]=240&ve|oe}M+=Z}}function _e(y,M,C,z,Z,te,ie,oe){var le,ve,ye=255;for(ve=0;ve<Z;++ve){for(le=0;le<z;++le){var We=y[M+le];te[ie+4*le]=We,ye&=We}M+=C,ie+=oe}return ye!=255}function Le(y,M,C,z,Z){var te;for(te=0;te<Z;++te)C[z+te]=y[M+te]>>8}function Ve(){_i=A,nr=$,hr=_e,zr=Le}function ct(y,M,C){R[y]=function(z,Z,te,ie,oe,le,ve,ye,We,je,Ue,_t,nt,Re,Ie,xt,Mt){var St,qt=Mt-1>>1,Ut=oe[le+0]|ve[ye+0]<<16,mn=We[je+0]|Ue[_t+0]<<16;e(z!=null);var Bt=3*Ut+mn+131074>>2;for(M(z[Z+0],255&Bt,Bt>>16,nt,Re),te!=null&&(Bt=3*mn+Ut+131074>>2,M(te[ie+0],255&Bt,Bt>>16,Ie,xt)),St=1;St<=qt;++St){var lr=oe[le+St]|ve[ye+St]<<16,vr=We[je+St]|Ue[_t+St]<<16,rr=Ut+lr+mn+vr+524296,Xn=rr+2*(lr+mn)>>3;Bt=Xn+Ut>>1,Ut=(rr=rr+2*(Ut+vr)>>3)+lr>>1,M(z[Z+2*St-1],255&Bt,Bt>>16,nt,Re+(2*St-1)*C),M(z[Z+2*St-0],255&Ut,Ut>>16,nt,Re+(2*St-0)*C),te!=null&&(Bt=rr+mn>>1,Ut=Xn+vr>>1,M(te[ie+2*St-1],255&Bt,Bt>>16,Ie,xt+(2*St-1)*C),M(te[ie+2*St+0],255&Ut,Ut>>16,Ie,xt+(2*St+0)*C)),Ut=lr,mn=vr}1&Mt||(Bt=3*Ut+mn+131074>>2,M(z[Z+Mt-1],255&Bt,Bt>>16,nt,Re+(Mt-1)*C),te!=null&&(Bt=3*mn+Ut+131074>>2,M(te[ie+Mt-1],255&Bt,Bt>>16,Ie,xt+(Mt-1)*C)))}}function Et(){ds[tf]=Pd,ds[Cu]=zm,ds[nf]=Rd,ds[Pc]=Ic,ds[Vl]=Ki,ds[Md]=kv,ds[Dm]=$x,ds[Ed]=zm,ds[Ad]=Ic,ds[Rc]=Ki,ds[Td]=kv}function Ht(y){return y&~Iv?0>y?0:255:y>>Hm}function an(y,M){return Ht((19077*y>>8)+(26149*M>>8)-14234)}function En(y,M,C){return Ht((19077*y>>8)-(6419*M>>8)-(13320*C>>8)+8708)}function cn(y,M){return Ht((19077*y>>8)+(33050*M>>8)-17685)}function Tn(y,M,C,z,Z){z[Z+0]=an(y,C),z[Z+1]=En(y,M,C),z[Z+2]=cn(y,M)}function wr(y,M,C,z,Z){z[Z+0]=cn(y,M),z[Z+1]=En(y,M,C),z[Z+2]=an(y,C)}function gr(y,M,C,z,Z){var te=En(y,M,C);M=te<<3&224|cn(y,M)>>3,z[Z+0]=248&an(y,C)|te>>5,z[Z+1]=M}function br(y,M,C,z,Z){var te=240&cn(y,M)|15;z[Z+0]=240&an(y,C)|En(y,M,C)>>4,z[Z+1]=te}function ti(y,M,C,z,Z){z[Z+0]=255,Tn(y,M,C,z,Z+1)}function Ri(y,M,C,z,Z){wr(y,M,C,z,Z),z[Z+3]=255}function uo(y,M,C,z,Z){Tn(y,M,C,z,Z),z[Z+3]=255}function Es(y,M){return 0>y?0:y>M?M:y}function ni(y,M,C){R[y]=function(z,Z,te,ie,oe,le,ve,ye,We){for(var je=ye+(-2&We)*C;ye!=je;)M(z[Z+0],te[ie+0],oe[le+0],ve,ye),M(z[Z+1],te[ie+0],oe[le+0],ve,ye+C),Z+=2,++ie,++le,ye+=2*C;1&We&&M(z[Z+0],te[ie+0],oe[le+0],ve,ye)}}function cs(y,M,C){return C==0?y==0?M==0?6:5:M==0?4:0:C}function Mr(y,M,C,z,Z){switch(y>>>30){case 3:Ao(M,C,z,Z,0);break;case 2:qr(M,C,z,Z);break;case 1:Vi(M,C,z,Z)}}function Qa(y,M){var C,z,Z=M.M,te=M.Nb,ie=y.oc,oe=y.pc+40,le=y.oc,ve=y.pc+584,ye=y.oc,We=y.pc+600;for(C=0;16>C;++C)ie[oe+32*C-1]=129;for(C=0;8>C;++C)le[ve+32*C-1]=129,ye[We+32*C-1]=129;for(0<Z?ie[oe-1-32]=le[ve-1-32]=ye[We-1-32]=129:(i(ie,oe-32-1,127,21),i(le,ve-32-1,127,9),i(ye,We-32-1,127,9)),z=0;z<y.za;++z){var je=M.ya[M.aa+z];if(0<z){for(C=-1;16>C;++C)r(ie,oe+32*C-4,ie,oe+32*C+12,4);for(C=-1;8>C;++C)r(le,ve+32*C-4,le,ve+32*C+4,4),r(ye,We+32*C-4,ye,We+32*C+4,4)}var Ue=y.Gd,_t=y.Hd+z,nt=je.ad,Re=je.Hc;if(0<Z&&(r(ie,oe-32,Ue[_t].y,0,16),r(le,ve-32,Ue[_t].f,0,8),r(ye,We-32,Ue[_t].ea,0,8)),je.Za){var Ie=ie,xt=oe-32+16;for(0<Z&&(z>=y.za-1?i(Ie,xt,Ue[_t].y[15],4):r(Ie,xt,Ue[_t+1].y,0,4)),C=0;4>C;C++)Ie[xt+128+C]=Ie[xt+256+C]=Ie[xt+384+C]=Ie[xt+0+C];for(C=0;16>C;++C,Re<<=2)Ie=ie,xt=oe+sf[C],Co[je.Ob[C]](Ie,xt),Mr(Re,nt,16*+C,Ie,xt)}else if(Ie=cs(z,Z,je.Ob[0]),el[Ie](ie,oe),Re!=0)for(C=0;16>C;++C,Re<<=2)Mr(Re,nt,16*+C,ie,oe+sf[C]);for(C=je.Gc,Ie=cs(z,Z,je.Dd),Ea[Ie](le,ve),Ea[Ie](ye,We),Re=nt,Ie=le,xt=ve,255&(je=C>>0)&&(170&je?Eu(Re,256,Ie,xt):Yr(Re,256,Ie,xt)),je=ye,Re=We,255&(C>>=8)&&(170&C?Eu(nt,320,je,Re):Yr(nt,320,je,Re)),Z<y.Ub-1&&(r(Ue[_t].y,0,ie,oe+480,16),r(Ue[_t].f,0,le,ve+224,8),r(Ue[_t].ea,0,ye,We+224,8)),C=8*te*y.B,Ue=y.sa,_t=y.ta+16*z+16*te*y.R,nt=y.qa,je=y.ra+8*z+C,Re=y.Ha,Ie=y.Ia+8*z+C,C=0;16>C;++C)r(Ue,_t+C*y.R,ie,oe+32*C,16);for(C=0;8>C;++C)r(nt,je+C*y.B,le,ve+32*C,8),r(Re,Ie+C*y.B,ye,We+32*C,8)}}function hs(y,M,C,z,Z,te,ie,oe,le){var ve=[0],ye=[0],We=0,je=le!=null?le.kd:0,Ue=le??new Su;if(y==null||12>C)return 7;Ue.data=y,Ue.w=M,Ue.ha=C,M=[M],C=[C],Ue.gb=[Ue.gb];e:{var _t=M,nt=C,Re=Ue.gb;if(e(y!=null),e(nt!=null),e(Re!=null),Re[0]=0,12<=nt[0]&&!n(y,_t[0],"RIFF")){if(n(y,_t[0]+8,"WEBP")){Re=3;break e}var Ie=De(y,_t[0]+4);if(12>Ie||4294967286<Ie){Re=3;break e}if(je&&Ie>nt[0]-8){Re=7;break e}Re[0]=Ie,_t[0]+=12,nt[0]-=12}Re=0}if(Re!=0)return Re;for(Ie=0<Ue.gb[0],C=C[0];;){e:{var xt=y;nt=M,Re=C;var Mt=ve,St=ye,qt=_t=[0];if((Bt=We=[We])[0]=0,8>Re[0])Re=7;else{if(!n(xt,nt[0],"VP8X")){if(De(xt,nt[0]+4)!=10){Re=3;break e}if(18>Re[0]){Re=7;break e}var Ut=De(xt,nt[0]+8),mn=1+he(xt,nt[0]+12);if(2147483648<=mn*(xt=1+he(xt,nt[0]+15))){Re=3;break e}qt!=null&&(qt[0]=Ut),Mt!=null&&(Mt[0]=mn),St!=null&&(St[0]=xt),nt[0]+=18,Re[0]-=18,Bt[0]=1}Re=0}}if(We=We[0],_t=_t[0],Re!=0)return Re;if(nt=!!(2&_t),!Ie&&We)return 3;if(te!=null&&(te[0]=!!(16&_t)),ie!=null&&(ie[0]=nt),oe!=null&&(oe[0]=0),ie=ve[0],_t=ye[0],We&&nt&&le==null){Re=0;break}if(4>C){Re=7;break}if(Ie&&We||!Ie&&!We&&!n(y,M[0],"ALPH")){C=[C],Ue.na=[Ue.na],Ue.P=[Ue.P],Ue.Sa=[Ue.Sa];e:{Ut=y,Re=M,Ie=C;var Bt=Ue.gb;Mt=Ue.na,St=Ue.P,qt=Ue.Sa,mn=22,e(Ut!=null),e(Ie!=null),xt=Re[0];var lr=Ie[0];for(e(Mt!=null),e(qt!=null),Mt[0]=null,St[0]=null,qt[0]=0;;){if(Re[0]=xt,Ie[0]=lr,8>lr){Re=7;break e}var vr=De(Ut,xt+4);if(4294967286<vr){Re=3;break e}var rr=8+vr+1&-2;if(mn+=rr,0<Bt&&mn>Bt){Re=3;break e}if(!n(Ut,xt,"VP8 ")||!n(Ut,xt,"VP8L")){Re=0;break e}if(lr[0]<rr){Re=7;break e}n(Ut,xt,"ALPH")||(Mt[0]=Ut,St[0]=xt+8,qt[0]=vr),xt+=rr,lr-=rr}}if(C=C[0],Ue.na=Ue.na[0],Ue.P=Ue.P[0],Ue.Sa=Ue.Sa[0],Re!=0)break}C=[C],Ue.Ja=[Ue.Ja],Ue.xa=[Ue.xa];e:if(Bt=y,Re=M,Ie=C,Mt=Ue.gb[0],St=Ue.Ja,qt=Ue.xa,Ut=Re[0],xt=!n(Bt,Ut,"VP8 "),mn=!n(Bt,Ut,"VP8L"),e(Bt!=null),e(Ie!=null),e(St!=null),e(qt!=null),8>Ie[0])Re=7;else{if(xt||mn){if(Bt=De(Bt,Ut+4),12<=Mt&&Bt>Mt-12){Re=3;break e}if(je&&Bt>Ie[0]-8){Re=7;break e}St[0]=Bt,Re[0]+=8,Ie[0]-=8,qt[0]=mn}else qt[0]=5<=Ie[0]&&Bt[Ut+0]==47&&!(Bt[Ut+4]>>5),St[0]=Ie[0];Re=0}if(C=C[0],Ue.Ja=Ue.Ja[0],Ue.xa=Ue.xa[0],M=M[0],Re!=0)break;if(4294967286<Ue.Ja)return 3;if(oe==null||nt||(oe[0]=Ue.xa?2:1),ie=[ie],_t=[_t],Ue.xa){if(5>C){Re=7;break}oe=ie,je=_t,nt=te,y==null||5>C?y=0:5<=C&&y[M+0]==47&&!(y[M+4]>>5)?(Ie=[0],Bt=[0],Mt=[0],W(St=new I,y,M,C),Ft(St,Ie,Bt,Mt)?(oe!=null&&(oe[0]=Ie[0]),je!=null&&(je[0]=Bt[0]),nt!=null&&(nt[0]=Mt[0]),y=1):y=0):y=0}else{if(10>C){Re=7;break}oe=_t,y==null||10>C||!xn(y,M+3,C-3)?y=0:(je=y[M+0]|y[M+1]<<8|y[M+2]<<16,nt=16383&(y[M+7]<<8|y[M+6]),y=16383&(y[M+9]<<8|y[M+8]),1&je||3<(je>>1&7)||!(je>>4&1)||je>>5>=Ue.Ja||!nt||!y?y=0:(ie&&(ie[0]=nt),oe&&(oe[0]=y),y=1))}if(!y||(ie=ie[0],_t=_t[0],We&&(ve[0]!=ie||ye[0]!=_t)))return 3;le!=null&&(le[0]=Ue,le.offset=M-le.w,e(4294967286>M-le.w),e(le.offset==le.ha-C));break}return Re==0||Re==7&&We&&le==null?(te!=null&&(te[0]|=Ue.na!=null&&0<Ue.na.length),z!=null&&(z[0]=ie),Z!=null&&(Z[0]=_t),0):Re}function Mc(y,M,C){var z=M.width,Z=M.height,te=0,ie=0,oe=z,le=Z;if(M.Da=y!=null&&0<y.Da,M.Da&&(oe=y.cd,le=y.bd,te=y.v,ie=y.j,11>C||(te&=-2,ie&=-2),0>te||0>ie||0>=oe||0>=le||te+oe>z||ie+le>Z))return 0;if(M.v=te,M.j=ie,M.va=te+oe,M.o=ie+le,M.U=oe,M.T=le,M.da=y!=null&&0<y.da,M.da){if(!tt(oe,le,C=[y.ib],te=[y.hb]))return 0;M.ib=C[0],M.hb=te[0]}return M.ob=y!=null&&y.ob,M.Kb=y==null||!y.Sd,M.da&&(M.ob=M.ib<3*z/4&&M.hb<3*Z/4,M.Kb=0),1}function Ec(y){if(y==null)return 2;if(11>y.S){var M=y.f.RGBA;M.fb+=(y.height-1)*M.A,M.A=-M.A}else M=y.f.kb,y=y.height,M.O+=(y-1)*M.fa,M.fa=-M.fa,M.N+=(y-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(y-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(y-1)*M.lb,M.lb=-M.lb);return 0}function Hl(y,M,C,z){if(z==null||0>=y||0>=M)return 2;if(C!=null){if(C.Da){var Z=C.cd,te=C.bd,ie=-2&C.v,oe=-2&C.j;if(0>ie||0>oe||0>=Z||0>=te||ie+Z>y||oe+te>M)return 2;y=Z,M=te}if(C.da){if(!tt(y,M,Z=[C.ib],te=[C.hb]))return 2;y=Z[0],M=te[0]}}z.width=y,z.height=M;e:{var le=z.width,ve=z.height;if(y=z.S,0>=le||0>=ve||!(y>=tf&&13>y))y=2;else{if(0>=z.Rd&&z.sd==null){ie=te=Z=M=0;var ye=(oe=le*Xm[y])*ve;if(11>y||(te=(ve+1)/2*(M=(le+1)/2),y==12&&(ie=(Z=le)*ve)),(ve=s(ye+2*te+ie))==null){y=1;break e}z.sd=ve,11>y?((le=z.f.RGBA).eb=ve,le.fb=0,le.A=oe,le.size=ye):((le=z.f.kb).y=ve,le.O=0,le.fa=oe,le.Fd=ye,le.f=ve,le.N=0+ye,le.Ab=M,le.Cd=te,le.ea=ve,le.W=0+ye+te,le.Db=M,le.Ed=te,y==12&&(le.F=ve,le.J=0+ye+2*te),le.Tc=ie,le.lb=Z)}if(M=1,Z=z.S,te=z.width,ie=z.height,Z>=tf&&13>Z)if(11>Z)y=z.f.RGBA,M&=(oe=Math.abs(y.A))*(ie-1)+te<=y.size,M&=oe>=te*Xm[Z],M&=y.eb!=null;else{y=z.f.kb,oe=(te+1)/2,ye=(ie+1)/2,le=Math.abs(y.fa),ve=Math.abs(y.Ab);var We=Math.abs(y.Db),je=Math.abs(y.lb),Ue=je*(ie-1)+te;M&=le*(ie-1)+te<=y.Fd,M&=ve*(ye-1)+oe<=y.Cd,M=(M&=We*(ye-1)+oe<=y.Ed)&le>=te&ve>=oe&We>=oe,M&=y.y!=null,M&=y.f!=null,M&=y.ea!=null,Z==12&&(M&=je>=te,M&=Ue<=y.Tc,M&=y.F!=null)}else M=0;y=M?0:2}}return y!=0||C!=null&&C.fd&&(y=Ec(z)),y}var ki=64,_u=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],wa=24,Xo=32,bu=8,Gi=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ke("Predictor0","PredictorAdd0"),R.Predictor0=function(){return 4278190080},R.Predictor1=function(y){return y},R.Predictor2=function(y,M,C){return M[C+0]},R.Predictor3=function(y,M,C){return M[C+1]},R.Predictor4=function(y,M,C){return M[C-1]},R.Predictor5=function(y,M,C){return vt(vt(y,M[C+1]),M[C+0])},R.Predictor6=function(y,M,C){return vt(y,M[C-1])},R.Predictor7=function(y,M,C){return vt(y,M[C+0])},R.Predictor8=function(y,M,C){return vt(M[C-1],M[C+0])},R.Predictor9=function(y,M,C){return vt(M[C+0],M[C+1])},R.Predictor10=function(y,M,C){return vt(vt(y,M[C-1]),vt(M[C+0],M[C+1]))},R.Predictor11=function(y,M,C){var z=M[C+0];return 0>=Pe(z>>24&255,y>>24&255,(M=M[C-1])>>24&255)+Pe(z>>16&255,y>>16&255,M>>16&255)+Pe(z>>8&255,y>>8&255,M>>8&255)+Pe(255&z,255&y,255&M)?z:y},R.Predictor12=function(y,M,C){var z=M[C+0];return(ue((y>>24&255)+(z>>24&255)-((M=M[C-1])>>24&255))<<24|ue((y>>16&255)+(z>>16&255)-(M>>16&255))<<16|ue((y>>8&255)+(z>>8&255)-(M>>8&255))<<8|ue((255&y)+(255&z)-(255&M)))>>>0},R.Predictor13=function(y,M,C){var z=M[C-1];return(Q((y=vt(y,M[C+0]))>>24&255,z>>24&255)<<24|Q(y>>16&255,z>>16&255)<<16|Q(y>>8&255,z>>8&255)<<8|Q(y>>0&255,z>>0&255))>>>0};var Ac=R.PredictorAdd0;R.PredictorAdd1=et,Ke("Predictor2","PredictorAdd2"),Ke("Predictor3","PredictorAdd3"),Ke("Predictor4","PredictorAdd4"),Ke("Predictor5","PredictorAdd5"),Ke("Predictor6","PredictorAdd6"),Ke("Predictor7","PredictorAdd7"),Ke("Predictor8","PredictorAdd8"),Ke("Predictor9","PredictorAdd9"),Ke("Predictor10","PredictorAdd10"),Ke("Predictor11","PredictorAdd11"),Ke("Predictor12","PredictorAdd12"),Ke("Predictor13","PredictorAdd13");var Tc=R.PredictorAdd2;it("ColorIndexInverseTransform","MapARGB","32b",function(y){return y>>8&255},function(y){return y}),it("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(y){return y},function(y){return y>>8&255});var Jh,Zi=R.ColorIndexInverseTransform,Mu=R.MapARGB,Gl=R.VP8LColorIndexInverseTransformAlpha,As=R.MapAlpha,Mo=R.VP8LPredictorsAdd=[];Mo.length=16,(R.VP8LPredictors=[]).length=16,(R.VP8LPredictorsAdd_C=[]).length=16,(R.VP8LPredictors_C=[]).length=16;var Eo,Xr,$i,co,Sa,qo,Er,Ao,qr,Eu,Vi,Yr,Yo,Nr,Si,Br,_a,To,Zo,Cc,ri,ba,Au,Os,_i,nr,hr,zr,ii=s(511),Ma=s(2041),Lc=s(225),Tu=s(767),Qh=0,bd=Ma,ef=Lc,Ts=Tu,fs=ii,tf=0,Cu=1,nf=2,Pc=3,Vl=4,Md=5,Dm=6,Ed=7,Ad=8,Rc=9,Td=10,Av=[2,3,7],Wx=[3,3,11],Om=[280,256,256,256,40],jx=[0,1,1,1,0],Xx=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Tv=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Cv=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Lv=8,Cd=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],kc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],rf=null,qx=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Yx=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Ld=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Um=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Zx=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Pv=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Rv=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],el=[],Co=[],Ea=[],Aa=1,Bm=2,Lo=[],ds=[];ct("UpsampleRgbLinePair",Tn,3),ct("UpsampleBgrLinePair",wr,3),ct("UpsampleRgbaLinePair",uo,4),ct("UpsampleBgraLinePair",Ri,4),ct("UpsampleArgbLinePair",ti,4),ct("UpsampleRgba4444LinePair",br,2),ct("UpsampleRgb565LinePair",gr,2);var Pd=R.UpsampleRgbLinePair,Rd=R.UpsampleBgrLinePair,zm=R.UpsampleRgbaLinePair,Ic=R.UpsampleBgraLinePair,Ki=R.UpsampleArgbLinePair,kv=R.UpsampleRgba4444LinePair,$x=R.UpsampleRgb565LinePair,ps=16,Wi=1<<ps-1,Nc=-227,kd=482,Hm=6,Iv=(256<<Hm)-1,Gm=0,Vm=s(256),Nv=s(256),Wm=s(256),Fv=s(256),Dv=s(kd-Nc),Id=s(kd-Nc);ni("YuvToRgbRow",Tn,3),ni("YuvToBgrRow",wr,3),ni("YuvToRgbaRow",uo,4),ni("YuvToBgraRow",Ri,4),ni("YuvToArgbRow",ti,4),ni("YuvToRgba4444Row",br,2),ni("YuvToRgb565Row",gr,2);var sf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],of=[0,2,8],jm=[8,7,6,4,4,2,2,2,1,1,1,1],Ov=1;this.WebPDecodeRGBA=function(y,M,C,z,Z){var te=Cu,ie=new lo,oe=new Ge;ie.ba=oe,oe.S=te,oe.width=[oe.width],oe.height=[oe.height];var le=oe.width,ve=oe.height,ye=new yt;if(ye==null||y==null)var We=2;else e(ye!=null),We=hs(y,M,C,ye.width,ye.height,ye.Pd,ye.Qd,ye.format,null);if(We!=0?le=0:(le!=null&&(le[0]=ye.width[0]),ve!=null&&(ve[0]=ye.height[0]),le=1),le){oe.width=oe.width[0],oe.height=oe.height[0],z!=null&&(z[0]=oe.width),Z!=null&&(Z[0]=oe.height);e:{if(z=new jt,(Z=new Su).data=y,Z.w=M,Z.ha=C,Z.kd=1,M=[0],e(Z!=null),((y=hs(Z.data,Z.w,Z.ha,null,null,null,M,null,Z))==0||y==7)&&M[0]&&(y=4),(M=y)==0){if(e(ie!=null),z.data=Z.data,z.w=Z.w+Z.offset,z.ha=Z.ha-Z.offset,z.put=gn,z.ac=Nn,z.bc=kn,z.ma=ie,Z.xa){if((y=me())==null){ie=1;break e}if(function(je,Ue){var _t=[0],nt=[0],Re=[0];t:for(;;){if(je==null)return 0;if(Ue==null)return je.a=2,0;if(je.l=Ue,je.a=0,W(je.m,Ue.data,Ue.w,Ue.ha),!Ft(je.m,_t,nt,Re)){je.a=3;break t}if(je.xb=Bm,Ue.width=_t[0],Ue.height=nt[0],!de(_t[0],nt[0],1,je,null))break t;return 1}return e(je.a!=0),0}(y,z)){if(z=(M=Hl(z.width,z.height,ie.Oa,ie.ba))==0){t:{z=y;n:for(;;){if(z==null){z=0;break t}if(e(z.s.yc!=null),e(z.s.Ya!=null),e(0<z.s.Wb),e((C=z.l)!=null),e((Z=C.ma)!=null),z.xb!=0){if(z.ca=Z.ba,z.tb=Z.tb,e(z.ca!=null),!Mc(Z.Oa,C,Pc)){z.a=2;break n}if(!we(z,C.width)||C.da)break n;if((C.da||st(z.ca.S))&&Ve(),11>z.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),z.ca.f.kb.F!=null&&Ve()),z.Pb&&0<z.s.ua&&z.s.vb.X==null&&!ze(z.s.vb,z.s.Wa.Xa)){z.a=1;break n}z.xb=0}if(!U(z,z.V,z.Ba,z.c,z.i,C.o,pn))break n;Z.Dc=z.Ma,z=1;break t}e(z.a!=0),z=0}z=!z}z&&(M=y.a)}else M=y.a}else{if((y=new ln)==null){ie=1;break e}if(y.Fa=Z.na,y.P=Z.P,y.qc=Z.Sa,tr(y,z)){if((M=Hl(z.width,z.height,ie.Oa,ie.ba))==0){if(y.Aa=0,C=ie.Oa,e((Z=y)!=null),C!=null){if(0<(le=0>(le=C.Md)?0:100<le?255:255*le/100)){for(ve=ye=0;4>ve;++ve)12>(We=Z.pb[ve]).lc&&(We.ia=le*jm[0>We.lc?0:We.lc]>>3),ye|=We.ia;ye&&(alert("todo:VP8InitRandom"),Z.ia=1)}Z.Ga=C.Id,100<Z.Ga?Z.Ga=100:0>Z.Ga&&(Z.Ga=0)}jr(y,z)||(M=y.a)}}else M=y.a}M==0&&ie.Oa!=null&&ie.Oa.fd&&(M=Ec(ie.ba))}ie=M}te=ie!=0?null:11>te?oe.f.RGBA.eb:oe.f.kb.y}else te=null;return te};var Xm=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(R,P){for(var D="",O=0;O<4;O++)D+=String.fromCharCode(R[P++]);return D}function c(R,P){return(R[P+0]<<0|R[P+1]<<8|R[P+2]<<16)>>>0}function h(R,P){return(R[P+0]<<0|R[P+1]<<8|R[P+2]<<16|R[P+3]<<24)>>>0}new l;var f=[0],d=[0],v=[],x=new l,w=t,g=function(R,P){var D={},O=0,B=!1,V=0,H=0;if(D.frames=[],!function(X,J,ae,fe){for(var Se=0;Se<fe;Se++)if(X[J+Se]!=ae.charCodeAt(Se))return!0;return!1}(R,P,"RIFF",4)){for(h(R,P+=4),P+=8;P<R.length;){var ee=u(R,P),se=h(R,P+=4);P+=4;var ce=se+(1&se);switch(ee){case"VP8 ":case"VP8L":D.frames[O]===void 0&&(D.frames[O]={}),(j=D.frames[O]).src_off=B?H:P-8,j.src_size=V+se+8,O++,B&&(B=!1,V=0,H=0);break;case"VP8X":(j=D.header={}).feature_flags=R[P];var W=P+4;j.canvas_width=1+c(R,W),W+=3,j.canvas_height=1+c(R,W),W+=3;break;case"ALPH":B=!0,V=ce+8,H=P-8;break;case"ANIM":(j=D.header).bgcolor=h(R,P),W=P+4,j.loop_count=(re=R)[(I=W)+0]<<0|re[I+1]<<8,W+=2;break;case"ANMF":var Y,j;(j=D.frames[O]={}).offset_x=2*c(R,P),P+=3,j.offset_y=2*c(R,P),P+=3,j.width=1+c(R,P),P+=3,j.height=1+c(R,P),P+=3,j.duration=c(R,P),P+=3,Y=R[P++],j.dispose=1&Y,j.blend=Y>>1&1}ee!="ANMF"&&(P+=ce)}var re,I;return D}}(w,0);g.response=w,g.rgbaoutput=!0,g.dataurl=!1;var S=g.header?g.header:null,_=g.frames?g.frames:null;if(S){S.loop_counter=S.loop_count,f=[S.canvas_height],d=[S.canvas_width];for(var T=0;T<_.length&&_[T].blend!=0;T++);}var L=_[0],k=x.WebPDecodeRGBA(w,L.src_off,L.src_size,d,f);L.rgba=k,L.imgwidth=d[0],L.imgheight=f[0];for(var N=0;N<d[0]*f[0]*4;N++)v[N]=k[N];return this.width=d,this.height=f,this.data=v,this}(function(t){var e=function(){return typeof Kb=="function"},n=function(f,d,v,x){var w=4,g=o;switch(x){case t.image_compression.FAST:w=1,g=s;break;case t.image_compression.MEDIUM:w=6,g=a;break;case t.image_compression.SLOW:w=9,g=l}f=r(f,d,v,g);var S=Kb(f,{level:w});return t.__addimage__.arrayBufferToBinaryString(S)},r=function(f,d,v,x){for(var w,g,S,_=f.length/d,T=new Uint8Array(f.length+_),L=c(),k=0;k<_;k+=1){if(S=k*d,w=f.subarray(S,S+d),x)T.set(x(w,v,g),S+k);else{for(var N,R=L.length,P=[];N<R;N+=1)P[N]=L[N](w,v,g);var D=h(P.concat());T.set(P[D],S+k)}g=w}return T},i=function(f){var d=Array.apply([],f);return d.unshift(0),d},s=function(f,d){var v,x=[],w=f.length;x[0]=1;for(var g=0;g<w;g+=1)v=f[g-d]||0,x[g+1]=f[g]-v+256&255;return x},o=function(f,d,v){var x,w=[],g=f.length;w[0]=2;for(var S=0;S<g;S+=1)x=v&&v[S]||0,w[S+1]=f[S]-x+256&255;return w},a=function(f,d,v){var x,w,g=[],S=f.length;g[0]=3;for(var _=0;_<S;_+=1)x=f[_-d]||0,w=v&&v[_]||0,g[_+1]=f[_]+256-(x+w>>>1)&255;return g},l=function(f,d,v){var x,w,g,S,_=[],T=f.length;_[0]=4;for(var L=0;L<T;L+=1)x=f[L-d]||0,w=v&&v[L]||0,g=v&&v[L-d]||0,S=u(x,w,g),_[L+1]=f[L]-S+256&255;return _},u=function(f,d,v){if(f===d&&d===v)return f;var x=Math.abs(d-v),w=Math.abs(f-v),g=Math.abs(f+d-v-v);return x<=w&&x<=g?f:w<=g?d:v},c=function(){return[i,s,o,a,l]},h=function(f){var d=f.map(function(v){return v.reduce(function(x,w){return x+Math.abs(w)},0)});return d.indexOf(Math.min.apply(null,d))};t.processPNG=function(f,d,v,x){var w,g,S,_,T,L,k,N,R,P,D,O,B,V,H,ee=this.decode.FLATE_DECODE,se="";if(this.__addimage__.isArrayBuffer(f)&&(f=new Uint8Array(f)),this.__addimage__.isArrayBufferView(f)){if(f=(S=new MW(f)).imgData,g=S.bits,w=S.colorSpace,T=S.colors,[4,6].indexOf(S.colorType)!==-1){if(S.bits===8){R=(N=S.pixelBitlength==32?new Uint32Array(S.decodePixels().buffer):S.pixelBitlength==16?new Uint16Array(S.decodePixels().buffer):new Uint8Array(S.decodePixels().buffer)).length,D=new Uint8Array(R*S.colors),P=new Uint8Array(R);var ce,W=S.pixelBitlength-S.bits;for(V=0,H=0;V<R;V++){for(B=N[V],ce=0;ce<W;)D[H++]=B>>>ce&255,ce+=S.bits;P[V]=B>>>ce&255}}if(S.bits===16){R=(N=new Uint32Array(S.decodePixels().buffer)).length,D=new Uint8Array(R*(32/S.pixelBitlength)*S.colors),P=new Uint8Array(R*(32/S.pixelBitlength)),O=S.colors>1,V=0,H=0;for(var Y=0;V<R;)B=N[V++],D[H++]=B>>>0&255,O&&(D[H++]=B>>>16&255,B=N[V++],D[H++]=B>>>0&255),P[Y++]=B>>>16&255;g=8}x!==t.image_compression.NONE&&e()?(f=n(D,S.width*S.colors,S.colors,x),k=n(P,S.width,1,x)):(f=D,k=P,ee=void 0)}if(S.colorType===3&&(w=this.color_spaces.INDEXED,L=S.palette,S.transparency.indexed)){var j=S.transparency.indexed,re=0;for(V=0,R=j.length;V<R;++V)re+=j[V];if((re/=255)===R-1&&j.indexOf(0)!==-1)_=[j.indexOf(0)];else if(re!==R){for(N=S.decodePixels(),P=new Uint8Array(N.length),V=0,R=N.length;V<R;V++)P[V]=j[N[V]];k=n(P,S.width,1)}}var I=function(X){var J;switch(X){case t.image_compression.FAST:J=11;break;case t.image_compression.MEDIUM:J=13;break;case t.image_compression.SLOW:J=14;break;default:J=12}return J}(x);return ee===this.decode.FLATE_DECODE&&(se="/Predictor "+I+" "),se+="/Colors "+T+" /BitsPerComponent "+g+" /Columns "+S.width,(this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),(k&&this.__addimage__.isArrayBuffer(k)||this.__addimage__.isArrayBufferView(k))&&(k=this.__addimage__.arrayBufferToBinaryString(k)),{alias:v,data:f,index:d,filter:ee,decodeParameters:se,transparency:_,palette:L,sMask:k,predictor:I,width:S.width,height:S.height,bitsPerComponent:g,colorSpace:w}}}})(wn.API),function(t){t.processGIF89A=function(e,n,r,i){var s=new EW(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:a},c=new LS(100).encode(u,100);return t.processJPEG.call(this,c,n,r,i)},t.processGIF87A=t.processGIF89A}(wn.API),hl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:i,green:r,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},hl.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){Dr.log("bit decode error:"+n)}},hl.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<e;i++)for(var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+8*i*4,a=0;a<8&&8*i+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}n!==0&&(this.pos+=4-n)}},hl.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<t;i++){var s=this.datav.getUint8(this.pos++,!0),o=r*this.width*4+2*i*4,a=s>>4,l=15&s,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*i+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},hl.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*r;if(i<this.palette.length){var o=this.palette[i];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}t!==0&&(this.pos+=4-t)}},hl.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,u=s>>15?255:0,c=r*this.width*4+4*i;this.data[c]=l,this.data[c+1]=a,this.data[c+2]=o,this.data[c+3]=u}this.pos+=t}},hl.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,u=(o>>11)/e*255|0,c=i*this.width*4+4*s;this.data[c]=u,this.data[c+1]=l,this.data[c+2]=a,this.data[c+3]=255}this.pos+=t}},hl.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=i,this.data[o+2]=r,this.data[o+3]=255}this.pos+=this.width%4}},hl.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=i,this.data[a+2]=r,this.data[a+3]=o}},hl.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,n,r,i){var s=new hl(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new LS(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(wn.API),hC.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,n,r,i){var s=new hC(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},u=new LS(100).encode(l,100);return t.processJPEG.call(this,u,n,r,i)}}(wn.API),wn.API.processRGBA=function(t,e,n){for(var r=t.data,i=r.length,s=new Uint8Array(i/4*3),o=new Uint8Array(i/4),a=0,l=0,u=0;u<i;u+=4){var c=r[u],h=r[u+1],f=r[u+2],d=r[u+3];s[a++]=c,s[a++]=h,s[a++]=f,o[l++]=d}var v=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:v,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},wn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},mp=wn.API,ty=mp.getCharWidthsArray=function(t,e){var n,r,i=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:i.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:i.metadata.Unicode.kerning,c=u.fof?u.fof:1,h=e.doKerning!==!1,f=0,d=t.length,v=0,x=a[0]||l,w=[];for(n=0;n<d;n++)r=t.charCodeAt(n),typeof i.metadata.widthOfString=="function"?w.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(r))+o*(1e3/s)||0)/1e3):(f=h&&Pr(u[r])==="object"&&!isNaN(parseInt(u[r][v],10))?u[r][v]/c:0,w.push((a[r]||x)/l+f)),v=r;return w},aC=mp.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),i=e.charSpace||this.internal.getCharSpace();return mp.processArabic&&(t=mp.processArabic(t)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(t,n,i)/n:ty.apply(this,arguments).reduce(function(s,o){return s+o},0)},lC=function(t,e,n,r){for(var i=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;i.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>r&&(i.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&i.push(t.slice(l,s)),i},uC=function(t,e,n){n||(n={});var r,i,s,o,a,l,u,c=[],h=[c],f=n.textIndent||0,d=0,v=0,x=t.split(" "),w=ty.apply(this,[" ",n])[0];if(l=n.lineIndent===-1?x[0].length+2:n.lineIndent||0){var g=Array(l).join(" "),S=[];x.map(function(T){(T=T.split(/\s*\n/)).length>1?S=S.concat(T.map(function(L,k){return(k&&L.length?`
`:"")+L})):S.push(T[0])}),x=S,l=aC.apply(this,[g,n])}for(s=0,o=x.length;s<o;s++){var _=0;if(r=x[s],l&&r[0]==`
`&&(r=r.substr(1),_=1),f+d+(v=(i=ty.apply(this,[r,n])).reduce(function(T,L){return T+L},0))>e||_){if(v>e){for(a=lC.apply(this,[r,i,e-(f+d),e]),c.push(a.shift()),c=[a.pop()];a.length;)h.push([a.shift()]);v=i.slice(r.length-(c[0]?c[0].length:0)).reduce(function(T,L){return T+L},0)}else c=[r];h.push(c),f=v+l,d=w}else c.push(r),f+=d+v,d=w}return u=l?function(T,L){return(L?g:"")+T.join(" ")}:function(T){return T.join(" ")},h.map(u)},mp.splitTextToSize=function(t,e,n){var r,i=(n=n||{}).fontSize||this.internal.getFontSize(),s=function(c){if(c.widths&&c.kerning)return{widths:c.widths,kerning:c.kerning};var h=this.internal.getFont(c.fontName,c.fontStyle);return h.metadata.Unicode?{widths:h.metadata.Unicode.widths||{0:1},kerning:h.metadata.Unicode.kerning||{}}:{font:h.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/i;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/i:0,s.lineIndent=n.lineIndent;var a,l,u=[];for(a=0,l=r.length;a<l;a++)u=u.concat(uC.apply(this,[r[a],o,s]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},i=0;i<e.length;i++)n[e[i]]="0123456789abcdef"[i],r["0123456789abcdef"[i]]=e[i];var s=function(h){return"0x"+parseInt(h,10).toString(16)},o=t.__fontmetrics__.compress=function(h){var f,d,v,x,w=["{"];for(var g in h){if(f=h[g],isNaN(parseInt(g,10))?d="'"+g+"'":(g=parseInt(g,10),d=(d=s(g).slice(2)).slice(0,-1)+r[d.slice(-1)]),typeof f=="number")f<0?(v=s(f).slice(3),x="-"):(v=s(f).slice(2),x=""),v=x+v.slice(0,-1)+r[v.slice(-1)];else{if(Pr(f)!=="object")throw new Error("Don't know what to do with value type "+Pr(f)+".");v=o(f)}w.push(d+v)}return w.push("}"),w.join("")},a=t.__fontmetrics__.uncompress=function(h){if(typeof h!="string")throw new Error("Invalid argument passed to uncompress.");for(var f,d,v,x,w={},g=1,S=w,_=[],T="",L="",k=h.length-1,N=1;N<k;N+=1)(x=h[N])=="'"?f?(v=f.join(""),f=void 0):f=[]:f?f.push(x):x=="{"?(_.push([S,v]),S={},v=void 0):x=="}"?((d=_.pop())[0][d[1]]=S,v=void 0,S=d[0]):x=="-"?g=-1:v===void 0?n.hasOwnProperty(x)?(T+=n[x],v=parseInt(T,16)*g,g=1,T=""):T+=x:n.hasOwnProperty(x)?(L+=n[x],S[v]=parseInt(L,16)*g,g=1,v=void 0,L=""):L+=x;return w},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},c={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(h){var f=h.font,d=c.Unicode[f.postScriptName];d&&(f.metadata.Unicode={},f.metadata.Unicode.widths=d.widths,f.metadata.Unicode.kerning=d.kerning);var v=u.Unicode[f.postScriptName];v&&(f.metadata.Unicode.encoding=v,f.encoding=v.codePages[0])}])}(wn.API),function(t){var e=function(n){for(var r=n.length,i=new Uint8Array(r),s=0;s<r;s++)i[s]=n.charCodeAt(s);return i};t.API.events.push(["addFont",function(n){var r=void 0,i=n.font,s=n.instance;if(!i.isStandardFont){if(s===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(r=s.existsFileInVFS(i.postScriptName)===!1?s.loadFile(i.postScriptName):s.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(Jg(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,r)}}])}(wn),function(t){function e(){return(Mn.canvg?Promise.resolve(Mn.canvg):Xb(()=>import("./index.es-c9456d9e.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}wn.API.addSvgAsImage=function(n,r,i,s,o,a,l,u){if(isNaN(r)||isNaN(i))throw Dr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(s)||isNaN(o))throw Dr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=s,c.height=o;var h=c.getContext("2d");h.fillStyle="#fff",h.fillRect(0,0,c.width,c.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},d=this;return e().then(function(v){return v.fromString(h,n,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(f)}).then(function(){d.addImage(c.toDataURL("image/jpeg",1),r,i,s,o,l,u)})}}(),wn.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var i=0;i<this.internal.pages[r].length;i++)this.internal.pages[r][i]=this.internal.pages[r][i].replace(e,n);return this},wn.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,i,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],u=0,c=0,h=0;function f(v,x){var w,g=!1;for(w=0;w<v.length;w+=1)v[w]===x&&(g=!0);return g}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var d=a.length;for(h=0;h<d;h+=1)n[a[h]].value=n[a[h]].defaultValue,n[a[h]].explicitSet=!1}if(Pr(t)==="object"){for(i in t)if(s=t[i],f(a,i)&&s!==void 0){if(n[i].type==="boolean"&&typeof s=="boolean")n[i].value=s;else if(n[i].type==="name"&&f(n[i].valueSet,s))n[i].value=s;else if(n[i].type==="integer"&&Number.isInteger(s))n[i].value=s;else if(n[i].type==="array"){for(u=0;u<s.length;u+=1)if(r=!0,s[u].length===1&&typeof s[u][0]=="number")l.push(String(s[u]-1));else if(s[u].length>1){for(c=0;c<s[u].length;c+=1)typeof s[u][c]!="number"&&(r=!1);r===!0&&l.push([s[u][0]-1,s[u][1]-1].join(" "))}n[i].value="["+l.join(" ")+"]"}else n[i].value=n[i].defaultValue;n[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var v,x=[];for(v in n)n[v].explicitSet===!0&&(n[v].type==="name"?x.push("/"+v+" /"+n[v].value):x.push("/"+v+" "+n[v].value));x.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+x.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(t){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),s=unescape(encodeURIComponent(r)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=s.length+o.length+a.length+i.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(i+s+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(r,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(wn.API),function(t){var e=t.API,n=e.pdfEscape16=function(s,o){for(var a,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],c=[""],h=0,f=s.length;h<f;++h){if(a=o.metadata.characterToGlyph(s.charCodeAt(h)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=s.charCodeAt(h),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return c.join("");a=a.toString(16),c.push(u[4-a.length],a)}return c.join("")},r=function(s){var o,a,l,u,c,h,f;for(c=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],h=0,f=(a=Object.keys(s).sort(function(d,v){return d-v})).length;h<f;h++)o=a[h],l.length>=100&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),s[o]!==void 0&&s[o]!==null&&typeof s[o].toString=="function"&&(u=("0000"+s[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(c+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),c+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,c=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var h=a.metadata.Unicode.widths,f=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),d="",v=0;v<f.length;v++)d+=String.fromCharCode(f[v]);var x=u();c({data:d,addLength1:!0,objectId:x}),l("endobj");var w=u();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:w}),l("endobj");var g=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+bp(a.fontName)),l("/FontFile2 "+x+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var S=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+bp(a.fontName)),l("/FontDescriptor "+g+" 0 R"),l("/W "+t.API.PDFObject.convert(h)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+w+" 0 R"),l("/BaseFont /"+bp(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+S+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]),e.events.push(["putFont",function(s){(function(o){var a=o.font,l=o.out,u=o.newObject,c=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var h=a.metadata.rawData,f="",d=0;d<h.length;d++)f+=String.fromCharCode(h[d]);var v=u();c({data:f,addLength1:!0,objectId:v}),l("endobj");var x=u();c({data:r(a.metadata.toUnicode),addLength1:!0,objectId:x}),l("endobj");var w=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+v+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+bp(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var g=0;g<a.metadata.hmtx.widths.length;g++)a.metadata.hmtx.widths[g]=parseInt(a.metadata.hmtx.widths[g]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+x+" 0 R/BaseFont/"+bp(a.fontName)+"/FontDescriptor "+w+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(s)}]);var i=function(s){var o,a=s.text||"",l=s.x,u=s.y,c=s.options||{},h=s.mutex||{},f=h.pdfEscape,d=h.activeFontKey,v=h.fonts,x=d,w="",g=0,S="",_=v[x].encoding;if(v[x].encoding!=="Identity-H")return{text:a,x:l,y:u,options:c,mutex:h};for(S=a,x=d,Array.isArray(a)&&(S=a[0]),g=0;g<S.length;g+=1)v[x].metadata.hasOwnProperty("cmap")&&(o=v[x].metadata.cmap.unicode.codeMap[S[g].charCodeAt(0)]),o||S[g].charCodeAt(0)<256&&v[x].metadata.hasOwnProperty("Unicode")?w+=S[g]:w+="";var T="";return parseInt(x.slice(1))<14||_==="WinAnsiEncoding"?T=f(w,x).split("").map(function(L){return L.charCodeAt(0).toString(16)}).join(""):_==="Identity-H"&&(T=n(w,v[x])),h.isHex=!0,{text:T,x:l,y:u,options:c,mutex:h}};e.events.push(["postProcessText",function(s){var o=s.text||"",a=[],l={text:o,x:s.x,y:s.y,options:s.options,mutex:s.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([i(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(i(Object.assign({},l,{text:o[u]})).text);s.text=a}else s.text=i(Object.assign({},l,{text:o})).text}])}(wn),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,r){return e.call(this),this.internal.vFS[n]=r,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(wn.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(r){var i,s,o,a,l,u,c,h=e,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],d=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],v={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},x={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},w=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),S=!1,_=0;this.__bidiEngine__={};var T=function(O){var B=O.charCodeAt(),V=B>>8,H=x[V];return H!==void 0?h[256*H+(255&B)]:V===252||V===253?"AL":g.test(V)?"L":V===8?"R":"N"},L=function(O){for(var B,V=0;V<O.length;V++){if((B=T(O.charAt(V)))==="L")return!1;if(B==="R")return!0}return!1},k=function(O,B,V,H){var ee,se,ce,W,Y=B[H];switch(Y){case"L":case"R":S=!1;break;case"N":case"AN":break;case"EN":S&&(Y="AN");break;case"AL":S=!0,Y="R";break;case"WS":Y="N";break;case"CS":H<1||H+1>=B.length||(ee=V[H-1])!=="EN"&&ee!=="AN"||(se=B[H+1])!=="EN"&&se!=="AN"?Y="N":S&&(se="AN"),Y=se===ee?se:"N";break;case"ES":Y=(ee=H>0?V[H-1]:"B")==="EN"&&H+1<B.length&&B[H+1]==="EN"?"EN":"N";break;case"ET":if(H>0&&V[H-1]==="EN"){Y="EN";break}if(S){Y="N";break}for(ce=H+1,W=B.length;ce<W&&B[ce]==="ET";)ce++;Y=ce<W&&B[ce]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(W=B.length,ce=H+1;ce<W&&B[ce]==="NSM";)ce++;if(ce<W){var j=O[H],re=j>=1425&&j<=2303||j===64286;if(ee=B[ce],re&&(ee==="R"||ee==="AL")){Y="R";break}}}Y=H<1||(ee=B[H-1])==="B"?"N":V[H-1];break;case"B":S=!1,i=!0,Y=_;break;case"S":s=!0,Y="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":S=!1;break;case"BN":Y="N"}return Y},N=function(O,B,V){var H=O.split("");return V&&R(H,V,{hiLevel:_}),H.reverse(),B&&B.reverse(),H.join("")},R=function(O,B,V){var H,ee,se,ce,W,Y=-1,j=O.length,re=0,I=[],X=_?d:f,J=[];for(S=!1,i=!1,s=!1,ee=0;ee<j;ee++)J[ee]=T(O[ee]);for(se=0;se<j;se++){if(W=re,I[se]=k(O,J,I,se),H=240&(re=X[W][v[I[se]]]),re&=15,B[se]=ce=X[re][5],H>0)if(H===16){for(ee=Y;ee<se;ee++)B[ee]=1;Y=-1}else Y=-1;if(X[re][6])Y===-1&&(Y=se);else if(Y>-1){for(ee=Y;ee<se;ee++)B[ee]=ce;Y=-1}J[se]==="B"&&(B[se]=0),V.hiLevel|=ce}s&&function(ae,fe,Se){for(var Ee=0;Ee<Se;Ee++)if(ae[Ee]==="S"){fe[Ee]=_;for(var Ce=Ee-1;Ce>=0&&ae[Ce]==="WS";Ce--)fe[Ce]=_}}(J,B,j)},P=function(O,B,V,H,ee){if(!(ee.hiLevel<O)){if(O===1&&_===1&&!i)return B.reverse(),void(V&&V.reverse());for(var se,ce,W,Y,j=B.length,re=0;re<j;){if(H[re]>=O){for(W=re+1;W<j&&H[W]>=O;)W++;for(Y=re,ce=W-1;Y<ce;Y++,ce--)se=B[Y],B[Y]=B[ce],B[ce]=se,V&&(se=V[Y],V[Y]=V[ce],V[ce]=se);re=W}re++}}},D=function(O,B,V){var H=O.split(""),ee={hiLevel:_};return V||(V=[]),R(H,V,ee),function(se,ce,W){if(W.hiLevel!==0&&c)for(var Y,j=0;j<se.length;j++)ce[j]===1&&(Y=w.indexOf(se[j]))>=0&&(se[j]=w[Y+1])}(H,V,ee),P(2,H,B,V,ee),P(1,H,B,V,ee),H.join("")};return this.__bidiEngine__.doBidiReorder=function(O,B,V){if(function(ee,se){if(se)for(var ce=0;ce<ee.length;ce++)se[ce]=ce;a===void 0&&(a=L(ee)),u===void 0&&(u=L(ee))}(O,B),o||!l||u)if(o&&l&&a^u)_=a?1:0,O=N(O,B,V);else if(!o&&l&&u)_=a?1:0,O=D(O,B,V),O=N(O,B);else if(!o||a||l||u){if(o&&!l&&a^u)O=N(O,B),a?(_=0,O=D(O,B,V)):(_=1,O=D(O,B,V),O=N(O,B));else if(o&&a&&!l&&u)_=1,O=D(O,B,V),O=N(O,B);else if(!o&&!l&&a^u){var H=c;a?(_=1,O=D(O,B,V),_=0,c=!1,O=D(O,B,V),c=H):(_=0,O=D(O,B,V),O=N(O,B),_=1,c=!1,O=D(O,B,V),c=H,O=N(O,B))}}else _=0,O=D(O,B,V);else _=a?1:0,O=D(O,B,V);return O},this.__bidiEngine__.setOptions=function(O){O&&(o=O.isInputVisual,l=O.isOutputVisual,a=O.isInputRtl,u=O.isOutputRtl,c=O.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(r){var i=r.text;r.x,r.y;var s=r.options||{};r.mutex,s.lang;var o=[];if(s.isInputVisual=typeof s.isInputVisual!="boolean"||s.isInputVisual,n.setOptions(s),Object.prototype.toString.call(i)==="[object Array]"){var a=0;for(o=[],a=0;a<i.length;a+=1)Object.prototype.toString.call(i[a])==="[object Array]"?o.push([n.doBidiReorder(i[a][0]),i[a][1],i[a][2]]):o.push([n.doBidiReorder(i[a])]);r.text=o}else r.text=n.doBidiReorder(i);n.setOptions({isInputVisual:!0})}])}(wn),wn.API.TTFFont=function(){function t(e){var n;if(this.rawData=e,n=this.contents=new Nh(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new zW(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new AW(this.contents),this.head=new CW(this),this.name=new IW(this),this.cmap=new VI(this),this.toUnicode={},this.hhea=new LW(this),this.maxp=new NW(this),this.hmtx=new FW(this),this.post=new RW(this),this.os2=new PW(this),this.loca=new BW(this),this.glyf=new DW(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,r,i,s;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var o,a,l,u;for(u=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}.call(this),this.stemV=0,this.post.exists?(r=255&(i=this.post.italic_angle),32768&(n=i>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(s=this.familyClass)===1||s===2||s===3||s===4||s===5||s===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,r){var i,s,o,a;for(o=0,s=0,a=(e=""+e).length;0<=a?s<a:s>a;s=0<=a?++s:--s)i=e.charCodeAt(s),o+=this.widthOfGlyph(this.characterToGlyph(i))+r*(1e3/n)||0;return o*(n/1e3)},t.prototype.lineHeight=function(e,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},t}();var Nl,Nh=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,r;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},t.prototype.writeString=function(e){var n,r,i;for(i=[],n=0,r=e.length;0<=r?n<r:n>r;n=0<=r?++n:--n)i.push(this.writeByte(e.charCodeAt(n)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,r,i,s,o,a,l;return e=this.readByte(),n=this.readByte(),r=this.readByte(),i=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^i)+16777216*(255^s)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*n+1099511627776*r+4294967296*i+16777216*s+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var n,r;return n=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,r;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push(this.readByte());return n},t.prototype.write=function(e){var n,r,i,s;for(s=[],r=0,i=e.length;r<i;r++)n=e[r],s.push(this.writeByte(n));return s},t}(),AW=function(){var t;function e(n){var r,i,s;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},i=0,s=this.tableCount;0<=s?i<s:i>s;i=0<=s?++i:--i)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(n){var r,i,s,o,a,l,u,c,h,f,d,v,x;for(x in d=Object.keys(n).length,l=Math.log(2),h=16*Math.floor(Math.log(d)/l),o=Math.floor(h/l),c=16*d-h,(i=new Nh).writeInt(this.scalarType),i.writeShort(d),i.writeShort(h),i.writeShort(o),i.writeShort(c),s=16*d,u=i.pos+s,a=null,v=[],n)for(f=n[x],i.writeString(x),i.writeInt(t(f)),i.writeInt(u),i.writeInt(f.length),v=v.concat(f),x==="head"&&(a=u),u+=f.length;u%4;)v.push(0),u++;return i.write(v),r=2981146554-t(i.data),i.pos=a+8,i.writeUInt32(r),i.data},t=function(n){var r,i,s,o;for(n=WI.call(n);n.length%4;)n.push(0);for(s=new Nh(n),i=0,r=0,o=n.length;r<o;r=r+=4)i+=s.readUInt32();return 4294967295&i},e}(),TW={}.hasOwnProperty,hu=function(t,e){for(var n in e)TW.call(e,n)&&(t[n]=e[n]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};Nl=function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var CW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hu(e,Nl),e.prototype.tag="head",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},e.prototype.encode=function(n){var r;return(r=new Nh).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},e}(),fC=function(){function t(e,n){var r,i,s,o,a,l,u,c,h,f,d,v,x,w,g,S,_;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),h=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(d=e.readUInt16(),f=d/2,e.pos+=6,s=function(){var T,L;for(L=[],l=T=0;0<=f?T<f:T>f;l=0<=f?++T:--T)L.push(e.readUInt16());return L}(),e.pos+=2,x=function(){var T,L;for(L=[],l=T=0;0<=f?T<f:T>f;l=0<=f?++T:--T)L.push(e.readUInt16());return L}(),u=function(){var T,L;for(L=[],l=T=0;0<=f?T<f:T>f;l=0<=f?++T:--T)L.push(e.readUInt16());return L}(),c=function(){var T,L;for(L=[],l=T=0;0<=f?T<f:T>f;l=0<=f?++T:--T)L.push(e.readUInt16());return L}(),i=(this.length-e.pos+this.offset)/2,a=function(){var T,L;for(L=[],l=T=0;0<=i?T<i:T>i;l=0<=i?++T:--T)L.push(e.readUInt16());return L}(),l=g=0,_=s.length;g<_;l=++g)for(w=s[l],r=S=v=x[l];v<=w?S<=w:S>=w;r=v<=w?++S:--S)c[l]===0?o=r+u[l]:(o=a[c[l]/2+(r-v)-(f-l)]||0)!==0&&(o+=u[l]),this.codeMap[r]=65535&o}e.pos=h}return t.encode=function(e,n){var r,i,s,o,a,l,u,c,h,f,d,v,x,w,g,S,_,T,L,k,N,R,P,D,O,B,V,H,ee,se,ce,W,Y,j,re,I,X,J,ae,fe,Se,Ee,Ce,$e,ke,he;switch(H=new Nh,o=Object.keys(e).sort(function(De,ze){return De-ze}),n){case"macroman":for(x=0,w=function(){var De=[];for(v=0;v<256;++v)De.push(0);return De}(),S={0:0},s={},ee=0,Y=o.length;ee<Y;ee++)S[Ce=e[i=o[ee]]]==null&&(S[Ce]=++x),s[i]={old:e[i],new:S[e[i]]},w[i]=S[e[i]];return H.writeUInt16(1),H.writeUInt16(0),H.writeUInt32(12),H.writeUInt16(0),H.writeUInt16(262),H.writeUInt16(0),H.write(w),{charMap:s,subtable:H.data,maxGlyphID:x+1};case"unicode":for(B=[],h=[],_=0,S={},r={},g=u=null,se=0,j=o.length;se<j;se++)S[L=e[i=o[se]]]==null&&(S[L]=++_),r[i]={old:L,new:S[L]},a=S[L]-i,g!=null&&a===u||(g&&h.push(g),B.push(i),u=a),g=i;for(g&&h.push(g),h.push(65535),B.push(65535),D=2*(P=B.length),R=2*Math.pow(Math.log(P)/Math.LN2,2),f=Math.log(R/2)/Math.LN2,N=2*P-R,l=[],k=[],d=[],v=ce=0,re=B.length;ce<re;v=++ce){if(O=B[v],c=h[v],O===65535){l.push(0),k.push(0);break}if(O-(V=r[O].new)>=32768)for(l.push(0),k.push(2*(d.length+P-v)),i=W=O;O<=c?W<=c:W>=c;i=O<=c?++W:--W)d.push(r[i].new);else l.push(V-O),k.push(0)}for(H.writeUInt16(3),H.writeUInt16(1),H.writeUInt32(12),H.writeUInt16(4),H.writeUInt16(16+8*P+2*d.length),H.writeUInt16(0),H.writeUInt16(D),H.writeUInt16(R),H.writeUInt16(f),H.writeUInt16(N),Se=0,I=h.length;Se<I;Se++)i=h[Se],H.writeUInt16(i);for(H.writeUInt16(0),Ee=0,X=B.length;Ee<X;Ee++)i=B[Ee],H.writeUInt16(i);for($e=0,J=l.length;$e<J;$e++)a=l[$e],H.writeUInt16(a);for(ke=0,ae=k.length;ke<ae;ke++)T=k[ke],H.writeUInt16(T);for(he=0,fe=d.length;he<fe;he++)x=d[he],H.writeUInt16(x);return{charMap:r,subtable:H.data,maxGlyphID:_+1}}},t}(),VI=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hu(e,Nl),e.prototype.tag="cmap",e.prototype.parse=function(n){var r,i,s;for(n.pos=this.offset,this.version=n.readUInt16(),s=n.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=s?i<s:i>s;i=0<=s?++i:--i)r=new fC(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(n,r){var i,s;return r==null&&(r="macroman"),i=fC.encode(n,r),(s=new Nh).writeUInt16(0),s.writeUInt16(1),i.table=s.data.concat(i.subtable),i},e}(),LW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hu(e,Nl),e.prototype.tag="hhea",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},e}(),PW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hu(e,Nl),e.prototype.tag="OS/2",e.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,i;for(i=[],r=0;r<10;++r)i.push(n.readByte());return i}(),this.charRange=function(){var r,i;for(i=[],r=0;r<4;++r)i.push(n.readInt());return i}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,i;for(i=[],r=0;r<2;r=++r)i.push(n.readInt());return i}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},e}(),RW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hu(e,Nl),e.prototype.tag="post",e.prototype.parse=function(n){var r,i,s;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var o;for(i=n.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],s=[];n.pos<this.offset+this.length;)r=n.readByte(),s.push(this.names.push(n.readString(r)));return s;case 151552:return i=n.readUInt16(),this.offsets=n.read(i);case 196608:break;case 262144:return this.map=function(){var a,l,u;for(u=[],o=a=0,l=this.file.maxp.numGlyphs;0<=l?a<l:a>l;o=0<=l?++a:--a)u.push(n.readUInt32());return u}.call(this)}},e}(),kW=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},IW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hu(e,Nl),e.prototype.tag="name",e.prototype.parse=function(n){var r,i,s,o,a,l,u,c,h,f,d;for(n.pos=this.offset,n.readShort(),r=n.readShort(),l=n.readShort(),i=[],o=0;0<=r?o<r:o>r;o=0<=r?++o:--o)i.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+l+n.readShort()});for(u={},o=h=0,f=i.length;h<f;o=++h)s=i[o],n.pos=s.offset,c=n.readString(s.length),a=new kW(c,s),u[d=s.nameID]==null&&(u[d]=[]),u[s.nameID].push(a);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e}(),NW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hu(e,Nl),e.prototype.tag="maxp",e.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},e}(),FW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hu(e,Nl),e.prototype.tag="hmtx",e.prototype.parse=function(n){var r,i,s,o,a,l,u;for(n.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var c,h;for(h=[],r=c=0;0<=s?c<s:c>s;r=0<=s?++c:--c)h.push(n.readInt16());return h}(),this.widths=function(){var c,h,f,d;for(d=[],c=0,h=(f=this.metrics).length;c<h;c++)o=f[c],d.push(o.advance);return d}.call(this),i=this.widths[this.widths.length-1],u=[],r=a=0;0<=s?a<s:a>s;r=0<=s?++a:--a)u.push(this.widths.push(i));return u},e.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},e}(),WI=[].slice,DW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hu(e,Nl),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(n){var r,i,s,o,a,l,u,c,h,f;return n in this.cache?this.cache[n]:(o=this.file.loca,r=this.file.contents,i=o.indexOf(n),(s=o.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+i,a=(l=new Nh(r.read(s))).readShort(),c=l.readShort(),f=l.readShort(),u=l.readShort(),h=l.readShort(),this.cache[n]=a===-1?new UW(l,c,f,u,h):new OW(l,a,c,f,u,h),this.cache[n]))},e.prototype.encode=function(n,r,i){var s,o,a,l,u;for(a=[],o=[],l=0,u=r.length;l<u;l++)s=n[r[l]],o.push(a.length),s&&(a=a.concat(s.encode(i)));return o.push(a.length),{table:a,offsets:o}},e}(),OW=function(){function t(e,n,r,i,s,o){this.raw=e,this.numberOfContours=n,this.xMin=r,this.yMin=i,this.xMax=s,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),UW=function(){function t(e,n,r,i,s){var o,a;for(this.raw=e,this.xMin=n,this.yMin=r,this.xMax=i,this.yMax=s,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,n,r;for(n=new Nh(WI.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)n.pos=this.glyphOffsets[e];return n.data},t}(),BW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return hu(e,Nl),e.prototype.tag="loca",e.prototype.parse=function(n){var r,i;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=2)o.push(2*n.readUInt16());return o}.call(this):function(){var s,o;for(o=[],i=0,s=this.length;i<s;i+=4)o.push(n.readUInt32());return o}.call(this)},e.prototype.indexOf=function(n){return this.offsets[n]},e.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},e.prototype.encode=function(n,r){for(var i=new Uint32Array(this.offsets.length),s=0,o=0,a=0;a<i.length;++a)if(i[a]=s,o<r.length&&r[o]==a){++o,i[a]=s;var l=this.offsets[a],u=this.offsets[a+1]-l;u>0&&(s+=u)}for(var c=new Array(4*i.length),h=0;h<i.length;++h)c[4*h+3]=255&i[h],c[4*h+2]=(65280&i[h])>>8,c[4*h+1]=(16711680&i[h])>>16,c[4*h]=(4278190080&i[h])>>24;return c},e}(),zW=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,r,i,s;for(n in i=this.font.cmap.tables[0].codeMap,e={},s=this.subset)r=s[n],e[n]=i[r];return e},t.prototype.glyphsFor=function(e){var n,r,i,s,o,a,l;for(i={},o=0,a=e.length;o<a;o++)i[s=e[o]]=this.font.glyf.glyphFor(s);for(s in n=[],i)(r=i[s])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(s in l=this.glyphsFor(n))r=l[s],i[s]=r;return i},t.prototype.encode=function(e,n){var r,i,s,o,a,l,u,c,h,f,d,v,x,w,g;for(i in r=VI.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),d={0:0},g=r.charMap)d[(l=g[i]).old]=l.new;for(v in f=r.maxGlyphID,o)v in d||(d[v]=f++);return c=function(S){var _,T;for(_ in T={},S)T[S[_]]=_;return T}(d),h=Object.keys(c).sort(function(S,_){return S-_}),x=function(){var S,_,T;for(T=[],S=0,_=h.length;S<_;S++)a=h[S],T.push(c[a]);return T}(),s=this.font.glyf.encode(o,x,d),u=this.font.loca.encode(s.offsets,x),w={cmap:this.font.cmap.raw(),glyf:s.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(w["OS/2"]=this.font.os2.raw()),this.font.directory.encode(w)},t}();wn.API.PDFObject=function(){var t;function e(){}return t=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},e.convert=function(n){var r,i,s,o;if(Array.isArray(n))return"["+function(){var a,l,u;for(u=[],a=0,l=n.length;a<l;a++)r=n[a],u.push(e.convert(r));return u}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(i in s=["<<"],n)o=n[i],s.push("/"+i+" "+e.convert(o));return s.push(">>"),s.join(`
`)}return""+n},e}();/*! https://mths.be/cssesc v3.0.0 by @mathias */var HW={},GW=HW.hasOwnProperty,VW=function(e,n){if(!e)return n;var r={};for(var i in n)r[i]=GW.call(e,i)?e[i]:n[i];return r},WW=/[ -,\.\/:-@\[-\^`\{-~]/,jW=/[ -,\.\/:-@\[\]\^`\{-~]/,XW=/(^|\\+)?(\\[A-F0-9]{1,6})\x20(?![a-fA-F0-9\x20])/g,y3=function t(e,n){n=VW(n,t.options),n.quotes!="single"&&n.quotes!="double"&&(n.quotes="single");for(var r=n.quotes=="double"?'"':"'",i=n.isIdentifier,s=e.charAt(0),o="",a=0,l=e.length;a<l;){var u=e.charAt(a++),c=u.charCodeAt(),h=void 0;if(c<32||c>126){if(c>=55296&&c<=56319&&a<l){var f=e.charCodeAt(a++);(f&64512)==56320?c=((c&1023)<<10)+(f&1023)+65536:a--}h="\\"+c.toString(16).toUpperCase()+" "}else n.escapeEverything?WW.test(u)?h="\\"+u:h="\\"+c.toString(16).toUpperCase()+" ":/[\t\n\f\r\x0B]/.test(u)?h="\\"+c.toString(16).toUpperCase()+" ":u=="\\"||!i&&(u=='"'&&r==u||u=="'"&&r==u)||i&&jW.test(u)?h="\\"+u:h=u;o+=h}return i&&(/^-[-\d]/.test(o)?o="\\-"+o.slice(1):/\d/.test(s)&&(o="\\3"+s+" "+o.slice(1))),o=o.replace(XW,function(d,v,x){return v&&v.length%2?d:(v||"")+x}),!i&&n.wrap?r+o+r:o};y3.options={escapeEverything:!1,isIdentifier:!1,quotes:"single",wrap:!1};y3.version="3.0.0";var jI=y3,Mg=0,PS=1,dC=2,ny=3,pC=4,mC=5,gC=6,RS=/[a-z0-9_-]/i,ry=/[\s\t]/,qW=function(t){for(var e=!0,n=Mg,r="",i=0,s,o,a=[];;){if(o=t[i],n===Mg){if(!o&&e)break;if(!o&&!e)throw new Error("Parse error");if(o==='"'||o==="'")s=o,n=PS,e=!1;else if(!ry.test(o))if(RS.test(o))n=ny,e=!1,i--;else throw new Error("Parse error")}else if(n===PS)if(o)o==="\\"?n=dC:o===s?(a.push(r),r="",n=pC):r+=o;else throw new Error("Parse Error");else if(n===dC)if(o===s||o==="\\")r+=o,n=PS;else throw new Error("Parse error");else if(n===ny)if(o)RS.test(o)?r+=o:o===","?(a.push(r),r="",n=Mg):ry.test(o)?n=mC:o==="\\"&&(n=gC);else{a.push(r);break}else if(n===gC){if(/[0-9a-f]/i.test(o))throw new Error("Parse error");r+=o,n=ny}else if(n===mC)if(o){if(RS.test(o))r+=" "+o,n=ny;else if(o===",")a.push(r),r="",n=Mg;else if(!ry.test(o))throw new Error("Parse error")}else{a.push(r);break}else if(n===pC)if(o){if(o===",")n=Mg;else if(!ry.test(o))throw new Error("Parse error")}else break;i++}return a},YW=/[^a-z0-9_-]/i,ZW=function(t,e){var n=e&&e.quote||'"';if(n!=='"'&&n!=="'")throw new Error("Quote must be `'` or `\"`");for(var r=new RegExp(n,"g"),i=[],s=0;s<t.length;++s){var o=t[s];YW.test(o)&&(o=o.replace(/\\/g,"\\\\").replace(r,"\\"+n),o=n+o+n),i.push(o)}return i.join(", ")},$W={parse:qW,stringify:ZW},i5={},KW={get exports(){return i5},set exports(t){i5=t}},Hy={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},JW=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function QW(t){return t===10||t===13||t===8232||t===8233||t===32||t===9||t===11||t===12||t===160||t>=5760&&JW.indexOf(t)>=0}function ej(t){switch(t|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function tj(t){return(t|32)===97}function gp(t){return t>=48&&t<=57}function nj(t){return t>=48&&t<=57||t===43||t===45||t===46}function rj(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function Gy(t){for(;t.index<t.max&&QW(t.path.charCodeAt(t.index));)t.index++}function ij(t){var e=t.path.charCodeAt(t.index);if(e===48){t.param=0,t.index++;return}if(e===49){t.param=1,t.index++;return}t.err="SvgPath: arc flag can be 0 or 1 only (at pos "+t.index+")"}function sj(t){var e=t.index,n=e,r=t.max,i=!1,s=!1,o=!1,a=!1,l;if(n>=r){t.err="SvgPath: missed param (at pos "+n+")";return}if(l=t.path.charCodeAt(n),(l===43||l===45)&&(n++,l=n<r?t.path.charCodeAt(n):0),!gp(l)&&l!==46){t.err="SvgPath: param should start with 0..9 or `.` (at pos "+n+")";return}if(l!==46){if(i=l===48,n++,l=n<r?t.path.charCodeAt(n):0,i&&n<r&&l&&gp(l)){t.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+e+")";return}for(;n<r&&gp(t.path.charCodeAt(n));)n++,s=!0;l=n<r?t.path.charCodeAt(n):0}if(l===46){for(a=!0,n++;gp(t.path.charCodeAt(n));)n++,o=!0;l=n<r?t.path.charCodeAt(n):0}if(l===101||l===69){if(a&&!s&&!o){t.err="SvgPath: invalid float exponent (at pos "+n+")";return}if(n++,l=n<r?t.path.charCodeAt(n):0,(l===43||l===45)&&n++,n<r&&gp(t.path.charCodeAt(n)))for(;n<r&&gp(t.path.charCodeAt(n));)n++;else{t.err="SvgPath: invalid float exponent (at pos "+n+")";return}}t.index=n,t.param=parseFloat(t.path.slice(e,n))+0}function kS(t){var e,n;e=t.path[t.segmentStart],n=e.toLowerCase();var r=t.data;if(n==="m"&&r.length>2&&(t.result.push([e,r[0],r[1]]),r=r.slice(2),n="l",e=e==="m"?"l":"L"),n==="r")t.result.push([e].concat(r));else for(;r.length>=Hy[n]&&(t.result.push([e].concat(r.splice(0,Hy[n]))),!!Hy[n]););}function oj(t){var e=t.max,n,r,i,s,o;if(t.segmentStart=t.index,n=t.path.charCodeAt(t.index),r=tj(n),!ej(n)){t.err="SvgPath: bad command "+t.path[t.index]+" (at pos "+t.index+")";return}if(s=Hy[t.path[t.index].toLowerCase()],t.index++,Gy(t),t.data=[],!s){kS(t);return}for(i=!1;;){for(o=s;o>0;o--){if(r&&(o===3||o===4)?ij(t):sj(t),t.err.length){kS(t);return}t.data.push(t.param),Gy(t),i=!1,t.index<e&&t.path.charCodeAt(t.index)===44&&(t.index++,Gy(t),i=!0)}if(!i&&(t.index>=t.max||!nj(t.path.charCodeAt(t.index))))break}kS(t)}var aj=function(e){var n=new rj(e),r=n.max;for(Gy(n);n.index<r&&!n.err.length;)oj(n);return n.result.length&&("mM".indexOf(n.result[0][0])<0?(n.err="SvgPath: string should start with `M` or `m`",n.result=[]):n.result[0][0]="M"),{err:n.err,segments:n.result}};function lj(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}function Tl(){if(!(this instanceof Tl))return new Tl;this.queue=[],this.cache=null}Tl.prototype.matrix=function(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[3]===1&&t[4]===0&&t[5]===0?this:(this.cache=null,this.queue.push(t),this)};Tl.prototype.translate=function(t,e){return(t!==0||e!==0)&&(this.cache=null,this.queue.push([1,0,0,1,t,e])),this};Tl.prototype.scale=function(t,e){return(t!==1||e!==1)&&(this.cache=null,this.queue.push([t,0,0,e,0,0])),this};Tl.prototype.rotate=function(t,e,n){var r,i,s;return t!==0&&(this.translate(e,n),r=t*Math.PI/180,i=Math.cos(r),s=Math.sin(r),this.queue.push([i,s,-s,i,0,0]),this.cache=null,this.translate(-e,-n)),this};Tl.prototype.skewX=function(t){return t!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this};Tl.prototype.skewY=function(t){return t!==0&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this};Tl.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var t=1;t<this.queue.length;t++)this.cache=lj(this.cache,this.queue[t]);return this.cache};Tl.prototype.calc=function(t,e,n){var r;return this.queue.length?(this.cache||(this.cache=this.toArray()),r=this.cache,[t*r[0]+e*r[2]+(n?0:r[4]),t*r[1]+e*r[3]+(n?0:r[5])]):[t,e]};var XI=Tl,uj=XI,cj={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},hj=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,fj=/[\s,]+/,dj=function(e){var n=new uj,r,i;return e.split(hj).forEach(function(s){if(s.length){if(typeof cj[s]<"u"){r=s;return}switch(i=s.split(fj).map(function(o){return+o||0}),r){case"matrix":i.length===6&&n.matrix(i);return;case"scale":i.length===1?n.scale(i[0],i[0]):i.length===2&&n.scale(i[0],i[1]);return;case"rotate":i.length===1?n.rotate(i[0],0,0):i.length===3&&n.rotate(i[0],i[1],i[2]);return;case"translate":i.length===1?n.translate(i[0],0):i.length===2&&n.translate(i[0],i[1]);return;case"skewX":i.length===1&&n.skewX(i[0]);return;case"skewY":i.length===1&&n.skewY(i[0]);return}}}),n},Qg=Math.PI*2;function vC(t,e,n,r){var i=t*r-e*n<0?-1:1,s=t*n+e*r;return s>1&&(s=1),s<-1&&(s=-1),i*Math.acos(s)}function pj(t,e,n,r,i,s,o,a,l,u){var c=u*(t-n)/2+l*(e-r)/2,h=-l*(t-n)/2+u*(e-r)/2,f=o*o,d=a*a,v=c*c,x=h*h,w=f*d-f*x-d*v;w<0&&(w=0),w/=f*x+d*v,w=Math.sqrt(w)*(i===s?-1:1);var g=w*o/a*h,S=w*-a/o*c,_=u*g-l*S+(t+n)/2,T=l*g+u*S+(e+r)/2,L=(c-g)/o,k=(h-S)/a,N=(-c-g)/o,R=(-h-S)/a,P=vC(1,0,L,k),D=vC(L,k,N,R);return s===0&&D>0&&(D-=Qg),s===1&&D<0&&(D+=Qg),[_,T,P,D]}function mj(t,e){var n=1.3333333333333333*Math.tan(e/4),r=Math.cos(t),i=Math.sin(t),s=Math.cos(t+e),o=Math.sin(t+e);return[r,i,r-i*n,i+r*n,s+o*n,o-s*n,s,o]}var gj=function(e,n,r,i,s,o,a,l,u){var c=Math.sin(u*Qg/360),h=Math.cos(u*Qg/360),f=h*(e-r)/2+c*(n-i)/2,d=-c*(e-r)/2+h*(n-i)/2;if(f===0&&d===0)return[];if(a===0||l===0)return[];a=Math.abs(a),l=Math.abs(l);var v=f*f/(a*a)+d*d/(l*l);v>1&&(a*=Math.sqrt(v),l*=Math.sqrt(v));var x=pj(e,n,r,i,s,o,a,l,c,h),w=[],g=x[2],S=x[3],_=Math.max(Math.ceil(Math.abs(S)/(Qg/4)),1);S/=_;for(var T=0;T<_;T++)w.push(mj(g,S)),g+=S;return w.map(function(L){for(var k=0;k<L.length;k+=2){var N=L[k+0],R=L[k+1];N*=a,R*=l;var P=h*N-c*R,D=c*N+h*R;L[k+0]=P+x[0],L[k+1]=D+x[1]}return L})},e0=1e-10,yC=Math.PI/180;function V0(t,e,n){if(!(this instanceof V0))return new V0(t,e,n);this.rx=t,this.ry=e,this.ax=n}V0.prototype.transform=function(t){var e=Math.cos(this.ax*yC),n=Math.sin(this.ax*yC),r=[this.rx*(t[0]*e+t[2]*n),this.rx*(t[1]*e+t[3]*n),this.ry*(-t[0]*n+t[2]*e),this.ry*(-t[1]*n+t[3]*e)],i=r[0]*r[0]+r[2]*r[2],s=r[1]*r[1]+r[3]*r[3],o=((r[0]-r[3])*(r[0]-r[3])+(r[2]+r[1])*(r[2]+r[1]))*((r[0]+r[3])*(r[0]+r[3])+(r[2]-r[1])*(r[2]-r[1])),a=(i+s)/2;if(o<e0*a)return this.rx=this.ry=Math.sqrt(a),this.ax=0,this;var l=r[0]*r[1]+r[2]*r[3];o=Math.sqrt(o);var u=a+o/2,c=a-o/2;return this.ax=Math.abs(l)<e0&&Math.abs(u-s)<e0?90:Math.atan(Math.abs(l)>Math.abs(u-s)?(u-i)/l:l/(u-s))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(u),this.ry=Math.sqrt(c)):(this.ax+=90,this.rx=Math.sqrt(c),this.ry=Math.sqrt(u)),this};V0.prototype.isDegenerate=function(){return this.rx<e0*this.ry||this.ry<e0*this.rx};var vj=V0,yj=aj,xj=dj,jh=XI,wj=gj,Sj=vj;function yi(t){if(!(this instanceof yi))return new yi(t);var e=yj(t);this.segments=e.segments,this.err=e.err,this.__stack=[]}yi.from=function(t){if(typeof t=="string")return new yi(t);if(t instanceof yi){var e=new yi("");return e.err=t.err,e.segments=t.segments.map(function(n){return n.slice()}),e.__stack=t.__stack.map(function(n){return jh().matrix(n.toArray())}),e}throw new Error("SvgPath.from: invalid param type "+t)};yi.prototype.__matrix=function(t){var e=this,n;t.queue.length&&this.iterate(function(r,i,s,o){var a,l,u,c;switch(r[0]){case"v":a=t.calc(0,r[1],!0),l=a[0]===0?["v",a[1]]:["l",a[0],a[1]];break;case"V":a=t.calc(s,r[1],!1),l=a[0]===t.calc(s,o,!1)[0]?["V",a[1]]:["L",a[0],a[1]];break;case"h":a=t.calc(r[1],0,!0),l=a[1]===0?["h",a[0]]:["l",a[0],a[1]];break;case"H":a=t.calc(r[1],o,!1),l=a[1]===t.calc(s,o,!1)[1]?["H",a[0]]:["L",a[0],a[1]];break;case"a":case"A":var h=t.toArray(),f=Sj(r[1],r[2],r[3]).transform(h);if(h[0]*h[3]-h[1]*h[2]<0&&(r[5]=r[5]?"0":"1"),a=t.calc(r[6],r[7],r[0]==="a"),r[0]==="A"&&r[6]===s&&r[7]===o||r[0]==="a"&&r[6]===0&&r[7]===0){l=[r[0]==="a"?"l":"L",a[0],a[1]];break}f.isDegenerate()?l=[r[0]==="a"?"l":"L",a[0],a[1]]:l=[r[0],f.rx,f.ry,f.ax,r[4],r[5],a[0],a[1]];break;case"m":c=i>0,a=t.calc(r[1],r[2],c),l=["m",a[0],a[1]];break;default:for(u=r[0],l=[u],c=u.toLowerCase()===u,n=1;n<r.length;n+=2)a=t.calc(r[n],r[n+1],c),l.push(a[0],a[1])}e.segments[i]=l},!0)};yi.prototype.__evaluateStack=function(){var t,e;if(this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(t=jh(),e=this.__stack.length;--e>=0;)t.matrix(this.__stack[e].toArray());this.__matrix(t),this.__stack=[]}};yi.prototype.toString=function(){var t="",e="",n=!1;this.__evaluateStack();for(var r=0,i=this.segments.length;r<i;r++){var s=this.segments[r],o=s[0];o!==e||o==="m"||o==="M"?(o==="m"&&e==="z"&&(t+=" "),t+=o,n=!1):n=!0;for(var a=1;a<s.length;a++){var l=s[a];a===1?n&&l>=0&&(t+=" "):l>=0&&(t+=" "),t+=l}e=o}return t};yi.prototype.translate=function(t,e){return this.__stack.push(jh().translate(t,e||0)),this};yi.prototype.scale=function(t,e){return this.__stack.push(jh().scale(t,!e&&e!==0?t:e)),this};yi.prototype.rotate=function(t,e,n){return this.__stack.push(jh().rotate(t,e||0,n||0)),this};yi.prototype.skewX=function(t){return this.__stack.push(jh().skewX(t)),this};yi.prototype.skewY=function(t){return this.__stack.push(jh().skewY(t)),this};yi.prototype.matrix=function(t){return this.__stack.push(jh().matrix(t)),this};yi.prototype.transform=function(t){return t.trim()?(this.__stack.push(xj(t)),this):this};yi.prototype.round=function(t){var e=0,n=0,r=0,i=0,s;return t=t||0,this.__evaluateStack(),this.segments.forEach(function(o){var a=o[0].toLowerCase()===o[0];switch(o[0]){case"H":case"h":a&&(o[1]+=r),r=o[1]-o[1].toFixed(t),o[1]=+o[1].toFixed(t);return;case"V":case"v":a&&(o[1]+=i),i=o[1]-o[1].toFixed(t),o[1]=+o[1].toFixed(t);return;case"Z":case"z":r=e,i=n;return;case"M":case"m":a&&(o[1]+=r,o[2]+=i),r=o[1]-o[1].toFixed(t),i=o[2]-o[2].toFixed(t),e=r,n=i,o[1]=+o[1].toFixed(t),o[2]=+o[2].toFixed(t);return;case"A":case"a":a&&(o[6]+=r,o[7]+=i),r=o[6]-o[6].toFixed(t),i=o[7]-o[7].toFixed(t),o[1]=+o[1].toFixed(t),o[2]=+o[2].toFixed(t),o[3]=+o[3].toFixed(t+2),o[6]=+o[6].toFixed(t),o[7]=+o[7].toFixed(t);return;default:s=o.length,a&&(o[s-2]+=r,o[s-1]+=i),r=o[s-2]-o[s-2].toFixed(t),i=o[s-1]-o[s-1].toFixed(t),o.forEach(function(l,u){u&&(o[u]=+o[u].toFixed(t))});return}}),this};yi.prototype.iterate=function(t,e){var n=this.segments,r={},i=!1,s=0,o=0,a=0,l=0,u,c,h;if(e||this.__evaluateStack(),n.forEach(function(f,d){var v=t(f,d,s,o);Array.isArray(v)&&(r[d]=v,i=!0);var x=f[0]===f[0].toLowerCase();switch(f[0]){case"m":case"M":s=f[1]+(x?s:0),o=f[2]+(x?o:0),a=s,l=o;return;case"h":case"H":s=f[1]+(x?s:0);return;case"v":case"V":o=f[1]+(x?o:0);return;case"z":case"Z":s=a,o=l;return;default:s=f[f.length-2]+(x?s:0),o=f[f.length-1]+(x?o:0)}}),!i)return this;for(h=[],u=0;u<n.length;u++)if(typeof r[u]<"u")for(c=0;c<r[u].length;c++)h.push(r[u][c]);else h.push(n[u]);return this.segments=h,this};yi.prototype.abs=function(){return this.iterate(function(t,e,n,r){var i=t[0],s=i.toUpperCase(),o;if(i!==s)switch(t[0]=s,i){case"v":t[1]+=r;return;case"a":t[6]+=n,t[7]+=r;return;default:for(o=1;o<t.length;o++)t[o]+=o%2?n:r}},!0),this};yi.prototype.rel=function(){return this.iterate(function(t,e,n,r){var i=t[0],s=i.toLowerCase(),o;if(i!==s&&!(e===0&&i==="M"))switch(t[0]=s,i){case"V":t[1]-=r;return;case"A":t[6]-=n,t[7]-=r;return;default:for(o=1;o<t.length;o++)t[o]-=o%2?n:r}},!0),this};yi.prototype.unarc=function(){return this.iterate(function(t,e,n,r){var i,s,o,a=[],l=t[0];return l!=="A"&&l!=="a"?null:(l==="a"?(s=n+t[6],o=r+t[7]):(s=t[6],o=t[7]),i=wj(n,r,s,o,t[4],t[5],t[1],t[2],t[3]),i.length===0?[[t[0]==="a"?"l":"L",t[6],t[7]]]:(i.forEach(function(u){a.push(["C",u[2],u[3],u[4],u[5],u[6],u[7]])}),a))}),this};yi.prototype.unshort=function(){var t=this.segments,e,n,r,i,s;return this.iterate(function(o,a,l,u){var c=o[0],h=c.toUpperCase(),f;a&&(h==="T"?(f=c==="t",r=t[a-1],r[0]==="Q"?(e=r[1]-l,n=r[2]-u):r[0]==="q"?(e=r[1]-r[3],n=r[2]-r[4]):(e=0,n=0),i=-e,s=-n,f||(i+=l,s+=u),t[a]=[f?"q":"Q",i,s,o[1],o[2]]):h==="S"&&(f=c==="s",r=t[a-1],r[0]==="C"?(e=r[3]-l,n=r[4]-u):r[0]==="c"?(e=r[3]-r[5],n=r[4]-r[6]):(e=0,n=0),i=-e,s=-n,f||(i+=l,s+=u),t[a]=[f?"c":"C",i,s,o[1],o[2],o[3],o[4]]))}),this};var _j=yi;(function(t){t.exports=_j})(KW);const bj=O2(i5);var xC=function(t){var e=t,n,r={a:0,b:0,c:0},i=[],s=/(\[[^\]]+\])/g,o=/(#[^\#\s\+>~\.\[:\)]+)/g,a=/(\.[^\s\+>~\.\[:\)]+)/g,l=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,u=/(:(?!not|global|local)[\w-]+\([^\)]*\))/gi,c=/(:(?!not|global|local)[^\s\+>~\.\[:]+)/g,h=/([^\s\+>~\.\[:]+)/g;return n=function(f,d){var v,x,w,g,S,_;if(f.test(e))for(v=e.match(f),x=0,w=v.length;x<w;x+=1)r[d]+=1,g=v[x],S=e.indexOf(g),_=g.length,i.push({selector:t.substr(S,_),type:d,index:S,length:_}),e=e.replace(g,Array(_+1).join(" "))},function(){var f=function(w){var g,S,_,T;if(w.test(e))for(g=e.match(w),S=0,_=g.length;S<_;S+=1)T=g[S],e=e.replace(T,Array(T.length+1).join("A"))},d=/\\[0-9A-Fa-f]{6}\s?/g,v=/\\[0-9A-Fa-f]{1,5}\s/g,x=/\\./g;f(d),f(v),f(x)}(),function(){var f=/{[^]*/gm,d,v,x,w;if(f.test(e))for(d=e.match(f),v=0,x=d.length;v<x;v+=1)w=d[v],e=e.replace(w,Array(w.length+1).join(" "))}(),n(s,"b"),n(o,"a"),n(a,"b"),n(l,"c"),n(u,"b"),n(c,"b"),e=e.replace(/[\*\s\+>~]/g," "),e=e.replace(/[#\.]/g," "),e=e.replace(/:not/g,"    "),e=e.replace(/:local/g,"      "),e=e.replace(/:global/g,"       "),e=e.replace(/[\(\)]/g," "),n(h,"c"),i.sort(function(f,d){return f.index-d.index}),{selector:t,specificity:"0,"+r.a.toString()+","+r.b.toString()+","+r.c.toString(),specificityArray:[0,r.a,r.b,r.c],parts:i}},Mj=function(t,e){var n,r,i;if(typeof t=="string"){if(t.indexOf(",")!==-1)throw"Invalid CSS selector";n=xC(t).specificityArray}else if(Array.isArray(t)){if(t.filter(function(s){return typeof s=="number"}).length!==4)throw"Invalid specificity array";n=t}else throw"Invalid CSS selector or specificity array";if(typeof e=="string"){if(e.indexOf(",")!==-1)throw"Invalid CSS selector";r=xC(e).specificityArray}else if(Array.isArray(e)){if(e.filter(function(s){return typeof s=="number"}).length!==4)throw"Invalid specificity array";r=e}else throw"Invalid CSS selector or specificity array";for(i=0;i<4;i+=1){if(n[i]<r[i])return-1;if(n[i]>r[i])return 1}return 0},s5=function(t,e){return s5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},s5(t,e)};function kr(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}s5(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var M2=function(){return M2=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},M2.apply(this,arguments)};function Or(t,e,n,r){return new(n||(n=Promise))(function(i,s){function o(u){try{l(r.next(u))}catch(c){s(c)}}function a(u){try{l(r.throw(u))}catch(c){s(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof n?c:new n(function(h){h(c)})).then(o,a)}l((r=r.apply(t,e||[])).next())})}function Ur(t,e){var n,r,i,s,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(l){return function(u){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return o.label++,{value:c[1],done:!1};case 5:o.label++,r=c[1],c=[0];continue;case 7:c=o.ops.pop(),o.trys.pop();continue;default:if(i=o.trys,!((i=i.length>0&&i[i.length-1])||c[0]!==6&&c[0]!==2)){o=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){o.label=c[1];break}if(c[0]===6&&o.label<i[1]){o.label=i[1],i=c;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(c);break}i[2]&&o.ops.pop(),o.trys.pop();continue}c=e.call(t,o)}catch(h){c=[6,h],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}var yl=function(){function t(e){if(this.a=void 0,this.r=0,this.g=0,this.b=0,this.simpleColors={},this.colorDefs=[],this.ok=!1,e){for(var n in e.charAt(0)=="#"&&(e=e.substr(1,6)),e=(e=e.replace(/ /g,"")).toLowerCase(),this.simpleColors={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgrey:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",grey:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightslategrey:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"},this.simpleColors)e==n&&(e=this.simpleColors[n]);this.colorDefs=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^rgb\(([0-9.]+)%,\s*([0-9.]+)%,\s*([0-9.]+)%\)$/,example:["rgb(50.5%, 25.75%, 75.5%)","rgb(100%,0%,0%)"],process:function(l){return[Math.round(2.55*parseFloat(l[1])),Math.round(2.55*parseFloat(l[2])),Math.round(2.55*parseFloat(l[3]))]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}];for(var r=0;r<this.colorDefs.length;r++){var i=this.colorDefs[r].re,s=this.colorDefs[r].process,o=i.exec(e);if(o){var a=s(o);this.r=a[0],this.g=a[1],this.b=a[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b}}return t.prototype.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},t.prototype.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+(this.a||"1")+")"},t.prototype.toHex=function(){var e=this.r.toString(16),n=this.g.toString(16),r=this.b.toString(16);return e.length==1&&(e="0"+e),n.length==1&&(n="0"+n),r.length==1&&(r="0"+r),"#"+e+n+r},t.prototype.getHelpXML=function(){for(var e=[],n=0;n<this.colorDefs.length;n++)for(var r=this.colorDefs[n].example,i=0;i<r.length;i++)e[e.length]=r[i];for(var s in this.simpleColors)e[e.length]=s;var o=document.createElement("ul");for(o.setAttribute("id","rgbcolor-examples"),n=0;n<e.length;n++)try{var a=document.createElement("li"),l=new t(e[n]),u=document.createElement("div");u.style.cssText="margin: 3px; border: 1px solid black; background:"+l.toHex()+"; color:"+l.toHex(),u.appendChild(document.createTextNode("test"));var c=document.createTextNode(" "+e[n]+" -> "+l.toRGB()+" -> "+l.toHex());a.appendChild(u),a.appendChild(c),o.appendChild(a)}catch{}return o},t}(),ks=function(){function t(e){this.color=e}return t.prototype.getFillData=function(e,n){return Or(this,void 0,void 0,function(){return Ur(this,function(r){return[2,void 0]})})},t}(),vm=function(){function t(){this.xmlSpace="",this.fill=null,this.fillOpacity=1,this.fontFamily="",this.fontSize=16,this.fontStyle="",this.fontWeight="",this.opacity=1,this.stroke=null,this.strokeDasharray=null,this.strokeDashoffset=0,this.strokeLinecap="",this.strokeLinejoin="",this.strokeMiterlimit=4,this.strokeOpacity=1,this.strokeWidth=1,this.alignmentBaseline="",this.textAnchor="",this.visibility="",this.color=null,this.contextFill=null,this.contextStroke=null,this.fillRule=null}return t.prototype.clone=function(){var e=new t;return e.xmlSpace=this.xmlSpace,e.fill=this.fill,e.fillOpacity=this.fillOpacity,e.fontFamily=this.fontFamily,e.fontSize=this.fontSize,e.fontStyle=this.fontStyle,e.fontWeight=this.fontWeight,e.opacity=this.opacity,e.stroke=this.stroke,e.strokeDasharray=this.strokeDasharray,e.strokeDashoffset=this.strokeDashoffset,e.strokeLinecap=this.strokeLinecap,e.strokeLinejoin=this.strokeLinejoin,e.strokeMiterlimit=this.strokeMiterlimit,e.strokeOpacity=this.strokeOpacity,e.strokeWidth=this.strokeWidth,e.textAnchor=this.textAnchor,e.alignmentBaseline=this.alignmentBaseline,e.visibility=this.visibility,e.color=this.color,e.fillRule=this.fillRule,e.contextFill=this.contextFill,e.contextStroke=this.contextStroke,e},t.default=function(){var e=new t;return e.xmlSpace="default",e.fill=new ks(new yl("rgb(0, 0, 0)")),e.fillOpacity=1,e.fontFamily="times",e.fontSize=16,e.fontStyle="normal",e.fontWeight="normal",e.opacity=1,e.stroke=null,e.strokeDasharray=null,e.strokeDashoffset=0,e.strokeLinecap="butt",e.strokeLinejoin="miter",e.strokeMiterlimit=4,e.strokeOpacity=1,e.strokeWidth=1,e.alignmentBaseline="baseline",e.textAnchor="start",e.visibility="visible",e.color=new yl("rgb(0, 0, 0)"),e.fillRule="nonzero",e.contextFill=null,e.contextStroke=null,e},t.getContextColors=function(e,n){n===void 0&&(n=!1);var r={};return e.attributeState.contextFill&&(r.contextFill=e.attributeState.contextFill),e.attributeState.contextStroke&&(r.contextStroke=e.attributeState.contextStroke),n&&e.attributeState.color&&(r.color=e.attributeState.color),r},t}(),Xh=function(){function t(e,n){var r,i,s;this.pdf=e,this.svg2pdfParameters=n.svg2pdfParameters,this.attributeState=n.attributeState?n.attributeState.clone():vm.default(),this.viewport=n.viewport,this.refsHandler=n.refsHandler,this.styleSheets=n.styleSheets,this.textMeasure=n.textMeasure,this.transform=(r=n.transform)!==null&&r!==void 0?r:this.pdf.unitMatrix,this.withinClipPath=(i=n.withinClipPath)!==null&&i!==void 0&&i,this.withinUse=(s=n.withinUse)!==null&&s!==void 0&&s}return t.prototype.clone=function(e){var n,r,i,s;return e===void 0&&(e={}),new t(this.pdf,{svg2pdfParameters:this.svg2pdfParameters,attributeState:e.attributeState?e.attributeState.clone():this.attributeState.clone(),viewport:(n=e.viewport)!==null&&n!==void 0?n:this.viewport,refsHandler:this.refsHandler,styleSheets:this.styleSheets,textMeasure:this.textMeasure,transform:(r=e.transform)!==null&&r!==void 0?r:this.transform,withinClipPath:(i=e.withinClipPath)!==null&&i!==void 0?i:this.withinClipPath,withinUse:(s=e.withinUse)!==null&&s!==void 0?s:this.withinUse})},t}(),qI=function(){function t(e){this.renderedElements={},this.idMap=e,this.idPrefix=String(t.instanceCounter++)}return t.prototype.getRendered=function(e,n,r){return Or(this,void 0,void 0,function(){var i,s;return Ur(this,function(o){switch(o.label){case 0:return i=this.generateKey(e,n),this.renderedElements.hasOwnProperty(i)?[2,this.renderedElements[e]]:(s=this.get(e),this.renderedElements[i]=s,[4,r(s)]);case 1:return o.sent(),[2,s]}})})},t.prototype.get=function(e){return this.idMap[jI(e,{isIdentifier:!0})]},t.prototype.generateKey=function(e,n){var r="";return n&&(r=["color","contextFill","contextStroke"].map(function(i){var s,o;return(o=(s=n[i])===null||s===void 0?void 0:s.toRGBA())!==null&&o!==void 0?o:""}).join("|")),this.idPrefix+"|"+e+"|"+r},t.instanceCounter=0,t}();function wC(t,e){return Math.atan2(e[1]-t[1],e[0]-t[0])}var SC=2/3;function _C(t,e){return[SC*(e[0]-t[0])+t[0],SC*(e[1]-t[1])+t[1]]}function Ng(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[t[0]/e,t[1]/e]}function vp(t,e){return Ng([e[0]-t[0],e[1]-t[1]])}function iy(t,e){return[t[0]+e[0],t[1]+e[1]]}function IS(t,e){var n=t[0],r=t[1];return[e.a*n+e.c*r+e.e,e.b*n+e.d*r+e.f]}var ym=function(){function t(){this.segments=[]}return t.prototype.moveTo=function(e,n){return this.segments.push(new ws(e,n)),this},t.prototype.lineTo=function(e,n){return this.segments.push(new ah(e,n)),this},t.prototype.curveTo=function(e,n,r,i,s,o){return this.segments.push(new Kl(e,n,r,i,s,o)),this},t.prototype.close=function(){return this.segments.push(new o5),this},t.prototype.transform=function(e){this.segments.forEach(function(n){if(n instanceof ws||n instanceof ah||n instanceof Kl){var r=IS([n.x,n.y],e);n.x=r[0],n.y=r[1]}if(n instanceof Kl){var i=IS([n.x1,n.y1],e),s=IS([n.x2,n.y2],e);n.x1=i[0],n.y1=i[1],n.x2=s[0],n.y2=s[1]}})},t.prototype.draw=function(e){var n=e.pdf;this.segments.forEach(function(r){r instanceof ws?n.moveTo(r.x,r.y):r instanceof ah?n.lineTo(r.x,r.y):r instanceof Kl?n.curveTo(r.x1,r.y1,r.x2,r.y2,r.x,r.y):n.close()})},t}(),ws=function(t,e){this.x=t,this.y=e},ah=function(t,e){this.x=t,this.y=e},Kl=function(t,e,n,r,i,s){this.x1=t,this.y1=e,this.x2=n,this.y2=r,this.x=i,this.y=s},o5=function(){};function Fh(t,e){return e.split(",").indexOf((t.nodeName||t.tagName).toLowerCase())>=0}function Pt(t,e,n,r){var i;r===void 0&&(r=n);var s=(i=t.style)===null||i===void 0?void 0:i.getPropertyValue(r);if(s)return s;var o=e.getPropertyValue(t,r);return o||t.hasAttribute(n)&&t.getAttribute(n)||void 0}function dc(t,e,n){if(Pt(t.element,n.styleSheets,"display")==="none")return!1;var r=e,i=Pt(t.element,n.styleSheets,"visibility");return i&&(r=i!=="hidden"),r}function qh(t,e,n){var r=dc(t,e,n);return t.element.childNodes.length!==0&&(t.children.forEach(function(i){i.isVisible(r,n)&&(r=!0)}),r)}var Ej=function(){function t(){this.markers=[]}return t.prototype.addMarker=function(e){this.markers.push(e)},t.prototype.draw=function(e){return Or(this,void 0,void 0,function(){var n,r,i,s,o,a,l,u;return Ur(this,function(c){switch(c.label){case 0:n=0,c.label=1;case 1:return n<this.markers.length?(r=this.markers[n],i=void 0,s=r.angle,o=r.anchor,a=Math.cos(s),l=Math.sin(s),i=e.pdf.Matrix(a,l,-l,a,o[0],o[1]),i=e.pdf.matrixMult(e.pdf.Matrix(e.attributeState.strokeWidth,0,0,e.attributeState.strokeWidth,0,0),i),i=e.pdf.matrixMult(i,e.transform),e.pdf.saveGraphicsState(),u=vm.getContextColors(e),[4,e.refsHandler.getRendered(r.id,u,function(h){return h.apply(e)})]):[3,4];case 2:c.sent(),e.pdf.doFormObject(e.refsHandler.generateKey(r.id,u),i),e.pdf.restoreGraphicsState(),c.label=3;case 3:return n++,[3,1];case 4:return[2]}})})},t}(),Kc=function(t,e,n,r){r===void 0&&(r=!1),this.id=t,this.anchor=e,this.angle=n,this.isStartMarker=r},x3=/url\(["']?#([^"']+)["']?\)/,Aj={bottom:"bottom","text-bottom":"bottom",top:"top","text-top":"top",hanging:"hanging",middle:"middle",central:"middle",center:"middle",mathematical:"middle",ideographic:"ideographic",alphabetic:"alphabetic",baseline:"alphabetic"},bC="http://www.w3.org/2000/svg";function ju(t,e){var n;return(n=t&&t.toString().match(/^([\-0-9.]+)em$/))?parseFloat(n[1])*e:(n=t&&t.toString().match(/^([\-0-9.]+)(px|)$/))?parseFloat(n[1]):0}function YI(t){return Aj[t]||"alphabetic"}function Ha(t){for(var e,n=[],r=/[+-]?(?:(?:\d+\.?\d*)|(?:\d*\.?\d+))(?:[eE][+-]?\d+)?/g;e=r.exec(t);)n.push(parseFloat(e[0]));return n}function Jp(t,e){if(t==="transparent"){var n=new yl("rgb(0,0,0)");return n.a=0,n}if(e&&t.toLowerCase()==="currentcolor")return e.color||new yl("rgb(0,0,0)");if(e&&t.toLowerCase()==="context-stroke")return e.contextStroke||new yl("rgb(0,0,0)");if(e&&t.toLowerCase()==="context-fill")return e.contextFill||new yl("rgb(0,0,0)");var r=/\s*rgba\(((?:[^,\)]*,){3}[^,\)]*)\)\s*/.exec(t);if(r){var i=Ha(r[1]),s=new yl("rgb("+i.slice(0,3).join(",")+")");return s.a=i[3],s}return new yl(t)}var Ku={"sans-serif":"helvetica",verdana:"helvetica",arial:"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",serif:"times",cursive:"times",fantasy:"times"},NS,Tj=(NS=wn.version.split("."),parseFloat(NS[0])===2&&parseFloat(NS[1])===3);function ZI(t,e){return Tj?e==400?t=="italic"?"italic":"normal":e==700&&t!=="italic"?"bold":t+""+e:e==400||e==="normal"?t==="italic"?"italic":"normal":e!=700&&e!=="bold"||t!=="normal"?(e==700?"bold":e)+""+t:"bold"}function w3(t,e){if(Pt(e.element,t.styleSheets,"display")==="none")return[0,0,0,0];var n=[];return e.children.forEach(function(r){var i=r.getBoundingBox(t);if(i[0]!==0||i[1]!==0||i[2]!==0||i[3]!==0){var s=r.computeNodeTransform(t);i[0]=i[0]*s.sx+s.tx,i[1]=i[1]*s.sy+s.ty,i[2]=i[2]*s.sx,i[3]=i[3]*s.sy,n=n.length===0?i:[Math.min(n[0],i[0]),Math.min(n[1],i[1]),Math.max(n[0]+n[2],i[0]+i[2])-Math.min(n[0],i[0]),Math.max(n[1]+n[3],i[1]+i[3])-Math.min(n[1],i[1])]}}),n.length===0?[0,0,0,0]:n}function gv(t,e){var n=parseFloat,r=n(t.getAttribute("x1"))||n(Pt(t,e.styleSheets,"x"))||n(Pt(t,e.styleSheets,"cx"))-n(Pt(t,e.styleSheets,"r"))||0,i=n(t.getAttribute("x2"))||r+n(Pt(t,e.styleSheets,"width"))||n(Pt(t,e.styleSheets,"cx"))+n(Pt(t,e.styleSheets,"r"))||0,s=n(t.getAttribute("y1"))||n(Pt(t,e.styleSheets,"y"))||n(Pt(t,e.styleSheets,"cy"))-n(Pt(t,e.styleSheets,"r"))||0,o=n(t.getAttribute("y2"))||s+n(Pt(t,e.styleSheets,"height"))||n(Pt(t,e.styleSheets,"cy"))+n(Pt(t,e.styleSheets,"r"))||0;return[Math.min(r,i),Math.min(s,o),Math.max(r,i)-Math.min(r,i),Math.max(s,o)-Math.min(s,o)]}function vv(t,e,n,r,i,s,o,a){a===void 0&&(a=!1);var l,u,c=e[0],h=e[1],f=e[2],d=e[3],v=i/f,x=s/d,w=t.getAttribute("preserveAspectRatio");if(w){var g=w.split(" ");g[0]==="defer"&&(g=g.slice(1)),l=g[0],u=g[1]||"meet"}else l="xMidYMid",u="meet";if(l!=="none"&&(u==="meet"?v=x=Math.min(v,x):u==="slice"&&(v=x=Math.max(v,x))),a)return o.pdf.Matrix(v,0,0,x,0,0);var S=n-c*v,_=r-h*x;l.indexOf("xMid")>=0?S+=(i-f*v)/2:l.indexOf("xMax")>=0&&(S+=i-f*v),l.indexOf("YMid")>=0?_+=(s-d*x)/2:l.indexOf("YMax")>=0&&(_+=s-d*x);var T=o.pdf.Matrix(1,0,0,1,S,_),L=o.pdf.Matrix(v,0,0,x,0,0);return o.pdf.matrixMult(L,T)}function Ix(t,e){if(!t||t==="none")return e.pdf.unitMatrix;for(var n,r,i=/^[\s,]*matrix\(([^)]+)\)\s*/,s=/^[\s,]*translate\(([^)]+)\)\s*/,o=/^[\s,]*rotate\(([^)]+)\)\s*/,a=/^[\s,]*scale\(([^)]+)\)\s*/,l=/^[\s,]*skewX\(([^)]+)\)\s*/,u=/^[\s,]*skewY\(([^)]+)\)\s*/,c=e.pdf.unitMatrix;t.length>0&&t.length!==r;){r=t.length;var h=i.exec(t);if(h&&(n=Ha(h[1]),c=e.pdf.matrixMult(e.pdf.Matrix(n[0],n[1],n[2],n[3],n[4],n[5]),c),t=t.substr(h[0].length)),h=o.exec(t)){n=Ha(h[1]);var f=Math.PI*n[0]/180;if(c=e.pdf.matrixMult(e.pdf.Matrix(Math.cos(f),Math.sin(f),-Math.sin(f),Math.cos(f),0,0),c),n[1]||n[2]){var d=e.pdf.Matrix(1,0,0,1,n[1],n[2]),v=e.pdf.Matrix(1,0,0,1,-n[1],-n[2]);c=e.pdf.matrixMult(v,e.pdf.matrixMult(c,d))}t=t.substr(h[0].length)}(h=s.exec(t))&&(n=Ha(h[1]),c=e.pdf.matrixMult(e.pdf.Matrix(1,0,0,1,n[0],n[1]||0),c),t=t.substr(h[0].length)),(h=a.exec(t))&&((n=Ha(h[1]))[1]||(n[1]=n[0]),c=e.pdf.matrixMult(e.pdf.Matrix(n[0],0,0,n[1],0,0),c),t=t.substr(h[0].length)),(h=l.exec(t))&&(n=parseFloat(h[1]),n*=Math.PI/180,c=e.pdf.matrixMult(e.pdf.Matrix(1,0,Math.tan(n),1,0,0),c),t=t.substr(h[0].length)),(h=u.exec(t))&&(n=parseFloat(h[1]),n*=Math.PI/180,c=e.pdf.matrixMult(e.pdf.Matrix(1,Math.tan(n),0,1,0,0),c),t=t.substr(h[0].length))}return c}var S3=function(){function t(e,n){this.element=e,this.children=n,this.parent=null}return t.prototype.setParent=function(e){this.parent=e},t.prototype.getParent=function(){return this.parent},t.prototype.getBoundingBox=function(e){return Pt(this.element,e.styleSheets,"display")==="none"?[0,0,0,0]:this.getBoundingBoxCore(e)},t.prototype.computeNodeTransform=function(e){var n=this.computeNodeTransformCore(e),r=Pt(this.element,e.styleSheets,"transform");return r?e.pdf.matrixMult(n,Ix(r,e)):n},t}(),yv=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return kr(e,t),e.prototype.render=function(n){return Promise.resolve()},e.prototype.getBoundingBoxCore=function(n){return[]},e.prototype.computeNodeTransformCore=function(n){return n.pdf.unitMatrix},e}(S3),$I=function(t){function e(n,r,i){var s=t.call(this,r,i)||this;return s.pdfGradientType=n,s.contextColor=void 0,s}return kr(e,t),e.prototype.apply=function(n){return Or(this,void 0,void 0,function(){var r,i,s,o,a,l;return Ur(this,function(u){return(r=this.element.getAttribute("id"))?(i=this.getStops(n.styleSheets),s=0,o=!1,i.forEach(function(c){var h=c.opacity;h&&h!==1&&(s+=h,o=!0)}),o&&(a=new sd({opacity:s/i.length})),l=new oh(this.pdfGradientType,this.getCoordinates(),i,a),n.pdf.addShadingPattern(r,l),[2]):[2]})})},e.prototype.getStops=function(n){var r=this;if(this.stops)return this.stops;if(this.contextColor===void 0){this.contextColor=null;for(var i=this;i;){var s=Pt(i.element,n,"color");if(s){this.contextColor=Jp(s,null);break}i=i.getParent()}}var o=[];return this.children.forEach(function(a){if(a.element.tagName.toLowerCase()==="stop"){var l=Pt(a.element,n,"color"),u=Jp(Pt(a.element,n,"stop-color")||"",l?{color:Jp(l,null)}:{color:r.contextColor}),c=parseFloat(Pt(a.element,n,"stop-opacity")||"1");o.push({offset:e.parseGradientOffset(a.element.getAttribute("offset")||"0"),color:[u.r,u.g,u.b],opacity:c})}}),this.stops=o},e.prototype.getBoundingBoxCore=function(n){return gv(this.element,n)},e.prototype.computeNodeTransformCore=function(n){return n.pdf.unitMatrix},e.prototype.isVisible=function(n,r){return qh(this,n,r)},e.parseGradientOffset=function(n){var r=parseFloat(n);return!isNaN(r)&&n.indexOf("%")>=0?r/100:r},e}(yv),KI=function(t){function e(n,r){return t.call(this,"axial",n,r)||this}return kr(e,t),e.prototype.getCoordinates=function(){return[parseFloat(this.element.getAttribute("x1")||"0"),parseFloat(this.element.getAttribute("y1")||"0"),parseFloat(this.element.getAttribute("x2")||"1"),parseFloat(this.element.getAttribute("y2")||"0")]},e}($I),JI=function(t){function e(n,r){return t.call(this,"radial",n,r)||this}return kr(e,t),e.prototype.getCoordinates=function(){var n=this.element.getAttribute("cx"),r=this.element.getAttribute("cy"),i=this.element.getAttribute("fx"),s=this.element.getAttribute("fy");return[parseFloat(i||n||"0.5"),parseFloat(s||r||"0.5"),0,parseFloat(n||"0.5"),parseFloat(r||"0.5"),parseFloat(this.element.getAttribute("r")||"0.5")]},e}($I),Cj=function(){function t(e,n){this.key=e,this.gradient=n}return t.prototype.getFillData=function(e,n){return Or(this,void 0,void 0,function(){var r,i,s;return Ur(this,function(o){switch(o.label){case 0:return[4,n.refsHandler.getRendered(this.key,null,function(a){return a.apply(new Xh(n.pdf,{refsHandler:n.refsHandler,textMeasure:n.textMeasure,styleSheets:n.styleSheets,viewport:n.viewport,svg2pdfParameters:n.svg2pdfParameters}))})];case 1:return o.sent(),this.gradient.element.hasAttribute("gradientUnits")&&this.gradient.element.getAttribute("gradientUnits").toLowerCase()!=="objectboundingbox"?r=n.pdf.unitMatrix:(i=e.getBoundingBox(n),r=n.pdf.Matrix(i[2],0,0,i[3],i[0],i[1])),s=Ix(Pt(this.gradient.element,n.styleSheets,"gradientTransform","transform"),n),[2,{key:this.key,matrix:n.pdf.matrixMult(s,r)}]}})})},t}(),QI=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return kr(e,t),e.prototype.apply=function(n){return Or(this,void 0,void 0,function(){var r,i,s,o,a;return Ur(this,function(l){switch(l.label){case 0:if(!(r=this.element.getAttribute("id")))return[2];i=this.getBoundingBox(n),s=new Hf([i[0],i[1],i[0]+i[2],i[1]+i[3]],i[2],i[3]),n.pdf.beginTilingPattern(s),o=0,a=this.children,l.label=1;case 1:return o<a.length?[4,a[o].render(new Xh(n.pdf,{attributeState:n.attributeState,refsHandler:n.refsHandler,styleSheets:n.styleSheets,viewport:n.viewport,svg2pdfParameters:n.svg2pdfParameters,textMeasure:n.textMeasure}))]:[3,4];case 2:l.sent(),l.label=3;case 3:return o++,[3,1];case 4:return n.pdf.endTilingPattern(r,s),[2]}})})},e.prototype.getBoundingBoxCore=function(n){return gv(this.element,n)},e.prototype.computeNodeTransformCore=function(n){return n.pdf.unitMatrix},e.prototype.isVisible=function(n,r){return qh(this,n,r)},e}(yv),Lj=function(){function t(e,n){this.key=e,this.pattern=n}return t.prototype.getFillData=function(e,n){return Or(this,void 0,void 0,function(){var r,i,s,o,a,l,u,c,h,f,d,v;return Ur(this,function(x){switch(x.label){case 0:return[4,n.refsHandler.getRendered(this.key,null,function(w){return w.apply(new Xh(n.pdf,{refsHandler:n.refsHandler,textMeasure:n.textMeasure,styleSheets:n.styleSheets,viewport:n.viewport,svg2pdfParameters:n.svg2pdfParameters}))})];case 1:return x.sent(),r={key:this.key,boundingBox:void 0,xStep:0,yStep:0,matrix:void 0},s=n.pdf.unitMatrix,this.pattern.element.hasAttribute("patternUnits")&&this.pattern.element.getAttribute("patternUnits").toLowerCase()!=="objectboundingbox"||(i=e.getBoundingBox(n),s=n.pdf.Matrix(1,0,0,1,i[0],i[1]),a=this.pattern.getBoundingBox(n),l=a[0]*i[0]||0,u=a[1]*i[1]||0,c=a[2]*i[2]||0,h=a[3]*i[3]||0,r.boundingBox=[l,u,l+c,u+h],r.xStep=c,r.yStep=h),o=n.pdf.unitMatrix,this.pattern.element.hasAttribute("patternContentUnits")&&this.pattern.element.getAttribute("patternContentUnits").toLowerCase()==="objectboundingbox"&&(i||(i=e.getBoundingBox(n)),o=n.pdf.Matrix(i[2],0,0,i[3],0,0),a=r.boundingBox||this.pattern.getBoundingBox(n),l=a[0]/i[0]||0,u=a[1]/i[1]||0,c=a[2]/i[2]||0,h=a[3]/i[3]||0,r.boundingBox=[l,u,l+c,u+h],r.xStep=c,r.yStep=h),f=n.pdf.unitMatrix,(d=Pt(this.pattern.element,n.styleSheets,"patternTransform","transform"))&&(f=Ix(d,n)),v=o,v=n.pdf.matrixMult(v,s),v=n.pdf.matrixMult(v,f),v=n.pdf.matrixMult(v,n.transform),r.matrix=v,[2,r]}})})},t}();function Pj(t,e){var n=x3.exec(t);if(n){var r=n[1],i=e.refsHandler.get(r);return i&&(i instanceof KI||i instanceof JI)?function(o,a,l){var u=a.getStops(l.styleSheets);if(u.length===0)return null;if(u.length===1){var c=u[0].color,h=new yl;return h.ok=!0,h.r=c[0],h.g=c[1],h.b=c[2],h.a=u[0].opacity,new ks(h)}return new Cj(o,a)}(r,i,e):i&&i instanceof QI?new Lj(r,i):new ks(new yl("rgb(0, 0, 0)"))}var s=Jp(t,e.attributeState);return s.ok?new ks(s):null}function _3(t,e,n){var r=n||e.element,i=Pt(r,t.styleSheets,"color");if(i){var s=Jp(i,t.attributeState);s.ok?t.attributeState.color=s:t.attributeState.color=new yl("rgb(0,0,0)")}var o=Pt(r,t.styleSheets,"visibility");o&&(t.attributeState.visibility=o);var a=Pt(r,t.styleSheets,"fill");a&&(t.attributeState.fill=Pj(a,t));var l=Pt(r,t.styleSheets,"fill-opacity");l&&(t.attributeState.fillOpacity=parseFloat(l));var u=Pt(r,t.styleSheets,"stroke-opacity");u&&(t.attributeState.strokeOpacity=parseFloat(u));var c=Pt(r,t.styleSheets,"opacity");c&&(t.attributeState.opacity=parseFloat(c));var h=Pt(r,t.styleSheets,"stroke-width");h!==void 0&&h!==""&&(t.attributeState.strokeWidth=Math.abs(parseFloat(h)));var f=Pt(r,t.styleSheets,"stroke");if(f)if(f==="none")t.attributeState.stroke=null;else{var d=Jp(f,t.attributeState);d.ok&&(t.attributeState.stroke=new ks(d))}f&&t.attributeState.stroke instanceof ks&&(t.attributeState.contextStroke=t.attributeState.stroke.color),a&&t.attributeState.fill instanceof ks&&(t.attributeState.contextFill=t.attributeState.fill.color);var v=Pt(r,t.styleSheets,"stroke-linecap");v&&(t.attributeState.strokeLinecap=v);var x=Pt(r,t.styleSheets,"stroke-linejoin");x&&(t.attributeState.strokeLinejoin=x);var w=Pt(r,t.styleSheets,"stroke-dasharray");if(w){var g=parseInt(Pt(r,t.styleSheets,"stroke-dashoffset")||"0");t.attributeState.strokeDasharray=Ha(w),t.attributeState.strokeDashoffset=g}var S=Pt(r,t.styleSheets,"stroke-miterlimit");S!==void 0&&S!==""&&(t.attributeState.strokeMiterlimit=parseFloat(S));var _=r.getAttribute("xml:space");_&&(t.attributeState.xmlSpace=_);var T=Pt(r,t.styleSheets,"font-weight");T&&(t.attributeState.fontWeight=T);var L=Pt(r,t.styleSheets,"font-style");L&&(t.attributeState.fontStyle=L);var k=Pt(r,t.styleSheets,"font-family");if(k){var N=$W.parse(k);t.attributeState.fontFamily=function(H,ee,se){var ce=ZI(H.fontStyle,H.fontWeight),W=se.pdf.getFontList(),Y="";return ee.some(function(j){var re=W[j];return re&&re.indexOf(ce)>=0?(Y=j,!0):(j=j.toLowerCase(),!!Ku.hasOwnProperty(j)&&(Y=j,!0))})||(Y="times"),Y}(t.attributeState,N,t)}var R=Pt(r,t.styleSheets,"font-size");if(R){var P=t.pdf.getFontSize();t.attributeState.fontSize=ju(R,P)}var D=Pt(r,t.styleSheets,"vertical-align")||Pt(r,t.styleSheets,"alignment-baseline");if(D){var O=D.match(/(baseline|text-bottom|alphabetic|ideographic|middle|central|mathematical|text-top|bottom|center|top|hanging)/);O&&(t.attributeState.alignmentBaseline=O[0])}var B=Pt(r,t.styleSheets,"text-anchor");B&&(t.attributeState.textAnchor=B);var V=Pt(r,t.styleSheets,"fill-rule");V&&(t.attributeState.fillRule=V)}function b3(t,e,n){var r=1,i=1;r*=t.attributeState.fillOpacity,r*=t.attributeState.opacity,t.attributeState.fill instanceof ks&&t.attributeState.fill.color.a!==void 0&&(r*=t.attributeState.fill.color.a),i*=t.attributeState.strokeOpacity,i*=t.attributeState.opacity,t.attributeState.stroke instanceof ks&&t.attributeState.stroke.color.a!==void 0&&(i*=t.attributeState.stroke.color.a);var s,o,a=r<1,l=i<1;if(Fh(n,"use")?(a=!0,l=!0,r*=t.attributeState.fill?1:0,i*=t.attributeState.stroke?1:0):t.withinUse&&(t.attributeState.fill!==e.attributeState.fill?(a=!0,r*=t.attributeState.fill?1:0):a&&!t.attributeState.fill&&(r=0),t.attributeState.stroke!==e.attributeState.stroke?(l=!0,i*=t.attributeState.stroke?1:0):l&&!t.attributeState.stroke&&(i=0)),a||l){var u={};a&&(u.opacity=r),l&&(u["stroke-opacity"]=i),t.pdf.setGState(new sd(u))}if(t.attributeState.fill&&t.attributeState.fill!==e.attributeState.fill&&t.attributeState.fill instanceof ks&&t.attributeState.fill.color.ok&&!Fh(n,"text")&&t.pdf.setFillColor(t.attributeState.fill.color.r,t.attributeState.fill.color.g,t.attributeState.fill.color.b),t.attributeState.strokeWidth!==e.attributeState.strokeWidth&&t.pdf.setLineWidth(t.attributeState.strokeWidth),t.attributeState.stroke!==e.attributeState.stroke&&t.attributeState.stroke instanceof ks&&t.pdf.setDrawColor(t.attributeState.stroke.color.r,t.attributeState.stroke.color.g,t.attributeState.stroke.color.b),t.attributeState.strokeLinecap!==e.attributeState.strokeLinecap&&t.pdf.setLineCap(t.attributeState.strokeLinecap),t.attributeState.strokeLinejoin!==e.attributeState.strokeLinejoin&&t.pdf.setLineJoin(t.attributeState.strokeLinejoin),t.attributeState.strokeDasharray===e.attributeState.strokeDasharray&&t.attributeState.strokeDashoffset===e.attributeState.strokeDashoffset||!t.attributeState.strokeDasharray||t.pdf.setLineDashPattern(t.attributeState.strokeDasharray,t.attributeState.strokeDashoffset),t.attributeState.strokeMiterlimit!==e.attributeState.strokeMiterlimit&&t.pdf.setLineMiterLimit(t.attributeState.strokeMiterlimit),t.attributeState.fontFamily!==e.attributeState.fontFamily&&(s=Ku.hasOwnProperty(t.attributeState.fontFamily)?Ku[t.attributeState.fontFamily]:t.attributeState.fontFamily),t.attributeState.fill&&t.attributeState.fill!==e.attributeState.fill&&t.attributeState.fill instanceof ks&&t.attributeState.fill.color.ok){var c=t.attributeState.fill.color;t.pdf.setTextColor(c.r,c.g,c.b)}t.attributeState.fontWeight===e.attributeState.fontWeight&&t.attributeState.fontStyle===e.attributeState.fontStyle||(o=ZI(t.attributeState.fontStyle,t.attributeState.fontWeight)),s===void 0&&o===void 0||(s===void 0&&(s=Ku.hasOwnProperty(t.attributeState.fontFamily)?Ku[t.attributeState.fontFamily]:t.attributeState.fontFamily),t.pdf.setFont(s,o)),t.attributeState.fontSize!==e.attributeState.fontSize&&t.pdf.setFontSize(t.attributeState.fontSize*t.pdf.internal.scaleFactor)}function eN(t,e,n){var r=x3.exec(t);if(r){var i=r[1];return n.refsHandler.get(i)||void 0}}function tN(t,e,n){return Or(this,void 0,void 0,function(){var r,i;return Ur(this,function(s){switch(s.label){case 0:return r=n.clone(),e.element.hasAttribute("clipPathUnits")&&e.element.getAttribute("clipPathUnits").toLowerCase()==="objectboundingbox"&&(i=t.getBoundingBox(n),r.transform=n.pdf.matrixMult(n.pdf.Matrix(i[2],0,0,i[3],i[0],i[1]),n.transform)),[4,e.apply(r)];case 1:return s.sent(),[2]}})})}var nN=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return kr(e,t),e.prototype.render=function(n){return Or(this,void 0,void 0,function(){var r,i,s,o;return Ur(this,function(a){switch(a.label){case 0:return this.isVisible(n.attributeState.visibility!=="hidden",n)?((r=n.clone()).transform=r.pdf.matrixMult(this.computeNodeTransform(r),n.transform),_3(r,this),i=Pt(this.element,r.styleSheets,"clip-path"),(s=i&&i!=="none")?(o=eN(i,0,r))?o.isVisible(!0,r)?(r.pdf.saveGraphicsState(),[4,tN(this,o,r)]):[3,2]:[3,4]:[3,5]):[2];case 1:return a.sent(),[3,3];case 2:return[2];case 3:return[3,5];case 4:s=!1,a.label=5;case 5:return r.withinClipPath||r.pdf.saveGraphicsState(),b3(r,n,this.element),[4,this.renderCore(r)];case 6:return a.sent(),r.withinClipPath||r.pdf.restoreGraphicsState(),s&&r.pdf.restoreGraphicsState(),[2]}})})},e}(S3),Nx=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return kr(e,t),e}(nN),xv=function(t){function e(n,r,i){var s=t.call(this,r,i)||this;return s.cachedPath=null,s.hasMarkers=n,s}return kr(e,t),e.prototype.renderCore=function(n){return Or(this,void 0,void 0,function(){var r;return Ur(this,function(i){switch(i.label){case 0:return(r=this.getCachedPath(n))===null||r.segments.length===0?[2]:(n.withinClipPath?r.transform(n.transform):n.pdf.setCurrentTransformationMatrix(n.transform),r.draw(n),[4,this.fillOrStroke(n)]);case 1:return i.sent(),this.hasMarkers?[4,this.drawMarkers(n,r)]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},e.prototype.getCachedPath=function(n){return this.cachedPath||(this.cachedPath=this.getPath(n))},e.prototype.drawMarkers=function(n,r){return Or(this,void 0,void 0,function(){return Ur(this,function(i){switch(i.label){case 0:return[4,this.getMarkers(r,n).draw(n.clone({transform:n.pdf.unitMatrix}))];case 1:return i.sent(),[2]}})})},e.prototype.fillOrStroke=function(n){return Or(this,void 0,void 0,function(){var r,i,s,o,a;return Ur(this,function(l){switch(l.label){case 0:return n.withinClipPath?[2]:(r=n.attributeState.fill,i=n.attributeState.stroke&&n.attributeState.strokeWidth!==0,r?[4,r.getFillData(this,n)]:[3,2]);case 1:return o=l.sent(),[3,3];case 2:o=void 0,l.label=3;case 3:return s=o,a=n.attributeState.fillRule==="evenodd",r&&i||n.withinUse?a?n.pdf.fillStrokeEvenOdd(s):n.pdf.fillStroke(s):r?a?n.pdf.fillEvenOdd(s):n.pdf.fill(s):i?n.pdf.stroke():n.pdf.discardPath(),[2]}})})},e.prototype.getBoundingBoxCore=function(n){var r=this.getCachedPath(n);if(!r||!r.segments.length)return[0,0,0,0];for(var i=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=0,u=0,c=0;c<r.segments.length;c++){var h=r.segments[c];(h instanceof ws||h instanceof ah||h instanceof Kl)&&(l=h.x,u=h.y),h instanceof Kl?(i=Math.min(i,l,h.x1,h.x2,h.x),o=Math.max(o,l,h.x1,h.x2,h.x),s=Math.min(s,u,h.y1,h.y2,h.y),a=Math.max(a,u,h.y1,h.y2,h.y)):(i=Math.min(i,l),o=Math.max(o,l),s=Math.min(s,u),a=Math.max(a,u))}return[i,s,o-i,a-s]},e.prototype.getMarkers=function(n,r){var i=Pt(this.element,r.styleSheets,"marker-start"),s=Pt(this.element,r.styleSheets,"marker-mid"),o=Pt(this.element,r.styleSheets,"marker-end"),a=new Ej;if(i||s||o){o&&(o=FS(o)),i&&(i=FS(i)),s&&(s=FS(s));for(var l=n.segments,u=[1,0],c=void 0,h=!1,f=[1,0],d=!1,v=function(w){var g=l[w],S=i&&(w===1||!(l[w]instanceof ws)&&l[w-1]instanceof ws);S&&l.forEach(function(R,P){if(!d&&R instanceof o5&&P>w){var D=l[P-1];d=(D instanceof ws||D instanceof ah||D instanceof Kl)&&D}});var _=o&&(w===l.length-1||!(l[w]instanceof ws)&&l[w+1]instanceof ws),T=s&&w>0&&!(w===1&&l[w-1]instanceof ws),L=l[w-1]||null;if(L instanceof ws||L instanceof ah||L instanceof Kl)if(g instanceof Kl)S&&a.addMarker(new Kc(i,[L.x,L.y],wC(d?[d.x,d.y]:[L.x,L.y],[g.x1,g.y1]),!0)),_&&a.addMarker(new Kc(o,[g.x,g.y],wC([g.x2,g.y2],[g.x,g.y]))),T&&(c=vp([L.x,L.y],[g.x1,g.y1]),c=L instanceof ws?c:Ng(iy(u,c)),a.addMarker(new Kc(s,[L.x,L.y],Math.atan2(c[1],c[0])))),u=vp([g.x2,g.y2],[g.x,g.y]);else if(g instanceof ws||g instanceof ah){if(c=vp([L.x,L.y],[g.x,g.y]),S){var k=d?vp([d.x,d.y],[g.x,g.y]):c;a.addMarker(new Kc(i,[L.x,L.y],Math.atan2(k[1],k[0]),!0))}_&&a.addMarker(new Kc(o,[g.x,g.y],Math.atan2(c[1],c[0]))),T&&(k=g instanceof ws?u:L instanceof ws?c:Ng(iy(u,c)),a.addMarker(new Kc(s,[L.x,L.y],Math.atan2(k[1],k[0])))),u=c}else g instanceof o5&&(c=vp([L.x,L.y],[h.x,h.y]),T&&(k=L instanceof ws?c:Ng(iy(u,c)),a.addMarker(new Kc(s,[L.x,L.y],Math.atan2(k[1],k[0])))),_&&(k=Ng(iy(c,f)),a.addMarker(new Kc(o,[h.x,h.y],Math.atan2(k[1],k[0])))),u=c);else{h=g instanceof ws&&g;var N=l[w+1];(N instanceof ws||N instanceof ah||N instanceof Kl)&&(f=vp([h.x,h.y],[N.x,N.y]))}},x=0;x<l.length;x++)v(x)}return a.markers.forEach(function(w){var g=r.refsHandler.get(w.id);if(g){var S=Pt(g.element,r.styleSheets,"orient");S!=null&&(w.isStartMarker&&S==="auto-start-reverse"&&(w.angle+=Math.PI),isNaN(Number(S))||(w.angle=parseFloat(S)/180*Math.PI))}}),a},e}(Nx);function FS(t){var e=x3.exec(t);return e&&e[1]||void 0}var Rj=function(t){function e(n,r){return t.call(this,!0,n,r)||this}return kr(e,t),e.prototype.getPath=function(n){if(n.withinClipPath||n.attributeState.stroke===null)return null;var r=parseFloat(this.element.getAttribute("x1")||"0"),i=parseFloat(this.element.getAttribute("y1")||"0"),s=parseFloat(this.element.getAttribute("x2")||"0"),o=parseFloat(this.element.getAttribute("y2")||"0");return r||s||i||o?new ym().moveTo(r,i).lineTo(s,o):null},e.prototype.computeNodeTransformCore=function(n){return n.pdf.unitMatrix},e.prototype.isVisible=function(n,r){return dc(this,n,r)},e.prototype.fillOrStroke=function(n){return Or(this,void 0,void 0,function(){return Ur(this,function(r){switch(r.label){case 0:return n.attributeState.fill=null,[4,t.prototype.fillOrStroke.call(this,n)];case 1:return r.sent(),[2]}})})},e}(xv),rN=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return kr(e,t),e.prototype.apply=function(n){return Or(this,void 0,void 0,function(){var r,i,s,o,a;return Ur(this,function(l){switch(l.label){case 0:return this.isVisible(n.attributeState.visibility!=="hidden",n)?((r=n.clone()).transform=r.pdf.unitMatrix,_3(r,this),i=Pt(this.element,r.styleSheets,"clip-path"),i&&i!=="none"&&(s=eN(i,0,r))?s.isVisible(!0,r)?[4,tN(this,s,r)]:[3,2]:[3,3]):[2];case 1:return l.sent(),[3,3];case 2:return[2];case 3:b3(r,n,this.element),o=0,a=this.children,l.label=4;case 4:return o<a.length?[4,a[o].render(r)]:[3,7];case 5:l.sent(),l.label=6;case 6:return o++,[3,4];case 7:return[2]}})})},e.prototype.getBoundingBoxCore=function(n){return w3(n,this)},e.prototype.isVisible=function(n,r){return qh(this,n,r)},e.prototype.computeNodeTransformCore=function(n){var r=parseFloat(Pt(this.element,n.styleSheets,"x")||"0"),i=parseFloat(Pt(this.element,n.styleSheets,"y")||"0"),s=this.element.getAttribute("viewBox");if(s){var o=Ha(s),a=parseFloat(Pt(this.element,n.styleSheets,"width")||Pt(this.element.ownerSVGElement,n.styleSheets,"width")||s[2]),l=parseFloat(Pt(this.element,n.styleSheets,"height")||Pt(this.element.ownerSVGElement,n.styleSheets,"height")||s[3]);return vv(this.element,o,r,i,a,l,n)}return n.pdf.Matrix(1,0,0,1,r,i)},e}(yv),Fx=function(t,e){this.width=t,this.height=e},kj=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return kr(e,t),e.prototype.renderCore=function(n){return Or(this,void 0,void 0,function(){var r,i,s,o,a,l,u,c,h,f,d,v,x;return Ur(this,function(w){switch(w.label){case 0:return r=parseFloat,(i=this.element.getAttribute("href")||this.element.getAttribute("xlink:href"))?(s=i.substring(1),o=n.refsHandler.get(s),a=Fh(o.element,"symbol,svg")&&o.element.hasAttribute("viewBox"),l=r(Pt(this.element,n.styleSheets,"x")||"0"),u=r(Pt(this.element,n.styleSheets,"y")||"0"),c=void 0,h=void 0,a?(c=r(Pt(this.element,n.styleSheets,"width")||Pt(o.element,n.styleSheets,"width")||"0"),h=r(Pt(this.element,n.styleSheets,"height")||Pt(o.element,n.styleSheets,"height")||"0"),l+=r(Pt(o.element,n.styleSheets,"x")||"0"),u+=r(Pt(o.element,n.styleSheets,"y")||"0"),d=Ha(o.element.getAttribute("viewBox")),f=vv(o.element,d,l,u,c,h,n)):f=n.pdf.Matrix(1,0,0,1,l,u),v=vm.getContextColors(n,!0),x=new Xh(n.pdf,{refsHandler:n.refsHandler,styleSheets:n.styleSheets,withinUse:!0,viewport:a?new Fx(c,h):n.viewport,svg2pdfParameters:n.svg2pdfParameters,textMeasure:n.textMeasure,attributeState:Object.assign(vm.default(),v)}),[4,n.refsHandler.getRendered(s,v,function(g){return e.renderReferencedNode(g,s,x)})]):[2];case 1:return w.sent(),n.pdf.saveGraphicsState(),n.pdf.setCurrentTransformationMatrix(n.transform),a&&Pt(o.element,n.styleSheets,"overflow")!=="visible"&&(n.pdf.rect(l,u,c,h),n.pdf.clip().discardPath()),n.pdf.doFormObject(n.refsHandler.generateKey(s,v),f),n.pdf.restoreGraphicsState(),[2]}})})},e.renderReferencedNode=function(n,r,i){return Or(this,void 0,void 0,function(){var s;return Ur(this,function(o){switch(o.label){case 0:return s=[(s=n.getBoundingBox(i))[0]-.5*s[2],s[1]-.5*s[3],2*s[2],2*s[3]],i.pdf.beginFormObject(s[0],s[1],s[2],s[3],i.pdf.unitMatrix),n instanceof rN?[4,n.apply(i)]:[3,2];case 1:return o.sent(),[3,4];case 2:return[4,n.render(i)];case 3:o.sent(),o.label=4;case 4:return i.pdf.endFormObject(i.refsHandler.generateKey(r,i.attributeState)),[2]}})})},e.prototype.getBoundingBoxCore=function(n){return gv(this.element,n)},e.prototype.isVisible=function(n,r){return dc(this,n,r)},e.prototype.computeNodeTransformCore=function(n){return n.pdf.unitMatrix},e}(Nx),Ij=function(t){function e(n,r){return t.call(this,!1,n,r)||this}return kr(e,t),e.prototype.getPath=function(n){var r=parseFloat(Pt(this.element,n.styleSheets,"width")||"0"),i=parseFloat(Pt(this.element,n.styleSheets,"height")||"0");if(!isFinite(r)||r<=0||!isFinite(i)||i<=0)return null;var s=Pt(this.element,n.styleSheets,"rx"),o=Pt(this.element,n.styleSheets,"ry"),a=Math.min(parseFloat(s||o||"0"),.5*r),l=Math.min(parseFloat(o||s||"0"),.5*i),u=parseFloat(Pt(this.element,n.styleSheets,"x")||"0"),c=parseFloat(Pt(this.element,n.styleSheets,"y")||"0"),h=4/3*(Math.SQRT2-1);return a===0&&l===0?new ym().moveTo(u,c).lineTo(u+r,c).lineTo(u+r,c+i).lineTo(u,c+i).close():new ym().moveTo(u+=a,c).lineTo(u+=r-2*a,c).curveTo(u+a*h,c,u+a,c+(l-l*h),u+=a,c+=l).lineTo(u,c+=i-2*l).curveTo(u,c+l*h,u-a*h,c+l,u-=a,c+=l).lineTo(u+=2*a-r,c).curveTo(u-a*h,c,u-a,c-l*h,u-=a,c-=l).lineTo(u,c+=2*l-i).curveTo(u,c-l*h,u+a*h,c-l,u+=a,c-=l).close()},e.prototype.computeNodeTransformCore=function(n){return n.pdf.unitMatrix},e.prototype.isVisible=function(n,r){return dc(this,n,r)},e}(xv),iN=function(t){function e(n,r){return t.call(this,!1,n,r)||this}return kr(e,t),e.prototype.getPath=function(n){var r=this.getRx(n),i=this.getRy(n);if(!isFinite(r)||i<=0||!isFinite(i)||i<=0)return null;var s=parseFloat(Pt(this.element,n.styleSheets,"cx")||"0"),o=parseFloat(Pt(this.element,n.styleSheets,"cy")||"0"),a=4/3*(Math.SQRT2-1)*r,l=4/3*(Math.SQRT2-1)*i;return new ym().moveTo(s+r,o).curveTo(s+r,o-l,s+a,o-i,s,o-i).curveTo(s-a,o-i,s-r,o-l,s-r,o).curveTo(s-r,o+l,s-a,o+i,s,o+i).curveTo(s+a,o+i,s+r,o+l,s+r,o)},e.prototype.computeNodeTransformCore=function(n){return n.pdf.unitMatrix},e.prototype.isVisible=function(n,r){return dc(this,n,r)},e}(xv),Nj=function(t){function e(n,r){return t.call(this,n,r)||this}return kr(e,t),e.prototype.getRx=function(n){return parseFloat(Pt(this.element,n.styleSheets,"rx")||"0")},e.prototype.getRy=function(n){return parseFloat(Pt(this.element,n.styleSheets,"ry")||"0")},e}(iN);function sN(t){var e="invisible",n=t.stroke&&t.strokeWidth!==0,r=t.fill;return r&&n?e="fillThenStroke":r?e="fill":n&&(e="stroke"),e}function MC(t){return t.replace(/[\n\r]/g,"")}function EC(t){return t.replace(/[\t]/g," ")}function AC(t){return t.replace(/ +/g," ")}function TC(t,e,n){switch(Pt(t,n.styleSheets,"text-transform")){case"uppercase":return e.toUpperCase();case"lowercase":return e.toLowerCase();default:return e}}var DS=function(){function t(e,n,r,i){this.textNode=e,this.texts=[],this.textNodes=[],this.contexts=[],this.textAnchor=n,this.originX=r,this.originY=i,this.textMeasures=[]}return t.prototype.setX=function(e){this.originX=e},t.prototype.setY=function(e){this.originY=e},t.prototype.add=function(e,n,r){this.texts.push(n),this.textNodes.push(e),this.contexts.push(r)},t.prototype.rightTrimText=function(){for(var e=this.texts.length-1;e>=0;e--)if(this.contexts[e].attributeState.xmlSpace==="default"&&(this.texts[e]=this.texts[e].replace(/\s+$/,"")),this.texts[e].match(/[^\s]/))return!1;return!0},t.prototype.measureText=function(e){for(var n=0;n<this.texts.length;n++)this.textMeasures.push({width:e.textMeasure.measureTextWidth(this.texts[n],this.contexts[n].attributeState),length:this.texts[n].length})},t.prototype.put=function(e,n){var r,i,s,o,a=[],l=[],u=[],c=this.originX,h=this.originY,f=c,d=c;for(r=0;r<this.textNodes.length;r++){i=this.textNodes[r],s=this.contexts[r],o=this.textMeasures[r]||{width:e.textMeasure.measureTextWidth(this.texts[r],this.contexts[r].attributeState),length:this.texts[r].length};var v=c,x=h;if(i.nodeName!=="#text"&&!a.includes(i)){a.push(i);var w=t.resolveRelativePositionAttribute(i,"dx");w!==null&&(v+=ju(w,s.attributeState.fontSize));var g=t.resolveRelativePositionAttribute(i,"dy");g!==null&&(x+=ju(g,s.attributeState.fontSize))}l[r]=v,u[r]=x,c=v+o.width+o.length*n,h=x,f=Math.min(f,v),d=Math.max(d,c)}var S=0;switch(this.textAnchor){case"start":S=0;break;case"middle":S=(d-f)/2;break;case"end":S=d-f}for(r=0;r<this.textNodes.length;r++)if(i=this.textNodes[r],s=this.contexts[r],i.nodeName==="#text"||s.attributeState.visibility!=="hidden"){e.pdf.saveGraphicsState(),b3(s,e,i);var _=s.attributeState.alignmentBaseline,T=sN(s.attributeState);e.pdf.text(this.texts[r],l[r]-S,u[r],{baseline:YI(_),angle:e.transform,renderingMode:T==="fill"?void 0:T,charSpace:n===0?void 0:n}),e.pdf.restoreGraphicsState()}return[c,h]},t.resolveRelativePositionAttribute=function(e,n){for(var r,i=e;i&&Fh(i,"tspan");){if(i.hasAttribute(n))return i.getAttribute(n);if(((r=e.parentElement)===null||r===void 0?void 0:r.firstChild)!==e)break;i=i.parentElement}return null},t}(),Fj=function(t){function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.boundingBox=[],n}return kr(e,t),e.prototype.processTSpans=function(n,r,i,s,o,a){for(var l=i.pdf.getFontSize(),u=i.attributeState.xmlSpace,c=!0,h=!1,f=0;f<r.childNodes.length;f++){var d=r.childNodes[f];if(d.textContent){var v=d.textContent;if(d.nodeName==="#text"){var x=MC(v);x=EC(x),u==="default"&&(x=AC(x),c&&x.match(/^\s/)&&(h=!0),x.match(/[^\s]/)&&(c=!1),a.prevText.match(/\s$/)&&(x=x.replace(/^\s+/,"")));var w=TC(r,x,i);o.add(r,w,i),a.prevText=v,a.prevContext=i}else if(!Fh(d,"title")){if(Fh(d,"tspan")){var g=d,S=g.getAttribute("x");if(S!==null){var _=ju(S,l);o=new DS(this,Pt(g,i.styleSheets,"text-anchor")||i.attributeState.textAnchor,_,0),s.push({type:"y",chunk:o})}var T=g.getAttribute("y");if(T!==null){var L=ju(T,l);o=new DS(this,Pt(g,i.styleSheets,"text-anchor")||i.attributeState.textAnchor,0,L),s.push({type:"x",chunk:o})}var k=i.clone();_3(k,n,g),this.processTSpans(n,g,k,s,o,a)}}}}return h},e.prototype.renderCore=function(n){return Or(this,void 0,void 0,function(){var r,i,s,o,a,l,u,c,h,f,d,v,x,w,g,S,_,T,L,k,N,R,P;return Ur(this,function(D){if(n.pdf.saveGraphicsState(),r=0,i=0,s=1,o=n.pdf.getFontSize(),a=ju(this.element.getAttribute("x"),o),l=ju(this.element.getAttribute("y"),o),u=ju(this.element.getAttribute("dx"),o),c=ju(this.element.getAttribute("dy"),o),h=parseFloat(this.element.getAttribute("textLength")||"0"),f=n.attributeState.visibility,this.element.childElementCount===0)d=this.element.textContent||"",v=function(O,B){return O=EC(O=MC(O)),B.xmlSpace==="default"&&(O=AC(O=O.trim())),O}(d,n.attributeState),x=TC(this.element,v,n),r=n.textMeasure.getTextOffset(x,n.attributeState),h>0&&(w=n.textMeasure.measureTextWidth(x,n.attributeState),n.attributeState.xmlSpace==="default"&&d.match(/^\s/)&&(s=0),i=(h-w)/(x.length-s)||0),f==="visible"&&(g=n.attributeState.alignmentBaseline,S=sN(n.attributeState),n.pdf.text(x,a+u-r,l+c,{baseline:YI(g),angle:n.transform,renderingMode:S==="fill"?void 0:S,charSpace:i===0?void 0:i}),this.boundingBox=[a+u-r,l+c+.1*o,n.textMeasure.measureTextWidth(x,n.attributeState),o]);else{for(_=[],T=new DS(this,n.attributeState.textAnchor,a+u,l+c),_.push({type:"",chunk:T}),L=this.processTSpans(this,this.element,n,_,T,{prevText:" ",prevContext:n}),s=L?0:1,k=!0,N=_.length-1;N>=0;N--)k&&(k=_[N].chunk.rightTrimText());h>0&&(R=0,P=0,_.forEach(function(O){var B=O.chunk;B.measureText(n),B.textMeasures.forEach(function(V){var H=V.width,ee=V.length;R+=H,P+=ee})}),i=(h-R)/(P-s)),_.reduce(function(O,B){var V=B.type,H=B.chunk;return V==="x"?H.setX(O[0]):V==="y"&&H.setY(O[1]),H.put(n,i)},[0,0])}return n.pdf.restoreGraphicsState(),[2]})})},e.prototype.isVisible=function(n,r){return qh(this,n,r)},e.prototype.getBoundingBoxCore=function(n){return this.boundingBox.length>0?this.boundingBox:gv(this.element,n)},e.prototype.computeNodeTransformCore=function(n){return n.pdf.unitMatrix},e}(Nx),Dj=function(t){function e(n,r){return t.call(this,!0,n,r)||this}return kr(e,t),e.prototype.computeNodeTransformCore=function(n){return n.pdf.unitMatrix},e.prototype.isVisible=function(n,r){return dc(this,n,r)},e.prototype.getPath=function(n){var r,i,s=new bj(Pt(this.element,n.styleSheets,"d")||"").unshort().unarc().abs(),o=new ym;return s.iterate(function(a){switch(a[0]){case"M":o.moveTo(a[1],a[2]);break;case"L":o.lineTo(a[1],a[2]);break;case"H":o.lineTo(a[1],i);break;case"V":o.lineTo(r,a[1]);break;case"C":o.curveTo(a[1],a[2],a[3],a[4],a[5],a[6]);break;case"Q":var l=_C([r,i],[a[1],a[2]]),u=_C([a[3],a[4]],[a[1],a[2]]);o.curveTo(l[0],l[1],u[0],u[1],a[3],a[4]);break;case"Z":o.close()}switch(a[0]){case"M":case"L":r=a[1],i=a[2];break;case"H":r=a[1];break;case"V":i=a[1];break;case"C":r=a[5],i=a[6];break;case"Q":r=a[3],i=a[4]}}),o},e}(xv),Oj=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,((?:.|\s)*)$/i,Uj=function(t){function e(n,r){var i=t.call(this,n,r)||this;return i.imageLoadingPromise=null,i.imageUrl=i.element.getAttribute("xlink:href")||i.element.getAttribute("href"),i.imageUrl&&(i.imageLoadingPromise=e.fetchImageData(i.imageUrl)),i}return kr(e,t),e.prototype.renderCore=function(n){return Or(this,void 0,void 0,function(){var r,i,s,o,a,l,u,c,h,f,d,v,x,w,g,S,_,T;return Ur(this,function(L){switch(L.label){case 0:return this.imageLoadingPromise?(n.pdf.setCurrentTransformationMatrix(n.transform),r=parseFloat(Pt(this.element,n.styleSheets,"width")||"0"),i=parseFloat(Pt(this.element,n.styleSheets,"height")||"0"),s=parseFloat(Pt(this.element,n.styleSheets,"x")||"0"),o=parseFloat(Pt(this.element,n.styleSheets,"y")||"0"),!isFinite(r)||r<=0||!isFinite(i)||i<=0?[2]:[4,this.imageLoadingPromise]):[2];case 1:return a=L.sent(),l=a.data,(u=a.format).indexOf("svg")!==0?[3,3]:(c=new DOMParser,h=c.parseFromString(l,"image/svg+xml").firstElementChild,(!(f=this.element.getAttribute("preserveAspectRatio"))||f.indexOf("defer")<0||!h.getAttribute("preserveAspectRatio"))&&h.setAttribute("preserveAspectRatio",f||""),h.setAttribute("x",String(s)),h.setAttribute("y",String(o)),h.setAttribute("width",String(r)),h.setAttribute("height",String(i)),[4,M3(h,d={}).render(new Xh(n.pdf,{refsHandler:new qI(d),styleSheets:n.styleSheets,viewport:new Fx(r,i),svg2pdfParameters:n.svg2pdfParameters,textMeasure:n.textMeasure}))]);case 2:return L.sent(),[2];case 3:v="data:image/".concat(u,";base64,").concat(btoa(l)),L.label=4;case 4:return L.trys.push([4,6,,7]),[4,e.getImageDimensions(v)];case 5:return x=L.sent(),w=x[0],g=x[1],S=[0,0,w,g],_=vv(this.element,S,s,o,r,i,n),n.pdf.setCurrentTransformationMatrix(_),n.pdf.addImage(v,"",0,0,w,g),[3,7];case 6:return T=L.sent(),typeof console=="object"&&console.warn&&console.warn("Could not load image ".concat(this.imageUrl,`. 
`).concat(T)),[3,7];case 7:return[2]}})})},e.prototype.getBoundingBoxCore=function(n){return gv(this.element,n)},e.prototype.computeNodeTransformCore=function(n){return n.pdf.unitMatrix},e.prototype.isVisible=function(n,r){return dc(this,n,r)},e.fetchImageData=function(n){return Or(this,void 0,void 0,function(){var r,i,s,o,a;return Ur(this,function(l){switch(l.label){case 0:if(!(s=n.match(Oj)))return[3,1];if(o=s[2],(a=o.split("/"))[0]!=="image")throw new Error("Unsupported image URL: ".concat(n));return i=a[1],r=s[5],s[4]==="base64"?(r=r.replace(/\s/g,""),r=atob(r)):r=decodeURIComponent(r),[3,3];case 1:return[4,e.fetchImage(n)];case 2:r=l.sent(),i=n.substring(n.lastIndexOf(".")+1),l.label=3;case 3:return[2,{data:r,format:i}]}})})},e.fetchImage=function(n){return new Promise(function(r,i){var s=new XMLHttpRequest;s.open("GET",n,!0),s.responseType="arraybuffer",s.onload=function(){if(s.status!==200)throw new Error("Error ".concat(s.status,": Failed to load image '").concat(n,"'"));for(var o=new Uint8Array(s.response),a="",l=0;l<o.length;l++)a+=String.fromCharCode(o[l]);r(a)},s.onerror=i,s.onabort=i,s.send(null)})},e.getMimeType=function(n){switch(n=n.toLowerCase()){case"jpg":case"jpeg":return"image/jpeg";default:return"image/".concat(n)}},e.getImageDimensions=function(n){return new Promise(function(r,i){var s=new Image;s.onload=function(){r([s.width,s.height])},s.onerror=i,s.src=n})},e}(Nx),oN=function(t){function e(n,r,i){var s=t.call(this,!0,r,i)||this;return s.closed=n,s}return kr(e,t),e.prototype.getPath=function(n){if(!this.element.hasAttribute("points")||this.element.getAttribute("points")==="")return null;var r=e.parsePointsString(this.element.getAttribute("points")),i=new ym;if(r.length<1)return i;i.moveTo(r[0][0],r[0][1]);for(var s=1;s<r.length;s++)i.lineTo(r[s][0],r[s][1]);return this.closed&&i.close(),i},e.prototype.isVisible=function(n,r){return dc(this,n,r)},e.prototype.computeNodeTransformCore=function(n){return n.pdf.unitMatrix},e.parsePointsString=function(n){for(var r=Ha(n),i=[],s=0;s<r.length-1;s+=2){var o=r[s],a=r[s+1];i.push([o,a])}return i},e}(xv),Bj=function(t){function e(n,r){return t.call(this,!0,n,r)||this}return kr(e,t),e}(oN),zj=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return kr(e,t),e.prototype.render=function(n){return Promise.resolve()},e.prototype.getBoundingBoxCore=function(n){return[0,0,0,0]},e.prototype.computeNodeTransformCore=function(n){return n.pdf.unitMatrix},e.prototype.isVisible=function(n,r){return dc(this,n,r)},e}(S3),Hj=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return kr(e,t),e.prototype.apply=function(n){return Or(this,void 0,void 0,function(){var r,i,s,o,a,l;return Ur(this,function(u){switch(u.label){case 0:r=this.computeNodeTransform(n),i=this.getBoundingBox(n),n.pdf.beginFormObject(i[0],i[1],i[2],i[3],r),s=vm.getContextColors(n),function(c){var h=c.attributeState,f=c.pdf,d=1,v=1;d*=h.fillOpacity,d*=h.opacity,h.fill instanceof ks&&h.fill.color.a!==void 0&&(d*=h.fill.color.a),v*=h.strokeOpacity,v*=h.opacity,h.stroke instanceof ks&&h.stroke.color.a!==void 0&&(v*=h.stroke.color.a);var x,w={};if(w.opacity=d,w["stroke-opacity"]=v,f.setGState(new sd(w)),h.fill&&h.fill instanceof ks&&h.fill.color.ok?f.setFillColor(h.fill.color.r,h.fill.color.g,h.fill.color.b):f.setFillColor(0,0,0),f.setLineWidth(h.strokeWidth),h.stroke instanceof ks?f.setDrawColor(h.stroke.color.r,h.stroke.color.g,h.stroke.color.b):f.setDrawColor(0,0,0),f.setLineCap(h.strokeLinecap),f.setLineJoin(h.strokeLinejoin),h.strokeDasharray?f.setLineDashPattern(h.strokeDasharray,h.strokeDashoffset):f.setLineDashPattern([],0),f.setLineMiterLimit(h.strokeMiterlimit),x=Ku.hasOwnProperty(h.fontFamily)?Ku[h.fontFamily]:h.fontFamily,h.fill&&h.fill instanceof ks&&h.fill.color.ok){var g=h.fill.color;f.setTextColor(g.r,g.g,g.b)}else f.setTextColor(0,0,0);var S="";h.fontWeight==="bold"&&(S="bold"),h.fontStyle==="italic"&&(S+="italic"),S===""&&(S="normal"),x!==void 0||S!==void 0?(x===void 0&&(x=Ku.hasOwnProperty(h.fontFamily)?Ku[h.fontFamily]:h.fontFamily),f.setFont(x,S)):f.setFont("helvetica",S),f.setFontSize(h.fontSize*f.internal.scaleFactor)}(o=new Xh(n.pdf,{refsHandler:n.refsHandler,styleSheets:n.styleSheets,viewport:n.viewport,svg2pdfParameters:n.svg2pdfParameters,textMeasure:n.textMeasure,attributeState:Object.assign(vm.default(),s)})),a=0,l=this.children,u.label=1;case 1:return a<l.length?[4,l[a].render(o)]:[3,4];case 2:u.sent(),u.label=3;case 3:return a++,[3,1];case 4:return n.pdf.endFormObject(o.refsHandler.generateKey(this.element.getAttribute("id"),s)),[2]}})})},e.prototype.getBoundingBoxCore=function(n){var r,i=this.element.getAttribute("viewBox");return i&&(r=Ha(i)),[r&&r[0]||0,r&&r[1]||0,r&&r[2]||parseFloat(this.element.getAttribute("markerWidth")||"3"),r&&r[3]||parseFloat(this.element.getAttribute("markerHeight")||"3")]},e.prototype.computeNodeTransformCore=function(n){var r,i=parseFloat(this.element.getAttribute("refX")||"0"),s=parseFloat(this.element.getAttribute("refY")||"0"),o=this.element.getAttribute("viewBox");if(o){var a=Ha(o);r=vv(this.element,a,0,0,parseFloat(this.element.getAttribute("markerWidth")||"3"),parseFloat(this.element.getAttribute("markerHeight")||"3"),n,!0),r=n.pdf.matrixMult(n.pdf.Matrix(1,0,0,1,-i,-s),r)}else r=n.pdf.Matrix(1,0,0,1,-i,-s);return r},e.prototype.isVisible=function(n,r){return qh(this,n,r)},e}(yv),Gj=function(t){function e(n,r){return t.call(this,n,r)||this}return kr(e,t),e.prototype.getR=function(n){var r;return(r=this.r)!==null&&r!==void 0?r:this.r=parseFloat(Pt(this.element,n.styleSheets,"r")||"0")},e.prototype.getRx=function(n){return this.getR(n)},e.prototype.getRy=function(n){return this.getR(n)},e}(iN),Vj=function(t){function e(n,r){return t.call(this,!1,n,r)||this}return kr(e,t),e}(oN),aN=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return kr(e,t),e.prototype.renderCore=function(n){return Or(this,void 0,void 0,function(){var r,i;return Ur(this,function(s){switch(s.label){case 0:r=0,i=this.children,s.label=1;case 1:return r<i.length?[4,i[r].render(n)]:[3,4];case 2:s.sent(),s.label=3;case 3:return r++,[3,1];case 4:return[2]}})})},e.prototype.getBoundingBoxCore=function(n){return w3(n,this)},e}(nN),Wj=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return kr(e,t),e.prototype.isVisible=function(n,r){return qh(this,n,r)},e.prototype.render=function(n){return Or(this,void 0,void 0,function(){var r,i,s,o,a;return Ur(this,function(l){switch(l.label){case 0:return this.isVisible(n.attributeState.visibility!=="hidden",n)?(r=this.getX(n),i=this.getY(n),s=this.getWidth(n),o=this.getHeight(n),n.pdf.saveGraphicsState(),a=n.transform,this.element.hasAttribute("transform")&&(a=n.pdf.matrixMult(Ix(this.element.getAttribute("transform"),n),a)),n.pdf.setCurrentTransformationMatrix(a),n.withinUse||Pt(this.element,n.styleSheets,"overflow")==="visible"||n.pdf.rect(r,i,s,o).clip().discardPath(),[4,t.prototype.render.call(this,n.clone({transform:n.pdf.unitMatrix,viewport:n.withinUse?n.viewport:new Fx(s,o)}))]):[2];case 1:return l.sent(),n.pdf.restoreGraphicsState(),[2]}})})},e.prototype.computeNodeTransform=function(n){return this.computeNodeTransformCore(n)},e.prototype.computeNodeTransformCore=function(n){if(n.withinUse)return n.pdf.unitMatrix;var r,i=this.getX(n),s=this.getY(n),o=this.getViewBox();if(o){var a=this.getWidth(n),l=this.getHeight(n);r=vv(this.element,o,i,s,a,l,n)}else r=n.pdf.Matrix(1,0,0,1,i,s);return r},e.prototype.getWidth=function(n){if(this.width!==void 0)return this.width;var r,i,s=n.svg2pdfParameters;if(this.isOutermostSvg(n))if(s.width!=null)r=s.width;else if(i=Pt(this.element,n.styleSheets,"width"))r=parseFloat(i);else{var o=this.getViewBox();if(o&&(s.height!=null||Pt(this.element,n.styleSheets,"height"))){var a=o[2]/o[3];r=this.getHeight(n)*a}else r=Math.min(300,n.viewport.width,2*n.viewport.height)}else r=(i=Pt(this.element,n.styleSheets,"width"))?parseFloat(i):n.viewport.width;return this.width=r},e.prototype.getHeight=function(n){if(this.height!==void 0)return this.height;var r,i,s=n.svg2pdfParameters;if(this.isOutermostSvg(n))if(s.height!=null)r=s.height;else if(i=Pt(this.element,n.styleSheets,"height"))r=parseFloat(i);else{var o=this.getViewBox();if(o){var a=o[2]/o[3];r=this.getWidth(n)/a}else r=Math.min(150,n.viewport.width/2,n.viewport.height)}else r=(i=Pt(this.element,n.styleSheets,"height"))?parseFloat(i):n.viewport.height;return this.height=r},e.prototype.getX=function(n){if(this.x!==void 0)return this.x;if(this.isOutermostSvg(n))return this.x=0;var r=Pt(this.element,n.styleSheets,"x");return this.x=r?parseFloat(r):0},e.prototype.getY=function(n){if(this.y!==void 0)return this.y;if(this.isOutermostSvg(n))return this.y=0;var r=Pt(this.element,n.styleSheets,"y");return this.y=r?parseFloat(r):0},e.prototype.getViewBox=function(){if(this.viewBox!==void 0)return this.viewBox;var n=this.element.getAttribute("viewBox");return this.viewBox=n?Ha(n):void 0},e.prototype.isOutermostSvg=function(n){return n.svg2pdfParameters.element===this.element},e}(aN),lN=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return kr(e,t),e.prototype.isVisible=function(n,r){return qh(this,n,r)},e.prototype.computeNodeTransformCore=function(n){return n.pdf.unitMatrix},e}(aN),jj=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return kr(e,t),e.prototype.renderCore=function(n){return Or(this,void 0,void 0,function(){var r,i,s,o;return Ur(this,function(a){switch(a.label){case 0:return[4,t.prototype.renderCore.call(this,n)];case 1:return a.sent(),(r=Pt(this.element,n.styleSheets,"href"))&&(i=this.getBoundingBox(n),s=n.pdf.internal.scaleFactor,o=n.pdf.internal.pageSize.getHeight(),n.pdf.link(s*(i[0]*n.transform.sx+n.transform.tx),o-s*(i[1]*n.transform.sy+n.transform.ty),s*i[2],s*i[3],{url:r})),[2]}})})},e}(lN),Xj=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return kr(e,t),e.prototype.apply=function(n){return Or(this,void 0,void 0,function(){var r,i,s,o,a;return Ur(this,function(l){switch(l.label){case 0:if(!this.isVisible(!0,n))return[2];r=n.pdf.matrixMult(this.computeNodeTransform(n),n.transform),n.pdf.setCurrentTransformationMatrix(r),i=0,s=this.children,l.label=1;case 1:return i<s.length?[4,s[i].render(new Xh(n.pdf,{refsHandler:n.refsHandler,styleSheets:n.styleSheets,viewport:n.viewport,withinClipPath:!0,svg2pdfParameters:n.svg2pdfParameters,textMeasure:n.textMeasure}))]:[3,4];case 2:l.sent(),l.label=3;case 3:return i++,[3,1];case 4:return o=this.children.length>0&&!!Pt(this.children[0].element,n.styleSheets,"clip-rule"),a=o?this.getClipRuleAttr(this.children[0].element,n.styleSheets):this.getClipRuleAttr(this.element,n.styleSheets),n.pdf.clip(a).discardPath(),n.pdf.setCurrentTransformationMatrix(r.inversed()),[2]}})})},e.prototype.getBoundingBoxCore=function(n){return w3(n,this)},e.prototype.isVisible=function(n,r){return qh(this,n,r)},e.prototype.getClipRuleAttr=function(n,r){return Pt(n,r,"clip-rule")==="evenodd"?"evenodd":void 0},e}(yv);function M3(t,e){var n,r=[];switch(function(s,o){for(var a=[],l=0;l<s.childNodes.length;l++){var u=s.childNodes[l];u.nodeName.charAt(0)!=="#"&&a.push(u)}for(l=0;l<a.length;l++)o(l,a[l])}(t,function(s,o){return r.push(M3(o,e))}),t.tagName.toLowerCase()){case"a":n=new jj(t,r);break;case"g":n=new lN(t,r);break;case"circle":n=new Gj(t,r);break;case"clippath":n=new Xj(t,r);break;case"ellipse":n=new Nj(t,r);break;case"lineargradient":n=new KI(t,r);break;case"image":n=new Uj(t,r);break;case"line":n=new Rj(t,r);break;case"marker":n=new Hj(t,r);break;case"path":n=new Dj(t,r);break;case"pattern":n=new QI(t,r);break;case"polygon":n=new Bj(t,r);break;case"polyline":n=new Vj(t,r);break;case"radialgradient":n=new JI(t,r);break;case"rect":n=new Ij(t,r);break;case"svg":n=new Wj(t,r);break;case"symbol":n=new rN(t,r);break;case"text":n=new Fj(t,r);break;case"use":n=new kj(t,r);break;default:n=new zj(t,r)}if(e!=null&&n.element.hasAttribute("id")){var i=jI(n.element.id,{isIdentifier:!0});e[i]=e[i]||n}return n.children.forEach(function(s){return s.setParent(n)}),n}var qj=function(){function t(e,n){this.rootSvg=e,this.loadExternalSheets=n,this.styleSheets=[]}return t.prototype.load=function(){return Or(this,void 0,void 0,function(){var e;return Ur(this,function(n){switch(n.label){case 0:return[4,this.collectStyleSheetTexts()];case 1:return e=n.sent(),this.parseCssSheets(e),[2]}})})},t.prototype.collectStyleSheetTexts=function(){return Or(this,void 0,void 0,function(){var e,n,r,i,s;return Ur(this,function(o){switch(o.label){case 0:if(e=[],this.loadExternalSheets&&this.rootSvg.ownerDocument)for(i=0;i<this.rootSvg.ownerDocument.childNodes.length;i++)(n=this.rootSvg.ownerDocument.childNodes[i]).nodeName==="xml-stylesheet"&&typeof n.data=="string"&&e.push(t.loadSheet(n.data.match(/href=["'].*?["']/)[0].split("=")[1].slice(1,-1)));for(r=this.rootSvg.querySelectorAll("style,link"),i=0;i<r.length;i++)Fh(s=r[i],"style")?e.push(s.textContent):this.loadExternalSheets&&Fh(s,"link")&&s.getAttribute("rel")==="stylesheet"&&s.hasAttribute("href")&&e.push(t.loadSheet(s.getAttribute("href")));return[4,Promise.all(e)];case 1:return[2,o.sent().filter(function(a){return a!==null})]}})})},t.prototype.parseCssSheets=function(e){for(var n=document.implementation.createHTMLDocument(""),r=0,i=e;r<i.length;r++){var s=i[r],o=n.createElement("style");o.textContent=s,n.body.appendChild(o);var a=o.sheet;if(a instanceof CSSStyleSheet){for(var l=a.cssRules.length-1;l>=0;l--){var u=a.cssRules[l];if(u instanceof CSSStyleRule){var c=u;if(c.selectorText.indexOf(",")>=0){a.deleteRule(l);for(var h=c.cssText.substring(c.selectorText.length),f=t.splitSelectorAtCommas(c.selectorText),d=0;d<f.length;d++)a.insertRule(f[d]+h,l+d)}}else a.deleteRule(l)}this.styleSheets.push(a)}}},t.splitSelectorAtCommas=function(e){for(var n,r=/,|["']/g,i=/[^\\]["]/g,s=/[^\\][']/g,o=[],a="initial",l=-1,u=i,c=0;c<e.length;)switch(a){case"initial":r.lastIndex=c,(n=r.exec(e))?(n[0]===","?(o.push(e.substring(l+1,r.lastIndex-1).trim()),l=r.lastIndex-1):(a="withinQuotes",u=n[0]==='"'?i:s),c=r.lastIndex):(o.push(e.substring(l+1).trim()),c=e.length);break;case"withinQuotes":u.lastIndex=c,(n=u.exec(e))&&(c=u.lastIndex,a="initial")}return o},t.loadSheet=function(e){return new Promise(function(n,r){var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="text",i.onload=function(){i.status!==200&&r(new Error("Error ".concat(i.status,": Failed to load '").concat(e,"'"))),n(i.responseText)},i.onerror=r,i.onabort=r,i.send(null)}).catch(function(){return null})},t.prototype.getPropertyValue=function(e,n){for(var r=[],i=0,s=this.styleSheets;i<s.length;i++)for(var o=s[i],a=0;a<o.cssRules.length;a++){var l=o.cssRules[a];l.style.getPropertyValue(n)&&e.matches(l.selectorText)&&r.push(l)}if(r.length!==0)return r.reduce(function(u,c){return f=c,((d=(h=u).style.getPropertyPriority(n))!==f.style.getPropertyPriority(n)?d==="important"?1:-1:Mj(h.selectorText,f.selectorText))===1?u:c;var h,f,d}).style.getPropertyValue(n)||void 0},t}(),Yj=function(){function t(){this.measureMethods={}}return t.prototype.getTextOffset=function(e,n){var r=n.textAnchor;if(r==="start")return 0;var i=this.measureTextWidth(e,n),s=0;switch(r){case"end":s=i;break;case"middle":s=i/2}return s},t.prototype.measureTextWidth=function(e,n){if(e.length===0)return 0;var r=n.fontFamily;return this.getMeasureFunction(r).call(this,e,n.fontFamily,n.fontSize+"px",n.fontStyle,n.fontWeight)},t.prototype.getMeasurementTextNode=function(){if(!this.textMeasuringTextElement){this.textMeasuringTextElement=document.createElementNS(bC,"text");var e=document.createElementNS(bC,"svg");e.appendChild(this.textMeasuringTextElement),e.style.setProperty("position","absolute"),e.style.setProperty("visibility","hidden"),document.body.appendChild(e)}return this.textMeasuringTextElement},t.prototype.canvasTextMeasure=function(e,n,r,i,s){var o=document.createElement("canvas").getContext("2d");return o!=null?(o.font=[i,s,r,n].join(" "),o.measureText(e).width):0},t.prototype.svgTextMeasure=function(e,n,r,i,s,o){o===void 0&&(o=this.getMeasurementTextNode());var a=o;return a.setAttribute("font-family",n),a.setAttribute("font-size",r),a.setAttribute("font-style",i),a.setAttribute("font-weight",s),a.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),a.textContent=e,a.getBBox().width},t.prototype.getMeasureFunction=function(e){var n=this.measureMethods[e];if(!n){var r="16px",i="normal",s="normal",o=this.canvasTextMeasure(t.testString,e,r,i,s),a=this.svgTextMeasure(t.testString,e,r,i,s);n=Math.abs(o-a)<t.epsilon?this.canvasTextMeasure:this.svgTextMeasure,this.measureMethods[e]=n}return n},t.prototype.cleanupTextMeasuring=function(){if(this.textMeasuringTextElement){var e=this.textMeasuringTextElement.parentNode;e&&document.body.removeChild(e),this.textMeasuringTextElement=void 0}},t.testString=`abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789!"$%&/()=?'\\+*-_.:,;^}][{#~|<>`,t.epsilon=.1,t}();function Zj(t,e){return Or(this,arguments,void 0,function(n,r,i){var s,o,a,l,u,c,h,f,d,v,x,w,g,S;return i===void 0&&(i={}),Ur(this,function(_){switch(_.label){case 0:return s=(w=i.x)!==null&&w!==void 0?w:0,o=(g=i.y)!==null&&g!==void 0?g:0,a=(S=i.loadExternalStyleSheets)!==null&&S!==void 0&&S,u=new qI(l={}),[4,(c=new qj(n,a)).load()];case 1:return _.sent(),h=new Fx(r.internal.pageSize.getWidth(),r.internal.pageSize.getHeight()),f=M2(M2({},i),{element:n}),d=new Yj,v=new Xh(r,{refsHandler:u,styleSheets:c,viewport:h,svg2pdfParameters:f,textMeasure:d}),r.advancedAPI(),r.saveGraphicsState(),r.setCurrentTransformationMatrix(r.Matrix(1,0,0,1,s,o)),r.setLineWidth(v.attributeState.strokeWidth),x=v.attributeState.fill.color,r.setFillColor(x.r,x.g,x.b),r.setFont(v.attributeState.fontFamily),r.setFontSize(v.attributeState.fontSize*r.internal.scaleFactor),[4,M3(n,l).render(v)];case 2:return _.sent(),r.restoreGraphicsState(),r.compatAPI(),v.textMeasure.cleanupTextMeasuring(),[2,r]}})})}wn.API.svg=function(t,e){return e===void 0&&(e={}),Zj(t,this,e)};function rh({path:t,stroke:e,strokeWidth:n,strokeDasharray:r,onClick:i,viewId:s}){if(!t)return null;const o=t.data||(typeof t=="string"?t:String(t)),a=t.id;return Me("path",{id:a,d:o,stroke:e,strokeWidth:n,fill:"none",strokeDasharray:r,style:{vectorEffect:"non-scaling-stroke",cursor:"pointer"},onClick:()=>i&&i(a,t)})}const Pf={sub:(t,e)=>[t[0]-e[0],t[1]-e[1]],add:(t,e)=>[t[0]+e[0],t[1]+e[1]],scale:(t,e)=>[t[0]*e,t[1]*e],len:t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),normalize:t=>{const e=Pf.len(t);return e>1e-9?Pf.scale(t,1/e):[0,0]},perp:t=>[-t[1],t[0]],dot:(t,e)=>t[0]*e[0]+t[1]*e[1]};function Vy({measurementData:t,svgRef:e,onUpdatePosition:n}){const{pathId:r,type:i,geometry:s,textPosition:o,viewId:a}=t,[l,u]=Be.useState(!1),[c,h]=Be.useState({x:0,y:0}),[f,d]=Be.useState({x:0,y:0}),v=B=>{e!=null&&e.current&&(B.stopPropagation(),u(!0),h({x:B.clientX,y:B.clientY}),d(o),window.addEventListener("mousemove",x),window.addEventListener("mouseup",w))},x=B=>{if(!l||!(e!=null&&e.current))return;const V=B.clientX-c.x,H=B.clientY-c.y,ee=e.current.getScreenCTM();if(!ee)return;const se=V/ee.a,ce=H/ee.d,W={x:f.x+se,y:f.y+ce};n(r,W)},w=()=>{l&&(u(!1),window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",w))},g=B=>{if(!(e!=null&&e.current)||B.touches.length!==1)return;B.stopPropagation();const V=B.touches[0];u(!0),h({x:V.clientX,y:V.clientY}),d(o),window.addEventListener("touchmove",S,{passive:!1}),window.addEventListener("touchend",_),window.addEventListener("touchcancel",_)},S=B=>{if(!l||!(e!=null&&e.current)||B.touches.length!==1)return;B.preventDefault();const V=B.touches[0],H=V.clientX-c.x,ee=V.clientY-c.y,se=e.current.getScreenCTM();if(!se)return;const ce=H/se.a,W=ee/se.d,Y={x:f.x+ce,y:f.y+W};n(r,Y)},_=()=>{l&&(u(!1),window.removeEventListener("touchmove",S),window.removeEventListener("touchend",_),window.removeEventListener("touchcancel",_))},T="#222222",L=.15,k=2.2,N=1.2,R=1.2,P=.8,D=1.2;let O=null;if(i==="line"&&s.endpoints){const[B,V]=s.endpoints,ee=(s.length||0).toFixed(2),se=V[0]-B[0],ce=V[1]-B[1],W=(B[0]+V[0])/2,Y=(B[1]+V[1])/2,j=Math.sqrt(se*se+ce*ce),re=j>1e-6?se/j:1,I=j>1e-6?ce/j:0,X=-I,J=re,ae=o.x-W,fe=o.y-Y,Se=ae*X+fe*J,Ee=Math.abs(Se)<R?Math.sign(Se||1)*R:Se,Ce=[B[0]+X*Ee,B[1]+J*Ee],$e=[V[0]+X*Ee,V[1]+J*Ee],ke=[B[0]+X*Math.sign(Ee)*P,B[1]+J*Math.sign(Ee)*P],he=[V[0]+X*Math.sign(Ee)*P,V[1]+J*Math.sign(Ee)*P],De=[Ce[0]+X*Math.sign(Ee)*D,Ce[1]+J*Math.sign(Ee)*D],ze=[$e[0]+X*Math.sign(Ee)*D,$e[1]+J*Math.sign(Ee)*D],pe=j,K=re,tt=I,Ze=`M ${Ce[0]} ${Ce[1]} 
                    l ${K*N} ${tt*N} 
                    l ${-tt*N*.35} ${K*N*.35} 
                    l ${-K*N*.65} ${-tt*N*.65} 
                    z`,Ne=`M ${$e[0]} ${$e[1]} 
                    l ${-K*N} ${-tt*N} 
                    l ${tt*N*.35} ${-K*N*.35} 
                    l ${K*N*.65} ${tt*N*.65} 
                    z`,vt=(ee.length*k*.65+R*2)/2,ue=(o.x-Ce[0])*K+(o.y-Ce[1])*tt,Q=Math.max(N,ue-vt),Pe=Math.min(pe-N,ue+vt),et=[Ce[0]+K*Q,Ce[1]+tt*Q],Qe=[Ce[0]+K*Pe,Ce[1]+tt*Pe],dt=Q>N+1e-6,lt=Pe<pe-N-1e-6;O=Tt("g",{children:[Me("line",{x1:ke[0],y1:ke[1],x2:De[0],y2:De[1],stroke:T,strokeWidth:L,style:{vectorEffect:"non-scaling-stroke"}}),Me("line",{x1:he[0],y1:he[1],x2:ze[0],y2:ze[1],stroke:T,strokeWidth:L,style:{vectorEffect:"non-scaling-stroke"}}),dt&&Me("line",{x1:Ce[0],y1:Ce[1],x2:et[0],y2:et[1],stroke:T,strokeWidth:L,style:{vectorEffect:"non-scaling-stroke"}}),lt&&Me("line",{x1:Qe[0],y1:Qe[1],x2:$e[0],y2:$e[1],stroke:T,strokeWidth:L,style:{vectorEffect:"non-scaling-stroke"}}),Me("path",{d:Ze,fill:T,stroke:"none",style:{vectorEffect:"non-scaling-stroke"}}),Me("path",{d:Ne,fill:T,stroke:"none",style:{vectorEffect:"non-scaling-stroke"}}),Tt("g",{children:[Me("rect",{x:o.x-ee.length*k*.3,y:o.y-k*.7,width:ee.length*k*.6,height:k*1.4,fill:"white",fillOpacity:"0.8",rx:k*.2,ry:k*.2,style:{vectorEffect:"non-scaling-stroke"}}),Me("text",{x:o.x,y:o.y,fontSize:k,fill:T,stroke:"none",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"Arial, sans-serif",style:{cursor:"move",userSelect:"none",vectorEffect:"non-scaling-stroke"},onMouseDown:v,onTouchStart:g,children:ee})]})]})}else if(i==="circle"&&s.center&&s.diameter!=null){const[B,V]=s.center,H=s.diameter,ee=s.radius||H/2,se=`${H.toFixed(2)}`,ce=se.length*k*.65,W=ee*2<ce*1.5,Y=o.x-B,j=o.y-V,re=Y*Y+j*j,I=Math.sqrt(re);let X;re<1e-9?X=0:X=Math.atan2(j,Y);const J=Math.cos(X),ae=Math.sin(X);if(W){const fe=ee+R*3;let Se=Math.max(I,fe);I<fe&&(Se=fe);const Ee=[B,V],Ce=[B+J*Se*.9,V+ae*Se*.9],$e={x:B+J*Se,y:V+ae*Se},ke=Math.min(ee*.5,1);O=Tt("g",{children:[Me("line",{x1:B-ke,y1:V,x2:B+ke,y2:V,stroke:T,strokeWidth:L,style:{vectorEffect:"non-scaling-stroke"}}),Me("line",{x1:B,y1:V-ke,x2:B,y2:V+ke,stroke:T,strokeWidth:L,style:{vectorEffect:"non-scaling-stroke"}}),Me("line",{x1:Ee[0],y1:Ee[1],x2:Ce[0],y2:Ce[1],stroke:T,strokeWidth:L,style:{vectorEffect:"non-scaling-stroke"}}),Tt("g",{transform:`translate(${$e.x-o.x}, ${$e.y-o.y})`,children:[Me("rect",{x:o.x-se.length*k*.3,y:o.y-k*.7,width:se.length*k*.6,height:k*1.4,fill:"white",fillOpacity:"0.9",rx:k*.2,ry:k*.2,style:{vectorEffect:"non-scaling-stroke"}}),Me("text",{x:o.x,y:o.y,fontSize:k,fill:T,stroke:"none",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"Arial, sans-serif",style:{cursor:"move",userSelect:"none",vectorEffect:"non-scaling-stroke"},onMouseDown:v,onTouchStart:g,children:se})]})]})}else{const fe=[B-J*ee,V-ae*ee],Se=[B+J*ee,V+ae*ee],Ee=`M ${fe[0]} ${fe[1]} 
                      l ${J*N} ${ae*N} 
                      l ${-ae*N*.35} ${J*N*.35} 
                      l ${-J*N*.65} ${-ae*N*.65} 
                      z`,Ce=`M ${Se[0]} ${Se[1]} 
                      l ${-J*N} ${-ae*N} 
                      l ${ae*N*.35} ${-J*N*.35} 
                      l ${J*N*.65} ${ae*N*.65} 
                      z`,ke=(ce+R*2)/2,he=Pf.dot([Y,j],[J,ae]),De=-ee+N,ze=ee-N,pe=Math.max(De,Math.min(ze,he-ke)),K=Math.max(De,Math.min(ze,he+ke)),tt=[B+J*pe,V+ae*pe],Ze=[B+J*K,V+ae*K],Ne=Pf.len(Pf.sub(tt,fe))>1e-6,Ke=Pf.len(Pf.sub(Se,Ze))>1e-6;O=Tt("g",{children:[Ne&&Me("line",{x1:fe[0],y1:fe[1],x2:tt[0],y2:tt[1],stroke:T,strokeWidth:L,style:{vectorEffect:"non-scaling-stroke"}}),Ke&&Me("line",{x1:Ze[0],y1:Ze[1],x2:Se[0],y2:Se[1],stroke:T,strokeWidth:L,style:{vectorEffect:"non-scaling-stroke"}}),Me("path",{d:Ee,fill:T,stroke:"none",style:{vectorEffect:"non-scaling-stroke"}}),Me("path",{d:Ce,fill:T,stroke:"none",style:{vectorEffect:"non-scaling-stroke"}}),Tt("g",{children:[Me("rect",{x:o.x-se.length*k*.3,y:o.y-k*.7,width:se.length*k*.6,height:k*1.4,fill:"white",fillOpacity:"0.9",rx:k*.2,ry:k*.2,style:{vectorEffect:"non-scaling-stroke"}}),Me("text",{x:o.x,y:o.y,fontSize:k,fill:T,stroke:"none",textAnchor:"middle",dominantBaseline:"middle",fontFamily:"Arial, sans-serif",style:{cursor:"move",userSelect:"none",vectorEffect:"non-scaling-stroke"},onMouseDown:v,onTouchStart:g,children:se})]})]})}}return O}function OS({projection:t,title:e,position:n,dimensions:r,onPathClick:i,viewId:s,activeMeasurements:o,onMeasurementUpdate:a}){var v,x;if(!t)return null;const l=Be.useRef(null),{width:u,height:c}=r,[h,f]=n,d=25;return Tt("div",{style:{position:"absolute",left:`${h}px`,top:`${f}px`,width:`${u}px`,height:`${c}px`,border:"1px solid #aaa",backgroundColor:"#f8f8f8",overflow:"hidden"},children:[Me("div",{style:{padding:"5px",height:`${d}px`,borderBottom:"1px solid #ddd",backgroundColor:"#eee",fontSize:"12px",fontWeight:"bold",boxSizing:"border-box"},children:e}),Me("div",{style:{width:"100%",height:`calc(100% - ${d}px)`,position:"relative"},children:Tt("svg",{ref:l,viewBox:t.combinedViewBox,style:{width:"100%",height:"100%"},preserveAspectRatio:"xMidYMid meet",children:[Me("g",{children:(((v=t.hidden)==null?void 0:v.paths)||[]).map((w,g)=>Me(rh,{path:w,stroke:"#777777",strokeWidth:"0.3",strokeDasharray:"2,1",onClick:i,viewId:s},`${s}_hidden_${w.id||g}`))}),Me("g",{children:(((x=t.visible)==null?void 0:x.paths)||[]).map((w,g)=>Me(rh,{path:w,stroke:"#000000",strokeWidth:"0.5",strokeDasharray:null,onClick:i,viewId:s},`${s}_visible_${w.id||g}`))}),Me("g",{children:Object.values(o).filter(w=>w.viewId===s).map(w=>{var N,R,P,D;const g=w.pathId.split("_"),S=g[g.length-3],_=g.slice(g.length-2).join("_");let T=null;const L=S==="visible"?(N=t.visible)==null?void 0:N.paths:(R=t.hidden)==null?void 0:R.paths;if(L&&(T=L.find(O=>{const B=`${O.id||""}`.split("_");return B.slice(B.length-2).join("_")===_||`${O.id}`===_}),!T)){const O=g[g.length-1],B=parseInt(O,10);!isNaN(B)&&B>=0&&B<L.length&&((D=(P=L[B])==null?void 0:P.geometry)==null?void 0:D.type)===w.type&&(T=L[B])}if(!T||!T.geometry)return console.warn(`Could not find current geometry for measurement: ${w.pathId}`),null;const k={...w,geometry:T.geometry};return Me(Vy,{measurementData:k,svgRef:l,onUpdatePosition:a},w.pathId)})})]})})]})}function Ks(t){if(!t||typeof t!="string")return null;const e=t.split(/[\s,]+/).map(parseFloat);if(e.length!==4||e.some(isNaN))return console.warn("Could not parse viewBox string:",t),null;const n=Math.max(0,e[2]),r=Math.max(0,e[3]);return{x:e[0],y:e[1],width:n,height:r}}function $j({part:t,index:e,scale:n,onPathClick:r,activeMeasurements:i,onMeasurementUpdate:s}){var V,H,ee,se,ce,W;if(!t||!t.views)return null;const o=Be.useRef(null),a=Be.useRef(null),l=Be.useRef(null),u=20,c=20,h=t.views.front,f=t.views.top,d=t.views.right,v=t.name.replace(/\s+/g,"_"),x=`${v}_front`,w=`${v}_top`,g=`${v}_right`;let S,_,T,L=0,k=0,N=0,R=0,P=0,D=0;h&&(S=Ks(h.combinedViewBox),L=S?S.width*n:0,k=S?S.height*n:0),f&&(_=Ks(f.combinedViewBox),N=_?_.width*n:0,R=_?_.height*n:0),d&&(T=Ks(d.combinedViewBox),P=T?T.width*n:0,D=T?T.height*n:0);const O=Math.max(L+P+c,N),B=k+R+c;return Tt("div",{style:{margin:"10px",border:"1px solid #ccc",backgroundColor:"white",display:"inline-block",width:`${O+20}px`},children:[Me("h4",{style:{padding:"5px",margin:0,backgroundColor:"#eee"},children:t.name}),Tt("div",{style:{padding:"10px",position:"relative",height:`${B+20}px`},children:[h&&S&&Tt("div",{style:{position:"absolute",top:"0",left:"0",width:`${L}px`,height:`${k+u}px`,border:"1px solid #ddd",display:"flex",flexDirection:"column"},children:[Me("div",{style:{padding:"3px",height:`${u}px`,borderBottom:"1px solid #ddd",fontSize:"10px",boxSizing:"border-box",flexShrink:0},children:"Front"}),Me("div",{style:{width:"100%",flexGrow:1,position:"relative"},children:Tt("svg",{ref:o,viewBox:h.combinedViewBox,style:{width:"100%",height:"100%"},preserveAspectRatio:"xMidYMid meet",children:[Me("g",{children:(((V=h.hidden)==null?void 0:V.paths)||[]).map((Y,j)=>Me(rh,{path:Y,stroke:"#777777",strokeWidth:"0.3",strokeDasharray:"2,1",onClick:r,viewId:x},`${x}_hidden_${Y.id||j}`))}),Me("g",{children:(((H=h.visible)==null?void 0:H.paths)||[]).map((Y,j)=>Me(rh,{path:Y,stroke:"#000000",strokeWidth:"0.5",strokeDasharray:null,onClick:r,viewId:x},`${x}_visible_${Y.id||j}`))}),Me("g",{children:Object.values(i).filter(Y=>Y.viewId===x).map(Y=>{var fe,Se,Ee,Ce;const j=Y.pathId.split("_"),re=j[j.length-3],I=j.slice(j.length-2).join("_");let X=null;const J=re==="visible"?(fe=h==null?void 0:h.visible)==null?void 0:fe.paths:(Se=h==null?void 0:h.hidden)==null?void 0:Se.paths;if(J&&(X=J.find($e=>{const ke=`${$e.id||""}`.split("_");return ke.slice(ke.length-2).join("_")===I||`${$e.id}`===I}),!X)){const $e=j[j.length-1],ke=parseInt($e,10);!isNaN(ke)&&ke>=0&&ke<J.length&&((Ce=(Ee=J[ke])==null?void 0:Ee.geometry)==null?void 0:Ce.type)===Y.type&&(X=J[ke])}if(!X||!X.geometry)return console.warn(`PartView(Front): Could not find current geometry for measurement: ${Y.pathId}`),null;const ae={...Y,geometry:X.geometry};return Me(Vy,{measurementData:ae,svgRef:o,onUpdatePosition:s},Y.pathId)})})]})})]}),f&&_&&Tt("div",{style:{position:"absolute",top:`${k+u+c}px`,left:`${(L-N)/2}px`,width:`${N}px`,height:`${R+u}px`,border:"1px solid #ddd",display:"flex",flexDirection:"column"},children:[Me("div",{style:{padding:"3px",height:`${u}px`,borderBottom:"1px solid #ddd",fontSize:"10px",boxSizing:"border-box",flexShrink:0},children:"Top"}),Me("div",{style:{width:"100%",flexGrow:1,position:"relative"},children:Tt("svg",{ref:a,viewBox:f.combinedViewBox,style:{width:"100%",height:"100%"},preserveAspectRatio:"xMidYMid meet",children:[Me("g",{children:(((ee=f.hidden)==null?void 0:ee.paths)||[]).map((Y,j)=>Me(rh,{path:Y,stroke:"#777777",strokeWidth:"0.3",strokeDasharray:"2,1",onClick:r,viewId:w},`${w}_hidden_${Y.id||j}`))}),Me("g",{children:(((se=f.visible)==null?void 0:se.paths)||[]).map((Y,j)=>Me(rh,{path:Y,stroke:"#000000",strokeWidth:"0.5",strokeDasharray:null,onClick:r,viewId:w},`${w}_visible_${Y.id||j}`))}),Me("g",{children:Object.values(i).filter(Y=>Y.viewId===w).map(Y=>{var fe,Se,Ee,Ce;const j=Y.pathId.split("_"),re=j[j.length-3],I=j.slice(j.length-2).join("_");let X=null;const J=re==="visible"?(fe=f==null?void 0:f.visible)==null?void 0:fe.paths:(Se=f==null?void 0:f.hidden)==null?void 0:Se.paths;if(J&&(X=J.find($e=>{const ke=`${$e.id||""}`.split("_");return ke.slice(ke.length-2).join("_")===I||`${$e.id}`===I}),!X)){const $e=j[j.length-1],ke=parseInt($e,10);!isNaN(ke)&&ke>=0&&ke<J.length&&((Ce=(Ee=J[ke])==null?void 0:Ee.geometry)==null?void 0:Ce.type)===Y.type&&(X=J[ke])}if(!X||!X.geometry)return console.warn(`PartView(Top): Could not find current geometry for measurement: ${Y.pathId}`),null;const ae={...Y,geometry:X.geometry};return Me(Vy,{measurementData:ae,svgRef:a,onUpdatePosition:s},Y.pathId)})})]})})]}),d&&T&&Tt("div",{style:{position:"absolute",top:`${(k-D)/2}px`,left:`${L+c}px`,width:`${P}px`,height:`${D+u}px`,border:"1px solid #ddd",display:"flex",flexDirection:"column"},children:[Me("div",{style:{padding:"3px",height:`${u}px`,borderBottom:"1px solid #ddd",fontSize:"10px",boxSizing:"border-box",flexShrink:0},children:"Right"}),Me("div",{style:{width:"100%",flexGrow:1,position:"relative"},children:Tt("svg",{ref:l,viewBox:d.combinedViewBox,style:{width:"100%",height:"100%"},preserveAspectRatio:"xMidYMid meet",children:[Me("g",{children:(((ce=d.hidden)==null?void 0:ce.paths)||[]).map((Y,j)=>Me(rh,{path:Y,stroke:"#777777",strokeWidth:"0.3",strokeDasharray:"2,1",onClick:r,viewId:g},`${g}_hidden_${Y.id||j}`))}),Me("g",{children:(((W=d.visible)==null?void 0:W.paths)||[]).map((Y,j)=>Me(rh,{path:Y,stroke:"#000000",strokeWidth:"0.5",strokeDasharray:null,onClick:r,viewId:g},`${g}_visible_${Y.id||j}`))}),Me("g",{children:Object.values(i).filter(Y=>Y.viewId===g).map(Y=>{var fe,Se,Ee,Ce;const j=Y.pathId.split("_"),re=j[j.length-3],I=j.slice(j.length-2).join("_");let X=null;const J=re==="visible"?(fe=d==null?void 0:d.visible)==null?void 0:fe.paths:(Se=d==null?void 0:d.hidden)==null?void 0:Se.paths;if(J&&(X=J.find($e=>{const ke=`${$e.id||""}`.split("_");return ke.slice(ke.length-2).join("_")===I||`${$e.id}`===I}),!X)){const $e=j[j.length-1],ke=parseInt($e,10);!isNaN(ke)&&ke>=0&&ke<J.length&&((Ce=(Ee=J[ke])==null?void 0:Ee.geometry)==null?void 0:Ce.type)===Y.type&&(X=J[ke])}if(!X||!X.geometry)return console.warn(`PartView(Right): Could not find current geometry for measurement: ${Y.pathId}`),null;const ae={...Y,geometry:X.geometry};return Me(Vy,{measurementData:ae,svgRef:l,onUpdatePosition:s},Y.pathId)})})]})})]})]})]},e)}function Kj({isMobile:t,zoomLevel:e,scale:n,containerSize:r,panOffset:i,onZoomChange:s,onPanChange:o,onScaleChange:a,onResetView:l,onExportPDF:u}){const c=h=>{const f=Math.max(.1,Math.min(10,e+h*e)),d=r.width/2,v=r.height/2,x=(d-i.x)/e,w=(v-i.y)/e,g=d-x*f,S=v-w*f;s(f),o({x:g,y:S})};return Tt("div",{style:{position:"absolute",top:t?"8px":"10px",right:t?"8px":"10px",zIndex:100,backgroundColor:"rgba(255,255,255,0.8)",padding:t?"8px":"5px 10px",borderRadius:"4px",display:"flex",flexDirection:"column",gap:t?"8px":"5px"},children:[Tt("div",{style:{display:"flex",alignItems:"center"},children:[Me("button",{title:"Zoom Out",style:{margin:"0 2px",padding:t?"5px 10px":"2px 6px",cursor:"pointer",fontSize:t?"16px":"inherit"},onClick:()=>c(-.1),children:""}),Tt("span",{style:{margin:"0 5px",fontSize:t?"14px":"12px",minWidth:"35px",textAlign:"center"},children:[Math.round(e*100),"%"]}),Me("button",{title:"Zoom In",style:{margin:"0 2px",padding:t?"5px 10px":"2px 6px",cursor:"pointer",fontSize:t?"16px":"inherit"},onClick:()=>c(.1),children:"+"}),Me("button",{title:"Reset View",style:{margin:"0 0 0 10px",padding:t?"5px 10px":"2px 8px",cursor:"pointer",fontSize:t?"14px":"inherit"},onClick:l,children:"Reset"})]}),Tt("div",{style:{display:"flex",alignItems:"center"},children:[Me("label",{htmlFor:"scaleSlider",style:{fontSize:t?"12px":"10px",marginRight:"5px"},children:"Scale:"}),Me("input",{type:"range",id:"scaleSlider",min:"1",max:"100",step:"1",value:n,onChange:h=>a(Number(h.target.value)),style:{cursor:"pointer",width:"80px"},title:`Scale: ${n} px/cm`}),Tt("span",{style:{margin:"0 5px",fontSize:t?"12px":"10px",minWidth:"45px",textAlign:"right"},children:[n," px/cm"]})]}),Me("button",{title:"Export as PDF",style:{marginTop:"5px",padding:t?"5px 10px":"2px 8px",cursor:"pointer",fontSize:t?"14px":"inherit"},onClick:u,children:"Export PDF"})]})}const Jj=(t,e)=>{const{pathId:n,type:r,textPosition:i}=t,s=document.createElementNS("http://www.w3.org/2000/svg","g"),o="#222222",a=.08,l=2.2,u=1.2,c=1.2,h=.8,f=1.2,d=(v,x)=>{const w=document.createElementNS("http://www.w3.org/2000/svg",v);for(const g in x)w.setAttribute(g,x[g]);return w};if(r==="line"&&(e!=null&&e.endpoints)){const[v,x]=e.endpoints,g=(e.length||0).toFixed(2),S=x[0]-v[0],_=x[1]-v[1],T=(v[0]+x[0])/2,L=(v[1]+x[1])/2,k=Math.sqrt(S*S+_*_),N=k>1e-6?S/k:1,R=k>1e-6?_/k:0,P=-R,D=N,O=i.x-T,B=i.y-L,V=O*P+B*D,H=Math.abs(V)<c?Math.sign(V||1)*c:V,ee=[v[0]+P*H,v[1]+D*H],se=[x[0]+P*H,x[1]+D*H],ce=[v[0]+P*Math.sign(H)*h,v[1]+D*Math.sign(H)*h],W=[x[0]+P*Math.sign(H)*h,x[1]+D*Math.sign(H)*h],Y=[ee[0]+P*Math.sign(H)*f,ee[1]+D*Math.sign(H)*f],j=[se[0]+P*Math.sign(H)*f,se[1]+D*Math.sign(H)*f],re=N,I=R,X=`M ${ee[0]} ${ee[1]} l ${re*u} ${I*u} l ${-I*u*.35} ${re*u*.35} l ${-re*u*.65} ${-I*u*.65} z`,J=`M ${se[0]} ${se[1]} l ${-re*u} ${-I*u} l ${I*u*.35} ${-re*u*.35} l ${re*u*.65} ${I*u*.65} z`,Se=(g.length*l*.65+c*2)/2,Ee=(i.x-ee[0])*re+(i.y-ee[1])*I,Ce=Math.max(u,Ee-Se),$e=Math.min(k-u,Ee+Se),ke=[ee[0]+re*Ce,ee[1]+I*Ce],he=[ee[0]+re*$e,ee[1]+I*$e],De=Ce>u+1e-6,ze=$e<k-u-1e-6;s.appendChild(d("line",{x1:ce[0],y1:ce[1],x2:Y[0],y2:Y[1],stroke:o,"stroke-width":a,"stroke-linecap":"round","stroke-linejoin":"round"})),s.appendChild(d("line",{x1:W[0],y1:W[1],x2:j[0],y2:j[1],stroke:o,"stroke-width":a,"stroke-linecap":"round","stroke-linejoin":"round"})),De&&s.appendChild(d("line",{x1:ee[0],y1:ee[1],x2:ke[0],y2:ke[1],stroke:o,"stroke-width":a,"stroke-linecap":"round","stroke-linejoin":"round"})),ze&&s.appendChild(d("line",{x1:he[0],y1:he[1],x2:se[0],y2:se[1],stroke:o,"stroke-width":a,"stroke-linecap":"round","stroke-linejoin":"round"})),s.appendChild(d("path",{d:X,fill:o,stroke:"none"})),s.appendChild(d("path",{d:J,fill:o,stroke:"none"}));const pe=d("text",{x:i.x,y:i.y,"font-size":l,fill:o,stroke:"none","text-anchor":"middle","dominant-baseline":"middle","font-family":"Arial, sans-serif"});pe.textContent=g,s.appendChild(pe)}else if(r==="circle"&&(e!=null&&e.center)&&e.diameter!=null){const[v,x]=e.center,w=e.diameter,g=e.radius||w/2,S=`${w.toFixed(2)}`,_=i.x-v,T=i.y-x;let k=_*_+T*T<1e-9?0:Math.atan2(T,_);const N=Math.cos(k),R=Math.sin(k),P=[v+N*g,x+R*g],D=[i.x-N*c,i.y-R*c];s.appendChild(d("line",{x1:P[0],y1:P[1],x2:D[0],y2:D[1],stroke:o,"stroke-width":a,"stroke-linecap":"round","stroke-linejoin":"round"}));const O=d("text",{x:i.x,y:i.y,"font-size":l,fill:o,stroke:"none","text-anchor":"middle","dominant-baseline":"middle","font-family":"Arial, sans-serif"});O.textContent=S,s.appendChild(O)}return s};function Qj({projections:t,isMobile:e}){if(!t)return Me("div",{children:"Loading projections..."});const n=Be.useRef(null),r=Be.useRef(null),[i,s]=Be.useState({width:800,height:600}),[o,a]=Be.useState(1),[l,u]=Be.useState({x:0,y:0}),[c,h]=Be.useState(10),[f,d]=Be.useState({}),[v,x]=Be.useState(!1),[w,g]=Be.useState({x:0,y:0}),[S,_]=Be.useState({x:0,y:0}),T=(pe,K,tt,Ze,Ne,Ke)=>{var Fe,Ge;if(!K||!Ne||!K.combinedViewBox){console.warn(`Skipping render for view ${Ke||tt} due to missing data.`);return}const[ft,vt]=Ze,{width:ue,height:Q}=Ne,Pe=Ks(K.combinedViewBox);if(!Pe||Pe.width<=0||Pe.height<=0){console.warn(`Skipping render for view ${Ke||tt} due to invalid viewBox: ${K.combinedViewBox}`);return}const et=document.createElementNS("http://www.w3.org/2000/svg","g");et.setAttribute("transform",`translate(${ft}, ${vt})`),pe.appendChild(et);const Qe=5,dt=3,lt=document.createElementNS("http://www.w3.org/2000/svg","text");lt.setAttribute("x",ue/2),lt.setAttribute("y",Qe/2),lt.setAttribute("font-size",dt),lt.setAttribute("font-family","Arial, sans-serif"),lt.setAttribute("text-anchor","middle"),lt.setAttribute("dominant-baseline","middle"),lt.setAttribute("fill","#333333"),lt.textContent=tt,et.appendChild(lt);const it=ue/Pe.width,Te=Q/Pe.height,Nt=Math.min(it,Te),At=Pe.width*Nt,Ct=Pe.height*Nt,bt=(ue-At)/2-Pe.x*Nt,xe=(Q-Ct)/2-Pe.y*Nt,Ye=document.createElementNS("http://www.w3.org/2000/svg","g");Ye.setAttribute("transform",`translate(0, ${Qe}) translate(${bt}, ${xe}) scale(${Nt})`),et.appendChild(Ye);const st=document.createElementNS("http://www.w3.org/2000/svg","rect");st.setAttribute("x",0),st.setAttribute("y",Qe),st.setAttribute("width",ue),st.setAttribute("height",Q),st.setAttribute("fill","none"),st.setAttribute("stroke","#cccccc"),st.setAttribute("stroke-width",.2),et.appendChild(st);const Ae=Nt>0?1/Nt:1;(((Fe=K.hidden)==null?void 0:Fe.paths)||[]).forEach(yt=>{const pt=document.createElementNS("http://www.w3.org/2000/svg","path");pt.setAttribute("d",yt.data),pt.setAttribute("stroke","#777777"),pt.setAttribute("stroke-width",.1),pt.setAttribute("stroke-linecap","round"),pt.setAttribute("stroke-linejoin","round"),pt.setAttribute("stroke-dasharray",`${2*Ae},${1*Ae}`),pt.setAttribute("fill","none"),pt.setAttribute("vector-effect","non-scaling-stroke"),Ye.appendChild(pt)}),(((Ge=K.visible)==null?void 0:Ge.paths)||[]).forEach(yt=>{const pt=document.createElementNS("http://www.w3.org/2000/svg","path");pt.setAttribute("d",yt.data),pt.setAttribute("stroke","#000000"),pt.setAttribute("stroke-width",.15),pt.setAttribute("stroke-linecap","round"),pt.setAttribute("stroke-linejoin","round"),pt.setAttribute("fill","none"),pt.setAttribute("vector-effect","non-scaling-stroke"),Ye.appendChild(pt)}),Object.values(f).filter(yt=>yt.viewId===Ke).forEach(yt=>{var gn,kn;const pt=yt.pathId.split("_"),kt=pt[pt.length-3],Vt=pt.slice(pt.length-2).join("_");let yn=null;const Nn=kt==="visible"?(gn=K.visible)==null?void 0:gn.paths:(kn=K.hidden)==null?void 0:kn.paths;if(Nn&&(yn=Nn.find(Ft=>{const Vr=`${Ft.id||""}`.split("_");return Vr.slice(Vr.length-2).join("_")===Vt||`${Ft.id}`.endsWith(`_${Vt}`)})),yn!=null&&yn.geometry){const Ft=Jj(yt,yn.geometry);Ye.appendChild(Ft)}else console.warn(`PDF Export (View: ${Ke}): Could not find geometry for measurement ${yt.pathId}`)})},L=Be.useCallback(async()=>{var ue,Q,Pe,et,Qe,dt;if(console.log("Starting PDF Export..."),!t||!t.standard&&(!t.parts||t.parts.length===0)){console.error("No projection data available for PDF export."),alert("No drawing data found to export.");return}const pe=1,K=10,tt=10,Ze=8,Ne=5,Ke=4;let ft,vt="technical-drawing.pdf";try{if(t.standard){console.log("Exporting Standard Views (Single Page)..."),vt="technical-drawing-standard.pdf";const lt=t.standard,it=lt.frontView,Te=lt.topView,Nt=lt.rightView;if(!it&&!Te&&!Nt)throw new Error("Standard views data is missing.");let At=it?Ks(it.combinedViewBox):null,Ct=Te?Ks(Te.combinedViewBox):null,bt=Nt?Ks(Nt.combinedViewBox):null,xe=At?At.width*pe:0,Ye=At?At.height*pe:0,st=Ct?Ct.width*pe:0,Ae=Ct?Ct.height*pe:0,Fe=bt?bt.width*pe:0,Ge=bt?bt.height*pe:0;const yt=K,pt=K+Ze,kt=[yt,pt],Vt=[yt+(xe-st)/2,pt+Ye+Ne+tt],yn=[yt+xe+Ne+tt,pt+(Ye-Ge)/2],Nn=Math.max(xe,st,yn[0]+Fe-yt),gn=Math.max(Ye+Ne,Vt[1]+Ae+Ne-pt,Ge+Ne+(Ye-Ge)/2),kn=Nn+2*K,Ft=gn+Ze+2*K,Vr=kn>Ft?"l":"p";ft=new wn({orientation:Vr,unit:"mm",format:[kn,Ft]});const Ir=document.createElementNS("http://www.w3.org/2000/svg","svg");Ir.setAttribute("width",kn),Ir.setAttribute("height",Ft),Ir.setAttribute("viewBox",`0 0 ${kn} ${Ft}`);const Zn=document.createElementNS("http://www.w3.org/2000/svg","g");Ir.appendChild(Zn);const vn=document.createElementNS("http://www.w3.org/2000/svg","text");vn.setAttribute("x",kn/2),vn.setAttribute("y",K+Ze/2),vn.setAttribute("font-size",Ke),vn.setAttribute("font-family","Arial, sans-serif"),vn.setAttribute("text-anchor","middle"),vn.setAttribute("dominant-baseline","middle"),vn.setAttribute("fill","#000000"),vn.setAttribute("font-weight","bold"),vn.textContent="Standard Views",Zn.appendChild(vn);const $n="standard_front",Wn="standard_top",pn="standard_right";it&&At&&T(Zn,it,"Front View",kt,{width:xe,height:Ye},$n),Te&&Ct&&T(Zn,Te,"Top View",Vt,{width:st,height:Ae},Wn),Nt&&bt&&T(Zn,Nt,"Right View",yn,{width:Fe,height:Ge},pn),console.log("Attempting to add single page SVG element to PDF:",Ir);try{await ft.svg(Ir,{x:0,y:0,width:kn,height:Ft}),console.log("Successfully added single page SVG element.")}catch(Wr){throw console.error("Error adding single page SVG element:",Wr),Wr}}else if(t.parts&&t.parts.length>0){console.log("Exporting Part Views (Multi-Page)..."),vt="technical-drawing-parts.pdf";let lt=t.parts.findIndex(Zn=>{var vn,$n,Wn;return((vn=Zn.views)==null?void 0:vn.front)||(($n=Zn.views)==null?void 0:$n.top)||((Wn=Zn.views)==null?void 0:Wn.right)});if(lt===-1)throw new Error("No parts with valid views found for PDF export.");const it=t.parts[lt],Te=(ue=it.views)==null?void 0:ue.front,Nt=(Q=it.views)==null?void 0:Q.top,At=(Pe=it.views)==null?void 0:Pe.right;let Ct=Te?Ks(Te.combinedViewBox):null,bt=Nt?Ks(Nt.combinedViewBox):null,xe=At?Ks(At.combinedViewBox):null,Ye=Ct?Ct.width*pe:0,st=Ct?Ct.height*pe:0,Ae=bt?bt.width*pe:0,Fe=bt?bt.height*pe:0,Ge=xe?xe.width*pe:0,yt=xe?xe.height*pe:0;const pt=K,kt=K+Ze,Vt=pt+Ye+Ne+tt,yn=Math.max(Ye,Ae,Vt+Ge-pt),Nn=kt+st+Ne+tt,gn=Math.max(st+Ne,Nn+Fe-kt,yt+Ne+(st-yt)/2),kn=yn+2*K,Ft=gn+Ze+2*K,Vr=kn>Ft?"l":"p",Ir=[kn,Ft];ft=new wn({orientation:Vr,unit:"mm",format:Ir});for(const[Zn,vn]of t.parts.entries()){const $n=t.parts.indexOf(vn);console.log(`Processing Part ${$n+1}: ${vn.name}`);const Wn=(et=vn.views)==null?void 0:et.front,pn=(Qe=vn.views)==null?void 0:Qe.top,Wr=(dt=vn.views)==null?void 0:dt.right;if(!Wn&&!pn&&!Wr){console.warn(`Skipping part ${vn.name} as it has no standard views.`);return}let oi=Wn?Ks(Wn.combinedViewBox):null,q=pn?Ks(pn.combinedViewBox):null,U=Wr?Ks(Wr.combinedViewBox):null,ne=oi?oi.width*pe:0,me=oi?oi.height*pe:0,de=q?q.width*pe:0,we=q?q.height*pe:0,Xe=U?U.width*pe:0,qe=U?U.height*pe:0;const ot=K,rt=K+Ze,gt=[ot,rt],at=[ot+(ne-de)/2,rt+me+Ne+tt],Wt=[ot+ne+Ne+tt,rt+(me-qe)/2],It=Math.max(ne,de,Wt[0]+Xe-ot),Ot=Math.max(me+Ne,at[1]+we+Ne-rt,qe+Ne+(me-qe)/2),$t=It+2*K,Qt=Ot+Ze+2*K,sn=$t>Qt?"l":"p",zt=[$t,Qt];Zn>lt?(console.log(`Adding Page ${Zn+1} to PDF`),ft.addPage(zt,sn)):Zn===lt&&Zn>0&&console.log(`Processing first valid part (index ${Zn+1}) for PDF`);const on=document.createElementNS("http://www.w3.org/2000/svg","svg");on.setAttribute("xmlns","http://www.w3.org/2000/svg"),on.setAttribute("width",$t),on.setAttribute("height",Qt),on.setAttribute("viewBox",`0 0 ${$t} ${Qt}`);const jt=document.createElementNS("http://www.w3.org/2000/svg","g");on.appendChild(jt);const ln=document.createElementNS("http://www.w3.org/2000/svg","text");ln.setAttribute("x",$t/2),ln.setAttribute("y",K+Ze/2),ln.setAttribute("font-size",Ke),ln.setAttribute("font-family","Arial, sans-serif"),ln.setAttribute("text-anchor","middle"),ln.setAttribute("dominant-baseline","middle"),ln.setAttribute("fill","#000000"),ln.setAttribute("font-weight","bold"),ln.textContent=vn.name,jt.appendChild(ln);const fn=vn.name.replace(/\s+/g,"_"),xn=`${fn}_front`,tr=`${fn}_top`,Qn=`${fn}_right`;Wn&&oi&&T(jt,Wn,"Front View",gt,{width:ne,height:me},xn),pn&&q&&T(jt,pn,"Top View",at,{width:de,height:we},tr),Wr&&U&&T(jt,Wr,"Right View",Wt,{width:Xe,height:qe},Qn),console.log(`Adding SVG element for page ${$n+1} (${vn.name}) to PDF:`,on),await ft.svg(on,{x:0,y:0,width:$t,height:Qt}),console.log(`Finished adding SVG for page ${$n+1}`)}}ft?(ft.save(vt),console.log("PDF Export Successful:",vt)):(console.warn("PDF object not initialized (likely no valid parts/views found). No export occurred."),alert("Could not generate PDF: No valid views found."))}catch(lt){console.error("Error during PDF generation:",lt),alert(`Failed to export PDF: ${lt.message}. See console for details.`)}},[t,f,T]),k=(pe,K)=>{d(tt=>({...tt,[pe]:{...tt[pe],textPosition:K}}))},N=(pe,K)=>{var tt;if(!K.geometry||K.geometry.type!=="line"&&K.geometry.type!=="circle"){console.log(`Clicked non-measurable path: ${pe}, Type: ${(tt=K.geometry)==null?void 0:tt.type}`);return}d(Ze=>{const Ne={...Ze};if(Ne[pe])delete Ne[pe],console.log(`Removed Measurement: ${pe}`);else{const Ke={x:0,y:0};if(K.geometry.type==="line"&&K.geometry.endpoints){const[Q,Pe]=K.geometry.endpoints[0],[et,Qe]=K.geometry.endpoints[1];Ke.x=(Q+et)/2,Ke.y=(Pe+Qe)/2-5}else K.geometry.type==="circle"&&K.geometry.center&&(Ke.x=K.geometry.center[0],Ke.y=K.geometry.center[1]);let ft=pe;const vt=pe.lastIndexOf("_visible_"),ue=pe.lastIndexOf("_hidden_");vt!==-1?ft=pe.substring(0,vt):ue!==-1?ft=pe.substring(0,ue):pe.endsWith("_circle")?ft=pe.split("_").slice(0,-2).join("_"):console.warn(`Could not reliably extract viewId from pathId: ${pe}`),Ne[pe]={pathId:pe,type:K.geometry.type,textPosition:Ke,viewId:ft},console.log("--- Added Measurement ---"),console.log(`  ID: ${pe}`),console.log(`  Type: ${K.geometry.type}`),console.log("  Initial Text Pos:",Ke),console.log(`  View ID: ${Ne[pe].viewId}`),console.log("------------------------")}return Ne})};Be.useEffect(()=>{const pe=()=>{n.current&&s({width:n.current.clientWidth,height:n.current.clientHeight})};return pe(),window.addEventListener("resize",pe),()=>window.removeEventListener("resize",pe)},[]);const R=pe=>{if(pe.preventDefault(),!n.current)return;const K=n.current.getBoundingClientRect(),tt=pe.clientX-K.left,Ze=pe.clientY-K.top,Ne=(tt-l.x)/o,Ke=(Ze-l.y)/o,ft=-Math.sign(pe.deltaY)*.1,vt=Math.max(.1,Math.min(10,o+ft*o)),ue=tt-Ne*vt,Q=Ze-Ke*vt;a(vt),u({x:ue,y:Q})},P=pe=>{pe.target.closest('text[style*="cursor: move"]')||pe.button===0&&(x(!0),g({x:pe.clientX,y:pe.clientY}),_({...l}))},D=pe=>{if(!v)return;const K=pe.clientX-w.x,tt=pe.clientY-w.y;u({x:S.x+K,y:S.y+tt})},O=()=>{x(!1)},B=pe=>{if(!pe.target.closest('text[style*="cursor: move"]')&&pe.touches.length===1){const K=pe.touches[0];x(!0),g({x:K.clientX,y:K.clientY}),_({...l})}},V=pe=>{if(!v||pe.touches.length!==1)return;const K=pe.touches[0],tt=K.clientX-w.x,Ze=K.clientY-w.y;u({x:S.x+tt,y:S.y+Ze})},H=()=>{x(!1)},ee=()=>{a(1),u({x:0,y:0}),d({})},se=t.standard;let ce,W,Y,j=0,re=0,I=0,X=0,J=0,ae=0;const fe=20,Se="standard_front",Ee="standard_top",Ce="standard_right";se&&(ce=se.frontView?Ks(se.frontView.combinedViewBox):null,W=se.topView?Ks(se.topView.combinedViewBox):null,Y=se.rightView?Ks(se.rightView.combinedViewBox):null,ce&&(j=ce.width*c,re=ce.height*c),W&&(I=W.width*c,X=W.height*c),Y&&(J=Y.width*c,ae=Y.height*c));const $e=50,ke=50,he=[$e,ke],De=[$e+(j-I)/2,ke+re+fe],ze=[$e+j+fe,ke+(re-ae)/2];return Tt("div",{ref:n,style:{width:"100%",height:"100%",position:"relative",backgroundColor:"#e0e0e0",overflow:"hidden",cursor:v?"grabbing":"grab",touchAction:"none"},onWheel:R,onMouseDown:P,onMouseMove:D,onMouseUp:O,onMouseLeave:O,onTouchStart:B,onTouchMove:V,onTouchEnd:H,onTouchCancel:H,children:[Me(Kj,{isMobile:e,zoomLevel:o,scale:c,containerSize:i,panOffset:l,onZoomChange:a,onPanChange:u,onScaleChange:h,onResetView:ee,onExportPDF:L}),Tt("div",{ref:r,style:{position:"absolute",left:0,top:0,width:"100%",height:"100%",transform:`translate(${l.x}px, ${l.y}px) scale(${o})`,transformOrigin:"0 0"},children:[se&&Tt(nm,{children:[se.frontView&&ce&&Me(OS,{projection:se.frontView,title:"Front View",position:he,dimensions:{width:j,height:re},onPathClick:N,viewId:Se,activeMeasurements:f,onMeasurementUpdate:k}),se.topView&&W&&Me(OS,{projection:se.topView,title:"Top View",position:De,dimensions:{width:I,height:X},onPathClick:N,viewId:Ee,activeMeasurements:f,onMeasurementUpdate:k}),se.rightView&&Y&&Me(OS,{projection:se.rightView,title:"Right View",position:ze,dimensions:{width:J,height:ae},onPathClick:N,viewId:Ce,activeMeasurements:f,onMeasurementUpdate:k})]}),t.parts&&t.parts.length>0&&Tt("div",{style:{position:"absolute",top:`${ke+re+(W?X+fe:0)+fe*2}px`,left:`${$e}px`,width:"max-content"},children:[Me("h3",{style:{padding:"0 0 5px 0",margin:0,fontSize:"14px",fontWeight:"bold"},children:"Component Views"}),Me("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:t.parts.map((pe,K)=>Me($j,{part:pe,index:K,scale:c,onPathClick:N,activeMeasurements:f,onMeasurementUpdate:k},K))})]})]})]})}const eX=async(t,e,n,r="png")=>{if(console.log("generate3DModelImageDataUrl called with format:",r),!t||!t.faces||!t.faces.vertices)throw new Error("Invalid or missing high detail mesh data.");if(!e)throw new Error("Captured camera state is required.");if(!n)throw new Error("Main camera reference is required.");let i=null,s=null,o=null,a=null,l=null,u=null,c=null,h=null,f=null,d=null;try{const v=n.aspect,x=720,w=Math.round(x*v);i=document.createElement("canvas"),i.width=w,i.height=x,s=new av({canvas:i,antialias:!0,preserveDrawingBuffer:!0,alpha:!1,precision:"highp"}),s.setSize(w,x),s.setClearColor(new Zt("#121212")),s.shadowMap.enabled=!0,o=new td,o.add(new Tx(16777215,1.5));const g=new pm(16777215,3);g.position.set(10,10,10),g.castShadow=!0,o.add(g);const S=new pm(16777215,1);S.position.set(-10,-10,5),o.add(S),o.add(new Ax(16777215,5592405,1)),t.faces&&t.faces.vertices&&t.faces.normals&&t.faces.triangles&&(l=new An,l.setAttribute("position",new ur(new Float32Array(t.faces.vertices),3)),l.setAttribute("normal",new ur(new Float32Array(t.faces.normals),3)),l.setIndex(new ur(new Uint32Array(t.faces.triangles),1)),c=new fv({color:"#6a92a6",metalness:.4,roughness:.3,envMapIntensity:.8,flatShading:!1}),f=new qi(l,c),f.castShadow=!0,f.receiveShadow=!0,o.add(f)),t.edges&&t.edges.vertices&&(u=new An,u.setAttribute("position",new ur(new Float32Array(t.edges.vertices),3)),h=new Ds({color:"#304352",linewidth:1}),d=new qa(u,h),o.add(d)),a=new mi(e.fov,w/x,n.near,n.far),a.position.copy(e.position),a.quaternion.copy(e.quaternion),a.updateProjectionMatrix(),s.render(o,a);const _=`image/${r}`,T=r==="jpeg"?.95:void 0;return s.domElement.toDataURL(_,T)}catch(v){throw console.error("Error generating 3D model image data URL:",v),v}finally{s&&s.dispose(),l&&l.dispose(),u&&u.dispose(),c&&c.dispose(),h&&h.dispose(),i=null,s=null,o=null,a=null,l=null,u=null,c=null,h=null,f=null,d=null}},uN="dmFyIHg9T2JqZWN0LmRlZmluZVByb3BlcnR5O3ZhciBHPShpLG8sbCk9Pm8gaW4gaT94KGksbyx7ZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITAsdmFsdWU6bH0pOmlbb109bDt2YXIgRT0oaSxvLGwpPT4oRyhpLHR5cGVvZiBvIT0ic3ltYm9sIj9vKyIiOm8sbCksbCksVT0oaSxvLGwpPT57aWYoIW8uaGFzKGkpKXRocm93IFR5cGVFcnJvcigiQ2Fubm90ICIrbCl9O3ZhciBhPShpLG8sbCk9PihVKGksbywicmVhZCBmcm9tIHByaXZhdGUgZmllbGQiKSxsP2wuY2FsbChpKTpvLmdldChpKSksRD0oaSxvLGwpPT57aWYoby5oYXMoaSkpdGhyb3cgVHlwZUVycm9yKCJDYW5ub3QgYWRkIHRoZSBzYW1lIHByaXZhdGUgbWVtYmVyIG1vcmUgdGhhbiBvbmNlIik7byBpbnN0YW5jZW9mIFdlYWtTZXQ/by5hZGQoaSk6by5zZXQoaSxsKX0saz0oaSxvLGwsQSk9PihVKGksbywid3JpdGUgdG8gcHJpdmF0ZSBmaWVsZCIpLEE/QS5jYWxsKGksbCk6by5zZXQoaSxsKSxsKTsoZnVuY3Rpb24oKXt2YXIgdSxoLFIsTCxPLF8sZDsidXNlIHN0cmljdCI7dmFyIGk9dHlwZW9mIGRvY3VtZW50PCJ1Ij9kb2N1bWVudC5jdXJyZW50U2NyaXB0Om51bGwsbzsoZnVuY3Rpb24odCl7dC5MT0FEPSJMT0FEIix0LkVYRUM9IkVYRUMiLHQuRkZQUk9CRT0iRkZQUk9CRSIsdC5XUklURV9GSUxFPSJXUklURV9GSUxFIix0LlJFQURfRklMRT0iUkVBRF9GSUxFIix0LkRFTEVURV9GSUxFPSJERUxFVEVfRklMRSIsdC5SRU5BTUU9IlJFTkFNRSIsdC5DUkVBVEVfRElSPSJDUkVBVEVfRElSIix0LkxJU1RfRElSPSJMSVNUX0RJUiIsdC5ERUxFVEVfRElSPSJERUxFVEVfRElSIix0LkVSUk9SPSJFUlJPUiIsdC5ET1dOTE9BRD0iRE9XTkxPQUQiLHQuUFJPR1JFU1M9IlBST0dSRVNTIix0LkxPRz0iTE9HIix0Lk1PVU5UPSJNT1VOVCIsdC5VTk1PVU5UPSJVTk1PVU5UIn0pKG98fChvPXt9KSk7Y29uc3QgbD0oKCk9PntsZXQgdD0wO3JldHVybigpPT50Kyt9KSgpLEE9bmV3IEVycm9yKCJmZm1wZWcgaXMgbm90IGxvYWRlZCwgY2FsbCBgYXdhaXQgZmZtcGVnLmxvYWQoKWAgZmlyc3QiKSxTPW5ldyBFcnJvcigiY2FsbGVkIEZGbXBlZy50ZXJtaW5hdGUoKSIpO2NsYXNzIEJ7Y29uc3RydWN0b3IoKXtEKHRoaXMsdSxudWxsKTtEKHRoaXMsaCx7fSk7RCh0aGlzLFIse30pO0QodGhpcyxMLFtdKTtEKHRoaXMsTyxbXSk7RSh0aGlzLCJsb2FkZWQiLCExKTtEKHRoaXMsXywoKT0+e2EodGhpcyx1KSYmKGEodGhpcyx1KS5vbm1lc3NhZ2U9KHtkYXRhOntpZDplLHR5cGU6cixkYXRhOnN9fSk9Pntzd2l0Y2gocil7Y2FzZSBvLkxPQUQ6dGhpcy5sb2FkZWQ9ITAsYSh0aGlzLGgpW2VdKHMpO2JyZWFrO2Nhc2Ugby5NT1VOVDpjYXNlIG8uVU5NT1VOVDpjYXNlIG8uRVhFQzpjYXNlIG8uRkZQUk9CRTpjYXNlIG8uV1JJVEVfRklMRTpjYXNlIG8uUkVBRF9GSUxFOmNhc2Ugby5ERUxFVEVfRklMRTpjYXNlIG8uUkVOQU1FOmNhc2Ugby5DUkVBVEVfRElSOmNhc2Ugby5MSVNUX0RJUjpjYXNlIG8uREVMRVRFX0RJUjphKHRoaXMsaClbZV0ocyk7YnJlYWs7Y2FzZSBvLkxPRzphKHRoaXMsTCkuZm9yRWFjaChuPT5uKHMpKTticmVhaztjYXNlIG8uUFJPR1JFU1M6YSh0aGlzLE8pLmZvckVhY2gobj0+bihzKSk7YnJlYWs7Y2FzZSBvLkVSUk9SOmEodGhpcyxSKVtlXShzKTticmVha31kZWxldGUgYSh0aGlzLGgpW2VdLGRlbGV0ZSBhKHRoaXMsUilbZV19KX0pO0QodGhpcyxkLCh7dHlwZTplLGRhdGE6cn0scz1bXSxuKT0+YSh0aGlzLHUpP25ldyBQcm9taXNlKChmLGcpPT57Y29uc3QgYz1sKCk7YSh0aGlzLHUpJiZhKHRoaXMsdSkucG9zdE1lc3NhZ2Uoe2lkOmMsdHlwZTplLGRhdGE6cn0scyksYSh0aGlzLGgpW2NdPWYsYSh0aGlzLFIpW2NdPWcsbj09bnVsbHx8bi5hZGRFdmVudExpc3RlbmVyKCJhYm9ydCIsKCk9PntnKG5ldyBET01FeGNlcHRpb24oYE1lc3NhZ2UgIyAke2N9IHdhcyBhYm9ydGVkYCwiQWJvcnRFcnJvciIpKX0se29uY2U6ITB9KX0pOlByb21pc2UucmVqZWN0KEEpKTtFKHRoaXMsImxvYWQiLCh7Y2xhc3NXb3JrZXJVUkw6ZSwuLi5yfT17fSx7c2lnbmFsOnN9PXt9KT0+KGEodGhpcyx1KXx8KGsodGhpcyx1LGU/bmV3IFdvcmtlcihuZXcgVVJMKGUsaSYmaS50YWdOYW1lLnRvVXBwZXJDYXNlKCk9PT0iU0NSSVBUIiYmaS5zcmN8fG5ldyBVUkwoImFzc2V0cy9mZm1wZWcud29ya2VyLTFkYWJkNjczLmpzIixkb2N1bWVudC5iYXNlVVJJKS5ocmVmKSx7dHlwZToibW9kdWxlIn0pOm5ldyBXb3JrZXIobmV3IFVSTCgiL2NhZC1vcy9hc3NldHMvd29ya2VyLTIyNDc5MmVlLmpzIixzZWxmLmxvY2F0aW9uKSx7dHlwZToibW9kdWxlIn0pKSxhKHRoaXMsXykuY2FsbCh0aGlzKSksYSh0aGlzLGQpLmNhbGwodGhpcyx7dHlwZTpvLkxPQUQsZGF0YTpyfSx2b2lkIDAscykpKTtFKHRoaXMsImV4ZWMiLChlLHI9LTEse3NpZ25hbDpzfT17fSk9PmEodGhpcyxkKS5jYWxsKHRoaXMse3R5cGU6by5FWEVDLGRhdGE6e2FyZ3M6ZSx0aW1lb3V0OnJ9fSx2b2lkIDAscykpO0UodGhpcywiZmZwcm9iZSIsKGUscj0tMSx7c2lnbmFsOnN9PXt9KT0+YSh0aGlzLGQpLmNhbGwodGhpcyx7dHlwZTpvLkZGUFJPQkUsZGF0YTp7YXJnczplLHRpbWVvdXQ6cn19LHZvaWQgMCxzKSk7RSh0aGlzLCJ0ZXJtaW5hdGUiLCgpPT57Y29uc3QgZT1PYmplY3Qua2V5cyhhKHRoaXMsUikpO2Zvcihjb25zdCByIG9mIGUpYSh0aGlzLFIpW3JdKFMpLGRlbGV0ZSBhKHRoaXMsUilbcl0sZGVsZXRlIGEodGhpcyxoKVtyXTthKHRoaXMsdSkmJihhKHRoaXMsdSkudGVybWluYXRlKCksayh0aGlzLHUsbnVsbCksdGhpcy5sb2FkZWQ9ITEpfSk7RSh0aGlzLCJ3cml0ZUZpbGUiLChlLHIse3NpZ25hbDpzfT17fSk9Pntjb25zdCBuPVtdO3JldHVybiByIGluc3RhbmNlb2YgVWludDhBcnJheSYmbi5wdXNoKHIuYnVmZmVyKSxhKHRoaXMsZCkuY2FsbCh0aGlzLHt0eXBlOm8uV1JJVEVfRklMRSxkYXRhOntwYXRoOmUsZGF0YTpyfX0sbixzKX0pO0UodGhpcywibW91bnQiLChlLHIscyk9Pntjb25zdCBuPVtdO3JldHVybiBhKHRoaXMsZCkuY2FsbCh0aGlzLHt0eXBlOm8uTU9VTlQsZGF0YTp7ZnNUeXBlOmUsb3B0aW9uczpyLG1vdW50UG9pbnQ6c319LG4pfSk7RSh0aGlzLCJ1bm1vdW50IixlPT57Y29uc3Qgcj1bXTtyZXR1cm4gYSh0aGlzLGQpLmNhbGwodGhpcyx7dHlwZTpvLlVOTU9VTlQsZGF0YTp7bW91bnRQb2ludDplfX0scil9KTtFKHRoaXMsInJlYWRGaWxlIiwoZSxyPSJiaW5hcnkiLHtzaWduYWw6c309e30pPT5hKHRoaXMsZCkuY2FsbCh0aGlzLHt0eXBlOm8uUkVBRF9GSUxFLGRhdGE6e3BhdGg6ZSxlbmNvZGluZzpyfX0sdm9pZCAwLHMpKTtFKHRoaXMsImRlbGV0ZUZpbGUiLChlLHtzaWduYWw6cn09e30pPT5hKHRoaXMsZCkuY2FsbCh0aGlzLHt0eXBlOm8uREVMRVRFX0ZJTEUsZGF0YTp7cGF0aDplfX0sdm9pZCAwLHIpKTtFKHRoaXMsInJlbmFtZSIsKGUscix7c2lnbmFsOnN9PXt9KT0+YSh0aGlzLGQpLmNhbGwodGhpcyx7dHlwZTpvLlJFTkFNRSxkYXRhOntvbGRQYXRoOmUsbmV3UGF0aDpyfX0sdm9pZCAwLHMpKTtFKHRoaXMsImNyZWF0ZURpciIsKGUse3NpZ25hbDpyfT17fSk9PmEodGhpcyxkKS5jYWxsKHRoaXMse3R5cGU6by5DUkVBVEVfRElSLGRhdGE6e3BhdGg6ZX19LHZvaWQgMCxyKSk7RSh0aGlzLCJsaXN0RGlyIiwoZSx7c2lnbmFsOnJ9PXt9KT0+YSh0aGlzLGQpLmNhbGwodGhpcyx7dHlwZTpvLkxJU1RfRElSLGRhdGE6e3BhdGg6ZX19LHZvaWQgMCxyKSk7RSh0aGlzLCJkZWxldGVEaXIiLChlLHtzaWduYWw6cn09e30pPT5hKHRoaXMsZCkuY2FsbCh0aGlzLHt0eXBlOm8uREVMRVRFX0RJUixkYXRhOntwYXRoOmV9fSx2b2lkIDAscikpfW9uKGUscil7ZT09PSJsb2ciP2EodGhpcyxMKS5wdXNoKHIpOmU9PT0icHJvZ3Jlc3MiJiZhKHRoaXMsTykucHVzaChyKX1vZmYoZSxyKXtlPT09ImxvZyI/ayh0aGlzLEwsYSh0aGlzLEwpLmZpbHRlcihzPT5zIT09cikpOmU9PT0icHJvZ3Jlc3MiJiZrKHRoaXMsTyxhKHRoaXMsTykuZmlsdGVyKHM9PnMhPT1yKSl9fXU9bmV3IFdlYWtNYXAsaD1uZXcgV2Vha01hcCxSPW5ldyBXZWFrTWFwLEw9bmV3IFdlYWtNYXAsTz1uZXcgV2Vha01hcCxfPW5ldyBXZWFrTWFwLGQ9bmV3IFdlYWtNYXA7dmFyIFc7KGZ1bmN0aW9uKHQpe3QuTUVNRlM9Ik1FTUZTIix0Lk5PREVGUz0iTk9ERUZTIix0Lk5PREVSQVdGUz0iTk9ERVJBV0ZTIix0LklEQkZTPSJJREJGUyIsdC5XT1JLRVJGUz0iV09SS0VSRlMiLHQuUFJPWFlGUz0iUFJPWFlGUyJ9KShXfHwoVz17fSkpO2NvbnN0IEM9bmV3IEVycm9yKCJmYWlsZWQgdG8gZ2V0IHJlc3BvbnNlIGJvZHkgcmVhZGVyIiksTT1uZXcgRXJyb3IoImZhaWxlZCB0byBjb21wbGV0ZSBkb3dubG9hZCIpLFA9IkNvbnRlbnQtTGVuZ3RoIixUPXQ9Pm5ldyBQcm9taXNlKChlLHIpPT57Y29uc3Qgcz1uZXcgRmlsZVJlYWRlcjtzLm9ubG9hZD0oKT0+e2NvbnN0e3Jlc3VsdDpufT1zO24gaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcj9lKG5ldyBVaW50OEFycmF5KG4pKTplKG5ldyBVaW50OEFycmF5KX0scy5vbmVycm9yPW49Pnt2YXIgZixnO3IoRXJyb3IoYEZpbGUgY291bGQgbm90IGJlIHJlYWQhIENvZGU9JHsoKGc9KGY9bj09bnVsbD92b2lkIDA6bi50YXJnZXQpPT1udWxsP3ZvaWQgMDpmLmVycm9yKT09bnVsbD92b2lkIDA6Zy5jb2RlKXx8LTF9YCkpfSxzLnJlYWRBc0FycmF5QnVmZmVyKHQpfSksdj1hc3luYyB0PT57bGV0IGU7aWYodHlwZW9mIHQ9PSJzdHJpbmciKS9kYXRhOl9kYXRhXC8oW2EtekEtWl0qKTtiYXNlNjQsKFteIl0qKS8udGVzdCh0KT9lPWF0b2IodC5zcGxpdCgiLCIpWzFdKS5zcGxpdCgiIikubWFwKHI9PnIuY2hhckNvZGVBdCgwKSk6ZT1hd2FpdChhd2FpdCBmZXRjaCh0KSkuYXJyYXlCdWZmZXIoKTtlbHNlIGlmKHQgaW5zdGFuY2VvZiBVUkwpZT1hd2FpdChhd2FpdCBmZXRjaCh0KSkuYXJyYXlCdWZmZXIoKTtlbHNlIGlmKHQgaW5zdGFuY2VvZiBGaWxlfHx0IGluc3RhbmNlb2YgQmxvYillPWF3YWl0IFQodCk7ZWxzZSByZXR1cm4gbmV3IFVpbnQ4QXJyYXk7cmV0dXJuIG5ldyBVaW50OEFycmF5KGUpfSxqPWFzeW5jKHQsZSk9Pnt2YXIgbjtjb25zdCByPWF3YWl0IGZldGNoKHQpO2xldCBzO3RyeXtjb25zdCBmPXBhcnNlSW50KHIuaGVhZGVycy5nZXQoUCl8fCItMSIpLGc9KG49ci5ib2R5KT09bnVsbD92b2lkIDA6bi5nZXRSZWFkZXIoKTtpZighZyl0aHJvdyBDO2NvbnN0IGM9W107bGV0IHk9MDtmb3IoOzspe2NvbnN0e2RvbmU6SSx2YWx1ZTp3fT1hd2FpdCBnLnJlYWQoKSxGPXc/dy5sZW5ndGg6MDtpZihJKXtpZihmIT0tMSYmZiE9PXkpdGhyb3cgTTtlJiZlKHt1cmw6dCx0b3RhbDpmLHJlY2VpdmVkOnksZGVsdGE6Rixkb25lOkl9KTticmVha31jLnB1c2godykseSs9RixlJiZlKHt1cmw6dCx0b3RhbDpmLHJlY2VpdmVkOnksZGVsdGE6Rixkb25lOkl9KX1jb25zdCBOPW5ldyBVaW50OEFycmF5KHkpO2xldCBtPTA7Zm9yKGNvbnN0IEkgb2YgYylOLnNldChJLG0pLG0rPUkubGVuZ3RoO3M9Ti5idWZmZXJ9Y2F0Y2goZil7Y29uc29sZS5sb2coImZhaWxlZCB0byBzZW5kIGRvd25sb2FkIHByb2dyZXNzIGV2ZW50OiAiLGYpLHM9YXdhaXQgci5hcnJheUJ1ZmZlcigpLGUmJmUoe3VybDp0LHRvdGFsOnMuYnl0ZUxlbmd0aCxyZWNlaXZlZDpzLmJ5dGVMZW5ndGgsZGVsdGE6MCxkb25lOiEwfSl9cmV0dXJuIHN9LGI9YXN5bmModCxlLHI9ITEscyk9Pntjb25zdCBuPXI/YXdhaXQgaih0LHMpOmF3YWl0KGF3YWl0IGZldGNoKHQpKS5hcnJheUJ1ZmZlcigpLGY9bmV3IEJsb2IoW25dLHt0eXBlOmV9KTtyZXR1cm4gVVJMLmNyZWF0ZU9iamVjdFVSTChmKX07bGV0IHA9bnVsbDtjb25zdCAkPWFzeW5jKCk9PntpZihwKXJldHVybiBwO2NvbnNvbGUubG9nKCJbV29ya2VyXSBMb2FkaW5nIEZGbXBlZyAoTXVsdGktVGhyZWFkZWQpLi4uIikscD1uZXcgQixwLm9uKCJsb2ciLCh7bWVzc2FnZTp0fSk9Pnt9KTt0cnl7YXdhaXQgcC5sb2FkKHtjb3JlVVJMOmF3YWl0IGIoIi9mZm1wZWctY29yZS5qcyIsInRleHQvamF2YXNjcmlwdCIpLHdhc21VUkw6YXdhaXQgYigiL2ZmbXBlZy1jb3JlLndhc20iLCJhcHBsaWNhdGlvbi93YXNtIiksd29ya2VyVVJMOmF3YWl0IGIoIi9mZm1wZWctY29yZS53b3JrZXIuanMiLCJ0ZXh0L2phdmFzY3JpcHQiKX0pLGNvbnNvbGUubG9nKCJbV29ya2VyXSBGRm1wZWcgbG9hZGVkIHN1Y2Nlc3NmdWxseS4iKX1jYXRjaCh0KXt0aHJvdyBjb25zb2xlLmVycm9yKCJbV29ya2VyXSBFcnJvciBsb2FkaW5nIEZGbXBlZzoiLHQpLHA9bnVsbCx0fXJldHVybiBwfTtzZWxmLm9ubWVzc2FnZT1hc3luYyB0PT57Y29uc29sZS5sb2coIltXb3JrZXJdIFJlY2VpdmVkIG1lc3NhZ2U6Iix0LmRhdGEpO2NvbnN0e2ZyYW1lRGF0YVVybHM6ZSxvcHRpb25zOnJ9PXQuZGF0YSx7ZnBzOnM9MTUsb3V0cHV0Rm9ybWF0Om49Im1wNCJ9PXJ8fHt9LGY9W10sZz1gb3V0cHV0LiR7bn1gO3RyeXtjb25zb2xlLmxvZygiW1dvcmtlcl0gSm9iIHN0YXJ0aW5nOiIse251bUZyYW1lczplLmxlbmd0aCxmcHM6cyxvdXRwdXRGb3JtYXQ6bn0pLHNlbGYucG9zdE1lc3NhZ2Uoe3R5cGU6InByb2dyZXNzIixtZXNzYWdlOiJMb2FkaW5nIEZGbXBlZy4uLiJ9KTtjb25zdCBjPWF3YWl0ICQoKTtjb25zb2xlLmxvZygiW1dvcmtlcl0gV3JpdGluZyBmcmFtZXMgdG8gRkZtcGVnIGZpbGVzeXN0ZW0uLi4iKSxzZWxmLnBvc3RNZXNzYWdlKHt0eXBlOiJwcm9ncmVzcyIsbWVzc2FnZToiUHJlcGFyaW5nIGZyYW1lcy4uLiJ9KTtmb3IobGV0IG09MDttPGUubGVuZ3RoO20rKyl7Y29uc3Qgdz1gZnJhbWUtJHtTdHJpbmcobSsxKS5wYWRTdGFydCgzLCIwIil9LnBuZ2A7dHJ5e2NvbnN0IEY9YXdhaXQgdihlW21dKTthd2FpdCBjLndyaXRlRmlsZSh3LEYpLGYucHVzaCh3KSwoKG0rMSklMTA9PT0wfHxtPT09ZS5sZW5ndGgtMSkmJnNlbGYucG9zdE1lc3NhZ2Uoe3R5cGU6InByb2dyZXNzIixtZXNzYWdlOmBQcmVwYXJlZCBmcmFtZSAke20rMX0vJHtlLmxlbmd0aH1gfSl9Y2F0Y2goRil7dGhyb3cgY29uc29sZS5lcnJvcihgW1dvcmtlcl0gRXJyb3Igd3JpdGluZyBmcmFtZSAke3d9OmAsRiksbmV3IEVycm9yKGBGYWlsZWQgdG8gd3JpdGUgZnJhbWUgJHt3fWApfX1jb25zb2xlLmxvZygiW1dvcmtlcl0gRmluaXNoZWQgd3JpdGluZyBmcmFtZXMuIiksY29uc29sZS5sb2coYFtXb3JrZXJdIEV4ZWN1dGluZyBGRm1wZWcgY29tbWFuZCBmb3IgJHtnfS4uLmApLHNlbGYucG9zdE1lc3NhZ2Uoe3R5cGU6InByb2dyZXNzIixtZXNzYWdlOiJFbmNvZGluZyB2aWRlbyAocHJlc2V0OiB1bHRyYWZhc3QsIGNyZjogMjgpLi4uIn0pLGF3YWl0IGMuZXhlYyhbIi1mcmFtZXJhdGUiLFN0cmluZyhzKSwiLWkiLCJmcmFtZS0lMDNkLnBuZyIsIi1jOnYiLCJsaWJ4MjY0IiwiLXBpeF9mbXQiLCJ5dXY0MjBwIiwiLW1vdmZsYWdzIiwiK2Zhc3RzdGFydCIsIi1wcmVzZXQiLCJ1bHRyYWZhc3QiLCItY3JmIiwiMjgiLGddKSxjb25zb2xlLmxvZygiW1dvcmtlcl0gRkZtcGVnIGNvbW1hbmQgZXhlY3V0ZWQgc3VjY2Vzc2Z1bGx5LiIpLHNlbGYucG9zdE1lc3NhZ2Uoe3R5cGU6InByb2dyZXNzIixtZXNzYWdlOiJFbmNvZGluZyBjb21wbGV0ZS4gUmVhZGluZyBvdXRwdXQuLi4ifSksY29uc29sZS5sb2coIltXb3JrZXJdIFJlYWRpbmcgb3V0cHV0IHZpZGVvIGZpbGUuLi4iKTtjb25zdCB5PWF3YWl0IGMucmVhZEZpbGUoZyksTj1uZXcgQmxvYihbeS5idWZmZXJdLHt0eXBlOmB2aWRlby8ke259YH0pO2NvbnNvbGUubG9nKCJbV29ya2VyXSBWaWRlbyBnZW5lcmF0aW9uIHN1Y2Nlc3NmdWwuIiksc2VsZi5wb3N0TWVzc2FnZSh7dHlwZToicmVzdWx0Iix2aWRlb0Jsb2I6Tn0pfWNhdGNoKGMpe2NvbnNvbGUuZXJyb3IoIltXb3JrZXJdIEVycm9yIGR1cmluZyB2aWRlbyBnZW5lcmF0aW9uOiIsYyksc2VsZi5wb3N0TWVzc2FnZSh7dHlwZToiZXJyb3IiLG1lc3NhZ2U6Yy5tZXNzYWdlfHwiVW5rbm93biB3b3JrZXIgZXJyb3IifSl9ZmluYWxseXtpZihjb25zb2xlLmxvZygiW1dvcmtlcl0gQ2xlYW5pbmcgdXAgRkZtcGVnIGZpbGVzeXN0ZW0uLi4iKSxwKXRyeXtmb3IoY29uc3QgYyBvZiBmKWF3YWl0IHAuZGVsZXRlRmlsZShjKTthd2FpdCBwLmRlbGV0ZUZpbGUoZyksY29uc29sZS5sb2coIltXb3JrZXJdIEZGbXBlZyBmaWxlc3lzdGVtIGNsZWFudXAgY29tcGxldGUuIil9Y2F0Y2goYyl7Y29uc29sZS53YXJuKCJbV29ya2VyXSBFcnJvciBkdXJpbmcgRkZtcGVnIGZpbGVzeXN0ZW0gY2xlYW51cDoiLGMpfXNlbGYucG9zdE1lc3NhZ2Uoe3R5cGU6InByb2dyZXNzIixtZXNzYWdlOiJXb3JrZXIgZmluaXNoZWQuIn0pfX0sY29uc29sZS5sb2coIltXb3JrZXJdIGZmbXBlZy53b3JrZXIuanMgbG9hZGVkIChFUyBNb2R1bGUgVmVyc2lvbiAtIE11bHRpIFRocmVhZGVkKS4iKX0pKCk7Cg==",CC=typeof window<"u"&&window.Blob&&new Blob([atob(uN)],{type:"text/javascript;charset=utf-8"});function tX(){const t=CC&&(window.URL||window.webkitURL).createObjectURL(CC);try{return t?new Worker(t):new Worker("data:application/javascript;base64,"+uN)}finally{t&&(window.URL||window.webkitURL).revokeObjectURL(t)}}const nX=async(t,e,n={})=>{var L,k;const{durationSeconds:r=3,fps:i=15,outputFormat:s="mp4",orbitRadiusMultiplier:o=2.5,orbitHeightMultiplier:a=.7,onProgress:l}=n;if(!t||!t.faces||!t.faces.vertices)throw new Error("Invalid or missing mesh data.");if(!e)throw new Error("Main camera reference is required.");const u=r*i,c=[];console.log(`Starting 360 video generation: ${u} frames, ${i} fps, ${r}s`),l==null||l({message:`Initializing renderer for ${u} frames...`});let h=null,f=null,d=null,v=null,x=null,w=null,g=null,S=null,_=null,T=null;try{let N=new ge(0,0,0),R=100;try{const H=t.faces.vertices;if(H&&H.length>0){const ee=new Xa;ee.setFromArray(H),N=ee.getCenter(new ge),R=ee.getSize(new ge).length()||100}}catch(H){console.error("Error calculating model bounds:",H)}console.log(`Model Center: ${N.toArray()}, Approx Size: ${R}`);const P=e.aspect,D=720,O=Math.round(D*P);h=document.createElement("canvas"),h.width=O,h.height=D,f=new av({canvas:h,antialias:!0,preserveDrawingBuffer:!0,alpha:!1,precision:"mediump"}),f.setSize(O,D),f.setClearColor(new Zt("#121212")),d=new td,d.add(new Tx(16777215,1.5));const B=new pm(16777215,3);B.position.set(10,10,10),d.add(B);const V=new pm(16777215,1);V.position.set(-10,-10,5),d.add(V),d.add(new Ax(16777215,5592405,1)),(L=t.faces)!=null&&L.vertices&&(x=new An,x.setAttribute("position",new ur(new Float32Array(t.faces.vertices),3)),x.setAttribute("normal",new ur(new Float32Array(t.faces.normals),3)),x.setIndex(new ur(new Uint32Array(t.faces.triangles),1)),g=new fv({color:"#6a92a6",metalness:.4,roughness:.3,envMapIntensity:.8,flatShading:!1}),_=new qi(x,g),d.add(_)),(k=t.edges)!=null&&k.vertices&&(w=new An,w.setAttribute("position",new ur(new Float32Array(t.edges.vertices),3)),S=new Ds({color:"#304352",linewidth:1}),T=new qa(w,S),d.add(T)),v=new mi(e.fov,O/D,e.near,e.far),console.log("Generating frames..."),l==null||l({message:"Generating frames..."});for(let H=0;H<u;H++){const ee=H/u*Math.PI*2,se=R*o,ce=R*a;v.position.set(N.x+se*Math.cos(ee),N.y+se*Math.sin(ee),N.z+ce),v.lookAt(N),v.updateProjectionMatrix(),f.render(d,v);const W=f.domElement.toDataURL("image/png");if(c.push(W),(H+1)%5===0||H===u-1){const Y=`Generated frame ${H+1}/${u}`;console.log(Y),l==null||l({message:Y})}}console.log("Frame generation complete."),l==null||l({message:"Frames generated. Starting worker..."})}catch(N){throw console.error("Error during frame generation:",N),l==null||l({message:`Frame generation error: ${N.message}`,isError:!0}),N}finally{console.log("Cleaning up Three.js resources..."),f&&f.dispose(),x&&x.dispose(),w&&w.dispose(),g&&g.dispose(),S&&S.dispose(),h=null,console.log("Three.js cleanup complete.")}return new Promise((N,R)=>{const P=new tX;console.log("[VideoGenerator] Worker instantiated via Vite import (?worker&inline=false)");let D=null;P.onmessage=O=>{clearTimeout(D);const{type:B,videoBlob:V,message:H}=O.data;B==="result"?(console.log("[VideoGenerator] Received result from worker."),l==null||l({message:"Video processing complete!"}),P.terminate(),N(V)):B==="progress"?(console.log("[VideoGenerator - Worker Progress]",H),l==null||l({message:H}),D=setTimeout(()=>{console.error("[VideoGenerator] Worker timeout occurred."),P.terminate(),R(new Error("Video generation timed out in worker."))},6e4)):B==="error"&&(console.error("[VideoGenerator] Received error from worker:",H),l==null||l({message:`Worker error: ${H}`,isError:!0}),P.terminate(),R(new Error(H||"Video generation failed in worker")))},P.onerror=O=>{clearTimeout(D),console.error("[VideoGenerator] Error in ffmpeg worker:",O),l==null||l({message:`Worker error: ${O.message||"Unknown error"}`,isError:!0}),P.terminate(),R(new Error(`Worker error: ${O.message||"Unknown error"}`))},D=setTimeout(()=>{console.error("[VideoGenerator] Worker initial timeout occurred."),P.terminate(),R(new Error("Video generation timed out waiting for worker response."))},6e4),console.log("[VideoGenerator] Sending job to worker..."),P.postMessage({frameDataUrls:c,options:{fps:i,outputFormat:s}}),l==null||l({message:"Job sent to worker. Waiting for encoding..."})})};dr.DEFAULT_UP.set(0,0,1);function rX({target:t=[0,0,0],modelSize:e=100,controlsRef:n}){const{camera:r}=Js(),i=Be.useRef(!1);return Be.useEffect(()=>{if(!i.current){const s=e*2.5;r.position.set(s*Math.sin(Math.PI/4),-s*Math.cos(Math.PI/4),s*.7),r.lookAt(t[0],t[1],t[2]),r.updateProjectionMatrix(),i.current=!0}},[r,e,t]),Be.useEffect(()=>{n.current&&(n.current.target.set(t[0],t[1],t[2]),n.current.update())},[n,t]),Me(SI,{ref:n,enableRotate:!0,enablePan:!1,enableZoom:!0,autoRotate:!1,maxPolarAngle:Math.PI*.75,minPolarAngle:Math.PI*.25,makeDefault:!0})}function iX(){return Tt(nm,{children:[Me("ambientLight",{intensity:1.5}),Me("directionalLight",{position:[10,10,10],intensity:3,castShadow:!0}),Me("directionalLight",{position:[-10,-10,5],intensity:1}),Me("hemisphereLight",{groundColor:"#555",intensity:1})]})}function sX({modelSize:t=100}){const e=Math.max(t*5,500),n=Math.floor(e/20);return Me("group",{position:[0,0,-.01],children:Me("gridHelper",{args:[e,n,8947848,4473924],rotation:[Math.PI/2,0,0]})})}function oX({mesh:t,highQuality:e,modelId:n}){return!t||!t.faces?null:Tt("group",{children:[t.faces&&t.faces.vertices&&t.faces.normals&&t.faces.triangles&&Tt("mesh",{children:[Tt("bufferGeometry",{children:[Me("bufferAttribute",{attach:"attributes-position",count:t.faces.vertices.length/3,array:new Float32Array(t.faces.vertices),itemSize:3}),Me("bufferAttribute",{attach:"attributes-normal",count:t.faces.normals.length/3,array:new Float32Array(t.faces.normals),itemSize:3}),Me("bufferAttribute",{attach:"index",count:t.faces.triangles.length,array:new Uint32Array(t.faces.triangles),itemSize:1})]}),Me("meshStandardMaterial",{color:e?"#6a92a6":"#5a8296",metalness:e?.4:0,roughness:e?.3:.5,envMapIntensity:e?.8:.2,flatShading:!1})]}),t.edges&&t.edges.vertices&&Tt("lineSegments",{children:[Me("bufferGeometry",{children:Me("bufferAttribute",{attach:"attributes-position",count:t.edges.vertices.length/3,array:new Float32Array(t.edges.vertices),itemSize:3})}),Me("lineBasicMaterial",{color:e?"#304352":"#3c5a6e",linewidth:1})]})]},`model-${n}`)}function aX({mesh:t,modelSize:e,showFloor:n,highQuality:r,modelId:i,controlsRef:s}){return Tt(nm,{children:[Me(rX,{modelSize:e,controlsRef:s}),Me(iX,{}),n&&Me(sX,{modelSize:e}),Me(oX,{mesh:t,highQuality:r,modelId:i}),r&&Me(BV,{preset:"studio"})]})}const lX=Be.forwardRef(({requestHighDetailMesh:t,setIsExporting:e},n)=>{const{camera:r}=Js();return Be.useImperativeHandle(n,()=>({handleExportImage:async(i="png",s)=>{if(!t){console.error("High detail mesh request function not available."),alert("Export function not properly configured.");return}if(!s){console.error("Captured camera state not provided for export."),alert("Failed to capture camera state for export.");return}if(!r){console.error("Main camera reference not available for export.");return}e(!0);try{console.log("Requesting high detail mesh for export...");const o=await t();if(!o||!o.faces||!o.faces.vertices){console.error("Failed to retrieve high detail mesh or mesh is invalid."),alert("Failed to generate high-detail model for export."),e(!1);return}console.log("High detail mesh received."),console.log("Calling image generation service...");const a=await eX(o,s,r,i);console.log("Image generation service returned data URL.");const l=document.createElement("a");l.download=`cad-render-high-quality.${i}`,l.href=a,document.body.appendChild(l),l.click(),document.body.removeChild(l),console.log(`High quality image exported as ${i}`)}catch(o){console.error("Error during handleExportImage:",o),alert(`Failed to export high quality image as ${i}. See console for details.`)}finally{e(!1),console.log("Export process finished.")}}})),null});function uX({mesh:t,isMobile:e,requestHighDetailMesh:n,selectedModel:r,params:i}){const[s,o]=Be.useState(100),[a,l]=Be.useState(!0),[u,c]=Be.useState(!e),[h,f]=Be.useState(Date.now()),[d,v]=Be.useState(!1),[x,w]=Be.useState(!1),[g,S]=Be.useState(""),_=Be.useRef(),T=Be.useRef(),L=Be.useRef(),k=Be.useCallback(P=>{var B;const D=_.current;if(!D||!D.object){console.error("OrbitControls or camera not available for state capture."),alert("Cannot capture camera state for export.");return}D.update();const O={position:D.object.position.clone(),quaternion:D.object.quaternion.clone(),fov:D.object.fov};(B=T.current)==null||B.handleExportImage(P,O)},[]),N=Be.useCallback(async()=>{if(!t||!t.faces||!t.faces.vertices){alert("No valid model data available to export video.");return}if(!L.current){alert("Camera reference not available for video export.");return}w(!0),S("Starting video export..."),console.log("Starting 360 video export...");try{const P=await nX(t,L.current,{durationSeconds:3,fps:15,onProgress:B=>{console.log("Progress Update:",B.message),S(B.message)}});S("Downloading video...");const D=URL.createObjectURL(P),O=document.createElement("a");O.download="model-360-render.mp4",O.href=D,document.body.appendChild(O),O.click(),document.body.removeChild(O),URL.revokeObjectURL(D),console.log("360 video exported successfully.")}catch(P){console.error("Error exporting 360 video:",P);const D=`Error: ${P.message||"Unknown export error"}`;S(D),alert(`Video export failed: ${P.message||"Unknown error"}`)}finally{w(!1),console.log("Video export process finished.")}},[t]);Be.useEffect(()=>{f(Date.now())},[t]),Be.useEffect(()=>{if(t&&t.faces&&t.faces.vertices)try{const P=t.faces.vertices;if(P&&P.length>0){const O=new Xa().setFromArray(P).getSize(new ge).length();o(O>0?O:100)}else o(100)}catch(P){console.error("Error calculating model size:",P),o(100)}},[t]);const R=u?Math.min(window.devicePixelRatio,2):1;return Tt("div",{style:{width:"100%",height:"100%",position:"relative"},children:[Me(dI,{style:{width:"100%",height:"100%",backgroundColor:"#121212",touchAction:"none"},dpr:R,gl:{preserveDrawingBuffer:!0,antialias:u,logarithmicDepthBuffer:!0,alpha:!1,precision:u?"highp":"mediump"},shadows:u,camera:{fov:45,near:.1,far:2e3,position:[0,-300,200]},onCreated:({camera:P})=>{L.current=P},children:Tt(Be.Suspense,{fallback:null,children:[Me(aX,{mesh:t,modelSize:s,showFloor:a,highQuality:u,modelId:h,controlsRef:_}),Me(lX,{ref:T,requestHighDetailMesh:n,setIsExporting:v})]})},`canvas-${h}`),(d||x)&&Me("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",color:"white",fontSize:"1.2em",padding:"20px",textAlign:"center",zIndex:10},children:x?g||"Generating 360 Video...":"Generating High Quality Image..."}),Tt("div",{style:{position:"absolute",bottom:e?"10px":"20px",left:"0",right:"0",display:"flex",justifyContent:"center",gap:e?"8px":"15px",background:"rgba(0,0,0,0.5)",padding:e?"8px":"10px",borderRadius:"8px",margin:"0 auto",width:e?"95%":"auto",maxWidth:"500px"},children:[Me("button",{onClick:()=>l(!a),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:e?"8px 12px":"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:e?"14px":"12px"},children:a?"Hide Grid":"Show Grid"}),!e&&Me("button",{onClick:()=>c(!u),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:u?"Standard Quality":"High Quality"}),Me("button",{onClick:()=>k("jpeg"),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:e?"8px 12px":"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:e?"14px":"12px"},disabled:d||x,children:d?"Exporting...":"Export JPG"}),Me("button",{onClick:()=>k("png"),style:{background:"rgba(255,255,255,0.2)",border:"none",color:"white",padding:e?"8px 12px":"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:e?"14px":"12px"},disabled:d||x,children:d?"Exporting...":"Export PNG"}),Me("button",{onClick:N,style:{background:"rgba(60, 120, 200, 0.7)",border:"none",color:"white",padding:e?"8px 12px":"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:e?"14px":"12px"},disabled:d||x,children:x?g?"Working...":"Generating...":"Export 360 Video"})]})]})}/**
   * table-core
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function dh(t,e){return typeof t=="function"?t(e):t}function ua(t,e){return n=>{e.setState(r=>({...r,[t]:dh(n,r[t])}))}}function Dx(t){return t instanceof Function}function cX(t){return Array.isArray(t)&&t.every(e=>typeof e=="number")}function hX(t,e){const n=[],r=i=>{i.forEach(s=>{n.push(s);const o=e(s);o!=null&&o.length&&r(o)})};return r(t),n}function Cn(t,e,n){let r=[],i;return s=>{let o;n.key&&n.debug&&(o=Date.now());const a=t(s);if(!(a.length!==r.length||a.some((c,h)=>r[h]!==c)))return i;r=a;let u;if(n.key&&n.debug&&(u=Date.now()),i=e(...a),n==null||n.onChange==null||n.onChange(i),n.key&&n.debug&&n!=null&&n.debug()){const c=Math.round((Date.now()-o)*100)/100,h=Math.round((Date.now()-u)*100)/100,f=h/16,d=(v,x)=>{for(v=String(v);v.length<x;)v=" "+v;return v};console.info(`%c ${d(h,5)} /${d(c,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,n==null?void 0:n.key)}return i}}function Ln(t,e,n,r){return{debug:()=>{var i;return(i=t==null?void 0:t.debugAll)!=null?i:t[e]},key:!1,onChange:r}}function fX(t,e,n,r){const i=()=>{var o;return(o=s.getValue())!=null?o:t.options.renderFallbackValue},s={id:`${e.id}_${n.id}`,row:e,column:n,getValue:()=>e.getValue(r),renderValue:i,getContext:Cn(()=>[t,n,e,s],(o,a,l,u)=>({table:o,column:a,row:l,cell:u,getValue:u.getValue,renderValue:u.renderValue}),Ln(t.options,"debugCells"))};return t._features.forEach(o=>{o.createCell==null||o.createCell(s,n,e,t)},{}),s}function dX(t,e,n,r){var i,s;const a={...t._getDefaultColumnDef(),...e},l=a.accessorKey;let u=(i=(s=a.id)!=null?s:l?typeof String.prototype.replaceAll=="function"?l.replaceAll(".","_"):l.replace(/\./g,"_"):void 0)!=null?i:typeof a.header=="string"?a.header:void 0,c;if(a.accessorFn?c=a.accessorFn:l&&(l.includes(".")?c=f=>{let d=f;for(const x of l.split(".")){var v;d=(v=d)==null?void 0:v[x]}return d}:c=f=>f[a.accessorKey]),!u)throw new Error;let h={id:`${String(u)}`,accessorFn:c,parent:r,depth:n,columnDef:a,columns:[],getFlatColumns:Cn(()=>[!0],()=>{var f;return[h,...(f=h.columns)==null?void 0:f.flatMap(d=>d.getFlatColumns())]},Ln(t.options,"debugColumns")),getLeafColumns:Cn(()=>[t._getOrderColumnsFn()],f=>{var d;if((d=h.columns)!=null&&d.length){let v=h.columns.flatMap(x=>x.getLeafColumns());return f(v)}return[h]},Ln(t.options,"debugColumns"))};for(const f of t._features)f.createColumn==null||f.createColumn(h,t);return h}const $s="debugHeaders";function LC(t,e,n){var r;let s={id:(r=n.id)!=null?r:e.id,column:e,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{const o=[],a=l=>{l.subHeaders&&l.subHeaders.length&&l.subHeaders.map(a),o.push(l)};return a(s),o},getContext:()=>({table:t,header:s,column:e})};return t._features.forEach(o=>{o.createHeader==null||o.createHeader(s,t)}),s}const pX={createTable:t=>{t.getHeaderGroups=Cn(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,i)=>{var s,o;const a=(s=r==null?void 0:r.map(h=>n.find(f=>f.id===h)).filter(Boolean))!=null?s:[],l=(o=i==null?void 0:i.map(h=>n.find(f=>f.id===h)).filter(Boolean))!=null?o:[],u=n.filter(h=>!(r!=null&&r.includes(h.id))&&!(i!=null&&i.includes(h.id)));return sy(e,[...a,...u,...l],t)},Ln(t.options,$s)),t.getCenterHeaderGroups=Cn(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r,i)=>(n=n.filter(s=>!(r!=null&&r.includes(s.id))&&!(i!=null&&i.includes(s.id))),sy(e,n,t,"center")),Ln(t.options,$s)),t.getLeftHeaderGroups=Cn(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.left],(e,n,r)=>{var i;const s=(i=r==null?void 0:r.map(o=>n.find(a=>a.id===o)).filter(Boolean))!=null?i:[];return sy(e,s,t,"left")},Ln(t.options,$s)),t.getRightHeaderGroups=Cn(()=>[t.getAllColumns(),t.getVisibleLeafColumns(),t.getState().columnPinning.right],(e,n,r)=>{var i;const s=(i=r==null?void 0:r.map(o=>n.find(a=>a.id===o)).filter(Boolean))!=null?i:[];return sy(e,s,t,"right")},Ln(t.options,$s)),t.getFooterGroups=Cn(()=>[t.getHeaderGroups()],e=>[...e].reverse(),Ln(t.options,$s)),t.getLeftFooterGroups=Cn(()=>[t.getLeftHeaderGroups()],e=>[...e].reverse(),Ln(t.options,$s)),t.getCenterFooterGroups=Cn(()=>[t.getCenterHeaderGroups()],e=>[...e].reverse(),Ln(t.options,$s)),t.getRightFooterGroups=Cn(()=>[t.getRightHeaderGroups()],e=>[...e].reverse(),Ln(t.options,$s)),t.getFlatHeaders=Cn(()=>[t.getHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ln(t.options,$s)),t.getLeftFlatHeaders=Cn(()=>[t.getLeftHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ln(t.options,$s)),t.getCenterFlatHeaders=Cn(()=>[t.getCenterHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ln(t.options,$s)),t.getRightFlatHeaders=Cn(()=>[t.getRightHeaderGroups()],e=>e.map(n=>n.headers).flat(),Ln(t.options,$s)),t.getCenterLeafHeaders=Cn(()=>[t.getCenterFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Ln(t.options,$s)),t.getLeftLeafHeaders=Cn(()=>[t.getLeftFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Ln(t.options,$s)),t.getRightLeafHeaders=Cn(()=>[t.getRightFlatHeaders()],e=>e.filter(n=>{var r;return!((r=n.subHeaders)!=null&&r.length)}),Ln(t.options,$s)),t.getLeafHeaders=Cn(()=>[t.getLeftHeaderGroups(),t.getCenterHeaderGroups(),t.getRightHeaderGroups()],(e,n,r)=>{var i,s,o,a,l,u;return[...(i=(s=e[0])==null?void 0:s.headers)!=null?i:[],...(o=(a=n[0])==null?void 0:a.headers)!=null?o:[],...(l=(u=r[0])==null?void 0:u.headers)!=null?l:[]].map(c=>c.getLeafHeaders()).flat()},Ln(t.options,$s))}};function sy(t,e,n,r){var i,s;let o=0;const a=function(f,d){d===void 0&&(d=1),o=Math.max(o,d),f.filter(v=>v.getIsVisible()).forEach(v=>{var x;(x=v.columns)!=null&&x.length&&a(v.columns,d+1)},0)};a(t);let l=[];const u=(f,d)=>{const v={depth:d,id:[r,`${d}`].filter(Boolean).join("_"),headers:[]},x=[];f.forEach(w=>{const g=[...x].reverse()[0],S=w.column.depth===v.depth;let _,T=!1;if(S&&w.column.parent?_=w.column.parent:(_=w.column,T=!0),g&&(g==null?void 0:g.column)===_)g.subHeaders.push(w);else{const L=LC(n,_,{id:[r,d,_.id,w==null?void 0:w.id].filter(Boolean).join("_"),isPlaceholder:T,placeholderId:T?`${x.filter(k=>k.column===_).length}`:void 0,depth:d,index:x.length});L.subHeaders.push(w),x.push(L)}v.headers.push(w),w.headerGroup=v}),l.push(v),d>0&&u(x,d-1)},c=e.map((f,d)=>LC(n,f,{depth:o,index:d}));u(c,o-1),l.reverse();const h=f=>f.filter(v=>v.column.getIsVisible()).map(v=>{let x=0,w=0,g=[0];v.subHeaders&&v.subHeaders.length?(g=[],h(v.subHeaders).forEach(_=>{let{colSpan:T,rowSpan:L}=_;x+=T,g.push(L)})):x=1;const S=Math.min(...g);return w=w+S,v.colSpan=x,v.rowSpan=w,{colSpan:x,rowSpan:w}});return h((i=(s=l[0])==null?void 0:s.headers)!=null?i:[]),l}const mX=(t,e,n,r,i,s,o)=>{let a={id:e,index:r,original:n,depth:i,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:l=>{if(a._valuesCache.hasOwnProperty(l))return a._valuesCache[l];const u=t.getColumn(l);if(u!=null&&u.accessorFn)return a._valuesCache[l]=u.accessorFn(a.original,r),a._valuesCache[l]},getUniqueValues:l=>{if(a._uniqueValuesCache.hasOwnProperty(l))return a._uniqueValuesCache[l];const u=t.getColumn(l);if(u!=null&&u.accessorFn)return u.columnDef.getUniqueValues?(a._uniqueValuesCache[l]=u.columnDef.getUniqueValues(a.original,r),a._uniqueValuesCache[l]):(a._uniqueValuesCache[l]=[a.getValue(l)],a._uniqueValuesCache[l])},renderValue:l=>{var u;return(u=a.getValue(l))!=null?u:t.options.renderFallbackValue},subRows:s??[],getLeafRows:()=>hX(a.subRows,l=>l.subRows),getParentRow:()=>a.parentId?t.getRow(a.parentId,!0):void 0,getParentRows:()=>{let l=[],u=a;for(;;){const c=u.getParentRow();if(!c)break;l.push(c),u=c}return l.reverse()},getAllCells:Cn(()=>[t.getAllLeafColumns()],l=>l.map(u=>fX(t,a,u,u.id)),Ln(t.options,"debugRows")),_getAllCellsByColumnId:Cn(()=>[a.getAllCells()],l=>l.reduce((u,c)=>(u[c.column.id]=c,u),{}),Ln(t.options,"debugRows"))};for(let l=0;l<t._features.length;l++){const u=t._features[l];u==null||u.createRow==null||u.createRow(a,t)}return a},gX={createColumn:(t,e)=>{t._getFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,t.id),t.getFacetedRowModel=()=>t._getFacetedRowModel?t._getFacetedRowModel():e.getPreFilteredRowModel(),t._getFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,t.id),t.getFacetedUniqueValues=()=>t._getFacetedUniqueValues?t._getFacetedUniqueValues():new Map,t._getFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,t.id),t.getFacetedMinMaxValues=()=>{if(t._getFacetedMinMaxValues)return t._getFacetedMinMaxValues()}}},cN=(t,e,n)=>{var r,i;const s=n==null||(r=n.toString())==null?void 0:r.toLowerCase();return Boolean((i=t.getValue(e))==null||(i=i.toString())==null||(i=i.toLowerCase())==null?void 0:i.includes(s))};cN.autoRemove=t=>_l(t);const hN=(t,e,n)=>{var r;return Boolean((r=t.getValue(e))==null||(r=r.toString())==null?void 0:r.includes(n))};hN.autoRemove=t=>_l(t);const fN=(t,e,n)=>{var r;return((r=t.getValue(e))==null||(r=r.toString())==null?void 0:r.toLowerCase())===(n==null?void 0:n.toLowerCase())};fN.autoRemove=t=>_l(t);const dN=(t,e,n)=>{var r;return(r=t.getValue(e))==null?void 0:r.includes(n)};dN.autoRemove=t=>_l(t);const pN=(t,e,n)=>!n.some(r=>{var i;return!((i=t.getValue(e))!=null&&i.includes(r))});pN.autoRemove=t=>_l(t)||!(t!=null&&t.length);const mN=(t,e,n)=>n.some(r=>{var i;return(i=t.getValue(e))==null?void 0:i.includes(r)});mN.autoRemove=t=>_l(t)||!(t!=null&&t.length);const gN=(t,e,n)=>t.getValue(e)===n;gN.autoRemove=t=>_l(t);const vN=(t,e,n)=>t.getValue(e)==n;vN.autoRemove=t=>_l(t);const E3=(t,e,n)=>{let[r,i]=n;const s=t.getValue(e);return s>=r&&s<=i};E3.resolveFilterValue=t=>{let[e,n]=t,r=typeof e!="number"?parseFloat(e):e,i=typeof n!="number"?parseFloat(n):n,s=e===null||Number.isNaN(r)?-1/0:r,o=n===null||Number.isNaN(i)?1/0:i;if(s>o){const a=s;s=o,o=a}return[s,o]};E3.autoRemove=t=>_l(t)||_l(t[0])&&_l(t[1]);const Hu={includesString:cN,includesStringSensitive:hN,equalsString:fN,arrIncludes:dN,arrIncludesAll:pN,arrIncludesSome:mN,equals:gN,weakEquals:vN,inNumberRange:E3};function _l(t){return t==null||t===""}const vX={getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:t=>({columnFilters:[],...t}),getDefaultOptions:t=>({onColumnFiltersChange:ua("columnFilters",t),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(t,e)=>{t.getAutoFilterFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(t.id);return typeof r=="string"?Hu.includesString:typeof r=="number"?Hu.inNumberRange:typeof r=="boolean"||r!==null&&typeof r=="object"?Hu.equals:Array.isArray(r)?Hu.arrIncludes:Hu.weakEquals},t.getFilterFn=()=>{var n,r;return Dx(t.columnDef.filterFn)?t.columnDef.filterFn:t.columnDef.filterFn==="auto"?t.getAutoFilterFn():(n=(r=e.options.filterFns)==null?void 0:r[t.columnDef.filterFn])!=null?n:Hu[t.columnDef.filterFn]},t.getCanFilter=()=>{var n,r,i;return((n=t.columnDef.enableColumnFilter)!=null?n:!0)&&((r=e.options.enableColumnFilters)!=null?r:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&!!t.accessorFn},t.getIsFiltered=()=>t.getFilterIndex()>-1,t.getFilterValue=()=>{var n;return(n=e.getState().columnFilters)==null||(n=n.find(r=>r.id===t.id))==null?void 0:n.value},t.getFilterIndex=()=>{var n,r;return(n=(r=e.getState().columnFilters)==null?void 0:r.findIndex(i=>i.id===t.id))!=null?n:-1},t.setFilterValue=n=>{e.setColumnFilters(r=>{const i=t.getFilterFn(),s=r==null?void 0:r.find(c=>c.id===t.id),o=dh(n,s?s.value:void 0);if(PC(i,o,t)){var a;return(a=r==null?void 0:r.filter(c=>c.id!==t.id))!=null?a:[]}const l={id:t.id,value:o};if(s){var u;return(u=r==null?void 0:r.map(c=>c.id===t.id?l:c))!=null?u:[]}return r!=null&&r.length?[...r,l]:[l]})}},createRow:(t,e)=>{t.columnFilters={},t.columnFiltersMeta={}},createTable:t=>{t.setColumnFilters=e=>{const n=t.getAllLeafColumns(),r=i=>{var s;return(s=dh(e,i))==null?void 0:s.filter(o=>{const a=n.find(l=>l.id===o.id);if(a){const l=a.getFilterFn();if(PC(l,o.value,a))return!1}return!0})};t.options.onColumnFiltersChange==null||t.options.onColumnFiltersChange(r)},t.resetColumnFilters=e=>{var n,r;t.setColumnFilters(e?[]:(n=(r=t.initialState)==null?void 0:r.columnFilters)!=null?n:[])},t.getPreFilteredRowModel=()=>t.getCoreRowModel(),t.getFilteredRowModel=()=>(!t._getFilteredRowModel&&t.options.getFilteredRowModel&&(t._getFilteredRowModel=t.options.getFilteredRowModel(t)),t.options.manualFiltering||!t._getFilteredRowModel?t.getPreFilteredRowModel():t._getFilteredRowModel())}};function PC(t,e,n){return(t&&t.autoRemove?t.autoRemove(e,n):!1)||typeof e>"u"||typeof e=="string"&&!e}const yX=(t,e,n)=>n.reduce((r,i)=>{const s=i.getValue(t);return r+(typeof s=="number"?s:0)},0),xX=(t,e,n)=>{let r;return n.forEach(i=>{const s=i.getValue(t);s!=null&&(r>s||r===void 0&&s>=s)&&(r=s)}),r},wX=(t,e,n)=>{let r;return n.forEach(i=>{const s=i.getValue(t);s!=null&&(r<s||r===void 0&&s>=s)&&(r=s)}),r},SX=(t,e,n)=>{let r,i;return n.forEach(s=>{const o=s.getValue(t);o!=null&&(r===void 0?o>=o&&(r=i=o):(r>o&&(r=o),i<o&&(i=o)))}),[r,i]},_X=(t,e)=>{let n=0,r=0;if(e.forEach(i=>{let s=i.getValue(t);s!=null&&(s=+s)>=s&&(++n,r+=s)}),n)return r/n},bX=(t,e)=>{if(!e.length)return;const n=e.map(s=>s.getValue(t));if(!cX(n))return;if(n.length===1)return n[0];const r=Math.floor(n.length/2),i=n.sort((s,o)=>s-o);return n.length%2!==0?i[r]:(i[r-1]+i[r])/2},MX=(t,e)=>Array.from(new Set(e.map(n=>n.getValue(t))).values()),EX=(t,e)=>new Set(e.map(n=>n.getValue(t))).size,AX=(t,e)=>e.length,US={sum:yX,min:xX,max:wX,extent:SX,mean:_X,median:bX,unique:MX,uniqueCount:EX,count:AX},TX={getDefaultColumnDef:()=>({aggregatedCell:t=>{var e,n;return(e=(n=t.getValue())==null||n.toString==null?void 0:n.toString())!=null?e:null},aggregationFn:"auto"}),getInitialState:t=>({grouping:[],...t}),getDefaultOptions:t=>({onGroupingChange:ua("grouping",t),groupedColumnMode:"reorder"}),createColumn:(t,e)=>{t.toggleGrouping=()=>{e.setGrouping(n=>n!=null&&n.includes(t.id)?n.filter(r=>r!==t.id):[...n??[],t.id])},t.getCanGroup=()=>{var n,r;return((n=t.columnDef.enableGrouping)!=null?n:!0)&&((r=e.options.enableGrouping)!=null?r:!0)&&(!!t.accessorFn||!!t.columnDef.getGroupingValue)},t.getIsGrouped=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.includes(t.id)},t.getGroupedIndex=()=>{var n;return(n=e.getState().grouping)==null?void 0:n.indexOf(t.id)},t.getToggleGroupingHandler=()=>{const n=t.getCanGroup();return()=>{n&&t.toggleGrouping()}},t.getAutoAggregationFn=()=>{const n=e.getCoreRowModel().flatRows[0],r=n==null?void 0:n.getValue(t.id);if(typeof r=="number")return US.sum;if(Object.prototype.toString.call(r)==="[object Date]")return US.extent},t.getAggregationFn=()=>{var n,r;if(!t)throw new Error;return Dx(t.columnDef.aggregationFn)?t.columnDef.aggregationFn:t.columnDef.aggregationFn==="auto"?t.getAutoAggregationFn():(n=(r=e.options.aggregationFns)==null?void 0:r[t.columnDef.aggregationFn])!=null?n:US[t.columnDef.aggregationFn]}},createTable:t=>{t.setGrouping=e=>t.options.onGroupingChange==null?void 0:t.options.onGroupingChange(e),t.resetGrouping=e=>{var n,r;t.setGrouping(e?[]:(n=(r=t.initialState)==null?void 0:r.grouping)!=null?n:[])},t.getPreGroupedRowModel=()=>t.getFilteredRowModel(),t.getGroupedRowModel=()=>(!t._getGroupedRowModel&&t.options.getGroupedRowModel&&(t._getGroupedRowModel=t.options.getGroupedRowModel(t)),t.options.manualGrouping||!t._getGroupedRowModel?t.getPreGroupedRowModel():t._getGroupedRowModel())},createRow:(t,e)=>{t.getIsGrouped=()=>!!t.groupingColumnId,t.getGroupingValue=n=>{if(t._groupingValuesCache.hasOwnProperty(n))return t._groupingValuesCache[n];const r=e.getColumn(n);return r!=null&&r.columnDef.getGroupingValue?(t._groupingValuesCache[n]=r.columnDef.getGroupingValue(t.original),t._groupingValuesCache[n]):t.getValue(n)},t._groupingValuesCache={}},createCell:(t,e,n,r)=>{t.getIsGrouped=()=>e.getIsGrouped()&&e.id===n.groupingColumnId,t.getIsPlaceholder=()=>!t.getIsGrouped()&&e.getIsGrouped(),t.getIsAggregated=()=>{var i;return!t.getIsGrouped()&&!t.getIsPlaceholder()&&!!((i=n.subRows)!=null&&i.length)}}};function CX(t,e,n){if(!(e!=null&&e.length)||!n)return t;const r=t.filter(s=>!e.includes(s.id));return n==="remove"?r:[...e.map(s=>t.find(o=>o.id===s)).filter(Boolean),...r]}const LX={getInitialState:t=>({columnOrder:[],...t}),getDefaultOptions:t=>({onColumnOrderChange:ua("columnOrder",t)}),createColumn:(t,e)=>{t.getIndex=Cn(n=>[t0(e,n)],n=>n.findIndex(r=>r.id===t.id),Ln(e.options,"debugColumns")),t.getIsFirstColumn=n=>{var r;return((r=t0(e,n)[0])==null?void 0:r.id)===t.id},t.getIsLastColumn=n=>{var r;const i=t0(e,n);return((r=i[i.length-1])==null?void 0:r.id)===t.id}},createTable:t=>{t.setColumnOrder=e=>t.options.onColumnOrderChange==null?void 0:t.options.onColumnOrderChange(e),t.resetColumnOrder=e=>{var n;t.setColumnOrder(e?[]:(n=t.initialState.columnOrder)!=null?n:[])},t._getOrderColumnsFn=Cn(()=>[t.getState().columnOrder,t.getState().grouping,t.options.groupedColumnMode],(e,n,r)=>i=>{let s=[];if(!(e!=null&&e.length))s=i;else{const o=[...e],a=[...i];for(;a.length&&o.length;){const l=o.shift(),u=a.findIndex(c=>c.id===l);u>-1&&s.push(a.splice(u,1)[0])}s=[...s,...a]}return CX(s,n,r)},Ln(t.options,"debugTable"))}},BS=()=>({left:[],right:[]}),PX={getInitialState:t=>({columnPinning:BS(),...t}),getDefaultOptions:t=>({onColumnPinningChange:ua("columnPinning",t)}),createColumn:(t,e)=>{t.pin=n=>{const r=t.getLeafColumns().map(i=>i.id).filter(Boolean);e.setColumnPinning(i=>{var s,o;if(n==="right"){var a,l;return{left:((a=i==null?void 0:i.left)!=null?a:[]).filter(h=>!(r!=null&&r.includes(h))),right:[...((l=i==null?void 0:i.right)!=null?l:[]).filter(h=>!(r!=null&&r.includes(h))),...r]}}if(n==="left"){var u,c;return{left:[...((u=i==null?void 0:i.left)!=null?u:[]).filter(h=>!(r!=null&&r.includes(h))),...r],right:((c=i==null?void 0:i.right)!=null?c:[]).filter(h=>!(r!=null&&r.includes(h)))}}return{left:((s=i==null?void 0:i.left)!=null?s:[]).filter(h=>!(r!=null&&r.includes(h))),right:((o=i==null?void 0:i.right)!=null?o:[]).filter(h=>!(r!=null&&r.includes(h)))}})},t.getCanPin=()=>t.getLeafColumns().some(r=>{var i,s,o;return((i=r.columnDef.enablePinning)!=null?i:!0)&&((s=(o=e.options.enableColumnPinning)!=null?o:e.options.enablePinning)!=null?s:!0)}),t.getIsPinned=()=>{const n=t.getLeafColumns().map(a=>a.id),{left:r,right:i}=e.getState().columnPinning,s=n.some(a=>r==null?void 0:r.includes(a)),o=n.some(a=>i==null?void 0:i.includes(a));return s?"left":o?"right":!1},t.getPinnedIndex=()=>{var n,r;const i=t.getIsPinned();return i?(n=(r=e.getState().columnPinning)==null||(r=r[i])==null?void 0:r.indexOf(t.id))!=null?n:-1:0}},createRow:(t,e)=>{t.getCenterVisibleCells=Cn(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left,e.getState().columnPinning.right],(n,r,i)=>{const s=[...r??[],...i??[]];return n.filter(o=>!s.includes(o.column.id))},Ln(e.options,"debugRows")),t.getLeftVisibleCells=Cn(()=>[t._getAllVisibleCells(),e.getState().columnPinning.left],(n,r)=>(r??[]).map(s=>n.find(o=>o.column.id===s)).filter(Boolean).map(s=>({...s,position:"left"})),Ln(e.options,"debugRows")),t.getRightVisibleCells=Cn(()=>[t._getAllVisibleCells(),e.getState().columnPinning.right],(n,r)=>(r??[]).map(s=>n.find(o=>o.column.id===s)).filter(Boolean).map(s=>({...s,position:"right"})),Ln(e.options,"debugRows"))},createTable:t=>{t.setColumnPinning=e=>t.options.onColumnPinningChange==null?void 0:t.options.onColumnPinningChange(e),t.resetColumnPinning=e=>{var n,r;return t.setColumnPinning(e?BS():(n=(r=t.initialState)==null?void 0:r.columnPinning)!=null?n:BS())},t.getIsSomeColumnsPinned=e=>{var n;const r=t.getState().columnPinning;if(!e){var i,s;return Boolean(((i=r.left)==null?void 0:i.length)||((s=r.right)==null?void 0:s.length))}return Boolean((n=r[e])==null?void 0:n.length)},t.getLeftLeafColumns=Cn(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left],(e,n)=>(n??[]).map(r=>e.find(i=>i.id===r)).filter(Boolean),Ln(t.options,"debugColumns")),t.getRightLeafColumns=Cn(()=>[t.getAllLeafColumns(),t.getState().columnPinning.right],(e,n)=>(n??[]).map(r=>e.find(i=>i.id===r)).filter(Boolean),Ln(t.options,"debugColumns")),t.getCenterLeafColumns=Cn(()=>[t.getAllLeafColumns(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,n,r)=>{const i=[...n??[],...r??[]];return e.filter(s=>!i.includes(s.id))},Ln(t.options,"debugColumns"))}},oy={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},zS=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),RX={getDefaultColumnDef:()=>oy,getInitialState:t=>({columnSizing:{},columnSizingInfo:zS(),...t}),getDefaultOptions:t=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:ua("columnSizing",t),onColumnSizingInfoChange:ua("columnSizingInfo",t)}),createColumn:(t,e)=>{t.getSize=()=>{var n,r,i;const s=e.getState().columnSizing[t.id];return Math.min(Math.max((n=t.columnDef.minSize)!=null?n:oy.minSize,(r=s??t.columnDef.size)!=null?r:oy.size),(i=t.columnDef.maxSize)!=null?i:oy.maxSize)},t.getStart=Cn(n=>[n,t0(e,n),e.getState().columnSizing],(n,r)=>r.slice(0,t.getIndex(n)).reduce((i,s)=>i+s.getSize(),0),Ln(e.options,"debugColumns")),t.getAfter=Cn(n=>[n,t0(e,n),e.getState().columnSizing],(n,r)=>r.slice(t.getIndex(n)+1).reduce((i,s)=>i+s.getSize(),0),Ln(e.options,"debugColumns")),t.resetSize=()=>{e.setColumnSizing(n=>{let{[t.id]:r,...i}=n;return i})},t.getCanResize=()=>{var n,r;return((n=t.columnDef.enableResizing)!=null?n:!0)&&((r=e.options.enableColumnResizing)!=null?r:!0)},t.getIsResizing=()=>e.getState().columnSizingInfo.isResizingColumn===t.id},createHeader:(t,e)=>{t.getSize=()=>{let n=0;const r=i=>{if(i.subHeaders.length)i.subHeaders.forEach(r);else{var s;n+=(s=i.column.getSize())!=null?s:0}};return r(t),n},t.getStart=()=>{if(t.index>0){const n=t.headerGroup.headers[t.index-1];return n.getStart()+n.getSize()}return 0},t.getResizeHandler=n=>{const r=e.getColumn(t.column.id),i=r==null?void 0:r.getCanResize();return s=>{if(!r||!i||(s.persist==null||s.persist(),HS(s)&&s.touches&&s.touches.length>1))return;const o=t.getSize(),a=t?t.getLeafHeaders().map(g=>[g.column.id,g.column.getSize()]):[[r.id,r.getSize()]],l=HS(s)?Math.round(s.touches[0].clientX):s.clientX,u={},c=(g,S)=>{typeof S=="number"&&(e.setColumnSizingInfo(_=>{var T,L;const k=e.options.columnResizeDirection==="rtl"?-1:1,N=(S-((T=_==null?void 0:_.startOffset)!=null?T:0))*k,R=Math.max(N/((L=_==null?void 0:_.startSize)!=null?L:0),-.999999);return _.columnSizingStart.forEach(P=>{let[D,O]=P;u[D]=Math.round(Math.max(O+O*R,0)*100)/100}),{..._,deltaOffset:N,deltaPercentage:R}}),(e.options.columnResizeMode==="onChange"||g==="end")&&e.setColumnSizing(_=>({..._,...u})))},h=g=>c("move",g),f=g=>{c("end",g),e.setColumnSizingInfo(S=>({...S,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},d=n||typeof document<"u"?document:null,v={moveHandler:g=>h(g.clientX),upHandler:g=>{d==null||d.removeEventListener("mousemove",v.moveHandler),d==null||d.removeEventListener("mouseup",v.upHandler),f(g.clientX)}},x={moveHandler:g=>(g.cancelable&&(g.preventDefault(),g.stopPropagation()),h(g.touches[0].clientX),!1),upHandler:g=>{var S;d==null||d.removeEventListener("touchmove",x.moveHandler),d==null||d.removeEventListener("touchend",x.upHandler),g.cancelable&&(g.preventDefault(),g.stopPropagation()),f((S=g.touches[0])==null?void 0:S.clientX)}},w=kX()?{passive:!1}:!1;HS(s)?(d==null||d.addEventListener("touchmove",x.moveHandler,w),d==null||d.addEventListener("touchend",x.upHandler,w)):(d==null||d.addEventListener("mousemove",v.moveHandler,w),d==null||d.addEventListener("mouseup",v.upHandler,w)),e.setColumnSizingInfo(g=>({...g,startOffset:l,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:a,isResizingColumn:r.id}))}}},createTable:t=>{t.setColumnSizing=e=>t.options.onColumnSizingChange==null?void 0:t.options.onColumnSizingChange(e),t.setColumnSizingInfo=e=>t.options.onColumnSizingInfoChange==null?void 0:t.options.onColumnSizingInfoChange(e),t.resetColumnSizing=e=>{var n;t.setColumnSizing(e?{}:(n=t.initialState.columnSizing)!=null?n:{})},t.resetHeaderSizeInfo=e=>{var n;t.setColumnSizingInfo(e?zS():(n=t.initialState.columnSizingInfo)!=null?n:zS())},t.getTotalSize=()=>{var e,n;return(e=(n=t.getHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},t.getLeftTotalSize=()=>{var e,n;return(e=(n=t.getLeftHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},t.getCenterTotalSize=()=>{var e,n;return(e=(n=t.getCenterHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0},t.getRightTotalSize=()=>{var e,n;return(e=(n=t.getRightHeaderGroups()[0])==null?void 0:n.headers.reduce((r,i)=>r+i.getSize(),0))!=null?e:0}}};let ay=null;function kX(){if(typeof ay=="boolean")return ay;let t=!1;try{const e={get passive(){return t=!0,!1}},n=()=>{};window.addEventListener("test",n,e),window.removeEventListener("test",n)}catch{t=!1}return ay=t,ay}function HS(t){return t.type==="touchstart"}const IX={getInitialState:t=>({columnVisibility:{},...t}),getDefaultOptions:t=>({onColumnVisibilityChange:ua("columnVisibility",t)}),createColumn:(t,e)=>{t.toggleVisibility=n=>{t.getCanHide()&&e.setColumnVisibility(r=>({...r,[t.id]:n??!t.getIsVisible()}))},t.getIsVisible=()=>{var n,r;const i=t.columns;return(n=i.length?i.some(s=>s.getIsVisible()):(r=e.getState().columnVisibility)==null?void 0:r[t.id])!=null?n:!0},t.getCanHide=()=>{var n,r;return((n=t.columnDef.enableHiding)!=null?n:!0)&&((r=e.options.enableHiding)!=null?r:!0)},t.getToggleVisibilityHandler=()=>n=>{t.toggleVisibility==null||t.toggleVisibility(n.target.checked)}},createRow:(t,e)=>{t._getAllVisibleCells=Cn(()=>[t.getAllCells(),e.getState().columnVisibility],n=>n.filter(r=>r.column.getIsVisible()),Ln(e.options,"debugRows")),t.getVisibleCells=Cn(()=>[t.getLeftVisibleCells(),t.getCenterVisibleCells(),t.getRightVisibleCells()],(n,r,i)=>[...n,...r,...i],Ln(e.options,"debugRows"))},createTable:t=>{const e=(n,r)=>Cn(()=>[r(),r().filter(i=>i.getIsVisible()).map(i=>i.id).join("_")],i=>i.filter(s=>s.getIsVisible==null?void 0:s.getIsVisible()),Ln(t.options,"debugColumns"));t.getVisibleFlatColumns=e("getVisibleFlatColumns",()=>t.getAllFlatColumns()),t.getVisibleLeafColumns=e("getVisibleLeafColumns",()=>t.getAllLeafColumns()),t.getLeftVisibleLeafColumns=e("getLeftVisibleLeafColumns",()=>t.getLeftLeafColumns()),t.getRightVisibleLeafColumns=e("getRightVisibleLeafColumns",()=>t.getRightLeafColumns()),t.getCenterVisibleLeafColumns=e("getCenterVisibleLeafColumns",()=>t.getCenterLeafColumns()),t.setColumnVisibility=n=>t.options.onColumnVisibilityChange==null?void 0:t.options.onColumnVisibilityChange(n),t.resetColumnVisibility=n=>{var r;t.setColumnVisibility(n?{}:(r=t.initialState.columnVisibility)!=null?r:{})},t.toggleAllColumnsVisible=n=>{var r;n=(r=n)!=null?r:!t.getIsAllColumnsVisible(),t.setColumnVisibility(t.getAllLeafColumns().reduce((i,s)=>({...i,[s.id]:n||!(s.getCanHide!=null&&s.getCanHide())}),{}))},t.getIsAllColumnsVisible=()=>!t.getAllLeafColumns().some(n=>!(n.getIsVisible!=null&&n.getIsVisible())),t.getIsSomeColumnsVisible=()=>t.getAllLeafColumns().some(n=>n.getIsVisible==null?void 0:n.getIsVisible()),t.getToggleAllColumnsVisibilityHandler=()=>n=>{var r;t.toggleAllColumnsVisible((r=n.target)==null?void 0:r.checked)}}};function t0(t,e){return e?e==="center"?t.getCenterVisibleLeafColumns():e==="left"?t.getLeftVisibleLeafColumns():t.getRightVisibleLeafColumns():t.getVisibleLeafColumns()}const NX={createTable:t=>{t._getGlobalFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,"__global__"),t.getGlobalFacetedRowModel=()=>t.options.manualFiltering||!t._getGlobalFacetedRowModel?t.getPreFilteredRowModel():t._getGlobalFacetedRowModel(),t._getGlobalFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,"__global__"),t.getGlobalFacetedUniqueValues=()=>t._getGlobalFacetedUniqueValues?t._getGlobalFacetedUniqueValues():new Map,t._getGlobalFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,"__global__"),t.getGlobalFacetedMinMaxValues=()=>{if(t._getGlobalFacetedMinMaxValues)return t._getGlobalFacetedMinMaxValues()}}},FX={getInitialState:t=>({globalFilter:void 0,...t}),getDefaultOptions:t=>({onGlobalFilterChange:ua("globalFilter",t),globalFilterFn:"auto",getColumnCanGlobalFilter:e=>{var n;const r=(n=t.getCoreRowModel().flatRows[0])==null||(n=n._getAllCellsByColumnId()[e.id])==null?void 0:n.getValue();return typeof r=="string"||typeof r=="number"}}),createColumn:(t,e)=>{t.getCanGlobalFilter=()=>{var n,r,i,s;return((n=t.columnDef.enableGlobalFilter)!=null?n:!0)&&((r=e.options.enableGlobalFilter)!=null?r:!0)&&((i=e.options.enableFilters)!=null?i:!0)&&((s=e.options.getColumnCanGlobalFilter==null?void 0:e.options.getColumnCanGlobalFilter(t))!=null?s:!0)&&!!t.accessorFn}},createTable:t=>{t.getGlobalAutoFilterFn=()=>Hu.includesString,t.getGlobalFilterFn=()=>{var e,n;const{globalFilterFn:r}=t.options;return Dx(r)?r:r==="auto"?t.getGlobalAutoFilterFn():(e=(n=t.options.filterFns)==null?void 0:n[r])!=null?e:Hu[r]},t.setGlobalFilter=e=>{t.options.onGlobalFilterChange==null||t.options.onGlobalFilterChange(e)},t.resetGlobalFilter=e=>{t.setGlobalFilter(e?void 0:t.initialState.globalFilter)}}},DX={getInitialState:t=>({expanded:{},...t}),getDefaultOptions:t=>({onExpandedChange:ua("expanded",t),paginateExpandedRows:!0}),createTable:t=>{let e=!1,n=!1;t._autoResetExpanded=()=>{var r,i;if(!e){t._queue(()=>{e=!0});return}if((r=(i=t.options.autoResetAll)!=null?i:t.options.autoResetExpanded)!=null?r:!t.options.manualExpanding){if(n)return;n=!0,t._queue(()=>{t.resetExpanded(),n=!1})}},t.setExpanded=r=>t.options.onExpandedChange==null?void 0:t.options.onExpandedChange(r),t.toggleAllRowsExpanded=r=>{r??!t.getIsAllRowsExpanded()?t.setExpanded(!0):t.setExpanded({})},t.resetExpanded=r=>{var i,s;t.setExpanded(r?{}:(i=(s=t.initialState)==null?void 0:s.expanded)!=null?i:{})},t.getCanSomeRowsExpand=()=>t.getPrePaginationRowModel().flatRows.some(r=>r.getCanExpand()),t.getToggleAllRowsExpandedHandler=()=>r=>{r.persist==null||r.persist(),t.toggleAllRowsExpanded()},t.getIsSomeRowsExpanded=()=>{const r=t.getState().expanded;return r===!0||Object.values(r).some(Boolean)},t.getIsAllRowsExpanded=()=>{const r=t.getState().expanded;return typeof r=="boolean"?r===!0:!(!Object.keys(r).length||t.getRowModel().flatRows.some(i=>!i.getIsExpanded()))},t.getExpandedDepth=()=>{let r=0;return(t.getState().expanded===!0?Object.keys(t.getRowModel().rowsById):Object.keys(t.getState().expanded)).forEach(s=>{const o=s.split(".");r=Math.max(r,o.length)}),r},t.getPreExpandedRowModel=()=>t.getSortedRowModel(),t.getExpandedRowModel=()=>(!t._getExpandedRowModel&&t.options.getExpandedRowModel&&(t._getExpandedRowModel=t.options.getExpandedRowModel(t)),t.options.manualExpanding||!t._getExpandedRowModel?t.getPreExpandedRowModel():t._getExpandedRowModel())},createRow:(t,e)=>{t.toggleExpanded=n=>{e.setExpanded(r=>{var i;const s=r===!0?!0:!!(r!=null&&r[t.id]);let o={};if(r===!0?Object.keys(e.getRowModel().rowsById).forEach(a=>{o[a]=!0}):o=r,n=(i=n)!=null?i:!s,!s&&n)return{...o,[t.id]:!0};if(s&&!n){const{[t.id]:a,...l}=o;return l}return r})},t.getIsExpanded=()=>{var n;const r=e.getState().expanded;return!!((n=e.options.getIsRowExpanded==null?void 0:e.options.getIsRowExpanded(t))!=null?n:r===!0||r!=null&&r[t.id])},t.getCanExpand=()=>{var n,r,i;return(n=e.options.getRowCanExpand==null?void 0:e.options.getRowCanExpand(t))!=null?n:((r=e.options.enableExpanding)!=null?r:!0)&&!!((i=t.subRows)!=null&&i.length)},t.getIsAllParentsExpanded=()=>{let n=!0,r=t;for(;n&&r.parentId;)r=e.getRow(r.parentId,!0),n=r.getIsExpanded();return n},t.getToggleExpandedHandler=()=>{const n=t.getCanExpand();return()=>{n&&t.toggleExpanded()}}}},a5=0,l5=10,GS=()=>({pageIndex:a5,pageSize:l5}),OX={getInitialState:t=>({...t,pagination:{...GS(),...t==null?void 0:t.pagination}}),getDefaultOptions:t=>({onPaginationChange:ua("pagination",t)}),createTable:t=>{let e=!1,n=!1;t._autoResetPageIndex=()=>{var r,i;if(!e){t._queue(()=>{e=!0});return}if((r=(i=t.options.autoResetAll)!=null?i:t.options.autoResetPageIndex)!=null?r:!t.options.manualPagination){if(n)return;n=!0,t._queue(()=>{t.resetPageIndex(),n=!1})}},t.setPagination=r=>{const i=s=>dh(r,s);return t.options.onPaginationChange==null?void 0:t.options.onPaginationChange(i)},t.resetPagination=r=>{var i;t.setPagination(r?GS():(i=t.initialState.pagination)!=null?i:GS())},t.setPageIndex=r=>{t.setPagination(i=>{let s=dh(r,i.pageIndex);const o=typeof t.options.pageCount>"u"||t.options.pageCount===-1?Number.MAX_SAFE_INTEGER:t.options.pageCount-1;return s=Math.max(0,Math.min(s,o)),{...i,pageIndex:s}})},t.resetPageIndex=r=>{var i,s;t.setPageIndex(r?a5:(i=(s=t.initialState)==null||(s=s.pagination)==null?void 0:s.pageIndex)!=null?i:a5)},t.resetPageSize=r=>{var i,s;t.setPageSize(r?l5:(i=(s=t.initialState)==null||(s=s.pagination)==null?void 0:s.pageSize)!=null?i:l5)},t.setPageSize=r=>{t.setPagination(i=>{const s=Math.max(1,dh(r,i.pageSize)),o=i.pageSize*i.pageIndex,a=Math.floor(o/s);return{...i,pageIndex:a,pageSize:s}})},t.setPageCount=r=>t.setPagination(i=>{var s;let o=dh(r,(s=t.options.pageCount)!=null?s:-1);return typeof o=="number"&&(o=Math.max(-1,o)),{...i,pageCount:o}}),t.getPageOptions=Cn(()=>[t.getPageCount()],r=>{let i=[];return r&&r>0&&(i=[...new Array(r)].fill(null).map((s,o)=>o)),i},Ln(t.options,"debugTable")),t.getCanPreviousPage=()=>t.getState().pagination.pageIndex>0,t.getCanNextPage=()=>{const{pageIndex:r}=t.getState().pagination,i=t.getPageCount();return i===-1?!0:i===0?!1:r<i-1},t.previousPage=()=>t.setPageIndex(r=>r-1),t.nextPage=()=>t.setPageIndex(r=>r+1),t.firstPage=()=>t.setPageIndex(0),t.lastPage=()=>t.setPageIndex(t.getPageCount()-1),t.getPrePaginationRowModel=()=>t.getExpandedRowModel(),t.getPaginationRowModel=()=>(!t._getPaginationRowModel&&t.options.getPaginationRowModel&&(t._getPaginationRowModel=t.options.getPaginationRowModel(t)),t.options.manualPagination||!t._getPaginationRowModel?t.getPrePaginationRowModel():t._getPaginationRowModel()),t.getPageCount=()=>{var r;return(r=t.options.pageCount)!=null?r:Math.ceil(t.getRowCount()/t.getState().pagination.pageSize)},t.getRowCount=()=>{var r;return(r=t.options.rowCount)!=null?r:t.getPrePaginationRowModel().rows.length}}},VS=()=>({top:[],bottom:[]}),UX={getInitialState:t=>({rowPinning:VS(),...t}),getDefaultOptions:t=>({onRowPinningChange:ua("rowPinning",t)}),createRow:(t,e)=>{t.pin=(n,r,i)=>{const s=r?t.getLeafRows().map(l=>{let{id:u}=l;return u}):[],o=i?t.getParentRows().map(l=>{let{id:u}=l;return u}):[],a=new Set([...o,t.id,...s]);e.setRowPinning(l=>{var u,c;if(n==="bottom"){var h,f;return{top:((h=l==null?void 0:l.top)!=null?h:[]).filter(x=>!(a!=null&&a.has(x))),bottom:[...((f=l==null?void 0:l.bottom)!=null?f:[]).filter(x=>!(a!=null&&a.has(x))),...Array.from(a)]}}if(n==="top"){var d,v;return{top:[...((d=l==null?void 0:l.top)!=null?d:[]).filter(x=>!(a!=null&&a.has(x))),...Array.from(a)],bottom:((v=l==null?void 0:l.bottom)!=null?v:[]).filter(x=>!(a!=null&&a.has(x)))}}return{top:((u=l==null?void 0:l.top)!=null?u:[]).filter(x=>!(a!=null&&a.has(x))),bottom:((c=l==null?void 0:l.bottom)!=null?c:[]).filter(x=>!(a!=null&&a.has(x)))}})},t.getCanPin=()=>{var n;const{enableRowPinning:r,enablePinning:i}=e.options;return typeof r=="function"?r(t):(n=r??i)!=null?n:!0},t.getIsPinned=()=>{const n=[t.id],{top:r,bottom:i}=e.getState().rowPinning,s=n.some(a=>r==null?void 0:r.includes(a)),o=n.some(a=>i==null?void 0:i.includes(a));return s?"top":o?"bottom":!1},t.getPinnedIndex=()=>{var n,r;const i=t.getIsPinned();if(!i)return-1;const s=(n=i==="top"?e.getTopRows():e.getBottomRows())==null?void 0:n.map(o=>{let{id:a}=o;return a});return(r=s==null?void 0:s.indexOf(t.id))!=null?r:-1}},createTable:t=>{t.setRowPinning=e=>t.options.onRowPinningChange==null?void 0:t.options.onRowPinningChange(e),t.resetRowPinning=e=>{var n,r;return t.setRowPinning(e?VS():(n=(r=t.initialState)==null?void 0:r.rowPinning)!=null?n:VS())},t.getIsSomeRowsPinned=e=>{var n;const r=t.getState().rowPinning;if(!e){var i,s;return Boolean(((i=r.top)==null?void 0:i.length)||((s=r.bottom)==null?void 0:s.length))}return Boolean((n=r[e])==null?void 0:n.length)},t._getPinnedRows=(e,n,r)=>{var i;return((i=t.options.keepPinnedRows)==null||i?(n??[]).map(o=>{const a=t.getRow(o,!0);return a.getIsAllParentsExpanded()?a:null}):(n??[]).map(o=>e.find(a=>a.id===o))).filter(Boolean).map(o=>({...o,position:r}))},t.getTopRows=Cn(()=>[t.getRowModel().rows,t.getState().rowPinning.top],(e,n)=>t._getPinnedRows(e,n,"top"),Ln(t.options,"debugRows")),t.getBottomRows=Cn(()=>[t.getRowModel().rows,t.getState().rowPinning.bottom],(e,n)=>t._getPinnedRows(e,n,"bottom"),Ln(t.options,"debugRows")),t.getCenterRows=Cn(()=>[t.getRowModel().rows,t.getState().rowPinning.top,t.getState().rowPinning.bottom],(e,n,r)=>{const i=new Set([...n??[],...r??[]]);return e.filter(s=>!i.has(s.id))},Ln(t.options,"debugRows"))}},BX={getInitialState:t=>({rowSelection:{},...t}),getDefaultOptions:t=>({onRowSelectionChange:ua("rowSelection",t),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:t=>{t.setRowSelection=e=>t.options.onRowSelectionChange==null?void 0:t.options.onRowSelectionChange(e),t.resetRowSelection=e=>{var n;return t.setRowSelection(e?{}:(n=t.initialState.rowSelection)!=null?n:{})},t.toggleAllRowsSelected=e=>{t.setRowSelection(n=>{e=typeof e<"u"?e:!t.getIsAllRowsSelected();const r={...n},i=t.getPreGroupedRowModel().flatRows;return e?i.forEach(s=>{s.getCanSelect()&&(r[s.id]=!0)}):i.forEach(s=>{delete r[s.id]}),r})},t.toggleAllPageRowsSelected=e=>t.setRowSelection(n=>{const r=typeof e<"u"?e:!t.getIsAllPageRowsSelected(),i={...n};return t.getRowModel().rows.forEach(s=>{u5(i,s.id,r,!0,t)}),i}),t.getPreSelectedRowModel=()=>t.getCoreRowModel(),t.getSelectedRowModel=Cn(()=>[t.getState().rowSelection,t.getCoreRowModel()],(e,n)=>Object.keys(e).length?WS(t,n):{rows:[],flatRows:[],rowsById:{}},Ln(t.options,"debugTable")),t.getFilteredSelectedRowModel=Cn(()=>[t.getState().rowSelection,t.getFilteredRowModel()],(e,n)=>Object.keys(e).length?WS(t,n):{rows:[],flatRows:[],rowsById:{}},Ln(t.options,"debugTable")),t.getGroupedSelectedRowModel=Cn(()=>[t.getState().rowSelection,t.getSortedRowModel()],(e,n)=>Object.keys(e).length?WS(t,n):{rows:[],flatRows:[],rowsById:{}},Ln(t.options,"debugTable")),t.getIsAllRowsSelected=()=>{const e=t.getFilteredRowModel().flatRows,{rowSelection:n}=t.getState();let r=Boolean(e.length&&Object.keys(n).length);return r&&e.some(i=>i.getCanSelect()&&!n[i.id])&&(r=!1),r},t.getIsAllPageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows.filter(i=>i.getCanSelect()),{rowSelection:n}=t.getState();let r=!!e.length;return r&&e.some(i=>!n[i.id])&&(r=!1),r},t.getIsSomeRowsSelected=()=>{var e;const n=Object.keys((e=t.getState().rowSelection)!=null?e:{}).length;return n>0&&n<t.getFilteredRowModel().flatRows.length},t.getIsSomePageRowsSelected=()=>{const e=t.getPaginationRowModel().flatRows;return t.getIsAllPageRowsSelected()?!1:e.filter(n=>n.getCanSelect()).some(n=>n.getIsSelected()||n.getIsSomeSelected())},t.getToggleAllRowsSelectedHandler=()=>e=>{t.toggleAllRowsSelected(e.target.checked)},t.getToggleAllPageRowsSelectedHandler=()=>e=>{t.toggleAllPageRowsSelected(e.target.checked)}},createRow:(t,e)=>{t.toggleSelected=(n,r)=>{const i=t.getIsSelected();e.setRowSelection(s=>{var o;if(n=typeof n<"u"?n:!i,t.getCanSelect()&&i===n)return s;const a={...s};return u5(a,t.id,n,(o=r==null?void 0:r.selectChildren)!=null?o:!0,e),a})},t.getIsSelected=()=>{const{rowSelection:n}=e.getState();return A3(t,n)},t.getIsSomeSelected=()=>{const{rowSelection:n}=e.getState();return c5(t,n)==="some"},t.getIsAllSubRowsSelected=()=>{const{rowSelection:n}=e.getState();return c5(t,n)==="all"},t.getCanSelect=()=>{var n;return typeof e.options.enableRowSelection=="function"?e.options.enableRowSelection(t):(n=e.options.enableRowSelection)!=null?n:!0},t.getCanSelectSubRows=()=>{var n;return typeof e.options.enableSubRowSelection=="function"?e.options.enableSubRowSelection(t):(n=e.options.enableSubRowSelection)!=null?n:!0},t.getCanMultiSelect=()=>{var n;return typeof e.options.enableMultiRowSelection=="function"?e.options.enableMultiRowSelection(t):(n=e.options.enableMultiRowSelection)!=null?n:!0},t.getToggleSelectedHandler=()=>{const n=t.getCanSelect();return r=>{var i;n&&t.toggleSelected((i=r.target)==null?void 0:i.checked)}}}},u5=(t,e,n,r,i)=>{var s;const o=i.getRow(e,!0);n?(o.getCanMultiSelect()||Object.keys(t).forEach(a=>delete t[a]),o.getCanSelect()&&(t[e]=!0)):delete t[e],r&&(s=o.subRows)!=null&&s.length&&o.getCanSelectSubRows()&&o.subRows.forEach(a=>u5(t,a.id,n,r,i))};function WS(t,e){const n=t.getState().rowSelection,r=[],i={},s=function(o,a){return o.map(l=>{var u;const c=A3(l,n);if(c&&(r.push(l),i[l.id]=l),(u=l.subRows)!=null&&u.length&&(l={...l,subRows:s(l.subRows)}),c)return l}).filter(Boolean)};return{rows:s(e.rows),flatRows:r,rowsById:i}}function A3(t,e){var n;return(n=e[t.id])!=null?n:!1}function c5(t,e,n){var r;if(!((r=t.subRows)!=null&&r.length))return!1;let i=!0,s=!1;return t.subRows.forEach(o=>{if(!(s&&!i)&&(o.getCanSelect()&&(A3(o,e)?s=!0:i=!1),o.subRows&&o.subRows.length)){const a=c5(o,e);a==="all"?s=!0:(a==="some"&&(s=!0),i=!1)}}),i?"all":s?"some":!1}const h5=/([0-9]+)/gm,zX=(t,e,n)=>yN(Dh(t.getValue(n)).toLowerCase(),Dh(e.getValue(n)).toLowerCase()),HX=(t,e,n)=>yN(Dh(t.getValue(n)),Dh(e.getValue(n))),GX=(t,e,n)=>T3(Dh(t.getValue(n)).toLowerCase(),Dh(e.getValue(n)).toLowerCase()),VX=(t,e,n)=>T3(Dh(t.getValue(n)),Dh(e.getValue(n))),WX=(t,e,n)=>{const r=t.getValue(n),i=e.getValue(n);return r>i?1:r<i?-1:0},jX=(t,e,n)=>T3(t.getValue(n),e.getValue(n));function T3(t,e){return t===e?0:t>e?1:-1}function Dh(t){return typeof t=="number"?isNaN(t)||t===1/0||t===-1/0?"":String(t):typeof t=="string"?t:""}function yN(t,e){const n=t.split(h5).filter(Boolean),r=e.split(h5).filter(Boolean);for(;n.length&&r.length;){const i=n.shift(),s=r.shift(),o=parseInt(i,10),a=parseInt(s,10),l=[o,a].sort();if(isNaN(l[0])){if(i>s)return 1;if(s>i)return-1;continue}if(isNaN(l[1]))return isNaN(o)?-1:1;if(o>a)return 1;if(a>o)return-1}return n.length-r.length}const Eg={alphanumeric:zX,alphanumericCaseSensitive:HX,text:GX,textCaseSensitive:VX,datetime:WX,basic:jX},XX={getInitialState:t=>({sorting:[],...t}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:t=>({onSortingChange:ua("sorting",t),isMultiSortEvent:e=>e.shiftKey}),createColumn:(t,e)=>{t.getAutoSortingFn=()=>{const n=e.getFilteredRowModel().flatRows.slice(10);let r=!1;for(const i of n){const s=i==null?void 0:i.getValue(t.id);if(Object.prototype.toString.call(s)==="[object Date]")return Eg.datetime;if(typeof s=="string"&&(r=!0,s.split(h5).length>1))return Eg.alphanumeric}return r?Eg.text:Eg.basic},t.getAutoSortDir=()=>{const n=e.getFilteredRowModel().flatRows[0];return typeof(n==null?void 0:n.getValue(t.id))=="string"?"asc":"desc"},t.getSortingFn=()=>{var n,r;if(!t)throw new Error;return Dx(t.columnDef.sortingFn)?t.columnDef.sortingFn:t.columnDef.sortingFn==="auto"?t.getAutoSortingFn():(n=(r=e.options.sortingFns)==null?void 0:r[t.columnDef.sortingFn])!=null?n:Eg[t.columnDef.sortingFn]},t.toggleSorting=(n,r)=>{const i=t.getNextSortingOrder(),s=typeof n<"u"&&n!==null;e.setSorting(o=>{const a=o==null?void 0:o.find(d=>d.id===t.id),l=o==null?void 0:o.findIndex(d=>d.id===t.id);let u=[],c,h=s?n:i==="desc";if(o!=null&&o.length&&t.getCanMultiSort()&&r?a?c="toggle":c="add":o!=null&&o.length&&l!==o.length-1?c="replace":a?c="toggle":c="replace",c==="toggle"&&(s||i||(c="remove")),c==="add"){var f;u=[...o,{id:t.id,desc:h}],u.splice(0,u.length-((f=e.options.maxMultiSortColCount)!=null?f:Number.MAX_SAFE_INTEGER))}else c==="toggle"?u=o.map(d=>d.id===t.id?{...d,desc:h}:d):c==="remove"?u=o.filter(d=>d.id!==t.id):u=[{id:t.id,desc:h}];return u})},t.getFirstSortDir=()=>{var n,r;return((n=(r=t.columnDef.sortDescFirst)!=null?r:e.options.sortDescFirst)!=null?n:t.getAutoSortDir()==="desc")?"desc":"asc"},t.getNextSortingOrder=n=>{var r,i;const s=t.getFirstSortDir(),o=t.getIsSorted();return o?o!==s&&((r=e.options.enableSortingRemoval)==null||r)&&(!(n&&(i=e.options.enableMultiRemove)!=null)||i)?!1:o==="desc"?"asc":"desc":s},t.getCanSort=()=>{var n,r;return((n=t.columnDef.enableSorting)!=null?n:!0)&&((r=e.options.enableSorting)!=null?r:!0)&&!!t.accessorFn},t.getCanMultiSort=()=>{var n,r;return(n=(r=t.columnDef.enableMultiSort)!=null?r:e.options.enableMultiSort)!=null?n:!!t.accessorFn},t.getIsSorted=()=>{var n;const r=(n=e.getState().sorting)==null?void 0:n.find(i=>i.id===t.id);return r?r.desc?"desc":"asc":!1},t.getSortIndex=()=>{var n,r;return(n=(r=e.getState().sorting)==null?void 0:r.findIndex(i=>i.id===t.id))!=null?n:-1},t.clearSorting=()=>{e.setSorting(n=>n!=null&&n.length?n.filter(r=>r.id!==t.id):[])},t.getToggleSortingHandler=()=>{const n=t.getCanSort();return r=>{n&&(r.persist==null||r.persist(),t.toggleSorting==null||t.toggleSorting(void 0,t.getCanMultiSort()?e.options.isMultiSortEvent==null?void 0:e.options.isMultiSortEvent(r):!1))}}},createTable:t=>{t.setSorting=e=>t.options.onSortingChange==null?void 0:t.options.onSortingChange(e),t.resetSorting=e=>{var n,r;t.setSorting(e?[]:(n=(r=t.initialState)==null?void 0:r.sorting)!=null?n:[])},t.getPreSortedRowModel=()=>t.getGroupedRowModel(),t.getSortedRowModel=()=>(!t._getSortedRowModel&&t.options.getSortedRowModel&&(t._getSortedRowModel=t.options.getSortedRowModel(t)),t.options.manualSorting||!t._getSortedRowModel?t.getPreSortedRowModel():t._getSortedRowModel())}},qX=[pX,IX,LX,PX,gX,vX,NX,FX,XX,TX,DX,OX,UX,BX,RX];function YX(t){var e,n;const r=[...qX,...(e=t._features)!=null?e:[]];let i={_features:r};const s=i._features.reduce((f,d)=>Object.assign(f,d.getDefaultOptions==null?void 0:d.getDefaultOptions(i)),{}),o=f=>i.options.mergeOptions?i.options.mergeOptions(s,f):{...s,...f};let l={...{},...(n=t.initialState)!=null?n:{}};i._features.forEach(f=>{var d;l=(d=f.getInitialState==null?void 0:f.getInitialState(l))!=null?d:l});const u=[];let c=!1;const h={_features:r,options:{...s,...t},initialState:l,_queue:f=>{u.push(f),c||(c=!0,Promise.resolve().then(()=>{for(;u.length;)u.shift()();c=!1}).catch(d=>setTimeout(()=>{throw d})))},reset:()=>{i.setState(i.initialState)},setOptions:f=>{const d=dh(f,i.options);i.options=o(d)},getState:()=>i.options.state,setState:f=>{i.options.onStateChange==null||i.options.onStateChange(f)},_getRowId:(f,d,v)=>{var x;return(x=i.options.getRowId==null?void 0:i.options.getRowId(f,d,v))!=null?x:`${v?[v.id,d].join("."):d}`},getCoreRowModel:()=>(i._getCoreRowModel||(i._getCoreRowModel=i.options.getCoreRowModel(i)),i._getCoreRowModel()),getRowModel:()=>i.getPaginationRowModel(),getRow:(f,d)=>{let v=(d?i.getPrePaginationRowModel():i.getRowModel()).rowsById[f];if(!v&&(v=i.getCoreRowModel().rowsById[f],!v))throw new Error;return v},_getDefaultColumnDef:Cn(()=>[i.options.defaultColumn],f=>{var d;return f=(d=f)!=null?d:{},{header:v=>{const x=v.header.column.columnDef;return x.accessorKey?x.accessorKey:x.accessorFn?x.id:null},cell:v=>{var x,w;return(x=(w=v.renderValue())==null||w.toString==null?void 0:w.toString())!=null?x:null},...i._features.reduce((v,x)=>Object.assign(v,x.getDefaultColumnDef==null?void 0:x.getDefaultColumnDef()),{}),...f}},Ln(t,"debugColumns")),_getColumnDefs:()=>i.options.columns,getAllColumns:Cn(()=>[i._getColumnDefs()],f=>{const d=function(v,x,w){return w===void 0&&(w=0),v.map(g=>{const S=dX(i,g,w,x),_=g;return S.columns=_.columns?d(_.columns,S,w+1):[],S})};return d(f)},Ln(t,"debugColumns")),getAllFlatColumns:Cn(()=>[i.getAllColumns()],f=>f.flatMap(d=>d.getFlatColumns()),Ln(t,"debugColumns")),_getAllFlatColumnsById:Cn(()=>[i.getAllFlatColumns()],f=>f.reduce((d,v)=>(d[v.id]=v,d),{}),Ln(t,"debugColumns")),getAllLeafColumns:Cn(()=>[i.getAllColumns(),i._getOrderColumnsFn()],(f,d)=>{let v=f.flatMap(x=>x.getLeafColumns());return d(v)},Ln(t,"debugColumns")),getColumn:f=>i._getAllFlatColumnsById()[f]};Object.assign(i,h);for(let f=0;f<i._features.length;f++){const d=i._features[f];d==null||d.createTable==null||d.createTable(i)}return i}function ZX(){return t=>Cn(()=>[t.options.data],e=>{const n={rows:[],flatRows:[],rowsById:{}},r=function(i,s,o){s===void 0&&(s=0);const a=[];for(let u=0;u<i.length;u++){const c=mX(t,t._getRowId(i[u],u,o),i[u],u,s,void 0,o==null?void 0:o.id);if(n.flatRows.push(c),n.rowsById[c.id]=c,a.push(c),t.options.getSubRows){var l;c.originalSubRows=t.options.getSubRows(i[u],u),(l=c.originalSubRows)!=null&&l.length&&(c.subRows=r(c.originalSubRows,s+1,c))}}return a};return n.rows=r(e),n},Ln(t.options,"debugTable","getRowModel",()=>t._autoResetPageIndex()))}/**
   * react-table
   *
   * Copyright (c) TanStack
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE.md file in the root directory of this source tree.
   *
   * @license MIT
   */function RC(t,e){return t?$X(t)?Be.createElement(t,e):t:null}function $X(t){return KX(t)||typeof t=="function"||JX(t)}function KX(t){return typeof t=="function"&&(()=>{const e=Object.getPrototypeOf(t);return e.prototype&&e.prototype.isReactComponent})()}function JX(t){return typeof t=="object"&&typeof t.$$typeof=="symbol"&&["react.memo","react.forward_ref"].includes(t.$$typeof.description)}function QX(t){const e={state:{},onStateChange:()=>{},renderFallbackValue:null,...t},[n]=Be.useState(()=>({current:YX(e)})),[r,i]=Be.useState(()=>n.current.initialState);return n.current.setOptions(s=>({...s,...t,state:{...r,...t.state},onStateChange:o=>{i(o),t.onStateChange==null||t.onStateChange(o)}})),n.current}function xN(t,e,n,r,i){r=r||{};var s=1.15,o=i.internal.scaleFactor,a=i.internal.getFontSize()/o,l=i.getLineHeightFactor?i.getLineHeightFactor():s,u=a*l,c=/\r\n|\r|\n/g,h="",f=1;if((r.valign==="middle"||r.valign==="bottom"||r.halign==="center"||r.halign==="right")&&(h=typeof t=="string"?t.split(c):t,f=h.length||1),n+=a*(2-s),r.valign==="middle"?n-=f/2*u:r.valign==="bottom"&&(n-=f*u),r.halign==="center"||r.halign==="right"){var d=a;if(r.halign==="center"&&(d*=.5),h&&f>=1){for(var v=0;v<h.length;v++)i.text(h[v],e-i.getStringUnitWidth(h[v])*d,n),n+=u;return i}e-=i.getStringUnitWidth(t)*d}return r.halign==="justify"?i.text(t,e,n,{maxWidth:r.maxWidth||100,align:"justify"}):i.text(t,e,n),i}var kC={},Qp=function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:kC=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var r,i,s;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var o=this.jsPDFDocument.internal.getFont(),a=o.fontStyle,l=o.fontName;if(e.font&&(l=e.font),e.fontStyle){a=e.fontStyle;var u=this.getFontList()[l];u&&u.indexOf(a)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(u[0]),a=u[0])}if(this.jsPDFDocument.setFont(l,a),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var c=t.unifyColor(e.fillColor);c&&(r=this.jsPDFDocument).setFillColor.apply(r,c),c=t.unifyColor(e.textColor),c&&(i=this.jsPDFDocument).setTextColor.apply(i,c),c=t.unifyColor(e.lineColor),c&&(s=this.jsPDFDocument).setDrawColor.apply(s,c),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,r){return this.jsPDFDocument.splitTextToSize(e,n,r)},t.prototype.rect=function(e,n,r,i,s){return this.jsPDFDocument.rect(e,n,r,i,s)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return kC||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t}(),f5=function(t,e){return f5=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},f5(t,e)};function wN(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");f5(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var SN=function(t){wN(e,t);function e(n){var r=t.call(this)||this;return r._element=n,r}return e}(Array);function eq(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function tq(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function E2(t,e,n){n.applyStyles(e,!0);var r=Array.isArray(t)?t:[t],i=r.map(function(s){return n.getTextWidth(s)}).reduce(function(s,o){return Math.max(s,o)},0);return i}function _N(t,e,n,r){var i=e.settings.tableLineWidth,s=e.settings.tableLineColor;t.applyStyles({lineWidth:i,lineColor:s});var o=bN(i,!1);o&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),r.y-n.y,o)}function bN(t,e){var n=t>0,r=e||e===0;return n&&r?"DF":n?"S":r?"F":null}function Ox(t,e){var n,r,i,s;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(r=t.top)!==null&&r!==void 0?r:e,right:(i=t.right)!==null&&i!==void 0?i:e,bottom:(s=t.bottom)!==null&&s!==void 0?s:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function MN(t,e){var n=Ox(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function nq(t,e,n,r,i){var s={},o=1.3333333333333333,a=jS(e,function(_){return i.getComputedStyle(_).backgroundColor});a!=null&&(s.fillColor=a);var l=jS(e,function(_){return i.getComputedStyle(_).color});l!=null&&(s.textColor=l);var u=iq(r,n);u&&(s.cellPadding=u);var c="borderTopColor",h=o*n,f=r.borderTopWidth;if(r.borderBottomWidth===f&&r.borderRightWidth===f&&r.borderLeftWidth===f){var d=(parseFloat(f)||0)/h;d&&(s.lineWidth=d)}else s.lineWidth={top:(parseFloat(r.borderTopWidth)||0)/h,right:(parseFloat(r.borderRightWidth)||0)/h,bottom:(parseFloat(r.borderBottomWidth)||0)/h,left:(parseFloat(r.borderLeftWidth)||0)/h},s.lineWidth.top||(s.lineWidth.right?c="borderRightColor":s.lineWidth.bottom?c="borderBottomColor":s.lineWidth.left&&(c="borderLeftColor"));var v=jS(e,function(_){return i.getComputedStyle(_)[c]});v!=null&&(s.lineColor=v);var x=["left","right","center","justify"];x.indexOf(r.textAlign)!==-1&&(s.halign=r.textAlign),x=["middle","bottom","top"],x.indexOf(r.verticalAlign)!==-1&&(s.valign=r.verticalAlign);var w=parseInt(r.fontSize||"");isNaN(w)||(s.fontSize=w/o);var g=rq(r);g&&(s.fontStyle=g);var S=(r.fontFamily||"").toLowerCase();return t.indexOf(S)!==-1&&(s.font=S),s}function rq(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function jS(t,e){var n=EN(t,e);if(!n)return null;var r=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!r||!Array.isArray(r))return null;var i=[parseInt(r[1]),parseInt(r[2]),parseInt(r[3])],s=parseInt(r[4]);return s===0||isNaN(i[0])||isNaN(i[1])||isNaN(i[2])?null:i}function EN(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:EN(t.parentElement,e):n}function iq(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],r=96/(72/e),i=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,s=n.map(function(a){return parseInt(a||"0")/r}),o=Ox(s,0);return i>o.top&&(o.top=i),i>o.bottom&&(o.bottom=i),o}function AN(t,e,n,r,i){var s,o;r===void 0&&(r=!1),i===void 0&&(i=!1);var a;typeof e=="string"?a=n.document.querySelector(e):a=e;var l=Object.keys(t.getFontList()),u=t.scaleFactor(),c=[],h=[],f=[];if(!a)return console.error("Html table could not be found with input: ",e),{head:c,body:h,foot:f};for(var d=0;d<a.rows.length;d++){var v=a.rows[d],x=(o=(s=v==null?void 0:v.parentElement)===null||s===void 0?void 0:s.tagName)===null||o===void 0?void 0:o.toLowerCase(),w=sq(l,u,n,v,r,i);w&&(x==="thead"?c.push(w):x==="tfoot"?f.push(w):h.push(w))}return{head:c,body:h,foot:f}}function sq(t,e,n,r,i,s){for(var o=new SN(r),a=0;a<r.cells.length;a++){var l=r.cells[a],u=n.getComputedStyle(l);if(i||u.display!=="none"){var c=void 0;s&&(c=nq(t,l,e,u,n)),o.push({rowSpan:l.rowSpan,colSpan:l.colSpan,styles:c,_element:l,content:oq(l)})}}var h=n.getComputedStyle(r);if(o.length>0&&(i||h.display!=="none"))return o}function oq(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function aq(t,e,n){for(var r=0,i=[t,e,n];r<i.length;r++){var s=i[r];s&&typeof s!="object"&&console.error("The options parameter should be of type object, is: "+typeof s),s.startY&&typeof s.startY!="number"&&(console.error("Invalid value for startY option",s.startY),delete s.startY)}}function Ju(t,e,n,r,i){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var s=Object(t),o=1;o<arguments.length;o++){var a=arguments[o];if(a!=null)for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(s[l]=a[l])}return s}function TN(t,e){var n=new Qp(t),r=n.getDocumentOptions(),i=n.getGlobalOptions();aq(i,r,e);var s=Ju({},i,r,e),o;typeof window<"u"&&(o=window);var a=lq(i,r,e),l=uq(i,r,e),u=cq(n,s),c=fq(n,s,o);return{id:e.tableId,content:c,hooks:l,styles:a,settings:u}}function lq(t,e,n){for(var r={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},i=function(l){if(l==="columnStyles"){var u=t[l],c=e[l],h=n[l];r.columnStyles=Ju({},u,c,h)}else{var f=[t,e,n],d=f.map(function(v){return v[l]||{}});r[l]=Ju({},d[0],d[1],d[2])}},s=0,o=Object.keys(r);s<o.length;s++){var a=o[s];i(a)}return r}function uq(t,e,n){for(var r=[t,e,n],i={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},s=0,o=r;s<o.length;s++){var a=o[s];a.didParseCell&&i.didParseCell.push(a.didParseCell),a.willDrawCell&&i.willDrawCell.push(a.willDrawCell),a.didDrawCell&&i.didDrawCell.push(a.didDrawCell),a.willDrawPage&&i.willDrawPage.push(a.willDrawPage),a.didDrawPage&&i.didDrawPage.push(a.didDrawPage)}return i}function cq(t,e){var n,r,i,s,o,a,l,u,c,h,f,d,v=Ox(e.margin,40/t.scaleFactor()),x=(n=hq(t,e.startY))!==null&&n!==void 0?n:v.top,w;e.showFoot===!0?w="everyPage":e.showFoot===!1?w="never":w=(r=e.showFoot)!==null&&r!==void 0?r:"everyPage";var g;e.showHead===!0?g="everyPage":e.showHead===!1?g="never":g=(i=e.showHead)!==null&&i!==void 0?i:"everyPage";var S=(s=e.useCss)!==null&&s!==void 0?s:!1,_=e.theme||(S?"plain":"striped"),T=!!e.horizontalPageBreak,L=(o=e.horizontalPageBreakRepeat)!==null&&o!==void 0?o:null;return{includeHiddenHtml:(a=e.includeHiddenHtml)!==null&&a!==void 0?a:!1,useCss:S,theme:_,startY:x,margin:v,pageBreak:(l=e.pageBreak)!==null&&l!==void 0?l:"auto",rowPageBreak:(u=e.rowPageBreak)!==null&&u!==void 0?u:"auto",tableWidth:(c=e.tableWidth)!==null&&c!==void 0?c:"auto",showHead:g,showFoot:w,tableLineWidth:(h=e.tableLineWidth)!==null&&h!==void 0?h:0,tableLineColor:(f=e.tableLineColor)!==null&&f!==void 0?f:200,horizontalPageBreak:T,horizontalPageBreakRepeat:L,horizontalPageBreakBehaviour:(d=e.horizontalPageBreakBehaviour)!==null&&d!==void 0?d:"afterAllRows"}}function hq(t,e){var n=t.getLastAutoTable(),r=t.scaleFactor(),i=t.pageNumber(),s=!1;if(n&&n.startPageNumber){var o=n.startPageNumber+n.pageNumber-1;s=o===i}return typeof e=="number"?e:(e==null||e===!1)&&s&&(n==null?void 0:n.finalY)!=null?n.finalY+20/r:null}function fq(t,e,n){var r=e.head||[],i=e.body||[],s=e.foot||[];if(e.html){var o=e.includeHiddenHtml;if(n){var a=AN(t,e.html,n,o,e.useCss)||{};r=a.head||r,i=a.body||r,s=a.foot||r}else console.error("Cannot parse html in non browser environment")}var l=e.columns||dq(r,i,s);return{columns:l,head:r,body:i,foot:s}}function dq(t,e,n){var r=t[0]||e[0]||n[0]||[],i=[];return Object.keys(r).filter(function(s){return s!=="_element"}).forEach(function(s){var o=1,a;Array.isArray(r)?a=r[parseInt(s)]:a=r[s],typeof a=="object"&&!Array.isArray(a)&&(o=(a==null?void 0:a.colSpan)||1);for(var l=0;l<o;l++){var u=void 0;Array.isArray(r)?u=i.length:u=s+(l>0?"_".concat(l):"");var c={dataKey:u};i.push(c)}}),i}var d5=function(){function t(e,n,r){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=r,this.doc=e.getDocument()}return t}(),pq=function(t){wN(e,t);function e(n,r,i,s,o,a){var l=t.call(this,n,r,a)||this;return l.cell=i,l.row=s,l.column=o,l.section=s.section,l}return e}(d5),mq=function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,r){return n+r.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,r,i,s,o){for(var a=0,l=n;a<l.length;a++){var u=l[a],c=new pq(e,this,r,i,s,o),h=u(c)===!1;if(r.text=Array.isArray(r.text)?r.text:[r.text],h)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var r=0,i=this.hooks.didDrawPage;r<i.length;r++){var s=i[r];s(new d5(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var r=0,i=this.hooks.willDrawPage;r<i.length;r++){var s=i[r];s(new d5(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(i,s){return i+s.wrappedWidth},0);return n}else{var r=this.settings.margin;return e-r.left-r.right}},t}(),CN=function(){function t(e,n,r,i,s){s===void 0&&(s=!1),this.height=0,this.raw=e,e instanceof SN&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=r,this.cells=i,this.spansMultiplePages=s}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(r,i){var s;return Math.max(r,((s=n.cells[i.index])===null||s===void 0?void 0:s.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(r){var i=n.cells[r.index];return i?i.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var r=this;return e.reduce(function(i,s){var o=r.cells[s.index];if(!o)return 0;var a=n.getLineHeight(o.styles.fontSize),l=o.padding("vertical"),u=l+a;return u>i?u:i},0)},t}(),LN=function(){function t(e,n,r){var i;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=r,this.raw=e;var s=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,s=(i=e.content)!==null&&i!==void 0?i:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var o=s!=null?""+s:"",a=/\r\n|\r|\n/g;this.text=o.split(a)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var r;if(this.styles.halign==="right")r=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var i=this.width-this.padding("horizontal");r=this.x+i/2+this.padding("left")}else r=this.x+this.padding("left");return{x:r,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var r=Array.isArray(this.text)?this.text.length:1,i=this.styles.fontSize/e*n,s=r*i+this.padding("vertical");return Math.max(s,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=Ox(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t}(),gq=function(){function t(e,n,r){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=r}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,r=0,i=e.allRows();r<i.length;r++){var s=i[r],o=s.cells[this.index];o&&typeof o.styles.cellWidth=="number"&&(n=Math.max(n,o.styles.cellWidth))}return n},t}();function vq(t,e){yq(t,e);var n=[],r=0;e.columns.forEach(function(s){var o=s.getMaxCustomCellWidth(e);o?s.width=o:(s.width=s.wrappedWidth,n.push(s)),r+=s.width});var i=e.getWidth(t.pageSize().width)-r;i&&(i=p5(n,i,function(s){return Math.max(s.minReadableWidth,s.minWidth)})),i&&(i=p5(n,i,function(s){return s.minWidth})),i=Math.abs(i),!e.settings.horizontalPageBreak&&i>.1/t.scaleFactor()&&(i=i<1?i:Math.round(i),console.warn("Of the table content, ".concat(i," units width could not fit page"))),wq(e),Sq(e,t),xq(e)}function yq(t,e){var n=t.scaleFactor(),r=e.settings.horizontalPageBreak,i=MN(t,e);e.allRows().forEach(function(s){for(var o=0,a=e.columns;o<a.length;o++){var l=a[o],u=s.cells[l.index];if(u){var c=e.hooks.didParseCell;e.callCellHooks(t,c,u,s,l,null);var h=u.padding("horizontal");u.contentWidth=E2(u.text,u.styles,t)+h;var f=E2(u.text.join(" ").split(/[^\S\u00A0]+/),u.styles,t);if(u.minReadableWidth=f+u.padding("horizontal"),typeof u.styles.cellWidth=="number")u.minWidth=u.styles.cellWidth,u.wrappedWidth=u.styles.cellWidth;else if(u.styles.cellWidth==="wrap"||r===!0)u.contentWidth>i?(u.minWidth=i,u.wrappedWidth=i):(u.minWidth=u.contentWidth,u.wrappedWidth=u.contentWidth);else{var d=10/n;u.minWidth=u.styles.minCellWidth||d,u.wrappedWidth=u.contentWidth,u.minWidth>u.wrappedWidth&&(u.wrappedWidth=u.minWidth)}}}}),e.allRows().forEach(function(s){for(var o=0,a=e.columns;o<a.length;o++){var l=a[o],u=s.cells[l.index];if(u&&u.colSpan===1)l.wrappedWidth=Math.max(l.wrappedWidth,u.wrappedWidth),l.minWidth=Math.max(l.minWidth,u.minWidth),l.minReadableWidth=Math.max(l.minReadableWidth,u.minReadableWidth);else{var c=e.styles.columnStyles[l.dataKey]||e.styles.columnStyles[l.index]||{},h=c.cellWidth||c.minCellWidth;h&&typeof h=="number"&&(l.minWidth=h,l.wrappedWidth=h)}u&&(u.colSpan>1&&!l.minWidth&&(l.minWidth=u.minWidth),u.colSpan>1&&!l.wrappedWidth&&(l.wrappedWidth=u.minWidth))}})}function p5(t,e,n){for(var r=e,i=t.reduce(function(d,v){return d+v.wrappedWidth},0),s=0;s<t.length;s++){var o=t[s],a=o.wrappedWidth/i,l=r*a,u=o.width+l,c=n(o),h=u<c?c:u;e-=h-o.width,o.width=h}if(e=Math.round(e*1e10)/1e10,e){var f=t.filter(function(d){return e<0?d.width>n(d):!0});f.length&&(e=p5(f,e,n))}return e}function xq(t){for(var e={},n=1,r=t.allRows(),i=0;i<r.length;i++)for(var s=r[i],o=0,a=t.columns;o<a.length;o++){var l=a[o],u=e[l.index];if(n>1)n--,delete s.cells[l.index];else if(u)u.cell.height+=s.height,n=u.cell.colSpan,delete s.cells[l.index],u.left--,u.left<=1&&delete e[l.index];else{var c=s.cells[l.index];if(!c)continue;if(c.height=s.height,c.rowSpan>1){var h=r.length-i,f=c.rowSpan>h?h:c.rowSpan;e[l.index]={cell:c,left:f,row:s}}}}}function wq(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var r=e[n],i=null,s=0,o=0,a=0;a<t.columns.length;a++){var l=t.columns[a];if(o-=1,o>1&&t.columns[a+1])s+=l.width,delete r.cells[l.index];else if(i){var u=i;delete r.cells[l.index],i=null,u.width=l.width+s}else{var u=r.cells[l.index];if(!u)continue;if(o=u.colSpan,s=0,u.colSpan>1){i=u,s+=l.width;continue}u.width=l.width+s}}}function Sq(t,e){for(var n={count:0,height:0},r=0,i=t.allRows();r<i.length;r++){for(var s=i[r],o=0,a=t.columns;o<a.length;o++){var l=a[o],u=s.cells[l.index];if(u){e.applyStyles(u.styles,!0);var c=u.width-u.padding("horizontal");if(u.styles.overflow==="linebreak")u.text=e.splitTextToSize(u.text,c+1/e.scaleFactor(),{fontSize:u.styles.fontSize});else if(u.styles.overflow==="ellipsize")u.text=IC(u.text,c,u.styles,e,"...");else if(u.styles.overflow==="hidden")u.text=IC(u.text,c,u.styles,e,"");else if(typeof u.styles.overflow=="function"){var h=u.styles.overflow(u.text,c);typeof h=="string"?u.text=[h]:u.text=h}u.contentHeight=u.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var f=u.contentHeight/u.rowSpan;u.rowSpan>1&&n.count*n.height<f*u.rowSpan?n={height:f,count:u.rowSpan}:n&&n.count>0&&n.height>f&&(f=n.height),f>s.height&&(s.height=f)}}n.count--}}function IC(t,e,n,r,i){return t.map(function(s){return _q(s,e,n,r,i)})}function _q(t,e,n,r,i){var s=1e4*r.scaleFactor();if(e=Math.ceil(e*s)/s,e>=E2(t,n,r))return t;for(;e<E2(t+i,n,r)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+i}function PN(t,e){var n=new Qp(t),r=bq(e,n.scaleFactor()),i=new mq(e,r);return vq(n,i),n.applyStyles(n.userStyles),i}function bq(t,e){var n=t.content,r=Eq(n.columns);if(n.head.length===0){var i=NC(r,"head");i&&n.head.push(i)}if(n.foot.length===0){var i=NC(r,"foot");i&&n.foot.push(i)}var s=t.settings.theme,o=t.styles;return{columns:r,head:XS("head",n.head,r,o,s,e),body:XS("body",n.body,r,o,s,e),foot:XS("foot",n.foot,r,o,s,e)}}function XS(t,e,n,r,i,s){var o={},a=e.map(function(l,u){for(var c=0,h={},f=0,d=0,v=0,x=n;v<x.length;v++){var w=x[v];if(o[w.index]==null||o[w.index].left===0)if(d===0){var g=void 0;Array.isArray(l)?g=l[w.index-f-c]:g=l[w.dataKey];var S={};typeof g=="object"&&!Array.isArray(g)&&(S=(g==null?void 0:g.styles)||{});var _=Aq(t,w,u,i,r,s,S),T=new LN(g,_,t);h[w.dataKey]=T,h[w.index]=T,d=T.colSpan-1,o[w.index]={left:T.rowSpan-1,times:d}}else d--,f++;else o[w.index].left--,d=o[w.index].times,c++}return new CN(l,u,t,h)});return a}function NC(t,e){var n={};return t.forEach(function(r){if(r.raw!=null){var i=Mq(e,r.raw);i!=null&&(n[r.dataKey]=i)}}),Object.keys(n).length>0?n:null}function Mq(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function Eq(t){return t.map(function(e,n){var r,i;return typeof e=="object"?i=(r=e.dataKey)!==null&&r!==void 0?r:n:i=n,new gq(i,e,n)})}function Aq(t,e,n,r,i,s,o){var a=tq(r),l;t==="head"?l=i.headStyles:t==="body"?l=i.bodyStyles:t==="foot"&&(l=i.footStyles);var u=Ju({},a.table,a[t],i.styles,l),c=i.columnStyles[e.dataKey]||i.columnStyles[e.index]||{},h=t==="body"?c:{},f=t==="body"&&n%2===0?Ju({},a.alternateRow,i.alternateRowStyles):{},d=eq(s),v=Ju({},d,u,f,h);return Ju(v,o)}function Tq(t,e,n){var r;n===void 0&&(n={});var i=MN(t,e),s=new Map,o=[],a=[],l=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?l=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(l=[e.settings.horizontalPageBreakRepeat]),l.forEach(function(f){var d=e.columns.find(function(v){return v.dataKey===f||v.index===f});d&&!s.has(d.index)&&(s.set(d.index,!0),o.push(d.index),a.push(e.columns[d.index]),i-=d.wrappedWidth)});for(var u=!0,c=(r=n==null?void 0:n.start)!==null&&r!==void 0?r:0;c<e.columns.length;){if(s.has(c)){c++;continue}var h=e.columns[c].wrappedWidth;if(u||i>=h)u=!1,o.push(c),a.push(e.columns[c]),i-=h;else break;c++}return{colIndexes:o,columns:a,lastIndex:c-1}}function Cq(t,e){for(var n=[],r=0;r<e.columns.length;r++){var i=Tq(t,e,{start:r});i.columns.length&&(n.push(i),r=i.lastIndex)}return n}function RN(t,e){var n=e.settings,r=n.startY,i=n.margin,s={x:i.left,y:r},o=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),a=r+i.bottom+o;if(n.pageBreak==="avoid"){var l=e.body,u=l.reduce(function(f,d){return f+d.height},0);a+=u}var c=new Qp(t);(n.pageBreak==="always"||n.startY!=null&&a>c.pageSize().height)&&(IN(c),s.y=i.top),e.callWillDrawPageHooks(c,s);var h=Ju({},s);e.startPageNumber=c.pageNumber(),n.horizontalPageBreak?Lq(c,e,h,s):(c.applyStyles(c.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(f){return uc(c,e,f,s,e.columns)}),c.applyStyles(c.userStyles),e.body.forEach(function(f,d){var v=d===e.body.length-1;A2(c,e,f,v,h,s,e.columns)}),c.applyStyles(c.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(f){return uc(c,e,f,s,e.columns)})),_N(c,e,h,s),e.callEndPageHooks(c,s),e.finalY=s.y,t.lastAutoTable=e,c.applyStyles(c.userStyles)}function Lq(t,e,n,r){var i=Cq(t,e),s=e.settings;if(s.horizontalPageBreakBehaviour==="afterAllRows")i.forEach(function(u,c){t.applyStyles(t.userStyles),c>0?n0(t,e,n,r,u.columns,!0):FC(t,e,r,u.columns),Pq(t,e,n,r,u.columns),qS(t,e,r,u.columns)});else for(var o=-1,a=i[0],l=function(){var u=o;if(a){t.applyStyles(t.userStyles);var c=a.columns;o>=0?n0(t,e,n,r,c,!0):FC(t,e,r,c),u=DC(t,e,o+1,r,c),qS(t,e,r,c)}var h=u-o;i.slice(1).forEach(function(f){t.applyStyles(t.userStyles),n0(t,e,n,r,f.columns,!0),DC(t,e,o+1,r,f.columns,h),qS(t,e,r,f.columns)}),o=u};o<e.body.length-1;)l()}function FC(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showHead==="firstPage"||i.showHead==="everyPage")&&e.head.forEach(function(s){return uc(t,e,s,n,r)})}function Pq(t,e,n,r,i){t.applyStyles(t.userStyles),e.body.forEach(function(s,o){var a=o===e.body.length-1;A2(t,e,s,a,n,r,i)})}function DC(t,e,n,r,i,s){t.applyStyles(t.userStyles),s=s??e.body.length;var o=Math.min(n+s,e.body.length),a=-1;return e.body.slice(n,o).forEach(function(l,u){var c=n+u===e.body.length-1,h=kN(t,e,c,r);l.canEntireRowFit(h,i)&&(uc(t,e,l,r,i),a=n+u)}),a}function qS(t,e,n,r){var i=e.settings;t.applyStyles(t.userStyles),(i.showFoot==="lastPage"||i.showFoot==="everyPage")&&e.foot.forEach(function(s){return uc(t,e,s,n,r)})}function Rq(t,e,n){var r=n.getLineHeight(t.styles.fontSize),i=t.padding("vertical"),s=Math.floor((e-i)/r);return Math.max(0,s)}function kq(t,e,n,r){var i={};t.spansMultiplePages=!0,t.height=0;for(var s=0,o=0,a=n.columns;o<a.length;o++){var l=a[o],u=t.cells[l.index];if(u){Array.isArray(u.text)||(u.text=[u.text]);var c=new LN(u.raw,u.styles,u.section);c=Ju(c,u),c.text=[];var h=Rq(u,e,r);u.text.length>h&&(c.text=u.text.splice(h,u.text.length));var f=r.scaleFactor(),d=r.getLineHeightFactor();u.contentHeight=u.getContentHeight(f,d),u.contentHeight>=e&&(u.contentHeight=e,c.styles.minCellHeight-=e),u.contentHeight>t.height&&(t.height=u.contentHeight),c.contentHeight=c.getContentHeight(f,d),c.contentHeight>s&&(s=c.contentHeight),i[l.index]=c}}var v=new CN(t.raw,-1,t.section,i,!0);v.height=s;for(var x=0,w=n.columns;x<w.length;x++){var l=w[x],c=v.cells[l.index];c&&(c.height=v.height);var u=t.cells[l.index];u&&(u.height=t.height)}return v}function Iq(t,e,n,r){var i=t.pageSize().height,s=r.settings.margin,o=s.top+s.bottom,a=i-o;e.section==="body"&&(a-=r.getHeadHeight(r.columns)+r.getFootHeight(r.columns));var l=e.getMinimumRowHeight(r.columns,t),u=l<n;if(l>a)return console.error("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!u)return!1;var c=e.hasRowSpan(r.columns),h=e.getMaxCellHeight(r.columns)>a;return h?(c&&console.error("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(c||r.settings.rowPageBreak==="avoid")}function A2(t,e,n,r,i,s,o){var a=kN(t,e,r,s);if(n.canEntireRowFit(a,o))uc(t,e,n,s,o);else if(Iq(t,n,a,e)){var l=kq(n,a,e,t);uc(t,e,n,s,o),n0(t,e,i,s,o),A2(t,e,l,r,i,s,o)}else n0(t,e,i,s,o),A2(t,e,n,r,i,s,o)}function uc(t,e,n,r,i){r.x=e.settings.margin.left;for(var s=0,o=i;s<o.length;s++){var a=o[s],l=n.cells[a.index];if(!l){r.x+=a.width;continue}t.applyStyles(l.styles),l.x=r.x,l.y=r.y;var u=e.callCellHooks(t,e.hooks.willDrawCell,l,n,a,r);if(u===!1){r.x+=a.width;continue}Nq(t,l,r);var c=l.getTextPos();xN(l.text,c.x,c.y,{halign:l.styles.halign,valign:l.styles.valign,maxWidth:Math.ceil(l.width-l.padding("left")-l.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,l,n,a,r),r.x+=a.width}r.y+=n.height}function Nq(t,e,n){var r=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof r.lineWidth=="number"){var i=bN(r.lineWidth,r.fillColor);i&&t.rect(e.x,n.y,e.width,e.height,i)}else typeof r.lineWidth=="object"&&(r.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),Fq(t,e,n,r.lineWidth))}function Fq(t,e,n,r){var i,s,o,a;r.top&&(i=n.x,s=n.y,o=n.x+e.width,a=n.y,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),l(r.top,i,s,o,a)),r.bottom&&(i=n.x,s=n.y+e.height,o=n.x+e.width,a=n.y+e.height,r.right&&(o+=.5*r.right),r.left&&(i-=.5*r.left),l(r.bottom,i,s,o,a)),r.left&&(i=n.x,s=n.y,o=n.x,a=n.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(a+=.5*r.bottom),l(r.left,i,s,o,a)),r.right&&(i=n.x+e.width,s=n.y,o=n.x+e.width,a=n.y+e.height,r.top&&(s-=.5*r.top),r.bottom&&(a+=.5*r.bottom),l(r.right,i,s,o,a));function l(u,c,h,f,d){t.getDocument().setLineWidth(u),t.getDocument().line(c,h,f,d,"S")}}function kN(t,e,n,r){var i=e.settings.margin.bottom,s=e.settings.showFoot;return(s==="everyPage"||s==="lastPage"&&n)&&(i+=e.getFootHeight(e.columns)),t.pageSize().height-r.y-i}function n0(t,e,n,r,i,s){i===void 0&&(i=[]),s===void 0&&(s=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!s&&e.foot.forEach(function(a){return uc(t,e,a,r,i)}),e.callEndPageHooks(t,r);var o=e.settings.margin;_N(t,e,n,r),IN(t),e.pageNumber++,r.x=o.left,r.y=o.top,n.y=o.top,e.callWillDrawPageHooks(t,r),e.settings.showHead==="everyPage"&&(e.head.forEach(function(a){return uc(t,e,a,r,i)}),t.applyStyles(t.userStyles))}function IN(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function Dq(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=e[0],i=TN(this,r),s=PN(this,i);return RN(this,s),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,r,i){xN(e,n,r,i,this)},t.API.autoTableSetDefaults=function(e){return Qp.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){Qp.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var r;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var i=new Qp(this),s=AN(i,e,window,n,!1),o=s.head,a=s.body,l=((r=o[0])===null||r===void 0?void 0:r.map(function(u){return u.content}))||[];return{columns:l,rows:a,data:a}}}var YS;function Oq(t,e){var n=TN(t,e),r=PN(t,n);RN(t,r)}try{if(typeof window<"u"&&window){var OC=window,UC=OC.jsPDF||((YS=OC.jspdf)===null||YS===void 0?void 0:YS.jsPDF);UC&&Dq(UC)}}catch(t){console.error("Could not apply autoTable plugin",t)}const Uq=({data:t=[],modelName:e="Model"})=>{const n=Be.useMemo(()=>[{accessorKey:"id",header:"ID",cell:s=>s.getValue()},{accessorKey:"name",header:"Name",cell:s=>s.getValue()},{accessorKey:"quantity",header:"Quantity",cell:s=>s.getValue()},{accessorKey:"dimensions",header:"Dimensions",cell:s=>s.getValue()},{accessorKey:"material",header:"Material",cell:s=>s.getValue()}],[]),r=QX({data:t,columns:n,getCoreRowModel:ZX()}),i=()=>{const s=new wn;s.text(`Bill of Materials - ${e}`,14,16),Oq(s,{startY:20,head:[n.map(o=>o.header)],body:t.map(o=>n.map(a=>o[a.accessorKey]))}),s.save(`${e}_BoM.pdf`)};return!t||t.length===0?Me("div",{style:{padding:"20px",textAlign:"center",color:"#888"},children:"No Bill of Materials data available for this model."}):Tt("div",{style:{padding:"15px",height:"100%",overflowY:"auto",boxSizing:"border-box"},children:[Tt("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[Me("h2",{style:{margin:0,fontSize:"1.4em"},children:"Bill of Materials"}),Me("button",{onClick:i,style:{padding:"8px 15px",fontSize:"1em",cursor:"pointer",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px"},children:"Export PDF"})]}),Tt("table",{style:{width:"100%",borderCollapse:"collapse"},children:[Me("thead",{children:r.getHeaderGroups().map(s=>Me("tr",{children:s.headers.map(o=>Me("th",{style:{border:"1px solid #ddd",padding:"10px",textAlign:"left",backgroundColor:"#f2f2f2"},children:o.isPlaceholder?null:RC(o.column.columnDef.header,o.getContext())},o.id))},s.id))}),Me("tbody",{children:r.getRowModel().rows.map(s=>Me("tr",{children:s.getVisibleCells().map(o=>Me("td",{style:{border:"1px solid #ddd",padding:"10px"},children:RC(o.column.columnDef.cell,o.getContext())},o.id))},s.id))})]})]})};function Bq(){return new Worker("/cad-os/assets/worker-36a6797f.js")}const sr=()=>{throw new Error("oppencascade has not been loaded")};globalThis.FinalizationRegistry||(console.log("Garbage collection will not work"),globalThis.FinalizationRegistry=()=>({register:()=>null,unregister:()=>null}));const Fg=new globalThis.FinalizationRegistry(t=>{try{t.delete()}catch(e){console.error(e)}});class pc{constructor(e){this.oc=sr(),e&&Fg.register(this,e,e),this._wrapped=e}get wrapped(){if(this._wrapped===null)throw new Error("This object has been deleted");return this._wrapped}set wrapped(e){this._wrapped&&(Fg.unregister(this._wrapped),this._wrapped.delete()),Fg.register(this,e,e),this._wrapped=e}delete(){var e;Fg.unregister(this.wrapped),(e=this.wrapped)==null||e.delete(),this._wrapped=null}}const eo=()=>{function t(e){return Fg.register(t,e),e}return t},wv=t=>{const e=new Set;return[n=>(e.add(n),n),()=>{[...e.values()].forEach(n=>n.delete()),e.clear()},t?e:void 0]},NN=2147483647,Ux=Math.PI/180,zq=180/Math.PI,ZS=t=>Math.round(t*1e3)/1e3,W0=(t,e,n)=>{const r=sr(),i=Va(t),s=xm(e);let o;if(n){const a=xm(n);o=new r.gp_Ax3_3(i,s,a),a.delete()}else o=new r.gp_Ax3_4(i,s);return i.delete(),s.delete(),o},C3=(t,e,n)=>{const r=sr(),i=Va(t),s=xm(e);let o;if(n){const a=xm(n);o=new r.gp_Ax2_2(i,s,a),a.delete()}else o=new r.gp_Ax2_3(i,s);return i.delete(),s.delete(),o},r0=(t,e)=>{const n=sr(),r=Va(t),i=xm(e),s=new n.gp_Ax1_2(r,i);return r.delete(),i.delete(),s},Hq=(t=[0,0,0])=>{const e=sr();if(Array.isArray(t)){if(t.length===3)return new e.gp_Vec_4(...t);if(t.length===2)return new e.gp_Vec_4(...t,0)}else{if(t instanceof Lt)return new e.gp_Vec_3(t.wrapped.XYZ());if(t.XYZ)return new e.gp_Vec_3(t.XYZ())}return new e.gp_Vec_4(0,0,0)};class Lt extends pc{constructor(e=[0,0,0]){super(Hq(e))}get repr(){return`x: ${ZS(this.x)}, y: ${ZS(this.y)}, z: ${ZS(this.z)}`}get x(){return this.wrapped.X()}get y(){return this.wrapped.Y()}get z(){return this.wrapped.Z()}get Length(){return this.wrapped.Magnitude()}toTuple(){return[this.x,this.y,this.z]}cross(e){return new Lt(this.wrapped.Crossed(e.wrapped))}dot(e){return this.wrapped.Dot(e.wrapped)}sub(e){return new Lt(this.wrapped.Subtracted(e.wrapped))}add(e){return new Lt(this.wrapped.Added(e.wrapped))}multiply(e){return new Lt(this.wrapped.Multiplied(e))}normalized(){return new Lt(this.wrapped.Normalized())}normalize(){return this.wrapped.Normalize(),this}getCenter(){return this}getAngle(e){return this.wrapped.Angle(e.wrapped)*zq}projectToPlane(e){const n=e.origin,r=e.zDir,i=this.sub(n),s=r.multiply(i.dot(r)/r.Length**2),o=this.sub(s);return i.delete(),s.delete(),o}equals(e){return this.wrapped.IsEqual(e.wrapped,1e-5,1e-5)}toPnt(){return new this.oc.gp_Pnt_2(this.wrapped.XYZ())}toDir(){return new this.oc.gp_Dir_3(this.wrapped.XYZ())}rotate(e,n=[0,0,0],r=[0,0,1]){const i=r0(n,r);return this.wrapped.Rotate(i,e*Ux),i.delete(),this}}const Gq={X:[1,0,0],Y:[0,1,0],Z:[0,0,1]};function Vq(t){return t==="X"||t==="Y"||t==="Z"?Gq[t]:t}function Va(t){const e=new Lt(t),n=e.toPnt();return e.delete(),n}function xm(t){const e=new Lt(t),n=e.toDir();return e.delete(),n}class od extends pc{constructor(e){const n=sr();super(e||new n.gp_Trsf_1)}translate(e,n=0,r=0){const i=new Lt(typeof e=="number"?[e,n,r]:e);return this.wrapped.SetTranslation_1(i.wrapped),this}rotate(e,n=[0,0,0],r=[0,0,1]){const i=xm(r),s=Va(n),o=new this.oc.gp_Ax1_2(s,i);return this.wrapped.SetRotation_1(o,e*Ux),o.delete(),i.delete(),s.delete(),this}mirror(e="YZ",n){const r=eo();let i,s;if(typeof e=="string"){const a=r(FN(e,n));i=a.origin,s=a.zDir}else e instanceof Bo?(i=n||e.origin,s=e.zDir):(i=n||[0,0,0],s=e);const o=r(C3(i,s));return this.wrapped.SetMirror_3(o),this}scale(e,n){const r=Va(e);return this.wrapped.SetScale(r,n),r.delete(),this}coordSystemChange(e,n){const r=eo(),i=r(e==="reference"?new this.oc.gp_Ax3_1:W0(e.origin,e.zDir,e.xDir)),s=r(n==="reference"?new this.oc.gp_Ax3_1:W0(n.origin,n.zDir,n.xDir));return this.wrapped.SetTransformation_1(i,s),this}transformPoint(e){const n=Va(e),r=n.Transformed(this.wrapped);return n.delete(),r}transform(e){return new this.oc.BRepBuilderAPI_Transform_2(e,this.wrapped,!0).ModifiedShape(e)}}class Bo{constructor(e,n=null,r=[0,0,1]){this.oc=sr();const i=new Lt(r);if(i.Length===0)throw new Error("normal should be non null");this.zDir=i.normalize();let s;if(n)s=new Lt(n);else{const o=W0(e,i);s=new Lt(o.XDirection()),o.delete()}if(s.Length===0)throw new Error("xDir should be non null");this.xDir=s.normalize(),this.yDir=this.zDir.cross(this.xDir).normalize(),this.origin=new Lt(e)}delete(){this.localToGlobal.delete(),this.xDir.delete(),this.yDir.delete(),this.zDir.delete(),this._origin.delete()}clone(){return new Bo(this.origin,this.xDir,this.zDir)}get origin(){return this._origin}set origin(e){this._origin=e,this._calcTransforms()}translateTo(e){const n=this.clone();return n.origin=new Lt(e),n}translate(e,n=0,r=0){const i=new Lt(typeof e=="number"?[e,n,r]:e);return this.translateTo(this.origin.add(i))}translateX(e){return this.translate(e,0,0)}translateY(e){return this.translate(0,e,0)}translateZ(e){return this.translate(0,0,e)}pivot(e,n=[1,0,0]){const r=Vq(n),i=new Lt(this.zDir).rotate(e,[0,0,0],r),s=new Lt(this.xDir).rotate(e,[0,0,0],r);return new Bo(this.origin,s,i)}rotate2DAxes(e){const n=new Lt(this.xDir).rotate(e,[0,0,0],this.zDir);return new Bo(this.origin,n,this.zDir)}_calcTransforms(){const e=new this.oc.gp_Ax3_1,n=W0(this.origin,this.zDir,this.xDir);new this.oc.gp_Trsf_1().SetTransformation_1(e,n),this.globalToLocal=new od,this.globalToLocal.coordSystemChange("reference",{origin:this.origin,zDir:this.zDir,xDir:this.xDir}),this.localToGlobal=new od,this.localToGlobal.coordSystemChange({origin:this.origin,zDir:this.zDir,xDir:this.xDir},"reference")}setOrigin2d(e,n){this.origin=this.toWorldCoords([e,n])}toLocalCoords(e){const n=this.globalToLocal.transformPoint(e),r=new Lt(n);return n.delete(),r}toWorldCoords(e){const n=this.localToGlobal.transformPoint(e),r=new Lt(n);return n.delete(),r}}const Wq={XY:{xDir:[1,0,0],normal:[0,0,1]},YZ:{xDir:[0,1,0],normal:[1,0,0]},ZX:{xDir:[0,0,1],normal:[0,1,0]},XZ:{xDir:[1,0,0],normal:[0,-1,0]},YX:{xDir:[0,1,0],normal:[0,0,-1]},ZY:{xDir:[0,0,1],normal:[-1,0,0]},front:{xDir:[1,0,0],normal:[0,0,1]},back:{xDir:[-1,0,0],normal:[0,0,-1]},left:{xDir:[0,0,1],normal:[-1,0,0]},right:{xDir:[0,0,-1],normal:[1,0,0]},top:{xDir:[1,0,0],normal:[0,1,0]},bottom:{xDir:[1,0,0],normal:[0,-1,0]}},FN=(t,e=[0,0,0])=>{const n=Wq[t];if(!n)throw new Error(`Could not find plane ${t}`);let r;return typeof e=="number"?r=n.normal.map(i=>i*e):r=e,new Bo(r,n.xDir,n.normal)};let jq=class extends pc{constructor(e){const n=sr();let r=e;r||(r=new n.Bnd_Box_1),super(r)}get repr(){const[e,n]=this.bounds;return`${new Lt(e).repr} - ${new Lt(n).repr}`}get bounds(){const e={current:0},n={current:0},r={current:0},i={current:0},s={current:0},o={current:0};return this.wrapped.Get(e,n,r,i,s,o),[[e.current,n.current,r.current],[i.current,s.current,o.current]]}get center(){const[[e,n,r],[i,s,o]]=this.bounds;return[e+(i-e)/2,n+(s-n)/2,r+(o-r)/2]}get width(){const[[e],[n]]=this.bounds;return Math.abs(n-e)}get height(){const[[,e],[,n]]=this.bounds;return Math.abs(n-e)}get depth(){const[[,,e],[,,n]]=this.bounds;return Math.abs(n-e)}add(e){this.wrapped.Add_1(e.wrapped)}isOut(e){return this.wrapped.IsOut_4(e.wrapped)}};function wm(t="XY",e=[0,0,0]){return t instanceof Bo?t.clone():FN(t,e)}function Xq(t,e,n=[0,0,0],r=[0,0,1]){const i=new od;i.rotate(e,n,r);const s=i.transform(t);return i.delete(),s}function qq(t,e){const n=new od;n.translate(e);const r=n.transform(t);return n.delete(),r}function Yq(t,e,n){const r=new od;r.mirror(e,n);const i=r.transform(t);return r.delete(),i}function Zq(t,e,n){const r=new od;r.scale(e,n);const i=r.transform(t);return r.delete(),i}let ly=null;const BC=t=>{if(ly&&!t)return ly;const n=sr().GeomAbs_CurveType;return ly=new Map([[n.GeomAbs_Line,"LINE"],[n.GeomAbs_Circle,"CIRCLE"],[n.GeomAbs_Ellipse,"ELLIPSE"],[n.GeomAbs_Hyperbola,"HYPERBOLA"],[n.GeomAbs_Parabola,"PARABOLA"],[n.GeomAbs_BezierCurve,"BEZIER_CURVE"],[n.GeomAbs_BSplineCurve,"BSPLINE_CURVE"],[n.GeomAbs_OffsetCurve,"OFFSET_CURVE"],[n.GeomAbs_OtherCurve,"OTHER_CURVE"]]),ly},$q=t=>{let e=BC().get(t);if(e||(e=BC(!0).get(t)),!e)throw new Error("unknown type");return e},Kq={X:[1,0,0],Y:[0,1,0],Z:[0,0,1]},T2={YZ:[1,0,0],XZ:[0,1,0],XY:[0,0,1]};class Jq{constructor(){this.filters=[]}delete(){this.filters=[]}and(e){return e.forEach(n=>n(this)),this}not(e){const n=new this.constructor;e(n);const r=({element:i})=>!n.shouldKeep(i);return this.filters.push(r),this}either(e){const n=e.map(i=>{const s=new this.constructor;return i(s),s}),r=({element:i})=>n.some(s=>s.shouldKeep(i));return this.filters.push(r),this}find(e,{unique:n=!1}={}){const r=this.applyFilter(e);if(n){if(r.length!==1)throw console.error(r),new Error("Finder has not found a unique solution");return r[0]}return r}}class Qq extends pc{constructor(){const e=sr();super(new e.Message_ProgressRange_1)}}class $S extends pc{constructor(e){const n=sr();super(new n.BRepExtrema_DistShapeShape_1),this.wrapped.LoadS1(e.wrapped)}distanceTo(e){this.wrapped.LoadS2(e.wrapped);const n=new Qq;return this.wrapped.Perform(n.wrapped),this.wrapped.Value()}}class DN extends Jq{when(e){return this.filters.push(e),this}inList(e){const n=({element:r})=>!!e.find(i=>i.isSame(r));return this.filters.push(n),this}atAngleWith(e="Z",n=0){let r;typeof e=="string"?r=new Lt(Kq[e]):r=new Lt(e);const i=({normal:s})=>{if(!s)return!1;const o=Math.acos(Math.abs(s.dot(r)));return Math.abs(o-Ux*n)<1e-6};return this.filters.push(i),this}atDistance(e,n=[0,0,0]){const r=L2(n),i=new $S(r),s=({element:o})=>Math.abs(i.distanceTo(o)-e)<1e-6;return this.filters.push(s),this}containsPoint(e){return this.atDistance(0,e)}withinDistance(e,n=[0,0,0]){const r=L2(n),i=new $S(r),s=({element:o})=>i.distanceTo(o)-e<1e-6;return this.filters.push(s),this}inBox(e,n){const r=j0(e,n);return this.inShape(r)}inShape(e){const n=new $S(e),r=({element:i})=>n.distanceTo(i)<1e-6;return this.filters.push(r),this}}class C2 extends DN{clone(){const e=new C2;return e.filters=[...this.filters],e}inDirection(e){return this.atAngleWith(e,0)}ofLength(e){const n=({element:r})=>typeof e=="number"?Math.abs(r.length-e)<1e-9:e(r.length);return this.filters.push(n),this}ofCurveType(e){const n=({element:r})=>r.geomType===e;return this.filters.push(n),this}parallelTo(e){if(typeof e=="string"&&T2[e])return this.atAngleWith(T2[e],90);if(typeof e!="string"&&e instanceof Bo)return this.atAngleWith(e.zDir,90);if(typeof e!="string"&&e.normalAt){const n=e.normalAt();return this.atAngleWith(n,90),this}return this}inPlane(e,n){const r=e instanceof Bo?wm(e):wm(e,n);this.parallelTo(r);const i=({element:s})=>{const o=s.startPoint,a=o.projectToPlane(r);return o.equals(a)};return this.filters.push(i),this}shouldKeep(e){let n=null;try{n=e.tangentAt().normalized()}catch(r){console.error("failed to compute a normal",r)}return this.filters.every(r=>r({normal:n,element:e}))}applyFilter(e){return e.edges.filter(n=>this.shouldKeep(n))}}class L3 extends DN{clone(){const e=new L3;return e.filters=[...this.filters],e}parallelTo(e){if(typeof e=="string"&&T2[e])return this.atAngleWith(T2[e]);if(typeof e!="string"&&e instanceof Bo)return this.atAngleWith(e.zDir);if(typeof e!="string"&&e.normalAt){const n=e.normalAt();return this.atAngleWith(n),this}return this}ofSurfaceType(e){const n=({element:r})=>r.geomType===e;return this.filters.push(n),this}inPlane(e,n){const r=e instanceof Bo?wm(e):wm(e,n);this.parallelTo(r);const i=({element:s})=>{const o=s.center,a=o.projectToPlane(r);return o.equals(a)};return this.filters.push(i),this}shouldKeep(e){const n=e.normalAt();return this.filters.every(i=>i({normal:n,element:e}))}applyFilter(e){return e.faces.filter(n=>this.shouldKeep(n))}}const zC=t=>{const e=sr();return{vertex:e.TopAbs_ShapeEnum.TopAbs_VERTEX,wire:e.TopAbs_ShapeEnum.TopAbs_WIRE,face:e.TopAbs_ShapeEnum.TopAbs_FACE,shell:e.TopAbs_ShapeEnum.TopAbs_SHELL,solid:e.TopAbs_ShapeEnum.TopAbs_SOLID,solidCompound:e.TopAbs_ShapeEnum.TopAbs_COMPSOLID,compound:e.TopAbs_ShapeEnum.TopAbs_COMPOUND,edge:e.TopAbs_ShapeEnum.TopAbs_EDGE,shape:e.TopAbs_ShapeEnum.TopAbs_SHAPE}[t]},eY=function*(e,n){const r=sr(),i=new r.TopExp_Explorer_2(e,zC(n),zC("shape")),s=new Map;for(;i.More();){const o=i.Current(),a=o.HashCode(NN);s.get(a)||(s.set(a,!0),yield o),i.Next()}i.delete()},ON=t=>{if(t.IsNull())throw new Error("This shape has not type, it is null");return t.ShapeType()};class Bx extends pc{constructor(e){super(e)}clone(){return new this.constructor(ad(this.wrapped))}get hashCode(){return this.wrapped.HashCode(NN)}get isNull(){return this.wrapped.IsNull()}isSame(e){return this.wrapped.IsSame(e.wrapped)}isEqual(e){return this.wrapped.IsEqual(e.wrapped)}simplify(){const e=sr(),n=new e.ShapeUpgrade_UnifySameDomain_2(this.wrapped,!0,!0,!1);n.Build();const r=gi(n.Shape());if(n.delete(),this.constructor!==r.constructor)throw new Error("unexpected types mismatch");return r}translate(e,n=0,r=0){const i=typeof e=="number"?[e,n,r]:e,s=gi(qq(this.wrapped,i));if(this.delete(),this.constructor!==s.constructor)throw new Error("unexpected types mismatch");return s}translateX(e){return this.translate([e,0,0])}translateY(e){return this.translate([0,e,0])}translateZ(e){return this.translate([0,0,e])}rotate(e,n=[0,0,0],r=[0,0,1]){const i=gi(Xq(this.wrapped,e,n,r));if(this.delete(),this.constructor!==i.constructor)throw new Error("unexpected types mismatch");return i}mirror(e,n){const r=gi(Yq(this.wrapped,e,n));if(this.delete(),this.constructor!==r.constructor)throw new Error("unexpected types mismatch");return r}scale(e,n=[0,0,0]){const r=gi(Zq(this.wrapped,n,e));if(this.delete(),this.constructor!==r.constructor)throw new Error("unexpected types mismatch");return r}_iterTopo(e){return eY(this.wrapped,e)}_listTopo(e){return Array.from(this._iterTopo(e)).map(n=>ad(n))}get edges(){return this._listTopo("edge").map(e=>new Lm(e))}get faces(){return this._listTopo("face").map(e=>new zx(e))}get wires(){return this._listTopo("wire").map(e=>new cc(e))}get boundingBox(){const e=new jq;return this.oc.BRepBndLib.Add(this.wrapped,e.wrapped,!0),e}_mesh({tolerance:e=.001,angularTolerance:n=.1}={}){new this.oc.BRepMesh_IncrementalMesh_2(this.wrapped,e,!1,n,!1)}mesh({tolerance:e=.001,angularTolerance:n=.1}={}){this._mesh({tolerance:e,angularTolerance:n});let r=[],i=[],s=[];const o=[];for(const a of this.faces){const l=a.triangulation(i.length/3);if(!l)continue;const{trianglesIndexes:u,vertices:c,verticesNormals:h}=l;o.push({start:r.length,count:u.length,faceId:a.hashCode}),r=r.concat(u),i=i.concat(c),s=s.concat(h)}return{triangles:r,vertices:i,normals:s,faceGroups:o}}meshEdges({tolerance:e=.001,angularTolerance:n=.1}={}){var r;const i=eo(),s=new Set,o=[],a=[],l=()=>{const c=o.length;let h=null;return[f=>{h?(o.push(...h),h=[f.X(),f.Y(),f.Z()],o.push(...h)):h=[f.X(),f.Y(),f.Z()]},f=>{a.push({start:c/3,count:(o.length-c)/3,edgeId:f}),s.add(f)}]},u=i(new this.oc.TopLoc_Location_1);for(const c of this.faces){const h=i(this.oc.BRep_Tool.Triangulation(c.wrapped,u,0));if(h.IsNull())continue;const f=h.get();for(const d of c.edges){if(i(d),s.has(d.hashCode))continue;const v=i(new this.oc.TopLoc_Location_1),x=i(this.oc.BRep_Tool.PolygonOnTriangulation_1(d.wrapped,h,v)),w=(r=x==null?void 0:x.get())==null?void 0:r.Nodes();if(!w)continue;i(w);const[g,S]=l();for(let _=w.Lower();_<=w.Upper();_++){const T=i(i(f.Node(w.Value(_))).Transformed(v.Transformation()));g(T)}S(d.hashCode)}}for(const c of this.edges){i(c);const h=c.hashCode;if(s.has(h))continue;const f=i(new this.oc.BRepAdaptor_Curve_2(c.wrapped)),d=i(new this.oc.GCPnts_TangentialDeflection_2(f,e,n,2,1e-9,1e-7)),[v,x]=l();for(let w=0;w<d.NbPoints();w++){const g=i(d.Value(w+1).Transformed(u.Transformation()));v(g)}x(h)}return{lines:o,edgeGroups:a}}blobSTEP(){const e="blob.step",n=new this.oc.STEPControl_Writer_1;this.oc.Interface_Static.SetIVal("write.step.schema",5),n.Model(!0).delete();const r=new this.oc.Message_ProgressRange_1;n.Transfer(this.wrapped,this.oc.STEPControl_StepModelType.STEPControl_AsIs,!0,r);const i=n.Write(e);if(n.delete(),r.delete(),i===this.oc.IFSelect_ReturnStatus.IFSelect_RetDone){const s=this.oc.FS.readFile("/"+e);return this.oc.FS.unlink("/"+e),new Blob([s],{type:"application/STEP"})}else throw new Error("WRITE STEP FILE FAILED.")}blobSTL({tolerance:e=.001,angularTolerance:n=.1,binary:r=!1}={}){this._mesh({tolerance:e,angularTolerance:n});const i="blob.stl";if(this.oc.StlAPI.Write(this.wrapped,i,!r)){const o=this.oc.FS.readFile("/"+i);return this.oc.FS.unlink("/"+i),new Blob([o],{type:"application/sla"})}else throw new Error("WRITE STL FILE FAILED.")}}class UN extends Bx{}class BN extends Bx{get repr(){const{startPoint:e,endPoint:n}=this,r=`start: (${this.startPoint.repr}) end:(${this.endPoint.repr})`;return e.delete(),n.delete(),r}get curve(){return new tY(this._geomAdaptor())}get startPoint(){return this.curve.startPoint}get endPoint(){return this.curve.endPoint}tangentAt(e=0){return this.curve.tangentAt(e)}pointAt(e=0){return this.curve.pointAt(e)}get isClosed(){return this.curve.isClosed}get isPeriodic(){return this.curve.isPeriodic}get period(){return this.curve.period}get geomType(){return this.curve.curveType}get length(){const e=new this.oc.GProp_GProps_1;this.oc.BRepGProp.LinearProperties(this.wrapped,e,!0,!1);const n=e.Mass();return e.delete(),n}get orientation(){return this.wrapped.Orientation_1()===this.oc.TopAbs_Orientation.TopAbs_FORWARD?"forward":"backward"}}class tY extends pc{get repr(){const{startPoint:e,endPoint:n}=this,r=`start: (${this.startPoint.repr}) end:(${this.endPoint.repr}}`;return e.delete(),n.delete(),r}get curveType(){const e=this.wrapped.GetType&&this.wrapped.GetType();return $q(e)}get startPoint(){const e=this.wrapped.Value(this.wrapped.FirstParameter());return new Lt(e)}get endPoint(){const e=this.wrapped.Value(this.wrapped.LastParameter());return new Lt(e)}_mapParameter(e){const n=this.wrapped.FirstParameter(),r=this.wrapped.LastParameter();return n+(r-n)*e}pointAt(e=.5){return new Lt(this.wrapped.Value(this._mapParameter(e)))}tangentAt(e=.5){const n=this._mapParameter(e),r=new this.oc.gp_Pnt_1,i=new this.oc.gp_Vec_1;this.wrapped.D1(n,r,i);const s=new Lt(i);return r.delete(),i.delete(),s}get isClosed(){return this.wrapped.IsClosed()}get isPeriodic(){return this.wrapped.IsPeriodic()}get period(){return this.wrapped.Period()}}class Lm extends BN{_geomAdaptor(){return new this.oc.BRepAdaptor_Curve_2(this.wrapped)}}class cc extends BN{_geomAdaptor(){return new this.oc.BRepAdaptor_CompCurve_2(this.wrapped,!1)}offset2D(e,n="arc"){const r={arc:this.oc.GeomAbs_JoinType.GeomAbs_Arc,intersection:this.oc.GeomAbs_JoinType.GeomAbs_Intersection,tangent:this.oc.GeomAbs_JoinType.GeomAbs_Tangent},i=new this.oc.BRepOffsetAPI_MakeOffset_3(this.wrapped,r[n],!1);i.Perform(e,0);const s=gi(i.Shape());if(i.delete(),this.delete(),!(s instanceof cc))throw new Error("Could not offset with a wire");return s}}class nY extends pc{get surfaceType(){const e=this.oc.GeomAbs_SurfaceType,r=new Map([[e.GeomAbs_Plane,"PLANE"],[e.GeomAbs_Cylinder,"CYLINDRE"],[e.GeomAbs_Cone,"CONE"],[e.GeomAbs_Sphere,"SPHERE"],[e.GeomAbs_Torus,"TORUS"],[e.GeomAbs_BezierSurface,"BEZIER_SURFACE"],[e.GeomAbs_BSplineSurface,"BSPLINE_SURFACE"],[e.GeomAbs_SurfaceOfRevolution,"REVOLUTION_SURFACE"],[e.GeomAbs_SurfaceOfExtrusion,"EXTRUSION_SURFACE"],[e.GeomAbs_OffsetSurface,"OFFSET_SURFACE"],[e.GeomAbs_OtherSurface,"OTHER_SURFACE"]]).get(this.wrapped.GetType());if(!r)throw new Error("surface type not found");return r}}class zx extends Bx{_geomAdaptor(){return new this.oc.BRepAdaptor_Surface_2(this.wrapped,!1)}get surface(){return new nY(this._geomAdaptor())}get orientation(){return this.wrapped.Orientation_1()===this.oc.TopAbs_Orientation.TopAbs_FORWARD?"forward":"backward"}get geomType(){const e=this.surface,n=e.surfaceType;return e.delete(),n}get UVBounds(){const e={current:0},n={current:0},r={current:0},i={current:0};return this.oc.BRepTools.UVBounds_1(this.wrapped,e,n,r,i),{uMin:e.current,uMax:n.current,vMin:r.current,vMax:i.current}}pointOnSurface(e,n){const{uMin:r,uMax:i,vMin:s,vMax:o}=this.UVBounds,a=this._geomAdaptor(),l=new this.oc.gp_Pnt_1,u=e*(i-r)+r,c=n*(o-s)+s;a.D0(u,c,l);const h=new Lt(l);return a.delete(),l.delete(),h}normalAt(e){let n=0,r=0;const i=eo();if(e){const u=i(this.oc.BRep_Tool.Surface_2(this.wrapped)),c=i(new this.oc.GeomAPI_ProjectPointOnSurf_2(i(Va(e)),u,this.oc.Extrema_ExtAlgo.Extrema_ExtAlgo_Grad)),h={current:0},f={current:0};c.LowerDistanceParameters(h,f),n=h.current,r=f.current}else{const{uMin:u,uMax:c,vMin:h,vMax:f}=this.UVBounds;n=.5*(u+c),r=.5*(h+f)}const s=i(new this.oc.gp_Pnt_1),o=i(new this.oc.gp_Vec_1);return i(new this.oc.BRepGProp_Face_2(this.wrapped,!1)).Normal(n,r,s,o),new Lt(o)}get center(){const e=new this.oc.GProp_GProps_1;this.oc.BRepGProp.SurfaceProperties_2(this.wrapped,e,1e-7,!0);const n=new Lt(e.CentreOfMass());return e.delete(),n}outerWire(){const e=new cc(this.oc.BRepTools.OuterWire(this.wrapped));return this.delete(),e}innerWires(){const e=this.clone().outerWire(),n=this.wires.filter(r=>!e.isSame(r));return e.delete(),this.delete(),n}triangulation(e=0){const n=eo(),r=n(new this.oc.TopLoc_Location_1),i=n(this.oc.BRep_Tool.Triangulation(this.wrapped,r,0));if(i.IsNull())return null;const s=n(r.Transformation()),o={vertices:[],trianglesIndexes:[],verticesNormals:[]},a=i.get(),l=a.NbNodes();o.vertices=new Array(l*3);for(let v=1;v<=l;v++){const x=n(n(a.Node(v)).Transformed(s));o.vertices[(v-1)*3+0]=x.X(),o.vertices[(v-1)*3+1]=x.Y(),o.vertices[(v-1)*3+2]=x.Z()}const u=n(new this.oc.TColgp_Array1OfDir_2(1,l)),c=n(new this.oc.Poly_Connect_2(i));this.oc.StdPrs_ToolTriangulatedShape.Normal(this.wrapped,c,u),o.verticesNormals=new Array(u.Length()*3);for(let v=u.Lower();v<=u.Upper();v++){const x=n(n(u.Value(v)).Transformed(s));o.verticesNormals[(v-1)*3+0]=x.X(),o.verticesNormals[(v-1)*3+1]=x.Y(),o.verticesNormals[(v-1)*3+2]=x.Z()}const h=this.orientation,f=a.NbTriangles();o.trianglesIndexes=new Array(f*3);let d=0;for(let v=1;v<=f;v++){const x=n(a.Triangle(v));let w=x.Value(1),g=x.Value(2);const S=x.Value(3);if(h==="backward"){const _=w;w=g,g=_}o.trianglesIndexes[d*3+0]=w-1+e,o.trianglesIndexes[d*3+1]=g-1+e,o.trianglesIndexes[d*3+2]=S-1+e,d++}return o}}class Hx extends Bx{fuse(e,{optimisation:n="none"}={}){const r=eo(),i=r(new this.oc.Message_ProgressRange_1),s=r(new this.oc.BRepAlgoAPI_Fuse_3(this.wrapped,e.wrapped,i));n==="commonFace"&&s.SetGlue(this.oc.BOPAlgo_GlueEnum.BOPAlgo_GlueShift),n==="sameFace"&&s.SetGlue(this.oc.BOPAlgo_GlueEnum.BOPAlgo_GlueFull),s.Build(i),s.SimplifyResult(!0,!0,.001);const o=gi(s.Shape());if(!Xu(o))throw new Error("Could not fuse as a 3d shape");return o}cut(e,{optimisation:n="none"}={}){const r=eo(),i=r(new this.oc.Message_ProgressRange_1),s=r(new this.oc.BRepAlgoAPI_Cut_3(this.wrapped,e.wrapped,i));n==="commonFace"&&s.SetGlue(this.oc.BOPAlgo_GlueEnum.BOPAlgo_GlueShift),n==="sameFace"&&s.SetGlue(this.oc.BOPAlgo_GlueEnum.BOPAlgo_GlueFull),s.Build(i),s.SimplifyResult(!0,!0,.001);const o=gi(s.Shape());if(!Xu(o))throw new Error("Could not cut as a 3d shape");return o}intersect(e){const n=eo(),r=n(new this.oc.Message_ProgressRange_1),i=n(new this.oc.BRepAlgoAPI_Common_3(this.wrapped,e.wrapped,r));i.Build(r),i.SimplifyResult(!0,!0,.001);const s=gi(i.Shape());if(!Xu(s))throw new Error("Could not intersect as a 3d shape");return s}shell(e,n=null,r=.001){const i=typeof n=="number"?n:r;let s,o;if(typeof e=="number"){o=e;const d=new L3;s=typeof n=="function"?n(d):d}else o=e.thickness,s=e.filter;const a=eo(),l=s.find(this),u=a(new this.oc.TopTools_ListOfShape_1);l.forEach(d=>{u.Append_1(d.wrapped)});const c=a(new this.oc.Message_ProgressRange_1),h=a(new this.oc.BRepOffsetAPI_MakeThickSolid);h.MakeThickSolidByJoin(this.wrapped,u,-o,i,this.oc.BRepOffset_Mode.BRepOffset_Skin,!1,!1,this.oc.GeomAbs_JoinType.GeomAbs_Arc,!1,c);const f=gi(h.Shape());if(!Xu(f))throw new Error("Could not shell as a 3d shape");return f}_builderIter(e,n){if(typeof e=="number"){let o=0;for(const a of this._iterTopo("edge"))n(e,ad(a)),o+=1;return o}let r,i=null;typeof e=="function"?r=e:(r=o=>e.filter.shouldKeep(o)?e.radius||1:0,e.filter&&!e.keep&&(i=()=>e.filter.delete()));let s=0;for(const o of this._iterTopo("edge")){const a=ad(o),l=new Lm(a),u=r(l);u&&(n(u,a),s+=1),l.delete()}return i&&i(),s}fillet(e,n){const i=eo()(new this.oc.BRepFilletAPI_MakeFillet(this.wrapped,this.oc.ChFi3d_FilletShape.ChFi3d_Rational));let s=e;if(typeof e=="number"&&n&&(s={radius:e,filter:n(new C2)}),!this._builderIter(s,(l,u)=>i.Add_2(l,u)))throw new Error("Could not fillet, no edge was selected");const a=gi(i.Shape());if(!Xu(a))throw new Error("Could not fillet as a 3d shape");return a}chamfer(e,n){const i=eo()(new this.oc.BRepFilletAPI_MakeChamfer(this.wrapped));let s=e;if(typeof e=="number"&&n&&(s={radius:e,filter:n(new C2)}),!this._builderIter(s,(l,u)=>i.Add_2(l,u)))throw new Error("Could not chamfer, no edge was selected");const a=gi(i.Shape());if(!Xu(a))throw new Error("Could not chamfer as a 3d shape");return a}}class zN extends Hx{}class vd extends Hx{}class HN extends Hx{}class GN extends Hx{}function Xu(t){return t instanceof zN||t instanceof vd||t instanceof HN||t instanceof GN}function HC(t){return t instanceof cc}function ad(t){const e=sr(),n=e.TopAbs_ShapeEnum,r=new Map([[n.TopAbs_EDGE,e.TopoDS.Edge_1],[n.TopAbs_WIRE,e.TopoDS.Wire_1],[n.TopAbs_FACE,e.TopoDS.Face_1],[n.TopAbs_SHELL,e.TopoDS.Shell_1],[n.TopAbs_SOLID,e.TopoDS.Solid_1],[n.TopAbs_COMPSOLID,e.TopoDS.CompSolid_1],[n.TopAbs_COMPOUND,e.TopoDS.Compound_1]]),i=ON(t),s=r.get(i);if(!s)throw new Error("Could not find a wrapper for this shape type");return s(t)}function gi(t){const n=sr().TopAbs_ShapeEnum,i=new Map([[n.TopAbs_VERTEX,UN],[n.TopAbs_EDGE,Lm],[n.TopAbs_WIRE,cc],[n.TopAbs_FACE,zx],[n.TopAbs_SHELL,zN],[n.TopAbs_SOLID,vd],[n.TopAbs_COMPSOLID,HN],[n.TopAbs_COMPOUND,GN]]).get(ON(t));if(!i)throw new Error("Could not find a wrapper for this shape type");return new i(ad(t))}const VN=(t,e)=>{const n=sr();return new Lm(new n.BRepBuilderAPI_MakeEdge_3(Va(t),Va(e)).Edge())},rY=(t,e=[0,0,0],n=[0,0,1])=>{const r=sr(),[i,s]=wv(),o=i(C3(e,n)),a=i(new r.gp_Circ_2(o,t)),l=i(new r.BRepBuilderAPI_MakeEdge_8(a)),u=new Lm(l.Edge());return s(),u},iY=(t,e,n,r=[0,0,0],i=[0,0,1],s=!1)=>{const o=sr(),[a,l]=wv();let u=2*Math.PI;s&&(u=-2*Math.PI);const c=a(new o.Geom2d_Line_3(a(new o.gp_Pnt2d_3(0,0)),a(new o.gp_Dir2d_4(u,t)))),h=e/t,f=c.Value(0),d=c.Value(h*Math.sqrt((2*Math.PI)**2+t**2)),v=a(new o.GCE2d_MakeSegment_1(f,d)),x=new o.Geom_CylindricalSurface_1(a(W0(r,i)),n),w=a(new o.BRepBuilderAPI_MakeEdge_30(a(new o.Handle_Geom2d_Curve_2(v.Value().get())),a(new o.Handle_Geom_Surface_2(x)))).Edge(),g=a(new o.BRepBuilderAPI_MakeWire_2(w)).Wire();return o.BRepLib.BuildCurves3d_2(g),l(),new cc(g)},P3=t=>{const e=sr(),n=new e.BRepBuilderAPI_MakeWire_1;t.forEach(o=>{o instanceof Lm&&n.Add_1(o.wrapped),o instanceof cc&&n.Add_2(o.wrapped)});const r=new e.Message_ProgressRange_1;n.Build(r);const i=n.Error();if(i!==e.BRepBuilderAPI_WireError.BRepBuilderAPI_WireDone){const o=new Map([[e.BRepBuilderAPI_WireError.BRepBuilderAPI_EmptyWire,"empty wire"],[e.BRepBuilderAPI_WireError.BRepBuilderAPI_NonManifoldWire,"non manifold wire"],[e.BRepBuilderAPI_WireError.BRepBuilderAPI_DisconnectedWire,"disconnected wire"]]);throw new Error(`Failed to build the wire, ${o.get(i)||"unknown error"}`)}const s=new cc(n.Wire());return n.delete(),r.delete(),s},KS=(t,e)=>{const n=sr(),r=new n.BRepBuilderAPI_MakeFace_15(t.wrapped,!1);if(e==null||e.forEach(s=>{r.Add(s.wrapped)}),!r.IsDone())throw r.delete(),new Error("Failed to build the face. Your wire might be non planar.");const i=r.Face();return r.delete(),new zx(i)},sY=(t,e)=>{const n=sr(),[r,i]=wv(),s=r(n.BRep_Tool.Surface_2(t.wrapped)),a=r(new n.BRepBuilderAPI_MakeFace_21(s,e.wrapped,!0)).Face();return i(),new zx(a)},WN=(t,e,n=[0,0,0],r=[0,0,1])=>{const i=sr(),s=C3(n,r),o=new i.BRepPrimAPI_MakeCylinder_3(s,t,e),a=new vd(o.Shape());return s.delete(),o.delete(),a},oY=t=>{const e=sr(),n=new e.BRepPrimAPI_MakeSphere_1(t),r=new vd(n.Shape());return n.delete(),r};class aY extends pc{constructor(e,n,r){const i=sr(),s=eo(),o=Math.sqrt(e*n/r),a=e/o,l=n/o,u=new i.gp_GTrsf_1;u.SetAffinity_1(r0([0,0,0],[0,1,0]),a);const c=s(new i.gp_GTrsf_1);c.SetAffinity_1(r0([0,0,0],[0,0,1]),o);const h=s(new i.gp_GTrsf_1);h.SetAffinity_1(r0([0,0,0],[1,0,0]),l),u.Multiply(c),u.Multiply(h),super(u)}applyToPoint(e){const n=sr(),i=eo()(e.XYZ());return this.wrapped.Transforms_1(i),new n.gp_Pnt_2(i)}}function lY(t){const e=[];for(let n=t.LowerRow();n<=t.UpperRow();n++){const r=[];e.push(r);for(let i=t.LowerCol();i<=t.UpperCol();i++){const s=t.Value(n,i);r.push(s)}}return e}const uY=(t,e,n)=>{const r=sr(),i=eo(),s=i(new r.gp_Sphere_1);s.SetRadius(1);const o=i(new r.Geom_SphericalSurface_2(s)),a=r.GeomConvert.SurfaceToBSplineSurface(o.UReversed()).get(),l=lY(a.Poles_2()),u=new aY(t,e,n);l.forEach((h,f)=>{h.forEach((d,v)=>{const x=u.applyToPoint(d);a.SetPole_1(f+1,v+1,x)})});const c=gi(i(new r.BRepBuilderAPI_MakeShell_2(a.UReversed(),!1)).Shell());return hY([c])},j0=(t,e)=>{const n=sr(),r=new n.BRepPrimAPI_MakeBox_4(Va(t),Va(e)),i=new vd(r.Solid());return r.delete(),i},L2=t=>{const e=sr(),n=Va(t),r=new e.BRepBuilderAPI_MakeVertex(n),i=r.Vertex();return r.delete(),new UN(i)},P2=t=>{const e=sr(),n=new e.TopoDS_Builder,r=new e.TopoDS_Compound;return n.MakeCompound(r),t.forEach(s=>{n.Add(r,s.wrapped),s.delete()}),gi(r)};function cY(t){const e=sr(),n=eo(),r=n(new e.BRepBuilderAPI_Sewing(1e-6,!0,!0,!0,!1));return t.forEach(({wrapped:i})=>{r.Add(i)}),r.Perform(n(new e.Message_ProgressRange_1)),gi(ad(r.SewedShape()))}function hY(t){const e=eo(),n=sr(),r=cY(t),i=gi(e(new n.ShapeFix_Solid_1).SolidFromShell(r.wrapped));if(!(i instanceof vd))throw new Error("Could not make a solid of faces and shells");return i}const fY=(t,e)=>{const n=sr(),r=new n.BRepPrimAPI_MakePrism_1(t.wrapped,e.wrapped,!1,!0),i=new vd(ad(r.Shape()));return r.delete(),i},dY=(t,e=[0,0,0],n=[0,0,1],r=360)=>{const i=sr(),s=r0(e,n),o=new i.BRepPrimAPI_MakeRevol_1(t.wrapped,s,r*Ux,!1),a=gi(o.Shape());if(s.delete(),o.delete(),!Xu(a))throw new Error("Could not revolve to a 3d shape");return a};function X0(t,e,{frenet:n=!1,auxiliarySpine:r,law:i=null,transitionMode:s="right",withContact:o,support:a,forceProfileSpineOthogonality:l}={},u=!1){const c=sr(),h=s==="round"?!0:!!l,f=new c.BRepOffsetAPI_MakePipeShell(e.wrapped);if(s){const x={transformed:c.BRepBuilderAPI_TransitionMode.BRepBuilderAPI_Transformed,round:c.BRepBuilderAPI_TransitionMode.BRepBuilderAPI_RoundCorner,right:c.BRepBuilderAPI_TransitionMode.BRepBuilderAPI_RightCorner}[s];x&&f.SetTransitionMode(x)}a?f.SetMode_4(a):n&&f.SetMode_1(n),r&&f.SetMode_5(r.wrapped,!1,c.BRepFill_TypeOfContact.BRepFill_NoContact),i?f.SetLaw_1(t.wrapped,i,!!o,h):f.Add_1(t.wrapped,!!o,h);const d=new c.Message_ProgressRange_1;f.Build(d),u||f.MakeSolid();const v=gi(f.Shape());if(!Xu(v))throw new Error("Could not sweep to a 3d shape");if(u){const x=gi(f.FirstShape()),w=gi(f.LastShape());if(!HC(x))throw new Error("Could not sweep with one start wire");if(!HC(w))throw new Error("Could not sweep with one end wire");return f.delete(),[v,x,w]}return f.delete(),d.delete(),v}const jN=(t,{profile:e,endFactor:n=1})=>{let r;const i=sr();if(e==="s-curve")r=new i.Law_S,r.Set_1(0,1,t,n);else if(e==="linear")r=new i.Law_Linear,r.Set(0,1,t,n);else throw new Error("Could not generate a law function");return r.Trim(0,t,1e-6)};function pY(t,e,n,r,i=!1){const s=new Lt(e),o=new Lt(n),a=VN(s,s.add(o)),l=P3([a]),u=r?jN(o.Length,r):null;return i?X0(t,l,{law:u},i):X0(t,l,{law:u},i)}function mY(t,e,n,r,i,s=!1){const o=new Lt(n),a=new Lt(r),l=VN(o,o.add(a)),u=P3([l]),c=360/e*a.Length,h=1,f=iY(c,a.Length,h,n,r),d=i?jN(a.Length,i):null;return s?X0(t,u,{auxiliarySpine:f,law:d},s):X0(t,u,{auxiliarySpine:f,law:d},s)}const gY=(t,{ruled:e=!0,startPoint:n,endPoint:r}={},i=!1)=>{const s=sr(),[o,a]=wv(),l=o(new s.BRepOffsetAPI_ThruSections(!i,e,1e-6));n&&l.AddVertex(o(L2(n)).wrapped),t.forEach(h=>l.AddWire(h.wrapped)),r&&l.AddVertex(o(L2(r)).wrapped);const u=o(new s.Message_ProgressRange_1);l.Build(u);const c=gi(l.Shape());if(a(),!Xu(c))throw new Error("Could not loft to a 3d shape");return c};class R3{constructor(e,{defaultOrigin:n=[0,0,0],defaultDirection:r=[0,0,1]}={}){this.wire=e,this.defaultOrigin=n,this.defaultDirection=r,this.baseFace=null}get baseFace(){return this._baseFace}set baseFace(e){e?this._baseFace=e.clone():this._baseFace=e}delete(){this.wire.delete(),this._defaultOrigin.delete(),this._defaultDirection.delete(),this.baseFace&&this.baseFace.delete()}clone(){const e=new R3(this.wire.clone(),{defaultOrigin:this.defaultOrigin,defaultDirection:this.defaultDirection});return this.baseFace&&(e.baseFace=this.baseFace.clone()),e}get defaultOrigin(){return this._defaultOrigin}set defaultOrigin(e){this._defaultOrigin=new Lt(e)}get defaultDirection(){return this._defaultDirection}set defaultDirection(e){this._defaultDirection=new Lt(e)}face(){let e;return this.baseFace?e=sY(this.baseFace,this.wire):e=KS(this.wire),e}wires(){return this.wire.clone()}faces(){return this.face()}revolve(e,{origin:n}={}){const r=KS(this.wire),i=dY(r,n||this.defaultOrigin,e);return r.delete(),this.delete(),i}extrude(e,{extrusionDirection:n,extrusionProfile:r,twistAngle:i,origin:s}={}){const[o,a]=wv(),l=o(new Lt(n||this.defaultDirection).normalized().multiply(e));if(r&&!i){const h=pY(this.wire,s||this.defaultOrigin,l,r);return a(),this.delete(),h}if(i){const h=mY(this.wire,i,s||this.defaultOrigin,l,r);return a(),this.delete(),h}const u=KS(this.wire),c=fY(u,l);return a(),this.delete(),c}sweepSketch(e,n={}){const r=this.wire.startPoint,i=this.wire.tangentAt(1e-9).multiply(-1).normalize(),s=i.cross(this.defaultDirection).multiply(-1),o=e(new Bo(r,s,i),r),a={forceProfileSpineOthogonality:!0,...n};this.baseFace&&(a.support=this.baseFace.wrapped);const l=X0(o.wire,this.wire,a);return this.delete(),l}loftWith(e,n={},r=!1){const i=Array.isArray(e)?[this,...e]:[this,e],s=gY(i.map(o=>o.wire),n,r);return i.forEach(o=>o.delete()),s}}const GC=(t,e={})=>{const n=e.plane instanceof Bo?wm(e.plane):wm(e.plane,e.origin),r=P3([rY(t,n.origin,n.zDir)]),i=new R3(r,{defaultOrigin:n.origin,defaultDirection:n.zDir});return n.delete(),i};/*! https://mths.be/codepointat v0.2.0 by @mathias */String.prototype.codePointAt||function(){var t=function(){try{var n={},r=Object.defineProperty,i=r(n,n,n)&&r}catch{}return i}(),e=function(n){if(this==null)throw TypeError();var r=String(this),i=r.length,s=n?Number(n):0;if(s!=s&&(s=0),!(s<0||s>=i)){var o=r.charCodeAt(s),a;return o>=55296&&o<=56319&&i>s+1&&(a=r.charCodeAt(s+1),a>=56320&&a<=57343)?(o-55296)*1024+a-56320+65536:o}};t?t(String.prototype,"codePointAt",{value:e,configurable:!0,writable:!0}):String.prototype.codePointAt=e}();function XN(){this.table=new Uint16Array(16),this.trans=new Uint16Array(288)}var vY=new XN,yY=new XN,qN=new Uint8Array(30),YN=new Uint16Array(30),xY=new Uint8Array(30),wY=new Uint16Array(30);function ZN(t,e,n,r){var i,s;for(i=0;i<n;++i)t[i]=0;for(i=0;i<30-n;++i)t[i+n]=i/n|0;for(s=r,i=0;i<30;++i)e[i]=s,s+=1<<t[i]}function SY(t,e){var n;for(n=0;n<7;++n)t.table[n]=0;for(t.table[7]=24,t.table[8]=152,t.table[9]=112,n=0;n<24;++n)t.trans[n]=256+n;for(n=0;n<144;++n)t.trans[24+n]=n;for(n=0;n<8;++n)t.trans[24+144+n]=280+n;for(n=0;n<112;++n)t.trans[24+144+8+n]=144+n;for(n=0;n<5;++n)e.table[n]=0;for(e.table[5]=32,n=0;n<32;++n)e.trans[n]=n}SY(vY,yY);ZN(qN,YN,4,3);ZN(xY,wY,2,1);qN[28]=0;YN[28]=258;function yp(t,e,n,r,i){return Math.pow(1-i,3)*t+3*Math.pow(1-i,2)*i*e+3*(1-i)*Math.pow(i,2)*n+Math.pow(i,3)*r}function Yh(){this.x1=Number.NaN,this.y1=Number.NaN,this.x2=Number.NaN,this.y2=Number.NaN}Yh.prototype.isEmpty=function(){return isNaN(this.x1)||isNaN(this.y1)||isNaN(this.x2)||isNaN(this.y2)};Yh.prototype.addPoint=function(t,e){typeof t=="number"&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),typeof e=="number"&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))};Yh.prototype.addX=function(t){this.addPoint(t,null)};Yh.prototype.addY=function(t){this.addPoint(null,t)};Yh.prototype.addBezier=function(t,e,n,r,i,s,o,a){var l=[t,e],u=[n,r],c=[i,s],h=[o,a];this.addPoint(t,e),this.addPoint(o,a);for(var f=0;f<=1;f++){var d=6*l[f]-12*u[f]+6*c[f],v=-3*l[f]+9*u[f]-9*c[f]+3*h[f],x=3*u[f]-3*l[f];if(v===0){if(d===0)continue;var w=-x/d;0<w&&w<1&&(f===0&&this.addX(yp(l[f],u[f],c[f],h[f],w)),f===1&&this.addY(yp(l[f],u[f],c[f],h[f],w)));continue}var g=Math.pow(d,2)-4*x*v;if(!(g<0)){var S=(-d+Math.sqrt(g))/(2*v);0<S&&S<1&&(f===0&&this.addX(yp(l[f],u[f],c[f],h[f],S)),f===1&&this.addY(yp(l[f],u[f],c[f],h[f],S)));var _=(-d-Math.sqrt(g))/(2*v);0<_&&_<1&&(f===0&&this.addX(yp(l[f],u[f],c[f],h[f],_)),f===1&&this.addY(yp(l[f],u[f],c[f],h[f],_)))}}};Yh.prototype.addQuad=function(t,e,n,r,i,s){var o=t+.6666666666666666*(n-t),a=e+2/3*(r-e),l=o+1/3*(i-t),u=a+1/3*(s-e);this.addBezier(t,e,o,a,l,u,i,s)};function as(){this.commands=[],this.fill="black",this.stroke=null,this.strokeWidth=1}as.prototype.moveTo=function(t,e){this.commands.push({type:"M",x:t,y:e})};as.prototype.lineTo=function(t,e){this.commands.push({type:"L",x:t,y:e})};as.prototype.curveTo=as.prototype.bezierCurveTo=function(t,e,n,r,i,s){this.commands.push({type:"C",x1:t,y1:e,x2:n,y2:r,x:i,y:s})};as.prototype.quadTo=as.prototype.quadraticCurveTo=function(t,e,n,r){this.commands.push({type:"Q",x1:t,y1:e,x:n,y:r})};as.prototype.close=as.prototype.closePath=function(){this.commands.push({type:"Z"})};as.prototype.extend=function(t){if(t.commands)t=t.commands;else if(t instanceof Yh){var e=t;this.moveTo(e.x1,e.y1),this.lineTo(e.x2,e.y1),this.lineTo(e.x2,e.y2),this.lineTo(e.x1,e.y2),this.close();return}Array.prototype.push.apply(this.commands,t)};as.prototype.getBoundingBox=function(){for(var t=new Yh,e=0,n=0,r=0,i=0,s=0;s<this.commands.length;s++){var o=this.commands[s];switch(o.type){case"M":t.addPoint(o.x,o.y),e=r=o.x,n=i=o.y;break;case"L":t.addPoint(o.x,o.y),r=o.x,i=o.y;break;case"Q":t.addQuad(r,i,o.x1,o.y1,o.x,o.y),r=o.x,i=o.y;break;case"C":t.addBezier(r,i,o.x1,o.y1,o.x2,o.y2,o.x,o.y),r=o.x,i=o.y;break;case"Z":r=e,i=n;break;default:throw new Error("Unexpected path command "+o.type)}}return t.isEmpty()&&t.addPoint(0,0),t};as.prototype.draw=function(t){t.beginPath();for(var e=0;e<this.commands.length;e+=1){var n=this.commands[e];n.type==="M"?t.moveTo(n.x,n.y):n.type==="L"?t.lineTo(n.x,n.y):n.type==="C"?t.bezierCurveTo(n.x1,n.y1,n.x2,n.y2,n.x,n.y):n.type==="Q"?t.quadraticCurveTo(n.x1,n.y1,n.x,n.y):n.type==="Z"&&t.closePath()}this.fill&&(t.fillStyle=this.fill,t.fill()),this.stroke&&(t.strokeStyle=this.stroke,t.lineWidth=this.strokeWidth,t.stroke())};as.prototype.toPathData=function(t){t=t!==void 0?t:2;function e(o){return Math.round(o)===o?""+Math.round(o):o.toFixed(t)}function n(){for(var o=arguments,a="",l=0;l<arguments.length;l+=1){var u=o[l];u>=0&&l>0&&(a+=" "),a+=e(u)}return a}for(var r="",i=0;i<this.commands.length;i+=1){var s=this.commands[i];s.type==="M"?r+="M"+n(s.x,s.y):s.type==="L"?r+="L"+n(s.x,s.y):s.type==="C"?r+="C"+n(s.x1,s.y1,s.x2,s.y2,s.x,s.y):s.type==="Q"?r+="Q"+n(s.x1,s.y1,s.x,s.y):s.type==="Z"&&(r+="Z")}return r};as.prototype.toSVG=function(t){var e='<path d="';return e+=this.toPathData(t),e+='"',this.fill&&this.fill!=="black"&&(this.fill===null?e+=' fill="none"':e+=' fill="'+this.fill+'"'),this.stroke&&(e+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),e+="/>",e};as.prototype.toDOMElement=function(t){var e=this.toPathData(t),n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",e),n};function $N(t){throw new Error(t)}function VC(t,e){t||$N(e)}var On={fail:$N,argument:VC,assert:VC},WC=32768,jC=2147483648,Sm={},Xt={},Pn={};function Fl(t){return function(){return t}}Xt.BYTE=function(t){return On.argument(t>=0&&t<=255,"Byte value should be between 0 and 255."),[t]};Pn.BYTE=Fl(1);Xt.CHAR=function(t){return[t.charCodeAt(0)]};Pn.CHAR=Fl(1);Xt.CHARARRAY=function(t){typeof t>"u"&&(t="",console.warn("Undefined CHARARRAY encountered and treated as an empty string. This is probably caused by a missing glyph name."));for(var e=[],n=0;n<t.length;n+=1)e[n]=t.charCodeAt(n);return e};Pn.CHARARRAY=function(t){return typeof t>"u"?0:t.length};Xt.USHORT=function(t){return[t>>8&255,t&255]};Pn.USHORT=Fl(2);Xt.SHORT=function(t){return t>=WC&&(t=-(2*WC-t)),[t>>8&255,t&255]};Pn.SHORT=Fl(2);Xt.UINT24=function(t){return[t>>16&255,t>>8&255,t&255]};Pn.UINT24=Fl(3);Xt.ULONG=function(t){return[t>>24&255,t>>16&255,t>>8&255,t&255]};Pn.ULONG=Fl(4);Xt.LONG=function(t){return t>=jC&&(t=-(2*jC-t)),[t>>24&255,t>>16&255,t>>8&255,t&255]};Pn.LONG=Fl(4);Xt.FIXED=Xt.ULONG;Pn.FIXED=Pn.ULONG;Xt.FWORD=Xt.SHORT;Pn.FWORD=Pn.SHORT;Xt.UFWORD=Xt.USHORT;Pn.UFWORD=Pn.USHORT;Xt.LONGDATETIME=function(t){return[0,0,0,0,t>>24&255,t>>16&255,t>>8&255,t&255]};Pn.LONGDATETIME=Fl(8);Xt.TAG=function(t){return On.argument(t.length===4,"Tag should be exactly 4 ASCII characters."),[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]};Pn.TAG=Fl(4);Xt.Card8=Xt.BYTE;Pn.Card8=Pn.BYTE;Xt.Card16=Xt.USHORT;Pn.Card16=Pn.USHORT;Xt.OffSize=Xt.BYTE;Pn.OffSize=Pn.BYTE;Xt.SID=Xt.USHORT;Pn.SID=Pn.USHORT;Xt.NUMBER=function(t){return t>=-107&&t<=107?[t+139]:t>=108&&t<=1131?(t=t-108,[(t>>8)+247,t&255]):t>=-1131&&t<=-108?(t=-t-108,[(t>>8)+251,t&255]):t>=-32768&&t<=32767?Xt.NUMBER16(t):Xt.NUMBER32(t)};Pn.NUMBER=function(t){return Xt.NUMBER(t).length};Xt.NUMBER16=function(t){return[28,t>>8&255,t&255]};Pn.NUMBER16=Fl(3);Xt.NUMBER32=function(t){return[29,t>>24&255,t>>16&255,t>>8&255,t&255]};Pn.NUMBER32=Fl(5);Xt.REAL=function(t){var e=t.toString(),n=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(e);if(n){var r=parseFloat("1e"+((n[2]?+n[2]:0)+n[1].length));e=(Math.round(t*r)/r).toString()}for(var i="",s=0,o=e.length;s<o;s+=1){var a=e[s];a==="e"?i+=e[++s]==="-"?"c":"b":a==="."?i+="a":a==="-"?i+="e":i+=a}i+=i.length&1?"f":"ff";for(var l=[30],u=0,c=i.length;u<c;u+=2)l.push(parseInt(i.substr(u,2),16));return l};Pn.REAL=function(t){return Xt.REAL(t).length};Xt.NAME=Xt.CHARARRAY;Pn.NAME=Pn.CHARARRAY;Xt.STRING=Xt.CHARARRAY;Pn.STRING=Pn.CHARARRAY;Sm.UTF8=function(t,e,n){for(var r=[],i=n,s=0;s<i;s++,e+=1)r[s]=t.getUint8(e);return String.fromCharCode.apply(null,r)};Sm.UTF16=function(t,e,n){for(var r=[],i=n/2,s=0;s<i;s++,e+=2)r[s]=t.getUint16(e);return String.fromCharCode.apply(null,r)};Xt.UTF16=function(t){for(var e=[],n=0;n<t.length;n+=1){var r=t.charCodeAt(n);e[e.length]=r>>8&255,e[e.length]=r&255}return e};Pn.UTF16=function(t){return t.length*2};var m5={"x-mac-croatian":"","x-mac-cyrillic":"","x-mac-gaelic":"","x-mac-greek":"","x-mac-icelandic":"","x-mac-inuit":"","x-mac-ce":"",macintosh:"","x-mac-romanian":"","x-mac-turkish":""};Sm.MACSTRING=function(t,e,n,r){var i=m5[r];if(i!==void 0){for(var s="",o=0;o<n;o++){var a=t.getUint8(e+o);a<=127?s+=String.fromCharCode(a):s+=i[a&127]}return s}};var uy=typeof WeakMap=="function"&&new WeakMap,cy,_Y=function(t){if(!cy){cy={};for(var e in m5)cy[e]=new String(e)}var n=cy[t];if(n!==void 0){if(uy){var r=uy.get(n);if(r!==void 0)return r}var i=m5[t];if(i!==void 0){for(var s={},o=0;o<i.length;o++)s[i.charCodeAt(o)]=o+128;return uy&&uy.set(n,s),s}}};Xt.MACSTRING=function(t,e){var n=_Y(e);if(n!==void 0){for(var r=[],i=0;i<t.length;i++){var s=t.charCodeAt(i);if(s>=128&&(s=n[s],s===void 0))return;r[i]=s}return r}};Pn.MACSTRING=function(t,e){var n=Xt.MACSTRING(t,e);return n!==void 0?n.length:0};function g5(t){return t>=-128&&t<=127}function bY(t,e,n){for(var r=0,i=t.length;e<i&&r<64&&t[e]===0;)++e,++r;return n.push(128|r-1),e}function MY(t,e,n){for(var r=0,i=t.length,s=e;s<i&&r<64;){var o=t[s];if(!g5(o)||o===0&&s+1<i&&t[s+1]===0)break;++s,++r}n.push(r-1);for(var a=e;a<s;++a)n.push(t[a]+256&255);return s}function EY(t,e,n){for(var r=0,i=t.length,s=e;s<i&&r<64;){var o=t[s];if(o===0||g5(o)&&s+1<i&&g5(t[s+1]))break;++s,++r}n.push(64|r-1);for(var a=e;a<s;++a){var l=t[a];n.push(l+65536>>8&255,l+256&255)}return s}Xt.VARDELTAS=function(t){for(var e=0,n=[];e<t.length;){var r=t[e];r===0?e=bY(t,e,n):r>=-128&&r<=127?e=MY(t,e,n):e=EY(t,e,n)}return n};Xt.INDEX=function(t){for(var e=1,n=[e],r=[],i=0;i<t.length;i+=1){var s=Xt.OBJECT(t[i]);Array.prototype.push.apply(r,s),e+=s.length,n.push(e)}if(r.length===0)return[0,0];for(var o=[],a=1+Math.floor(Math.log(e)/Math.log(2))/8|0,l=[void 0,Xt.BYTE,Xt.USHORT,Xt.UINT24,Xt.ULONG][a],u=0;u<n.length;u+=1){var c=l(n[u]);Array.prototype.push.apply(o,c)}return Array.prototype.concat(Xt.Card16(t.length),Xt.OffSize(a),o,r)};Pn.INDEX=function(t){return Xt.INDEX(t).length};Xt.DICT=function(t){for(var e=[],n=Object.keys(t),r=n.length,i=0;i<r;i+=1){var s=parseInt(n[i],0),o=t[s];e=e.concat(Xt.OPERAND(o.value,o.type)),e=e.concat(Xt.OPERATOR(s))}return e};Pn.DICT=function(t){return Xt.DICT(t).length};Xt.OPERATOR=function(t){return t<1200?[t]:[12,t-1200]};Xt.OPERAND=function(t,e){var n=[];if(Array.isArray(e))for(var r=0;r<e.length;r+=1)On.argument(t.length===e.length,"Not enough arguments given for type"+e),n=n.concat(Xt.OPERAND(t[r],e[r]));else if(e==="SID")n=n.concat(Xt.NUMBER(t));else if(e==="offset")n=n.concat(Xt.NUMBER32(t));else if(e==="number")n=n.concat(Xt.NUMBER(t));else if(e==="real")n=n.concat(Xt.REAL(t));else throw new Error("Unknown operand type "+e);return n};Xt.OP=Xt.BYTE;Pn.OP=Pn.BYTE;var hy=typeof WeakMap=="function"&&new WeakMap;Xt.CHARSTRING=function(t){if(hy){var e=hy.get(t);if(e!==void 0)return e}for(var n=[],r=t.length,i=0;i<r;i+=1){var s=t[i];n=n.concat(Xt[s.type](s.value))}return hy&&hy.set(t,n),n};Pn.CHARSTRING=function(t){return Xt.CHARSTRING(t).length};Xt.OBJECT=function(t){var e=Xt[t.type];return On.argument(e!==void 0,"No encoding function for type "+t.type),e(t.value)};Pn.OBJECT=function(t){var e=Pn[t.type];return On.argument(e!==void 0,"No sizeOf function for type "+t.type),e(t.value)};Xt.TABLE=function(t){for(var e=[],n=t.fields.length,r=[],i=[],s=0;s<n;s+=1){var o=t.fields[s],a=Xt[o.type];On.argument(a!==void 0,"No encoding function for field type "+o.type+" ("+o.name+")");var l=t[o.name];l===void 0&&(l=o.value);var u=a(l);o.type==="TABLE"?(i.push(e.length),e=e.concat([0,0]),r.push(u)):e=e.concat(u)}for(var c=0;c<r.length;c+=1){var h=i[c],f=e.length;On.argument(f<65536,"Table "+t.tableName+" too big."),e[h]=f>>8,e[h+1]=f&255,e=e.concat(r[c])}return e};Pn.TABLE=function(t){for(var e=0,n=t.fields.length,r=0;r<n;r+=1){var i=t.fields[r],s=Pn[i.type];On.argument(s!==void 0,"No sizeOf function for field type "+i.type+" ("+i.name+")");var o=t[i.name];o===void 0&&(o=i.value),e+=s(o),i.type==="TABLE"&&(e+=2)}return e};Xt.RECORD=Xt.TABLE;Pn.RECORD=Pn.TABLE;Xt.LITERAL=function(t){return t};Pn.LITERAL=function(t){return t.length};function bs(t,e,n){if(e.length&&(e[0].name!=="coverageFormat"||e[0].value===1))for(var r=0;r<e.length;r+=1){var i=e[r];this[i.name]=i.value}if(this.tableName=t,this.fields=e,n)for(var s=Object.keys(n),o=0;o<s.length;o+=1){var a=s[o],l=n[a];this[a]!==void 0&&(this[a]=l)}}bs.prototype.encode=function(){return Xt.TABLE(this)};bs.prototype.sizeOf=function(){return Pn.TABLE(this)};function q0(t,e,n){n===void 0&&(n=e.length);var r=new Array(e.length+1);r[0]={name:t+"Count",type:"USHORT",value:n};for(var i=0;i<e.length;i++)r[i+1]={name:t+i,type:"USHORT",value:e[i]};return r}function v5(t,e,n){var r=e.length,i=new Array(r+1);i[0]={name:t+"Count",type:"USHORT",value:r};for(var s=0;s<r;s++)i[s+1]={name:t+s,type:"TABLE",value:n(e[s],s)};return i}function Y0(t,e,n){var r=e.length,i=[];i[0]={name:t+"Count",type:"USHORT",value:r};for(var s=0;s<r;s++)i=i.concat(n(e[s],s));return i}function R2(t){t.format===1?bs.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:1}].concat(q0("glyph",t.glyphs))):t.format===2?bs.call(this,"coverageTable",[{name:"coverageFormat",type:"USHORT",value:2}].concat(Y0("rangeRecord",t.ranges,function(e){return[{name:"startGlyphID",type:"USHORT",value:e.start},{name:"endGlyphID",type:"USHORT",value:e.end},{name:"startCoverageIndex",type:"USHORT",value:e.index}]}))):On.assert(!1,"Coverage format must be 1 or 2.")}R2.prototype=Object.create(bs.prototype);R2.prototype.constructor=R2;function k2(t){bs.call(this,"scriptListTable",Y0("scriptRecord",t,function(e,n){var r=e.script,i=r.defaultLangSys;return On.assert(!!i,"Unable to write GSUB: script "+e.tag+" has no default language system."),[{name:"scriptTag"+n,type:"TAG",value:e.tag},{name:"script"+n,type:"TABLE",value:new bs("scriptTable",[{name:"defaultLangSys",type:"TABLE",value:new bs("defaultLangSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:i.reqFeatureIndex}].concat(q0("featureIndex",i.featureIndexes)))}].concat(Y0("langSys",r.langSysRecords,function(s,o){var a=s.langSys;return[{name:"langSysTag"+o,type:"TAG",value:s.tag},{name:"langSys"+o,type:"TABLE",value:new bs("langSys",[{name:"lookupOrder",type:"USHORT",value:0},{name:"reqFeatureIndex",type:"USHORT",value:a.reqFeatureIndex}].concat(q0("featureIndex",a.featureIndexes)))}]})))}]}))}k2.prototype=Object.create(bs.prototype);k2.prototype.constructor=k2;function I2(t){bs.call(this,"featureListTable",Y0("featureRecord",t,function(e,n){var r=e.feature;return[{name:"featureTag"+n,type:"TAG",value:e.tag},{name:"feature"+n,type:"TABLE",value:new bs("featureTable",[{name:"featureParams",type:"USHORT",value:r.featureParams}].concat(q0("lookupListIndex",r.lookupListIndexes)))}]}))}I2.prototype=Object.create(bs.prototype);I2.prototype.constructor=I2;function N2(t,e){bs.call(this,"lookupListTable",v5("lookup",t,function(n){var r=e[n.lookupType];return On.assert(!!r,"Unable to write GSUB lookup type "+n.lookupType+" tables."),new bs("lookupTable",[{name:"lookupType",type:"USHORT",value:n.lookupType},{name:"lookupFlag",type:"USHORT",value:n.lookupFlag}].concat(v5("subtable",n.subtables,r)))}))}N2.prototype=Object.create(bs.prototype);N2.prototype.constructor=N2;var rn={Table:bs,Record:bs,Coverage:R2,ScriptList:k2,FeatureList:I2,LookupList:N2,ushortList:q0,tableList:v5,recordList:Y0};function XC(t,e){return t.getUint8(e)}function F2(t,e){return t.getUint16(e,!1)}function AY(t,e){return t.getInt16(e,!1)}function k3(t,e){return t.getUint32(e,!1)}function KN(t,e){var n=t.getInt16(e,!1),r=t.getUint16(e+2,!1);return n+r/65535}function TY(t,e){for(var n="",r=e;r<e+4;r+=1)n+=String.fromCharCode(t.getInt8(r));return n}function CY(t,e,n){for(var r=0,i=0;i<n;i+=1)r<<=8,r+=t.getUint8(e+i);return r}function LY(t,e,n){for(var r=[],i=e;i<n;i+=1)r.push(t.getUint8(i));return r}function PY(t){for(var e="",n=0;n<t.length;n+=1)e+=String.fromCharCode(t[n]);return e}var RY={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};function ht(t,e){this.data=t,this.offset=e,this.relativeOffset=0}ht.prototype.parseByte=function(){var t=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t};ht.prototype.parseChar=function(){var t=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,t};ht.prototype.parseCard8=ht.prototype.parseByte;ht.prototype.parseUShort=function(){var t=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t};ht.prototype.parseCard16=ht.prototype.parseUShort;ht.prototype.parseSID=ht.prototype.parseUShort;ht.prototype.parseOffset16=ht.prototype.parseUShort;ht.prototype.parseShort=function(){var t=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,t};ht.prototype.parseF2Dot14=function(){var t=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,t};ht.prototype.parseULong=function(){var t=k3(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t};ht.prototype.parseOffset32=ht.prototype.parseULong;ht.prototype.parseFixed=function(){var t=KN(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,t};ht.prototype.parseString=function(t){var e=this.data,n=this.offset+this.relativeOffset,r="";this.relativeOffset+=t;for(var i=0;i<t;i++)r+=String.fromCharCode(e.getUint8(n+i));return r};ht.prototype.parseTag=function(){return this.parseString(4)};ht.prototype.parseLongDateTime=function(){var t=k3(this.data,this.offset+this.relativeOffset+4);return t-=2082844800,this.relativeOffset+=8,t};ht.prototype.parseVersion=function(t){var e=F2(this.data,this.offset+this.relativeOffset),n=F2(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,t===void 0&&(t=4096),e+n/t/10};ht.prototype.skip=function(t,e){e===void 0&&(e=1),this.relativeOffset+=RY[t]*e};ht.prototype.parseULongList=function(t){t===void 0&&(t=this.parseULong());for(var e=new Array(t),n=this.data,r=this.offset+this.relativeOffset,i=0;i<t;i++)e[i]=n.getUint32(r),r+=4;return this.relativeOffset+=t*4,e};ht.prototype.parseOffset16List=ht.prototype.parseUShortList=function(t){t===void 0&&(t=this.parseUShort());for(var e=new Array(t),n=this.data,r=this.offset+this.relativeOffset,i=0;i<t;i++)e[i]=n.getUint16(r),r+=2;return this.relativeOffset+=t*2,e};ht.prototype.parseShortList=function(t){for(var e=new Array(t),n=this.data,r=this.offset+this.relativeOffset,i=0;i<t;i++)e[i]=n.getInt16(r),r+=2;return this.relativeOffset+=t*2,e};ht.prototype.parseByteList=function(t){for(var e=new Array(t),n=this.data,r=this.offset+this.relativeOffset,i=0;i<t;i++)e[i]=n.getUint8(r++);return this.relativeOffset+=t,e};ht.prototype.parseList=function(t,e){e||(e=t,t=this.parseUShort());for(var n=new Array(t),r=0;r<t;r++)n[r]=e.call(this);return n};ht.prototype.parseList32=function(t,e){e||(e=t,t=this.parseULong());for(var n=new Array(t),r=0;r<t;r++)n[r]=e.call(this);return n};ht.prototype.parseRecordList=function(t,e){e||(e=t,t=this.parseUShort());for(var n=new Array(t),r=Object.keys(e),i=0;i<t;i++){for(var s={},o=0;o<r.length;o++){var a=r[o],l=e[a];s[a]=l.call(this)}n[i]=s}return n};ht.prototype.parseRecordList32=function(t,e){e||(e=t,t=this.parseULong());for(var n=new Array(t),r=Object.keys(e),i=0;i<t;i++){for(var s={},o=0;o<r.length;o++){var a=r[o],l=e[a];s[a]=l.call(this)}n[i]=s}return n};ht.prototype.parseStruct=function(t){if(typeof t=="function")return t.call(this);for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var i=e[r],s=t[i];n[i]=s.call(this)}return n};ht.prototype.parseValueRecord=function(t){if(t===void 0&&(t=this.parseUShort()),t!==0){var e={};return t&1&&(e.xPlacement=this.parseShort()),t&2&&(e.yPlacement=this.parseShort()),t&4&&(e.xAdvance=this.parseShort()),t&8&&(e.yAdvance=this.parseShort()),t&16&&(e.xPlaDevice=void 0,this.parseShort()),t&32&&(e.yPlaDevice=void 0,this.parseShort()),t&64&&(e.xAdvDevice=void 0,this.parseShort()),t&128&&(e.yAdvDevice=void 0,this.parseShort()),e}};ht.prototype.parseValueRecordList=function(){for(var t=this.parseUShort(),e=this.parseUShort(),n=new Array(e),r=0;r<e;r++)n[r]=this.parseValueRecord(t);return n};ht.prototype.parsePointer=function(t){var e=this.parseOffset16();if(e>0)return new ht(this.data,this.offset+e).parseStruct(t)};ht.prototype.parsePointer32=function(t){var e=this.parseOffset32();if(e>0)return new ht(this.data,this.offset+e).parseStruct(t)};ht.prototype.parseListOfLists=function(t){for(var e=this.parseOffset16List(),n=e.length,r=this.relativeOffset,i=new Array(n),s=0;s<n;s++){var o=e[s];if(o===0){i[s]=void 0;continue}if(this.relativeOffset=o,t){for(var a=this.parseOffset16List(),l=new Array(a.length),u=0;u<a.length;u++)this.relativeOffset=o+a[u],l[u]=t.call(this);i[s]=l}else i[s]=this.parseUShortList()}return this.relativeOffset=r,i};ht.prototype.parseCoverage=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort(),n=this.parseUShort();if(e===1)return{format:1,glyphs:this.parseUShortList(n)};if(e===2){for(var r=new Array(n),i=0;i<n;i++)r[i]={start:this.parseUShort(),end:this.parseUShort(),index:this.parseUShort()};return{format:2,ranges:r}}throw new Error("0x"+t.toString(16)+": Coverage format must be 1 or 2.")};ht.prototype.parseClassDef=function(){var t=this.offset+this.relativeOffset,e=this.parseUShort();if(e===1)return{format:1,startGlyph:this.parseUShort(),classes:this.parseUShortList()};if(e===2)return{format:2,ranges:this.parseRecordList({start:ht.uShort,end:ht.uShort,classId:ht.uShort})};throw new Error("0x"+t.toString(16)+": ClassDef format must be 1 or 2.")};ht.list=function(t,e){return function(){return this.parseList(t,e)}};ht.list32=function(t,e){return function(){return this.parseList32(t,e)}};ht.recordList=function(t,e){return function(){return this.parseRecordList(t,e)}};ht.recordList32=function(t,e){return function(){return this.parseRecordList32(t,e)}};ht.pointer=function(t){return function(){return this.parsePointer(t)}};ht.pointer32=function(t){return function(){return this.parsePointer32(t)}};ht.tag=ht.prototype.parseTag;ht.byte=ht.prototype.parseByte;ht.uShort=ht.offset16=ht.prototype.parseUShort;ht.uShortList=ht.prototype.parseUShortList;ht.uLong=ht.offset32=ht.prototype.parseULong;ht.uLongList=ht.prototype.parseULongList;ht.struct=ht.prototype.parseStruct;ht.coverage=ht.prototype.parseCoverage;ht.classDef=ht.prototype.parseClassDef;var qC={reserved:ht.uShort,reqFeatureIndex:ht.uShort,featureIndexes:ht.uShortList};ht.prototype.parseScriptList=function(){return this.parsePointer(ht.recordList({tag:ht.tag,script:ht.pointer({defaultLangSys:ht.pointer(qC),langSysRecords:ht.recordList({tag:ht.tag,langSys:ht.pointer(qC)})})}))||[]};ht.prototype.parseFeatureList=function(){return this.parsePointer(ht.recordList({tag:ht.tag,feature:ht.pointer({featureParams:ht.offset16,lookupListIndexes:ht.uShortList})}))||[]};ht.prototype.parseLookupList=function(t){return this.parsePointer(ht.list(ht.pointer(function(){var e=this.parseUShort();On.argument(1<=e&&e<=9,"GPOS/GSUB lookup type "+e+" unknown.");var n=this.parseUShort(),r=n&16;return{lookupType:e,lookupFlag:n,subtables:this.parseList(ht.pointer(t[e])),markFilteringSet:r?this.parseUShort():void 0}})))||[]};ht.prototype.parseFeatureVariationsList=function(){return this.parsePointer32(function(){var t=this.parseUShort(),e=this.parseUShort();On.argument(t===1&&e<1,"GPOS/GSUB feature variations table unknown.");var n=this.parseRecordList32({conditionSetOffset:ht.offset32,featureTableSubstitutionOffset:ht.offset32});return n})||[]};var Vn={getByte:XC,getCard8:XC,getUShort:F2,getCard16:F2,getShort:AY,getULong:k3,getFixed:KN,getTag:TY,getOffset:CY,getBytes:LY,bytesToString:PY,Parser:ht};function kY(t,e){e.parseUShort(),t.length=e.parseULong(),t.language=e.parseULong();var n;t.groupCount=n=e.parseULong(),t.glyphIndexMap={};for(var r=0;r<n;r+=1)for(var i=e.parseULong(),s=e.parseULong(),o=e.parseULong(),a=i;a<=s;a+=1)t.glyphIndexMap[a]=o,o++}function IY(t,e,n,r,i){t.length=e.parseUShort(),t.language=e.parseUShort();var s;t.segCount=s=e.parseUShort()>>1,e.skip("uShort",3),t.glyphIndexMap={};for(var o=new Vn.Parser(n,r+i+14),a=new Vn.Parser(n,r+i+16+s*2),l=new Vn.Parser(n,r+i+16+s*4),u=new Vn.Parser(n,r+i+16+s*6),c=r+i+16+s*8,h=0;h<s-1;h+=1)for(var f=void 0,d=o.parseUShort(),v=a.parseUShort(),x=l.parseShort(),w=u.parseUShort(),g=v;g<=d;g+=1)w!==0?(c=u.offset+u.relativeOffset-2,c+=w,c+=(g-v)*2,f=Vn.getUShort(n,c),f!==0&&(f=f+x&65535)):f=g+x&65535,t.glyphIndexMap[g]=f}function NY(t,e){var n={};n.version=Vn.getUShort(t,e),On.argument(n.version===0,"cmap table version should be 0."),n.numTables=Vn.getUShort(t,e+2);for(var r=-1,i=n.numTables-1;i>=0;i-=1){var s=Vn.getUShort(t,e+4+i*8),o=Vn.getUShort(t,e+4+i*8+2);if(s===3&&(o===0||o===1||o===10)||s===0&&(o===0||o===1||o===2||o===3||o===4)){r=Vn.getULong(t,e+4+i*8+4);break}}if(r===-1)throw new Error("No valid cmap sub-tables found.");var a=new Vn.Parser(t,e+r);if(n.format=a.parseUShort(),n.format===12)kY(n,a);else if(n.format===4)IY(n,a,t,e,r);else throw new Error("Only format 4 and 12 cmap tables are supported (found format "+n.format+").");return n}function FY(t,e,n){t.segments.push({end:e,start:e,delta:-(e-n),offset:0,glyphIndex:n})}function DY(t){t.segments.push({end:65535,start:65535,delta:1,offset:0})}function OY(t){var e=!0,n;for(n=t.length-1;n>0;n-=1){var r=t.get(n);if(r.unicode>65535){console.log("Adding CMAP format 12 (needed!)"),e=!1;break}}var i=[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:e?1:2},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:e?12:12+8}];e||(i=i.concat([{name:"cmap12PlatformID",type:"USHORT",value:3},{name:"cmap12EncodingID",type:"USHORT",value:10},{name:"cmap12Offset",type:"ULONG",value:0}])),i=i.concat([{name:"format",type:"USHORT",value:4},{name:"cmap4Length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);var s=new rn.Table("cmap",i);for(s.segments=[],n=0;n<t.length;n+=1){for(var o=t.get(n),a=0;a<o.unicodes.length;a+=1)FY(s,o.unicodes[a],n);s.segments=s.segments.sort(function(S,_){return S.start-_.start})}DY(s);var l=s.segments.length,u=0,c=[],h=[],f=[],d=[],v=[],x=[];for(n=0;n<l;n+=1){var w=s.segments[n];w.end<=65535&&w.start<=65535?(c=c.concat({name:"end_"+n,type:"USHORT",value:w.end}),h=h.concat({name:"start_"+n,type:"USHORT",value:w.start}),f=f.concat({name:"idDelta_"+n,type:"SHORT",value:w.delta}),d=d.concat({name:"idRangeOffset_"+n,type:"USHORT",value:w.offset}),w.glyphId!==void 0&&(v=v.concat({name:"glyph_"+n,type:"USHORT",value:w.glyphId}))):u+=1,!e&&w.glyphIndex!==void 0&&(x=x.concat({name:"cmap12Start_"+n,type:"ULONG",value:w.start}),x=x.concat({name:"cmap12End_"+n,type:"ULONG",value:w.end}),x=x.concat({name:"cmap12Glyph_"+n,type:"ULONG",value:w.glyphIndex}))}if(s.segCountX2=(l-u)*2,s.searchRange=Math.pow(2,Math.floor(Math.log(l-u)/Math.log(2)))*2,s.entrySelector=Math.log(s.searchRange/2)/Math.log(2),s.rangeShift=s.segCountX2-s.searchRange,s.fields=s.fields.concat(c),s.fields.push({name:"reservedPad",type:"USHORT",value:0}),s.fields=s.fields.concat(h),s.fields=s.fields.concat(f),s.fields=s.fields.concat(d),s.fields=s.fields.concat(v),s.cmap4Length=14+c.length*2+2+h.length*2+f.length*2+d.length*2+v.length*2,!e){var g=16+x.length*4;s.cmap12Offset=12+2*2+4+s.cmap4Length,s.fields=s.fields.concat([{name:"cmap12Format",type:"USHORT",value:12},{name:"cmap12Reserved",type:"USHORT",value:0},{name:"cmap12Length",type:"ULONG",value:g},{name:"cmap12Language",type:"ULONG",value:0},{name:"cmap12nGroups",type:"ULONG",value:x.length/3}]),s.fields=s.fields.concat(x)}return s}var UY={parse:NY,make:OY},Wy=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"],BY=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"],zY=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"],YC=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];function JN(t){this.font=t}JN.prototype.charToGlyphIndex=function(t){var e=t.codePointAt(0),n=this.font.glyphs;if(n){for(var r=0;r<n.length;r+=1)for(var i=n.get(r),s=0;s<i.unicodes.length;s+=1)if(i.unicodes[s]===e)return r}return null};function D2(t,e){this.encoding=t,this.charset=e}D2.prototype.charToGlyphIndex=function(t){var e=t.codePointAt(0),n=this.encoding[e];return this.charset.indexOf(n)};function HY(t,e,n,r,i){t.beginPath(),t.moveTo(e,n),t.lineTo(r,i),t.stroke()}var Sf={line:HY};function GY(t,e){var n=e||new as;return{configurable:!0,get:function(){return typeof n=="function"&&(n=n()),n},set:function(r){n=r}}}function Ya(t){this.bindConstructorValues(t)}Ya.prototype.bindConstructorValues=function(t){this.index=t.index||0,this.name=t.name||null,this.unicode=t.unicode||void 0,this.unicodes=t.unicodes||t.unicode!==void 0?[t.unicode]:[],"xMin"in t&&(this.xMin=t.xMin),"yMin"in t&&(this.yMin=t.yMin),"xMax"in t&&(this.xMax=t.xMax),"yMax"in t&&(this.yMax=t.yMax),"advanceWidth"in t&&(this.advanceWidth=t.advanceWidth),Object.defineProperty(this,"path",GY(this,t.path))};Ya.prototype.addUnicode=function(t){this.unicodes.length===0&&(this.unicode=t),this.unicodes.push(t)};Ya.prototype.getBoundingBox=function(){return this.path.getBoundingBox()};Ya.prototype.getPath=function(t,e,n,r,i){t=t!==void 0?t:0,e=e!==void 0?e:0,n=n!==void 0?n:72;var s,o;r||(r={});var a=r.xScale,l=r.yScale;if(r.hinting&&i&&i.hinting&&(o=this.path&&i.hinting.exec(this,n)),o)s=i.hinting.getCommands(o),t=Math.round(t),e=Math.round(e),a=l=1;else{s=this.path.commands;var u=1/(this.path.unitsPerEm||1e3)*n;a===void 0&&(a=u),l===void 0&&(l=u)}for(var c=new as,h=0;h<s.length;h+=1){var f=s[h];f.type==="M"?c.moveTo(t+f.x*a,e+-f.y*l):f.type==="L"?c.lineTo(t+f.x*a,e+-f.y*l):f.type==="Q"?c.quadraticCurveTo(t+f.x1*a,e+-f.y1*l,t+f.x*a,e+-f.y*l):f.type==="C"?c.curveTo(t+f.x1*a,e+-f.y1*l,t+f.x2*a,e+-f.y2*l,t+f.x*a,e+-f.y*l):f.type==="Z"&&c.closePath()}return c};Ya.prototype.getContours=function(){if(this.points===void 0)return[];for(var t=[],e=[],n=0;n<this.points.length;n+=1){var r=this.points[n];e.push(r),r.lastPointOfContour&&(t.push(e),e=[])}return On.argument(e.length===0,"There are still points left in the current contour."),t};Ya.prototype.getMetrics=function(){for(var t=this.path.commands,e=[],n=[],r=0;r<t.length;r+=1){var i=t[r];i.type!=="Z"&&(e.push(i.x),n.push(i.y)),(i.type==="Q"||i.type==="C")&&(e.push(i.x1),n.push(i.y1)),i.type==="C"&&(e.push(i.x2),n.push(i.y2))}var s={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,e),yMax:Math.max.apply(null,n),leftSideBearing:this.leftSideBearing};return isFinite(s.xMin)||(s.xMin=0),isFinite(s.xMax)||(s.xMax=this.advanceWidth),isFinite(s.yMin)||(s.yMin=0),isFinite(s.yMax)||(s.yMax=0),s.rightSideBearing=this.advanceWidth-s.leftSideBearing-(s.xMax-s.xMin),s};Ya.prototype.draw=function(t,e,n,r,i){this.getPath(e,n,r,i).draw(t)};Ya.prototype.drawPoints=function(t,e,n,r){function i(h,f,d,v){t.beginPath();for(var x=0;x<h.length;x+=1)t.moveTo(f+h[x].x*v,d+h[x].y*v),t.arc(f+h[x].x*v,d+h[x].y*v,2,0,Math.PI*2,!1);t.closePath(),t.fill()}e=e!==void 0?e:0,n=n!==void 0?n:0,r=r!==void 0?r:24;for(var s=1/this.path.unitsPerEm*r,o=[],a=[],l=this.path,u=0;u<l.commands.length;u+=1){var c=l.commands[u];c.x!==void 0&&o.push({x:c.x,y:-c.y}),c.x1!==void 0&&a.push({x:c.x1,y:-c.y1}),c.x2!==void 0&&a.push({x:c.x2,y:-c.y2})}t.fillStyle="blue",i(o,e,n,s),t.fillStyle="red",i(a,e,n,s)};Ya.prototype.drawMetrics=function(t,e,n,r){var i;e=e!==void 0?e:0,n=n!==void 0?n:0,r=r!==void 0?r:24,i=1/this.path.unitsPerEm*r,t.lineWidth=1,t.strokeStyle="black",Sf.line(t,e,-1e4,e,1e4),Sf.line(t,-1e4,n,1e4,n);var s=this.xMin||0,o=this.yMin||0,a=this.xMax||0,l=this.yMax||0,u=this.advanceWidth||0;t.strokeStyle="blue",Sf.line(t,e+s*i,-1e4,e+s*i,1e4),Sf.line(t,e+a*i,-1e4,e+a*i,1e4),Sf.line(t,-1e4,n+-o*i,1e4,n+-o*i),Sf.line(t,-1e4,n+-l*i,1e4,n+-l*i),t.strokeStyle="green",Sf.line(t,e+u*i,-1e4,e+u*i,1e4)};function fy(t,e,n){Object.defineProperty(t,e,{get:function(){return t.path,t[n]},set:function(r){t[n]=r},enumerable:!0,configurable:!0})}function I3(t,e){if(this.font=t,this.glyphs={},Array.isArray(e))for(var n=0;n<e.length;n++){var r=e[n];r.path.unitsPerEm=t.unitsPerEm,this.glyphs[n]=r}this.length=e&&e.length||0}I3.prototype.get=function(t){if(this.glyphs[t]===void 0){this.font._push(t),typeof this.glyphs[t]=="function"&&(this.glyphs[t]=this.glyphs[t]());var e=this.glyphs[t],n=this.font._IndexToUnicodeMap[t];if(n)for(var r=0;r<n.unicodes.length;r++)e.addUnicode(n.unicodes[r]);this.font.cffEncoding?this.font.isCIDFont?e.name="gid"+t:e.name=this.font.cffEncoding.charset[t]:this.font.glyphNames.names&&(e.name=this.font.glyphNames.glyphIndexToName(t)),this.glyphs[t].advanceWidth=this.font._hmtxTableData[t].advanceWidth,this.glyphs[t].leftSideBearing=this.font._hmtxTableData[t].leftSideBearing}else typeof this.glyphs[t]=="function"&&(this.glyphs[t]=this.glyphs[t]());return this.glyphs[t]};I3.prototype.push=function(t,e){this.glyphs[t]=e,this.length++};function VY(t,e){return new Ya({index:e,font:t})}function WY(t,e,n,r,i,s){return function(){var o=new Ya({index:e,font:t});return o.path=function(){n(o,r,i);var a=s(t.glyphs,o);return a.unitsPerEm=t.unitsPerEm,a},fy(o,"xMin","_xMin"),fy(o,"xMax","_xMax"),fy(o,"yMin","_yMin"),fy(o,"yMax","_yMax"),o}}function jY(t,e,n,r){return function(){var i=new Ya({index:e,font:t});return i.path=function(){var s=n(t,i,r);return s.unitsPerEm=t.unitsPerEm,s},i}}var uu={GlyphSet:I3,glyphLoader:VY,ttfGlyphLoader:WY,cffGlyphLoader:jY};function QN(t,e){if(t===e)return!0;if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n+=1)if(!QN(t[n],e[n]))return!1;return!0}else return!1}function y5(t){var e;return t.length<1240?e=107:t.length<33900?e=1131:e=32768,e}function eh(t,e,n){var r=[],i=[],s=Vn.getCard16(t,e),o,a;if(s!==0){var l=Vn.getByte(t,e+2);o=e+(s+1)*l+2;for(var u=e+3,c=0;c<s+1;c+=1)r.push(Vn.getOffset(t,u,l)),u+=l;a=o+r[s]}else a=e+2;for(var h=0;h<r.length-1;h+=1){var f=Vn.getBytes(t,o+r[h],o+r[h+1]);n&&(f=n(f)),i.push(f)}return{objects:i,startOffset:e,endOffset:a}}function XY(t,e){var n=[],r=Vn.getCard16(t,e),i,s;if(r!==0){var o=Vn.getByte(t,e+2);i=e+(r+1)*o+2;for(var a=e+3,l=0;l<r+1;l+=1)n.push(Vn.getOffset(t,a,o)),a+=o;s=i+n[r]}else s=e+2;return{offsets:n,startOffset:e,endOffset:s}}function qY(t,e,n,r,i){var s=Vn.getCard16(n,r),o=0;if(s!==0){var a=Vn.getByte(n,r+2);o=r+(s+1)*a+2}var l=Vn.getBytes(n,o+e[t],o+e[t+1]);return i&&(l=i(l)),l}function YY(t){for(var e="",n=15,r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var i=t.parseByte(),s=i>>4,o=i&15;if(s===n||(e+=r[s],o===n))break;e+=r[o]}return parseFloat(e)}function ZY(t,e){var n,r,i,s;if(e===28)return n=t.parseByte(),r=t.parseByte(),n<<8|r;if(e===29)return n=t.parseByte(),r=t.parseByte(),i=t.parseByte(),s=t.parseByte(),n<<24|r<<16|i<<8|s;if(e===30)return YY(t);if(e>=32&&e<=246)return e-139;if(e>=247&&e<=250)return n=t.parseByte(),(e-247)*256+n+108;if(e>=251&&e<=254)return n=t.parseByte(),-(e-251)*256-n-108;throw new Error("Invalid b0 "+e)}function $Y(t){for(var e={},n=0;n<t.length;n+=1){var r=t[n][0],i=t[n][1],s=void 0;if(i.length===1?s=i[0]:s=i,e.hasOwnProperty(r)&&!isNaN(e[r]))throw new Error("Object "+e+" already has key "+r);e[r]=s}return e}function eF(t,e,n){e=e!==void 0?e:0;var r=new Vn.Parser(t,e),i=[],s=[];for(n=n!==void 0?n:t.length;r.relativeOffset<n;){var o=r.parseByte();o<=21?(o===12&&(o=1200+r.parseByte()),i.push([o,s]),s=[]):s.push(ZY(r,o))}return $Y(i)}function i0(t,e){return e<=390?e=Wy[e]:e=t[e-391],e}function tF(t,e,n){for(var r={},i,s=0;s<e.length;s+=1){var o=e[s];if(Array.isArray(o.type)){var a=[];a.length=o.type.length;for(var l=0;l<o.type.length;l++)i=t[o.op]!==void 0?t[o.op][l]:void 0,i===void 0&&(i=o.value!==void 0&&o.value[l]!==void 0?o.value[l]:null),o.type[l]==="SID"&&(i=i0(n,i)),a[l]=i;r[o.name]=a}else i=t[o.op],i===void 0&&(i=o.value!==void 0?o.value:null),o.type==="SID"&&(i=i0(n,i)),r[o.name]=i}return r}function KY(t,e){var n={};return n.formatMajor=Vn.getCard8(t,e),n.formatMinor=Vn.getCard8(t,e+1),n.size=Vn.getCard8(t,e+2),n.offsetSize=Vn.getCard8(t,e+3),n.startOffset=e,n.endOffset=e+4,n}var nF=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]},{name:"ros",op:1230,type:["SID","SID","number"]},{name:"cidFontVersion",op:1231,type:"number",value:0},{name:"cidFontRevision",op:1232,type:"number",value:0},{name:"cidFontType",op:1233,type:"number",value:0},{name:"cidCount",op:1234,type:"number",value:8720},{name:"uidBase",op:1235,type:"number"},{name:"fdArray",op:1236,type:"offset"},{name:"fdSelect",op:1237,type:"offset"},{name:"fontName",op:1238,type:"SID"}],rF=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];function JY(t,e){var n=eF(t,0,t.byteLength);return tF(n,nF,e)}function iF(t,e,n,r){var i=eF(t,e,n);return tF(i,rF,r)}function ZC(t,e,n,r){for(var i=[],s=0;s<n.length;s+=1){var o=new DataView(new Uint8Array(n[s]).buffer),a=JY(o,r);a._subrs=[],a._subrsBias=0,a._defaultWidthX=0,a._nominalWidthX=0;var l=a.private[0],u=a.private[1];if(l!==0&&u!==0){var c=iF(t,u+e,l,r);if(a._defaultWidthX=c.defaultWidthX,a._nominalWidthX=c.nominalWidthX,c.subrs!==0){var h=u+c.subrs,f=eh(t,h+e);a._subrs=f.objects,a._subrsBias=y5(a._subrs)}a._privateDict=c}i.push(a)}return i}function QY(t,e,n,r){var i,s,o=new Vn.Parser(t,e);n-=1;var a=[".notdef"],l=o.parseCard8();if(l===0)for(var u=0;u<n;u+=1)i=o.parseSID(),a.push(i0(r,i));else if(l===1)for(;a.length<=n;){i=o.parseSID(),s=o.parseCard8();for(var c=0;c<=s;c+=1)a.push(i0(r,i)),i+=1}else if(l===2)for(;a.length<=n;){i=o.parseSID(),s=o.parseCard16();for(var h=0;h<=s;h+=1)a.push(i0(r,i)),i+=1}else throw new Error("Unknown charset format "+l);return a}function eZ(t,e,n){var r,i={},s=new Vn.Parser(t,e),o=s.parseCard8();if(o===0)for(var a=s.parseCard8(),l=0;l<a;l+=1)r=s.parseCard8(),i[r]=l;else if(o===1){var u=s.parseCard8();r=1;for(var c=0;c<u;c+=1)for(var h=s.parseCard8(),f=s.parseCard8(),d=h;d<=h+f;d+=1)i[d]=r,r+=1}else throw new Error("Unknown encoding format "+o);return new D2(i,n)}function $C(t,e,n){var r,i,s,o,a=new as,l=[],u=0,c=!1,h=!1,f=0,d=0,v,x,w,g;if(t.isCIDFont){var S=t.tables.cff.topDict._fdSelect[e.index],_=t.tables.cff.topDict._fdArray[S];v=_._subrs,x=_._subrsBias,w=_._defaultWidthX,g=_._nominalWidthX}else v=t.tables.cff.topDict._subrs,x=t.tables.cff.topDict._subrsBias,w=t.tables.cff.topDict._defaultWidthX,g=t.tables.cff.topDict._nominalWidthX;var T=w;function L(R,P){h&&a.closePath(),a.moveTo(R,P),h=!0}function k(){var R;R=l.length%2!==0,R&&!c&&(T=l.shift()+g),u+=l.length>>1,l.length=0,c=!0}function N(R){for(var P,D,O,B,V,H,ee,se,ce,W,Y,j,re=0;re<R.length;){var I=R[re];switch(re+=1,I){case 1:k();break;case 3:k();break;case 4:l.length>1&&!c&&(T=l.shift()+g,c=!0),d+=l.pop(),L(f,d);break;case 5:for(;l.length>0;)f+=l.shift(),d+=l.shift(),a.lineTo(f,d);break;case 6:for(;l.length>0&&(f+=l.shift(),a.lineTo(f,d),l.length!==0);)d+=l.shift(),a.lineTo(f,d);break;case 7:for(;l.length>0&&(d+=l.shift(),a.lineTo(f,d),l.length!==0);)f+=l.shift(),a.lineTo(f,d);break;case 8:for(;l.length>0;)r=f+l.shift(),i=d+l.shift(),s=r+l.shift(),o=i+l.shift(),f=s+l.shift(),d=o+l.shift(),a.curveTo(r,i,s,o,f,d);break;case 10:V=l.pop()+x,H=v[V],H&&N(H);break;case 11:return;case 12:switch(I=R[re],re+=1,I){case 35:r=f+l.shift(),i=d+l.shift(),s=r+l.shift(),o=i+l.shift(),ee=s+l.shift(),se=o+l.shift(),ce=ee+l.shift(),W=se+l.shift(),Y=ce+l.shift(),j=W+l.shift(),f=Y+l.shift(),d=j+l.shift(),l.shift(),a.curveTo(r,i,s,o,ee,se),a.curveTo(ce,W,Y,j,f,d);break;case 34:r=f+l.shift(),i=d,s=r+l.shift(),o=i+l.shift(),ee=s+l.shift(),se=o,ce=ee+l.shift(),W=o,Y=ce+l.shift(),j=d,f=Y+l.shift(),a.curveTo(r,i,s,o,ee,se),a.curveTo(ce,W,Y,j,f,d);break;case 36:r=f+l.shift(),i=d+l.shift(),s=r+l.shift(),o=i+l.shift(),ee=s+l.shift(),se=o,ce=ee+l.shift(),W=o,Y=ce+l.shift(),j=W+l.shift(),f=Y+l.shift(),a.curveTo(r,i,s,o,ee,se),a.curveTo(ce,W,Y,j,f,d);break;case 37:r=f+l.shift(),i=d+l.shift(),s=r+l.shift(),o=i+l.shift(),ee=s+l.shift(),se=o+l.shift(),ce=ee+l.shift(),W=se+l.shift(),Y=ce+l.shift(),j=W+l.shift(),Math.abs(Y-f)>Math.abs(j-d)?f=Y+l.shift():d=j+l.shift(),a.curveTo(r,i,s,o,ee,se),a.curveTo(ce,W,Y,j,f,d);break;default:console.log("Glyph "+e.index+": unknown operator "+1200+I),l.length=0}break;case 14:l.length>0&&!c&&(T=l.shift()+g,c=!0),h&&(a.closePath(),h=!1);break;case 18:k();break;case 19:case 20:k(),re+=u+7>>3;break;case 21:l.length>2&&!c&&(T=l.shift()+g,c=!0),d+=l.pop(),f+=l.pop(),L(f,d);break;case 22:l.length>1&&!c&&(T=l.shift()+g,c=!0),f+=l.pop(),L(f,d);break;case 23:k();break;case 24:for(;l.length>2;)r=f+l.shift(),i=d+l.shift(),s=r+l.shift(),o=i+l.shift(),f=s+l.shift(),d=o+l.shift(),a.curveTo(r,i,s,o,f,d);f+=l.shift(),d+=l.shift(),a.lineTo(f,d);break;case 25:for(;l.length>6;)f+=l.shift(),d+=l.shift(),a.lineTo(f,d);r=f+l.shift(),i=d+l.shift(),s=r+l.shift(),o=i+l.shift(),f=s+l.shift(),d=o+l.shift(),a.curveTo(r,i,s,o,f,d);break;case 26:for(l.length%2&&(f+=l.shift());l.length>0;)r=f,i=d+l.shift(),s=r+l.shift(),o=i+l.shift(),f=s,d=o+l.shift(),a.curveTo(r,i,s,o,f,d);break;case 27:for(l.length%2&&(d+=l.shift());l.length>0;)r=f+l.shift(),i=d,s=r+l.shift(),o=i+l.shift(),f=s+l.shift(),d=o,a.curveTo(r,i,s,o,f,d);break;case 28:P=R[re],D=R[re+1],l.push((P<<24|D<<16)>>16),re+=2;break;case 29:V=l.pop()+t.gsubrsBias,H=t.gsubrs[V],H&&N(H);break;case 30:for(;l.length>0&&(r=f,i=d+l.shift(),s=r+l.shift(),o=i+l.shift(),f=s+l.shift(),d=o+(l.length===1?l.shift():0),a.curveTo(r,i,s,o,f,d),l.length!==0);)r=f+l.shift(),i=d,s=r+l.shift(),o=i+l.shift(),d=o+l.shift(),f=s+(l.length===1?l.shift():0),a.curveTo(r,i,s,o,f,d);break;case 31:for(;l.length>0&&(r=f+l.shift(),i=d,s=r+l.shift(),o=i+l.shift(),d=o+l.shift(),f=s+(l.length===1?l.shift():0),a.curveTo(r,i,s,o,f,d),l.length!==0);)r=f,i=d+l.shift(),s=r+l.shift(),o=i+l.shift(),f=s+l.shift(),d=o+(l.length===1?l.shift():0),a.curveTo(r,i,s,o,f,d);break;default:I<32?console.log("Glyph "+e.index+": unknown operator "+I):I<247?l.push(I-139):I<251?(P=R[re],re+=1,l.push((I-247)*256+P+108)):I<255?(P=R[re],re+=1,l.push(-(I-251)*256-P-108)):(P=R[re],D=R[re+1],O=R[re+2],B=R[re+3],re+=4,l.push((P<<24|D<<16|O<<8|B)/65536))}}}return N(n),e.advanceWidth=T,a}function tZ(t,e,n,r){var i=[],s,o=new Vn.Parser(t,e),a=o.parseCard8();if(a===0)for(var l=0;l<n;l++){if(s=o.parseCard8(),s>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+r+")");i.push(s)}else if(a===3){var u=o.parseCard16(),c=o.parseCard16();if(c!==0)throw new Error("CFF Table CID Font FDSelect format 3 range has bad initial GID "+c);for(var h,f=0;f<u;f++){if(s=o.parseCard8(),h=o.parseCard16(),s>=r)throw new Error("CFF table CID Font FDSelect has bad FD index value "+s+" (FD count "+r+")");if(h>n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad GID "+h);for(;c<h;c++)i.push(s);c=h}if(h!==n)throw new Error("CFF Table CID Font FDSelect format 3 range has bad final GID "+h)}else throw new Error("CFF Table CID Font FDSelect table has unsupported format "+a);return i}function nZ(t,e,n,r){n.tables.cff={};var i=KY(t,e),s=eh(t,i.endOffset,Vn.bytesToString),o=eh(t,s.endOffset),a=eh(t,o.endOffset,Vn.bytesToString),l=eh(t,a.endOffset);n.gsubrs=l.objects,n.gsubrsBias=y5(n.gsubrs);var u=ZC(t,e,o.objects,a.objects);if(u.length!==1)throw new Error("CFF table has too many fonts in 'FontSet' - count of fonts NameIndex.length = "+u.length);var c=u[0];if(n.tables.cff.topDict=c,c._privateDict&&(n.defaultWidthX=c._privateDict.defaultWidthX,n.nominalWidthX=c._privateDict.nominalWidthX),c.ros[0]!==void 0&&c.ros[1]!==void 0&&(n.isCIDFont=!0),n.isCIDFont){var h=c.fdArray,f=c.fdSelect;if(h===0||f===0)throw new Error("Font is marked as a CID font, but FDArray and/or FDSelect information is missing");h+=e;var d=eh(t,h),v=ZC(t,e,d.objects,a.objects);c._fdArray=v,f+=e,c._fdSelect=tZ(t,f,n.numGlyphs,v.length)}var x=e+c.private[1],w=iF(t,x,c.private[0],a.objects);if(n.defaultWidthX=w.defaultWidthX,n.nominalWidthX=w.nominalWidthX,w.subrs!==0){var g=x+w.subrs,S=eh(t,g);n.subrs=S.objects,n.subrsBias=y5(n.subrs)}else n.subrs=[],n.subrsBias=0;var _;r.lowMemory?(_=XY(t,e+c.charStrings),n.nGlyphs=_.offsets.length):(_=eh(t,e+c.charStrings),n.nGlyphs=_.objects.length);var T=QY(t,e+c.charset,n.nGlyphs,a.objects);if(c.encoding===0?n.cffEncoding=new D2(BY,T):c.encoding===1?n.cffEncoding=new D2(zY,T):n.cffEncoding=eZ(t,e+c.encoding,T),n.encoding=n.encoding||n.cffEncoding,n.glyphs=new uu.GlyphSet(n),r.lowMemory)n._push=function(N){var R=qY(N,_.offsets,t,e+c.charStrings);n.glyphs.push(N,uu.cffGlyphLoader(n,N,$C,R))};else for(var L=0;L<n.nGlyphs;L+=1){var k=_.objects[L];n.glyphs.push(L,uu.cffGlyphLoader(n,L,$C,k))}}function sF(t,e){var n,r=Wy.indexOf(t);return r>=0&&(n=r),r=e.indexOf(t),r>=0?n=r+Wy.length:(n=Wy.length+e.length,e.push(t)),n}function rZ(){return new rn.Record("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function iZ(t){var e=new rn.Record("Name INDEX",[{name:"names",type:"INDEX",value:[]}]);e.names=[];for(var n=0;n<t.length;n+=1)e.names.push({name:"name_"+n,type:"NAME",value:t[n]});return e}function oF(t,e,n){for(var r={},i=0;i<t.length;i+=1){var s=t[i],o=e[s.name];o!==void 0&&!QN(o,s.value)&&(s.type==="SID"&&(o=sF(o,n)),r[s.op]={name:s.name,type:s.type,value:o})}return r}function KC(t,e){var n=new rn.Record("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=oF(nF,t,e),n}function JC(t){var e=new rn.Record("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return e.topDicts=[{name:"topDict_0",type:"TABLE",value:t}],e}function sZ(t){var e=new rn.Record("String INDEX",[{name:"strings",type:"INDEX",value:[]}]);e.strings=[];for(var n=0;n<t.length;n+=1)e.strings.push({name:"string_"+n,type:"STRING",value:t[n]});return e}function oZ(){return new rn.Record("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function aZ(t,e){for(var n=new rn.Record("Charsets",[{name:"format",type:"Card8",value:0}]),r=0;r<t.length;r+=1){var i=t[r],s=sF(i,e);n.fields.push({name:"glyph_"+r,type:"SID",value:s})}return n}function lZ(t){var e=[],n=t.path;e.push({name:"width",type:"NUMBER",value:t.advanceWidth});for(var r=0,i=0,s=0;s<n.commands.length;s+=1){var o=void 0,a=void 0,l=n.commands[s];if(l.type==="Q"){var u=.3333333333333333,c=2/3;l={type:"C",x:l.x,y:l.y,x1:Math.round(u*r+c*l.x1),y1:Math.round(u*i+c*l.y1),x2:Math.round(u*l.x+c*l.x1),y2:Math.round(u*l.y+c*l.y1)}}if(l.type==="M")o=Math.round(l.x-r),a=Math.round(l.y-i),e.push({name:"dx",type:"NUMBER",value:o}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(l.x),i=Math.round(l.y);else if(l.type==="L")o=Math.round(l.x-r),a=Math.round(l.y-i),e.push({name:"dx",type:"NUMBER",value:o}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rlineto",type:"OP",value:5}),r=Math.round(l.x),i=Math.round(l.y);else if(l.type==="C"){var h=Math.round(l.x1-r),f=Math.round(l.y1-i),d=Math.round(l.x2-l.x1),v=Math.round(l.y2-l.y1);o=Math.round(l.x-l.x2),a=Math.round(l.y-l.y2),e.push({name:"dx1",type:"NUMBER",value:h}),e.push({name:"dy1",type:"NUMBER",value:f}),e.push({name:"dx2",type:"NUMBER",value:d}),e.push({name:"dy2",type:"NUMBER",value:v}),e.push({name:"dx",type:"NUMBER",value:o}),e.push({name:"dy",type:"NUMBER",value:a}),e.push({name:"rrcurveto",type:"OP",value:8}),r=Math.round(l.x),i=Math.round(l.y)}}return e.push({name:"endchar",type:"OP",value:14}),e}function uZ(t){for(var e=new rn.Record("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),n=0;n<t.length;n+=1){var r=t.get(n),i=lZ(r);e.charStrings.push({name:r.name,type:"CHARSTRING",value:i})}return e}function cZ(t,e){var n=new rn.Record("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return n.dict=oF(rF,t,e),n}function hZ(t,e){for(var n=new rn.Table("CFF ",[{name:"header",type:"RECORD"},{name:"nameIndex",type:"RECORD"},{name:"topDictIndex",type:"RECORD"},{name:"stringIndex",type:"RECORD"},{name:"globalSubrIndex",type:"RECORD"},{name:"charsets",type:"RECORD"},{name:"charStringsIndex",type:"RECORD"},{name:"privateDict",type:"RECORD"}]),r=1/e.unitsPerEm,i={version:e.version,fullName:e.fullName,familyName:e.familyName,weight:e.weightName,fontBBox:e.fontBBox||[0,0,0,0],fontMatrix:[r,0,0,r,0,0],charset:999,encoding:0,charStrings:999,private:[0,999]},s={},o=[],a,l=1;l<t.length;l+=1)a=t.get(l),o.push(a.name);var u=[];n.header=rZ(),n.nameIndex=iZ([e.postScriptName]);var c=KC(i,u);n.topDictIndex=JC(c),n.globalSubrIndex=oZ(),n.charsets=aZ(o,u),n.charStringsIndex=uZ(t),n.privateDict=cZ(s,u),n.stringIndex=sZ(u);var h=n.header.sizeOf()+n.nameIndex.sizeOf()+n.topDictIndex.sizeOf()+n.stringIndex.sizeOf()+n.globalSubrIndex.sizeOf();return i.charset=h,i.encoding=0,i.charStrings=i.charset+n.charsets.sizeOf(),i.private[1]=i.charStrings+n.charStringsIndex.sizeOf(),c=KC(i,u),n.topDictIndex=JC(c),n}var fZ={parse:nZ,make:hZ};function dZ(t,e){var n={},r=new Vn.Parser(t,e);return n.version=r.parseVersion(),n.fontRevision=Math.round(r.parseFixed()*1e3)/1e3,n.checkSumAdjustment=r.parseULong(),n.magicNumber=r.parseULong(),On.argument(n.magicNumber===1594834165,"Font header has wrong magic number."),n.flags=r.parseUShort(),n.unitsPerEm=r.parseUShort(),n.created=r.parseLongDateTime(),n.modified=r.parseLongDateTime(),n.xMin=r.parseShort(),n.yMin=r.parseShort(),n.xMax=r.parseShort(),n.yMax=r.parseShort(),n.macStyle=r.parseUShort(),n.lowestRecPPEM=r.parseUShort(),n.fontDirectionHint=r.parseShort(),n.indexToLocFormat=r.parseShort(),n.glyphDataFormat=r.parseShort(),n}function pZ(t){var e=Math.round(new Date().getTime()/1e3)+2082844800,n=e;return t.createdTimestamp&&(n=t.createdTimestamp+2082844800),new rn.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:n},{name:"modified",type:"LONGDATETIME",value:e},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],t)}var mZ={parse:dZ,make:pZ};function gZ(t,e){var n={},r=new Vn.Parser(t,e);return n.version=r.parseVersion(),n.ascender=r.parseShort(),n.descender=r.parseShort(),n.lineGap=r.parseShort(),n.advanceWidthMax=r.parseUShort(),n.minLeftSideBearing=r.parseShort(),n.minRightSideBearing=r.parseShort(),n.xMaxExtent=r.parseShort(),n.caretSlopeRise=r.parseShort(),n.caretSlopeRun=r.parseShort(),n.caretOffset=r.parseShort(),r.relativeOffset+=8,n.metricDataFormat=r.parseShort(),n.numberOfHMetrics=r.parseUShort(),n}function vZ(t){return new rn.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],t)}var yZ={parse:gZ,make:vZ};function xZ(t,e,n,r,i){for(var s,o,a=new Vn.Parser(t,e),l=0;l<r;l+=1){l<n&&(s=a.parseUShort(),o=a.parseShort());var u=i.get(l);u.advanceWidth=s,u.leftSideBearing=o}}function wZ(t,e,n,r,i){t._hmtxTableData={};for(var s,o,a=new Vn.Parser(e,n),l=0;l<i;l+=1)l<r&&(s=a.parseUShort(),o=a.parseShort()),t._hmtxTableData[l]={advanceWidth:s,leftSideBearing:o}}function SZ(t,e,n,r,i,s,o){o.lowMemory?wZ(t,e,n,r,i):xZ(e,n,r,i,s)}function _Z(t){for(var e=new rn.Table("hmtx",[]),n=0;n<t.length;n+=1){var r=t.get(n),i=r.advanceWidth||0,s=r.leftSideBearing||0;e.fields.push({name:"advanceWidth_"+n,type:"USHORT",value:i}),e.fields.push({name:"leftSideBearing_"+n,type:"SHORT",value:s})}return e}var bZ={parse:SZ,make:_Z};function MZ(t){for(var e=new rn.Table("ltag",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"numTags",type:"ULONG",value:t.length}]),n="",r=12+t.length*4,i=0;i<t.length;++i){var s=n.indexOf(t[i]);s<0&&(s=n.length,n+=t[i]),e.fields.push({name:"offset "+i,type:"USHORT",value:r+s}),e.fields.push({name:"length "+i,type:"USHORT",value:t[i].length})}return e.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),e}function EZ(t,e){var n=new Vn.Parser(t,e),r=n.parseULong();On.argument(r===1,"Unsupported ltag table version."),n.skip("uLong",1);for(var i=n.parseULong(),s=[],o=0;o<i;o++){for(var a="",l=e+n.parseUShort(),u=n.parseUShort(),c=l;c<l+u;++c)a+=String.fromCharCode(t.getInt8(c));s.push(a)}return s}var AZ={make:MZ,parse:EZ};function TZ(t,e){var n={},r=new Vn.Parser(t,e);return n.version=r.parseVersion(),n.numGlyphs=r.parseUShort(),n.version===1&&(n.maxPoints=r.parseUShort(),n.maxContours=r.parseUShort(),n.maxCompositePoints=r.parseUShort(),n.maxCompositeContours=r.parseUShort(),n.maxZones=r.parseUShort(),n.maxTwilightPoints=r.parseUShort(),n.maxStorage=r.parseUShort(),n.maxFunctionDefs=r.parseUShort(),n.maxInstructionDefs=r.parseUShort(),n.maxStackElements=r.parseUShort(),n.maxSizeOfInstructions=r.parseUShort(),n.maxComponentElements=r.parseUShort(),n.maxComponentDepth=r.parseUShort()),n}function CZ(t){return new rn.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:t}])}var LZ={parse:TZ,make:CZ},aF=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","license","licenseURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"],lF={0:"en",1:"fr",2:"de",3:"it",4:"nl",5:"sv",6:"es",7:"da",8:"pt",9:"no",10:"he",11:"ja",12:"ar",13:"fi",14:"el",15:"is",16:"mt",17:"tr",18:"hr",19:"zh-Hant",20:"ur",21:"hi",22:"th",23:"ko",24:"lt",25:"pl",26:"hu",27:"es",28:"lv",29:"se",30:"fo",31:"fa",32:"ru",33:"zh",34:"nl-BE",35:"ga",36:"sq",37:"ro",38:"cz",39:"sk",40:"si",41:"yi",42:"sr",43:"mk",44:"bg",45:"uk",46:"be",47:"uz",48:"kk",49:"az-Cyrl",50:"az-Arab",51:"hy",52:"ka",53:"mo",54:"ky",55:"tg",56:"tk",57:"mn-CN",58:"mn",59:"ps",60:"ks",61:"ku",62:"sd",63:"bo",64:"ne",65:"sa",66:"mr",67:"bn",68:"as",69:"gu",70:"pa",71:"or",72:"ml",73:"kn",74:"ta",75:"te",76:"si",77:"my",78:"km",79:"lo",80:"vi",81:"id",82:"tl",83:"ms",84:"ms-Arab",85:"am",86:"ti",87:"om",88:"so",89:"sw",90:"rw",91:"rn",92:"ny",93:"mg",94:"eo",128:"cy",129:"eu",130:"ca",131:"la",132:"qu",133:"gn",134:"ay",135:"tt",136:"ug",137:"dz",138:"jv",139:"su",140:"gl",141:"af",142:"br",143:"iu",144:"gd",145:"gv",146:"ga",147:"to",148:"el-polyton",149:"kl",150:"az",151:"nn"},PZ={0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:5,11:1,12:4,13:0,14:6,15:0,16:0,17:0,18:0,19:2,20:4,21:9,22:21,23:3,24:29,25:29,26:29,27:29,28:29,29:0,30:0,31:4,32:7,33:25,34:0,35:0,36:0,37:0,38:29,39:29,40:0,41:5,42:7,43:7,44:7,45:7,46:7,47:7,48:7,49:7,50:4,51:24,52:23,53:7,54:7,55:7,56:7,57:27,58:7,59:4,60:4,61:4,62:4,63:26,64:9,65:9,66:9,67:13,68:13,69:11,70:10,71:12,72:17,73:16,74:14,75:15,76:18,77:19,78:20,79:22,80:30,81:0,82:0,83:0,84:4,85:28,86:28,87:28,88:0,89:0,90:0,91:0,92:0,93:0,94:0,128:0,129:0,130:0,131:0,132:0,133:0,134:0,135:7,136:4,137:26,138:0,139:0,140:0,141:0,142:0,143:28,144:0,145:0,146:0,147:0,148:6,149:0,150:0,151:0},uF={1078:"af",1052:"sq",1156:"gsw",1118:"am",5121:"ar-DZ",15361:"ar-BH",3073:"ar",2049:"ar-IQ",11265:"ar-JO",13313:"ar-KW",12289:"ar-LB",4097:"ar-LY",6145:"ary",8193:"ar-OM",16385:"ar-QA",1025:"ar-SA",10241:"ar-SY",7169:"aeb",14337:"ar-AE",9217:"ar-YE",1067:"hy",1101:"as",2092:"az-Cyrl",1068:"az",1133:"ba",1069:"eu",1059:"be",2117:"bn",1093:"bn-IN",8218:"bs-Cyrl",5146:"bs",1150:"br",1026:"bg",1027:"ca",3076:"zh-HK",5124:"zh-MO",2052:"zh",4100:"zh-SG",1028:"zh-TW",1155:"co",1050:"hr",4122:"hr-BA",1029:"cs",1030:"da",1164:"prs",1125:"dv",2067:"nl-BE",1043:"nl",3081:"en-AU",10249:"en-BZ",4105:"en-CA",9225:"en-029",16393:"en-IN",6153:"en-IE",8201:"en-JM",17417:"en-MY",5129:"en-NZ",13321:"en-PH",18441:"en-SG",7177:"en-ZA",11273:"en-TT",2057:"en-GB",1033:"en",12297:"en-ZW",1061:"et",1080:"fo",1124:"fil",1035:"fi",2060:"fr-BE",3084:"fr-CA",1036:"fr",5132:"fr-LU",6156:"fr-MC",4108:"fr-CH",1122:"fy",1110:"gl",1079:"ka",3079:"de-AT",1031:"de",5127:"de-LI",4103:"de-LU",2055:"de-CH",1032:"el",1135:"kl",1095:"gu",1128:"ha",1037:"he",1081:"hi",1038:"hu",1039:"is",1136:"ig",1057:"id",1117:"iu",2141:"iu-Latn",2108:"ga",1076:"xh",1077:"zu",1040:"it",2064:"it-CH",1041:"ja",1099:"kn",1087:"kk",1107:"km",1158:"quc",1159:"rw",1089:"sw",1111:"kok",1042:"ko",1088:"ky",1108:"lo",1062:"lv",1063:"lt",2094:"dsb",1134:"lb",1071:"mk",2110:"ms-BN",1086:"ms",1100:"ml",1082:"mt",1153:"mi",1146:"arn",1102:"mr",1148:"moh",1104:"mn",2128:"mn-CN",1121:"ne",1044:"nb",2068:"nn",1154:"oc",1096:"or",1123:"ps",1045:"pl",1046:"pt",2070:"pt-PT",1094:"pa",1131:"qu-BO",2155:"qu-EC",3179:"qu",1048:"ro",1047:"rm",1049:"ru",9275:"smn",4155:"smj-NO",5179:"smj",3131:"se-FI",1083:"se",2107:"se-SE",8251:"sms",6203:"sma-NO",7227:"sms",1103:"sa",7194:"sr-Cyrl-BA",3098:"sr",6170:"sr-Latn-BA",2074:"sr-Latn",1132:"nso",1074:"tn",1115:"si",1051:"sk",1060:"sl",11274:"es-AR",16394:"es-BO",13322:"es-CL",9226:"es-CO",5130:"es-CR",7178:"es-DO",12298:"es-EC",17418:"es-SV",4106:"es-GT",18442:"es-HN",2058:"es-MX",19466:"es-NI",6154:"es-PA",15370:"es-PY",10250:"es-PE",20490:"es-PR",3082:"es",1034:"es",21514:"es-US",14346:"es-UY",8202:"es-VE",2077:"sv-FI",1053:"sv",1114:"syr",1064:"tg",2143:"tzm",1097:"ta",1092:"tt",1098:"te",1054:"th",1105:"bo",1055:"tr",1090:"tk",1152:"ug",1058:"uk",1070:"hsb",1056:"ur",2115:"uz-Cyrl",1091:"uz",1066:"vi",1106:"cy",1160:"wo",1157:"sah",1144:"ii",1130:"yo"};function RZ(t,e,n){switch(t){case 0:if(e===65535)return"und";if(n)return n[e];break;case 1:return lF[e];case 3:return uF[e]}}var x5="utf-16",kZ={0:"macintosh",1:"x-mac-japanese",2:"x-mac-chinesetrad",3:"x-mac-korean",6:"x-mac-greek",7:"x-mac-cyrillic",9:"x-mac-devanagai",10:"x-mac-gurmukhi",11:"x-mac-gujarati",12:"x-mac-oriya",13:"x-mac-bengali",14:"x-mac-tamil",15:"x-mac-telugu",16:"x-mac-kannada",17:"x-mac-malayalam",18:"x-mac-sinhalese",19:"x-mac-burmese",20:"x-mac-khmer",21:"x-mac-thai",22:"x-mac-lao",23:"x-mac-georgian",24:"x-mac-armenian",25:"x-mac-chinesesimp",26:"x-mac-tibetan",27:"x-mac-mongolian",28:"x-mac-ethiopic",29:"x-mac-ce",30:"x-mac-vietnamese",31:"x-mac-extarabic"},IZ={15:"x-mac-icelandic",17:"x-mac-turkish",18:"x-mac-croatian",24:"x-mac-ce",25:"x-mac-ce",26:"x-mac-ce",27:"x-mac-ce",28:"x-mac-ce",30:"x-mac-icelandic",37:"x-mac-romanian",38:"x-mac-ce",39:"x-mac-ce",40:"x-mac-ce",143:"x-mac-inuit",146:"x-mac-gaelic"};function cF(t,e,n){switch(t){case 0:return x5;case 1:return IZ[n]||kZ[e];case 3:if(e===1||e===10)return x5;break}}function NZ(t,e,n){for(var r={},i=new Vn.Parser(t,e),s=i.parseUShort(),o=i.parseUShort(),a=i.offset+i.parseUShort(),l=0;l<o;l++){var u=i.parseUShort(),c=i.parseUShort(),h=i.parseUShort(),f=i.parseUShort(),d=aF[f]||f,v=i.parseUShort(),x=i.parseUShort(),w=RZ(u,h,n),g=cF(u,c,h);if(g!==void 0&&w!==void 0){var S=void 0;if(g===x5?S=Sm.UTF16(t,a+x,v):S=Sm.MACSTRING(t,a+x,v,g),S){var _=r[d];_===void 0&&(_=r[d]={}),_[w]=S}}}return s===1&&i.parseUShort(),r}function JS(t){var e={};for(var n in t)e[t[n]]=parseInt(n);return e}function QC(t,e,n,r,i,s){return new rn.Record("NameRecord",[{name:"platformID",type:"USHORT",value:t},{name:"encodingID",type:"USHORT",value:e},{name:"languageID",type:"USHORT",value:n},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:i},{name:"offset",type:"USHORT",value:s}])}function FZ(t,e){var n=t.length,r=e.length-n+1;e:for(var i=0;i<r;i++)for(;i<r;i++){for(var s=0;s<n;s++)if(e[i+s]!==t[s])continue e;return i}return-1}function eL(t,e){var n=FZ(t,e);if(n<0){n=e.length;for(var r=0,i=t.length;r<i;++r)e.push(t[r])}return n}function DZ(t,e){var n,r=[],i={},s=JS(aF);for(var o in t){var a=s[o];if(a===void 0&&(a=o),n=parseInt(a),isNaN(n))throw new Error('Name table entry "'+o+'" does not exist, see nameTableNames for complete list.');i[n]=t[o],r.push(n)}for(var l=JS(lF),u=JS(uF),c=[],h=[],f=0;f<r.length;f++){n=r[f];var d=i[n];for(var v in d){var x=d[v],w=1,g=l[v],S=PZ[g],_=cF(w,S,g),T=Xt.MACSTRING(x,_);T===void 0&&(w=0,g=e.indexOf(v),g<0&&(g=e.length,e.push(v)),S=4,T=Xt.UTF16(x));var L=eL(T,h);c.push(QC(w,S,g,n,T.length,L));var k=u[v];if(k!==void 0){var N=Xt.UTF16(x),R=eL(N,h);c.push(QC(3,1,k,n,N.length,R))}}}c.sort(function(O,B){return O.platformID-B.platformID||O.encodingID-B.encodingID||O.languageID-B.languageID||O.nameID-B.nameID});for(var P=new rn.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:c.length},{name:"stringOffset",type:"USHORT",value:6+c.length*12}]),D=0;D<c.length;D++)P.fields.push({name:"record_"+D,type:"RECORD",value:c[D]});return P.fields.push({name:"strings",type:"LITERAL",value:h}),P}var OZ={parse:NZ,make:DZ},w5=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];function UZ(t){for(var e=0;e<w5.length;e+=1){var n=w5[e];if(t>=n.begin&&t<n.end)return e}return-1}function BZ(t,e){var n={},r=new Vn.Parser(t,e);n.version=r.parseUShort(),n.xAvgCharWidth=r.parseShort(),n.usWeightClass=r.parseUShort(),n.usWidthClass=r.parseUShort(),n.fsType=r.parseUShort(),n.ySubscriptXSize=r.parseShort(),n.ySubscriptYSize=r.parseShort(),n.ySubscriptXOffset=r.parseShort(),n.ySubscriptYOffset=r.parseShort(),n.ySuperscriptXSize=r.parseShort(),n.ySuperscriptYSize=r.parseShort(),n.ySuperscriptXOffset=r.parseShort(),n.ySuperscriptYOffset=r.parseShort(),n.yStrikeoutSize=r.parseShort(),n.yStrikeoutPosition=r.parseShort(),n.sFamilyClass=r.parseShort(),n.panose=[];for(var i=0;i<10;i++)n.panose[i]=r.parseByte();return n.ulUnicodeRange1=r.parseULong(),n.ulUnicodeRange2=r.parseULong(),n.ulUnicodeRange3=r.parseULong(),n.ulUnicodeRange4=r.parseULong(),n.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),n.fsSelection=r.parseUShort(),n.usFirstCharIndex=r.parseUShort(),n.usLastCharIndex=r.parseUShort(),n.sTypoAscender=r.parseShort(),n.sTypoDescender=r.parseShort(),n.sTypoLineGap=r.parseShort(),n.usWinAscent=r.parseUShort(),n.usWinDescent=r.parseUShort(),n.version>=1&&(n.ulCodePageRange1=r.parseULong(),n.ulCodePageRange2=r.parseULong()),n.version>=2&&(n.sxHeight=r.parseShort(),n.sCapHeight=r.parseShort(),n.usDefaultChar=r.parseUShort(),n.usBreakChar=r.parseUShort(),n.usMaxContent=r.parseUShort()),n}function zZ(t){return new rn.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],t)}var tL={parse:BZ,make:zZ,unicodeRanges:w5,getUnicodeRange:UZ};function HZ(t,e){var n={},r=new Vn.Parser(t,e);switch(n.version=r.parseVersion(),n.italicAngle=r.parseFixed(),n.underlinePosition=r.parseShort(),n.underlineThickness=r.parseShort(),n.isFixedPitch=r.parseULong(),n.minMemType42=r.parseULong(),n.maxMemType42=r.parseULong(),n.minMemType1=r.parseULong(),n.maxMemType1=r.parseULong(),n.version){case 1:n.names=YC.slice();break;case 2:n.numberOfGlyphs=r.parseUShort(),n.glyphNameIndex=new Array(n.numberOfGlyphs);for(var i=0;i<n.numberOfGlyphs;i++)n.glyphNameIndex[i]=r.parseUShort();n.names=[];for(var s=0;s<n.numberOfGlyphs;s++)if(n.glyphNameIndex[s]>=YC.length){var o=r.parseChar();n.names.push(r.parseString(o))}break;case 2.5:n.numberOfGlyphs=r.parseUShort(),n.offset=new Array(n.numberOfGlyphs);for(var a=0;a<n.numberOfGlyphs;a++)n.offset[a]=r.parseChar();break}return n}function GZ(){return new rn.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var VZ={parse:HZ,make:GZ},Cl=new Array(9);Cl[1]=function(){var e=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{substFormat:1,coverage:this.parsePointer(ht.coverage),deltaGlyphId:this.parseUShort()};if(n===2)return{substFormat:2,coverage:this.parsePointer(ht.coverage),substitute:this.parseOffset16List()};On.assert(!1,"0x"+e.toString(16)+": lookup type 1 format must be 1 or 2.")};Cl[2]=function(){var e=this.parseUShort();return On.argument(e===1,"GSUB Multiple Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ht.coverage),sequences:this.parseListOfLists()}};Cl[3]=function(){var e=this.parseUShort();return On.argument(e===1,"GSUB Alternate Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ht.coverage),alternateSets:this.parseListOfLists()}};Cl[4]=function(){var e=this.parseUShort();return On.argument(e===1,"GSUB ligature table identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ht.coverage),ligatureSets:this.parseListOfLists(function(){return{ligGlyph:this.parseUShort(),components:this.parseUShortList(this.parseUShort()-1)}})}};var em={sequenceIndex:ht.uShort,lookupListIndex:ht.uShort};Cl[5]=function(){var e=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{substFormat:n,coverage:this.parsePointer(ht.coverage),ruleSets:this.parseListOfLists(function(){var s=this.parseUShort(),o=this.parseUShort();return{input:this.parseUShortList(s-1),lookupRecords:this.parseRecordList(o,em)}})};if(n===2)return{substFormat:n,coverage:this.parsePointer(ht.coverage),classDef:this.parsePointer(ht.classDef),classSets:this.parseListOfLists(function(){var s=this.parseUShort(),o=this.parseUShort();return{classes:this.parseUShortList(s-1),lookupRecords:this.parseRecordList(o,em)}})};if(n===3){var r=this.parseUShort(),i=this.parseUShort();return{substFormat:n,coverages:this.parseList(r,ht.pointer(ht.coverage)),lookupRecords:this.parseRecordList(i,em)}}On.assert(!1,"0x"+e.toString(16)+": lookup type 5 format must be 1, 2 or 3.")};Cl[6]=function(){var e=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{substFormat:1,coverage:this.parsePointer(ht.coverage),chainRuleSets:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(em)}})};if(n===2)return{substFormat:2,coverage:this.parsePointer(ht.coverage),backtrackClassDef:this.parsePointer(ht.classDef),inputClassDef:this.parsePointer(ht.classDef),lookaheadClassDef:this.parsePointer(ht.classDef),chainClassSet:this.parseListOfLists(function(){return{backtrack:this.parseUShortList(),input:this.parseUShortList(this.parseShort()-1),lookahead:this.parseUShortList(),lookupRecords:this.parseRecordList(em)}})};if(n===3)return{substFormat:3,backtrackCoverage:this.parseList(ht.pointer(ht.coverage)),inputCoverage:this.parseList(ht.pointer(ht.coverage)),lookaheadCoverage:this.parseList(ht.pointer(ht.coverage)),lookupRecords:this.parseRecordList(em)};On.assert(!1,"0x"+e.toString(16)+": lookup type 6 format must be 1, 2 or 3.")};Cl[7]=function(){var e=this.parseUShort();On.argument(e===1,"GSUB Extension Substitution subtable identifier-format must be 1");var n=this.parseUShort(),r=new ht(this.data,this.offset+this.parseULong());return{substFormat:1,lookupType:n,extension:Cl[n].call(r)}};Cl[8]=function(){var e=this.parseUShort();return On.argument(e===1,"GSUB Reverse Chaining Contextual Single Substitution Subtable identifier-format must be 1"),{substFormat:e,coverage:this.parsePointer(ht.coverage),backtrackCoverage:this.parseList(ht.pointer(ht.coverage)),lookaheadCoverage:this.parseList(ht.pointer(ht.coverage)),substitutes:this.parseUShortList()}};function WZ(t,e){e=e||0;var n=new ht(t,e),r=n.parseVersion(1);return On.argument(r===1||r===1.1,"Unsupported GSUB table version."),r===1?{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(Cl)}:{version:r,scripts:n.parseScriptList(),features:n.parseFeatureList(),lookups:n.parseLookupList(Cl),variations:n.parseFeatureVariationsList()}}var Pm=new Array(9);Pm[1]=function(e){return e.substFormat===1?new rn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new rn.Coverage(e.coverage)},{name:"deltaGlyphID",type:"USHORT",value:e.deltaGlyphId}]):new rn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:2},{name:"coverage",type:"TABLE",value:new rn.Coverage(e.coverage)}].concat(rn.ushortList("substitute",e.substitute)))};Pm[2]=function(e){return On.assert(e.substFormat===1,"Lookup type 2 substFormat must be 1."),new rn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new rn.Coverage(e.coverage)}].concat(rn.tableList("seqSet",e.sequences,function(n){return new rn.Table("sequenceSetTable",rn.ushortList("sequence",n))})))};Pm[3]=function(e){return On.assert(e.substFormat===1,"Lookup type 3 substFormat must be 1."),new rn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new rn.Coverage(e.coverage)}].concat(rn.tableList("altSet",e.alternateSets,function(n){return new rn.Table("alternateSetTable",rn.ushortList("alternate",n))})))};Pm[4]=function(e){return On.assert(e.substFormat===1,"Lookup type 4 substFormat must be 1."),new rn.Table("substitutionTable",[{name:"substFormat",type:"USHORT",value:1},{name:"coverage",type:"TABLE",value:new rn.Coverage(e.coverage)}].concat(rn.tableList("ligSet",e.ligatureSets,function(n){return new rn.Table("ligatureSetTable",rn.tableList("ligature",n,function(r){return new rn.Table("ligatureTable",[{name:"ligGlyph",type:"USHORT",value:r.ligGlyph}].concat(rn.ushortList("component",r.components,r.components.length+1)))}))})))};Pm[6]=function(e){if(e.substFormat===1){var n=new rn.Table("chainContextTable",[{name:"substFormat",type:"USHORT",value:e.substFormat},{name:"coverage",type:"TABLE",value:new rn.Coverage(e.coverage)}].concat(rn.tableList("chainRuleSet",e.chainRuleSets,function(s){return new rn.Table("chainRuleSetTable",rn.tableList("chainRule",s,function(o){var a=rn.ushortList("backtrackGlyph",o.backtrack,o.backtrack.length).concat(rn.ushortList("inputGlyph",o.input,o.input.length+1)).concat(rn.ushortList("lookaheadGlyph",o.lookahead,o.lookahead.length)).concat(rn.ushortList("substitution",[],o.lookupRecords.length));return o.lookupRecords.forEach(function(l,u){a=a.concat({name:"sequenceIndex"+u,type:"USHORT",value:l.sequenceIndex}).concat({name:"lookupListIndex"+u,type:"USHORT",value:l.lookupListIndex})}),new rn.Table("chainRuleTable",a)}))})));return n}else if(e.substFormat===2)On.assert(!1,"lookup type 6 format 2 is not yet supported.");else if(e.substFormat===3){var r=[{name:"substFormat",type:"USHORT",value:e.substFormat}];r.push({name:"backtrackGlyphCount",type:"USHORT",value:e.backtrackCoverage.length}),e.backtrackCoverage.forEach(function(s,o){r.push({name:"backtrackCoverage"+o,type:"TABLE",value:new rn.Coverage(s)})}),r.push({name:"inputGlyphCount",type:"USHORT",value:e.inputCoverage.length}),e.inputCoverage.forEach(function(s,o){r.push({name:"inputCoverage"+o,type:"TABLE",value:new rn.Coverage(s)})}),r.push({name:"lookaheadGlyphCount",type:"USHORT",value:e.lookaheadCoverage.length}),e.lookaheadCoverage.forEach(function(s,o){r.push({name:"lookaheadCoverage"+o,type:"TABLE",value:new rn.Coverage(s)})}),r.push({name:"substitutionCount",type:"USHORT",value:e.lookupRecords.length}),e.lookupRecords.forEach(function(s,o){r=r.concat({name:"sequenceIndex"+o,type:"USHORT",value:s.sequenceIndex}).concat({name:"lookupListIndex"+o,type:"USHORT",value:s.lookupListIndex})});var i=new rn.Table("chainContextTable",r);return i}On.assert(!1,"lookup type 6 format must be 1, 2 or 3.")};function jZ(t){return new rn.Table("GSUB",[{name:"version",type:"ULONG",value:65536},{name:"scripts",type:"TABLE",value:new rn.ScriptList(t.scripts)},{name:"features",type:"TABLE",value:new rn.FeatureList(t.features)},{name:"lookups",type:"TABLE",value:new rn.LookupList(t.lookups,Pm)}])}var XZ={parse:WZ,make:jZ};function qZ(t,e){var n=new Vn.Parser(t,e),r=n.parseULong();On.argument(r===1,"Unsupported META table version."),n.parseULong(),n.parseULong();for(var i=n.parseULong(),s={},o=0;o<i;o++){var a=n.parseTag(),l=n.parseULong(),u=n.parseULong(),c=Sm.UTF8(t,e+l,u);s[a]=c}return s}function YZ(t){var e=Object.keys(t).length,n="",r=16+e*12,i=new rn.Table("meta",[{name:"version",type:"ULONG",value:1},{name:"flags",type:"ULONG",value:0},{name:"offset",type:"ULONG",value:r},{name:"numTags",type:"ULONG",value:e}]);for(var s in t){var o=n.length;n+=t[s],i.fields.push({name:"tag "+s,type:"TAG",value:s}),i.fields.push({name:"offset "+s,type:"ULONG",value:r+o}),i.fields.push({name:"length "+s,type:"ULONG",value:t[s].length})}return i.fields.push({name:"stringPool",type:"CHARARRAY",value:n}),i}var ZZ={parse:qZ,make:YZ};function nL(t){return Math.log(t)/Math.log(2)|0}function N3(t){for(;t.length%4!==0;)t.push(0);for(var e=0,n=0;n<t.length;n+=4)e+=(t[n]<<24)+(t[n+1]<<16)+(t[n+2]<<8)+t[n+3];return e%=Math.pow(2,32),e}function rL(t,e,n,r){return new rn.Record("Table Record",[{name:"tag",type:"TAG",value:t!==void 0?t:""},{name:"checkSum",type:"ULONG",value:e!==void 0?e:0},{name:"offset",type:"ULONG",value:n!==void 0?n:0},{name:"length",type:"ULONG",value:r!==void 0?r:0}])}function hF(t){var e=new rn.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]);e.tables=t,e.numTables=t.length;var n=Math.pow(2,nL(e.numTables));e.searchRange=16*n,e.entrySelector=nL(n),e.rangeShift=e.numTables*16-e.searchRange;for(var r=[],i=[],s=e.sizeOf()+rL().sizeOf()*e.numTables;s%4!==0;)s+=1,i.push({name:"padding",type:"BYTE",value:0});for(var o=0;o<t.length;o+=1){var a=t[o];On.argument(a.tableName.length===4,"Table name"+a.tableName+" is invalid.");var l=a.sizeOf(),u=rL(a.tableName,N3(a.encode()),s,l);for(r.push({name:u.tag+" Table Record",type:"RECORD",value:u}),i.push({name:a.tableName+" table",type:"RECORD",value:a}),s+=l,On.argument(!isNaN(s),"Something went wrong calculating the offset.");s%4!==0;)s+=1,i.push({name:"padding",type:"BYTE",value:0})}return r.sort(function(c,h){return c.value.tag>h.value.tag?1:-1}),e.fields=e.fields.concat(r),e.fields=e.fields.concat(i),e}function iL(t,e,n){for(var r=0;r<e.length;r+=1){var i=t.charToGlyphIndex(e[r]);if(i>0){var s=t.glyphs.get(i);return s.getMetrics()}}return n}function $Z(t){for(var e=0,n=0;n<t.length;n+=1)e+=t[n];return e/t.length}function KZ(t){for(var e=[],n=[],r=[],i=[],s=[],o=[],a=[],l,u=0,c=0,h=0,f=0,d=0,v=0;v<t.glyphs.length;v+=1){var x=t.glyphs.get(v),w=x.unicode|0;if(isNaN(x.advanceWidth))throw new Error("Glyph "+x.name+" ("+v+"): advanceWidth is not a number.");(l>w||l===void 0)&&w>0&&(l=w),u<w&&(u=w);var g=tL.getUnicodeRange(w);if(g<32)c|=1<<g;else if(g<64)h|=1<<g-32;else if(g<96)f|=1<<g-64;else if(g<123)d|=1<<g-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");if(x.name!==".notdef"){var S=x.getMetrics();e.push(S.xMin),n.push(S.yMin),r.push(S.xMax),i.push(S.yMax),o.push(S.leftSideBearing),a.push(S.rightSideBearing),s.push(x.advanceWidth)}}var _={xMin:Math.min.apply(null,e),yMin:Math.min.apply(null,n),xMax:Math.max.apply(null,r),yMax:Math.max.apply(null,i),advanceWidthMax:Math.max.apply(null,s),advanceWidthAvg:$Z(s),minLeftSideBearing:Math.min.apply(null,o),maxLeftSideBearing:Math.max.apply(null,o),minRightSideBearing:Math.min.apply(null,a)};_.ascender=t.ascender,_.descender=t.descender;var T=mZ.make({flags:3,unitsPerEm:t.unitsPerEm,xMin:_.xMin,yMin:_.yMin,xMax:_.xMax,yMax:_.yMax,lowestRecPPEM:3,createdTimestamp:t.createdTimestamp}),L=yZ.make({ascender:_.ascender,descender:_.descender,advanceWidthMax:_.advanceWidthMax,minLeftSideBearing:_.minLeftSideBearing,minRightSideBearing:_.minRightSideBearing,xMaxExtent:_.maxLeftSideBearing+(_.xMax-_.xMin),numberOfHMetrics:t.glyphs.length}),k=LZ.make(t.glyphs.length),N=tL.make(Object.assign({xAvgCharWidth:Math.round(_.advanceWidthAvg),usFirstCharIndex:l,usLastCharIndex:u,ulUnicodeRange1:c,ulUnicodeRange2:h,ulUnicodeRange3:f,ulUnicodeRange4:d,sTypoAscender:_.ascender,sTypoDescender:_.descender,sTypoLineGap:0,usWinAscent:_.yMax,usWinDescent:Math.abs(_.yMin),ulCodePageRange1:1,sxHeight:iL(t,"xyvw",{yMax:Math.round(_.ascender/2)}).yMax,sCapHeight:iL(t,"HIKLEFJMNTZBDPRAGOQSUVWXY",_).yMax,usDefaultChar:t.hasChar(" ")?32:0,usBreakChar:t.hasChar(" ")?32:0},t.tables.os2)),R=bZ.make(t.glyphs),P=UY.make(t.glyphs),D=t.getEnglishName("fontFamily"),O=t.getEnglishName("fontSubfamily"),B=D+" "+O,V=t.getEnglishName("postScriptName");V||(V=D.replace(/\s/g,"")+"-"+O);var H={};for(var ee in t.names)H[ee]=t.names[ee];H.uniqueID||(H.uniqueID={en:t.getEnglishName("manufacturer")+":"+B}),H.postScriptName||(H.postScriptName={en:V}),H.preferredFamily||(H.preferredFamily=t.names.fontFamily),H.preferredSubfamily||(H.preferredSubfamily=t.names.fontSubfamily);var se=[],ce=OZ.make(H,se),W=se.length>0?AZ.make(se):void 0,Y=VZ.make(),j=fZ.make(t.glyphs,{version:t.getEnglishName("version"),fullName:B,familyName:D,weightName:O,postScriptName:V,unitsPerEm:t.unitsPerEm,fontBBox:[0,_.yMin,_.ascender,_.advanceWidthMax]}),re=t.metas&&Object.keys(t.metas).length>0?ZZ.make(t.metas):void 0,I=[T,L,k,N,ce,P,Y,j,R];W&&I.push(W),t.tables.gsub&&I.push(XZ.make(t.tables.gsub)),re&&I.push(re);for(var X=hF(I),J=X.encode(),ae=N3(J),fe=X.fields,Se=!1,Ee=0;Ee<fe.length;Ee+=1)if(fe[Ee].name==="head table"){fe[Ee].value.checkSumAdjustment=2981146554-ae,Se=!0;break}if(!Se)throw new Error("Could not find head table with checkSum to adjust.");return X}var JZ={make:hF,fontToTable:KZ,computeCheckSum:N3};function QS(t,e){for(var n=0,r=t.length-1;n<=r;){var i=n+r>>>1,s=t[i].tag;if(s===e)return i;s<e?n=i+1:r=i-1}return-n-1}function sL(t,e){for(var n=0,r=t.length-1;n<=r;){var i=n+r>>>1,s=t[i];if(s===e)return i;s<e?n=i+1:r=i-1}return-n-1}function oL(t,e){for(var n,r=0,i=t.length-1;r<=i;){var s=r+i>>>1;n=t[s];var o=n.start;if(o===e)return n;o<e?r=s+1:i=s-1}if(r>0)return n=t[r-1],e>n.end?0:n}function Sv(t,e){this.font=t,this.tableName=e}Sv.prototype={searchTag:QS,binSearch:sL,getTable:function(t){var e=this.font.tables[this.tableName];return!e&&t&&(e=this.font.tables[this.tableName]=this.createDefaultTable()),e},getScriptNames:function(){var t=this.getTable();return t?t.scripts.map(function(e){return e.tag}):[]},getDefaultScriptName:function(){var t=this.getTable();if(t){for(var e=!1,n=0;n<t.scripts.length;n++){var r=t.scripts[n].tag;if(r==="DFLT")return r;r==="latn"&&(e=!0)}if(e)return"latn"}},getScriptTable:function(t,e){var n=this.getTable(e);if(n){t=t||"DFLT";var r=n.scripts,i=QS(n.scripts,t);if(i>=0)return r[i].script;if(e){var s={tag:t,script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}};return r.splice(-1-i,0,s),s.script}}},getLangSysTable:function(t,e,n){var r=this.getScriptTable(t,n);if(r){if(!e||e==="dflt"||e==="DFLT")return r.defaultLangSys;var i=QS(r.langSysRecords,e);if(i>=0)return r.langSysRecords[i].langSys;if(n){var s={tag:e,langSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]}};return r.langSysRecords.splice(-1-i,0,s),s.langSys}}},getFeatureTable:function(t,e,n,r){var i=this.getLangSysTable(t,e,r);if(i){for(var s,o=i.featureIndexes,a=this.font.tables[this.tableName].features,l=0;l<o.length;l++)if(s=a[o[l]],s.tag===n)return s.feature;if(r){var u=a.length;return On.assert(u===0||n>=a[u-1].tag,"Features must be added in alphabetical order."),s={tag:n,feature:{params:0,lookupListIndexes:[]}},a.push(s),o.push(u),s.feature}}},getLookupTables:function(t,e,n,r,i){var s=this.getFeatureTable(t,e,n,i),o=[];if(s){for(var a,l=s.lookupListIndexes,u=this.font.tables[this.tableName].lookups,c=0;c<l.length;c++)a=u[l[c]],a.lookupType===r&&o.push(a);if(o.length===0&&i){a={lookupType:r,lookupFlag:0,subtables:[],markFilteringSet:void 0};var h=u.length;return u.push(a),l.push(h),[a]}}return o},getGlyphClass:function(t,e){switch(t.format){case 1:return t.startGlyph<=e&&e<t.startGlyph+t.classes.length?t.classes[e-t.startGlyph]:0;case 2:var n=oL(t.ranges,e);return n?n.classId:0}},getCoverageIndex:function(t,e){switch(t.format){case 1:var n=sL(t.glyphs,e);return n>=0?n:-1;case 2:var r=oL(t.ranges,e);return r?r.index+e-r.start:-1}},expandCoverage:function(t){if(t.format===1)return t.glyphs;for(var e=[],n=t.ranges,r=0;r<n.length;r++)for(var i=n[r],s=i.start,o=i.end,a=s;a<=o;a++)e.push(a);return e}};function _v(t){Sv.call(this,t,"gpos")}_v.prototype=Sv.prototype;_v.prototype.init=function(){var t=this.getDefaultScriptName();this.defaultKerningTables=this.getKerningTables(t)};_v.prototype.getKerningValue=function(t,e,n){for(var r=0;r<t.length;r++)for(var i=t[r].subtables,s=0;s<i.length;s++){var o=i[s],a=this.getCoverageIndex(o.coverage,e);if(!(a<0))switch(o.posFormat){case 1:for(var l=o.pairSets[a],u=0;u<l.length;u++){var c=l[u];if(c.secondGlyph===n)return c.value1&&c.value1.xAdvance||0}break;case 2:var h=this.getGlyphClass(o.classDef1,e),f=this.getGlyphClass(o.classDef2,n),d=o.classRecords[h][f];return d.value1&&d.value1.xAdvance||0}}return 0};_v.prototype.getKerningTables=function(t,e){if(this.font.tables.gpos)return this.getLookupTables(t,e,"kern",2)};function fa(t){Sv.call(this,t,"gsub")}function QZ(t,e){var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function F3(t,e,n){for(var r=t.subtables,i=0;i<r.length;i++){var s=r[i];if(s.substFormat===e)return s}if(n)return r.push(n),n}fa.prototype=Sv.prototype;fa.prototype.createDefaultTable=function(){return{version:1,scripts:[{tag:"DFLT",script:{defaultLangSys:{reserved:0,reqFeatureIndex:65535,featureIndexes:[]},langSysRecords:[]}}],features:[],lookups:[]}};fa.prototype.getSingle=function(t,e,n){for(var r=[],i=this.getLookupTables(e,n,t,1),s=0;s<i.length;s++)for(var o=i[s].subtables,a=0;a<o.length;a++){var l=o[a],u=this.expandCoverage(l.coverage),c=void 0;if(l.substFormat===1){var h=l.deltaGlyphId;for(c=0;c<u.length;c++){var f=u[c];r.push({sub:f,by:f+h})}}else{var d=l.substitute;for(c=0;c<u.length;c++)r.push({sub:u[c],by:d[c]})}}return r};fa.prototype.getMultiple=function(t,e,n){for(var r=[],i=this.getLookupTables(e,n,t,2),s=0;s<i.length;s++)for(var o=i[s].subtables,a=0;a<o.length;a++){var l=o[a],u=this.expandCoverage(l.coverage),c=void 0;for(c=0;c<u.length;c++){var h=u[c],f=l.sequences[c];r.push({sub:h,by:f})}}return r};fa.prototype.getAlternates=function(t,e,n){for(var r=[],i=this.getLookupTables(e,n,t,3),s=0;s<i.length;s++)for(var o=i[s].subtables,a=0;a<o.length;a++)for(var l=o[a],u=this.expandCoverage(l.coverage),c=l.alternateSets,h=0;h<u.length;h++)r.push({sub:u[h],by:c[h]});return r};fa.prototype.getLigatures=function(t,e,n){for(var r=[],i=this.getLookupTables(e,n,t,4),s=0;s<i.length;s++)for(var o=i[s].subtables,a=0;a<o.length;a++)for(var l=o[a],u=this.expandCoverage(l.coverage),c=l.ligatureSets,h=0;h<u.length;h++)for(var f=u[h],d=c[h],v=0;v<d.length;v++){var x=d[v];r.push({sub:[f].concat(x.components),by:x.ligGlyph})}return r};fa.prototype.addSingle=function(t,e,n,r){var i=this.getLookupTables(n,r,t,1,!0)[0],s=F3(i,2,{substFormat:2,coverage:{format:1,glyphs:[]},substitute:[]});On.assert(s.coverage.format===1,"Single: unable to modify coverage table format "+s.coverage.format);var o=e.sub,a=this.binSearch(s.coverage.glyphs,o);a<0&&(a=-1-a,s.coverage.glyphs.splice(a,0,o),s.substitute.splice(a,0,0)),s.substitute[a]=e.by};fa.prototype.addMultiple=function(t,e,n,r){On.assert(e.by instanceof Array&&e.by.length>1,'Multiple: "by" must be an array of two or more ids');var i=this.getLookupTables(n,r,t,2,!0)[0],s=F3(i,1,{substFormat:1,coverage:{format:1,glyphs:[]},sequences:[]});On.assert(s.coverage.format===1,"Multiple: unable to modify coverage table format "+s.coverage.format);var o=e.sub,a=this.binSearch(s.coverage.glyphs,o);a<0&&(a=-1-a,s.coverage.glyphs.splice(a,0,o),s.sequences.splice(a,0,0)),s.sequences[a]=e.by};fa.prototype.addAlternate=function(t,e,n,r){var i=this.getLookupTables(n,r,t,3,!0)[0],s=F3(i,1,{substFormat:1,coverage:{format:1,glyphs:[]},alternateSets:[]});On.assert(s.coverage.format===1,"Alternate: unable to modify coverage table format "+s.coverage.format);var o=e.sub,a=this.binSearch(s.coverage.glyphs,o);a<0&&(a=-1-a,s.coverage.glyphs.splice(a,0,o),s.alternateSets.splice(a,0,0)),s.alternateSets[a]=e.by};fa.prototype.addLigature=function(t,e,n,r){var i=this.getLookupTables(n,r,t,4,!0)[0],s=i.subtables[0];s||(s={substFormat:1,coverage:{format:1,glyphs:[]},ligatureSets:[]},i.subtables[0]=s),On.assert(s.coverage.format===1,"Ligature: unable to modify coverage table format "+s.coverage.format);var o=e.sub[0],a=e.sub.slice(1),l={ligGlyph:e.by,components:a},u=this.binSearch(s.coverage.glyphs,o);if(u>=0){for(var c=s.ligatureSets[u],h=0;h<c.length;h++)if(QZ(c[h].components,a))return;c.push(l)}else u=-1-u,s.coverage.glyphs.splice(u,0,o),s.ligatureSets.splice(u,0,[l])};fa.prototype.getFeature=function(t,e,n){if(/ss\d\d/.test(t))return this.getSingle(t,e,n);switch(t){case"aalt":case"salt":return this.getSingle(t,e,n).concat(this.getAlternates(t,e,n));case"dlig":case"liga":case"rlig":return this.getLigatures(t,e,n);case"ccmp":return this.getMultiple(t,e,n).concat(this.getLigatures(t,e,n));case"stch":return this.getMultiple(t,e,n)}};fa.prototype.add=function(t,e,n,r){if(/ss\d\d/.test(t))return this.addSingle(t,e,n,r);switch(t){case"aalt":case"salt":return typeof e.by=="number"?this.addSingle(t,e,n,r):this.addAlternate(t,e,n,r);case"dlig":case"liga":case"rlig":return this.addLigature(t,e,n,r);case"ccmp":return e.by instanceof Array?this.addMultiple(t,e,n,r):this.addLigature(t,e,n,r)}};function e$(){return typeof window<"u"}function t$(t){for(var e=new Buffer(t.byteLength),n=new Uint8Array(t),r=0;r<e.length;++r)e[r]=n[r];return e}function Ag(t,e){if(!t)throw e}function aL(t,e,n,r,i){var s;return(e&r)>0?(s=t.parseByte(),e&i||(s=-s),s=n+s):(e&i)>0?s=n:s=n+t.parseShort(),s}function fF(t,e,n){var r=new Vn.Parser(e,n);t.numberOfContours=r.parseShort(),t._xMin=r.parseShort(),t._yMin=r.parseShort(),t._xMax=r.parseShort(),t._yMax=r.parseShort();var i,s;if(t.numberOfContours>0){for(var o=t.endPointIndices=[],a=0;a<t.numberOfContours;a+=1)o.push(r.parseUShort());t.instructionLength=r.parseUShort(),t.instructions=[];for(var l=0;l<t.instructionLength;l+=1)t.instructions.push(r.parseByte());var u=o[o.length-1]+1;i=[];for(var c=0;c<u;c+=1)if(s=r.parseByte(),i.push(s),(s&8)>0)for(var h=r.parseByte(),f=0;f<h;f+=1)i.push(s),c+=1;if(On.argument(i.length===u,"Bad flags."),o.length>0){var d=[],v;if(u>0){for(var x=0;x<u;x+=1)s=i[x],v={},v.onCurve=!!(s&1),v.lastPointOfContour=o.indexOf(x)>=0,d.push(v);for(var w=0,g=0;g<u;g+=1)s=i[g],v=d[g],v.x=aL(r,s,w,2,16),w=v.x;for(var S=0,_=0;_<u;_+=1)s=i[_],v=d[_],v.y=aL(r,s,S,4,32),S=v.y}t.points=d}else t.points=[]}else if(t.numberOfContours===0)t.points=[];else{t.isComposite=!0,t.points=[],t.components=[];for(var T=!0;T;){i=r.parseUShort();var L={glyphIndex:r.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0};(i&1)>0?(i&2)>0?(L.dx=r.parseShort(),L.dy=r.parseShort()):L.matchedPoints=[r.parseUShort(),r.parseUShort()]:(i&2)>0?(L.dx=r.parseChar(),L.dy=r.parseChar()):L.matchedPoints=[r.parseByte(),r.parseByte()],(i&8)>0?L.xScale=L.yScale=r.parseF2Dot14():(i&64)>0?(L.xScale=r.parseF2Dot14(),L.yScale=r.parseF2Dot14()):(i&128)>0&&(L.xScale=r.parseF2Dot14(),L.scale01=r.parseF2Dot14(),L.scale10=r.parseF2Dot14(),L.yScale=r.parseF2Dot14()),t.components.push(L),T=!!(i&32)}if(i&256){t.instructionLength=r.parseUShort(),t.instructions=[];for(var k=0;k<t.instructionLength;k+=1)t.instructions.push(r.parseByte())}}}function e_(t,e){for(var n=[],r=0;r<t.length;r+=1){var i=t[r],s={x:e.xScale*i.x+e.scale01*i.y+e.dx,y:e.scale10*i.x+e.yScale*i.y+e.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour};n.push(s)}return n}function n$(t){for(var e=[],n=[],r=0;r<t.length;r+=1){var i=t[r];n.push(i),i.lastPointOfContour&&(e.push(n),n=[])}return On.argument(n.length===0,"There are still points left in the current contour."),e}function dF(t){var e=new as;if(!t)return e;for(var n=n$(t),r=0;r<n.length;++r){var i=n[r],s=null,o=i[i.length-1],a=i[0];if(o.onCurve)e.moveTo(o.x,o.y);else if(a.onCurve)e.moveTo(a.x,a.y);else{var l={x:(o.x+a.x)*.5,y:(o.y+a.y)*.5};e.moveTo(l.x,l.y)}for(var u=0;u<i.length;++u)if(s=o,o=a,a=i[(u+1)%i.length],o.onCurve)e.lineTo(o.x,o.y);else{var c=a;s.onCurve||((o.x+s.x)*.5,(o.y+s.y)*.5),a.onCurve||(c={x:(o.x+a.x)*.5,y:(o.y+a.y)*.5}),e.quadraticCurveTo(o.x,o.y,c.x,c.y)}e.closePath()}return e}function pF(t,e){if(e.isComposite)for(var n=0;n<e.components.length;n+=1){var r=e.components[n],i=t.get(r.glyphIndex);if(i.getPath(),i.points){var s=void 0;if(r.matchedPoints===void 0)s=e_(i.points,r);else{if(r.matchedPoints[0]>e.points.length-1||r.matchedPoints[1]>i.points.length-1)throw Error("Matched points out of range in "+e.name);var o=e.points[r.matchedPoints[0]],a=i.points[r.matchedPoints[1]],l={xScale:r.xScale,scale01:r.scale01,scale10:r.scale10,yScale:r.yScale,dx:0,dy:0};a=e_([a],l)[0],l.dx=o.x-a.x,l.dy=o.y-a.y,s=e_(i.points,l)}e.points=e.points.concat(s)}}return dF(e.points)}function r$(t,e,n,r){for(var i=new uu.GlyphSet(r),s=0;s<n.length-1;s+=1){var o=n[s],a=n[s+1];o!==a?i.push(s,uu.ttfGlyphLoader(r,s,fF,t,e+o,pF)):i.push(s,uu.glyphLoader(r,s))}return i}function i$(t,e,n,r){var i=new uu.GlyphSet(r);return r._push=function(s){var o=n[s],a=n[s+1];o!==a?i.push(s,uu.ttfGlyphLoader(r,s,fF,t,e+o,pF)):i.push(s,uu.glyphLoader(r,s))},i}function s$(t,e,n,r,i){return i.lowMemory?i$(t,e,n,r):r$(t,e,n,r)}var o$={getPath:dF,parse:s$},mF,ld,gF,S5;function vF(t){this.font=t,this.getCommands=function(e){return o$.getPath(e).commands},this._fpgmState=this._prepState=void 0,this._errorState=0}function a$(t){return t}function yF(t){return Math.sign(t)*Math.round(Math.abs(t))}function l$(t){return Math.sign(t)*Math.round(Math.abs(t*2))/2}function u$(t){return Math.sign(t)*(Math.round(Math.abs(t)+.5)-.5)}function c$(t){return Math.sign(t)*Math.ceil(Math.abs(t))}function h$(t){return Math.sign(t)*Math.floor(Math.abs(t))}var xF=function(t){var e=this.srPeriod,n=this.srPhase,r=this.srThreshold,i=1;return t<0&&(t=-t,i=-1),t+=r-n,t=Math.trunc(t/e)*e,t+=n,t<0?n*i:t*i},tu={x:1,y:0,axis:"x",distance:function(t,e,n,r){return(n?t.xo:t.x)-(r?e.xo:e.x)},interpolate:function(t,e,n,r){var i,s,o,a,l,u,c;if(!r||r===this){if(i=t.xo-e.xo,s=t.xo-n.xo,l=e.x-e.xo,u=n.x-n.xo,o=Math.abs(i),a=Math.abs(s),c=o+a,c===0){t.x=t.xo+(l+u)/2;return}t.x=t.xo+(l*a+u*o)/c;return}if(i=r.distance(t,e,!0,!0),s=r.distance(t,n,!0,!0),l=r.distance(e,e,!1,!0),u=r.distance(n,n,!1,!0),o=Math.abs(i),a=Math.abs(s),c=o+a,c===0){tu.setRelative(t,t,(l+u)/2,r,!0);return}tu.setRelative(t,t,(l*a+u*o)/c,r,!0)},normalSlope:Number.NEGATIVE_INFINITY,setRelative:function(t,e,n,r,i){if(!r||r===this){t.x=(i?e.xo:e.x)+n;return}var s=i?e.xo:e.x,o=i?e.yo:e.y,a=s+n*r.x,l=o+n*r.y;t.x=a+(t.y-l)/r.normalSlope},slope:0,touch:function(t){t.xTouched=!0},touched:function(t){return t.xTouched},untouch:function(t){t.xTouched=!1}},Qu={x:0,y:1,axis:"y",distance:function(t,e,n,r){return(n?t.yo:t.y)-(r?e.yo:e.y)},interpolate:function(t,e,n,r){var i,s,o,a,l,u,c;if(!r||r===this){if(i=t.yo-e.yo,s=t.yo-n.yo,l=e.y-e.yo,u=n.y-n.yo,o=Math.abs(i),a=Math.abs(s),c=o+a,c===0){t.y=t.yo+(l+u)/2;return}t.y=t.yo+(l*a+u*o)/c;return}if(i=r.distance(t,e,!0,!0),s=r.distance(t,n,!0,!0),l=r.distance(e,e,!1,!0),u=r.distance(n,n,!1,!0),o=Math.abs(i),a=Math.abs(s),c=o+a,c===0){Qu.setRelative(t,t,(l+u)/2,r,!0);return}Qu.setRelative(t,t,(l*a+u*o)/c,r,!0)},normalSlope:0,setRelative:function(t,e,n,r,i){if(!r||r===this){t.y=(i?e.yo:e.y)+n;return}var s=i?e.xo:e.x,o=i?e.yo:e.y,a=s+n*r.x,l=o+n*r.y;t.y=l+r.normalSlope*(t.x-a)},slope:Number.POSITIVE_INFINITY,touch:function(t){t.yTouched=!0},touched:function(t){return t.yTouched},untouch:function(t){t.yTouched=!1}};Object.freeze(tu);Object.freeze(Qu);function bv(t,e){this.x=t,this.y=e,this.axis=void 0,this.slope=e/t,this.normalSlope=-t/e,Object.freeze(this)}bv.prototype.distance=function(t,e,n,r){return this.x*tu.distance(t,e,n,r)+this.y*Qu.distance(t,e,n,r)};bv.prototype.interpolate=function(t,e,n,r){var i,s,o,a,l,u,c;if(o=r.distance(t,e,!0,!0),a=r.distance(t,n,!0,!0),i=r.distance(e,e,!1,!0),s=r.distance(n,n,!1,!0),l=Math.abs(o),u=Math.abs(a),c=l+u,c===0){this.setRelative(t,t,(i+s)/2,r,!0);return}this.setRelative(t,t,(i*u+s*l)/c,r,!0)};bv.prototype.setRelative=function(t,e,n,r,i){r=r||this;var s=i?e.xo:e.x,o=i?e.yo:e.y,a=s+n*r.x,l=o+n*r.y,u=r.normalSlope,c=this.slope,h=t.x,f=t.y;t.x=(c*h-u*a+l-f)/(c-u),t.y=c*(t.x-h)+f};bv.prototype.touch=function(t){t.xTouched=!0,t.yTouched=!0};function Mv(t,e){var n=Math.sqrt(t*t+e*e);return t/=n,e/=n,t===1&&e===0?tu:t===0&&e===1?Qu:new bv(t,e)}function nc(t,e,n,r){this.x=this.xo=Math.round(t*64)/64,this.y=this.yo=Math.round(e*64)/64,this.lastPointOfContour=n,this.onCurve=r,this.prevPointOnContour=void 0,this.nextPointOnContour=void 0,this.xTouched=!1,this.yTouched=!1,Object.preventExtensions(this)}nc.prototype.nextTouched=function(t){for(var e=this.nextPointOnContour;!t.touched(e)&&e!==this;)e=e.nextPointOnContour;return e};nc.prototype.prevTouched=function(t){for(var e=this.prevPointOnContour;!t.touched(e)&&e!==this;)e=e.prevPointOnContour;return e};var Z0=Object.freeze(new nc(0,0)),f$={cvCutIn:17/16,deltaBase:9,deltaShift:.125,loop:1,minDis:1,autoFlip:!0};function ph(t,e){switch(this.env=t,this.stack=[],this.prog=e,t){case"glyf":this.zp0=this.zp1=this.zp2=1,this.rp0=this.rp1=this.rp2=0;case"prep":this.fv=this.pv=this.dpv=tu,this.round=yF}}vF.prototype.exec=function(t,e){if(typeof e!="number")throw new Error("Point size is not a number!");if(!(this._errorState>2)){var n=this.font,r=this._prepState;if(!r||r.ppem!==e){var i=this._fpgmState;if(!i){ph.prototype=f$,i=this._fpgmState=new ph("fpgm",n.tables.fpgm),i.funcs=[],i.font=n,exports.DEBUG&&(console.log("---EXEC FPGM---"),i.step=-1);try{ld(i)}catch(u){console.log("Hinting error in FPGM:"+u),this._errorState=3;return}}ph.prototype=i,r=this._prepState=new ph("prep",n.tables.prep),r.ppem=e;var s=n.tables.cvt;if(s)for(var o=r.cvt=new Array(s.length),a=e/n.unitsPerEm,l=0;l<s.length;l++)o[l]=s[l]*a;else r.cvt=[];exports.DEBUG&&(console.log("---EXEC PREP---"),r.step=-1);try{ld(r)}catch(u){this._errorState<2&&console.log("Hinting error in PREP:"+u),this._errorState=2}}if(!(this._errorState>1))try{return gF(t,r)}catch(u){this._errorState<1&&(console.log("Hinting error:"+u),console.log("Note: further hinting errors are silenced")),this._errorState=1;return}}};gF=function(t,e){var n=e.ppem/e.font.unitsPerEm,r=n,i=t.components,s,o,a;if(ph.prototype=e,!i)a=new ph("glyf",t.instructions),exports.DEBUG&&(console.log("---EXEC GLYPH---"),a.step=-1),S5(t,a,n,r),o=a.gZone;else{var l=e.font;o=[],s=[];for(var u=0;u<i.length;u++){var c=i[u],h=l.glyphs.get(c.glyphIndex);a=new ph("glyf",h.instructions),exports.DEBUG&&(console.log("---EXEC COMP "+u+"---"),a.step=-1),S5(h,a,n,r);for(var f=Math.round(c.dx*n),d=Math.round(c.dy*r),v=a.gZone,x=a.contours,w=0;w<v.length;w++){var g=v[w];g.xTouched=g.yTouched=!1,g.xo=g.x=g.x+f,g.yo=g.y=g.y+d}var S=o.length;o.push.apply(o,v);for(var _=0;_<x.length;_++)s.push(x[_]+S)}t.instructions&&!a.inhibitGridFit&&(a=new ph("glyf",t.instructions),a.gZone=a.z0=a.z1=a.z2=o,a.contours=s,o.push(new nc(0,0),new nc(Math.round(t.advanceWidth*n),0)),exports.DEBUG&&(console.log("---EXEC COMPOSITE---"),a.step=-1),ld(a),o.length-=2)}return o};S5=function(t,e,n,r){for(var i=t.points||[],s=i.length,o=e.gZone=e.z0=e.z1=e.z2=[],a=e.contours=[],l,u=0;u<s;u++)l=i[u],o[u]=new nc(l.x*n,l.y*r,l.lastPointOfContour,l.onCurve);for(var c,h,f=0;f<s;f++)l=o[f],c||(c=l,a.push(f)),l.lastPointOfContour?(l.nextPointOnContour=c,c.prevPointOnContour=l,c=void 0):(h=o[f+1],l.nextPointOnContour=h,h.prevPointOnContour=l);if(!e.inhibitGridFit){if(exports.DEBUG){console.log("PROCESSING GLYPH",e.stack);for(var d=0;d<s;d++)console.log(d,o[d].x,o[d].y)}if(o.push(new nc(0,0),new nc(Math.round(t.advanceWidth*n),0)),ld(e),o.length-=2,exports.DEBUG){console.log("FINISHED GLYPH",e.stack);for(var v=0;v<s;v++)console.log(v,o[v].x,o[v].y)}}};ld=function(t){var e=t.prog;if(e){var n=e.length,r;for(t.ip=0;t.ip<n;t.ip++){if(exports.DEBUG&&t.step++,r=mF[e[t.ip]],!r)throw new Error("unknown instruction: 0x"+Number(e[t.ip]).toString(16));r(t)}}};function Gx(t){for(var e=t.tZone=new Array(t.gZone.length),n=0;n<e.length;n++)e[n]=new nc(0,0)}function wF(t,e){var n=t.prog,r=t.ip,i=1,s;do if(s=n[++r],s===88)i++;else if(s===89)i--;else if(s===64)r+=n[r+1]+1;else if(s===65)r+=2*n[r+1]+1;else if(s>=176&&s<=183)r+=s-176+1;else if(s>=184&&s<=191)r+=(s-184+1)*2;else if(e&&i===1&&s===27)break;while(i>0);t.ip=r}function lL(t,e){exports.DEBUG&&console.log(e.step,"SVTCA["+t.axis+"]"),e.fv=e.pv=e.dpv=t}function uL(t,e){exports.DEBUG&&console.log(e.step,"SPVTCA["+t.axis+"]"),e.pv=e.dpv=t}function cL(t,e){exports.DEBUG&&console.log(e.step,"SFVTCA["+t.axis+"]"),e.fv=t}function hL(t,e){var n=e.stack,r=n.pop(),i=n.pop(),s=e.z2[r],o=e.z1[i];exports.DEBUG&&console.log("SPVTL["+t+"]",r,i);var a,l;t?(a=s.y-o.y,l=o.x-s.x):(a=o.x-s.x,l=o.y-s.y),e.pv=e.dpv=Mv(a,l)}function fL(t,e){var n=e.stack,r=n.pop(),i=n.pop(),s=e.z2[r],o=e.z1[i];exports.DEBUG&&console.log("SFVTL["+t+"]",r,i);var a,l;t?(a=s.y-o.y,l=o.x-s.x):(a=o.x-s.x,l=o.y-s.y),e.fv=Mv(a,l)}function d$(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"SPVFS[]",n,r),t.pv=t.dpv=Mv(r,n)}function p$(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"SPVFS[]",n,r),t.fv=Mv(r,n)}function m$(t){var e=t.stack,n=t.pv;exports.DEBUG&&console.log(t.step,"GPV[]"),e.push(n.x*16384),e.push(n.y*16384)}function g$(t){var e=t.stack,n=t.fv;exports.DEBUG&&console.log(t.step,"GFV[]"),e.push(n.x*16384),e.push(n.y*16384)}function v$(t){t.fv=t.pv,exports.DEBUG&&console.log(t.step,"SFVTPV[]")}function y$(t){var e=t.stack,n=e.pop(),r=e.pop(),i=e.pop(),s=e.pop(),o=e.pop(),a=t.z0,l=t.z1,u=a[n],c=a[r],h=l[i],f=l[s],d=t.z2[o];exports.DEBUG&&console.log("ISECT[], ",n,r,i,s,o);var v=u.x,x=u.y,w=c.x,g=c.y,S=h.x,_=h.y,T=f.x,L=f.y,k=(v-w)*(_-L)-(x-g)*(S-T),N=v*g-x*w,R=S*L-_*T;d.x=(N*(S-T)-R*(v-w))/k,d.y=(N*(_-L)-R*(x-g))/k}function x$(t){t.rp0=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SRP0[]",t.rp0)}function w$(t){t.rp1=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SRP1[]",t.rp1)}function S$(t){t.rp2=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SRP2[]",t.rp2)}function _$(t){var e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZP0[]",e),t.zp0=e,e){case 0:t.tZone||Gx(t),t.z0=t.tZone;break;case 1:t.z0=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function b$(t){var e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZP1[]",e),t.zp1=e,e){case 0:t.tZone||Gx(t),t.z1=t.tZone;break;case 1:t.z1=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function M$(t){var e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZP2[]",e),t.zp2=e,e){case 0:t.tZone||Gx(t),t.z2=t.tZone;break;case 1:t.z2=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function E$(t){var e=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"SZPS[]",e),t.zp0=t.zp1=t.zp2=e,e){case 0:t.tZone||Gx(t),t.z0=t.z1=t.z2=t.tZone;break;case 1:t.z0=t.z1=t.z2=t.gZone;break;default:throw new Error("Invalid zone pointer")}}function A$(t){t.loop=t.stack.pop(),exports.DEBUG&&console.log(t.step,"SLOOP[]",t.loop)}function T$(t){exports.DEBUG&&console.log(t.step,"RTG[]"),t.round=yF}function C$(t){exports.DEBUG&&console.log(t.step,"RTHG[]"),t.round=u$}function L$(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SMD[]",e),t.minDis=e/64}function P$(t){exports.DEBUG&&console.log(t.step,"ELSE[]"),wF(t,!1)}function R$(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"JMPR[]",e),t.ip+=e-1}function k$(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SCVTCI[]",e),t.cvCutIn=e/64}function I$(t){var e=t.stack;exports.DEBUG&&console.log(t.step,"DUP[]"),e.push(e[e.length-1])}function t_(t){exports.DEBUG&&console.log(t.step,"POP[]"),t.stack.pop()}function N$(t){exports.DEBUG&&console.log(t.step,"CLEAR[]"),t.stack.length=0}function F$(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"SWAP[]"),e.push(n),e.push(r)}function D$(t){var e=t.stack;exports.DEBUG&&console.log(t.step,"DEPTH[]"),e.push(e.length)}function O$(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"LOOPCALL[]",n,r);var i=t.ip,s=t.prog;t.prog=t.funcs[n];for(var o=0;o<r;o++)ld(t),exports.DEBUG&&console.log(++t.step,o+1<r?"next loopcall":"done loopcall",o);t.ip=i,t.prog=s}function U$(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"CALL[]",e);var n=t.ip,r=t.prog;t.prog=t.funcs[e],ld(t),t.ip=n,t.prog=r,exports.DEBUG&&console.log(++t.step,"returning from",e)}function B$(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"CINDEX[]",n),e.push(e[e.length-n])}function z$(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"MINDEX[]",n),e.push(e.splice(e.length-n,1)[0])}function H$(t){if(t.env!=="fpgm")throw new Error("FDEF not allowed here");var e=t.stack,n=t.prog,r=t.ip,i=e.pop(),s=r;for(exports.DEBUG&&console.log(t.step,"FDEF[]",i);n[++r]!==45;);t.ip=r,t.funcs[i]=n.slice(s+1,r)}function dL(t,e){var n=e.stack.pop(),r=e.z0[n],i=e.fv,s=e.pv;exports.DEBUG&&console.log(e.step,"MDAP["+t+"]",n);var o=s.distance(r,Z0);t&&(o=e.round(o)),i.setRelative(r,Z0,o,s),i.touch(r),e.rp0=e.rp1=n}function pL(t,e){var n=e.z2,r=n.length-2,i,s,o;exports.DEBUG&&console.log(e.step,"IUP["+t.axis+"]");for(var a=0;a<r;a++)i=n[a],!t.touched(i)&&(s=i.prevTouched(t),s!==i&&(o=i.nextTouched(t),s===o&&t.setRelative(i,i,t.distance(s,s,!1,!0),t,!0),t.interpolate(i,s,o,t)))}function mL(t,e){for(var n=e.stack,r=t?e.rp1:e.rp2,i=(t?e.z0:e.z1)[r],s=e.fv,o=e.pv,a=e.loop,l=e.z2;a--;){var u=n.pop(),c=l[u],h=o.distance(i,i,!1,!0);s.setRelative(c,c,h,o),s.touch(c),exports.DEBUG&&console.log(e.step,(e.loop>1?"loop "+(e.loop-a)+": ":"")+"SHP["+(t?"rp1":"rp2")+"]",u)}e.loop=1}function gL(t,e){var n=e.stack,r=t?e.rp1:e.rp2,i=(t?e.z0:e.z1)[r],s=e.fv,o=e.pv,a=n.pop(),l=e.z2[e.contours[a]],u=l;exports.DEBUG&&console.log(e.step,"SHC["+t+"]",a);var c=o.distance(i,i,!1,!0);do u!==i&&s.setRelative(u,u,c,o),u=u.nextPointOnContour;while(u!==l)}function vL(t,e){var n=e.stack,r=t?e.rp1:e.rp2,i=(t?e.z0:e.z1)[r],s=e.fv,o=e.pv,a=n.pop();exports.DEBUG&&console.log(e.step,"SHZ["+t+"]",a);var l;switch(a){case 0:l=e.tZone;break;case 1:l=e.gZone;break;default:throw new Error("Invalid zone")}for(var u,c=o.distance(i,i,!1,!0),h=l.length-2,f=0;f<h;f++)u=l[f],s.setRelative(u,u,c,o)}function G$(t){for(var e=t.stack,n=t.loop,r=t.fv,i=e.pop()/64,s=t.z2;n--;){var o=e.pop(),a=s[o];exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-n)+": ":"")+"SHPIX[]",o,i),r.setRelative(a,a,i),r.touch(a)}t.loop=1}function V$(t){for(var e=t.stack,n=t.rp1,r=t.rp2,i=t.loop,s=t.z0[n],o=t.z1[r],a=t.fv,l=t.dpv,u=t.z2;i--;){var c=e.pop(),h=u[c];exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-i)+": ":"")+"IP[]",c,n,"<->",r),a.interpolate(h,s,o,l),a.touch(h)}t.loop=1}function yL(t,e){var n=e.stack,r=n.pop()/64,i=n.pop(),s=e.z1[i],o=e.z0[e.rp0],a=e.fv,l=e.pv;a.setRelative(s,o,r,l),a.touch(s),exports.DEBUG&&console.log(e.step,"MSIRP["+t+"]",r,i),e.rp1=e.rp0,e.rp2=i,t&&(e.rp0=i)}function W$(t){for(var e=t.stack,n=t.rp0,r=t.z0[n],i=t.loop,s=t.fv,o=t.pv,a=t.z1;i--;){var l=e.pop(),u=a[l];exports.DEBUG&&console.log(t.step,(t.loop>1?"loop "+(t.loop-i)+": ":"")+"ALIGNRP[]",l),s.setRelative(u,r,0,o),s.touch(u)}t.loop=1}function j$(t){exports.DEBUG&&console.log(t.step,"RTDG[]"),t.round=l$}function xL(t,e){var n=e.stack,r=n.pop(),i=n.pop(),s=e.z0[i],o=e.fv,a=e.pv,l=e.cvt[r];exports.DEBUG&&console.log(e.step,"MIAP["+t+"]",r,"(",l,")",i);var u=a.distance(s,Z0);t&&(Math.abs(u-l)<e.cvCutIn&&(u=l),u=e.round(u)),o.setRelative(s,Z0,u,a),e.zp0===0&&(s.xo=s.x,s.yo=s.y),o.touch(s),e.rp0=e.rp1=i}function X$(t){var e=t.prog,n=t.ip,r=t.stack,i=e[++n];exports.DEBUG&&console.log(t.step,"NPUSHB[]",i);for(var s=0;s<i;s++)r.push(e[++n]);t.ip=n}function q$(t){var e=t.ip,n=t.prog,r=t.stack,i=n[++e];exports.DEBUG&&console.log(t.step,"NPUSHW[]",i);for(var s=0;s<i;s++){var o=n[++e]<<8|n[++e];o&32768&&(o=-((o^65535)+1)),r.push(o)}t.ip=e}function Y$(t){var e=t.stack,n=t.store;n||(n=t.store=[]);var r=e.pop(),i=e.pop();exports.DEBUG&&console.log(t.step,"WS",r,i),n[i]=r}function Z$(t){var e=t.stack,n=t.store,r=e.pop();exports.DEBUG&&console.log(t.step,"RS",r);var i=n&&n[r]||0;e.push(i)}function $$(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"WCVTP",n,r),t.cvt[r]=n/64}function K$(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"RCVT",n),e.push(t.cvt[n]*64)}function wL(t,e){var n=e.stack,r=n.pop(),i=e.z2[r];exports.DEBUG&&console.log(e.step,"GC["+t+"]",r),n.push(e.dpv.distance(i,Z0,t,!1)*64)}function SL(t,e){var n=e.stack,r=n.pop(),i=n.pop(),s=e.z1[r],o=e.z0[i],a=e.dpv.distance(o,s,t,t);exports.DEBUG&&console.log(e.step,"MD["+t+"]",r,i,"->",a),e.stack.push(Math.round(a*64))}function J$(t){exports.DEBUG&&console.log(t.step,"MPPEM[]"),t.stack.push(t.ppem)}function Q$(t){exports.DEBUG&&console.log(t.step,"FLIPON[]"),t.autoFlip=!0}function eK(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"LT[]",n,r),e.push(r<n?1:0)}function tK(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"LTEQ[]",n,r),e.push(r<=n?1:0)}function nK(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"GT[]",n,r),e.push(r>n?1:0)}function rK(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"GTEQ[]",n,r),e.push(r>=n?1:0)}function iK(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"EQ[]",n,r),e.push(n===r?1:0)}function sK(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"NEQ[]",n,r),e.push(n!==r?1:0)}function oK(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"ODD[]",n),e.push(Math.trunc(n)%2?1:0)}function aK(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"EVEN[]",n),e.push(Math.trunc(n)%2?0:1)}function lK(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"IF[]",e),e||(wF(t,!0),exports.DEBUG&&console.log(t.step,"EIF[]"))}function uK(t){exports.DEBUG&&console.log(t.step,"EIF[]")}function cK(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"AND[]",n,r),e.push(n&&r?1:0)}function hK(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"OR[]",n,r),e.push(n||r?1:0)}function fK(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"NOT[]",n),e.push(n?0:1)}function n_(t,e){var n=e.stack,r=n.pop(),i=e.fv,s=e.pv,o=e.ppem,a=e.deltaBase+(t-1)*16,l=e.deltaShift,u=e.z0;exports.DEBUG&&console.log(e.step,"DELTAP["+t+"]",r,n);for(var c=0;c<r;c++){var h=n.pop(),f=n.pop(),d=a+((f&240)>>4);if(d===o){var v=(f&15)-8;v>=0&&v++,exports.DEBUG&&console.log(e.step,"DELTAPFIX",h,"by",v*l);var x=u[h];i.setRelative(x,x,v*l,s)}}}function dK(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"SDB[]",n),t.deltaBase=n}function pK(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"SDS[]",n),t.deltaShift=Math.pow(.5,n)}function mK(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"ADD[]",n,r),e.push(r+n)}function gK(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"SUB[]",n,r),e.push(r-n)}function vK(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"DIV[]",n,r),e.push(r*64/n)}function yK(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"MUL[]",n,r),e.push(r*n/64)}function xK(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"ABS[]",n),e.push(Math.abs(n))}function wK(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"NEG[]",n),e.push(-n)}function SK(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"FLOOR[]",n),e.push(Math.floor(n/64)*64)}function _K(t){var e=t.stack,n=e.pop();exports.DEBUG&&console.log(t.step,"CEILING[]",n),e.push(Math.ceil(n/64)*64)}function dy(t,e){var n=e.stack,r=n.pop();exports.DEBUG&&console.log(e.step,"ROUND[]"),n.push(e.round(r/64)*64)}function bK(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"WCVTF[]",n,r),t.cvt[r]=n*t.ppem/t.font.unitsPerEm}function r_(t,e){var n=e.stack,r=n.pop(),i=e.ppem,s=e.deltaBase+(t-1)*16,o=e.deltaShift;exports.DEBUG&&console.log(e.step,"DELTAC["+t+"]",r,n);for(var a=0;a<r;a++){var l=n.pop(),u=n.pop(),c=s+((u&240)>>4);if(c===i){var h=(u&15)-8;h>=0&&h++;var f=h*o;exports.DEBUG&&console.log(e.step,"DELTACFIX",l,"by",f),e.cvt[l]+=f}}}function MK(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SROUND[]",e),t.round=xF;var n;switch(e&192){case 0:n=.5;break;case 64:n=1;break;case 128:n=2;break;default:throw new Error("invalid SROUND value")}switch(t.srPeriod=n,e&48){case 0:t.srPhase=0;break;case 16:t.srPhase=.25*n;break;case 32:t.srPhase=.5*n;break;case 48:t.srPhase=.75*n;break;default:throw new Error("invalid SROUND value")}e&=15,e===0?t.srThreshold=0:t.srThreshold=(e/8-.5)*n}function EK(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"S45ROUND[]",e),t.round=xF;var n;switch(e&192){case 0:n=Math.sqrt(2)/2;break;case 64:n=Math.sqrt(2);break;case 128:n=2*Math.sqrt(2);break;default:throw new Error("invalid S45ROUND value")}switch(t.srPeriod=n,e&48){case 0:t.srPhase=0;break;case 16:t.srPhase=.25*n;break;case 32:t.srPhase=.5*n;break;case 48:t.srPhase=.75*n;break;default:throw new Error("invalid S45ROUND value")}e&=15,e===0?t.srThreshold=0:t.srThreshold=(e/8-.5)*n}function AK(t){exports.DEBUG&&console.log(t.step,"ROFF[]"),t.round=a$}function TK(t){exports.DEBUG&&console.log(t.step,"RUTG[]"),t.round=c$}function CK(t){exports.DEBUG&&console.log(t.step,"RDTG[]"),t.round=h$}function LK(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SCANCTRL[]",e)}function _L(t,e){var n=e.stack,r=n.pop(),i=n.pop(),s=e.z2[r],o=e.z1[i];exports.DEBUG&&console.log(e.step,"SDPVTL["+t+"]",r,i);var a,l;t?(a=s.y-o.y,l=o.x-s.x):(a=o.x-s.x,l=o.y-s.y),e.dpv=Mv(a,l)}function PK(t){var e=t.stack,n=e.pop(),r=0;exports.DEBUG&&console.log(t.step,"GETINFO[]",n),n&1&&(r=35),n&32&&(r|=4096),e.push(r)}function RK(t){var e=t.stack,n=e.pop(),r=e.pop(),i=e.pop();exports.DEBUG&&console.log(t.step,"ROLL[]"),e.push(r),e.push(n),e.push(i)}function kK(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"MAX[]",n,r),e.push(Math.max(r,n))}function IK(t){var e=t.stack,n=e.pop(),r=e.pop();exports.DEBUG&&console.log(t.step,"MIN[]",n,r),e.push(Math.min(r,n))}function NK(t){var e=t.stack.pop();exports.DEBUG&&console.log(t.step,"SCANTYPE[]",e)}function FK(t){var e=t.stack.pop(),n=t.stack.pop();switch(exports.DEBUG&&console.log(t.step,"INSTCTRL[]",e,n),e){case 1:t.inhibitGridFit=!!n;return;case 2:t.ignoreCvt=!!n;return;default:throw new Error("invalid INSTCTRL[] selector")}}function Jc(t,e){var n=e.stack,r=e.prog,i=e.ip;exports.DEBUG&&console.log(e.step,"PUSHB["+t+"]");for(var s=0;s<t;s++)n.push(r[++i]);e.ip=i}function Qc(t,e){var n=e.ip,r=e.prog,i=e.stack;exports.DEBUG&&console.log(e.ip,"PUSHW["+t+"]");for(var s=0;s<t;s++){var o=r[++n]<<8|r[++n];o&32768&&(o=-((o^65535)+1)),i.push(o)}e.ip=n}function en(t,e,n,r,i,s){var o=s.stack,a=t&&o.pop(),l=o.pop(),u=s.rp0,c=s.z0[u],h=s.z1[l],f=s.minDis,d=s.fv,v=s.dpv,x,w,g,S;w=x=v.distance(h,c,!0,!0),g=w>=0?1:-1,w=Math.abs(w),t&&(S=s.cvt[a],r&&Math.abs(w-S)<s.cvCutIn&&(w=S)),n&&w<f&&(w=f),r&&(w=s.round(w)),d.setRelative(h,c,g*w,v),d.touch(h),exports.DEBUG&&console.log(s.step,(t?"MIRP[":"MDRP[")+(e?"M":"m")+(n?">":"_")+(r?"R":"_")+(i===0?"Gr":i===1?"Bl":i===2?"Wh":"")+"]",t?a+"("+s.cvt[a]+","+S+")":"",l,"(d =",x,"->",g*w,")"),s.rp1=s.rp0,s.rp2=l,e&&(s.rp0=l)}mF=[lL.bind(void 0,Qu),lL.bind(void 0,tu),uL.bind(void 0,Qu),uL.bind(void 0,tu),cL.bind(void 0,Qu),cL.bind(void 0,tu),hL.bind(void 0,0),hL.bind(void 0,1),fL.bind(void 0,0),fL.bind(void 0,1),d$,p$,m$,g$,v$,y$,x$,w$,S$,_$,b$,M$,E$,A$,T$,C$,L$,P$,R$,k$,void 0,void 0,I$,t_,N$,F$,D$,B$,z$,void 0,void 0,void 0,O$,U$,H$,void 0,dL.bind(void 0,0),dL.bind(void 0,1),pL.bind(void 0,Qu),pL.bind(void 0,tu),mL.bind(void 0,0),mL.bind(void 0,1),gL.bind(void 0,0),gL.bind(void 0,1),vL.bind(void 0,0),vL.bind(void 0,1),G$,V$,yL.bind(void 0,0),yL.bind(void 0,1),W$,j$,xL.bind(void 0,0),xL.bind(void 0,1),X$,q$,Y$,Z$,$$,K$,wL.bind(void 0,0),wL.bind(void 0,1),void 0,SL.bind(void 0,0),SL.bind(void 0,1),J$,void 0,Q$,void 0,void 0,eK,tK,nK,rK,iK,sK,oK,aK,lK,uK,cK,hK,fK,n_.bind(void 0,1),dK,pK,mK,gK,vK,yK,xK,wK,SK,_K,dy.bind(void 0,0),dy.bind(void 0,1),dy.bind(void 0,2),dy.bind(void 0,3),void 0,void 0,void 0,void 0,bK,n_.bind(void 0,2),n_.bind(void 0,3),r_.bind(void 0,1),r_.bind(void 0,2),r_.bind(void 0,3),MK,EK,void 0,void 0,AK,void 0,TK,CK,t_,t_,void 0,void 0,void 0,void 0,void 0,LK,_L.bind(void 0,0),_L.bind(void 0,1),PK,void 0,RK,kK,IK,NK,FK,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,Jc.bind(void 0,1),Jc.bind(void 0,2),Jc.bind(void 0,3),Jc.bind(void 0,4),Jc.bind(void 0,5),Jc.bind(void 0,6),Jc.bind(void 0,7),Jc.bind(void 0,8),Qc.bind(void 0,1),Qc.bind(void 0,2),Qc.bind(void 0,3),Qc.bind(void 0,4),Qc.bind(void 0,5),Qc.bind(void 0,6),Qc.bind(void 0,7),Qc.bind(void 0,8),en.bind(void 0,0,0,0,0,0),en.bind(void 0,0,0,0,0,1),en.bind(void 0,0,0,0,0,2),en.bind(void 0,0,0,0,0,3),en.bind(void 0,0,0,0,1,0),en.bind(void 0,0,0,0,1,1),en.bind(void 0,0,0,0,1,2),en.bind(void 0,0,0,0,1,3),en.bind(void 0,0,0,1,0,0),en.bind(void 0,0,0,1,0,1),en.bind(void 0,0,0,1,0,2),en.bind(void 0,0,0,1,0,3),en.bind(void 0,0,0,1,1,0),en.bind(void 0,0,0,1,1,1),en.bind(void 0,0,0,1,1,2),en.bind(void 0,0,0,1,1,3),en.bind(void 0,0,1,0,0,0),en.bind(void 0,0,1,0,0,1),en.bind(void 0,0,1,0,0,2),en.bind(void 0,0,1,0,0,3),en.bind(void 0,0,1,0,1,0),en.bind(void 0,0,1,0,1,1),en.bind(void 0,0,1,0,1,2),en.bind(void 0,0,1,0,1,3),en.bind(void 0,0,1,1,0,0),en.bind(void 0,0,1,1,0,1),en.bind(void 0,0,1,1,0,2),en.bind(void 0,0,1,1,0,3),en.bind(void 0,0,1,1,1,0),en.bind(void 0,0,1,1,1,1),en.bind(void 0,0,1,1,1,2),en.bind(void 0,0,1,1,1,3),en.bind(void 0,1,0,0,0,0),en.bind(void 0,1,0,0,0,1),en.bind(void 0,1,0,0,0,2),en.bind(void 0,1,0,0,0,3),en.bind(void 0,1,0,0,1,0),en.bind(void 0,1,0,0,1,1),en.bind(void 0,1,0,0,1,2),en.bind(void 0,1,0,0,1,3),en.bind(void 0,1,0,1,0,0),en.bind(void 0,1,0,1,0,1),en.bind(void 0,1,0,1,0,2),en.bind(void 0,1,0,1,0,3),en.bind(void 0,1,0,1,1,0),en.bind(void 0,1,0,1,1,1),en.bind(void 0,1,0,1,1,2),en.bind(void 0,1,0,1,1,3),en.bind(void 0,1,1,0,0,0),en.bind(void 0,1,1,0,0,1),en.bind(void 0,1,1,0,0,2),en.bind(void 0,1,1,0,0,3),en.bind(void 0,1,1,0,1,0),en.bind(void 0,1,1,0,1,1),en.bind(void 0,1,1,0,1,2),en.bind(void 0,1,1,0,1,3),en.bind(void 0,1,1,1,0,0),en.bind(void 0,1,1,1,0,1),en.bind(void 0,1,1,1,0,2),en.bind(void 0,1,1,1,0,3),en.bind(void 0,1,1,1,1,0),en.bind(void 0,1,1,1,1,1),en.bind(void 0,1,1,1,1,2),en.bind(void 0,1,1,1,1,3)];function Rm(t){this.char=t,this.state={},this.activeState=null}function D3(t,e,n){this.contextName=n,this.startIndex=t,this.endOffset=e}function DK(t,e,n){this.contextName=t,this.openRange=null,this.ranges=[],this.checkStart=e,this.checkEnd=n}function Ll(t,e){this.context=t,this.index=e,this.length=t.length,this.current=t[e],this.backtrack=t.slice(0,e),this.lookahead=t.slice(e+1)}function Vx(t){this.eventId=t,this.subscribers=[]}function OK(t){var e=this,n=["start","end","next","newToken","contextStart","contextEnd","insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD","updateContextsRanges"];n.forEach(function(i){Object.defineProperty(e.events,i,{value:new Vx(i)})}),t&&n.forEach(function(i){var s=t[i];typeof s=="function"&&e.events[i].subscribe(s)});var r=["insertToken","removeToken","removeRange","replaceToken","replaceRange","composeRUD"];r.forEach(function(i){e.events[i].subscribe(e.updateContextsRanges)})}function Li(t){this.tokens=[],this.registeredContexts={},this.contextCheckers=[],this.events={},this.registeredModifiers=[],OK.call(this,t)}Rm.prototype.setState=function(t,e){return this.state[t]=e,this.activeState={key:t,value:this.state[t]},this.activeState};Rm.prototype.getState=function(t){return this.state[t]||null};Li.prototype.inboundIndex=function(t){return t>=0&&t<this.tokens.length};Li.prototype.composeRUD=function(t){var e=this,n=!0,r=t.map(function(s){return e[s[0]].apply(e,s.slice(1).concat(n))}),i=function(s){return typeof s=="object"&&s.hasOwnProperty("FAIL")};if(r.every(i))return{FAIL:"composeRUD: one or more operations hasn't completed successfully",report:r.filter(i)};this.dispatch("composeRUD",[r.filter(function(s){return!i(s)})])};Li.prototype.replaceRange=function(t,e,n,r){e=e!==null?e:this.tokens.length;var i=n.every(function(o){return o instanceof Rm});if(!isNaN(t)&&this.inboundIndex(t)&&i){var s=this.tokens.splice.apply(this.tokens,[t,e].concat(n));return r||this.dispatch("replaceToken",[t,e,n]),[s,n]}else return{FAIL:"replaceRange: invalid tokens or startIndex."}};Li.prototype.replaceToken=function(t,e,n){if(!isNaN(t)&&this.inboundIndex(t)&&e instanceof Rm){var r=this.tokens.splice(t,1,e);return n||this.dispatch("replaceToken",[t,e]),[r[0],e]}else return{FAIL:"replaceToken: invalid token or index."}};Li.prototype.removeRange=function(t,e,n){e=isNaN(e)?this.tokens.length:e;var r=this.tokens.splice(t,e);return n||this.dispatch("removeRange",[r,t,e]),r};Li.prototype.removeToken=function(t,e){if(!isNaN(t)&&this.inboundIndex(t)){var n=this.tokens.splice(t,1);return e||this.dispatch("removeToken",[n,t]),n}else return{FAIL:"removeToken: invalid token index."}};Li.prototype.insertToken=function(t,e,n){var r=t.every(function(i){return i instanceof Rm});return r?(this.tokens.splice.apply(this.tokens,[e,0].concat(t)),n||this.dispatch("insertToken",[t,e]),t):{FAIL:"insertToken: invalid token(s)."}};Li.prototype.registerModifier=function(t,e,n){this.events.newToken.subscribe(function(r,i){var s=[r,i],o=e===null||e.apply(this,s)===!0,a=[r,i];if(o){var l=n.apply(this,a);r.setState(t,l)}}),this.registeredModifiers.push(t)};Vx.prototype.subscribe=function(t){return typeof t=="function"?this.subscribers.push(t)-1:{FAIL:"invalid '"+this.eventId+"' event handler"}};Vx.prototype.unsubscribe=function(t){this.subscribers.splice(t,1)};Ll.prototype.setCurrentIndex=function(t){this.index=t,this.current=this.context[t],this.backtrack=this.context.slice(0,t),this.lookahead=this.context.slice(t+1)};Ll.prototype.get=function(t){switch(!0){case t===0:return this.current;case(t<0&&Math.abs(t)<=this.backtrack.length):return this.backtrack.slice(t)[0];case(t>0&&t<=this.lookahead.length):return this.lookahead[t-1];default:return null}};Li.prototype.rangeToText=function(t){if(t instanceof D3)return this.getRangeTokens(t).map(function(e){return e.char}).join("")};Li.prototype.getText=function(){return this.tokens.map(function(t){return t.char}).join("")};Li.prototype.getContext=function(t){var e=this.registeredContexts[t];return e||null};Li.prototype.on=function(t,e){var n=this.events[t];return n?n.subscribe(e):null};Li.prototype.dispatch=function(t,e){var n=this,r=this.events[t];r instanceof Vx&&r.subscribers.forEach(function(i){i.apply(n,e||[])})};Li.prototype.registerContextChecker=function(t,e,n){if(this.getContext(t))return{FAIL:"context name '"+t+"' is already registered."};if(typeof e!="function")return{FAIL:"missing context start check."};if(typeof n!="function")return{FAIL:"missing context end check."};var r=new DK(t,e,n);return this.registeredContexts[t]=r,this.contextCheckers.push(r),r};Li.prototype.getRangeTokens=function(t){var e=t.startIndex+t.endOffset;return[].concat(this.tokens.slice(t.startIndex,e))};Li.prototype.getContextRanges=function(t){var e=this.getContext(t);return e?e.ranges:{FAIL:"context checker '"+t+"' is not registered."}};Li.prototype.resetContextsRanges=function(){var t=this.registeredContexts;for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];n.ranges=[]}};Li.prototype.updateContextsRanges=function(){this.resetContextsRanges();for(var t=this.tokens.map(function(r){return r.char}),e=0;e<t.length;e++){var n=new Ll(t,e);this.runContextCheck(n)}this.dispatch("updateContextsRanges",[this.registeredContexts])};Li.prototype.setEndOffset=function(t,e){var n=this.getContext(e).openRange.startIndex,r=new D3(n,t,e),i=this.getContext(e).ranges;return r.rangeId=e+"."+i.length,i.push(r),this.getContext(e).openRange=null,r};Li.prototype.runContextCheck=function(t){var e=this,n=t.index;this.contextCheckers.forEach(function(r){var i=r.contextName,s=e.getContext(i).openRange;if(!s&&r.checkStart(t)&&(s=new D3(n,null,i),e.getContext(i).openRange=s,e.dispatch("contextStart",[i,n])),s&&r.checkEnd(t)){var o=n-s.startIndex+1,a=e.setEndOffset(o,i);e.dispatch("contextEnd",[i,a])}})};Li.prototype.tokenize=function(t){this.tokens=[],this.resetContextsRanges();var e=Array.from(t);this.dispatch("start");for(var n=0;n<e.length;n++){var r=e[n],i=new Ll(e,n);this.dispatch("next",[i]),this.runContextCheck(i);var s=new Rm(r);this.tokens.push(s),this.dispatch("newToken",[s,i])}return this.dispatch("end",[this.tokens]),this.tokens};function Th(t){return/[\u0600-\u065F\u066A-\u06D2\u06FA-\u06FF]/.test(t)}function SF(t){return/[\u0630\u0690\u0621\u0631\u0661\u0671\u0622\u0632\u0672\u0692\u06C2\u0623\u0673\u0693\u06C3\u0624\u0694\u06C4\u0625\u0675\u0695\u06C5\u06E5\u0676\u0696\u06C6\u0627\u0677\u0697\u06C7\u0648\u0688\u0698\u06C8\u0689\u0699\u06C9\u068A\u06CA\u066B\u068B\u06CB\u068C\u068D\u06CD\u06FD\u068E\u06EE\u06FE\u062F\u068F\u06CF\u06EF]/.test(t)}function Oh(t){return/[\u0600-\u0605\u060C-\u060E\u0610-\u061B\u061E\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED]/.test(t)}function jy(t){return/[A-z]/.test(t)}function UK(t){return/\s/.test(t)}function da(t){this.font=t,this.features={}}function Rf(t){this.id=t.id,this.tag=t.tag,this.substitution=t.substitution}function Ev(t,e){if(!t)return-1;switch(e.format){case 1:return e.glyphs.indexOf(t);case 2:for(var n=e.ranges,r=0;r<n.length;r++){var i=n[r];if(t>=i.start&&t<=i.end){var s=t-i.start;return i.index+s}}break;default:return-1}return-1}function BK(t,e){var n=Ev(t,e.coverage);return n===-1?null:t+e.deltaGlyphId}function zK(t,e){var n=Ev(t,e.coverage);return n===-1?null:e.substitute[n]}function i_(t,e){for(var n=[],r=0;r<t.length;r++){var i=t[r],s=e.current;s=Array.isArray(s)?s[0]:s;var o=Ev(s,i);o!==-1&&n.push(o)}return n.length!==t.length?-1:n}function HK(t,e){var n=e.inputCoverage.length+e.lookaheadCoverage.length+e.backtrackCoverage.length;if(t.context.length<n)return[];var r=i_(e.inputCoverage,t);if(r===-1)return[];var i=e.inputCoverage.length-1;if(t.lookahead.length<e.lookaheadCoverage.length)return[];for(var s=t.lookahead.slice(i);s.length&&Oh(s[0].char);)s.shift();var o=new Ll(s,0),a=i_(e.lookaheadCoverage,o),l=[].concat(t.backtrack);for(l.reverse();l.length&&Oh(l[0].char);)l.shift();if(l.length<e.backtrackCoverage.length)return[];var u=new Ll(l,0),c=i_(e.backtrackCoverage,u),h=r.length===e.inputCoverage.length&&a.length===e.lookaheadCoverage.length&&c.length===e.backtrackCoverage.length,f=[];if(h)for(var d=0;d<e.lookupRecords.length;d++)for(var v=e.lookupRecords[d],x=v.lookupListIndex,w=this.getLookupByIndex(x),g=0;g<w.subtables.length;g++){var S=w.subtables[g],_=this.getLookupMethod(w,S),T=this.getSubstitutionType(w,S);if(T==="12")for(var L=0;L<r.length;L++){var k=t.get(L),N=_(k);N&&f.push(N)}}return f}function GK(t,e){var n=t.current,r=Ev(n,e.coverage);if(r===-1)return null;for(var i,s=e.ligatureSets[r],o=0;o<s.length;o++){i=s[o];for(var a=0;a<i.components.length;a++){var l=t.lookahead[a],u=i.components[a];if(l!==u)break;if(a===i.components.length-1)return i}}return null}function VK(t,e){var n=Ev(t,e.coverage);return n===-1?null:e.sequences[n]}da.prototype.getDefaultScriptFeaturesIndexes=function(){for(var t=this.font.tables.gsub.scripts,e=0;e<t.length;e++){var n=t[e];if(n.tag==="DFLT")return n.script.defaultLangSys.featureIndexes}return[]};da.prototype.getScriptFeaturesIndexes=function(t){var e=this.font.tables;if(!e.gsub)return[];if(!t)return this.getDefaultScriptFeaturesIndexes();for(var n=this.font.tables.gsub.scripts,r=0;r<n.length;r++){var i=n[r];if(i.tag===t&&i.script.defaultLangSys)return i.script.defaultLangSys.featureIndexes;var s=i.langSysRecords;if(s)for(var o=0;o<s.length;o++){var a=s[o];if(a.tag===t){var l=a.langSys;return l.featureIndexes}}}return this.getDefaultScriptFeaturesIndexes()};da.prototype.mapTagsToFeatures=function(t,e){for(var n={},r=0;r<t.length;r++){var i=t[r].tag,s=t[r].feature;n[i]=s}this.features[e].tags=n};da.prototype.getScriptFeatures=function(t){var e=this.features[t];if(this.features.hasOwnProperty(t))return e;var n=this.getScriptFeaturesIndexes(t);if(!n)return null;var r=this.font.tables.gsub;return e=n.map(function(i){return r.features[i]}),this.features[t]=e,this.mapTagsToFeatures(e,t),e};da.prototype.getSubstitutionType=function(t,e){var n=t.lookupType.toString(),r=e.substFormat.toString();return n+r};da.prototype.getLookupMethod=function(t,e){var n=this,r=this.getSubstitutionType(t,e);switch(r){case"11":return function(i){return BK.apply(n,[i,e])};case"12":return function(i){return zK.apply(n,[i,e])};case"63":return function(i){return HK.apply(n,[i,e])};case"41":return function(i){return GK.apply(n,[i,e])};case"21":return function(i){return VK.apply(n,[i,e])};default:throw new Error("lookupType: "+t.lookupType+" - substFormat: "+e.substFormat+" is not yet supported")}};da.prototype.lookupFeature=function(t){var e=t.contextParams,n=e.index,r=this.getFeature({tag:t.tag,script:t.script});if(!r)return new Error("font '"+this.font.names.fullName.en+"' doesn't support feature '"+t.tag+"' for script '"+t.script+"'.");for(var i=this.getFeatureLookups(r),s=[].concat(e.context),o=0;o<i.length;o++)for(var a=i[o],l=this.getLookupSubtables(a),u=0;u<l.length;u++){var c=l[u],h=this.getSubstitutionType(a,c),f=this.getLookupMethod(a,c),d=void 0;switch(h){case"11":d=f(e.current),d&&s.splice(n,1,new Rf({id:11,tag:t.tag,substitution:d}));break;case"12":d=f(e.current),d&&s.splice(n,1,new Rf({id:12,tag:t.tag,substitution:d}));break;case"63":d=f(e),Array.isArray(d)&&d.length&&s.splice(n,1,new Rf({id:63,tag:t.tag,substitution:d}));break;case"41":d=f(e),d&&s.splice(n,1,new Rf({id:41,tag:t.tag,substitution:d}));break;case"21":d=f(e.current),d&&s.splice(n,1,new Rf({id:21,tag:t.tag,substitution:d}));break}e=new Ll(s,n),!(Array.isArray(d)&&!d.length)&&(d=null)}return s.length?s:null};da.prototype.supports=function(t){if(!t.script)return!1;this.getScriptFeatures(t.script);var e=this.features.hasOwnProperty(t.script);if(!t.tag)return e;var n=this.features[t.script].some(function(r){return r.tag===t.tag});return e&&n};da.prototype.getLookupSubtables=function(t){return t.subtables||null};da.prototype.getLookupByIndex=function(t){var e=this.font.tables.gsub.lookups;return e[t]||null};da.prototype.getFeatureLookups=function(t){return t.lookupListIndexes.map(this.getLookupByIndex.bind(this))};da.prototype.getFeature=function(e){if(!this.font)return{FAIL:"No font was found"};this.features.hasOwnProperty(e.script)||this.getScriptFeatures(e.script);var n=this.features[e.script];return n?n.tags[e.tag]?this.features[e.script].tags[e.tag]:null:{FAIL:"No feature for script "+e.script}};function WK(t){var e=t.current,n=t.get(-1);return n===null&&Th(e)||!Th(n)&&Th(e)}function jK(t){var e=t.get(1);return e===null||!Th(e)}var XK={startCheck:WK,endCheck:jK};function qK(t){var e=t.current,n=t.get(-1);return(Th(e)||Oh(e))&&!Th(n)}function YK(t){var e=t.get(1);switch(!0){case e===null:return!0;case(!Th(e)&&!Oh(e)):var n=UK(e);if(!n)return!0;if(n){var r=!1;if(r=t.lookahead.some(function(i){return Th(i)||Oh(i)}),!r)return!0}break;default:return!1}}var ZK={startCheck:qK,endCheck:YK};function $K(t,e,n){e[n].setState(t.tag,t.substitution)}function KK(t,e,n){e[n].setState(t.tag,t.substitution)}function JK(t,e,n){t.substitution.forEach(function(r,i){var s=e[n+i];s.setState(t.tag,r)})}function QK(t,e,n){var r=e[n];r.setState(t.tag,t.substitution.ligGlyph);for(var i=t.substitution.components.length,s=0;s<i;s++)r=e[n+s+1],r.setState("deleted",!0)}var bL={11:$K,12:KK,63:JK,41:QK};function O3(t,e,n){t instanceof Rf&&bL[t.id]&&bL[t.id](t,e,n)}function eJ(t){for(var e=[].concat(t.backtrack),n=e.length-1;n>=0;n--){var r=e[n],i=SF(r),s=Oh(r);if(!i&&!s)return!0;if(i)return!1}return!1}function tJ(t){if(SF(t.current))return!1;for(var e=0;e<t.lookahead.length;e++){var n=t.lookahead[e],r=Oh(n);if(!r)return!0}return!1}function nJ(t){var e=this,n="arab",r=this.featuresTags[n],i=this.tokenizer.getRangeTokens(t);if(i.length!==1){var s=new Ll(i.map(function(a){return a.getState("glyphIndex")}),0),o=new Ll(i.map(function(a){return a.char}),0);i.forEach(function(a,l){if(!Oh(a.char)){s.setCurrentIndex(l),o.setCurrentIndex(l);var u=0;eJ(o)&&(u|=1),tJ(o)&&(u|=2);var c;switch(u){case 1:c="fina";break;case 2:c="init";break;case 3:c="medi";break}if(r.indexOf(c)!==-1){var h=e.query.lookupFeature({tag:c,script:n,contextParams:s});if(h instanceof Error)return console.info(h.message);h.forEach(function(f,d){f instanceof Rf&&(O3(f,i,d),s.context[d]=f.substitution)})}}})}}function ML(t,e){var n=t.map(function(r){return r.activeState.value});return new Ll(n,e||0)}function rJ(t){var e=this,n="arab",r=this.tokenizer.getRangeTokens(t),i=ML(r);i.context.forEach(function(s,o){i.setCurrentIndex(o);var a=e.query.lookupFeature({tag:"rlig",script:n,contextParams:i});a.length&&(a.forEach(function(l){return O3(l,r,o)}),i=ML(r))})}function iJ(t){var e=t.current,n=t.get(-1);return n===null&&jy(e)||!jy(n)&&jy(e)}function sJ(t){var e=t.get(1);return e===null||!jy(e)}var oJ={startCheck:iJ,endCheck:sJ};function EL(t,e){var n=t.map(function(r){return r.activeState.value});return new Ll(n,e||0)}function aJ(t){var e=this,n="latn",r=this.tokenizer.getRangeTokens(t),i=EL(r);i.context.forEach(function(s,o){i.setCurrentIndex(o);var a=e.query.lookupFeature({tag:"liga",script:n,contextParams:i});a.length&&(a.forEach(function(l){return O3(l,r,o)}),i=EL(r))})}function Dl(t){this.baseDir=t||"ltr",this.tokenizer=new Li,this.featuresTags={}}Dl.prototype.setText=function(t){this.text=t};Dl.prototype.contextChecks={latinWordCheck:oJ,arabicWordCheck:XK,arabicSentenceCheck:ZK};function s_(t){var e=this.contextChecks[t+"Check"];return this.tokenizer.registerContextChecker(t,e.startCheck,e.endCheck)}function lJ(){return s_.call(this,"latinWord"),s_.call(this,"arabicWord"),s_.call(this,"arabicSentence"),this.tokenizer.tokenize(this.text)}function uJ(){var t=this,e=this.tokenizer.getContextRanges("arabicSentence");e.forEach(function(n){var r=t.tokenizer.getRangeTokens(n);t.tokenizer.replaceRange(n.startIndex,n.endOffset,r.reverse())})}Dl.prototype.registerFeatures=function(t,e){var n=this,r=e.filter(function(i){return n.query.supports({script:t,tag:i})});this.featuresTags.hasOwnProperty(t)?this.featuresTags[t]=this.featuresTags[t].concat(r):this.featuresTags[t]=r};Dl.prototype.applyFeatures=function(t,e){if(!t)throw new Error("No valid font was provided to apply features");this.query||(this.query=new da(t));for(var n=0;n<e.length;n++){var r=e[n];this.query.supports({script:r.script})&&this.registerFeatures(r.script,r.tags)}};Dl.prototype.registerModifier=function(t,e,n){this.tokenizer.registerModifier(t,e,n)};function U3(){if(this.tokenizer.registeredModifiers.indexOf("glyphIndex")===-1)throw new Error("glyphIndex modifier is required to apply arabic presentation features.")}function cJ(){var t=this,e="arab";if(this.featuresTags.hasOwnProperty(e)){U3.call(this);var n=this.tokenizer.getContextRanges("arabicWord");n.forEach(function(r){nJ.call(t,r)})}}function hJ(){var t=this,e="arab";if(this.featuresTags.hasOwnProperty(e)){var n=this.featuresTags[e];if(n.indexOf("rlig")!==-1){U3.call(this);var r=this.tokenizer.getContextRanges("arabicWord");r.forEach(function(i){rJ.call(t,i)})}}}function fJ(){var t=this,e="latn";if(this.featuresTags.hasOwnProperty(e)){var n=this.featuresTags[e];if(n.indexOf("liga")!==-1){U3.call(this);var r=this.tokenizer.getContextRanges("latinWord");r.forEach(function(i){aJ.call(t,i)})}}}Dl.prototype.checkContextReady=function(t){return!!this.tokenizer.getContext(t)};Dl.prototype.applyFeaturesToContexts=function(){this.checkContextReady("arabicWord")&&(cJ.call(this),hJ.call(this)),this.checkContextReady("latinWord")&&fJ.call(this),this.checkContextReady("arabicSentence")&&uJ.call(this)};Dl.prototype.processText=function(t){(!this.text||this.text!==t)&&(this.setText(t),lJ.call(this),this.applyFeaturesToContexts())};Dl.prototype.getBidiText=function(t){return this.processText(t),this.tokenizer.getText()};Dl.prototype.getTextGlyphs=function(t){this.processText(t);for(var e=[],n=0;n<this.tokenizer.tokens.length;n++){var r=this.tokenizer.tokens[n];if(!r.state.deleted){var i=r.activeState.value;e.push(Array.isArray(i)?i[0]:i)}}return e};function Gr(t){t=t||{},t.tables=t.tables||{},t.empty||(Ag(t.familyName,"When creating a new Font object, familyName is required."),Ag(t.styleName,"When creating a new Font object, styleName is required."),Ag(t.unitsPerEm,"When creating a new Font object, unitsPerEm is required."),Ag(t.ascender,"When creating a new Font object, ascender is required."),Ag(t.descender<=0,"When creating a new Font object, negative descender value is required."),this.names={fontFamily:{en:t.familyName||" "},fontSubfamily:{en:t.styleName||" "},fullName:{en:t.fullName||t.familyName+" "+t.styleName},postScriptName:{en:t.postScriptName||(t.familyName+t.styleName).replace(/\s/g,"")},designer:{en:t.designer||" "},designerURL:{en:t.designerURL||" "},manufacturer:{en:t.manufacturer||" "},manufacturerURL:{en:t.manufacturerURL||" "},license:{en:t.license||" "},licenseURL:{en:t.licenseURL||" "},version:{en:t.version||"Version 0.1"},description:{en:t.description||" "},copyright:{en:t.copyright||" "},trademark:{en:t.trademark||" "}},this.unitsPerEm=t.unitsPerEm||1e3,this.ascender=t.ascender,this.descender=t.descender,this.createdTimestamp=t.createdTimestamp,this.tables=Object.assign(t.tables,{os2:Object.assign({usWeightClass:t.weightClass||this.usWeightClasses.MEDIUM,usWidthClass:t.widthClass||this.usWidthClasses.MEDIUM,fsSelection:t.fsSelection||this.fsSelectionValues.REGULAR},t.tables.os2)})),this.supported=!0,this.glyphs=new uu.GlyphSet(this,t.glyphs||[]),this.encoding=new JN(this),this.position=new _v(this),this.substitution=new fa(this),this.tables=this.tables||{},this._push=null,this._hmtxTableData={},Object.defineProperty(this,"hinting",{get:function(){if(this._hinting)return this._hinting;if(this.outlinesFormat==="truetype")return this._hinting=new vF(this)}})}Gr.prototype.hasChar=function(t){return this.encoding.charToGlyphIndex(t)!==null};Gr.prototype.charToGlyphIndex=function(t){return this.encoding.charToGlyphIndex(t)};Gr.prototype.charToGlyph=function(t){var e=this.charToGlyphIndex(t),n=this.glyphs.get(e);return n||(n=this.glyphs.get(0)),n};Gr.prototype.updateFeatures=function(t){return this.defaultRenderOptions.features.map(function(e){return e.script==="latn"?{script:"latn",tags:e.tags.filter(function(n){return t[n]})}:e})};Gr.prototype.stringToGlyphs=function(t,e){var n=this,r=new Dl,i=function(h){return n.charToGlyphIndex(h.char)};r.registerModifier("glyphIndex",null,i);var s=e?this.updateFeatures(e.features):this.defaultRenderOptions.features;r.applyFeatures(this,s);for(var o=r.getTextGlyphs(t),a=o.length,l=new Array(a),u=this.glyphs.get(0),c=0;c<a;c+=1)l[c]=this.glyphs.get(o[c])||u;return l};Gr.prototype.nameToGlyphIndex=function(t){return this.glyphNames.nameToGlyphIndex(t)};Gr.prototype.nameToGlyph=function(t){var e=this.nameToGlyphIndex(t),n=this.glyphs.get(e);return n||(n=this.glyphs.get(0)),n};Gr.prototype.glyphIndexToName=function(t){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(t):""};Gr.prototype.getKerningValue=function(t,e){t=t.index||t,e=e.index||e;var n=this.position.defaultKerningTables;return n?this.position.getKerningValue(n,t,e):this.kerningPairs[t+","+e]||0};Gr.prototype.defaultRenderOptions={kerning:!0,features:[{script:"arab",tags:["init","medi","fina","rlig"]},{script:"latn",tags:["liga","rlig"]}]};Gr.prototype.forEachGlyph=function(t,e,n,r,i,s){e=e!==void 0?e:0,n=n!==void 0?n:0,r=r!==void 0?r:72,i=Object.assign({},this.defaultRenderOptions,i);var o=1/this.unitsPerEm*r,a=this.stringToGlyphs(t,i),l;if(i.kerning){var u=i.script||this.position.getDefaultScriptName();l=this.position.getKerningTables(u,i.language)}for(var c=0;c<a.length;c+=1){var h=a[c];if(s.call(this,h,e,n,r,i),h.advanceWidth&&(e+=h.advanceWidth*o),i.kerning&&c<a.length-1){var f=l?this.position.getKerningValue(l,h.index,a[c+1].index):this.getKerningValue(h,a[c+1]);e+=f*o}i.letterSpacing?e+=i.letterSpacing*r:i.tracking&&(e+=i.tracking/1e3*r)}return e};Gr.prototype.getPath=function(t,e,n,r,i){var s=new as;return this.forEachGlyph(t,e,n,r,i,function(o,a,l,u){var c=o.getPath(a,l,u,i,this);s.extend(c)}),s};Gr.prototype.getPaths=function(t,e,n,r,i){var s=[];return this.forEachGlyph(t,e,n,r,i,function(o,a,l,u){var c=o.getPath(a,l,u,i,this);s.push(c)}),s};Gr.prototype.getAdvanceWidth=function(t,e,n){return this.forEachGlyph(t,0,0,e,n,function(){})};Gr.prototype.draw=function(t,e,n,r,i,s){this.getPath(e,n,r,i,s).draw(t)};Gr.prototype.drawPoints=function(t,e,n,r,i,s){this.forEachGlyph(e,n,r,i,s,function(o,a,l,u){o.drawPoints(t,a,l,u)})};Gr.prototype.drawMetrics=function(t,e,n,r,i,s){this.forEachGlyph(e,n,r,i,s,function(o,a,l,u){o.drawMetrics(t,a,l,u)})};Gr.prototype.getEnglishName=function(t){var e=this.names[t];if(e)return e.en};Gr.prototype.validate=function(){var t=this;function e(r,i){}function n(r){var i=t.getEnglishName(r);i&&i.trim().length>0}n("fontFamily"),n("weightName"),n("manufacturer"),n("copyright"),n("version"),this.unitsPerEm>0};Gr.prototype.toTables=function(){return JZ.fontToTable(this)};Gr.prototype.toBuffer=function(){return console.warn("Font.toBuffer is deprecated. Use Font.toArrayBuffer instead."),this.toArrayBuffer()};Gr.prototype.toArrayBuffer=function(){for(var t=this.toTables(),e=t.encode(),n=new ArrayBuffer(e.length),r=new Uint8Array(n),i=0;i<e.length;i++)r[i]=e[i];return n};Gr.prototype.download=function(t){var e=this.getEnglishName("fontFamily"),n=this.getEnglishName("fontSubfamily");t=t||e.replace(/\s/g,"")+"-"+n+".otf";var r=this.toArrayBuffer();if(e$())if(window.URL=window.URL||window.webkitURL,window.URL){var i=new DataView(r),s=new Blob([i],{type:"font/opentype"}),o=document.createElement("a");o.href=window.URL.createObjectURL(s),o.download=t;var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!1),o.dispatchEvent(a)}else console.warn("Font file could not be downloaded. Try using a different browser.");else{var l=require("fs"),u=t$(r);l.writeFileSync(t,u)}};Gr.prototype.fsSelectionValues={ITALIC:1,UNDERSCORE:2,NEGATIVE:4,OUTLINED:8,STRIKEOUT:16,BOLD:32,REGULAR:64,USER_TYPO_METRICS:128,WWS:256,OBLIQUE:512};Gr.prototype.usWidthClasses={ULTRA_CONDENSED:1,EXTRA_CONDENSED:2,CONDENSED:3,SEMI_CONDENSED:4,MEDIUM:5,SEMI_EXPANDED:6,EXPANDED:7,EXTRA_EXPANDED:8,ULTRA_EXPANDED:9};Gr.prototype.usWeightClasses={THIN:100,EXTRA_LIGHT:200,LIGHT:300,NORMAL:400,MEDIUM:500,SEMI_BOLD:600,BOLD:700,EXTRA_BOLD:800,BLACK:900};var mc=new Array(10);mc[1]=function(){var e=this.offset+this.relativeOffset,n=this.parseUShort();if(n===1)return{posFormat:1,coverage:this.parsePointer(ht.coverage),value:this.parseValueRecord()};if(n===2)return{posFormat:2,coverage:this.parsePointer(ht.coverage),values:this.parseValueRecordList()};On.assert(!1,"0x"+e.toString(16)+": GPOS lookup type 1 format must be 1 or 2.")};mc[2]=function(){var e=this.offset+this.relativeOffset,n=this.parseUShort();On.assert(n===1||n===2,"0x"+e.toString(16)+": GPOS lookup type 2 format must be 1 or 2.");var r=this.parsePointer(ht.coverage),i=this.parseUShort(),s=this.parseUShort();if(n===1)return{posFormat:n,coverage:r,valueFormat1:i,valueFormat2:s,pairSets:this.parseList(ht.pointer(ht.list(function(){return{secondGlyph:this.parseUShort(),value1:this.parseValueRecord(i),value2:this.parseValueRecord(s)}})))};if(n===2){var o=this.parsePointer(ht.classDef),a=this.parsePointer(ht.classDef),l=this.parseUShort(),u=this.parseUShort();return{posFormat:n,coverage:r,valueFormat1:i,valueFormat2:s,classDef1:o,classDef2:a,class1Count:l,class2Count:u,classRecords:this.parseList(l,ht.list(u,function(){return{value1:this.parseValueRecord(i),value2:this.parseValueRecord(s)}}))}}};mc[3]=function(){return{error:"GPOS Lookup 3 not supported"}};mc[4]=function(){return{error:"GPOS Lookup 4 not supported"}};mc[5]=function(){return{error:"GPOS Lookup 5 not supported"}};mc[6]=function(){return{error:"GPOS Lookup 6 not supported"}};mc[7]=function(){return{error:"GPOS Lookup 7 not supported"}};mc[8]=function(){return{error:"GPOS Lookup 8 not supported"}};mc[9]=function(){return{error:"GPOS Lookup 9 not supported"}};new Array(10);function _F(t,e){return typeof t!="number"||isNaN(t)?{valid:!1,message:`Parameter '${e}' must be a number`}:{valid:!0}}function dJ(t,e){return t<=0?{valid:!1,message:`Parameter '${e}' must be positive`}:{valid:!0}}function pJ(t,e,n){return t>=e?{valid:!1,message:`${n} (${t}) must be less than ${e}`}:{valid:!0}}function fu(t,e){const n=_F(t,e);return n.valid?dJ(t,e):n}function mJ(t,e,n){const r=_F(t,n);return r.valid?pJ(t,e,n):r}function du(t,e){return n=>{const r=[];for(const i of e){const s=t(n[i],i);s.valid||r.push(s.message)}return{valid:r.length===0,errors:r}}}function AL(t,e){return n=>{const r=n[t],i=n[e],s=mJ(r,i,t);return s.valid?{valid:!0,errors:[]}:{valid:!1,errors:[s.message]}}}function tm({width:t=100,depth:e=100,height:n=100}){if(t===0&&e===0&&n===0)return j0([0,0,0],[1e-7,1e-7,1e-7]);const r=t/2,i=e/2;return j0([-r,-i,0],[r,i,n])}const gJ={name:"Cuboid",create:tm,params:[{name:"width",defaultValue:100},{name:"depth",defaultValue:100},{name:"height",defaultValue:100}],validators:[du(fu,["width","depth","height"])],hasExplosion:!1};function vJ({radius:t=50}){return oY(t)}const yJ={name:"Sphere",create:vJ,params:[{name:"radius",defaultValue:50}],validators:[du(fu,["radius"])],hasExplosion:!1};function bF({radius:t=50,height:e=100}){return WN(t,e,[0,0,0],[0,0,-1])}const xJ={name:"Cylinder",create:bF,params:[{name:"radius",defaultValue:50},{name:"height",defaultValue:100}],validators:[du(fu,["radius","height"])],hasExplosion:!1};function wJ({aLength:t=80,bLength:e=50,cLength:n=30}){return uY(t,e,n)}const SJ={name:"Ellipsoid",create:wJ,params:[{name:"aLength",defaultValue:80},{name:"bLength",defaultValue:50},{name:"cLength",defaultValue:30}],validators:[du(fu,["aLength","bLength","cLength"])],hasExplosion:!1},MF=t=>t.boundingBox.center;function EF(t,e,n){return n.map(({position:r,direction:i,orientation:s})=>{const o=t(),a=e(o);let l=o.translate([r[0]-a[0],r[1]-a[1],r[2]-a[2]]);const u=[0,0,1],c=new Lt(s||i);if(c.Length>0){const h=new Lt(u).cross(c);if(h.Length>1e-10){const f=new Lt(u).getAngle(c);l=l.rotate(f,r,h)}else c.dot(new Lt(u))<0&&(l=l.rotate(180,r,[1,0,0]))}return l})}function AF(t,e,n,r,i,s=0,o=0,a=1){const l=new Lt([s,o,a]).normalized();return Array.from({length:e*n},(u,c)=>{const h=Math.floor(c/n),d=c%n*r,v=h*i,w=new Bo(new Lt(t.origin),new Lt(t.xDirection).normalized(),new Lt(t.normal).normalized()).toWorldCoords([d,v,0]);return{position:[w.x,w.y,w.z],direction:[t.normal[0],t.normal[1],t.normal[2]],orientation:[l.x,l.y,l.z]}})}function _J(t,e,n,r=0,i=0,s=1){return AF({origin:t,xDirection:e,normal:(()=>{const o=new Lt(e),a=new Lt([0,0,1]),l=Math.abs(o.normalized().dot(a))>.99?new Lt([1,0,0]):o.cross(a).normalized();return[l.x,l.y,l.z]})()},1,n,n>1?new Lt(e).Length/(n-1):0,0,r,i,s)}function bJ({count:t=5,vectorX:e=0,vectorY:n=50,vectorZ:r=50,originX:i=0,originY:s=0,originZ:o=0,boxWidth:a=10,boxDepth:l=10,boxHeight:u=10,orientationX:c=0,orientationY:h=0,orientationZ:f=1}){return P2(EF(()=>tm({width:a,depth:l,height:u}),MF,_J([i,s,o],[e,n,r],t,c,h,f)))}const MJ={name:"DiagonalCuboidPattern",create:bJ,params:[{name:"count",defaultValue:5},{name:"vectorX",defaultValue:0},{name:"vectorY",defaultValue:50},{name:"vectorZ",defaultValue:50},{name:"originX",defaultValue:0},{name:"originY",defaultValue:0},{name:"originZ",defaultValue:0},{name:"boxWidth",defaultValue:10},{name:"boxDepth",defaultValue:10},{name:"boxHeight",defaultValue:10},{name:"orientationX",defaultValue:0},{name:"orientationY",defaultValue:0},{name:"orientationZ",defaultValue:1}],validators:[du(fu,["count","boxWidth","boxDepth","boxHeight"])],hasExplosion:!1};function EJ({originX:t=0,originY:e=0,originZ:n=0,directionX:r=1,directionY:i=0,directionZ:s=0,normalX:o=0,normalY:a=0,normalZ:l=1,rowCount:u=3,colCount:c=3,xSpacing:h=30,ySpacing:f=30,boxWidth:d=10,boxDepth:v=10,boxHeight:x=10,orientationX:w=0,orientationY:g=0,orientationZ:S=1}){return P2(EF(()=>tm({width:d,depth:v,height:x}),MF,AF({origin:[t,e,n],xDirection:[r,i,s],normal:[o,a,l]},u,c,h,f,w,g,S)))}const AJ={name:"RectangularCuboidGrid",create:EJ,params:[{name:"originX",defaultValue:0},{name:"originY",defaultValue:0},{name:"originZ",defaultValue:0},{name:"directionX",defaultValue:1},{name:"directionY",defaultValue:0},{name:"directionZ",defaultValue:0},{name:"normalX",defaultValue:0},{name:"normalY",defaultValue:0},{name:"normalZ",defaultValue:1},{name:"rowCount",defaultValue:3},{name:"colCount",defaultValue:3},{name:"xSpacing",defaultValue:30},{name:"ySpacing",defaultValue:30},{name:"boxWidth",defaultValue:10},{name:"boxDepth",defaultValue:10},{name:"boxHeight",defaultValue:10},{name:"orientationX",defaultValue:0},{name:"orientationY",defaultValue:0},{name:"orientationZ",defaultValue:1}],validators:[du(fu,["rowCount","colCount","xSpacing","ySpacing","boxWidth","boxDepth","boxHeight"])],hasExplosion:!1};function TF({depth:t=100,flangeXLenght:e=50,flangeYLenght:n=50,thickness:r=5}){const i=j0([0,-t/2,0],[e,t/2,r]),s=j0([0,-t/2,0],[r,t/2,n]);return i.fuse(s)}const TJ={name:"LProfile",create:TF,params:[{name:"depth",defaultValue:100},{name:"flangeXLenght",defaultValue:50},{name:"flangeYLenght",defaultValue:50},{name:"thickness",defaultValue:5}],validators:[du(fu,["depth","flangeXLenght","flangeYLenght","thickness"]),AL("thickness","flangeXLenght"),AL("thickness","flangeYLenght")],hasExplosion:!1};function CF({bottomRadius:t=50,topRadius:e=25,height:n=100}){return GC(t,{plane:"XY",origin:[0,0,0]}).loftWith(GC(e,{plane:"XY",origin:[0,0,-n]}),{ruled:!0})}const CJ={name:"Frustum",create:CF,params:[{name:"bottomRadius",defaultValue:50},{name:"topRadius",defaultValue:25},{name:"height",defaultValue:100}],validators:[du(fu,["bottomRadius","topRadius","height"])],hasExplosion:!1};function LF({bottomRadius:t=50,topRadius:e=25,frustumHeight:n=80,cylinderHeight:r=40}){return CF({bottomRadius:t,topRadius:e,height:n}).fuse(WN(e,r,[0,0,-n],[0,0,-1]))}const LJ={name:"Drill",create:LF,params:[{name:"bottomRadius",defaultValue:50},{name:"topRadius",defaultValue:25},{name:"frustumHeight",defaultValue:80},{name:"cylinderHeight",defaultValue:40}],validators:[du(fu,["bottomRadius","topRadius","frustumHeight","cylinderHeight"])],hasExplosion:!1};function PJ(t,e){return{main:t,helperSpaces:e}}const er={FRONT:"front",BACK:"back",LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom"},ir={FRONT_LEFT:"front_left",FRONT_RIGHT:"front_right",FRONT_TOP:"front_top",FRONT_BOTTOM:"front_bottom",BACK_LEFT:"back_left",BACK_RIGHT:"back_right",BACK_TOP:"back_top",BACK_BOTTOM:"back_bottom",LEFT_TOP:"left_top",LEFT_BOTTOM:"left_bottom",RIGHT_TOP:"right_top",RIGHT_BOTTOM:"right_bottom"};function py(t){let e;switch(t){case er.FRONT:e=new Lt([0,-1,0]);break;case er.BACK:e=new Lt([0,1,0]);break;case er.LEFT:e=new Lt([-1,0,0]);break;case er.RIGHT:e=new Lt([1,0,0]);break;case er.TOP:e=new Lt([0,0,1]);break;case er.BOTTOM:e=new Lt([0,0,-1]);break;default:throw new Error(`Unknown face identifier: ${t}`)}return e}function PF(t,e){const[[n,r,i],[s,o,a]]=t.bounds;let l;switch(e){case ir.FRONT_TOP:l=new Lt([n,r,a]);break;case ir.FRONT_BOTTOM:l=new Lt([n,r,i]);break;case ir.BACK_TOP:l=new Lt([n,o,a]);break;case ir.BACK_BOTTOM:l=new Lt([n,o,i]);break;case ir.LEFT_TOP:l=new Lt([n,r,a]);break;case ir.LEFT_BOTTOM:l=new Lt([n,r,i]);break;case ir.RIGHT_TOP:l=new Lt([s,r,a]);break;case ir.RIGHT_BOTTOM:l=new Lt([s,r,i]);break;case ir.FRONT_LEFT:l=new Lt([n,r,i]);break;case ir.FRONT_RIGHT:l=new Lt([s,r,i]);break;case ir.BACK_LEFT:l=new Lt([n,o,i]);break;case ir.BACK_RIGHT:l=new Lt([s,o,i]);break;default:throw new Error(`Unknown edge identifier: ${e}`)}return l}function RF(t,e){const[[n,r,i],[s,o,a]]=t.bounds;let l;switch(e){case ir.FRONT_TOP:l=new Lt([s,r,a]);break;case ir.FRONT_BOTTOM:l=new Lt([s,r,i]);break;case ir.BACK_TOP:l=new Lt([s,o,a]);break;case ir.BACK_BOTTOM:l=new Lt([s,o,i]);break;case ir.LEFT_TOP:l=new Lt([n,o,a]);break;case ir.LEFT_BOTTOM:l=new Lt([n,o,i]);break;case ir.RIGHT_TOP:l=new Lt([s,o,a]);break;case ir.RIGHT_BOTTOM:l=new Lt([s,o,i]);break;case ir.FRONT_LEFT:l=new Lt([n,r,a]);break;case ir.FRONT_RIGHT:l=new Lt([s,r,a]);break;case ir.BACK_LEFT:l=new Lt([n,o,a]);break;case ir.BACK_RIGHT:l=new Lt([s,o,a]);break;default:throw new Error(`Unknown edge identifier: ${e}`)}return l}function RJ(t){switch(t){case ir.FRONT_LEFT:return[er.FRONT,er.LEFT];case ir.FRONT_RIGHT:return[er.FRONT,er.RIGHT];case ir.FRONT_TOP:return[er.FRONT,er.TOP];case ir.FRONT_BOTTOM:return[er.FRONT,er.BOTTOM];case ir.BACK_LEFT:return[er.BACK,er.LEFT];case ir.BACK_RIGHT:return[er.BACK,er.RIGHT];case ir.BACK_TOP:return[er.BACK,er.TOP];case ir.BACK_BOTTOM:return[er.BACK,er.BOTTOM];case ir.LEFT_TOP:return[er.LEFT,er.TOP];case ir.LEFT_BOTTOM:return[er.LEFT,er.BOTTOM];case ir.RIGHT_TOP:return[er.RIGHT,er.TOP];case ir.RIGHT_BOTTOM:return[er.RIGHT,er.BOTTOM];default:throw new Error(`Unknown edge identifier: ${t}`)}}function kJ(t,e,n=.5,r=.5){const[[i,s,o],[a,l,u]]=t.bounds,c=Math.max(0,Math.min(1,n)),h=Math.max(0,Math.min(1,r));let f;switch(e){case er.FRONT:f=new Lt([i+(a-i)*c,s,o+(u-o)*h]);break;case er.BACK:f=new Lt([i+(a-i)*c,l,o+(u-o)*h]);break;case er.LEFT:f=new Lt([i,s+(l-s)*c,o+(u-o)*h]);break;case er.RIGHT:f=new Lt([a,s+(l-s)*c,o+(u-o)*h]);break;case er.TOP:f=new Lt([i+(a-i)*c,s+(l-s)*h,u]);break;case er.BOTTOM:f=new Lt([i+(a-i)*c,s+(l-s)*h,o]);break;default:throw new Error(`Unknown face identifier: ${e}`)}return f}function IJ(t,e,n=.5){const r=Math.max(0,Math.min(1,n)),i=PF(t,e),s=RF(t,e);return new Lt([i.x+(s.x-i.x)*r,i.y+(s.y-i.y)*r,i.z+(s.z-i.z)*r])}function NJ(t,e){const{type:n,element:r,params:i={}}=e;switch(n){case"face":return kJ(t,r,i.u,i.v);case"edge":return IJ(t,r,i.t);case"corner":if(r.includes("START")){const s=r.replace("_START","");return PF(t,s)}else if(r.includes("END")){const s=r.replace("_END","");return RF(t,s)}else throw new Error(`Invalid corner identifier: ${r}`);case"center":return new Lt(t.center);default:throw new Error(`Unknown position type: ${n}`)}}function FJ(t){const e=t.normalized(),n=Math.abs(e.x),r=Math.abs(e.y),i=Math.abs(e.z);let s;return n<=r&&n<=i?s=new Lt([0,e.z,-e.y]):r<=n&&r<=i?s=new Lt([e.z,0,-e.x]):s=new Lt([e.y,-e.x,0]),s.normalized()}function my(t,e,n,r={}){const i=NJ(t.boundingBox,e);let s;r.normal?s=new Lt(r.normal):s=DJ(t,e,r);let o;r.xDir?o=new Lt(r.xDir):o=FJ(s);const a=new od;a.coordSystemChange({origin:i.toTuple(),zDir:s.toTuple(),xDir:o.toTuple()},"reference");const l=gi(a.transform(n.wrapped));return a.delete(),s.delete(),o.delete(),i.delete(),l}function DJ(t,e,n={}){const{type:r,element:i}=e;switch(r){case"face":return py(i);case"edge":if(n.faceForEdge)return py(n.faceForEdge);{const s=RJ(i);return py(s[0])}case"corner":return n.faceForCorner?py(n.faceForCorner):new Lt([0,0,1]);case"center":default:return new Lt([0,0,1])}}function _f(t,e,n,r=!1){return r?gi(t.wrapped).mirror(e,n):t.mirror(e,n)}function OJ({width:t=50,depth:e=100,height:n=200,showHelper:r=!0,explosionFactor:i=0}){const s=tm({width:t,depth:e,height:n}),o=Math.round(n/17.5)-1;if(o<=0)return PJ(P2([]),r?[s]:[]);const a=n/(o+1),l=o>1?(e-28)/(o-1):0,u=tm({width:t-1,depth:20,height:.5}),c=u.boundingBox.center,h=my(u,{type:"face",element:er.TOP,params:{u:1.5/(t-1),v:2.25/20}},LF({bottomRadius:1.2,topRadius:.8,frustumHeight:.5*.8,cylinderHeight:.5*.2})),f=u.cut(h).cut(_f(h,"XZ",c,!0)).cut(_f(h,"YZ",c,!0)).cut(_f(_f(h,"XZ",c,!0),"YZ",c,!0)),d=f.clone(),v=TF({depth:20,flangeXLenght:4.5,flangeYLenght:4.5,thickness:.5}),x=v.boundingBox.center,w=my(v,{type:"face",element:er.BOTTOM,params:{u:1.5/4.5,v:2.25/20}},bF({radius:.800001,height:.5})),g=v.cut(w).cut(_f(w,"XZ",x,!0)),S=g.clone(),_=my(f,{type:"edge",element:ir.LEFT_BOTTOM,params:{t:.5}},g,{normal:[0,0,-1],xDir:[1,0,0]}),T=_f(_,"YZ",c,!0),L=[];let k=0,N=-e/2+14,R=a-(f.boundingBox.bounds[1][2]-f.boundingBox.bounds[0][2]);for(let J=0;J<o;J++){const ae=i*15;L.push(f.clone().translate([k,N,R])),L.push(_.clone().translate([k-ae,N,R])),L.push(T.clone().translate([k+ae,N,R])),N+=l,R+=a}const P=tm({width:600,depth:20,height:.5}),D=l,O=a,B=Math.sqrt(D*D+O*O),V=B>.001?[0,D/B,O/B]:[1,0,0],ee=my(s,{type:"face",element:er.RIGHT},P,{normal:[-1,0,0],xDir:V}).intersect(s),se=ee.clone(),ce=s.boundingBox.center,W=_f(ee,"YZ",ce,!0),Y=i*30,j=i*30;L.push(ee.translate([Y,0,0])),L.push(W.translate([-j,0,0]));const re=P2(L),I=[{id:"ST001",name:"Stringer",quantity:o,dimensions:`${t-1}200.5cm`,material:"Steel"},{id:"LP001",name:"L-Profile",quantity:o*2,dimensions:"4.54.520cm",material:"Steel"},{id:"SS001",name:"Side Stringer",quantity:2,dimensions:"Variable",material:"Steel"}];return{main:re,helperSpaces:r?[s]:[],componentData:I,technicalDrawingModels:{ST001:d,LP001:S,SS001:se}}}const UJ={name:"Staircase",create:OJ,params:[{name:"width",defaultValue:50},{name:"depth",defaultValue:100},{name:"height",defaultValue:200},{name:"showHelper",defaultValue:!0},{name:"explosionFactor",defaultValue:0}],validators:[du(fu,["width","depth","height"])],hasExplosion:!0},na={Cuboid:gJ,Sphere:yJ,Cylinder:xJ,Ellipsoid:SJ,DiagonalCuboidPattern:MJ,RectangularCuboidGrid:AJ,LProfile:TJ,Frustum:CJ,Drill:LJ,Staircase:{...UJ,hasBoM:!0,requiresPassword:!0}};function TL(t){return t.params.reduce((e,n)=>(e[n.name]=n.defaultValue,e),{})}const Tg=GR(new Bq);function BJ(){var Y;const[t,e]=Be.useState(Object.keys(na)[0]),[n,r]=Be.useState(TL(na[t])),[i,s]=Be.useState(0),[o,a]=Be.useState(null),[l,u]=Be.useState(null),[c,h]=Be.useState(null),[f,d]=Be.useState([]),[v,x]=Be.useState("3d"),[w,g]=Be.useState(!0),[S,_]=Be.useState(!1),[T,L]=Be.useState({}),{isPasswordRequired:k,verifyPasswordAttempt:N}=AO(T,L),[R,P]=Be.useState(!1),[D,O]=Be.useState("");Be.useEffect(()=>{const j=()=>{_(window.innerWidth<768),window.innerWidth<768?g(!1):g(!0)};return j(),window.addEventListener("resize",j),()=>window.removeEventListener("resize",j)},[]);const B=Be.useCallback(async()=>{console.time(`[PERF] worker call for ${t}`),console.log(`[INFO] Creating ${t} with params:`,n);const j=na[t];if(k(t,j)){P(!0),a(null),u(null),h(null),console.timeEnd(`[PERF] worker call for ${t}`);return}else P(!1);const re={...n};na[t].hasExplosion&&(re.explosionFactor=i);try{d([]);const I=await Tg.createMesh(t,re);if(console.timeEnd(`[PERF] worker call for ${t}`),I.error&&I.validationErrors)d(I.validationErrors),a(null),u(null),h(null);else if(a(I),h(I.componentData||null),v==="technical"){const X=await Tg.createProjections(t,re);u(X)}else u(null)}catch(I){console.error("Error creating model or projections:",I),d(["An error occurred while generating the model."]),a(null),u(null),h(null),console.timeEnd(`[PERF] worker call for ${t}`)}},[t,n,i,v,T,k]);Be.useEffect(()=>{B()},[B]);const V=Be.useCallback(async()=>{const j=na[t];if(k(t,j))return console.warn("Password required, cannot generate high-detail mesh yet."),null;console.log(`[INFO] Requesting high-detail mesh for ${t}`),console.time(`[PERF] worker call for ${t} (high detail)`);try{const re={...n};na[t].hasExplosion&&(re.explosionFactor=i);const I=await Tg.createMesh(t,re,"high");return console.timeEnd(`[PERF] worker call for ${t} (high detail)`),I.error?(console.error("Error generating high-detail mesh:",I.validationErrors),d(I.validationErrors||["Error generating high-detail mesh."]),null):I}catch(re){return console.error("Error requesting high-detail mesh:",re),d(["An error occurred while generating the high-detail model."]),console.timeEnd(`[PERF] worker call for ${t} (high detail)`),null}},[t,n,i,Tg,k,T]);Be.useEffect(()=>{if(v==="technical"&&o&&!l){const j={...n};na[t].hasExplosion&&(j.explosionFactor=i),Tg.createProjections(t,j).then(re=>{u(re)})}},[v,o,l,t,n,i]);const H=j=>{var I;const re=j.target.value;e(re),r(TL(na[re])),s(0),u(null),h(null),v==="bom"&&!((I=na[re])!=null&&I.hasBoM)&&x("3d")},ee=(j,re)=>{r(I=>({...I,[j]:re}))},se=j=>{s(parseFloat(j.target.value))},ce=()=>{g(!w)},W=()=>{const j=N(t,D);j.success?(O(""),P(!1),d([]),B()):d([j.error||"Verification failed"])};return Tt(nm,{children:[Tt("div",{style:{padding:S?"8px":"10px",borderBottom:"1px solid #eee",backgroundColor:"#f8f8f8",fontSize:S?"11px":"12px",margin:0,flexShrink:0},children:[Tt("div",{style:{display:"flex",flexDirection:S?"column":"row",alignItems:S?"flex-start":"center",marginBottom:"10px",gap:S?"8px":"0"},children:[Tt("div",{style:{display:"flex",alignItems:"center",width:S?"100%":"auto"},children:[Me("span",{style:{marginRight:"5px",fontWeight:"bold"},children:"Model:"}),Me("select",{value:t,onChange:H,style:{marginRight:"10px",height:S?"30px":"24px",fontSize:S?"14px":"12px",flex:S?"1":"auto"},children:Object.keys(na).map(j=>Me("option",{value:j,children:j},j))})]}),Tt("div",{style:{display:"flex",marginLeft:S?"0":"20px",borderRadius:"4px",overflow:"hidden",border:"1px solid #ccc",width:S?"100%":"auto"},children:[Me("button",{onClick:()=>x("3d"),style:{padding:S?"8px 12px":"4px 12px",border:"none",background:v==="3d"?"#4a90e2":"#f0f0f0",color:v==="3d"?"white":"#333",cursor:"pointer",fontWeight:v==="3d"?"bold":"normal",flex:S?"1":"auto",fontSize:S?"14px":"inherit"},children:"3D View"}),Me("button",{onClick:()=>x("technical"),style:{padding:S?"8px 12px":"4px 12px",border:"none",background:v==="technical"?"#4a90e2":"#f0f0f0",color:v==="technical"?"white":"#333",cursor:"pointer",fontWeight:v==="technical"?"bold":"normal",flex:S?"1":"auto",fontSize:S?"14px":"inherit"},children:"Technical Drawing"}),Me("button",{onClick:()=>x("rendering"),style:{padding:S?"8px 12px":"4px 12px",border:"none",background:v==="rendering"?"#4a90e2":"#f0f0f0",color:v==="rendering"?"white":"#333",cursor:"pointer",fontWeight:v==="rendering"?"bold":"normal",flex:S?"1":"auto",fontSize:S?"14px":"inherit"},children:"360 Rendering"}),((Y=na[t])==null?void 0:Y.hasBoM)&&Me("button",{onClick:()=>x("bom"),style:{padding:S?"8px 12px":"4px 12px",border:"none",background:v==="bom"?"#4a90e2":"#f0f0f0",color:v==="bom"?"white":"#333",cursor:"pointer",fontWeight:v==="bom"?"bold":"normal",flex:S?"1":"auto",fontSize:S?"14px":"inherit"},children:"Bill of Materials"})]}),S&&Me("div",{style:{width:"100%",display:"flex",justifyContent:"center",marginTop:"4px"},children:Me("button",{onClick:ce,style:{padding:"8px 16px",background:"#eee",border:"1px solid #ccc",borderRadius:"4px",fontSize:"14px",cursor:"pointer",width:"100%"},children:w?"Hide Parameters ":"Show Parameters "})}),v==="3d"&&na[t].hasExplosion&&Tt("div",{style:{display:"flex",alignItems:"center",marginLeft:S?"0":"15px",backgroundColor:"#e6f7ff",padding:"5px 10px",borderRadius:"4px",width:S?"100%":"auto",marginTop:S?"4px":"0"},children:[Me("span",{style:{marginRight:"8px",fontWeight:"bold"},children:"Explosion:"}),Me("input",{type:"range",min:"0",max:"1",step:"0.01",value:i,onChange:se,style:{width:S?"calc(100% - 100px)":"150px",height:S?"24px":"auto"}}),Tt("span",{style:{marginLeft:"5px",minWidth:"40px"},children:[Math.round(i*100),"%"]})]})]}),Me("div",{style:{display:w?"flex":"none",flexWrap:"wrap",gap:"10px",margin:0,padding:0},children:na[t].params.map(j=>{const{name:re,defaultValue:I}=j;if(re==="explosionFactor")return null;const X=n[re];return Tt("div",{style:{display:"flex",alignItems:"center",backgroundColor:"#fff",border:"1px solid #ccc",padding:S?"8px":"5px 8px",borderRadius:"4px",width:S?"calc(50% - 5px)":"auto"},children:[Tt("span",{style:{marginRight:"8px",fontWeight:"bold",color:"#333",fontSize:S?"13px":"inherit"},children:[re,":"]}),typeof I=="boolean"?Me("input",{id:`param-${re}`,type:"checkbox",checked:X,onChange:ae=>ee(re,ae.target.checked),style:{width:S?"20px":"auto",height:S?"20px":"auto"}}):Me("input",{id:`param-${re}`,type:"number",value:X,onChange:ae=>ee(re,parseFloat(ae.target.value)),style:{width:S?"calc(100% - 50px)":"60px",height:S?"30px":"20px",fontSize:S?"14px":"12px",flex:S?"1":"none"}})]},re)})}),f.length>0&&Tt("div",{style:{marginTop:"10px",padding:"8px 12px",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",fontSize:S?"13px":"12px"},children:[Me("div",{style:{fontWeight:"bold",marginBottom:"4px"},children:"Invalid parameters:"}),Me("ul",{style:{margin:"0",paddingLeft:"20px"},children:f.map((j,re)=>Me("li",{children:j},re))})]}),R&&Tt("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#fffbe6",border:"1px solid #ffe58f",borderRadius:"4px",display:"flex",alignItems:"center",gap:"10px"},children:[Tt("label",{htmlFor:"passwordInput",style:{fontWeight:"bold",color:"#d46b08"},children:["Password for ",t,":"]}),Me("input",{id:"passwordInput",type:"password",value:D,onChange:j=>O(j.target.value),onKeyDown:j=>j.key==="Enter"&&W(),style:{padding:"5px 8px",border:"1px solid #ccc",borderRadius:"4px",flexGrow:1}}),Me("button",{onClick:W,style:{padding:"5px 15px",border:"none",borderRadius:"4px",backgroundColor:"#4a90e2",color:"white",cursor:"pointer",fontWeight:"bold"},children:"Verify"})]})]}),Me("div",{style:{flex:1,position:"relative",overflow:"hidden",display:"flex",margin:0,padding:0},children:f.length>0?Me("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:S?"14px":"12px",color:"#999",padding:"0 20px",textAlign:"center"},children:R?"Enter password above to view model":"Fix parameters to see model"}):R?Me("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:S?"14px":"12px",color:"#999",padding:"0 20px",textAlign:"center"},children:"Enter password in the control panel above."}):Tt(nm,{children:[v==="3d"&&o?Me(GV,{children:Me(VV,{edges:o.edges,faces:o.faces,helperSpaces:o.helperSpaces||[]})}):null,v==="technical"?l?Me(Qj,{projections:l,isMobile:S}):Me("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:S?"14px":"12px",color:"#999"},children:"Loading technical drawings..."}):null,v==="rendering"?o?Me(uX,{mesh:o,isMobile:S,requestHighDetailMesh:V,selectedModel:t,params:n}):Me("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:S?"14px":"12px",color:"#999"},children:"Loading 360 rendering..."}):null,v==="bom"?c?Me(Uq,{data:c,modelName:t}):Me("div",{style:{height:"100%",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:S?"14px":"12px",color:"#999"},children:"Loading Bill of Materials..."}):null]})})]})}function zJ(){return Tt("div",{style:{maxWidth:"900px",margin:"0 auto",padding:"2rem",color:"#1E293B"},children:[Me("h1",{style:{fontSize:"2.5rem",fontWeight:"800",marginBottom:"1.5rem",color:"#1E293B"},children:"About Me & This Project"}),Tt("section",{style:{marginBottom:"2.5rem"},children:[Me("h2",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"1rem",borderBottom:"2px solid #E2E8F0",paddingBottom:"0.5rem"},children:"The Developer"}),Tt("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem",marginBottom:"1rem"},children:[Me("img",{src:"/assets/profile.jpg",alt:"Damjan Babic",style:{width:"100px",height:"100px",borderRadius:"50%",objectFit:"cover",border:"3px solid white",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),Tt("div",{children:[Me("h3",{style:{fontSize:"1.25rem",fontWeight:"600",margin:0},children:"Damjan Babic"}),Me("p",{style:{color:"#475569",marginTop:"0.25rem"},children:"CAD Developer & Consultant"})]})]}),Me("p",{style:{lineHeight:"1.7",color:"#334155",marginBottom:"1rem"},children:"Hi! I'm Damjan, a developer passionate about bridging the gap between complex engineering requirements and accessible software solutions. My focus is on parametric CAD, technical computing, and creating tools that empower designers and engineers."}),Me("p",{style:{lineHeight:"1.7",color:"#334155"},children:"I specialize in building custom CAD applications, automating design processes, and providing consulting services to help businesses leverage the power of computational design. This project showcases some of the capabilities I can offer."})]}),Tt("section",{style:{marginBottom:"2.5rem"},children:[Me("h2",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"1rem",borderBottom:"2px solid #E2E8F0",paddingBottom:"0.5rem"},children:"The Project: CAD OS Demo"}),Tt("p",{style:{lineHeight:"1.7",color:"#334155",marginBottom:"1rem"},children:["This application is a demonstration of a web-based CAD system built using modern JavaScript technologies. It leverages the power of ",Me("a",{href:"https://github.com/replicad/replicad",target:"_blank",rel:"noopener noreferrer",style:{color:"#2563EB",textDecoration:"none",fontWeight:"500"},children:"Replicad"}),", a code-first CAD library, which in turn uses the robust ",Me("a",{href:"https://dev.opencascade.org/",target:"_blank",rel:"noopener noreferrer",style:{color:"#2563EB",textDecoration:"none",fontWeight:"500"},children:"OpenCASCADE"})," geometry kernel compiled to WebAssembly."]}),Me("p",{style:{lineHeight:"1.7",color:"#334155",marginBottom:"1rem"},children:"The goal is to showcase:"}),Tt("ul",{style:{listStyle:"disc",marginLeft:"1.5rem",color:"#334155",lineHeight:"1.7"},children:[Me("li",{children:"Parametric model generation directly in the browser."}),Me("li",{children:"Interactive 3D visualization using Three.js via @react-three/fiber."}),Me("li",{children:"Automated generation of technical drawings (projections)."}),Me("li",{children:"Potential for features like Bill of Materials (BOM) generation, assembly management, and more."})]}),Me("p",{style:{lineHeight:"1.7",color:"#334155"},children:"It demonstrates how complex CAD operations can be brought to the web, offering accessibility and potential for real-time collaboration."})]}),Tt("section",{id:"contact",style:{backgroundColor:"#F8FAFC",padding:"2rem",borderRadius:"0.5rem",border:"1px solid #E2E8F0"},children:[Me("h2",{style:{fontSize:"1.5rem",fontWeight:"700",marginBottom:"1.5rem"},children:"Get In Touch"}),Me("p",{style:{lineHeight:"1.7",color:"#334155",marginBottom:"1.5rem"},children:"Interested in discussing a project, learning more about my services, or exploring collaboration opportunities? Feel free to reach out or schedule a meeting."}),Tt("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem"},children:[Tt("a",{href:"https://calendly.com/damjanbab/30min",target:"_blank",rel:"noopener noreferrer",style:{backgroundColor:"#0069ff",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",textDecoration:"none",fontWeight:"600",display:"inline-flex",alignItems:"center",gap:"0.5rem",transition:"background-color 0.2s"},children:[Tt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Me("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),Me("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),Me("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),Me("line",{x1:"3",y1:"10",x2:"21",y2:"10"}),Me("path",{d:"M8 14h.01"}),Me("path",{d:"M12 14h.01"}),Me("path",{d:"M16 14h.01"}),Me("path",{d:"M8 18h.01"}),Me("path",{d:"M12 18h.01"}),Me("path",{d:"M16 18h.01"})]}),"Schedule Meeting"]}),Tt("a",{href:"mailto:damjanbab@icloud.com",style:{backgroundColor:"#1E293B",color:"white",padding:"0.75rem 1.5rem",borderRadius:"0.375rem",textDecoration:"none",fontWeight:"600",display:"inline-flex",alignItems:"center",gap:"0.5rem",transition:"background-color 0.2s"},children:[Tt("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[Me("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),Me("polyline",{points:"22,6 12,13 2,6"})]}),"Send Email"]})]})]})]})}function HJ(){const[t,e]=Be.useState("home"),n=r=>{e(r)};return Be.useEffect(()=>{const r=i=>{i.detail&&n(i.detail)};return window.addEventListener("switchToTab",r),()=>window.removeEventListener("switchToTab",r)},[]),Tt("div",{style:{height:"100vh",display:"flex",flexDirection:"column",overflow:"hidden",margin:0,padding:0},children:[Tt("nav",{style:{backgroundColor:"#1E293B",color:"white",padding:"0.75rem 1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.1)",margin:0,flexShrink:0},children:[Tt("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[Me("h1",{style:{margin:0,fontSize:"1.5rem",fontWeight:"600",color:"#F8FAFC"},children:"CAD-OS"}),Me("span",{style:{fontSize:"0.8rem",backgroundColor:"#0EA5E9",padding:"0.2rem 0.5rem",borderRadius:"0.25rem",color:"white"},children:"v0.18.1"})]}),Tt("div",{style:{display:"flex",gap:"0.5rem"},children:[Me("button",{onClick:()=>n("home"),style:{backgroundColor:t==="home"?"#2563EB":"transparent",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"0.25rem",cursor:"pointer",fontWeight:t==="home"?"600":"400",transition:"background-color 0.2s"},children:"Home"}),Me("button",{onClick:()=>n("app"),style:{backgroundColor:t==="app"?"#2563EB":"transparent",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"0.25rem",cursor:"pointer",fontWeight:t==="app"?"600":"400",transition:"background-color 0.2s"},children:"App"}),Me("button",{onClick:()=>n("about"),style:{backgroundColor:t==="about"?"#2563EB":"transparent",color:"white",border:"none",padding:"0.5rem 1rem",borderRadius:"0.25rem",cursor:"pointer",fontWeight:t==="about"?"600":"400",transition:"background-color 0.2s"},children:"About"})]})]}),t==="home"&&Me("div",{style:{flex:1,overflow:"auto"},children:Me(fO,{})}),t==="app"&&Me(BJ,{}),t==="about"&&Me("div",{style:{flex:1,overflow:"auto"},children:Me(zJ,{})})]})}function GJ(){return Be.useEffect(()=>{const t=e=>{e.detail&&window.dispatchEvent(new CustomEvent("switchToTab",{detail:e.detail}))};return window.addEventListener("switchTab",t),()=>{window.removeEventListener("switchTab",t)}},[]),Me(HJ,{})}hO.render(Me(FL.StrictMode,{children:Me(GJ,{})}),document.getElementById("root"));export{Pr as _,VJ as c};
